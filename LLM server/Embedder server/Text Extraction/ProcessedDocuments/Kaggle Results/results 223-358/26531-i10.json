{
    "document_name": "26531-i10.docx",
    "content": [
        {
            "title": "Foreword",
            "description": "This Technical Specification has been produced by the 3rd Generation Partnership Project (3GPP).\nThe contents of the present document are subject to continuing work within the TSG and may change following formal TSG approval. Should the TSG modify the contents of the present document, it will be re-released by the TSG with an identifying change of release date and an increase in version number as follows:\nVersion x.y.z\nwhere:\nx\tthe first digit:\n1\tpresented to TSG for information;\n2\tpresented to TSG for approval;\n3\tor greater indicates TSG approved document under change control.\ny\tthe second digit is incremented for all changes of substance, i.e. technical enhancements, corrections, updates, etc.\nz\tthe third digit is incremented when editorial only changes have been incorporated in the document.\nIn the present document, modal verbs have the following meanings:\nshall\t\tindicates a mandatory requirement to do something\nshall not\tindicates an interdiction (prohibition) to do something\nThe constructions \"shall\" and \"shall not\" are confined to the context of normative provisions, and do not appear in Technical Reports.\nThe constructions \"must\" and \"must not\" are not used as substitutes for \"shall\" and \"shall not\". Their use is avoided insofar as possible, and they are not used in a normative context except in a direct citation from an external, referenced, non-3GPP document, or so as to maintain continuity of style when extending or modifying the provisions of such a referenced document.\nshould\t\tindicates a recommendation to do something\nshould not\tindicates a recommendation not to do something\nmay\t\tindicates permission to do something\nneed not\tindicates permission not to do something\nThe construction \"may not\" is ambiguous and is not used in normative elements. The unambiguous constructions \"might not\" or \"shall not\" are used instead, depending upon the meaning intended.\ncan\t\tindicates that something is possible\ncannot\t\tindicates that something is impossible\nThe constructions \"can\" and \"cannot\" are not substitutes for \"may\" and \"need not\".\nwill\t\tindicates that something is certain or expected to happen as a result of action taken by an agency the behaviour of which is outside the scope of the present document\nwill not\t\tindicates that something is certain or expected not to happen as a result of action taken by an agency the behaviour of which is outside the scope of the present document\nmight\tindicates a likelihood that something will happen as a result of action taken by some agency the behaviour of which is outside the scope of the present document\nmight not\tindicates a likelihood that something will not happen as a result of action taken by some agency the behaviour of which is outside the scope of the present document\nIn addition:\nis\t(or any other verb in the indicative mood) indicates a statement of fact\nis not\t(or any other negative verb in the indicative mood) indicates a statement of fact\nThe constructions \"is\" and \"is not\" do not indicate requirements.\n",
            "summary": "",
            "tables": [],
            "figures_meta_data": [],
            "subsections": []
        },
        {
            "title": "1\tScope",
            "description": "The present document defines a generic architecture for collecting and reporting data in the 5G System as defined in TS 23.501 [2], TS 23.502 [3] , TS 23.288 [4] and TS 29.517 [5].\n",
            "summary": "",
            "tables": [],
            "figures_meta_data": [],
            "subsections": []
        },
        {
            "title": "2\tReferences",
            "description": "The following documents contain provisions which, through reference in this text, constitute provisions of the present document.\n-\tReferences are either specific (identified by date of publication, edition number, version number, etc.) or non-specific.\n-\tFor a specific reference, subsequent revisions do not apply.\n-\tFor a non-specific reference, the latest version applies. In the case of a reference to a 3GPP document (including a GSM document), a non-specific reference implicitly refers to the latest version of that document in the same Release as the present document.\n[1]\t3GPP TR 21.905: \"Vocabulary for 3GPP Specifications\".\n[2]\t3GPP TS 23.501: \"System architecture for the 5G System (5GS)\".\n[3]\t3GPP TS 23.502: \"Procedures for the 5G System (5GS)\".\n[4]\t3GPP TS 23.288: \"Architecture enhancements for 5G System (5GS) to support network data analytics services\".\n[5]\t3GPP TS 29.517: \"5G System; Application Function Event Exposure Service; Stage 3\".\n[6]\t3GPP TS 29.510: \"Network function repository services; Stage 3\".\n[7]\t3GPP TS 29.532: \"Data Collection and Reporting; Protocols and Formats\".\n[8]\t3GPP TS 23.222: \"Common API Framework for 3GPP Northbound APIs\".\n[9]\t3GPP TS 33.501: \"Security architecture and procedures for 5G System\".\n[10]\t3GPP TS 29.522: \"5G System; Network Exposure Function Northbound APIs; Stage 3\".\n[11]\t3GPP TS 29.591: \"5G System; Network Exposure Function Southbound Services; Stage 3\".\n",
            "summary": "",
            "tables": [],
            "figures_meta_data": [],
            "subsections": []
        },
        {
            "title": "3\tDefinitions of terms, symbols and abbreviations",
            "description": "",
            "summary": "",
            "tables": [],
            "figures_meta_data": [],
            "subsections": [
                {
                    "title": "3.1\tTerms",
                    "description": "",
                    "summary": "",
                    "text_content": "For the purposes of the present document, the terms given in 3GPP TR 21.905 [1], TS 23.501 [2], TS 23.502 [3], TS 23.288 [4], TS 29.517 [5] and the following apply. A term defined in the present document takes precedence over the definition of the same term, if any, in 3GPP TR 21.905 [1].\ndata collection client: functional entity that collects data and reports it to the Data Collection AF, viz. Direct Data Collection Client, Indirect Data Collection Client or AS\ndirect reporting: method of sending a data report from the Direct Data Collection Client to the Data Collection AF\nevent consumer: a subscriber to event data at the Data Collection AF, used synonymously with the terms NF consumer in TS 23.502 [3] and NF service consumer in TS 29.517 [5]\nevent data: data exposed by the Data Collection AF to event consumers, used synonymously with the term event reporting information in TS 23.502 [3] and TS 29.517 [5]\nindirect reporting: method of sending a data report from a UE Application to the Data Collection AF via an Indirect Data Collection Client function of an Application Service Provider\nMNO-managed event consumer: An event consumer instance that is managed by the MNO\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "3.2\tSymbols",
                    "description": "",
                    "summary": "",
                    "text_content": "Void.\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "3.3\tAbbreviations",
                    "description": "",
                    "summary": "",
                    "text_content": "For the purposes of the present document, the abbreviations given in 3GPP TR 21.905 [1] , TS 23.501 [2], TS 23.502 [3], TS 23.288 [4], TS 29.517 [5] and the following apply. An abbreviation defined in the present document takes precedence over the definition of the same abbreviation, if any, in 3GPP TR 21.905 [1].\nAF\tApplication Function\nAS\tApplication Server\nCAPIF\tCommon API Framework for 3GPP Northbound APIs\nDN\tData Network\nNEF\tNetwork Exposure Function\nNF\tNetwork Function\nNWDAF\tNetwork Data Analytics Function\nSEAL\tService Enabler Architecture Layer for Verticals\nUE\tUser Equipment\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                }
            ]
        },
        {
            "title": "4\tReference architecture for data collection and reporting",
            "description": "",
            "summary": "",
            "tables": [],
            "figures_meta_data": [],
            "subsections": [
                {
                    "title": "4.1\tGeneral",
                    "description": "",
                    "summary": "",
                    "text_content": "Clause 6.2.8 of TS 23.288 [4] envisages a set of high-level procedures by which data is collected by a Network Data Analytics Function (NWDAF) from UE Application(s) via an intermediary Application Function. This clause defines a generic reference architecture for data collection, reporting and subsequent exposure that satisfies those procedures, including the logical functions involved and the logical reference points between them. The intermediary Application Function envisaged in [4] is here named the Data Collection AF.\nNOTE 1:\tIt is presumed that the user has granted consent for its UE data to be collected, reported and subsequently exposed by means outside the scope of the present document (e.g. through interactions with the MNO or the Application Service Provider, and via any applicable SLA between the MNO and Application Service Provider). See also the setUserConsent client API method specified in table 8.3.1-1 of TS 26.532 [7].\nNOTE 2:\tThe collection, reporting and exposure of location-based UE data is expected to comply with regional regulatory requirements and may be further limited by MNO policy.\nIt is intended that this reference architecture be instantiated in domain-specific ways to suit the needs of different features of the 5G System. The reference architecture may be instantiated separately in different slices of a network.\nEach type of UE data subject to collection, reporting and subsequent event exposure in the 5G System is associated with a logical UE data domain. Each such UE data domain is associated with a domain owner – either the 5G System itself (embodied in a particular deployment by an MNO) or the Application Service Provider (ASP). Ownership of particular UE data domains is specified in annex B.\nPrecedence rules on the exposure (and consequent collection and reporting) of UE data vis-à-vis conflicts between ASP provisioning information and system preconfiguration by the MNO or subscription by MNO-managed event consumers are defined in clause 4.5.4.\nThe services defined in the present document may be exposed to parties outside the trusted domain via the NEF, as defined in clause 4.7.1.\nThe Data Collection AF may support CAPIF [8] to provide APIs to other applications (i.e. API invokers), as defined in clause 4.7.2.\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "4.2\tFunctional entities for data collection and reporting",
                    "description": "",
                    "summary": "",
                    "text_content": "The figure depicts a network infrastructure with a focus on the data collection area (AF) and the network edge (NEF). The data collection area is deployed outside the trusted domain, and the services it exposes to API invokers are mediated by the network edge. The logical relationships between the reference points are unaffected by such deployment choices.\nNOTE:\tThe Data Collection AF may be deployed outside the trusted domain, in which case the services it exposes to API invokers are mediated by the NEF. The logical relationships denoted by the reference points are unaffected by such deployment choices.\nFigure 4.2-1: Reference architecture for data collection and reporting in reference point notation\nThe functional entities illustrated in the figure are described as follows:\n1.\tData collection and reporting functionality is provisioned at reference point R1 by a Provisioning AF of the Application Service Provider that may be deployed either inside or outside the trusted domain. The Ndcaf_DataReportingProvisioning service is provided by the Data Collection AF for this purpose.\nNOTE 1:\tWhen provisioning is initiated from outside the trusted domain via the NEF, the Provisioning AF instead invokes the Nnef_DataReportingProvisioning service.\n2.\tThe Data Collection AF may be deployed inside or outside the trusted domain. It is responsible for managing the provisioning state for data collection and reporting. When its provisioning state changes, the Data Collection AF updates the set of available NF profile(s) in the NRF by invoking the Nnrf_NFManagement service defined in clause 5.2.7.2 of TS 23.502 [3] according to the usage defined in clause 6.2.8.2.2 of TS 23.288 [4] and specified in clause 6.1 of TS 29.510 [6].\nNOTE 2:\tIf the Data Collection AF is deployed outside the trusted domain, this registration occurs via the NEF, as described in clause 6.2.2.3 of TS 23.288 [4].\nDepending on the provisioning information provided by the Application Service Provider (see clause 4.6.2), the Data Collection AF provides a data collection and reporting configuration to the Direct Data Collection Client at reference point R2, to the Indirect Data Collection Client at reference point R3 or to the Application Server (AS) instances at reference point R4, and receives data reports from them respectively at those same reference points.\nThe Data Collection AF processes received data reports according to processing instructions in its provisioning state. The processing activities include, but are not limited to, reporting format conversion, data normalisation, reporting domain-specific anonymisation of data and (dis)aggregation of data into reports to be exposed as events.\nFinally, the Data Collection AF is responsible for exposing processed UE data to event notification subscribers both inside the trusted domain (such as the NWDAF) and outside it (such as the Event Consumer AF in the Application Service Provider). In this role, the Data Collection AF realises the Event Exposure Service as defined in clause 6.2.2.1 of TS 23.288 [4] and as specified in TS 29.517 [5]. Subscribers fulfil the role of NF consumers of this service in the service-based architecture [2, 3].\nThe set of UE data to be collected and exposed by the Data Collection AF is determined by the intersection between its provisioning state provided at R1 and the current set of subscriptions. This is reflected in the data collection and reporting configuration exposed at reference points R2, R3 and R4, and the subscription-driven event notifications sent to consumer entities such as the NWDAF or Event Consumer AF of an Application Service Provider over reference points R5 and R6. The Data Collection AF is responsible for ensuring that access to UE data is controlled according to the rules indicated in its provisioning state, as specified in clause 4.5.2. Where these data exposure restrictions conflict with system preconfiguration by the MNO or event subscriptions by MNO-managed event consumers, the precedence rules defined in clause 4.5.4 shall apply.\nNOTE 3:\tWhen the Data Collection AF is deployed outside the trusted domain, the NWDAF uses the procedure defined in clause 5.2.6.2 of TS 23.502 [3] and further elaborated by clause 6.2.2.3 of TS 23.288 [4] to collect data from the externally deployed Data Collection AF via the NEF.\nNOTE 4:\tThe Data Collection AF is intended to be instantiated inside another Application Function in order to satisfy the domain-specific data collection and reporting requirements corresponding to particular features in the 5G System. As such, there may be several reoprting domain-specific Data Collection AF instances operating simultaneously in a particular 5G System, each one performing a different role. The definitions of these instantiations are beyond the scope of the present document.\n3.\tThe Direct Data Collection Client is responsible for collecting relevant data in the UE and for sending data reports to the Data Collection AF via reference point R2 using the Ndcaf_DataReporting service according to a data collection and reporting configuration that it has previously obtained from the Data Collection AF by invoking the same service at reference point R2.\nNOTE 5:\tThis method of reporting corresponds to the direct data collection procedure defined in clause 6.2.8 of TS 23.288 [4].\nNOTE 6:\tIn the case where the Data Collection AF is deployed in a different trust domain than the UE, the Direct Data Collection Client instead invokes the equivalent Nnef_DataReporting API via the NEF.\nNOTE 7:\tThe Direct Data Collection Client function is intended to be instantiated inside other UE functions in order to satisfy the domain-specific data collection and reporting requirements corresponding to particular features of the 5G System. As such, there may be several reporting domain-specific data collection client instances operating simultaneously on a given UE, each one performing a different role. One valid deployment option is to combine these instances in a common middleware component. Another option is to provide the Direct Data Collection Client as an integral part of each relevant UE Application. The definitions of these instantiations are beyond the scope of the present document. The realisation of these logical functions is implementation-dependent.\n4.\tThe UE Application is responsible for sharing relevant data with the Direct Data Collection Client via reference point R7. This may be achieved as a combination of application design, application configuration via R8 and/or application configuration via R7.\n5.\tAn Application Service Provider may also collect data from UE Applications via reference point R8 and employ an Indirect Data Collection Client subfunction to then send data reports to the Data Collection AF via reference point R3 by invoking the Ndcaf_DataReporting service according to a data collection and reporting configuration that it has previously obtained from the Data Collection AF by invoking the same service at reference point R3.\nNOTE 8:\tThis method of reporting corresponds to the indirect data collection procedure defined in clause 6.2.8 of TS 23.288 [4].\nNOTE 9:\tIn the case where the Application Service Provider server is deployed in a different trust domain than the Data Collection AF, the Indirect Data Collection Client instead invokes the equivalent Nnef_DataReporting API via the NEF at reference point R3.\nNOTE 10:\tCollection of UE data via reference point R8 and processing by the Application Server Provider are outside 3GPP scope. The Indirect Data Collection Client may modify the collected UE data to satisfy the requirements of its data collection and reporting configuration.\n6.\tApplication Server instances (labelled AS) inside or outside the trusted domain may also collect data and report it to the Data Collection AF via reference point R4 by invoking the Ndcaf_DataReporting service, according to a data collection and reporting configuration previously obtained from the Data Collection AF by invoking the same service at reference point R4.\nNOTE 11:\tIn the case where the Application Server is deployed in a different trust domain than the Data Collection AF, the AS instead invokes the equivalent Nnef_DataReporting service via the NEF.\nNOTE 12:\tThe data collection and reporting requirements for such Application Servers are reporting domain-specific and therefore beyond the scope of the present document.\n7.\tThe NWDAF is the primary consumer of processed UE data. This is exposed to the NWDAF by the Data Collection AF in the form of data reporting event notifications via reference point R5 using the Naf_EventExposure service (as specified in TS 29.517 [5]) after any processing by the Data Collection AF has been performed according to its provisioned processing instructions.\nNOTE 13:\tIf the Data Collection AF is deployed outside the trusted domain, this interaction occurs instead by invoking the Nnef_EventExposure service via the NEF, as defined in clause 5.2.6.2 of TS 23.502 [3] and as further elaborated by clause 6.2.2.3 of TS 23.288 [4].\nNOTE 14:\tThe UE data of interest to the NWDAF at reference point R5, for example Observed Service Experience and Collective Behaviour, is governed by clause 6 of TS 23.288 [4].\n8.\tBy means of appropriate data collection and reporting provisioning, certain UE data may also be exposed in the form of data reporting events by the Data Collection AF to an Event Consumer AF residing in the Application Service Provider via reference point R6 using the Naf_EventExposure service defined in clause 5.2.19 of TS 23.502 [4] and specified in TS 29.517 [5].\nNOTE 15:\tIn the case where the Application Service Provider server is deployed outside the trusted domain, the Nnef_EventExposure service, as defined in clause 5.2.6.2 of TS 23.502 [3], is invoked instead.\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "4.3\tReference points for data collection and reporting",
                    "description": "",
                    "summary": "",
                    "text_content": "The purposes of the reference points in the functional architecture defined in clause 4.2 above are as follows:\n-\tR1 supports the following interactions between a Provisioning AF in the Application Service Provider and the Data Collection AF:\n-\tUsed by the Application Service Provider to provision data collection and reporting in a Data Collection AF instance by means of the Ndcaf_DataReportingProvisioning service defined in clause 4.4 of the present document (or else the equivalent service exposed by the NEF if the two functions are deployed in different trust domains). The provisioning information specifies what data is to be collected, and additionally may specify how that data is to be sampled by data collection clients (e.g., sampling frequency, location filter) and/or how the collected data is to be reported by them (e.g., reporting probability, reporting frequency, reporting format, data packaging strategy), how it is to be processed by the Data Collection AF and how it is to be exposed to event notification subscribers. A generic provisioning envelope for data collection and reporting is defined in clause 4.6 of the present document, but this is expected to be extended by individual reporting domains.\nNOTE 0:\tProvisioning of sampling frequency and/or location filters may be limited by MNO policy, for example to limit resource impacts on the 5G System, and the Data Collection AF is expected to reject provisioning information containing out-of-policy values.\n-\tR2 supports the following interactions between the Direct Data Collection Client in the UE and the Data Collection AF:\n-\tUsed by a Direct Data Collection Client instance to obtain its data collection and reporting configuration from the corresponding Data Collection AF instance by means of the Ndcaf_DataReporting service defined in clause 4.4 of the present document. The client configuration specifies what data is to be collected, and additionally specifies how that data is to be sampled (e.g., sampling frequency, location filter) and/or how the collected data is to be reported (e.g., reporting probability, reporting frequency, reporting format, data packaging strategy). A generic data collection and reporting configuration envelope is defined in clause 4.6.3 of the present document, but details of the configuration are specific to individual reporting domains and are specified elsewhere.\n-\tSubsequently used by the Direct Data Collection Client to send reports to its Data Collection AF instance by means of the Ndcaf_DataReporting service defined in clause 4.4 of the present document. A generic data reporting envelope is defined in clause 4.6.4 of the present document, but details of the reporting format are specific to individual reporting domains and are specified elsewhere.\nNOTE 1:\tThis method of reporting corresponds to the direct data collection procedure defined in clause 6.2.8 of TS 23.288 [4].\n-\tR3 supports the following interactions between the Indirect Data Collection Client in the Application Service Provider Server and the Data Collection AF.\n-\tUsed by an Indirect Data Collection Client instance to obtain its data collection and reporting configuration from the corresponding Data Collection AF instance by means of the Ndcaf_DataReporting service defined in clause 4.4 of the present document (or else the equivalent service exposed by the NEF if the two functions are deployed in different trust domains). A generic data collection and reporting configuration envelope is defined in clause 4.6.3 of the present document, but details of the configuration are specific to individual reporting domains and are specified elsewhere.\n-\tSubsequently used by the Indirect Data Collection Client in the Application Service Provider server to send data reports to its Data Collection AF instance by means of the Ndcaf_DataReporting service defined in clause 4.4 of the present document (or else the equivalent service exposed by the NEF if the two functions are deployed in different trust domains). A generic data reporting envelope is defined in clause 4.6.4 of the present document, but details of the reporting format are specific to individual reporting domains and are specified elsewhere.\nNOTE 2:\tThis method of reporting corresponds to the indirect data collection procedure defined in clause 6.2.8 of TS 23.288 [4].\n-\tR4 supports the following interactions between the Application Server (AS) and the Data Collection AF:\n-\tUsed by an AS instance to obtain its data collection and reporting configuration from the corresponding Data Collection AF instance by means of the Ndcaf_DataReporting service defined in clause 4.4 of the present document (or else the equivalent service exposed by the NEF if the two functions are deployed in different trust domains). A generic data collection and reporting configuration envelope is defined in clause 4.6.3 of the present document, but details of the configuration are specific to individual reporting domains and are specified elsewhere.\n-\tSubsequently used by the AS instance to send data reports to its Data Collection AF instance by means of the Ndcaf_DataReporting service defined in clause 4.4 of the present document (or else the equivalent service exposed by the NEF if the two functions are deployed in different trust domains). A generic data reporting envelope is defined in clause 4.6.4 of the present document, but details of the reporting format are specific to individual reporting domains and are specified elsewhere.\nNOTE 3:\tThe AS plays the role of a Network Function when it invokes the Ndcaf_DataReporting service at reference point R4.\n-\tR5 supports the following interactions between the NWDAF and the Data Collection AF:\n-\tUsed by an NWDAF instance to subscribe to data reporting events exposed by a Data Collection AF instance, according to the Naf_EventExposure_Subscribe procedure defined in clause 5.2.19.2.2 of TS 23.502 [3], as further elaborated in step 3a of clause 6.2.8.2.3 in TS 23.288 [4], and as specified in TS 29.517 [5] (or else the equivalent Nnef_EventExposure_Subscribe service exposed by the NEF if the two functions are deployed in different trust domains).\n-\tSubsequently used by the Data Collection AF to expose data reporting events to the NWDAF, according to the Naf_EventExposure_Notify procedure defined in clause 5.2.19.2.4 of TS 23.502 [3], as further elaborated in step 5a of clause 6.2.8.2.3 in TS 23.288 [4], and as specified in TS 29.517 [5] (or else the equivalent Nnef_EventExposure_Notify service exposed by the NEF if the two functions are deployed in different trust domains).\n-\tR6 supports the following interactions between the Event Consumer AF in the Application Service Provider and the Data Collection AF:\n-\tUsed by an Event Consumer AF instance to subscribe to data reporting events exposed by the Data Collection AF, according to the Naf_EventExposure_Subscribe procedure defined in clause 5.2.19.2.2 of TS 23.502 [3] and specified in TS 29.517 [5] (or else the equivalent Nnef_EventExposure_Subscribe service exposed by the NEF if the two functions are deployed in different trust domains).\n-\tSubsequently used by the Data Collection AF to expose data reporting events to the Event Consumer AF according to the Naf_EventExposure_Notify procedure defined in clause 5.2.19.2.4 of TS 23.502 [3] and specified in TS 29.517 [5] (or else the equivalent Nnef_EventExposure_Notify service exposed by the NEF if the two functions are deployed in different trust domains).\n-\tR7 is a client API offered by the Direct Data Collection Client to the UE Application.\nNOTE 4:\tWhen the Direct Data Collection Client is embedded in the UE Application, reference point R7 is not used.\n-\tR8 supports data collection and reporting interactions between the UE Application and the Application Service Provider server.\nNOTE 5:\tInteractions at reference point R8 are beyond the scope of 3GPP standardisation.\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "4.4\tService-based architecture for data collection and reporting",
                    "description": "",
                    "summary": "",
                    "text_content": "Figure 4.4-1 below shows the reference architecture for data collection and reporting in service-based architecture notation. It depicts the case where the Data Collection AF is deployed inside the trusted domain, while the Application Service Provider and the AS may be deployed independently either inside or outside the trusted domain.\nThe figure depicts a network infrastructure with a focus on fiber-optic backbone architecture, highlighting key components such as core switches, optical line terminals (OLTs), and distributed nodes. The layered design aligns with SDN principles, emphasizing redundancy and failover reliability.\nNOTE 1:\tIn its role as an event exposure service provider Application Function, the Data Collection AF provides the (un)subscription operations of the Naf_EventExposure (or Nnef_EventExposure) service for use by Network Function service consumers. As Network Function service consumers, the NWDAF and the Event Consumer AF provide the event notification operation of the Naf_EventExposure (or Nnef_EventExposure) service for use by the Data Collection AF.\nNOTE 2:\tThe UE-based Direct Data Collection Client interacts with the Data Collection AF in the user plane, and so the interaction at reference point R2 does not traverse the service bus.\nFigure 4.4-1: Reference architecture for data collection and reporting in service-based architecture notation when the Data Collection AF is deployed in the trusted domain\nThe following service-based APIs are used in connection with data collection and reporting:\n1. \tThe Ndcaf_DataReportingProvisioning service is provided by the Data Collection AF. It is defined by the present document and is specified in TS 26.532 [7]. This service is used by Provisioning AF instances to provision data collection and reporting in the Data Collection AF.\n2. The Nnrf_NFManagement service is provided by the NRF. It is defined in clause 5.2.7.2 of TS 23.502 [3] and specified in clause 6.1 of TS 29.510 [6]. This service is used by the Data Collection AF to register an available NF profile with the NRF for each set of data collection and reporting provisioning information held by the former.\nNOTE 1:\tAs described in clause 6.2.8.2.2 of TS 23.288 [4] the NF profile in this case includes the External Application Identifier (used by clients when reporting data to the Data Collection AF), the Internal Application Identifier (used for event exposure to the NWDAF) and the Event ID. These NF profile parameters are in addition to those specified in clause 5.2.7.2 of TS 23.502 [3].\n3.\tThe Ndcaf_DataReporting service is provided by the Data Collection AF. It is defined by the present document and is specified in TS 26.532 [7].\na.\tThis service is used by the Direct Data Collection Client, by the Indirect Data Collection Client in the Application Service Provider server and by AS instances to obtain their data collection and reporting configuration from the Data Collection AF.\nb.\tSubsequently, this service is used by the Direct Data Collection Client, by the Indirect Data Collection Client and by AS instances to send data reports to the Data Collection AF.\nNOTE 2:\tTrusted AS instances play the role of a Network Function when invoking the Ndcaf_DataReporting service (or equivalent) and are therefore depicted in figure 4.4-1 as being directly attached to the service bus.\n4.\tThe Naf_EventExposure service is provided by the Data Collection AF. It is defined in clause 5.2.19.2 of TS 23.502 [3] and TS 23.288 [4], and is specified in TS 29.517 [5].\na.\tUsed by the NWDAF to subscribe to data reporting events exposed by the Data Collection AF and subsequently used by the Data Collection AF to notify these events to the NWDAF, as described in clause 6.2.2.2 or 6.2.2.3 (as appropriate) of TS 23.288 [4].\nb.\tUsed by an Event Consumer AF in the Application Service Provider server to subscribe to data reporting events exposed by the Data Collection AF and subsequently used by the Data Collection AF to notify these events to the Application Service Provider server, as described in clause 6.2.2.2 or clause 6.2.2.3 (as appropriate) of TS 23.288 [4].\nFigure 4.4-2 depicts the case where the Data Collection AF is instead deployed outside the trusted domain, along with the Application Service Provider and the (external) AS. In this case, the subfunctions of the Application Service Provider and the (external) AS do not interact with the Data Collection AF via the 5G System service bus. The Ndcaf service is therefore not required in such deployments. The interactions at the relevant reference points are outside the scope of 3GPP and are depicted as R1′, R3′, R4′ and R6′ to reflect this.\nThe figure depicts a reference architecture for data collection and reporting in a service-based architecture when the Data Collection AF is deployed outside the trusted domain. It illustrates the various components and their interconnections, including the Data Collection AF, the Data Collection Server, the Data Collection Agent, and the Data Collection Gateway. The architecture is designed to ensure data security and reliability, with redundant paths and failover mechanisms in place.\nFigure 4.4-2: Reference architecture for data collection and reporting in service-based architecture notation when the Data Collection AF is deployed outside the trusted domain\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "4.5\tInformation security model",
                    "description": "",
                    "summary": "",
                    "text_content": "",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": [
                        {
                            "title": "4.5.1\tTransport security",
                            "text_content": "An encrypted data transfer protocol shall be employed at reference point R2 to protect the secrecy and integrity of collected UE data in transit between the Direct Data Collection Client and the Data Collection AF.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "4.5.2\tData exposure restriction model",
                            "text_content": "The Provisioning AF restricts the exposure of UE data over reference points R5 and R6 by configuring a set of Data Access Profiles for each Event ID to be exposed. A Data Access Profile specifies a set of data processing operations that need to be performed by the Data Collection AF on the collected UE data in order to synthesize the event data that will be exposed to the NWDAF and/or Event Consumer AF.\nWhen subscribing to event exposure notifications for a particular Event ID, an NWDAF or Event Consumer AF goes through an authorisation procedure (see clause 5.8) with an Authorisation AS that determines the level of access the event subscriber is allowed to have by selecting one of the provisioned Data Access Profiles for the Event ID in question. If successful, the Authorisation AS supplies an access token to the subscriber which is presented to and validated by the Data Collection AF as part of the event subscription procedure.\nNOTE:\tThe procedure for selecting an appropriate Data Access Profile is not specified in the present document.\nFigure 4.5.2-1 depicts the static data model for the data collection provisioning with Data Access Profiles to restrict data exposure access.\nThe figure depicts a data exposure restriction domain model, which is a crucial component in ensuring data security and privacy in a 5G network. The model outlines the various data exposure restrictions, such as data encryption, data transmission security, and data storage security, which are essential for protecting sensitive information. The model also includes a flowchart to illustrate the data exposure restrictions, making it easier to understand and implement.\nFigure 4.5.2-1: Data exposure restriction domain model\nThe Data Access Profile defines restrictions along the time, user, and location dimensions:\n-\tRestrictions along the time dimension determine the granularity of access to UE data along the time axis. The finest granularity allows access to events as they take place in time. The coarsest level of access aggregates all event data along the time axis to produce a single aggregated value.\n-\tRestrictions along the user dimension allow the Provisioning AF to restrict access to UE data related events based on groups. The finest granularity allows the event consumer to access events related to single users. Coarse granularity access exposes aggregated collected event data based on user groups. The coarsest granularity access exposes the data being aggregated for all users.\n-\tRestrictions along the location dimension allow the Provisioning AF to restrict access to UE data related events based on the geographical location of the data collection client during the event. The finest granularity allows the event consumer to access events individually, irrespective of the location. Coarse granularity access exposes aggregated collected event data based on a geographical area. The coarsest level of access aggregates all event data along the location axis to produce a single aggregated value for all locations.\nThe baseline set of aggregation functions is listed in table 4.5.2-1:\nTable 4.5.2-1: Baseline aggregation functions\n\nThe authorization URL, if present in the data exposure restrictions, is used to redirect subscription requests without a valid access token to an authorization server, which will perform the authorization for the requested Data Access Profile.\nUpon successful authorization, the consumer entity obtains an access token, which contains an identifier of the Data Access Profile that is allowed for the event consumer. Upon successful subscription, the Data Collection AF shall apply the indicated aggregation functions of the corresponding Data Access Profile along the time and user dimensions on the collected data prior to exposing it to the event consumer.\n",
                            "figures_meta_data": [],
                            "tables": [
                                {
                                    "description": "Table 4.5.2-1: Baseline aggregation functions",
                                    "table number": 3,
                                    "summary": "",
                                    "name": ""
                                }
                            ]
                        },
                        {
                            "title": "4.5.3\tAuthentication of data collection clients by the Data Collection AF",
                            "text_content": "To satisfy the requirements in clause 6.2.8.1 of TS 23.288 [4], a data collection client shall supply authentication information to the Data Collection AF:\n1.\tWhen the data collection client requests its data collection and reporting configuration from the Data Collection AF; and\n2.\tWhen the data collection client reports UE data to the Data Collection AF.\nFor reasons of efficiency, the authentication information may be provided once at the start of a long-lived UE data reporting session.\nNOTE:\tIn the case of direct reporting, the requirement to supply authentication information may require the UE Application to first obtain this from the Application Service Provider via reference point R8 and then pass it to the Direct Data Collection Client via R7 (or, in the case of Collaboration E depicted in clause A.6, via an internal interface) before it can be presented to the Data Collection AF at reference point R2.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "4.5.4\tPrecedence rules",
                            "text_content": "Where there is a conflict between data exposure restrictions provisioned by the ASP at reference point R1 and preconfiguration of the Data Collection AF and/or data collection clients by the MNO, or event subscriptions by MNO-managed event consumers (as defined in clause 3.1) such as the NWDAF, precedence is based on ownership of the UE data domain of concern, with specific rules as described in clauses 4.5.4.2 and 4.5.4.3.\nIn this context, ownership of specific UE data domains is as specified in annex B.\nThe following rules shall apply to UE data domains that are owned by the 5G System (MNO):\n1.\tFor determining data collection and reporting behaviour, any preconfiguration of the Data Collection AF and/or data collection clients by the 5G System operator shall take precedence over similar ASP-defined provisioning information.\na)\tAny attempt by the ASP to provision data collection and reporting rules that are either more lax or more restrictive than allowed by the preconfiguration may be rejected by the Data Collection AF, subject to MNO policy.\n2.\tFor determining permissible access to event data exposed by the Data Collection AF to MNO-managed event consumers such as the NWDAF, MNO policies on event exposure (for example, regarding anonymization and aggregation) shall take precedence over any data exposure restrictions provisioned by the ASP as part of a Data Access Profile.\na)\tAny attempt by the ASP to provision data exposure rules affecting an MNO-managed event consumer that are either more lax or more restrictive than allowed by MNO policy shall be rejected by the Data Collection AF.\nb)\tAny event subscription request by the ASP's Event Consumer AF to the Data Collection AF that would relax the data exposure restrictions provisioned on the Data Collection AF by the 5G System operator for that event consumer shall be rejected by the Data Collection AF.\nThe following rules shall apply to UE data domains that are owned by the ASP:\n1.\tFor determining data collection and reporting behaviour, ASP-defined provisioning information shall take precedence over any similar preconfiguration of the Data Collection AF and/or data collection clients by the 5G System operator.\na)\tAny preconfiguration by the 5G System operator of UE data collection and reporting behaviour that is either more lax or more restrictive than similar ASP-defined provisioning information should be ignored by the Data Collection AF and/or data collection clients.\n2.\tFor determining permissible access to event data exposed by the Data Collection AF to MNO-managed event consumers such as the NWDAF, data exposure restrictions provisioned by the ASP as part of a Data Access Profile shall take precedence over MNO policies on event exposure (for example, regarding anonymization and aggregation).\na)\tAny event subscription request by an MNO-managed event consumer to the Data Collection AF that would relax the data exposure restrictions provisioned on the Data Collection AF by the ASP for that event consumer shall be rejected by the Data Collection AF.\n",
                            "figures_meta_data": [],
                            "tables": []
                        }
                    ]
                },
                {
                    "title": "4.6\tDomain model",
                    "description": "",
                    "summary": "",
                    "text_content": "",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": [
                        {
                            "title": "4.6.1\tGeneral",
                            "text_content": "Figure 4.6.1-1 depicts the static data model for the data collection and reporting domain. It is further described below.\nThe figure depicts a static domain model for a 5G network, illustrating the various components and their interactions. It includes base stations (gNB), user equipment (UE), and scatterers, highlighting the importance of beamforming techniques to mitigate interference. The diagram also shows the use of redundancy paths to ensure failover reliability.\nFigure 4.6.1-1: Static domain model\nThe Provisioning AF provisions zero or more sets of provisioning information in the Data Collection AF at reference point R1. The baseline set of information provisioned is described in clause 4.6.2. Each set of provisioning information pertains to one application, identified by its external application identifier, and one type of exposed event, uniquely identified in the 5G System by its Event ID, as defined in clause 4.15.1 of TS 23.502 [3]. There may be more than one set of provisioning information for a particular external application identifier, but the combination of the external application identifier and Event ID shall be unique for a given Data Collection AF instance.\nThe types of data collection client that are permitted to collect UE data are indicated in Valid targets. Parameters to be collected specifies which subset of parameters associated with the UE data domain for the provisioned Event ID are to be collected by these types of data collection clients.\nData sampling rules specify how the domain-specific parameters associated with the Event ID are to be collected by the data collection client (e.g., sampling frequency, location filter). Data reporting rules specify how the data collection client is to report its collected data parameters to the Data Collection AF (e.g., reporting probability, reporting frequency, reporting format, data packaging strategy).\nThe data processing instructions and data exposure restrictions are expressed as a set of Data Access Profiles (see clause 4.5.2). The data exposure restrictions limit the types of event consumer that are authorised to subscribe to the Event ID provisioned for the application and the data processing instructions specify aggregation functions that are applied to UE data prior to exposure to those event consumers.\nEach set of provisioning information is manifested as a data collection client configuration that the Data Collection AF makes available to Direct Data Collection Client instances at reference point R2, to Indirect Data Collection Client instances at R3 and to AS instances at R4.\nOnce configured, these data collection clients then send data reports to the Data Collection AF associated with the data collection client configuration. Each data report provides the external application identifier associated with the UE Application and also includes a non-empty list of data reporting records containing the parameters collected by the data collection client. These parameters typically include a sampling timestamp.\nNOTE 1:\t It is the responsibility of the data collection client to discover its external application identifier by means outside the scope of the present document.\nAn event consumer (the NWDAF and/or Event Consumer AF) subscribes to a type of event exposed by the Data Collection AF using the procedures defined in clause 6.2.8.2.3 of TS 23.288 [4]. The event consumer may additionally specify user-, location- and/or application-based filters in its subscription request in order to further limit the events exposed to a subset of those permitted by the relevant provisioned data exposure restriction(s). Attempts by an event consumer to subscribe to event types that are not provisioned at the Data Collection AF instance are permitted, but will yield no event notifications until such event types have been successfully provisioned.\nNOTE 2:\tIt is the responsibility of the event consumer to discover the relevant application identifier of interest by means outside the scope of the present document.\nDepending on the data processing instructions provisioned in the Data Collection AF, a data reporting record contributes to zero or more events exposed to subscribers at reference points R5 and/or R6. Conversely, an exposed event arises from one or more data reporting records. In the case of events synthesised by the Data Collection AF from multiple data reporting records, the timestamp of the event shall indicate when it was synthesised. Otherwise, the timestamp of the event shall be identical to the timestamp of the data reporting record from which it arose.\nThe Data Collection AF exposes a batch of recent events to consumers (the NWDAF and/or Event Consumer AF) as an event exposure notification.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "4.6.2\tProvisioning information for data collection and reporting",
                            "text_content": "A separate set of provisioning information shall be provided to the Data Collection AF at reference point R1 for each Event ID it is to expose. This provisioning information embodies the Service Level Agreement between the network operator and the Application Service Provider envisaged in clause 6.2.8.1 of TS 23.288 [4]. The provisioning information shall include at least the parameters defined in table 4.6.2-1 below:\nTable 4.6.2-1: Baseline provisioning information for data collection and reporting\n\n",
                            "figures_meta_data": [],
                            "tables": [
                                {
                                    "description": "Table 4.6.2-1: Baseline provisioning information for data collection and reporting",
                                    "table number": 4,
                                    "summary": "",
                                    "name": ""
                                }
                            ]
                        },
                        {
                            "title": "4.6.3\tConfiguration information for data collection clients",
                            "text_content": "All clients of the Data Collection AF wishing to report data shall first obtain a data collection and reporting configuration from the Data Collection AF at reference point R2, R3 or R4 (as appropriate). For each Event ID, the data collection and reporting configuration shall include at least the parameters defined in table 4.6.3-1 below:\nTable 4.6.3-1: Baseline information for data collection and reporting configuration\n\n",
                            "figures_meta_data": [],
                            "tables": [
                                {
                                    "description": "Table 4.6.3-1: Baseline information for data collection and reporting configuration",
                                    "table number": 5,
                                    "summary": "",
                                    "name": ""
                                }
                            ]
                        },
                        {
                            "title": "4.6.4\tInformation included in data reports to the Data Collection AF",
                            "text_content": "For each Event ID, the data report shall include at least the parameters as defined in table 4.6.4-1 below:\nTable 4.6.4-1: Baseline information for data reporting\n\n",
                            "figures_meta_data": [],
                            "tables": [
                                {
                                    "description": "Table 4.6.4-1: Baseline information for data reporting",
                                    "table number": 6,
                                    "summary": "",
                                    "name": ""
                                }
                            ]
                        }
                    ]
                },
                {
                    "title": "4.7\tService exposure",
                    "description": "",
                    "summary": "",
                    "text_content": "",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": [
                        {
                            "title": "4.7.1\tService exposure via Network Exposure Function (NEF)",
                            "text_content": "The following services provided by a Data Collection AF deployed inside the trusted domain shall be exposed northbound by the NEF to an Application Service Provider outside the trusted domain, as depicted in clauses A.3 and A.4:\n-\tThe Ndcaf_DataReportingProvisioning service shall be exposed to Provisioning AF instances deployed outside the trusted domain as Nnef_DataReportingProvisioning. See clause 6 of TS 26.532 [7] and clause 5.24 of TS 29.522 [10].\n-\tThe Ndcaf_DataReporting service shall be exposed to Indirect Data Collection Clients and Application Servers deployed outside the trusted domain as Nnef_DataReporting. See clause 7 of TS 26.532 [7] and clause 5.23 of TS 29.522 [10].\n-\tThe Naf_EventExposure service shall be exposed to Event Consumer AF instances deployed outside the trusted domain as Nnef_EventExposure. See TS 29.517 [5] and TS 29.522 [10].\nThe following services provided by an externally deployed Data Collection AF shall be exposed southbound by the NEF to Network Functions deployed inside the trusted domain, as depicted in clauses A.5:\n-\tThe Naf_EventExposure service shall be exposed to Event Consumer AF instances deployed inside the trusted domain as Nnef_EventExposure. See TS 29.517 [5] and TS 29.591 [11].\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "4.7.2\tService exposure via Common API Framework (CAPIF) for Northbound APIs",
                            "text_content": "When CAPIF is supported, then:\n-\tthe Data Collection AF shall support the CAPIF API provider domain functions as part of a distributed CAPIF deployment, i.e. Ndcaf and Naf via CAPIF-2/2e; and CAPIF-3, CAPIF-4 and CAPIF-5, as specified in clause 7.3 of TS 23.222 [8];\n-\tthe Data Collection AF shall support the CAPIF Core Function and API provider domain functions as part of a centralised CAPIF deployment, i.e. Ndcaf and Naf via CAPIF-2/2e, as specified in clause 7.2 of TS 23.222 [8].\nThe CAPIF and associated API provider domain functions are specified in TS 23.222 [8].\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "4.7.3\tService exposure via Service Enabler Architecture Layer (SEAL) for Verticals",
                            "text_content": "The use of the SEAL framework for exposure of the Ndcaf_DataReportingProvisioning, Ndcaf_DataReporting and Naf_EventExposure services is for future study.\n",
                            "figures_meta_data": [],
                            "tables": []
                        }
                    ]
                }
            ]
        },
        {
            "title": "5\tProcedures for data collection and reporting",
            "description": "",
            "summary": "",
            "tables": [],
            "figures_meta_data": [],
            "subsections": [
                {
                    "title": "5.1\tGeneral",
                    "description": "",
                    "summary": "",
                    "text_content": "This clause defines the high-level procedures for data collection and reporting.\nFigure 5.1-1 below depicts the case where all functional entities lie inside the trusted domain. The detailed steps for each phase are further elaborated in the following clauses.\nThe figure depicts a high-level overview of data collection and reporting procedures for a telecommunication system. It illustrates the various steps involved in collecting and reporting data, such as data collection, data processing, data analysis, and data visualization. The figure provides a clear and concise visual representation of the process, making it easy for users to understand the steps involved in data collection and reporting.\nFigure 5.1-1: High-level procedures for data collection and reporting\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "5.2\tProcedures for data collection and reporting provisioning",
                    "description": "",
                    "summary": "",
                    "text_content": "The figure depicts a high-level overview of the AF registration and provisioning phases in a 5G network. It illustrates the process of registering and provisioning access to the network, including the steps of network planning, network design, network deployment, and network operation. The figure includes key components such as network planning, network design, network deployment, and network operation, which are essential for ensuring the successful implementation of 5G networks.\nFigure 5.2-1: High-level procedures for AF registration and provisioning phases\nInitially, the different types of AF register themselves with the NRF using the Nnrf_NFManagement_NFRegister service operation defined in clause 5.2.7.2.2 of TS 23.502 [3]:\n1.\tThe NWDAF registers itself with the NRF.\n2.\tThe Data Collection AF registers itself with the NRF. This registration includes a list of Event IDs that it is capable of exposing to event consumers.\nAt some later point, Data Collection and Reporting features are provisioned by the Application Service Provider's Provisioning AF:\n3.\tThe Provisioning AF discovers the Data Collection AF by following the Nnrf_NFDiscovery procedure defined in clause 5.2.7.3 of TS 23.502 [3].\n4.\tThe Provisioning AF provisions data collection and reporting in the Data Collection AF for a specific Event ID, using the Ndcaf_DataReportingProvisioning procedures defined in the present document. The provisioning information may vary depending on the data reporting method, i.e. direct reporting or indirect reporting.\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "5.3\tProcedures for Data Collection AF subscription",
                    "description": "",
                    "summary": "",
                    "text_content": "Subsequently, one or more of the two types of event consumer discover the Data Collection AF and subscribe to events from it.\nThe figure depicts a high-level overview of the subscription phase in a telecommunications system, illustrating the various steps involved in obtaining and managing a subscription. It includes a flowchart that outlines the process, with steps such as obtaining a subscription, verifying the subscription, and managing the subscription. The figure also includes a legend to clarify the different types of subscriptions and their respective steps.\nFigure 5.3-1: High-level procedures for subscription phase\nThe steps are as follows:\n5.\tThe NWDAF discovers the Data Collection AF by following the Nnrf_NFDiscovery procedure defined in clause 5.2.7.3 of TS 23.502 [3]...\n6.\t...and then subscribes to event(s) of interest by invoking the Naf_EventExposure_Subscribe service operation defined in clause 5.2.19.2.2 of TS 23.502 [3] on the discovered Data Collection AF. As described in clause 4.6.1, user-, location- and/or application-based filters may be specified as additional input parameters to the operation.\n7.\tThe Event Consumer AF discovers the Data Collection AF by following the Nnrf_NFDiscovery procedure defined in clause 5.2.7.3 of TS 23.502 [3]...\n8.\t...and then subscribes to event(s) of interest by invoking the Naf_EventExposure_Subscribe service operation defined in clause 5.2.19.2.2 of TS 23.502 [3] on the discovered Data Collection AF.\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "5.4\tProcedures for configuring data collection client",
                    "description": "",
                    "summary": "",
                    "text_content": "At some later point, one or more of the three types of data collection client obtain their configuration from the Data Collection AF by invoking the Ndcaf_DataReporting service defined in the present document and specified in TS 26.532 [7]. The intersection between the above provisioning information and current event consumer subscriptions determines the contents of this configuration.\nThe figure depicts a high-level overview of the data collection client configuration phase, illustrating the various steps involved in setting up the client for data collection. The figure includes a flowchart, a list of steps, and a legend to clearly depict the sequence of actions. The steps are numbered and labeled, making it easy to understand the sequence of operations. The figure also includes a legend to indicate the different types of data collection clients, such as the data collection client, data collection server, and data collection server. The figure is a valuable tool for understanding the high-level procedures involved in data collection client configuration.\nFigure 5.4-1: High-level procedures for data collection client configuration phase\nThe steps are as follows:\n9.\tIf present in the instantiation, the UE Application creates a data collection and reporting context with the Direct Data Collection Client. As part of this context, the UE Application may indicate consent for a UE identifier to be included in data reports submitted on its behalf by the Direct Data Collection Client.\n10.\tAs a consequence of step 9 or (if the UE Application is not present) during its own initialisation, the Direct Data Collection Client acquires its data collection and reporting configuration from the Data Collection AF, if relevant.\nIf the UE Application is instantiated, the Direct Data Collection Client provides it with a data collection and reporting configuration derived from that just obtained from the Data Collection AF.\n11.\tThe Indirect Data Collection Client acquires its data collection and reporting configuration from the Data Collection AF, if relevant.\n12.\tThe AS acquires its data collection and reporting configuration from the Data Collection AF, if relevant.\nWhenever the provisioning information changes, or the set of event exposure subscriptions changes, a new set of data collection and reporting configuration shall be made available to data collection clients by the Data Collection AF.\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "5.5\tProcedures for reporting to the Data Collection AF",
                    "description": "",
                    "summary": "",
                    "text_content": "As specified in clause 6.2.8.2.1 of TS 23.288 [4], both the direct reporting procedure and indirect reporting procedure are required to be supported. The indirect reporting procedure may be used when a Direct Data Collection Client is not available in the UE or when the Indirect Data Collection Client needs to modify the collected UE data to satisfy the requirements of its data collection and reporting configuration.\nThe figure depicts a high-level overview of data reporting and exposure phase procedures for a telecommunication system. It illustrates the various steps involved in data reporting, including data collection, data processing, and data reporting. The figure also highlights the importance of data exposure, which is crucial for ensuring the security and integrity of the system.\nFigure 5.5-1: High-level procedures for data reporting and exposure phase\nThe different data collection clients proceed as follows:\n13.\tIf present in the instantiation, the UE Application reports data to the Direct Data Collection Client according to the configuration provided in step 10 for inclusion in a data report. The UE application may instruct the Direct Data Collection Client to prioritise immediate delivery of a UE data report to the Data Collection AF.\n14.\tThe Direct Data Collection Client may submit a data report to the Data Collection AF via reference point R2 by invoking the Ndcaf_DataReporting service defined in the present document and specified in TS 26.532 [7]. The Direct Data Collection Client may indicate that the data report includes UE data requiring expedited processing by the Data Collection AF.\n15.\tThe UE Application may send application-specific data reporting to the Application Service Provider...\n16.\t...and the Indirect Data Collection Client may, as a result, submit a data report to the Data Collection AF by invoking the Ndcaf_DataReporting service defined in the present document and specified in TS 26.532 [7].\n17.\tThe AS may submit a data report to the Data Collection AF by invoking the Ndcaf_DataReporting service defined in the present document and specified in TS 26.532 [7].\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "5.6\tProcedures for Data Collection AF data exposure",
                    "description": "",
                    "summary": "",
                    "text_content": "In response to receiving a data report:\n18.\tThe Data Reporting AF processes the data report.\nReception of a data report by the Data Collection AF may result in an event being exposed to subscribed event consumers:\n19.\tThe Data Collection AF may expose an event to the NWDAF by invoking the Naf_EventExposure_Notify service operation on the latter, as defined in clause 5.2.19.2.4 of TS 23.502 [3].\n20.\tThe Data Collection AF may expose an event to the Event Consumer AF by invoking the Naf_EventExposure_Notify service operation on the latter, as defined in clause 5.2.19.2.4 of TS 23.502 [3].\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "5.7\tProcedures for Data Collection AF unsubscription",
                    "description": "",
                    "summary": "",
                    "text_content": "The figure depicts a high-level procedure for unsubscription phase in a 5G network, illustrating the steps involved in managing the network's capacity and ensuring smooth operation.\nFigure 5.7-1: High-level procedures for unsubscription phase\nFinally:\n21.\tThe NWDAF unsubscribes to events from the Data Collection AF by invoking the Naf_EventExposure_Unsubscribe service operation, as defined in clause 5.2.19.2.3 of TS 23.502 [3].\n22.\tThe Event Consumer AF unsubscribes to events from the Data Collection AF by invoking the Naf_EventExposure_Unsubscribe service operation, as defined in clause 5.2.19.2.3 of TS 23.502 [3].\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "5.8\tProcedures for event consumer authorization",
                    "description": "",
                    "summary": "",
                    "text_content": "The procedure for authorising access to the events exposed by the Data Collection AF is depicted by the following call flow:\nThe figure depicts a high-level overview of the event consumer authorization process, illustrating the various steps involved in authorizing events. It includes a flowchart that outlines the steps from event identification to event processing, with a focus on the role of the event consumer. The figure also highlights the importance of security measures, such as encryption and authentication, to ensure the integrity and confidentiality of the event data.\nFigure 5.8-1: High-level procedures for event consumer authorization\nThe steps are:\n1.\tThe Provisioning AF provisions the data collection and the report exposure functionality at reference point R1, per the procedures in clause 5.2, including a set of Data Access Profiles.\n1a.\tThe Data Collection AF may provision the Authorization AS with a Data Access Profile configuration corresponding to step 1, including the Data Access Profile ID. The procedures used in this step are outside the scope of standardisation.\n2.\tAn event consumer sends a subscription request to the Data Collection AF to receive events via reference point R5 or R6, per the procedures in clause 5.3, indicating the Event ID of interest and any desired user-, location- and/or application-based filters (see clause 4.6.1).\n3.\tIn return, the Data Collection AF redirects the event consumer to the Authorization AS in order to obtain access.\n4.\tThe event consumer contacts the Authorization AS (according to the procedures for authorization of NF service access defined in clause 13.4 of TS 33.501 [9]) with a set of valid credentials.\n5.\tIf access is granted, the Authorization AS responds with an access token that is valid for a specific period of time. The access token may encode a Data Access Profile ID if the authorization applies narrowly. The response may redirect the event consumer to the Data Collection AF using the initial subscription request URL, enhanced with the access token and optionally with the Data Access Profile ID passed in the clear.\n6.\tThe event consumer resends the subscription request (including the Event ID and desired filters, if any) to the Data Collection AF, this time with the access token and, optionally, with the Data Access Profile ID.\n7.\tThe Data Collection AF may verify the access token with the Authorization AS, or it may verify it locally.\n8.\tIf verification is successful, the Data Collection AF approves the subscription request for the requested Access Profile\n9.\tThe Data Collection AF sends event notifications to the event consumer, per the procedures in clause 5.6.\n10.\tThe event consumer cancels its event subscription using the procedures in clause 5.7.\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                }
            ]
        },
        {
            "title": "A.1\tGeneral",
            "description": "This annex documents a set of collaboration scenarios that illustrate potential deployments of the data collection and reporting architecture as defined in the present document.\nIn deployment, it is possible that some UE data is provided to the Data Collection AF using the direct data reporting method at reference point R2, while other (application-private) UE data is collected via reference R8 and provided to the Data Collection AF via the indirect data reporting method at reference point R3 (R3′ in Collaboration D). In certain domains, UE data is collected in the first instance by an AS and therefore needs to be provided to the Data Collection AF at reference point R4 (R4′ in Collaboration D). Hence, all three data reporting reference points are potentially in scope for all of the documented collaboration scenarios.\nNOTE 1:\tIn all of the documented collaboration scenarios, reference point R2 traverses the data plane between the Direct Data Collection Client and the Data Collection AF regardless of whether the latter is deployed inside or outside the trusted domain.\nNOTE 2:\tIn all of the documented collaboration scenarios, reference point R8 traverses the data plane between the UE Application the Application Service Provider. The traffic carried at this reference point is tunnelled transparently through the trusted domain without interacting with any control plane entities.\n",
            "summary": "",
            "tables": [],
            "figures_meta_data": [],
            "subsections": []
        },
        {
            "title": "A.2\tCollaboration A",
            "description": "In this collaboration scenario all of the functions are deployed inside the trusted domain. This corresponds to the case where the functional entities of the Application Service Provider as well as the Application Server (AS) are internal to the 5G System.\nNOTE:\tAlthough deployed within the trusted domain, and granted privileged access to certain Network Functions in the 5G System, the Application Service Provider and/or the AS may or may not be under direct control of the MNO in this collaboration scenario. For example, management of one or more of the functional entities may be delegated to a trusted third-party service provider.\nFigure A.2 -1 illustrates collaboration A with all functions deployed inside the trusted domain, showcasing the secure communication infrastructure.\nFigure A.2-1: Collaboration A with all functions deployed inside the trusted domain\n",
            "summary": "",
            "tables": [],
            "figures_meta_data": [],
            "subsections": []
        },
        {
            "title": "A.3\tCollaboration B",
            "description": "In this collaboration scenario the functional entities of the Application Service Provider are deployed outside the trusted domain. Interactions between these functions and the Data Collection AF must therefore be mediated by the NEF.\nThe figure depicts a collaboration between Application Service Providers (ASPs) deployed outside the trusted domain, illustrating the various functions and roles they play in the network. The figure shows the collaboration between ASPs, with each one represented by a different colored square, and the various functions they perform, such as network management, security, and user experience. The figure also includes a legend to help understand the different colored squares and their corresponding functions.\nFigure A.3-1: Collaboration B with all functions of Application Service Provider\ndeployed outside the trusted domain\n",
            "summary": "",
            "tables": [],
            "figures_meta_data": [],
            "subsections": []
        },
        {
            "title": "A.4\tCollaboration C",
            "description": "This collaboration scenario illustrates the case where the Application Server (AS) is also deployed outside the trusted domain (in addition to the functional entities of the Application Service Provider per Collaboration B). In this case, the AS must therefore additionally interact with the Data Collection AF via the NEF.\nThe figure depicts a collaboration C with all functions of an Application Service Provider (ASP) and Application Server deployed outside the trusted domain. The diagram illustrates the various components and their interconnections, highlighting the importance of security and data protection in this scenario.\nFigure A.4-1: Collaboration C with all functions of Application Service Provider\nand Application Server deployed outside the trusted domain\n",
            "summary": "",
            "tables": [],
            "figures_meta_data": [],
            "subsections": []
        },
        {
            "title": "A.5\tCollaboration D",
            "description": "In this collaboration scenario, the Data Collection AF itself is deployed outside the trusted domain and interactions with functions inside the trusted domain occur via the NEF. This scenario corresponds to the \"Procedure for Data Collection from AF via NEF\" defined in clause 6.2.2.3 of TS 23.288 [4]. Specifically:\n-\tThe externally deployed Data Collection AF registers with the NRF inside the trusted domain using the Nnef_NFManagement service via the NEF.\nNOTE:\tIn practice, the Data Collection AF is instantiated as a subfunction of a domain-specific Application Function. The enclosing Application Function should include data collection and reporting capabilities in its own registration with the NRF on behalf of the enclosed Data Collection AF rather than making a separate registration for the subfunction.\n-\tThe NWDAF inside the trusted domain uses the Nnef_EventExposure service (as specified in clause 5.2.6.2 of TS 23.502 [3]) to subscribe to and receive events exposed by the externally deployed Data Collection AF.\nThe figure depicts a collaboration D with Data Collection AF deployed outside the trusted domain, showing a network of data collection devices (D) and a data collection area (AF) with a data collection area (AF) and a data collection area (AF) with a data collection area (AF). The collaboration D with Data Collection AF is a crucial component of the network, ensuring the efficient collection and transmission of data.\nFigure A.5-1: Collaboration D with Data Collection AF deployed outside the trusted domain\nThe functional entities of the Application Service Provider, as well as the Application Server (AS), interact with the externally deployed Data Collection AF using interfaces that are outside the scope of 3GPP specification. However, the interactions at reference points R1′, R3′, R4′ and R6′ are expected to be functionally equivalent to those at R1, R3, R4 and R6 respectively.\n",
            "summary": "",
            "tables": [],
            "figures_meta_data": [],
            "subsections": []
        },
        {
            "title": "A.6\tCollaboration E",
            "description": "In this collaboration scenario, the Data Collection Client is deployed as a subfunction of the UE Application. As a consequence of this arrangement, reference point R7 is subsumed into the UE Application.\nThis collaboration may be combined with any of the preceding collaboration scenarios. Hence, only reference points R2 and R8 are depicted in the figure in the interests of brevity.\nThe figure depicts a collaboration E with Data Collection Client deployed as part of the UE Application, illustrating the communication between the collaboration client and the data collection client. The collaboration client is connected to the data collection client through a network, and the data collection client is connected to the UE Application. The figure shows the communication channels and the data flow between the collaboration client and the data collection client.\nFigure A.6-1: Collaboration E with Data Collection Client deployed as part of the UE Application\nThe Direct Data Collection Client could, for example, be realised as a software library that implements the appropriate protocol at reference point R2. In such a realisation, the procedures defined in the present document at reference point R7 would likely form the API of the Data Collection Client library.\n",
            "summary": "",
            "tables": [],
            "figures_meta_data": [],
            "subsections": []
        },
        {
            "title": "B.1\tGeneral",
            "description": "Ownership of any UE data domain not listed in this annex shall be specified in the document defining that domain.\n",
            "summary": "",
            "tables": [],
            "figures_meta_data": [],
            "subsections": []
        },
        {
            "title": "B.2\tBaseline UE data domains",
            "description": "Table B.1-1 specifies ownership of the baseline UE data domains defined in TS 23.288 [4].\nTable B.2-1: Ownership of baseline UE data domains\n\nApplication-specific UE data domains shall be owned by the ASP.\n\n",
            "summary": "",
            "tables": [
                {
                    "description": "Table B.2-1: Ownership of baseline UE data domains",
                    "table number": 7,
                    "summary": "",
                    "name": ""
                },
                {
                    "description": "",
                    "table number": 8,
                    "summary": "",
                    "name": ""
                }
            ],
            "figures_meta_data": [],
            "subsections": []
        }
    ]
}