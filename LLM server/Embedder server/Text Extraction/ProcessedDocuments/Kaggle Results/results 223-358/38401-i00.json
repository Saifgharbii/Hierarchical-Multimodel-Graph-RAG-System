{
    "document_name": "38401-i00.docx",
    "content": [
        {
            "title": "Foreword",
            "description": "This Technical Specification has been produced by the 3rd Generation Partnership Project (3GPP).\nThe contents of the present document are subject to continuing work within the TSG and may change following formal TSG approval. Should the TSG modify the contents of the present document, it will be re-released by the TSG with an identifying change of release date and an increase in version number as follows:\nVersion x.y.z\nwhere:\nx\tthe first digit:\n1\tpresented to TSG for information;\n2\tpresented to TSG for approval;\n3\tor greater indicates TSG approved document under change control.\ny\tthe second digit is incremented for all changes of substance, i.e. technical enhancements, corrections, updates, etc.\nz\tthe third digit is incremented when editorial only changes have been incorporated in the document.\n",
            "summary": "",
            "tables": [],
            "figures_meta_data": [],
            "subsections": []
        },
        {
            "title": "1\tScope",
            "description": "The present document describes the overall architecture of the NG-RAN, including interfaces NG, Xn and F1 interfaces and their interaction with the radio interface.\n",
            "summary": "",
            "tables": [],
            "figures_meta_data": [],
            "subsections": []
        },
        {
            "title": "2\tReferences",
            "description": "The following documents contain provisions which, through reference in this text, constitute provisions of the present document.\n-\tReferences are either specific (identified by date of publication, edition number, version number, etc.) or non-specific.\n-\tFor a specific reference, subsequent revisions do not apply.\n-\tFor a non-specific reference, the latest version applies. In the case of a reference to a 3GPP document (including a GSM document), a non-specific reference implicitly refers to the latest version of that document in the same Release as the present document.\n[1]\t3GPP TR 21.905: \"Vocabulary for 3GPP Specifications\".\n[2]\t3GPP TS 38.300: \"NR; Overall description; Stage-2\".\n[3]\t3GPP TS 23.501: \"System Architecture for the 5G System\".\n[4]\t3GPP TS 38.473: \"NG-RAN; F1 application protocol (F1AP)\".\n[5]\t3GPP TS 38.414: \"NG-RAN; NG data transport\".\n[6]\t3GPP TS 38.424: \"NG-RAN; Xn data transport\".\n[7]\t3GPP TS 38.474: \"NG-RAN; F1 data transport\".\n[8]\tITU-T Recommendation G.823 (2000-03): \"The control of jitter and wander within digital networks which are based on the 2048 kbit/s hierarchy\".\n[9]\tITU-T Recommendation G.824 (2000-03): \"The control of jitter and wander within digital networks which are based on the 1544 kbit/s hierarchy\".\n[10]\tITU-T Recommendation G.825 (2001-08): \"The control of jitter and wander within digital networks which are based on the synchronous digital hierarchy (SDH)\".\n[11]\tITU-T Recommendation G.8261/Y.1361 (2008-04): \"Timing and Synchronization aspects in Packet networks\".\n[12]\t3GPP TS 37.340: \"NR; Multi-connectivity; Overall description; Stage-2\".\n[13]\t3GPP TS 33.501: \"Security Architecture and Procedures for 5G System\".\n[14]\t3GPP TS 38.410: \"NG-RAN; NG general aspect and principles\".\n[15]\t3GPP TS 38.420: \"NG-RAN; Xn general aspects and principles\"\n[16]\t3GPP TS 38.470: \"NG-RAN; F1 general aspects and principles\".\n[17]\t3GPP TS 38.460: \"NG-RAN; E1 general aspects and principles\".\n[18]\t3GPP TS 33.210: \"3G security; Network Domain Security (NDS); IP Network Layer Security\".\n[19]\t3GPP TS 36.300: \"Evolved Universal Terrestrial Radio Access (E-UTRA), Evolved Universal Terrestrial Radio Access Network (E-UTRAN); Overall description; Stage 2\".\n[20]\t3GPP TS 32.422: \"Trace control and configuration management\".\n[21]\t3GPP TS 37.470: \"Evolved Universal Terrestrial Radio Access Network (E-UTRAN) and NG-RAN; W1 general aspects and principles; Stage-2\".\n[22]\t3GPP TS 38.340: \"NR; Backhaul Adaptation Protocol (BAP) specification\".\n[23]\t3GPP TS 38.331: \"NR; Radio Resource Control (RRC) protocol specification\".\n[24]\t3GPP TS 38.425: \"NG-RAN; NR user plane Protocol\".\n[25]\t3GPP TS 38.305: \"NG Radio Access Network (NG-RAN); Stage 2 functional specification of User Equipment (UE) positioning in NG-RAN\".\n[26]\t3GPP TS 38.472: \"NG-RAN; F1 signalling transport\".\n[27]\t3GPP TS 23.247: \" Architectural enhancements for 5G multicast-broadcast services; Stage 2\".\n[28]\t3GPP TS 36.401: \"Evolved Universal Terrestrial Radio Access Network (E-UTRAN); Architecture Description\".\n[29]\tIETF RFC 4555 (2006-06): \"RFC IKEv2 Mobility and Multihoming Protocol (MOBIKE)\".\n[30]\t3GPP TS 38.321 “NR; Medium Access Control (MAC) protocol specification”.\n[31]\t3GPP TS 37.320: \"Radio measurement collection for Minimization of Drive Tests (MDT); Overall description; Stage 2\".\n[32]\t3GPP TS 23.502: \"Procedures for the 5G System (5GS); Stage 2\".\n[33]\t3GPP TS 28.532: \"Management and orchestration; Generic management services\".\n",
            "summary": "",
            "tables": [],
            "figures_meta_data": [],
            "subsections": []
        },
        {
            "title": "3\tDefinitions and abbreviations",
            "description": "",
            "summary": "",
            "tables": [],
            "figures_meta_data": [],
            "subsections": [
                {
                    "title": "3.1\tDefinitions",
                    "description": "",
                    "summary": "",
                    "text_content": "For the purpose of the present document, the terms and definitions given in TR 21.905 [1] and the following apply. \nA term defined in the present document takes precedence over the definition of the same term, if any, in TR 21.905 [1].\nAssociated QoS Flow: as defined in TS 23.247 [27].\nAssociated QoS flow information: Information encompassing: QoS flow QoS parameters for associated QoS flows and mapping information between mapped (unicast) QoS flows and associated QoS flows. The respective information is included in a way that non-supporting RAN nodes would not establish respective RAN resources irrespective the multicast session state.\nBoundary IAB-node: an IAB-node with one RRC interface terminating at a different IAB-donor-CU than the F1 interface. This definition applies to partial migration, inter-donor redundancy and inter-donor RLF recovery.\nConditional Handover: as defined in TS 38.300 [2].\nConditional PSCell Addition: as defined in TS 37.340 [12].\nConditional PSCell Change: as defined in TS 37.340 [12].\nDAPS Handover: as defined in TS 38.300 [2].\neNB-CP: as defined in TS 36.401 [28].\neNB-UP: as defined in TS 36.401 [28].\nen-gNB: as defined in TS 37.340 [12].\nEarly Data Forwarding: as defined in TS 38.300 [2].\nF1-terminating IAB-donor: Refers to the IAB-donor that terminates F1 for the boundary IAB-node or a mobile IAB-node.\ngNB: as defined in TS 38.300 [2].\ngNB Central Unit (gNB-CU): a logical node hosting RRC, SDAP and PDCP protocols of the gNB or RRC and PDCP protocols of the en-gNB that controls the operation of one or more gNB-DUs. The gNB-CU terminates the F1 interface connected with the gNB-DU.\ngNB Distributed Unit (gNB-DU): a logical node hosting RLC, MAC and PHY layers of the gNB or en-gNB, and its operation is partly controlled by gNB-CU. One gNB-DU supports one or multiple cells. One cell is supported by only one gNB-DU. The gNB-DU terminates the F1 interface connected with the gNB-CU. For DC operation, the MgNB-DU designates the gNB-DU of an en-gNB or a gNB acting as master node, and the SgNB-DU designates the gNB-DU of an en-gNB or a gNB acting as secondary node.\ngNB-CU-Control Plane (gNB-CU-CP): a logical node hosting the RRC and the control plane part of the PDCP protocol of the gNB-CU for an en-gNB or a gNB. The gNB-CU-CP terminates the E1 interface connected with the gNB-CU-UP and the F1-C interface connected with the gNB-DU. For DC operation, the MgNB-CU-CP designates the gNB-CU-CP of the gNB-CU for an en-gNB or a gNB acting as master node, and the SgNB-CU-CP designates the gNB-CU-CP of the gNB-CU for an en-gNB or a gNB acting as secondary node.\ngNB-CU-User Plane (gNB-CU-UP): a logical node hosting the user plane part of the PDCP protocol of the gNB-CU for an en-gNB, and the user plane part of the PDCP protocol and the SDAP protocol of the gNB-CU for a gNB. The gNB-CU-UP terminates the E1 interface connected with the gNB-CU-CP and the F1-U interface connected with the gNB-DU. For DC operation, the MgNB-CU-UP designates the gNB-CU-UP of the gNB-CU for an en-gNB or a gNB acting as master node, and the the SgNB-CU-UP designates the gNB-CU-UP of the gNB-CU for an en-gNB or a gNB acting as secondary node.\nIAB-node: as defined in TS 38.300 [2].\nIAB-donor: as defined in TS 38.300 [2].\nIAB-donor-CU: the gNB-CU of an IAB-donor, terminating the F1 interface towards IAB-nodes and IAB-donor-DU.\nIAB-donor-DU: the gNB-DU of an IAB-donor, hosting the IAB BAP sublayer (as defined in TS 38.340 [22]), providing wireless backhaul to IAB-nodes.\nIAB-DU: as defined in TS 38.300 [2].\nIAB-MT: as defined in TS 38.300 [2].\nIAB Topology: as defined in TS 38.300 [2].\nMapped QoS flows: Unicast QoS flows requested to be established, i.e. included in the legacy QoS flow lists in a way, that non-support RAN nodes would attempt to establish unicast QoS flows and supporting RAN nodes can identify them as mapped QoS flows based on the associated QoS information.\nMaster node: as defined in TS 37.340 [12].\nMaster gNB: see TS 37.340 [12].\nMBS session resource: This term is used for specification of NG, Xn, F1 and E1 interfaces. It denotes NG-RAN interface and radio resources provided to support an MBS Session.\nMP Relay UE: as defined in TS 38.300 [2].\nMP Remote UE: as defined in TS 38.300 [2].\nMulti-path: as defined in TS 38.300 [2].\nng-eNB: as defined in TS 38.300 [2].\nng-eNB Central Unit (ng-eNB-CU): as defined in TS 37.470 [21].\nng-eNB Distributed Unit (ng-eNB-DU): as defined in TS 37.470 [21].\nng-eNB-CU-Control Plane (ng-eNB-CU-CP): a logical node hosting the RRC and the control plane part of the PDCP protocol of the ng-eNB-CU for an ng-eNB. The ng-eNB-CU-CP terminates the E1 interface connected with the ng-eNB-CU-UP and the W1-C interface connected with the ng-eNB-DU.\nng-eNB-CU-User Plane (ng-eNB-CU-UP): a logical node hosting the user plane part of the PDCP protocol and the SDAP protocol of the ng-eNB-CU for an ng-eNB. The ng-eNB-CU-UP terminates the E1 interface connected with the ng-eNB-CU-CP and the W1-U interface connected with the ng-eNB-DU.\nNG-RAN node: as defined in TS 38.300 [2].\nNon-F1-terminating IAB-donor of boundary IAB-node: Refers to the IAB-donor that has an RRC connection with the boundary node but does not terminate F1 with this boundary node.\nPDU Session Resource: This term is used for specification of NG, Xn, and E1 interfaces. It denotes NG-RAN interface and radio resources provided to support a PDU Session.\nPublic Network Integrated NPN: as defined in TS 23.501 [3].\nRRC-terminating IAB-donor: Refers to the IAB-donor that terminates the RRC connection of the mobile IAB-node. The RRC-terminating IAB-donor may also be an F1-terminating IAB-donor.\nSecondary gNB: see TS 37.340 [12].\nStand-alone Non-Public Network: as defined in TS 23.501 [3].\nSubsequent CPAC: see TS 37.340 [12].\nU2N Relay UE: as defined in TS 38.300 [2].\nU2N Remote UE: as defined in TS 38.300 [2].\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "3.2\tAbbreviations",
                    "description": "",
                    "summary": "",
                    "text_content": "For the purposes of the present document, the terms and definitions given in TR 21.905 [1] and the following apply. \nA term defined in the present document takes precedence over the definition of the same term, if any, in TR 21.905 [1].\n5GC\t5G Core Network\nAMF\tAccess and Mobility Management Function\nAP\tApplication Protocol\nAS\tAccess Stratum\nAI\tArtificial Intelligence\nBAP\tBackhaul Adaptation Protocol\nBH\tBackhaul\nBSR\tBuffer Status Report\nCAG\tClosed Access Group\nCHO\tConditional Handover\nCLI\tCross-Link Interference\nCM\tConnection Management\nCMAS\tCommercial Mobile Alert Service\nCPA\tConditional PSCell Addition\nCPC\tConditional PSCell Change\nDAPS\tDual Active Protocol Stack\nDU\tDistributed Unit\nEM\tElement Manager\nEN-DC\tE-UTRA-NR Dual Connectivity\nETWS\tEarthquake and Tsunami Warning System\nF1-U\tF1 User plane interface\nF1-C\tF1 Control plane interface\nF1AP\tF1 Application Protocol\nFDD\tFrequency Division Duplex\nFTEID\tFully Qualified TEID\nGTP-U\tGPRS Tunnelling Protocol\nIAB\tIntegrated Access and Backhaul\nIP\tInternet Protocol\nL2\t\t\t\t\tLayer-2\nLTM\t\t\t\tL1/L2 Triggered Mobility\nMBS\tMulticast Broadcast Service\nMCG\tMaster Cell Group\nMDT\tMinimization of Drive Tests\nMN\tMaster Node\nMgNB\tMaster gNB\nmIAB\tMobile IAB\nmIAB-DU\tMobile IAB Distributed Unit\nmIAB-MT\tMobile IAB Mobile Termination\nMP\tMulti-Path\nMRB\tMBS Radio Bearer\nMRDC\tMulti-Radio Dual Connectivity\nN3C\tNon-3GPP Connection\nML\tMachine Learning\nMT-SDT\tMobile Terminated Small Data Transmission\nNAS\tNon-Access Stratum\nNCI\tNR Cell Identity\nNID\tNetwork identifier\nNPN\tNon-Public Network\nNSA\tNon Standalone\nOAM\tOperation, Administration and Maintenance\nPNI-NPN\tPublic Network Integrated Non-Public Network\nPTP\tPoint to Point\nPTM\tPoint to Multipoint\nPWS\tPublic Warning System\nQoE\tQuality of Experience\nQoS\tQuality of Service\nRANAC\tRAN Area Code\nRET\tRemote Electrical Tilting\nRIM\tRemote Interference Management\nRIM-RS\tRemote Interference Management Reference Signal\nRLF\tRadio Link Failure\nRNL\tRadio Network Layer\nRRC\tRadio Resource Control\nSA\tStandalone\nSAP\tService Access Point\nSCG\tSecondary Cell Group\nSCTP\tStream Control Transmission Protocol\nSDT\tSmall Data Transmission\nSFN\tSystem Frame Number\nSgNB\tSecondary gNB\nSM\tSession Management\nSMF\tSession Management Function\nSN\tSecondary Node\nSNPN\tStand-alone Non-Public Network\nSRAP\tSidelink Relay Adaptation Protocol\nTAC\tTracking Area Code\nTCE\tTrace Collection Entity\nTDD\tTime Division Duplex\nTDM\tTime Division Multiplexing\nTEID\tTunnel Endpoint Identifier\nTMA\tTower Mounted Amplifier\nTNL\tTransport Network Layer\nU2N\tUE-to-Network\nUL \tUplink\n\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                }
            ]
        },
        {
            "title": "4\tGeneral principles",
            "description": "The general principles guiding the definition of NG-RAN architecture as well as the NG-RAN interfaces are the following:\n-\tLogical separation of signalling and data transport networks.\n-\tNG-RAN and 5GC functions are fully separated from transport functions. Addressing scheme used in NG-RAN and 5GC shall not be tied to the addressing schemes of transport functions. The fact that some NG-RAN or 5GC functions reside in the same equipment as some transport functions does not make the transport functions part of the NG-RAN or the 5GC.\n-\tMobility for an RRC connection is fully controlled by the NG-RAN.\n-\tThe NG-RAN interfaces are defined along the following principles:\n-\tThe functional division across the interfaces have as few options as possible.\n-\tInterfaces are based on a logical model of the entity controlled through this interface.\n-\tOne physical network element can implement multiple logical nodes.\n",
            "summary": "",
            "tables": [],
            "figures_meta_data": [],
            "subsections": []
        },
        {
            "title": "5\tGeneral architecture",
            "description": "",
            "summary": "",
            "tables": [],
            "figures_meta_data": [],
            "subsections": [
                {
                    "title": "5.1\tGeneral",
                    "description": "",
                    "summary": "",
                    "text_content": "The protocols over Uu and NG interfaces are divided into two structures:\n-\tUser plane protocols\nThese are the protocols implementing the actual PDU Session service, i.e. carrying user data through the access stratum.\n-\tControl plane protocols\nThese are the protocols for controlling the PDU Sessions and the connection between the UE and the network from different aspects (including requesting the service, controlling different transmission resources, handover etc.). Also a mechanism for transparent transfer of NAS messages is included.\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "5.2\tUser plane",
                    "description": "",
                    "summary": "",
                    "text_content": "The PDU Session Resource service is offered from SAP to SAP by the Access Stratum. Figure 5.2-1 shows the protocols on the Uu and the NG interfaces that linked together provide this PDU Session Resource service.\nThe figure depicts a radio interface protocol defined in TS 38.2 and TS 38.3, which outlines the communication protocols for radio interfaces in a 5G network.\nNote 1:\tThe radio interface protocols are defined in TS 38.2xx and TS 38.3xx.\nNote 2:\tThe NG interface protocols are defined in TS 38.41x.\n\nFigure 5.2-1: NG and Uu user plane\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "5.3\tControl plane",
                    "description": "",
                    "summary": "",
                    "text_content": "Figure 5.3-1 shows the control plane (signalling) protocol stacks on NG and Uu interfaces.\nThe figure depicts a radio interface protocol defined in TS 38.2 and TS 38.3, which outlines the communication protocols for radio interfaces in a 5G network.\nNote 1:\tThe radio interface protocols are defined in TS 38.2xx and TS 38.3xx.\nNote 2:\tThe protocol is defined in TS 38.41x. (Description of NG interface).\nNote 3:\tCM, SM: This exemplifies a set of NAS control protocols between UE and 5GC. The evolution of the protocol architecture for these protocols is outside the scope of the present document.\n\nFigure 5.3-1: NG and Uu control plane\nNOTE:\tBoth the Radio protocols and the NG protocols contain a mechanism to transparently transfer NAS messages.\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                }
            ]
        },
        {
            "title": "6\tNG-RAN architecture",
            "description": "",
            "summary": "",
            "tables": [],
            "figures_meta_data": [],
            "subsections": [
                {
                    "title": "6.1\tOverview",
                    "description": "",
                    "summary": "",
                    "text_content": "",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": [
                        {
                            "title": "6.1.1\tOverall Architecture of NG-RAN",
                            "text_content": "The figure depicts the overall architecture of a 5G network, illustrating the various components such as base stations (gNB), user equipment (UE), and scatterers. The diagram highlights the importance of beamforming techniques to mitigate interference and the use of redundancy paths to ensure failover reliability. The layered design aligns with SDN principles, emphasizing the importance of network virtualization and automation.\nFigure 6.1-1: Overall architecture\nThe NG-RAN consists of a set of gNBs connected to the 5GC through the NG interface.\nNOTE: \tAs specified in TS 38.300 [2], NG-RAN could also consists of a set of ng-eNBs, an ng-eNB may consist of an ng-eNB-CU and one or more ng-eNB-DU(s). An ng-eNB-CU and an ng-eNB-DU is connected via W1 interface. The general principle described in this clause also applies to ng-eNB and W1 interface, if not explicitly specified otherwise.\nAn gNB can support FDD mode, TDD mode or dual mode operation.\ngNBs can be interconnected through the Xn interface.\nA gNB may consist of a gNB-CU and one or more gNB-DU(s). A gNB-CU and a gNB-DU is connected via F1 interface.\nOne gNB-DU is connected to only one gNB-CU.\nNOTE:\tIn case of network sharing with multiple cell ID broadcast, each Cell Identity associated with a subset of PLMNs corresponds to a gNB-DU and the gNB-CU it is connected to, i.e. the corresponding gNB-DUs share the same physical layer cell resources.\nNOTE:\tFor resiliency, a gNB-DU may be connected to multiple gNB-CUs by appropriate implementation.\nNG, Xn and F1 are logical interfaces.\nFor NG-RAN, the NG and Xn-C interfaces for a gNB consisting of a gNB-CU and gNB-DUs, terminate in the gNB-CU. For EN-DC, the S1-U and X2-C interfaces for a gNB consisting of a gNB-CU and gNB-DUs, terminate in the gNB-CU. The gNB-CU and connected gNB-DUs are only visible to other gNBs and the 5GC as a gNB. A possible deployment scenario is described in Annex A.\nThe node hosting user plane part of NR PDCP (e.g. gNB-CU, gNB-CU-UP, and for EN-DC, MeNB or SgNB depending on the bearer split) shall perform user inactivity monitoring and further informs its inactivity or (re)activation to the node having C-plane connection towards the core network (e.g. over E1, X2). The node hosting NR RLC (e.g. gNB-DU) may perform user inactivity monitoring and further inform its inactivity or (re)activation to the node hosting control plane, e.g. gNB-CU or gNB-CU-CP.\nUL PDCP configuration (i.e. how the UE uses the UL at the assisting node) is indicated via X2-C (for EN-DC), Xn-C (for NG-RAN) and F1-C. Radio Link Outage/Resume for DL and/or UL is indicated via X2-U (for EN-DC), Xn-U (for NG-RAN) and F1-U.\nThe NG-RAN is layered into a Radio Network Layer (RNL) and a Transport Network Layer (TNL).\nThe NG-RAN architecture, i.e. the NG-RAN logical nodes and interfaces between them, is defined as part of the RNL.\nFor each NG-RAN interface (NG, Xn, F1) the related TNL protocol and the functionality are specified. The TNL provides services for user plane transport, signalling transport.\nIn NG-Flex configuration, each NG-RAN node is connected to all AMFs of AMF Sets within an AMF Region supporting at least one slice also supported by the NG-RAN node. The AMF Set and the AMF Region are defined in TS 23.501 [3].\nIf security protection for control plane and user plane data on TNL of NG-RAN interfaces has to be supported, NDS/IP TS 33.501 [13] shall be applied.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "6.1.2\tOverall architecture for separation of gNB-CU-CP and gNB-CU-UP",
                            "text_content": "The overall architecture for separation of gNB-CU-CP and gNB-CU-UP is depicted in Figure 6.1.2-1.\nNOTE: \tNG-RAN could also consist of a set of ng-eNBs, an ng-eNB may consist of an ng-eNB-CU-CP, one or more ng-eNB-CU-UP(s), and one or more ng-eNB-DU(s). An ng-eNB-CU-CP and an ng-eNB-CU-UP is connected via the E1 interface. An ng-eNB-DU is connected to an ng-eNB-CU-CP via the W1-C interface, and to an ng-eNB-CU-UP via the W1-U interface. The general principle described in this clause also applies to ng-eNB and its corresponding E1 and W1 interfaces, if not explicitly specified otherwise.\nThe figure depicts the overall architecture for the separation of gNB-CU-CP and gNB-CU-UP, illustrating the separation between the control and user equipment (CU) and the user equipment (UE) in a 5G network. The figure shows the various components, such as the base station (gNB), user equipment (UE), and scatterers, and highlights the use of beamforming techniques to mitigate interference.\nFigure 6.1.2-1. Overall architecture for separation of gNB-CU-CP and gNB-CU-UP\n-\tA gNB may consist of a gNB-CU-CP, multiple gNB-CU-UPs and multiple gNB-DUs;\n-\tThe gNB-CU-CP is connected to the gNB-DU through the F1-C interface;\n-\tThe gNB-CU-UP is connected to the gNB-DU through the F1-U interface;\n-\tThe gNB-CU-UP is connected to the gNB-CU-CP through the E1 interface;\n-\tOne gNB-DU is connected to only one gNB-CU-CP;\n-\tOne gNB-CU-UP is connected to only one gNB-CU-CP;\nNOTE 1:\tFor resiliency, a gNB-DU and/or a gNB-CU-UP may be connected to multiple gNB-CU-CPs by appropriate implementation.\n-\tOne gNB-DU can be connected to multiple gNB-CU-UPs under the control of the same gNB-CU-CP;\n-\tOne gNB-CU-UP can be connected to multiple DUs under the control of the same gNB-CU-CP;\nNOTE 2:\tThe connectivity between a gNB-CU-UP and a gNB-DU is established by the gNB-CU-CP using Bearer Context Management functions.\nNOTE 3:\tThe gNB-CU-CP selects the appropriate gNB-CU-UP(s) for the requested services for the UE. In case of multiple CU-UPs they belong to same security domain as defined in TS 33.210 [18].\nNOTE 4:\tData forwarding between gNB-CU-UPs during intra-gNB-CU-CP handover within a gNB may be supported by Xn-U.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "6.1.3\tOverall Architecture of IAB",
                            "text_content": "The figure depicts the overall architecture of the Internet Architecture Board (IAB), which is a key component of the Internet's backbone. The figure shows the various layers and components that make up the IAB, including the core switches, optical line terminals (OLTs), and distributed nodes. The layered design aligns with SDN principles, allowing for efficient network management and control.\nFigure 6.1.3-1: Overall architecture of IAB\nThe NG-RAN supports IAB by the IAB-node wirelessly connecting to the gNB capable of serving the IAB-nodes, named IAB-donor.\nThe IAB-donor consists of an IAB-donor-CU and one or more IAB-donor-DU(s). In case of separation of gNB-CU-CP and gNB-CU-UP, the IAB-donor may consist of an IAB-donor-CU-CP, multiple IAB-donor-CU-UPs and multiple IAB-donor-DUs.\nThe IAB-node connects to an upstream IAB-node or an IAB-donor-DU via a subset of the UE functionalities of the NR Uu interface (named IAB-MT function of IAB-node). The IAB-node provides wireless backhaul to the downstream IAB-nodes and UEs via the network functionalities of the NR Uu interface (named IAB-DU function of IAB-node).\nThe F1-C traffic between an IAB-node and IAB-donor-CU is backhauled via the IAB-donor-DU and the optional intermediate hop IAB-node(s).\nThe F1-U traffic between an IAB-node and IAB-donor-CU is backhauled via the IAB-donor-DU and the optional intermediate hop IAB-node(s).\nAll functions specified for a gNB-DU are equally applicable for an IAB-DU and IAB-donor-DU, unless otherwise stated, and all functions specified for a gNB-CU are equally applicable for an IAB-donor-CU, unless otherwise stated. All functions specified for the UE context are equally applicable for managing the context of IAB-MT, unless otherwise stated.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "6.1.4\tProtocol stacks of IAB",
                            "text_content": "Figure 6.1.4-1 shows the protocol stack for F1-U between IAB-DU and the IAB-donor-CU-UP, and Figure 6.1.4-2 shows the protocol stack for F1-C between IAB-DU and the IAB-donor-CU-CP. In these example figures, F1-U and F1-C traffic are carried over two backhaul hops.\nNOTE:    F1 needs to be security-protected as described in TS 33.501. The security layer is not shown in the Figure 6.1.4-1, Figure 6.1.4-2 and Figure 6.1.4-3.\n\nThe figure depicts the protocol stack for the F1-U of the IAB (Internet Architecture Board) standard, which is a key component in the development of future wireless networks. The stack includes various protocols such as IP, TCP, and UDP, as well as other essential services like DNS, DHCP, and RADIUS. The figure illustrates the flow of data between the network and the end user, highlighting the importance of efficient data transmission and network management in the future of wireless communication.\nFigure 6.1.4-1: Protocol stack for F1-U of IAB\nThe figure depicts the protocol stack for the F1-C of the IAB (Internet Architecture Board) standard, which is a key component in the development of future internet protocols. The stack includes various protocols such as TCP, UDP, and IP, as well as other essential services like DNS, DHCP, and IPsec. The figure illustrates the flow of data between the sender and receiver, highlighting the importance of efficient data transmission and network management in the future of internet technology.\nFigure. 6.1.4-2: Protocol stack for F1-C of IAB\nFigure 6.1.4-3 shows the protocol stack for F1-C between IAB-DU and the IAB-donor-CU-CP, when the F1-C traffic is exchanged via the MeNB.\n\nFig. 6.1.4-3: Protocol stack for IAB F1-C traffic exchanged via the MeNB\nFigure 6.1.4-4 shows the protocol stack for F1-C between IAB-DU and the IAB-donor-CU-CP, when the F1-C traffic is exchanged via the MgNB.\n\nFig. 6.1.4-4: Protocol stack for IAB F1-C traffic exchanged via the MgNB\nFigure 6.1.4-5 shows the protocol stack for F1-C between IAB-DU and the IAB-donor-CU-CP, when the F1-C traffic is exchanged via the SgNB.\n\nFig. 6.1.4-5: Protocol stack for IAB F1-C traffic exchanged via the SgNB\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "6.1.5\tOverall Architecture of NR MBS",
                            "text_content": "The overall architecture specified in clause 6.1.1 and 6.1.2 applies for NR MBS.\nUpon establishment of a MBS Session resource by the 5GC, the gNB-CU triggers the establishment of MRBs, involving the gNB-DU. If E1 is deployed, the gNB-CU-CP triggers establishment of respective MBS UP resources in the gNB-CU-UP.\nThe gNB-DU assigns the G-RNTI.\nA shared F1-U tunnel is used between the gNB-CU and the gNB-DU forMRB with PTM transmission. UE dedicated F1-U tunnels are used between the gNB-CU and the gNB-DU for data transmission of PTP retransmission and PTP forwarding of an MRB. For an MRB configured with PTP only transmission either a shared F1-U or a UE dedicated F1-U tunnel is used, dependent on the lower layer configuration. The gNB-DU assigns the DL GTP-U TEID and provides it to the gNB-CU. If E1 is deployed the gNB-CU-CP forwards it to the gNB-CU-UP.\nFor both broadcast and multicast, DL flow control maybe used for the shared F1-U tunnel established for the MRB, as specified in TS 38.425 [24].\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "6.1.6\tProtocol stacks of L2 UE-to-Network Relay",
                            "text_content": "The protocol stacks for the user plane and control plane of L2 U2N Relay architecture are described in Figure 6.1.6-1 and Figure 6.1.6-2, respectively. The Uu SRAP is terminated between U2N relay UE and gNB-DU.\nThe figure depicts a user plane protocol stack for L2 UE-to-Network Relay, illustrating the various protocols and their interactions.\nFigure 6.1.6-1: User plane protocol stack for L2 UE-to-Network Relay\nThe figure depicts a control plane protocol stack for L2 UE-to-Network Relay, illustrating the various protocols and their interactions. The stack includes the control plane protocol (CBP), the network control protocol (NCP), and the network control protocol (NCP), which are essential for managing network resources and ensuring efficient communication. The figure also includes the network control protocol (NCP) and the network control protocol (NCP), which are essential for managing network resources and ensuring efficient communication.\nFigure 6.1.6-2: Control plane protocol stack for L2 UE-to-Network Relay\n",
                            "figures_meta_data": [],
                            "tables": []
                        }
                    ]
                },
                {
                    "title": "6.2\tNG-RAN identifiers",
                    "description": "",
                    "summary": "",
                    "text_content": "",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": [
                        {
                            "title": "6.2.1\tPrinciple of handling Application Protocol Identities",
                            "text_content": "An Application Protocol Identity (AP ID) is allocated when a new UE-associated logical connection is created in either an NG-RAN node or an AMF. An AP ID shall uniquely identify a logical connection associated to a UE over the NG interface or Xn interface within a node (NG-RAN node or AMF) or over the F1 interface or over the E1 interface or over the W1 interface. Upon receipt of a message that has a new AP ID from the sending node, the receiving node shall store the AP ID of the sending node for the duration of the logical connection. The receiving node shall assign the AP ID to be used to identify the logical connection associated to the UE and include it as well as the previously received new AP ID from the sending node, in the first returned message to the sending node. In all subsequent messages to and from sending node, both AP IDs of sending node and receiving node shall be included. For MBS-associated logical connections of the E1 interface and the F1 interface the same principles for AP IDs apply as for UE-associated logical connections.\nThe definitions of AP IDs as used on NG interface or Xn interface or F1 interface or E1 interface are shown below:\nRAN UE NGAP ID:\nA RAN UE NGAP ID shall be allocated so as to uniquely identify the UE over the NG interface within an gNB. When an AMF receives an RAN UE NGAP ID it shall store it for the duration of the UE-associated logical NG-connection for this UE. Once known to an AMF this is included in all UE associated NGAP signalling.\nThe RAN UE NGAP ID shall be unique within the logical NG-RAN node.\nAMF UE NGAP ID:\nAn AMF UE NGAP ID shall be allocated so as to uniquely identify the UE over the NG interface within the AMF. When a NG-RAN node receives an AMF UE NGAP ID it shall store it for the duration of the UE-associated logical NG-connection for this UE. Once known to a NG-RAN node this ID is included in all UE associated NGAP signalling.\nThe AMF UE NGAP ID shall be unique within an AMF Set as specified in TS 23.501 [3].\nOld NG-RAN node UE XnAP ID:\nAn Old NG-RAN node UE XnAP ID shall be allocated so as to uniquely identify the UE over the Xn interface within a source NG-RAN node. When a target NG-RAN node receives an Old NG-RAN node UE XnAP ID it shall store it for the duration of the UE-associated logical Xn-connection for this UE. Once known to a target NG-RAN node this ID is included in all UE associated XnAP signalling. The Old NG-RAN node UE XnAP ID shall be unique within the logical NG-RAN node.\nNew NG-RAN node UE XnAP ID:\nA New NG-RAN node UE XnAP ID shall be allocated so as to uniquely identify the UE over the Xn interface within a target NG-RAN node. When a source NG-RAN node receives a New NG-RAN node UE XnAP ID it shall store it for the duration of the UE-associated logical Xn-connection for this UE. Once known to a source NG-RAN node this ID is included in all UE associated XnAP signalling. The New NG-RAN node UE XnAP ID shall be unique within the logical NG-RAN node.\nM-NG-RAN node UE XnAP ID:\nAn M-NG-RAN node UE XnAP ID shall be allocated so as to uniquely identify the UE over the Xn interface within an M-NG-RAN node for dual connectivity. When an S-NG-RAN node receives an M-NG-RAN node UE XnAP ID it shall store it for the duration of the UE-associated logical Xn-connection for this UE. Once known to an S-NG-RAN node this ID is included in all UE associated XnAP signalling. The M-NG-RAN node UE XnAP ID shall be unique within the logical NG-RAN node.\nS-NG-RAN node UE XnAP ID:\nA S-NG-RAN node UE XnAP ID shall be allocated so as to uniquely identify the UE over the Xn interface within an S-NG-RAN node for dual connectivity. When an M-NG-RAN node receives a S-NG-RAN node UE XnAP ID it shall store it for the duration of the UE-associated logical Xn-connection for this UE. Once known to an M-NG-RAN node this ID is included in all UE associated XnAP signalling. The S-NG-RAN node UE XnAP ID shall be unique within the logical NG-RAN node.\ngNB-CU UE F1AP ID:\nA gNB-CU UE F1AP ID shall be allocated so as to uniquely identify the UE over the F1 interface within a gNB-CU. When a gNB-DU receives a gNB-CU UE F1AP ID it shall store it for the duration of the UE-associated logical F1-connection for this UE. The gNB-CU UE F1AP ID shall be unique within the gNB-CU logical node.\ngNB-DU UE F1AP ID:\nA gNB-DU UE F1AP ID shall be allocated so as to uniquely identify the UE over the F1 interface within a gNB-DU. When a gNB-CU receives a gNB-DU UE F1AP ID it shall store it for the duration of the UE-associated logical F1-connection for this UE. The gNB-DU UE F1AP ID shall be unique within the gNB-DU logical node.\ngNB-CU-CP UE E1AP ID:\nA gNB-CU-CP UE E1AP ID shall be allocated so as to uniquely identify the UE over the E1 interface within a gNB-CU-CP (respectively an ng-eNB-CU-CP, or an eNB-CP as defined in TS 36.401[28]). When a gNB-CU-UP (respectively an ng-eNB-CU-UP, or an eNB-UP as defined in TS 36.401[28]) receives a gNB-CU-CP UE E1AP ID it shall store it for the duration of the UE-associated logical E1-connection for this UE. The gNB-CU-CP UE E1AP ID shall be unique within the gNB-CU-CP (respectively the ng-eNB-CU-CP, or the eNB-CP as defined in TS 36.401[28]) logical node.\ngNB-CU-UP UE E1AP ID:\nA gNB-CU-UP UE E1AP ID shall be allocated so as to uniquely identify the UE over the E1 interface within a gNB-CU-UP (respectively an ng-eNB-CU-UP, or an eNB-UP as defined in TS 36.401[28]). When a gNB-CU-CP (respectively an ng-eNB-CU-CP, or an eNB-CP as defined in TS 36.401[28]) receives a gNB-CU-UP UE E1AP ID it shall store it for the duration of the UE-associated logical E1-connection for this UE. The gNB-CU-UP UE E1AP ID shall be unique within the gNB-CU-UP (respectively the ng-eNB-CU-UP, or the eNB-UP as defined in TS 36.401[28]) logical node.\nng-eNB-CU UE W1AP ID:\nAn ng-eNB-CU UE W1AP ID shall be allocated so as to uniquely identify the UE over the W1 interface within an ng-eNB-CU. When an ng-eNB-DU receives an ng-eNB-CU UE W1AP ID it shall store it for the duration of the UE-associated logical W1-connection for this UE. The ng-eNB-CU UE W1AP ID shall be unique within the ng-eNB-CU logical node.\nng-eNB-DU UE W1AP ID:\nAn ng-eNB-DU UE W1AP ID shall be allocated so as to uniquely identify the UE over the W1 interface within an ng-eNB-DU. When an ng-eNB-CU receives an ng-eNB-DU UE W1AP ID it shall store it for the duration of the UE-associated logical W1-connection for this UE. The ng-eNB-DU UE W1AP ID shall be unique within the ng-eNB-DU logical node.\ngNB-CU MBS F1AP ID:\nA gNB-CU MBS F1AP ID shall be allocated so as to uniquely identify the MBS Session Context over the F1 interface within a gNB-CU. When a gNB-DU receives a gNB-CU MBS F1AP ID it shall store it for the duration of the MBS-associated logical F1-connection for that MBS Session. The gNB-CU MBS F1AP ID shall be unique within the gNB-CU logical node.\ngNB-DU MBS F1AP ID:\nA gNB-DU MBS F1AP ID shall be allocated so as to uniquely identify the MBS Session Context over the F1 interface within a gNB-DU. When a gNB-CU receives a gNB-DU MBS F1AP ID it shall store it for the duration of the MBS-associated logical F1-connection for this MBS Session. The gNB-DU MBS F1AP ID shall be unique within the gNB-DU logical node.\ngNB-CU-CP MBS E1AP ID:\nA gNB-CU-CP MBS E1AP ID shall be allocated so as to uniquely identify the MBS Session Context over the E1 interface within a gNB-CU-CP. When a gNB-CU-UP receives a gNB-CU-CP MBS E1AP ID it shall store it for the duration of the MBS-associated logical E1-connection for that MBS Session. The gNB-CU-CP MBS E1AP ID shall be unique within the gNB-CU-CP logical node.\ngNB-CU-UP MBS E1AP ID:\nA gNB-CU-UP MBS E1AP ID shall be allocated so as to uniquely identify the MBS Session Context over the E1 interface within a gNB-CU-UP. When a gNB-CU-CP receives a gNB-CU-UP MBS E1AP ID it shall store it for the duration of the MBS-associated logical E1-connection for this MBS Session. The gNB-CU-UP MBS E1AP ID shall be unique within the gNB-CU-UP logical node.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "6.2.2\tgNB-DU ID",
                            "text_content": "The gNB-DU ID is configured at the gNB-DU and used to uniquely identify the gNB-DU at least within a gNB-CU.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "6.2.3\tng-eNB-DU ID",
                            "text_content": "The ng-eNB-DU ID is configured at the ng-eNB-DU and used to uniquely identify the ng-eNB-DU at least within an ng-eNB-CU. The ng-eNB-DU provides its ng-eNB-DU ID to the ng-eNB-CU during the W1 Setup procedure. The ng-eNB-DU ID is used only within W1AP procedures.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "6.2.4\tgNB-CU-UP ID",
                            "text_content": "The gNB-CU-UP ID is configured at the gNB-CU-CP and used to uniquely identify the gNB-CU-UP at least within a gNB-CU-CP. The gNB-CU-UP provides its gNB-CU-UP ID to the gNB-CU-CP during the E1 Setup procedure. The gNB-CP-UP ID is used only within E1AP procedures.\nNOTE 1:\tThis identity is also used to uniquely identify the ng-eNB-CU-UP at least within an ng-eNB-CU-CP in case CP/UP separation is implemented in ng-eNB.\nNOTE 2:\tThis identity is also used to uniquely identify the eNB at least within an eNB-CP in case CP/UP separation is implemented in eNB.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "6.2.5\tRAN UE ID",
                            "text_content": "The RAN UE ID is an identifier allocated to a UE by the gNB-DU during UE Initial Access or by the gNB-CU during UE Context Setup. It is transferred over E1 and F1 interface, in order to do correlation of data for a given UE in case of disaggregated gNB deployment. The RAN UE ID is unique within a gNB.\n",
                            "figures_meta_data": [],
                            "tables": []
                        }
                    ]
                },
                {
                    "title": "6.3\tTransport addresses",
                    "description": "",
                    "summary": "",
                    "text_content": "The transport layer address parameter is transported in the radio network application signalling procedures that result in establishment of transport bearer connections.\nThe transport layer address parameter shall not be interpreted in the radio network application protocols and reveal the addressing format used in the transport layer.\nThe formats of the transport layer addresses are further described in TS 38.414 [5], TS 38.424 [6] and TS 38.474 [7].\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "6.4\tUE associations in NG-RAN Node",
                    "description": "",
                    "summary": "",
                    "text_content": "There are several types of UE associations needed in the NG-RAN node: the \"NG-RAN node UE context\" used to store all information needed for a UE and the associations between the UE and the logical NG and Xn connections used for NG/XnAP UE associated messages. An \"NG-RAN node UE context\" exists for a UE in CM_CONNECTED.\nDefinitions:\nNG-RAN node UE context:\nAn NG-RAN node UE context is a block of information in an NG-RAN node associated to one UE. The block of information contains the necessary information required to maintain the NG-RAN services towards the active UE. An NG-RAN node UE context is established when the transition to RRC CONNECTED for a UE is completed or in the target NG-RAN node after completion of handover resource allocation during handover preparation, in which case at least UE state information, security information, UE capability information and the identities of the UE-associated logical NG-connection shall be included in the NG-RAN node UE context.\nFor Dual Connectivity an NG-RAN node UE context is also established in the S-NG-RAN node after completion of S-NG-RAN node Addition Preparation procedure.\nIf radio bearers are requested to be setup during a UE Context setup or modification procedure, the UE capabilities are signalled to the receiving node as part of the UE context setup or modification procedures.\nBearer context:\nA bearer context is a block of information in a gNB-CU-UP node associated to one UE that is used for the sake of communication over the E1 interface. It may include the information about data radio bearers, PDU sessions and QoS-flows associated to the UE. The block of information contains the necessary information required to maintain user-plane services toward the UE.\nUE-associated logical NG/Xn/F1/E1-connection:\nNGAP, XnAP, F1AP and E1AP provide means to exchange control plane messages associated with the UE over the respectively NG-C, Xn-C, F1-C or E1 interface.\nA UE-associated logical connection is established during the first NGAP/XnAP/F1AP message exchange between the NG/Xn/F1 peer nodes.\nThe connection is maintained as long as UE associated NG/XnAP/F1AP messages need to be exchanged over the NG/Xn/F1 interface.\nThe UE-associated logical NG-connection uses the identities AMF UE NGAP ID and RAN UE NGAP ID.\nThe UE-associated logical Xn-connection uses the identities Old NG-RAN node UE XnAP ID and New NG-RAN node UE XnAP ID, or M-NG-RAN node UE XnAP ID and S-NG-RAN node UE XnAP ID.\nThe UE-associated logical F1-connection uses the identities gNB-CU UE F1AP ID and gNB-DU UE F1AP ID.\nThe UE-associated logical E1-connection uses the identities gNB-CU-CP UE E1AP ID and gNB-CU-UP UE E1AP ID.\nWhen a node (AMF or gNB) receives a UE associated NGAP/XnAP/F1AP/E1AP message the node retrieves the associated UE based on the NGAP/XnAP/F1AP/E1AP ID.\nUE-associated signalling:\nUE-associated signalling is an exchange of NGAP/XnAP/F1AP/E1AP messages associated with one UE over the UE-associated logical NG/Xn/F1/E1-connection.\nNOTE1:\tThe UE-associated logical NG-connection may exist before the NG-RAN node UE context is setup in the NG-RAN node.\nNOTE2:\tThe UE-associated logical F1-connection may exist before the UE context is setup in the gNB-DU.\nNOTE3:\tThe general principle described in this clause also applies to ng-eNB and W1/E1 interface, if not explicitly specified otherwise.\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "6.5\tMBS Session associations in NG-RAN Node",
                    "description": "",
                    "summary": "",
                    "text_content": "The following MBS Session associations are defined in the NG-RAN node to support NR MBS:\nNG-RAN MBS session resource context: Encompasses CP and UP, transport and radio resources to support an MBS Session. For multicast it also encompasses the MBS Session state (active, de-activated) and information about joined UEs. If an MBS session resource within a gNB serves multiple MBS service areas, as specified in TS 23.247 [27] the same NG RAN MBS session resource context may be associated with multiple NG-U resources. For a multicast MBS session, NG-U resources are setup or released by the gNB upon UE mobility or UEs leaving or joining the multicast MBS session.\nMBS Session context in a gNB-DU:\nThe definition of an MBS Session context in a gNB-DU applicable for broadcast and multicast.\nAn MBS Session context in a gNB-DU\n-\tis a block of information associated to an MBS Session, which may consist of one or several MRB Contexts;\n-\tcorresponds to either one or several F1-U tunnels.\nMRB Context in a gNB-DU:\nAn MRB Context is a block of information in a gNB-DU associated to an MRB (MRB “instance”). The gNB-DU sets up resources for each MRB Context in a gNB-DU associated to an MBS Session context\n-\tbased on information provided within MBS Session Context related information as received by the gNB-DU (e.g. MRB QoS, MBS service area information, etc.), and,\n-\tfor multicast, based on the UE Contexts established for RRC_CONNECTED UEs within the gNB-DU containing joining information of the UE for the respective multicast session.\n-\tfor broadcast, the gNB-DU determines whether F1-U tunnels are setup per gNB-DU or per MBS Area Session ID served by the gNB-DU.\n-\tfor multicast, the gNB-DU determines whether F1-U tunnels are setup per gNB-DU or per cell served by the DU or per MBS Area Session ID served by the gNB-DU or for ptp restransmissions or for a ptp-only MRB leg.\nFor multicast, for each MRB, the gNB-DU provides the MRB specific Uu configuration to the gNB-CU to configure the UE.\nMulticast F1-U Context:\nA Multicast F1-U Context is a block of information in a gNB-DU to control the F1-U tunnels associated to the MRB Contexts established for a multicast MBS session. A Multicast F1-U Context is either established per gNB-DU or per cell served by the gNB-DU or per MBS Area Session ID served by the gNB-DU or for ptp restransmissions or for ptp forwarding or for a ptp-only MRB leg. Several Multicast F1-U contexts may exist in parallel in a gNB-DU for the same multicast MBS session.\nAllocation and usage of MRB ID values on NG-RAN interfaces for multicast MBS sessions:\n-\tF1 interface: an MRB ID signalled on an F1 interface instance identifies uniquely an MRB among all MRB contexts in an gNB-DU, allocated for all active multicast MBS sessions served by that gNB-DU. The value of each MRB ID is the same value as communicated to UEs served by that gNB-DU.\n-\tE1 interface: an MRB ID signalled on an E1 interface instance identifies uniquely an MRB among all MRBs allocated for a multicast MBS session.\n-\tXn interface, NG interface: MRB IDs are signalled on Xn/NG interfaces for providing MBS QoS flow to MRB mapping information and data forwarding information from the source gNB.  The value of the MRB ID signalled on the Xn/NG interface is the same value as communicated to UEs at the source cell.\nAllocation and usage of MRB ID values on NG-RAN interfaces for broadcast MBS sessions:\n-\tAn MRB ID signalled on NG-RAN interfaces identifies uniquely an MRB among all MRBs allocated for a broadcast MBS sesssion.\nMBS-associated logical F1/E1-connection:\nF1AP and E1AP provide means to exchange control plane messages associated with an MBS session over the respective F1/E1 interface.\nAn MBS-associated logical connection is established during the first F1AP/E1AP message exchange between the F1/E1 peer nodes.\nThe connection is maintained as long as MBS associated F1AP/E1AP messages need to be exchanged over the F1/E1 interface.\nThe MBS-associated logical F1-connection uses the identities gNB-CU MBS F1AP ID and gNB-DU MBS F1AP ID.\nThe MBS-associated logical E1-connection uses the identities gNB-CU-CP MBS E1AP ID and gNB-CU-UP MBS E1AP ID.\nWhen a node (DU or CU or CU-CP and CU-UP) receives an MBS associated F1AP/E1AP message the node retrieves the associated MBS session based on the F1AP/E1AP ID.\nMBS-associated signalling:\nMBS-associated signalling is an exchange of F1AP/E1AP messages associated with one MBS session over the MBS-associated logical F1/E1-connection.\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                }
            ]
        },
        {
            "title": "7\tNG-RAN functions description",
            "description": "",
            "summary": "",
            "tables": [],
            "figures_meta_data": [],
            "subsections": [
                {
                    "title": "7.0\tGeneral",
                    "description": "",
                    "summary": "",
                    "text_content": "For the list of functions refer to TS 38.300 [2].\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "7.1\tNG-RAN sharing",
                    "description": "",
                    "summary": "",
                    "text_content": "NG-RAN supports radio access network sharing as specified in TS 23.501 [3] and TS 38.300 [2] and TS 36.300 [19].\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "7.2\tRemote Interference Management",
                    "description": "",
                    "summary": "",
                    "text_content": "The Remote Interference Management function in non-split gNB case is specified in TS 38.300 [2].\nIn case of split gNB architecture, in the victim set, a gNB-DU detects the remote interference. If remote interference is detected, the gNB-DU can send out the RIM-RS. In the aggressor set, if a gNB-DU detects the RIM-RS sent by the victim gNB(s), it sends to the gNB-CU the RIM-RS detection status and the victim Set ID. The gNB-CU acts as a coordinator on behalf of its affiliated gNB-DUs, where the gNB-CU merges the outgoing RIM information received from its gNB-DUs in the aggressor set and forwards the merged information to all the gNBs in the victim set.\nSimilarly, in the victim set, the gNB-CU distributes the incoming RIM information to all the gNB-DUs in the set, as indicated in the RIM information received from the aggressor set.\nIn addition, to facilitate consolidation of RIM information, the gNB-DU provides the associated aggressor set ID and the victim set ID of each serving cell to the gNB-CU.\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "7.3\tCross-Link Interference Management",
                    "description": "",
                    "summary": "",
                    "text_content": "The Cross-Link Interference Management function in non-split gNB case is specified in TS 38.300 [2].\nIn case of split gNB architecture, the gNB-CU forwards the TDD DL/UL patterns received from neighboring nodes to each concerned gNB-DU. The gNB-DU reports the TDD DL/UL patterns of its serving cells to the gNB-CU if Cross-Link Interference is detected.\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "7.4\tSupport for Non-Public Networks",
                    "description": "",
                    "summary": "",
                    "text_content": "NG-RAN supports NPN as specified in TS 23.501 [3] and TS 38.300 [2].\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "7.5\tRACH Optimisation Function",
                    "description": "",
                    "summary": "",
                    "text_content": "The RACH Optimization Function in non-split gNB case is specified in TS 38.300 [2].\nIn case of split gNB architecture, RACH configuration conflict detection and resolution function is located at the gNB-DU. To perform RACH optimisation at gNB-DU, gNB-CU sends the RA Report retrieved from the UE(s) to gNB-DU via F1AP signalling. The gNB-DU signals the PRACH configuration per-cell to gNB-CU. The gNB-CU may forward a limited set of neighbour cell’s PRACH configurations received from neighbour gNBs and other gNB-DUs to the gNB-DU to resolve the configuration conflict.\nRA Report retrieval\nWhen a UE performs successful random access attempts which are only known by the gNB-DU (e.g., beam failure recovery, UL synchronization issue, scheduling request failure, no PUCCH resource available), the gNB-DU may inform the gNB-CU about the occurrences of successful random access procedures in the gNB-DU via a RACH indication. The gNB-CU may then retrieve the RA Report from the UE(s) based on the RACH indication received via F1AP signalling from the gNB-DU.\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "7.6\tPositioning",
                    "description": "",
                    "summary": "",
                    "text_content": "The NG-RAN supports the positioning functionality as specified in TS 38.305 [25].\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "7.7\tSupport for NR MBS",
                    "description": "",
                    "summary": "",
                    "text_content": "The Support of NR MBS in non-split gNB case is specified in TS 38.300 [2].\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": [
                        {
                            "title": "7.7.1\tSupport of dynamic PTP and PTM switching",
                            "text_content": "For UEs in RRC_CONNECTED, NG-RAN supports dynamic switch between PTP and PTM for MBS as specified in TS 38.300 [2].\nIn case of split gNB architecture, for a MRB with common PDCP involving both PTP (RLC leg) and PTM (RLC leg), upon receiving the MBS data from the gNB-CU via a shared F1-U tunnel, the gNB-DU makes decision of using PTP (RLC leg) or PTM (RLC leg) or both.\nFor UEs in RRC_INACTIVE only PTM is supported as specified in TS 38.300 [2].\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "7.7.2\tSupport of resource efficiency for RAN Sharing",
                            "text_content": "Resource efficiency for RAN sharing is supported in both MOCN scenario and Multiple Cell-ID Broadcast scenario.\nInformation enabling identifying broadcast MBS sessions for which RAN resources could be shared by the involved gNB-DUs and the gNB-CU-UP is provided by the gNB-CU-CP. Only one set of shared F1-U resources is established and kept as long as there is one PLMN keeping the Multicast service.\ngNB-DUs sharing the same physical cell resources receive via F1-C information enabling identifying broadcast MBS sessions providing identical content. The identification is based on Associated Session ID, for location dependent MBS services, the MBS Service Area is also taken into account.\nApplying resource efficiency for RAN Sharing with multiple cell-ID broadcast\n-\tresolve different QoS requirements received from the participating 5GCs in an implementation specific way.\n-\tF1-U resources are established towards either all involved gNB-CUs or only some of them which is decided by the entity controlling the involved gNB-DUs sharing the same physical cell resources. The gNB-DU is able to trigger the gNB-CU to establish F1-U resources.\n-\tthe gNB-CU-CP takes into account the decision F1-U resources have been established or not to decide whether to establish NG-U resources.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "7.7.3\tSupport of Multicast reception for UEs in RRC_INACTIVE",
                            "text_content": "F1AP supports to enable and disable multicast reception for UEs in RRC_INACTIVE state for a specific multicast session on cell level.\nThe gNB-CU decides whether multicast reception in RRC_INACTIVE is applied.\n",
                            "figures_meta_data": [],
                            "tables": []
                        }
                    ]
                },
                {
                    "title": "7.8\tPCI Optimisation Function",
                    "description": "",
                    "summary": "",
                    "text_content": "The PCI Optimization Function in non-split gNB case is specified in TS 38.300 [2].\nIn split gNB architecture, the OAM configures a PCI for each NR cell to the gNB-DU.\nFor centralized PCI assignment in split gNB architecture, the gNB-CU detects PCI conflict of NR cells and reports the NR cells suffering PCI conflict to OAM directly. The OAM is in charge of reassigning a new PCI for the NR cell subject to PCI conflict.\nFor distributed PCI assignment in split gNB architecture, the OAM assigns a list of PCIs for each NR cell and sends the configured PCI list to the gNB-CU. If the gNB-CU detects PCI conflict, the gNB-CU may select a new PCI value from the preconfigured PCI list for the NR cell and send it to the gNB-DU by either F1 Setup procedure or gNB-CU configuration update procedure.\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "7.9\tSupport for CCO",
                    "description": "",
                    "summary": "",
                    "text_content": "",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": [
                        {
                            "title": "7.9.1\tGeneral",
                            "text_content": "The NR Capacity and Coverage Optimization (CCO) Function in non-split gNB case is specified in TS 38.300 [2]. The objective of this function is to detect and mitigate coverage and cell edge interference issues.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "7.9.2\tOAM requirements",
                            "text_content": "Each gNB-DU may be configured with alternative coverage configurations by OAM. The alternative coverage configurations contain relevant radio parameters and may also include a range for how each parameter is allowed to be adjusted.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "7.9.3\tDynamic coverage configuration changes",
                            "text_content": "In case of split gNB architecture, CCO detection function is located at the gNB-CU. The gNB-CU signals to the gNB-DU the CCO issue and the affected cells and beams. The gNB-DU resolves the CCO issue concerning own served cell by local action within the OAM configured limits. The gNB-DU may also take into account information received for other cells when adopting the CCO configuration. The gNB-DU informs the gNB-CU of the new coverage states adopted.\n",
                            "figures_meta_data": [],
                            "tables": []
                        }
                    ]
                },
                {
                    "title": "7.10\tSupport of RAN visible QoE measurement",
                    "description": "",
                    "summary": "",
                    "text_content": "The RAN visible QoE measurement function is specified in TS 38.300 [2].\nIn split gNB architecture, upon the reception of the RAN visible QoE measurement report from the UE, the gNB-CU may forward the corresponding QoE information to the gNB-DU. The QoE information transferred to the gNB-DU may include the RAN visible QoE measurement results received from the UE, along with the corresponding DRB ID(s).\nThe gNB-DU may deactivate the transfer of RAN visible QoE measurement results from the gNB-CU, by initiating QoE Information Transfer Control procedure towards the gNB-CU.\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "7.11\tSupport of AI/ML in NG-RAN",
                    "description": "",
                    "summary": "",
                    "text_content": "The support of AI/ML in NG-RAN is specified in TS 38.300 [2].\nIn case of CU-DU split architecture, the following scenarios may be supported:\n-\tAI/ML Model Training is located in the OAM and AI/ML Model Inference is located in the gNB-CU.\n-\tAI/ML Model Training and Model Inference are both located in the gNB-CU.\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                }
            ]
        },
        {
            "title": "8\tOverall procedures in gNB-CU/gNB-DU Architecture",
            "description": "",
            "summary": "",
            "tables": [],
            "figures_meta_data": [],
            "subsections": [
                {
                    "title": "8.1\tUE Initial Access",
                    "description": "",
                    "summary": "",
                    "text_content": "The signalling flow for UE Initial access is shown in Figure 8.1-1.\nThe figure depicts a simplified schematic of an initial access procedure for a wireless network, with a focus on the use of a central controller (U) and an end device (E) to establish a connection. The figure illustrates the steps involved in the access procedure, including the establishment of a secure channel, the exchange of authentication information, and the establishment of a secure connection. The figure is a visual representation of the complex process involved in wireless network access, highlighting the importance of the central controller in ensuring the security and reliability of the network.\nFigure 8.1-1: UE Initial Access procedure\n1.\tThe UE sends an RRCSetupRequest message to the gNB-DU.\n2.\tThe gNB-DU includes the RRC message and, if the UE is admitted, the corresponding low layer configuration for the UE in the  INITIAL UL RRC MESSAGE TRANSFER message and transfers to the gNB-CU. The INITIAL UL RRC MESSAGE TRANSFER message includes the C-RNTI allocated by the gNB-DU. If the gNB-DU identifies the UE as a Reduced Capability UE during the random access procedure, a NR RedCap UE Indication is provided in the INITIAL UL RRC MESSAGE TRANSFER message.\n3.\tThe gNB-CU allocates a gNB-CU UE F1AP ID for the UE and generates a  RRCSetup message towards UE. The RRC message is encapsulated in -the DL RRC MESSAGE TRANSFER message.\n4.\tThe gNB-DU sends the RRCSetup message to the UE.\n5.\tThe UE sends the RRC CONNECTION SETUP COMPLETE message to the gNB-DU.\n6.\tThe gNB-DU encapsulates the RRC message in the UL RRC MESSAGE TRANSFER message and sends it to the gNB-CU.\n7.\tThe gNB-CU sends the INITIAL UE MESSAGE message to the AMF.\n8.\tThe AMF sends the INITIAL CONTEXT SETUP REQUEST message to the gNB-CU.\n9.\tThe gNB-CU sends the UE CONTEXT SETUP REQUEST message to establish the UE context in the gNB-DU. In this message, it may also encapsulate the SecurityModeCommand message. In case of NG-RAN sharing, the gNB-CU includes the serving PLMN ID (for SNPNs the serving SNPN ID).\n10.\tThe gNB-DU sends the SecurityModeCommand message to the UE.\n11.\tThe gNB-DU sends the UE CONTEXT SETUP RESPONSE message to the gNB-CU.\n12.\tThe UE responds with the SecurityModeComplete message.\n13.\tThe gNB-DU encapsulates the RRC message in the UL RRC MESSAGE TRANSFER message and sends it to the gNB-CU.\n14.\tThe gNB-CU generates the RRCReconfiguration message and encapsulates it in the DL RRC MESSAGE TRANSFER message.\n15.\tThe gNB-DU sends RRCReconfiguration message to the UE.\n16.\tThe UE sends RRCReconfigurationComplete message to the gNB-DU.\n17.\tThe gNB-DU encapsulates the RRC message in the UL RRC MESSAGE TRANSFER message and send it to the gNB-CU.\n18.\tThe gNB-CU sends the INITIAL CONTEXT SETUP RESPONSE message to the AMF.\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "8.2\tIntra-gNB-CU Mobility",
                    "description": "",
                    "summary": "",
                    "text_content": "",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": [
                        {
                            "title": "8.2.1\tIntra-NR Mobility",
                            "text_content": "This procedure is used for the case when the UE moves from one gNB-DU to another gNB-DU within the same gNB-CU during NR operation. Figure 8.2.1.1-1 shows the inter-gNB-DU mobility procedure for intra-NR.\nThe figure depicts inter-gNB-DU mobility for intra-NR, illustrating the movement of data between different gNB-DU (Giga-BANDUEs) within the network. This mobility is crucial for ensuring efficient data transmission and reducing latency. The figure also highlights the use of optical fibers and optical line terminals (OLTs) to facilitate the transmission of data.\nFigure 8.2.1.1-1: Inter-gNB-DU Mobility for intra-NR\n1.\tThe UE sends a MeasurementReport message to the source gNB-DU.\n2.\tThe source gNB-DU sends an UL RRC MESSAGE TRANSFER message to the gNB-CU to convey the received MeasurementReport message.\n2a.\tThe gNB-CU may send an UE CONTEXT MODIFICATION REQUEST message to the source gNB-DU to query the latest configuration.\n2b.\tThe source gNB-DU responds with an UE CONTEXT MODIFICATION RESPONSE message that includes full configuration information.\n3.\tThe gNB-CU sends an UE CONTEXT SETUP REQUEST message to the target gNB-DU to create an UE context and setup one or more data bearers. The UE CONTEXT SETUP REQUEST message includes a HandoverPreparationInformation. In case of NG-RAN sharing, the gNB-CU includes the serving PLMN ID (for SNPNs the serving SNPN ID).\n4.\tThe target gNB-DU responds to the gNB-CU with an UE CONTEXT SETUP RESPONSE message.\n5.\tThe gNB-CU sends a UE CONTEXT MODIFICATION REQUEST message to the source gNB-DU, which includes a generated RRCReconfiguration message and indicates to stop the data transmission for the UE. The source gNB-DU also sends a Downlink Data Delivery Status frame to inform the gNB-CU about the unsuccessfully transmitted downlink data to the UE.\nNOTE:\tIn case of DAPS Handover, the UE CONTEXT MODIFICATION REQUEST message in step 5 may indicate to stop the data transmission only for the DRB(s) not subject to DAPS Handover or may not indicate to stop the data transmission at all. Instead, the DL RRC Message Transfer procedure can be used to carry the handover command to the UE. The UE CONTEXT MODIFICATION REQUEST message that indicates to stop the data transmission for the UE is sent to the source gNB-DU once the gNB-CU knows that the UE has successfully accessed the target gNB-DU, for which the source gNB-DU sends a DDDS frame about the unsuccessfully transmitted downlink data to the gNB-CU.\n6.\tThe source gNB-DU forwards the received RRCReconfiguration message to the UE.\n7.\tThe source gNB-DU responds to the gNB-CU with the UE CONTEXT MODIFICATION RESPONSE message.\n8.\tA Random Access procedure is performed at the target gNB-DU. The target gNB-DU sends a Downlink Data Delivery Status frame to inform the gNB-CU. Downlink packets, which may include PDCP PDUs not successfully transmitted in the source gNB-DU, are sent from the gNB-CU to the target gNB-DU.\nNOTE:\tIt is up to gNB-CU implementation whether to start sending DL User Data to gNB-DU before or after reception of the Downlink Data Delivery Status.\n9.\tThe UE responds to the target gNB-DU with an RRCReconfigurationComplete message.\n10.\tThe target gNB-DU sends an UL RRC MESSAGE TRANSFER message to the gNB-CU to convey the received RRCReconfigurationComplete message. Downlink packets are sent to the UE. Also, uplink packets are sent from the UE, which are forwarded to the gNB-CU through the target gNB-DU.\n11.\tThe gNB-CU sends an UE CONTEXT RELEASE COMMAND message to the source gNB-DU.\n12.\tThe source gNB-DU releases the UE context and responds the gNB-CU with an UE CONTEXT RELEASE COMPLETE message.\nThis procedure is used for the case that the UE moves from one cell to another cell within the same gNB-DU or for the case that intra-cell handover is performed during NR operation, and supported by the UE Context Modification (gNB-CU initiated) procedure as specified in TS 38.473 [4]. When the intra-gNB-DU handover is performed (either inter-cell or intra-cell), the gNB-CU provides new UL GTP TEID to the gNB-DU and the gNB-DU provides new DL GTP TEID to the gNB-CU. The gNB-DU shall continue sending UL PDCP PDUs to the gNB-CU using the previous UL GTP TEID until it re-establishes the RLC, and after then start sending using the new UL GTP TEID. The gNB-CU shall continue sending DL PDCP PDUs to the gNB-DU using the previous DL GTP TEID until it performs PDCP re-establishment or PDCP data recovery, and after then start sending using the new DL GTP TEID.\nThis procedure is used for the case when the UE moves from one gNB-DU to another gNB-DU within the same gNB-CU during NR operation for conditional handover or conditional PSCell change or subsequent CPAC. Figure 8.2.1.3-1 shows the inter-gNB-DU conditional mobility procedure for intra-NR.\nThe figure depicts a conditional handover or conditional power-save change (PSC) for intra-NR, which is a crucial process in 5G networks. It illustrates the inter-gNB-DU (G-DU) conditional handover or conditional power-save change, which is a method to reduce power consumption during handover or power-saving periods. The figure also shows the subsequent CPAC (Conditional Power-save Change) for intra-NR, which is a method to further reduce power consumption during handover or power-saving periods. This process is essential for maintaining the network's performance and energy efficiency in 5G networks.\nFigure 8.2.1.3-1: Inter-gNB-DU Conditional Handover or Conditional PSCell Change or subsequent CPAC for intra-NR\n1-2.\tThe steps 1-2 are as defined in clause 8.2.1.1.\n3.\tThe gNB-CU sends an UE CONTEXT SETUP REQUEST message to the candidate gNB-DU to create an UE context and setup one or more data bearers. The UE CONTEXT SETUP REQUEST message is sent for each candidate cell and includes a HandoverPreparationInformation (conditional handover) or a CG-ConfigInfo (conditional PSCell change or subsequent CPAC).\n4.\tThe candidate gNB-DU responds to the gNB-CU with an UE CONTEXT SETUP RESPONSE message including the target cell ID that was requested from the gNB-CU. The response message is sent for each requested candidate cell.\n5.\tThe gNB-CU sends a DL RRC MESSAGE TRANSFER message to the source gNB-DU, which includes a generated RRCReconfiguration message.\n6.\tThe step 6 is as defined in clause 8.2.1.1.\n7-8.\tThe UE responds to the source gNB-DU with an RRCReconfigurationComplete message, for which the source gNB-DU forwards to the gNB-CU via an UL RRC MESSAGE TRANSFER message.\n9.\t An execution condition to trigger initiation of conditional handover or conditional PSCell change or subsequent CPAC is fulfilled.\n10. A Random Access procedure is performed at the candidate gNB-DU, which becomes the target gNB-DU if successful. The target gNB-DU sends a Downlink Data Delivery Status frame to inform the gNB-CU. The target gNB-DU also sends an ACCESS SUCCESS message to inform the gNB-CU of which cell the UE has successfully accessed.\n11-12.\tThe steps 11-12 are as defined in steps 9-10 in clause 8.2.1.1.\n13.\tThe gNB-CU sends a UE CONTEXT MODIFICATION REQUEST message to the source gNB-DU and indicates to stop the data transmission for the UE. The source gNB-DU also sends a Downlink Data Delivery Status frame to inform the gNB-CU about the unsuccessfully transmitted downlink data to the UE. Downlink packets, which may include PDCP PDUs not successfully transmitted in the source gNB-DU, are sent from the gNB-CU to the target gNB-DU.\nNOTE:\tThe step 13 may happen before step 12, as soon as the gNB-CU knows which cell the UE has successfully accessed.\nNOTE:\tThe gNB-CU may initiate UE Context Release procedure toward the other signalling connections or other candidate target gNB-DUs, if any, to cancel conditional handover or conditional PSCell change for the UE.\n14.\tThe source gNB-DU responds to the gNB-CU with the UE CONTEXT MODIFICATION RESPONSE message.\n15 -16. \tThe steps 15-16 are as defined in steps 11-12 in clause 8.2.1.1.\nThe step 15~16 shall not happen if all of the PSCells in the source gNB-DU remain configured as the candidate PSCell(s) in the subsequent CPAC.\nThis procedure is used for the case when the UE moves within the same gNB-DU during NR operation for LTM. Figure 8.2.1.4-1 shows the intra-gNB-DU LTM procedure for intra-NR.\nThe figure depicts an intra-gNB-DU LTM (Local Traffic Management) in a 5G network, illustrating the interconnection between the gNB (gNB-DU) and the UE (User Equipment). The diagram highlights the various components involved, such as the gNB, UE, and scatterers, and demonstrates the use of beamforming techniques to mitigate interference.\nFigure 8.2.1.4-1: Intra-gNB-DU LTM\n1.\tThe UE sends a MeasurementReport message (L3 measurement result) to the gNB-DU containing measurements of neighbouring cells. The gNB-DU sends an UL RRC MESSAGE TRANSFER message conveying the received MeasurementReport message to the gNB-CU.\n2.\tThe gNB-CU determines to initiate LTM configuration.\n3.\tThe gNB-CU sends a UE CONTEXT MODIFICATION REQUEST message to the gNB-DU containing one target candidate cell ID, the LTM configuration ID of the candidate cell, and LTM configuration ID mapping list, the CSI resource configuration. The gNB-CU requests PRACH resources from the gNB-DU. The gNB-CU may request the gNB-DU to provide the lower layer configuration for the purpose of generating the reference configuration.\n4.\tIf the gNB-DU accepts the request of LTM configuration, it responds with a UE CONTEXT MODIFICATION RESPONSE message including the generated lower layer RRC configurations (e.g., TCI state configuration, RACH configuration, and the CSI report configuration) for the accepted target candidate cell.\nNOTE 1:\tSteps 3 and 4 may be initiated multiple times for LTM candidate cell preparation of multiple cells including the source cell.\n5.\tThe gNB-CU sends a UE CONTEXT MODIFICATION REQUEST message to the source gNB-DU including the collected TCI state configurations and the gNB-CU may send the CSI report configuration for all the accepted target candidate cells.\n6.\tThe source gNB-DU responds with a UE CONTEXT MODIFICATION RESPONSE message which includes an updated lower layer configuration, e.g., containing the CSI report configuration of the source cell.\nNOTE 2:\tIn case of subsequent LTM, the CU-initiated UE Context Modification procedure may be invoked per each candidate cell to transfer to the candidate gNB-DU the CSI report configuration, TCI state information, RACH configuration, and the LTM configuration IDs of the candidate cells.\n7.\tThe gNB-CU sends a DL RRC MESSAGE TRANSFER message to the gNB-DU, which includes the generated RRCReconfiguration message with the LTM configuration.\n8.\tThe gNB-DU forwards the received RRCReconfiguration message to the UE.\n9.\tThe UE responds to the gNB-DU with an RRCReconfigurationComplete message.\n10.\tThe gNB-DU forwards the RRCReconfigurationComplete message to the gNB-CU via an UL RRC MESSAGE TRANSFER message.\n11.\tEarly synchronization may be performed as specified in TS 38.300 [2].\n12.\tThe UE sends the L1 measurement result to the gNB-DU. The gNB-DU decides to execute LTM.\n13.\tThe gNB-DU sends the Cell Switch command to the UE.\n14.\tThe gNB-DU sends the DU-CU CELL CHANGE NOTIFICATION message to the gNB-CU to indicate the initiation of the Cell Switch command to the UE including the target cell ID and the TCI state ID.\n15.\tThe gNB-DU detects the UE access as specified in TS 38.300 [2].\n16.\tThe target gNB-DU sends the ACCESS SUCCESS message to the gNB-CU with the target cell ID.\n17.\tThe UE sends an RRCReconfigurationComplete message to the gNB-DU.\n18.\tThe gNB-DU forwards the RRCReconfigurationComplete message to the gNB-CU via an UL RRC MESSAGE TRANSFER message.\n19.\tThe gNB-CU may send the UE CONTEXT MODIFICATION REQUEST message to the gNB-DU to release the resources of prepared cells.\n20.\tThe gNB-DU responds with a UE CONTEXT MODIFICATION RESPONSE message.\nThis procedure is used for the case when the UE moves from one gNB-DU to another gNB-DU within the same gNB-CU during NR operation for LTM. Figure 8.2.1.5-1 shows the inter-gNB-DU LTM procedure for intra-NR.\n\nThe figure depicts a 5G network with a multi-path signal propagation, illustrating the signal path from the base station (gNB) to the user equipment (UE) and the various elements involved in the signal transmission, such as the base station, user equipment, and scatterers. The figure highlights the use of beamforming techniques to mitigate interference and the importance of redundancy paths to ensure reliable communication.\nFigure 8.2.1.5-1: Inter-gNB-DU LTM\n1.\tThe UE sends a MeasurementReport message (L3 measurement result) to the source gNB-DU containing measurements of neighbouring cells. The source gNB-DU sends an UL RRC MESSAGE TRANSFER message conveying the received MeasurementReport message to the gNB-CU.\n2.\tThe gNB-CU determines to initiate LTM configuration.\n3.\tThe gNB-CU sends a UE CONTEXT SETUP REQUEST message to the candidate gNB-DU(s), containing one target candidate cell ID, the LTM configuration ID of the candidate cell, LTM configuration ID mapping list, and the CSI resource configuration. The gNB-CU indicates the source gNB-DU ID, and requests PRACH resources from the candidate gNB-DU. The gNB-CU may request the candidate gNB-DU to provide the lower layer configuration for the purpose of generating the reference configuration.\n4.\tIf the candidate gNB-DU accepts the request of LTM configuration, it responds with a UE CONTEXT SETUP RESPONSE message including the generated lower layer RRC configurations (e.g., TCI state configuration, RACH configuration, and the CSI report configuration) for the accepted target candidate cell.\nNOTE 1:\tThe CU-initiated UE Context Modification procedure may be initiated for preparing candidate cells in the source gNB-DU as specified in step 3 and 4 in 8.2.1.4 Intra-gNB-DU LTM.\n5.\tThe gNB-CU sends a UE CONTEXT MODIFICATION REQUEST message to the source gNB-DU including the collected CSI report configuration, RACH configuration and the TCI state configuration for the accepted target candidate cell(s) in other gNB-DU(s).\n6.\tThe source gNB-DU responds with a UE CONTEXT MODIFICATION RESPONSE message which includes an updated lower layer configuration, e.g., containing the CSI report configuration.\n7.\tThe gNB-CU sends a UE CONTEXT MODIFICATION REQUEST message to the candidate gNB-DU(s) containing the CSI report configuration, TCI state information, RACH Configuration, and the LTM configuration IDs of the candidate cells in other candidate gNB-DU(s). The gNB-CU may also provide the lower layer part of the reference configuration to the candidate gNB-DU(s). The gNB-CU may also provide an updated CSI resource configuration to the candidate gNB-DU(s).\nNOTE 2: The candidate cell may be the same cell as source cell.\n8.\tThe candidate gNB-DU responds with a UE CONTEXT MODIFICATION RESPONSE message including the updated lower layer configuration. The candidate gNB-DU may also respond the updated CSI report configuration.\n9.\tThe gNB-CU sends a DL RRC MESSAGE TRANSFER message to the source gNB-DU, which includes the generated RRCReconfiguration message with the LTM configuration.\n10.\tThe source gNB-DU forwards the received RRCReconfiguration message to the UE.\n11.\tThe UE responds to the source gNB-DU with an RRCReconfigurationComplete message.\n12.\tThe source gNB-DU forwards the RRCReconfigurationComplete message to the gNB-CU via an UL RRC MESSAGE TRANSFER message.\n13.\tEarly synchronization may be performed as specified in TS 38.300 [2].\n14 - 15.\tThe candidate gNB-DU sends the TA value, the associated CFRA resource information, the candidate cell ID and the source gNB-DU ID to the source gNB-DU via the DU-CU TA INFORMATION TRANSFER and CU-DU TA INFORMATION TRANSFER messages, for which the source gNB-DU ID is omitted in the CU-DU TA INFORMATION TRANSFER message.\n16.\tThe UE sends the L1 measurement result to the source gNB-DU.\n17.\tThe source gNB-DU decides to execute LTM to a candidate target cell.\n18.\tThe source gNB-DU sends the Cell Switch command to the UE.\n19.\tThe source gNB-DU sends the DU-CU CELL SWITCH NOTIFICATION message to the gNB-CU to indicate the initiation of the Cell Switch command to the UE, for which the message includes the target cell ID and the TCI state ID.\n20.\tThe gNB-CU forwards the target cell ID and the TCI state ID to the target gNB-DU in the CU-DU CELL SWITCH NOTIFICATION message.\n21.\tThe target gNB-DU detects the UE access as specified in TS 38.300 [2].\n22.\tThe target gNB-DU sends the ACCESS SUCCESS message to the gNB-CU with the target cell ID.\n23.\tThe UE sends an RRCReconfigurationComplete message to the target gNB-DU.\n24.\tThe target gNB-DU forwards the RRCReconfigurationComplete message to the gNB-CU via an UL RRC MESSAGE TRANSFER message.\n25.\tThe gNB-CU may send the UE CONTEXT RELEASE COMMAND message to the source gNB-DU to release the resources of prepared cells.\n26.\tThe source gNB-DU responds with a UE CONTEXT RELEASE COMPLETE message.\nFigure 8.2.1.6-1 shows the procedure used for LTM with the change of gNB-CU-UP within a gNB.\n\nFigure 8.2.1.6-1 LTM with the change of gNB-CU-UP\n0.\tThe source gNB-DU forwards the Measurement Report to the gNB-CU-CP.\n1.\tThe gNB-CU-CP decides to initiate LTM configuration.\n2.\tThe gNB-CU-CP sends a BEARER CONTEXT SETUP REQUEST message containing UL TNL address information for NG-U to setup the bearer context in the target gNB-CU-UP.\n3.\tThe target gNB-CU-UP responds with a BEARER CONTEXT SETUP RESPONSE message containing the UL TNL address information for F1-U, DL TNL address information for NG-U, and the TNL address information for data forwarding to the target gNB-CU-UP.\n4.\tLTM configuration procedures are performed between gNB-CU and candidate gNB-DUs, and between gNB-CU and source gNB-DU as specified from step 3 to step 8 in section 8.2.1.5.\n5 - 6.\tThe gNB-CU-CP sends the RRC Reconfiguration message to the UE.\n7.\tThe UE sends the lower layer measurement result to the source gNB-DU, and the source gNB-DU decides to execute LTM to a candidate target cell.\n8.\tThe source gNB-DU sends the DU-CU CELL SWITCH NOTIFICATION message to the gNB-CU-CP with the selected target cell ID.\n9-10.\tThe gNB-CU-CP performs the Bearer Context Modification procedure to retrieve the PDCP UL/DL status and to exchange the TNL address information for data forwarding for the bearers.\n11-12.\tThe gNB-CU-CP performs the Bearer Context Modification procedure to send the DL TNL address information for F1-U and the PDCP UP/DL status to the target gNB-CU-UP.\n13.\tData Forwarding may be performed from the source gNB-CU-UP to the target gNB-CU-UP.\n14.\tThe target gNB-DU detects the UE in the target cell.\n15.\tThe target gNB-DU sends an ACCESS SUCCESS message to the gNB-CU-CP.\n16-18.\tPath Switch procedure is performed to update the DL TNL address information for the NG-U towards the core network.\n19-20.\tBearer Context Release procedure may be performed to release the UE context in the source gNB-DU.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "8.2.2\tEN-DC Mobility",
                            "text_content": "This procedure is used for the case the UE moves from one gNB-DU to another gNB-DU within the same gNB-CU when only MCG SRB is available during EN-DC operation. Figure 8.2.2.1-1 shows the inter-gNB-DU mobility procedure using MCG SRB in EN-DC.\n\nThe figure depicts a scenario where inter-gNB-DU mobility is achieved using MCG SRB in EN-DC. It illustrates the use of MCG SRB to enable inter-gNB-DU mobility, which is crucial for ensuring reliable and efficient communication in a 5G network. MCG SRB is a technique that allows the gNB to switch between different gNB-DU pairs, enabling the efficient use of the network resources. The figure also shows the use of EN-DC, which is a type of optical fiber that is used to transmit data. The figure is important for understanding the technical aspects of 5G networks and the role of MCG SRB in their design.\nFigure 8.2.2.1-1: Inter-gNB-DU Mobility using MCG SRB in EN-DC\n1.\tThe UE sends an ULInformationTransferMRDC message to the MeNB.\n2.\tThe MeNB sends RRC TRANSFER message to the gNB-CU.\n3.\tThe gNB-CU may send UE CONTEXT MODIFICATION REQUEST message to the source gNB-DU to query the latest SCG configuration.\n4.\tThe source gNB-DU responds with an UE CONTEXT MODIFICATION RESPONSE message that includes full configuration information.\n5.\tThe gNB-CU sends an UE CONTEXT SETUP REQUEST message to the target gNB-DU to create an UE context and setup one or more data bearers. The UE CONTEXT SETUP REQUEST message includes a CG ConfigInfo.\n6.\tThe target gNB-DU responds the gNB-CU with an UE CONTEXT SETUP RESPONSE message.\n7.\tThe gNB-CU sends a UE CONTEXT MODIFICATION REQUEST message to the source gNB-DU indicating to stop the data transmission to the UE. The source gNB-DU also sends a Downlink Data Delivery Status frame to inform the gNB-CU about the unsuccessfully transmitted downlink data to the UE.\n8.\tThe source gNB-DU responds the gNB-CU with an UE CONTEXT MODIFICATION RESPONSE message.\n9. \tThe gNB-CU sends an SGNB MODIFICATION REQUIRED message to the MeNB.\n10/11.\t The MeNB Initiated SgNB Modification procedure may be triggered by the SgNB Initiated SgNB Modification procedure (e.g. to provide information such as data forwarding addresses, new SN security key, measurement gap, etc...).\n12.\tThe MeNB and the UE perform RRC Connection Reconfiguration procedure.\n13.\tThe MeNB sends an SGNB MODIFICATION CONFIRM message to the gNB-CU.\n14.\tRandom Access procedure is performed at the target gNB-DU. The target gNB-DU sends a Downlink Data Delivery Status frame to inform the gNB-CU.  Downlink packets, which may include PDCP PDUs not successfully transmitted in the source gNB-DU, are sent from the gNB-CU to the target gNB-DU. Downlink packets are sent to the UE. Also, uplink packets are sent from the UE, which are forwarded to the gNB-CU through the target gNB-DU.\nNOTE:\tIt is up to gNB-CU implementation whether to start sending DL User Data to gNB-DU before or after reception of the Downlink Data Delivery Status.\n15.\tThe gNB-CU sends an UE CONTEXT RELEASE COMMAND message to the source gNB-DU.\n16.\tThe source gNB-DU releases the UE context and responds the gNB-CU with an UE CONTEXT RELEASE COMPLETE message.\nThis procedure is used for the case the UE moves from one gNB-DU to another gNB-DU when SCG SRB (SRB3) is available during EN-DC operation. The procedure is the same as inter-gNB-DU Mobility for intra-NR as defined in clause 8.2.1.1 but the UE CONTEXT SETUP REQUEST message includes a CG-ConfigInfo.\nThis procedure is used for the case where the UE moves from one gNB-DU to another gNB-DU within the same gNB-CU when only MCG SRB is available and the MN’s configuration is not changed during EN-DC operation for conditional PSCell change. Figure 8.2.2.3-1 shows the inter-gNB-DU conditional PSCell change procedure using MCG SRB in EN-DC.\nThe figure depicts a conditional PSCell Change (CPC) in an EN-DC (Energy-over-Distance) scenario, where the MCG SRB (Molecule-Coupled Graphene Substrate) is used without MN (Multipole Non-Negotiation) negotiation. The figure illustrates the process of changing the PSCell, which is a key component in the communication system. The MCG SRB is a molecular-based technology that allows for high-speed data transmission, while the MN negotiation is a method used to ensure reliable communication. The figure provides a visual representation of the process, highlighting the importance of the MCG SRB in the communication system.\nFigure 8.2.2.3-1: Inter-gNB-DU Conditional PSCell Change using MCG SRB without MN negotiation in EN-DC\n1-4.\tThe steps 1-4 are as defined in clause 8.2.2.1.\n5.\tThe gNB-CU sends an UE CONTEXT SETUP REQUEST message to the candidate gNB-DU to create an UE context and setup one or more data bearers. The UE CONTEXT SETUP REQUEST message is sent for each candidate cell and includes a CG-ConfigInfo.\n6.\tThe candidate gNB-DU responds the gNB-CU with an UE CONTEXT SETUP RESPONSE message including the target cell ID that was requested from the gNB-CU. The response message is sent for each requested candidate cell.\n7. \tThe gNB-CU sends an SGNB MODIFICATION REQUIRED message to the MeNB, which includes a generated RRCReconfiguration message.\n8.\tThe MeNB and the UE perform RRC Connection Reconfiguration/Complete procedure.\n9.\tThe MeNB sends an SGNB MODIFICATION CONFIRM message to the gNB-CU, to convey the received RRCReconfigurationComplete message at step 8.\n10.\tAn execution condition to trigger initiation of conditional PSCell change is fulfilled.\n11.\tRandom Access procedure is performed at the candidate gNB-DU, which becomes the target gNB-DU if successful. The target gNB-DU sends a Downlink Data Delivery Status frame to inform the gNB-CU. The target gNB-DU also sends an ACCESS SUCCESS message to inform the gNB-CU of which cell the UE has successfully accessed.\n12-13. The UE responds with an RRCReconfigurationComplete message (embedded in an ULInformationTransferMRDC message), which the MeNB forwards to the gNB-CU via an RRC TRANSFER message.\n14. The gNB-CU sends a UE CONTEXT MODIFICATION REQUEST message to the source gNB-DU and indicates to stop the data transmission for the UE. The source gNB-DU sends a Downlink Data Delivery Status frame to inform the gNB-CU about the unsuccessfully transmitted downlink data to the UE. Downlink packets, which may include PDCP PDUs not successfully transmitted in the source gNB-DU, are sent from the gNB-CU to the target gNB-DU. Downlink packets are sent to the UE. Also, uplink packets are sent from the UE, which are forwarded to the gNB-CU through the target gNB-DU.\nNOTE:\tThe step 14 may happen before step 13, as soon as the gNB-CU knows which cell the UE has successfully accessed.\nNOTE:\tThe gNB-CU may initiate UE Context Release procedure toward the other signalling connections or other candidate target gNB-DUs, if any, to cancel conditional PSCell change for the UE.\n15.\tThe source gNB-DU responds to the gNB-CU with the UE CONTEXT MODIFICATION RESPONSE message.\n16-17. The steps 16-17 are as defined in steps 11-12 in clause 8.2.1.1.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "8.2.3\tIntra-CU topology adaptation procedure",
                            "text_content": "During the intra-CU topology adaptation in SA, both the source and the target parent node are served by the same IAB-donor-CU. The target parent node may use a different IAB-donor-DU than the source parent node. The source path may have common nodes with the target path. Figure 8.2.3.1-1 shows an example of the topology adaptation procedure, where the target parent node uses a different IAB-donor-DU than the one used by the source parent node.\nThe figure depicts the IAB intra-CU topology adaptation procedure, which involves the adjustment of the intra-CU network structure to accommodate changes in the network environment. The figure illustrates the steps taken to ensure the network remains efficient and reliable, with the use of various elements such as switches, routers, and other network components.\nFigure 8.2.3.1-1: IAB intra-CU topology adaptation procedure\n1.\tThe migrating IAB-MT sends a MeasurementReport message to the source parent node IAB-DU. This report is based on a Measurement Configuration the migrating IAB-MT received from the IAB-donor-CU before.\n2.\tThe source parent node IAB-DU sends an UL RRC MESSAGE TRANSFER message to the IAB-donor-CU to convey the received MeasurementReport.\n3.\tThe IAB-donor-CU sends a UE CONTEXT SETUP REQUEST message to the target parent node IAB-DU to create the UE context for the migrating IAB-MT and set up one or more bearers. These bearers can be used by the migrating IAB-MT for its own signalling, and, optionally, data traffic.\n4.\tThe target parent node IAB-DU responds to the IAB-donor-CU with a UE CONTEXT SETUP RESPONSE message.\n5.\tThe IAB-donor-CU sends a UE CONTEXT MODIFICATION REQUEST message to the source parent node IAB-DU, which includes a generated RRCReconfiguration message. The RRCReconfiguration message includes a default BH RLC channel and a default BAP Routing ID configuration for UL F1-C/non-F1 traffic mapping on the target path. It may include additional BH RLC channels. This step may also include allocation of TNL address(es) that is (are) routable via the target IAB-donor-DU. The new TNL address(es) may be included in the RRCReconfiguration message as a replacement for the TNL address(es) that is (are) routable via the source IAB-donor-DU. In case IPsec tunnel mode is used to protect the F1 and non-F1 traffic, the allocated TNL address is outer IP address. The TNL address replacement is not necessary if the source and target paths use the same IAB-donor-DU. The Transmission Action Indicator in the UE CONTEXT MODIFICATION REQUEST message indicates to stop the data transmission to the migrating IAB-node.\n6.\tThe source parent node IAB-DU forwards the received RRCReconfiguration message to the migrating IAB-MT.\n7.\tThe source parent node IAB-DU responds to the IAB-donor-CU with the UE CONTEXT MODIFICATION RESPONSE message.\n8.\tA Random Access procedure is performed at the target parent node IAB-DU.\n9.\tThe migrating IAB-MT responds to the target parent node IAB-DU with an RRCReconfigurationComplete message.\n10.\tThe target parent node IAB-DU sends an UL RRC MESSAGE TRANSFER message to the IAB-donor-CU to convey the received RRCReconfigurationComplete message. Also, uplink packets can be sent from the migrating IAB-MT, which are forwarded to the IAB-donor-CU through the target parent node IAB-DU. These UL packets belong to the IAB-MT’s own signalling and, optionally, data traffic.\n11.\tThe IAB-donor-CU configures BH RLC channels and BAP-sublayer routing entries on the target path between the target parent IAB-node and target IAB-donor-DU as well as DL mappings on the target IAB-donor-DU for the migrating IAB-node’s target path. These configurations may be performed at an earlier stage, e.g. immediately after step 3, or before step 3. The IAB-donor-CU may establish additional BH RLC channels to the migrating IAB-MT via RRC message.\n12.\tThe F1-C connections are switched to use the migrating IAB-node’s new TNL address(es), IAB-donor-CU updates the UL BH information associated to each GTP-tunnel to migrating IAB-node. This step may also update UL FTEID and DL FTEID associated to each GTP-tunnel. All F1-U tunnels are switched to use the migrating IAB-node’s new TNL address(es). This step may use non-UE associated signaling in E1 and/or F1 interface to provide updated UP configuration for F1-U tunnels of multiple connected UEs or child IAB-MTs. The IAB-donor-CU may also update the UL BH information associated with non-UP traffic. Implementation must ensure the avoidance of potential race conditions, i.e. no conflicting configurations are concurrently performed using UE-associated and non-UE-associated procedures.\nIn case IPsec tunnel mode is used for TNL protection, the IAB-node may use MOBIKE (IETF RFC 4555 [29]) to migrate the IPsec tunnel to the new IP outer addresses. After the completion of the MOBIKE procedure, the IAB-DU initiates an F1AP gNB-DU Configuration Update procedure from which the IAB-donor-CU can conclude whether the existing inner IP address(es) (e.g. for SCTP association) and the DL F-TEID can be reused.\nIf new TNL addresses for F1-C traffic are configured, new SCTP association(s) between the migrating IAB-node and the IAB-donor-CU may be established using the new TNL address information of the migrating IAB-node. The migrating IAB-node sends an F1AP gNB-DU CONFIGURATION UPDATE message to the IAB-donor-CU, which may include new (outer) IP addresses and corresponding new (inner) IP address for the F1-U traffic to be switched to the target path.\n13.\tThe IAB-donor-CU sends a UE CONTEXT RELEASE COMMAND message to the source parent node IAB-DU.\n14.\tThe source parent node IAB-DU releases the migrating IAB-MT’s context and responds to the IAB-donor-CU with a UE CONTEXT RELEASE COMPLETE message.\n15.\tThe IAB-donor-CU releases BH RLC channels and BAP-sublayer routing entries on the source path between source parent IAB-node and source IAB-donor-DU.\nNOTE: \tIn case that the source path and target path have common nodes, the BH RLC channels and BAP-sublayer routing entries of those nodes may not need to be released in Step 15.\nSteps 11, 12 and 15 should also be performed for the migrating IAB-node’s descendant nodes, as follows:\nThe IAB-donor-CU may allocate new TNL address(es) that is (are) routable via the target IAB-donor-DU to the descendent nodes via RRCReconfiguration message.\nIf needed, the IAB-donor-CU may also provide a new default UL mapping which includes a default BH RLC channel and a default BAP Routing ID for UL F1-C/non-F1 traffic on the target path, to the descendant nodes via RRCReconfiguration message.\nIf needed, the IAB-donor-CU configures BH RLC channels, BAP-sublayer routing entries and BH RLC channel mappings on the target path for the descendant nodes in the same manner as described for the migrating IAB-node in step 11.\nThe descendant nodes switch their F1-C connections and F1-U tunnels to new TNL addresses that are anchored at the new IAB-donor-DU, in the same manner as described for the migrating IAB-node in step 12.\nBased on implementation, these steps can be performed after or in parallel with the handover of the migrating IAB-node.\nTo enable performing these steps in parallel, the IAB-donor-CU sends the RRCReconfiguration message with the new TNL address(es) and the new default BAP configuration to the descendent node while the migrating IAB-MT is still connected with source parent node, for example, before Step 5. In this case, the UE CONTEXT MODIFICATION REQUEST message carrying this RRCReconfiguration message includes a conditional delivery indication for the descendent node’s parent IAB-DU. Based on this indication, the parent IAB-DU retains the RRCReconfiguration message until the conditions for delivery are met, as specified in TS 38.473 [4]. The IAB-donor-CU may further configure the BAP-sublayer routing entries on the migrating IAB-node and the descendant nodes while the migrating IAB-MT is still connected with the source parent node.\nNOTE:\tIn upstream direction, in-flight packets between the source parent node and the IAB-donor-CU can be delivered even after the target path is established.\nNOTE:\tIn-flight downlink data in the source path may be discarded, up to implementation via the NR user plane protocol (TS 38.425 [24]).\nNOTE:\tThe IAB-donor-CU can determine the unsuccessfully transmitted downlink data over the backhaul link by implementation.\nThis procedure is used when the migrating IAB-MT moves from source parent node to target parent node within the same IAB-donor-CU while only MCG SRB is available for IAB-node during EN-DC operation. The target parent node may use a different IAB-donor-DU than the one used by the source parent node. The source path may have common nodes with the target path. Figure 8.2.3.2-1 shows the topology adaptation procedure using MCG SRB of IAB-MT in EN-DC, where the target parent node uses a different IAB-donor-DU than the source parent node.\nThe figure depicts the IAB intra-CU topology adaptation procedure using MCG SRB in EN-DC, illustrating the steps involved in adapting the network to accommodate changes in the CU topology. The figure includes key components such as the IAB, MCG SRB, and EN-DC, which are essential for the adaptation process.\nFigure 8.2.3.2-1: IAB intra-CU topology adaptation procedure using MCG SRB in EN-DC\n1.\tThe migrating IAB-MT sends an ULInformationTransferMRDC message to the MeNB\n2.\tThe MeNB sends RRC TRANSFER message to the IAB-donor-CU.\n3.\tThe IAB-donor-CU may send UE CONTEXT MODIFICATION REQUEST message to the source parent node IAB-DU, to query the latest SCG configuration.\n4.\tThe source parent node IAB-DU responds with a UE CONTEXT MODIFICATION RESPONSE message that includes full configuration information.\n5.\tThe IAB-donor-CU sends a UE CONTEXT SETUP REQUEST message to the target parent node IAB-DU, to create a UE context for migrating IAB-MT and set up one or more bearers. These bearers can be used by the migrating IAB-MT for its own signalling, and, optionally, data traffic. The UE CONTEXT SETUP REQUEST message includes CG-ConfigInfo.\n6.\tThe target parent node IAB-DU responds to the IAB-donor-CU with a UE CONTEXT SETUP RESPONSE message.\n7.\tThe IAB-donor-CU sends a UE CONTEXT MODIFICATION REQUEST message to the source parent node IAB-DU, this message includes the Transmission Action Indicator IE, which instructs the source parent node IAB-DU to stop the data transmission to the migrating IAB-node. The source parent node IAB-DU also sends a Downlink Data Delivery Status frame to inform the IAB-donor-CU about the unsuccessfully transmitted downlink data to the migrating IAB-node.\n8.\tThe source parent node IAB-DU responds to the IAB-donor-CU with a UE CONTEXT MODIFICATION RESPONSE message.\n9. \tThe IAB-donor-CU sends an SGNB MODIFICATION REQUIRED message to the MeNB.\n10/11.\t The MeNB initiated SgNB Modification procedure may be triggered by the SgNB initiated SgNB Modification procedure (e.g. to provide information such as data forwarding addresses, new SN security key, measurement gap, etc.).\n12.\tThe MeNB and the migrating IAB-MT perform RRC Connection Reconfiguration procedure. The RRCConnectionReconfiguration message includes information as described for the intra-CU topology adaptation procedure in SA in clause 8.2.3.1.\n13.\tThe MeNB sends an SGNB MODIFICATION CONFIRM message to the IAB-donor-CU.\n14.\tThe migrating IAB-MT performs Random Access procedure at the target parent node IAB-DU.\n15-19. The remaining steps of the procedure follow the steps 11-15 of the intra-CU topology adaptation procedure in SA scenario, as defined in clause 8.2.3.1. The main difference is that the RRC message for the migrating IAB-node, if involved, will be transmitted using the MCG SRB.\nThis procedure is used when the migrating IAB-MT moves from source parent node to target parent node within the same IAB-donor-CU, when SCG SRB (SRB3) is available for IAB-node during EN-DC operation. The target parent node may use a different IAB-donor-DU than the source parent node. The source path may have common nodes with the target path. The procedure is the same as intra-CU topology adaptation procedure in SA scenario as defined in clause 8.2.3.1 but the UE CONTEXT SETUP REQUEST message includes CG-ConfigInfo in step 3.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "8.2.4\tIntra-CU topological redundancy procedure",
                            "text_content": "The intra-CU topological redundancy procedure enables the establishment and release of redundant paths in the IAB-topology underneath the same IAB-donor-CU. The redundant paths may use different IAB-donor-DUs. They may also have common intermediate nodes. Since topological redundancy uses NR-DC for the IAB-MT, it is only supported for IAB-nodes operating in SA mode.\nFigure 8.2.4-1 shows an example for an IAB topology, where one IAB-node, referred to as the dual-connecting IAB-node, has two paths towards the IAB-donor via different IAB-donor-DUs.\nThe figure depicts an IAB (Interoperability Architecture for Broadband) topology with two redundant paths, illustrating the concept of redundancy in network design.\nFigure 8.2.4-1: Example for IAB topology with two redundant paths\nThe figure depicts a procedure for establishing redundant paths in an IAB (Inter-Access Bridging) topology, which is a network architecture designed to provide high availability and reliability. The figure shows a series of steps, including the selection of redundant paths, the establishment of a new path, and the connection of the new path to the existing network. This process ensures that the network can continue to function even if a path is lost or damaged, providing a reliable and resilient network for users.\nFigure 8.2.4-2: Procedure for establishment of redundant path in IAB topology\nFigure 8.2.4-2 shows the procedure for the establishment of the second path. This procedure has the following steps:\n1. The dual-connecting IAB-MT sends a MeasurementReport message to the first parent node IAB-DU. This report is based on a Measurement Configuration the dual-connecting IAB-MT received from the IAB-donor-CU before.\n2.\tThe first parent node IAB-DU sends an UL RRC MESSAGE TRANSFER message to the IAB-donor-CU to convey the received MeasurementReport.\n3.\tThe IAB-donor-CU sends the UE CONTEXT SETUP REQUEST message to the second parent node IAB-DU, to create the UE context for the dual-connecting IAB-MT and to set up one or more bearers. These bearers can be used by the dual-connecting IAB-MT for its own signalling, and, optionally, data traffic.\n4.\tThe second parent node IAB-DU responds to the IAB-donor-CU with a UE CONTEXT SETUP RESPONSE message.\n5.\tThe IAB-donor-CU sends a DL RRC MESSAGE TRANSFER message to the first parent node IAB-DU, which includes a generated RRCReconfiguration message. The RRCReconfiguration message may contain one or more TNL address(es) for the dual-connecting IAB-DU, which are anchored at the second-path IAB-donor-DU. The IAB-donor-CU can proactively obtain these TNL addresses from the second-path IAB-donor-DU. In case IPsec tunnel mode is used to protect the F1 and non-F1 traffic, the allocated TNL address is the outer IP address. The TNL address allocation is not necessary if the first and second paths use the same IAB-donor-DU.\n6.\tThe first parent node IAB-DU forwards the received RRCReconfiguration message to the dual-connecting IAB-MT.\n7.\tThe dual-connecting IAB-MT responds to the first parent node IAB-DU with an RRCReconfigurationComplete message.\n8.\tThe first parent node IAB-DU sends an UL RRC MESSAGE TRANSFER message to the IAB-donor-CU, to convey the received RRCReconfigurationComplete message.\n9.\tA Random Access procedure is performed at the second parent node IAB-DU.\n10.\tThe IAB-donor-CU configures BH RLC channels and BAP-layer route entries on the second path between dual-connecting IAB-node and second-path IAB-donor-DU. These configurations may be performed at an earlier stage, e.g. immediately after step 3.\n11.\tThe new TNL addresses allocated in step 5 (if any) are added to the dual-connecting IAB-DU’s F1-C association(s) with the IAB-donor-CU. The IAB-donor-CU may configure new UL BH information on the second path for F1AP messages.\nIf new TNL addresses for F1-C traffic are configured, new SCTP association(s) between the dual-connecting IAB-node and the IAB-donor-CU may be established using the new TNL address information of the dual-connecting IAB-node. The dual-connecting IAB-node sends an F1AP gNB-DU CONFIGURATION UPDATE message to the IAB-donor-CU, which may include new (outer) IP addresses and corresponding new (inner) IP address for the F1-U traffic to be switched to the target path.\n12. The IAB-donor-CU may migrate the F1-U tunnels it has with the dual-connecting IAB-DU from the first path to the second path via the UE CONTEXT MODIFICATION REQUEST message.\n13.\tThe dual-connectivity IAB-DU replies with a UE CONTEXT MODIFICATION RESPONSE message.\nSteps 12 and 13 can be performed for a subset of UE bearers, e.g., to balance the load between the first and the second path.\nIn case the second path is used for the dual-connecting IAB-node’s descendant node(s), Steps 10 and 11 are also performed for the descendant node(s), as follows:\nWhen the second path uses a different IAB-donor-DU, the IAB-donor-CU shall configure the descendent IAB-DU(s) with one or more new TNL addresses, which are anchored on the IAB-donor-DU of the second path.\nIf needed, the IAB-donor-CU configures BH RLC channels, BAP-layer route entries on the target path for the descendant nodes and the BH RLC channel mappings on the descendant nodes in the same manner as described for the dual-connecting IAB-node in step 10.\nThe descendant nodes’ new TNL addresses (if any) are added to the descendant node IAB-DU’s F1-C association(s) with the IAB-donor-CU. The IAB-donor-CU may configure UL BH information for the second path to carry F1AP messages.\nThe IAB-donor-CU may migrate the F1-U tunnels it has with the dual-connecting IAB-node’s descendant node(s) from the first path to the second path, as described for step 12.\nBased on implementation, these steps can be performed after or in parallel with the redundant path addition of the dual connecting IAB-node.\nThe IAB-donor-CU may initiate the release of the redundant path by releasing the BAP routing entries and modifying/releasing the BH RLC channels on that path.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "8.2.5\tIntra-CU Backhaul RLF recovery for IAB-nodes in SA mode",
                            "text_content": "The intra-CU backhaul RLF recovery procedure for IAB-nodes in SA mode enables migration of an IAB-node to another parent node underneath the same IAB-donor-CU, when the IAB-MT declares a backhaul RLF. The declaration of backhaul RLF is described in TS 38.331 [23].\nNOTE:\tDetermination of whether the recovery occurs at the same or at a different IAB-donor-CU is up to implementation.\nFigure 8.2.5-1 shows an example of the BH RLF recovery procedure for an IAB-node in SA mode. In this example, the IAB-node changes from its initial parent node to a new parent node, where the new parent node is served by an IAB-donor-DU different than the one serving its initial parent node.\nThe figure depicts the IAB intra-CU backhaul RLF recovery procedure for an IAB-node in SA mode, illustrating the steps taken to restore connectivity in the event of a failure. The diagram shows the RLF (Remote Link Function) recovery process, which involves the use of a dedicated RLF switch to isolate the IAB-node from the rest of the network. The figure also includes visual elements such as the RLF switch, the IAB-node, and the network topology, providing a clear understanding of the recovery procedure.\nFigure 8.2.5-1: IAB intra-CU backhaul RLF recovery procedure for an IAB-node in SA mode\n\n1.\tThe IAB-MT declares BH RLF for the MCG as described in TS 38.331 [23], clause 5.3.10.3.\n2.\tThe IAB-MT undergoing recovery from RLF conducts the RRC re-establishment procedure at the new parent node, as defined in clause 8.7. In this procedure, the IAB-donor-CU may provide new TNL address(es), which is(are) anchored at the new IAB-donor-DU, to the IAB-MT via RRC signalling. Furthermore, the IAB-donor-CU may also provide a new default UL mapping which includes a default BH RLC channel and a default BAP Routing ID for UL F1-C/non-F1 traffic on the target path, to the IAB-node undergoing recovery from RLF via RRCReconfiguration message in this procedure.\n3.\tThe remaining part of the procedure follows the steps 11-15 of the intra-CU topology adaptation procedure defined in clause 8.2.3.1.\nDescendant node(s) of the IAB-node undergoing recovery from RLF may also need to switch to new TNL address(es) anchored in the target-path IAB-donor-DU following the same mechanism as described for IAB intra-CU topology adaptation procedure in clause 8.2.3.1. The descendant node(s) may also be provided with new default UL mapping via RRC, after the IAB-node undergoing recovery from RLF connects the IAB-donor-CU via the recovery path.\n",
                            "figures_meta_data": [],
                            "tables": []
                        }
                    ]
                },
                {
                    "title": "8.3\tMechanism of centralized retransmission of lost PDUs",
                    "description": "",
                    "summary": "",
                    "text_content": "",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": [
                        {
                            "title": "8.3.1\tCentralized Retransmission in Intra gNB-CU Cases",
                            "text_content": "This mechanism allows to perform the retransmission of the PDCP PDUs that are not delivered by a gNB-DU (gNB-DU1) because the corresponding radio links toward the UE are subject to outage. When such outage occurs, the gNB-DU affected by outage informs the gNB-CU of such event. The gNB-CU can switch transmission of data traffic, as well as perform retransmission of undelivered PDCP PDUs, from the gNB-DU affected by outage to other available gNB-DUs (e.g. gNB-DU2 in Figure 8.3.1-1) with a well-functioning radio link toward the UE. The mechanism is also applicable in EN-DC and MR-DC with 5GC, refer to TS 37.340 [12].\nThe figure depicts a procedure for centralized retransmission in intra-gNB-CU scenarios, illustrating the steps involved in managing and retransmitting data within a network.\nFigure 8.3.1-1: Procedure for centralized retransmission in intra gNB-CU scenarios\nThe mechanism is shown in Figure 8.3.1-1 and targets the multi-connectivity scenario, where a UE is served by multiple data radio bearers established at least on two gNB-DUs, and it includes the following steps:\n0.\tThe UE is connected and can transmit/receive data to/from gNB-DU1 and gNB-DU2.\n1.\tgNB-DU1 realizes that the radio link towards the UE is experiencing outage.\n2.\tgNB-DU1 sends the \"Radio Link Outage\" notification message to the gNB-CU over the F1-U interface, as part of the DDDS PDU of the concerned data radio bearer. The message may include information to be used by the gNB-CU to perform retransmission of the PDCP PDUs that were not delivered by the gNB-DU1 (e.g. the highest transmitted NR PDCP Sequence Number, the highest successfully delivered NR PDCP Sequence Number and the lost NR-U Sequence Numbers).\n3.\tgNB-CU decides to switch data traffic transmission and retransmission of PDCP PDUs that were undelivered in gNB-DU1 via gNB-DU2. gNB-CU stops sending downlink traffic to gNB-DU1. The radio leg between gNB-DU1 and the UE is not necessarily removed.\n4.\tgNB-CU starts sending traffic (namely new PDUs and potentially retransmitted PDUs) to gNB-DU2.\n5.\tIf gNB-DU1 realizes that the radio link of the concerned data radio bearer is back in normal operation, it may send a \"Radio Link Resume\" notification message as part of the DDDS PDU over the F1-U interface to inform the gNB-CU that the radio link can be used again for the concerned data radio bearer.\n6.\tgNB-CU may start sending traffic (namely new PDUs and potentially retransmitted PDUs) of the concerned data radio bearer via gNB-DU1 again.\n",
                            "figures_meta_data": [],
                            "tables": []
                        }
                    ]
                },
                {
                    "title": "8.4\tMulti-Connectivity operation",
                    "description": "",
                    "summary": "",
                    "text_content": "",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": [
                        {
                            "title": "8.4.1\tSecondary Node Addition",
                            "text_content": "This clause gives the SgNB addition procedure in EN-DC given that en-gNB consists of gNB-CU and gNB-DU(s), as shown in Figure 8.4.1.1-1.\n\nThe figure depicts the step-by-step procedure for adding a SgNB (Small Cell Base Station) to an existing EN-DC (Energy-Efficient Network-Downlink) system. The figure illustrates the various components involved in the process, including the SgNB, the existing EN-DC system, and the necessary infrastructure. The figure provides a clear visual representation of the steps involved, making it easier to understand the process and ensure a successful addition.\nFigure 8.4.1.1-1: SgNB addition procedure in EN-DC\n1~8: refer to TS 37.340 [12].\na1. After receiving the SGNB ADDITION REQUEST message from MeNB, the gNB-CU sends the UE CONTEXT SETUP REQUEST message to the gNB-DU to create a UE context. As specified in TS 37.340 [12], in the course of a Secondary Node Change, the UE CONTEXT SETUP REQUEST message may contain source cell group configuration to allow gNB-DU to perform delta configuration.\na2. The gNB-DU responds to the gNB-CU with the UE CONTEXT SETUP RESPONSE message. In case the gNB-DU receives the UE CONTEXT SETUP REQUEST message without the source cell group configuration or in the course of a Secondary Node Change as specified in TS 37.340 [12] or if the gNB-DU decides to perform full configuration after receiving the source cell group configuration, it shall perform full configuration and indicate that it has applied full configuration in the UE CONTEXT SETUP RESPONSE message.\nNOTE:\tOn Inter-gNB-CU Mobility, same method is performed to achieve full configuration and delta configuration.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "8.4.2\tSecondary Node Release (MN/SN initiated)",
                            "text_content": "This clause gives the SgNB release procedure in EN-DC given that the en-gNB consists of a gNB-CU and gNB-DU(s).\nMN initiated SN Release\n\nThe figure depicts the release procedure of a SgNB (Service Gateway Node) in an EN-DC (Energy-Efficient) network. It illustrates the steps involved in releasing the SgNB from the network, including the initiation of the release process by the MN (Network Manager). The figure also shows the steps for the MN to verify the SgNB's readiness and to ensure that the release is successful.\nFigure 8.4.2.1-1 SgNB release procedure in EN-DC (MN initiated)\n1~8: refer to TS 37.340 [12].\nNOTE:\tThe timing of sending the Step 2 SGNB RELEASE REQUEST ACKNOWLEDGE message is an example, it may be sent e.g. after step a1 or after a2 and it is up to implementation.\na1. After receiving SGNB RELEASE REQUEST message from MeNB, gNB-CU sends the UE CONTEXT MODIFICATION REQUEST message to gNB-DU to stop the data transmission for the UE. It is up to gNB-DU implementation when to stop the UE scheduling.\na2. gNB-DU responds to gNB-CU with UE CONTEXT MODIFICATION RESPONSE message.\na3. After receiving the UE CONTEXT RELEASE message from MeNB, the gNB-CU sends the UE CONTEXT RELEASE COMMAND message to the gNB-DU to release the UE context.\na4. The gNB-DU responds to the gNB-CU with the UE CONTEXT RELEASE COMPLETE message.\nSN initiated SN Release\n\nThe figure depicts the release procedure of a SgNB (Service Gateway Node) in an EN-DC (Enhanced Data Center) network. It illustrates the steps involved in initiating the release of a SgNB, including the steps to configure the device, initiate the release, and ensure proper communication with the network. The figure provides a visual representation of the release process, making it easier to understand and follow.\nFigure 8.4.2.1-2 SgNB release procedure in EN-DC (SN initiated)\n1~8: refer to TS 37.340 [12].\na1. gNB-CU sends the UE CONTEXT MODIFICATION REQUEST message to gNB-DU to stop the data transmission for the UE. It is up to gNB-DU implementation when to stop the UE scheduling. This step may occur before step 1.\na2. gNB-DU responds to gNB-CU with UE CONTEXT MODIFICATION RESPONSE message.\na3. After receiving the UE CONTEXT RELEASE message from MeNB, the gNB-CU sends the UE CONTEXT RELEASE COMMAND message to the gNB-DU to release the UE context.\na4. The gNB-DU responds to the gNB-CU with the UE CONTEXT RELEASE COMPLETE message.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "8.4.3\tSCG suspend/resume in RRC_INACTIVE",
                            "text_content": "In the following, the procedure for SCG resume in RRC_INACTIVE is described.\nThe figure depicts a schematic representation of a SCG (Synchronization Control Group) in a Radio Resource Control (RRC) network. The SCG is responsible for managing the synchronization of radio resources, ensuring that they are synchronized with the desired time. The figure shows the various components of the SCG, including the SCG controller, the RRC, and the radio resources. The figure also includes a legend to help understand the different symbols and their meanings.\nFigure 8.4.3-1: SCG Suspend/Resume in RRC_INACTIVE\n1. The CU of SN sends the UE CONTEXT MODIFICATION REQUEST message to the DU of SN to suspend the SCG of the UE before the UE enters into RRC_INACTIVE state from RRC_CONNECTED state.\n2. The DU of SN sends the UE CONTEXT MODIFICATION RESPONSE to the CU of SN, and keeps all lower layer configuration for UEs without transmitting or receiving data from UE.\n3~4: refer to TS 37.340 [12].\n5. The CU of SN sends the UE CONTEXT MODIFICATION REQUEST message to the DU of SN to resume the SCG of the UE before the UE enters into RRC_CONNECTED state from RRC_INACTIVE state.\n6. The DU of SN sends the UE CONTEXT MODIFICATION RESPONSE message to the CU of SN, and uses the previously stored lower layer configuration for the UE.\n7~11: refer to TS 37.340 [12].\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "8.4.4\tSCG Deactivation and Activation",
                            "text_content": "This clause gives the NR SCG deactivation and activation procedures in MR-DC given that the SN consists of a gNB-CU and gNB-DU(s).\nThe figure depicts a schematic representation of the SCG (Selective Commit Gate) activation or deactivation process in the SN (Switch) addition procedure. The figure illustrates the various components involved, including the SCG, the switch, and the SN, with arrows indicating the flow of signals. The figure is crucial for understanding the process and ensuring the correct operation of the SN addition procedure.\nFigure 8.4.4.1-1: SCG Activation or Deactivation in SN Addition procedure\n1. The MN sends the SN Addition Request message to the SN, indicates the request of SCG activation or deactivation.\n2. The SN-CU-CP may send the BEARER CONTEXT SETUP REQUEST message to the SN-CU-UP to setup bearer context and notify the activation or deactivation of the SCG.\n3. The SN-CU-UP sends the BEARER CONTEXT SETUP RESPONSE message to the SN-CU-CP.\n4. The SN-CU sends the UE CONTEXT SETUP REQUEST message to the SN-DU to setup UE context and indicate the request of SCG activation or deactivation.\n5. The SN-DU sends the UE CONTEXT SETUP RESPONSE message to the SN-CU, indicates the SCG status. In case SCG activation is requested, the SN-DU shall indicate SCG activated in the message.\n6. The SN-CU-CP may send the BEARER CONTEXT MODIFICATION REQUEST message to the SN-CU-UP as described in clause 8.9.2 and may notify the SCG status if needed.\n7. The SN-CU-UP sends the BEARER CONTEXT MODIFICATION RESPONSE message to the SN-CU-CP.\n8. The SN sends the SN Addition Request Acknowledge message to the MN, indicates the SCG status. In case SCG activation is requested, the SN shall indicate SCG activated in the message.\n9. The MN-CU-CP may send the BEARER CONTEXT MODIFICATION REQUEST message to the MN-CU-UP to notify the SCG status.\n10. The MN-CU-UP sends the BEARER CONTEXT MODIFICATION RESPONSE message to the MN-CU-CP.\nThe figure depicts a schematic representation of the SCG activation or deactivation process in a MN-initiated SN modification procedure. The figure illustrates the steps involved in activating or deactivating the SCG, which is a key component in the SN modification process. The SCG is responsible for controlling the flow of data through the network, ensuring that the SN is functioning correctly. The figure shows the various components involved in the SN modification procedure, including the SN, the SCG, and the SN controller. The figure also includes a legend to help understand the different symbols and their meanings. Overall, the figure provides a clear and concise visual representation of the SCG activation or deactivation process in the SN modification procedure.\nFigure 8.4.4.2-1: SCG Activation or Deactivation in MN initiated SN Modification procedure\n1. SCG is deactivated or activated.\n2. The MN sends the SN Modification Request message to the SN, indicates the request of SCG activation or deactivation.\n3. The SN-CU-CP may send the BEARER CONTEXT MODIFICATION REQUEST message to the SN-CU-UP to notify the SCG activation or deactivation.\n4. The SN-CU-UP sends the BEARER CONTEXT MODIFICATION RESPONSE message to the SN-CU-CP.\n5. The SN-CU sends the UE CONTEXT MODIFICATION REQUEST message to the SN-DU to indicate the request of SCG activation or deactivation.\n6. The SN-DU may send the UE CONTEXT MODIFICATION RESPONSE message to the SN-CU, indicates the SCG status.\n7. The SN-CU-CP sends the BEARER CONTEXT MODIFICATION REQUEST message to the SN-CU-UP to notify the SCG status.\n8. The SN-CU-UP sends the BEARER CONTEXT MODIFICATION RESPONSE message to the SN-CU-CP.\nNOTE: Step 7 and 8 may be skipped in case the SN-DU accepted the SCG activation or deactivation request.\n9. The SN sends the SN Modification Request Acknowledge message towards the MN, indicates the SCG status.\n10. The MN-CU-CP may send the BEARER CONTEXT MODIFICATION REQUEST message to the MN-CU-UP to notify the SCG status.\n11. The MN-CU-UP sends the BEARER CONTEXT MODIFICATION RESPONSE message to the MN-CU-CP.\nThe figure depicts a schematic representation of the SCG activation or deactivation process in a SN initiated SN modification procedure. The figure illustrates the steps involved in activating or deactivating the SCG, including the activation of the SCG, the initiation of the SN modification, and the subsequent deactivation of the SCG. The figure is crucial for understanding the process and ensuring the correct execution of the SN modification procedure.\nFigure 8.4.4.3-1: SCG Activation or Deactivation in SN initiated SN Modification procedure\n1. SCG is deactivated or activated.\n2. The SN-CU-CP may send the BEARER CONTEXT MODIFICATION REQUEST message to the SN-CU-UP to notify the SCG activation or deactivation.\n3. The SN-CU-UP sends the BEARER CONTEXT MODIFICATION RESPONSE message to the SN-CU-CP.\n4. The SN-CU sends the UE CONTEXT MODIFICATION REQUEST message to the SN-DU to indicate the request of SCG activation or deactivation.\n5. The SN-DU sends the UE CONTEXT MODIFICATION RESPONSE message to the SN-CU, indicates the SCG status.\n6. The SN-CU-CP may send the BEARER CONTEXT MODIFICATION REQUEST message to the SN-CU-UP to notify the SCG status.\n7. The SN-CU-UP sends the BEARER CONTEXT MODIFICATION RESPONSE message to the SN-CU-CP.\nNOTE 1: Step 6 and 7 may be skipped in case the SN-DU accepted the SCG activation or deactivation request.\n8. The SN sends the SN Modification Required message to the MN, indicates the request of SCG activation or deactivation.\n9. The MN-CU-CP may send the BEARER CONTEXT MODIFICATION REQUEST message to the MN-CU-UP to notify the SCG status.\n10. The MN-CU-UP sends the BEARER CONTEXT MODIFICATION RESPONSE message to the MN-CU-CP.\nNOTE 2:\tBased on implementation, step 9 and 10 can be performed after step 11.\n11. The MN sends the SN Modification Confirm message to the SN.\nNOTE 3: Step 8-11 are not performed in case the SN-DU rejected the SCG activation or deactivation request.\n",
                            "figures_meta_data": [],
                            "tables": []
                        }
                    ]
                },
                {
                    "title": "8.5\tF1 Startup and cells activation",
                    "description": "",
                    "summary": "",
                    "text_content": "This function allows to setup the F1 interface between a gNB-DU and a gNB-CU and it allows to activate the gNB-DU cells.\n\nThe figure depicts the F1 startup and cell activation process in a 5G network. It shows the steps involved in initializing the network, activating the first cell, and ensuring network stability. The figure illustrates the use of radio frequency (RF) signals, base stations (BSs), and other network components to establish and maintain a reliable 5G network.\nFigure 8.5-1: F1 startup and cell activation\n0. The gNB-DU and its cells are configured by OAM in the F1 pre-operational state. The gNB-DU has TNL connectivity toward the gNB-CU.\n1. The gNB-DU sends an F1 SETUP REQUEST message to the gNB-CU including a list of cells that are configured and ready to be activated. For each cell supporting NPN the gNB-DU includes NPN specific information.\n2. In NG-RAN, the gNB-CU ensures the connectivity toward the core network. For this reason, the gNB-CU may initiate either the NG Setup or the gNB Configuration Update procedure towards 5GC.\n3. The gNB-CU sends an F1 SETUP RESPONSE message to the gNB-DU that optionally includes a list of cells to be activated. The cells in the list of cells to be activated in F1 SETUP RESPONSE message become active, while the cells not in the list are inactive. The cells that are active are Out-of-Service until the gNB-DU indicates that they are In-Service . The gNB-DU will initiate the gNB-DU Configuration Update procedure towards the gNB-CU and includes the cell(s) that are In-Service  and/or the cell(s) that are Out-Of-Service. The gNB-DU may also indicate cell(s) to be deleted, in which case the gNB-CU removes the corresponding cell(s) information.\n4. The gNB-CU may send a GNB CU CONFIGURATION UPDATE message to the gNB-DU that optionally includes a list of cells to be activated, e.g., in case that these cells were not activated using the F1 SETUP RESPONSE message.\n5. The gNB-DU replies with a GNB CU CONFIGURATION UPDATE ACKNOWLEDGE message that optionally includes a list of cells that failed to be activated. The gNB-CU regards all Active cells as Out-Of-Service until the gNB-DU indicates that they are In-Service.\n6. The gNB-CU may initiate either the Xn Setup towards a neighbour NG-RAN node or the EN-DC X2 Setup procedure towards a neighbour eNB.\nNOTE 1:\tFor NG-RAN in case that the F1 SETUP RESPONSE message is not used to activate any cell, step 2 may be performed after step 3.\nOver the F1 interface between a gNB-CU and a gNB-DU pair, the following two Cell States are possible:\n-\tInactive: the cell is known by both the gNB-DU and the gNB-CU. The cell shall not serve UEs;\n-\tActive: the cell is known by both the gNB-DU and the gNB-CU. The cell should try to provide services to the UEs.\nThe gNB-CU decides whether the Cell State should be “Inactive“ or “Active“. The gNB-CU can request the gNB-DU to change the Cell State using the F1 SETUP RESPONSE, theGNB DU CONFIGURATION UPDATE ACKNOWLEDGE, or the GNB CU CONFIGURATION UPDATE messages.\nThe gNB-DU reports to the gNB-CU the Service Status. The Service Status is the state of the radio transmission over the air.  The Service Status is reported by the gNB-DU for cells for which the Cell State is “Active “. The following Service Status are defined:\n-\tIn-Service: the cell is operational and able to serve UEs.\n-\tOut-Of-Service: the cell is not operational, and it is not able to serve UEs. The gNB-DU is trying to make the cell operational.\nThe gNB-DU reports the Service Status using the GNB DU CONFIGURATION UPDATE message.\nNOTE 2:\tIf gNB-DU regards that one or more cells cannot become operational, the gNB-DU deletes them and reports them using the GNB DU CONFIGURATION UPDATE message.\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "8.6\tRRC state transition",
                    "description": "",
                    "summary": "",
                    "text_content": "",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": [
                        {
                            "title": "8.6.1\tRRC connected to RRC inactive",
                            "text_content": "This clause gives the RRC connected to RRC inactive state transition given that gNB consists of gNB-CU and gNB-DU(s), as shown in Figure 8.6.1-1.\n\nThe figure depicts a schematic representation of the RRC (Remote Radio Head) connected to the RRC inactive state transition procedure. The figure illustrates the various components and their connections, including the RRC, the RRC inactive state, and the RRC active state. The figure provides a clear and concise visual representation of the RRC's role in the system, highlighting the steps involved in transitioning between the inactive and active states.\nFigure 8.6.1-1: RRC connected to RRC inactive state transition procedure\n0.\tAt first, the gNB-CU determines the UE to enter into RRC inactive mode from connected mode.\n1.\tThe gNB-CU generates RRCRelease message which includes suspend configuration towards UE. The RRC message is encapsulated in UE CONTEXT RELEASE COMMAND message to the gNB-DU.\n2.\tThe gNB-DU forwards RRCRelease message to UE.\n3.\tThe gNB-DU responds with UE CONTEXT RELEASE COMPLETE message.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "8.6.2\tRRC inactive to other states",
                            "text_content": "This clause gives the RRC inactive to other RRC states transition given that gNB consists of gNB-CU and gNB-DU(s), as shown in Figure 8.6.2-1.\n\nThe figure depicts the RRC (Radio Resource Control) inactive to other RRC states transition procedure, illustrating the steps involved in transitioning from an inactive state to a normal state. The figure shows the RRC state transitions, including the initial inactive state, the transition to the inactive state, and the transition to the normal state. The figure is important for understanding the RRC state transitions and their implications in the context of radio resource control.\nFigure 8.6.2-1: RRC inactive to other RRC states transition procedure\n1.\tIf data is received from 5GC, the gNB-CU sends PAGING message to the gNB-DU.\n2.\tThe gNB-DU sends Paging message to UE.\nNOTE:\tStep 1 and 2 only exist in case of DL data arrival.\n3.\tThe UE sends RRCResumeRequest message either upon RAN-based paging, UL data arrival or RNA update.\n4.\tThe gNB-DU includes RRCResumeRequest in a non-UE associated  INITIAL UL RRC MESSAGE TRANSFER message and transfer to the gNB-CU.\n5.\tFor UE Inactive to UE Active transitions, excluding transitions due to signalling exchange only, the gNB-CU allocates gNB-CU UE F1AP ID and sends UE CONTEXT SETUP REQUEST message to gNB-DU, which may include SRB ID(s) and DRB ID(s) to be setup, CellGroupConfig stored in gNB-CU or retrieved from the old NG-RAN node may also be included. In case of NG-RAN sharing, the gNB-CU includes the serving PLMN ID (in case of SNPNs the serving NID).\n6.\tThe gNB-DU responds with UE CONTEXT SETUP RESPONSE message, which contains RLC/MAC/PHY configuration of SRB and DRBs provided by the gNB-DU.\nNOTE:\tStep 5 and step 6 exist for inactive to active transitions, excluding transitions due to signalling exchange only. When gNB-CU successfully retrieves and verifies the UE context, it may decide to let the UE enter into RRC active mode. gNB-CU shall trigger UE context setup procedure between gNB-CU and gNB-DU, during which both SRB1, SRB2 and DRB(s) can be setup. For signalling exchange only transitions, gNB-CU does not trigger UE Context Setup procedure. For inactive to Idle transitions the gNB-CU does not trigger the UE Context Setup procedure.\n7.\tThe gNB-CU generates RRCResume/RRCSetup/RRCReject/RRCRelease message or receives RRCRelease message from the old NG-RAN node towards the UE. The RRC message is encapsulated in DL RRC MESSAGE TRANSFER message together with SRB ID.\n8.\tThe gNB-DU forwards RRC message to the UE either over SRB0 or SRB1 as indicated by the SRB ID.\nNOTE:\tIn step 7, it is expected that gNB-CU takes appropriate action, e.g. generates RRC resume message for inactive to active state transition(for both cases of signaling exchange only, and UP data exchange), generates RRCSetup message for fallback to establish a new RRC connection, and generates or receives from the old NG-RAN node either RRCRelease message without suspend configuration for inactive to idle state transition, or RRCRelease message with suspend configuration to remain in inactive state. \nIf step 5 and 6 are not performed, the gNB-DU deduces the SRB on which to deliver the RRC message in step 7 from the SRB ID, i.e. SRB ID “0” corresponds to SRB0, SRB ID “1” corresponds to SRB1.\n9.\tThe UE sends RRCResumeComplete/RRCSetupComplete message to the gNB-DU.\n10.\tThe gNB-DU encapsulates RRC in UL RRC MESSAGE TRANSFER message and send to the gNB-CU.\nNOTE:\tStep 9 and step 10 exist for inactive to active state transition (for both cases of signaling exchange only, and UP data exchange). UE generates RRCResumeComplete/RRCSetupComplete message for resume the existing RRC connection or fallback to a new RRC connection respectively.\n",
                            "figures_meta_data": [],
                            "tables": []
                        }
                    ]
                },
                {
                    "title": "8.7\tRRC connection reestablishment",
                    "description": "",
                    "summary": "",
                    "text_content": "This procedure is used for the case that UE tries to reestablish the RRC connection, as shown in Figure 8.7-1.\n\nThe figure depicts the RRC connection reestablishment procedure, which involves the reconnection of a lost RRC connection. The figure shows the steps taken to restore the connection, including the identification of the lost connection, the establishment of a new connection, and the reconnection of the lost connection. The figure is a visual representation of the process, making it easier to understand and follow.\nFigure 8.7-1: RRC connection reestablishment procedure\n1.\tThe UE sends a preamble to the gNB-DU.\n2.\tThe gNB-DU allocates new C-RNTI and responds with RAR.\n3.\tThe UE sends an RRCReestablishmentRequest message to the gNB-DU, which contains old C-RNTI and old PCI.\n4.\tThe gNB-DU includes the RRC message and, if the UE is admitted, the corresponding low layer configuration for the UE in the INITIAL UL RRC MESSAGE TRANSFER message and transfers to the gNB-CU. The INITIAL UL RRC MESSAGE TRANSFER message includes the new C-RNTI. If the gNB-DU identifies the UE as a Reduced Capability UE during the random access procedure, a NR RedCap UE Indication is provided in the INITIAL UL RRC MESSAGE TRANSFER message.\n5.\tThe gNB-CU includes an RRCReestablishment message and transfers to the gNB-DU. If the UE requests to re-establish RRC connection in the last serving gNB-DU, the DL RRC MESSAGE TRANSFER message shall include old gNB-DU UE F1AP ID.\n6.\tThe gNB-DU retrieves the UE context based on the old gNB-DU UE F1AP ID, and replaces old C-RNTI/PCI with new C-RNTI/PCI. It sends the RRCReestablishment message to UE.\n7-8.\tThe UE sends an RRCReestablishmentComplete message to the gNB-DU. The gNB-DU encapsulates the RRC message in the UL RRC MESSAGE TRANSFER message and sends to the gNB-CU.\n9-10.\tThe gNB-CU triggers an UE Context Modification procedure by sending UE CONTEXT MODIFICATION REQUEST message, which may include DRBs to be modified and released list. The gNB-DU responses with the UE CONTEXT MODIFICATION RESPONSE message.\n9'-10'.\tThe gNB-DU triggers an UE Context Modification procedure by sending UE CONTEXT MODIFICIATION REQUIRED message, which may include DRBs to be modified and released list. The gNB-CU responses with UE CONTEXT MODIFICATION CONFIRM message.\nNOTE:\tHere it is assumed that the UE accessed the original gNB-DU where the UE context is available for that UE, and either steps 9-10 or steps 9’-10’ may be executed or both could be skipped.\nNOTE:\tIf the UE accessed from a gNB-DU other than the original one, the gNB-CU should trigger the UE Context Setup procedure toward this new gNB-DU.\n11-12.\tThe gNB-CU includes an RRCReconfiguration message into the DL RRC MESSAGE TRANSFER message and transfers to the gNB-DU. The gNB-DU forwards it to the UE.\n13-14.\tThe UE sends an RRCReconfigurationComplete message to the gNB-DU, and the gNB-DU forwards it to the gNB-CU.\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "8.8\tMultiple TNLAs for F1-C",
                    "description": "",
                    "summary": "",
                    "text_content": "In the following, the procedure for managing multiple TNLAs for F1-C is described.\n\n\nThe figure depicts a network with multiple TNLAs (Terminal Network Load Aggregators) managing F1-C (Fiber-to-Cable) traffic. The TNLAs are shown in different colors, with each color representing a different TNLAs. The figure also shows the connections between the TNLAs and the fiber-optic backbone, which is represented by the dashed lines. The figure illustrates the importance of managing multiple TNLAs to ensure efficient and reliable F1-C traffic.\nFigure 8.8-1: Managing multiple TNLAs for F1-C.\n1.\tThe gNB-DU establishes the first TNLA with the gNB-CU using a configured TNL address.\nNOTE: \tThe gNB-DU may use different source and/or destination IP end point(s) if the TNL establishment towards one IP end point fails. How the gNB-DU gets the remote IP end point(s) and its own IP address are outside the scope of this specification.\n2-3.\tOnce the TNLA has been established, the gNB-DU initiates the F1 Setup procedure to exchange application level configuration data.\n4-6.\tThe gNB-CU may add additional TNL Endpoint(s) to be used for F1-C signalling between the gNB-CU and the gNB-DU pair using the gNB-CU Configuration Update procedure. The gNB-CU Configuration Update procedure also allows the gNB-CU to request the gNB-DU to modify or release TNLA(s).\n7-9.\tThe gNB-DU may add additional TNL association(s) to be used for F1-C signalling using a gNB-CU endpoint already in use for existing TNL associations between the gNB-CU and the gNB-DU pair. The gNB-DU CONFIGURATION UPDATE message including the gNB-DU ID shall be the first F1AP message sent on an additional TNLA of an already setup F1-C interface instance after the TNL association has become operational.\nThe F1AP UE TNLA binding is a binding between a F1AP UE association and a specific TNL association for a given UE. After the F1AP UE TNLA binding is created, the gNB-CU can update the UE TNLA binding by sending the F1AP message for the UE to the gNB-DU via a different TNLA. The gNB-DU shall update the F1AP UE TNLA binding with the new TNLA. The gNB-DU Configuration Update procedure also allows the gNB-DU to inform the gNB-CU that the indicated TNLA(s) will be removed by the gNB-DU.\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "8.9\tOverall procedures involving E1 and F1",
                    "description": "",
                    "summary": "",
                    "text_content": "The following clauses describe the overall procedures involving E1 and F1.\nNOTE:\tThe general principles and procedures described in this clause also apply to ng-eNB and W1/E1 interface, i.e. W1 interface between ng-eNB-DU and ng-eNB-CU-CP/ng-eNB-CU-UP, E1 interface between ng-eNB-CU-CP and ng-eNB-CU-UP, if not explicitly specified otherwise.\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": [
                        {
                            "title": "8.9.1\tUE Initial Access",
                            "text_content": "The signalling flow for UE Initial access involving E1 and F1 is shown in Figure 8.9.1-1.\n\nThe figure depicts an initial access procedure involving E1 and F1, which is a crucial step in the network setup process.\nFigure 8.9.1-1: UE Initial Access procedure involving E1 and F1\nSteps 1-8 are defined in clause 8.1.\n9.\tThe gNB-CU-CP sends the BEARER CONTEXT SETUP REQUEST message to establish the bearer　context in the gNB-CU-UP.\n10\tThe gNB-CU-UP sends the BEARER CONTEXT SETUP RESPONSE message to the gNB-CU-CP, including F1-U UL TEID and transport layer address allocated by the gNB-CU-UP.\nSteps 11-13 are defined in clause 8.1.\n14.\tThe gNB-CU-CP sends the BEARER CONTEXT MODIFICATION REQUEST message to the gNB-CU-UP, including F1-U DL TEID and transport layer address allocated by the gNB-DU.\n15.\tThe gNB-CU-UP sends the BEARER CONTEXT MODIFICATION RESPONSE message to the gNB-CU-CP.\nSteps 16-22 are defined in clause 8.1.\nNOTE:\tSteps 14-15 and steps 16-17 can happen in parallel, but both are before step 18.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "8.9.2\tBearer context setup over F1-U",
                            "text_content": "Figure 8.9.2-1 shows the procedure used to setup the bearer context in the gNB-CU-UP.\n\nThe figure depicts a bearer context setup over F1-U, illustrating the various components and their connections. The diagram includes a base station (BTS), a user equipment (UE), and a bearer context (BC). The BTS is responsible for transmitting data, while the UE is the device that receives the data. The BC is the connection between the BTS and the UE, facilitating the transmission of data. The diagram also shows the presence of a bearer context setup, which is a critical component in the network architecture.\nFigure 8.9.2-1: Bearer context setup over F1-U\n0.\tBearer context setup (e.g., following an SGNB ADDITION REQUEST message from the MeNB) is triggered in gNB-CU-CP.\n1.\tThe gNB-CU-CP sends a BEARER CONTEXT SETUP REQUEST message containing UL TNL address information for S1-U or NG-U, and if required, DL TNL address information for X2-U to setup the bearer context in the gNB-CU-UP. For NG-RAN, the gNB-CU-CP decides flow-to-DRB mapping and sends the generated SDAP and PDCP configuration to the gNB-CU-UP.\nNOTE:\tIn case of Conditional Handover or Conditional PSCell Addition/Change, the BEARER CONTEXT SETUP REQUEST message indicates to ignore the included security context and not to initiate sending downlink packets until the UE successfully accesses. Up to implementation, the gNB-CU-CP may request to establish bearer context as if a regular HO was requested.\n2.\tThe gNB-CU-UP responds with a BEARER CONTEXT SETUP RESPONSE message containing the UL TNL address information for F1-U, and DL TNL address information for S1-U or NG-U, and if required, UL TNL address information for X2-U or Xn-U.\nNOTE:\tThe indirect data transmission for split bearer through the gNB-CU-UP is not precluded.\n3.\tF1 UE context setup procedure is performed to setup one or more bearers in the gNB-DU.\n4.\tThe gNB-CU-CP sends a BEARER CONTEXT MODIFICATION REQUEST message containing the DL TNL address information for F1-U or Xn-U, and PDCP status.\nNOTE:\tIn case the indirect path indication is received in step 4, the gNB-CU-UP may not discard the DL data based on the Downlink Data Delivery Status frame received from the gNB-DU. During the inter-gNB indirect-to-direct or indirect-to-indirect path switching, the source gNB-CU-UP forwards the buffered DL data to the target gNB as specified in TS 38.300 [2].\n5.\tThe gNB-CU-UP responds with a BEARER CONTEXT MODIFICATION RESPONSE message.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "8.9.3\tBearer context release over F1-U",
                            "text_content": "Figure 8.9.3.1-1 shows the procedure used to release the bearer context in the gNB-CU-UP initiated by the gNB-CU-CP.\nThe figure depicts a bearer context release over F1-U, with the gNB-CU-CP initiating the release. The diagram illustrates the communication path, including the gNB, CU, and CP, and the associated signaling and control mechanisms.\nFigure 8.9.3.1-1: Bearer context release over F1-U – gNB-CU-CP initiated\n0.\tBearer context release (e.g., following an SGNB RELEASE REQUEST message from the MeNB) is triggered in gNB-CU-CP.\n1.\tThe gNB-CU-CP sends a BEARER CONTEXT MODIFICATION REQUEST message to the gNB-CU-UP.\n2.\tThe gNB-CU-UP responds with a BEARER CONTEXT MODIFICATION RESPONSE carrying the PDCP UL/DL status.\n3.\tF1 UE context modification procedure is performed to stop the data transmission for the UE. It is up to gNB-DU implementation when to stop the UE scheduling.\nNOTE: step 1-3 are performed only if the PDCP status of the bearer(s) needs to be preserved e.g., for bearer type change.\n4.\tThe gNB-CU-CP may receive the UE CONTEXT RELEASE message from the MeNB in EN-DC operation as described in clause 8.4.2.1.\n5.\tand 7. Bearer context release procedure is performed.\n6.\tF1 UE context release procedure is performed to release the UE context in the gNB-DU.\nFigure 8.9.3.2-1 shows the procedure used to release the bearer context in the gNB-CU-UP initiated by the gNB-CU-UP.\nThe figure depicts a bearer context release over F1-U, with the gNB-CU-UP initiating the release. The diagram illustrates the communication path, including the gNB, CU, and UP, and the associated signaling and control mechanisms.\nFigure 8.9.3.2-1: Bearer context release over F1-U – gNB-CU-UP initiated\n0.\tBearer context release is triggered in gNB-CU-UP e.g., due to local failure.\n1.\tThe gNB-CU-UP sends a BEARER CONTEXT RELEASE REQUEST message to request the release of the bearer context in the gNB-CU-UP. This message may contain the PDCP status.\n2.- 5. If the PDCP status needs to be preserved, the E1 Bearer Context Modification and the F1 UE Context Modification procedures are performed. The E1 Bearer Context Modification procedure is used to convey data forwarding information to the gNB-CU-UP. The gNB-CU-CP may receive the UE Context Release from the MeNB.\n6. The gNB-CU-CP sends a BEARER CONTEXT RELEASE COMMAND message to release the bearer context in the gNB-CU-UP.\n7.\tThe gNB-CU-UP responds with a BEARER CONTEXT RELEASE COMPLETE to confirm the release of the bearer context including also data forwarding information.\n8.\tF1 UE context release procedure may be performed to release the UE context in the gNB-DU.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "8.9.4\tInter-gNB handover involving gNB-CU-UP change",
                            "text_content": "Figure 8.9.4-1 shows the procedure used for inter-gNB handover involving gNB-CU-UP change. Overall inter-gNB handover procedure is specified in TS 37.340 [12].\n\nThe figure depicts an inter-gNB handover scenario in a 5G network, showing the handover process from gNB-CU-UP to gNB-CU-IN. The diagram illustrates the handover process, including the handover procedure, the handover status, and the handover duration. The figure also highlights the handover path, which is a crucial aspect of the handover process, ensuring that the handover is completed successfully.\nFigure 8.9.4-1: Inter-gNB handover involving gNB-CU-UP change\n1.\tThe source gNB-CU-CP sends HANDOVER REQUEST message to the target gNB-CU-CP. In case of Conditional Handover, the target gNB is regarded as a candidate gNB which is only accessed by the UE when the CHO condition(s) are fulfilled.\n2-4.\tBearer Context Setup procedure is performed as described in clause 8.9.2.\n5.\tThe target gNB-CU-CP responds the source gNB-CU-CP with an HANDOVER REQUEST ACKNOWLEDGE message.\nNOTE:\tIn case of Conditional Handover, it is up to target gNB-CU-CP implementation to make sure that the EARLY STATUS TRANSFER information is forwarded to the right gNB-CU-UP (e.g. separate UE-associated signalling connection over Xn interface for each gNB-CU-UP).\n6.\tThe F1 UE Context Modification procedure is performed to send the handover command to the UE, and to indicate to stop the data transmission for the UE.\nNOTE:\tIn case of DAPS Handover or Conditional Handover, the F1 UE Context Modification procedure in step 6 does not indicate to stop the data transmission for the UE. Instead, the F1 DL RRC Message Transfer procedure can be used which carries the handover command to the UE.\n7-8.\tBearer Context Modification procedure (gNB-CU-CP initiated) is performed to enable the gNB-CU-CP to retrieve the PDCP UL/DL status and to exchange data forwarding information for the bearer.\n9.\tThe source gNB-CU-CP sends an SN STATUS TRANSFER message to the target gNB-CU-CP.\nNOTE:\tIn case of DAPS Handover, the EARLY STATUS TRANSFER message is sent for DRBs configured with DAPS instead of the SN STATUS TRANSFER message.\nNOTE:\tIn case of Conditional Handover, the EARLY STATUS TRANSFER message is sent only if early data forwarding is applied.\nNOTE:\tThe COUNT related info for the EARLY STATUS TRANSFER message is retrieved from the source gNB-CU-UP via the steps 7/8.\n10-11.\tBearer Context Modification procedure is performed as described in clause 8.9.2. The target gNB-CU-CP does not transfer the PDCP UL/DL status carried from the SN STATUS TRANSFER message to the target gNB-CU-UP if the PDCP status does not need to be preserved (e.g. full configuration). In case of DAPS Handover or Conditional Handover, the COUNT related info carried by the EARLY STATUS TRANSFER message is provided to the target gNB-CU-UP.\n12.\tData Forwarding may be performed from the source gNB-CU-UP to the target gNB-CU-UP.\nNOTE:\tIn case of Conditional Handover, the UE performs RACH when the CHO condition(s) are fulfilled. Once successfully accessed, the target gNB-DU sends an ACCESS SUCCESS message to inform the target gNB-CU-CP of which cell the UE has accessed through. The target gNB-CU-CP may forward to the target gNB-CU-UP, necessary information for sending downlink packets (i.e. DL TNL address information for F1-U and UP security information corresponding to the accessed cell), via a Bearer context modification procedure. The target gNB-CU-CP may initiate Bearer context release procedure toward the other signalling connections or other candidate target gNB-CU-UPs, if any, to release the prepared conditional handover resources for the UE.\n12a.\tIn case of DAPS Handover or Conditional Handover, the target gNB-CU-CP sends the HANDOVER SUCCESS message to the source gNB-CU-CP to inform that the UE has successfully accessed the target cell.\n12b\tIn case of DAPS Handover or Conditional Handover, the F1 UE Context Modification procedure is performed to indicate to stop the data transmission for the UE.\n12c-12d.\tIn case of DAPS Handover or Conditional Handover, the Bearer context modification procedure (gNB-CU-CP initiated) is performed to indicate the source gNB-CU-UP to stop packet delivery and also to retrieve the PDCP UL/DL status.\n12e.\tIn case of DAPS Handover or Conditional Handover, the source gNB-CU-CP sends the SN STATUS TRANSFER message to the target gNB-CU-CP.\n12f-12g.\tIn case of DAPS Handover or Conditional Handover, the Bearer context modification procedure is performed to provide the PDCP UL/DL status to the target gNB-CU-UP only if the PDCP status needs to be preserved as described in TS 38.300 [2].\nNOTE:\tIn case of Conditional Handover, inactivity monitoring is performed after step 12g.\n13-15.\tPath Switch procedure is performed to update the DL TNL address information for the NG-U towards the core network.\n16.\tThe target gNB-CU-CP sends an UE CONTEXT RELEASE message to the source gNB-CU-CP.\n17.\tand 19. Bearer Context Release procedure is performed.\n18.\tF1 UE Context Release procedure is performed to release the UE context in the source gNB-DU.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "8.9.5\tChange of gNB-CU-UP",
                            "text_content": "Figure 8.9.5-1 shows the procedure used for the change of gNB-CU-UP within a gNB.\n\nFigure 8.9.5-1: Change of gNB-CU-UP\n1.\tChange of gNB-CU-UP is triggered in gNB-CU-CP based on e.g., measurement report from the UE.\n2-3.\tBearer Context Setup procedure is performed as described in clause 8.9.2.\n4.\tF1 UE Context Modification procedure is performed to change the UL TNL address information for F1-U for one or more bearers in the gNB-DU.\n5-6.\tBearer Context Modification procedure (gNB-CU-CP initiated) is performed to enable the gNB-CU-CP to retrieve the PDCP UL/DL status and to exchange data forwarding information for the bearer.\n7-8.\tBearer Context Modification procedure is performed as described in clause 8.9.2.\n9.\tData Forwarding may be performed from the source gNB-CU-UP to the target gNB-CU-UP.\n10-12.\tPDU Session Resource Modify Indication procedure is performed to update the DL TNL address information for the NG-U towards the core network.\n13-14.\tBearer Context Release procedure (gNB-CU-CP initiated) is performed as described in clause 8.9.3.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "8.9.6\tRRC State transition",
                            "text_content": "The procedure for changing the UE state from RRC-connected to RRC-inactive is shown in Figure 8.9.6.1-1.\n\n\nThe figure depicts a RRC (Remote Radio Head) connected to an RRC (Remote Radio Head) in an inactive state transition. The transition is depicted as a sequence of steps, with the RRC being in the inactive state and transitioning to the active state. The figure provides a visual representation of the process, allowing for easier understanding of the RRC's state transitions and the steps involved in the transition.\nFigure 8.9.6.1-1: RRC Connected to RRC Inactive state transition.\n1.\tThe gNB-CU-CP sends BEARER CONTEXT SETUP REQUEST message with UE/PDU session/DRB level inactivity timer.\n2.\tThe gNB-CU-UP sends BEARER CONTEXT SETUP RESPONSE message.\n3.\tThe gNB-CU-UP sends BEARER CONTEXT INACTIVITY NOTIFICATION message with inactivity monitoring results.\n4.\tThe gNB-CU-CP determines that the UE should enter RRC-inactive (e.g., after receiving Bearer Context Inactivity Notification procedure).\n5.\tThe gNB-CU-CP sends BEARER CONTEXT MODIFICATION REQUEST message with a Bearer Context Status Change to the gNB-CU-UP, which indicates that the UE is entering RRC-inactive state. The gNB-CU-CP keeps the F1 UL TEIDs.\n6.\tThe gNB-CU-UP sends the BEARER CONTEXT MODIFICATION RESPONSE message including the PDCP UL and DL status that may be needed for e.g., data volume reporting. The gNB-CU-UP keeps the Bearer Context, the UE-associated logical E1-connection, the NG-U related resource (e.g., NG-U DL TEIDs) and the F1 UL TEIDs.\n7.\tThe gNB-CU-CP sends the UE CONTEXT RELEASE COMMAND message to the gNB-DU serving the UE, together with the RRCRelease message to be sent to the UE.\nNOTE: step 5 and step 7 can be performed at the same time.\n8.\tThe gNB-DU sends the RRCRelease message to the UE.\n9.\tThe gNB-DU sends the UE CONTEXT RELEASE COMPLETE message to the gNB-CU-CP.\nThe procedure for changing the UE state from RRC-inactive to RRC-connected is shown in Figure 8.9.6.2-1.\n\nThe figure depicts the transition from an RRC (Radio Resource Control) inactive state to an RRC connected state, illustrating the process of transitioning between two communication modes in a wireless network.\nFigure 8.9.6.2-1: RRC Inactive to RRC Connected state transition.\n0.\tThe gNB-CU-UP receives DL data on NG-U interface.\n1.\tThe gNB-CU-UP sends DL DATA NOTIFICATION message to the gNB-CU-CP.\n2.\tThe gNB-CU-CP sends PAGING message to the gNB-DU.\n3.\tThe gNB-DU sends the Paging message to the UE.\nNOTE: steps 0-3 are needed only in case of DL data.\n4.\tThe UE sends RRCResumeRequest message either upon RAN paging or UL data arrival.\n5.\tThe gNB-DU sends the INITIAL UL RRC MESSAGE TRANSFER message to the gNB-CU-CP.\n6.\tThe gNB-CU-CP sends UE CONTEXT SETUP REQUEST message including the stored F1 UL TEIDs to create the UE context in the gNB-DU.\n7.\tThe gNB-DU responds with the UE CONTEXT SETUP RESPONSE message including the F1 DL TEIDs allocated for the DRBs.\n8.\tThe gNB-CU-CP and the UE perform the RRC-Resume procedure via the gNB-DU.\n9.\tThe gNB-CU-CP sends BEARER CONTEXT MODIFICATION REQUEST message with a RRC Resume indication, which indicates that the UE is resuming from RRC-inactive state. The gNB-CU-CP also includes the F1 DL TEIDs received from the gNB-DU in step 7.\n10.\tThe gNB-CU-UP responds with theBEARER CONTEXT MODIFICATION RESPONSE message.\nNOTE steps 8 and 9 can be performed in parallel.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "8.9.7\tTrace activation/deactivation over F1 and E1",
                            "text_content": "Figure 8.9.6-1 shows the procedure used for the activation and the deactivation of UE traces in the gNB-DU, the gNB-CU-UP or both.\n\nThe figure depicts a trace activation/deactivation process over F1 and E1, illustrating the flow of data between the two lines. The activation/deactivation of the trace is crucial for maintaining network stability and performance.\nFigure 8.9.6-1: Trace activation/deactivation over F1 and E1\n1.\tThe gNB-CU-CP receives a TRACE START message from the AMF or the MeNB (in case of EN-DC).\n2.\tThe gNB-CU-CP initiates the Trace Start procedure by sending a TRACE START message to the gNB-DU, the gNB-CU-UP or both.\n3.\tUpon reception of the TRACE START message, the gNB-DU, the gNB-CU-UP or both initiate the requested trace session and report it as described in TS 32.422 [20].\n4.\tThe gNB-CU-CP receives a DEACTIVATE TRACE message from the AMF or the MeNB (in case of EN-DC).\n5.\tThe gNB-CU-CP initiates the Deactivate Trace procedure by sending a DEACTIVATE TRACE message to the gNB-DU, the gNB-CU-UP or both.\n6.\tUpon reception of the DEACTIVATE TRACE message, the gNB-DU, the gNB-CU-UP or both stop the trace session for the indicated trace reference.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "8.9.8\tBH RLC channel establishment procedure",
                            "text_content": "NOTE:\tThe general principles and procedures described in this clause does not apply to ng-eNB\nThe BH RLC channel is an RLC channel used for backhauling between IAB-node and IAB-donor-DU, or between different IAB-nodes. The BH RLC channel establishment may be triggered by a UE accessing the network and establishing a DRB.\nThe figure depicts the signalling flow for the IAB BH RLC channel establishment procedure, illustrating the steps involved in establishing a reliable communication channel between the base station (BTS) and the Radio Local Loop (RLC) in an 800 MHz frequency band. The figure includes various components such as the BTS, RLC, and the Radio Frequency (RF) signal, as well as the signal path and the signal strength indicators. The figure is crucial for understanding the communication process and ensuring the reliability of the communication system.\nFigure 8.9.8-1: Signalling flow for IAB BH RLC channel establishment procedure\n1. The IAB-donor-CU sends to the IAB-donor-DU a UE CONTEXT MODIFICATION REQUEST message for setting up the parent-node IAB-DU side of the BH link between IAB-donor-DU and IAB-node 1. This step is optional and is required only when a new BH RLC channel needs to be established on the BH link between IAB-donor-DU and IAB-node 1.\n2. The IAB-donor-DU sends the UE CONTEXT MODIFICATION RESPONSE message to the IAB-donor-CU.\n3. The IAB-donor-CU sends to the IAB-donor-DU a DL RRC MESSAGE TRANSFER message encapsulating the RRCReconfiguration message for configuring the IAB-MT of IAB-node 1. This step is optional and is required only when a new BH RLC channel needs to be established on the BH link between IAB-donor-DU and IAB-node 1.\n4. The IAB-donor-DU decapsulates and forwards the RRCReconfiguration message to the IAB-MT of IAB-node 1. This step is optional and is required only when a new BH RLC channel needs to be established on the BH link between IAB-donor-DU and IAB-node 1.\n5. The IAB-MT of IAB-node 1 sends to the IAB-donor-DU an RRCReconfigurationComplete message destined to the IAB-donor-CU. This step is optional and is required only when a new BH RLC channel needs to be established on the BH link between IAB-donor-DU and IAB-node 1.\n6. The IAB-donor-DU sends the UL RRC MESSAGE TRANSFER message encapsulating the RRCReconfigurationComplete message to the IAB-donor-CU. This step is optional and is required only when a new BH RLC channel needs to be established on the BH link between IAB-donor-DU and IAB-node 1.\n7. The IAB-donor-CU sends to the IAB-DU of IAB-node 1 a UE CONTEXT MODIFICATION REQUEST message for setting up the parent node IAB-DU side of the BH link between IAB-node 1 and IAB-node 2. This step is optional and is required only when a new BH RLC channel needs to be established on the BH link between IAB-node 1 and IAB-node 2.\n8. The IAB-node 1 sends the UE CONTEXT MODIFICATION RESPONSE message to the IAB-donor-CU.\n9. The IAB-donor-CU sends to the IAB-DU of IAB-node 1 a DL RRC MESSAGE TRANSFER message encapsulating the RRCReconfiguration message for configuring the IAB-MT of IAB-node 2. This step is optional and is required only when a new BH RLC channel needs to be established on the BH link between IAB-node 1 and IAB-node 2.\n10. The IAB-DU of IAB-node 1 decapsulates and forwards the RRCReconfiguration message to the IAB-MT of IAB-node 2. This step is optional and is required only when a new BH RLC channel needs to be established on the BH link between IAB-node 1 and IAB-node 2.\n11. The IAB-MT of IAB-node 2 sends to IAB-node 1 an RRCReconfigurationComplete message destined to the IAB-donor-CU. This step is optional and is required only when a new BH RLC channel needs to be established on the BH link between IAB-node 1 and IAB-node 2.\n12. IAB-node 1 sends the UL RRC MESSAGE TRANSFER message encapsulating the RRCReconfigurationComplete message to the IAB-donor-CU. This step is optional and is required only when a new BH RLC channel needs to be established on the BH link between IAB-node 1 and IAB-node 2.\nThe IAB-donor-CU uses the existing CU-DU split principles and the UE Context Setup procedure or UE Context Modification procedure to configure the parent IAB-DU side of the BH RLC channel. The IAB-donor-CU uses RRC signaling (which is encapsulated in the DL RRC MESSAGE TRANSFER message terminating at the parent node IAB-DU side of the BH RLC channel) to configure the child node IAB-MT side of the BH RLC channel.\nThe IAB-donor-CU configures the IAB-DU with a mapping to the BH RLC channel to be used for a specific UL F1-U tunnel during the UE Context Setup procedure or the F1-AP UE Context Modification procedure for the UE.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "8.9.9\tTraffic Mapping",
                            "text_content": "NOTE:\tThe general principles and procedures described in this clause does not apply to ng-eNB.\nWhen forwarding IP packets, the IAB-donor-DU performs the traffic mapping from IP-layer to layer-2 as defined in TS 38.340 [22]. The traffic mapping information is configured by the IAB-donor-CU, which contains the IP header information, and the BH information including the BAP routing ID and a list of egress link and BH RLC channel pairs.\nMultiple traffic mappings can contain the same BAP routing ID and/or list of egress link and BH RLC channel pairs.\nThe traffic mappings can be configured as part of the UE Context Setup or UE Context Modification procedures. They may also be configured via the non-UE-associated BAP Mapping Configuration procedure.\nNOTE:\tImplementation must ensure the avoidance of potential race conditions, i.e. no conflicting configurations are concurrently performed using UE-associated and non-UE-associated procedures.\nThe traffic mapping from IP-layer to layer-2 may include IPv6 Flow Label information. For DL F1 or X2 traffic, the IPv6 Flow Label information is set by the IAB-donor-CU or MeNB, respectively. When this traffic is protected via IPsec tunnel mode, the IPv6 Flow Label is set on the inner header by the IAB-donor-CU or MeNB, and the security gateway shall copy the IPv6 Flow Label from the inner IP header to the outer IP header to ensure that the IAB-donor-DU can perform the traffic mapping considering the IPv6 Flow Label.\nNOTE:\tImplementation must ensure that IPv6 Flow Label collisions are avoided on the IP backhaul network between security gateway and IAB-donor-DU.\nWhen traffic is forwarded on BAP layer as described in TS 38.300 [2], the IAB-node performs the BH RLC channel mapping as defined in TS 38.340 [22]. The BH RLC channel mapping information is configured by the IAB-donor-CU.\nThe BH RLC channel mappings can be configured as part of the UE Context Setup or UE Context Modification procedures. They may also be configured via the non-UE-associated BAP Configuration procedure.\nNOTE: \tImplementation must ensure the avoidance of potential race conditions, i.e. that no conflicting configurations are concurrently performed using UE-associated and non-UE-associated procedures.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "8.9.10\tIAB-node release",
                            "text_content": "NOTE:\tThe general principles and procedures described in this clause does not apply to ng-eNB.\nAn IAB-node may depart the network either in an orderly fashion, which implies that both the network and the IAB-node are aware in advance, or in a disorderly fashion (e.g. due to an RLF with failed recovery).\nFor orderly release, the IAB-donor-CU can remove the F1 interface connection to the IAB-DU without releasing the IAB-MT. If the IAB-MT needs to be released, IAB-MT will perform the deregistration procedure. If both F1 interface and IAB-MT need to be released, the IAB-donor-CU should remove the F1 interface to the IAB-DU before it releases the collocated IAB-MT. The deregistration procedure is the same as the UE deregistration procedure. The IAB-donor-CU hands over the UEs or child IAB-nodes currently connected to the IAB-node’s cell(s) to another cell(s), or releases the UEs and may stop accepting incoming handovers or connections to the IAB-node that is about to be released. The IAB-donor-CU may also update/release the BH RLC channels in the intermediate hops. At this point, the F1 interface will be released and the corresponding SCTP associations will be removed.\nFor the disorderly release case, how to remove the IAB-node context is up to network implementation.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "8.9.11\tIAB-node OAM",
                            "text_content": "NOTE:\tThe general principles and procedures described in this clause does not apply to ng-eNB.\nThe IAB-node receives commands, configuration data and software downloads (e.g. for equipment software upgrades) from its OAM system. The IAB-node can also send alarms and traffic counter information to its OAM system. The transport connection between the IAB-node and its OAM, using IP, is provided by the IAB-MT’s PDU session via 5G network, or the IAB-MT’s PDN connection via LTE network when IAB-MT uses EN-DC.\nNOTE:\tThe transport connection between the IAB-node and its OAM may also be provided using the Backhaul IP layer by implementation.\nAlarms in the IAB generate bursts of high-priority traffic, to be transported in real time. Traffic counters generate bursts of traffic, but their transport need not be real-time. Configuration messages from OAM to the IAB will also generate small bursts of traffic, possibly with lower priority than alarms but still delay-sensitive: when a configuration is committed on the OAM, the time interval between the commitment and the effect on the equipment shall be small.  Alarm messages and commands should be transported on a high-priority bearer, while counters may be transported on a lower priority bearer.\nOAM software download to the IAB may generate larger amounts of data, but both the required data rate and the priority of this kind of traffic are much lower than in the case of alarms, commands and counters.\nFor different types of OAM traffic, it is necessary to use different DRBs between the IAB-MT and the serving DU, and different BH RLC channels for intermediate hops, with different QoS parameters. Aggregation of F1-U traffic for OAM with other F1-U traffic on the same BH RLC channels is not precluded. The QoS parameters are provided to the IAB-donor during the IAB-MT’s PDU session establishment, or the IAB-MT’s PDN connection establishment when IAB-MT uses EN-DC.\nNOTE:\tWhen the transport connection between the IAB-node and its OAM is provided by the Backhaul IP layer, the OAM traffic may be aggregated with other traffic types on the same BH RLC channel. The QoS for OAM is ensured by implementation.\nThe continuity of OAM connectivity needs to be ensured as the mobile IAB-node moves across the mobile network.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "8.9.12\tHandling of IAB-MTs in INACTIVE State",
                            "text_content": "NOTE:\tThe general principles and procedures described in this clause does not apply to ng-eNB.\nThe IAB-MT optionally supports the RRC INACTIVE state. Upon the IAB-MT entering the RRC INACTIVE state, it is up to implementation to keep or release the F1 connection of the collocated IAB-DU.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "8.9.13\tIP Address Allocation for IAB-nodes",
                            "text_content": "NOTE:\tThe general principles and procedures described in this clause does not apply to ng-eNB.\nAn IAB-node may obtain IP address(es) either from the IAB-donor or from the OAM system. The IP address(es) is(are) used by the IAB-node for F1 and non-F1 traffic exchange via the backhaul. In case IPsec tunnel mode is used to protect this F1 and non-F1 traffic, the IP address(es) refer to the outer tunnel addresses. The allocation of the inner tunnel IP address(es) is outside of 3GPP scope.\nNOTE:\tThe non-F1 traffic of an IAB-node includes all IP traffic that is not used for the management or transport of F1-C as specified in TS 38.472 [26] or F1-U as specified in TS 38.474 [7]. The non-F1 traffic may include, e.g., OAM traffic if it is transferred using the BH RLC channel.\nIn case of IAB-donor-based IP address allocation, the IP address(es) is(are) allocated by the IAB-donor-CU or IAB-donor-DU. In both cases, the IAB-node requests the IP address(es) via RRC from the IAB-donor-CU. It includes a separate IP address request for each usage, where the usages defined are all traffic, F1-U, F1-C and non-F1. The IAB-donor-CU may initiate the IAB TNL Address Allocation procedure to obtain IP addresses from the IAB-donor-DU. The IAB-donor-CU sends the IP addresses allocated for each usage to the IAB-node via RRC. In case of IAB inter-CU topology management, the F1-terminating IAB-donor-CU may obtain the IP addresses for each usage in the non-F1-terminating IAB-donor-CU’s topology from the non-F1-terminating IAB-donor-CU for the boundary IAB-node and the descendant IAB-nodes of the boundary IAB-node.\nThe IAB-node may be allocated one or multiple IPv6 addresses or one 64-bit IPv6 prefix for each usage and/or one or multiple IPv4 addresses for each usage. Each allocated IP address/IPv6 prefix is unique within the IAB network and routable from the wireline network.\nIn case of OAM-based IP address allocation, the IAB-node informs the IAB-donor-CU via an UL RRC message about the IP address(es) it received for each purpose. This occurs before the IAB node uses the IP address(es) for UL and/or DL traffic.\nThe IAB-donor-CU configures the IAB-donor-DU with mappings between IP header fields and L2 parameters (BAP Routing ID, BH RLC channels) used for DL traffic.  Each mapping configuration may hold an IPv4 address, IPv6 address or a 64-bit IPv6 prefix. In case of two mapping entries matching the same IP header where one holds an IPv6 prefix and the other holds a full IPv6 address, the one with full IPv6 address takes precedence at the IAB-donor-DU.\nIn case of IAB-donor-allocated IP addresses, the IAB-node’s IP address(es) can be updated using DL RRC signalling.\nFor F1-C traffic transfer for NSA IAB, the LTE leg and NR leg should use separate IP address pairs {IAB-DU’s IP address, IAB-donor-CU’s IP address}. How the IAB-DU gets the remote IP end point(s) and its own IP address for LTE leg is not specified in this release.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "8.9.14\tMobile IAB-node authorization",
                            "text_content": "During the mobile IAB-node integration procedure, the RRC-terminating IAB-donor-CU receives the authorization status of the mobile IAB-node from the 5GC. If the authorization status is “not authorized”, the RRC-terminating IAB-donor-CU will neither establish any backhaul resources nor allocate any BAP address, TNL address or default BAP configuration for this mobile IAB-node. If the authorization status for the mobile IAB-node changes, the 5GC sends an updated authorization status to the RRC-terminating IAB-donor-CU.\nIn case the mobile IAB-MT and its co-located mobile IAB-DU connect to same IAB-donor-CU, and the updated authorization status received from the 5GC is “not authorized”, the IAB-donor-CU will perform the following actions in this order: it will attempt to hand over the UEs served by the mobile IAB-node to other cell(s), release the F1 interface towards the mobile IAB-DU, and release all backhaul resources (including the BAP address, TNL address and default BAP reconfiguration) for this mobile IAB-node.\nIn case the mobile IAB-MT and its co-located mobile IAB-DU connect to different IAB-donor-CUs, the RRC-terminating IAB-donor sends the updated authorization status to the F1-terminating IAB-donor-CU via the IAB TRANSPORT MIGRATION MODIFICATION REQUEST message. The F1-terminating IAB-donor-CU confirms the reception of the updated authorization status via the IAB TRANSPORT MIGRATION MODIFICATION RESPONSE message.\nNOTE: \tIn absence of Xn connectivity between the RRC-terminating IAB-donor-CU and the F1-terminating IAB-donor-CU, the passing of the authorization status is left up to implementation.\nIf the updated authorization status for the mobile IAB-node is “not authorized”, the F1-terminating IAB-donor, attempts to hand over the UEs served by the mobile IAB-node to other cell(s), and then releases the F1 interface towards the mobile IAB-DU. After that, the F1-terminating IAB-donor requests from the RRC-terminating IAB-donor the release of all the offloaded traffic via the IAB TRANSPORT MIGRATION MANAGEMENT REQUEST message. The RRC-terminating IAB-donor releases the offloaded traffic and all backhaul resources (including BAP address, TNL address and default BAP reconfiguration) for this mobile IAB-node. The RRC-terminating IAB-donor may send an indication which indicates that the mobile IAB-MT can be deregistered, to AMF.\nIf the authorization status is changed back from “not authorized” to “authorized”, the phase 2 and phase 3 of the mobile IAB-node integration procedure as defined in clause 8.12.3 are carried out.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "8.9.15\tIAB-donor-CU-based NR Cell Identity (NCI) (re-)configuration for mobile IAB cells",
                            "text_content": "The NCIs of the cells served by a mobile IAB-DU configured by the OAM can be reconfigured by the F1-terminating IAB-donor-CU serving the mobile IAB-DU, in case of an NCI collision with cells of other gNB-DUs served by the IAB-donor-CU. The reconfiguration of NCI pertains to the reconfiguration of the cellLocalId part of the NCI, where the new cellLocalId(s) are based on a list of NCIs that has been configured on this F1-terminating IAB-donor-CU.\nThe value change of cellLocalId(s) shall be indicated to the OAM system of the mobile IAB-DU following the NCI reconfiguration. The mobile IAB-DU can notify OAM about the reconfigured cellLocalId(s) using notifications specified in TS 28.532 [33].\nNOTE:\tThis shall not affect the existing procedure of configuring NCGI of cells served by a stationary gNB-DU via the OAM.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "8.9.16\tTAC/RANAC (re-)configuration for mobile IAB",
                            "text_content": "The TAC/RANAC of mobile IAB-DU’s cell is configured by the OAM, and it can be reconfigured by the OAM during the mobile IAB-node movement. The TAC/RANAC of the mobile IAB-DU’s cell need not be same as the TAC/RANAC of the co-located mobile IAB-MT’s serving cell. The TAC/RANAC broadcasted by the mobile IAB-DU cell can be changed in order to reflect the mobile IAB-node’s physical location.\n",
                            "figures_meta_data": [],
                            "tables": []
                        }
                    ]
                },
                {
                    "title": "8.10\tMultiple TNLAs for E1",
                    "description": "",
                    "summary": "",
                    "text_content": "NOTE:\tThe general principles and procedures described in this clause also apply to ng-eNB and W1/E1 interface, i.e. W1 interface between ng-eNB-DU and ng-eNB-CU-CP/ng-eNB-CU-UP, E1 interface between ng-eNB-CU-CP and ng-eNB-CU-UP, if not explicitly specified otherwise.\nIn the following, the procedure for managing multiple TNLAs for E1 is described.\nThe figure depicts a network configuration for managing multiple T-Mobile Local Area Networks (TNLAs) for Enhanced 1 (E1) services. It illustrates the use of a switch, a router, and a firewall to manage the network traffic and security. The figure shows the network topology, including the TNLAs, their respective interfaces, and the connections between them. It also highlights the importance of network segmentation and security measures to ensure the smooth operation of the network.\nFigure 8.10-1: Managing multiple TNLAs for E1.\n1.\tEither the gNB-CU-CP or gNB-CU-UP establishes the first SCTP association with the gNB-CU-UP or gNB-CU-CP respectively using a configured TNL address.\nNOTE: \tThe gNB-CU-UP/gNB-CU-CP may use different source and/or destination IP end point(s) if the TNL establishment towards one IP end point fails. How the gNB-CU-UP/gNB-CU-CP gets the remote IP end point(s) and its own IP address are outside the scope of this specification.\n2-3 (A).\tOnce the TNLA (gNB-CU-UP initiated) has been established, the gNB-CU-UP initiates the E1 Setup procedure to exchange application level configuration data.\n2-3 (B).\tOnce the TNLA (gNB-CU-CP initiated) has been established, the gNB-CU-CP initiates the E1 Setup procedure to exchange application level configuration data.\n4-6.\tThe gNB-CU-CP may add additional SCTP Endpoint(s) to be used for E1 signalling between the gNB-CU-CP and the gNB-CU-UP pair using the gNB-CU-CP Configuration Update procedure. The gNB-CU-CP Configuration Update procedure also allows the gNB-CU-CP to request the gNB-CU-UP to modify or release TNLA(s).\n7-9.\tThe gNB-CU-UP may add additional TNL association(s) to be used for E1 signalling using a gNB-CU-CP endpoint already in use for existing TNL associations between the gNB-CU-CP and the gNB-CU-UP pair. The gNB-CU-UP CONFIGURATION UPDATE message including the gNB-CU-UP ID shall be the first E1AP message sent on an additional TNLA of an already setup E1 interface instance after the TNL association has become operational. The E1AP UE TNLA binding is a binding between a E1AP UE association and a specific TNL association for a given UE. After the E1AP UE TNLA binding is created, the gNB-CU-CP can update the UE TNLA binding by sending the E1AP message for the UE to the gNB-CU-UP via a different TNLA. The gNB-CU-UP shall update the E1AP UE TNLA binding with the new TNLA. The gNB-CU-UP Configuration Update procedure also allows the gNB-CU-UP to inform the gNB-CU-CP that the indicated TNLA(s) will be removed by the gNB-CU-UP.\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "8.11\tSupport of Network Sharing with multiple cell-ID broadcast",
                    "description": "",
                    "summary": "",
                    "text_content": "",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": [
                        {
                            "title": "8.11.1\tGeneral",
                            "text_content": "This clause describes necessary additions as compared to the case where network sharing with multiple cell-ID broadcast is not applied.\nThe signalling flows in the subsequent clauses assuming 2 sharing operators, A and B. The F1-C signalling transport deployment used is indicated within the subsequent clauses.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "8.11.2\tInitial Registration – separate PLMN signalling",
                            "text_content": "The signalling flow for Initial Registration for network sharing with multiple cell-ID broadcast with separate per-PLMN signalling is shown in Figure 8.11.2-1.\nIn this example message flow\n-\tthe UE is assumed to not provide an ue-Identity from which the DU is able to deduce the PLMN ID.\n-\teach F1-C interface instance uses a separate signalling transport or share signalling transport with other F1-C interface instances.\n-\tthe gNB-DUA/B entity shown in Figure 8.11.2-1 is a simplified representation of the gNB-DUA of PLMN A, the gNB DUB of PLMN B and respective radio resources of the shared cell.\nThe figure depicts an initial access procedure and network sharing with multiple cell-ID broadcast, illustrating the steps taken to establish a network connection.\nFigure 8.11.2-1: UE Initial Access procedure and network sharing with multiple cell-ID broadcast\nNOTE:\tSteps 1-5 are defined in clause 8.1. Note, that the selectedPLMN-Identity is provided in step 5.\n6.\tThe gNB-DUA sends the F1AP UE CONTEXT RELEASE REQUEST message to the gNB-CUA. including a Cause set to \"PLMN not served by the CU\".\n7.\tThe gNB-DUB sends the F1AP INITIAL UL RRC MESSAGE to the gNB-CUB. including the NR CGI associated with PLMNB, the C-RNTI indicated by the gNB-DUA at step 2, and the RRC-Container IE and the RRC-Container-RRCSetupComplete IE with the RRC message received in step1 and step 5 respectively. The RRC-Container-RRCSetupComplete IE are included in the INITIAL UL RRC MESSAGE TRANSFER for the case of network sharing and shall contain the RRC messages received via the RRC UL-DCCH-Message IE from the UE, but never previously sent to the gNB-CUB.\n8. The gNB-CUA sends the UE CONTEXT RELEASE COMMAND message to the gNB-DU.\n9. The gNB-DU sends the UE CONTEXT RELEASE COMPLETE message to the gNB-CUA.\nNOTE: Initiating procedures from gNB-DUA towards gNB-CUA and from gNB-DUB to gNB-CUB in parallel is not precluded.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "8.11.3\tRRC Connection Reestablishment – separate PLMN signalling",
                            "text_content": "The signalling flow for RRC Connection Reestablishment for network sharing with multiple cell-ID broadcast with separate per-PLMN signalling is shown in Figure 8.11.3-1.\nIn this example message flow\n-\teach F1-C/Xn-C interface instance uses either a separate signalling transport or a share signalling transport with other interface instances.\n-\tthe New gNB-DUA/B entity shown in Figure 8.11.3-1 is a simplified representation of the New gNB-DUA of PLMN A, the New gNB DUB of PLMN B and respective radio resources of the shared cell.\nThe figure depicts a network reconfiguration process, specifically focusing on the RRC connection reestablishment and network sharing with multiple cell-ID broadcast. The figure illustrates the process of reconfiguring the network to accommodate multiple cell-ID broadcasts, which is a key aspect of network sharing in 5G networks.\nFigure 8.11.3-1: RRC Connection Reestablishment and network sharing with multiple cell-ID broadcast\n1.\tThe UE sends the RRCReestablishmentRequest.\n2A-5A.\tDepicts the case where the UE context could not be retrieved by the new gNB-CUA. In step 2A, the NR CGI associated to PLMNA is indicated. In step 5A, the gNB-CUA would prepare the possibility to revert back to normal RRC Connection Establishment, indicating that the UE Context was not retrieveable and may include the re-directed RRC message as received in step 1. After step 5A, the gNB-DUA may redirect the UE towards the PLMN indicated in DL RRC MESSAGE TRANSFER message, if the PLMN assistance information is provided by the gNB-CUA. If the New gNB-DUA/B was not able to deduce the RRC message from step 1, this indicator triggers step 2B. The New gNB-DUA is supposed to trigger the release the UE-associated signalling connection (not shown).\n2B-5B.\tDepicts the case where the UE context was retrieveable by the New gNB-CUB. In step 2B, the NR CGI associated to PLMNB is indicated. Step 2B also includes the C-RNTI allocated at reception of step 1.\n6-8.\tThe RRC Connection Reestablishment continues with the New gNB-CUB.\nNOTE:\tIf all gNB-CUs indicate that the UE context is not retrievable, the RRC connection reestablishment falls back to RRC Connection setup, as described in clause 8.11.2.\nNOTE:\tInitiating procedures from gNB-DUA towards gNB-CUA and from gNB-DUB to gNB-CUB in parallel is not precluded.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "8.11.4\tSupport of shared signalling transport",
                            "text_content": "This clause specifies for F1-C, Xn-C and, in case of EN-DC, for X2-C, how an interface instance is identified in case of network sharing with multiple cell ID broadcast with shared signalling transport.\nFor UE associated signalling, the interface instance is identified by assigning on F1-C appropriate UE F1AP IDs, on Xn-C appropriate UE XnAP IDs and on X2-C appropriate UE X2AP IDs.\nFor non-UE associated signalling, the interface instance is identified on F1-C by the assigning an appropriate value to the Transaction ID, on Xn-C and X2-C by including the Interface Instance Indication in the respective message and assigning an appropriate value to it.\n",
                            "figures_meta_data": [],
                            "tables": []
                        }
                    ]
                },
                {
                    "title": "8.12\tIAB-node Integration Procedure",
                    "description": "",
                    "summary": "",
                    "text_content": "",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": [
                        {
                            "title": "8.12.1\tStandalone IAB integration",
                            "text_content": "A high-level flow chart for SA-based IAB integration is shown in the Figure 8.12.1-1:\nThe figure depicts the integration procedure for IAB-node 1 in SA, illustrating the steps involved in connecting the node to the network. The figure includes a schematic representation of the node's components, such as the IAB-node 1, the SA, and the network infrastructure. The integration procedure is detailed, with specific steps and requirements for each component, ensuring a smooth and efficient process.\nFigure 8.12.1-1: The integration procedure for IAB-node in SA\nPhase 1: IAB-MT setup. In this phase, the IAB-MT of the new IAB-node (e.g. IAB-node 2 in Figure 8.12.1-1) connects to the network in the same way as a UE, by performing RRC connection setup procedure with IAB-donor-CU, authentication with the core network, IAB-node 2-related context management, IAB-node 2’s access traffic-related radio bearer configuration at the RAN side (SRBs and optionally DRBs), and, optionally, OAM connectivity establishment by using the IAB-MT’s PDU session. The IAB-node can select the parent node for access based on an over-the-air indication from potential parent node IAB-DU (transmitted in SIB1). To indicate its IAB capability, the IAB-MT includes the IAB-node indication in RRCSetupComplete message, to assist the IAB-donor to select an AMF supporting IAB.\nNOTE: The signalling flow for UE initial access procedure as shown in Figure 8.1-1/Figure 8.9.1-1 is used for the setup of the IAB-MT.\nPhase 2-1: BH RLC channel establishment. During the bootstrapping procedure, one default BH RLC channel for non-UP traffic e.g. carrying F1-C traffic/non-F1 traffic to and from the IAB-node 2 in the integration phase, is established. This may require the setup of a new BH RLC channel or modification of an existing BH RLC channel between IAB-node 1 and IAB-donor-DU. The IAB-donor-CU may establish additional (non-default) BH RLC channels. This phase also includes configuring the BAP Address of the IAB-node 2 and default BAP Routing ID for the upstream direction.\nNOTE: If the OAM connectivity is supported via backhaul IP layer by implementation, one or more BH RLC channels used for OAM traffic can also be established.\nPhase 2-2: Routing update. In this phase, the BAP sublayer is updated to support routing between the new IAB-node 2 and the IAB-donor-DU. For the downstream direction, the IAB-donor-CU initiates F1AP procedure to configure the IAB-donor-DU with the mapping from IP header field(s) to the BAP Routing ID related to IAB-node 2. The routing tables are updated on all ancestor IAB-nodes (e.g. IAB-node 1 in Figure 8.12.1-1) and on the IAB-donor-DU, with routing entries for the new BAP Routing ID(s). This phase may also include the IP address allocation procedure for IAB-node 2. IAB-node 2 may request one or more IP addresses from the IAB-donor-CU via RRC. The IAB-donor-CU may send the IP address(es) to the IAB-node 2 via RRC. The IAB-donor-CU may obtain the IP address(es) from the IAB-donor-DU via F1-AP or by other means (e.g. OAM, DHCP). IP address allocation procedure may occur at any time after RRC connection has been established.\nPhase 3: IAB-DU part setup. In this phase, the IAB-DU of IAB-node 2 is configured via OAM. The IAB-DU of IAB-node 2 initiates the TNL establishment, and F1 setup (as defined in clause 8.5) with the IAB-donor-CU using the allocated IP address(es). The IAB-donor-CU discovers collocation of IAB-MT and IAB-DU from the IAB-node’s BAP Address included in the F1 SETUP REQUEST message. After the F1 is set up, the IAB-node 2 can start serving the UEs.\nNOTE: The IAB-DU can discover the IAB-donor-CU’s IP address in the same manner as a non-IAB gNB-DU.\nNOTE:\tIf the IAB-node establishes NR-DC before the establishment of F1-C connection, the MN decides whether the MN or the SN becomes the F1-terminating IAB-donor. In case it decides that the SN becomes the F1-terminating IAB-donor, it notifies the SN via Xn. The IAB-node can implicitly derive whether the MN or the SN is the F1-terminating IAB-donor, e.g., based on the entity which provides the default BAP configuration.\nNOTE:\tFor OAM-based IAB-donor selection, if the IAB-node establishes NR-DC before the establishment of F1-C connection, the IAB-node indicates the F1-terminating IAB-donor by signaling its IP address(es) to this IAB-donor via RRC signaling.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "8.12.2\tNSA IAB Integration procedure",
                            "text_content": "The IAB integration procedure for NSA is shown in Figure 8.12.2-1.\nThe figure depicts the signalling flow for the IAB integration procedure in the NSA, illustrating the various stages and components involved in the process.\nFigure 8.12.2-1: Signalling flow for IAB integration procedure in NSA\nPhase 1-1. IAB-MT part setup with E-UTRAN. In this phase, the IAB-MT part connects to the LTE network as a UE, by performing RRC connection setup procedure with an eNB, authentication with the EPC, IAB-node’s access traffic-related radio bearer configuration at the E-UTRAN side, and optionally, OAM connectivity establishment by using the IAB-MT’s PDN connection. The IAB-node can select the IAB-supporting eNB based on an over-the-air indication from eNB (transmitted in SIB1). To indicate its IAB capability, the IAB-MT includes the IAB-node indication in RRCConnectionSetupComplete message, to assist the eNB to select an MME supporting IAB. The eNB then configures the IAB-MT part with an NR measurement configuration in order to perform discovery, measurement and measurement reporting of candidate gNBs. To enable the eNB choose an en-gNB which supports IAB function, the IAB capability of neighbour gNBs can be pre-configured in the eNB (e.g. by OAM).\nNOTE: Other ways to enable the eNB know the IAB capability of neighbour gNBs are not precluded.\nPhase 1-2. SgNB addition. In this phase, the IAB-MT part connects to the parent node IAB-DU and IAB-donor-CU via the EN-DC SgNB Addition procedure. The procedure defined in clause 8.4.1 is reused. The eNB includes “IAB Node Indication” in SGNB ADDITION REQUEST message to inform the IAB-donor-CU that the request is for an IAB-node. In addition, SRB3 can be set up for the IAB-MT, to transmit RRC message between the IAB-MT and the IAB-donor-CU via the NR links directly.\nPhase 2-1: BH RLC channel establishment. This phase is the same as Phase 2-1 in the standalone IAB integration procedure (refer to the Phase 2-1 in clause 8.12.1). This step may occur in Phase 1-2.\nPhase 2-2: Routing update. This phase is the same as Phase 2-2 in the standalone IAB integration procedure (refer to the Phase 2-2 in clause 8.12.1), except that the IP traffic on the F1-C interface may be transmitted via the MeNB.\nPhase 3. IAB-DU part setup. This phase is the same as Phase 3 in the standalone IAB integration procedure (refer to the Phase 3 in clause 8.12.1), except that the IP traffic on the F1-C interface may be transmitted via the MeNB.\nThe IAB-donor-CU decides to only configure LTE leg, or only to configure NR leg, or to configure both LTE leg and NR leg, to be used for F1-C traffic transfer. The configuration may be performed before IAB-DU part setup. IAB-donor-CU may also change the configuration after IAB-DU part setup. In case the configuration is not performed before IAB-DU part setup, the IAB node uses the NR leg as the default one. When both LTE leg and NR leg are configured, it is up to the implementation to select the leg for F1-C traffic transfer.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "8.12.3\tMobile IAB-node integration",
                            "text_content": "During the integration, the mobile IAB-MT and the mobile IAB-DU can connect to the same IAB-donor or to different IAB-donors. The procedure for the latter case is shown in Figure 8.12.3-1.\nFigure 8.12.3-1: Decoupled mobile IAB-node integration procedure\nPhase 1: Equivalent procedure to Phase 1 of the IAB-node integration in SA mode in clause 8.12.1, where the mobile IAB-node and the RRC-terminating IAB-donor correspond to IAB-node 2 and the IAB-donor, respectively. The mobile IAB-node selects the parent node based on a mobile-IAB-specific over-the-air indication (transmitted in SIB1). The mobile IAB-MT includes a mobile-IAB-node-specific indication in the RRCSetupComplete message to assist the RRC-terminating IAB-donor in selecting an AMF supporting mobile IAB.\nPhase 2-1: Same as Phase 2-1 of procedure in clause 8.12.1.\nPhase 2-2: Same as Phase 2-2 of procedure in clause 8.12.1.\nPhase 3: Mobile IAB-DU part setup. In this phase, the mobile IAB-DU is configured via OAM. The configured information includes, e.g., the information of the F1-terminating IAB-donor-CU, to enable the mobile IAB-DU to initiate the establishment of F1-C to the F1-terminating IAB-donor-CU.  The mobile IAB-DU initiates the TNL establishment, and F1 setup (as defined in clause 8.5) with the F1-terminating IAB-donor-CU using the default BAP routing ID and default BH RLC channel configured by the RRC-terminating IAB-donor-CU in Phase 2-1 for upstream traffic. During the F1 setup, the mobile IAB-DU includes the gNB ID of the RRC-terminating IAB-donor-CU and the BAP address of the co-located mobile IAB-MT in the F1 SETUP REQUEST message. The mobile IAB-node determines this gNB ID based on the over-the-air broadcast (SIB1) by the RRC-terminating IAB-donor.\nAfter the F1 is set up, the mobile IAB-node can start serving UEs. The F1-terminating IAB-donor-CU can initiate the IAB Transport Migration Management procedure towards the RRC-terminating IAB-donor-CU as defined in clause 8.17.3.1.\n",
                            "figures_meta_data": [],
                            "tables": []
                        }
                    ]
                },
                {
                    "title": "8.13\tOverall procedures for MDT",
                    "description": "",
                    "summary": "",
                    "text_content": "",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": [
                        {
                            "title": "8.13.0\tGeneral",
                            "text_content": "The following clauses describe the overall procedures for MDT (TS 37.320 [31]) involving E1 and F1.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "8.13.1\tSignalling based MDT activation",
                            "text_content": "The signalling flow for Signalling based MDT activation involving E1 and F1 is shown in Figure 8.13.1-1.\nThe figure depicts a schematic representation of a MDT (Multi-Domain Training) activation process, illustrating the various stages and components involved in the training process. The figure includes a series of interconnected nodes, each representing a different domain, such as the training domain, the test domain, and the validation domain. The nodes are connected by lines, representing the communication paths between the domains. The figure also includes a legend to indicate the different colors and symbols used to represent the different domains. The overall layout of the figure is organized in a way that allows for easy understanding of the MDT activation process, with each domain represented by a separate node and the communication paths between them clearly labeled.\nFigure8.13.1-1\tSignalling based MDT Activation\n1.\tThe AMF starts a trace session and sends a TRACE START message to the gNB. The AMF shall consider the MDT user consent information when activating an MDT trace session for the UE as defined in TS 32.422 [20]. TRACE START message includes the parameters for configuring MDT measurements.\n2. \tThe gNB-CU-CP decides if the gNB-CU-UP, or the gNB-DU, or both, should be involved in the MDT measurement. If the gNB-CU-UP should be involved in the MDT measurement, the gNB-CU-CP sends TRACE START message to the gNB-CU-UP, including MDT configuration parameters.\n3.\tIf the gNB-DU should be involved in the MDT measurement, the gNB-CU-CP sends TRACE START message to the gNB-DU, including MDT configuration parameters.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "8.13.2\tManagement based MDT activation",
                            "text_content": "In Management Based Trace Activation towards a gNB-CU-CP, gNB-CU-UP or a gNB-DU can be fulfilled with the Cell Traffic trace functionality defined in TS 32.422 [20]. The configuration parameters of the Trace Session that are received by a node in split RAN architecture are defined in TS 32.422 [20].\nThe following description is valid for both an en-gNB and a gNB.\nIf the MDT measurement is initiated by the EM towards the gNB-CU-CP, and if the activation involves measurements collected by multiple nodes under the same gNB-CU-CP control in a split RAN architecture, the EM sends MDT measurement activation to the gNB-CU-CP and the gNB-CU-CP may further decide which gNB-DU(s) or which gNB-CU-UP(s) to perform the MDT measurement.\nWhen gNB-CU-CP or a gNB-DU receive the Trace Session Activation message from the management system for a given cell or a list of cell(s) under its control, the gNB-CU-CP or gNB-DU shall start a Trace Session for the given cell or list of cell(s). For Management Based MDT sent directly to a gNB-CU-UP, no MDT Area Configuration (apart from PLMN IDs) is to be included in the MDT activation indication.\nThe signalling flows for management based MDT activation in gNB-CU-CP, gNB-DU and gNB-CU-UP are shown in Figure 8.13.2.2-1,  Figure 8.13.2.3-1 and in Figure 8.13.2.4-1 respectively.\nThe signalling flow for Management based MDT Activation in gNB-CU-CP is shown in Figure 8.13.2.2-1.\n\nThe figure depicts a management-based MDT activation in a gNB-CU-CP, illustrating the activation process and the role of the gNB in managing the MDT.\nFigure 8.13.2.2-1\t\tManagement based MDT Activation in gNB-CU-CP\n1.\tThe EM sends a Trace Session activation request to the gNB-CU-CP. This request includes the parameters for configuring UE measurements.\n2.   The gNB-CU-CP shall select the suitable UEs for MDT data collection. If the UE is not in the specified area or if the serving PLMN is not within the Management Based MDT PLMN List the UE shall not be selected by the gNB-CU-CP for MDT data collection as defined in TS 32.422 [20].\nFor each selected UE, if the gNB-CU-UP should perform MDT measurement, the gNB-CU-CP sends TRACE START message to the gNB-CU-UP, including MDT configuration parameters.\n3.\tFor each selected UE, if the gNB-DU should perform MDT measurement, the gNB-CU-CP sends TRACE START message to the gNB-DU, including MDT configuration parameters.\n4.\tThe gNB-CU-CP may send CELL TRAFFIC TRACE message to the AMF for the selected UE, including Trace ID for MDT. The AMF forwards Trace ID and other information to the TCE as specified in TS 32.422 [20].\nIf the UE reports an indication of measurement pollution, the gNB-CU-CP shall, if supported, include such indication as part of the measurement report to be sent to the TCE so that the TCE is able to correlate and filter the affected measurements.\nThe signalling flow for Management based MDT Activation in gNB-DU is shown in Figure 8.13.2.3-1.\n\nThe figure depicts a management-based MDT activation in a gNB-DU, highlighting the role of the gNB in managing the Distributed User Equipment (DU) in a 5G network. The figure shows the gNB-DU interface, which is connected to the gNB and the DU, and the management functions that are activated based on the DU's status. The figure also illustrates the communication between the gNB and the DU, as well as the management functions that are activated based on the DU's status.\nFigure 8.13.2.3-1\t\tManagement based MDT Activation in gNB-DU\n1.\tThe gNB-CU-CP sends UE CONTEXT SETUP REQUEST message to the gNB-DU, including Management based MDT PLMN List. The message may include the Polluted Measurement Indicator IE. If the gNB-DU has received the Polluted Measurement Indicator IE, the gNB-DU includes the information contained in such indicator as part of the measurement report to be sent to the TCE, so that the TCE is able to correlate and filter the affected measurements.\n2.\tThe gNB-DU sends UE CONTEXT SETUP RESPONSE message to the gNB-CU-CP.\n3.\tThe EM sends a Trace Session activation request to the gNB-DU. This request includes the parameters for configuring UE measurements.\n4.   The gNB-DU shall select the suitable UEs for MDT data collection. If the UE is not in the specified area or if the serving PLMN is not within the Management Based MDT PLMN List the UE shall not be selected by the gNB-DU for MDT data collection as defined in TS 32.422 [20].\nFor each selected UE, the gNB-DU may send CELL TRAFFIC TRACE message to the gNB-CU-CP in the F1 UE associated signalling, including Trace ID for MDT.\n5.\tUpon reception of a CELL TRAFFIC TRACE message from F1, the gNB-CU-CP shall send CELL TRAFFIC TRACE message to the AMF for this UE, including Trace ID for MDT. The AMF forwards Trace ID and other information to the TCE as specified in TS 32.422 [20].\nThe signalling flow for Management based MDT Activation in gNB-CU-UP is shown in Figure 8.13.2.4-1.\n\nThe figure depicts a management-based MDT activation in a gNB-CU-UP scenario, illustrating the activation process and the role of the gNB in managing the MDT.\nFigure 8.13.2.4-1\t\tManagement based MDT Activation in gNB-CU-UP\n1.\tThe gNB-CU-CP sends BEARER CONTEXT SETUP REQUEST message to the gNB-CU-UP, including Management based MDT PLMN List. The message may include Polluted Measurement Indicator. If the gNB-DU has received the Polluted Measurement Indicator IE, the gNB-DU includes the information contained in such indicator as part of the measurement report to be sent to the TCE so that the TCE is able to correlate and filter the affected measurements.\n2.\tThe gNB-CU-UP sends BEARER CONTEXT SETUP RESPONSE message to the gNB-CU-CP.\n3.\tThe EM sends a Trace Session activation request to the gNB-CU-UP. This request includes the parameters for configuring UE measurements.\n4.   The gNB-CU-UP shall select the suitable UEs for MDT data collection. If the serving PLMN is not within the Management Based MDT PLMN List the UE shall not be selected by the gNB-CU-UP for MDT data collection as defined in TS 32.422 [20].\nFor each selected UE, the gNB-CU-UP may send CELL TRAFFIC TRACE message to the gNB-CU-CP in the E1 UE associated signalling, including Trace ID for MDT\n5.\tUpon reception of a CELL TRAFFIC TRACE message from E1, the gNB-CU-CP shall send CELL TRAFFIC TRACE message to the AMF for this UE, including Trace ID for MDT. The AMF forwards Trace ID and other information to the TCE as specified in TS 32.422 [20].\nIn the EN-DC case, the EM provides the MDT configuration to both MeNB and en-gNB independently.\nAs specified in TS 32.422 [20] in Management based MDT getting user consent is required before activating the MDT functionality because of privacy and legal obligations. In the case of EN-DC user consent gets communicated to the MeNB at the UE context setup procedure using the INITIAL CONTEXT SETUP REQUEST message. In particular when the Management Based MDT Allowed IE is contained in the INITIAL CONTEXT SETUP REQUEST message, the MeNB stores it in the UE context and uses it, together with information in the Management Based MDT PLMN List IE, if available, to allow subsequent selection of the UE for management based MDT as specified in TS 32.422 [20]. The MeNB may also receive user consent information in the HANDOVER REQUEST message. The MeNB will forward the MDT user consent to the SgNB at EN-DC setup. In particular, if available in the UE context, the MeNB will include the Management Based MDT Allowed IE and the Management Based MDT PLMN List IE in the SGNB ADDITION REQUEST message to the SgNB. Furthermore, the user consent will be forwarded to the relevant gNB-CU-UP at the bearer context setup or to the gNB-DU by including the Management Based MDT PLMN List IE in the BEARER CONTEXT SETUP REQUEST or UE CONTEXT SETUP REQUEST.\nThe signalling flow for User consent proposation in EN-DC is shown in Figure 8.13.2.5-1.\n\nThe figure depicts the user consent propagation in an EN-DC (Electrical Network-to-Distribution) scenario. It illustrates the path of user consent signals from the source to the distribution network, highlighting the importance of proper signal propagation and network design to ensure user satisfaction and reliability.\nFigure 8.13.2.5-1\t\tUser consent propagation in EN-DC\n0.\tUser Context information are made available at the MME.\n1.\tThe MME sends INITIAL CONTEXT SETUP REQUEST message to the MeNB, including Management Based MDT Allowed IE and the Management based MDT PLMN List IE to communicate user consent to the eNB.\n2.\tThe MeNB sends SGNB ADDITION REQUEST to the gNB-CU-CP at EN-DC setup. This request includes Management Based MDT Allowed IE and, optionally, the Management based MDT PLMN List IE, if available.\n3a.\tThe user consent is communicated to the gNB-DU at the UE context setup by including the Management based MDT PLMN List IE in the UE CONTEXT SETUP REQUEST.\n3b.\tThe user consent is communicated to the gNB-CU-UP at the bearer context setup by including the Management based MDT PLMN List IE in the BEARER CONTEXT SETUP REQUEST.\nAs specified in TS 32.422 [20] in Management based MDT getting user consent is required before activating the MDT functionality because of privacy and legal obligations. User consent is communicated to the MN at the UE context setup procedure using the INITIAL CONTEXT SETUP REQUEST message, or in HANDOVER REQUEST and PATH SWITCH REQUEST ACKNOWLEDGE messages. Modified user consent information may be received in the UE CONTEXT MODIFICATION REQUEST message. The MN stores the received information in the UE context and uses it to allow subsequent selection of the UE for management based MDT as specified in TS 32.422 [20]. The MN will forward the MDT user consent to the SN at MR-DC setup, i.e., if available in the UE context, the MN will include the Management Based MDT PLMN List IE in the S-NODE ADDITION REQUEST message or in the S-NODE MODIFICATION REQUEST message sent to the SN. Furthermore, in NR-DC and NGEN-DC, the user consent will be forwarded to the relevant SgNB-CU-UP at the bearer context setup or to the SgNB-DU by including the Management Based MDT PLMN List information in the BEARER CONTEXT SETUP REQUEST or UE CONTEXT SETUP REQUEST. Furthermore, in NR-DC and NGEN-DC, the user consent may be updated to the relevant SgNB-CU-UP at the bearer context modification or to the SgNB-DU by including the Management Based MDT PLMN List information in the BEARER CONTEXT MODIFICATION REQUEST or UE CONTEXT MODIFICATION REQUEST.\nThe signalling flow for User consent propagation in NR-DC and NGEN-DC is shown in Figure 8.13.2.6-1.\nThe figure depicts the user consent propagation in two different scenarios: NR-DC (Non-Reluctant) and NGEN-DC (Non-Globalized). In NR-DC, the user consent is propagated through a network of base stations (BSs) and relays, while in NGEN-DC, it is propagated through a network of base stations and a globalized network. The figure illustrates the different paths and mechanisms used to ensure user consent is received and processed correctly.\nFigure 8.13.2.6-1\t\tUser consent propagation in NR-DC and NGEN-DC\n0.\tUser Context information are made available at the AMF.\n1.\tThe AMF sends INITIAL CONTEXT SETUP REQUEST message to the MN, including the Management based MDT PLMN List IE to communicate user consent to the MN.\n2.\tThe MN sends S-NODE ADDITION REQUEST to the SgNB-CU-CP at NR-DC setup. This request includes the Management based MDT PLMN List IE.\n3a.\tThe user consent is communicated to the SgNB-DU at the UE context setup by including the Management based MDT PLMN List IE in the UE CONTEXT SETUP REQUEST.\n3b.\tThe user consent is communicated to the SgNB-CU-UP at the bearer context setup by including the Management based MDT PLMN List IE in the BEARER CONTEXT SETUP REQUEST.\nIn the MR-DC with 5GC case, the EM provides the MDT configuration to both MN and SN independently.\nIn Management Based Trace Activation towards a SN, the SN may send the CELL TRAFFIC TRACE message including the Trace ID and privacy indicator to the MN as described in TS 32.422 [20]. Upon reception of the CELL TRAFFIC TRACE message from the SN, the MN will send a CELL TRAFFIC TRACE message including the Trace ID and privacy indicator to the CN for this UE. The CN forwards the Trace ID and other information to the TCE as specified in TS 32.422 [20].\nThe following shows a flow chart summarizing the functionality in MR-DC when the SN is the SgNB.\nThe figure depicts a scenario where data anonymization is performed in a multi-radio (MR-DC) network, where the Service Gateway (SgNB) is the primary radio. The figure illustrates the process of anonymizing data, with the SgNB acting as the central point of data collection and anonymization. The figure shows the data anonymization process, including the use of a Data Anonymization Module (DAM) and the anonymization of the data. The figure also highlights the importance of the SgNB in the network, as it is responsible for collecting and anonymizing data.\nFigure 8.13.2.7-1\t\tData anonymization in MR-DC when the SN is the SgNB\n0.\tThe gNB-CU-CP, the gNB-CU-UP, the gNB-DU receives the MDT configuration from EM and select the suitable UEs for MDT data collection. The anonymization MDT configuration parameter from the EM is considered to be IMEI-TAC.\n1.  For the management based MDT activation in gNB-CU-UP and/or in gNB-DU, if the gNB-CU-UP and/or the gNB-DU receive an MDT Configuration including the anonymization parameter set to IMEI-TAC, the gNB-CU-UP and/or gNB-DU send CELL TRAFFIC TRACE message to the gNB-CU-CP for this UE, including Trace ID and privacy indicator.\n2.  For the management based MDT activation in gNB-CU-CP, upon receiving the CELL TRAFFIC TRACE message from E1/F1, the gNB-CU-CP shall send a CELL TRAFFIC TRACE message to the MN for this UE, including Trace ID and privacy indicator.\n3.\tThe MN sends a CELL TRAFFIC TRACE message to the CN for this UE, including Trace ID and privacy indicator. The CN forwards Trace ID and other information to the TCE as specified in TS 32.422 [20].\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "8.13.3\tAlignment of MDT and QoE Measurements",
                            "text_content": "In case of split gNB architecture, the gNB-CU-CP can send the TRACE START message for the MDT measurement subject to alignment with a QoE measurement to the gNB-CU-UP and gNB-DU, e.g., upon/after the reception of QoE measurement session start indication from the UE, as specified in TS 38.300 [2].\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "8.13.4\tMDT reporting",
                            "text_content": "Each node involved in the MDT measurement reports the measurements collected directly to the TCE the node has been configured with.\nIn the case where issues (e.g. in-device coexistence problem) potentially affecting immediate MDT measurements were detected during a measurement reporting process, an indication of the issue should be logged in the affected measurement reports to the TCE so that the TCE is able to correlate and filter the affected measurements.\n",
                            "figures_meta_data": [],
                            "tables": []
                        }
                    ]
                },
                {
                    "title": "8.14\tSelf-optimisation",
                    "description": "",
                    "summary": "",
                    "text_content": "",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": [
                        {
                            "title": "8.14.1\tOverall procedures for MRO",
                            "text_content": "The following clauses describe the overall procedures for MRO involving F1.\nThe signalling flow for signalling of RLF information from gNB-CU to gNB-DU is shown in Figure 8.14.1.1-1, where the example where NG-RAN nodes exchange the RLF Report via the Xn: FAILURE INDICATION message has been considered.\n\n\nThe figure depicts the signalling of RLF information from gNB-CU to gNB-DU in the NG RAN, illustrating the communication between the base station (gNB-CU) and the distribution unit (gNB-DU). The figure shows the RLF information being transmitted over a fiber-optic backbone, with redundancy paths and core switches ensuring failover reliability. The layered design of the NG RAN aligns with SDN principles.\nFigure 8.14.1.1-1\tExample of signalling of RLF information from gNB-CU to gNB-DU in NG RAN\n\n1.\tA UE with a logged RLF Report connects to a cell in gNB2 and it signals the RLF Report to gNB2 by means of the RRC UE Information Request/Response procedures.\n2. \tThe gNB2 sends an Xn: Failure Indication to gNB1-CU where the UE may have previously been connected prior to the connection failure. This includes also the RLF Report.\n3.\tThe gNB1-CU sends the F1: Access and Mobility Indication message to the gNB1-DU, including the RLF Report.\nIt is also possible for the gNB-CU receiving the RLF Report from the UE to signal it directly to the gNB-DU by means of the F1: Access and Mobility Indication procedure.\nThe signalling flow for signalling of RACH information from gNB-CU to gNB-DU is shown in Figure 8.14.1.2-1, where the example where NG-RAN nodes exchange the RACH Report via the Xn: ACCESS AND MOBILITY INDICATION message has been considered.\nThe figure depicts a simplified representation of the signalling process from a gNB-CU to a gNB-DU in an NG-RAN network. It illustrates the RACH information being transmitted from the gNB-CU to the gNB-DU, highlighting the use of signalling protocols such as RACH and RRC. The figure also shows the connection between the gNB-CU and gNB-DU, with the RACH information being transmitted over a dedicated path.\nFigure 8.14.1.2-1\tExample of signalling of RACH information from gNB-CU to gNB-DU in NG-RAN\n1.\tA UE with a RACH Report concerning cells of gNB1 connects to a cell in gNB2 and it signals the RACH Report to gNB2 by means of the RRC UE Information Request/Response procedures.\n2.\tGNB2 sends an Xn: Access and Mobility Indication message to gNB1-CU where the UE may have previously been connected. This includes also the RACH Report.\n3.\tGNB1-CU sends the F1: Access and Mobility Indication message to the gNB1-DU, including the RACH Report.\nIt is also possible for the gNB-CU receiving the RACH Report from the UE to signal it directly to the gNB-DU by means of the F1: Access and Mobility Indication procedure.\n",
                            "figures_meta_data": [],
                            "tables": []
                        }
                    ]
                },
                {
                    "title": "8.15\tOverall procedures for NR MBS",
                    "description": "",
                    "summary": "",
                    "text_content": "",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": [
                        {
                            "title": "8.15.1\tGeneral",
                            "text_content": "The following clauses describe the overall procedures for NR MBS involving E1 and F1.\nFigure 8.15.1.1-1 illustrates an exemplified interaction of NGAP, E1AP, F1AP and RRC protocol functions at Broadcast MBS Session Setup.\nThe figure depicts a broadcast MBS session setup, illustrating the various components and their connections. The diagram includes a central MBS, a relay MBS, and a broadcast MBS, all connected to a network of MBSs and a network of MBSs. The relay MBS is connected to the central MBS, and the broadcast MBS is connected to the relay MBS. The diagram also shows the network of MBSs, with each MBS connected to the other MBSs. The diagram is a visual representation of the setup, allowing for easy understanding of the network's structure and connections.\nFigure 8.15.1.1-1: Broadcast MBS Session Setup\n1.\tThe 5GC starts the broadcast session by sending the NGAP Broadcast Session Setup Request message to the gNB containing the TMGI, S-NSSAI, 5G QoS Profile, area information and transport information (for NG-U multicast transport it provides the IP multicast address and the IP source specific multicast address).\n2/3. The gNB-CU-CP sets up the broadcast bearer context, providing NG-U transport information from the 5GC to the gNB-CU-UP and receiving from the gNB-CU-UP the NG-U GTP DL TEID in case NG-U unicast transport was selected and an F1-U GTP UL TEID per MRB.\n4.\tIn case of NG-U multicast transport, the gNB-CU-UP joins the NG-U multicast group.\n5/6.\tThe gNB-CU-CP establishes the Broadcast MBS Session Context at the gNB-DU, providing MRB configuration, other relevant session parameters and F1-U GTP UL TEID information, and receiving F1-U GTP DL TEID information.\n7/8.\tThe gNB-CU-CP triggers BC Bearer Context Modification Request towards the gNB-CU-UP to provide the F1-U GTP DL TEID information.\n9.\tThe gNB-DU configures broadcast resources and provides broadcast configuration information to the UEs by means of MCCH.\n10.\tThe gNB-CU CP successfully terminates the NGAP broadcast Session Setup procedure. In case the gNB has chosen NG-U unicast transport, NG-U GTP DL TEID information is provided to the 5GC.\n11.\tThe broadcast MBS media stream is provided to the UEs.\nOn NG-U, in case of location dependent broadcast MBS Sessions, multiple shared NG-U transport tunnels may need to be setup, one per Area Session ID served by the gNB.\nIn case of shared NG-U termination,\n-\tthe gNB-CU-UP may provide the gNB-CU-CP at E1 setup or configuration update about established shared NG-U terminations, indicated by one or several MBS Session IDs.\n-\tat establishment of the BC bearer context in the gNB-CU-UP, the gNB-CU-CP may request the gNB-CU-UP to either apply the available MRB configuration of the shared NG-U termination, or to apply the MRB configuration requested by the gNB-CU-CP. The gNB-CU-UP provides the MRB configuration to the gNB-CU-CP if the MRB configuration requested by the gNB-CU-CP and the available MRB configuration of the shared NG-U termination are different.\nFigure 8.15.1.2-1 illustrates an exemplified interaction of NGAP, E1AP, F1AP and RRC protocol functions for Multicast MBS Session Context Establishment with a UE joining an active multicast session as the first UE joining in its serving gNB.\nThe figure depicts a session context establishment in a 15.1.2-1 multicast MBS (Multiplex Broadcast Service) scenario. The figure illustrates the process of establishing a session context, which is crucial for efficient communication in multicast MBS networks. The session context is a key component in the session establishment process, ensuring that the session is properly established and can be used for communication. The figure shows the various components involved in the session context establishment, such as the session identifier, session identifier, and session identifier. The figure also shows the session identifier being sent to the MBS, which is used to establish the session context. The figure is important for understanding the session context establishment process in multicast MBS networks and ensuring that the session is properly established for efficient communication.\nFigure 8.15.1.2-1: Multicast MBS Session Context establishment\n0.\tFor a certain multicast MBS session (TMGI), which is currently active, no multicast MBS session context is yet established in the gNB.\n1.\tThe UE joins the multicast session.\nNOTE 1:\tNAS related details for PDU Session signalling are not shown in Figure 8.15.1.2-1.\n2/3. The gNB-CU-CP establishes the multicast bearer context at the gNB-CU-UP. For unicast NG-U transport the GTP DL TEID is retrieved.\n4/5. The gNB-CU CP triggers the NGAP Distribution Setup procedure. For unicast NG-U transport, DL GTP TEID is provided to the 5GC. For multicast NG-U transport, multicast address information is retrieved from the 5GC. Multicast session QoS parameters are provided by the 5GC.\n5a/5b. The gNB-CU-CP triggers the setup of MRB resources via the E1AP MC Bearer Context Modification procedure. For multicast NG-U transport the 5GC shared NG-U multicast address information is provided to the gNB-CU-UP. Multicast session QoS parameters are provided to the gNB-CU-UP.\n6/7.\tThe gNB-CU-CP establishes the Multicast Context at the gNB-DU, providing MRB configuration. It may contain MBS Area Session ID information.\n8/9. The gNB-CU-CP retrieves the MRB configuration for the joined UE from the gNB-DU via F1 UE Context Management procedures.\nNOTE 2:\tThe interactions between the gNB-CU-CP and gNB-CU-UP for UE specific Berarer Context management before and after step 8/9 are not illustrated in this Figure.\n10.\tThe gNB-DU triggers the establishment of F1-U resources, which are established either per gNB-DU or per cell or per MBS Area Session ID.\n11/12. The gNB-CU-UP side of the F1-U is established by means of the E1AP MC Bearer Context Modification procedure, providing the gNB-DU side F1-U TNL to the gNB-CU-UP, which provides the gNB-CU-UP side F1-U TNL address in return.\n13.\tThe gNB-CU-UP side F1-U TNL address is provided to the gNB-DU.\n14.\tIn case of NG-U multicast transport, the gNB-CU-UP joins the NG-U multicast group.\n15.\tThe gNB successfully terminates the NGAP procedure for establishing the multicast session context.\n16.\tThe gNB-CU-CP RRC-configures each UE which has joined the multicast group.\n17.\tThe multicast MBS media stream is provided to the UEs.\nOn NG-U, in case of location dependent multicast MBS Sessions, multiple shared NG-U transport tunnels may need to be setup, one per Area Session ID served by the gNB.\nIn case of shared NG-U termination,\n-\tthe gNB-CU-UP may provide the gNB-CU-CP at E1 setup or configuration update about established shared NG-U terminations, indicated by one or several MBS Session IDs.\n-\tat establishment of the MC bearer context in the gNB-CU-UP, the gNB-CU- CP may request the gNB-CU-UP to either apply the available MRB configuration of the shared NG-U termination, or to apply the MRB configuration requested by the gNB-CU-CP. The gNB-CU-UP provides the MRB configuration to the gNB-CU-CP if the MRB configuration requested by the gNB-CU-CP and the available MRB configuration of the shared NG-U termination are different.\nThe figure depicts a multicast MRB type re-configuration with F1-U ptp retransmission tunnel establishment, illustrating the process of establishing a retransmission tunnel for multicast traffic. The diagram shows the steps involved in configuring the retransmission tunnel, including the establishment of the F1-U ptp protocol, the use of the retransmission tunnel, and the establishment of the retransmission tunnel. The figure provides a clear and concise visual representation of the process, making it easy to understand the steps involved in configuring a retransmission tunnel for multicast traffic.\nFigure 8.15.1.3-1: Multicast MRB type re-configuration with F1-U ptp retransmission tunnel establishment\n1.\tThe gNB-DU decides to change the MRB type configuration for a UE and provides the new configuration to the gNB-CU-CP along with a per-MRB MRB type reconfiguration indication and the MRB Reconfigured RLC mode.\n2.\tThe gNB-CU-CP confirms the modification request and indicates this to the gNB-DU. The gNB-CU-CP may request the gNB-DU to establish F1-U ptp retransmission resources in order for the UE to perform PDCP Status Report and receive retransmitted PDCP PDUs for the reconfigured MRBs.\n4. - 7.\tIf necessary, the gNB-DU requests the establishment of F1-U resources for ptp retransmission by means of triggering the F1AP Multicast Distribution Setup procedure, which in turn triggers the E1AP MC Bearer Context Modification procedure to exchange F1-U tunnel end-point addresses.\nNOTE:\tDepending on MRB bearer type reconfiguration the gNB-DU may also request to release some F1-U resources.\n8./9. The RRC Reconfiguration procedure is performed\n10.\tPDCP Status Report and PDCP PDU retransmission can take place via the established F1-U ptp retransmission resources.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "8.15.2\tMobility procedure for Multicast",
                            "text_content": "Figure 8.15.2.1-1 shows the inter-gNB-CU multicast mobility procedure between MBS Supporting nodes during an active multicast session.\nThe figure depicts a 15x2 matrix with 1x1 cells, representing the inter-gNB-C U mobility for multicast. The matrix shows the mobility of the gNB-C U in relation to the other gNB-C Us, highlighting the importance of inter-gNB-C U mobility for multicast traffic.\nFigure 8.15.2.1-1: Inter-gNB-CU Mobility for Multicast\n1.\tThe Source gNB-CU-CP sends MC BEARER CONTEXT MODIFICATION REQUEST message towards the Source gNB-CU-UP, to request the last delivered MRB Progress of an MBS Session related to a Multicast F1-U Context Reference E1.\n2.\tThe Source gNB-CU-UP responds to the gNB-CU-CP in the MC BEARER CONTEXT MODIFICATION RESPONSE message, providing the last delievered MRB Progress.\n3.\tThe source gNB-CU-CP sends the HANDOVER REQUEST message to the target gNB-CU-CP with the last delievered MRB progress for the Multicast sessions the UE has joined.\n4.\tIn case the Multicast session which the UE has joined was not established in the target cell, the target gNB-CU-CP triggers the Multicast MBS Session Context Establishment procedure as defined in section 8.15.1.2.\n5.\tThe target gNB-CU-CP triggers MC BEARER CONTET SETUP REQUEST message towards the target gNB-CU-UP.\n6.\tThe target gNB-CU-UP responds to the target gNB-CU-CP by sending the MC BEARER CONTET SETUP RESPONSE message.\n7.\tThe target gNB-CU-CP sends UE CONTEXT SETUP REQUEST towards the target gNB-DU. If the target gNB-CU-CP has decided to request a PTP Forwarding tunnel, the message contains the PTP Forwarding Tunnel Required indication and the last delivered MRB Progress for the MRBs requested to be configured.\n8.\tThe target gNB-DU sends UE CONTEXT SETUP RESPONSE towards the target gNB-CU-CP.\n9.\tIf a PTP Forwarding Tunnel was requested in step 7, the target gNB-DU shall, if supported, trigger the F1-U tunnel establishment via MULTICAST DISTRIBUTION SETUP REQUEST, including the F1-U DL UP TNL information and the last delievered MRB Progress for the each of the MRB.\n10.\tThe target gNB-CU-CP sends the MC BEARER CONTEXT MODIFICATION REQUEST towards the target gNB-CU-UP, including for each MRB a request for the oldest availiable MRB Progress information, the last delivered MRB Progress, and the F1-U DL UP TNL information.\n11.\tBased on the information received in step 10, the target gNB-CU-UP determines whether the Xn-U data forwarding is needed or not, and in case it is needed, provide for each MRB the oldest available MRB Progress and the assigned XN-U DL Forwarding UP TNL Info to the target gNB-CU-CP in the MC BEARER CONTEXT MODIFICATION RESPONSE message.\n12.\tIn case step 9 was triggerred, the target gNB-CU-CP sends the MULTICAST DISTRIBUTION SETUP RESPONSE to the target gNB-DU.\n13.\tThe target gNB-CU-CP sends HANDOVER REQUEST ACKNOWLEDGE to the source gNB-CU-CP, including the XN-U DL Forwarding UP TNL Info and the oldest available MRB Progress for each MRB.\n14.\tThe source gNB-CU-CP forwards the XN-U DL Forwarding UP TNL Info and the oldest available MRB Progress for each MRB to the source gNB-CU-UP via MC BEARER CONTEXT MODIFICATION REQUEST message.\n15.\tThe source gNB-CU-UP sends the MC BEARER CONTEXT MODIFICATION RESPONSE message to the source gNB-CU-CP.\n16.\tThe source gNB-CU-UP starts to forward MBS data towards the target gNB-CU-UP.\nNOTE: step 16 may happen before or after or in parallel with step 15.\n17.\tIf a PTP Forwarding Tunnel was established, the target gNB-CU-UP sends the forwarding data to the target gNB-DU.\n",
                            "figures_meta_data": [],
                            "tables": []
                        }
                    ]
                },
                {
                    "title": "8.16\tOverall procedures for CPAC",
                    "description": "",
                    "summary": "",
                    "text_content": "The following clauses describe the overall procedures for CPAC involving E1 and F1.\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": [
                        {
                            "title": "8.16.1\tMN initiated Conditional PSCell Addition",
                            "text_content": "The procedure for MN initiated Conditional PSCell Addition (CPA) is shown in Figure 8.16-1.\nThe figure depicts a conditional secondary node addition procedure, which is a crucial step in the network's configuration. The figure shows a series of nodes, each labeled with a number and a condition, indicating the node's role in the network. The addition of a secondary node is a critical step in ensuring network reliability and fault tolerance. The figure provides a visual representation of the process, making it easier to understand and follow.\nFigure 8.16.1-1 Conditional Secondary Node Addition procedure\n1-12. The steps 1-12 are as defined in TS 37.340 [12].\na1-a5. The steps a1-a5 are as defined in clause 8.9.2 and with conditional indications.\na6. After Random Access procedure successfully performed at the candidate gNB-DU which becomes the target SN gNB-DU, the target gNB-DU sends a Downlink Data Delivery Status frame to inform the target gNB-CU-UP. The target gNB-DU also sends an ACCESS SUCCESS message to inform the target gNB-CU-CP of which cell the UE has successfully accessed.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "8.16.2\tMN initiated conditional SN Change",
                            "text_content": "The procedure for MN initiated conditional SN Change refer to TS 37.340[12]. In case of split gNB architecture, the procedures between gNB-CU and gNB-DU and the procedures between gNB-CU-CP and gNB-CU-UP refer to 8.16.1.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "8.16.3\tSN initiated conditional inter-SN Change",
                            "text_content": "The procedure for SN initiated conditional SN Change refer to TS 37.340[12]. In case of split gNB architecture, the procedures between gNB-CU and gNB-DU and the procedures between gNB-CU-CP and gNB-CU-UP refer to 8.16.1.\n",
                            "figures_meta_data": [],
                            "tables": []
                        }
                    ]
                },
                {
                    "title": "8.17\tIAB Inter-CU Topology Management",
                    "description": "",
                    "summary": "",
                    "text_content": "",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": [
                        {
                            "title": "8.17.1\tIAB Inter-donor-DU Re-routing",
                            "text_content": "When an IAB-donor-DU is configured to support inter-donor-DU re-routing, the IAB-donor-DU may identify a re-routed UL IP packet based on the source IP address field of the UL packet, and forwards UL IP packets, whose source IP addresses are anchored at a peer IAB-donor-DU, to this peer IAB-donor-DU via a tunnel. The IAB-donor-DU and the peer IAB-donor-DU may be controlled by the same IAB-donor-CU or by two different IAB-donor-CUs. The inter-donor-DU tunnel may be a GTP-U tunnel. The configuration of the tunnel is up to implementation. At the IAB-donor-DU forwarding the UL IP packets, inter-donor-DU tunnelling may be restricted to only a subset of the IP addresses anchored at the peer IAB-donor-DU. For this purpose, the IAB-donor-CU configures the IAB-donor-DU for forwarding the UL IP packets with a list of TNL addresses and/or prefixes for which tunnelling should be permitted and TNL address filtering should be exempted.\nNOTE:\tTunnel types other than GTP-U may be used for the inter-donor-DU tunnel, by implementation.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "8.17.2\tIAB Inter-CU Topology Redundancy",
                            "text_content": "The inter-CU topological redundancy procedure enables the establishment, modification and release of redundant paths in IAB-topologies underneath different IAB-donor-CUs. Since topological redundancy uses NR-DC for the IAB-MT, it is only supported for IAB-nodes operating in the SA mode.\nFigure 8.17.2.1-1 shows an example of the inter-CU topological redundancy procedure, where a second backhaul path is established for a dual-connecting IAB-node via a separate IAB-topology that is not controlled by the F1-terminating IAB-donor-CU. The dual-connecting IAB-DU retains the F1 connection with the F1-terminating IAB-donor-CU. Since the dual-connecting IAB-MT also maintains an RRC connection with the non-F1-terminating IAB-donor-CU, this procedure renders the dual-connecting IAB-node as a boundary IAB-node.\nThe figure depicts a network topology with inter-CU redundancy procedures, illustrating the importance of redundancy in ensuring network reliability.\nFigure 8.17.2.1-1 IAB inter-CU topology redundancy procedure\n1. \tThe NR-DC establishment procedure is performed for the IAB-MT of the dual-connecting IAB-node as described in TS 37.340 [12], clause 10.2. This procedure can be conducted before or after establishment of the F1 interface between the IAB-DU and an IAB-donor-CU.\n2. \tThe F1-terminating IAB-donor-CU sends an IAB TRANSPORT MIGRATION MANAGEMENT REQUEST message to the non-F1-terminating IAB-donor-CU to provide the context of the traffic to be offloaded.\n3. \tThe non-F1-terminating IAB-donor-CU sends a DL RRC MESSAGE TRANSFER message to the second parent IAB-DU, which includes an RRCReconfiguration message for the dual-connecting IAB-MT. The RRC configuration includes a BAP address for the boundary node, pertaining to the non-F1-terminating IAB-donor-CU’s topology. The RRC configuration may include new TNL address(es) for the dual-connecting IAB-node, anchored at the second-path, i.e., at the IAB-donor-DU under the non-F1-terminating IAB-donor-CU. In case IPsec tunnel mode is used to protect the F1 and non-F1 traffic, the new TNL address refers to the outer IP address.\n4.\tThe second parent IAB-DU forwards the received RRCReconfiguration message to the dual-connecting IAB-MT.\n5.\tThe dual-connecting IAB-MT responds to the second parent IAB-DU with an RRCReconfigurationComplete message.\n6. \tThe second parent IAB-DU sends an UL RRC MESSAGE TRANSFER message to the non-F1-terminating IAB-donor-CU, to convey the received RRCReconfigurationComplete message.\n7. \tThe non-F1-terminating IAB-donor-CU may configure or modify BH RLC channels and BAP-sublayer routing entries on the second path between the dual-connecting IAB-node and the second-path IAB-donor-DU, as well as DL mappings on the second-path IAB-donor-DU for the dual-connecting IAB-node’s second path. The DL mappings may be based on the TNL address(es) allocated to the dual-connecting IAB-node in step 3. These configurations may support the transport of UP and non-UP traffic on the second path.\n8. \tThe non-F1-terminating IAB-donor-CU responds with an IAB TRANSPORT MIGRATION MANAGEMENT RESPONSE message to the F1-terminating IAB-donor-CU, to provide the mapping information for the traffic to be offloaded as indicated in step 2. The message includes the L2 info necessary to configure the dual-connecting IAB-node with the UL mappings for this traffic. The message includes the DSCP/IPv6 Flow Label values to be used for the DL traffic to be offloaded.\n9. \tThe F1-terminating IAB-donor-CU updates the boundary node with the UL BH information received from the non-F1-terminating IAB-donor-CU in Step 8 for the traffic to be offloaded. This step may also update UL FTEID and DL FTEID associated with individual GTP-tunnel(s). The affected GTP tunnel(s) will be switched to use the dual-connecting IAB-node’s new TNL address(es). This step may use non-UE associated signaling in E1 and/or F1 interface to provide updated UP configuration for F1-U tunnels of multiple connected UEs or child IAB-MTs. Implementation must ensure the avoidance of potential race conditions, i.e., that no conflicting configurations are concurrently performed using UE-associated and non-UE-associated procedures.\nThe F1-terminating IAB-donor-CU may also provide UL BH information associated with non-UP traffic. New TNL addresses for F1-C traffic configured in step 3, if any, can be added to the dual-connecting IAB-DU’s F1-C association(s) with the F1-terminating IAB-donor-CU.\nIf new TNL addresses for F1-C traffic are configured, new SCTP association(s) between the dual-connecting IAB-node and the F1-terminating IAB-donor-CU may be established using the new TNL address information of the dual-connecting IAB-node. The dual-connecting IAB-node sends an F1AP gNB-DU CONFIGURATION UPDATE message to the F1-terminating IAB-donor-CU, which may include new (outer) IP addresses and corresponding new (inner) IP address for offloaded F1-U traffic.\nNOTE:\tThe IP address selected by the boundary IAB-node for a traffic needs to be anchored at the IAB-donor-DU whose BAP address is contained in the BAP routing ID of the UL mapping for this traffic, and configured by the IAB-donor (MN/SN) of the egress topology of the traffic.\n10.\tThe F1-terminating IAB-donor-CU sends an IAB TRANSPORT MIGRATION MANAGEMENT REQUEST message to the non-F1-terminating IAB-donor-CU, to modify the context of the dual-connecting IAB-node’s offloaded traffic. The message may include the DL TNL address information used for the offloaded traffic and reported by the boundary node in step 9. The non-F1-terminating IAB-donor-CU may use this information to configure DL mappings on the second-path IAB-donor-DU.\n11. The non-F1-terminating IAB-donor-CU responds with an IAB TRANSPORT MIGRATION MANAGEMENT RESPONSE message to the F1-terminating IAB-donor-CU.\n12. The steps above, may be repeated, except step 1, if needed, for the F1-terminating IAB-donor-CU to request addition, modification, or release of the offloaded traffic. The non-F1-terminating IAB-donor-CU can fully or partially reject the addition or modification requested by the F1-terminating IAB-donor-CU.\nThe non-F1-terminating IAB-donor-CU may request the modification of the L2 transport for the offloaded traffic in the non-F1-terminating IAB-donor-CU’s topology using the IAB TRANSPORT MIGRATION MODIFICATION REQUEST message. The F1-terminating IAB-donor-CU reconfigures UL BH mappings accordingly and acknowledges the modification via the IAB TRANSPORT MIGRATION MODIFICATION RESPONSE message. The non-F1-terminating IAB-donor-CU may further reconfigure the TNL addresses of the dual-connecting IAB-node via RRC.\nThe traffic offload for descendant nodes follows the same procedure as defined for the partial migration in clause 8.17.3.2.\nThe F1-terminating IAB-donor-CU may request full or partial release of the offloaded traffic from the non-F1-terminating IAB-donor-CU by initiating the IAB Transport Migration Management procedure towards the non-F1-terminating IAB-donor-CU (e.g., for the purpose of revoking, or in case UE bearers are released).\nThe traffic offload for the dual-connecting IAB-node and the descendent nodes can be partially or fully revoked, resulting in the return of the offloaded traffic back to the F1-terminating IAB-donor-CU’s topology. Full or partial traffic revoking can be initiated by the F1-terminating IAB-donor-CU by initiating the IAB Transport Migration Management procedure towards the non-F1-terminating IAB-donor-CU. The non-F1-terminating IAB-donor-CU can request partial or full revoking of traffic offload from the F1-terminating IAB-donor-CU by initiating the IAB Transport Migration Modification procedure towards the F1-terminating IAB-donor-CU.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "8.17.3\tIAB Inter-CU Topology Adaptation",
                            "text_content": "During the inter-CU topology adaptation for a single-connected IAB-node, the IAB-MT migrates from an old parent node to a new parent node, where the old and the new parent nodes are served by different IAB-donor-CUs. Without loss of generality, the old parent node is referred to as source parent node, and the new parent node is referred to as target parent node.\nFigure 8.17.3.1-1 shows an example of the topology adaptation procedure, where the IAB-MT is migrated from a source IAB-donor-CU to a target IAB-donor-CU. In this procedure, the migrating IAB-node becomes a boundary IAB-node since its IAB-DU retains F1AP with the source IAB-donor-CU while its IAB-MT obtains RRC connectivity with the target IAB-donor-CU.\nThe figure depicts the inter-CU topology adaptation procedure in the IAB (Inter-CU Architecture) network. It illustrates the steps taken to adapt the network's topology to accommodate changes in the CU (Customer Unit) network. The figure shows the various components involved in the adaptation process, such as the CU, IAB, and the network's control plane. The adaptation procedure is crucial for ensuring the network's reliability and performance.\nFigure 8.17.3.1-1: IAB inter-CU topology adaptation procedure\n1.\tThe source IAB-donor-CU sends an Xn HANDOVER REQUEST message to the target IAB-donor-CU . This message may include the migrating IAB-node’s TNL address information in the RRC container.\n2.\tThe target IAB-donor-CU sends a UE CONTEXT SETUP REQUEST message to the target parent node IAB-DU, to create the UE context for the migrating IAB-MT and to set up the bearers, which the migrating IAB-MT uses for its signaling, and, optionally, data traffic.\n3.\tThe target parent node IAB-DU responds to the target IAB-donor-CU with a UE CONTEXT SETUP RESPONSE message.\n4.\tThe target IAB-donor-CU performs admission control and provides the new RRC configuration as part of the HANDOVER REQUEST ACKNOWLEDGE message. The RRC configuration includes a BAP address for the boundary node in the target IAB-donor-CU’s topology, a default BH RLC channel and a default BAP routing ID configuration for UL F1-C/non-F1 traffic mapping on the target path. The RRC configuration may include the new TNL address(es) anchored at the target IAB-donor-DU for the migrating node.\n5.\tThe source IAB-donor-CU sends a UE CONTEXT MODIFICATION REQUEST message to the source parent node IAB-DU, which includes the received RRCReconfiguration message from the target IAB-donor-CU.\n6.\tThe source parent node IAB-DU forwards the received RRCReconfiguration message to the migrating IAB-MT.\n7.\tThe source parent node IAB-DU responds to the source IAB-donor-CU with the UE CONTEXT MODIFICATION RESPONSE message.\n8.\tThe migrating IAB-MT performs a random access procedure at the target parent node IAB-DU.\n9.\tThe migrating IAB-MT responds to the target parent node IAB-DU with an RRCReconfigurationComplete message.\n10.\tThe target parent node IAB-DU sends an UL RRC MESSAGE TRANSFER message to the target IAB-donor-CU, to convey the received RRCReconfigurationComplete message.\n11.\tThe target IAB-donor-CU triggers the path switch procedure for the migrating IAB-MT, if needed.\n12.\tThe target IAB-donor-CU sends UE CONTEXT RELEASE message to the source IAB-donor-CU.\nNOTE:\tThe XnAP UE IDs of the migrating node are retained at target and source IAB-donor-CU as long as the target path is used for transport of traffic between the migrating node and the source IAB-donor-CU.\n13.\tThe source IAB-donor-CU may release BH RLC channels and BAP-sublayer routing entries on the source path between source parent IAB-node of the migrating IAB-node and the source IAB-donor-DU.\n14.\tThe target IAB-donor-CU configures BH RLC channels and BAP-sublayer routing entries on the target path between the migrating IAB-node and target IAB-donor-DU, as well as DL mappings on the target IAB-donor-DU for the migrating IAB-node’s target path. These configurations support the transport of F1-C traffic on the target path.\n15.\tThe F1-C connection between the migrating IAB-node and the source IAB-donor-CU are switched to the target path using the new TNL address information of the migrating IAB-node. The migrating IAB-node may report the new TNL address information it wants to use for F1-U traffic to the source IAB-donor-CU, via the gNB-DU CONFIGURATION UPDATE message.\nIn case IPsec tunnel mode is used for TNL protection, the migrating IAB-node may use MOBIKE (IETF RFC 4555 [29]) to migrate the IPsec tunnel to the new IP outer addresses. After the completion of the MOBIKE procedure, the migrating IAB-DU initiates an F1AP gNB-DU Configuration Update procedure from which the IAB-donor-CU can conclude whether the existing inner IP address(es) (e.g., for SCTP association) and the DL F-TEID can be reused.\nIf new TNL addresses for F1-C traffic are configured, new SCTP association(s) between the migrating IAB-node and the F1-terminating IAB-donor-CU may be established using the new TNL address information of the migrating IAB-node. The migrating IAB-node sends an F1AP gNB-DU CONFIGURATION UPDATE message to the F1-terminating IAB-donor-CU, which may include new (outer) IP addresses and corresponding new (inner) IP address for the F1-U traffic to be switched to the target path.\n16.\tThe source IAB-donor-CU sends an IAB TRANSPORT MIGRATION MANAGEMENT REQUEST message to the target IAB-donor-CU, to provide the context of the traffic to be offloaded. The message may include the new DL TNL address information necessary for the target IAB-donor-CU to configure or modify DL mappings on the target IAB-donor-DU.\n17.\tThe target IAB-donor-CU may configure or modify BH RLC channels and BAP-sublayer routing entries on the target path between the migrating IAB-node and target IAB-donor-DU, as well as DL mappings on the target IAB-donor-DU for the migrating IAB-node’s target path. These configurations may support the transport of UP and non-UP traffic on the target path.\n18.\tThe target IAB-donor-CU responds to the source IAB-donor-CU with an IAB Transport Migration Management Response message, to provide the mapping information for the traffic to be offloaded. The message includes the L2 info that is used in the target IAB-donor-CU’s topology and necessary to configure the migrating IAB-node with the UL mappings of traffic indicated in step 16. The message includes the DSCP/IPv6 Flow Label values used to configure the DL mappings of traffic indicated in step 16.\n19.\tThe F1-U connections of the migrating IAB-node with the source IAB-donor-CU are switched to use the migrating IAB-node’s new TNL address(es). The source IAB-donor-CU provides to the IAB-DU of the migrating IAB-node the updated UL BH information for the traffic indicated in step 16, based on the UL BH information received from the target IAB-donor-CU in step 18. The source IAB-donor-CU may also update the UL BH information associated with non-UP traffic. This step may use UE associated signaling or non-UE associated signaling in E1 and/or F1 interface. Implementation must ensure the avoidance of potential race conditions, i.e., that no conflicting configurations are concurrently performed using UE-associated and non-UE-associated procedures.\n20.\tThe steps 16 to 19 may be repeated, if needed, where the source IAB-donor-CU can request the offload of further traffic, or the modification or release of offloaded traffic. The target IAB-donor-CU can fully or partially reject addition or modification requests by the source IAB-donor-CU.\nThe target IAB-donor-CU may request the modification of the L2 transport for the offloaded traffic in the target IAB-donor-CU’s topology using the IAB TRANSPORT MIGRATION MODIFICATION REQUEST message. The source IAB-donor-CU reconfigures the UL BH mappings accordingly, and acknowledges the modification via the IAB TRANSPORT MIGRATION MODIFICATION RESPONSE message. The target IAB-donor-CU may further reconfigure the TNL addresses of the migrating IAB-node via RRC.\nThe traffic offload through the inter-CU topology adaptation procedure for the migrating IAB-node can be fully revoked.\n\nThe non-F1-terminating IAB-donor-CU can initiate the full revoking of traffic offload by executing the XnAP Handover Preparation procedure for the migrating IAB-MT. After the migrating IAB-MT is handed over in reverse direction, i.e., from the non-F1-terminating IAB-donor-CU to the F1-terminating IAB-donor-CU, the traffic of the migrating IAB-node’s IAB-DU is routed again along the former source path.\nThe F1-terminating IAB-donor-CU can initiate the full revoking of traffic offload by requesting the release of all offloaded traffic from the non-F1-terminating IAB-donor-CU by sending the IAB TRANSPORT MIGRATION MANAGEMENT REQUEST to the non-F1-terminating IAB-donor-CU. This message may trigger the XnAP Handover Preparation procedure for the migrating IAB-MT towards the F1-terminating IAB-donor-CU.\nThe F1-terminating IAB-donor-CU may request full or partial release of the offloaded traffic from the non-F1-terminating IAB-donor-CU via the IAB TRANSPORT MIGRATION MANAGEMENT REQUEST message.\nFigure 8.17.3.2-1 shows an example of the topology adaptation procedure where the migrating IAB-MT is migrated from a source IAB-donor-CU to a target IAB-donor-CU, and where the migrating IAB-node has a descendant IAB-node which retains both its RRC connection and F1 connection with the source IAB-donor-CU.\nThe figure depicts a complex inter-CU topology adaptation procedure within the IAB (Inter-CU Architecture) network, illustrating the hierarchical structure and the process of adapting the network to accommodate changes in the CU (Customer Unit) topology. The figure includes various elements such as IAB-nodes, descendant IAB-nodes, and the inter-CU adaptation procedure, which is crucial for maintaining the network's stability and performance.\nFigure 8.17.3.2-1: IAB inter-CU topology adaptation procedure with descendant IAB-node\n0. \tThe topology adaptation procedure of clause 8.17.3.1 is performed for the migrating IAB-node.\n1. \tThe source IAB-donor-CU sends an IAB TRANSPORT MIGRATION MANAGEMENT REQUEST message to the target IAB-donor-CU to provide the context of the descendant IAB-node’s traffic to be offloaded. The message may include a request for new TNL address(es) for the descendant IAB-node(s), anchored at a target IAB-donor-DU. The source IAB-donor-CU includes an identifier of the migrating IAB-node in the request message. This could be performed in parallel with step 0 after the source IAB-donor-CU receives HANDOVER REQUEST ACKNOWLEDGE message, e.g., the context of the traffic to be offloaded for the migrating/descendant nodes and IP address request information could be contained in the same IAB TRANSPORT MIGRATION MANAGEMENT REQUEST message.\n2. \tThe target IAB-donor-CU determines the target IAB-donor-DU, based on the identifier of the migrating IAB-node. The target IAB-donor-CU may configure or modify BH RLC channels and BAP-sublayer routing entries on the target path between the boundary IAB-node and target IAB-donor-DU, as well as DL mappings on the target IAB-donor-DU for the migrating IAB-node’s target path. These configurations may support the transport of UP and non-UP traffic on the target path.\n3. \tThe target IAB-donor-CU may obtain new TNL address(es) from the target IAB-donor-DU, based on the request for TNL address(es) received in step 1.\n4. \tThe target IAB-donor-CU responds with an IAB TRANSPORT MIGRATION MANAGEMENT RESPONSE message to the source IAB-donor-CU, to provide the mapping information for the traffic to be offloaded. The message includes the L2 info from the target IAB-donor-CU topology that is necessary to configure the migrating IAB-node with the BAP-sublayer routing, header-rewriting and BH RLC CH mapping entries of traffic indicated in step 1. The message includes the DSCP/IPv6 Flow Label values to be used for the DL traffic to be offloaded as indicated in step 1. The message may include the new TNL address(es) obtained in step 3, if any.\nNOTE 1: \tThe target IAB-donor-CU should select the same IAB-donor-DU in its IAB topology for all to-be-offloaded traffic, whose UL BH mappings received from the source IAB-donor-CU in step 1 share the same BAP address.\nNOTE 2:  The target IAB-donor-CU should provide the same Egress BAP Routing ID for all to-be-offloaded uplink traffic, whose UL BH mappings received from the source IAB-donor-CU in step 1 share the same Ingress BAP Routing ID.\n5. The source IAB-donor-CU configures the migrating IAB-node’s IAB-DU with the BAP-sublayer routing, header-rewriting and BH RLC CH mapping entries of the migrating IAB-node.\n6. The source IAB-donor-CU sends a DL RRC MESSAGE TRANSFER message to the descendant IAB-node’s parent IAB-DU, which includes an RRCReconfiguration message for the descendant IAB-MT. The RRC configuration may include the new TNL addresses received in step 4. If needed, the source IAB-donor-CU may also provide a new default UL mapping which includes a default BH RLC channel and a default BAP Routing ID on the target path, to the descendant nodes via RRCReconfiguration message.\n7. The descendant IAB-node’s parent IAB-DU forwards the received RRCReconfiguration message to the descendant IAB-MT.\n8. The descendant IAB-MT responds to the migrating IAB-node’s IAB-DU with an RRCReconfigurationComplete message.\n9. The migrating IAB-node’s IAB-DU sends an UL RRC MESSAGE TRANSFER message to the source IAB-donor-CU, to convey the received RRCReconfigurationComplete message.\n10. If needed, the source IAB-donor-CU configures UL BH mappings on the descendant node and BAP-sublayer routing entries between the descendant node and the migrating IAB-node. This step may be performed at an earlier stage, e.g., immediately after step 4.\n11. The F1-C connections and F1-U tunnels are switched to use the descendant IAB-node’s new TNL address(es), if any, as described in Steps 15 and 19 of the inter-CU topology adaptation procedure in clause 8.17.3.1.\nNOTE:\tThe IP address selected by the descendant IAB-node for an offloaded traffic needs to be anchored at the IAB-donor-DU whose BAP address is contained in the BAP routing ID of the UL mapping for this traffic, and obtained in step 7.\n12. The source IAB-donor-CU sends an IAB TRANSPORT MIGRATION MANAGEMENT REQUEST message to the target IAB-donor-CU, to modify the context of the descendant IAB-node’s offloaded traffic. The message may include the DL TNL address information received in step 11 that is necessary for the target IAB-donor-CU to configure or modify DL mappings on the target IAB-donor-DU.\n13. The target IAB-donor-CU responds with an IAB TRANSPORT MIGRATION MANAGEMENT RESPONSE message to the source IAB-donor-CU.\n14. The of steps above may be repeated, if needed, for the source IAB-donor-CU to request addition, modification or release of the offloaded traffic pertaining to the descendant IAB-node. The target IAB-donor-CU can fully or partially reject addition or modification requests by the source IAB-donor-CU.\nThe target IAB-donor-CU may trigger the modification of the L2 transport of the offloaded traffic in the target IAB-donor-CU’s topology using the IAB TRANSPORT MIGRATION MODIFICATION REQUEST message. Based on this message, the source IAB-donor-CU may reconfigure the UL BH mappings on the descendant nodes, the routing entries and BH RLC channel mappings on the migrating node and the descendant nodes, and the BAP header rewriting entries on the migrating node, and acknowledges the modification via the IAB TRANSPORT MIGRATION MODIFICATION RESPONSE message. The target IAB-donor-CU may further provide updated TNL address information for the descendant IAB-node to the source IAB-donor-CU.\nThe full or partial release or revoking of traffic offload pertaining to the descendant IAB-nodes and their served UEs follows the same procedure as defined for the partial migration in clause 8.17.3.1.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "8.17.4\tIAB Inter-CU Backhaul RLF recovery for single connected IAB-node",
                            "text_content": "The inter-CU backhaul RLF recovery procedure for IAB-nodes in SA mode enables recovery of an IAB-node to another parent node underneath a different IAB-donor-CU, when the IAB-MT of the IAB-node detects backhaul RLF.\nFigure 8.17.4-1 shows an example of the backhaul RLF recovery procedure for an IAB-node in SA mode. In this example, the IAB-node changes from its initial parent node to a new parent node, where the new parent node is served by a different IAB-donor-CU than that serving its initial parent node. In this procedure, the recovering IAB-node becomes a boundary IAB-node since the IAB-DU retains F1AP with the initial IAB-donor-CU while its IAB-MT obtains RRC connectivity with the new IAB-donor-CU.\nThe figure depicts a detailed diagram of the IAB inter-CU backhaul RLF recovery procedure for an IAB-node in SA mode. It illustrates the steps involved in recovering the RLF (Remote Loop Function) of the IAB-node in a scenario where the node is in a self-healing mode. The diagram includes various components such as the IAB-node, the IAB-node's RLF, the IAB-node's RLF recovery mechanism, and the IAB-node's self-healing mechanism. The figure provides a clear and concise representation of the recovery procedure, making it easy to understand and follow.\nFigure 8.17.4-1: IAB inter-CU backhaul RLF recovery procedure for an IAB-node in SA mode\n1.\tThe IAB-MT of the IAB-node detects backhaul RLF.\n2.\tThe IAB-MT attempts RLF recovery by performing Random Access towards a new parent IAB-DU.\n3.\tThe IAB-MT undergoing RLF recovery sends an RRCReestablishmentRequest message to the new parent IAB-DU.\n4.\tThe new parent IAB-DU sends an INITIAL UL RRC MESSAGE to the new IAB-donor-CU, to convey the received RRCReestablishmentRequest message.\n5.\tThe new IAB-donor-CU retrieves the UE Context for the IAB-MT undergoing recovery, through the XnAP Retrieve UE Context procedure. The initial IAB-donor-CU may include the TNL address information of the IAB-node undergoing recovery in the RRC container of the RETRIEVE UE CONTEXT RESPONSE message.\n6.\tThe new IAB-donor-CU sends a DL RRC MESSAGE TRANSFER message to the new parent IAB-DU, to convey the generated RRCReestablishment message.\n7.\tThe new parent IAB-DU sends an RRCReestablishment message to the IAB-MT undergoing recovery.\n8.\tThe IAB-MT undergoing recovery sends an RRCReestablishmentComplete message to the new parent IAB-DU.\n9.\tThe new parent IAB-DU sends an UL RRC MESSAGE TRANSFER message to the new IAB-donor-CU, to convey the received RRCReestablishmentComplete message.\n10. The new IAB-donor-CU triggers the UE Context Setup procedure toward the new parent IAB-DU, to create the UE context for the IAB-MT undergoing recovery and to set up one or more bearers. These bearers can be used by the IAB-MT undergoing recovery for its own signalling, and, optionally, data traffic.\n11. The new IAB-donor-CU triggers the path switch procedure for the IAB-MT undergoing recovery, if needed.\n12. The new IAB-donor-CU sends UE CONTEXT RELEASE message to the initial IAB-donor-CU.\nNOTE: \tThe XnAP UE IDs of the boundary IAB-MT are retained at initial IAB-donor-CU and new IAB-donor-CU as long as the recovery path is used for transport of traffic between the IAB-node undergoing recovery and the initial IAB-donor-CU.\n13.\tThe initial IAB-donor-CU may release the BH RLC channels and BAP-sublayer routing entries on the initial path between the initial parent IAB-node and the initial IAB-donor-DU.\n14. The new IAB-donor-CU sends a DL RRC MESSAGE TRANSFER message to the new parent IAB-DU, which includes an RRCReconfiguration message for the IAB-MT undergoing recovery. The RRC configuration may include new TNL addresses anchored at the new IAB-donor-DU. The RRC configuration may further include a BAP address for the recovery IAB-node in the new IAB-donor-CU’s topology, default BH RLC channel and a default BAP routing ID configuration for UL F1-C/non-F1 traffic mapping on the recovery path.\n15. The new parent IAB-DU forwards the received RRCReconfiguration message to the IAB-MT undergoing recovery.\n16. The IAB-MT undergoing recovery responds to the new parent IAB-DU with an RRCReconfigurationComplete message.\n17. The new parent IAB-DU sends an UL RRC MESSAGE TRANSFER message to the new IAB-donor-CU, to convey the received RRCReconfigurationComplete message.\n18. The remaining part of the procedure follows the steps 14-20 of the inter-CU topology adaptation procedure defined in clause 8.17.3.1.\nTraffic offload for descendant nodes follows the same procedure as that of clause 8.17.3.2.\nThe new IAB-donor-CU may request the modification of the L2 transport of the offloaded traffic in the new IAB-donor-CU’s topology. The new IAB-donor-CU may further reconfigure the TNL addresses of the boundary IAB-node via RRC.\nThe traffic offload due to inter-CU RLF recovery procedure for the boundary IAB-node  and its descendant IAB-nodes can be fully revoked. In this case, the boundary IAB-MT is handed over in reverse direction, i.e., from the new IAB-donor-CU to the initial IAB-donor-CU, and the traffic of the boundary IAB-DU and the descendant IAB-DUs is routed again along the initial path used prior to BH RLF recovery.\nThe new IAB-donor-CU can initiate the full revoking of traffic offload by executing the XnAP Handover Preparation procedure for the boundary IAB-MT towards the initial IAB-donor-CU.\nThe initial IAB-donor-CU can initiate the full revoking of traffic offload in the same manner as described in clause 8.17.3.1 for the revoking initiated by the F1-terminating IAB-donor-CU.\nThe initial IAB-donor-CU may request full or partial release of the offloaded traffic from the new IAB-donor-CU via the IAB TRANSPORT MIGRATION MANAGEMENT REQUEST message.\n",
                            "figures_meta_data": [],
                            "tables": []
                        }
                    ]
                },
                {
                    "title": "8.18\tOverall procedure for Small Data Transmission during RRC Inactive",
                    "description": "",
                    "summary": "",
                    "text_content": "",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": [
                        {
                            "title": "8.18.1\tRACH based SDT",
                            "text_content": "The procedure for RACH based small data transmission in RRC Inactive is shown in Figure 8.18.1-1.\nThe figure depicts a schematic representation of a 18.1-1 RACH (Remote Radio Head) based Small Data Transmission in the RRC (Radio Resource Control) Inactive state. The figure illustrates the RACH's role in managing radio resources, with a focus on small data transmission. The RACH is designed to manage radio resources in the RRC Inactive state, ensuring efficient use of radio resources and maintaining network stability.\nFigure 8.18.1-1: RACH based Small Data Transmission in RRC Inactive state.\n1.\tThe UE in RRC Inactive sends the RRCResumeRequest message together with UL SDT data and/or UL SDT signalling.\n2.\tThe gNB-DU buffers the UL SDT data and/or UL SDT signalling.\n3.\tThe step 3 is as defined in step 4 in clause 8.6.2, including an indication of SDT access. The gNB-DU may also provide SDT assistance information.\n4-5.\tIf UE context is successfully retrieved as specified in TS 38.300 [2], the steps 4-5 are as defined in steps 6-7 in clause 8.9.6.2. The UL SDT data, if any, is forwarded to the gNB-CU-UP, and the UL signalling, if any, is forwarded to the gNB-CU-CP via the UL RRC MESSAGE TRANSFER message, in which any UL NAS PDU is delivered to AMF.\nNOTE 1:\tIn case that full UE context is retrieved from another gNB-CU-CP as specified in TS 38.300 [2], the gNB-CU-CP first establishes the UE context in the gNB-CU-UP via the Bearer Context Setup procedure and F1-U UL TEIDs are retrieved before step 4. The BEARER CONTEXT SETUP REQUSET message may include an indication to suspend non-SDT bearers, and in this case, the BEARER CONTEXT MODIFICATION REQUEST message in step 6 does not include resume indication for SDT DRBs.\nNOTE 2:\tIn case that only partial UE context for SDT including F1-U UL TEIDs is retrieved from another gNB-CU-CP as specified in TS 38.300 [2], the gNB-CU-CP uses those F1-U UL TEIDs for steps 4-5, and the subsequent steps 6-7 are not executed. The F1-U DL TEIDs received from the gNB-DU in step 5 should be forwarded to the other gNB-CU-CP, to be used for transferring of the DL SDT data. In addition, the UL SDT data, if any, is forwarded from the gNB-DU to the gNB-CU-UP of the other gNB-CU-CP for which the partial context is retrieved, and the UL signalling, if any, is forwarded from the gNB-CU-CP to the other gNB-CU-CP (the last serving gNB-CU-CP) via the XnAP RRC TRANSFER message.\nNOTE 3:\tThe other gNB-CU-UP may need to buffer the UL SDT data if received before the SDT bearer(s) are resumed.\n6.\tThe gNB-CU-CP sends the BEARER CONTEXT MODIFICATION REQUEST message including an resume indication for SDT DRBs. The gNB-CU-CP also includes the F1-U DL TEIDs received from the gNB-DU in step 5.\n7.\tThe gNB-CU-UP responds with the BEARER CONTEXT MODIFICATION RESPONSE message.\nNOTE 4:\tvoid.\nUpon receiving the UE INACTIVITY NOTIFICATION message without SDT volume threshold crossed indication from the gNB-DU, the gNB-CU, if serving the UE and deciding to terminate the ongoing SDT procedure, shall transmit the UE CONTEXT RELEASE COMMAND message to the gNB-DU.\nIf CG-SDT is (re-)configured, the gNB-CU may request the gNB-DU to keep CG-SDT configuration and resources in the UE CONTEXT RELEASE COMMAND message.\nNOTE 5:\tUpon receiving BSR from the UE, in case that UL SDT data size in the BSR is larger than the threshold configured from the gNB-CU-CP, the gNB-DU sends the UE INACTIVITY NOTIFICATION message with the SDT volume threshold crossed indication to the gNB-CU-CP. Upon receiving such indication, the gNB-CU-CP may terminate the ongoing SDT procedure, by sending the RRCResume message to move the UE to RRC_CONNECTED, or by sending the RRCRelease message to move the UE to RRC_INACTIVE.\nUpon receiving non-SDT data, the gNB-CU-UP shall send the DL DATA NOTIFICATION message to the gNB-CU-CP. The gNB-CU-CP shall terminate the ongoing SDT procedure as specified in TS 38.300 [2].\nIf the amount of the received DL SDT data is above the data size threshold configured by the gNB-CU-CP, the gNB-CU-UP shall send the DL DATA NOTIFICATION message with the SDT data size threshold crossed indication. The gNB-CU-CP may terminate the ongoing SDT procedure.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "8.18.2\tCG based SDT",
                            "text_content": "The procedure for CG based small data transmission in RRC Inactive is shown in Figure 8.18.2-1.\nThe figure depicts a CG-based small data transmission in the RRC (Radio Resource Control) inactive state. The transmission is depicted in a 18.2-1 format, with the CG (Carrier Group) and the small data transmission in the RRC inactive state. The transmission is shown in a 18.2-1 format, with the CG and the small data transmission in the RRC inactive state.\nFigure 8.18.2-1: CG based Small Data Transmission in RRC Inactive state.\n1.\tThe gNB-CU decides to move UE into RRC_INACTIVE state.\n2.\tThe gNB-CU-CP decides to configure CG-SDT, it sends UE CONTEXT MODIFICATION REQUEST message including a query indication for CG-SDT related resource configuration associated with the information of SDT Radio Bearer(s).\n3.\tThe gNB-DU sends the UE CONTEXT MODIFICATION RESPONSE message including the CG-SDT related resource configurations for the requested SDT Radio Bearer(s) within the DU to CU RRC Information IE.\n4.\tThe gNB-CU-CP sends the BEARER CONTEXT MODIFICATION REQUEST towards the gNB-CU-UP, with the suspend indication.\n5.\tThe gNB-CU-UP sends the BEARER CONTEXT MODIFICATION RESPONSE towards the gNB-CU-CP.\n6.\tThe gNB-CU-CP sends the UE CONTEXT RELEASE COMMAND message to the gNB-DU including an RRCRelease message to the UE with the CG-SDT information within suspend configuration. The gNB-CU notifies the gNB-DU to keep the SDT RLC config, F1-U tunnels, F1AP UE association, and store the CG resource for SDT when the UE is entering RRC_INACTIVE state with an explicit CG-SDT kept indicator.\n7.\tThe gNB-DU sends the RRCRelease message to UE.\n8.\tThe gNB-DU sends UE CONTEXT RELEASE COMPLETE message. The gNB-DU keeps the SDT RLC config, F1-U tunnels, F1AP UE association, and stores the CG resource for SDT when the UE entering RRC_INACTIVE. The gNB-DU also stores the C-RNTI, CS-RNTI, and which bearers are CG-SDT bearers.\nAfter a period of time of the UE being in RRC_INACTIVE state.\n9.\tThe UE decides to perform CG based SDT procedure, it sends the RRCResumeRequest message together with UL SDT data/UL NAS PDU.\n10.\tThe gNB-DU sends the UL RRC MESSAGE TRANSFER message including the RRCResumeRequest message to indicate the access due to CG-SDT.\n11/12.\tIf UE context is successfully retrieved as specified in TS 38.300 [2], the gNB-CU-CP initiates the BEARER CONTEXT MODIFICATION procedure to resume SDT DRBs.\n13 – 13a. The gNB-DU sends the UL SDT data, if any, to the gNB-CU-UP, and/or sends the UL signalling, if any, to the gNB-CU-CP via the UL RRC MESSAGE TRANSFER message, in which any UL NAS PDU is delivered to AMF.\nNOTE 1:\tvoid.\nUpon receiving the UE INACTIVITY NOTIFICATION message without SDT volume threshold crossed indication from the gNB-DU and deciding to terminate the ongoing SDT procedure, the gNB-CU shall transmit the UE CONTEXT RELEASE COMMAND message to the gNB-DU.\nNOTE 2:\tUpon receiving BSR from the UE, in case that UL SDT data size in the BSR is larger than the threshold configured from the gNB-CU-CP, the gNB-DU sends the UE INACTIVITY NOTIFICATION message with the SDT volume threshold crossed indication to the gNB-CU-CP. Upon receiving such indication, the gNB-CU-CP may terminate the ongoing SDT procedure, by sending the RRCResume message to move the UE to RRC_CONNECTED, or by sending the RRCRelease message to move the UE to RRC_INACTIVE.\nIf CG-SDT is re-configured, the gNB-CU may request the gNB-DU to keep CG-SDT configuration and resources in the UE CONTEXT RELEASE COMMAND message.\nUpon receiving non-SDT data, the gNB-CU-UP shall send the DL DATA NOTIFICATION message to the gNB-CU-CP. The gNB-CU-CP shall terminate the ongoing SDT procedure as specified in TS 38.300 [2].\nIf the amount of the received DL SDT data is above the data size threshold configured by the gNB-CU-CP, the gNB-CU-UP shall send the DL DATA NOTIFICATION message with the SDT data size threshold crossed indication. The gNB-CU-CP may terminate the ongoing SDT procedure.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "8.18.3\tRA-SDT or non-SDT with CG-SDT configuration",
                            "text_content": "The procedure for the case where the UE has CG-SDT resource configurations but decides to perform RACH based small data transmission in RRC Inactive or to perform RACH procedure to transit to RRC Connected (see TS 38.321 [30] clause 5.27) is shown in Figure 8.18.3-1.\nThe figure depicts a schematic representation of a RA-SDT or non-SDT configuration, with CG-SDT (Coarse-Grained SDT) being highlighted. The diagram illustrates the various components and their connections, including the core switch, optical line terminal (OLT), and distributed nodes. The layered design aligns with SDN principles, emphasizing the importance of redundancy and failover in network architecture.\nFigure 8.18.3-1: RA-SDT or non-SDT with CG-SDT configuration.\n1.\tThe UE in RRC Inactive sends RRCResumeRequest message. If the UE decides to perform RACH based SDT procedure, it also sends UL SDT data and/or UL SDT signalling.\n2. The gNB-DU buffers the UL SDT data and/or UL SDT signalling.\n3. The gNB-DU sends the INITIAL UL RRC MESSAGE TRANSFER message to the gNB-CU-CP, including a new gNB-DU UE F1AP ID, and in case of RACH based SDT access, the gNB-DU provides an indication of SDT access and may also the SDT assistance information.\n4. If UE context is successfully retrieved as specified in TS 38.300 [2], the gNB-CU-CP sends the UE CONTEXT SETUP REQUEST message with the stored (or retrieved from the last serving gNB) F1 UL TEIDs and the new gNB-DU UE F1AP ID received in step 3.\nIn case that the gNB-DU is the one that sent the RRCRelease message with CG-SDT resource configurations to the UE, the gNB-CU-CP also includes the old gNB-DU UE F1AP ID and the old gNB-CU F1AP UE ID within the Old CG-SDT Session Info IE of the UE CONTEXT SETUP REQUEST message.\nIn case that the gNB-CU-CP is the one that generated the RRCRelease message with CG-SDT resource configurations but the gNB-DU is not the old gNB-DU that sent the RRCRelease message to the UE, the gNB-CU-CP initiates the UE Context Release procedure by sending the UE CONTEXT RELEASE COMMAND message to the old gNB-DU.\nIn case that the UE accesses a gNB other than the last serving gNB, upon receiving the RETRIEVE UE CONTEXT REQUEST message from the receiving gNB-CU-CP, the last serving gNB-CU-CP initiates the UE Context Release procedure by sending the UE CONTEXT RELEASE COMMAND message to the last serving gNB-DU.\n5. The gNB-DU sends the UE CONTEXT SETUP RESPONSE message with the new gNB-DU UE F1AP ID. In case the old gNB-DU UE F1AP ID is received within the Old CG-SDT Session Info IE in step 4, the gNB-DU retrieves the stored CG-SDT resource configurations and UE context based on the Old CG-SDT Session Info IE, if any, and associates them with the new gNB-DU F1AP UE ID.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "8.18.4\tMT-SDT",
                            "text_content": "The procedure for mobile terminated small data transmission in RRC Inactive is shown in Figure 8.18.4-1.\nThe figure depicts a mobile terminal (MT) in the RRC (Radio Resource Control) inactive state, illustrating the transmission of small data packets. The figure shows the terminal's status and the status of the RRC, which is critical for ensuring efficient communication.\nFigure 8.18.4-1: Mobile Terminated Small Data Transmission in RRC Inactive state.\n1. During the setup or modification of the bearer context as specified in 8.9.2, the gNB-CU-CP requests the gNB-CU-UP to provide MT-SDT information.\n2a-0.\tThe gNB-CU-UP receives DL data for the UE in RRC Inactive on NG-U interface.\n2a-1.\tThe gNB-CU-UP sends DL DATA NOTIFICATION message to the gNB-CU-CP. If determining that DL data packets are only mapped to SDT bearers, as requested in step 1, the gNB-CU-UP includes the MT-SDT information in the DL DATA NOTIFICATION message.\n2b. The gNB-CU-CP receives DL NAS signalling over NGAP.\n3.\tAfter 2a or 2b, the gNB-CU-CP sends PAGING message to the gNB-DU. The MT-SDT indication may be included in the PAGING message.\n4.\tThe gNB-DU sends the Paging message to the UE. In case the MT-SDT indication is received in step 3, the gNB-DU includes the MT-SDT indicator in the Paging message.\n5. If the UE has been successfully reached, it initiates the RRC connection resume procedure as described in 8.6.2 or 8.9.6.2, or initiates the SDT procedure as described from step 1 in 8.18.1 or from step 9 in 8.18.2 or from step 1 in 8.18.3 with the following difference:\n- In case SDT procedure is initiated, the UE may indicate MT-SDT in the RRCResumeRequest, which may be without UL data.\n",
                            "figures_meta_data": [],
                            "tables": []
                        }
                    ]
                },
                {
                    "title": "8.19\tOverall procedures for L2 UE-to-Network Relay",
                    "description": "",
                    "summary": "",
                    "text_content": "",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": [
                        {
                            "title": "8.19.1\tRemote UE initial access",
                            "text_content": "The signalling flow for Remote UE Initial access is shown in Figure 8.19.1-1.\n\nThe figure depicts a remote U E 1-1 initial access procedure, which is a crucial step in the network setup process. It illustrates the steps taken to establish a connection between the remote user equipment (UE) and the central access control system (AC). The figure includes a diagram of the access control system, the user equipment, and the network infrastructure, providing a clear visual representation of the process.\nFigure 8.19.1-1: Remote UE Initial Access procedure\n1.\tThe U2N Remote UE and the U2N Relay UE perform discovery procedure, and establish PC5 connection using NR ProSe procedure.\n2.\tThe U2N Remote UE sends an RRCSetupRequest message to the U2N Relay UE via PC5 Relay RLC Channel.\n3.\tThe U2N Relay UE withholds the received RRC message and sends the SidelinkUEInformationNR message to the gNB-DU. Before that, if the U2N Relay UE is in RRC_IDLE/RRC_INACTIVE state, it should trigger the RRC establishment/resume procedure to enter RRC_CONNECTED state and gNB may configure the U2N Relay UE with Uu Relay RLC channel(s) for relaying of U2N Remote UE’s SRB0/1.\n4.\tThe gNB-DU sends the UL RRC MESSAGE TRANSFER message of the U2N Relay UE by encapsulating the SidelinkUEInformationNR message to gNB-CU, and gNB-CU allocates the local ID of U2N Remote UE.\n5.\tThe gNB-CU sends the UE CONTEXT MODIFICATION REQUEST message of the U2N Relay UE to gNB-DU. Such message may request the establishment of Uu Relay RLC channel(s) for the transmission of U2N Remote UE’s SRB0/1 if not configured yet.\n6.\tThe gNB-DU sends the UE CONTEXT MODIFICATION RESPONSE message of the U2N Relay UE to gNB-CU.\n7.\tThe gNB-CU sends the DL RRC MESSAGE TRANSFER message of the U2N Relay UE to gNB-DU by encapsulating the RRCReconfiguration message, which contains the local ID allocated to the U2N Remote UE. The RRCReconfiguration message shall also contain the Uu Relay RLC channel(s) configuration if not configured and bearer mapping for relaying of U2N Remote UE’s SRB0/1.\n8.\tThe gNB-DU sends the RRCReconfiguration message to the U2N Relay UE to configure the local ID of the U2N Remote UE, the Uu Relay RLC channel(s) configuration and bearer mapping for relaying of U2N Remote UE’s SRB0/1.\n9.\tThe U2N Relay UE sends the RRCReconfigurationComplete message to gNB-DU.\n10.\tThe gNB-DU sends the UL RRC MESSAGE TRANSFER message of the U2N Relay UE by encapsulating the RRCReconfigurationComplete message to gNB-CU.\n11.\tAfter receiving the local ID of the U2N Remote UE and the Uu Relay RLC channel(s) configuration and bearer mapping for relaying of U2N Remote UE’s SRB0, the U2N Relay UE sends the RRCSetupRequest message of the U2N Remote UE to gNB-DU. The local ID of the U2N Remote UE and RB ID for SRB0 are conveyed in the SRAP header.\n12.\tThe gNB-DU allocates a C-RNTI and a gNB-DU UE F1AP ID for the U2N Remote UE and sends the INITIAL UL RRC MESSAGE TRANSFER message to gNB-CU by encapsulating the RRCSetupRequest message of the U2N Remote UE. In addition, the local ID of the U2N Remote UE , the gNB-DU UE F1AP ID of the U2N Relay UE and the sidelink configuration container for at least the PC5 Relay RLC channel configuration for relaying of U2N Remote UE’s SRB1 are included in the INITIAL UL RRC MESSAGE TRANSFER message.\n13.\tThe gNB-CU allocates a gNB-CU UE F1AP ID for the U2N Remote UE and generates a RRCSetup message towards the U2N Remote UE. The RRC message is encapsulated in the DL RRC MESSAGE TRANSFER message, and includes the configurations of PC5 Relay RLC channel and bearer mapping at least for the transmission of U2N Remote UE’s SRB1.\n14.\tThe gNB-DU sends the RRCSetup message to the U2N Remote UE via the U2N Relay UE.\n15.\tThe gNB-CU configures the U2N Relay UE with PC5 Relay RLC channel, Uu Relay RLC channel and bearer mapping for relaying of U2N Remote UE’s SRB1. According to the configuration from gNB-CU, the U2N Relay UE establishes a PC5 Relay RLC channel for relaying of U2N Remote UE’s SRB1 over PC5 and establishes a Uu Relay RLC channel for relaying of U2N Remote UE’s SRB1 towards gNB-DU if not configured yet.\nNOTE 1: This step may be performed earlier, e.g., via steps 5~8.\n16.\tThe U2N Remote UE sends the RRCSetupComplete message to the gNB-DU via the U2N Relay UE.\n17.\tThe gNB-DU encapsulates the RRC message in the UL RRC MESSAGE TRANSFER message and sends it to the gNB-CU.\n18.\tUpon receiving the RRCSetupComplete message of U2N Remote UE, the gNB-CU sends the INITIAL UE MESSAGE message to the AMF.\n19.\tThe AMF sends the INITIAL CONTEXT SETUP REQUEST message to the gNB-CU.\n20.\tThe gNB-CU sends the UE CONTEXT SETUP REQUEST message to establish the U2N Remote UE context in the gNB-DU. Such message may request the configuration of PC5 Relay RLC channels for the transmission of U2N Remote UE’s SRB2 and DRBs, and may also encapsulate the SecurityModeCommand message.\n21.\tThe gNB-DU sends the SecurityModeCommand message to the U2N Remote UE via U2N Relay UE.\n22.\tThe gNB-DU sends the UE CONTEXT SETUP RESPONSE message of the U2N Remote UE to the gNB-CU, which contains the configuration of PC5 Relay RLC channels for the transmission of U2N Remote UE’s SRB2 and DRBs.\n23.\tThe U2N Remote UE responds with the SecurityModeComplete message.\n24.\tThe gNB-DU encapsulates the RRC message in the UL RRC MESSAGE TRANSFER message and sends it to the gNB-CU.\n25.\tThe gNB-CU generates the RRCReconfiguration message for U2N Remote UE and encapsulates it in the DL RRC MESSAGE TRANSFER message. The RRCReconfiguration message contains the configuration of PC5 Relay RLC channels and bearer mapping for the transmission of U2N Remote UE’s SRB2 and DRBs.\n26.\tThe gNB-DU sends RRCReconfiguration message to the U2N Remote UE via the U2N Relay UE.\n27.\tThe U2N Remote UE sends RRCReconfigurationComplete message to the gNB-DU via the U2N Relay UE.\n28.\tThe gNB-DU encapsulates the RRC message in the UL RRC MESSAGE TRANSFER message and send it to the gNB-CU.\n29.\tThe gNB-CU sends the INITIAL CONTEXT SETUP RESPONSE message to the AMF.\n30.\tThe gNB-CU configures additional Uu Relay RLC channels between the gNB-DU and the U2N Relay UE, and additional PC5 Relay RLC channels for the U2N Relay UE for relaying of U2N Remote UE’s DRBs and SRBs. Also, such step may configure the bearer mapping between U2N Remote UE’s DRB/SRB and PC5/Uu Relay RLC channel at the U2N Relay UE.\nNOTE 2: This step may be performed earlier.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "8.19.2\tRemote UE RRC Reestablishment",
                            "text_content": "The signalling flow for Remote UE RRC Reestablishment is shown in Figure 8.19.2-1.\n\n\nThe figure depicts a remote U E RRC reestablishment procedure, illustrating the steps involved in restoring a remote U E RRC connection after a disruption. The diagram shows the various components and their connections, including the remote U E, the RRC, and the reestablishment procedure. The figure is essential for understanding the technical aspects of the reestablishment process and ensuring the proper functioning of the RRC.\nFigure 8.19.2-1: Remote UE RRC Reestablishment procedure\n1.\tThe U2N Remote UE and the U2N Relay UE perform discovery procedure, and establish PC5 connection using NR ProSe procedure. This step may be omitted if PC5 connection was established.\n2.\tThe U2N Remote UE sends an RRCReestablishmentRequest message to the U2N Relay UE via PC5 Relay RLC Channel.\n3~10.\tThe gNB-CU allocates the local ID of the U2N Remote UE if the U2N Relay UE does not have it. The details of those steps can be referred to clause 8.19.1.\n11.\tAfter receiving the local ID of the U2N Remote UE, the U2N Relay UE sends the RRCReestablishmentRequest message of the U2N Remote UE to gNB-DU.\n12.\tThe gNB-DU allocates a C-RNTI and a gNB-DU UE F1AP ID for the U2N Remote UE and sends the INITIAL      UL RRC MESSAGE TRANSFER message to gNB-CU by encapsulating the RRCReestablishmentRequest message of the U2N Remote UE. In addition, the local ID of the U2N Remote UE, the gNB-DU UE F1AP ID of the U2N Relay UE and the sidelink configuration container for at least the PC5 Relay RLC channel configuration for relaying of U2N Remote UE’s SRB1 are included in the INITIAL UL RRC MESSAGE TRANSFER message.\n13.\tThe gNB-CU configures the U2N Relay UE with PC5 Relay RLC channel, Uu Relay RLC channel and bearer mapping for relaying of U2N Remote UE’s SRB1. According to the configuration from gNB-CU, the U2N Relay UE establishes a PC5 Relay RLC channel for relaying of U2N Remote UE’s SRB1 over PC5 and establishes a Uu Relay RLC channel for relaying of U2N Remote UE’s SRB1 over Uu.\nNOTE 1: This step may be performed earlier, e.g., via steps 5~8.\n14~23.\tThe details of those steps can be referred to Steps 5~14 in clause 8.7. For L2 U2N relay, the RRC message(s) between the U2N Remote UE and the gNB-DU are relayed via the U2N Relay UE; Steps 18~19 may additionally perform the configurations of PC5 Relay RLC channel(s) for relaying of U2N Remote UE’s SRB1, SRB2 and DRBs.\n24.\tThe gNB-CU configures additional Uu Relay RLC channels between the gNB-DU and the U2N Relay UE, and additional PC5 Relay RLC channels for the U2N Relay UE for relaying of U2N Remote UE’s DRBs and SRBs. Also, such step may configure the bearer mapping between U2N Remote UE’s DRB/SRB and PC5/Uu Relay RLC channel at the U2N Relay UE.\nNOTE 2: This step may be performed earlier.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "8.19.3\tRemote UE RRC Inactive to other states",
                            "text_content": "The signalling flow for Remote UE from RRC Inactive to other states is shown in Figure 8.19.3-1.\n\nThe figure depicts a remote U E RRC (Remote Radio Resource Controller) resume procedure, which is a crucial step in managing radio resources in a network. The figure shows the various components involved in the procedure, such as the remote radio unit (RRU), the remote radio controller (RRC), and the remote radio resource (RR). The figure also includes a diagram of the network topology, showing the paths and connections between the different components. The figure is important for understanding the procedures and protocols involved in managing radio resources in a network.\nFigure 8.19.3-1: Remote UE RRC Resume procedure\n1.\tThe U2N Remote UE and the U2N Relay UE perform discovery procedure, and establish PC5 connection using NR ProSe procedure. This step may be omitted if PC5 connection was established.\n2.\tThe U2N Remote UE sends an RRCResumeRequest message to the U2N Relay UE via PC5 RLC Relay Channel.\n3~10.\tThe gNB-CU allocates the local ID of the U2N Remote UE if the U2N Relay UE does not have it. The details of those steps can be referred to clause 8.19.1.\n11.\tAfter receiving the local ID of the U2N Remote UE, the U2N Relay UE sends the RRCResumeRequest message of the U2N Remote UE to gNB-DU.\n12.\tThe gNB-DU allocates a C-RNTI and a gNB-DU UE F1AP ID for the U2N Remote UE and sends the INITIAL   UL RRC MESSAGE TRANSFER message to gNB-CU by encapsulating the RRCResumeRequest message of the U2N Remote UE. In addition, the local ID of the U2N Remote UE, the gNB-DU UE F1AP ID of the U2N Relay UE and the sidelink configuration container for at least the PC5 Relay RLC channel configuration for relaying of U2N Remote UE’s SRB1 are included in the INITIAL UL RRC MESSAGE TRANSFER message.\n13.\tThe gNB-CU configures the U2N Relay UE with PC5 Relay RLC channel, Uu Relay RLC channel and bearer mapping for relaying of U2N Remote UE’s SRB1. According to the configuration from gNB-CU, the U2N Relay UE establishes a PC5 Relay RLC channel for relaying of U2N Remote UE’s SRB1 over PC5 and establishes a Uu Relay RLC channel for relaying of U2N Remote UE’s SRB1 over Uu.\nNOTE 1: This step may be performed earlier, e.g., via steps 5~8.\n14~19.\tThe details of those steps can be referred to Steps 5~10 in clause 8.6.2. For L2 U2N relay, the RRC message(s) between the U2N Remote UE and the gNB-DU are relayed via the U2N Relay UE; Steps 14~15 may additionally perform the configurations of PC5 Relay RLC channel(s) for relaying of U2N Remote UE’s SRB2 and DRBs.\n20.\tThe gNB-CU establishes additional Uu Relay RLC channels between the gNB-DU and the U2N Relay UE, and additional PC5 Relay RLC channels for the U2N Relay UE for relaying of U2N Remote UE’s DRBs and SRBs. Also, such step may configure the bearer mapping between U2N Remote UE’s DRB/SRB and PC5/Uu Relay RLC channel at the U2N Relay UE.\nNOTE 2: This step may be performed earlier.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "8.19.4\tService Continuity for L2 U2N relay",
                            "text_content": "The signalling flow for U2N Remote UE switch from direct to indirect path with gNB-DU change is shown in Figure 8.19.4.1-1.\nThe figure depicts a U2N Remote UE Direct-to-indirect Path Switch with a gNB-DU change procedure, illustrating the steps involved in changing the path between the gNB and the UE. The diagram includes key components such as the gNB, UE, and path switches, as well as the switch's status indicators and the change procedure. The figure is used to demonstrate the functionality of the switch and its role in managing the path between the gNB and the UE.\nFigure 8.19.4.1-1: U2N Remote UE Direct-to-indirect Path Switch with gNB-DU change procedure\n1.\tThe Uu measurement configuration and measurement report signalling is performed between U2N Remote UE and gNB-CU to evaluate both relay link measurement and Uu link measurement. The U2N Remote UE may report one or multiple candidate U2N Relay UE(s) and Uu measurement results after it measures/discovers the candidate U2N Relay UE(s).\n2.\tThe gNB-CU decides to switch the U2N Remote UE to a target U2N Relay UE under a different gNB-DU (i.e., target gNB-DU).\n3.\tThe reconfiguration to target U2N Relay UE is performed among U2N Relay UE, the target gNB-DU and gNB-CU, if the U2N Relay UE is in RRC_CONNECTED state. The gNB-CU sends an RRCReconfiguration message to the target U2N Relay UE. If the target Relay UE is in RRC_IDLE/INACTIVE state, this step is skipped and the configuration to the target U2N Relay UE is performed in Step 10.\n4.\tgNB-CU sends the UE CONTEXT SETUP REQUEST message for the U2N Remote UE to the target gNB-DU, which contains the path switch configuration at least.\n5.\tgNB-DU responds with the UE CONTEXT SETUP RESPONSE message to gNB-CU.\n6.\tgNB-CU sends the UE CONTEXT MODIFICATION REQUEST message by including the RRCReconfiguration message to the source gNB-DU. The contents in the RRCReconfiguration message may include at least path switch configuration, PC5 Relay RLC channel configuration for relaying traffic, bearer mapping configuration and the associated radio bearer(s).\n7.\tThe source gNB-DU sends the RRCReconfiguration message to the U2N Remote UE. The U2N Remote UE stops UP and CP transmission over Uu after reception of RRCReconfiguration message from the gNB.\n8.\tThe source gNB-DU sends the UE CONTEXT MODIFICATION RESPONSE message to the gNB-CU.\n9.\tThe U2N Remote UE establishes PC5 connection with target U2N Relay UE.\n10.\tThe U2N Remote UE completes the path switch procedure by sending the RRCReconfigurationComplete message to the target gNB-DU via the target U2N Relay UE. In case the U2N relay UE is in RRC_IDLE/ INACTIVE state, when the U2N relay UE receives the RRCReconfigurationComplete message, the reception of the RRCReconfigurationComplete message will first trigger RRC setup/resume procedure for the U2N relay UE to enter RRC_CONNECTED state.\n11.\tThe target gNB-DU sends the UL RRC MESSAGE TRANSFER message to gNB-CU by including the RRCReconfigurationComplete message.\n12.\tThe gNB-CU sends an UE CONTEXT RELEASE COMMAND message to the source gNB-DU.\n13.\tThe source gNB-DU releases the UE context and responds the gNB-CU with an UE CONTEXT RELEASE COMPLETE message.\nThe signalling flow for U2N Remote UE switch from direct to indirect path without gNB-DU change is shown in Figure 8.19.4.2-1.\nThe figure depicts a remote U2N (Unicast to Unicast) Direct-to-Indirect Path Switch without gNB-DU change procedure, illustrating the steps involved in configuring and managing the switch. The diagram includes key components such as the switch, gNB-DU, and the switch's configuration interface, demonstrating the process of changing the switch's configuration.\nFigure 8.19.4.2-1: U2N Remote UE Direct-to-indirect Path Switch without gNB-DU change procedure\n1.\tThe Uu measurement configuration and measurement report signalling is performed between U2N Remote UE and gNB-CU to evaluate both relay link measurement and Uu link measurement. The U2N Remote UE may report one or multiple candidate U2N Relay UE(s) and Uu measurement results after it measures/discovers the candidate U2N Relay UE(s).\n2.\tThe gNB-CU decides to switch the U2N Remote UE to a target U2N Relay UE under the same gNB-DU.\n3.\tThe reconfiguration to target U2N Relay UE is performed among U2N Relay UE, gNB-DU and gNB-CU if U2N Relay UE is in RRC_CONNECTED state. The gNB-CU sends an RRCReconfiguration message to the target U2N Relay UE. If the target Relay UE is in RRC_IDLE/INACTIVE state, this step is skipped and the configuration to the target U2N Relay UE is performed in Step 9.\n4.\tgNB-CU sends the UE CONTEXT MODIFICATION REQUEST message for the U2N Remote UE to gNB-DU, which contains the path switch configuration at least. The F1-U packets of the U2N Remote UE can be continuously transmitted via previous tunnels if there is no tunnel update in this step.\n5.\tgNB-DU responds with the UE CONTEXT MODIFICATION RESPONSE message to gNB-CU.\n6.\tgNB-CU sends the DL RRC MESSAGE TRANSFER message by including the RRCReconfiguration message to gNB-DU. The contents in the RRCReconfiguration message may include at least path switch configuration, PC5 Relay RLC channel configuration for relaying traffic, bearer mapping configuration and the associated radio bearer(s).\n7.\tgNB-DU sends the RRCReconfiguration message to the U2N Remote UE. The U2N Remote UE stops UP and CP transmission over Uu after reception of RRCReconfiguration message from the gNB.\n8.\tThe U2N Remote UE establishes PC5 connection with target U2N Relay UE.\n9.\tThe U2N Remote UE completes the path switch procedure by sending the RRCReconfigurationComplete message to the gNB-DU via the target U2N Relay UE. In case the U2N Relay UE is in RRC_IDLE/INACTIVE state when receiving the RRCReconfigurationComplete message, the reception of the RRCReconfigurationComplete message will first trigger RRC setup/resume procedure for the U2N relay UE to enter RRC_CONNECTED state.\n10.\tThe gNB-DU sends the UL RRC MESSAGE TRANSFER message to gNB-CU by including the RRCReconfigurationComplete message.\nThe signalling flow for U2N Remote UE switch from direct to indirect path with gNB-CU change is shown in Figure 8.19.4.3-1.\nThe figure depicts a U2N Remote UE Direct-to-indirect Path Switch with gNB-CU change procedure, illustrating the step-by-step process for changing the configuration of the switch. The diagram includes key components such as the switch, gNB-CU, and the switch's interface, as well as the change procedure. The figure is used to demonstrate the technical aspects of the switch's configuration and change process.\nFigure 8.19.4.3-1. U2N Remote UE Direct-to-indirect Path Switch with gNB-CU change procedure\n1.\tThe Uu measurement configuration and measurement report signalling are performed between U2N Remote UE and source gNB-CU to evaluate both relay link measurement and Uu link measurement. The U2N Remote UE may report one or multiple candidate U2N Relay UE(s) and Uu measurement results after it measures/discovers the candidate U2N Relay UE(s).\n2.\tThe source gNB-CU decides to switch the U2N Remote UE to one of the candidate U2N Relay UE(s).\n3.\tThe source gNB-CU sends the HANDOVER REQUEST message to the target gNB-CU. The HANDOVER REQUEST message may include a list of candidate U2N Relay UE(s) of same cell of the target gNB.\n4.\tThe target gNB-CU decides to accept the indirect path switching to the target U2N Relay UE among the candidate U2N Relay UE(s).\n5.\tThe reconfiguration to target U2N Relay UE is performed among target U2N Relay UE, the target gNB-DU and target gNB-CU, if the target U2N Relay UE is in RRC_CONNECTED state. The target gNB-CU allocates the local ID for the U2N Remote UE. The target gNB-CU sends an RRCReconfiguration message to the target U2N Relay UE. If the target U2N Relay UE is in RRC_IDLE/INACTIVE state, this step is skipped and the configuration to the target U2N Relay UE is performed in Step 15.\n6.\tThe target gNB-CU sends the UE CONTEXT SETUP REQUEST message for the U2N Remote UE to the target gNB-DU, which contains the path switch configuration at least.\n7.\tThe target gNB-DU responds with the UE CONTEXT SETUP RESPONSE message to the target gNB-CU.\n8.\tThe target gNB-CU responds the source gNB-CU with an HANDOVER REQUEST ACKNOWLEDGE message by including the RRCReconfiguration message. The contents in the RRCReconfiguration message may include at least path switch configuration, PC5 Relay RLC channel configuration for relay traffic, bearer mapping and the associated radio bearer(s).\n9.\tThe source gNB-CU sends to the source gNB-DU the UE CONTEXT MODIFICATION REQUEST message to send the handover command to the U2N Remote UE, and to indicate to stop the data transmission for the U2N Remote UE.\n10.\tThe source gNB-DU sends the RRCReconfiguration message to the U2N Remote UE. The U2N Remote UE stops UP and CP transmission over Uu after reception of RRCReconfiguration message from the source gNB.\n11.\tThe source gNB-DU sends the UE CONTEXT MODIFICATION RESPONSE message to the source gNB-CU.\n12.\tThe source gNB-CU sends an SN STATUS TRANSFER message to the target gNB-CU.\n13.\tData Forwarding may be performed from the source gNB-CU to the target gNB-CU.\n14.\tThe U2N Remote UE establishes PC5 connection with target U2N Relay UE.\n15.\tThe U2N Remote UE completes the path switch procedure by sending the RRCReconfigurationComplete message to the target gNB-DU via the target U2N Relay UE. In case the target U2N Relay UE is in RRC_IDLE/ INACTIVE state when receiving the RRCReconfigurationComplete message, the reception of the RRCReconfigurationComplete message will first trigger RRC setup/resume procedure for the target U2N Relay UE to enter RRC_CONNECTED state.\n16.\tThe target gNB-DU sends the UL RRC MESSAGE TRANSFER message to target gNB-CU by including the RRCReconfigurationComplete message.\n17.\tPath Switch procedure is performed to switch the DL data path towards the target gNB-CU and to establish an NG-C interface instance towards the target gNB-CU.\n18.\tThe target gNB-CU sends an UE CONTEXT RELEASE message to the source gNB-CU.\n19.\tThe source gNB-CU initiates a F1 UE Context Release procedure to release the UE context of the U2N Remote UE in the source gNB-DU.\n",
                            "figures_meta_data": [],
                            "tables": []
                        }
                    ]
                },
                {
                    "title": "8.20\tVoid",
                    "description": "",
                    "summary": "",
                    "text_content": "",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "8.21\tOverall procedures for Network Controlled Repeater",
                    "description": "",
                    "summary": "",
                    "text_content": "",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": [
                        {
                            "title": "8.21.1\tNCR Integration Procedure",
                            "text_content": "A high-level flow chart for NCR integration is shown in Figure 8.22.1-1:\nThe figure depicts the integration procedure for NCR (Network Control Relay), a crucial component in the telecommunication network. It illustrates the steps involved in connecting the NCR to the network, including the use of a network interface controller (NIC) and a network control relay (NCR). The figure provides a visual representation of the process, making it easier to understand and follow.\nFigure 8.21.1-1: The integration procedure for NCR\nPhase 1: NCR-MT setup. In this phase, the NCR-MT of the NCR (re-)selects a cell that broadcasts the NCR support indicator in SIB1. It then connects to the network as a UE, by performing the RRC connection setup procedure with the gNB-CU, and authentication with the 5GC. The NCR-MT includes the NCR indication in the RRCSetupComplete message. The gNB selects an appropriate AMF for the NCR. Upon receiving the NCR authorization information from 5GC, the gNB-CU provides the authorization information to the gNB-DU.\nNOTE: The signalling flow for UE initial access procedure as shown in Figure 8.1-1/Figure 8.9.1-1 is used for the setup of the NCR-MT.\nPhase 2: NCR configuration. The gNB-CU may configure the NCR via RRC.\nPhase 3: NCR Start Operation. After the NCR is configured, it may start serving the UE(s).\n",
                            "figures_meta_data": [],
                            "tables": []
                        }
                    ]
                },
                {
                    "title": "8.22\tOverall procedures for multi-path support",
                    "description": "",
                    "summary": "",
                    "text_content": "",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": [
                        {
                            "title": "8.22.1\tInter-DU direct path addition on top of indirect path",
                            "text_content": "The signalling flow for inter-DU direct path addition is shown in Figure 8.22.1-1. This procedure is only applicable to the MP Remote UE using PC5 link.\nThe figure depicts the inter-DU direct path addition process on top of the indirect path, illustrating the signal propagation in a 5G network. The figure shows the signal reflection off buildings and the combination of signals at the receiver. Key components include the base station (gNB), user equipment (UE), and scatterers. The diagram highlights beamforming techniques to mitigate interference.\nFigure 8.22.1-1: Signalling procedure of inter-DU direct path addition on top of indirect path\n1.\tThe Uu measurement configuration and measurement report signalling are performed between MP Remote UE and the gNB-CU to evaluate both relay link measurement and Uu link measurement. The MP Remote UE may report Uu measurement results of neighboring cells and one or multiple candidate MP Relay UE(s).\n2.\tThe gNB-CU decides to add the direct path to MP Remote UE under a different gNB-DU (i.e., gNB-DU1).\nNOTE:\tMode 1 resource configuration cannot be configured for MP Remote UE in inter-gNB-DU multi-path relay in this release.\n3.\tThe gNB-CU sends the UE CONTEXT SETUP REQUEST message for the MP Remote UE to the gNB-DU1, which contains at least the direct path configuration.\n4.\tThe gNB-DU1 responds to the gNB-CU with a UE CONTEXT SETUP RESPONSE message.\n5.\tThe gNB-CU sends an RRCReconfiguration message to the MP Relay UE to update the indirect path configuration if necessary.\n6.\tThe gNB-CU sends the UE CONTEXT MODIFICATION REQUEST message for MP Remote UE by including the direct path addition information and the RRCReconfiguration message to the gNB-DU2. The gNB-DU2 may update the stored UE context for MP Remote UE. The contents in the RRCReconfiguration message may include at least direct path addition configuration, RLC channel configuration, bearer mapping and the associated radio bearer(s).\n7.\tThe gNB-DU2 sends the RRCReconfiguration message to the MP Remote UE.\n8.\tThe gNB-DU2 sends the UE CONTEXT MODIFICATION RESPONSE message to the gNB-CU.\n9.\tThe MP Remote UE performs random access procedure at the gNB-DU1.\n10.\tThe MP Remote UE sends the RRCReconfigurationComplete message to the gNB-DU1 via direct path in order to complete the direct path addition procedure.\n10a. In case the SRB1 with duplication is configured, the MP Remote UE also sends the RRCReconfigurationComplete message to the gNB-DU2 via indirect path.\n11.\tThe gNB-DU1 sends the UL RRC MESSAGE TRANSFER message to gNB-CU by including the RRCReconfigurationComplete message received in step 10.\n11a. In case the SRB1 with duplication is configured, the gNB-DU2 also sends the UL RRC MESSAGE TRANSFER message to gNB-CU by including the RRCReconfigurationComplete message received in step 10a.\n\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "8.22.2\tInter-DU indirect path addition on top of direct path",
                            "text_content": "The signalling flow for inter-DU indirect path addition is shown in Figure 8.22.2-1.\nThe figure depicts the inter-DU indirect path addition procedure on top of the direct path, illustrating the signal propagation in a 5G network. The figure shows the signal reflection off buildings and the combination of signals at the receiver. Key components include the base station (gNB), user equipment (UE), and scatterers. The diagram highlights beamforming techniques to mitigate interference.\nFigure 8.22.2-1 Signalling procedure of inter-DU indirect path addition on top of direct path\n1. \tIf the MP Remote UE is connected with the MP Relay UE using PC5 link, the Uu measurement configuration and measurement report signalling are performed between MP Remote UE and the gNB-CU to evaluate relay link measurement and Uu link measurement. The MP Remote UE may report Uu measurement results of neighboring cells and one or multiple candidate MP Relay UE(s).\nIn case that the MP Remote UE is connected with the MP Relay UE using N3C and the MP Relay UE is in RRC_CONNECTED state, the MP Remote UE reports at least the list of the C-RNTI and the cell ID of one or multiple candidate MP Relay UE(s).\n2.\tThe gNB-CU decides to add the indirect path via MP Relay UE to MP Remote UE under a different gNB-DU (i.e., gNB-DU2).\nNOTE:\tMode 1 resource configuration cannot be configured for MP Remote UE in inter-gNB-DU multi-path relay in this release.\n3.\tThe reconfiguration to MP Relay UE is performed among MP Relay UE, the gNB-DU2 and the gNB-CU if MP Relay UE is in RRC_CONNECTED state. The gNB-CU sends an RRCReconfiguration message to the MP Relay UE. If the MP Relay UE is in RRC_IDLE/INACTIVE state, this step is skipped.\n4.\tThe gNB-CU sends the UE CONTEXT SETUP REQUEST message for the MP Remote UE to the gNB-DU2, which contains the indirect path addition configuration at least.\n5.\tThe gNB-DU2 responds to the gNB-CU with a UE CONTEXT SETUP RESPONSE message.\n6.\tThe gNB-CU sends the DL RRC MESSAGE TRANSFER message for MP Remote UE by including the RRCReconfiguration message to gNB-DU1. If the MP Remote UE is connected with the MP Relay UE using the PC5 link, the contents in the RRCReconfiguration message may include at least indirect path addition configuration, PC5 Relay RLC channel configuration for relay traffic, bearer mapping and the associated radio bearer(s). If the MP Remote UE is using N3C, the contents in the RRCReconfiguration message may include at least indirect path addition configuration, bearer mapping and the associated radio bearer(s).\n7.\tThe gNB-DU1 sends the RRCReconfiguration message to the MP Remote UE.\n8.\tIf the MP Remote UE is using the PC5 link, the MP Remote UE establishes PC5 connection with the target MP Relay UE. If the MP Remote UE is connected with the MP Relay UE using N3C, this step is skipped.\n9.\tThe MP Remote UE sends the RRCReconfigurationComplete message to the gNB-DU1 via direct path in order to complete the indirect path addition procedure.\n9a.\tIn case the SRB1 with duplication is configured, the MP Remote UE also sends the RRCReconfigurationComplete message to the gNB-DU2 via indirect path.\nNOTE: \tIn the case that the target MP Relay UE for indirect path addition is in RRC_IDLE/INACTIVE state, how the MP Remote UE triggers the MP Relay UE to be in RRC_CONNECTED state is specified in TS 38.300 [2].\n10.\tThe gNB-DU1 sends the UL RRC MESSAGE TRANSFER message to gNB-CU by including the RRCReconfigurationComplete message received in step 9.\n10a. In case the SRB1 with duplication is configured, the gNB-DU2 also sends the UL RRC MESSAGE TRANSFER message to gNB-CU by including the RRCReconfigurationComplete message received in step 9a.\n\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "8.22.3\tIntra-DU direct path addition on top of indirect path",
                            "text_content": "The signaling flow for intra-DU direct path addition is shown in Fig. 8.22.3-1. This procedure is only applicable to the MP Remote UE using PC5 link.\nThe figure depicts the signalling procedure of intra-DU direct path addition on top of indirect path in a 5G network. It illustrates the process of adding a direct path to an existing indirect path, which is crucial for improving signal quality and reducing interference. The figure includes key components such as the base station (gNB), user equipment (UE), and scatterers, as well as the use of beamforming techniques to mitigate interference.\nFigure 8.22.3-1: Signalling procedure of intra-DU direct path addition on top of indirect path\n1.\tThe Uu measurement configuration and measurement report signalling are performed between MP Remote UE and gNB-CU to evaluate both relay link measurement and Uu link measurement. The MP Remote UE may report Uu measurement results of neighboring cells and one or multiple candidate MP Relay UE(s).\n2.\tThe gNB-CU decides to add the direct path to MP Remote UE under the same gNB-DU.\n3.\tThe gNB-CU sends the UE CONTEXT MODIFICATION REQUEST message for the MP Remote UE to the gNB-DU, which contains at least the direct path configuration.\n4.\tThe gNB-DU responds to the gNB-CU with a UE CONTEXT MODIFICATION RESPONSE message.\n5.\tThe gNB-CU sends an RRCReconfiguration message to the MP Relay UE to update the indirect path configuration if necessary.\n6.\tThe gNB-CU sends the DL RRC MESSAGE TRANSFER message for MP Remote UE by including the RRCReconfiguration message to the gNB-DU. The contents in the RRCReconfiguration message may include at least direct path addition configuration, RLC channel configuration, bearer mapping and the associated radio bearer(s).\n7.\tThe gNB-DU sends the RRCReconfiguration message to the MP Remote UE.\n8.\tThe MP Remote UE performs random access procedure at the gNB-DU.\n9.\tThe MP Remote UE sends the RRCReconfigurationComplete message to the gNB-DU via direct path in order to complete the direct path addition procedure.\n9a.\tIn case the SRB1 with duplication is configured, the RRCReconfigurationComplete message is also sent to the gNB-DU via indirect path.\n10/10a.\tThe gNB-DU sends the UL RRC MESSAGE TRANSFER message to gNB-CU by including the RRCReconfigurationComplete message.\n\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "8.22.4\tIntra-DU indirect path addition on top of direct path",
                            "text_content": "The signaling flow for intra-DU indirect path addition is shown in Fig. 8.22.4-1.\nThe figure depicts the signalling procedure of intra-DU indirect path addition on top of direct path in a 5G network. It illustrates the process of adding an indirect path to an existing direct path, which is crucial for improving network performance and reducing interference. The figure shows the various components involved, such as the base station (gNB), user equipment (UE), and scatterers, and the use of beamforming techniques to mitigate interference.\nFigure 8.22.4-1: Signalling procedure of intra-DU indirect path addition on top of direct path\n1. \tIf the MP Remote UE is connected with the MP Relay UE using PC5 link, the Uu measurement configuration and measurement report signalling are performed between MP Remote UE and gNB-CU to evaluate relay link measurement and Uu link measurement. The MP Remote UE may report Uu measurement results of neighboring cells and one or multiple candidate MP Relay UE(s).\nIn case that the MP Remote UE is connected with the MP Relay UE using N3C and the MP Relay UE is in RRC_CONNECTED state, the MP Remote UE reports at least the list of the C-RNTI and the cell ID of one or multiple candidate MP Relay UE(s).\n2.\tThe gNB-CU decides to add the indirect path via MP Relay UE to MP Remote UE under the same gNB-DU.\n3.\tThe reconfiguration to MP Relay UE is performed among MP Relay UE, gNB-DU and gNB-CU if MP Relay UE is in RRC_CONNECTED state. The gNB-CU sends an RRCReconfiguration message to the MP Relay UE. If the MP Relay UE is in RRC_IDLE/INACTIVE state, this step is skipped.\n4.\tThe gNB-CU sends the UE CONTEXT MODIFICATION REQUEST message for the MP Remote UE to the gNB-DU, which contains the indirect path addition configuration at least.\n5.\tThe gNB-DU responds to the gNB-CU with a UE CONTEXT MODIFICATION RESPONSE message.\n6.\tThe gNB-CU sends the DL RRC MESSAGE TRANSFER message for MP Remote UE by including the RRCReconfiguration message to gNB-DU. If the MP Remote UE is connected with the MP Relay UE using the PC5 link, the contents in the RRCReconfiguration message may include at least indirect path addition configuration, PC5 Relay RLC channel configuration for relay traffic, bearer mapping and the associated radio bearer(s). If the MP Remote UE is using N3C, the contents in the RRCReconfiguration message may include at least indirect path addition configuration, bearer mapping and the associated radio bearer(s).\n7.\tThe gNB-DU sends the RRCReconfiguration message to the MP Remote UE.\n8.\tIf the MP Remote UE is using the PC5 link, the MP Remote UE establishes PC5 connection with the target MP Relay UE. If the MP Remote UE is using N3C, this step is skipped.\n9.\tThe MP Remote UE sends the RRCReconfigurationComplete message to the gNB-DU via direct path to complete the indirect path addition procedure.\n9a.\tIn case the SRB1 with duplication is configured, the RRCReconfigurationComplete message is also sent to the gNB-DU via indirect path.\nNOTE: \tIn the case that the target MP Relay UE for indirect path addition is in RRC_IDLE/INACTIVE state, how the MP Remote UE triggers the MP Relay UE to be in RRC_CONNECTED state is specified in TS 38.300 [2].\n10/10a.\tThe gNB-DU sends the UL RRC MESSAGE TRANSFER message to gNB-CU by including the RRCReconfigurationComplete message.\n",
                            "figures_meta_data": [],
                            "tables": []
                        }
                    ]
                },
                {
                    "title": "8.23\tMobile IAB migration procedures",
                    "description": "",
                    "summary": "",
                    "text_content": "",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": [
                        {
                            "title": "8.23.1\tMigration of mobile IAB-MT via Xn handover",
                            "text_content": "The mobile IAB-MT can be migrated from a source RRC-terminating IAB-donor-CU to a target RRC-terminating IAB-donor-CU using the Xn handover procedure. During this migration, the mobile IAB-DU co-located with the mobile IAB-MT is connected to an F1-terminating IAB-donor-CU, which may be the same as the source RRC-terminating IAB-donor-CU or the target RRC-terminating IAB-donor-CU, or it can be different from both the source and the target RRC-terminating IAB-donor-CU.\nFigure 8.23.1-1 shows an example of mobile IAB-MT migration via Xn handover. In this example, the mobile IAB-MT is connected to the source RRC-terminating IAB-donor-CU via a source path of an IAB topology before the migration, and it is connected to the target RRC-terminating IAB-donor-CU via a target path of a different IAB topology after the migration.\n\nThe figure depicts a procedure for Xn-based migration of mobile IAB-MT, illustrating the steps involved in transitioning from an older, non-LTE-based network to a newer, LTE-based network. The figure includes various components such as mobile base stations (MBs), mobile edge computing (MEC), and network elements like radio access network (RAN) and core network elements. The figure also highlights the importance of network slicing and network slicing functions (NSF) in enabling efficient and flexible network management.\nFigure 8.23.1-1: Procedure for Xn-based migration of mobile IAB-MT\n1. Steps 1-14 of the topology adaptation procedure in clause 8.17.3.1 are performed to conduct Xn handover of the mobile IAB-MT from the source parent IAB-node connected to the source RRC-terminating IAB-donor-CU to the target parent IAB-node connected to the target RRC-terminating IAB-donor-CU. In these steps, the mobile IAB-node corresponds to the migrating IAB-node in clause8.17.3.1, and the mobile IAB-MT’s source and target RRC-terminating IAB-donor-CUs correspond to the respective source and target IAB-donor-CUs of clause8.17.3.1. The source RRC-terminating IAB-donor-CU should retain the UE XnAP IDs allocated for the mobile IAB-MT as long as the mobile IAB-MT is connected.\n2. Same as step 15 of the topology adaptation procedure in clause8.17.3.1, where the F1-C connection between the co-located mobile IAB-DU and its F1-terminating IAB-donor-CU is switched to the target path using the new TNL address information of the IAB-MT. In this step, the mobile IAB-node corresponds to the migrating IAB-node, and the F1-terminating IAB-donor-CU corresponds to the source IAB-donor-CU.\n3. The mobile IAB-DU passes to the F1-terminating IAB-donor-CU via F1AP the gNB ID of the target RRC-terminating IAB-donor-CU and the mobile IAB-node’s BAP address allocated by the target RRC-terminating IAB-donor-CU. In case the migration of the mobile IAB-MT occurs during DU migration, each logical mobile IAB-DU passes this information to its respective F1-terminating IAB-donor-CU. The F1-terminating IAB-donor-CU retains the UE XnAP ID that it allocated to the mobile IAB-MT as long as the co-located mobile IAB-DU connects to this CU, and retains the UE XnAP ID allocated for the mobile IAB-MT by the source RRC-terminating IAB-donor-CU until the present step (step 3).\n4. Steps 16-20 of the topology adaptation procedure in clause 8.17.3.1, where the F1-terminating IAB-donor-CU initiates the IAB Transport Migration Management procedure towards the target RRC-terminating IAB-donor-CU to provide the context of the offloaded traffic. The target RRC-terminating IAB-donor-CU reconfigures the BAP sublayer and/or BH RLC channels on the target path accordingly, and provides the UL BH information for UL BH reconfigurations to be conducted by the F1-terminating IAB-donor-CU on the mobile IAB-node. Then, the F1-U connections of the mobile IAB-node are migrated to the target path.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "8.23.2\tMigration of mobile IAB-MT via NG handover",
                            "text_content": "The mobile IAB-MT can be migrated from a source RRC-terminating IAB-donor-CU to a target RRC-terminating IAB-donor-CU using the NG handover procedure. During this migration, the mobile IAB-DU co-located with the mobile IAB-MT is connected to an F1-terminating IAB-donor-CU, which may be the same as the source RRC-terminating IAB-donor-CU or the target RRC-terminating IAB-donor-CU, or it can be different from both the source and the target RRC-terminating IAB-donor-CU.\nFigure 8.23.2-1 shows an example of mobile IAB-MT migration via NG handover. In this example, the mobile IAB-MT is connected to the source RRC-terminating IAB-donor-CU via a source path of an IAB topology before the migration, and it is connected to the target RRC-terminating IAB-donor-CU via a target path of a different IAB topology after the migration.\nThe figure depicts a step-by-step procedure for migrating an NG-based mobile IAB-MT network to a 5G network. It outlines the necessary steps, including network planning, network design, network deployment, and network testing. The figure also includes a visual representation of the network architecture, highlighting key components such as base stations, mobile base stations (MBs), and access points (APs). The figure is essential for understanding the complexity of the migration process and ensuring a smooth transition to 5G.\nFigure 8.23.2-1: Procedure for NG-based migration of mobile IAB-MT\n1. Similar to Step 1-14 in clause 8.17.3.1, where the NG-based handover procedure as defined in clauses 4.9.1.3.2 and 4.9.1.3.3 in TS 23.502 [32] is used instead of Xn-based handover procedure.\n2. Same as step 2 to step 4 in clause 8.23.1.\nNOTE\tHow to perform the IAB Transport Migration Management/Modification procedures and the IAB Resource Coordination procedure between the F1-terminating IAB-donor-CU and the target RRC-terminating IAB-donor-CU without Xn interface is up to implementation.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "8.23.3\tMobile IAB-DU migration procedure",
                            "text_content": "To support the mobile IAB-DU migration procedure, the mobile IAB-node concurrently supports two logical mobile IAB-DUs, which have F1 connections set up with the source F1-terminating IAB-donor-CU and target F1-terminating IAB-donor-CU, respectively. The mobile IAB-MT’s IAB-donor-CU may be same as either the source F1-termainting IAB-donor CU or the target F1-terminating IAB-donor-CU, or it may be different from both source and target F1-terminating IAB-donor-CUs.\nThe UE(s) connected to the mobile IAB-node are handed over from the cell(s) of the source logical mobile IAB-DU that have F1 set up with the source F1-terminating IAB-donor-CU to the cell(s) of the target logical mobile IAB-DU that have F1 set up with the target F1-terminating IAB-donor-CU. After the UE(s) are handed over, the F1 between the source logical mobile IAB-DU’s and the source F1-terminating IAB-donor-CU may be removed.\nFigure 8.23.3-1 shows an example of the mobile IAB-DU migration procedure. In this example, the source and the target F1-terminating IAB-donor-CUs are different from the RRC-terminating IAB-donor-CU.\nThe figure depicts a detailed diagram of the inter-CU migration procedure for mobile IAB-DU (Inter-CU Mobile Broadband-Downlink User Equipment) in a 5G network. It illustrates the step-by-step process of migrating from one CU (Cell Unit) to another, including the use of mobile IAB-DU equipment, the inter-CU communication, and the necessary network infrastructure. The figure provides a clear and concise visual representation of the complex process, making it easier for network operators to understand and implement.\nFigure 8.23.3-1: Mobile IAB-DU inter-CU migration procedure\n1. The source F1-terminating IAB-donor-CU may send an MIAB F1 SETUP TRIGGERING message to the source logical mobile IAB-DU to initialize the F1 Setup procedure towards the target F1-terminating IAB-donor-CU. The MIAB F1 SETUP TRIGGERING message includes the gNB ID of the target F1-terminating IAB-donor-CU and the information needed to establish the TNL connection with the target F1-terminating IAB-donor-CU for F1-C.\nNOTE:\tThe mobile IAB-DU migration can also be triggered by the OAM. In this case, the OAM provides the mobile IAB-node with all information to initiate the F1 Setup procedure towards the target F1-terminating IAB-donor-CU, and step 1 is omitted.\n2. The target logical mobile IAB-DU initiates TNL establishment and F1 setup (as defined in clause 8.5) with the target F1-terminating IAB-donor-CU. During the F1 Setup procedure, the target logical mobile IAB-DU includes the gNB ID of the RRC-terminating IAB-donor-CU, and the BAP address of the co-located mobile IAB-MT in the F1 SETUP REQUEST message.\n3. The target F1-terminating IAB-donor-CU responds to the target logical mobile IAB-DU with an F1 SETUP RESPONSE message. After F1 setup with the target F1-terminating IAB-donor-CU, the target logical mobile IAB-DU can serve UEs via the target mobile IAB-DU’s activated cell(s).\n4. By sending the MIAB F1 SETUP OUTCOME NOTIFICATION message, the source logical mobile IAB-DU informs the source F1-terminating IAB-donor-CU about the outcome of the F1 interface setup between the co-located target logical mobile IAB-DU and the target F1-terminating IAB-donor-CU. The source logical mobile IAB-DU may provide the source F1-terminating IAB-donor-CU with a mapping between activated cells of the source logical mobile IAB-DU and activated cells of the target logical mobile IAB-DU. If the mobile IAB-DU migration is triggered by the OAM, the gNB-ID of the target F1-terminating IAB-donor-CU is included in this message.\n5. The source F1-terminating IAB-donor-CU hands over the UE from a source cell served by the source logical mobile IAB-DU to a target cell served by the target logical mobile IAB-DU. The target F1-terminating IAB-donor-CU initiates the IAB Transport Migration Management procedure towards the RRC-terminating IAB-donor-CU for offloading the UE’s traffic during this step. In case the IAB Transport Migration Management procedure is the first procedure for the mobile IAB-MT, it includes the mobile IAB-MT’s BAP address in the IAB TRANSPORT MIGRATION MANAGEMENT REQUEST message. After the completion of the UE handover, the source F1-terminating IAB-donor-CU requests the release of the UE’s traffic offloaded to the RRC-terminating IAB-donor-CU by initiating IAB Transport Migration Management procedure.\nNOTE 1:\tIn step 5, the sequence of procedures for UE Handover and the IAB Transport Migration Management procedure initiated by the target F1-terminating IAB-donor-CU is up to implementation.\nNOTE 2:\tIt is up to RRC-terminating IAB-donor-CU’s implementation to set up new backhaul resources or reuse the existing backhaul resources for the UE’s traffic.\nNOTE 3:\tHow to perform the IAB Transport Migration Management/Modification procedures, and the IAB Resource Coordination procedure between the target F1-terminating IAB-donor-CU and the RRC-terminating IAB-donor-CU without Xn interface is up to implementation.\n6. After all the UEs are handed over, the source F1-terminating IAB-donor-CU may initiate the removal of the F1 interface towards the source logical mobile IAB-DU.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "8.23.4\tMobile IAB-node RLF recovery",
                            "text_content": "When the mobile IAB-MT detects backhaul RLF, the mobile IAB-MT can perform inter-CU backhaul RLF recovery procedure to another parent node underneath a different IAB-donor-CU. The procedure is the same as steps 1-18 of IAB inter-CU backhaul RLF recovery procedure described in clause 8.17.4 where the mobile IAB-node corresponds to the Recovery IAB-node.\n",
                            "figures_meta_data": [],
                            "tables": []
                        }
                    ]
                },
                {
                    "title": "8.24\tTiming resiliency service",
                    "description": "",
                    "summary": "",
                    "text_content": "The following clauses describe the overall procedures for RAN Timing Synchronisation Status (TSS) reporting involving gNB-CU/gNB-DU.\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": [
                        {
                            "title": "8.24.1\tRAN TSS reporting towards the CN",
                            "text_content": "The signaling flow for RAN TSS reporting towards the CN is shown in Figure 8.24.1-1. This procedure is used when the TSCTSF subscribes to RAN TSS reporting at the AMF as described in TS 23.502 [32].\nThe figure depicts a network topology with various elements such as base stations (BTS), radio access network (RAN), and terrestrial transport system (TTS). The figure shows the path of signals from the base station to the CN, highlighting the importance of signal quality and the use of beamforming techniques to mitigate interference.\nFigure 8.24.1-1:\tRAN TSS reporting towards the CN\n0.\tThe gNB-DU is pre-configured with a threshold for each RAN TSS attribute it supports. The gNB-DU does not report RAN TSS attribute values better than the pre-configured thresholds, i.e. if a RAN TSS attribute has a value better than the pre-configured threshold, the gNB-DU reports the threshold value to the gNB-CU instead.\nNOTE 1: \tIt is assumed the pre-configured thresholds in the gNB-DU are sufficient to meet UE time sync performance requirement which are configured by the operator.\n1.\tThe AMF requests RAN TSS reporting by sending the TIMING SYNCHRONISATION STATUS REQUEST message to the gNB-CU.\n2.\tThe gNB-CU requests RAN TSS reporting from at least one gNB-DU by sending the TIMING SYNCHRONISATION STATUS REQUEST message to the gNB-DU.\nNOTE 2:\tIt is up to gNB-CU implementation whether to send the request to all its gNB-DUs or to a particular subset of its gNB-DUs, depending on e.g. network topology.\n3.\tThe gNB-DU replies to the gNB-CU by sending the TIMING SYNCHRONISATION STATUS RESPONSE message.\n4.\tThe gNB-CU replies to the AMF by sending the TIMING SYNCHRONISATION STATUS RESPONSE message. If the gNB-CU does not receive a successful response from at least one gNB-DU, the gNB-CU replies to the AMF by sending the TIMING SYNCHRONISATION STATUS FAILURE message and the flow stops at this step.\n5. \tUpon sending the response to the gNB-CU, the gNB-DU provides a first RAN TSS report to the gNB-CU by sending the TIMING SYNCHRONISATION STATUS REPORT message.\nNOTE 3:\tThe RAN TSS attributes included in the report is up to gNB-DU implementation.\n6.\tThe gNB-CU sends the TIMING SYNCHRONISATION STATUS REPORT message to the AMF. The message contains the RAN TSS attributes received from the gNB-DU and the RAN TSS Scope IE to indicate whether the scope of the RAN TSS report is “RAN node level” or “cell list level”.\n7.\tLater, the gNB-DU detects a primary source event:\na)\ta RAN TSS attribute cannot meet a pre-configured threshold (i.e. status is degraded);\nb)\ta RAN TSS attribute meets the pre-configured threshold again (i.e. status is no longer degraded);\nc)\tevent a) occurred and b) has not yet been reached, the gNB-DU performs periodic reporting or a previously reported RAN TSS attribute value can no longer be met.\nNOTE 4: Additional primary source events, if any, are up to gNB-DU implementation.\n8.\tUpon detecting the primary source event, the gNB-DU provides an updated RAN TSS report to the gNB-CU by sending a TIMING SYNCHRONISATION STATUS REPORT message.\n9. \tSame as step 6.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "8.24.2\tRAN TSS reporting towards the UE",
                            "text_content": "The signaling flow for RAN TSS reporting towards the UE in RRC_CONNECTED state is shown in Figure 8.24.2-1.\nThe figure depicts a RAN TSS (Terminal System Status) report towards the UE (User Equipment) in the RRC_CONNECTED state, indicating that the UE is connected to the network and is receiving data.\nFigure 8.24.2-1:\tRAN TSS reporting towards the UE in RRC_CONNECTED state\nNOTE 1:\tIn this signalling flow, it is assumed that RAN TSS reporting is already enabled at the gNB-DU.\n1.\tThe AMF sends the INITIAL CONTEXT SETUP REQUEST message to the gNB-CU, containing the Clock Quality Reporting Control Information IE within the Time Synchronization Assistance Information IE. The clock quality reporting control information indicates the clock quality detail level to provide to the UE, i.e. “metrics” or “acceptable/not acceptable indication”. If clock quality detail level equals “acceptable/not acceptable indication”, the clock quality reporting control information also contains the clock quality acceptance criteria.\nNOTE 2:\tThe clock quality reporting control information can also be provided in the UE CONTEXT MODIFICATION REQUEST, HANDOVER REQUEST, or PATH SWITCH REQUEST ACKNOWLEDGE messages.\n2.\tThe gNB-CU replies to the AMF by sending the INITIAL CONTEXT SETUP RESPONSE message.\n3.\tThe gNB-CU sends the latest clock quality information to the UE by sending the DLInformationTransfer message. The clock quality information provided to the UE depends on the clock quality detail level received in step 1 (i.e., “metrics” or “acceptable/not acceptable indication”).\n4.\tLater, the gNB-DU detects a primary source event:\na)\ta RAN TSS attribute cannot meet a pre-configured threshold (i.e. status is degraded);\nb)\ta RAN TSS attribute meets the pre-configured threshold again (i.e. status is no longer degraded);\nc)\tevent a) occurred and b) has not yet been reached, the gNB-DU performs periodic reporting or a previously reported RAN TSS attribute value can no longer be met.\nNOTE 3: Additional primary source events, if any, are up to gNB-DU implementation.\n5.\tUpon detecting the primary source event, the gNB-DU provides an updated RAN TSS report to the gNB-CU by sending a TIMING SYNCHRONISATION STATUS REPORT message.\n6.\tSame as step 3.\n",
                            "figures_meta_data": [],
                            "tables": []
                        }
                    ]
                }
            ]
        },
        {
            "title": "9\tSynchronization",
            "description": "",
            "summary": "",
            "tables": [],
            "figures_meta_data": [],
            "subsections": [
                {
                    "title": "9.1\tgNB Synchronization",
                    "description": "",
                    "summary": "",
                    "text_content": "The gNB shall support a logical synchronization port for phase-, time- and/or frequency synchronization.\nLogical synchronization port for phase- and time-synchronization shall provide:\n1)\taccuracy that allows to meet the gNB requirements on maximum relative phase difference for all gNBs in synchronized TDD-unicast area;\n2)\tcontinuous time without leap seconds traceable to common time reference for all gNBs in synchronized TDD-unicast area. In the case the TDD-unicast area is not isolated, the common time reference shall be traceable to the Coordinated Universal Time (UTC).\nA logical synchronization port for phase- and time-synchronization may also be provided for e.g., all gNBs in FDD time domain inter-cell interference coordination synchronization area.\nFurthermore common SFN initialization time shall be provided for all gNBs in synchronized TDD-unicast area.\nIn case of non isolated networks, the start of the radio frame on the output shall be synchronous with the input time reference, i.e., when an UTC traceable reference is required, the start of the radio frame shall be aligned with the start time of the UTC second.\nUnless otherwise mutually agreed by the operators of the cells in non isolated networks and/or unless different SFN initialization offsettings do not affect operators’ networks in the same area, the common SFN initialization time should be 1980-01-06T00:00:19 International Atomic Time (TAI).\nBased on this information, the gNB may derive the SFN according to the following formula:\n,\nwhere:\ntime\ttime adjusted by the common SFN initialization time, in units of 10 ms to match the length of radio frame and accuracy accordingly;\nperiod(SFN)\tSFN period.\nIn case gNB is connected via TDM interface, it may be used to frequency synchronize the gNB. The characteristics of the clock in the gNB shall be designed taking into account that the jitter and wander performance requirements on the interface are in accordance with network limits for output wander at traffic interfaces of either ITU-T Recommendation G.823 [8], ITU-T Recommendation G.824 [9] or network limits for the maximum output jitter and wander at any hierarchical interface of ITU-T Recommendation G.825 [10], whichever is applicable.\nIn case gNB is connected via Ethernet interface and the network supports Synchronous Ethernet, the gNB may use this interface to get frequency synchronization. In this case the design of the gNB clock should be done considering the jitter and wander performance requirements on the interface are as specified for output jitter and wander at EEC interfaces of ITU-T Recommendation G.8261/Y.1361 [11], defined in clause 9.2.1. Further considerations on Synchronous Ethernet recommendations and architectural aspects are defined in clause 12.2.1 and Annex A of ITU-T Recommendation G.8261/Y.1361 [11].\nA configurable LTE TDD-offset of start frame shall be supported by all gNBs in synchronized TDD-unicast areas in order to achieve interoperability in coexistence scenarios.\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                }
            ]
        },
        {
            "title": "10\tNG-RAN interfaces",
            "description": "",
            "summary": "",
            "tables": [],
            "figures_meta_data": [],
            "subsections": [
                {
                    "title": "10.1\tNG interface",
                    "description": "",
                    "summary": "",
                    "text_content": "TS 38.410 [14] specifies NG interface general aspects and principles.\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "10.2\tXn interface",
                    "description": "",
                    "summary": "",
                    "text_content": "TS 38.420 [15] specifies Xn interface general aspects and principles.\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "10.3\tF1 interface",
                    "description": "",
                    "summary": "",
                    "text_content": "TS 38.470 [16] specifies F1 interface general aspects and principles.\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "10.4\tE1 interface",
                    "description": "",
                    "summary": "",
                    "text_content": "TS 38.460 [17] specifies E1 interface general aspects and principles.\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "10.5\tAntenna interface - general principles",
                    "description": "",
                    "summary": "",
                    "text_content": "The Iuant interface for the control of RET antennas or TMAs is a logical part of the NG-RAN.\nThe support of any standardised antenna interface technique shall not be prevented; e.g. AISG (Antenna interface standards group) specifications may be used.\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                }
            ]
        },
        {
            "title": "11\tOverall procedures in NG-RAN Architecure",
            "description": "",
            "summary": "",
            "tables": [],
            "figures_meta_data": [],
            "subsections": [
                {
                    "title": "11.1\tMultiple TNLAs for Xn-C",
                    "description": "",
                    "summary": "",
                    "text_content": "In the following, the procedure for managing multiple TNLAs for Xn-C is described.\nThe figure depicts a network management system (NMS) for managing multiple Terrestrial Local Area Networks (TNLAs) in a wireless communication network. It illustrates the process of configuring and monitoring TNLAs, including the use of a centralized management system (CMS) to manage the network's resources and traffic. The figure also shows the integration of TNLAs with other network components, such as the base station (BS) and the network slicing (NS) architecture.\nFigure 11.1-1: Managing multiple TNLAs for Xn-C.\n1.\tThe NG-RAN node1 establishes the first TNLA with the NG-RAN node2 using a configured TNL address.\nNOTE: \tThe NG-RAN node1 may use different source and/or destination IP end point(s) if the TNL establishment towards one IP end point fails. How the NG-RAN node1 gets the remote IP end point(s) and its own IP address are outside the scope of this specification.\n2-3.\tOnce the TNLA has been established, the NG-RAN node1 initiates the Xn Setup procedure to exchange application level configuration data\n4-6.\tThe NG-RAN node2 may add additional TNL Endpoint(s) to be used for Xn-C signalling between the NG-RAN node1 and the NG-RAN node2 pair using the NG-RAN node Configuration Update procedure. NG-RAN node Configuration Update procedure also allows the NG-RAN node2 to request the NG-RAN node1 to modify or release TNLA(s).\n7-9.\tThe NG-RAN node1 may add additional TNL Endpoint(s) to be used for Xn-C signalling between the NG-RAN node1 and the NG-RAN node2 pair using the NG-RAN node Configuration Update procedure. NG-RAN node Configuration Update procedure also allows the NG-RAN node1 to request the NG-RAN node2 to modify or release TNLA(s).\nThe XnAP UE TNLA binding is a binding between a XnAP UE association and a specific TNL association for a given UE. After the XnAP UE TNLA binding is created, the NG-RAN node1 or the NG-RAN node2 can update the UE TNLA binding by sending the first available XnAP message for the UE to the peer NG-RAN node via a different TNLA. The peer NG-RAN node shall update the XnAP UE TNLA binding with the new TNLA.\nFigure A-1 shows logical nodes (CU-C, CU-U and DU), internal to a logical gNB/en-gNB. Protocol terminations of the NG and Xn interfaces are depicted as ellipses in Figure A-1. The terms \"Central Entity\" and \"Distributed Entity\" shown in Figure A-1 refer to physical network nodes.\nThe figure depicts an example deployment of an Logical gNB/en-gNB, illustrating the connection between the gNB and the en-gNB. The Logical gNB is responsible for managing the network's resources, while the en-gNB is responsible for providing network services to the end-users. The figure shows the connection between the two devices, with the Logical gNB on the left and the en-gNB on the right. The figure also includes a diagram of the network's topology, with the Logical gNB and en-gNB connected to the network's core switches and distributed nodes.\nFigure A-1: Example deployment of an Logical gNB/en-gNB\nEach gNB-DU serving a cell identified by a Cell Identity associated with a subset of PLMNs is connected to a gNB-CU via a single F1-C interface instance.\nEach F1-C interface instance is setup individually.\nF1-C interface instances terminating at gNB-DUs which share the same physical radio resources may share the same F1-C signalling transport resources. If this option is applied,\n-\tnon-UE associated signalling is associated to an F1-C interface instance by allocating the corresponding Transaction ID from a value range associated to that F1-C interface instance.\n-\tnode related, non-UE associated F1-C interface signalling may provide information destined for multiple logical nodes in a single F1AP procedure instance once the F1-C interface instance is setup.\nNOTE 1:\tIf the Transaction ID corresponds to more than one interface instance, the respective F1AP message carries information destined for multiple logical nodes.\n-\ta UE associated signalling connection is associated to an F1-C interface instance by allocating values for the corresponding gNB-DU UE F1AP ID and gNB-CU UE F1AP ID so that they can be mapped to that interface instance.\nNOTE 2:\tOne possible implementation is to partition the value ranges of the gNB-DU UE F1AP ID and gNB-CU UE F1AP ID and associate each value range with an F1-C interface instance.\nInterpreting the content of RRC MSG3 and other unciphered RRC message by the gNB-DU is supported.\nContent for System Information Broadcast is assumed to be coordinated among the sharing PLMNs. PLMN specific SIB1 content is controlled by the respective PLMN owner. Non PLMN specific content needs coordination to avoid contradicting indication by PLMN specific gNB-CUs. For Warning messages (SIB6, SIB7 and SIB8), if provided by more than one gNB-CU, warning message duplicates are identified by provision of the Message Number and the Serial Number by the gNB-CU and don’t trigger new broadcast or replace existing broadcast. Other coordination between gNB-CUs is ensured by appropriate implementation.\n\n",
                    "tables": [
                        {
                            "description": "",
                            "table number": 1,
                            "summary": "",
                            "name": ""
                        }
                    ],
                    "figures_meta_data": [],
                    "subsubsections": []
                }
            ]
        }
    ]
}