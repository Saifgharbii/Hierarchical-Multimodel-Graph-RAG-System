{
    "document_name": "29554-i20.docx",
    "content": [
        {
            "title": "Foreword",
            "description": "This Technical Specification has been produced by the 3rd Generation Partnership Project (3GPP).\nThe contents of the present document are subject to continuing work within the TSG and may change following formal TSG approval. Should the TSG modify the contents of the present document, it will be re-released by the TSG with an identifying change of release date and an increase in version number as follows:\nVersion x.y.z\nwhere:\nx\tthe first digit:\n1\tpresented to TSG for information;\n2\tpresented to TSG for approval;\n3\tor greater indicates TSG approved document under change control.\ny\tthe second digit is incremented for all changes of substance, i.e. technical enhancements, corrections, updates, etc.\nz\tthe third digit is incremented when editorial only changes have been incorporated in the document.\n",
            "summary": "",
            "tables": [],
            "figures_meta_data": [],
            "subsections": []
        },
        {
            "title": "1\tScope",
            "description": "The present specification provides the stage 3 definition of the Background Data Transfer (BDT) Policy Control Service (Npcf_BDTPolicyControl) of the 5G System.\nThe 5G System Architecture is defined in 3GPP TS 23.501 [2]. The stage 2 definition and related procedures for BDT Policy Control Service are specified in 3GPP TS 23.502 [3] and 3GPP TS 23.503 [4].\nThe 5G System stage 3 call flows are provided in 3GPP TS 29.513 [5].\nThe Technical Realization of the Service Based Architecture and the Principles and Guidelines for Services Definition are specified in 3GPP TS 29.500 [6] and 3GPP TS 29.501 [7].\nThe Policy Control Function (PCF) provides the BDT Policy Control Service. This service provides background data transfer policy negotiation function.\n",
            "summary": "",
            "tables": [],
            "figures_meta_data": [],
            "subsections": []
        },
        {
            "title": "2\tReferences",
            "description": "The following documents contain provisions which, through reference in this text, constitute provisions of the present document.\n-\tReferences are either specific (identified by date of publication, edition number, version number, etc.) or non-specific.\n-\tFor a specific reference, subsequent revisions do not apply.\n-\tFor a non-specific reference, the latest version applies. In the case of a reference to a 3GPP document (including a GSM document), a non-specific reference implicitly refers to the latest version of that document in the same Release as the present document.\n[1]\t3GPP TR 21.905: \"Vocabulary for 3GPP Specifications\".\n[2]\t3GPP TS 23.501: \"System Architecture for the 5G System; Stage 2\".\n[3]\t3GPP TS 23.502: \"Procedures for the 5G System; Stage 2\".\n[4]\t3GPP TS 23.503: \"Policy and Charging Control Framework for the 5G System; Stage 2\".\n[5]\t3GPP TS 29.513: \"5G System; Policy and Charging Control signalling flows and QoS parameter mapping; Stage 3\".\n[6]\t3GPP TS 29.500: \"5G System; Technical Realization of Service Based Architecture; Stage 3\".\n[7]\t3GPP TS 29.501: \"5G System; Principles and Guidelines for Services Definition; Stage 3\".\n[8]\tIETF RFC 9113: \"HTTP/2\".\n[9]\tIETF RFC 8259: \"The JavaScript Object Notation (JSON) Data Interchange Format\".\n[10]\tOpenAPI: \"OpenAPI Specification Version 3.0.0\", .\n[11]\t3GPP TS 29.504: \"5G System; Unified Data Repository Services; Stage 3\".\n[12]\t3GPP TS 29.519: \"5G System; Usage of the Unified Data Repository service for Policy Data, Application Data and Structured Data for exposure; Stage 3\".\n[13]\t3GPP TS 29.571: \"5G System; Common Data Types for Service Based Interfaces; Stage 3\".\n[14]\t3GPP TS 29.122: \"T8 reference point for Northbound APIs\".\n[15]\tIETF RFC 7396: \"JSON Merge Patch\".\n[16]\tIETF RFC 3986: \"Uniform Resource Identifier (URI): Generic Syntax\".\n[17]\tIETF RFC 9457: \"Problem Details for HTTP APIs\".\n[18]\t3GPP TS 33.501: \"Security architecture and procedures for 5G system\".\n[19]\tIETF RFC 6749: \"The OAuth 2.0 Authorization Framework\".\n[20]\t3GPP TS 29.510: \"5G System; Network Function Repository Services; Stage 3\".\n[21]\t3GPP TR 21.900: \"Technical Specification Group working methods\".\n[22]\t3GPP TS 29.520: \"5G System; Network Data Analytics Services; Stage 3\".\n",
            "summary": "",
            "tables": [],
            "figures_meta_data": [],
            "subsections": []
        },
        {
            "title": "3\tDefinitions and abbreviations",
            "description": "",
            "summary": "",
            "tables": [],
            "figures_meta_data": [],
            "subsections": [
                {
                    "title": "3.1\tDefinitions",
                    "description": "",
                    "summary": "",
                    "text_content": "For the purposes of the present document, the terms and definitions given in 3GPP TR 21.905 [1] and the following apply. A term defined in the present document takes precedence over the definition of the same term, if any, in 3GPP TR 21.905 [1].\nBackground data transfer: feature that enables a 3rd party service provider to keep their costs lower by favouring time windows for data transfer to specific UEs in a geographical area during non-busy hours that are less costly and able to handle larger bitrates.\nFor the purposes of the present document, the following terms and definitions given in 3GPP TS 23.501 [2], clause 3.1 apply:\n5G System\nNetwork Function\nNF service\nNF service operation\nService based interface\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "3.2\tAbbreviations",
                    "description": "",
                    "summary": "",
                    "text_content": "For the purposes of the present document, the abbreviations given in 3GPP TR 21.905 [1] and the following apply. An abbreviation defined in the present document takes precedence over the definition of the same abbreviation, if any, in 3GPP TR 21.905 [1].\nAF\tApplication Function\nASP\tApplication Service Provider\nBDT\tBackground Data Transfer\nDNN\tData Network Name\nJSON\tJavaScript Object Notation\nNEF\tNetwork Exposure Function\nNG-RAN\tNext Generation - Radio Access Network\nNRF\tNetwork Repository Function\nNWDAF\tNetwork Data Analytics Function\nPCF\tPolicy Control Function\nSBI\tService Based Interface\nS-NSSAI\tSingle Network Slice Selection Assistance Information\nTAI\tTracking Area Identity\nUDR\tUnified Data Repository\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                }
            ]
        },
        {
            "title": "4\tBackground Data Transfer Policy Control Service",
            "description": "",
            "summary": "",
            "tables": [],
            "figures_meta_data": [],
            "subsections": [
                {
                    "title": "4.1\tService Description",
                    "description": "",
                    "summary": "",
                    "text_content": "",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": [
                        {
                            "title": "4.1.1\tOverview",
                            "text_content": "The BDT Policy Control Service, as defined in 3GPP TS 23.502 [3] and 3GPP TS 23.503 [4], is provided by the Policy Control Function (PCF).\nThis service enables the NF service consumer to negotiate policy for a future background data transfer and offers the following functionalities:\n-\tget background data transfer policies based on the request from the NF service consumer;\n-\tupdate background data transfer policies based on the selection provided by the NF service consumer; and\n-\tprovide background data transfer warning notification to trigger renegotiation of background data transfer policy.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "4.1.2\tService Architecture",
                            "text_content": "The 5G System Architecture is defined in 3GPP TS 23.501 [2]. The Policy and Charging related 5G architecture is also described in 3GPP TS 29.513 [5].\nThe BDT Policy Control Service (Npcf_BDTPolicyControl) is part of the Npcf service-based interface exhibited by the Policy Control Function (PCF).\nThe only known NF service consumer of the Npcf_BDTPolicyControl service is the Network Exposure Function (NEF).\nThe NEF accesses the BDT Policy Control Service at the PCF via the N30 Reference point. In the roaming scenario, the N30 reference point is located between the PCF and the NEF in the home network only.\nThe figure depicts a reference architecture for the Npcf_BDTPolicyControl Service, illustrating the service's components and their interconnections. The service is represented as a set of services and their respective interfaces, with the Npcf_BDTPolicyControl Service being the central service. The figure includes a representation of the service's reference architecture, including the service's components, their interconnections, and the service's interfaces.\nFigure 4.1.2-1: Reference Architecture for the Npcf_BDTPolicyControl Service; SBI representation\nThe figure depicts a reference architecture for the Npcf_BDTPolicyControl Service, illustrating the reference point representation. It includes a reference point, which is a point in the network where the control policy is applied. The architecture is designed to ensure that the control policy is applied correctly and efficiently, with the reference point acting as a central point of reference for the control policy.\nFigure 4.1.2-2: Reference Architecture for the Npcf_BDTPolicyControl Service; reference point representation\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "4.1.3\tNetwork Functions",
                            "text_content": "The Policy Control Function (PCF):\n-\tProvides background data transfer policies based on the request from the NF service consumer. The PCF determines, based on information provided by the NF service consumer and other available information (e.g. network policy, load status estimation for the requested time window, network area, etc.) one or more transfer policies.\n-\tUpdates background data transfer policy based on the selection provided by the NF service consumer.\n-\tSends the background data transfer warning notification to the NF service consumer.\nThe Network Exposure Function (NEF):\n-\trequests the PCF to provide background data transfer policies;\n-\tprovides the selected background data transfer policy to the PCF; and\n-\tindicates to the PCF whether to provide a BDT warning notification.\n",
                            "figures_meta_data": [],
                            "tables": []
                        }
                    ]
                },
                {
                    "title": "4.2\tService Operations",
                    "description": "",
                    "summary": "",
                    "text_content": "",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": [
                        {
                            "title": "4.2.1\tIntroduction",
                            "text_content": "Table 4.2.1-1: Operations of the Npcf_BDTPolicyControl Service\n\n",
                            "figures_meta_data": [],
                            "tables": [
                                {
                                    "description": "Table 4.2.1-1: Operations of the Npcf_BDTPolicyControl Service",
                                    "table number": 1,
                                    "summary": "",
                                    "name": ""
                                }
                            ]
                        },
                        {
                            "title": "4.2.2\tNpcf_BDTPolicyControl_Create service operation",
                            "text_content": "The Npcf_BDTPolicyControl_Create service operation is used by an NF service consumer to retrieve BDT policies from the PCF.\nThe following procedure using the Npcf_BDTPolicyControl_Create service operation is supported:\n-\tretrieval of BDT policies.\nThis procedure is used by the NF service consumer to request BDT policies from the PCF, as defined in 3GPP TS 23.501 [2], 3GPP TS 23.502 [3] and 3GPP TS 23.503 [4].\nFigure 4.2.2.2-1 illustrates a retrieval of BDT policies.\nThe figure depicts a retrieval of BDT policies, illustrating the process of retrieving and analyzing business-to-business (B2B) data transfer policies. The diagram shows the flow of data from the source to the destination, with various stages such as data transfer, data processing, and data storage. The figure also includes a flowchart to guide the process, with arrows indicating the direction of data flow. The B2B data transfer policies are crucial for ensuring efficient and secure data transfer between businesses, and this figure provides a visual representation of the process.\nFigure 4.2.2.2-1: Retrieval of BDT policies\nUpon reception of a Background Data Transfer request from the AF indicating a transfer policy request, the NF service consumer shall invoke the Npcf_BDTPolicyControl_Create service operation by sending an HTTP POST request to the URI representing a \"BDT policies\" collection resource of the PCF (as shown in figure 4.2.2.2-1, step 1). The NF service consumer shall include a \"BdtReqData\" data type in a content of the HTTP POST request. The \"BdtReqData\" data type shall contain:\n-\tan ASP identifier in the \"aspId\" attribute;\n-\ta volume of data per UE in the \"volPerUe\" attribute;\n-\tan expected number of UEs in the \"numOfUes\" attribute;\n-\ta desired time window in the \"desTimeInt\" attribute; and\n-\tif \"BdtNotification_5G\" feature is supported a notification URI in the \"notifUri\" attribute,\nand may include:\n-\ta network area information (e.g. list of TAIs and/or NG-RAN nodes and/or cells identifiers) in the \"nwAreaInfo\" attribute;\n-\tan identification of a group of UE(s) via an \"interGroupId\" attribute;\n-\ta traffic descriptor of background data within the \"trafficDes\" attribute;\n-\tif \"BdtNotification_5G\" feature is supported an indication whether BDT warning notification is requested in the \"warnNotifReq\" attribute; and\n-\ta DNN and an S-NSSAI, corresponding to the ASP identifier, in the \"dnn\" attribute and the \"snssai\" attribute respectively.\nIf the PCF cannot successfully fulfil the received HTTP POST request due to the internal PCF error or due to the error in the HTTP POST request, the PCF shall send the HTTP error response as specified in clause 5.7.\nOtherwise, upon the reception of the HTTP POST request from the NF service consumer indicating a BDT policies request, the PCF:\n-\tmay invoke the Nudr_DataRepository_Query service operation, as described in 3GPP TS 29.504 [11] and 3GPP TS 29.519 [12], to request from the UDR all stored transfer policies;\nNOTE 1:\tIn case only one PCF is deployed in the network, transfer policies can be locally stored in the PCF and the interaction with the UDR is not required.\n-\tshall determine one or more acceptable transfer policies based on:\na)\tinformation provided by the NF service consumer; and\nb)\tother available information (e.g. the existing transfer policies, network policy, load status estimation for the desired time window); and\n-\tshall create a BDT Reference ID.\nThe PCF shall send to the NF service consumer a \"201 Created\" response to the HTTP POST request, as shown in figure 4.2.2.2-1, step 2. The PCF shall include in the \"201 Created\" response:\n-\ta Location header field; and\n-\ta \"BdtPolicy\" data type in the response content containing the BDT Reference ID in the \"bdtRefId\" attribute and acceptable transfer policy/ies in the \"transfPolicies\" attribute.\nThe Location header field shall contain the URI of the created individual BDT policy resource i.e. \"{apiRoot}/npcf-bdtpolicycontrol/v1/bdtpolicies/{bdtPolicyId}\".\nFor each included transfer policy, the PCF shall provide:\n-\ta transfer policy ID in the \"transPolicyId\" attribute;\n-\ta recommended time window in the \"recTimeInt\" attribute; and\n-\ta reference to charging rate for the recommended time window in the \"ratingGroup\" attribute,\nand may provide a maximum aggregated bitrate for the uplink direction in the \"maxBitRateUl\" attribute and/or a maximum aggregated bitrate for the downlink direction in the \"maxBitRateDl\" attribute.\nIf the BdtNotification_5G feature is supported the PCF shall not assign value \"0\" for any transfer policy ID.\nNOTE 2:\t\tAs specified in clause 4.2.3.2, value \"0\" of transfer policy ID is reserved and indicates that no transfer policy is selected.\nThe PCF may map the ASP identifier into a target DNN and S-NSSAI based on local configuration if the NF service consumer did not provide the DNN and S-NSAAI to the PCF.\nIf the PCF included in the \"BdtPolicy\" data type:\n-\tmore than one transfer policy, the PCF shall wait for the transfer policy selected by the NF service consumer as described in clause 4.2.3; or\n-\tonly one transfer policy, the PCF may invoke the Nudr_DataRepository_Update service operation, as described in 3GPP TS 29.504 [11] and 3GPP TS 29.519 [12] clause 5.2.9.3.2, to update the UDR with the selected transfer policy, the corresponding BDT Reference ID, the volume of data per UE, the expected number of UEs and, if available, a network area information, the associated DNN and S-NSSAI for the provided ASP identifier, traffic descriptor of background data and if \"BdtNotification_5G\" feature is supported an indication whether BDT warning notification is requested.\nNOTE 3:\tIn case only one PCF is deployed in the network, transfer policies can be locally stored in the PCF and the interaction with the UDR is not required.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "4.2.3\tNpcf_BDTPolicyControl_Update service operation",
                            "text_content": "The Npcf_BDTPolicyControl_Update service operation is used by an NF service consumer to update a BDT policy to the PCF.\nThe following procedure using the Npcf_BDTPolicyControl_Update service operation are supported:\n-\tindication about selected transfer policy; and\n-\tmodification of a BDT warning notification request indication.\nWhen the feature \"PatchCorrection\" is supported, this procedure is used by the NF service consumer to inform the PCF about selected transfer policy, as defined in 3GPP TS 23.501 [2], 3GPP TS 23.502 [3] and 3GPP TS 23.503 [4], if the AF selected the transfer policy from the received transfer policy list after:\n-\tretrieval of the BDT policies as described in clause 4.2.2; or\n-\treception of the BDT warning notification as described in clause 4.2.4.\nFigure 4.2.3.2-1 illustrates an indication about selected transfer policy.\nThe figure depicts a network diagram with various components, including a base station (gNB), user equipment (UE), and scatterers. The diagram illustrates the signal propagation in a 5G network, highlighting the multi-path signal path and beamforming techniques to mitigate interference. The fiber-optic backbone architecture is shown, with core switches, optical line terminals (OLTs), and distributed nodes. Redundancy paths are depicted in dashed lines, ensuring failover reliability. The layered design aligns with SDN principles.\nFigure 4.2.3.2-1: Indication about selected transfer policy\nUpon reception of a Background Data Transfer request from the AF indicating transfer policy selection, the NF service consumer shall invoke the Npcf_BDTPolicyControl_Update service operation by sending an HTTP PATCH request to the PCF, as shown in figure 4.2.3.2-1, step 1. The NF service consumer shall set the request URI to \"{apiRoot}/npcf-bdtpolicycontrol/v1/bdtpolicies/{bdtPolicyId}\".\nThe NF service consumer shall include a \"PatchBdtPolicy\" data type in a content of the HTTP PATCH request. When the AF selects a transfer policy, the \"PatchBdtPolicy\" data type shall contain a \"bdtPolData\" attribute which shall encode the transfer policy ID of the selected transfer policy in the \"selTransPolicyId\" attribute. In the case of transfer policy re-negotiation and if the BdtNotification_5G feature is supported and the AF did not select any transfer policy, the NF service consumer shall set the \"selTransPolicyId\" attribute to value \"0\" to indicate no transfer policy is selected.\nIf the PCF cannot successfully fulfil the received HTTP PATCH request due to the internal PCF error or due to the error in the HTTP PATCH request, the PCF shall send the HTTP error response as specified in clause 5.7.\nIf the feature \"ES3XX\" is supported, and the PCF determines the received HTTP PATCH request needs to be redirected, the PCF shall send an HTTP redirect response as specified in clause 6.10.9 of 3GPP TS 29.500 [6].\nOtherwise, upon the reception of the HTTP PATCH request from the NF service consumer, the PCF:\n-\tin case of the initial transfer policy negotiation may invoke the Nudr_DataRepository_Update service operation, as described in 3GPP TS 29.504 [11] and 3GPP TS 29.519 [12] clause 5.2.9.3.2, to update the UDR with the selected transfer policy, the corresponding BDT Reference ID, the volume of data per UE, the expected number of UEs and, if available, a network area information, the associated DNN and S-NSSAI for the provided ASP identifier, traffic descriptor of background data and if \"BdtNotification_5G\" feature is supported an indication whether BDT warning notification is requested; or\n-\tin case of transfer policy re-negotiation may invoke:\na)\tif a transfer policy is selected the Nudr_DataRepository_Update service operation, as described in 3GPP TS 29.504 [11] and 3GPP TS 29.519 [12] clause 5.2.9.3.4, to update the UDR with the selected candidate transfer policy and set the \"bdtpStatus\" attribute to value \"VALID\" within the BdtDataPatch data type; or\nb)\tif no transfer policy is selected the Nudr_DataRepository_Delete service operation, as described in 3GPP TS 29.504 [11] and 3GPP TS 29.519 [12] clause 5.2.9.3.3, to remove the transfer policy from the UDR; and\nNOTE:\tIn case only one PCF is deployed in the network, transfer policies can be locally stored in the PCF and the interaction with the UDR is not required.\n-\tshall send:\na)\ta \"204 No Content\" response (as shown in figure 4.2.3.2-1, step 2a); or\nb)\ta \"200 OK\" response (as shown in figure 4.2.3.2-1, step 2b) with a \"BdtPolicy\" data type in the content,\nto the HTTP PATCH request to the NF service consumer.\nThis procedure is used by an AF to modify a BDT warning notification request indication when the feature \"BdtNotification_5G\" and the feature \"PatchCorrection\" are supported.\nUpon reception of a request from the AF to modify the BDT warning notification request indication, the NF service consumer shall invoke the Npcf_BDTPolicyControl_Update service operation by sending an HTTP PATCH request to the PCF, as described in clause 4.2.3.2. The NF service consumer shall indicate whether a BDT warning notification shall be enabled or disabled by including the \"warnNotifReq\" attribute in the \"bdtReqData\" attribute of the \"PatchBdtPolicy\" data type.\nIf the BDT warning notification is not required anymore the NF service consumer shall set the value of the \"warnNotifReq\" attribute to \"false\".\nIf the BDT warning notification is again required the NF service consumer shall set the value of the \"warnNotifReq\" attribute to \"true\".\nUpon the reception of the HTTP PATCH request from the NF service consumer indicating a modification of the BDT warning notification request indication, the PCF shall:\n-\tacknowledge that request by sending an HTTP response message as described in clause 4.2.3.2; and\n-\tif the PCF invoked the Nudr_DataRepository_Update service operation during the initial transfer policy negotiation, invoke the Nudr_DataRepository_Update service operation, as described in 3GPP TS 29.504 [11] and 3GPP TS 29.519 [12] clause 5.2.9.3.4, to update the UDR with the modified BDT warning notification request indication.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "4.2.4\tNpcf_BDTPolicyControl_Notify service operation",
                            "text_content": "The Npcf_BDTPolicyControl_Notify service operation is used by the PCF to send the BDT notification to the NF service consumer.\nThe following procedure using the Npcf_BDTPolicyControl_Notify service operation is supported:\n-\tsending the BDT warning notification to the NF service consumer.\nThis procedure is used by the PCF to inform the NF service consumer that network performance in the area of interest goes below the criteria set by the operator, as defined in clause 6.1.2.4 of 3GPP TS 23.503 [4].\nFigure 4.2.4.2-1 illustrates a BDT warning notification from the PCF.\nThe figure depicts a BDT warning notification, which is a critical alert indicating a potential data breach. The notification is displayed on a digital screen, highlighting the severity of the situation and prompting immediate action. The figure's design includes a clear and concise message, ensuring that the user can quickly understand the situation and take appropriate action.\nFigure 4.2.4.2-1: BDT warning notification\nWhen the PCF knows that the network performance in the area of interest goes below the criteria set by the operator from the NWDAF as described in 3GPP TS 29.520 [22] and if the BDT warning notification is enabled, the PCF may try to re-negotiate the affected BDT policies with the affected AFs. To do this, the PCF retrieves all the background transfer policies together with their additionally stored AF provided information for BDT policy decision (e.g. their corresponding desired time window, the number of UEs, the volume of data per UE, etc.) from the UDR, identifies the BDT policy(ies) that are not desirable anymore due to the degradation of the network performance and tries to calculate one or more new candidate BDT policies based on the AF provided information, the background transfer policies retrieved from the UDR and the current network performance as follows:\n-\tIf the BDT policies retrieved from the UDR include the \"bdtpStatus\" attribute indicating the BDT policy is invalid, the PCF may calculate one or more new candidate BDT policies without considering the invalid BDT policy.\n-\tIf the PCF does not find any new candidate BDT policies, the previously negotiated BDT policy shall be kept and no interaction with the AF shall occur.\nIf one or more new candidate BDT policies are calculated, the PCF shall:\n-\tif the PCF has not locally stored the background transfer policies, invoke the Nudr_DataRepository_Update service operation, as described in 3GPP TS 29.504 [11] and 3GPP TS 29.519 [12] clause 5.2.9.3.4, to invalidate the affected background transfer policy stored in the UDR by including the \"bdtpStatus\" attribute set to value \"INVALID\" within the BdtDataPatch data type; and\n-\tinvoke the Npcf_BDTPolicyControl_Notify service operation by sending the HTTP POST request with the BDT warning notification to the NF service consumer so that the NF service consumer can notify the AF.\nThe PCF shall include a \"Notification\" data type in a content of the HTTP POST request.\nThe \"Notification\" data type provided in the request body:\n-\tshall contain the BDT Reference ID of the impacted transfer policy within the \"bdtRefId\" attribute;\n-\tmay contain the time window when the network performance will go below the criteria set by the operator within the \"timeWindow\" attribute;\n-\tmay contain the network area where the network performance will go below the criteria set by the operator within the \"nwAreaInfo\" attribute; and\n-\tmay contain the list of candidate transfer policies in the \"candPolicies\" attribute.\nNOTE:\tThe AF might select a new background transfer policy or might not select any new background transfer policy from the offered candidate list when receives the BDT warning notification.\nUpon the reception of the HTTP POST request from the PCF, the NF service consumer shall acknowledge that request by sending an HTTP response message with the corresponding status code.\nIf the HTTP POST request from the PCF is accepted, the NF service consumer shall acknowledge the receipt of the notification with a \"204 No Content\" response to HTTP POST request, as shown in figure 4.2.4.2-1, step 2.\nIf the HTTP POST request from the PCF is not accepted, the NF service consumer shall send an HTTP error response as specified in clause 5.7.\nIf the feature \"ES3XX\" is supported, and the NF service consumer determines the received HTTP POST request needs to be redirected, the NF service consumer shall send an HTTP redirect response as specified in clause 6.10.9 of 3GPP TS 29.500 [6].\n",
                            "figures_meta_data": [],
                            "tables": []
                        }
                    ]
                }
            ]
        },
        {
            "title": "5\tNpcf_BDTPolicyControl API",
            "description": "",
            "summary": "",
            "tables": [],
            "figures_meta_data": [],
            "subsections": [
                {
                    "title": "5.1\tIntroduction",
                    "description": "",
                    "summary": "",
                    "text_content": "The BDT Policy Control Service shall use the Npcf_BDTPolicyControl API.\nThe API URI of the Npcf_BDTPolicyControl API shall be:\n{apiRoot}/<apiName>/<apiVersion>\nThe request URI used in each HTTP request from the NF service consumer towards the PCF shall have the structure defined in clause 4.4.1 of 3GPP TS 29.501 [7], i.e.:\n{apiRoot}/<apiName>/<apiVersion>/<apiSpecificResourceUriPart>\nwith the following components:\n-\tThe {apiRoot} shall be set as described in 3GPP TS 29.501 [7].\n-\tThe <apiName> shall be \"npcf-bdtpolicycontrol\".\n-\tThe <apiVersion> shall be \"v1\".\n-\tThe <apiSpecificResourceUriPart> shall be set as described in clause 5.3.\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "5.2\tUsage of HTTP",
                    "description": "",
                    "summary": "",
                    "text_content": "",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": [
                        {
                            "title": "5.2.1\tGeneral",
                            "text_content": "HTTP/2, IETF RFC 9113 [8], shall be used as specified in clause 5.2 of 3GPP TS 29.500 [6].\nHTTP/2 shall be transported as specified in clause 5.3 of 3GPP TS 29.500 [6].\nThe OpenAPI [10] specification of HTTP messages and content bodies for the Npcf_BDTPolicyControl is contained in Annex A.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "5.2.2\tHTTP standard headers",
                            "text_content": "See clause 5.2.2 of 3GPP TS 29.500 [6] for the usage of HTTP standard headers.\nJSON, IETF RFC 8259 [9], shall be used as content type of the HTTP bodies specified in the present specification as specified in clause 5.4 of 3GPP TS 29.500 [6]. The use of the JSON format shall be signalled by the content type \"application/json\".\nJSON object used in the HTTP PATCH request shall be encoded according to \"JSON Merge Patch\" and shall be signalled by the content type \"application/merge-patch+json\", as defined in IETF RFC 7396 [15].\n\"Problem Details\" JSON object shall be used to indicate additional details of the error in a HTTP response body and shall be signalled by the content type \"application/problem+json\", as defined in IETF RFC 9457 [17].\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "5.2.3\tHTTP custom headers",
                            "text_content": "The Npcf_BDTPolicyControl API shall support mandatory HTTP custom header fields specified in clause 5.2.3.2 of 3GPP TS 29.500 [6] and may support optional HTTP custom header fields specified in clause 5.2.3.3 of 3GPP TS 29.500 [6].\nIn this Release of the specification, no specific custom headers are defined for the Npcf_BDTPolicyControl API.\n",
                            "figures_meta_data": [],
                            "tables": []
                        }
                    ]
                },
                {
                    "title": "5.3\tResources",
                    "description": "",
                    "summary": "",
                    "text_content": "",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": [
                        {
                            "title": "5.3.1\tResource Structure",
                            "text_content": "This clause describes the structure for the Resource URIs and the resources and methods used for the service.\nFigure 5.3.1-1 depicts the resource URIs structure for the Npcf_BDTPolicyControl API.\nThe figure depicts the resource URI structure of the Npcf_BDTPolicyControl API, which is used to control the behavior of a BDT policy in a network. The structure includes the URI for the policy, the URI for the policy control, and the URI for the policy execution. This information is crucial for developers to understand the API's functionality and to implement it correctly.\nFigure 5.3.1-1: Resource URI structure of the Npcf_BDTPolicyControl API\nTable 5.3.1-1 provides an overview of the resources and applicable HTTP methods.\nTable 5.3.1-1: Resources and methods overview\n\n",
                            "figures_meta_data": [],
                            "tables": [
                                {
                                    "description": "Table 5.3.1-1: Resources and methods overview",
                                    "table number": 2,
                                    "summary": "",
                                    "name": ""
                                }
                            ]
                        },
                        {
                            "title": "5.3.2\tResource: BDT policies (Collection)",
                            "text_content": "The BDT policies resource represents all the transfer policies that exist in the BDT Policy Control service at a given PCF instance.\nResource URI: {apiRoot}/npcf-bdtpolicycontrol/v1/bdtpolicies\nThis resource shall support the resource URI variables defined in table 5.3.2.2-1.\nTable 5.3.2.2-1: Resource URI variables for this resource\n\nThis method shall support the URI query parameters specified in table 5.3.2.3.1-1.\nTable 5.3.2.3.1-1: URI query parameters supported by the POST method on this resource\n\nThis method shall support the request data structures specified in table 5.3.2.3.1-2 and the response data structures and response codes specified in table 5.3.2.3.1-3.\nTable 5.3.2.3.1-2: Data structures supported by the POST Request Body on this resource\n\nTable 5.3.2.3.1-3: Data structures supported by the POST Response Body on this resource\n\nTable 5.3.2.3.1-4: Headers supported by the 201 Response Code on this resource\n\nTable 5.3.2.3.1-5: Headers supported by the 303 Response Code on this resource\n\nNone.\n",
                            "figures_meta_data": [],
                            "tables": [
                                {
                                    "description": "Table 5.3.2.2-1: Resource URI variables for this resource",
                                    "table number": 3,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 5.3.2.3.1-1: URI query parameters supported by the POST method on this resource",
                                    "table number": 4,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 5.3.2.3.1-2: Data structures supported by the POST Request Body on this resource",
                                    "table number": 5,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 5.3.2.3.1-3: Data structures supported by the POST Response Body on this resource",
                                    "table number": 6,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 5.3.2.3.1-4: Headers supported by the 201 Response Code on this resource",
                                    "table number": 7,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 5.3.2.3.1-5: Headers supported by the 303 Response Code on this resource",
                                    "table number": 8,
                                    "summary": "",
                                    "name": ""
                                }
                            ]
                        },
                        {
                            "title": "5.3.3\tResource: Individual BDT policy (Document)",
                            "text_content": "The Individual BDT policy resource represents the transfer policies that exist in the BDT Policy Control service at a given PCF instance.\nResource URI: {apiRoot}/npcf-bdtpolicycontrol/v1/bdtpolicies/{bdtPolicyId}\nThis resource shall support the resource URI variables defined in table 5.3.3.2-1.\nTable 5.3.3.2-1: Resource URI variables for this resource\n\nThis method shall support the URI query parameters specified in table 5.3.3.3.1-1.\nTable 5.3.3.3.1-1: URI query parameters supported by the GET method on this resource\n\nThis method shall support the request data structures specified in table 5.3.3.3.1-2 and the response data structures and response codes specified in table 5.3.3.3.1-3.\nTable 5.3.3.3.1-2: Data structures supported by the GET Request Body on this resource\n\nTable 5.3.3.3.1-3: Data structures supported by the GET Response Body on this resource\n\nTable 5.3.3.3.1-4: Headers supported by the 307 Response Code on this resource\n\nTable 5.3.3.3.1-5: Headers supported by the 308 Response Code on this resource\n\nThis method shall support the URI query parameters specified in table 5.3.3.3.2-1.\nTable 5.3.3.3.2-1: URI query parameters supported by the PATCH method on this resource\n\nThis method shall support the request data structures specified in table 5.3.3.3.2-2 and the response data structures and response codes specified in table 5.3.3.3.2-3.\nTable 5.3.3.3.2-2: Data structures supported by the PATCH Request Body on this resource\n\nTable 5.3.3.3.2-3: Data structures supported by the PATCH Response Body on this resource\n\nTable 5.3.3.3.2-4: Headers supported by the 307 Response Code on this resource\n\nTable 5.3.3.3.2-5: Headers supported by the 308 Response Code on this resource\n\n",
                            "figures_meta_data": [],
                            "tables": [
                                {
                                    "description": "Table 5.3.3.2-1: Resource URI variables for this resource",
                                    "table number": 9,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 5.3.3.3.1-1: URI query parameters supported by the GET method on this resource",
                                    "table number": 10,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 5.3.3.3.1-2: Data structures supported by the GET Request Body on this resource",
                                    "table number": 11,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 5.3.3.3.1-3: Data structures supported by the GET Response Body on this resource",
                                    "table number": 12,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 5.3.3.3.1-4: Headers supported by the 307 Response Code on this resource",
                                    "table number": 13,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 5.3.3.3.1-5: Headers supported by the 308 Response Code on this resource",
                                    "table number": 14,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 5.3.3.3.2-1: URI query parameters supported by the PATCH method on this resource",
                                    "table number": 15,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 5.3.3.3.2-2: Data structures supported by the PATCH Request Body on this resource",
                                    "table number": 16,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 5.3.3.3.2-3: Data structures supported by the PATCH Response Body on this resource",
                                    "table number": 17,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 5.3.3.3.2-4: Headers supported by the 307 Response Code on this resource",
                                    "table number": 18,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 5.3.3.3.2-5: Headers supported by the 308 Response Code on this resource",
                                    "table number": 19,
                                    "summary": "",
                                    "name": ""
                                }
                            ]
                        }
                    ]
                },
                {
                    "title": "5.4\tCustom Operations without associated resources",
                    "description": "",
                    "summary": "",
                    "text_content": "No custom operation is defined in this Release of the specification.\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "5.5\tNotifications",
                    "description": "",
                    "summary": "",
                    "text_content": "",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": [
                        {
                            "title": "5.5.1\tGeneral",
                            "text_content": "Notifications shall comply to clause 6.2 of 3GPP TS 29.500 [6] and clause 4.6.2.3 of 3GPP TS 29.501 [7].\nTable 5.5.1-1: Notifications overview\n\n",
                            "figures_meta_data": [],
                            "tables": [
                                {
                                    "description": "Table 5.5.1-1: Notifications overview",
                                    "table number": 20,
                                    "summary": "",
                                    "name": ""
                                }
                            ]
                        },
                        {
                            "title": "5.5.2\tBDT Notification",
                            "text_content": "The BDT Notification is used by the PCF to notify the NF service consumer about changed conditions for background data transfer e.g. that a network performance in the area of interest goes below the criteria set by the operator.\nThe Callback URI \"{notifUri}\" shall be used with the callback URI variables defined in table 5.5.2.2-1.\nTable 5.5.2.2-1: Callback URI variables\n\nThis method shall support the URI query parameters specified in table 5.5.2.3.1-1.\nTable 5.5.2.3.1-1: URI query parameters supported by the POST method on this resource\n\nThis method shall support the request data structures specified in table 5.5.2.3.1-2 and the response data structures and response codes specified in table 5.5.2.3.1-3.\nTable 5.5.2.3.1-2: Data structures supported by the POST Request Body on this resource\n\nTable 5.5.2.3.1-3: Data structures supported by the POST Response Body on this resource\n\nTable 5.5.2.3.1-4: Headers supported by the 307 Response Code on this resource\n\nTable 5.5.2.3.1-5: Headers supported by the 308 Response Code on this resource\n\n",
                            "figures_meta_data": [],
                            "tables": [
                                {
                                    "description": "Table 5.5.2.2-1: Callback URI variables",
                                    "table number": 21,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 5.5.2.3.1-1: URI query parameters supported by the POST method on this resource",
                                    "table number": 22,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 5.5.2.3.1-2: Data structures supported by the POST Request Body on this resource",
                                    "table number": 23,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 5.5.2.3.1-3: Data structures supported by the POST Response Body on this resource",
                                    "table number": 24,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 5.5.2.3.1-4: Headers supported by the 307 Response Code on this resource",
                                    "table number": 25,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 5.5.2.3.1-5: Headers supported by the 308 Response Code on this resource",
                                    "table number": 26,
                                    "summary": "",
                                    "name": ""
                                }
                            ]
                        }
                    ]
                },
                {
                    "title": "5.6\tData Model",
                    "description": "",
                    "summary": "",
                    "text_content": "",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": [
                        {
                            "title": "5.6.1\tGeneral",
                            "text_content": "This clause specifies the application data model supported by the API.\nTable 5.6.1-1 specifies the data types defined for the Npcf_BDTPolicyControl service based interface protocol.\nTable 5.6.1-1: Npcf_BDTPolicyControl specific Data Types\n\nTable 5.6.1-2 specifies data types re-used by the Npcf_BDTPolicyControl service based interface protocol from other specifications, including a reference to their respective specifications and when needed, a short description of their use within the Npcf_BDTPolicyControl service based interface.\nTable 5.6.1-2: Npcf_BDTPolicyControl re-used Data Types\n\n",
                            "figures_meta_data": [],
                            "tables": [
                                {
                                    "description": "Table 5.6.1-1: Npcf_BDTPolicyControl specific Data Types",
                                    "table number": 27,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 5.6.1-2: Npcf_BDTPolicyControl re-used Data Types",
                                    "table number": 28,
                                    "summary": "",
                                    "name": ""
                                }
                            ]
                        },
                        {
                            "title": "5.6.2\tStructured data types",
                            "text_content": "This clause defines the structures to be used in resource representations.\nTable 5.6.2.2-1: Definition of type BdtPolicy\n\nTable 5.6.2.3-1: Definition of type BdtReqData\n\nTable 5.6.2.4-1: Definition of type BdtPolicyData\n\nTable 5.6.2.5-1: Definition of type TransferPolicy\n\nTable 5.6.2.6-1: Definition of type BdtPolicyDataPatch\n\nTable 5.6.2.8-1: Definition of type NetworkAreaInfo\n\nTable 5.6.2.10-1: Definition of type Notification\n\nTable 5.6.2.11-1: Definition of type PatchBdtPolicy\n\nTable 5.6.2.12-1: Definition of type BdtReqDataPatch\n\n",
                            "figures_meta_data": [],
                            "tables": [
                                {
                                    "description": "Table 5.6.2.2-1: Definition of type BdtPolicy",
                                    "table number": 29,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 5.6.2.3-1: Definition of type BdtReqData",
                                    "table number": 30,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 5.6.2.4-1: Definition of type BdtPolicyData",
                                    "table number": 31,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 5.6.2.5-1: Definition of type TransferPolicy",
                                    "table number": 32,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 5.6.2.6-1: Definition of type BdtPolicyDataPatch",
                                    "table number": 33,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 5.6.2.8-1: Definition of type NetworkAreaInfo",
                                    "table number": 34,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 5.6.2.10-1: Definition of type Notification",
                                    "table number": 35,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 5.6.2.11-1: Definition of type PatchBdtPolicy",
                                    "table number": 36,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 5.6.2.12-1: Definition of type BdtReqDataPatch",
                                    "table number": 37,
                                    "summary": "",
                                    "name": ""
                                }
                            ]
                        },
                        {
                            "title": "5.6.3\tSimple data types and enumerations",
                            "text_content": "This clause defines simple data types and enumerations that can be referenced from data structures defined in the previous clauses.\nThe simple data types defined in table 5.6.3.2-1 shall be supported.\nTable 5.6.3.2-1: Simple data types\n\n",
                            "figures_meta_data": [],
                            "tables": [
                                {
                                    "description": "Table 5.6.3.2-1: Simple data types",
                                    "table number": 38,
                                    "summary": "",
                                    "name": ""
                                }
                            ]
                        }
                    ]
                },
                {
                    "title": "5.7\tError handling",
                    "description": "",
                    "summary": "",
                    "text_content": "",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": [
                        {
                            "title": "5.7.1\tGeneral",
                            "text_content": "HTTP error handling shall be supported as specified in clause 5.2.4 of 3GPP TS 29.500 [6].\nFor the Npcf_BDTPolicyControl API, HTTP error responses shall be supported as specified in clause 4.8 of 3GPP TS 29.501 [7].\nProtocol errors and application errors specified in table 5.2.7.2-1 of 3GPP TS 29.500 [6] shall be supported for an HTTP method if the corresponding HTTP status codes are specified as mandatory for that HTTP method in table 5.2.7.1-1 of 3GPP TS 29.500 [6].\nIn addition, the requirements in the following clauses shall apply.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "5.7.2\tProtocol Errors",
                            "text_content": "In this Release of the specification, there are no additional protocol errors applicable for the Npcf_BDTPolicyControl API.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "5.7.3\tApplication Errors",
                            "text_content": "The application errors defined for the Npcf_BDTPolicyControl API are listed in table 5.7.3-1.\nTable 5.7.3-1: Application errors\n\n",
                            "figures_meta_data": [],
                            "tables": [
                                {
                                    "description": "Table 5.7.3-1: Application errors",
                                    "table number": 39,
                                    "summary": "",
                                    "name": ""
                                }
                            ]
                        }
                    ]
                },
                {
                    "title": "5.8\tFeature negotiation",
                    "description": "",
                    "summary": "",
                    "text_content": "The optional features in table 5.8-1 are defined for the Npcf_BDTPolicyControl API. They shall be negotiated using the extensibility mechanism defined in clause 6.6.2 of 3GPP TS 29.500 [6].\nWhen requesting the PCF to create an Individual BDT policy resource the NF service consumer shall indicate the optional features the NF service consumer supports for the Npcf_BDTPolicyControl service by including the \"suppFeat\" attribute in the \"BdtReqData\" data type of the HTTP POST request.\nThe PCF shall determine the supported features for the created Individual BDT policy resource as specified in clause 6.6.2 of 3GPP TS 29.500 [6]. The PCF shall indicate the supported features in the HTTP response confirming the creation of the Individual BDT policy resource by including the \"suppFeat\" attribute in the \"BdtPolicyData\" data type.\nTable 5.8-1: Supported Features\n\n",
                    "tables": [
                        {
                            "description": "Table 5.8-1: Supported Features",
                            "table number": 40,
                            "summary": "",
                            "name": ""
                        }
                    ],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "5.9\tSecurity",
                    "description": "",
                    "summary": "",
                    "text_content": "As indicated in 3GPP TS 33.501 [18] and 3GPP TS 29.500 [6], the access to the Npcf_BDTPolicyControl API, based on local configuration, may be authorized by means of the OAuth2 protocol (see IETF RFC 6749 [19]), using the \"Client Credentials\" authorization grant, where the NRF (see 3GPP TS 29.510 [20]) plays the role of the authorization server.\nIf OAuth2 authorization is used, an NF service consumer, prior to consuming services offered by the Npcf_BDTPolicyControl API, shall obtain a \"token\" from the authorization server, by invoking the Access Token Request service, as described in 3GPP TS 29.510 [20], clause 5.4.2.2.\nNOTE:\tWhen multiple NRFs are deployed in a network, the NRF used as authorization server is the same NRF that the NF service consumer used for discovering the Npcf_BDTPolicyControl service.\nThe Npcf_BDTPolicyControl API defines a single scope \"npcf-bdtpolicycontrol\" for OAuth2 authorization (as specified in 3GPP TS 33.501 [18]) for the entire API, and it does not define any additional scopes at resource or operation level.\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                }
            ]
        },
        {
            "title": "A.1\tGeneral",
            "description": "The present Annex contains an OpenAPI [10] specification of HTTP messages and content bodies used by the Npcf_BDTPolicyControl API.\nThis Annex shall take precedence when being discrepant to other parts of the specification with respect to the encoding of information elements and methods within the API.\nNOTE:\tThe semantics and procedures, as well as conditions, e.g. for the applicability and allowed combinations of attributes or values, not expressed in the OpenAPI definitions but defined in other parts of the specification also apply.\nInformative copies of the OpenAPI specification file contained in this 3GPP Technical Specification are available on a Git-based repository that uses the GitLab software version control system (see clause 5B of the 3GPP TR 21.900 [21] and clause 5.3.1 of the 3GPP TS 29.501 [7] for further information).\n",
            "summary": "",
            "tables": [],
            "figures_meta_data": [],
            "subsections": []
        },
        {
            "title": "A.2\tNpcf_BDTPolicyControl API",
            "description": "openapi: 3.0.0\n\ninfo:\ntitle: Npcf_BDTPolicyControl Service API\nversion: 1.3.0-alpha.1\ndescription: |\nPCF BDT Policy Control Service.\n© 2022, 3GPP Organizational Partners (ARIB, ATIS, CCSA, ETSI, TSDSI, TTA, TTC).\nAll rights reserved.\n\nexternalDocs:\ndescription: >\n3GPP TS 29.554 V18.0.0; 5G System; Background Data Transfer Policy Control Service.\nurl: 'https://www.3gpp.org/ftp/Specs/archive/29_series/29.554/'\n\nservers:\n- url: '{apiRoot}/npcf-bdtpolicycontrol/v1'\nvariables:\napiRoot:\ndefault: https://example.com\ndescription: apiRoot as defined in clause 4.4 of 3GPP TS 29.501.\n\nsecurity:\n- {}\n- oAuth2ClientCredentials:\n- npcf-bdtpolicycontrol\n\npaths:\n/bdtpolicies:\npost:\nsummary: Create a new Individual BDT policy\noperationId: CreateBDTPolicy\ntags:\n- BDT policies (Collection)\nrequestBody:\ndescription: >\nContains information for the creation of a new Individual BDT policy resource.\nrequired: true\ncontent:\napplication/json:\nschema:\n$ref: '#/components/schemas/BdtReqData'\nresponses:\n'201':\ndescription: Background data transfer policies offered to an ASP.\ncontent:\napplication/json:\nschema:\n$ref: '#/components/schemas/BdtPolicy'\nheaders:\nLocation:\ndescription: >\nContains the URI of the created individual BDT policy resource,\naccording to the structure\n{apiRoot}/npcf-bdtpolicycontrol/v1/bdtpolicies/{bdtPolicyId}\nrequired: true\nschema:\ntype: string\n'303':\ndescription: >\nSee Other. The result of the POST request would be equivalent to the\nexisting Individual BDT policy resource.\nheaders:\nLocation:\ndescription: Contains the URI of the existing individual BDT policy resource.\nrequired: true\nschema:\ntype: string\n'400':\n$ref: 'TS29571_CommonData.yaml#/components/responses/400'\n'401':\n$ref: 'TS29571_CommonData.yaml#/components/responses/401'\n'403':\n$ref: 'TS29571_CommonData.yaml#/components/responses/403'\n'404':\n$ref: 'TS29571_CommonData.yaml#/components/responses/404'\n'411':\n$ref: 'TS29571_CommonData.yaml#/components/responses/411'\n'413':\n$ref: 'TS29571_CommonData.yaml#/components/responses/413'\n'415':\n$ref: 'TS29571_CommonData.yaml#/components/responses/415'\n'429':\n$ref: 'TS29571_CommonData.yaml#/components/responses/429'\n'500':\n$ref: 'TS29571_CommonData.yaml#/components/responses/500'\n'502':\n$ref: 'TS29571_CommonData.yaml#/components/responses/502'\n'503':\n$ref: 'TS29571_CommonData.yaml#/components/responses/503'\ndefault:\n$ref: 'TS29571_CommonData.yaml#/components/responses/default'\ncallbacks:\nBdtNotification:\n'{$request.body#/notifUri}':\npost:\nrequestBody:\nrequired: true\ncontent:\napplication/json:\nschema:\n$ref: '#/components/schemas/Notification'\nresponses:\n'204':\ndescription: No Content, a reception of the BDT notification was successful.\n'307':\n$ref: 'TS29571_CommonData.yaml#/components/responses/307'\n'308':\n$ref: 'TS29571_CommonData.yaml#/components/responses/308'\n'400':\n$ref: 'TS29571_CommonData.yaml#/components/responses/400'\n'401':\n$ref: 'TS29571_CommonData.yaml#/components/responses/401'\n'403':\n$ref: 'TS29571_CommonData.yaml#/components/responses/403'\n'404':\n$ref: 'TS29571_CommonData.yaml#/components/responses/404'\n'411':\n$ref: 'TS29571_CommonData.yaml#/components/responses/411'\n'413':\n$ref: 'TS29571_CommonData.yaml#/components/responses/413'\n'415':\n$ref: 'TS29571_CommonData.yaml#/components/responses/415'\n'429':\n$ref: 'TS29571_CommonData.yaml#/components/responses/429'\n'500':\n$ref: 'TS29571_CommonData.yaml#/components/responses/500'\n'502':\n$ref: 'TS29571_CommonData.yaml#/components/responses/502'\n'503':\n$ref: 'TS29571_CommonData.yaml#/components/responses/503'\ndefault:\n$ref: 'TS29571_CommonData.yaml#/components/responses/default'\n\n/bdtpolicies/{bdtPolicyId}:\nget:\nsummary: Read an Individual BDT policy\noperationId: GetBDTPolicy\ntags:\n- Individual BDT policy (Document)\nparameters:\n- name: bdtPolicyId\ndescription: String identifying the individual BDT policy resource in the PCF.\nin: path\nrequired: true\nschema:\ntype: string\nresponses:\n'200':\ndescription: Background data transfer policies offered to and selected by an ASP.\ncontent:\napplication/json:\nschema:\n$ref: '#/components/schemas/BdtPolicy'\n'307':\n$ref: 'TS29571_CommonData.yaml#/components/responses/307'\n'308':\n$ref: 'TS29571_CommonData.yaml#/components/responses/308'\n'400':\n$ref: 'TS29571_CommonData.yaml#/components/responses/400'\n'401':\n$ref: 'TS29571_CommonData.yaml#/components/responses/401'\n'403':\n$ref: 'TS29571_CommonData.yaml#/components/responses/403'\n'404':\n$ref: 'TS29571_CommonData.yaml#/components/responses/404'\n'406':\n$ref: 'TS29571_CommonData.yaml#/components/responses/406'\n'429':\n$ref: 'TS29571_CommonData.yaml#/components/responses/429'\n'500':\n$ref: 'TS29571_CommonData.yaml#/components/responses/500'\n'502':\n$ref: 'TS29571_CommonData.yaml#/components/responses/502'\n'503':\n$ref: 'TS29571_CommonData.yaml#/components/responses/503'\ndefault:\n$ref: 'TS29571_CommonData.yaml#/components/responses/default'\npatch:\nsummary: Update an Individual BDT policy\noperationId: UpdateBDTPolicy\ntags:\n- Individual BDT policy (Document)\nparameters:\n- name: bdtPolicyId\ndescription: String identifying the individual BDT policy resource in the PCF.\nin: path\nrequired: true\nschema:\ntype: string\nrequestBody:\ndescription: >\nContains modification instruction to be performed on the BdtPolicy data\nstructure to select a transfer policy and in addition, may indicate whether\nthe BDT warning notification is enabled or disabled.\nrequired: true\ncontent:\napplication/merge-patch+json:\nschema:\n$ref: '#/components/schemas/PatchBdtPolicy'\nresponses:\n'200':\ndescription: >\nThe Individual BDT Policy resource is modified and a representation of that\nresource is returned.\ncontent:\napplication/json:\nschema:\n$ref: '#/components/schemas/BdtPolicy'\n'204':\ndescription: The Individual BDT Policy resource is modified.\n'307':\n$ref: 'TS29571_CommonData.yaml#/components/responses/307'\n'308':\n$ref: 'TS29571_CommonData.yaml#/components/responses/308'\n'400':\n$ref: 'TS29571_CommonData.yaml#/components/responses/400'\n'401':\n$ref: 'TS29571_CommonData.yaml#/components/responses/401'\n'403':\n$ref: 'TS29571_CommonData.yaml#/components/responses/403'\n'404':\n$ref: 'TS29571_CommonData.yaml#/components/responses/404'\n'411':\n$ref: 'TS29571_CommonData.yaml#/components/responses/411'\n'413':\n$ref: 'TS29571_CommonData.yaml#/components/responses/413'\n'415':\n$ref: 'TS29571_CommonData.yaml#/components/responses/415'\n'429':\n$ref: 'TS29571_CommonData.yaml#/components/responses/429'\n'500':\n$ref: 'TS29571_CommonData.yaml#/components/responses/500'\n'502':\n$ref: 'TS29571_CommonData.yaml#/components/responses/502'\n'503':\n$ref: 'TS29571_CommonData.yaml#/components/responses/503'\ndefault:\n$ref: 'TS29571_CommonData.yaml#/components/responses/default'\n\ncomponents:\n\nsecuritySchemes:\noAuth2ClientCredentials:\ntype: oauth2\nflows:\nclientCredentials:\ntokenUrl: '{nrfApiRoot}/oauth2/token'\nscopes:\nnpcf-bdtpolicycontrol: Access to the Npcf_BDTPolicyControl API\n\nschemas:\n\n# Structured data types\n\nBdtPolicy:\ndescription: Represents an Individual BDT policy resource.\ntype: object\nproperties:\nbdtPolData:\n$ref: '#/components/schemas/BdtPolicyData'\nbdtReqData:\n$ref: '#/components/schemas/BdtReqData'\n\nBdtReqData:\ndescription: >\nContains service requirements for creation a new Individual BDT policy resource.\ntype: object\nrequired:\n- aspId\n- desTimeInt\n- numOfUes\n- volPerUe\nproperties:\naspId:\n$ref: '#/components/schemas/AspId'\ndesTimeInt:\n$ref: 'TS29122_CommonData.yaml#/components/schemas/TimeWindow'\ndnn:\n$ref: 'TS29571_CommonData.yaml#/components/schemas/Dnn'\ninterGroupId:\n$ref: 'TS29571_CommonData.yaml#/components/schemas/GroupId'\nnotifUri:\n$ref: 'TS29571_CommonData.yaml#/components/schemas/Uri'\nnwAreaInfo:\n$ref: '#/components/schemas/NetworkAreaInfo'\nnumOfUes:\ndescription: Indicates a number of UEs.\ntype: integer\nvolPerUe:\n$ref: 'TS29122_CommonData.yaml#/components/schemas/UsageThreshold'\nsnssai:\n$ref: 'TS29571_CommonData.yaml#/components/schemas/Snssai'\nsuppFeat:\n$ref: 'TS29571_CommonData.yaml#/components/schemas/SupportedFeatures'\ntrafficDes:\n$ref: 'TS29122_ResourceManagementOfBdt.yaml#/components/schemas/TrafficDescriptor'\nwarnNotifReq:\ndescription: Indicates whether the BDT warning notification is enabled or disabled.\ntype: boolean\ndefault: false\n\nBdtPolicyData:\ndescription: Describes the authorization data of an Individual BDT policy resource.\ntype: object\nrequired:\n- bdtRefId\n- transfPolicies\nproperties:\nbdtRefId:\n$ref: 'TS29122_CommonData.yaml#/components/schemas/BdtReferenceId'\ntransfPolicies:\ndescription: Contains transfer policies.\ntype: array\nitems:\n$ref: '#/components/schemas/TransferPolicy'\nminItems: 1\nselTransPolicyId:\ndescription: Contains an identity of the selected transfer policy.\ntype: integer\nsuppFeat:\n$ref: 'TS29571_CommonData.yaml#/components/schemas/SupportedFeatures'\n\nPatchBdtPolicy:\ndescription: >\nDescribes the updates in authorization data of an Individual BDT Policy created\nby the PCF.\ntype: object\nproperties:\nbdtPolData:\n$ref: '#/components/schemas/BdtPolicyDataPatch'\nbdtReqData:\n$ref: '#/components/schemas/BdtReqDataPatch'\n\nBdtPolicyDataPatch:\ndescription: >\nA JSON Merge Patch body schema containing modification instruction to be performed\non the bdtPolData attribute of the BdtPolicy data structure to select a transfer\npolicy. Adds selTransPolicyId to BdtPolicyData data structure.\ntype: object\nrequired:\n- selTransPolicyId\nproperties:\nselTransPolicyId:\ndescription: >\nContains an identity (i.e. transPolicyId value) of the selected transfer\npolicy. If the BdtNotification_5G feature is supported value 0 indicates that\nno transfer policy is selected.\ntype: integer\n\nBdtReqDataPatch:\ndescription: >\nA JSON Merge Patch body schema containing modification instruction to be performed\non the bdtReqData attribute of the BdtPolicy data structure to indicate whether\nthe BDT warning notification is enabled or disabled. Modifies warnNotifReq from\nBdtReqData data structure.\ntype: object\nproperties:\nwarnNotifReq:\ndescription: Indicates whether the BDT warning notification is enabled or disabled.\ntype: boolean\n\nTransferPolicy:\ndescription: Describes a transfer policy.\ntype: object\nrequired:\n- ratingGroup\n- recTimeInt\n- transPolicyId\nproperties:\nmaxBitRateDl:\n$ref: 'TS29571_CommonData.yaml#/components/schemas/BitRate'\nmaxBitRateUl:\n$ref: 'TS29571_CommonData.yaml#/components/schemas/BitRate'\nratingGroup:\ndescription: Indicates a rating group for the recommended time window.\ntype: integer\nrecTimeInt:\n$ref: 'TS29122_CommonData.yaml#/components/schemas/TimeWindow'\ntransPolicyId:\ndescription: Contains an identity of a transfer policy.\ntype: integer\n\nNetworkAreaInfo:\ndescription: >\nDescribes a network area information in which the NF service consumer requests\nthe number of UEs.\ntype: object\nproperties:\necgis:\ndescription: Contains a list of E-UTRA cell identities.\ntype: array\nitems:\n$ref: 'TS29571_CommonData.yaml#/components/schemas/Ecgi'\nminItems: 1\nncgis:\ndescription: Contains a list of NR cell identities.\ntype: array\nitems:\n$ref: 'TS29571_CommonData.yaml#/components/schemas/Ncgi'\nminItems: 1\ngRanNodeIds:\ndescription: Contains a list of NG RAN nodes.\ntype: array\nitems:\n$ref: 'TS29571_CommonData.yaml#/components/schemas/GlobalRanNodeId'\nminItems: 1\ntais:\ndescription: Contains a list of tracking area identities.\ntype: array\nitems:\n$ref: 'TS29571_CommonData.yaml#/components/schemas/Tai'\nminItems: 1\n\nNotification:\ndescription: Describes a BDT notification.\ntype: object\nrequired:\n- bdtRefId\nproperties:\nbdtRefId:\n$ref: 'TS29122_CommonData.yaml#/components/schemas/BdtReferenceId'\ncandPolicies:\ndescription: >\nContains a list of the candidate transfer policies from which the AF may\nselect a new transfer policy due to a network performance is below the criteria\nset by the operator.\ntype: array\nitems:\n$ref: '#/components/schemas/TransferPolicy'\nminItems: 1\nnwAreaInfo:\n$ref: '#/components/schemas/NetworkAreaInfo'\ntimeWindow:\n$ref: 'TS29122_CommonData.yaml#/components/schemas/TimeWindow'\n\n# Simple data types\n\nAspId:\ndescription: Contains an identity of an application service provider.\ntype: string\n\n\n",
            "summary": "",
            "tables": [
                {
                    "description": "",
                    "table number": 41,
                    "summary": "",
                    "name": ""
                }
            ],
            "figures_meta_data": [],
            "subsections": []
        }
    ]
}