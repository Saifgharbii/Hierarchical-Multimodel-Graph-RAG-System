{
    "document_name": "28837-i00.docx",
    "content": [
        {
            "title": "Foreword",
            "description": "This Technical Report has been produced by the 3rd Generation Partnership Project (3GPP).\nThe contents of the present document are subject to continuing work within the TSG and may change following formal TSG approval. Should the TSG modify the contents of the present document, it will be re-released by the TSG with an identifying change of release date and an increase in version number as follows:\nVersion x.y.z\nwhere:\nx\tthe first digit:\n1\tpresented to TSG for information;\n2\tpresented to TSG for approval;\n3\tor greater indicates TSG approved document under change control.\ny\tthe second digit is incremented for all changes of substance, i.e. technical enhancements, corrections, updates, etc.\nz\tthe third digit is incremented when editorial only changes have been incorporated in the document.\nIn the present document, modal verbs have the following meanings:\nshall\t\tindicates a mandatory requirement to do something\nshall not\tindicates an interdiction (prohibition) to do something\nThe constructions \"shall\" and \"shall not\" are confined to the context of normative provisions, and do not appear in Technical Reports.\nThe constructions \"must\" and \"must not\" are not used as substitutes for \"shall\" and \"shall not\". Their use is avoided insofar as possible, and they are not used in a normative context except in a direct citation from an external, referenced, non-3GPP document, or so as to maintain continuity of style when extending or modifying the provisions of such a referenced document.\nshould\t\tindicates a recommendation to do something\nshould not\tindicates a recommendation not to do something\nmay\t\tindicates permission to do something\nneed not\tindicates permission not to do something\nThe construction \"may not\" is ambiguous and is not used in normative elements. The unambiguous constructions \"might not\" or \"shall not\" are used instead, depending upon the meaning intended.\ncan\t\tindicates that something is possible\ncannot\t\tindicates that something is impossible\nThe constructions \"can\" and \"cannot\" are not substitutes for \"may\" and \"need not\".\nwill\t\tindicates that something is certain or expected to happen as a result of action taken by an agency the behaviour of which is outside the scope of the present document\nwill not\t\tindicates that something is certain or expected not to happen as a result of action taken by an agency the behaviour of which is outside the scope of the present document\nmight\tindicates a likelihood that something will happen as a result of action taken by some agency the behaviour of which is outside the scope of the present document\nmight not\tindicates a likelihood that something will not happen as a result of action taken by some agency the behaviour of which is outside the scope of the present document\nIn addition:\nis\t(or any other verb in the indicative mood) indicates a statement of fact\nis not\t(or any other negative verb in the indicative mood) indicates a statement of fact\nThe constructions \"is\" and \"is not\" do not indicate requirements.\n",
            "summary": "",
            "tables": [],
            "figures_meta_data": [],
            "subsections": []
        },
        {
            "title": "1\tScope",
            "description": "The present document studies potential enhancements for the management of Trace/MDT based on the existing 5G data collection job \"TraceJob\" specified in TS 28.621 (stage 1) [2], TS 28.622 (stage 2) [3], TS 28.623 (stage 3) [4] and the Trace/MDT management framework specified in TS 32.421 (stage 1) [5], TS 32.422 (stage 2) [6] and TS 32.423 (stage 3) [7]. The document provides conclusions and recommendations on the next steps in the standardization.\n",
            "summary": "",
            "tables": [],
            "figures_meta_data": [],
            "subsections": []
        },
        {
            "title": "2\tReferences",
            "description": "The following documents contain provisions which, through reference in this text, constitute provisions of the present document.\n-\tReferences are either specific (identified by date of publication, edition number, version number, etc.) or non-specific.\n-\tFor a specific reference, subsequent revisions do not apply.\n-\tFor a non-specific reference, the latest version applies. In the case of a reference to a 3GPP document (including a GSM document), a non-specific reference implicitly refers to the latest version of that document in the same Release as the present document.\n[1]\t3GPP TR 21.905: \"Vocabulary for 3GPP Specifications\".\n[2]\t3GPP TS 28.621: \"Telecommunication management; Generic Network Resource Model (NRM) Integration Reference Point (IRP); Requirements\"\n[3]\t3GPP TS 28.622: \"Telecommunication management; Generic Network Resource Model (NRM) Integration Reference Point (IRP); Information Service (IS)\"\n[4]\t3GPP TS 28.623: \"Telecommunication management; Generic Network Resource Model (NRM) Integration Reference Point (IRP); Solution Set (SS) definitions\"\n[5]\t3GPP TS 32.421: \"Telecommunication management; Subscriber and equipment trace; Trace concepts and requirements\".\n[6]\t3GPP TS 32.422: \"Telecommunication management; Subscriber and equipment trace; Trace control and configuration management\".\n[7]\t3GPP TS 32.423: \"Telecommunication management; Subscriber and equipment trace; Trace data definition and management\".\n[8]\t3GPP TS 38.423: \" NG-RAN; Xn application protocol (XnAP)\".\n[9]\t3GPP TS 37.320: “Radio measurement collection for Minimization of Drive Tests (MDT); Overall description; Stage 2”.\n[10]\t3GPP TS 38.413: “NG-RAN; NG Application Protocol (NGAP)”.\n[11]\t3GPP TS 28.532: \"Management and orchestration; Generic management services\".\n[12]\t3GPP TS 28.552: \"5G performance measurements\"\n[13]\t3GPP TS 38.314: \"Layer 2 measurements\"\n[14]\t3GPP TS 38.300: \"NR and NG-RAN Overall description; Stage-2\"\n[15]\t – \"Summary of offline discussion on MRO\"\n[16] \t3GPP TS 28.554: \"5G end to end Key Performance Indicators (KPI)\"\n",
            "summary": "",
            "tables": [],
            "figures_meta_data": [],
            "subsections": []
        },
        {
            "title": "3\tDefinitions of terms, symbols and abbreviations",
            "description": "",
            "summary": "",
            "tables": [],
            "figures_meta_data": [],
            "subsections": [
                {
                    "title": "3.1\tTerms",
                    "description": "",
                    "summary": "",
                    "text_content": "For the purposes of the present document, the terms given in TR 21.905 [1] and the following apply. A term defined in the present document takes precedence over the definition of the same term, if any, in TR 21.905 [1].\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "3.2\tSymbols",
                    "description": "",
                    "summary": "",
                    "text_content": "Void\n\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "3.3\tAbbreviations",
                    "description": "",
                    "summary": "",
                    "text_content": "For the purposes of the present document, the abbreviations given in TR 21.905 [1] and the following apply. An abbreviation defined in the present document takes precedence over the definition of the same abbreviation, if any, in TR 21.905 [1].\nIOC\tInformation Object Class\nMDT\tMinimization of Drive Tests\nPDCP\tPacket Data Convergence Protocol\nRCEF\tRRC Connection Establishment Failure\nRLF\tRadio Link Failure\nRRC\tRadio Resource Control\nSBMA\tService Based Management Architecture\nUDM\tUnified Data Management\n\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                }
            ]
        },
        {
            "title": "4\tPossible Solutions for Alignment of TraceJob and PerfMetricJob",
            "description": "",
            "summary": "",
            "tables": [],
            "figures_meta_data": [],
            "subsections": [
                {
                    "title": "4.1\tKey issue #1: Reporting of Collected Management Data",
                    "description": "",
                    "summary": "",
                    "text_content": "",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "4.1\tKey issue #1: Reporting of Collected Management Data",
                    "description": "",
                    "summary": "",
                    "text_content": "",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": [
                        {
                            "title": "4.1.1\tDescription",
                            "text_content": "Management data refers to data produced by radio access network functions, core network functions or management functions and used for management purposes. Management data specified by 3GPP for 5G management is classified into 5G performance measurements as defined by TS 28.552 [12], 5G end to end key performance indicators as defined by TS 28.554 [16] and Trace, MDT, RLF and RCEF data as defined by TS 32.422 [6]. The combined performance measurements and key performance indicators are also called performance metrics. The combined Trace, MDT, RLF and RCEF data are also called trace metrics.\nFor reporting of performance metrics three different reporting methods are specified, cf. attribute reportingCtrl in PerfMetricJob of TS 28.622 [3].\n-\tFile based reporting where the MnS producer stores the produced files on the MnS producer; the location of the reported files is selected by the MnS producer. The MnS consumer will be informed about the availability of new files and the file location via notifyFileReady notification, if a subscription is in place.\nIn case the preparation of a file fails, notifyFilePreparationError notification is sent instead.\nThe applied attributes for this reporting method are:\n1. fileReportingPeriod: time window during which collected measurements are stored into the same file before the file is closed and a new file is opened.\n\n-\tFile based reporting where the produced files are stored on a MnS consumer. The file location is provided with attribute fileLocation. No notification is emitted by the MnS producer.\nThe applied attributes for this reporting method are:\n1. fileLocation: location on the MnS consumer where the files shall be stored.\n2. fileReportingPeriod: time window during which collected measurements shall be stored into the same file before the file is closed and a new file is opened\n\n-\tStream based reporting where the MnS producer shall stream the data to the configured location\n\nThe applied attributes for this reporting method are:\n1. streamTarget: location to which the MnS producer shall stream the data\nFor reporting of trace metrics (trace, MDT, RLF and RCEF data) two reporting methods are specified, cf. attribute tjTraceReportingFormat in TraceJob of TS 28.622 [3]:\n- File based reporting: The attribute tjTraceCollectionEntityAddress is used to specify the IP address to which the trace records shall be transferred. Since the property \"isWritable\" for this attribute is TRUE, it could be updated by MnS consumer as well as the MnS producer.\nThe time and criteria when the trace files are sent to the trace collection entity (TCE) is vendor specific, see TS 32.422 [6] clause 6 to 9 for MDT, Trace, RLF and RCEF Reporting, accordingly. Only for MDT reporting it is specified that \"the Trace Records shall be sent to the TCE latest by 2 hours (the exact time is FFS) after the Trace Session deactivation.\"\n- Streaming reporting: The attribute tjStreamingTraceConsumerUri specifies the streaming target.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "4.1.2\tProblem Statement",
                            "text_content": "The reporting methods for file-based reporting specified for PerfMetricJob and TraceJob differ:\nWhile in case of PerfMetricJob a fileReportingPeriod is defined, in case of TraceJob there are for Immediate MDT measurements the parameters tjMDTReportInterval(conditional for M1 in NR), tjMDTCollectionPeriodRrmNR (conditional for M4 and M5 in NR), tjMDTCollectionPeriodM6NR (conditional for M6 in NR) and tjMDTCollectionPeriodM7NR (conditional for M7 in NR) specified. These parameters define the interval between two periodical Mx measurements of same type. However, they do not specify when the file from gNB is sent to TCE. \nFor job type TRACE_ONLY, RLF_REPORT_ONLY and RCEF_REPORT_ONLY no reporting period is specified. \nFor job type LOGGED_MDT_ONLY, the parameter tjMDTLoggingInterval, determines the interval between two periodic downlink pilot strength measuremetns when UE is in RRC IDLE or RRC INACTIVE mode. The UE indicates availability of MDT measurement results, once it goes to RRC CONNECTED mode.\n\nIn case of PerfMetricJob there is a choice whether the MnS consumer or producer selects the location where the files shall be stored. In case the MnS producer selects the location, the MnS consumer will be informed via notifyFileReady notification about the availability of new files or via notifyFilePreparationError notification about a failure during file preparation, if an appropriate subscription is in place. \nIn case of TraceJob the location where the files shall be stored can be modified by MnS consumer and MnS producer. The generic \"File data reporting service\" is defined in TS 28.532 [11] clause 11.6 and includes the notifyFileReady and notifyFilePreparationError notifications. However, these are not listed in the description of TraceJob IOC.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "4.1.3\tPotential Solution",
                            "text_content": "For this potential solution, notifications applicable for the trace job shall be enhanced. The notifications \"notifyFileReady\" and \"notifyFilePreparationError\" along with the common notifications defined in clause 4.5 of TS 28.622 [3] are applicable for TraceJob IOC.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "4.1.4\tConclusion",
                            "text_content": "An update is needed in TS 28.622 [3] clause 4.3.30.4.\n",
                            "figures_meta_data": [],
                            "tables": []
                        }
                    ]
                }
            ]
        },
        {
            "title": "5\tPossible solutions for TraceJob enhancements in the context of SBMA",
            "description": "",
            "summary": "",
            "tables": [],
            "figures_meta_data": [],
            "subsections": [
                {
                    "title": "5.1\tKey issue #1: name containment in case of handover for signalling-based trace activation",
                    "description": "",
                    "summary": "",
                    "text_content": "",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": [
                        {
                            "title": "5.1.1\tDescription",
                            "text_content": "A TraceJob can be name-contained by SubNetwork, ManagedElement, or ManagedFunction, see clause 4.3.30.1 in TS 28.622 [3].\nIn case of signalling based trace activation, the activation is done for a specific UE, by indicating the IMSI, IMEI(SV), IMEI-TAC or SUPI. The logging of management data will continue even if the UE is handed over to another cell.\nConsidering MDT trace sessions at handover for immediate MDT in NG-RAN, see clause 4.10 in TS 32.422 [6], in case of signalling based trace activation, the gNB propagates the Trace Session parameters together with the MDT specific parameters to the target cell. During handover procedure the target gNB sends the UE CONTEXT RELEASE message to indicate to the source gNB that radio and control plane resources for the associated UE context are allowed to be released, see TS 38.423 [8].\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "5.1.2\tProblem Statement",
                            "text_content": "In RAN, during handover procedure the configuration parameters for trace are propagated to the gNB where the UE is associated to.\nIn the NRM, the TraceJob managed object instance (MOI) is name contained by a SubNetwork, ManagedElement, or ManagedFunction instance. It is not specified how to treat TraceJob MOI in NRM in case of handover for signalling based trace activation.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "5.1.3\tPotential Solution",
                            "text_content": "In case of signalling based trace activation in NR, the trace configuration of the immediate MDT is triggered from the 3GPP management system to the 5G core function by indicating the IMSI, IMEI(SV), IMEI-TAC or SUPI. The core function (UDM) configures the NG-RAN for immediate MDT subsequently. The TraceJob corresponding to this signalling-based trace activation is name contained in the UDM. In case of handover scenarios, the serving gNB propagates the Trace session parameters together with the MDT specific parameters to the target gNB. The call is still handled by the same UDM in the core network. Hence the same name containment in the NRM would be able to manage the trace configuration post the handover of the call to the target cell.\nIn case of Management based activations, the TraceJob can be name-contained by any entity of the RAN or the core depending on the entity on which the activation is triggered. In this case, the existing name-containment by SubNetwork, ManagedElement or ManagedFunction would be appropriate as the management-based trace activation can be performed to any entity that can be name-contained by the listed entities.\nIn case of signalling based activation, the TraceJob is name-contained by UDM in the 5G core network as the trace activation is initiated by the core network in this scenario. In case of handovers across multiple NG-RANs, the name-containment is handled by the UDM in this case.\nThe existing specification mentions that a trace job can be name contained by SubNetwork, ManagedElement, or ManagedFunction. Based on the discussion above, in case of signalling based trace activation, the TraceJob is name-contained by the UDM. It is required to state this explicitly as this helps in the product implementation.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "5.1.4\tConclusion",
                            "text_content": "As discussed in 5.1.3, the TraceJob definition may be enhanced to mention that the TraceJob can be name-contained in the UDM in case of signalling based trace activation. A change is needed in TS 28.622 [3] clause 4.3.30.\n",
                            "figures_meta_data": [],
                            "tables": []
                        }
                    ]
                },
                {
                    "title": "5.2\tKey issue #2: Gaps in Signalling Trace Activation",
                    "description": "",
                    "summary": "",
                    "text_content": "",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": [
                        {
                            "title": "5.2.1\tDescription",
                            "text_content": "In case of signalling trace activation, the initial message exchange is missing from the collected trace record because it happens before the trace activation message arrives at the base station from the core.\nConsidering Figure 4.1.2.15.1.1 of TS 32.422 [6], which is shown as Figure 5.2.1-1 in this TR, it is obvious that steps 3 – 5 are missing from the collected trace record because AMF sends the Start Trace message over NG interface in step 9.\n\nThe figure depicts the activation of trace 1 in the 5G Core Gateway (GC) following the registration process. The activation of trace 1 is crucial for the proper functioning of the 5G Core Gateway, as it enables the initiation of communication between the core and the network. The activation of trace 1 is initiated by the 5G Core Gateway, which sends a request to the 5G Core, requesting the activation of trace 1. The 5G Core then responds with the activation of trace 1, initiating the communication process. The activation of trace 1 is a critical step in the 5G Core Gateway's operation, as it ensures the proper functioning of the network and the initiation of communication between the core and the network.\nFigure 5.2.1-1 Trace activation in 5GC following the Registration procedure\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "5.2.2\tProblem Statement",
                            "text_content": "Especially for troubleshooting or debugging purposes the messages of the initial phase of network acquisition are of significant interest. In case of signalling based trace activation, these messages are not captured in the trace record.\nThe potential solution needs to be compatible with SBMA.\n\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "5.2.3\tPotential solution",
                            "text_content": "For this potential solution NG-RAN buffers exchanged messages when UE starts communication. When tracing is triggered, NG-RAN adds all buffered messages to the trace record. As an example, illustrated by Figure 5.2.1-1 above, steps 3 – 5 will be buffered in the NG-RAN.\nIf the UE is not requested to be traced at the point on which NG-RAN typically receives trace activation, step 9 in Figure 5.2.1-1 above, NG-RAN discards the data from the buffer.\nTo minimize the negative performance impacts in cases the operators don't want to activate the trace, the buffering behaviour can be configured via OAM.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "5.2.4\tConclusion",
                            "text_content": "An update is needed in TS 32.422 [6] clause 4.1.2.\n",
                            "figures_meta_data": [],
                            "tables": []
                        }
                    ]
                },
                {
                    "title": "5.3\tKey issue #3: Structuring of TraceJob IOC",
                    "description": "",
                    "summary": "",
                    "text_content": "",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": [
                        {
                            "title": "5.3.1\tDescription",
                            "text_content": "A TraceJob instance represents the trace control and configuration parameters of a particular Trace Job to request trace metrics including trace messages, immediate measurements, logged MDT measurements, logged MBSFN MDT measurements, RLF and RCEF reports. The list of attributes contains more than 30 attributes. Most of these parameters are dependent on certain conditions.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "5.3.2\tProblem statement",
                            "text_content": "As described in the definition of IOC TraceJob, see clause 4.3.30.1 in TS 28.622 [3], only a few parameters are applied independently which kind of data is requested. Most parameters are only configured dependent on the selected value of attribute jobType. A structure in the list of attributes to reflect the dependency on the job type (Immediate MDT only, Logged MDT only, Trace only, Immediate MDT and Trace, RLF reports only, RCEF reports only or Logged MBSFN MDT) is missing.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "5.3.3\tPotential solution",
                            "text_content": "The attributes of the existing TraceJob may be structured based on the jobType attribute (See clause 5.9a of TS 32.422 [6]). The attributes those are common to all the different types of jobType are associated to the TraceJob and no change made to them. These include plmnTarget, traceReportingConsumerUri, traceCollectionEntityIpAddress, traceReference, traceRecordingSessionReference, traceReportingFormat, traceTarget.\nSubsequently, the remaining attributes are structured based on the jobType. The following new datatypes may be introduced under TraceJob IOC for the purpose of structuring, TraceConfig and MDTConfig. The TraceConfig datatype may contain the attributes specific to the jobType Trace and combined Trace and Immediate MDT. These include listOfInterfaces, listOfNeTypes, traceDepth, triggeringEvents.\nThe MDTConfig datatype may contain the attributes common to immediate and logged MDT types. These include attributes such as anonymizationOfMdtData, areaScope and sensorInformation. Apart from that, the attributes specific to the immediate and logged MDT are structured inside the new datatypes ImmediateMdtConfig and LoggedMdtConfig respectively.  Other attributes are structured into one of the MDT datatypes based on their definition.\nIn principle, the TraceJob may be structured to contain the common attributes and two new datatypes for trace and MDT configuration. MDT configuration is further structured into ImmediateMDT and LoggedMDT configurations. The proposed approach enables the consumer to only configure what needs to be collected without having to know the details of other kinds of trace types.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "5.3.4\tConclusion",
                            "text_content": "As discussed in 5.3.3, the TraceJob may be restructured to align with different jobTypes. The clause 4.3.30.2 of TS 28.622 [3] may be modified to incorporate this change. Furthermore, four (4) new datatypes may be added under clause 4.3 of TS 28.622 [3]. Appropriate changes are to be performed at Stage 3 in TS 28.623 [4] to reflect the restructuring at Stage 2.\n",
                            "figures_meta_data": [],
                            "tables": []
                        }
                    ]
                }
            ]
        },
        {
            "title": "6\tPossible Solutions for MDT Enhancements",
            "description": "",
            "summary": "",
            "tables": [],
            "figures_meta_data": [],
            "subsections": [
                {
                    "title": "6.1\tManagement of Data Collection Enhancements of MDT",
                    "description": "",
                    "summary": "",
                    "text_content": "",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": [
                        {
                            "title": "6.1.1\tKey issue #1: Alignment of “Report Amount” parameter for Immediate MDT measurements",
                            "text_content": "In case of NR, in RRC_CONNECTED state, UE supports Immediate MDT measurements as described in TS 37.320 [9] clause 5.4.1. The measurements to be performed for Immediate MDT are defined in TS 37.320 [9] clause 5.4.1.1. These measurements include DL signal quantity measurements, PDCP SDU data volume measurements, UE throughput measurements, power headroom measurements, packet delay and packet loss rate measurements.\nThe NGAP procedures and the information elements used on NG interface are defined in TS 38.413 [10] clause 8 and 9. As part of Radio Network Layer related IEs, M1, M4, M5, M6 and M7 measurement configurations are defined for NG interface. All these measurement configurations include the “Report Amount” IE.\nThe Immediate MDT specific configuration parameters in the management system are specified in TS 32.422 [6] clause 5.10. The configuration parameter “Report Amount” is also described as part of the same. This parameter defines the number of measurement reports that shall be taken for periodical reporting while UE is in connected mode. According to TS 32.422 [6] clause 5.10.6, the parameter “Report Amount” is applicable only to M1 measurement in NR. According to TS 38.413 [10] clause 9.3.1, the IE “Report Amount” can be configured for M1, M4, M5, M6 and M7 measurements separately.\nThere is a misalignment in terms of the configurability of the parameter “Report Amount” for the different Immediate MDT measurements.\nFor this potential solution enhance the definition of the configuration parameter Report Amount in clause 5.10.6 in TS 32.422 [6] for the NR Immediate MDT measurements M4, M5, M6 and M7 besides M1.\nAdvantages:\n- \tThe definition and the configured values are the same for Report Amount configuration parameter across the different measurement types. Having only one common configuration parameter is enough. Configuring only one parameter is less effort than configuring up to five.\n- \tThere will be no \"repeated\" definitions of this configuration parameter for multiple measurement types.\nDisadvantages:\n- \tTrace Job IOC can trigger multiple different measurements for Immediate MDT as M1, M4, M5, M6 and M7 in one single job. This solution allows to configure only one Report Amount value for all the triggered Immediate MDT measurements. Different values for Report Amount parameter cannot be configured for different types of Immediate MDT measurements with this solution.\nFor this potential solution the Report Amount configuration parameter shall be defined individually in TS 32.422 [6] for all the applicable Immediate MDT measurement types. This solution is like the way the Collection Period parameter is currently defined for M6 and M7 separately. The management system shall configure the Report Amount configuration parameter for all the applicable Immediate MDT measurement types individually.\nAdvantages:\n- \tDifferent Immediate MDT measurement types shall be configured with different Report Amount IE individually and shall be reported accordingly.\n- \tAlignment with NGAP specification TS 38.413 [10] where Report Amount IE can also be configured individually for all the applicable Immediate MDT measurement types.\nDisadvantages:\n- \tThere will be multiple sections defining the Report Amount configuration parameter for the different applicable Immediate MDT measurement types.\nAs a potential solution to this problem, “Report Amount” parameter shall be defined individually for all the applicable Immediate MDT measurements (M1, M4, M5, M6 and M7). This provides the flexibility to configure different Immediate MDT measurements with different \"Report Amount\" value to the Trace MnS Consumer.\nTrace job defined in TS 28.622 [3] shall be enhanced with new \"Report Amount\" IE for each of the applicable Immediate MDT measurements.\nBased on the discussion in clause 6.1.1.3, it is recommended to use the approach described in 6.1.1.3.2 to use separate parameters for Report Amount for M1, M4, M5, M6 and M7 for the mentioned advantages.\nAn update is needed in TS 28.622 [3] (Clauses 4.3.30.1, 4.3.30.2, 4.3.30.3, 4.4.1), TS 28.623 [4] (clause C.4.3) and 32.422 [6] (clauses 4.1.1.6a, 4.1.2.12.2, 4.1.2.12.3, 4.4, 5.10.6).\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "6.1.2\tKey issue #2: Reporting of per direction per DRB per UE MDT measurements",
                            "text_content": "The Immediate MDT measurements during RRC_CONNECTED state are described in TS 32.422 [6] clause 5.10.3 and TS 37.320 [9] clause 5.4.1. The measurements on PDCP data volume and average UE throughput measurements are defined in TS 28.552 [12]. The measurements on packet delay and packet loss measurements are defined in 38.314 [13].  These measurements are defined per direction (UL/DL), per DRB and per UE.\nThe trace data file XML schema is defined in 32.423 [7] clause A.2.2. This specifies the XML schema including the header information and different trace content including MDT measurements.\nIn the trace data file XML schema defined in TS 32.423 [7] clause A.2.2, the MDT measurements are represented by the element name \"meas\". This element is optional, and multiple entries of the element can be present representing multiple MDT measurements to be reported. This element is explained by the attributes name, changeTime, vendorSpecific, targetCell, and ueLocation. These attributes characterize the MDT measurement along with the actual value of the measurement. The characterization of MDT measurement do not include information like the direction (DL/UL) and the DRB. The immediate MDT measurements M4, M5, M6, and M7 are defined per direction and per DRB.\nThe existing trace data file XML schema for MDT measurements do not have a means to report measurements those are measured per direction and per DRB.\nFor the potential solution to this issue, the existing trace data file XML schema may be enhanced to include per DRB and per direction information as part of the existing element \"meas\". The existing element \"meas\" may be enhanced with optional attributes, \"direction\" and \"drb\" information. These optional attributes inside \"meas\" element in the XML schema may be used to indicate the measurement along with the direction (UL/DL) and the DRB number. The attribute \"direction\" may be defined as a Boolean value of \"UL\" or \"DL\" indicating the measurement corresponds to Uplink or Downlink respectively. The attribute \"drb\" may be defined as an integer representing the DRB number of the corresponding measurement.\nAn update is needed in clause A.1 of TS 32.423 [7] with the definition of new optional attributes proposed along with the allowed values in the table for XML trace file parameters.\nAn update is also needed in clause A.2.2, updating the XML schema of the trace file to include the proposed new optional parameters.\n",
                            "figures_meta_data": [],
                            "tables": []
                        }
                    ]
                },
                {
                    "title": "6.2\tManagement of MDT for NPN",
                    "description": "",
                    "summary": "",
                    "text_content": "",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": [
                        {
                            "title": "6.2.1\tKey issue #1: Support of management and signalling based traceMDT collection for NPN networks",
                            "text_content": "As part of SON MDT enhancements for Non-Public Networks, RAN3 has agreed to support the following functionalities. Those are:\n-\tsupport of signalling based MDT and Management based MDT for NPNs\n-\tsupport both immediate MDT and logged MDT for NPN\n-\tuser consent handling for NPNs, in particular SNPNs\n-\tarea scope for NPNs\n-\tsupport of NPNs in RLF Report and other UE reports used for SON and MDT\nTo support the above functionalities in the trace management system, a study is needed in SA5 to understand the current functionalities and the changes needed to support the required functionalities. The trace MDT collections are currently specified in 32.421 [5] and 32.422 [6]. The Trace Job IOC defined in 28.622 [3] (stage 2) and 28.623 [4] (stage 3).\nThe following problems have been identified to support traceMDT collection for Non-Public Networks.\n-\tThere are no requirements (business and specification level) to support traceMDT collection in Non-Public Networks.\n-\tExisting methods are not sufficient to uniquely identify the Non-Public Networks.\n-\tExisting procedures in trace starting mechanism to match the PLMN ID is insufficient to support the traceMDT collection in SNPN in case of management-based activation.\n-\tFor user consent, considering only the RPLMN ID of the UE for matching the trace reference PLMN (PLMN portion of the Trace Reference) is not a sufficient criterion to select a UE for management-based MDT in a Non-Public Network.\n-\tExisting area scope definition is not sufficient to cover the new dimension introduced by PNI-NPN on closed access groups (CAGs).\nThe following solutions are proposed to the problems described above.\n-\tEnhance the requirements of the trace management system to support the traceMDT collection for Non-Public Networks\n-\tEnhance the existing methods to include the appropriate identifiers, NID and CAG ID for SNPN and PNI-NPN respectively.\n-\tEnhance the procedures for trace collection to match the PLMN ID along with the appropriate identifiers NID and CAG ID for SNPN and PNI-NPN respectively in case of management-based activation.\n-\tEnhance the procedures for activation of management-based MDT to also consider the identifiers like NID and CAGID for SNPN and PNI-NPN respectively for UE selection.\n-\tArea scope definition need to be enhanced to contain the CAG IDs as an allowed means to specify the area scope for PNI-NPN.\nBased on the proposals described above, below are changes needed in the mentioned specifications.\n-\tRequirements needs to be added in 32.421 [5] to support the traceMDT collection for NPN networks.\n-\tClause 5.6 in 32.422 [6] needs to be updated to include NID and CAG ID for composing the Trace Reference parameter for SNPN and PNI-NPN respectively.\n-\tTrace procedures in clauses 4.2.2.10 and 4.2.2.11 of 32.422 [6] needs to be updated to include the appropriate identifiers for SNPN and PNI-NPN for the selection of UEs in case of management-based activation in Non-Public Networks.\n-\tClause 4.9.2 of TS 32.422 [6] needs to be updated to include NPN specific identifiers for UE selection criteria along with the PLMN ID.\n-\tClause 5.10.2 of 32.422 [6], the definition of Area Scope parameter need to be updated to include the list of CAG IDs as an allowed means of specifying the area scope.\n-\tFor the above-mentioned points, corresponding changes in clause 4.3.30 of 28.622 [6] and stage 3 changes in 28.623 [7] needs to be made.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "6.2.2\tKey issue #2: Support of RLF and RCEF reports for NPN networks",
                            "text_content": "As part of SON MDT enhancements for Non-Public Networks, RAN3 has agreed to support the following functionalities to support RLF and RCEF reports in NPN.\n\nThe following problems have been identified to support traceMDT collection for NPN networks.\n-\tThere are no requirements (business and specification level) to support RLF and RCEF reports for NPN networks.\n-\tThe existing methods of trace activation and deactivation for RLF and RCEF reports are to be studied for impacts to support NPN\nBased on the requirements described in the preceding clause, the following are proposed as solutions.\n-\tBusiness level and specification level requirements are to be added to TS 32.421 [5] to support the NPN for RLF and RCEF reports.\n-\tNo changes required specifically in the trace activation and deactivations mechanisms for RLF and RCEF reports. The existing procedures are covering the NPNs as well.\nBased on the proposals above, following changes are prescribed.\n-\tRequirements needs to be added in 32.421 [5] to support the RLF and RCEF reports for NPN networks.\n",
                            "figures_meta_data": [],
                            "tables": []
                        }
                    ]
                },
                {
                    "title": "6.3\tManagement of MDT for MRO",
                    "description": "",
                    "summary": "",
                    "text_content": "",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": [
                        {
                            "title": "6.3.1\tKey issue #1: Support of MDT for MRO during inter-system inter-RAT handover for voice fallback",
                            "text_content": "Regarding the inter-system inter-RAT handover for voice fallback scenario, RAN3 has discussed the following cases that are considered for MRO enhancements.\nCase 1: After failure (Hand Over Failure / Radio Link Failure) of inter-system inter-RAT handover from NR to E-UTRAN for voice fallback, a suitable E-UTRA cell is selected, and the UE tries RRC connection setup procedure for the voice service in the E-UTRA cell.\nCase 2: After failure (Hand Over Failure) of inter-system inter-RAT handover from NR to E-UTRAN for voice fallback, in case no suitable E-UTRA cell can be selected, the UE reverts to the configuration of the source PCell in NR and initiates RRC re-establishment procedure in NR.\nFor the identified cases for inter-system inter-RAT handover for voice fallback scenario, RAN3 proposed changes to the description of the different types of connection failure under clause 15.5.2.2.3 in [x]. The changes agreed by RAN3 propose a new kind of connection failure in addition to the existing kinds, such as inter-system too late and inter-system too early handovers as captured in [15].\nIn case 1, the UE tries RRC connection setup procedure for the voice service in E-UTRA cell and this scenario is out of scope of this document since this would be treated as a new call in the E-UTRA cell. In case 2, the UE could not find a suitable E-UTRA cell and reverts to the configuration of the source PCell in NR. The management of MDT for the new call established in NR is to be studied for the agreed new scenario for both management-based MDT and signalling-based MDT activation mechanisms.\nRegarding the case 2, in case of management-based MDT activation, if the gNB (source PCell) where the UE is attempting a RRC connection is activated for management MDT, the MDT data collection for this call may be performed as described in clause 4.1.1.9 in [6].\nIn case of signalling based activation, for the new call established in the source PCell, the Initial Context Setup Request from AMF to gNB would contain the MDT configuration based on the MDT configuration on the UDM. UDM forwards the MDT configurations to AMF and SMF. AMF then forwards the MDT configuration to the gNB as described in clause 4.1.2.17 in [6].\nFor the case relevant to the scope of this document, two activation mechanisms are possible. For both management and signalling based activation mechanisms, from the solution discussed in the above section, the existing methods in [6] addresses all the relevant scenarios covered by case 2. Since the existing methods cover the scenario proposed in the problem statement, there is no need for proposing a new solution to this key issue.\n",
                            "figures_meta_data": [],
                            "tables": []
                        }
                    ]
                }
            ]
        },
        {
            "title": "7\tConclusions and Recommendations",
            "description": "",
            "summary": "",
            "tables": [],
            "figures_meta_data": [],
            "subsections": [
                {
                    "title": "7.1\tConclusions",
                    "description": "",
                    "summary": "",
                    "text_content": "The following issues are identified in the present document so far:\n-\tUse case of alignment of Trace and PerfMetric job have been analysed and necessary changes have been identified for TraceJob IOC.\n-\tThe key issue of Name Containment in case of Handover for Signalling Based Trace Activation has been analyzed and the necessary updates have been proposed to the TraceJob description.\n-\tKey issue of the gaps in Signalling based trace activation has been analysed and the necessary updates have been proposed to the activation procedures.\n-\tThe key issue of the structuring of the TraceJob IOC has been analyzed and the necessary changes have been proposed to the attributes of the TraceJob IOC.\n-\tThe key issue of the report amount has been analyzed and necessary changes to the definition of the Report Amount parameter has been identified.\n-\tThe key issue of reporting of the UE MDT measurements per DRB per direction per UE has been analyzed and necessary updates have been proposed to the XML schema of the trace file.\n-\tThe key issue of support of management and signalling based MDT collection for NPN networks has been studied and the necessary changes have been proposed to trace specifications to incorporate the identifiers for NPN.\n-\tThe key issue of support of RLF and RCEF reports for NPN networks have been analyzed and necessary updates to requirements have been proposed.\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "7.2\tRecommendations",
                    "description": "",
                    "summary": "",
                    "text_content": "Enhance the Network Resource Model in TS 28.622 [3] and the Trace specifications 32.421 [5], 32.422 [6] and 32.423 [7]:\n-\tUpdate TraceJob IOC with the applicable notifications mechanisms.\n-\tUpdate TraceJob IOC description with the name-containment information for handover in signalling based trace activation.\n-\tUpdate signalling based trace activation procedures to capture the initial messages in case of signalling based trace activation.\n-\tUpdate TraceJob IOC parameters to structure them based on the jobTypes.\n-\tEnhance Report Amount parameter to support M4, M5, M6 and M7.\n-\tUpdate the XML schema for Trace to include the per DRB per direction and per UE information.\n-\tUpdate the business level requirements and add the required identifiers for S-NPN and PNI-NPN.\n-\tUpdate the business level requirements for to support RLF and RCEF reports for NPN networks.\n\n\n\n",
                    "tables": [
                        {
                            "description": "",
                            "table number": 3,
                            "summary": "",
                            "name": ""
                        }
                    ],
                    "figures_meta_data": [],
                    "subsubsections": []
                }
            ]
        }
    ]
}