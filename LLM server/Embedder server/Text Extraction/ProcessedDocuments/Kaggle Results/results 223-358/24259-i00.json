{
    "document_name": "24259-i00.docx",
    "content": [
        {
            "title": "Foreword",
            "description": "This Technical Specification has been produced by the 3rd Generation Partnership Project (3GPP).\nThe contents of the present document are subject to continuing work within the TSG and may change following formal TSG approval. Should the TSG modify the contents of the present document, it will be re-released by the TSG with an identifying change of release date and an increase in version number as follows:\nVersion x.y.z\nwhere:\nx\tthe first digit:\n1\tpresented to TSG for information;\n2\tpresented to TSG for approval;\n3\tor greater indicates TSG approved document under change control.\ny\tthe second digit is incremented for all changes of substance, i.e. technical enhancements, corrections, updates, etc.\nz\tthe third digit is incremented when editorial only changes have been incorporated in the document.\n",
            "summary": "",
            "tables": [],
            "figures_meta_data": [],
            "subsections": []
        },
        {
            "title": "1\tScope",
            "description": "Personal Network Management (PNM) is a home network-based application and provides the home network-based management of Personal Network (PN) consisting of multiple devices belonging to a single user, as described in 3GPP TS 22.259 [2] and 3GPP TS 23.259 [15].\nThe present document provides the protocol details for enabling Personal Network management (PNM) services in the IP Multimedia (IM) Core Network (CN) subsystem based on the protocols of XML Configuration Access Protocol (XCAP), Session Initiation Protocol (SIP) and the Session Description Protocol (SDP).\nThe present document provides the protocol details for enabling Personal Network management (PNM) services in Circuit Switched (CS) domain based on the protocols of CAP, MAP, ISUP, USSD and BICC.\nThe present document is applicable to User Equipment (UEs) and Application Servers (AS) providing PNM capabilities.\nThe present document makes no PNM specific enhancements to SIP, SIP events or SDP specified in 3GPP TS 24.229 [3].\nThe present document makes no PNM specific enhancements to CAP, MAP, ISUP, USSD and BICC.\n",
            "summary": "",
            "tables": [],
            "figures_meta_data": [],
            "subsections": []
        },
        {
            "title": "2\tReferences",
            "description": "The following documents contain provisions which, through reference in this text, constitute provisions of the present document.\n-\tReferences are either specific (identified by date of publication, edition number, version number, etc.) or non-specific.\n-\tFor a specific reference, subsequent revisions do not apply.\n-\tFor a non-specific reference, the latest version applies.  In the case of a reference to a 3GPP document (including a GSM document), a non-specific reference implicitly refers to the latest version of that document in the same Release as the present document.\n[1]\t3GPP TR 21.905: \"Vocabulary for 3GPP Specifications\".\n[2]\t3GPP TS 22.259: \"Service requirements for Personal Network Management (PNM)\".\n[3]\t3GPP TS 24.229: \"IP Multimedia Call Control based on SIP and SDP; Stage 3\".\n[4]\tVoid.\n[5]\t3GPP TS 24.109: \"Bootstrapping interface (Ub) and network application function interface (Ua); Protocol details\".\n[6]\tIETF RFC 4825 (May 2007): \"The Extensible Markup Language (XML) Configuration Access Protocol (XCAP).\"\n[7]\tVoid.\n[8]\t3GPP TS 33.220: \"Generic Authentication Architecture (GAA); Generic bootstrapping architecture\".\n[9]\t3GPP TS 29.328: \"IP Multimedia (IM) Subsystem Sh interface; Signalling flows and message contents\".\n[10]\t3GPP TS 24.228 Release 5: \"Signalling flows for the IP multimedia call control based on Session Initiation Protocol (SIP) and Session Description Protocol (SDP); Stage 3\".\n[11]\t3GPP TS 29.228: \"IP Multimedia (IM) Subsystem Cx and Dx Interfaces; Signalling flows and message contents\".\n[12]\t3GPP TS 29.329: \"Sh interface based on the Diameter protocol; Protocol details\".\n[13]\t3GPP TS 29.078: \"Customised Applications for Mobile network Enhanced Logic (CAMEL) Phase 3: CAMEL Application Part (CAP) specification\".\n[14]\t3GPP TS 24.090: \"Unstructured Supplementary Service Data (USSD); Stage 3\".\n[15]\t3GPP TS 23.259: \"Personal Network Management (PNM); Procedures and Information Flows; Stage 2\".\n[16]\tIETF RFC 4244 (November 2005): \"An Extension to the Session Initiation Protocol (SIP) for Request History Information\".\n[17]\tIETF RFC 4458 (April 2006): \"Session Initiation Protocol (SIP) URIs for Applications such as Voicemail and Interactive Voice Response (IVR)\".\n[18]\t3GPP TS 24.623: \"Extensible Markup Language (XML) Configuration Access Protocol (XCAP) over the Ut interface for Manipulating Supplementary Services\".\n[19]\t3GPP TS 22.085: \"Closed User Group (CUG) Supplementary Services; Stage 1\".\n[20]\t3GPP TS 23.085: \"Closed User Group (CUG) supplementary service; Stage 2\".\n[21]\tIETF RFC 3840 (August 2004): \"Indicating User Agent Capabilities in the Session Initiation Protocol (SIP)\".\n[22]\tIETF RFC 7254 (May 2014): \"A Uniform Resource Name Namespace for the Global System for Mobile Communications Association (GSMA) and the International Mobile station Equipment Identity (IMEI)\".\n[23]\tIETF RFC 4122 (July 2005): \"A Universally Unique IDentifier (UUID) URN Namespace\".\n[24]\t3GPP TS 33.310: \"Network Domain Security (NDS); Authentication Framework (AF)\".\n[25]\tIETF RFC 9110 (June 2022): \" HTTP Semantics\".\n",
            "summary": "",
            "tables": [],
            "figures_meta_data": [],
            "subsections": []
        },
        {
            "title": "3\tDefinitions, symbols and abbreviations",
            "description": "",
            "summary": "",
            "tables": [],
            "figures_meta_data": [],
            "subsections": [
                {
                    "title": "3.1\tDefinitions",
                    "description": "",
                    "summary": "",
                    "text_content": "For the purposes of the present document, the following terms and definitions given in IETF RFC 4825 [6] apply.\nApplication usage\nApplication Unique ID (AUID)\nDocument Selector\nDocument URI\nNaming Conventions\nNode Selector\nNode Selector Separator\nNode URI\nXCAP client\nXCAP resource\nXCAP root\nXCAP root URI\nXCAP server\nXCAP User Identifier (XUI)\n\nFor the purposes of the present document, the following terms and definitions given in 3GPP TS 22.085 [19] apply:\nIncoming Access (IA)\nOutgoing Access (OA)\n\nFor the purposes of the present document, the following terms and definitions given in 3GPP TS 22.259 [2] apply:\nPersonal Areal Network (PAN)\nPersonal Network (PN)\nPersonal Network Element (PNE)\nPNE Identifier\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "3.2\tAbbreviations",
                    "description": "",
                    "summary": "",
                    "text_content": "For the purposes of the present document, the following abbreviations apply:\nACM\tAddress Complete Message\nANM\tAnswer Message\nAS\tApplication Server\nBICC\tBearer Independent Call Control\nBSF\tBootstrapping Server Function\nCAMEL\tCustomised Applications for Mobile network Enhanced Logic\nCAP\tCAMEL Application Part\nCCCF\tCall Continuity Control Function\nCN\tCore Network\nCS\tCircuit Switched\nCUG\tClosed User Group\nFQDN\tFully Qualified Domain Name\nGBA\tGeneric Bootstrapping Architecture\nGMSC\tGateway MSC\nGRUU\tGlobally Routable User Agent URI\nGSM\tGlobal System for Mobile communications\nHLR\tHome Location Register\nHSS\tHome Subscriber Server\nHTTP\tHypertext Transfer Protocol\nIA\tIncoming Access\nIAM\tInitial Address Message\nIARI\tIMS Application Reference Identifier\nICSI\tIMS Communication Service Identifier\nIDP\tInitial Detection Point\nIE\tInformation Element\nIFC\tInitial Filter Criteria\nIM\tIP Multimedia\nIMEI\tInternational Mobile Equipment Identity\nIMS\tIM CN subsystem\nIP\tInternet Protocol\nISDN\tIntegrated Services Digital Network\nISUP\tISDN User Part\nMAP\tMobile Application Part\nMGCF\tMedia Gateway Control Function\nMS\tMobile Station\nMSC\tMobile Switching Centre\nMSISDN\tMS international PSTN/ISDN number\nNAF\tNetwork Application Function\nOA\tOutgoing Access\nP-CSCF\tProxy Call Session Control Function\nPN\tPersonal Network\nPNE\tPersonal Network Element\nPNM\tPersonal Network Management\nPSI\tPublic Service Identity\nPSTN\tPublic Switched Telephone Network\nS-CSCF\tServing Call Session Control Function\nSDP\tSession Description Protocol\nSIP\tSession Initiation Protocol\nSRI\tSend Routing Information\nTLS\tTransport Layer Security\nUE\tUser Equipment\nURI\tUniform Resource Identifier\nURN\tUniform Resource Name\nUSSD\tUnstructured Supplementary Service Data\nVLR\tVisitor Location Register\nXCAP\tXML Configuration Access Protocol\nXML\tExtensible Markup Language\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                }
            ]
        },
        {
            "title": "4\tOverview of personal network management",
            "description": "",
            "summary": "",
            "tables": [],
            "figures_meta_data": [],
            "subsections": [
                {
                    "title": "4.1\tGeneral",
                    "description": "",
                    "summary": "",
                    "text_content": "PNM applications consist of the PN redirection service and the PN access control , both applying only to the terminating service, as described in 3GPP TS 22.259 [2] and 3GPP TS 23.259 [15]. The PN redirection is a PNM application that enables redirecting a session addressed to any of the UEs belonging to the PN to a certain UE or a certain PNE other than a PN UE of their PN, i.e., the default UE or default PNE other than a PN UE for terminating services. The PN access control is a PNM application that enables users to exercise PN access control to restrict accesses to certain UEs or certain PNEs other than PN UEs of their PN. The PN may consist of UEs which are only privately accessed, that is each UE may be accessed only by other UEs of the PN. The PN-User may additionally modify the access levels of each UE of the PN to be public or private. In this regard the PN behaves similar to a CUG as specified in 3GPP TS 22.085 [19] and 3GPP TS 23.085 [20], with Outgoing Access and whether Incoming Access is allowed for the PN UE is dependent on the PN access control list for that PN UE.\nIn order to make the above happen, the following procedures are provided within this document:\n-\tprocedures for PN-registration are specified in clause 6;\n-\tprocedures for PN-configuration are specified in clause 7;\n-\tprocedures for PN-query are specified in clause 8;\n-\tprocedures for session redirection are specified in clause 9; and\n-\tprocedures for restricting access to certain UEs are specified in clause 10.\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "4.2\tNetwork capabilities",
                    "description": "",
                    "summary": "",
                    "text_content": "In order to support the PNM services the following network capabilities are assumed:\n1)\tprovision by the home network operator of PNM specific AS on the IM CN subsystem, as specified in 3GPP TS 24.229 [3];\n2)\tsupport of CAMEL phase-3 and USSD as specified in 3GPP TS 29.078 [13] and 3GPP TS 24.090 [14].\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                }
            ]
        },
        {
            "title": "5\tFunctional entities",
            "description": "",
            "summary": "",
            "tables": [],
            "figures_meta_data": [],
            "subsections": [
                {
                    "title": "5.1\tIntroduction",
                    "description": "",
                    "summary": "",
                    "text_content": "",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "5.2\tUser Equipment (UE)",
                    "description": "",
                    "summary": "",
                    "text_content": "To be compliant with this document, a UE shall implement the role of a PN UE (see subclause 6.2, subclause 7.2, subclause 8.2, subclause 9.2 and subclause 10.2).\nThe UE shall implement the XCAP client role as described in subclause 11.2.1.\nThe UE shall implement HTTP digest authentication (see 3GPP TS 24.109 [5]).\nThe UE shall implement Transport Layer Security (TLS) according to the TLS profile specified in 3GPP TS 33.310 [24] annex E.\nThe UE shall implement the GBA Function as described in 3GPP TS 33.220 [8].\nThe UE shall initiate a bootstrapping procedure with the bootstrapping server function (BSF) located in the home network, as described in 3GPP TS 24.109 [5].\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "5.3\tApplication Server (AS)",
                    "description": "",
                    "summary": "",
                    "text_content": "The AS implementing PNM application shall implement the role of a XCAP server (see subclause 11.2.2).\nThe AS implementing PNM application shall implement the Network Application Function (NAF) as described in 3GPP TS 33.220 [8].\nNOTE:\tFor terminating services, the PNM Application in IM CN subsystem is the first Application Server of any Application Servers in the path of the call.\nThe AS implementing PNM application shall remove g.3gpp.pne-id media feature tag containing IMEI included in the Contact header field of requests and responses of SIP methods other than the SIP REGISTER method prior to forwarding the request or response to the destination.\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "5.4\tAuthentication Proxy",
                    "description": "",
                    "summary": "",
                    "text_content": "The generic requirements for an authentication proxy are defined in 3GPP TS 24.109 [5].\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                }
            ]
        },
        {
            "title": "6\tRoles for PN-registration",
            "description": "",
            "summary": "",
            "tables": [],
            "figures_meta_data": [],
            "subsections": [
                {
                    "title": "6.1\tIntroduction",
                    "description": "",
                    "summary": "",
                    "text_content": "The PN-registration is the procedure where a UE is added to the PN, or a PNE is added to the PAN. As a result of a successful registration, the UE capabilities are conveyed to the PNM application.\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "6.2\tPN UE",
                    "description": "",
                    "summary": "",
                    "text_content": "If a PN UE supports the PN controller functionality and is configured to act as a PN controller the PN UE shall include in the Contact header of the REGISTER request a g.3gpp.iari_ref feature tag containing the IARI value defined in subclause 10.4.\nUpon receiving a REGISTER request sent from a PNE other than a PN UE via the PAN internal interface, the PN UE shall initiate a SIP REGISTER request as defined in 3GPP TS 24.229 [3] subclause 5.1.1.2.1 with the following addition:\n1)\tincluding in the Contact header field a g.3gpp.pne-id media feature tag containing the PNE identifier defined in subclause 6.4.\nIf using the multiple registrations mechanism for registering each PNE, the PN UE shall use a different \"reg-id\" value when registering the PNE.\nIf using SIP re-registration procedures for registering another PNE, the PN UE includes a Contact header field for each registered PNE in the SIP REGISTER request.\nThere are no PNM specific requirements for registration of the PN UE to the CS domain.\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "6.3\tPNM Application",
                    "description": "",
                    "summary": "",
                    "text_content": "",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": [
                        {
                            "title": "6.3.1\tPN-registration procedure in the IM CN subsystem",
                            "text_content": "The PNM AS can be configured with any of various options for obtaining information from the IM CN subsystem specified in 3GPP TS 24.229 [3], 3GPP TS 29.328 [9] and 3GPP TS 29.329 [12], for example:\na)\treceipt of REGISTER request which causes a third-party REGISTER request containing in the body the incoming REGISTER request from the PN UE and the 200 (OK) response to the incoming REGISTER request to be sent to the PNM application. The PNM application may then obtain information from the body of the third-party REGISTER request;\nb)\treceipt of REGISTER request which causes a third-party REGISTER request containing in the body a <service-info> element containing the private user identity of the PN UE to be sent to the PNM application. The PNM application may then subscribe to the reg event package for that user to obtain information; or\nc)\treceipt of REGISTER request which causes a third-party REGISTER request containing in the body a <service-info> element containing the private user identity of the PN UE to be sent to the PNM application. The PNM application may then use the Sh interface to obtain information.\nThis document places no requirement on the use of all or any of these mechanisms.\nAfter successful PN-registration, the PNM AS shall enrol the public user identity of the registered PN UE or the registered PNE identifier in the data base.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "6.3.2\tPN-registration procedure in the CS domain",
                            "text_content": "When the gsmSCF (CAMEL service for PNM) receives a MAP_NOTE_MM_EVENT message sent from the VLR to report that the status of the UE set to ‘attached’, the gsmSCF sets the UE registration status in the PN to ‘registered’ and sends the UE status to the PNM AS.\nNOTE:\tThe interface between the gsmSCF and the PNM AS is unspecified.\nWhen the gsmSCF (CAMEL service for PNM) receives a MAP_NOTE_MM_EVENT message sent from the VLR to report that the status of the UE set to ‘detached’, the gsmSCF sets the UE registration status in the PN to ‘deregistered’ and checks whether the PN UE was the only default UE in the PN. If it was the only default UE in the PN, the gsmSCF generates a USSD Notify message to the HSS to inform the user.\n",
                            "figures_meta_data": [],
                            "tables": []
                        }
                    ]
                },
                {
                    "title": "6.4\tDefinition of media feature tag g.3gpp.pne-id",
                    "description": "",
                    "summary": "",
                    "text_content": "Media feature-tag name: g.3gpp.pne-id\nASN.1 Identifier: 1.3.6.1.8.2.8\nSummary of the media feature indicated by this tag: This media feature-tag when used in a SIP request or a SIP response indicates the identifier of a PNE other than a UE.\nValues appropriate for use with this feature-tag: URN.  When an IMEI is available, the URN shall take the form of a IMEI URN (see IETF RFC 7254 [22]). If no IMEI is available, the URN shall take the form of a string representation of a UUID as a URN as defined in IETF RFC 4122 [23].\nThe feature-tag is intended primarily for use in the following applications, protocols, services, or negotiation mechanisms: This feature-tag is most useful in a communications application, for describing the capabilities of a device, such as a PC or PDA.\nExamples of typical use: Indicating the identifier of a device which is part of a Personal Area Network.\nRelated standards or documents: 3GPP TS 24.259: \"Personal Network Management (PNM), stage 3\".\nSecurity Considerations:\nUE is not allowed to include g.3gpp.pne-id media feature tag containing IMEI in the Contact header field of requests and responses of SIP methods other than the SIP REGISTER method except when the request or response is guaranteed to be sent to a trusted intermediary that will remove the g.3gpp.pne-id media feature tag prior to forwarding the request or response to the destination. Other security considerations for this media feature-tag are discussed in subclause 12.1 of IETF RFC 3840 [21].\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                }
            ]
        },
        {
            "title": "7\tRoles for PN-configuration",
            "description": "",
            "summary": "",
            "tables": [],
            "figures_meta_data": [],
            "subsections": [
                {
                    "title": "7.1\tIntroduction",
                    "description": "",
                    "summary": "",
                    "text_content": "This clause specifies the PN-configuration and PN-deconfiguration procedures for supporting PN UE redirection, PN access control and PN UE name changing.\nNOTE:\tA text string together with angled brackets (e.g. <PNUEName>) represents an XML element defined by the XML schema in Annex B.\nSubclause A.3 provides examples of signalling flows for PN-configuration and PN-deconfiguration.\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "7.2\tPN UE",
                    "description": "",
                    "summary": "",
                    "text_content": "In order for the PN UE to initiate the PN-configuration procedure for creating/replacing or deleting an XML document, an element within an XML document or an attribute of an element within an XML document, the PN UE shall know the data structure and constraints defined by the PNM XML schema in annex B. The PN UE shall also know what HTTP URI to use based on the naming conventions for constructing the HTTP URIs described in annex C.\nThe PN UE initiates the PN-configuration procedure or the PN-deconfiguration procedure by sending a HTTP PUT request or a HTTP DELETE request message with:\n-\tRequest-URI field indicating to the PNM application the desired location where the XML document, an element within an XML document or an attribute of an element within an XML document which is requested to be configured as follows:\n-\tif the PN-configuration procedure performed for configuring an XML document, the Request-URI is constructed with a document URI pointing to the XML document;\n-\tif the PN-configuration procedure performed for configuring an element within an XML document, the document selector of the Request-URI is constructed with a document URI pointing to the XML document containing the element to be configured, and the node selector of the Request-URI with a node URI identifying the element to be configured;\n-\tif the PN-configuration procedure performed for configuring an attribute of an element within an XML document, the document selector of the Request-URI is constructed with a document URI pointing to the XML document containing the element to be queried and the node selector of the Request-URI with a node URI identifying the attribute to be configured;\n-\tHost field indicating the Internet host and port number of the PNM application;\n-\tUser-Agent field containing information about the user agent originating the request and the static string (e.g. 3gpp-gba) to indicate to the NAF that the UE supports 3GPP-bootstrapping based authentication;\n-\tReferer field indicating the address (URI) of the resource from which the URI for the PNM application is obtained;\n-\tAuthorization field containing the credentials obtained by means of executing the bootstrapping procedure with the BSF as described in 3GPP TS 33.220 [8];\n-\tContent-Type field indicating\n-\t\"application/pnm+xml\", if the PN-configuration is performed for configuring an XML document;\n-\t\"application/xcap-el+xml\" as in IETF RFC 4825 [6], if the PN-configuration is performed for configuring an element within an XML document;\n-\t\"application/xcap-att+xml\" as in IETF RFC 4825 [6], if the PN-configuration is performed for configuring an attribute of an element within an XML document;\nIf the PN-configuration is performed for creating/replacing the XML document for the PN UE redirection purpose, the XML body of the HTTP PUT request message shall contain:\n-\tthe <RedirectedUserID> containing the children <PNUEID> and <PNUEName>, and the <RedirectingUserID> with a unique value for the \"id\" attribute containing the children <PNUEID> and <PNUEName>, as well as the <RedirectionLevel> and the <RedirectionPrio>;\nNOTE:\tA PN user decides the value of the <RedirectionLevel> element based on the PN UE capabilities. According to the requirements of 3GPP TS 22.259 [2], this document supports three values (a global level for all services, a service level for selected services and a service component level for different media).\n-\tthe value of the \"UriOfRedirectedUser\" attribute for the <UERedirection> shall be populated with the public user identity of the PN UE configured by the PN UE to be redirected and indicated by the <RedirectedUserID>.\nIf the PN-configuration is performed for creating/replacing the XML document for the PNE redirection purpose, the XML body of the HTTP PUT request message shall contain:\n-\tthe <RedirectedUserID> containing the children <PNUEID>,  <PNEID> and <PNEName>, and the <RedirectingUserID> with a unique value for the \"id\" attribute containing the children <PNEID> and <PNEName>, as well as the <RedirectionLevel> and the <RedirectionPrio>;\nNOTE:\tA PN user decides the value of the <RedirectionLevel> element based on the PNE capabilities. According to the requirements of 3GPP TS 22.259 [2], this document supports three values (a global level for all services, a service level for selected services and a service component level the different media).\n-\tthe value of the \"UriOfRedirectedUser\" attribute for the <PNERedirection> shall be populated with the GRUU of the PNE configured by the PNE to be redirected and indicated by the <RedirectedUserID>.\nIf the PN-configuration is performed for creating/replacing the XML document for the PN access control purpose, the XML body of the HTTP PUT request message shall contain:\n-\tthe <ControllerUE> containing the children <PNUEID> and <PNUEName>, the <ControlleeUE> with a unique value for the \"id\" attribute containing children <PNUEID> and <PNUEName>, and the <PNAccessControlList> and <PNAccessControlType>;\n-\tthe value of the \"UriOfControllerUE\" attribute of the <AccessControl> shall be populated with the public user identity of the controller UE indicated by the <ControllerUE>.\nIf the PN-configuration is performed for creating/replacing the XML document for the PNE access control purpose, the XML body of the HTTP PUT request message shall contain:\n-\tthe <ControllerUE> containing the children <PNUEID> and <PNUEName>, the <ControlleePNE> with a unique value for the \"id\" attribute containing children <PNUEID>,  <PNEID> and <PNEName>, and the <PNAccessControlList> and <PNAccessControlType>;\n-\tthe value of the \"UriOfControllerUE\" attribute of the <AccessControl> shall be populated with the public user identity of the controller UE indicated by the <ControllerUE>\nNOTE:\tThe PNE here stands for the PNE other than a PN UE, i.e. ME, MT or TE of a PAN.\nIf the PN-configuration is performed for the PN UE name changing purpose, and if the PN UE does not know the value of the \"id\" attribute of the <UEName> to be changed, the UE shall first initiate the PN-query procedure as specified in clause 8 in order to cache a copy of the XML document containing the value of the \"id\" attribute of that <UEName>.The XML body of the HTTP PUT request message shall contain:\n-\tthe <PNUEID> identified by the shared public user identity, the <UEName> containing an \"id\" attribute with the attribute value pointing to the <UEName> to be changed and the <Name> to be changed.\nIf the PN-configuration is performed for configuring an element within an XML document, the XML body of the HTTP request message shall contain:\n-\tthe XML element to be configured.\nIf the PN-configuration is performed for configuring an attribute of an element within an XML document, the XML body of the HTTP request message shall contain:\n-\tthe value of the attribute of an element to be configured.\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "7.3\tPNM application",
                    "description": "",
                    "summary": "",
                    "text_content": "In order for the PNM application to support the PN-configuration procedure for creating/replacing or deleting an XML document, an element within an XML document or an attribute of an element within an XML document, the PNM application shall know the data structure and constraints imposed by the PNM XML schema in annex B. The PNM application shall also be configured to be able to handle the HTTP URIs described in annex C.\nUpon receiving a HTTP PUT request or a HTTP DELETE request message, the PNM application verifies the Authorization header by using the bootstrapping transaction identifier B-TID and the key material Ks_NAF obtained from the BSF (as described in 3GPP TS 33.220 [8]). If the verification succeeds, the PNM application obtains the private user identity associated with the received public user identity. The PNM application then authorizes the PN UE by comparing the received public user identity with the preconfigured one identified by the private user identity.\nIf the authorization succeeds, the PNM application shall perform the requested action and generate a response in accordance with IETF RFC 4825 [6].\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                }
            ]
        },
        {
            "title": "8\tRoles for PN-query",
            "description": "",
            "summary": "",
            "tables": [],
            "figures_meta_data": [],
            "subsections": [
                {
                    "title": "8.1\tIntroduction",
                    "description": "",
                    "summary": "",
                    "text_content": "This clause specifies the PN-query procedure.\nAnnex A.3 provides examples of signalling flows for PN-query.\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "8.2\tPN UE",
                    "description": "",
                    "summary": "",
                    "text_content": "In order for the PN UE to initiate the PN-configuration procedure for querying an XML document, an element within an XML document or an attribute of an element within an XML document, the PN UE shall know the data structure and constraints defined by the PNM XML schema in annex B. The PN UE shall also know what HTTP URI to use based on the naming conventions for constructing the HTTP URIs described in annex C.\nThe PN UE initiates the PN-query procedure by sending a HTTP GET request message with:\n-\tRequest-URI field indicating to the PNM application the desired location of an XML document, an element within an XML document or an attribute of an element within an XML document which is queried as follows:\n-\tif an XML document is queried, the Request-URI is constructed with a document URI pointing to the XML document;\n-\tif an element within an XML document is queried, the document selector of the Request-URI is constructed with a document URI pointing to the XML document containing the element to be queried and the node selector of the Request-URI with a node URI identifying the element to be queried;\n-\tif an attribute of an element within an XML document is queried, the document selector of the Request-URI is constructed with a document URI pointing to the XML document containing the element to be queried and the node selector of the Request-URI with a node URI identifying the attribute to be queried.\n-\tHost field indicating the Internet host and port number of the PNM application;\n-\tUser-Agent field containing information about the user agent originating the request and the static string (e.g. 3gpp-gba) to indicate to the NAF that the UE supports 3GPP-bootstrapping based authentication;\n-\tReferer field indicating the address (URI) of the resource from which the URI for the PNM application is obtained;\n-\tAuthorization field containing the credentials obtained by means of executing the bootstrapping procedure with the BSF as described in 3GPP TS 33.220 [8].\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "8.3\tPNM application",
                    "description": "",
                    "summary": "",
                    "text_content": "In order for the PNM application to support the PN-configuration procedure for querying an XML document, an element within an XML document or an attribute of an element within an XML document, the PNM application shall know the data structure and constraints imposed by the PNM XML schema in annex B. The PNM application shall also be configured to be able to handle the HTTP URIs described in annex C.\nUpon receiving a HTTP GET request message, the PNM application verifies the Authorization header by using the bootstrapping transaction identifier B-TID and the key material Ks_NAF obtained from the BSF (as described in 3GPP TS 33.220 [8]).\nIf the verification succeeds, the PNM application shall perform the requested action and generate a response in accordance with IETF RFC 4825 [6] with an XML body containing either the XML document, or the element within an XML document or the attribute of an element within an XML document as queried by the PN UE.\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                }
            ]
        },
        {
            "title": "9\tRoles for PN redirection",
            "description": "",
            "summary": "",
            "tables": [],
            "figures_meta_data": [],
            "subsections": [
                {
                    "title": "9.1\tIntroduction",
                    "description": "",
                    "summary": "",
                    "text_content": "The PN redirection redirects sessions containing in the Request-URI the address of any UEs of a PN to the default UE or the default PNE other than a PN UE of the same PN as described in 3GPP TS 22.259 [2] and in 3GPP TS 23.259 [15].\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "9.2\tPN UE",
                    "description": "",
                    "summary": "",
                    "text_content": "There is no PNM specific requirement for the PN UE redirection.\nUpon receiving a SIP INVITE request containing in the Request-URI the address of a PNE, the UE shall forward the SIP INVITE request to the PNE via the PAN internal interface.\nNOTE:\tThe PAN internal interface is out of scope of this document.\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "9.3\tPNM application",
                    "description": "",
                    "summary": "",
                    "text_content": "",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": [
                        {
                            "title": "9.3.1\tPN UE redirection procedure in the IM CN subsystem",
                            "text_content": "When the PNM AS receives an initial request containing in the Request-URI the address of a UE or a PNE other than a PN UE that exists in the PN configuration due to the terminating initial filter criteria, the PNM AS shall verify if the address in the Request-URI exists in a <RedirectingUserID> element in the PN configuration. If there is a matching <RedirectingUserID> element the PNM AS shall send an initial request of the same SIP Method on a new dialog to the URI contained in the <RedirectedUserID> element. The PNM AS then routes the initial request based on the standard call setup procedures as specified in 3GPP TS 24.229 [3].\nNOTE:\tThe PNM AS is triggered first by forming the initial filter criteria in the S-CSCF.\nThe PNM AS shall include in the request the following:\na)\ta Request-URI set to the SIP URI contained in the <RedirectedUserID> element (e.g. a public user identity or a GRUU);\nb)\ta From header set to the SIP URI of the PNM AS;\nc)\ta To header set to the URI contained in the <RedirectedUserID> element;\nd)\ta P-Asserted-Identity header set to the contents of the P-Asserted-Identity header in the original initial request;\ne)\ta Contact header set to the IP address or FQDN of the PNM AS;\nf)\ta Supported header containing the option tags from the original initial request with the addition of the option tag \"histinfo\";\ng)\ta History-Info header that includes as the Targeted-to-URI the URI from the Request-URI of the original initial request, and as the next branch index URI, the contents of the Request-URI of this request.\nh)\ta Accept-Contact header with a g.3gpp.pne-id media feature tag containing the PNE identifier or media feature tag containing the requested device capabilites along with the parameters \"require\" and \"explicit\".\nIf the PNM AS receives in response a 4xx, 5xx or 6xx response, and there exist more <RedirectedUserID> elements in the PN configuration which have not had the request forwarded to them yet, then the PNM AS shall send an initial request of the same SIP Method on a new dialog to the URI of the UE or the PNE other than a PN UEcontained in the next lower priority <PNController> element as above.\nOtherwise, if there does not exist more <RedirectedUserID> elements in the PN configuration which have not had the request forwarded to them yet, then the PNM AS shall forward the response back towards the originator of the initial request.\nIf the PNM AS receives in response a 200 (OK) response, the PNM AS shall forward the response back towards the originator of the initial request.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "N UE redirection procedure in the CS domain",
                            "text_content": "When the PNM application receives an indication that the gsmSCF has received a CAMEL IDP relating to a terminating call, the PNM application shall:\n1)\tcheck if the re-direction is applicable for the call on the basis of service key and called party number received in CAMEL IDP message.\n2)\tif the call is not subject to re-direction, cause the gsmSCF to respond with a CAMEL CONTINUE and no further PNM specific procedures are performed on this call.\n3)\tif the call is subject to re-direction, retrieve the Destination Routing Address.\n4)\tif the call is subject to re-direction, cause the gsmSCF to respond with a CAMEL CONNECT message with the Destination Routing Address set to the MSISDN of default UE.\nWhen the PNM application receives an indication that the gsmSCF has received a EventReportBCSM message indicating that the default UE cannot setup the session/call, the PNM application shall:\n1)\tretrive the Destination Routing Address of the other UE of the next lower priority based on the PN-configuration.\n2)\tcause the gsmSCF to respond with a CAMEL CONNECT message with the Destination Routing Address set to the MSISDN of the selected UE.\n3)\tif there are no more UEs selected for redirection, cause the gsmSCF to respond with a CAMEL CONTINUE and no further PNM specific procedures are performed on this call.\n",
                            "figures_meta_data": [],
                            "tables": []
                        }
                    ]
                }
            ]
        },
        {
            "title": "10\tRoles for PN access control",
            "description": "",
            "summary": "",
            "tables": [],
            "figures_meta_data": [],
            "subsections": [
                {
                    "title": "10.1\tIntroduction",
                    "description": "",
                    "summary": "",
                    "text_content": "The PN access control procedure enables the controller UE to exercise access control to restrict accesses to certain PN controllee UE(s) of the PN, or certain controllee PNE(s) other than the UE as described in 3GPP TS 23.259 [15].\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "10.2\tPN UE",
                    "description": "",
                    "summary": "",
                    "text_content": "When the PN UE that supports the PN controller functionality and that is configured to act as a PN controller receives an initial request containing an Accept-Contact header containing a g.3gpp.iari_ref feature tag containing the IARI value defined in subclause 10.4 and a target URI-parameter in the Request-URI, then the PN UE shall perform the PN controller function and indicate to the user that the PN controller UE has received a request for the PN controllee UE, otherwise the PN UE shall not perform the PN controller function and shall follow the UE terminating case procedures in 3GPP TS 24.229 [3].\nWhen performing the PN controller function the PN UE shall:\na)\tindicate the PN controllee UE indicated by the URI in the target URI-parameter contained in the Request-URI;\nb)\tindicate the identity of the originating user indicated in the P-Asserted-Identity header.\nThe PN UE may offer the user the following options:\na)\tallow the request to be forwarded to the PN controllee UE;\nb)\tdeny the request (i.e reject the session);\nc)\taccept the request (i.e establish the session).\nWhen allowing the request to be forwarded to the PN controllee UE the PN UE shall send a 302 (Moved Temporarily) response. In the 302 (Moved Temporarily) response the PN UE shall:\na)\tinclude a Contact header containing the URI from the target URI-parameter in the Request-URI of the incoming request;\nb)\tinclude a History-Info header copied from the incoming request unless the user wishes not to reveal to the user of the PN controllee UE that the request was forwarded first to the PN controller UE.\nWhen the user allows the request to be forwarded to the PN controllee UE the PN UE may allow the user to add the URI from the P-Asserted-Identity header to a <PNAccessControlList> using the procedure in subclause 7.2.\nWhen denying the request to be forwarded to the PN controllee UE the PN UE shall send either:\na)\ta 480 (Temporarily Unavailable) response if the user wishes to not allow the PN controllee UE to receive requests from the originator at this time but may allow requests at some future time;\nb)\ta 410 (Gone) response if the user wishes to not allow the PN controllee UE to receive requests from the originator at any time but wishes the originator to not know that the request was actively blocked; or\nc)\ta 403 (Forbidden) response if the user wishes to not allow the PN controllee UE to receive requests from the originator at any time and wishes the originator to know that the request was actively blocked.\nThe PN UE should only send a 480 (Temporarily Unavailable) response to the PN controller request when the user has specifically denied the request as this will prevent the request being forwarded to other PN controller UEs. When the user allows the request to be forwarded to the PN controllee UE the PN UE may allow the user to add the URI from the P-Asserted-Identity header to a <PNAccessControlList> using the procedure in subclause 7.2.\nWhen the user accepts the request the PN UE shall follow the procedures in 3GPP TS 24.229 [3].\nWhen a PN UE that does not support the PN controller functionality or that is not configured to act as a PN controller (i.e a PN controllee UE) receives an initial request the PN UE shall follow the UE terminating case procedures in 3GPP TS 24.229 [3].\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "10.2A\tPN UE procedures supporting PNE access control",
                    "description": "",
                    "summary": "",
                    "text_content": "When the controllee is the PNE(s) other than the UE, the PN UE procedures in subclause 10.2 apply except that the references to \"PN controllee UE\" are replaced by \"controllee PNE\".\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "10.3\tPNM application",
                    "description": "",
                    "summary": "",
                    "text_content": "",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": [
                        {
                            "title": "10.3.1\tPN access control procedure in the IM CN subsystem",
                            "text_content": "When the PNM AS receives an initial request containing in the Request-URI the address of a PN UE within the same PN as the originating PN UE the PNM AS shall allow the request to continue normally.\nWhen the PNM AS receives an initial request from a UE that is not a member of the same PN as the PN UE that's address is contained in the Request-URI and the PN Access Control is not enabled the PNM AS shall return a 403 (Forbidden) response.\nWhen the PNM AS receives an initial request from a UE that is not a member of the same PN as the PN UE that's address is contained in the Request-URI and the address in the Request-URI exists in a <PNController> element in the PN access control list the PNM AS shall allow the request to continue normally.\nWhen the PNM AS receives an initial request due to the terminating initial filter criteria, from a UE that is not a member of the same PN as the PN UE that's address is contained in the Request-URI and the address in the Request-URI exists in a <PNControllee> element in the PN access control list the PNM AS shall verify if the address in the P-Asserted-Identity exists in a <PNAccessControlList> element in the PN access control list.\nNOTE:\tThe PNM AS is triggered first by forming the initial filter criteria in the S-CSCF.\nIf there is a matching <PNAccessControlList> element the PNM AS shall allow the request to continue normally.\nIf there is no matching <PNAccessControlList> element the PNM AS shall send an initial request of the same SIP Method on a new dialog to the URI of the PN controller UE contained in the <PNController> element if it exists. If no <PNController> element exists then the PNM AS shall return a 403 (Forbidden) response. When sending the initial request to the PN controller UE the PNM AS shall include in the request the following:\na)\ta Request-URI set to the SIP URI contained in the <PNController> element along with a target URI-Parameter as defined in IETF RFC 4458 [17] set to the URI from the Request-URI of the original initial request;\nb)\ta From header set to the SIP URI of the PNM AS;\nc)\ta To header set to the URI contained in the <PNController> element;\nd)\ta P-Asserted-Identity header set to the contents of the P-Asserted-Identity header in the original initial request;\ne)\ta Contact header set to the IP address or FQDN of the PNM AS;\nf)\ta Supported header containing the option tags from the original initial request with the addition of the option tag \"histinfo\";\ng)\ta History-Info header that includes as the Targeted-to-URI the URI from the Request-URI of the original initial request, and as the next branch index URI, the contents of the Request-URI of this request including the target URI-parameter along with the index parameters as specified in IETF RFC 4244 [16];\nh)\tan Accept-Contact header containing the g.3gpp.iari_ref feature tag containing the IARI value <urn:urn-7:3gpp-application.ims.iari.PNM-Controller>.\nIf the PNM AS receives in response a 302 (Moved Temporarily) response the PNM AS shall redirect the original incoming request to the URI contained in the Contact header of the 302 (Moved Temporarily) response. The PNM AS shall add to the request the following:\na)\ta Request-URI set to the SIP URI contained in the Contact header of the 302 (Moved Temporarily) response;\nb)\ta Supported header containing the option tags from the original initial request with the addition of the option tag \"hist-info\";\nc)\ta History-Info header that includes the URIs from the History-Info header in the 302 (Moved Temporarily) response along with the contents of the Request-URI of this request as the next branch index URI under the top level Targeted-to-URI, along with the appropriate index parameter as specified in IETF RFC 4244 [16], if the 302 (Moved Temporarily) response contains a History-Info header;\nIf the PNM AS receives in response a 4xx (other than a 403 (Forbidden) response or 410 (Gone) response or 480 (Temporarily Unavailable) response), 5xx or 6xx response and there exist more <PNController> elements in the PN access control list which have not had the request forwarded to yet, then the PNM AS shall send an initial request of the same SIP Method on a new dialog to the URI of the PN controller UE contained in the <PNController> element as above except that the History-Info header shall include the URIs from the History-Info header in the 302 (Moved Temporarily) response and as the next branch index URI,  the contents of the Request-URI of this request including the target URI-parameter along with the index parameters as specified in IETF RFC 4244 [16];\nOtherwise, if there do not exist more <PNController> elements in the PN access control list which have not had the request forwarded to yet,  then forward the response back towards the originator of the initial request.\nIf the PNM AS receives in response a 200 (OK) response, a 403 (Forbidden) response, a 410 (Gone) response or 480 (Temporarily Unavailable) response the PNM AS shall forward the response back towards the originator of the initial request.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "10.3.2\tPN access control procedure in the CS domain",
                            "text_content": "When the PNM application receives an indication that the gsmSCF has received a CAMEL IDP message related to a terminating call, the PNM application shall:\n1)\tcheck if access control is applicable on the basis of the service key and called party number received in the CAMEL IDP message.\n2)\tif the call is not subject to access control, cause the gsmSCF to respond with a CAMEL CONTINUE and no further PNM specific procedures are performed on this call.\n3)\tif the call is subject to access control, it causes the gsmSCF to perform as follows:\na)\tcheck if the calling party is configured in the PN access control list.\nb)\tif the calling party is configured in the PN access control list, cause the gsmSCF to respond with a CAMEL CONTINUE message to the GMSC.\nc)\tif the calling party is not configured in the PN access control list, cause the gsmSCF to generate the USSD request message to the controller UE.\n4)\tbased on the controller’s response cause the gsmSCF to respond with a CAMEL CONTINUE message or a CALL RELEASE message to the GMSC.\n",
                            "figures_meta_data": [],
                            "tables": []
                        }
                    ]
                },
                {
                    "title": "10.4\tPNM controller IMS application reference identifier",
                    "description": "",
                    "summary": "",
                    "text_content": "The URN used to define the IARI for the PNM controller application: value urn:urn-7:3gpp-application.ims.iari.pnm-controller. The URN is registered at http://www.3gpp.com/Uniform-Resource-Name-URN-list.html.\nSummary of the URN: This URN indicates that the device supports the PNM controller application\nThe URN is intended primarily for use in the following applications, protocols, services, or negotiation mechanisms:\n-\tThis URN is most useful in a communications application, for describing the capabilities of a device, such as a phone or PDA.\nExamples of typical use: Indicating that a mobile phone supports the PNM controller application.\nRelated standards or documents:\n-\t3GPP TS 24.259: \"Personal Network Management (PNM), stage 3\"\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                }
            ]
        },
        {
            "title": "11\tProtocol at the Ut reference point",
            "description": "",
            "summary": "",
            "tables": [],
            "figures_meta_data": [],
            "subsections": [
                {
                    "title": "11.1\tIntroduction",
                    "description": "",
                    "summary": "",
                    "text_content": "The XML Configuration Access Protocol (XCAP) is used to create, read, write, modify and delete data related to the PNM service. XCAP uses the HTTP methods PUT, GET and DELETE for communication over the Ut reference point.\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "11.2\tRoles",
                    "description": "",
                    "summary": "",
                    "text_content": "",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": [
                        {
                            "title": "11.2.1\tXCAP client",
                            "text_content": "The XCAP client is a logical function as defined in IETF RFC 4825 [6]. The XCAP client provides the means to create, read, write, modify and delete the data used for the PNM services. In doing so, it shall generate an HTTP PUT, or an HTTP GET or an HTTP DELETE request in accordance with IETF RFC 9110 [25] and 3GPP TS 24.623 [18].\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "11.2.2\tXCAP server",
                            "text_content": "The XCAP server is a logical function as defined in IETF RFC 4825 [6]. The XCAP server stores all data relevant for the PNM services.  When the XCAP server receives an HTTP PUT, HTTP GET or HTTP DELETE request for manipulating the data base, the XCAP server shall first authenticate the request in accordance with 3GPP TS 24.109 [5] and then perform authorization. Afterwards the XCAP server shall perform the requested action and generate a response in accordance with IETF RFC 9110 [25] and 3GPP TS 24.623 [18].\n",
                            "figures_meta_data": [],
                            "tables": []
                        }
                    ]
                }
            ]
        },
        {
            "title": "A.1\tScope of signalling flows",
            "description": "This annex gives examples of signalling flows for Personal Network Management based on XCAP, the Session Initiation Protocol (SIP) and SIP Events.\nThese signalling flows provide detailed signalling flows, which expand on the overview information flows provided in 3GPP TS 23.259 [15].\n",
            "summary": "",
            "tables": [],
            "figures_meta_data": [],
            "subsections": []
        },
        {
            "title": "A.2\tIntroduction",
            "description": "",
            "summary": "",
            "tables": [],
            "figures_meta_data": [],
            "subsections": [
                {
                    "title": "A.2.1\tGeneral",
                    "description": "",
                    "summary": "",
                    "text_content": "The signalling flows provided in this annex follow the methodology developed in 3GPP TS 24.228 [10]. The following additional considerations apply:\na)\t3GPP TS 24.228 [10] shows separate signalling flows with no configuration hiding between networks, and with configuration hiding between networks. There is no personal network management specific functionality associated with this hiding, and therefore such separate signalling flows are not shown in the present document;\nb)\t3GPP TS 24.228 [10] does not show the functionality between the S-CSCF and the AS. As personal network management depends on the functionality provided by various AS, the signalling flows between S-CSCF and AS are shown in the present document;\nc)\t3GPP TS 24.228 [10] breaks down the functionality of the various CSCFs. Such intervening activity in the CSCFs is in general not relevant to showing the functionality within personal network management, and therefore the CSCFs are often collapsed into a single entity labelled \"Intermediate IM CN subsystem entities\";\nd)\twhere entities are combined as in c) above, and the signalling flow is directed to such a combined entity, the contents of the signalling flow represent the contents of the sending entity except when otherwise stated;\ne)\twhere entities are combined as in c) above and the signalling flow originates at such a combined entity, the contents of the signalling flow represent the contents of the receiving entity except when otherwise stated;\nf)\twithin the CS domain, both ISUP and BICC can be used. The signalling flows represent only the ISUP signalling flows, and the BICC signalling flows (which can be assumed to be similar with no additional PNM specific content) are not shown; and\ng)\tadditional functionality from 3GPP releases 6, 7 and 8 over and above that shown in 3GPP TS 24.228 [10] is incorporated in these.\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "A.2.2\tKey required to interpret signalling flows",
                    "description": "",
                    "summary": "",
                    "text_content": "The key to interpret signalling flows specified in 3GPP TS 24.228 [10] subclauses 4.1 and 4.2 applies with the additions specified below:\n-\tConsistent with the conventions used in 3GPP TS 24.228 [10] home1.net is used for the home network of the originating user and home2.net is used for the home network of the terminating user. In registration and configuration flows the PN UE and PNM network elements are considered to be in home1.net, however in scenarios such as PN redirection and PNM access control where the PNM elements are in the terminating network the PN UE and PNM network elements are considered to be in home2.net. Therefore in some flows identities shown as home2.net are equivalent to the identities shown as home1.net in other flows and as described further below.\nFor signaling flows for PN-registration (see subclause A.3.2) and PN-configuration (see subclause A.3.3) the following applies:\n-\tpnmas.home1.net:1234 represents the Internet host and port number of the PNM AS, which can be obtained by a PN UE from the address (URI) of the resource http://pnmas.home1.net:1234/service.\n-\tPN_user1_public1@home1.net, PN_user1_public2@home1.net, etc. represent the public user identities configured for a PN-user for the PN UE#1. PN_user2_public1@home1.net, PN_user2_public2@home1.net, etc. represent the public user identities configured for a PN-user for the PN UE#2, etc. PN_user_public@home1.net represents the shared public user identity.\n-\tPN_user1_private@home1.net represents the private user identity configured for a PN-user for PN UE#1. PN_user2_private@home1.net represents the private user identity configured for a PN-user for PN UE#2, etc.\n-\tPN_user1_friend_public1@home1.net, PN_user1_friend_public2@home1.net etc represent the public user identities of a PN access control list configured for PN UE#1. PN_user2_friend_public1@home1.net, PN_user2_friend_public2@home1.net etc represent the public user identities of a PN access control list configured for PN UE#2, etc.\n-\tPN_user1_public1_old and PN_user1_public1_new represent the old and the new PN UE names related to the public user identity PN_user1_public1@home1.net, PN_user2_public1_old and PN_user2_public1_new represent the old and the new PN UE names related to the public user identity PN_user2_public1@home1.net.\nFor signaling flows for PN UE redirection (see subclause A.3.4), PN access control (see subclause A.3.5) and inter-domain networking (see subclause A.3.6) the following applies:\n-\tPN_user1_public@home2.net, PN_user2_public@home2.net, etc. represent the public user identities for the PN UEs;\n-\tuser1_public1@home1.net represents a user outside of the personal network originating a session to a user within the personal network.\nIn order to differentiate between messages for HTTP, SIP, Diameter and media flows over CS and PS connections, the notation in figure A.2.2-1 is used.\nThe figure depicts a simplified representation of the signalling flow in a 5G network, illustrating the various components involved in the communication process. The diagram includes the base station (gNB), user equipment (UE), and scatterers, highlighting the importance of beamforming techniques to mitigate interference. The layered design of the optical backbone aligns with SDN principles, emphasizing the importance of redundancy and failover reliability.\nFigure A.2.2-1: Signalling flow notation\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                }
            ]
        },
        {
            "title": "A.3\tSignalling flows",
            "description": "",
            "summary": "",
            "tables": [],
            "figures_meta_data": [],
            "subsections": [
                {
                    "title": "A.3.1\tIntroduction",
                    "description": "",
                    "summary": "",
                    "text_content": "The signalling flows demonstrate how the PN-registration, PN-configuration, PN UE redirection and PN access control procedures work. The following signalling flows are included:\n-\tsubclause A.3.2.1 shows the successful PN-registration in the IM CN subsystem using third party registration;\n-\tsubclause A.3.2.2 shows the successful PN-registration with subscription to reg event package;\n-\tsubclause A.3.3.1 shows the successful PN-configuration for PN UE redirection;\n-\tsubclause A.3.3.2 shows the successful PN-configuration for PN access control;\n-\tsubclause A.3.3.3 shows the successful PN-configuration for changing PN UE name;\n-\tsubclause A.3.3.4 shows the successful PN-query;\n-\tsubclause A.3.3.5 shows the successful PN-deconfiguration;\n-\tsubclause A.3.4.1 shows the successful PN UE redirection in the IM CN subsystem;\n-\tsubclause A.3.4.2 shows the successful PN UE redirection in the CS domain;\n-\tsubclause A.3.5.1 shows the successful PN access control procedure in IM CN subsystem;\n-\tsubclause A.3.5.2 shows the successful PN access control procedure in CS domain;\n-\tsubclause A.3.6.1 shows the successful interdomain networking (IM CN subsystem to CS domain);\n-\tsubclause A.3.6.2 shows the successful interdomain networking (CS domain to IM CN subsystem).\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "A.3.2\tSignalling flows for PN-registration",
                    "description": "",
                    "summary": "",
                    "text_content": "",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": [
                        {
                            "title": "A.3.2.1\tPN-registration in the IM CN subsystem using third party registration",
                            "text_content": "Figure A.3.2.1-1 details the signalling flows for a successful PN-registration in the IM CN subsystem using third party registration. In this scenario the PN UE also performs the PN controller function.\nThe figure depicts successful PN-registration signalling in the IM CN subsystem of a 5G network, illustrating the process of third-party registration. The figure shows the communication between the IM and CN subsystems, highlighting the importance of third-party registration in ensuring reliable and efficient communication.\nFigure A.3.2.1-1: Successful PN-registration signalling: in the IM CN subsystem using third party registration\n1.\tREGISTER request (PN UE to IM CN subsystem entities)\nThe PN UE initiates a REGISTER request after successful authentication.\nTable A.3.2.1-1: REGISTER request (PN UE to IM CN subsystem entities)\nREGISTER sip:registrar.home1.net SIP/2.0\nVia: SIP/2.0/UDP icscf1_p.home1.net;branch=z9hG4bK351g45.1, SIP/2.0/UDP pcscf1.visited1.net;branch=z9hG4bK240f34.1, SIP/2.0/UDP [5555::aaa:bbb:ccc:ddd]:1357;comp=sigcomp;branch=z9hG4bKnashds7\nMax-Forwards: 68\nP-Access-Network-Info: 3GPP-UTRAN-TDD; utran-cell-id-3gpp=234151D0FCE11: 3GPP-UTRAN; np\nPath:<VskztcQ/S8p4WPbOnHbuyh5iJvJIW3ib@pcscf1.visited1.net:1337;lr;ob>\nRequire: path\nP-Visited-Network-ID: \"Visited Network Number 1\"\nP-Charging-Vector: icid-value=\"AyretyU0dm+6O2IrT5tAFrbHLso=023551024\"\nFrom: <sip:PN_user1_public1@home1.net>;tag=4fa3\nTo: <sip:PN_user1_public1@home1.net>\nContact: <sip:[5555::aaa:bbb:ccc:ddd]:1357;comp=sigcomp>;reg-id=1;\n+sip.instance=\"<urn:uuid:f81d4fae-7dec-11d0-a765-00a0c91e6bf6>\";\n+g.3gpp.icsi-ref=”urn%3Aurn-7%3A3gpp-service.ims.icsi.mmtel\";\n+g.3gpp.iari-ref=\"urn%3Aurn-7%3A3gpp-application.ims.iari.pnm-controller\";\n+g.3gpp.cs-audio;\n+g.3gpp.cs-video;\nexpires=600000\nCall-ID: apb03a0s09dkjdfglkj49111\nAuthorization: Digest username=\"user1_private@home1.net\", realm=\"registrar.home1.net\", nonce=base64(RAND + AUTN + server specific data), algorithm=AKAv1-MD5, uri=\"sip:registrar.home1.net\", response=\"6629fae49393a05397450978507c4ef1\", integrity-protected=\"yes\"\nCSeq: 2 REGISTER\nSupported: gruu, outbound\nContent-Length: 0\n\nNOTE:\tthe above REGISTER request contents are shown as received at the S-CSCF not as sent by the PN UE.\n2.\tCx: S-CSCF registration notification procedure\nThere is no PNM specific content to this, for detailed message flows see 3GPP TS 29.228 [11] in subclause 6.1.2.\n3.\tSIP 200 (OK) response (IM CN subsystem entities to PN UE)\n4.\tREGISTER request (S-CSCF to PNM AS)\nAfter the PN UE successfully registered in the IM CN subsystem, the S-CSCF sends a third party REGISTER request containing in the body the incoming REGISTER request from the PN UE and the 200 (OK) response to the incoming REGISTER request to the PNM AS based on the initial filter criteria it received which contains an Include Register Request XML element and an Include Register Response XML element.\nTable A.3.2.1-4: REGISTER request (S-CSCF to PNM AS)\nREGISTER sip: pnmas.home1.net SIP/2.0\nVia: SIP/2.0/UDP pnmas.home1.net;branch=z9hG499ffhy\nMax-Forwards: 70\nFrom: <sip:scscf1.home1.net>; tag=538ya\nTo: <sip: PN_user1_public1@home1.net >\nCall-ID: 1asdaddlrfjflslj222\nContact: <sip:scscf1.home1.net>; expires=600000\nCSeq: 87 REGISTER\nContent-Type: multipart/mixed;boundary=\"boundary1\"\nContent-Length: (…)\n\n--boundary1\nContent-Type: message/sip\n\nREGISTER sip:registrar.home1.net SIP/2.0\nVia: SIP/2.0/UDP icscf1_p.home1.net;branch=z9hG4bK351g45.1, SIP/2.0/UDP pcscf1.visited1.net;branch=z9hG4bK240f34.1, SIP/2.0/UDP [5555::aaa:bbb:ccc:ddd]:1357;comp=sigcomp;branch=z9hG4bKnashds7\nMax-Forwards: 68\nP-Access-Network-Info: 3GPP-UTRAN-TDD; utran-cell-id-3gpp=234151D0FCE11: 3GPP-UTRAN; np\nPath:<VskztcQ/S8p4WPbOnHbuyh5iJvJIW3ib@pcscf1.visited1.net:1337;lr;ob>\nRequire: path\nP-Visited-Network-ID: \"Visited Network Number 1\"\nP-Charging-Vector: icid-value=\"AyretyU0dm+6O2IrT5tAFrbHLso=023551024\"\nFrom: <sip:PN_user1_public1@home1.net>;tag=4fa3\nTo: <sip:PN_user1_public1@home1.net>\nContact: <sip:[5555::aaa:bbb:ccc:ddd]:1357;comp=sigcomp>;reg-id=1;\n+sip.instance=\"<urn:uuid:f81d4fae-7dec-11d0-a765-00a0c91e6bf6>\";\n+g.3gpp.icsi-ref=”urn%3Aurn-7%3A3gpp-service.ims.icsi.mmtel\";\n+g.3gpp.iari-ref=\"urn%3Aurn-7%3A3gpp-application.ims.iari.pnm-controller\";\n+g.3gpp.cs-audio;\n+g.3gpp.cs-video;\nexpires=600000\nCall-ID: apb03a0s09dkjdfglkj49111\nAuthorization: Digest username=\"user1_private@home1.net\", realm=\"registrar.home1.net\", nonce=base64(RAND + AUTN + server specific data), algorithm=AKAv1-MD5, uri=\"sip:registrar.home1.net\", response=\"6629fae49393a05397450978507c4ef1\", integrity-protected=\"yes\"\nCSeq: 2 REGISTER\nSupported: gruu, outbound\nContent-Length: 0\n\n--boundary1\nContent-Type: message/sip\n\nSIP/2.0 200 OK\nVia: SIP/2.0/UDP icscf1_p.home1.net;branch=z9hG4bK351g45.1, SIP/2.0/UDP pcscf1.visited1.net;branch=z9hG4bK240f34.1, SIP/2.0/UDP [5555::aaa:bbb:ccc:ddd]:1357;comp=sigcomp;branch=z9hG4bKnashds7\nPath: <sip:term@pcscf1.visited1.net;lr>\nService-Route: <sip:orig@scscf1.home1.net;lr>\nFrom: <sip:PN_user1_public1@home1.net>;tag=4fa3\nTo: <sip:PN_user1_public1@home1.net>\nCall-ID: apb03a0s09dkjdfglkj49111\nContact: <sip:[5555::aaa:bbb:ccc:ddd]:1357;comp=sigcomp>;\npub-gruu=\"sip:PN_user1_public1@home1.net;gr=urn:uuid:f81d4fae-7dec-11d0-a765-00a0c91e6bf6\";\ntemp-gruu=\"sip:tgruu.7hs==jd7vnzga5w7fajsc7-ajd6fabz0f8g5@example.com;gr\";\nreg-id=1;\n+sip.instance=\"<urn:uuid:f81d4fae-7dec-11d0-a765-00a0c91e6bf6>\";\n+g.3gpp.icsi-ref=”urn%3Aurn-7%3A3gpp-service.ims.icsi.mmtel\";\n+g.3gpp.iari-ref=\"urn%3Aurn-7%3A3gpp-application.ims.iari.pnm-controller\";\n+g.3gpp.cs-audio;\n+g.3gpp.cs-video;\nexpires=600000\nCSeq: 2 REGISTER\nSupported: path, outbound\nRequire: outbound\nDate: Wed, 11 July 2001 08:49:37 GMT\nP-Associated-URI: <sip:PN_user1_public2@home1.net>, <sip:PN_user1_public3@home1.net>, <sip:+1-212-555-1111@home1.net;user=phone>\nContent-Length: 0\n\n--boundary1--\n\n5.\tSIP 200 (OK) response (PNM AS to S-CSCF)\n6.\tSh-Pull (AS to HSS)\nFor detailed message flows see 3GPP TS 29.328 [9] in subclause 6.1.1.\n7.\tSh-Pull Response (HSS to PNM AS)\nAfter successful registration, the PNM AS enrols the registered public user identity in the database.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "A.3.2.2\tPN-registration in the IM CN subsystem with subscription to reg event package",
                            "text_content": "Figure A.3.2.2-1 details the signalling flows for a successful PN-registration in the IM CN subsystem with subscription to reg event package. In this scenario the PN UE also performs the PN controller function.\nThe figure depicts successful PN-registration signalling in the IM CN subsystem of a 5G network, illustrating the process of registering a PN (Physical Network) with the network. The figure shows the communication between the IM CN subsystem and the network, highlighting the importance of this step in ensuring reliable and efficient communication.\nFigure A.3.2.2-1: Successful PN-registration signalling: in the IM CN subsystem with subscription to reg event package\n1.\tREGISTER request (PN UE to IM CN subsystem entities)\nThe PN UE initiates a REGISTER request after successful authentication.\nTable A.3.2.2-1: REGISTER request (PN UE to IM CN subsystem entities)\nREGISTER sip:registrar.home1.net SIP/2.0\nVia: SIP/2.0/UDP icscf1_p.home1.net;branch=z9hG4bK351g45.1, SIP/2.0/UDP pcscf1.visited1.net;branch=z9hG4bK240f34.1, SIP/2.0/UDP [5555::aaa:bbb:ccc:ddd]:1357;comp=sigcomp;branch=z9hG4bKnashds7\nMax-Forwards: 68\nP-Access-Network-Info: 3GPP-UTRAN-TDD; utran-cell-id-3gpp=234151D0FCE11: 3GPP-UTRAN; np\nPath:<VskztcQ/S8p4WPbOnHbuyh5iJvJIW3ib@pcscf1.visited1.net:1337;lr;ob>\nRequire: path\nP-Visited-Network-ID: \"Visited Network Number 1\"\nP-Charging-Vector: icid-value=\"AyretyU0dm+6O2IrT5tAFrbHLso=023551024\"\nFrom: <sip:PN_user1_public1@home1.net>;tag=4fa3\nTo: <sip:PN_user1_public1@home1.net>\nContact: <sip:[5555::aaa:bbb:ccc:ddd]:1357;comp=sigcomp>;reg-id=1;\n+sip.instance=\"<urn:uuid:f81d4fae-7dec-11d0-a765-00a0c91e6bf6>\";\n+g.3gpp.icsi-ref=”urn%3Aurn-7%3A3gpp-service.ims.icsi.mmtel\";\n+g.3gpp.iari-ref=\"urn%3Aurn-7%3A3gpp-application.ims.iari.pnm-controller\";\n+g.3gpp.cs-audio;\n+g.3gpp.cs-video;\nexpires=600000\nCall-ID: apb03a0s09dkjdfglkj49111\nAuthorization: Digest username=\"user1_private@home1.net\", realm=\"registrar.home1.net\", nonce=base64(RAND + AUTN + server specific data), algorithm=AKAv1-MD5, uri=\"sip:registrar.home1.net\", response=\"6629fae49393a05397450978507c4ef1\", integrity-protected=\"yes\"\nCSeq: 2 REGISTER\nSupported: gruu, outbound\nContent-Length: 0\n\nNOTE:\tThe above REGISTER request contents are shown as received at the S-CSCF not as sent by the PN UE.\n2.\tCx: S-CSCF registration notification procedure\nThere is no PNM specific content to this, for detailed message flows see 3GPP TS 29.228 [11] in subclause 6.1.2.\n3.\tSIP 200 (OK) response (IM CN subsystem entities to PN UE)\n4.\tREGISTER request (S-CSCF to PNM AS)\nAfter the PN UE successfully registered in the IM CN subsystem, the S-CSCF sends a third party REGISTER request containing in the body a <service-info> element containing the private user identity of the PN UE to the PNM AS based on the initial filter criteria it received which contains the <service-info> element containing the private user identity of the PN UE.\nTable A.3.2.2-4: REGISTER request (S-CSCF to PNM AS)\nREGISTER sip: pnmas.home1.net SIP/2.0\nVia: SIP/2.0/UDP pnmas.home1.net;branch=z9hG499ffhy\nMax-Forwards: 70\nFrom: <sip:scscf1.home1.net>; tag=538ya\nTo: <sip: PN_user1_public1@home1.net>\nCall-ID: 1asdaddlrfjflslj222\nContact: <sip:scscf1.home1.net>; expires=600000\nCSeq: 87 REGISTER\nContent-Type: application/3gpp-ims+xml\nContent-Length: (…)\n\n<3gpp-ims version=\"1\">\n<service-info>sip:PN_user1_private@home1.net</service-info>\n</3gpp-ims>\n\n5.\tSIP 200 (OK) response (PNM AS to S-CSCF)\n6.\tSUBSCRIBE request (PNM AS to S-CSCF) - see example in table A.3.2.2-6\nThe PNM AS sends a SUBSCRIBE request to the S-CSCF for the reg event package for the public user identity.\nTable A.3.2.2-6: SUBSCRIBE request (PNM AS to S-CSCF)\nSUBSCRIBE sip: PN_user1_public1@home1.net SIP/2.0\nVia: SIP/2.0/UDP pnmas.home1.net;branch=z9hG4bK34.1\nMax-Forwards: 70\nRoute: <sip:scscf@home1.net;lr>\nPrivacy: none\nFrom: <sip: pnamas.home1.net>; tag=31415\nTo: <sip: PN_user1_public1@home1.net>\nCall-ID: b89rjhnedlrfjflslj222\nCSeq: 61 SUBSCRIBE\nEvent: reg\nExpires: 600000\nAccept: application/reginfo+xml\nContact: <sip:pnmas.home1.net>\nContent-Length: 0\n\n7.\tSIP 200 (OK) response (S-CSCF to PNM AS)\n8.\tNOTIFY request (S-CSCF to PNM AS) - see example in table A.3.2.2-8\nThe S-CSCF sends a first NOTIFY request towards the PNM AS in order to inform the PNM AS about the registration status of the monitored user and the UE capabilities.\nTable A.3.2.2-8: NOTIFY request (S-CSCF to PNM AS)\nNOTIFY sip: pnmas.home1.net SIP/2.0\nVia: SIP/2.0/UDP scscf@home1.net;branch=z9hG4bK332b23.1\nMax-Forwards: 70\nFrom: <sip:scscf@home1.net>;tag=151170\nTo: <sip: pnmas.home1.net>;tag=31415\nCall-ID: dre36d2v32gnlgiiomm72445\nCSeq: 42 NOTIFY\nSubscription-State: active;expires=600000\nEvent: reg\nContent-Type: application/reginfo+xml\nContact: <sip:scscf@home1.net>\nContent-Length: (...)\n\n<?xml version=\"1.0\"?>\n<reginfo xmlns=\"urn:ietf:params:xml:ns:reginfo\"\nxmlns:gr=\"urn:ietf:params:xml:ns:gruuinfo\"\nversion=\"1\" state=\"full\">\n<registration aor=\"sip: PN_user1_public1@home1.net\" id=\"a7\" state=\"active\">\n<contact id=\"76\" state=\"active\" event=\"registered\">\n<uri>sip:[5555::aaa:bbb:ccc:ddd]</uri>\n<allOneLine>\n<unknown-param name=”+sip.instance”>&lt;urn:uuid:f81d4fae-7dec-11d0-a765-00a0c91e6bf6&gt;” </unknown-param>\n<unknown-param name=”+g.3gpp.icsi_ref”>&lt;urn:urn-7:3gpp-service.ims.icsi.mmtel&gt;” </unknown-param>\n<unknown-param name=”+g.3gpp.iari_ref”>&lt;urn:urn-7:3gpp-application.ims.iari.pnm-controller&gt\"</unknown-param>\n<unknown-param name=”+g.3gpp.cs-audio”> </unknown-param>\n<unknown-param name=”+g.3gpp.cs-video”> </unknown-param>\n</allOneLine>\n<allOneLine>\n<gr:pub-gruu uri=\"sip:PN_user1_public1@home1.net;gr=urn:uuid:f81d4fae-7dec-11d0-a765-00a0c91e6bf6\"/>\n</allOneLine>\n<gr:temp-gruu uri=\"sip:8ffkas08af7fasklzi9@home1.net;gr\" first-cseq=\"40\"/>\n</contact>\n</registration>\n<registration aor=\"sip:PN_user1_public2@home1.net\" id=\"a8\" state=\"active\">\n<contact id=\"77\" state=\"active\" event=\"created\">\n<uri>sip:[5555::aaa:bbb:ccc:ddd]</uri>\n<allOneLine>\n<unknown-param name=”+sip.instance”>&lt;urn:uuid:f81d4fae-7dec-11d0-a765-00a0c91e6bf6&gt;” </unknown-param>\n<unknown-param name=”+g.3gpp.iari_ref”>&lt;urn:urn-7:3gpp-service.ims.icsi.mmtel&gt;” </unknown-param>\n<unknown-param name=”+g.3gpp.cs-audio”> </unknown-param>\n<unknown-param name=”+g.3gpp.cs-video”> </unknown-param>\n</allOneLine>\n<allOneLine>\n<gr:pub-gruu uri=\"sip:PN_user1_public2@home1.net;gr=urn:uuid:f81d4fae-7dec-11d0-a765-00a0c91e6bf6\"/>\n</allOneLine>\n<gr:temp-gruu uri=\"sip:2k3e8farf7flfka9zi9@home1.net;gr\" first-cseq=\"40\"/>\n</contact>\n</registration>\n</reginfo>\n\n9.\tSIP 200 (OK) response (PNM AS to S-CSCF)\n10.\tSh-Pull (AS to HSS)\nFor detailed message flows see 3GPP TS 29.328 [9] in subclause 6.1.1.\n11.\tSh-Pull Response (HSS to PNM AS)\nAfter successful registration, the PNM AS enrols the registered public user identity in the database.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "A.3.2.3\tPN-registration procedure for PNE other than a PN UE",
                            "text_content": "Figure A.3.2.3-1 details the signalling flows for a successful PN-registration in the IM CN subsystem for two PNEs other than a PN UE.\nThe figure depicts successful PN-registration signalling for PNE other than a PN UE, illustrating the process of registering a PN with a network. The figure shows the PN UE, the network, and the PNE other than the PN UE, highlighting the key elements involved in the PN-registration process.\nFigure A.3.2.3-1: Successful PN-registration signalling for PNE other than a PN UE\n1.\tRegister request\nPNE1 sends a Register request towards UE via the PAN internal interface. The Register request may contain the PNE identifier.\n2.\tSIP REGISTER request (PN UE to IM CN subsystem entities)- see example in table  A.3.2.3-2.\nThe PN UE initiates a SIP REGISTER request on behalf the PNE1. The PNE1 identifier is conveyed in the g.3gpp.pne-id media feature tag of the Contact header field to indicate this is registration for the PNE. The value of \"reg-id\" is set to 2.\nNOTE:\tIn this case, a successful authentication has been done before sending the SIP REGISTER request.\nTable A.3.2.3-2: SIP REGISTER request (PN UE to IM CN subsystem entities)\nREGISTER sip:registrar.home1.net SIP/2.0\nVia: SIP/2.0/UDP icscf1_p.home1.net;branch=z9hG4bK45.1, SIP/2.0/UDP pcscf1.visited1.net;branch=z9hG4bK34.1, SIP/2.0/UDP [5555::aaa:bbb:ccc:ddd]:1357;comp=sigcomp;branch=z9hG4bKnashds7\nMax-Forwards: 68\nP-Access-Network-Info: 3GPP-UTRAN-TDD; utran-cell-id-3gpp=234151D0FCE11: 3GPP-UTRAN; np\nPath:<VskztcQ/S8p4WPbOnHbuyh5iJvJIW3ib@pcscf1.visited1.net:1337;lr;ob>\nRequire: path,outbound\nP-Visited-Network-ID: \"Visited Network Number 1\"\nP-Charging-Vector: icid-value=\"AyretyU0dm+6O2IrT5tAFrbHLso=023551024\"\nFrom: <sip:PN_user1_public1@home1.net>;tag=4fa3\nTo: <sip:PN_user1_public1@home1.net>\nContact: <sip:[5555::aaa:bbb:ccc:ddd]:1357;comp=sigcomp>;reg-id=2;\n+sip.instance=\"<urn:uuid:f81d4fae-7dec-11d0-a76591e6bf6>\";\n+g.3gpp.icsi-ref=”urn%3Aurn-7%3gpp-service.ims.icsi.mmtel\";\n+g.3gpp.iari-ref=\"urn%3Aurn-7%3gpp-application.ims.iari.pnm-controller\";\n+g.3gpp.cs-audio;\n+g.3gpp.pne-id=\"<urn:uuid:f81d4fae-7dec-11d0-a765-001w4dfdafer>\"expires=600000\nCall-ID: apb0s09dkjdfglkj49111\nAuthorization: Digest username=\"user1_private@home1.net\", realm=\"registrar.home1.net\", nonce=base64(RAND + AUTN + server specific data), algorithm=AKAv1-MD5, uri=\"sip:registrar.home1.net\", response=\"6629fae05397450978507c4ef1\", integrity-protected=\"yes\"\nCSeq: 2 REGISTER\nSupported: gruu, outbound\nContent-Length: 0\n\n3.\tSIP 200 (OK) response (IM CN subsystem entities to PN UE)\n4.\tSuccessful response (UE to PNE1)\nThe UE sends the successful response to the register request towards the PNE1 via the PAN internal interface.\n5.\tSIP REGISTER request (S-CSCF to PNM AS)- see example in table  A.3.2.3-5\nAfter the PN UE successfully registered in the IM CN subsystem, the S-CSCF sends a third party REGISTER request to the PNM AS based on the initial filter criteria.\nTable A.3.2.3-5: SIP REGISTER request (S-CSCF to PNM AS)\nREGISTER sip: pnmas.home1.net SIP/2.0\nVia: SIP/2.0/UDP pnmas.home1.net;branch=z9hG499ffhy\nMax-Forwards: 70\nFrom: <sip:scscf1.home1.net>; tag=538ya\nTo: <sip: PN_user1_public1@home1.net >\nCall-ID: 1asdaddlrfjflslj222\nContact: <sip:scscf1.home1.net>; expires=600000\nCSeq: 87 REGISTER\n\n\n6.\tSIP 200 (OK) response (PNM AS to S-CSCF)\n7.\tSUBSCRIBE request (PNM AS to S-CSCF) - see example in table A.3.2.3-7\nThe PNM AS sends a SUBSCRIBE request to the S-CSCF for the reg event package.\nTable A.3.2.3-7: SUBSCRIBE request (PNM AS to S-CSCF)\nSUBSCRIBE sip: PN_user1_public1@home1.net SIP/2.0\nVia: SIP/2.0/UDP pnmas.home1.net;branch=z9hG4bK34.1\nMax-Forwards: 70\nRoute: <sip:scscf@home1.net;lr>\nPrivacy: none\nFrom: <sip: pnamas.home1.net>; tag=31415\nTo: <sip: PN_user1_public1@home1.net>\nCall-ID: b89rjhnedlrfjflslj222\nCSeq: 61 SUBSCRIBE\nEvent: reg\nExpires: 600000\nAccept: application/reginfo+xml\nContact: <sip:pnmas.home1.net>\nContent-Length: 0\n\n8.\tSIP 200 (OK) response (S-CSCF to PNM AS)\n9.\tNOTIFY request (S-CSCF to PNM AS) - see example in table A.3.2.3-9\nThe S-CSCF sends a first NOTIFY request towards the PNM AS in order to inform the PNM AS about the registration status of the monitored user and the PNE capabilities.\nTable A.3.2.3-9: NOTIFY request (S-CSCF to PNM AS)\nNOTIFY sip: pnmas.home1.net SIP/2.0\nVia: SIP/2.0/UDP scscf@home1.net;branch=z9hG4bK332b23.1\nMax-Forwards: 70\nFrom: <sip:scscf@home1.net>;tag=151170\nTo: <sip: pnmas.home1.net>;tag=31415\nCall-ID: dre36d2v32gnlgiiomm72445\nCSeq: 42 NOTIFY\nSubscription-State: active;expires=600000\nEvent: reg\nContent-Type: application/reginfo+xml\nContact: <sip:scscf@home1.net>\nContent-Length: (...)\n\n<?xml version=\"1.0\"?>\n<reginfo xmlns=\"urn:ietf:params:xml:ns:reginfo\"\nxmlns:gr=\"urn:ietf:params:xml:ns:gruuinfo\"\nversion=\"1\" state=\"full\">\n<registration aor=\"sip: PN_user1_public1@home1.net\" id=\"a7\" state=\"active\">\n<contact id=\"76\" state=\"active\" event=\"registered\">\n<uri>sip:[5555::aaa:bbb:ccc:ddd]</uri>\n<allOneLine>\n<unknown-param name=”+sip.instance”>&lt;urn:uuid:f81d4fae-7dec-11d0-a76591e6bf6&gt;” </unknown-param>\n<unknown-param name=”+g.3gpp.icsi_ref”>&lt;urn:urn-7:3gpp-service.ims.icsi.mmtel&gt;” </unknown-param>\n<unknown-param name=”+g.3gpp.iari_ref”>&lt;urn:urn-7:3gpp-application.ims.iari.pnm-controller&gt\"</unknown-param>\n<unknown-param name=”+g.3gpp.cs-audio”> </unknown-param>\n</unknown-param>\n<unknown-param name=”+g.3gpp.pne-id”>&lt;urn:uuid: f81d4fae-7dec-11d0-a765-001w4dfdafer;” </unknown-param>\n</allOneLine>\n<allOneLine>\n<gr:pub-gruu uri=\"sip:PN_user1_public1@home1.net;gr=urn:uuid:f81d4fae-7dec-11d0-a76591e6bf6\"/>\n</allOneLine>\n<gr:temp-gruu uri=\"sip:8ffkas08af7fasklzi9@home1.net;gr\" first-cseq=\"40\"/>\n</contact>\n</registration>\n<registration aor=\"sip:PN_user1_public2@home1.net\" id=\"a8\" state=\"active\">\n<contact id=\"77\" state=\"active\" event=\"created\">\n<uri>sip:[5555::aaa:bbb:ccc:ddd]</uri>\n<allOneLine>\n<unknown-param name=”+sip.instance”>&lt;urn:uuid:f81d4fae-7dec-11d0-a76591e6bf6&gt;” </unknown-param>\n<unknown-param name=”+g.3gpp.iari_ref”>&lt;urn:urn-7:3gpp-service.ims.icsi.mmtel&gt;” </unknown-param>\n<unknown-param name=”+g.3gpp.cs-audio”> </unknown-param>\n<unknown-param name=”+g.3gpp.cs-video”> </unknown-param>\n</allOneLine>\n<allOneLine>\n<gr:pub-gruu uri=\"sip:PN_user1_public2@home1.net;gr=urn:uuid:f81d4fae-7dec-11d0-a76591e6bf6\"/>\n</allOneLine>\n<gr:temp-gruu uri=\"sip:2k3e8farf7flfka9zi9@home1.net;gr\" first-cseq=\"40\"/>\n</contact>\n</registration>\n</reginfo>\n\n10.\tSIP 200 (OK) response (PNM AS to S-CSCF)\n11.\tEnrol the PNE1\nAfter successful registration, the PNE1 is registered into the PAN, i.e. save the bindings between UE and PNE identifiers in the database.\n12.\tRegister request\nPNE2 sends a Register request towards UE via the PAN internal interface. The Register request may contain the PNE2 identifier.\n13.\tSIP REGISTER request (PN UE to IM CN subsystem entities)- see example in table  A.3.2.3-13.\nThe PN UE initiates a SIP REGISTER request on behalf the PNE2. The PNE2 identifier is conveyed in the g.3gpp.pne-id media feature tag of the Contact header field to indicate this is registration for the PNE2. The value of \"reg-id\" is set to 3 to not override the previous registration for PNE2.\nTable A.3.2.3-13: SIP REGISTER request (PN UE to IM CN subsystem entities)\nREGISTER sip:registrar.home1.net SIP/2.0\nVia: SIP/2.0/UDP icscf1_p.home1.net;branch=z9hG4bK45.1, SIP/2.0/UDP pcscf1.visited1.net;branch=z9hG4bK34.1, SIP/2.0/UDP [5555::aaa:bbb:ccc:ddd]:1357;comp=sigcomp;branch=z9hG4bKnashds7\nMax-Forwards: 68\nP-Access-Network-Info: 3GPP-UTRAN-TDD; utran-cell-id-3gpp=234151D0FCE11: 3GPP-UTRAN; np\nPath:<VskztcQ/S8p4WPbOnHbuyh5iJvJIW3ib@pcscf1.visited1.net:1337;lr;ob>\nRequire: path,outbound\nP-Visited-Network-ID: \"Visited Network Number 1\"\nP-Charging-Vector: icid-value=\"AyretyU0dm+6O2IrT5tAFrbHLso=023551024\"\nFrom: <sip:PN_user1_public1@home1.net>;tag=4fa3\nTo: <sip:PN_user1_public1@home1.net>\nContact: <sip:[5555::aaa:bbb:ccc:ddd]:1357;comp=sigcomp>;reg-id=3;\n+sip.instance=\"<urn:uuid:f81d4fae-7dec-11d0-a76591e6bf6>\";\n+g.3gpp.icsi-ref=”urn%3Aurn-7%3gpp-service.ims.icsi.mmtel\";\n+g.3gpp.iari-ref=\"urn%3Aurn-7%3gpp-application.ims.iari.pnm-controller\";\n+g.3gpp.cs-video;\n+g.3gpp.pne-id=\"<urn:uuid:f81d4fae-7dec-11d0-b789-99ef34fledvd5>\"\nexpires=600000\nCall-ID: apb0s09dkjdfglkj49111\nAuthorization: Digest username=\"user1_private@home1.net\", realm=\"registrar.home1.net\", nonce=base64(RAND + AUTN + server specific data), algorithm=AKAv1-MD5, uri=\"sip:registrar.home1.net\", response=\"6629fae05397450978507c4ef1\", integrity-protected=\"yes\"\nCSeq: 3 REGISTER\nSupported: gruu, outbound\nContent-Length: 0\n\n14.\tSIP 200 (OK) response (IM CN subsystem entities to PN UE)\n15.\tSuccessful response (UE to PNE2)\nThe UE sends the successful response to the register request towards the PNE via the PAN internal interface.\n16.\tNOTIFY request (S-CSCF to PNM AS) - see example in table A.3.2.3-16\nThe S-CSCF sends a first NOTIFY request towards the PNM AS in order to inform the PNM AS about the PNE2 identifier and PNE2 capabilites.\nTable A.3.2.3-16: NOTIFY request (S-CSCF to PNM AS)\nNOTIFY sip: pnmas.home1.net SIP/2.0\nVia: SIP/2.0/UDP scscf@home1.net;branch=z9hG4bK332b23.1\nMax-Forwards: 70\nFrom: <sip:scscf@home1.net>;tag=151170\nTo: <sip: pnmas.home1.net>;tag=31415\nCall-ID: dre36d2v32gnlgiiomm72445\nCSeq: 43 NOTIFY\nSubscription-State: active;expires=600000\nEvent: reg\nContent-Type: application/reginfo+xml\nContact: <sip:scscf@home1.net>\nContent-Length: (...)\n\n<?xml version=\"1.0\"?>\n<reginfo xmlns=\"urn:ietf:params:xml:ns:reginfo\"\nxmlns:gr=\"urn:ietf:params:xml:ns:gruuinfo\"\nversion=\"1\" state=\"full\">\n<registration aor=\"sip: PN_user1_public1@home1.net\" id=\"a7\" state=\"active\">\n<contact id=\"76\" state=\"active\" event=\"registered\">\n<uri>sip:[5555::aaa:bbb:ccc:ddd]</uri>\n<allOneLine>\n<unknown-param name=”+sip.instance”>&lt;urn:uuid:f81d4fae-7dec-11d0-a76591e6bf6&gt;” </unknown-param>\n<unknown-param name=”+g.3gpp.icsi_ref”>&lt;urn:urn-7:3gpp-service.ims.icsi.mmtel&gt;” </unknown-param>\n<unknown-param name=”+g.3gpp.iari_ref”>&lt;urn:urn-7:3gpp-application.ims.iari.pnm-controller&gt\"</unknown-param>\n<unknown-param name=”+g.3gpp.cs-video”> </unknown-param>\n</unknown-param>\n<unknown-param name=”+g.3gpp.pne-id”>&lt;urn:uuid:f81d4fae-7dec-11d0-b789-99ef34fledvd5;” </unknown-param>\n</allOneLine>\n<allOneLine>\n<gr:pub-gruu uri=\"sip:PN_user1_public1@home1.net;gr=urn:uuid:f81d4fae-7dec-11d0-a76591e6bf6\"/>\n</allOneLine>\n<gr:temp-gruu uri=\"sip:8ffkas08af7fasklzi9@home1.net;gr\" first-cseq=\"40\"/>\n</contact>\n</registration>\n<registration aor=\"sip:PN_user1_public2@home1.net\" id=\"a8\" state=\"active\">\n<contact id=\"77\" state=\"active\" event=\"created\">\n<uri>sip:[5555::aaa:bbb:ccc:ddd]</uri>\n<allOneLine>\n<unknown-param name=”+sip.instance”>&lt;urn:uuid:f81d4fae-7dec-11d0-a76591e6bf6&gt;” </unknown-param>\n<unknown-param name=”+g.3gpp.iari_ref”>&lt;urn:urn-7:3gpp-service.ims.icsi.mmtel&gt;” </unknown-param>\n<unknown-param name=”+g.3gpp.cs-audio”> </unknown-param>\n<unknown-param name=”+g.3gpp.cs-video”> </unknown-param>\n</allOneLine>\n<allOneLine>\n<gr:pub-gruu uri=\"sip:PN_user1_public2@home1.net;gr=urn:uuid:f81d4fae-7dec-11d0-a76591e6bf6\"/>\n</allOneLine>\n<gr:temp-gruu uri=\"sip:2k3e8farf7flfka9zi9@home1.net;gr\" first-cseq=\"40\"/>\n</contact>\n</registration>\n</reginfo>\n\n17.\tSIP 200 (OK) response (PNM AS to S-CSCF)\n18.\tEnrol the PNE2\nAfter successful registration, the PNE2 is registered into the PAN.\n",
                            "figures_meta_data": [],
                            "tables": []
                        }
                    ]
                },
                {
                    "title": "A.3.3\tSignalling flows for PN-configuration",
                    "description": "",
                    "summary": "",
                    "text_content": "",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": [
                        {
                            "title": "A.3.3.1\tPN-configuration for PN UE redirection",
                            "text_content": "Figure A.3.3.1-1 shows the message exchange between PN UE and NAF/PNM AS when the PN UE wants to configure the PN settings for the PN UE redirection. The messaging only takes place after a successful bootstrapping procedure (as described in 3GPP TS 33.220 [8]) in which case the bootstrapped security association has been established before step 1.\nThe figure depicts a successful PN-configuration for UE redirection, illustrating the process of redirecting a user's signal to a different network. The diagram shows the various components involved, such as the base station (BTS), user equipment (UE), and the network's infrastructure. The figure highlights the importance of proper network design and configuration to ensure efficient communication and reliability.\nFigure A.3.3.1-1: Successful PN-configuration for UE redirection\n1.\tInitial PN-configuration request (PN UE to NAF/PNM AS) - see example in table A.3.3.1-1\nThe PN UE sends an HTTP request to the NAF/PNM AS containing the configuration request for the PN UE redirection.\nTable A.3.3.1-1: Initial PN-configuration request (UE to NAF/PNM AS)\nPUT http://xcap.home1.net/pnm.3gpp.org/users/sip:PN_user_public@home1.net/pnm HTTP/1.1\nHost: pnmas.home1.net:1234\nUser-Agent: PNM User Agent; Release-6 3gpp-gba\nContent-Type: application/pnm+xml charset=\"utf-8\"\nContent-Length: (...)\nDate: Wed, 31 Oct 2007 10:50:35 GMT\nAccept: application/pnm+xml\nReferrer: http://pnmas.home1.net:1234/service\nAuthorization: Digest username=\"(B-TID)\", realm=\"3GPP-bootstrapping@pnmas.home1.net\", nonce=\"a6332ffd2d234==\", uri=\"pnmclient\", qop=auth-int, nc=00000001, cnonce=\"6629fae49393a05397450978507c4ef1\", response=\"6629fae49393a05397450978507c4ef1\", opaque=\"5ccc069c403ebaf9f0171e9517f30e41\", algorithm=MD5\n\n<?xml version=\"1.0\" encoding=\"utf-8\"?>\n<PNConfiguration>\n<UERedirection UriOfRedirectedUser=\"sip:PN_user1_public1@home1.net\">\n<RedirectedUserID>\n<PNUEID>sip:PN_user1_public1@home1.net</PNUEID>\n<PNUEName>PN_user1_public1_old</PNUEName>\n</RedirectedUserID>\n<RedirectingUserID id=1>\n<PNUEID>sip:PN_user2_public1@home1.net</PNUEID>\n<PNUEName>PN_user2_public1_old</PNUEName>\n<RedirectionLevel>application</RedirectionLevel>\n<RedirectionPrio>1</RedirectionPrio>\n</RedirectingUserID>\n</UERedirection>\n</PNConfiguration>\n\nRequest-URI:\tThe Request-URI (the URI that follows the method name, \"PUT\", in the first line) indicates the resource of this PUT request. The Request-URI contains the XCAP HTTP URI which indicates to the PNM AS the desired PN is requested to be configured.\nHost:\tSpecifies the Internet host and port number of the PNM AS, obtained from the original URI provided by the referring resource.\nUser-Agent:\tContains information about the user agent originating the request and it includes the static string \"3gpp-gba\" to indicate to the application server (i.e., NAF) that the UE supports 3GPP-bootstrapping based authentication.\nReferer:\tAllows the user agent to specify the address (URI) of the resource from which the URI for the PNM AS was obtained.\nAuthorization:\tContains the credentials obtained by means of the bootstrapping procedure (as described in 3GPP TS 33.220 [8]).\nXML body:\tContains the settings for the PN UE redirection that the PN-user requests the PNM AS to do. In this example, the UE with public user identity <sip: PN_user1_public1@home1.net > requests the PNM AS to configure the redirection of all sessions, addressing <sip: PN_user2_public1@home1.net > with the PN UE name PN_user2_public1_old, to <sip: PN_user1_public1@home1.net > with the PN UE name PN_user1_public1_old with the highest priority, i.e. one.\n2.\tAuthentication/authorization and UE capability and subscription checking\nThe NAF/PNM AS verifies the Authorization header by using the bootstrapping transaction identifier B-TID and the key material Ks_NAF obtained from BSF (as described in 3GPP TS 33.220 [8]). NAF/PNM AS calculates the corresponding digest values using Ks_NAF, and compares the calculated values with the received values in the Authorization header. If the verification succeeds, the NAF passes the private user identity <sip: PN_user1_private@home1.net> associated with the public user identity <sip: PN_user1_public1@home1.net> to the PNM AS. The PNM AS then authorizes the UE by comparing the received public user identity <sip: PN_user1_public1@home1.net> with the preconfigured one identified by the private user identity <sip: PN_user1_private@home1.net>. If the authorization succeeds, the incoming request is taken in for further processing.\nThe NAF/PNM AS also performs the PN UE capability and subscription checking. If the checking succeeds, the incoming request is taken in for further processing.\nNOTE:\tPerforming the PN UE subscription checking entails the interaction with the HSS over the sh interface (see 3GPP TS 29.328 [9]) which is not shown in the message flow.\n3.\tDelivery of PN-configuration response (NAF/PNM AS to PN UE) - see example in table A.3.3-3\nThe PNM AS sends a HTTP 200 OK response to the PN UE to indicate the success of the PN-configuration.\nTable A.3.3.1-3: Delivery of PN-configuration response (NAF/PNM AS to PN UE)\nHTTP/1.1 200 OK\nServer: Apache/1.3.22 (Unix) mod_perl/1.27\nContent-Length: 0\nAuthentication-Info: qop=auth-int, rspauth=\"6629fae49394a05397450978507c4ef1\", cnonce=\"6629fae49393a05397450978507c4ef1\", nc=00000001\nDate: Wed, 31 Oct 2007 10:50:36 GMT\nExpires: Wed, 31 Nov 2007 10:50:36 GMT\n\nAuthentication-Info:\tThis carries the protection.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "A.3.3.2\tPN-configuration for PN access control",
                            "text_content": "Figure A.3.3.2-1 shows the message exchange between PN UE and NAF/PNM AS when the PN UE wants to configure the PN settings for the PN access control service. The messaging only takes place after a successful bootstrapping procedure (as described in 3GPP TS 33.220 [8]) in which case the bootstrapped security association has been established before step 1.\nThe figure depicts a successful initial PN-configuration for PN access control, illustrating the steps taken to establish a secure and efficient network infrastructure.\nFigure A.3.3.2-1: Successful initial PN-configuration for PN access control\n1.\tInitial PN-configuration request (PN UE to NAF/PNM AS) - see example in table A.3.3.2-1\nThe PN UE sends an HTTP request to the NAF/PNM AS containing the configuration request for the PN access control.\nTable A.3.3.2-1: Initial PN-configuration request (UE to NAF/PNM AS)\nPUT http://xcap.home1.net/pnm.3gpp.org/users/sip:PN_user_public@home1.net/pnm HTTP/1.1\nHost: pnmas.home1.net:1234\nUser-Agent: PNM User Agent; Release-6 3gpp-gba\nContent-Type: application/pnm+xml charset=\"utf-8\"\nContent-Length: (...)\nDate: Wed, 31 Oct 2007 10:50:35 GMT\nAccept: application/pnm+xml\nReferrer: http://pnmas.home1.net:1234/service\nAuthorization: Digest username=\"(B-TID)\", realm=\"3GPP-bootstrapping@pnmas.home1.net\", nonce=\"a6332ffd2d234==\", uri=\"pnmclient\", qop=auth-int, nc=00000001, cnonce=\"6629fae49393a05397450978507c4ef1\", response=\"6629fae49393a05397450978507c4ef1\", opaque=\"5ccc069c403ebaf9f0171e9517f30e41\", algorithm=MD5\n\n<?xml version=\"1.0\" encoding=\"utf-8\"?>\n<PNConfiguration>\n<AccessControl UriOfControllerUE=\"sip:PN_user1_public1@home1.com\">\n<ControllerUE>\n<PNUEID>sip:PN_user1_public1@home1.net</PNUEID>\n<PNUEName>PN_user1_public1_old</PNUEName>\n</ControllerUE>\n<ControlleeUE id=1>\n<PNUEID>sip:PN_user2_public1@home1.net</PNUEID>\n<PNUEName>PN_user2_public1_old</PNUEName>\n<PNAccessControlList>sip:PN_user1_friend_public1@home1.net sip:PN_user1_friend_public2@home1.net</PNAccessControlList>\n<PNAccessControlType>Controller</PNAccessControlType>\n</ControlleeUE>\n</AccessControl>\n</PNConfiguration>\n\nRequest-URI:\tThe Request-URI (the URI that follows the method name, \"PUT\", in the first line) indicates the resource of this PUT request. The Request-URI contains the XCAP HTTP URI which indicates to the PNM AS the desired PN is requested to be configured.\nHost:\tSpecifies the Internet host and port number of the PNM AS, obtained from the original URI provided by the referring resource.\nUser-Agent:\tContains information about the user agent originating the request and it includes the static string \"3gpp-gba\" to indicate to the application server (i.e., NAF) that the UE supports 3GPP-bootstrapping based authentication.\nReferer:\tAllows the user agent to specify the address (URI) of the resource from which the URI for the PNM AS was obtained.\nAuthorization:\tContains the credentials obtained by means of the bootstrapping procedure (as described in 3GPP TS 33.220 [8]).\nXML body:\tContains the settings for the PN access control service that the UE requests from the PNM AS. In this example, the UE with public user identity <sip: PN_user1_public1@home1.net> requests the PNM AS to configure PN access control for all sessions, addressing <sip: PN_user2_public1@home1.net > with the PN UE name PN_user2_public1_old, except for the case when the callee is either <sip: PN_user1_friend_public1@home1.net> or < sip: PN_user1_friend_public2@home1.net >. Furthermore, the UE indicates in the access control type that the controller UE with <sip: PN_user1_public1@home1.net> and the PN UE name PN_user1_public1_old needs to be interrogated when the PNM AS executes the PN access control.\n2.\tAuthentication/authorization and subscription checking\nAs described in Step 2 of figure A.3.3.1-1.\n3.\tDelivery of PN-configuration response (NAF/PNM AS to PN UE) - see example in table A.3.3.2-3\nThe PNM AS sends a HTTP 200 OK response to the PN UE to indicate the success of the PN-configuration.\nTable A.3.3.2-3: Delivery of PN-configuration response (NAF/PNM AS to PN UE)\nHTTP/1.1 200 OK\nServer: Apache/1.3.22 (Unix) mod_perl/1.27\nContent-Length: 0\nAuthentication-Info: qop=auth-int, rspauth=\"6629fae49394a05397450978507c4ef1\", cnonce=\"6629fae49393a05397450978507c4ef1\", nc=00000001\nDate: Wed, 31 Oct 2007 10:50:36 GMT\nExpires: Wed, 31 Nov 2007 10:50:36 GMT\n\nAuthentication-Info:\tThis carries the protection.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "A.3.3.3\tPN-configuration for changing PN UE name",
                            "text_content": "Figure A.3.3.3-1 shows the message exchange between PN UE and NAF/PNM AS when the PN UE changes the PN UE name. The messaging only takes place after a successful bootstrapping procedure (as described in 3GPP TS 33.220 [8]) in which case a bootstrapped security association has been established before step 1.\nThe figure depicts a successful PN-configuration for changing the PN UE name. It shows a user interface with a list of available PN names and a button to change the selected name. The figure illustrates the process of selecting a new name and confirming the change.\nFigure A.3.3.3-1: Successful PN-configuration for changing PN UE name\n1.\tInitial PN-configuration request (PN UE to NAF/PNM AS) - see example in table A.3.3.3-1\nThe PN UE sends an HTTP request to the NAF/PNM AS containing the configuration request for changing the PN UE name.\nTable A.3.3.3-1: Initial PN-configuration request (UE to NAF/PNM AS)\nPUT http://xcap.home1.net/pnm.3gpp.org/users/sip:PN_user_public@home1.net/pnm HTTP/1.1\nHost: pnmas.home1.net:1234\nUser-Agent: PNM User Agent; Release-6 3gpp-gba\nContent-Type: application/pnm+xml charset=\"utf-8\"\nContent-Length: (...)\nDate: Wed, 31 Oct 2007 10:50:35 GMT\nAccept: application/pnm+xml\nReferrer: http://pnmas.home1.net:1234/service\nAuthorization: Digest username=\"(B-TID)\", realm=\"3GPP-bootstrapping@pnmas.home1.net\", nonce=\"a6332ffd2d234==\", uri=\"pnmclient\", qop=auth-int, nc=00000001, cnonce=\"6629fae49393a05397450978507c4ef1\", response=\"6629fae49393a05397450978507c4ef1\", opaque=\"5ccc069c403ebaf9f0171e9517f30e41\", algorithm=MD5\n\n<?xml version=\"1.0\" encoding=\"utf-8\"?>\n<PNConfiguration>\n<NameofPNUE>\n<PNUEID>sip:PN_user1_public1@home1.net</PNUEID>\n<UEName id=1>\n<Name>PN_user1_public1_new</Name>\n</NameofPNUE>\n</PNConfiguration>\n\nRequest-URI:\tThe Request-URI (the URI that follows the method name, \"PUT\", in the first line) indicates the resource of this PUT request. The Request-URI contains the XCAP HTTP URI which indicates to the PNM AS the desired PN is requested to be configured.\nHost:\tSpecifies the Internet host and port number of the PNM AS, obtained from the original URI provided by the referring resource.\nUser-Agent:\tContains information about the user agent originating the request and it includes the static string \"3gpp-gba\" to indicate to the application server (i.e., NAF) that the UE supports 3GPP-bootstrapping based authentication.\nReferer:\tAllows the user agent to specify the address (URI) of the resource from which the URI for the PNM AS was obtained.\nAuthorization:\tContains the credentials obtained by means of the bootstrapping procedure (as described in 3GPP TS 33.220 [8]).\nXML body:\tContains the old and the new PN UE names that the PN-user requests the PNM AS to change. In this example, the UE with public user identity <sip: PN_user1_public1@home1.net > requests the PNM AS to change the old PN UE name with the new PN UE name \"PN_user1_public1_new\".\n2.\tAuthentication/authorization and UE capability and subscription checking\nAs described in Step 2 of figure A.3.3.1-1.\nNOTE:\tChanging the PN UE name from PN_user1_public1_old to PN_user1_public1_new does not entail interaction between the PN MAS and the HSS over the Sh interface.\n3.\tDelivery of PN-configuration response (NAF/PNM AS to PN UE) - see example in table A.3.3.3-3\nThe PNM AS sends a HTTP 200 OK response to the PN UE to indicate the success of the PN-configuration.\nTable A.3.3.3-3: Delivery of PN-configuration response (NAF/PNM AS to PN UE)\nHTTP/1.1 200 OK\nServer: Apache/1.3.22 (Unix) mod_perl/1.27\nContent-Length: 0\nAuthentication-Info: qop=auth-int, rspauth=\"6629fae49394a05397450978507c4ef1\", cnonce=\"6629fae49393a05397450978507c4ef1\", nc=00000001\nDate: Wed, 31 Oct 2007 10:50:36 GMT\nExpires: Wed, 31 Nov 2007 10:50:36 GMT\n\nAuthentication-Info:\tThis carries the protection.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "A.3.3.4\tPN-query",
                            "text_content": "Figure A.3.3.4-1 shows the message exchange between PN UE and NAF/PNM AS when the PN UE wants to obtain the PN setting information from the PNM AS. The messaging only takes place after a successful bootstrapping procedure (as described in 3GPP TS 33.220 [8]) in which case the bootstrapped security association has been established before step 1.\nThe figure depicts a successful PN-query, illustrating the process of a network packet being sent to a specific network node. The figure shows the network nodes involved in the query, such as the source node (S) and the destination node (D). The network nodes are connected by a network path, which is represented by the dashed lines. The figure also includes the network path's path loss (PL) and the path loss exponent (PLEx) to show the network's performance in terms of signal strength and signal quality.\nFigure A.3.3.4-1: Successful PN-query\n1.\tInitial PN-query request (PN UE to NAF/PNM AS) - see example in table A.3.3.4-1\nThe PN UE sends an HTTP request to the NAF/PNM AS PN in order to obtain the PN setting information of the <UERedirection> with the attribute value \"UriOfRedirectedUser= sip:PN_user1_public1@home1.net\".\nTable A.3.3.4-1: Initial PN-query request (UE to NAF/PNM AS)\nGET http://xcap.home1.net/pnm.3gpp.org/users/sip:PN_user_public@home1.net/pnm/~~/PNConfiguration/UERedirection%5b@UriOfRedirectedUser=%22sip:PN_user1_public1@home1.net%22%5d HTTP/1.1\nHost: pnmas.home1.net:1234\nUser-Agent: PNM User Agent; Release-6 3gpp-gba\nContent-Length: 0\nDate: Wed, 31 Oct 2007 10:50:35 GMT\nAccept: application/pnm+xml\nReferrer: http://pnmas.home1.net:1234/service\nAuthorization: Digest username=\"(B-TID)\", realm=\"3GPP-bootstrapping@pnmas.home1.net\", nonce=\"a6332ffd2d234==\", uri=\"pnmclient\", qop=auth-int, nc=00000001, cnonce=\"6629fae49393a05397450978507c4ef1\", response=\"6629fae49393a05397450978507c4ef1\", opaque=\"5ccc069c403ebaf9f0171e9517f30e41\", algorithm=MD5\n\nRequest-URI:\tThe Request-URI (the URI that follows the method name, \"PUT\", in the first line) indicates the resource of this PUT request. The Request-URI contains the XCAP HTTP URI which indicates to the PNM AS the desired PN is requested to be queried.\nHost:\tSpecifies the Internet host and port number of the PNM AS, obtained from the original URI provided by the referring resource.\nUser-Agent:\tContains information about the user agent originating the request and it includes the static string \"3gpp-gba\" to indicate to the application server (i.e., NAF) that the UE supports 3GPP-bootstrapping based authentication.\nReferer:\tAllows the user agent to specify the address (URI) of the resource from which the URI for the PNM AS was obtained.\nAuthorization:\tContains the credentials obtained by means of the bootstrapping procedure (as described in 3GPP TS 33.220 [8]).\nXML body:\tIn this example, it is assumed that the UE with the public user identity < sip: PN_user1_public1@home1.net > interrogates the PNM AS for the whole set of the PN setting information.\n2.\tAuthentication/authorization and UE capability\nSee Step 2 of figure A.3.3.4-1.\n3.\tDelivery of PN-query response (NAF/PNM AS to PN UE) - see example in table A.3.3.4-3\nThe PNM AS sends a HTTP 200 OK response to the PN UE to inform the whole set of the PN setting information for the <UERedirection> with the attribute value \"UriOfRedirectedUser= sip:PN_user1_public1@home1.net\".\nTable A.3.3.4-3: Delivery of PN-query response (NAF/PNM AS to PN UE)\nHTTP/1.1 200 OK\nServer: Apache/1.3.22 (Unix) mod_perl/1.27\nContent-Length: 0\nAuthentication-Info: qop=auth-int, rspauth=\"6629fae49394a05397450978507c4ef1\", cnonce=\"6629fae49393a05397450978507c4ef1\", nc=00000001\nDate: Wed, 31 Oct 2007 10:50:36 GMT\nExpires: Wed, 31 Nov 2007 10:50:36 GMT\n\n<?xml version=\"1.0\" encoding=\"utf-8\"?>\n<PNConfiguration>\n<UERedirection UriOfRedirectedUser=\"sip:PN_user1_public1@home1.net\">\n<RedirectedUserID>\n<PNUEID>sip:PN_user1_public1@home1.net</PNUEID>\n<PNUEName>PN_user1_public1_old</PNUEName>\n</RedirectedUserID>\n<RedirectingUserID id=1>\n<PNUEID>sip:PN_user2_public1@home1.net</PNUEID>\n<PNUEName>PN_user2_public1_old</PNUEName>\n<RedirectionLevel>application</RedirectionLevel>\n<RedirectionPrio>1</RedirectionPrio>\n</RedirectingUserID>\n</PNConfiguration>\n\nAuthentication-Info:\tThis carries the protection.\nXML body:\tIndicates the whole set of the PN setting information related to the UE with the public user identity < sip: PN_user1_public1@home1.net>.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "A.3.3.5\tPN-deconfiguration",
                            "text_content": "Figure A.3.3.5-1 shows the message exchange between PN UE and NAF/PNM AS when the PN UE wants to deconfigure the PN settings for the UE redirection service and the PN access control service. The messaging only takes place after a successful bootstrapping procedure (as described in 3GPP TS 33.220 [8]) in which case the bootstrapped security association has been established before step 1.\nThe figure depicts a successful initial PN-deconfiguration process, illustrating the steps taken to remove a passive optical network (PON) node from the network. The figure shows the network topology, the PON node, and the decommissioning process, highlighting the importance of proper decommissioning to maintain network stability and reliability.\nFigure A.3.3.5-1: Successful initial PN-deconfiguration\n1.\tInitial PN-deconfiguration request (PN UE to NAF/PNM AS) - see example in table A.3.3.5-1\nThe PN UE sends an HTTP request to the NAF/PNM AS containing the configuration request to delete the <UERedirection> with the attribute value \"UriOfRedirectedUser= sip:PN_user1_public1@home1.net\".\nTable A.3.3.5-1: Initial PN-deconfiguration request (UE to NAF/PNM AS)\nDELETE http://xcap.home1.net/pnm.3gpp.org/users/sip:PN_user_public@home1.net/pnm/~~/PNConfiguration/UERedirection%5b@UriOfRedirectedUser=%22sip:PN_user1_public1@home1.net%22%5d HTTP/1.1\nHost: pnmas.home1.net:1234\nUser-Agent: PNM User Agent; Release-6 3gpp-gba\nContent-Length: 0\nDate: Wed, 31 Oct 2007 10:50:35 GMT\nAccept: text/xml\nReferrer: http://pnmas.home1.net:1234/service\nAuthorization: Digest username=\"(B-TID)\", realm=\"3GPP-bootstrapping@pnmas.home1.net\", nonce=\"a6332ffd2d234==\", uri=\"pnmclient\", qop=auth-int, nc=00000001, cnonce=\"6629fae49393a05397450978507c4ef1\", response=\"6629fae49393a05397450978507c4ef1\", opaque=\"5ccc069c403ebaf9f0171e9517f30e41\", algorithm=MD5\n\nRequest-URI:\tThe Request-URI (the URI that follows the method name, \"DELETE\", in the first line) indicates the resource of this DELETE request. The Request-URI contains the XCAP HTTP URI which indicates to the PNM AS the desired PN is requested to be configured.\nHost:\tSpecifies the Internet host and port number of the PNM AS, obtained from the original URI provided by the referring resource.\nUser-Agent:\tContains information about the user agent originating the request and it includes the static string \"3gpp-gba\" to indicate to the application server (i.e., NAF) that the UE supports 3GPP-bootstrapping based authentication.\nReferer:\tAllows the user agent to specify the address (URI) of the resource from which the URI for the PNM AS was obtained.\nAuthorization:\tContains the credentials obtained by means of the bootstrapping procedure (as described in 3GPP TS 33.220 [8]).\nXML body:\tIn this example, the UE with public user identity <sip: PN_user1_public1@home1.net> wants the PNM AS to delete the whole PN settings established before.\n2.\tAuthentication/authorization and UE capability and subscription checking\nSee Step 2 of figure A.3.3.5-1.\n3.\tDelivery of PN-configuration response (NAF/PNM AS to PN UE) - see example in table A.3.3.5-3\nThe PNM AS sends a HTTP 200 OK response to the PN UE to indicate the success of the PN-deconfiguration.\nTable A.3.3.5-3: Delivery of PN-configuration response (NAF/PNM AS to PN UE)\nHTTP/1.1 200 OK\nServer: Apache/1.3.22 (Unix) mod_perl/1.27\nContent-Length: 0\nAuthentication-Info: qop=auth-int, rspauth=\"6629fae49394a05397450978507c4ef1\", cnonce=\"6629fae49393a05397450978507c4ef1\", nc=00000001\nDate: Wed, 31 Oct 2007 10:50:36 GMT\nExpires: Wed, 31 Nov 2007 10:50:36 GMT\n\nAuthentication-Info:\tThis carries the protection.\n",
                            "figures_meta_data": [],
                            "tables": []
                        }
                    ]
                },
                {
                    "title": "A.3.4\tSignalling flows for PN UE redirection",
                    "description": "",
                    "summary": "",
                    "text_content": "",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": [
                        {
                            "title": "A.3.4.1\tPN UE redirection in the IM CN subsystem",
                            "text_content": "Figure A.3.4.1-1 details the signalling flows for PN UE redirection in the IM CN subsystem.\nThe figure depicts a successful point-to-point (P2P) network connection between a user equipment (UE) and a base station (gNB) in a 5G network. The diagram illustrates the signal propagation in a 5G network, with key components such as the base station, user equipment, and scatterers. The figure highlights beamforming techniques to mitigate interference, and the layered design aligns with SDN principles.\nFigure A.3.4.1-1: Successful PN UE redirection: in the IM CN subsystem\nThe steps prior to step 1 are according to the standard procedures specified in 3GPP TS 24.228 [10].\n1.\tINVITE#1 request (I-CSCF#2 to S-CSCF#2) –see example in table A.3.4.1-1\nI-CSCF#2 forwards the INVITE request to S-CSCF#2 after invocation of the User Location Query procedure.\nTable A.3.4.1-1: INVITE (I-CSCF#2 to S-CSCF#2)\nINVITE sip:PN_user2_public1@home2.net SIP/2.0\nVia: SIP/2.0/UDP icscf2.home2.net;branch=z9hG4bK871y12.1,\nSIP/2.0/UDP scscf1.home1.net;branch=z9hG4bK332b23.1,\nSIP/2.0/UDP pcscf1.home1.net;branch=z9hG4bK240f34.1,\nSIP/2.0/UDP [5555::aaa:bbb:ccc:ddd]:1357;comp=sigcomp;branch=z9hG4bKnashds7\nMax-Forwards: 65\nRoute: <sip:scscf2.home2.net;lr>\nRecord-Route: <sip:scscf1.home1.net;lr>,<sip:pcscf1.home1.net;lr>\nP-Asserted-Identity: \"John Doe\" <sip:user1_public1@home1.net>\nPrivacy: none\nFrom: <sip:user1_public1@home1.net>;tag=171828\nTo: <sip: PN_user2_public1@home2.net>\nCall-ID: cb0s2sdfglkj490333\nCseq: 127 INVITE\nSupported: precondition,100rel,gruu,199\nAccept-Contact: *;+g.3gpp.icsi-ref=\"urn%3Aurn-7%3A3gpp-service.ims.icsi.mmtel\"\nP-Asserted-Service: urn:urn-7:3gpp-service.ims.icsi.mmtel Contact: <sip:user1_public1@home1.net;gr=urn:uuid:f81d4fae-7dec-11d0-a765-00a0c91e6bf6>; +g.3gpp.icsi_ref=\"urn%3Aurn-7%3A3gpp-service.ims.icsi.mmtel\"\nAllow: INVITE, ACK, CANCEL, BYE, PRACK, UPDATE, REFER, MESSAGE\nAccept: application/sdp, application/3gpp-ims+xml\nContent-Type: application/sdp\nContent-length: (…)\n\nv=0\no=- 2987933615 2987933615 IN IP6 5555::aaa:bbb:ccc:ddd\ns=-\nc=IN IP6 5555::aaa:bbb:ccc:ddd\nt=0 0\nm=audio 3456 RTP/AVP 97 96\na=tcap:1 RTP/AVPF\na=pcfg:1 t=1\nb=AS:25.4\na=curr:qos local none\na=curr:qos remote none\na=des:qos mandatory local sendrecv\na=des:qos none remote sendrecv\na=inactive\na=rtpmap:97 AMR\na=fmtp:97 mode-set=0,2,5,7; maxframes=2\na=rtpmap:96 telephone-event\n\n2.\tSIP 100 (Trying) response\n3.\tEvaluation of initial filter criteria\nThe S-CSCF#2 validates the service profile of this subscriber and evaluates the initial filter criteria.\n4. INVITE#1 request (S-CSCF#2 to PNM AS)- see example in table A.3.4.1-4\nBased on the evaluation of initial filter criteria, the S-CSCF#2 forwards the INVITE request with the Request-URI of the UE-1 to the PNM AS.\nTable A.3.4.1-4: INVITE (S-CSCF#2 to PNM AS)\nINVITE sip:PN_user2_public1@home2.net SIP/2.0\nVia: SIP/2.0/UDP scscf2.home2.net;branch=z9hG4bK240f34.1,\nSIP/2.0/UDP icscf2.home2.net;branch=z9hG4bK871y12.1,\nSIP/2.0/UDP scscf1.home1.net;branch=z9hG4bK332b23.1,\nSIP/2.0/UDP pcscf1.home1.net;branch=z9hG4bK240f34.1,\nSIP/2.0/UDP [5555::aaa:bbb:ccc:ddd]:1357;comp=sigcomp;branch=z9hG4bKnashds7\nMax-Forwards: 64\nRoute: <sip:pnmas.home2.net;lr>\nRecord-Route:<sip:scscf2.home2.net;lr>,<sip:icscf1.home1.net;lr>,<sip:scscf1.home1.net;lr>,<sip:pcscf1.home.net;lr>\nP-Asserted-Identity:\nPrivacy: none\nFrom: <sip:user1_public1@home1.net>;tag=171828\nTo: <sip: PN_user2_public1@home2.net>\nCall-ID:\nCseq:\nSupported: precondition, 100rel, gruu\nAccept-Contact:\nP-Asserted-Service:\nContact:\nAllow:\nAccept:\nContent-Type:\nContent-length: (…)\n\nv=\no=\ns=\nc=\nt=\nm=\na=\na=\nb=\na=\na=\na=\na=\na=\na=\na=\na=\na=\n\n5.\tSIP 100 (Trying) response (PNM AS to S-CSCF#2)\n6.\tPN UE redirection control\nThe PNM AS executes the PN UE redirection logic based on the PN-user's PN configurations and decides to redirect the initial request to the default UE of the PN, e.g. to the UE-3.\n7.\tINVITE#2 request (PNM AS to S-CSCF#2) - see example in table A.3.4.1-7\nAs a result of the PN UE redirection logic execution, the PNM AS sends the redirected INVITE request with the Request-URI of the UE-2 public user identity to the S-CSCF#2.\nTable A.3.4.1-7: INVITE#2 (PNM AS to S-CSCF#2)\nINVITE sip:PN_user3_public1@home2.net SIP/2.0\nVia: SIP/2.0/UDP pnmas.home2.net; brach= z9hG4bK712z34.1,\nSIP/2.0/UDP scscf2.home2.net;branch=z9hG4bK764z87.1,\nSIP/2.0/UDP icscf2.home2.net;branch=z9hG4bK871y12.1,\nSIP/2.0/UDP scscf1.home1.net;branch=z9hG4bK332b23.1,\nSIP/2.0/UDP pcscf1.home1.net;branch=z9hG4bK240f34.1,\nSIP/2.0/UDP [5555::aaa:bbb:ccc:ddd]:1357;comp=sigcomp;branch=z9hG4bKnashds7\nMax-Forwards: 63\nRoute: <sip:scscf2.home2.net;lr>\nRecord-Route: <sip:pnmas.home2.net>, <sip:scscf2.home2.net;lr>, <sip:icscf1.home1.net;lr>, <sip:scscf1.home1.net;lr>,<sip:pcscf1.home1.net;lr>\nP-Asserted-Identity:\nPrivacy:\nFrom:\nTo:\nCseq:\nCall-ID:\nSupported: precondition,100rel,gruu,199,histinfo\nHistory-Info: <sip:PN_user2_public1@home2.net>;index=1,\n<sip:PN_user3_public1@home2.net>;index=1.1\nAccept-Contact:\nP-Asserted-Service:\nContact:\nAllow:\nAccept:\nContent-Type:\nContent-length: (…)\n\nv=\no=\ns=\nc=\nt=\nm=\na=\na=\nb=\na=\na=\na=\na=\na=\na=\na=\na=\na=\n\n8.\tSIP 100 (Trying) response (S-CSCF#2 to PNM AS)\n9.\tINVITE#2 request (S-CSCF#2 to S-CSCF#3) - see example in table A.3.4.1-9\nThe S-CSCF#2 forwards the redirected INVITE request to the S-CSCF#3. The S-CSCF#2 and S-CSCF#3 can be the same entity.\nTable A.3.4.1-9: INVITE#2 (S-CSCF#2 to S-CSCF#3)\nINVITE sip:PN_user3_public1@home2.net SIP/2.0\nVia: SIP/2.0/UDP scscf2.home2.net;branch=z9hG4bK735z12.1,\nSIP/2.0/UDP Pnmas.home2.net;brach= z9hG4bK712z34.1,\nSIP/2.0/UDP scscf2.home2.net;branch=z9hG4bK764z87.1,\nSIP/2.0/UDP icscf1.home1.net;branch=z9hG4bK871y12.1,\nSIP/2.0/UDP scscf1.home1.net;branch=z9hG4bK332b23.1,\nSIP/2.0/UDP pcscf1@home1.net;branch=z9hG4bK240f34.1,\nSIP/2.0/UDP [5555::aaa:bbb:ccc:ddd]:1357;comp=sigcomp;branch=z9hG4bKnashds7\nMax-Forwards: 62\nRoute: <sip:scscf3.home2.net;lr>\nRecord-Route: <sip:scscf3.home2.net;lr>, <sip:pnmas.home2.net>, <sip:scscf2.home2.net;lr>, <sip:icscf1.home1.net;lr>, <sip:scscf1.home1.net;lr>, <sip:pcscf1.home1.net;lr>\nP-Asserted-Identity:\nPrivacy:\nFrom:\nTo:\nCseq:\nCall-ID:\nHistory-Info:\nAccept-Contact:\nP-Asserted-Service:\nSupported:\nContact:\nAllow:\nAccept:\nContent-Type:\nContent-length: (…)\n\nv=\no=\ns=\nc=\nt=\nm=\na=\na=\nb=\na=\na=\na=\na=\na=\na=\na=\na=\na=\n\n10.\tSIP 100 (Trying) response (S-CSCF#3 to S-CSCF#2)\nThe S-CSCF#3 responds to the INVITE#3 request with a 100 Trying provisional response.\n11.\tINVITE#2 request (S-CSCF#3 to PNM AS) - see example in table A.3.4.1-11\nBased on the evaluation of initial filter criteria, the S-CSCF#3 forwards the INVITE request with the Request-URI of the UE-3 to the PNM AS.\nTable A.3.4.1-11: INVITE#2 (S-CSCF#3 to PNM AS)\nINVITE sip:PN_user3_public1@home2.net SIP/2.0\nVia: SIP/2.0/UDP scscf3.home2.net;branch=z9hG4bK735z12.1,\nSIP/2.0/UDP scscf2.home2.net;branch=z9hG4bK735z12.1,\nSIP/2.0/UDP Pnmas.home2.net;brach= z9hG4bK712z34.1,\nSIP/2.0/UDP scscf2.home2.net;branch=z9hG4bK764z87.1,\nSIP/2.0/UDP icscf2.home2.net;branch=z9hG4bK871y12.1,\nSIP/2.0/UDP pcscf1.home1.net;branch=z9hG4bK240f34.1,\nSIP/2.0/UDP [5555::aaa:bbb:ccc:ddd]:1357;comp=sigcomp;branch=z9hG4bKnashds7\nMax-Forwards: 61\nRoute: <sip:pnmas.home2.net;lr>\nRecord-Route: <sip:scscf3.home2.net;lr>,<sip:scscf2.home2.net;lr>, <sip:pnmas.home2.net>, <sip:scscf1.home2.net;lr>, <sip:icscf2.home2.net;lr>, <sip:scscf1.home1.net;lr>, <sip:pcscf1.home1.net;lr>\nP-Asserted-Identity:\nPrivacy:\nFrom:\nTo:\nCseq:\nCall-ID:\nSupported:\nHistory-Info:\nAccept-Contact:\nP-Asserted-Service:\nContact:\nAllow:\nAccept:\nContent-Type:\nContent-length: (…)\n\nv=\no=\ns=\nc=\nt=\nm=\na=\na=\nb=\na=\na=\na=\na=\na=\na=\na=\na=\na=\n\n12.\tSIP 100 (Trying) response (PNM AS to S-CSCF#3)\n13.\tPN UE redirection control\nThe PNM AS executes the PN UE redirection control logic based on the PN-user's PN configurations and decides to forward the request to S-CSCF#3 as the UE-3 is the default UE of the PN.\n14.\tINVITE#2 request (PNM AS to S-CSCF#3) - see example in table A.3.4.1-14\nTable A.3.4.1-14: INVITE#2 (PNM AS to S-CSCF#3)\nINVITE sip: PN_user3_public1@home2.net SIP/2.0\nVia: SIP/2.0/UDP pnmas.home2.net;branch=z9hG4bK735z12.1,\nSIP/2.0/UDP scscf3.home2.net;branch=z9hG4bK735z12.1,\nSIP/2.0/UDP scscf2.home2.net;branch=z9hG4bK735z12.1,\nSIP/2.0/UDP Pnmas.home2.net;brach= z9hG4bK712z34.1,\nSIP/2.0/UDP scscf2.home2.net;branch=z9hG4bK764z87.1,\nSIP/2.0/UDP icscf2.home2.net;branch=z9hG4bK871y12.1,\nSIP/2.0/UDP scscf1.home1.net;branch=z9hG4bK332b23.1,\nSIP/2.0/UDP ,\nSIP/2.0/UDP [5555::aaa:bbb:ccc:ddd]:1357;comp=sigcomp;branch=z9hG4bKnashds7\nMax-Forwards: 60\nRoute: <sip:scscf3.home2.net;lr>\nRecord-Route: <sip:pnmas.home2.net;lr>,<sip:scscf3.home2.net;lr>,<sip:scscf2.home2.net;lr>, <sip:pnmas.home2.net>, <sip:scscf2.home2.net;lr>, <sip:icscf2.home2.net;lr>, <sip:scscf1.home1.net;lr>, <sip:pcscf1@home1.net;lr>\nP-Asserted-Identity:\nPrivacy:\nFrom:\nTo:\nCseq:\nCall-ID:\nSupported:\nHistory-Info:\nAccept-Contact:\nP-Asserted-Service:\nContact:\nAllow:\nAccept:\nContent-Type:\nContent-length: (…)\n\nv=\no=\ns=\nc=\nt=\nm=\na=\na=\nb=\na=\na=\na=\na=\na=\na=\na=\na=\na=\n\n15.\tSIP 100 (Trying) response (S-CSCF#3 to PNM AS)\n16.\tINVITE#2 request (S-CSCF#3 to P-CSCF-#3) -- see example in table A.3.4.1-16\nThe S-CSCF#3 continues the redirected INVITE request based on the standard call setup procedures.\nTable A.3.4.1-16: INVITE#2 (S-CSCF#3 to P-CSCF#3)\nINVITE sip:[5555::eee:fff:aaa:bbb]:8805;comp=sigcomp SIP/2.0\nVia: SIP/2.0/UDP scscf3.home2.net;branch=z9hG4bK735z12.1,\nSIP/2.0/UDP pnmas.home2.net;branch=z9hG4bK735z12.1,\nSIP/2.0/UDP scscf3.home2.net;branch=z9hG4bK735z12.1,\nSIP/2.0/UDP scscf2.home2.net;branch=z9hG4bK735z12.1,\nSIP/2.0/UDP Pnmas.home2.net;brach= z9hG4bK712z34.1,\nSIP/2.0/UDP scscf2.home2.net;branch=z9hG4bK764z87.1,\nSIP/2.0/UDP icscf2.home2.net;branch=z9hG4bK871y12.1,\nSIP/2.0/UDP scscf1.home1.net;branch=z9hG4bK332b23.1,\nSIP/2.0/UDP pcscf1.home1.net;branch=z9hG4bK240f34.1,\nSIP/2.0/UDP [5555::aaa:bbb:ccc:ddd]:1357;comp=sigcomp;branch=z9hG4bKnashds7\nMax-Forwards: 59\nRoute: <sip: pcscf#3@home2.net;lr>\nRecord-Route: <sip:scscf3.home2.net;lr>, <sip:pnmas.home2.net;lr>,<sip:scscf3.home2.net;lr>,<sip:scscf2.home2.net;lr>, <sip:pnmas.home2.net>, <sip:scscf2.home2.net;lr>, <sip:icscf2.home2.net;lr>, <sip:scscf1.home1.net;lr>, <sip:pcscf1.home1.net;lr>\nP-Asserted-Identity:\nPrivacy:\nFrom:\nTo:\nCseq:\nCall-ID:\nSupported:\nHistory-Info:\nAccept-Contact:\nP-Asserted-Service:\nContact:\nAllow:\nAccept:\nP-Called-Party-ID: <sip:PN_user3_public1@home2.net>\nContent-Type:\nContent-length: (…)\n\nv=\no=\ns=\nc=\nt=\nm=\na=\na=\nb=\na=\na=\na=\na=\na=\na=\na=\na=\na=\n\n17.\tSteps 17 to 30 are identical to generic session setup procedure specified in 3GPP TS 24.228 [10].\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "A.3.4.2\tPN UE redirection in the CS domain",
                            "text_content": "Figure A.3.4.2-1 provides the signaling flow for PN UE redirection in the CS domain. The GMSC will receive the ISUP containing calling party number and called party number. The gsmSCF will invoke the service logic in order to route the call to the Default-UE.\nThe figure depicts a signalling flow for PN  UE redirection in the CS domain, illustrating the steps taken by the network to redirect a user's signal to a different path.\nFigure A.3.4.2-1: Signalling flow for PN UE redirection in the CS domain\n1.\tISUP IAM\nAn IAM message arrives at the GMSC#1. Specifically for this signalling flow, the IAM includes:\n-\tCalled Party Number parameter = [(Numbering plan identifier = ISDN/telephony numbering plan), (type of number = international number), (Number digits = 12415553333)]\n-\tCalling Party Number parameter = [(Numbering plan identifier = ISDN/telephony numbering plan), (type of number = international number), (Number digits = 12125551111)]\n2.\tMAP Send Routing Information (SRI) (GMSC#1 to HSS)\nOn receipt of the incoming call request, the GMSC queries the HSS for routing information.\n3.\tRetrieval of PNM subscriber information\nThe HSS provides information including the T-CSI information element that contains information configured for the PNM subscriber, identifying the subscriber as having terminating CAMEL services. The T-CSI IE also includes the gsmSCF address.\n4.\tMAP Send Routing Information Acknowledgement (SRI ACK) (HSS to GMSC#1)\nThe HSS returns the T-CSI information element to the GMSC in response to the query for routing information (SRI). The GMSC now has the address of the gsmSCF.\n5.\tCAMEL IDP (GMSC to gsmSCF)\nThe GMSC#1 triggers a CAMEL activity which results in sending a CAMEL IDP message to the GSM Service Control Function (gsmSCF). The CAMEL IDP message contains at least:\n-\tthe calling party number;\n-\tthe called party number;\n-\tthe type of call; and\n-\tInformation from the T-CSI IE received by the GMSC#1 in the SRI ACK from the HSS. This includes the CAMEL service key.\n6.\tThe gsmSCF invokes PNM Redirection service logic to route the call.\n7.\tCAMEL CONNECT (gsmSCF to GMSC#1)\nThe CAMEL service function causes the gsmSCF to respond to the CAMEL IDP message with a CAMEL CONNECT message containing:\n-\tThe MSISDN of the Default UE: 12245678912\n8.\tIAM message arrived at GMSC#2 of Default UE.\nThe IAM includes:\n-\tCalled Party Number parameter = [(Numbering plan identifier = ISDN/telephony numbering plan), (type of number = international number), (Number digits = 12415553333)]\n-\tCalling Party Number parameter = [(Numbering plan identifier = ISDN/telephony numbering plan), (type of number = international number), (Number digits = 12125551111)]\n9.\tISUP IAM\nThe call is routed to the Default UE.\n10-12.\tISUP ACM\nIn response an ACM is generated .There is no PNM specific content to this response.\n13-15.\tISUP ANM\nThe ANM is generated after the terminating UE answers the call. There is no PNM specific content to this response.\n",
                            "figures_meta_data": [],
                            "tables": []
                        }
                    ]
                },
                {
                    "title": "A.3.5\tSignalling flows for PN access control",
                    "description": "",
                    "summary": "",
                    "text_content": "",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": [
                        {
                            "title": "A.3.5.1\tPN access control procedure in IM CN subsystem",
                            "text_content": "Figure A.3.5.1-1 details the signalling flows for PN access control in the IM CN subsystem.\nIn the following flow UE#2a is the PN controller UE and UE#2b is the PN controllee UE.\nThe figure depicts a schematic representation of the signalling process for low-power narrow-band access control procedure in an Integrated Circuit (IC) subsystem. It illustrates the various components involved, such as the Central Processing Unit (CPU), Memory, and I/O interfaces, as well as the communication between these components. The figure highlights the importance of signal quality and power management in ensuring reliable communication.\nFigure A.3.5.1-1: Signalling flow for PN access control procedure in IM CN subsystem\nThe steps prior to step 1 are according to the standard procedures specified in 3GPP TS 24.228 [10].\n1.\tINVITE#1 (I-CSCF#2 to S-CSCF#2)\nI-CSCF-2 forwards the INVITE message to S-CSCF#2 after invocation of a location Query.\nTable A.3.5.1-1: SIP INVITE request (I-CSCF#2 to S-CSCF#2)\nINVITE sip:PN_user2b_public1@home2.net SIP/2.0\nVia:SIP/2.0/UDP icscf2.home2.net;branch=z9hG4bK871y12.1,\nSIP/2.0/UDP scscf1.home1.net;branch=z9hG4bK332b23.1,\nSIP/2.0/UDP pcscf1.visited1.net;branch=z9hG4bK240f34.1,\nSIP/2.0/UDP [5555::aaa:bbb:ccc:ddd]:1357;comp=sigcomp;branch=z9hG4bKnashds7\nMax-Forwards: 65\nRoute: <sip:scscf2.home2.net;lr>\nRecord-Route:<sip:scscf1.home1.net;lr>,<sip:pcscf1.visited.net;lr>\nP-Asserted-Identity: \"John Doe\" <sip:user1_public1@home1.net>\nPrivacy: none\nFrom: <sip:user1_public1@home1.net>;tag=157893\nTo: <sip:PN_user2b_public1@home2.net>\nCseq: 127 INVITE\nCall-ID:131243vdse\nSupported: precondition,100rel,gruu,199\nAccept-Contact: *;+g.3gpp.icsi-ref=\"urn%3Aurn-7%3A3gpp-service.ims.icsi.mmtel\"\nP-Asserted-Service: urn:urn-7:3gpp-service.ims.icsi.mmtel\nContact: <sip:user1_public1@home1.net;gr=urn:uuid:f81d4fae-7dec-11d0-a765-00a0c91e6bf6>;+g.3gpp.icsi-ref=\"urn%3Aurn-7%3A3gpp-service.ims.icsi.mmtel\"\nAllow: INVITE, ACK, CANCEL, BYE, PRACK, UPDATE, REFER, MESSAGE\nAccept: application/sdp, application/3gpp-ims+xml\nContent-Type: application/sdp\nContent-length: (…)\n\nv=0\no=- 2987933615 2987933615 IN IP6 5555::aaa:bbb:ccc:ddd\ns=-\nc=IN IP6 5555::aaa:bbb:ccc:ddd\nt=0 0\nm=audio 3456 RTP/AVP 97 96\na=tcap:1 RTP/AVPF\na=pcfg:1 t=1\nb=AS:25.4\na=curr:qos local none\na=curr:qos remote none\na=des:qos mandatory local sendrecv\na=des:qos none remote sendrecv\na=inactive\na=rtpmap:97 AMR\na=fmtp:97 mode-set=0,2,5,7; maxframes=2\na=rtpmap:96 telephone-event\n\n2.\t100 Trying\nS-CSCF#2 responds to the INVITE#1 request with a 100 Trying provisional response.\nTable A.3.5.1-2: SIP 100 Trying\nSIP/2.0 100 Trying\nVia:SIP/2.0/UDP icscf2.home2.net;branch=z9hG4bK871y12.1,\nSIP/2.0/UDP scscf1.home1.net;branch=z9hG4bK332b23.1,\nSIP/2.0/UDP pcscf1.visited1.net;branch=z9hG4bK240f34.1,\nSIP/2.0/UDP [5555::aaa:bbb:ccc:ddd]:1357;comp=sigcomp;branch=z9hG4bKnashds7\nFrom:\nTo:\nCall-ID:\nCSeq:\nContent-Length: 0\n\n3.\tEvaluation of Initial Filter Criteria\nS-CSCF#2 validates the service profile of this subscriber and evaluates the initial filter criteria.\n4.\tINVITE#1(S-CSCF#2 to PNM AS)\nS-CSCF#2 forwards the INVITE#1 request to the PNM AS based upon the initial filter criteria (IFCs).\nTable A.3.5.1-4: SIP INVITE request (S-CSCF#2 to PNM AS)\nINVITE sip:PN_user2b_public1@home2.net SIP/2.0\nVia: SIP/2.0/UDP scscf2.home2.net;branch=z9hG4bwt871y12.1,\nSIP/2.0/UDP icscf2.home2.net;branch=z9hG4bK871y12.1,\nSIP/2.0/UDP scscf1.home1.net;branch=z9hG4bK332b23.1,\nSIP/2.0/UDP pcscf1.visited1.net;branch=z9hG4bK240f34.1,\nSIP/2.0/UDP [5555::aaa:bbb:ccc:ddd]:1357;comp=sigcomp;branch=z9hG4bKnashds7\nMax-Forwards: 64\nRoute: <sip:pnmas.home2.net;lr>\nRecord-Route: <sip:scscf2.home1.net;lr>,<sip:scscf1.home1.net;lr>,<sip:pcscf1.visited.net;lr>\nP-Asserted-Identity:\nPrivacy:\nFrom:\nTo:\nCseq:\nCall-ID:\nSupported:\nAccept-Contact:\nP-Asserted-Service:\nContact:\nAllow:\nAccept:\nContent-Type:\nContent-length: (…)\n\nv=\no=\ns=\nc=\nt=\nm=\na=\na=\nb=\na=\na=\na=\na=\na=\na=\na=\na=\na=\n\n5.\t100 Trying\nThe PNM AS responds to the INVITE#1 request with a 100 Trying provisional response.\nTable A.3.5.1-5: SIP 100 Trying\nSIP/2.0 100 Trying\nVia: SIP/2.0/UDP scscf2.home2.net;branch=z9hG4bwt871y12.1,\nSIP/2.0/UDP icscf2.home2.net;branch=z9hG4bK871y12.1,\nSIP/2.0/UDP scscf1.home1.net;branch=z9hG4bK332b23.1,\nSIP/2.0/UDP pcscf1.visited1.net;branch=z9hG4bK240f34.1,\nSIP/2.0/UDP [5555::aaa:bbb:ccc:ddd]:1357;comp=sigcomp;branch=z9hG4bKnashds7\nFrom:\nTo:\nCall-ID:\nCSeq:\nContent-Length: 0\n\n6.\tPN access control\nThe PNM AS invokes the Private network service logic. As user1_public1@home1.net is not on the <PNAccessControlList> of PN_user2b_public1@home2.net the PN access controller needs to be contacted.\n7.\tINVITE#2 (PNM AS to S-CSCF#2)\nThe PNM AS generates a new INVITE request message called INVITE#2 and sends it to S-CSCF#1 in order to interact with the PN controller UE.\nTable A.3.5.1-7: SIP INVITE request (PNM AS to S-CSCF#2)\nINVITE sip:PN_user2a_public1@home2.net;target=PN_user2b_public1@home2.net SIP/2.0\nVia: SIP/2.0/UDP pnmas.home2.net;branch=z9hG4bwt871y12.1\nMax-Forwards: 70\nRoute: <sip:scscf2.home2.net;lr>\nP-Asserted-Identity: \"John Doe\" <sip:user1_public1@home1.net>\nPrivacy:\nFrom: <sip:pnmas.home1.net>;tag=r3rw33\nTo: <sip:PN_user2a_public1@home2.net>\nCseq:\nCall-ID:\nSupported: precondition, 100rel, 199, histinfo\nContact: <sip:pnmas.home2.net>\nHistory-Info: <sip:PN_user2b_public1@home2.net>;index=1,\n<sip:PN_user2a_public1@home2.net;target=PN_user2b_public1@home2.net>;index=1.1\nAccept-Contact:*;+g.3gpp.iari-ref=\"urn%3Aurn-7%3A3gpp-application.ims.iari.pnm-controller\"\nP-Asserted-Service:\nAllow:\nAccept:\nContent-Type:\nContent-length: (…)\n\nv=\no=\ns=\nc=\nt=\nm=\na=\na=\nb=\na=\na=\na=\na=\na=\na=\na=\na=\na=\n\nRequest-URI:\tcontains the URI of the PN controller UE (PN_user2a_public1@home2.net) obtained from the <PNController> element along with the target uri-parameter which contains the URI from the original Request-URI (PN_user2b_public1@home2.net).\nP-Asserted-Identity:\tthe identity of the originator (\"John Doe\" <sip:user1_public1@home1.net>).\nFrom:\tcontains the SIP URI of the PNM AS (sip: pnmas.home1.net).\nTo:\t\tcontains the URI of the PN controller UE ( PN_user2a_public1@home2.net).\nSupported:\tcontains the following option tags: precondition, 100rel, 199, histinfo.\nContact:\t\ta SIP URI that contains the IP address or FQDN of the PNM AS.\nHistory-Info:\tcontains the URIs from the original Request-URI (PN_user2b_public1@home2.net) and the URI of the PN controller UE (PN_ user2a_public1@home2.net).\nAccept-Contact:\t\tcontains the g.3gpp.iari-ref media feature tag with the IARI value \"urn%3Aurn-7%3A3gpp-application.ims.iari.pnm-controller\".\n8.\t100 Trying\nS-CSCF#2 responds to the INVITE#2 request with a 100 Trying provisional response.\nTable A.3.5.1-8: SIP 100 Trying\nSIP/2.0 100 Trying\nVia: SIP/2.0/UDP pnmas.home2.net;branch=v7hG4bwt171y12.1\nTo:\nCall-ID:\nCSeq:\nContent-Length: 0\n\n9.\tINVITE#2 (S-CSCF#2 to P-CSCF#2a)\nS-CSCF#2 forwards the INVITE#2 request to P_CSCF#2a.\nTable A.3.5.1-9: SIP INVITE request (S-CSCF#2 to P-CSCF#2a)\nINVITE sip:[5555::eee:fff:aaa:bbb]:8805;comp=sigcomp SIP/2.0\nVia: SIP/2.0/UDP scscf2.home2.net;branch=z9hG4bwt871y12.1,\nSIP/2.0/UDP pnmas.home2.net;branch=z9hG4bwt871y12.1\nMax-Forwards: 69\nRoute: <sip:pcscf2a.visited2.net;lr>\nP-Asserted-Identity:\nPrivacy:\nFrom:\nTo:\nCseq:\nCall-ID:\nSupported:\nContact:\nHistory-Info:\nAccept-Contact:\nP-Asserted-Service:\nAllow:\nAccept:\nP-Called-Party-ID: <sip:PN_user2a_public1@home2.net;target=PN_user2b_public1@home2.net>\nContent-Type:\nContent-length: (…)\n\nv=\no=\ns=\nc=\nt=\nm=\na=\na=\nb=\na=\na=\na=\na=\na=\na=\na=\na=\na=\n\n10.\t100 Trying\nP-CSCF#2a responds to the INVITE#2 request with a 100 Trying provisional response.\nTable A.3.5.1-10: SIP 100 Trying\nSIP/2.0 100 Trying\nVia: SIP/2.0/UDP scscf2.home2.net;branch=z9hG4bwt871y12.1,\nSIP/2.0/UDP pnmas.home2.net;branch=z9hG4bwt871y12.1\nTo:\nCall-ID:\nCSeq:\nContent-Length: 0\n\n11.\tINVITE #2 (P-CSCF#2a to UE-2a)\nP-CSCF#2a sends the INVITE#2 to UE-2a (controller UE)\nTable A.3.5.1-11: SIP INVITE request (P-CSCF#2a to UE-2a)\nINVITE sip:[5555::eee:fff:aaa:bbb]:8805;comp=sigcomp SIP/2.0\nVia: SIP/2.0/UDP pcscf2a.visited2.net;branch=z9hG4bK240f34.1,\nSIP/2.0/UDP scscf2.home2.net;branch=z9hG4bwt871y12.1,\nSIP/2.0/UDP pnmas.home1.net;branch=k9hG4bwt871y12.1\nMax-Forwards: 68\nRecord-Route: <sip:pcscf2a.visited2.net;lr>,\n<sip:scscf2.home2.net;lr>\nP-Asserted-Identity:\nPrivacy:\nFrom:\nTo:\nCseq:\nCall-ID:\nRequire:\nSupported:\nContact:\nHistory-Info:\nAccept-Contact:\nP-Asserted-Service:\nAllow:\nAccept:\nP-Called-Party-ID:\nContent-Type:\nContent-length: (…)\n\nv=\no=\ns=\nc=\nt=\nm=\na=\na=\nb=\na=\na=\na=\na=\na=\na=\na=\na=\na=\n\n12.\t100 Trying\nUE-2a responds to the INVITE#2 request with a 100 Trying provisional response.\nTable A.3.5.1-12: SIP 100 Trying\nSIP/2.0 100 Trying\nVia:SIP/2.0/UDP scscf2.home2.net;branch=z9hG4bwt871y12.1,\nSIP/2.0/UDP pnmas.home2.net;branch=v7hG4bwt171y12.1\nTo:\nCall-ID:\nCSeq:\nContent-Length: 0\n\n13.\tPNM Privacy Decision\nBased upon the IARI value the PN controller UE invokes the PN controller application. The PN controller application provides the originators identity from the P-Asserted-Identity header, the PN controllee UE identity from the target URI-parameter in the Request-URI to the user and provides the option to the user to either:\n1.\tForward the session to the controllee UE\n2.\tReject the session\n3.\tAccept the session\nIn the example the user determines to forward the sesssion to the controllee UE.\n14.\t302 Moved Temporarily\nThe PN controller UE sends a SIP 302 Moved Temporarily response to pcscf2a.visited2.net.\nTable A.3.5.1-14: SIP 302 Moved Temporarily\nSIP/2.0 302 Moved Temporarily\nVia: SIP/2.0/UDP pcscf2.visited2.net;branch=z9hG4bK240f34.1,\nSIP/2.0/UDP scscf2.home2.net;branch=z9hG4bwt871y12.1,\nSIP/2.0/UDP pnmas.home2.net;branch=k9hG4bwt871y12.1\nFrom:\nTo:\nCall-ID:\nCSeq:\nHistory-Info: <sip:PN_user2b_public1@home2.net>;index=1,\n<sip:PN_user2a_public1@home2.net;target=PN_user2b_public1@home2.net>;index=1.1\nContact: <sip:PN_user2b_public1@home2.net>\nContent-Length:0\n\nContact:\t\ta URI that contains the address of the PN controllee UE (PN_user2b_public1@home2.net).\nHistory-info:\tcontains the URIs from the History-Info header in the original INVITE (PN_ user2b_public1@home2.net and PN_user2a_public1@home2.net).\n15.\t302 Moved Temporarily\nP-CSCF#2a forwards the 302 Moved Temporarily response to S-CSCF#2.\nTable A.3.5.1-15: SIP 302 Moved Temporarily\nSIP/2.0 302 Moved Temporarily\nVia: SIP/2.0/UDP scscf2.home2.net;branch=z9hG4bwt871y12.1,\nSIP/2.0/UDP pnmas.home2.net;branch=k9hG4bwt871y12.1\nFrom:\nTo:\nCall-ID:\nCSeq:\nHistory-Info:\nContact:<sip:PN_user2b_public1@home2.net>\nContent-Length:0\n\n16.\t302 Moved Temporarily\nS-CSCF#2 forwards the 302 Moved Temporarily response to the PNM AS.\nTable A.3.5.1-16: SIP 302 Moved Temporarily\nSIP/2.0 302 Moved Temporarily\nVia: SIP/2.0/UDP pnmas.home2.net;branch=k9hG4bwt871y12.1\nFrom:\nTo:\nCall-ID:\nCSeq:\nHistory-Info:\nContact: <sip:PN_user2b_public1@home2.net>\nContent-Length:0\n\n17.\tPN UE redirection\nUpon receiving the 302 Moved Temporarily response from the controller UE, the PNM AS determines the session is to be redirected to the controllee UE.\n18.\tINVITE#3 (PNM AS to S-CSCF#2)\nThe PNM AS forwards the Originating INVITE message to S-CSCF#2.\nTable A.3.5.1-18: SIP INVITE request (PNM AS to S-CSCF#2)\nINVITE sip:PN_user2b_public1@home2.net SIP/2.0\nVia:SIP/2.0/UDP pnmas.home2.net;branch=z9hG4bwt871y12.1\nSIP/2.0/UDP scscf2.home2.net;branch=z9hG4bwt871y12.1,\nSIP/2.0/UDP icscf2.home2.net;branch=z9hG4bK871y12.1,\nSIP/2.0/UDP scscf1.home1.net;branch=z9hG4bK332b23.1,\nSIP/2.0/UDP pcscf1.visited1.net;branch=z9hG4bK240f34.1,\nSIP/2.0/UDP [5555::aaa:bbb:ccc:ddd]:1357;comp=sigcomp;branch=z9hG4bKnashds7\nMax-Forwards: 63\nRoute: <sip:scscf2.home2.net;lr>\nRecord-Route: <sip:scscf2.home1.net;lr>,<sip:scscf1.home1.net;lr>,<sip:pcscf1.visited.net;lr>\nP-Asserted-Identity: \"John Doe\" <sip:user1_public1@home1.net>\nPrivacy:\nFrom: <sip:user1_public1@home1.net>;tag=157893\nTo: <sip:PN_user2_public1@home2.net>\nCseq:\nCall-ID:\nSupported: precondition, 100rel, 199, histinfo\nContact: <sip:user1_public1@home1.net;gr=urn:uuid:f81d4fae-7dec-11d0-a765-00a0c91e6bf6>;+g.3gpp.icsi-ref=\"urn%3Aurn-7%3A3gpp-service.ims.icsi.mmtel\"\nHistory-Info: <sip:PN_user2b_public1@home2.net>;index=1,\n<sip:PN_user2a_public1@home2.net;target=PN_user2b_public1@home2.net>;index=1.1,\n<sip:PN_user2b_public1@home2.net?Reason=SIP;cause=302>;index=1.2\nAccept-Contact: *;g.3gpp.icsi-ref=\"urn%3Aurn-7%3A3gpp-service.ims.icsi.mmtel\"\nP-Asserted-Service:\nAllow:\nContent-Type:\nContent-length: (…)\n\nv=\no=\ns=\nc=\nt=\nm=\na=\na=\nb=\na=\na=\na=\na=\na=\na=\na=\na=\na=\n\nRequest-URI:\tcontains the URI of the PN controller UE (PN_user2a_public1@home2.net) obtained from the <PNController> element along with the target uri-parameter which contains the URI from the original Request-URI (PN_user2b_public1@home2.net).\nP-Asserted-Identity:\tthe identity of the originator (\"John Doe\" <sip: user1_public1@home1.net>).\nFrom:\tcontains the SIP URI of the PNM AS (sip: pnmas.home1.net).\nTo:\t\tcontains the URI of the PN controller UE (PN_user2a_public1@home2.net).\nSupported:\tcontains the following option tags: precondition, 100rel, 199, histinfo.\nContact:\t\tthe contents of the Contact header in the original INVITE (<sip: user1_public1@home1.net;gr=urn:uuid:f81d4fae-7dec-11d0-a765-00a0c91e6bf6>).\nHistory-info:\tcontains the URIs from the History-Info header in the 302 Moved Temporarily response (PN_user2b_public1@home2.net and PN_user2a_public1@home2.net) with the addition of the URI of the PN controllee UE (PN_user2b_public1@home2.net) from the Contact header in the 302 Moved Temporarily response along with the reason code 302.\nAccept-Contact:\tcontains the g.3gpp.icsi-ref media feature tag with the ICSI value from the Accept-Contact header in the original INVITE (\"urn%3Aurn-7%3A3gpp-service.ims.icsi.mmtel\").\n19-34.\tThese flows follow the standard session establishment procedures specified in 3GPP TS 24.228 [10].\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "A.3.5.2\tPN access control procedure in CS domain.",
                            "text_content": "Figure A.3.5.2-1 provides the signalling flows for the PN access control procedure in the CS domain. PN access control services deal with a user having access control over its personal network.\nThe figure depicts a simplified representation of a 5.2-1 signal for access control in the CS domain, illustrating the low-level signaling for network access control.\nFigure A.3.5.2-1 Signalling flow for PN access control in the CS domain\n1.\tISUP IAM\nA Call Request containing an IAM message arrives at the GMSC.\nSpecifically for this signalling flow, the IAM includes:\n- Calling Party number =12134587692\n- Called Party Number parameter = [(Numbering plan identifier = ISDN/telephony numbering   plan), (type of number = international number), (Number digits = 15346789043)]\n2.\tMAP Send Routing Information (SRI)\nOn receipt of the incoming call request, the GMSC queries the HSS for routing information.\n3.\tRetrieval of PNM subscriber information\nThe HSS identifies the subscriber as a PNM subscriber and provides the configured terminated CAMEL subscription information (T-CSI) towards the GMSC in the SRI-ACK.\n4.\tMAP Send Routing Information Acknowledgement (SRI ACK)\nThe HSS returns the T-CSI information element which includes the gsmSCF address to the GMSC in response to the query for routing information (SRI).\n5.\tCAMEL IDP (GMSC to gsmSCF)\nThe GMSC#1 triggers a CAMEL activity which results in sending a CAMEL IDP message to the GSM Service Control Function (gsmSCF). The CAMEL IDP message contains at least:\n-\tthe calling party number;\n-\tthe called party number;\n-\tthe type of call; and\n-\tinformation from the T-CSI IE received by the GMSC#1 in the SRI ACK from the HSS. This includes the CAMEL service key.\n6.\tPN access control\nThe gsmSCF performs the PN access control. Since the calling party is not configured in the PN access control list, the gsmSCF needs to ask the controller UE to grant the access to the calling party.\n7-8.\tMAP-UNSTRUCTURED-SS-REQUEST (gsmSCF to HSS)\nAs part of this process the gsmSCF starts the timer to supervise the call establishment and sends a MAP-UNSTRUCTURED-SS-REQUEST message to the HSS. The message contains the following information.\nUSSD String:- Calling Number 12134587692 and called Number 15346789043.\n9.\tMAP-UNSTRUCTURED-SS-REQUEST (HSS to MSC/VLR)\nThe HSS relays the USSD request message to the MSC/VLR. It contains the following information.\nUSSD String:- Calling Number 12134587692 and called Number 15346789043.\n10.\tREGISTER (MSC/VLR to controller UE)\nThis message is used between MSC/VLR and the UE to get the access granted for the incoming call. It contains the following information.\nFacility (Invoke=UNSTRUCTURED-SS-REQUEST(USSD-Data-Coding-Scheme, USSD String))\n11-13.\tWhen the timer expires, the gsmSCF generates a play announcement message containing Tone ID and Duration parameters as specified in 3GPP TS 29.078 [13].\n14.\tFACILITY (controller UE to MSC/VLR)\nThe controller UE will send the FACILITY message back to the MSC/VLR. It contains the following information.\nFacility (ReturnResult=UNSTRUCTURED-SS-REQUEST (USSD-Data-Coding-Scheme, USSD String)) which inform that the call is accepted.\n15-16.\tMAP-UNSTRUCTURED-SS-REQUEST-Ack (MSC/VLR to HSS)\nAfter receiving the FACILITY message from the controller UE, the MSC/VLR sends an USSD message towards the gsmSCF via the HSS. It contains the following information.\nFacility (ReturnResult=UNSTRUCTURED-SS-REQUEST(USSD-Data-Coding-Scheme, USSD String))\n17.\tAs the user responds, the gsmSCF stops playing the announcement by sending a DisconnectForwardConnection message to the GMSC.\nNOTE:\tIf the user responds before the timer started in step 7 expires, steps 12, 13 & 17 are skipped.\n18.\tCall Continue/Release Call (HSS to GMSC)\nBased on the response of the controller UE the gsmSCF sends a CAMEL CONTINUE or CAMEL RELEASE message to the GMSC.\n19-20.\tMAP Send Routing Information (SRI)\nOn receipt of the call continue message, the GMSC queries again the HSS for the routing information for the called party but this time with the parameter Suppress T-CSI.\n21.\tMAP SRI Ack\nThe HSS executes the roaming number enquiry procedure and sends this information back to the GMSC within the SRI-Ack containing MSRN=15346787943.\n22.\tCall setup\nThe GMSC starts the normal call setup towards the visited MSC of the called party to establish the call.\n",
                            "figures_meta_data": [],
                            "tables": []
                        }
                    ]
                },
                {
                    "title": "A.3.6\tSignalling flows for interdomain networking",
                    "description": "",
                    "summary": "",
                    "text_content": "",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": [
                        {
                            "title": "A.3.6.1\tIM CN subsystem to CS domain",
                            "text_content": "Figure A.3.6-1 details the signaling flows for inter-domain networking from IM CN to CS domain.\nThe figure depicts interdomain networking (IM) in a 6-1 configuration, with a central controller (CN) and a control center (CS) for interdomain communication. The figure illustrates the interdomain network architecture, including the interdomain communication paths (CN-CS), interdomain routing paths (IM-R), and interdomain routing paths (IM-R). The figure also shows the interdomain network topology, including the interdomain communication paths (IM-R), interdomain routing paths (IM-R), and interdomain routing paths (IM-R).\nFigure A.3.6-1: interdomain networking: (IM CN-CS)\n\n1.\tINVITE request (I-CSCF#2 to S-CSCF#2)\nThe UE initiates the INVITE request with the request-URI of the UE-1 to the IM CN subsystem entities.\nThere is no PNM specific content to this request.\nTable A.3.6-1-1: INVITE request (I-CSCF#2 to S-CSCF#2)\nINVITE sip:PN_user2_public1@home2.net SIP/2.0\nVia:SIP/2.0/UDP icscf2.home2.net;branch=z9hG4bK871y12.1,\nSIP/2.0/UDP scscf1.home1.net;branch=z9hG4bK332b23.1,\nSIP/2.0/UDP pcscf1.visited1.net;branch=z9hG4bK240f34.1,\nSIP/2.0/UDP [5555::aaa:bbb:ccc:ddd]:1357;comp=sigcomp;branch=z9hG4bKnashds7\nMax-Forwards: 65\nRoute: <sip:scscf2.home2.net;lr>\nRecord-Route:<sip:scscf1.home1.net;lr>,<sip:pcscf1.visited.net;lr>\nP-Asserted-Identity: \"John Doe\" <sip:user1_public1@home1.net>\nPrivacy: none\nFrom: <sip:user1_public1@home1.net>;tag=157893\nTo: <sip:PN_user2_public1@home2.net>\nCseq: 127 INVITE\nCall-ID:131243vdse\nSupported: precondition,100rel,gruu,199\nAccept-Contact: *;+g.3gpp.icsi-ref=\"urn%3Aurn-7%3A3gpp-service.ims.icsi.mmtel\"\nP-Asserted-Service: urn:urn-7:3gpp-service.ims.icsi.mmtel\nContact: <sip:user1_public1@home1.net;gr=urn:uuid:f81d4fae-7dec-11d0-a765-00a0c91e6bf6g.3gpp.icsi-ref=\"urn%3Aurn-7%3A3gpp-service.ims.icsi.mmtel\"\nAllow: INVITE, ACK, CANCEL, BYE, PRACK, UPDATE, REFER, MESSAGE\nAccept: application/sdp, application/3gpp-ims+xml\nContent-Type: application/sdp\nContent-length: (…)\n\nv=0\no=- 2987933615 2987933615 IN IP6 5555::aaa:bbb:ccc:ddd\ns=-\nc=IN IP6 5555::aaa:bbb:ccc:ddd\nt=0 0\nm=audio 3456 RTP/AVP 97 96\na=tcap:1 RTP/AVPF\na=pcfg:1 t=1\nb=AS:25.4\na=curr:qos local none\na=curr:qos remote none\na=des:qos mandatory local sendrecv\na=des:qos none remote sendrecv\na=inactive\na=rtpmap:97 AMR\na=fmtp:97 mode-set=0,2,5,7; maxframes=2\na=rtpmap:96 telephone-event\n\n2.\tSIP 100 (Trying) response\nS-CSCF#2 responds to the INVITE#1 request with a 100 Trying provisional response.\n3.\tEvaluation of initial filter criteria\nS-CSCF#2 validates the service profile of this subscriber and evaluates the initial filter criteria.\n4.\tINVITE#1 request (S-CSCF#2 to PNM AS)\nS-CSCF#2 forwards the INVITE#1 request to the PNM AS based upon the initial filter criteria (IFCs).\nTable A.3.6-1-4: INVITE request (S-CSCF#2 to PNM AS)\nINVITE sip:PN_user2_public1@home2.net SIP/2.0\nVia: SIP/2.0/UDP scscf2.home2.net;branch=z9hG4bwt871y12.1,\nSIP/2.0/UDP icscf2.home2.net;branch=z9hG4bK871y12.1,\nSIP/2.0/UDP scscf1.home1.net;branch=z9hG4bK332b23.1,\nSIP/2.0/UDP pcscf1.visited1.net;branch=z9hG4bK240f34.1,\nSIP/2.0/UDP [5555::aaa:bbb:ccc:ddd]:1357;comp=sigcomp;branch=z9hG4bKnashds7\nMax-Forwards: 64\nRoute: <sip:pnmas.home2.net;lr>\nRecord-Route: <sip:scscf2.home1.net;lr>,<sip:scscf1.home1.net;lr>,<sip:pcscf1.visited.net;lr>\nP-Asserted-Identity:\nPrivacy:\nFrom:\nTo:\nCseq:\nCall-ID:\nSupported:\nAccept-Contact:\nP-Asserted-Service:\nContact:\nAllow:\nContent-Type:\nContent-length: (…)\n\nv=\no=\ns=\nc=\nt=\nm=\nm=\na=\na=\nb=\na=\na=\na=\na=\na=\na=\na=\na=\n\n5.\tSIP 100 (Trying) response (PNM AS to S-CSCF#2)\nThe PNM AS responds to the INVITE#1 request with a 100 Trying provisional response.\nThere is no PNM specific content to this response.\n6.\tPNM session redirection service control\nThe PNM AS executes the PNM redirection service control logic in order to route the call to the default UE located in the CS domain.\nIn this example the MSISDN of the called party is +1237654799942\n7.\tSteps 7 to 26 are identical to generic session setup procedure specified in 3GPP TS 24.228 [10].\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "A.3.6.2\tCS domain to IM CN subsystem",
                            "text_content": "Figure A.3.6-2 shows the signaling flows for inter-domain networking from CS domain to IM CN subsystem.\nThe figure depicts a network architecture with inter-domain networking (IDN) capabilities. It illustrates the inter-domain communication paths, including the core switches, optical line terminals (OLTs), and distributed nodes. The layered design aligns with SDN principles, allowing for efficient network management and control.\nFigure A.3.6-2: Inter-domain networking: (CS-IM CN)\n1.\tISUP IAM (coming from the originating PLMN through the CS domain)\nIn this example, a call request (ISUP IAM) makes an entry from the PLMN of the originating user (calling party) into the home PLMN of the terminating user (called party). The first entry point of the PLMN of the terminating user is the Gateway MSC (GMSC). The call request is a form of an ISUP IAM (Initial Address Message) and contains the called party number (MSISDN).\nIn this example the MSISDN of the called party is +12134567897\n2.\tMAP Send Routing Information (SRI) (GMSC to HSS)\nOn receipt of the incoming call request, the GMSC queries the HSS for routing information.\n3.\tRetrieval of PNM subscriber information\nThe HSS provides information including the T-CSI information element that contains information configured for the PNM subscriber, identifying the subscriber as having terminating CAMEL services. The T-CSI IE also includes the gsmSCF address.\n4.\tMAP send routing information acknowledgement (SRI ACK) (HSS to GMSC)\nThe HSS returns the T-CSI information element to the GMSC in response to the query for routing information (SRI). The GMSC now has the address of the gsmSCF.\n5.\tCAMEL IDP (GMSC to gsmSCF)\nThe GMSC triggers a CAMEL activity which results in sending a CAMEL IDP message to the GSM service control function (gsmSCF). The CAMEL IDP message contains at least:\n-\tthe calling party number;\n-\tthe called party number;\n-\tthe type of call; and\n-\tinformation from the T-CSI IE received by the GMSC in the SRI ACK from the HSS. This includes the CAMEL service key.\n6.\tReroute to IMS determination\nThe gsmSCF invokes PNM redirection service logic to determine whether the call needs to be rerouted to the default UE located in the IM CN subsystem for UE redirection.\n7.\tCAMEL CONNECT (gsmSCF to GMSC)\nThe CAMEL service function causes the gsmSCF to respond to the CAMEL IDP message with a CAMEL CONNECT message containing\nMSISDN of default UE: 12134567897\n8.\tIAM#2(GMSC to MGCF)\nThe GMSC generates the IAM#2 containing the MSISDN of the default UE at which the call is to be redirected and signals it to the MGCF.\nMSISDN of default UE: 12134567897\n9.\tSIP INVITE (MGCF to S-CSCF)\nThe MGCF interworks the IAM into the appropriate SIP message and initiates the SIP INVITE request towards the S-CSCF via the intermediate IM CN subsystem entities.\n(MGCF towards the S-CSCF through the intermediate IM CN subsystem entities) – see example in table A.3.Y1\nTable A.3.6-2-9: SIP INVITE request (MGCF to S-CSCF)\nINVITE tel:+12134567897 SIP/2.0\nVia: SIP/2.0/UDP mgcf.home1.net;branch=z9hG4bK779s24.0\nMax-Forwards: 69\nRoute: <sip:icscf1.home1.net;lr>\nP-Asserted-Identity: <tel:+1-212-555-1111>\nP-Charging-Vector: icid-value=\"AyretyU0dm+6O2IrT5tAFrbHLso=023551024\"; orig-ioi=home1.net\nPrivacy: none\nFrom: <tel:+1-212-555-1111>;tag=171828\nTo: <tel:+ 12134567897>\nCall-ID: cb03a0s09a2sdfglkj490333\nCseq: 127 INVITE\nSupported: precondition, 100rel\nAccept-Contact: *;+g.3gpp.icsi-ref=\"urn%3Aurn-7%3A3gpp-service.ims.icsi.mmtel\"\nP-Asserted-Service: urn:urn-7:3gpp-service.ims.icsi.mmtel\nContact: <sip:mgcf1.home1.net>;+g.3gpp.icsi-ref=\"urn%3Aurn-7%3A3gpp-service.ims.icsi.mmtel\"\nAllow: INVITE, ACK, CANCEL, BYE, PRACK, UPDATE\nContent-Type: application/sdp\nContent-Length: (…)\n\nv=0\no=- 2987933615 2987933615 IN IP6 5555::aaa:bbb:ccc:ddd\ns=-\nc=IN IP6 5555::aaa:bbb:ccc:ddd\nt=0 0\nm=audio 3456 RTP/AVP 97 96\na=tcap:1 RTP/AVPF\na=pcfg:1 t=1\nb=AS:25.4\na=curr:qos local sendrecv\na=curr:qos remote none\na=des:qos mandatory local sendrecv\na=des:qos none remote sendrecv\na=inactive\na=rtpmap:97 AMR\na=fmtp:97 mode-set=0,2,5,7; maxframes=2\na=rtpmap:96 telephone-event\n\n10.\tSIP 100 (Trying) response (S-CSCF to MGCF via intermediate IM CN subsystem entities)\nThe S-CSCF responds to the intermediate IM CN subsystem entities with a SIP 100 (Trying) response.\n11. INVITE – S-CSCF forwards the INVITE request to the default UE.\n12.\tSteps 12 to 21 are identical to generic session setup procedure specified in 3GPP TS 24.228 [10].\n",
                            "figures_meta_data": [],
                            "tables": []
                        }
                    ]
                }
            ]
        },
        {
            "title": "A.4\tExample XML document",
            "description": "",
            "summary": "",
            "tables": [],
            "figures_meta_data": [],
            "subsections": [
                {
                    "title": "A.4.1\tIntroduction",
                    "description": "",
                    "summary": "",
                    "text_content": "Table A.4.1-1 shows an example of an XML document compliant to the XML schema defined in annex B. The example shows the PNM configuration for multiple PN UEs sharing the same public user identity.\nNOTE:\tThe PN UEs are uniquely identified by their PNUENames. The association of PNUENames with PN UE devices has to be defined by the PNM operator and is out of scope of this specification.\nAll line feeds within element contents are for display purposes only.\nTable A.4.1-1: Example XML document\n<?xml version=\"1.0\" encoding=\"utf-8\"?>\n<PNConfiguration xxmlns=\"uri:3gpp:pnm\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\">\n<UERedirection UriOfRedirectedUser=\"sip:PN_user1_public1@home1.com\">\n<RedirectedUserID>\n<PNUEID>sip:PN_user1_public1@home1.com</PNUEID>\n<PNUEName>PN_1</PNUEName>\n</RedirectedUserID>\n<RedirectingUserID id=1>\n<PNUEID>sip:PN_user1_public1@home1.com</PNUEID>\n<PNUEName>PN_2</PNUEID>\n<RedirectionLevel>application</RedirectionLevel>\n<RedirectionPrio>1</RedirectionPrio>\n</RedirectingUserID>\n<RedirectingUserID id=2>\n<PNUEID>sip:PN_user1_public1@home1.com</PNUEID>\n<PNUEName>PN_3</PNUEName>\n<RedirectionLevel>application</RedirectionLevel>\n<RedirectionPrio>2</RedirectionPrio>\n</RedirectingUserID>\n</UERedirection>\n<AccessControl UriOfControllerUE=\"sip:PN_user1_public1@home1.com\">\n<ControllerUE>\n<PNUEID>sip:PN_user1_public1@home1.com</PNUEID>\n<PNUEName>PN_1</PNUEID>\n</ControllerUE>\n<ControlleeUE id=1>\n<PNUEID>sip:PN_user1_public1@home1.com</PNUEID>\n<PNUEName>PN_2</PNUEName>\n<PNAccessControlList>sip:user2_public1@home1.com sip: user3_public1@home1.com sip:user4_public1@home1.com </PNAccessControlList>\n<PNAccessControlType>Controller</PNAccessControlType>\n</ControlleeUE>\n<ControlleeUE id=2>\n<PNUEID>sip:PN_user1_public1@home1.com</PNUEID>\n<PNUEName>PN_3</PNUEName>\n<PNAccessControlList>sip:user5_public1@home1.com</PNAccessControlList>\n<PNAccessControlType>NonController</PNAccessControlType>\n</ControlleeUE>\n</AccessControl>\n<NameofPNUE>\n<PNUEID>sip:PN_user1_public1@home1.com</PNUEID>\n<UEName id=1>\n<Name>PN_1</Name>\n</UEName>\n<UEName id=2>\n<Name>PN_2</Name>\n</UEName>\n<UEName id=3>\n<Name>PN_3</Name>\n</UEName>\n</NameofPNUE>\n</PNConfiguration>\n\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                }
            ]
        },
        {
            "title": "B.1\tXML elements structure",
            "description": "Table B.1-1 below shows the XML elements structure hierarchically.\nTable B.1-1: XML elements structure\n\n",
            "summary": "",
            "tables": [
                {
                    "description": "Table B.1-1: XML elements structure",
                    "table number": 1,
                    "summary": "",
                    "name": ""
                }
            ],
            "figures_meta_data": [],
            "subsections": []
        },
        {
            "title": "B.2\tXML schema for PNM",
            "description": "Table B.2-1 contains the XML schema definition for an XML document for the PN configuration and query over the Ut interface.\nTable B.2-1: XML schema for PNM\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<xs:schema targetNamespace=\"uri:3gpp:pnm\"\nxmlns=\"uri:3gpp:pnm\"\nxmlns:xs=\"http://www.w3.org/2001/XMLSchema\"\nelementFormDefault=\"qualified\" attributeFormDefault=\"unqualified\">\n\n<!-- This import brings in the XML language attribute xml:lang-->\n<xs:import namespace=\"http://www.w3.org/XML/1998/namespace\"\nschemaLocation=\"http://www.w3.org/2001/xml.xsd\"/>\n\n<!-- The PNConfiguration element -->\n<xs:element name=\"PNConfiguration\" type=\"pnConfRequest\"/>\n<xs:element name=\"PNUEID\" type=\"xs:anyURI\"/>\n<xs:element name=\"PNUEName\" type=\"xs:string\"/>\n\n<!-- The whole PNM PN-configuration specific data set  -->\n<xs:complexType name=\"pnConfRequest\">\n<xs:sequence minOccurs=\"0\" maxOccurs=\"unbounded\">\n<xs:choice>\n<xs:element name=\"UERedirection\" type=\"UERedirectionType\"/>\n<xs:element name=\"AccessControl\" type=\"AccessControlType\"/>\n<xs:element name=\"NameofPNUE\" type=\"PNUENameType\"/>\n<xs:any namespace=\"##other\" processContents=\"lax\" minOccurs=\"0\" maxOccurs=\"unbounded\"/>\n</xs:choice>\n</xs:sequence>\n<xs:any namespace=\"##other\" processContents=\"lax\" minOccurs=\"0\" maxOccurs=\"unbounded\"/>\n<xs:anyAttribute namespace=\"##other\" processContents=\"lax\">\n</xs:complexType>\n\n<!-- The UERedirection data set  -->\n<xs:complexType name=\"UERedirectionType\">\n<xs:sequence>\n<xs:element name=\"RedirectedUserID\" maxOccurs=\"1\">\n<xs:complexType>\n<xs:sequence>\n<xs:element ref=\"pnm:PNUEID\"/>\n<xs:element ref=\"pnm:PNUEName\"/>\n<xs:any namespace=\"##other\" processContents=\"lax\" minOccurs=\"0\" maxOccurs=\"unbounded\"/>\n</xs:sequence>\n<xs:any namespace=\"##other\" processContents=\"lax\" minOccurs=\"0\" maxOccurs=\"unbounded\"/>\n</xs:complexType>\n<xs:anyAttribute namespace=\"##other\" processContents=\"lax\">\n</xs:element>\n<xs:element name=\"RedirectingUserID\" minOccurs=\"0\" maxOccurs=\"unbounded\">\n<xs:complexType>\n<xs:sequence>\n<xs:element ref=\"pnm:PNUEID\"/>\n<xs:element ref=\"pnm:PNUEName\"/>\n<xs:element name=\"RedirectionLevel\" type=\"RedirectionLevelType\" minOccurs=\"0\"/>\n<xs:element name=\"RedirectionPrio\" type=\"positiveInteger\" minOccurs=\"0\"/>\n<xs:any namespace=\"##other\" processContents=\"lax\" minOccurs=\"0\" maxOccurs=\"unbounded\"/>\n</xs:sequence>\n<xs:any namespace=\"##other\" processContents=\"lax\" minOccurs=\"0\" maxOccurs=\"unbounded\"/>\n<xs:attribute name=\"id\" type=\"xs:positiveInteger\" use=\"required\"/>\n<xs:anyAttribute namespace=\"##other\" processContents=\"lax\">\n</xs:complexType>\n</xs:element>\n</xs:sequence>\n<xs:attribute name=\"UriOfRedirectedUser\" type=\"xs:anyURI\" use=\"required\"/>\n<xs:anyAttribute namespace=\"##other\" processContents=\"lax\">\n</xs:complexType>\n\n<!-- The AccessControl data set  -->\n<xs:complexType name=\"AccessControlType\">\n<xs:sequence>\n<xs:element name=\"ControllerUE\" maxOccurs=\"1\">\n<xs:complexType>\n<xs:sequence>\n<xs:element ref=\"pnm:PNUEID\"/>\n<xs:element ref=\"pnm:PNUEName\"/>\n<xs:any namespace=\"##other\" processContents=\"lax\" minOccurs=\"0\" maxOccurs=\"unbounded\"/>\n</xs:sequence>\n<xs:any namespace=\"##other\" processContents=\"lax\" minOccurs=\"0\" maxOccurs=\"unbounded\"/>\n<xs:anyAttribute namespace=\"##other\" processContents=\"lax\"/>\n</xs:complexType>\n</xs:element>\n<xs:element name=\"ControlleeUE\" minOccurs=\"0\" maxOccurs=\"unbounded\">\n<xs:complexType>\n<xs:sequence minOccurs=\"0\" maxOccurs=\"unbounded\">\n<xs:element ref=\"pnm:PNUEID\"/>\n<xs:element ref=\"pnm:PNUEName\"/>\n<xs:any namespace=\"##other\" processContents=\"lax\" minOccurs=\"0\" maxOccurs=\"unbounded\"/>\n</xs:sequence>\n<xs:element name=\"PNAccessControlList\" type=\"ACListType\" minOccurs=\"0\"/>\n<xs:element name=\"PNAccessControlType\" type=\"ACType\" minOccurs=\"0\"/>\n<xs:any namespace=\"##other\" processContents=\"lax\" minOccurs=\"0\" maxOccurs=\"unbounded\"/>\n<xs:attribute name=\"id\" type=\"xs:positiveInteger\" use=\"required\"/>\n<xs:anyAttribute namespace=\"##other\" processContents=\"lax\"/>\n</xs:complexType>\n</xs:element>\n</xs:sequence>\n<xs:attribute name=\"UriOfControllerUE\" type=\"xs:anyUIR\" use=\"required\"/>\n<xs:anyAttribute namespace=\"##other\" processContents=\"lax\"/>\n</xs:complexType>\n\n<!-- The PNUEName data set  -->\n<xs:complexType name=\"PNUENameType\">\n<xs:element ref=\"pnm:PNUEID\" maxOccurs=\"1\"/>\n<xs:sequence maxOccurs=\"unbounded\">\n<xs:element name=\"UEName\" type=\"UENameType\"/>\n<xs:any namespace=\"##other\" processContents=\"lax\" minOccurs=\"0\" maxOccurs=\"unbounded\"/>\n</xs:sequence>\n<xs:any namespace=\"##other\" processContents=\"lax\" minOccurs=\"0\" maxOccurs=\"unbounded\"/>\n<xs:anyAttribute namespace=\"##other\" processContents=\"lax\"/>\n</xs:complexType>\n\n<xs:complexType name=\"UENameType\">\n<xs:sequence maxOccurs=\"unbounded\">\n<xs:element name=\"Name\" type=\"xs:string\"/>\n<xs:any namespace=\"##other\" processContents=\"lax\" minOccurs=\"0\" maxOccurs=\"unbounded\"/>\n</xs:sequence>\n<xs:any namespace=\"##other\" processContents=\"lax\" minOccurs=\"0\" maxOccurs=\"unbounded\"/>\n<xs:attribute name=\"id\" type=\"xs:positiveInteger\" use=\"required\"/>\n<xs:anyAttribute namespace=\"##other\" processContents=\"lax\"/>\n</xs:complexType>\n\n<!-- The Simple Types -->\n<xs:simpleType name=\"RedirectionLevelType\">\n<xs:restriction base=\"xs:string\">\n<xs:enumeration value=\"application\"/>\n<xs:enumeration value=\"component\"/>\n</xs:restriction>\n</xs:simpleType>\n\n<xs:simpleType name=\"RedirectionPrioType\">\n<xs:restriction base=\"xs:positiveInteger\">\n<xs:enumeration value=\"1\"/>\n<xs:enumeration value=\"2\"/>\n<xs:enumeration value=\"3\"/>\n</xs:restriction>\n</xs:simpleType>\n\n<xs:simpleType name=\"ACListType\">\n<xs:list itemType=\"xs:string\"/>\n</xs:simpleType>\n\n<xs:simpleType name=\"ACType\">\n<xs:restriction base=\"xs:string\">\n<xs:enumeration value=\"Controller\"/>\n<xs:enumeration value=\"NonController\"/>\n</xs:restriction>\n</xs:simpleType>\n</xs:schema>\n\nNOTE 1:\tThe <xs:any> and <xs:anyAttribute> elements within the complex types allow for compatible standard extensions in future releases.\nNOTE 2:\tThis document supports three values of the priority for the <RedirectionPrioType> element (High, medium and low).\nXCAP requires an application usage to fulfil a number of steps in the definition of such application usage. The remainder of this annex specifies the required definitions of the PNM XCAP application usage.\nApplication Unique ID (AUID): Each XCAP application usage is associated with a unique name called the Application Unique ID (AUID). The AUID defined by the PNM application usage falls into the vendor-proprietary namespace of XCAP AUID, where 3GPP is considered a vendor.\nThe AUID allocated to the PNM XCAP application usage is:\npnm.3gpp.org\nDefault namespace: XCAP requires application usages to declare the default namespace. The default namespace of the PNM XCAP application usage is:\nhttp://uri.3gpp.org/params/xml/pnm/xcap\nMIME type: The MIME type of PNM XML documents is:\napplication/pnm+xml\nNaming conventions: By default, a PNM XML document is stored under the user's Home Directory (which is located under the \"users\" sub-tree). In order to facilitate the manipulation of a PNM XML document, the present document defines a default XML file name:\npnm.xml\nXCAP root URI: The XCAP root defines all contexts in which all XCAP resources defined by the operator (e.g., an operator with a domain name of example.com) exist and the corresponding XCAP root URI is:\nxcap.example.com\nXCAP User Identify (XUI): Each user known to the XACP server is associated with a user name, called XCAP User Identifier (XUI), which is pre-configured at the PN UE. The XUI for PNM can be the shared public user identity used of the PN user.\nValidation Constraints: The <PNUEName> child elements of all <RedirectedUserID> and <RedirectingUserID> child elements of a <UERedirection> element shall have different values.\nThe <PNUEName> child elements of all <ControllerUE> and <ControlleeUE> child elements of an <AccessControl> element shall have different values.\nData Semantics: Data semantics are defined above.\nResource Interdependencies: There are no resource interdependencies in this application usage beyond those defined by the schema.\nAuthorization Policies: This application usage does not change the default authorization policy defined by XCAP.\n\n\n",
            "summary": "",
            "tables": [
                {
                    "description": "",
                    "table number": 2,
                    "summary": "",
                    "name": ""
                },
                {
                    "description": "",
                    "table number": 3,
                    "summary": "",
                    "name": ""
                }
            ],
            "figures_meta_data": [],
            "subsections": []
        }
    ]
}