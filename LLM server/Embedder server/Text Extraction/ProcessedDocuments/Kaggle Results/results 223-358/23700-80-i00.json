{
    "document_name": "23700-80-i00.docx",
    "content": [
        {
            "title": "Foreword",
            "description": "This Technical Report has been produced by the 3rd Generation Partnership Project (3GPP).\nThe contents of the present document are subject to continuing work within the TSG and may change following formal TSG approval. Should the TSG modify the contents of the present document, it will be re-released by the TSG with an identifying change of release date and an increase in version number as follows:\nVersion x.y.z\nwhere:\nx\tthe first digit:\n1\tpresented to TSG for information;\n2\tpresented to TSG for approval;\n3\tor greater indicates TSG approved document under change control.\ny\tthe second digit is incremented for all changes of substance, i.e. technical enhancements, corrections, updates, etc.\nz\tthe third digit is incremented when editorial only changes have been incorporated in the document.\nIn the present document, modal verbs have the following meanings:\nshall\tindicates a mandatory requirement to do something\nshall not\tindicates an interdiction (prohibition) to do something\nThe constructions \"shall\" and \"shall not\" are confined to the context of normative provisions, and do not appear in Technical Reports.\nThe constructions \"must\" and \"must not\" are not used as substitutes for \"shall\" and \"shall not\". Their use is avoided insofar as possible, and they are not used in a normative context except in a direct citation from an external, referenced, non-3GPP document, or so as to maintain continuity of style when extending or modifying the provisions of such a referenced document.\nshould\tindicates a recommendation to do something\nshould not\tindicates a recommendation not to do something\nmay\tindicates permission to do something\nneed not\tindicates permission not to do something\nThe construction \"may not\" is ambiguous and is not used in normative elements. The unambiguous constructions \"might not\" or \"shall not\" are used instead, depending upon the meaning intended.\ncan\tindicates that something is possible\ncannot\tindicates that something is impossible\nThe constructions \"can\" and \"cannot\" are not substitutes for \"may\" and \"need not\".\nwill\tindicates that something is certain or expected to happen as a result of action taken by an agency the behaviour of which is outside the scope of the present document\nwill not\tindicates that something is certain or expected not to happen as a result of action taken by an agency the behaviour of which is outside the scope of the present document\nmight\tindicates a likelihood that something will happen as a result of action taken by some agency the behaviour of which is outside the scope of the present document\nmight not\tindicates a likelihood that something will not happen as a result of action taken by some agency the behaviour of which is outside the scope of the present document\nIn addition:\nis\t(or any other verb in the indicative mood) indicates a statement of fact\nis not\t(or any other negative verb in the indicative mood) indicates a statement of fact\nThe constructions \"is\" and \"is not\" do not indicate requirements.\n",
            "summary": "",
            "tables": [],
            "figures_meta_data": [],
            "subsections": []
        },
        {
            "title": "1\tScope",
            "description": "This Technical Report will study, based on requirements as specified in clauses 6.40 and 7.10 of TS 22.261 [2], 5GS assistance to support Artificial Intelligence (AI) / Machine Learning (ML) model distribution, transfer, training for various applications, e.g. video/speech recognition, robot control, automotive, etc.\nThe scope of this study is on how the AI/ML service providers could leverage 5GS as the platform to provide the intelligent transmission support for application layer AI/ML operation based on the following objectives.\n1.\tStudy the possible architectural and functional extensions to support the Application layer AI/ML operations defined in TS 22.261 [2], more specifically:\na.\tSupport monitoring of network resource utilization in the 5G system relevant to the UE in order to support Application AI/ML operation.\nb.\tWhether and how to extend 5GS information exposure for 5GC NF(s) to expose UE and/or network conditions and performance prediction (e.g. location, QoS, load, congestion, etc.) to the UE and/or to the authorized 3rd party to assist the Application AI/ML operation.\nc.\tEnhancements of external parameter provisioning to 5GC (e.g. expected UE activity behaviours, expected UE mobility, etc.) based on Application AI/ML operation.\nd.\tInvestigate the enhancements of other 5GC features that could be used to assist the Application AI/ML operations as described in clause 6.40 of TS 22.261 [2].\n2.\tStudy possible QoS, Policy enhancements to support Application AI/ML operational traffic while supporting regular (non Application-AI/ML) 5GS user traffic.\n3.\tStudy whether and how 5GS provides assistance to AF and the UE for the AF and UE to manage the Federated Learning (FL) operation and model distribution/redistribution (i.e. FL members selection, group performance monitoring, adequate network resources allocation and guarantee) to facilitate collaborative Application AI/ML based Federated Learning operation between the application clients running on the UEs and the Application Servers.\n",
            "summary": "",
            "tables": [],
            "figures_meta_data": [],
            "subsections": []
        },
        {
            "title": "2\tReferences",
            "description": "The following documents contain provisions which, through reference in this text, constitute provisions of the present document.\n-\tReferences are either specific (identified by date of publication, edition number, version number, etc.) or non-specific.\n-\tFor a specific reference, subsequent revisions do not apply.\n-\tFor a non-specific reference, the latest version applies. In the case of a reference to a 3GPP document (including a GSM document), a non-specific reference implicitly refers to the latest version of that document in the same Release as the present document.\n[1]\t3GPP TR 21.905: \"Vocabulary for 3GPP Specifications\".\n[2]\t3GPP TS 22.261: \"Service requirements for the 5G system; Stage 1\".\n[3]\t3GPP TS 23.501: \"System Architecture for the 5G System; Stage 2\".\n[4]\t3GPP TS 23.502: \"Procedures for the 5G System; Stage 2\".\n[5]\t3GPP TS 23.503: \"Policy and charging control framework for the 5G System (5GS); Stage 2\".\n[6]\t3GPP TS 23.288: \"Architecture enhancements for 5G System (5GS) to support network data analytics services\".\n[7]\t3GPP TS 26.531: \"Data Collection and Reporting; General Description and Architecture\".\n[8]\t3GPP TR 22.874: \"Study on traffic characteristics and performance requirements for AI/ML model transfer in 5GS\".\n[9]\t3GPP TS 29.514: \"5G System; Policy Authorization Service; Stage 3\".\n[10]\t3GPP TS 23.548: \"5G System Enhancements for Edge Computing; Stage 2\".\n[11]\t3GPP TR 23.700-81: \"Study of Enablers for Network Automation for 5G System (5GS); Phase 3\".\n[12]\t3GPP TS 37.320: \"Radio measurement collection for Minimization of Drive Tests (MDT); Overall description; Stage 2\".\n[13]\t3GPP TS 24.301: \"Non-Access-Stratum (NAS) protocol for Evolved Packet System (EPS); Stage 3; Stage 3\".\n[14]\t3GPP TS 27.007: \"AT command set for User Equipment (UE)\".\n[15]\t3GPP TS 29.554: \"5G System; Background Data Transfer Policy Control Service; Stage 3\".\n",
            "summary": "",
            "tables": [],
            "figures_meta_data": [],
            "subsections": []
        },
        {
            "title": "3\tDefinitions of terms and abbreviations",
            "description": "",
            "summary": "",
            "tables": [],
            "figures_meta_data": [],
            "subsections": [
                {
                    "title": "3.1\tTerms",
                    "description": "",
                    "summary": "",
                    "text_content": "For the purposes of the present document, the terms given in TR 21.905 [1] and the following apply. A term defined in the present document takes precedence over the definition of the same term, if any, in TR 21.905 [1].\n\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "3.2\tAbbreviations",
                    "description": "",
                    "summary": "",
                    "text_content": "For the purposes of the present document, the abbreviations given in TR 21.905 [1] and the following apply. An abbreviation defined in the present document takes precedence over the definition of the same abbreviation, if any, in TR 21.905 [1].\nAI\tArtificial Intelligence\nML\tMachine Learning\nFL\tFederated Learning\n\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                }
            ]
        },
        {
            "title": "4\tArchitectural Requirements and Assumptions",
            "description": "",
            "summary": "",
            "tables": [],
            "figures_meta_data": [],
            "subsections": [
                {
                    "title": "4.1\tArchitectural Requirements",
                    "description": "",
                    "summary": "",
                    "text_content": "The Application AI/ML operation logic is controlled by an Application Function (AF).\nAny AF request to the 5G System in the context of 5GS assistance to Application AI/ML operation should be authorized by the 5GC.\nThe 5G System should ensure the performance KPIs specified in TS 22.261 [2] clause 7.10, to support the Application AI/ML traffic.\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "4.2\tArchitectural Assumptions",
                    "description": "",
                    "summary": "",
                    "text_content": "To support AI/ML based services/applications via 5GS, the following architectural assumptions are made in the present study:\n-\tIn Rel-18, an Application AI/ML operation is conducted within a single slice, i.e. all UEs which are involved in a given Application AI/ML operation are served by the same S-NSSAI and the Application Function (AF) belongs to this S-NSSAI.\n-\tIn Rel-18, roaming is not supported, i.e. inter PLMN coordination aspects will not be studied.\n-\t5GC can differentiate Application Layer AI/ML traffic by using existing mechanisms defined in TS 23.501 [3].\nNOTE 1:\tThe 5G System architecture to support the Application AI/ML operation in the current release should not preclude the support of roaming in a future release.\nNOTE 2:\tWhether 5GC needs to be aware of the Application Layer AI/ML operation type is documented in clause 8.\nNOTE 3:\tDifferent KPI requirements, as described in the subclause 7.10 of the TS 22.261 [2], need to be taken into account for AI/ML model transfer in 5GS. How to map these KPI requirements into 5GS QoS parameters is discussed under conclusions for KI#6.\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "4.3\tReference Architecture",
                    "description": "",
                    "summary": "",
                    "text_content": "The architecture, framework, definitions and terminology specified in TS 23.501 [3], TS 23.502 [4], TS 23.503 [5] and TS 23.288 [6] are the baselines for the present study.\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                }
            ]
        },
        {
            "title": "5\tKey Issues",
            "description": "",
            "summary": "",
            "tables": [],
            "figures_meta_data": [],
            "subsections": [
                {
                    "title": "5.1\tKey Issue #1: Monitoring of network resource utilization for support of Application AI/ML operations",
                    "description": "",
                    "summary": "",
                    "text_content": "This KI addresses WT#1.1a. To support AI/ML based services/applications, 5GS network resources are utilized for AI/ML model and data distribution, transfer and/or training for various applications.\nTo monitor the network resource utilization in the 5GS relevant to the UE's performance for supporting AI/ML based services/applications, the following aspects are to be studied:\n-\tHow to monitor network resource utilization relevant to the UE's performance (e.g. such as the data throughput provided to the UE) for supporting Application AI/ML model/data distribution and sharing related operations, including:\n-\tWhether and how to measure network resource utilization relevant to the UE's performance (as described in TS 22.261 [2]) in the 5G system to support Application AI/ML traffic.\nNOTE:\tNetwork resource utilization measurements relevant to UE's performance are done by the network, additional UE measurements are out of scope of this study. Neither Uu nor any AN impacts are in the scope of this study.\n-\tWhether and what enhancements (including new monitoring events) are required to existing monitoring mechanisms (e.g. monitoring capability as specified in clause 5.20 of TS 23.501 [3]) to capture and/or predict network resource utilization relevant to UE's performance for traffic related to Application AI/ML operations.\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "5.2\tKey Issue #2: 5GC information exposure to UE",
                    "description": "",
                    "summary": "",
                    "text_content": "As documented in SA WG1 TS 22.261 [2], the application layer AI/ML model can be downloaded from AF/AS to UE to facilitate local intelligence, i.e. the UE can do inference and make decisions locally, for the use cases such as image recognition, speech recognition, media quality enhancement, etc. The UE may need information from the 5GC to assist its local decision.\nThis Key Issue is related to WT#1.1b, and aims at studying whether and how to enhance the 5GC to expose information to the UE to facilitate its Application AI/ML operation (e.g. Model Training, Splitting and inference feedback etc.):\n-\tWhether and for which purpose there is a need for 5GC to expose information or data analytics to the UE, and what are the information or data analytics that can be provided by 5GC to the UE to assist the Application AI/ML operation at the UE side.\n-\tHow the 5GC exposes such information or data analytics to the UE.\nNOTE:\tSA WG1 feedback on exposure of network information to the UE and security analysis by SA3 will be taken into account before the conclusion of this Key Issue.\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "5.3\tKey Issue #3: 5GC Information Exposure to authorized 3rd party for Application Layer AI / ML Operation",
                    "description": "",
                    "summary": "",
                    "text_content": "This KI is related to WT#1.1b.\nIt is required for 5GC to expose different types of assistance information to AF for AI / ML operation. This KI will study the following aspects:\n-\tWhether and what assistance information and events are exposed from 5GS to AF, more specifically, the prediction of UE and/or network conditions and performance (e.g. location, QoS, load, Congestion, etc.) as described in TS 22.261 [2]? How?\nNOTE:\tUser consent is assumed only for UE-related information. Coordination with SA WG3 on exposing UE-related information to an AF is required to ensure privacy and security requirements are met.\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "5.4\tKey Issue #4: Enhancing External Parameter Provisioning",
                    "description": "",
                    "summary": "",
                    "text_content": "This key issue is related to Objective 1.c.\nAs outlined in clause 4.15.6 of TS 23.502 [4], provisioning capability allows an external party to provision the information, such as expected UE behaviour and service specific parameters to 5G network functions. For example, the expected UE behavioural information consists of information on expected UE movement and communication characteristics. Provisioned data can be used by the other NFs. The Expected UE Behaviour parameters characterise the foreseen behaviour of a UE or a group of UEs.\nHowever, it is to be studied how external parameter provisioning to the 5GC can be enhanced for the assistance to Application AI/ML operation.\nIn order to enhance external parameter provisioning to 5GC for the assistance to Application AI/ML operation, the following needs to be studied:\n-\tWhether and what additional parameters can be provisioned to 5GC by an external party for the assistance to Application AI/ML operation.\n-\tHow additional parameters are provisioned to 5GC by an external party.\n-\tHow provisioned parameters are retrieved or maintained or used by 5GC NFs (e.g. UDM, AMF or SMF).\nNOTE:\tPrivacy aspects will be handled by SA WG3.\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "5.5\tKey Issue #5: 5GC Enhancements to enable Application AI/ML Traffic Transport",
                    "description": "",
                    "summary": "",
                    "text_content": "This key issue is to address WT#1.1d.\nDifferent levels of interactions are expected between UE and AF as AI/ML endpoints based on TS 22.261 [2] to exchange AI/ML model, intermediate data, local training data, inference results or model performance as Application AI/ML traffic(s).\nThe following aspects are to be studied, in regard to how to assist the Application AI/ML operation:\n-\tWhether and how the existing 5GC data transfer/traffic routing mechanisms are re-used or enhanced to support the transmission of the Application AI/ML traffic(s) over 5GS between AI/ML endpoints (i.e. UE and AF)?\nNOTE 1:\tPrivacy aspects will be handled by SA WG3.\n-\tWhether new 3GPP charging mechanisms are required for identification and charging of Application AI/ML traffic over the user plane that cannot be attributed or charged to the end user?\nNOTE 2:\tCharging aspects will be done in collaboration with SA WG5.\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "5.6\tKey Issue #6: QoS and Policy enhancements",
                    "description": "",
                    "summary": "",
                    "text_content": "This key issue is applicable to Objective 2 (i.e. WT#1.2) which addresses QoS and Policy enhancements to support Application AI/ML operation traffic for AI/ML model transfer in 5GS, to address SA WG1 requirement as specified in TS 22.261 [2].\nAs defined in requirements specified in TS 22.261 [2], the 5G system can at least support three types of AI/ML operations:\n-\tAI/ML operation splitting between AI/ML endpoints.\n-\tAI/ML model/data distribution and sharing over 5G system.\n-\tDistributed/Federated Learning over 5G system.\nIn order to conclude whether the 5G system meets QoS performance requirements as specified in clause 7.10 of TS 22.261 [2], this study needs to determine whether any additional QoS and/or policy enhancements to the 5G system are required\nTherefore, this key issue will study solutions on below aspect(s) for the possible QoS and Policy enhancements to support Application AI/ML operation:\n-\tWhether the current QoS model for 5GS defined in clause 5.7 of TS 23.501 [3] needs to be enhanced to support performance KPIs defined in clause 7.10 of TS 22.261 [2]. If new QoS parameters are needed whether the existing Policy framework in TS 23.503 [5] needs to be enhanced to account for the new QoS parameters and how.\n-\tWhether the current QoS model for 5GS defined in clause 5.7 of TS 23.501 [3] needs to be enhanced to account for the following types of application AI/ML traffic:\ni)\tdata collected for training and inference and shared by the application server or UE over the 5GS; and\nii)\tAI/ML models trained by the application server or UE shared over the 5GS.\n-\tWhether the current QoS Monitoring can be used to expose, to an authorized 3rd party, monitoring and status information, regarding resource utilization of network services associated to this 3rd party AI/ML application, as specified in clause 6.40 of TS 22.261 [2]. If not, what enhancements are needed.\n-\tWhether the current QoS model defined in clause 5.7 of TS 23.501 [3] and policy framework defined in TS 23.503 [5] provides support to assist the application AI/ML operation to be informed on predictions of changing network conditions (i.e. bitrate, latency, reliability) in a timely manner. If not, what enhancements are needed.\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "5.7\tKey Issue #7: 5GS Assistance to Federated Learning Operation",
                    "description": "",
                    "summary": "",
                    "text_content": "This KI is to study whether and how 5GS provides assistance to AF and the UE for the AF and UE to manage the FL operation and model distribution/redistribution (i.e. FL member selection, group performance monitoring, adequate network resources allocation and guarantee) to facilitate collaborative Application AI/ML based Federated Learning operation between the application clients running on the UEs and the Application Servers.\nIn order to provide assistance to the AF and the UE for FL operations, it is proposed to study the following aspects:\nOn assistance to selection of UEs for FL operation:\n-\tWhether, how and what information provided by 5GC to the AF can help the AF to select and manage the group of UEs which will be part of FL operation.\nNOTE:\tThe FL group management should be controlled and managed by the AF.\n-\tWhether, how and what information is required by the 5GC in order to assist the AF for selecting and managing the group of UEs which will be part of FL operation.\nOn performance monitoring/exposure:\n-\tHow to monitor and expose a UE or a group of UEs performance (e.g. aggregated QoS parameters) as described in TS 22.261 [2] related to FL operations.\n-\tWhether and what existing or new monitoring events (e.g. QoS, location, load, congestion) are required to capture specific System Performance and Predictions for traffic related to AI/ML operations for FL operation.\nOn FL performance:\n-\tHow to assist AF to increase the FL performance (e.g. to manage latency divergence) among UEs when the application server receives the local ML model training information from different UEs in order to perform global model update.\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                }
            ]
        },
        {
            "title": "6\tSolutions",
            "description": "",
            "summary": "",
            "tables": [],
            "figures_meta_data": [],
            "subsections": [
                {
                    "title": "6.0\tMapping Solutions to Key Issues",
                    "description": "",
                    "summary": "",
                    "text_content": "Table 6.0-1: Mapping of Solutions to Key Issues\n\n",
                    "tables": [
                        {
                            "description": "Table 6.0-1: Mapping of Solutions to Key Issues",
                            "table number": 3,
                            "summary": "",
                            "name": ""
                        }
                    ],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "6.1\tSolution #1: 5GS Monitoring Capabilities for AI/ML-based Services",
                    "description": "",
                    "summary": "",
                    "text_content": "",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": [
                        {
                            "title": "6.1.1\tDescription",
                            "text_content": "This solution proposes 5GS monitoring capabilities to support AI/ML-based services as well as AI/ML operations (i.e. model splitting, model sharing, and distributed/federated learning, as described in TS 22.261 [2]) over the 5GS. The solution i) leverages aspects of the QoS monitoring capabilities for URLLC services relevant to AI/ML-based services, and ii) proposes additional monitoring features.\nIt is proposed that the AF hosting the AI/ML application server monitors packet delay related to the application AI/ML operation via NEF by making use of the 5GS network exposure feature described in clause 4.15.6.6 of TS 23.502 [4] where QoS monitoring capabilities can be requested by the AF for URLLC services via a procedure for an AF session with specific QoS parameters. The procedure involves PCF, which updates the SM policy and notifies SMF, which in turn requests a modification of the N4 session to collect reporting events from UPF. In addition, the solution proposes to extend the event exposure of NEF to provide support for monitoring of traffic volume and session inactivity time. Finally, the solution proposes NWDAF analytics potentially relevant to the application AI/ML operation to be collected by the AF.\nBelow follows the list and description of the specific capabilities and features enabling monitoring of relevant AI/ML-based services and operations that are proposed as part of this solution:\n-\tAF monitoring of UL, DL or round trip packet delay measurement: the three application AI/ML operations defined in TS 22.261 [2] (model split, model distribution, FL) may benefit from AF packet delay monitoring as the AI/ML application server may schedule training operation at UEs according to application needs, and delay measurements can assist the server in determining what the best strategy for such scheduling is. For example, delay measurements of the UE members of a FL group may assist the application server decide which UEs need to provide model updates in each iteration. Delay information is also critical for model split during joint inference, when sharing of inference results may be critical for the application performance. Current specifications already detail how the AF monitors this parameter for URLLC services.\n-\tAF monitoring of traffic/data volume: AF knowledge on the traffic volume helps the application server decide on the AI/ML operations that would be suitable for the application. For example, it may not be convenient to share or distribute very large models frequently, but smaller size models could be shared frequently. Similarly, there are important implications for model splitting depending on the traffic volume that needs to be exchanged between UE and application server, and the application server may need to monitor information on traffic/data volume to decide models' optimal splitting points.\n-\tAF monitoring of session inactivity time: when a training operation is to be scheduled by an AI/ML application server either for a single UE or a group of UEs engaged in FL, awareness of session inactivity time as reported by UPF to SMF turns out to be very helpful as it aids the server to determine when a UE or a group of UEs is sharing specific types of AI/ML traffic such as trained models. In particular, the dynamicity of FL groups greatly benefits from this parameter as UE's may dynamically join or leave the group in a pre-scheduled way (therefore optimizing performance) with assistance of this parameter. In current specifications UPF is already capable of monitoring this parameter and reporting it to SMF, so this solution enables the AF to trigger the monitoring procedure and SMF to deliver the report to AF via NEF.\nNOTE:\tIf the application has monitoring capabilities to accurately determine traffic volume and session inactivity, then it may not require 5GS monitoring capabilities for traffic/data volume and session inactivity time.\n-\tAF subscription to NWDAF analytics (DN performance, UE communication, QoS sustainability) , which may assist the AI/ML application operation and is already supported. Current specifications already detail how the AF subscribes to these analytics.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "6.1.2\tProcedures",
                            "text_content": "The figure depicts a procedure for monitoring QoS (Quality of Service) capabilities for AI/ML-based services. It illustrates the steps involved in assessing the performance of AI/ML-based services, including the use of a QoS monitoring system. The figure includes a flowchart, which outlines the process from the source to the destination, and a legend to explain the different colors and symbols used in the diagram. The figure is essential for ensuring the quality of AI/ML-based services, as it provides a clear and concise visual representation of the monitoring process.\nFigure 6.1.2.1-1: Procedure for QoS monitoring capabilities for AI/ML-based services\nThe procedure in Figure 6.1.2.1-1 combines the procedures in clauses 4.15.6.6, 4.16.5 and 4.4.2.2 of TS 23.502 [4]. The required updates needed are described in the step-by-step description below.\n1.\tAF subscribes to NWDAF analytics relevant to the performance of the UE(s) using the AI/ML application (e.g. DN performance, UE communication, QoS sustainability).\n2.\tThe AF uses the Nnef_AFsessionWithQoS service to indicate a subscription to notifications of QoS monitoring for delay measurements of UE traffic related to AI/ML-based services. Hence, the AF request may indicate packet delay measurement parameter (UL, DL, or round trip) as described in clause 5.33.3 of TS 23.501 [3] and 5.2.6.9 of TS 23.502 [4] for the case of URLLC services. Other requested monitored resources may include usage report and inactivity timer.\n2b-3.\tSteps 2b and 3 are performed according to Figure 4.15.6.6-1 in TS 23.502 [4] when NEF determines to contact PCF directly. The NEF interacts with the PCF by triggering a Npcf_PolicyAuthorization_Create request for session management policy control to authorize the AF request and optionally subscribe to PCF events for measurement of packet delay.\n4.\tStep 4 is performed instead of steps 1-3 when the AF is trusted by the operator to interact directly with PCF to request monitoring capabilities for an AF session related to AI/ML-based services.\n5-6.\tIf the PCF determines that the SMF needs updated policy information (as is the case for the proposed monitoring parameters in this solution), the PCF issues a Npcf_SMPolicyControl_UpdateNotify request with updated policy information as described in the PCF initiated SM Policy Association Modification procedure in clause 4.16.5.2 of TS 23.502 [4]. The SMF then acknowledges the PCF request with a Npcf_SMPolicyControl_UpdateNotify response.\n7-9.\tThe PCF determines whether the request is authorized and notifies the AF if the request is not authorized via NEF or directly by issuing a Npcf_PolicyAuthorization_Create response message.\n10-11.\tThe NEF or AF may send a Npcf_PolicyAuthorization_Subscribe message to the PCF to subscribe to the notification of PCF events for measurement of packet delay measurement if not done so previously in step 3.\n12-15.\tAfter receiving the event subscription notification from PCF, the SMF issues an N4 Session Modification Request as described in clause 4.4.1.3 of TS 23.502 [4] configuring the triggers for event reporting in UPF. The reporting triggers configured by SMF may entail session reports for packet delay measurement. The UPF may report on these events according to clause 4.4.2.2 of TS 23.502 [4].\n16-17.\tSteps 16-17 are performed according to clause 4.16.5.1 of TS 23.502 [4], with the SMF providing the event condition(s) that have been met to PCF.\n18-20.\tSteps 18-19 are performed as steps 7-8 in Figure 4.15.6.6-1 of TS 23.502 [4] with the event information reported by PCF to AF via NEF in case of untrusted AF. Step 20 is performed instead when the AF is trusted by the operator.\n21.\tThe AF analyses the monitored information exposed by the 5GS related to the AI/ML traffic.\n22.\tIf needed, the AF may trigger a modification of the PDU Session after having analysed the monitored data (see also clause 4.15.6.6a of TS 23.502 [4], without the need for TSCTSF involvement).\nNOTE:\tAny security and privacy aspects of the network and UE information exposure need to be studied by SA WG3.\nFigure 6.1.2.2-1: Procedure for session inactivity time and traffic volume monitoring capabilities for AI/ML-based services\n1.\tThe AF uses the Nnef_EventExposure_Subscribe service operation to indicate a subscription to new NEF monitoring events for traffic volume and/or session inactivity time.\n2.\tThe NEF subscribes to the user plane status information SMF event described in clause 5.2.8.3.1 of TS 23.502 [4], providing the (AI/ML) application ID and the SUPI(s) of the UE(s) being monitored as event filters as described in Table 5.2.8.3.1-1 of TS 23.502 [4].\n3-4.\tAfter receiving the event subscription notification from NEF, the SMF issues an N4 Session Modification Request as described in clause 4.4.1.3 of TS 23.502 [4] configuring the trigger for event reporting in UPF of PDU session inactivity.\n5.\tThe NEF may subscribe to event exposure directly from UPF to obtain information on data usage of a PDU session.\nNOTE 1:\tWhether and how an event ID is used by AF/NEF for retrieval of data usage information from UPF depends on FS_UPEAS and will be determined when FS_UPEAS reaches conclusions.\nNOTE 2:\tThe procedure in Figure 6.1.2.2-1 does not involve NWDAF.\n6.\tA trigger happens to report events on session inactivity and/or traffic usage by UPF.\n7.\tWhen a PDU session inactivity event is detected, UPF reports it to SMF according to clause 4.4.2.2 of TS 23.502 [4].\n8.\tSMF reports the detection of a user plane status information event to NEF with information on session inactivity time.\n9.\tUPF reports to the NEF the detection of the event in step 5 with information on data usage of a PDU session.\n10.\tNEF reports the monitored session inactivity time and/or traffic volume to AF via Nnef_EventExposure_Notify service operation.\n11.\tThe AF analyses the monitored information exposed by the 5GS related to the AI/ML traffic.\n12.\tIf needed, the AF may trigger a modification of the PDU Session after having analysed the monitored data.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "6.1.3\tImpacts on services, entities and interfaces",
                            "text_content": "AF:\n-\tRequest monitoring of parameters described in clause 6.1.1 related to AI/ML-related traffic via Nnef_AFsessionWithQoS for QoS monitoring and Nnef_EventExposure_Subscribe for traffic usage and session inactivity time.\nNEF:\n-\tSupport the request for monitoring of parameters described in clause 6.1.1 related to AI/ML-related traffic.\n-\tNew monitoring events required for traffic usage and session inactivity time.\nSMF/UPF:\n-\tProvide the monitored parameters described in clause 6.1.1 related to AI/ML-related traffic.\n",
                            "figures_meta_data": [],
                            "tables": []
                        }
                    ]
                },
                {
                    "title": "6.2\tSolution #2: User Plane solution for 5GC information exposure to UE",
                    "description": "",
                    "summary": "",
                    "text_content": "",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": [
                        {
                            "title": "6.2.1\tDescription",
                            "text_content": "This solution is addressing KI#2: 5GC information exposure to UE.\nAs documented in TS 22.261 [2], the AI/ML operation may be split between UE application client and AF. The UE application client performs local AI/ML operation for the privacy-sensitive and delay sensitive part and sends the intermediate data to the AF. The AF executes the remaining parts and feeds the inference results back to the device. This AI/ML operation requires reliable and low latency data transmission for the AI/ML traffic. Moreover, 5G system should be able to expose the predicted changes of network condition (i.e. bitrate, latency, reliability) per UE to an authorized third party as specified in the TS 22.261 [2]. Currently, the network condition related information, like the Network Slice load predictions information, NF load analytics and Network performance analytics are already supported in TS 23.288 [6]. If the 5GS can expose these analytics output to the UE application client, it is beneficial by the UE client to decide the AI/ML operation splitting, e.g. the UE application client may decide to perform the AI/ML operation when the Network Slice load is not high, the gNB status and resource usage that indicated in Network performance analytics output is in good condition.\nThe requirement that 5G system shall be able to provide event alerting to an authorized 3rd party, together with a predicted time of the event (e.g. alerting about traffic congestion or UE moving into/out of a different geographical area) was also captured in TS 22.261 [2]. The User Data Congestion Analytics supported by NWDAF can be used to address such requirement. When the UE received the alerting about the traffic congestion, the UE can decide to transmit priority portion of AI data before the traffic congestion happens.\nRegarding the Distributed / Federated Learning between UE application Client and the AF, within each training iteration, UE downloads the model from AI server and reports the interim training results to the AI server. The Server aggregates the interim training results from all the selected FL UEs and updates the global model. The updated global model is then distributed back to all the UEs. The above FL procedure may last for a long time with a huge data transmission with 5GS, in order to reduce the impacts to the non-FL traffic it is also beneficial to expose the NW load related prediction to FL UEs and AI server. The FL UEs and AI server can use this information to select a proper time for the FL related data transmission, e.g. the UE may decide to accept the FL learning operation when the QoS Sustainability Analytics predict the QoS will not change during a time period and the gNB status and resource usage that indicated in Network performance analytics output is also good enough.\nEditor's note:\tWhether and how the UE or UE Application client can use 5GC information for AI/ML operations is FFS and needs to be describe with valid justification before solution can be adopted, considering also that the same information will be used by the AI/ML application server as well.\nSince Rel-17, the DCAF functionality which is part of the AF was introduced to enable the NWDAF to perform data collection from the Application. Given the communication path between NWDAF and the DCAF has been introduced for data collection, it is reasonable to extend the existing DCAF/AF functionality and architecture as defined in TS 26.531 [7] to expose network data analytics related to the UE to assist the UE's local Application AI/ML operation.\nThe advantage of sending the analytics results to the UE via DCAF is that DCAF can act as a centralized node to manage analytics requests from multiple UEs that are served by the same AF. A DCAF can store the analytics results provided by the NWDAF. When a new UE or a new application request from the UE requests the same analytics, the DCAF can provide the analytics results to the UE directly as long as the network consent is also granted to the application in the UE and in the AF.\nFor the UE communicate with DCAF, both the direct way (from the UE Application to the DCAF, either in trusted domain or untrusted domain) and indirect way (from the UE Application to the Application server and from the Application server to the DCAF) can be used. The direct way and indirect way are the same as far as the data collection procedure described in TS 26.531 [7].\nThe following assumptions are made by this solution:\n-\tThe UE Application Client can Subscribe/Request to NWDAF via DCAF to request the information from 5GC (e.g. the Analytics result from the NWDAF).\n-\tThe communication services and functional architecture between UE Application Client and DCAF is in the scope of SA WG4 and shall be compatible with the existing architecture.\n-\tNetwork consent is required for the UE to access UE-related network information.\n-\tThere could be more than one DCAF to support the given application at different service areas.\nEditor's note:\tIt is further to be determined whether more than one DCAF is required for a given Application AI/ML application similar to the Edge Computing scenario.\nThe network consent means the network can authorize the UE's request and check if the UE is allowed to obtain the network information. In more detail, not all the network information are suitable to be exposed to the UE, e.g. some network analytics result like NF load analytics. The network may want to prevent the UE to request the information which is not related to the UE itself. Therefore, network consent should be required when exposing network information to the UE. The granularity of the network consent can be per UE:\n-\tper UE: whether the UE is authorized to obtain some specific Analytics ID or specific analytics subset of the Analytics ID from network.\nThe network consent is part of the UE subscription data stored in the UDM. If the DCAF is in trusted domain, when the DCAF receive the request from the UE, the DCAF will send the request to NWDAF including the UE ID, and NWDAF will communicate with UDM to check the network consent based on the UE ID.  If the DCAF is in untrusted domain, the DCAF will send the request to the NEF, and NEF will check with UDM about the network consent based on the UE ID.\nEditor's note:\tWhether and how the network consent for the analytics exposure to the UE is verified (inclause the level of granularity other than UE granularity) is subject to the definition of key usages for 5GC information for AI/ML operation on the UE in addition to coordination with SA WG3.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "6.2.2\tProcedures",
                            "text_content": "A user plane data collection from UE application client was approved in clause 6.2.8 of TS 23.288 [6] in Rel-17. A UE Application is configured the address of DCAF by the Application server. The UE Application client establishes a connection to the DCAF over user plane via a PDU session. The DCAF communicates with the UE Application Client and collects data from UE Application to NWDAF.\nThe same user plane connection between UE application and DCAF is used by the UE Application Client to request data exposure from NWDAF.\nBased on the justification above, the following information can be exposed to the UE via the support of the DCAF based on network consent acquired by UE:\n-\tQoS Sustainability Analytics.\n-\tNetwork Slice load predictions information.\n-\tNF load analytics.\n-\tUser Data Congestion Analytics.\n-\tNetwork Performance Analytics.\nEditor's note:\tHow to extend the interaction between UE and DCAF as defined in TS 26.531 [7] to enable UE to subscribe/request information to/from 5GC NF (e.g. NWDAF) via DCAF is in SA WG4 scope.\nThe SLA between the operator and the Application Service Provider further include the Supported Analytics ID list.\nThe Supported Analytics ID indicates the Analytics outputs that allowed by the operator to expose to the UE application Client and AF. The Supported Analytics ID list will be stored in DCAF.\nThe Application Service Provider will provision the Supported Analytics IDs to UE when UE performs application layer registration.\nBased on the justification in clause 6.2.1, the following information may be requested by UE application Client from 5GC to assist the Application layer AIML operation:\n-\tQoS Sustainability Analytics.\n-\tUser Data Congestion Analytics.\nEditor's note:\tWhether and how the UE can use 5GC information (e.g. as above) for AI/ML operations is FFS and needs to be described with valid justification before solution can be adopted, considering also that the same information will be used by the AI/ML application server as well.\nNOTE x:\tSupport for analytics IDs that only support any UE as the target of analytics reporting is subject to SA WG3 evaluation on how to address security and privacy concerns when sharing analytics generated from other UEs to an individual UE.\nThe UE Data Exposure Client (DEC) is responsible for sending data request to the Data Information AF (IEAF) to collect data from NWDAF as an input for application layer AIML operation. The IEAF is always in the MNO domain and the DEC is based on 3GPP defined procedures and security and therefore is also under the control of MNO. The data collection request from UE application may trigger the IEAF to collect data from NWDAF. Figure 6.2.2.2.1-1 shows the deployment of IEAF.\nNOTE 1:\tBoth IEAF and DEC are controlled and managed by the MNO e.g. with 3GPP defined procedures.\nThe figure depicts a simplified representation of an IEAF deployment, showing the various components and their connections. The diagram illustrates the various components such as the IEAF, the optical fiber, and the network equipment. The IEAF is shown in a simplified manner, with the fiber-optic backbone and the distributed nodes. The diagram highlights the importance of redundancy and failover in the deployment, ensuring reliable communication.\nFigure 6.2.2.2.1-1: IEAF deployment\nThe DEC communicates to the IEAF over user plane via a PDU session established by the UE.\nNOTE 2:\tThe DEC is deployed per application in this Release.\nThe SLA between the operator and the AIML Application Service Provider determines per Application ID in use by the ASP:\n-\tThe Analytics ID(s) that the 5GC is allowed to expose , subject to user consent and network consent.\n-\tThe S-NSSAI for the AIML Application Service Provider.\n-\tThe authentication information that enable the IEAF to verify the authenticity of the DEC that collects data.\nNOTE 3:\tThe mutual authentication info that is used by the DEC and the IEAF is out of SA WG2 scope.\nThe IEAF is configured based on the SLA above for each AIML application. NWDAF follows existing service user consent checks as specified in TS 23.288 [6] and network consent checks for the IEAF (as a NWDAF service consumer).\nThe IEAF may be also configured by the operator to do some data processing before sending the exposure data to DEC.\nThe following information are pre-configured in the UE by MNO or provisioned (via PCF) to the UE as part of AIML policy by using the procedure as defined in clause 4.2.4.3 in TS 23.502 [4] and used in the communication with IEAF:\n-\tThe address of the IEAF to contact.\nBased on the AIML policy and the URSP rules, the UE establishes a PDU session using the RSD from the matched rule and it connects to the relevant IEAF as per details of this solution described below.\nThe following information are provisioned by IEAF to DEC once the UP connection is securely established.\n-\tThe Analytics ID(s) that is authorized to collect from 5GC subject to user consent and network consent.\n-\tThe authentication information to enable the DEC to verify the authenticity of the IEAF that provides data.\nNOTE 4:\tThe authentication and authorization info that is used by the DEC and the IEAF is out of SA WG2 scope.\nNOTE 5:\tAny configuration procedure from the ASP to the UE's Application is out of SA WG2 scope.\nNOTE 6:\tThe authentication and security aspects of data leakage and protection in the UE and UE application client and DEC will be studied in SA WG3.\nNOTE 7: No assumption is taken on where and how DEC is deployed in this Release.\nIn either case, UE (at NAS) establishes the PDU session securely based on the existing 3GPP procedures and DEC only communicates over this UP connection with IEAF.\nThe communication between UE Application client and AIML ASP is out of 3GPP scope. Also, communication between UE application client and DEC is out of this study scope.\nUE establishes a user plane connection to the IEAF based on the relevant configuration information received from MNO. The UE Application Client sends request to DEC, DEC communicates with the IEAF over the A1 interface.\nNOTE 8:\tHow to realise A1 interface between IEAF and DEC is to be determined in coordination with SA WG3 and CT WGs.\nThe UE requested data exposure is described in Figure 6.2.2.2.1-2.\nThe figure depicts a user-requested data exposure procedure, with a focus on the steps involved in the process. The figure includes a flowchart that outlines the steps, such as data collection, data analysis, and data sharing. The figure also includes a legend to clarify the different stages of the procedure.\nFigure 6.2.2.2.1-2: UE requested data exposure procedure\n0. The MNO configures IEAF for data exposure to the UE taking into account the SLA. Accordingly, MNO pre-configures or provisions the UE with AIML policy.\n1.\tUE Application triggers the DEC to send the Analytics Request to IEAF. DEC triggers the UE to establish the PDU session to IEAF. IEAF provisions DEC with other configuration parameters (e.g. the authorized analytics IDs) once the UP connection is securely established. Subsequently, DEC initiates the analytics request.\n2.\tIEAF determines the S-NSSAI for the AIML Application Service Provider according to the Application ID based on the configuration by MNO.\nIEAF also determines if the requested Analytics ID is allowed or not based on the SLA and the configuration by MNO. If the requested Analytics ID from DEC is not allowed, IEAF may update the authorized analytics IDs on DEC.\nIEAF discovers the NWDAF that supports the Analytics ID received in step 1 and the S-NSSAI for the Application ID from NRF.\n3.\tNRF sends the Nnrf_NFDiscovery_response with the discovered NWDAF identity.\nIEAF may discover the NWDAF from UDM, in this case, step 2 and step 3 are not performed, IEAF make a query to UDM as described in clause 5.2 in TS 23.288 [6].\n4.\tIEAF subscribes to NWDAF for the analytics request with Analytics ID(s), S-NSSAI and UE ID and other input parameters for analytics request as described in clause 6.1.3 of TS 23.288 [6].\n5. NWDAF performs user consent check and operator consent check.\nNOTE: The user consent and operator consent check for application layer AI/ML is a general issue for all the KIs, the details of the user consent check and operator consent check procedure should align with the conclusion and described during normative work.\n6.\tIf NWDAF does not have available analytics result for the requested analytics ID, the NWDAF will trigger the analytics procedures for the analytics ID(s).\nAnalytics procedure is performed as described in TS 23.288 [6].\n7.\tNWDAF sends analytics result to IEAF.\n8.\tIEAF sends the exposed data to DEC over A1 and DEC forwards the data to UE Application Client over API. IEAF may do some data processing for the received analytics result from NWDAF based on MNO's configuration and IEAF sends the exposed data after the data processing to the DEC.\nNOTE 9:\tThe security aspects of exposure of network in steps 7 and 8 must be evaluated by SA WG3.\nIf a Subscribe/Notify service operation is invoked in step 4, the NWDAF may further notify the analytics to UE e.g. periodically). Step 7 and step 8 may be performed periodically.\nIn current solution 2, when DCAF subscribes to/requests the NWDAF for analytics on behalf of the UE, since the DCAF only knows the UE IP address from the source IP address of the received packet, then the DCAF needs to retrieve UE Identity based on UE IP address in step 4 referring to clause 4.15.10 of TS 23.502 [4].\nHowever, this UE ID retrieving operation by DCAF is not very efficient. For when we reuse the procedure like following extracted from the clause 4.15.10 of TS 23.502 [4], upon UE ID request from the AF, the NEF retrieves the SUPI for the UE from the BSF, and then the NEF translates SUPI to AF specific UE ID (GPSI or other forms) with the help of UDM.\nEven if a GPSI (not other form of AF specific UE ID) is provided by the NEF to the AF without considering security issues, then in this solution, when the AF on behalf of UE requests analytics from network, it will provide the GPSI to the NEF, then the NEF needs to map the GPSI to the SUPI inversely and provides the SUPI to the NWDAF.\nThere are some redundant mapping operations during the above UE ID retrieving procedure, it actually can be avoided by some enhancements, for example, the UE ID retrieving can be performed instead by the NEF or by the NWDAF when receiving analytics request meanwhile.\nThe figure depicts a UE (User Equipment) requesting data exposure procedure, illustrating the steps taken by the network to ensure data security and privacy. The figure includes a diagram of the network architecture, with key components such as the base station (BTS), network elements, and the UE. The diagram highlights the importance of data encryption and secure communication protocols to protect sensitive information.\nFigure 6.2.2.2.2-1: UE requested data exposure procedure\n1.\tUE sends the Analytics Request to DCAF via an application layer signalling. The DCAF address is provided by application server to UE application client and UE establishes the PDU session to DCAF are described in clause 6.2.8 of TS 23.288 [6]. The requested Analytics ID(s) are included in the application layer request message to DCAF. UE may also provide the S-NSSAI to DCAF.\nEditor's note:\tIf the UE application client can always provide S-NSSAI and which S-NSSAI that UE application client is provided is FFS.\nDCAF can retrieve the UE IP address from the source IP address of the received packet.\nSince the supported pairs of S-NSSAI+DNN for the PDU session established for UE to DCAF are configured in the DCAF, DCAF may also retrieve the S-NSSAI+DNN for the PDU sessions that used by the UE sent the Analytics request.\n2.\tDCAF sends Nnrf_NFdiscovery_request to NRF to discover the NWDAF that supports the UE requested Analytics ID(s). DCAF may also provide the S-NSSAI for NWDAF selection.\nEditor's note:\tFor DCAF in untrusted domain, if UE does not provide S-NSSAI in step 1, how to discover the NWDAF that serves the specific S-NSSAI is FFS.\n3.\tNRF sends the Nnrf_NFdiscovery_response with the discovered NWDAF identity.\nDCAF subscribes to NWDAF for the analytics request with UE IP address and Analytics ID(s). Step 4 is for DCAF in trusted domain and step 5 is for DCAF in untrusted domain.\n4.\tIf DCAF is in trusted domain, DCAF subscribes to NWDAF for the analytics by invoking Nnwdaf_AnalyticsSubscription_Subscribe with UE IP address and Analytics ID(s). Then the NWDAF retrieves UE Identity (i.e. SUPI) by using the Nbsf_Management_Discovery service operation with UE IP address and /or DNN and/or S-NSSAI.\n5.\tIf DCAF is in untrusted domain, DCAF subscribes to NEF for the analytics by invoking Nnef_AnalyticsExposure_Subscribe with UE IP address and Analytics ID(s). The NEF retrieves UE Identity (i.e. SUPI) by using the Nbsf_Management_Discovery service operation with UE IP address. Then the NEF subscribes to NWDAF on behalf of the DCAF for the analytics by invoking Nnwdaf_AnalyticsSubscription_Subscribe with UE Identity (i.e. SUPI) and Analytics ID(s).\nBefore step 5, the DCAF asks the NEF for authorization information to check if the UE is allowed to obtain analytics ID from the network. The NEF determines the authorization information for the UE based on local policy and the UE subscription data from the UDM about whether the UE has subscribed to the service that obtaining some specific analytics ID from network. Then the NEF sends the authorization information to the AF.\n6.\tIf NWDAF does not have available analytics result for the requested analytics ID, the NWDAF will trigger the analytics procedures for the analytics ID(s). NWDAF performs user consent check to UDM to determine if the analytics procedure is allowed or not.\n7.\tAnalytics procedure is performed as described in TS 23.288 [6].\n8.\tNWDAF sends analytics result to DCAF. Step 8a is for DCAF in trusted domain and step 8b is for DCAF in untrusted domain.\nNOTE:\tThe security aspects of exposure of network data must be evaluated by SA WG3.\n9.\tDCAF sends the analytics result to UE application client via application layer signalling.\n10-11.\tIf a Subscribe/Notify service operation is invoked in step 5, the NWDAF may further notify the analytics to UE e.g. periodically). NWDAF notifies the analytics result to DCAF. Step 11a is for DCAF in trusted domain and step 11b is for DCAF in untrusted domain.\n12.\tDCAF exposes the requested analytics to UE.\nThe figure depicts a user-requested data exposure procedure, with the UE (User Equipment) requesting data exposure. The figure shows the steps involved in the procedure, including the request, the data exposure, and the response from the network.\nFigure 6.2.2.3-1: UE requested data exposure procedure\n1.\tUE sends the Analytics Request to IEAFvia an application layer signalling as defined in clause 6.2.2.2.1.\n2.\tIEAFsends Nnrf_NFDiscovery _request to NRF to discover the NWDAF that supports the UE requested Analytics ID(s). IEAF-1 may also provide the S-NSSAI for NWDAF selection.\n3.\tNRF sends the Nnrf_NFDiscovery_response with the discovered NWDAF identity.\n4.\tThe UE ID retrieval procedure is captured in clause 6.2.2.2.\n5.\tIEAF-1 informs the NRF of its profile including the UE ID by invoking the Nnrf_NFManagement_NFRegister or Nnrf_NFManagement_NFUpdate service.\n6.\tDCAF-1 subscribes to NWDAF for the analytics request with UE Identity, app ID, Analytics ID(s) and an optional list of analytics subsets that are requested. Step 6a/6b is for IEAF-1 in trusted domain.\nWhen performing step 6a, the IEAF asks the NWDAF to check if the UE is allowed to obtain analytics ID from the network. The NWDAF determines the authorization information for the UE based on the indication or local policy and the network consent as a UE subscription data from the UDM about whether the UE has subscribed to the service that obtaining some specific analytics ID or specific analytics subset of the Analytics ID from network. NWDAF will invoke the Nudm_SDM_Subscribe to communicate with UDM to verify the network consent based on the UE ID.\nWhen performing step 6b, the IEAF itself check if the UE is allowed to obtain analytics ID by subscribing directly to the UDM. The IEAF determines the authorization information for the UE based on local policy and the network consent as a UE subscription data from the UDM about whether the UE has subscribed to the service that obtaining some specific analytics ID or specific analytics subset of the Analytics ID from network. AF will invoke the Nudm_SDM_Subscribe to communicate with UDM to verify the network consent based on the UE ID. Then the IEAF subscribes to the authorized Analytics ID from the NWDAF.\nThe IEAF-1 can store the analytics results provided by the NWDAF, if a new UE or a new application request from the UE wants to request the same analytics, the IEAF-1 will ask NWDAF or directly ask the UDM for authorization information to check if the UE is allowed to obtain analytics ID from the network. Then the IEAF-1 will provide the analytics results to the UE directly.\nEditor's note:\tIs FFS for which common network function to be responsible for handing the network consent verification.\nEditor's note:\tSA WG3 coordination is required for authorization.\n7.\tIf NWDAF does not have available analytics result for the requested analytics ID, the NWDAF will trigger the analytics procedures for the analytics ID(s). NWDAF performs user consent check to UDM to determine if the analytics procedure is allowed or not.\n8.\tAnalytics procedure is performed as described in TS 23.288 [6].\n9.\tNWDAF sends analytics result to IEAF. Step 9a/9b is for IEAF in trusted domain.\nNOTE:\tThe security aspects of exposure of network data must be evaluated by SA3.\n10.\tIEAF sends the analytics result to UE application client via application layer signalling.\nThe UE may move into a different service area supported by a different IEAF-2. During the mobility, the IEAF-1 can transfer the UE context to IEAF-2 via an application layer signalling in order to resume service with NWDAF.\n11.\tAfter the UE context is received via an application layer signalling, IEAF-2 updates its profile by invoking the Nnrf_NFManagement_NFUpdate service.\n12.\tIf a Subscribe/Notify service operation is invoked in step 6, the NWDAF may further notify the analytics to UE e.g. periodically).\n13.\tNWDAF sends Nnrf_NFDiscovery _request to NRF to discover the IEAF-2 that is serving the UE currently.\n14.\tNRF sends the Nnrf_NFDiscovery_response with the discovered identity of IEAF-2.\n15.\tNWDAF exposes the requested analytics to UE via IEAF-2.\nThe figure depicts a UE (User Equipment) requesting data exposure procedure, illustrating the steps taken to ensure data security and privacy. The figure includes a diagram of the UE's communication path, highlighting the need for encryption and secure transmission of data. The figure also shows the steps taken by the network administrator to ensure data is exposed in a controlled manner, with the use of encryption and authentication protocols.\nFigure 6.2.2.4-1: UE requested data exposure procedure\n1.\tUE sends the Analytics Request to DCAF via an application layer signalling. The DCAF address is provided by application server to UE application client and UE establishes the PDU session to DCAF are described in clause 6.2.8 of TS 23.288 [6]. The requested Analytics ID(s) are included in the application layer request message to DCAF. UE may also provide the S-NSSAI to DCAF.\nDCAF can retrieve the UE IP address from the source IP address of the received packet.\nSince the supported pairs of S-NSSAI+DNN for the PDU session established for UE to DCAF are configured in the DCAF, DCAF may also retrieve the S-NSSAI+DNN for the PDU sessions that used by the UE sent the Analytics request.\n2.\tDCAF sends Nnrf_NFDiscovery _request to NRF to discover the DCCF that supports the UE requested Analytics ID(s). DCAF may also provide the S-NSSAI for NWDAF selection.\n3.\tNRF sends the Nnrf_NFDiscovery_response with the discovered NWDAF identity.\n4.\tThe UE ID retrieval procedure is captured in clause 6.2.2.2.\nEditor's note:\tWhether and how to improve the efficiency for UE Identity retrieving procedure is FFS.\n5.\tDCAF subscribes to DCCF for the analytics request with UE Identity and Analytics ID(s). Step 5a is for DCAF in trusted domain and step 5b is for DCAF in untrusted domain.\nBefore step 5b, the AF asks the NEF for authorization information to check if the UE is allowed to obtain analytics ID from the network. The NEF determines the authorization information for the UE based on local policy and the UE subscription data from the UDM about whether the UE has subscribed to the service that obtaining some specific analytics ID from network. Then the NEF sends the authorization information to the AF.\nNOTE 1:\tStep 5b can be achieved by Nnef_AnalyticsExposure_Subscribe, if Nnef_AnalyticsExposure_Subscribe extends to cover Ndccf_DataManagement_Subscribe service.\n6.\tIf DCCF does not have available analytics result for the requested analytics ID, the DCCF will trigger the analytics procedures for the analytics ID(s). DCCF performs user consent check to UDM to determine if the analytics procedure is allowed or not.\n7.\tAnalytics procedure is performed as described in clause 6.1.4.2 of TS 23.288 [6].\n8.\tDCCF sends analytics result to DCAF. Step 8a is for DCAF in trusted domain and step 8b is for DCAF in untrusted domain.\nNOTE 2:\tThe security aspects of exposure of network data must be evaluated by SA WG3.\n9.\tDCAF sends the analytics result to UE application client via application layer signalling.\n10-11.\tIf a Subscribe/Notify service operation is invoked in step 5, the DCCF may further notify the analytics to UE, e.g. periodically). DCCF notifies the analytics result to DCAF. Step 11a is for DCAF in trusted domain and step 11b is for DCAF in untrusted domain.\n12.\tDCAF exposes the requested analytics to UE.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "6.2.3\tImpacts on services, entities and interfaces",
                            "text_content": "DCAF:\n-\treceives analytics request from UE via application layer signalling.\n-\tdiscovers NWDAF or DCCF for the received analytics request from UE.\n-\tstores the UE IP address and UE ID mapping information.\n-\tsends analytics request to NWDAF or DCCF.\n-\treceives analytics response from NWDAF or DCCF.\n-\tsends the received analytics result to UE via application layer signalling.\n-\tchecks with NEF about authorization information for the UE if it is allowed to obtain analytics ID from the network.\nNEF:\n-\tChecks about authorization information for the UE based on local policy, the UE subscription data about whether the UE has subscribed to the service that obtaining some specific analytics ID from network.\n-\tExposes DCCF services to DCAF.\n-\tFor DCAF based UE ID retrieval solution, requests UE ID and the corresponding S-NSSAI / DNN for the UE IP address that received from DCAF in untrusted domain.\n-\tFor DCAF based UE ID retrieval solution, exposes new event NWDAF ID for UE via Nnef_EventExposure_Notify, which is triggered by Nnef_EventExposure_Subscibe with input UE IP address.\n-\tFor NEF/NWDAF based UE ID retrieval solution, enhances Nnef_AnalyticsExposure_Subscribe service to support UE IP address acts as Target of Analytic Reporting.\nNWDAF:\n-\tChecks about authorization information for the UE based on local policy, the network consent as a UE subscription data about whether the UE has subscribed to the service that obtaining some specific analytics ID from network.\n-\tNWDAF discovers the DCAF that is currently serving the target UE before the notification.\n-\tFor NEF/NWDAF based UE ID retrieval solution, retrieves UE Identity (i.e. SUPI) by using the Nbsf_Management_Discovery service operation with UE IP address and /or DNN and/or S-NSSAI.\nUDM:\n-\tSend the network consent to NEF/NWDAF.\nNRF:\n-\tMaintain the mapping between the UE ID and its serving DCAF.\nEditor's note:\tWhether this can be achieved via UDR instead of NRF is FFS.\nUE:\n-\tHow to extend the interaction between UE and DCAF will be defined in SA WG4.\n",
                            "figures_meta_data": [],
                            "tables": []
                        }
                    ]
                },
                {
                    "title": "6.3\tSolution #3: 5GC information exposure to UE by SMF",
                    "description": "",
                    "summary": "",
                    "text_content": "",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": [
                        {
                            "title": "6.3.1\tDescription",
                            "text_content": "This is a solution for key issue #2 \"5GC information exposure to UE\".\nThe AF can obtain various data analytics provided by NWDAF as specified in TS 23.288 [6]. When requesting or subscribing to NWDAF analytics, the AF needs to provide Target of Analytics Reporting and Analytics Filter Information required for Analytics ID that the AF requests or subscribes to. For example, for QoS Sustainability analytics, the Target of Analytics Reporting is set to any UE. For the Analytics Filter Information, QoS requirements and Location information need to be provided as mandatory. The Location information could reflect a list of waypoints for UE(s) that the AF can collect from the UE(s), e.g. via application layer messages.\nFor operating AI/ML based services/applications, there may be the case that the AF (i.e. AI/ML Application Server) does not know or has not yet decided which UEs will be involved. For example, the case may exist that the AI/ML Application Server has not decided candidate UEs for FL Operation that it plans to perform. In this case, it might be difficult for the AI/ML Application Server to decide the input parameters such as Target of Analytics Reporting and Analytics Filter Information related to UEs, required to request or subscribe to NWDAF analytics.\nOn the other hand, the UE may decide whether it is interested in operating AI/ML based services/applications or it intends to participate in the AI/ML related operation, e.g. FL Operation, AI/ML model/data distribution. In this case, if the UE can obtain analytics information from 5GC, it would be useful for the UE to decide whether it can perform the AI/ML related operation or when downloading large AI/ML models is appropriate, or for the AI/ML Application Server to manage the AI/ML related operation, e.g. FL member selection by acquiring the analytics related information/report from the UE.\nThe AI/ML models may need to be changed if the environmental conditions are not stable (light distribution in the scene, background noise, time of the day, number and type of objects in the view-field, etc.). New AI/ML models may need to be downloaded as environmental conditions change or when new AI/ML models become available. If the application/UE knows that there is a potential QoS change in the DL data rate in the future, it can decide to pre-fetch in-advance a higher number of AI/ML models to be used for different sets of environmental conditions, or to choose more general AI/ML models that can work under different sets of environmental conditions.\nEditor's note:\tPros and cons of UE providing analytics related information/report to the AI/ML application server after it received the analytics information from 5GC compared to the AI/ML application server getting these network data analytics directly from 5GC needs to be evaluated.\nIf the 5GC can expose analytics information to the UE, it would be beneficial for operating AI/ML based services/applications, for example:\n-\tIf the UE is provided from the 5GC regarding the QoS Sustainability analytics information that RAN UE Throughput threshold or QoS Flow Retainability threshold cannot be met, the UE's application layer can perform the following based on the information provided by the UE's NAS layer:\n-\tUE's application layer decides not to participate in FL Operation; or\n-\tUE's application layer reports to the AI/ML Application Server that RAN UE Throughput threshold or QoS Flow Retainability threshold cannot be met, or network condition is not good. Based on the report from the UE, the AI/ML Application Server can decide not to select this UE for FL Operation.\n-\tIf the UE is provided from the 5GC regarding the User Data Congestion analytics information that the Congestion Level indicates 'congested', the UE's application layer can perform the following based on the information provided by the UE's NAS layer:\n-\tUE's application layer decides not to participate in FL Operation; or\n-\tUE's application layer reports to the AI/ML Application Server that network is congested or network condition is not good. Based on the report from the UE, the AI/ML Application Server can decide not to select this UE for FL Operation.\n-\tIf the UE is provided from the 5GC regarding the QoS Sustainability analytics and the User Data Congestion analytics information that RAN UE Throughput threshold or QoS Flow Retainability threshold can be met and the Congestion Level indicates 'not congested', the UE's application layer can perform the following based on the information provided by the UE's NAS layer:\n-\tUE's application layer decides to download new AI/ML models to be used for AI/ML model/data distribution such as real time media editing.\nThe outline of the proposed solution for 5GC information exposure to UE by SMF is as below:\n-\tThe SMF serving the PDU Session for AI/ML based services/applications provides analytics information obtained from the NWDAF to the UE.\n-\tThe UE can enable analytics information exposure to UE during PDU Session Establishment procedure and PDU Session Modification procedure. The UE is capable of requesting to the network for analytics information exposure and obtaining analytics information from the network.\n-\tThe UE can disable analytics information exposure to UE during PDU Session Modification procedure so that the SMF stops the analytics information exposure to the UE.\n-\tThe enabled analytics information exposure to UE can be also disabled when the PDU Session is released.\n-\tThe SMF may subscribe or request to analytics information provided by the NWDAF when receiving the enabling request for analytics information exposure sent by the UE.\n-\tWhen the SMF receives the enabling request for analytics information exposure from a UE, the SMF checks whether it has already subscribed to the Analytics ID related to the analytics information exposure with same input parameters to the NWDAF. If so, the SMF does not have to subscribe to the Analytics ID again. Otherwise, the SMF subscribes to the Analytics ID for the UE.\n-\tWhen the analytics information exposure is not needed anymore for any UE, the SMF checks whether the subscription to the Analytics ID related to the analytics information exposure needs to be kept for other UE(s). If not, the SMF unsubscribes to the Analytics ID.\nThe above SMF operations related to the (un)subscription to analytics information provided by the NWDAF can be considered as shared (un)subscription.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "6.3.2\tProcedures",
                            "text_content": "Figure 6.3.2.1-1 shows the procedure for enabling analytics information exposure to UE.\nThe figure depicts a procedure for enabling analytics information exposure to the end-user (UE) in a 5G network. It illustrates the steps involved in enabling analytics, including the selection of analytics services, the configuration of the analytics service, and the activation of the analytics service. The figure also includes a visual representation of the analytics service, showing the interface and the data that can be accessed by the UE.\nFigure 6.3.2.1-1: Procedure for enabling analytics information exposure to UE\n0.\tUE-1 performs registration.\nIn steps 1 to 5, UE-1 enables analytics information exposure to UE during the PDU Session Establishment procedure as defined in clause 4.3.2.2.1 of TS 23.502 [4] with the following differences.\n1.\tIf UE-1 wants to obtain analytics information from 5GC due to need or request of the application layer, UE-1 includes the following information in the PDU Session Establishment Request:\n-\tEnabling request for analytics information exposure per Analytics ID;\n-\t(optional) Analytics ID(s) and related input parameters for each requested Analytics ID.\nThe DNN and S-NSSAI for the PDU Session is for AI/ML based services/applications, i.e. Application AI/ML operations. The AMF selects an SMF based on the DNN and S-NSSAI, locally configured data or a corresponding SMF profile stored in the NRF.\nNOTE 1:\tThis solution assumes that the PDU Session used for AI/ML based services/applications is different than the PDU Session used for non-AI/ML based services/applications.\nNOTE 2:\tIn this solution, both separate PDU Session for each AI/ML based service/application and common PDU Session for all AI/ML based services/applications can be supported up to operator. For the latter case, if multiple AI/ML based services/applications need or request analytics information in the UE, the UE obtains the analytics information from the SMF and provides it to each application. Regarding how the UE's NAS layer knows/determines which analytics information it needs to provide to which application, the UE's application layer can provide the requested Analytics ID(s) to the UE's NAS layer in this step; otherwise (i.e. not provided), the UE can determine this as UE implementation.\n2.\tThe SMF receives the PDU Session Establishment Request including the enabling request for analytics information exposure per Analytics ID, and (optional) Analytics ID(s) and related input parameters for each requested Analytics ID.\nIf the SMF does not support analytics information exposure to UE, the SMF ignores the above information.\n3.\tSession Management subscription data related to the DNN and S-NSSAI for AI/ML based services/applications in the UDM contains the following data regarding analytics information exposure to UE.\n-\tAnalytics information exposure to UE allowed: indicates whether the UE is authorized to enable the analytics information exposure to UE.\n-\tAnalytics ID(s) and related input parameters: identifies the Analytics ID(s) that are allowed to be exposed to the UE and input parameters for each Analytics ID (e.g. Analytics Filter Information, Target of Analytics Reporting, Analytics target period, etc) as defined in clause 6.1.3 of TS 23.288 [6].\n-\tAnalytics ID=\"QoS Sustainability\" and input parameters as defined in clause 6.9.1 of TS 23.288 [6].\n-\tAnalytics ID=\"User Data Congestion\" and input parameters as defined in clause 6.8.1 of TS 23.288 [6].\n4.\tThe SMF received the enabling request for analytics information exposure from UE-1 determines whether UE-1 is authorized to enable the analytics information exposure to UE taking into account the SM subscription data received from the UDM, if the SMF supports analytics information exposure to UE. The SMF also checks the user consent information from UDM to determine if the analytics information exposure is granted or not.\nIf authorization check succeeds, the SMF includes an Accept to the enabling request for analytics information exposure in the PDU Session Establishment Accept. Otherwise, the SMF includes a Reject to the enabling request for analytics information exposure in the PDU Session Establishment Accept.\nNOTE 3:\tThis solution assumes that if the SMF supports analytics information exposure to UE, the SMF supports all Analytics IDs to be exposed to the UE. This means that the NWDAF also supports all these Analytics IDs.\nIf the SMF does not support analytics information exposure to UE, the SMF does not include Accept/Reject to the enabling request. In this case, steps 7 to 13 are not performed.\n5.\tUE-1 receives the PDU Session Establishment Accept.\n6.\tPDU Session Establishment procedure is complete as specified in Figure 4.3.2.2.1-1 of TS 23.502 [4].\n7.\tIf authorization check succeeded in step 4, the SMF subscribes to analytics information provided by NWDAF on the Analytics ID(s) requested from UE-1based on the subscription data described in step 3 if the SMF has not subscribed to \"QoS Sustainability\" analytics yet for other UE with the same input parameters. For input parameters included in the subscription request, the SMF may use the subscription data and local configuration. The SMF can determine the location information that is one of input parameters for \"QoS Sustainability\" analytics and Area of Interest that is one of input parameters for \"User Data Congestion\" analytics based on e.g. the UE location information, its Service Area. If UE-1 provided the input parameters for the requested analytics in step 1, the UE provided parameters supersede the subscription data and local configuration.\nThe SMF selects an NWDAF that supports requested analytics information as specified in clause 5.2 of TS 23.288 [6].\nMore than one NWDAF can be selected because single NWDAF does not support all the analytics. In this case, the SMF interacts with each selected NWDAF.\nThe SMF stores that UE-1 requested this analytics information.\n8.\tThe NWDAF collects the data specified in clause 6.9.2 of TS 23.288 [6].\n9.\tThe NWDAF derives the requested analytics as specified in clause 6.9.3 of TS 23.288 [6].\n10.\tThe NWDAF provides notification on the requested analytics to the SMF.\nThe SMF determines which UE(s) the SMF needs to provide this analytics information to, based on the information stored in step 7, i.e. UE-1.\n11.\tThe SMF invokes the Namf_Communication_N1N2MessageTransfer service operation on the AMF to transfer the analytics information within N1 SM information sent towards UE-1.\nNOTE 4\tTo provide the analytics information to the UE, the existing SM NAS message with new information element (e.g. PDU Session Modification Command) or new SM NAS message can be used.\n12.\tThe AMF sends the N1 NAS message including the analytics information to UE-1. UE-1's NAS layer provides the analytics information to the application layer.\n13.\tUE-1's application layer may take the provided analytics information into account for AI/ML related operation, e.g. to report its resources for Federated Learning Operation to the AI/ML Application Server, decide not to participate in FL Operation so not to interact with the AI/ML Application Server, etc.\n14.\tSame as steps 0-6. As a result, UE-2 enables analytics information exposure to UE during the PDU Session Establishment procedure.\nThe SMF stores that UE-2 requested this analytics information.\nIn Figure 6.3.2.1-1, the SMF does not subscribe to analytics information provided by NWDAF on \" the Analytics ID(s) requested from UE-2 after receiving the enabling request for analytics information exposure from UE-2 because the SMF has subscribed it already in step 7.\nHowever, if any input parameter such as the location information is different to that for the subscription already made, the SMF subscribes to analytics information on the Analytics ID(s) requested from UE-2for UE-2, or for both UE-1 and UE-2 in a combined manner, e.g. the location information covering both UE-1 and UE-2.\n15.\tThe NWDAF derives new analytics taking into account the most recent data collected.\n16.\tThe NWDAF provides notification on the requested analytics to the SMF.\nThe SMF determines which UE(s) the SMF needs to provide this analytics information to, based on the information stored in steps 7 and 14, i.e. UE-1 and UE-2.\n17.\tSame as step 11.\n18.\tThe SMF invokes the Namf_Communication_N1N2MessageTransfer service operation on the AMF to transfer the analytics information within N1 SM information sent towards UE-2.\n19.\tSame as step 12.\n20.\tThe AMF sends the N1 NAS message including the analytics information to UE-2. UE-2's NAS layer provides the analytics information to the application layer.\n21.\tSame as step 13.\n22.\tUE-2's application layer may take the provided analytics information into account for AI/ML related operation, e.g. to report its resources for Federated Learning Operation to the AI/ML Application Server, decide not to participate in FL Operation so not to interact with the AI/ML Application Server, etc.\nNOTE 5:\tSteps 21 and 22 can be executed in parallel.\nThe UE can also enable analytics information exposure to UE during the PDU Session Modification procedure.\nNOTE 6:\tThe UE can use the PDU Session Modification procedure only to enable analytics information exposure to UE.\nNOTE 7:\tDifferent SMFs can be selected for UE-1 and UE-2. Figure 6.3.2.1-1 shows the case that the same SMF is selected for both UEs to explain how this solution works.\nThe UE can enable analytics information exposure to UE as one-time report type by indicating this to the SMF when enabling analytics information exposure during PDU Session Establishment procedure or PDU Session Modification procedure. In this case, the SMF requests to analytics information by invoking Nnwdaf_AnalyticsInfo_Request service operation.\nFigure 6.3.2.2-1 shows the procedure for disabling analytics information exposure to UE.\nThe figure depicts a procedure for disabling analytics information exposure to the user equipment (UE) in a 5G network. The figure shows a series of steps to be followed to ensure that the UE does not receive any analytics information. The steps include setting up a secure connection, disabling the analytics application, and ensuring that the UE is not connected to the network. This ensures that the UE is not able to access any analytics information and is protected from potential threats.\nFigure 6.3.2.2-1: Procedure for disabling analytics information exposure to UE\n0a.\tFor the UE, the PDU Session is established and subscription to analytics information to the NWDAF by the SMF is made as described in clause 6.3.2.1.\n0b.\tThe UE and the AI/ML Application Server may exchange application messages related to Application AI/ML operations.\nIn steps 1 to 5, UE-1 disables analytics information exposure to UE during the PDU Session Modification procedure as defined in clause 4.3.3.2 of TS 23.502 [4] with the following differences.\n1.\tIf the UE wants to stop obtaining analytics information from 5GC, the UE includes a disabling request for analytics information exposure in the PDU Session Modification Request.\n2.\tThe SMF receives the PDU Session Modification Request including the disabling request for analytics information exposure.\nThe SMF determines to stop the analytics information exposure to the UE.\n3.\tNo difference in steps 1b to 2 in Figure 4.3.3.2-1 of TS 23.502 [4].\n4.\tThe SMF includes an ACK to the disabling request for analytics information exposure in the PDU Session Modification Command.\n5.\tThe UE receives the PDU Session Modification Command including the ACK to the disabling request for analytics information exposure.\n6.\tThe UE sends the PDU Session Modification Command Ack to the SMF.\n7.\tPDU Session Modification procedure is complete as specified in Figure 4.3.3.2-1 of TS 23.502 [4].\n8.\tThe SMF checks whether the subscription to the Analytics ID(s) requested by the UE needs to be kept for other UE(s). If so, the SMF determines to keep the subscription. Otherwise, the SMF unsubscribes to the Analytics ID(s) to the NWDAF.\nThe UE can also disable analytics information exposure to UE during the PDU Session Release procedure. Although the UE does not provide the disabling request to the SMF, the enabled analytics information exposure to UE can be disabled by the SMF when the PDU Session is released.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "6.3.3\tImpacts on services, entities and interfaces",
                            "text_content": "UE:\n-\tsupports enabling analytics information exposure to UE via SM NAS messages with new information element.\n-\tsupports disabling analytics information exposure to UE via SM NAS messages with new information element.\n-\tobtains analytics information from the SMF via SM NAS messages (i.e. existing SM NAS message with new information element or new SM NAS message).\n-\tsupports interaction between NAS layer and application layer.\nSMF:\n-\thandles enabling request and disabling request for analytics information exposure sent by the UE.\n-\tprovides analytics information to the UE via SM NAS messages (i.e. existing SM NAS message with new information element or new SM NAS message).\nUDM:\n-\tstores Session Management subscription data related to analytics information exposure to UE.\n",
                            "figures_meta_data": [],
                            "tables": []
                        }
                    ]
                },
                {
                    "title": "6.4\tSolution #4: 5GC Analytics exposure to UE",
                    "description": "",
                    "summary": "",
                    "text_content": "",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": [
                        {
                            "title": "6.4.1\tDescription",
                            "text_content": "This solution is proposed to address Key Issue #2: 5GC information exposure to UE.\nTo facilitate its Application AI/ML operation between the UE and the AF, it will be helpful for the UE to perform the AI/ML operation if the NWDAF can expose the UE-related analytics data. The UE and the AF may exchange the intermediate result to complete the E2E AI/ML operation over application layer, which may require large bandwidth, low latency or sustainable QoS for the AI/ML operation traffic. For example, the NWDAF can expose \"QoS Sustainability\", for V2X application to make AI/ML operation decision locally.\nThis solution aims at studying how to enhance the 5GC, i.e. NWDAF, to expose 5GC information to the UE to facilitate its Application AI/ML operation (e.g. Model Training, Splitting and inference feedback etc.).\nThe procedure for the NWDAF to expose analytics data (e.g. UE Mobility) to the UE is as illustrated in Figure 6.4.2-1.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "6.4.2\tProcedures",
                            "text_content": "Analyzing the given telecommunication figure, we can observe that Figure 6.4.2-1 depicts a procedure for analytics exposure to an end-user (UE). The figure illustrates the steps involved in analyzing the user's data, including the collection of data, storage, and analysis of the data. The figure also highlights the importance of security measures to protect the user's data from unauthorized access. Overall, the figure provides a clear and concise overview of the analytics process for end-users in a telecommunication context.\nFigure 6.4.2-1: Procedure for analytics exposure to UE\n1.\tThe UE negotiates with the AF though application layer on analytics subscription.\n2.\tThe AF selects the NWDAF (possibly via NEF) either by local configuration or querying the NRF according to Analytics ID, Area of Interest etc.\n3.\tThe AF subscribes to the NWDAF via Nnwdaf_AnalyticsSubscription_Subscribe (UE identifier, Analytics ID, Area of Interest, Notification Target Address (+Notification Correlation ID, +callback URI), Target UE IP Address,) for analytics exposure to the UE.\nNOTE 1:\tIn the case that the AF first gets the serving SMF address via UDM, then subscribes to the NWDAF on behalf of UE via SMF, the AF includes the Notification Target Address (+Notification Correlation ID, +callback URI) of SMF which is to be notified, and also includes Target UE IP address, and the AF sends the Notification Correlation ID to the UE for the subscription through application layer, then performs the following step 4a-5a.\n4a.\tThe NWDAF may return analytics data with Notification Correlation ID to the serving SMF according to the Notification Target address from AF, and instructs the notification message is to be exposed to which UE by Target UE IP address.\n5a. The SMF forwards the Analytics data together with Notification Correlation IDto UE via NAS by invoking Namf_Communication_N1N2MessageTransfer to AMF as defined in clause 4.2.3.3 of TS 23.502 [4].\n4b.\talternatively, the NWDAF may return analytics data to the AF, by invoking Nnwdaf_AnalyticsSubscription_Notify.\n5b.\tsends the analytics data to the UE over application layer.\nNOTE 2:\tIt will be considered in the evaluation phase that whether 5GC Analytics exposure to UE via the network could be efficient compared to the GBR flow.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "6.4.3\tImpacts on services, entities and interfaces",
                            "text_content": "AMF/SMF:\n-\tSupporting analytics exposure from NWDAF to UE.\nNWDAF:\n-\tSupporting analytics exposure to UE via SMF.\nUE:\n-\tSupporting analytics exposure from NWDAF via NAS.\n",
                            "figures_meta_data": [],
                            "tables": []
                        }
                    ]
                },
                {
                    "title": "6.5\tSolution #5: 5GC information exposure to UE",
                    "description": "",
                    "summary": "",
                    "text_content": "",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": [
                        {
                            "title": "6.5.1\tDescription",
                            "text_content": "This solution addresses Key Issue #2, in particular this solution addresses:\n-\t\"Whether and for which purpose there is a need for 5GC to expose information or data analytics to the UE, and what are the information or data analytics that can be provided by 5GC to the UE to assist the Application AI/ML operation at the UE side\"; and\n-\t\"How the 5GC exposes such information or data analytics to the UE\".\nCurrent 3GPP System support for Event exposure is intended for authorized 3rd parties, in particular monitoring of specific events for a UE in the 5G System, which are provided via NEF, and these include Monitoring capability, Provisioning capability, Policy/Charging capability and Analytics reporting capability.\nIn addition, Network Functions (NFs) can subscribe to UE related event notifications, e.g. Analytics information generated by the System. Note that the Event Notification service is neither available for Access Networks nor for UEs, this means that the availability of system information is limited to the Core Network. Nevertheless, application AI/ML operations are distributed in nature, e.g. AI/ML operation splitting between AI/ML endpoints, where these points are distributed at both the AF and UE side. The same occurs with other AI/ML operations such as AI/ML model/data distribution and sharing or Distributed/Federated Learning. Furthermore, some of these applications require quick access to System Performance locally, this means that system information needs to be available in both at the AF and the UE. E.g. Application AIML operations, e.g. Federating Learning may require knowing planned change of bitrate, latency, or reliability. This is further supported by both, TS 22.261, clause, 6.40 and the approved FS_AIML with Use Cases and motivation as to why it is advantageous for the UE to use exposed Network capabilities to aid AIML operations running on the 5GS. E.g. In TS 22.261, clause 6.40, it is stated that \"an AI/ML model can be distributed from an NW endpoint to the devices when they need it to adapt to the changed AI/ML tasks and environments\", the effect of these tasks and environments has a different impact on UE and AF and therefore it is clear that both AF and UE may benefit from exposed Network information.\nThe 5GS is already capable of providing System performance Prediction event notification to an authorized External party, hereafter referred to as AF, and the current mechanism relies on NWDAF and Network Exposure functionality to generate such predictions and expose them to 3rd parties via the NEF.\nTherefore, System Performance predictions and System Performance Statistics may also be provided to the UE by extending existing mechanism. Clause 6.5.1.1 describes new enhancements to 5G System Exposure procedures to provide Systems Performance Statistics and Prediction the UE.\nAs described in clause 6.2.8 of TS 23.288 [6], the AF collects data from the UE, based on an SLA that determines amongst other things, the information the UE Application shares with the AF. When applications in the UE collect data from the Network, however, the end-to-end request goes beyond UE-to-AF, as the data is collected from several other Network Functions in the network. Furthermore, there might be cases where, while the UE is allowed to collect information on some Network services/capabilities, it might not be allowed to collect information on other Network capabilities, e.g. the UE may be allowed to collect User Data Congestion, but not DN performance without the explicit consent of the DN Service Provider. Therefore, there should be a Network controlled mechanism to enable the UE access to data collection as a whole or more specific data collection, through data collection policies, that pertains to certain Network capabilities/services,e.g. the UE may be allowed to collect Analytics or subscribe to notifications providing Analytics or Monitoring events only for delivery over the User Plane but not the Control Plane. Operator policies may be used to determine which analytics a UE is allowed to collect. While the UE may be allowed to collect certain analytics and predictions, the UE may not be capable or configured to collect analytics via User Plane or Control Plane. Therefore the UE may provide its capability upon registration.\nIf the UE is capable and configured to receive System Performance Statistics and Prediction information, the UE may indicate its capability during the Registration procedure by including a new IE, e.g. \"Network Exposure capability. The UE may also indicate whether it is capable of receiving Network Exposure Capability Notifications and or Analytics over the CP, UP or both\". The UE capability may be used by the AMF/UDM to determine whether to check if the UE is allowed to request and get Network Exposure information, and whether notifications/responses can be sent over the CP, UP or both. With this information along with the AIML operation type the UE is interesting about, the Network may fetch relevant Analytic ID(s).\nTo control whether the UE is allowed to access Network Exposure information,, the network operator may enable \"Network Exposure Access\" permission as part of the UE's subscription record stored in the UDM. During the registration procedure, the AMF checks whether the UE is allowed to request/subscribe to Network Exposure events, which Analytics and Network Exposure information the UE is allowed to collect, and applicable information delivery mechanism (i.e. UP, CP or both). The AMF fetches the allowed Analytic IDs based on the AI/ML Operation Types, the correlation ID provided by the UE and the DCAF address if applicable, from the UDM. The mapping from AI/ML operation type is provided/updated by the AF to the UDM, either directly (if the AF is in the operator's trusted domain) or via the NEF (if the AF is outside the operator's trusted domain). What Network Analytics are associated to what AIML operation types is Application Layer specific and outside 3GPP scope. The AMF may provide in the Registration accept message whether the UE is allowed to collect Analytics and/or Network Exposure event notifications. Furthermore, the AMF may indicate a specific information delivery mode, and if the information delivery mode is either \"UP\" or \"Both\", the AMF may also provide the address of the AF providing access to Analytics and Event Notification (e.g. FQDN or IP address of the DCAF), if the AF is allowed to access the AF (e.g. based on SLA). The AIML AF may provide the address of a relevant DCAF using existing External Parameter Provisioning procedures.\nIf the information delivery mode indicates the UE may use only \"UP\" or \"Both\", the UE may request a PDU Session Establishment to enable connectivity toward an AF (e.g. DCAF) and request Analytics and/or Event Notification and have those Analytics and Event Notification delivered over the UP, using the DCAF as an anchor.\nIf the information delivery mode indicates \"CP\" or \"Both\", and the UE is allowed according to its subscription and policy, the UE may request, during a PDU Session Establishment procedure, System Performance Statistics and Predictions through a NF such as the SMF. The UE request the establishment of a PDU Session using an S-NSSAI associated to the application AIML operation the UE is requesting Analytics for.\nThe SMF may subscribe, on behalf of the UE, to specific Analytics and AI/ML operation types. Two alternatives are provided, the SMF may get the list of allowed Analytics/Network Exposure events that the UE may request from the UDM by providing the AIML operation type and correlation ID, or the SMF may send this information to the NDWAF and the NWDAF can get the relevant Analytics from the UDM. The UE provides the input parameter required for these Analytics during the PDU Session Establishment Request, e.g. within the PCO IE, or it may provide the input parameters using UL NAS TRANSPORT message, through the AMF. The AMF may convey this information to the NWDAF or it may forward it to the SMF controlling the AI/ML PDU Session.\nThe UE may provide, in addition to the parameters specified in clause 6.1.3 of TS 23.503 [5], the PDU Session ID, AI/ML operation type(s) and mapping of AI/ML operation types to relevant Analytic IDs. If the UE does not have the mapping of AI/ML operation type(s) to Analytic IDs, the UE may provide a Correlation ID shared by the AF endpoint counterpart, which the UE may obtain through the application layer. During the PDU Session Establishment procedure, the SMF may, based on Operator Policy and/or Analytics, provide in the PDU Session Establishment Accept message, e.g. within the PCO IE, the relevant Analytics IDs that are supported by the selected NWDAF (the one available in the AI/ML Network Slice the AI/ML operation is registered to).\nAlternatively, if e.g. based on policy or Network Analytics, e.g. showing high CP load, the SMF may route Analytics of Network Exposure notification through the UP, either directly through the UPF (via N4) or through an AF such as DCAF, over N4, using existing packet forwarding functionality.\nThe NWDAF may use the AI/ML operation type(s) and mapping of AI/ML operation types to relevant Analytic IDs or the AIML operation type and the Correlation ID to fetch relevant trained ML Models to generate Analytics requested by the UE.\nThe NWDAF uses the PDU Session ID and SMF ID to notify relevant Analytics to the UE.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "6.5.2\tProcedures",
                            "text_content": "The figure depicts a 5G network's operation specific system performance statistics and predictions requested by an UE. It shows the system's performance metrics, such as packet loss rate, latency, and throughput, as well as the prediction of future performance. The figure is crucial for network operators to ensure optimal performance and to make informed decisions about network upgrades and optimizations.\nFigure 6.5.2-1 Operation specific System Performance Statistics and Predictions requested by UE\n0a-c:\tDuring the Registration procedure, the AMF checks whether the UE is allowed to request/subscribe to Network Exposure events, which Analytics and Network Exposure information the UE is allowed to collect, and applicable information delivery mechanism (i.e. UP, CP or both). The AMF may get the allowed Analytic IDs and relevant Network Exposure event, based on the AI/ML Operation Types and the correlation ID provided by the UE, from the UDM. If the UE is configured with an Analytics list, the UE may provide the list as an alternative to the AIML operation type. The mapping from AI/ML operation type is provided/updated by the AF to the UDM, either directly (if the AF is in the operator's trusted domain) or via the NEF (if the AF is outside the operator's trusted domain). The AMF may provide in the Registration accept message an indication of whether the UE is allowed to collect Analytics and/or Network Exposure event notifications. Furthermore, the AMF indicates information delivery mode, and if the information delivery mode is either \"UP\" or \"Both\", the AMF may also provide the address of the AF providing access to Analytics and Event Notification (e.g. FQDN or IP address).\nIf the information delivery mode indicates the UE may use only \"UP\" or \"Both\", the UE may request a PDU Session Establishment to enable connectivity toward an AF (e.g. DCAF) and request Analytics and/or Event Notification.\n0d.\tBased on the allowed delivery mechanism, the UE may determine whether it requests subscription to Analytics and/or Event Notifications, via UP, CP or Both.\n1.\tIf the UE is allowed to request Analytics and/or Event Notifications, via CP, the UE subscribes to analytics information either using a PDU Session Establishment or PDU Session Modification procedure and it provides input parameters e.g. within the PCO IE, including AI/ML Operation Type, e.g. \"Model Distribution\", \"Operation Split\", \"Federated Learning\". The SMF may use the application AI/ML Operation type, and correlation ID to correlate associated AF request and generate the list of Analytic IDs:\n1b.\tAlternatively, the UE may use a UL NAS TRANSPORT message to convey inputs, indicating the PDU Session ID, S-NSSAI and DNN this request is intended for. The AMF uses this information to select the correct SMF.\n1c.\tThe AMF uses a Nsmf_info_Request Service operation to relay the request to the SMF identified in 1b.\n2.\tThe SMF subscribes, on behalf of the UE, to Analytics associated specific AI/ML operation type (s) provided by the UE. Two alternatives are provided, the SMF may get the list of allowed Analytics/Network Exposure events the UE may request from the UDM by providing the AIML operation type and correlation ID, or the SMF may send this information to the NDWAF and the NWDAF can get the relevant Analytics from the UDM. The NWDAF uses the correlation ID to identify Analytics relevant to specific application.\n2b.\tThe NWDAF may provide an immediate response to the NWDAF Service consumer, providing an Event Notification or relevant Analytics.\n3\tThe NWDAF notifies the NWDAF service consumer (i.e. the SMF acting on behave of the UE) with the analytics information by invoking Nnwdaf_AnalyticsSubscription_Notify service operation, based on the request from the NWDAF service consumer, e.g. Specific AI/ML Operation Type).\n4.\tThe SMF uses a Nsmf_info_Notification Service operation to relay the \"Nnwdaf_AnalyticsSubscription_Notify\" message to the UE via the AMF. Alternatively, based on policy or access to Network Analytics, e.g. showing high CP load, the SMF may route Analytics of Network Exposure notification through the UP, either directly through the UPF (via N4) or through and AF such as DCAF.\n5.\tThe AMF uses a DL NAS TRANSPORT message to relay the \"Nnwdaf_AnalyticsSubscription_Notify\" message carrying the System Performance Statistics and Predictions requested by the UE. Alternatively, the message may carry a Endpoint address where the UE could fetch the System Performance Statistics and Predictions, via the User Plane.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "6.5.3\tImpacts on services, entities and interfaces",
                            "text_content": "UE:\n-\tSupport for subscription to Network Performance Analytics and Predictions.\n-\tSupport sending relevant Performance Measurement to the relevant Application AIML operation.\nSMF:\n-\tSupport for relaying UE subscription to Network Performance Analytics and Predictions.\n-\tSupport delivery mechanism and forwarding of packets to UPF or DCAF.\nAMF/UDM:\n-\tSupport for UE authorization to request and obtain Network Performance Analytics and Predictions.\n-\tProvide in the Registration accept message whether the UE is allowed to collect Analytics and/or Network Exposure event notifications.\n-\tProvide in the Registration accept message whether the UE is allowed to collect Analytics and/or Network Exposure event notifications.\nDCAF:\n-\tSupport relaying of Analytics and Predictions forwarded by SMF.\n",
                            "figures_meta_data": [],
                            "tables": []
                        }
                    ]
                },
                {
                    "title": "6.6\tSolution #6: Federated learning analytics as assistance to AI/ML application server",
                    "description": "",
                    "summary": "",
                    "text_content": "",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": [
                        {
                            "title": "6.6.1\tDescription",
                            "text_content": "This solution addresses aspects of key issue #7 on 5GS Assistance to Federated Learning Operation and key issue #3 on 5GC Information Exposure to authorized 3rd party for Application Layer AI / ML Operation.\nThe solution allows 5GS to assist the FL application server to decide on which UEs should be part of FL process.\nThe 5GS assistance process to FL operation is explained in 4 key steps, and detailed procedures are available in clause 6.6.2:\n1.\tAI/ML application server prepares for running FL training by collecting information such as FL aggregated model size, potential FL members, model aggregation latency target in each iteration, expected number of iterations and time interval between each iteration, local model (i.e. model at learner side) size, time window when FL training needs to be performed. FL application server can run an initial candidate selection algorithm to derive an initial list of candidate FL members.\n2.\tBased on the above information, the AI/ML application server requests 5GS assistance, by providing the following input information to 5GS about local FL model training:\n-\tCandidate FL members.\n-\tLocal model (i.e. model at learner side) size and aggregated model (i.e. model at server side) size (to determine what kind of latency could be provided for the model size).\n-\tExpected number of iterations and time interval for each iteration.\n-\tOptionally, Preferred time window when FL training needs to be performed.\n-\tOptionally, FL transmission start time indicates when FL training operation prefers to start.\n-\tQoS requirements(e.g. includes 5QI, QoS Characteristics) indicates the QoS requirements of the QoS flow of the FL transmission.\n-\tOptionally, a request for geographical distribution of the UEs.\n-\tS-NSSAI.\n3.\t5GS collects candidate FL members' data:\n-\tRadio link quality (RSRP) for each candidate FL member.\n-\tExpected QoS estimate in the area for FL training.\n-\tQoS configuration in PCF / capability for the FL transmission QoS flow (if UEs can meet the required QoS (2MBPS) in the specified areas).\n-\tUser Consent check for each member. The user consent checking is enhanced to verify whether user corresponding to each member authorizes the AF to consume its data or analytics for AIML operations.\n4.\t5GS estimates and provides following analytics / predictions to the application server:\n-\tFor each candidate member, expected latency performance given aggregated and local model size, in the form of an estimate of latency per iteration and/or an average latency over the duration for the FL process.\n-\tA suggested time window for a better result for the FL operation, e.g. when network is going to be congested at the preferred time window when FL training needs to be performed, or when the NWDAF estimates that latency could be drastically reduced by delaying the FL training process to a later point in time.\n-\tGeographical distribution information for the candidate members, if requested by the AI/ML application server for further processing its FL member candidate selection algorithm.\n-\tQoS flow level data (QFI, QoS flow Bit Rate, QoS flow Packet Delay, Packet transmission, Packet retransmission), as the statistics/prediction of QoS for the FL traffic transmission.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "6.6.2\tProcedures",
                            "text_content": "The procedure for federated learning analytics as assistance to AI/ML application server is depicted in figure 6.6.2-1.\nThe figure depicts a federated learning analytics system, which is a collaborative learning system that uses multiple servers to train a machine learning model. The system uses federated learning, a technique that allows multiple servers to train a model without sharing the entire dataset, which can improve privacy and security. The system also uses analytics to assist the AI/ML application server, which can help to improve the performance of the server and make it more efficient.\nFigure 6.6.2-1: Federated learning analytics as assistance to AI/ML application server\n1.\tThe AF prepares for running FL training by collecting information such as FL aggregated model size, potential FL members, model aggregation latency target in each iteration, expected number of iterations and time interval between iterations, local model size, time window(s) when FL training needs to be performed. It determines an initial list for candidate FL members.\nNOTE 1:\tThis step happens at AI/ML application layer and is out of 3GPP scope.\n2.\tBased on the information collected in step 1, the AF requests 5GS assistance and request for analytics with Analytics ID set to FL analytics, and provides the following input information to 5GS about FL model training:\n-\tCandidate FL members: a list of candidate FL members Ids, i.e. one or more SUPI(s) or Internal Group Identifier(s), as derived in step 1.\n-\tLocal model size: to determine uplink traffic requirements for the UEs participating to FL operation and which kind of latency could be provided for this model size.\n-\tAggregated model size: to help 5GS to determine the QoS requirements and what kind of latency could be provided for this model size.\n-\tExpected number of iterations (e.g. 5000, 10000) and time interval between iterations. These two information will then determine the overall time needed by FL training operation.\n-\tOptionally, preferred time window(s) when FL training operation for the group needs to be performed.\n-\tOptionally, FL transmission start time indicates when FL training operation prefers to start.\n-\tS-NSSAI.\n-\tOptionally, a request for geographical distribution of the UEs.\n-\tQoS requirements (e.g. includes 5QI, QoS Characteristics) indicates the QoS requirements of the QoS flow of the FL transmission.\nNOTE 2:\tPrivacy issues need to be addressed by SA WG3.\n3.\tNEF forwards the request to NWDAF.\n4-6.\tNWDAF collects data about candidate FL members from NFs:\n-\tRadio link quality (RSRP) for each candidate UE/member, via OAM.\n-\tNetwork capacity (to support expected traffic) estimate in the area for FL training. This could require additions to network performance analytics such as e.g. maximum load that a gNB (absolute available throughput) can accept.\n-\tQoS configuration in PCF / capability for the FL transmission QoS flow (if UEs can meet the required QoS (2MBPS) in the specified areas).\n-\tUser consent checking for each member, from UDM. The user consent checking is enhanced to verify whether user corresponding to each member authorizes the AF to consume its data or analytics for AIML operations.\n7-8.\tNWDAF estimates and informs AF, via NEF, about analytics and predictions, per time window:\n-\tCandidate members' expected latency performance given aggregated and local model size, per iteration and/or on average. This is needed for the AF to determine the number of members meeting latency target per iteration, as well as the expected number of members not able to meet the latency target during the overall FL training process.\n-\tGeographical distribution of the member UEs (if requested by the AF in step 2 for further processing in candidate selection algorithm), e.g. list of UEs per tracking areas.\n-\tQoS flow level data (QFI, QoS flow Bit Rate, QoS flow Packet Delay, Packet transmission, Packet retransmission), as the statistics/prediction of QoS for the FL traffic transmission;\n9-11.\tBased on the received information, the AF can estimate latency performance of FL model training and can take some decision on FL training, such as start or delay FL model training, or increase targeted latency per iteration and start FL, or decide to add FL members and request again assistance from the 5GS for new candidate members, or decide to use another FL selection algorithm.\nNOTE 3:\tThese steps happen at AI/ML application layer and are out of 3GPP scope.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "6.6.3\tImpacts on services, entities and interfaces",
                            "text_content": "NWDAF providing new FL analytics on expected latency for candidate FL members, with input parameters provided by AI/ML application server.\n",
                            "figures_meta_data": [],
                            "tables": []
                        }
                    ]
                },
                {
                    "title": "6.7\tSolution #7: 5GS information exposure for AI/ML operation",
                    "description": "",
                    "summary": "",
                    "text_content": "",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": [
                        {
                            "title": "6.7.1\tDescription",
                            "text_content": "Awareness of UE UL/DL data rate at AI/ML application server is beneficial for it to make decision on AI/ML operation. AI/ML application server needs 5GS to provide the supported UL/DL data rate to make the decision on AI/ML operation, e.g. to determine the splitting point for AI/ML model splitting, or to determine the AI/ML model and the size of parameter for AI/ML model downloading. RAN node estimates the supported UL/DL data rate based on the channel condition between RAN node and UE, the bandwidth available for the UE and other factors. That is, the supported/available UL/DL data rate can be treated as the prediction of data rate for the near-future, which is not the mesurement of current data rate. Besides, after AI/ML application server makes decision for AI/ML operation, it may provide 5GS the required UL/DL data rate as the QoS requirement.\nIf the AI/ML operation last for a short time, e.g. 1s, then one single report of UL/DL data rate from 5GS is enough. Otherwise, data rate monitoring should be performed and feedback to AI/ML application server in order to enable adaptive AI/ML operation, which reflects the changing network conditions in a timely manner. In order to enable 5GS to perform data rate monitoring for AI/ML operation, AF provides 5GS data rate monitoring request information. Data rate monitoring request information may include the following parameters:\n-\tThe direction of data rate monitoring, e.g. UL, DL, or both.\n-\tData rate reporting levels.\n-\tData rate reporting periodicity.\n-\tTemporal Validity.\nWhere Temporal Validity indicates the time interval(s) during which the data rate monitoring request is to be applied. If no data rate reporting periodicity and Temportal Validity are provided, it implies that one shot of reporting is requested by AF. Besides, the required UL/DL data rate may be optionally provided as the QoS requirement, which may be contained in data rate monitoring information or not.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "6.7.2\tProcedures",
                            "text_content": "The solution relies on the Setting up an AF session with required QoS procedure and PDU Session Modification procedure in clauses 4.15.6.6 and 4.3.3.2 of TS 23.502 [4] respectively, to provision the data rate monitoring request informaiton to the RAN node. Besides, the existing QoS monitoring scheme can be reused for data rate monitoring configuration and reporting.\nThe figure depicts a data rate monitoring procedure for a 7.2.1 network, illustrating the steps involved in monitoring the data rate of a network segment. The procedure includes the use of a monitoring tool, which is represented by the red circle, to track the data rate of the network segment. The figure also shows the network segment's location on the network map, which is represented by the blue square, and the data rate of the network segment is represented by the green line. The figure provides a clear and concise visual representation of the data rate monitoring procedure, making it easy to understand and follow.\nFigure 6.7.2.1 data rate monitoring procedure\n0.\tThe AI/ML application of UE requests for connectivity.\n1.\tUE triggers PDU session establishment procedure according to clause 4.3.2.2.1 of TS 23.502 [4].\n2.\tThe AI/ML application of UE communicates with AF/App server, e.g. UE may provide the requested AI/ML model, the available AI/ML model in UE, the available computation and energy resource, memory limitation etc.\n3.\t(Optional) AF/App server makes decision on AI/ML operation based on UE's input and its own conditions. E.g. AF/App server determines the splitting point for AI/ML model splitting, or determine the AI/ML model and the size of parameter for AI/ML model downloading.\n4.\tBased on the AI/ML operation, AF/App server provision data rate monitoring request information and optionally the required UL/DL data rate (provided if step 3 exists) as the QoS requirement to PCF via NEF based on Setting up an AF session with required QoS procedure in clause 4.15.6.6 of TS 23.502 [4]. The data rate monitoring request can be regarded as the AF subscribes to events of DATA_RATE_MONITORING. Alternatively, AF shall subscribe to events of DATA_RATE_MONITORING in AF request separately.\n5.\tPCF initiates SM Policy Association Modification procedure as defined in clause 4.16.5.2 of TS 23.502 [4] to notify SMF about the modification of policies, which further triggers PDU session modification procedure. PCF includes the data rate monitoring request information (and optionally the required UL/DL data rate) in the PCC rules provided to SMF.\n6.\tSMF configures RAN node to perform data rate monitoring request (or provides RAN node with the required UL/DL data rate) via AMF. The N2 SM information contains QFI(s), the data rate monitoring request ( or the required UL/DL data rate optionally). The data rate monitoring request (together with the required UL/DL data rate optionally) can be associated with PDU session or QoS flow.\n7.\tRAN node performs data rate monitoring for the PDU session or QoS flow as requested by the network.\n8.\tSimilar as the existing QoS monitoring scheme, RAN node reports data rate monitoring results to PSA UPF in the UL data packets or UL dummy packets.\n9.\tUPF sends the data rate monitoring results to SMF based on N4 Session Level Reporting procedure. SMF exposes the data rate monitoring results to PCF or local NEF as configured by PCF. E.g. SMF triggers Nsmf_EventExposure_Notify with data rate monitoring results. New event should be defined for data rate monitoring.\n10.\tAF/App server makes decision on AI/ML operation based on 5GS's input. E.g. AF/App server may change the splitting point for AI/ML model splitting, or change the size of parameter for AI/ML model downloading.\nNOTE:\tIf the SMF receives the indication of direct event notification from the PCF and the SMF determines that the L-PSA UPF supports such reporting, the SMF sends data rate monitoring parameters and associated them with the target local NEF or local AF address to the L-PSA UPF via N4 rules. L-PSA UPF obtains data rate monitoring results from NG-RAN node and sends the notification related with data rate monitoring results over Nupf_EventExposure_Notify service operation to local NEF/AF.\nAn alternative way for AF to subscribe data rate monitoring is to reuse clause 4.16.5.2 in TS 23.502 [4], where AF/NEF provides service information to the PCF without other mandatory parameters (e.g. QoS reference). E.g. AF/NEF may invokes Npcf_PolicyAuthorization_Create Request or Npcf_PolicyAuthorization_Update request or Npcf_PolicyAuthorization_Subscribe Request service operation to provide data rate monitoring information.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "6.7.3\tImpacts on services, entities and interfaces",
                            "text_content": "The proposed solution is based on Rel-17 procedures but some enhancements may be needed to make it possible for the data rate monitoring scheme, such as:\nAF:\n-\tInclude data rate monitoring request information in AF request.\nPCF:\n-\tInclude data rate monitoring request information in PCC rules.\nSMF:\n-\tInclude data rate monitoring request information in N2 SM information towards RAN node.\n-\tExpose data rate monitoring results to PCF or AF or local NEF.\nUPF:\n-\tExpose data rate monitoring results to SMF or local NEF/AF.\nRAN:\n-\tSend data rate monitoring results to UPF over user plane.\n",
                            "figures_meta_data": [],
                            "tables": []
                        }
                    ]
                },
                {
                    "title": "6.8\tSolution #8: 5GC information/analytics notification to the AF and the UE",
                    "description": "",
                    "summary": "",
                    "text_content": "",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": [
                        {
                            "title": "6.8.1\tIntroduction",
                            "text_content": "This solution addresses Key Issue #2 \"5GC information exposure to UE\" and Key Issue #3 \"5GC Information Exposure to authorized 3rd party for Application Layer AI / ML Operation\".\nUE and AF may be notified on 5GC information or analytics with the purpose of triggering decisions on AI/ML operation or application adaptation. Notifications can be related to specific AF Sessions/PDU Sessions, in such case the AF can subscribe to such information via the PCF when the AF Session is created or modified and receive the notification via the PCF. New direct UE notifications on 5GC information or analytics are introduced via SMF/AMF.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "6.8.2\tDescription",
                            "text_content": "As described in clause 6.2.1 of TR 22.874 [8], AI accelerators are expected to enable the execution of complex AI/ML models directly on UE. The AI/ML models may need to be changed if the environmental conditions are not stable (light distribution in the scene, background noise, time of the day, number and type of objects in the view-field, etc.). Downloading new ML models may be needed as environmental conditions change and also when new ML models become available. AI/ML model size, maximum latency and user experienced DL data rate can be different across different models. If the UE starts to download a model and the DL data rate suddenly decreases after the decision has been made, the download of the new model may be affected with impact on the latency and overall performance of the application. If the application/UE knows that there is a potential QoS change in the DL data rate in the future, it can decide to instruct the UE to pre-fetch in-advance a higher number of AI/ML models to be used for different sets of environmental conditions, or to choose more general AI/ML models that can work under different sets of environmental conditions. The information that is needed in this case is the likelihood of a potential QoS change in the future and information on the estimated upcoming DL data rate in relation to the DL data rate requirements of the different AI/ML models that are supported.\nAs described in clause 7.4.3 of TR 22.874 [8], 5GS can adjust the QoS policies of individual UEs in a Flock to allocate more resources to the UEs that lag and less resources for those that are ahead of the flock, so that the overall result is more efficient for the Synchronous Federated Learning service and for the network operator. The UE can benefit of knowing about the upcoming QoS change due to policy change, for example by anticipating specific tasks that require the current QoS conditions so that they can be finished before the planned QoS change. The information that is needed in this case is the likelihood of a potential QoS change in the future and optionally the information on the QoS profile that the network is planning to apply in the future.\nIn addition to the QoS Sustainability analytics, the AF may subscribe to the UE Mobility analytics from NWDAF to determine if the UE moves out of an AoI or the Network Performance analytics for an AoI to determine when it is suitable to train ML model in the AoI. The UE may subscribe to the QoS monitoring result from UPF to help UE determine if it can join the FL group.\nFor all these reasons the UE and 3rd party applications (close to the UE and/or in the cloud) may need to obtain 5GC information or data analytics by subscribing or requesting e.g. QoS Sustainability Analytics from NWDAF to assist its local decision on application AI/ML operations. For example, UE may download V2X AI/ML model from V2X AF/AS. To perform real-time AI/ML inference operations locally to determine application parameters (e.g. automatic driving level, inter-vehicle distance), the UE may need to obtain 5GC information or data analytics, e.g. QoS Sustainability analytics from NWDAF. The problem is how to subscribe 5GC information to the 5GC for the UE, and how the 5GC exposes such information or data analytics to the UE and to the AF. In this solution AF subscribes for both the AF and the UE on the 5GC information and analytics that relate to an AF Session/PDU Session. AF subscribes by operating on the specific AF Session.\nThe potential solution for 5GC information exposure to UE is shown in Figure 6.8.2-1:\n-\tUE and AF make some negotiations in the application layer and potentially may determine that:\n-\t5GC information (such as network data analytics from NWDAF, UE Location from AMF, etc.) is required for the UE's local decision on application AI/ML operations;\n-\tUE allows AF to subscribe the 5GC information on behalf of itself.\nNOTE:\tThe negotiation between UE and AF is out of 3GPP scope.\n-\tAF subscribes 5GC information to 5GC for the UE based on application layer negotiation between UE and AF.\n-\t5GC information or data analytics can directly be exposed to UE through control plane (i.e. AMF/SMF) or user plane (i.e. UPF).\n-\tThe UE can use 5GC information to make decisions on application AI/ML operations locally.\nThe figure depicts a 5G communication scenario where the 8.2-1 information exposure of the 5GC (5G Core) to the UE (User Equipment) is analyzed. The figure illustrates the UE's ability to access the 5GC's information, highlighting the importance of network security and privacy in 5G networks.\nFigure 6.8.2-1: 5GC information exposure to UE for the subscription by AF\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "6.8.3\tProcedures",
                            "text_content": "When the AF wants to subscribe on the 5GC information or analytics for the AF and the UE it triggers the subscription with a request which is addressed to the PCF.\nIn case the AF is not trusted, the request can reach the PCF or NF/NWDAF through NEF.\nThe figure depicts the procedure of 5G Core Gateway (GC) information/analytics exposure to User Equipment (UE) and Access Facet (AF) in a 5G network. The figure illustrates the steps involved in the 5G Core Gateway (GC) process, including the subscription of the AF to the UE, which is crucial for the UE to access the 5G Core Gateway (GC) services.\nFigure 6.8.3.1-1: Procedure of 5GC information/analytics exposure to UE and AF: AF subscription\n1.\tUE and AF make some negotiations in the application layer.\n2a-2b.\tAF subscribes to network analytics/network information or data analytics.\na. In case of 5GC information that relate to an AF Session/PDU Session (e.g. Analytics on potential QoS change for a specific AF Session/PDU Session), AF can subscribe via PCF in order to set up or modify an AF application session context for the service (e.g. as in clause 4.2.2.2 of TS 29.514 [9]). The AF shall include the information that is requested. As an example, for the analytics on potential QoS change for a specific AF Session/PDU Session, the AF shall include the information needed to identify the specific AF Session/PDU Session, the QoS flows in the AF Session and relevant QoS KPIs for which analytics are requested. The AF may include additional relevant information in this request such as the time interval for the analytics notifications or information that can be used to determine the location(s) for the analytics subscription.\nb. In case of other 5GC information (apart from potential QoS change notification), the AF may directly subscribe the 5GC information for itself or for the UE. The AF may find the NF or NWDAF serving the UE by first querying the UDM.\n-\tIf the notification endpoint is the AF, the subscription procedure is the same as in clause 6.1.1.2 of TS 23.288 [6] or clause 4.15.6 of TS 23.502 [4].\n-\tIf the notification endpoint is the UE, according to the request of UE, AF subscribes network information to NF using Nnf_EventExposure_Subscribe (Notification Indication(GPSI)) or data analytics to the NWDAF using Nnwdaf_AnalyticsSubscription_Subscribe(Notification Indication(GPSI)). The subscription service operation contains a notification indication (including UE ID, i.e. GPSI) which indicates the NF or NWDAF to send the 5GC information (i.e. network information or data analytics) to the corresponding UE.\n3.\tPCF decides to update the policy of the PDU Session associated with the AF Session, including also the information provided by the AF in the previous step.\n4.\tPCF updates policy information to SMF, and instructing also the SMF to subscribe to related network analytics from NWDAF for the PDU Session.\n5.\tSMF subscribes to the related analytics from NWDAF for the PDU Session. The SMF can use the information in the PDU Session (e.g. 5QIs of related QoS flows, GFBR, MFBR) and the information provided by the AF in step 2 to determine the analytics filter information and/or the analytics target period for the subscription and the relevant thresholds for the QoS Sustainability Analytics.\n6.\tNWDAF starts to collect and process data for the received request and derives data analytics.\nNOTE:\tSMF may need to update the subscription to NWDAF when the PDU Session is modified and cancel the subscription when the PDU Session or the related QoS flow for which the 5GC information/analytics have been requested is released.\nThe figure depicts the procedure of 5G Core Group (5GC) information exposure to the Access Facilitator (AF) and User Equipment (UE) in a 5G network. It illustrates the steps taken by the 5GC to notify the AF and UE about the 5G Core Group information. The figure includes a diagram of the network architecture, highlighting the role of the 5GC, the AF, and the UE.\nFigure 6.8.3.2-1: Procedure of 5GC information exposure to UE and AF: notification to AF and UE\n1.\tNWDAF or NF decides to trigger a notification for an active subscription, according to collected 5GC information.\n2a.\tIn the case of AF Session/PDU Session specific subscription, the NWDAF notifies SMF, e.g. using potential QoS change notification as in clause 6.9 of TS 23.288 [6] or according to a notification related to other analytics. The SMF can match the information in the subscription for analytics and the notification received by the NWDAF (e.g. 5QI, QoS KPI information or prediction, time interval information) with the managed PDU Sessions and QoS flows to determine the PDU Sessions for which the analytics apply and the UE that needs to be notified.\n2b. In the more general case (e.g. non-AF Session/PDU Session specific subscription):\n-\tIf the notification endpoint is the AF, the NF/NWDAF notifies the AF directly by using Nnf_EventExposure_Notify or Nnwdaf_AnalyticsSubscription_Notify according to the subscription.\n-\tIf the notification endpoint is the UE, the NF/NWDAF notifies the SMF who serves the UE by using Nnf_EventExposure_Notify or Nnwdaf_AnalyticsSubscription_Notify according to the subscription.\n3a.\tThe SMF sends an AF Session/PDU Session specific notification to the AF via the PCF. For example in case of potential QoS change notification which is specific for an AF Session/PDU Session, it could be a QoS Prediction Information with the prediction of a specific QoS change event, according to the information received by the NWDAF and the initial subscription performed by SMF on the specific GBR QoS flows, using relevant 5QI, thresholds and other analytics filter information.\nUE is notified about the assistance information by either option A or option B. Option A includes step 4 to step 6 and option B includes step 7.\nOption A:\n4.\t[Conditional] If UE is to be notified and it is in IDLE state, the network will trigger service request, and page the UE.\n5.\tIf the UE needs to be notified, SMF carries the 5GC information received from step 2a (i.e. AF Session/PDU Session specific information) or step 2b_2 (i.e. non-AF Session/PDU Session specific information)  for the UE in the PDU Session Modification Command. As an example, in case of a QoS change prediction notification which is specific for a PDU Session, the SMF may send to the UE a PDU SESSION MODIFICATION COMMAND with an additional flag \"predicted\" indicating a potential change to the PDU Session which may happen in the immediate future. The information in this message may include (e.g. for a GBR flow) the information that the GBR could not be fulfilled in the near future and the information on the QoS that is predicted to be fulfilled. Other information can include an indication of the likelihood of the change to happen and time-related information of when the change is expected to happen. This message can trigger potential AI/ML operation or adaptation in the UE and in the application close to the UE if the UE can use this message to trigger the application. The flag \"predicted\" allows UE to know this is for the moment \"just a prediction\" and actual modification may happen in the future.\n6.\tUE responds with a PDU SESSION MODIFICATION COMPLETE to confirm the reception of the above message.\nThe UE and the AF may use the information received respectively in step 5 and 3 to trigger AI/ML specific operations in the UE or in the application. As an example, as described in clause 6.2.1 of TR 22.874 [8], the UE or the application may decide to pre-fetch in-advance a higher number of AI/ML models to be used for different sets of environmental conditions, or to choose more general AI/ML models that can work under different sets of environmental conditions, if the DL data rate is predicted to drop at some point in the future. These decisions may be implemented because the predicted potential QoS change may prevent UE or application to download new models after the QoS change takes place.\nOption B:\n7.\tThe AF may inform the UE, via application layer communication, about the assistance information based on the received information from step 2b_1 (i.e. non-AF Session/PDU Session specific information) or step 3a (i.e. AF Session/PDU Session specific information) and local configuration. The application layer communication between the AF and the UE is out of scope of 3GPP.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "6.8.4\tImpacts on services, entities and interfaces",
                            "text_content": "UE:\n-\tNeed to negotiate with AF to enable the AF to subscribe network information or data analytics to 5GC for the UE.\n-\tCan now receive analytics via a PDU SESSION MODIFICATION COMMAND. In case of potential QoS change notification, the flag \"predicted\" allows the UE to know this is for the moment \"just a prediction\" and actual modification may happen in the future.\n-\tNeed to identify the application running over the Packet Filter or the QoS flow for which the predicted QoS change notification is received in NAS message, and notify the corresponding application. Since applications are already notified of QoS change events (as in clause 10.1.19 of TS 27.007 [14]), the same existing mechanism can be extended to support additional notifications such as those related to AF Session/PDU Session specific information (e.g. potential QoS change events).\nSMF/PCF:\n-\tFor AF Session/PDU Session specific information, support subscription to analytics from NWDAF and sending the network information or data analytics to the corresponding UE according to the notification indication.\nAF:\n-\tSupport subscribing for network information or data analytics from 5GC for the UE, and need to carry notification indication for the UE in the subscription service operation.\nNF/NWDAF:\n-\tNotify AMF/SMF about network information or data analytics.\n-\tNotify AF or SMF about the non-AF Session/PDU Session specific network information or data analytics.\n",
                            "figures_meta_data": [],
                            "tables": []
                        }
                    ]
                },
                {
                    "title": "6.9\tSolution #9: AF influence on AI/ML operations related policies",
                    "description": "",
                    "summary": "",
                    "text_content": "",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": [
                        {
                            "title": "6.9.1\tDescription",
                            "text_content": "This solution addressed Key Issue #4 \"Enhancing External Parameter Provisioning \".\nApplication AL/ML related services are sensitive to network perception capability and network condition. For example, AI/ML model inference needs to perceive UE mobility. Different inferences have different requirements to latency and bandwidth. To achieve group training of multiple UEs, AI/ML training has higher requirements to network condition and stability. Due to the uncertainty of UE mobility and other behaviours and the instability of network condition (e.g. bandwidth, latency, jitter, etc.) in mobile communication network, on the one hand, a better network condition is required; and on the other hand, it is also needed to flexibly configure and adjust AI/ML related policies when the application layer conducts AI/ML model inference or model training.\nIn this solution, AF can provide configuration information required for AI/ML operations related policies and dynamically update it with assistance of monitoring, network condition and UE behaviours, etc. The configuration information required for AI/ML operations related policies can be provisioned based on different aspects (e.g. different area, different time period, different network condition etc.). Based on the configuration information, network can choose UE members dynamically (e.g. to choose whoever enter the particular area).\nThe NEF event exposure service is enhanced by providing a unified parameter provisioning service API dedicated for AI/ML operations, which may add the policy related parameters of AI/ML operations based on Nnef_TrafficInfluence or Nnef_ServiceParameter, including routing, QoS related policies and network resource monitoring subscription, etc.\nFor example, there is a big sports game going on in area 1 and the network is congested while there are just a few UEs in area 2 and the network is smooth. It seems more appropriate to make specific policies for area 1 that to offload some AI/ML operations to local network and servers when UE enters area 1, and specific policies for area 2 that put more AI/ML operations to the default server.\nIn the procedure section, we provide the procedures of AF influence on area-based AI/ML operations related policies as an example. In the procedure of AF influence on area-based AI/ML operations related policies, the network assists in discovering UEs that enter the specific area. When the UEs leave the area, the policy will be removed or updated based on the parameters of the new area and the monitoring results.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "6.9.2\tProcedures",
                            "text_content": "Figure 6.9.2.1-1 shows the procedure of AF influence on AI/ML operations related area-based policies.\nThe figure depicts the influence of AF on area-based AI/ML operations related policies, illustrating the steps involved in the process.\nFigure 6.9.2.1-1: Procedure of AF influence on area-based AI/ML operations related policies\n1.\tThe AF sends configuration information required for AI/ML operations. The NEF event exposure service is enhanced by providing a unified parameter provisioning service API dedicated for AI/ML operations, which may add the policy related parameters of AI/ML operations based on Nnef_TrafficInfluence as described in clause 4.3.6.2 of TS 23.502 [4] or Nnef_ServiceParameter as described in clause 4.15.6.7 of TS 23.502 [4], including routing, QoS related policies and network resource monitoring subscription, etc. The AF may indicate in the request:\n-\tArea (1…max);\n-\tSpatial Validity Condition (cell or TAI list);\n-\tFilter information that may include one or more than one of the following parameters:\n-\tApplication ID;\n-\tS-NSSI;\n-\tDNN;\n-\tTime duration: Start time and end time;\n-\tTarget UE(s) (any UE);\n-\tOne or more than one of the following information:\n-\tIP address of AI/ML server;\n-\t[Optional] AI/ML operation related subscription (e.g. network resource monitoring, QoS monitoring);\n-\t[Optional] Traffic Routing requirements (e.g. traffic filtering information, UP path management event subscription, etc.);\n-\t[Optional] QoS requirements (e.g. QoS reference, QoS parameters, etc.);\n2.\tThe NEF stores the AF request information in the UDR.\n3.\tThe NEF responds to the AF.\n4.\tThe PCF receives a Nudr_DM_Notify notification of data change from UDR. The service Nudr_DM_Notify need to be extended according to the policy related parameters received in step 1.\n5.\tThe PCF subscribes to SMF to receive notification about change of UE location in the Spatial Validity Condition. The SMF then sends location monitoring to the AMF to obtain the UE location presence in Spatial Validity Condition (i.e. Presence Reporting Area). Or, the PCF may provide Policy Control Request Triggers to the AMF indicating a specific UE for e.g. location change.\n6.\tWhen the UE(s) enter area 1, the AMF reports that the UE(s) have entered area 1, or the PCF may determine the UE(s) are in area1 when the UE(s) establish PDU session.\n7.\tThe PCF, based on the information received from the AF, sends access and mobility related policies received from the AF to the AMF and the UE(s) using the procedure defined in clause 4.2.4.3 of TS 23.502 [4].\n8.\tThe PCF, based on the information received from the AF, sends session related policies to the SMF that may include routing rules, related QoS rules, charging rules and resource monitoring related information and AI/ML related subscription.\nNOTE:\tIn this solution, external parameters (e.g. AM policy information, SM policy information) are only supported to provision to same PCF.\n9.\tThe SMF may take appropriate actions to reconfigure the User plane of the PDU Session, such as determining a target DNAI and adding, replacing or removing a UPF in the data path to e.g. act as an UL CL or a Branching Point.\n10.\tThe SMF may send a notification to the AF that User Plane has changed or other notifications based on the subscription from the AF.\n11.\tThe UE(s) initiate DNS request to get IP address of AI/ML server of area 1.\n12.\tThe UE(s) start AI/ML operations with AI/ML server under the policies of area 1. For example, with better policy assurance, the UE(s) can get more network resources to assist in training and inference.\n13.\tThe SMF sends a notification to PCF based on the subscription in step 1 and step 8. The PCF forwards the notification to the AF.\n14.\tThe AF may update the configuration information based on the information received in step 13 and send the updated configuration to the PCF.\n15.\tThe UE(s) leave area 1 and enter area 2. The PCF removes the policies of area 1 or updates the policies of area 1 to area 2 based on the information received from the AF in step 1.\n16.\tThe SMF may take appropriate actions to reconfigure the User plane of the PDU Session, such as determining a target DNAI and adding, replacing or removing a UPF in the data path to e.g. act as an UL CL or a Branching Point.\n17.\tThe SMF may send a notification to the AF that User Plane has changed or other notifications based on the subscription from the AF.\n18.\tUE(s) initiate DNS request to get IP address of AI/ML server of area 2.\n19.\tUE(s) start AI/ML operations with AI/ML server under the policies of area 2.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "6.9.3\tImpacts on services, entities and interfaces",
                            "text_content": "PCF:\n-\tSupport receiving additional parameters provisioned by AF for AI/ML service policies.\nNEF:\n-\tProvide a unified parameter provisioning service API for AI/ML operations;\n-\tSupport receiving AI/ML operations related parameters from AF including routing, QoS and network resource monitoring, etc.;\nUDR:\n-\tThe services (e.g. Nudr_DM_Notify) are extended according to the AI/ML operations related parameters.\n\n",
                            "figures_meta_data": [],
                            "tables": []
                        }
                    ]
                },
                {
                    "title": "6.10\tSolution #10: Application Data Transfer to support planned and event driven AI/ML traffic transport",
                    "description": "",
                    "summary": "",
                    "text_content": "",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": [
                        {
                            "title": "6.10.1\tDescription",
                            "text_content": "This KI is to address KI#5: 5GC Enhancement to enable Application AI/ML Traffic Transport.\nNOTE:\tAlthough this solution is motivated by the BDT framework, it is a new 5GC service, the any reference to the existing BDT procedures and services will be replaced by new service name during the normative phase once all the extensions are finalized during the conclusion phase.\nIn clause 6.40.1 of TS 22.261 [2], three types of Application AI/ML operations were considered when defining the stage-1 requirements, and they are:\na)\tAI/ML operation splitting between AI/ML endpoints.\nb)\tAI/ML model/data distribution and sharing over 5G system.\nc)\tDistributed/Federated Learning over 5G system.\nAmong the above three operation types, type b) above could involve a specific UE or a group of UEs, where as type c) above will target a group of UEs that would consume a high volume of network resources, it is very inefficient to have the AF to provision and to update individual transport policy for UE one-by-one when supporting the group transmission.  It would be beneficial if the AF can request prior to the transmission whether there will be sufficient QoS resources to support the 3 operations described above and negotiate with 5GS for when the transmission can take place.\nNetwork capacity planning is a major challenge for any mobile operator. The application AI/ML data transfer can be non GBR type (e.g. \"please start the transmission for this model at midnight\") or GBR type that requires some resource reservation aimed to achieve the transmission requirements. (e.g. \"the AF will start the transmission for this model 10 minutes later and aims to complete the transmission in 1 second, this would mean that some 5QI, GBR, PDB or PLR requirements are set for this type of traffic\"). In order to enable the MNOs to assist ASPs to transport their Application AI/ML traffic in a more controlled time-table under the considerations of the availability of network resources, this solution proposes to support pre-negotiation between the AF and the 5GS to agree on the target time window which is selected from a list of time windows that are coordinated between the ASP and the MNOs for the traffic transmission to support the Application AI/ML traffic. The Application AI/ML traffic could be non GBR type or GBR type. 5GC may further refer to the 5GC network analytics and other assistance information to derive the list of the desired time windows with their respective QoS parameters for the data transfer.\nAfter considering the above requirements for the Application AI/ML data transfer, this solution proposes to introduce Application Data Transfer (ADT) service to address this particular KI#5. When examining the clause 6.1.2.4 of TS 23.503 [5], today BDT framework supports two different ways of activating data transfer policies, One is for a future PDU session and another one is for an existing PDU session. This solution focuses on the activation data transfer policies for an existing PDU session according to the ADT transfer policies. The ADT service as specified in this solution supports the negotiation of the ADT transfer policy in advance of the desired data transfer time-table and location, data volume and data transfer policy (e.g. bit rate for one UE or a group of UEs, charging keys, etc.), including the ability to update the ADT policy based on changing network conditions (e.g. triggered by NWDAF notifications to PCF) in order to support the Application AI/ML group data transfer (e.g. FL data transfer) that meets the operational behaviours as described in clause 6.40.2 of TS 22.261 [2]:\n-\tthe in-time data transfer,\n-\tthe event driven (e.g. responding to the threshold reporting of \"Network Performance\" from NWDAF for the area of interest and time window, UE's location etc.) data transfer, and\n-\tthe dynamic policy adaptation data transfer\nThis solution supports the ADT data transfer time window negotiation similar to the BDT negotiation as specified in clause 5.2.5.5 of TS 23.502 [4] (i.e. Desired Time Window) and clause 5.6.2.3 of TS 29.554 [15] (i.e. desTimeInt). In this solution for ADT, a list of ADT data transfer time windows are requested by the AF during the ADT Transfer policy negotiation with the 5GC. The AF subsequently will select a specific negotiated ADT Transfer policy which includes the specific time window to proceed with the ADT data transfer based on the negotiation response from 5GC.\nAccording to clause 7.10 of TS 22.261 [2], there are KPIs defined for the QoS performance for the data transfer to support split AI/ML inference, AI/ML model download and FL learning. In order to enable ADT to transport the Application AI/ML traffic, the ADT Transfer Policy supports the list of primary and alternative QoS profiles for the additional QoS parameters as described in clause 5.7 of TS 23.501 [3] as follow to support Application AI/ML traffic:\n-\tPacket Delay Budget for UL/DL per UE time window;\n-\tMaximum Packet Loss Rate for UL/DL per UE time window;\n-\tGuaranteed and Maximum Bitrate for UL/DL per UE per time window.\nNOTE:\tThe QoS parameters for uplink and downlink may be asymmetrical based on the KPIs that were defined in clause 7.10 of TS 22.261 [2].\nIn addition, this solution also proposes to merge with Solution#14 which addresses minimum guarantee of the QoS performance among the selected FL members when they are participating in the FL operation. When supporting the FL operation as described in TR 22.874 [8], [P.R.7.4-002] and related description, one fundamental important consideration is to eliminate bias - allowing diverse users and devices to participate and bring to the learning task diversity of input data, as the users will have different attributes. It is important not to merely focus on the 'best performing devices' in the federation and drop the rest. It may increase the performance in terms of time to iterate the synchronous federated learning task to drop stragglers, but this will reduce the diversity of the data set and introduce bias. This phenomenon as described is referred as \"flock\".\nIt is important to strike a right balance between performance and diversity when proceeding with the FL operation. The AF may not necessarily select the best performance UEs, but certain minimum performance should be guaranteed for the selected UEs in order to sustain the effectiveness of the FL operation. 5G system should avoid risking selected UE performance for participating in the federated learning process that are caused by an inappropriate communication resource allocation. The mobile network, at least, should guarantee the minimum required QoS for the selected UEs to ensure the adequate performance for the FL operation. In the context of this solution, Flock QoS refers to a set of QoS parameters that specifies the minimum QoS performance for a group of UEs.\nAlso as defined in the clause 6.1.2.4 of TS 23.503 [5], the PCF refers to the \"Network Performance\" analytics and/or \"DN Performance\" analytics to determine the candidate list of ADT policies. In order to assist PCF to obtain a better estimate of the QoS parameters for the BDT policy, this solution proposes to enhance the \"Network Performance\" and/or \"DN Performance\" analytics as defined in clauses 6.6 and/or 6.14, respectively, of TS 23.288 [6] with an added set of input parameters as described in clause 6.10.2.1 below in order to enable the NWDAF to derive the performance statistic and predictions for the set of QoS parameters among the UEs.\nFurther details of the proposal are described in the following Solutions clause.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "6.10.2\tSolutions",
                            "text_content": "The intent of this solution is to define the ADT data transfer mechanism to support the Application AI/ML data transfer.\nThe solution defines the ADT transfer policy which includes a list of QoS profiles corresponding to their respective Desired Time Window. The solution includes the ability to negotiate a list of time windows between the AF and the 5GC. The solution includes also the support for individual QoS as defined in clause 5.7 of TS 23.501, specifically the  average and maximum Packet Delay for UL/DL, average and maximum Packet Loss Rate for UL/DL and guaranteed and maximum Traffic Rate for UL/DL corresponding to a particular Desired Time Window.\nThis solution also proposes to enhance the Network Performance analytics or DN Performance analytics for NWDAF as described in TS 23.288 [6] to support the additional QoS performance analytics for the new QoS parameters (i.e. PDB, PLR and traffic rate) as described earlier in clause 6.10.1 above. More specifically, the additional QoS parameters are average and maximum Packet Delay for UL/DL, average and maximum Packet Loss Rate for UL/DL and average, minimum and maximum Traffic Rate for UL/DL per UE per Time Window. PCF may subscribe to such analytics to assist its decision to derive the AAMDT Transfer policy for the selected time window(s).\nThis solution also defines the ADT negotiation procedures similar to the procedures as defined in clause 4.16.7.2 of TS 23.502 [4] to support the ability of the AF to request a list of ADT time windows and the associated QoS support. In addition, it describes the procedure on how AIML AF discovers its serving NEF as well as the need for the NEF to authenticate/authorize the AIML AF. Finally, this solution clarifies the procedures on how ADT can be applied to the existing or future PDU session.\nAs described in clause 6.1.2.4 of TS 23.503, one or more negotiated BDT policies could be provided by PCF to AF via NEF. The AF will then select one of them and inform the PCF about the selected ADT Transfer policy together with the ADT Transfer Reference ID. Prior to the desired time window started for the Application AI/ML data transfer, the AF will then initiate the AF request towards PCF to apply the selected ADT Transfer policy to the selected target UEs' PDU sessions. The PCF will then determine the appropriate PCC rules according to the negotiated ADT Transfer policy for each these PDU sessions.\nIn addition, this solution also proposes to merge with Solution#14 which addresses minimum guarantee of the QoS performance among the selected FL members when they are participating in the FL operation.\nIn this clause, the solution borrows the descriptions of the BDT service in order to describe the AF to request a list of Desired time windows for ADT similar to the input parameter for the Nnef_BDTPNegotiation_Create as described in clause 5.2.6.6.2, but with the additional primary and alternative QoS profiles (e.g. PDB, PLR etc.) corresponding to the list of Desired time windows proposed by this solution for the specific Application AI/ML data transfer requested by the AF.\nIn order to support the KPIs that have been defined in TS 22.261 [2], clause 7.10 to support the QoS performance for the data transfer for various Application AI/ML traffic, this solution proposed the ADT Transfer policy with the following QoS parameters which apply to the primary and alternative QoS profiles requested by the given AF:\n-\tPacket Delay for UL/DL per UE per Time Window\n-\tMaximum Packet Loss Rate for UL/DL per UE per Time Window;\n-\tGuaranteed and Maximum Bitrate for UL/DL per UE per Time Window;\nDuring the ADT Transfer policy negotiation and before the activation procedures , the PCF may subscribe to NWDAF for the Network Performance Analytics and/or DN Performance Analytics as described in clauses 6.6 and 6.14 of TS 23.288 [6]. to collect the performance statistic and to derive the performance prediction on those QoS parameters for the given time window.  Based on the analytics report, the PCF may propose to re-negotiate the ADT Transfer policy prior to the activation of the corresponding BDT time window.\nIn order to enhance the Network Performance or DN Performance analytics to report the prediction of the QoS performance, this solution proposes to add the following input parameters to the Network Performance Analytics as described in clauses 6.6 and 6.14 of TS 23.288 [6] together with the UE's performance data collected from the AF as shown in Table 6.10.2.1-1 below to enable the NWDAF to derive the extended Network Performance or DN Performance analytics for the set of the QoS performance statistic and predictions corresponding to the specified time window: i.e.:\n-\tThe identification of the target application(s) for the analytics information, i.e. Application ID(s), and the corresponding IP address/FQDN\nTable 6.10.2.1-1: Performance Data from AF\n\nBased on the input parameters above, the NWDAF will then subscribe to the \"Performance Data from AF\" similar to clause 6.4.2 or clause 6.14.2 in TS 23.288 [6] either directly for trusted AFs by invoking Naf_EventExposure_Subscribe service (Event ID = Performance Data, Event Filter information = Area of Interest, Application ID) as defined in TS 23.502 [4], or indirectly for untrusted AFs via NEF by invoking Nnef_EventExposure_Subscribe service (Event ID = Performance Data, Event Filter information = Area of Interest, Application ID) where NEF translates the Area of Interest into geographic zone identifier(s) in order to derive the performance statistic and prediction indicators for the following new QoS parameters corresponding to the specific time window:\n-\tMaximum/Average Packet Delay for UL/DL per UE per Time Window\n-\tMaximum/Average Packet Loss Rate for UL/DL per UE per Time Window\n-\tMaximum/Minimum/Average Traffic Rate for UL/DL per UE per Time Window\nThis clause presents further clarifications on how to leverage the ADT procedures for negotiation of future background data transfer  to support the Application AI/ML data transfer.\nPrior to the establishment of PDU session to support the ADT within a specified time-window, AF initiates requests to its serving NEF to (re)negotiate ADT Transfer policy  that might have been pre-provisioned or earlier negotiated and stored in the UDR.\nThe figure depicts a 10 Gbps ADT Transfer Policy Negotiation for future PDU session, which is crucial for supporting Application AI/ML data transfer. The figure illustrates the negotiation process, including the negotiation parameters, negotiation steps, and the final negotiation result.\nFigure 6.10.2.2-1: ADT Transfer Policy Negotiation for future PDU session to support Application AI/ML data transfer\nThe procedures as shown in Figure 6.10.2.2-1 above borrows the descriptions of the BDT procedures specified in TS 23.502 [4], clause 4.16.7.2 to support negotiation for future background data transfer. The following descriptions focus on the changes to the existing procedures:\nPrior to the transport of the Application AI/ML data within the specified time-window, the AF negotiates with the 5G Core for the ADT policies that apply to its given Application AI/ML data transfer corresponding to the authorized 3rd party (i.e. AF), the AF is required to discover its serving NEF, if it has not done so, using the mechanism as described in clause 6.3.14 of TS 23.501 [3].\nIn step 1a, to the list of parameters for Nnef_ADTNegotiation_Create Request from AF similar to the procedure as described in clause 4.16.7.2 of TS 23.502 [4] now includes the list of Desired time windows with their associated primary or alternative QoS profile, the AI/ML AF may include also the latency and reliability requirements for the specific Application AI/ML operation as described in clause 6.10.2.1.\nFurthermore, if \"flock\" scenario applies to the group of selected FL UEs who are to be participated in this BDT session, the ADT Transfer policy automatically takes into account the Flock QoS policy into consideration by specifying the minimum guaranteed QoS requirements, via proper QoS attributes, e.g. Packet Delay Budget.\nNOTE 1:\tFlock QoS is determined by an AF based on AF's internal logic (policy). For example, the AF can determine the flock QoS based on the UEs and the network input data and the FL trigger conditions.\nIn step 1b, the NEF may authenticate the AF and authorize the ADT request from the AF. If the given AF is not authenticated and authorized, the NEF will reject AF's request through the Nnef_ADTNegotiation_Create Response, and the following steps are skipped.\nIn step 2, the list of parameters for Npcf_ADTPolicyControl_Create Request from AF as described in clause 4.16.7.2 of TS 23.502 [4] now includes the list of Desired time windows, the NEF should include the added latency and reliability requirements for the specific Application AI/ML operation if they have been received from the AF.\nIn step 4, PDB and PLR etc. QoS parameters may also be provided by UDR as part of the ADT policies to the PCF. This may happen if the PCF (or another PCF) had received from the AF/NEF in a previous ADT negotiation regarding the latency and reliability requirements which are described in the form of PDB and PLR etc. QoS parameters, and are stored in the UDR.\nIn Steps 5, 6 the PCF refers to the requested QoS requirements specified by the AF. As described in current step 5, the PCF subscribe to with the NWDAF as defined in clause 6.6 of TS 23.288 [6] to request the Network Performance analytics and/or DN Performance for the set of QoS parameters' performance for each Desired time window from the list and the Network Area Information. The PCF will then determine the PDB, PLR etc. QoS parameters based on the QoS requirements from the AF for the corresponding Desired time window(s) which may be based on the reports of the Network Performance and/or DN Performance analytics to be included in the set of ADT Transfer policies  The PCF may also invalidate some of the old ADT Transfer policies. The PCF sends the final set of ADT Transfer policies to the AF via NEF together with the ADT Transfer Reference ID.\nAfter the ADT Transfer policy negotiation, if the AF decides to select an alternative ADT Transfer policy (e.g. data rate reduction, relaxing delay constraints of planned and event driven traffic etc.) which may include the Flock QoS policy consideration with the minimum guaranteed QoS requirements as the result of certain AI/ML operation decision, the AF may trigger step 8 to update the corresponding PCF via the support of NEF for the new selected ADT Transfer policy.\nNOTE 2:\tIt is not in the scope of this solution to specify the event or consideration that triggers the AF decision to update the ADT Transfer policy.\nIn step 12, the additional QoS parameters may be added to the UDR by the PCF as part of the updated ADT Transfer policies.\nThis clause describes two ways to apply the negotiated ADT Transfer policy for a given Application AI/ML data transfer to the PDU Session(s) for given UE(s) - i.e. (a) activating the ADT Transfer policy as described in clause 6.10.2.2 above to a PDU session; and (b) adding PDU session of the target UE to the ADT Desired time window by applying the ADT Transfer policy.\nFor the activation of the previously negotiated ADT Transfer policy to a PDU session to support the Application AI/ML data transfer, before the start of the ADT Transfer transfer Desired time window, the AF triggers Npcf_PolicyAuthorization_Create/Update via NEF or directly to PCF. The AF discover the PCF (may be via NEF) via BSF by invoking Nbsf_Management_Discovery. In both cases, the PCF will then leverage the negotiated ADT Transfer policy to generate the PCC rules to support the establishment of the future PDU session(s). For further details on how to apply the previously negotiated ADT Transfer policy can be referred to clause 6.1.2.4 of TS 23.503 [5] and clause 4.15.6.8 of TS 23.502 [4].\nIf the PDU session has been established and the AF would like to apply/update/delete the ADT Transfer policy to such existing PDU session for individual UE to support the Application AI/ML data transfer, then the AF invokes the Npcf_PolicyAuthorization_Create/Update service directly to PCF (via the N5 interface). The AF may discover the PCF via BSF by invoking Nbsf_Management_Discovery. The AF also provides the ADT  Reference ID together with the AF session information to the PCF that serves the PDU session. The PCF authorizes the AF request. If the PCF determines that the AF can't be authorized, it rejects the AF request. Once the PCF authorizes the AF request and if the AF request is to apply or to update the PDU session with the ADT Transfer policy,, the PCF retrieves the corresponding ADT Transfer policy from UDR to derives the PCC rule for the BDT according to the transfer policy which may include the Flock QoS policy consideration with the minimum guaranteed QoS requirements. In addition, the AF may specify the individual QoS parameters as described in clause 6.1.3.22 of TS 23.503 [5] different than the ADT Transfer policy. The PCF then updates the SMF with corresponding new PCC rule(s) with PCF initiated SM Policy Association Modification procedures as described in TS 23.502 [4], clause 4.16.5.2. Further details on how AF applies the ADT Transfer Policy to an existing session are provided in clause 6.1.2.4 of TS 23.503 [5].\nIf the AF would like to remove the ADT Transfer policy for a PDU session of a given UE, AF invokes the Npcf_PolicyAuthorization_Delete service directly to PCF. The AF also provides the ADT Reference ID together with the AF session information to the PCF that serves the PDU session. The PCF authorizes the AF request as described above before removing the PDU session from the ADT.\nThe figure depicts a flowchart illustrating the process of applying, updating, or removing an ADT Transfer Policy to a PDU session in a network. The diagram illustrates the steps involved in managing data transfer policies, including the use of ADT Transfer Policies, which are essential for supporting application AI/ML data transfer.\nFigure 6.10.2.3-1: Applying/Updating/Removing ADT Transfer Policy to a PDU session to support Application AI/ML data transfer\n1.\tAF decides to apply/update/delete the ADT Transfer policy of a given application AI/ML data transfer for PDU session, then the AF will, at the time the data transfer is about to start, provide, for the target UE, the ADT Reference ID together with the AF session information to the PCF that serves the PDU session (via the N5 interface). Note that AF may need to discover the UE's serving PCF via NEF with the support of BSF. This Npcf_PolicyAuthorization_Create/Update/Delete service as described in clause 5.2.5.3.2 of TS 23.502 [4] is to authorise an AF request and to create policies as requested by the authorized AF for the PDU Session to which the AF session is bound. More specifically, the added latency and reliability requirements as described in clause 6.10.2.1 should be included in the AI/ML AF request.\nNOTE:\tIt is not the scope of this solution to specify the event(s) or consideration(s) that triggers the AF decision to apply the ADT Transfer policy to an existing PDU session.\n2.\tThe PCF authorizes the AF request.\n3.\tIf the PCF determines that the AF can't be authorized, it rejects the AF request by including the rejection in Npcf_PolicyAuthorization_Create/Update/Delete response. All the subsequent steps below are skipped.\n4-5. Once the PCF authorizes the AF request, if the AF request is to create or to update the ADT Transfer policy for the given PDU session, the PCF retrieves the corresponding ADT Transfer policy from UDR to derives the PCC rule(s) for the ADT according to the transfer policy that has been pre-provisioned which may include the Flock QoS policy consideration with the minimum QoS requirements. In addition, the AF may specify an individual QoS parameters as described in clause 6.1.3.22 of TS 23.503 [5] to replace the BDT policy for the given PDU session.\n6.\tThe PCF updates the SMF with corresponding new PCC rule(s) with PCF initiated SM Policy Association Modification procedures as described in clause 4.16.5.2 of TS 23.502 [4].\nFurther details on how PCC rules are applied to either future or an existing PDU session are provided in clause 6.1.2.4 of TS 23.503 [5].\nIn order to ensure that sufficient network resources are available to support the ADT when transfer window is approaching, this solution proposes the Procedure for ADT warning notification similar to the concept of the BDT warning notification as described in clause 4.16.7.3 of TS 23.502 [4] to leverage several QoS related Analytic as described in TS 23.288 [6] to assess the likelihood of a QoS change for an Analytics target period in the future in a certain area. This solution borrows the descriptions of the BDT procedures to clause 4.16.7.3 of TS 23.502 [4] with the modifications are shown in \"bold italic\" below.\n\n\n",
                            "figures_meta_data": [],
                            "tables": [
                                {
                                    "description": "Table 6.10.2.1-1: Performance Data from AF",
                                    "table number": 4,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "",
                                    "table number": 5,
                                    "summary": "",
                                    "name": ""
                                }
                            ]
                        },
                        {
                            "title": "6.10.3\tImpacts on services, entities and interfaces",
                            "text_content": "AIML AF shall be able to provide the list of ADT Desired time windows with the corresponding set of primary and alternative QoS parameters that support the latency and reliability requirements to satisfy the AMMT KPIs as specified in TS 22.261 [2] in ADT negotiation request.\nAIML AF determines and requests external provisioning of the flock QoS for the federated group i.e. minimum QoS requirement for the as part of the ADT Transfer policy.\nNWDAF shall be able to provide Network Performance analytics including additional parameters such as average/maximum packet delay, average/maximum packet loss rate, average , minimum and maximum traffic rates for UL and DL during the ADT Transfer policy negotiation procedure.\nDuring the activation of the ADT Transfer Time Window, PCF shall be able to refer to the ADT Transfer policy from the AIML AF and possible from the NWDAF for the QoS performance and predictions reports from the Network Performance and/or DN Performance analytics to derive the PCC rules for the target Desired Time Window. Specifically, the PCF shall be able derive the set of QoS parameters, which may include the Packet Delay Budget (PDB) for UL/DL per UE per Time Window or/and Maximum Packet Loss Rate (PLR) for UL/DL per UE per Time Window or/and Guaranteed/Maximum bit rate for UL/DL per UE per Time Window (on top of the original ADT related PCC rules), and store/retrieve them in/from the UDR as part of the ADT transfer policy.\nPCF shall be available to re-evaluate conditions for the ADT data transmission at any time (prior to the actual transmission) based on the outcome on the enhanced QoS performance monitoring from the Network Performance analytics of NWDAF, which supports the additional QoS parameters (e.g. average/maximum packet delay, average/maximum packet loss rate, minimum/guaranteed/ maximum bitrate) the PCF shall be able to re-negotiate the ADT transfer policy with the AF/NEF.\nNEF shall be able to consider latency and reliability requirements received from the AF in ADT negotiation request as part of authorizing the AF's permission to submit the ADT request.\n",
                            "figures_meta_data": [],
                            "tables": []
                        }
                    ]
                },
                {
                    "title": "6.11\tSolution #11: Traffic routing enhancements for Application AIML Traffic Transport",
                    "description": "",
                    "summary": "",
                    "text_content": "",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": [
                        {
                            "title": "6.11.1\tDescription",
                            "text_content": "This solution addresses key issue #5: \"5GC Enhancements to enable Application AI/ML Traffic Transport\" and KI#1 \"Monitoring of network resource utilization for support of Application AI/ML operations\".\nThe Application AI/ML traffic, i.e. data or ML model for AI/ML operations in application layer, can be transmitted as specific QoS flow(s) which is/are different from the QoS flows used for common application data (i.e. non-AI/ML related data over the application layer). In this solution, the NWDAF collects data and derives analytics information on the QoS flow(s) for Application AI/ML traffic transmission, and based on the analytics information the SMF performs traffic routing optimization for the Application AI/ML traffic.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "6.11.2\tProcedures",
                            "text_content": "Figure 6.11.2-1 shows the procedure that the SMF performs traffic routing for Application AI/ML traffic based on analytics information from the NWDAF.\nThe figure depicts a procedure for traffic routing enhancements for Application AIML Traffic, illustrating the steps involved in improving the routing process.\nFigure 6.11.2-1: Procedure of traffic routing enhancements for Application AIML Traffic\n1.\tBased on the trigger from the application layer, the UE initiates the PDU Session modification procedure, or, based on the AF request, the network initiates the PDU Session modification procedure, as specified in TS 23.502 [4], to establish the QoS flow(s) for transmission of the Application AI/ML traffic between the UE and AF.\n2.\tThe AF of the AI/ML application may trigger the procedure of AF influence on traffic routing for the AI/ML application traffic, i.e. data or ML model for AI/ML operations in application layer.\nStep 1-7 as described in clause 4.3.6.2 in TS 23.502 [4] is performed with the following enhancements:\n-\tin step 1, the AF provides the Application AI/ML traffic related parameters (e.g. DNAI) in the AF request.\n-\tin step 5, the PCF may use service experience analytics per UP path as defined in clause 6.4.3, TS 23.288 [6], to provide an updated list of DNAI(s) for the Application AI/ML traffic, to the SMF.\n-\tin step 6, the SMF may subscribe to service experience analytics and/or DN Performance analytics per UP path, as defined in clause 6.4.3, TS 23.288 [6], for analytics of the Application AI/ML traffic transmission status, possibly with the following enhancements:\n-\tthe QFI(s) of the QoS flow(s) carrying the Application AI/ML traffic are included in the Analytics Filter Information.\n-\tthe output analytics contains the QoS flow level data (e.g. QFI, QoS flow Bit Rate, QoS flow Packet Delay) of the QoS flow(s) carrying the Application AI/ML traffic.\nThe SMF then determines whether the PSA UPF needs to be changed or additional PSA UPF needs to be added for transmission of the Application AI/ML traffic in the QoS flow(s) of the PDU Session, based on the analytics information of Application AI/ML traffic transmission status. If so, the SMF may take the actions as described in step 6 of clause 4.3.6.2 of TS 23.502 [4].\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "6.11.3\tImpacts on services, entities and interfaces",
                            "text_content": "The mechanisms defined in the current specifications (i.e. clauses 4.3.5 and 4.3.6 of TS 23.502 [4], TS 23.288 [6]) for traffic routing and network analytics are reused, with the following enhancements:\n-\tSMF: subscribes to analytics information of Application AI/ML traffic transmission status from the NWDAF, and change or add additional PSA UPF for the PDU Session for Application AI/ML traffic transmission.\n-\tNWDAF: provides analytics information of Application AI/ML traffic transmission status to the SMF. The analytics request and output analytics for Service Experience (or DN Performance) analytics needs to be enhanced.\n",
                            "figures_meta_data": [],
                            "tables": []
                        }
                    ]
                },
                {
                    "title": "6.12\tSolution #12: Enhanced charging for Application AIML traffic transport",
                    "description": "",
                    "summary": "",
                    "text_content": "",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": [
                        {
                            "title": "6.12.1\tDescription",
                            "text_content": "This solution addresses the following aspect of key issue #5 \"5GC Enhancements to enable Application AI/ML Traffic Transport\":\n-\tWhether new 3GPP charging mechanisms are required for identification and charging of Application AI/ML traffic over the user plane that cannot be attributed or charged to the end user?\nThe Application AI/ML traffic, i.e. data or ML model for AI operations in application layer, can be transmitted as specific QoS flow(s) which is/are different from the QoS flow(s) used for common application data (i.e. non-AI/ML related data over the application layer). In this solution, the NWDAF collects data and derives analytics information on the QoS flow(s) for Application AI/ML traffic transmission, and the PCF may set charging rules for the chargeable party, configures PCC rules and updates SM policy for the Application AI/ML traffic based on the analysis information, so as to perform the enhanced charging for Application AI/ML traffic transmission.\nNOTE:\tCharging aspects will be done in collaboration with SA WG5.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "6.12.2\tProcedures",
                            "text_content": "Figure 6.12.2-1 shows the procedure that the PCF performs enhanced charging for Application AI/ML traffic.\nThe figure depicts a simplified procedure for enhancing charging for Application AI/ML traffic, highlighting the steps involved in optimizing the charging process for AI/ML applications. The figure includes a flowchart, a list of steps, and a legend to clearly illustrate the process.\nFigure 6.12.2-1: Procedure of enhanced charging for Application AI/ML traffic\n1.\tAn PDU Session is established/modified as specified in TS 23.501 [3]. The Application AI/ML traffic, i.e. data or ML model for AI operations in application layer, can be transmitted as specific QoS flow(s) in the PDU Session.\n2.\tThe AF sends a Nnef_ChargeableParty_Create request message (AF Identifier, UE address, Flow description(s) or External Application Identifier, Sponsor Information, Sponsoring Status, DNN, S-NSSAI, volume of ML model to be transferred per UE, ML Model transmission time window, network area information, maximum aggregated bitrate) to the NEF, to request to become the chargeable party for transmission of Application AI/ML traffic. Step 1in the procedure of setting a chargeable party at AF session setup (if setted, change of the chargeable party during the session) as specified in clause 4.15.6.4 of TS 23.502 [4] is performed, with the following enhancements:\n-\tparameters that specify the requested Application AI/ML traffic transmission are included, i.e. volume of ML model to be transferred per UE, ML Model transmission time window, network area information, maximum aggregated bitrate, etc.\nIf the application AI/ML traffic has similar characteristics as the background data transfer, the background data transfer policy negotiation as specified in clause 4.16.7 of TS 23.502 [4] can be performed before this procedure; and then a Background Data Transfer Reference ID, instead of the parameters that specify the requested Application AI/ML traffic transmission, is included in the Nnef_ChargeableParty_Create request message.\n3.\tThe NEF may authorize the AF request based on operator configuration and sends a Npcf_Policy_Create request message to the PCF, which contains IP filter information, sponsored data connectivity information and Sponsoring Status (if received from the AF), as specified in step 2-3 of clause 4.15.6.4 of TS 23.502 [4].\n4-5.\t[Optional] The PCF subscribes to the analytics information of the Application AI/ML traffic transmission status from the NWDAF. The PCF invokes a Nnwdaf_AnalyticsSubscription_Subscribe (Analytics ID = Service Experience (or DN Performance), Target of Analytics Reporting = a UE or a group of UEs, Analytics Filter Information = (Application ID, S-NSSAI, DNN, Area of Interest, anchor UPF ID, DNAI, Application Server Address(es), QFI(s)), Analytics Reporting Information = Analytics target period) towards the NWDAF, and receives the Nnwdaf_AnalyticsSubscription_Notify containing the analytics information, as described in clause 6.4 (or clause 6.14) of TS 23.288 [6].\nThe PCF determines and/or updates the charging rules of Application AI/ML traffic transmission in PCC rules according to the analysis information of Application AI/ML traffic transmission and the request in step 3. Specifically, the charging models and corresponding charging rates can be set based on the analytics of (possibly) offered service experience or performance for Application AI/ML traffic transmission.\nThe charging rules may include one or more of the following information, as enhancements to PCC charging specified in clause 4.3.2.2 of TS 23.503 [5]:\n-\tVolume based charging.\nThe existing mechanism is used where different rates are applied according to the volume of ML Model of Application AI/ML traffic.\n-\tTime based charging.\nThe existing mechanism is used where different rates are applied according to the ML Model transmission time window of Application AI/ML traffic.\n-\tVolume and time based charging.\nThe existing mechanism is used where different rates are applied according to the weighted value of ML Model volume, ML Model transmission time window and network area information.\n-\tNo charging.\n6.\tThe PCF sends a Npcf_Policy_Create response message to the NEF. The message contains the result indicating whether the request to become the chargeable party for Application AI/ML traffic transmission in the PDU Session is granted, and the granted charging rules.\n7.\tThe NEF sends a Nnef_ChargeableParty_Create response message to the AF.\n8.\tThe PCF sends an Npcf_SMPolicyControl_UpdateNotify to the SMF as specified in clause 4.16.5 of TS 23.502 [4], with the following enhancements:\n-\tThe PCF includes the latest SM policy information which contains the PCC rules and usage report trigger about Application AI/ML traffic transmission in the Npcf_SMPolicyControl_UpdateNotify. The PCF may determine and/or modify the authorized QoS parameters of Application AI/ML traffic transmission in PCC rules based on the analysis information of Application AI/ML traffic transmission.\nNOTE:\tIf it is detected that the data rate of Application AI/ML traffic transmission is too low, the PCF adjusts the 5QI, GFBR, MFBR, etc. in authorized QoS parameters.\n9.\tAccording to the received usage report trigger from the PCF, the SMF determines the Usage Reporting Rule (URR) for transmitting the Application AI/ML traffic. The SMF triggers the procedures as described in TS 23.502 [4] to:\n-\tsend the URR to the UPF for reporting the relevant usage information of Application AI/ML traffic. According to the reporting rule, the UPF collects the usage information of Application AI/ML traffic and reports it to the SMF.\n-\tsend the information reported by the UPF with session and subscriber related information to the PCF and other charging function entities to perform enhanced charging for Application AI/ML traffic.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "6.12.3\tImpacts on services, entities and interfaces",
                            "text_content": "The mechanisms defined in the current specifications in TS 23.502 [4] and TS 23.503 [5] of charging for sponsored data connectivity with a chargeable party are reused for charging on Application AI/ML traffic, with the following enhancements:\n-\tThe PCF determines and/or updates PCC rules for charging enhancement for Application AI/ML Traffic transmission, which may done based on analytics information of Application AI/ML traffic transmission status from the NWDAF.\n-\tThe SMF provides Usage Reporting Rule (URR) for Application AI/ML traffic transmission to the UPF, and sends the usage information reported by UPF with session and subscriber related information to the PCF and other charging function entities for performing enhanced charging for Application AI/ML traffic.\n-\tThe UPF collects the usage information of Application AI/ML traffic and reports it to the SMF.\n",
                            "figures_meta_data": [],
                            "tables": []
                        }
                    ]
                },
                {
                    "title": "6.13\tSolution #13: Support Application AI/ML Traffic Transport",
                    "description": "",
                    "summary": "",
                    "text_content": "",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": [
                        {
                            "title": "6.13.1\tDescription",
                            "text_content": "In this solution, it is assumed that the UE (or the AI/ML Application client on the UE) establishes a connection to the AI/ML AF in the MNO domain or external to MNO domain over user plane via a PDU session. The AI/ML AF exchanges the AI/ML traffic(s) with the UE (or the AI/ML Application client on the UE) over the established PDU session. This is similar to existing procedure as defined by clause 6.2.8.1 of TS 23.288 [6] with below enhancements and clarifications:\nFor both an AI/ML AF in trusted domain and an AI/ML AF in untrusted domain, the SLA between the MNO and the AI/ML Application Service Provider (e.g. an ASP) determines the AI/ML transport configuration information (per AI/ML Application ID) with any combinations of:\n-\tThe AI/ML AF address: This can be FQDN(s) and/or IP address(es) and or non-IP address(es) that the UE or the AI/ML application client on the UE can communicate to the AI/ML AF or any associated AI/ML applications server(s).\n-\tThe AI/ML DNS server address: This can be optionally used by the UE or the AI/ML Application client on the UE to resolve the AI/ML AF address from a FQDN to the IP address of the AI/ML AF or any associated AI/ML application server(s).\n-\tThe authentication information that enable the AI/ML AF (or any associated AI/ML applications servers) and the UE (or the AI/ML Application client on the UE) to verify the authenticity the AI/ML traffic exchanged.\nNOTE 1:\tThe authentication, authorization and user consent info is out of SA WG2 scope.\nThe AI/ML transport configuration information can be (pre)-configured by the AI/ML Application Service Provider on the AI/ML AF and/ or the AI/ML Application client on the UE.\nThe UE may indicate the possibility and capability to receive the AI/ML transport configuration information as part of PCO during PDU Session establishment and/or PDU session modification procedures. This capability reflects that the UE (or application client on the UE) can translate the FQDN(s) of the AI/ML AF or any associated AI/ML applications server(s) to the IP addresses of the AI/ML AF or any associated AI/ML applications server(s). If so, the UE can receive part of AI/ML transport configuration information via the SMF, namely the AI/ML AF address, AI/ML DNS server address, and the authentication information.\nThe AI/ML Service Provider may use the AF requests to influence the traffic routing as defined by clause 4.3.6 of TS 23.502 [4], with enhancements described below, either directly (for AI/ML AF in trusted domain) or indirectly via NEF (AI/ML AF in untrusted domain) as part of PDU session establishment and/ or modification procedure to update AI/ML transport configuration information and/ or associated validity parameters.\nThe AI/ML AF request includes as Traffic Description any combinations of DNN, S-NSSAI, Application Identifier, Application ID or traffic filtering information that addresses the AI/ML AF or any associated AI/ML applications server(s). If the request is via NEF, the AF request may use an AF service Identifier as Traffic Description and then NEF translates that to any combinations of DNN, S-NSSAI, Application Identifier, Application ID or traffic filtering information. The request may also include several other parameters in addition to AI/ML transport configuration information enabling the 5GC (e.g. PCF and SMF) to compile/ generate the transport policy and associated validity parameters. The AF request may include, for example:\n-\tPotential location information of AI/ML applications that could be in form of DNAI(s) (e.g. for AI/ML AF in trusted domain),\n-\tTarget UE Identifier(s) if transport configuration information is applicable to an individual UE (e.g. for AI/ML operation splitting or AI/ML model distribution), group of UEs (e.g. for AL/ML model distribution or federated learning) or any UE (to support any types of AI/ML operation),\nNOTE 2:\tFor AI/ML AF in trusted domain, this can be as SUPI(s), internal UE identifier(s) or internal group ID(s). For AI/ML AF in untrusted domain, this can be as GPSI(s), external UE identifier(s) or external group ID(s) to be translated to SUPI(s), internal UE identifier(s) or internal group ID(s) by the NEF.\n-\tSpatial validity information if there is any geographic boundaries for transport configuration information.\nNOTE 3:\tFor AI/ML AF in trusted domain, this can be TAI. For AI/ML AF in untrusted domain, this can be as geographic zones to be translated to TAI by the NEF.\n-\tTime validity information if there is any expiry time for transport configuration information.\n-\tUser Plane Latency Requirements if the AI/ML traffic type(s) are associated with certain latency requirements to support AI/ML operation.\n-\tIndication(s) associated with certain AI/ML traffic type(s).\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "6.13.2\tProcedures",
                            "text_content": "The figure depicts the influence of AI/ML on traffic routing and reconfiguration in an AI/ML-enabled network. It illustrates the use of AI/ML algorithms to optimize traffic routing and reconfiguration, allowing for more efficient and intelligent traffic management. The figure shows how AI/ML can be used to predict traffic patterns and adjust routing and reconfiguration decisions accordingly, leading to improved network performance and reduced latency.\nFigure 6.13.2-1: AI/ML AF influence over Traffic routing/ reconfiguration for AI/ML Traffic\nIn this procedure, it is assumed that UE has indicated the possibility and capability to receive part of the AI/ML transport configuration information as part of PCO during PDU Session establishment and/or PDU session modification procedures.\n1-2.\tThe AI/ML AF (or NEF) may create, update (or delete from) the UDR the AI/ML transport configuration information and other related parameters (e.g. via UDM services).\n3.\tThe UDR may store and update the AI/ML transport configuration information and other related parameters (or remove the old parameters if any).\n4.\tThe UDR may notify the PCF. This is based on an earlier subscription of the PCF to modifications of AF requests. Any combinations of DNN, S-NSSAI, AI/ML Application Identifier, SUPI, Internal Group Identifier can be used as the data key to address the PCF.\n5.\tThe PCF determines if the AI/ML PDU session(s) or transport policy are impacted and may update SM polices and may notify the SMF based on SM Policy Control Update.\n6.\tThe SMF may take appropriate actions to reconfigure the User plane of the PDU Session(s) transporting the AI/ML traffic(s). An example action includes but not limited to:\n-\tAllocate a new Prefix to the UE.\n-\tUpdating the UPF (in a target DNAI) with new traffic steering rules.\n-\tDetermining whether to relocate the UPF (e.g. in coordination with AI/ML Application server) considering requirements provided by the AI/ML AF, e.g. on location information, target UE IDs, spatial validity, time validity, UP latency or service requirements or other indication associated with the AI/ML operation.\n7.\tThe SMF may send the target DNAI to the AMF for triggering SMF/I-SMF (re)selection and then inform the target DNAI information for the current PDU session or for the next PDU session to AMF via Nsmf_PDUSession_SMContextStatusNotify service operation.\n8.\tSMF may also update the UE on part of the AI/ML transport configuration information together with other Session Management (SM) subscription information. An example action includes:\n-\tUpdating AI/ML AF address.\n-\tUpdating AI/ML DNS server address.\n-\tUpdating AI/ML authentication information.\nNOTE 1:\tThe UE or the AI/ML application client on the UE can correctly translate the FQDN(s) of the AI/ML AF or any associated AI/ML applications server(s) to the IP addresses of the AI/ML AF or any associated AI/ML applications server(s). This is done by accessing a local, private or global DNS server. As outlined above, the DNS server address or related configurations for the UE can also be optionally shared as part of transport configuration information if needed (e.g. for a private DNS).\nNOTE 2:\tThe AI/ML AF (or NEF) finds the PDU session(s) serving the SUPI, DNN, S-NSSAI from UDM and the allocated IPv4 address or IPv6 prefix or both from the SMF. The AI/ML AF (or NEF) stores the UE IP address or any other external UE IDs during the PDU session establishment to the UE (or AI/ML application client on the UE). The AI/ML AF (or NEF) may correlate and store a mapping of the UE IP address (or any other external UE ID) and the SUPI retrieved (e.g. via UDM/SMF), using the IPv4 address or IPv6 prefix allocated by the SMF.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "6.13.3\tImpacts on services, entities and interfaces",
                            "text_content": "AI/ML AF:\n-\tTo create AI/ML transport configuration information.\nUDR:\n-\tTo maintain AI/ML Application Data in clause AI/ML transport configuration information.\nPCF:\n-\tTo interpret AI/ML request to generate the AI/ML transport policy.\nSMF:\n-\tTo reconfigure Traffic routing rules on UPF based on AI/ML transport policy from the PCF.\n-\tTo update UE on (part of) transport configuration information in addition to other SM subscription information.\nUE (or AI/ML Application Client on the UE):\n-\tTo indicate capability to receive part of AIML transport configuration Information via PCO.\n-\tTo interpret AI/ML transport configuration information.\n-\tTo interact with the AI/ML Application layer on the UE if any part of AIML transport configuration (received via SMF) to be shared.\n",
                            "figures_meta_data": [],
                            "tables": []
                        }
                    ]
                },
                {
                    "title": "6.14\tSolution #14: Flock QoS based Federated Learning Operation",
                    "description": "",
                    "summary": "",
                    "text_content": "Void.\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "6.15\tSolution #15: QoS monitoring for AIML application",
                    "description": "",
                    "summary": "",
                    "text_content": "",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": [
                        {
                            "title": "6.15.1\tDescription",
                            "text_content": "This solution mainly addresses Key Issue #6. The QoS performance of the participating UEs for an AIML application (e.g. Federated Learning) is critical to the outcome. It's desired that the AIML application server may receive real-time QoS performance information or prediction from the 5GC for UEs participating a training session either before or during the session. Application AIML operations, e.g. Federating Learning may require knowing planned change of bitrate, latency, or reliability for a QoS flow to determine whether a training session can be completed within the required window.\nThis solution proposes to extend Performance Measurement Functionality, which was introduced in R16 for ATSSS, to support the real-time QoS measurement in 5GC. The external AIML application server requests and obtains the QoS monitoring/prediction information from the 5GC via network exposure function. The proposal uses the PMF capabilities, and it is independent from ATSSS.\nWhen there are various applications that require PMF measurements and use the same UPF/PMF, the PMF may create different PMF instances for these various applications and each PMF instance operates independently, e.g. using different PMF address and port. For example, one PMF instance may be operating for a MA-PDU Session for ATSSS and another PMF instance may be operating for a single-access PDU Session for AIML application.\nWhen MA PDU Session is used for AIML applications, PMF configuration may accommodate both the ATSSS operation and QoS monitoring needs for AIML application. ATSSS operation uses the PMF measurements that apply to the steering mode, and QoS monitoring for AIML application may share the same measurements used by ATSSS and may benefit from additional new measurements.\nEditor's note:\tWhether and how to support new UE measurement should coordinate with RAN group.\nPMF needs to be extended in the following aspects:\n-\tPMF applies to not only MA PDU but also normal single access PDU Sessions.\n-\tIn addition to RTT and PLR that PMF currently supports, more QoS metric measurements may need to be supported.\n-\tSupport QoS metrics report from UE to UPF.\nA new network function, e.g. AIML Serving Function, or new functionality included in existing NF, such as the PCF, may be introduced in 5GC to handle the QoS monitoring request from the AIML application server. The AIML Serving Function interacts with other 5GC NFs (e.g. SMF) to configure and collect the QoS monitoring report from UEs or UPFs. The AIML Serving Function not only translates AIML specific request (e.g. QoS or performance prediction for a group of UEs) to QoS monitoring requests that can be executed in 5GC, but also can make further intelligent analysis, based on QoS reports collected, and return the analysis/report to AIML system, as illustrated in Figure 6.15.1-1.\nThe figure depicts a graphical representation of QoS monitoring for an AIML application, illustrating the various metrics and indicators that can be monitored to ensure the application's performance. The figure includes a flowchart, which outlines the steps involved in monitoring QoS, as well as a legend to identify the different metrics and their corresponding values. The visualization is complemented by a legend that shows the different colors and shapes used to represent the different metrics, making it easy to understand the data being presented. The figure is a valuable tool for network administrators and developers to understand the application's performance and make informed decisions about its optimization.\nFigure 6.15.1-1: Illustration of QoS monitoring for AIML application\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "6.15.2\tProcedures",
                            "text_content": "The figure depicts a 2-1 PMF-based QoS monitoring and reporting system, illustrating the process of monitoring and reporting on packet loss, jitter, and delay. The system uses a PMF (Packet Management Function) to collect data on packet loss, jitter, and delay, and then uses a PMF-based QoS (Quality of Service) algorithm to generate reports. The system is designed to provide real-time monitoring and reporting of QoS metrics, ensuring that network performance is maintained at a high level.\nFigure 6.15.2-1: PMF-based QoS monitoring and reporting\n1.\tThe external AIML system requests the QoS monitoring information from 5GC. For example, the AIML system may request the real-time QoS performance information, or future QoS performance prediction, for a group of UEs. The request is sent via NEF to the AIML Serving Function. The AIML system provides service requirements, e.g. planned change of bitrate, latency, or reliability for a QoS flow to an authorized 3rd party and it may provide S-NSSA/DNN. The NEF maps external identifiers to internal identifiers, e.g. GPSI into SUPI\n2.\tThe AIML Serving Function identifies the serving SMF and PDU Session IDs used for AIML application for the target UEs, using the existing UDM services (Not shown in the figure).\n3.\tThe AIML Serving Function, request the serving SMF to initiate QoS monitoring for related QoS flows.\n4a/4b.\tThe SMF configures the UE and UPF for PMF-based QoS measurements using the Measurement Assistance Information.\nNOTE:\tThe existing Measurement Assistance Information may be enhanced with additional information related to UE QoS report, such as start/end time or frequency of the report.\n5.\tThe UE and the UPF performs PMF-based QoS measurements.\n6.\tThe UE sends its QoS measurement report in PMF message to the UPF using PMF message over UP\n7.\tThe UPF combines the UE's and its own QoS report and sends it to the SMF.\n8.\tThe SMF forwards the QoS report to the AIML Serving Function.\n9.\tThe AIML Serving Function may analyse the received QoS report of multiple UEs and may derive more information (e.g. QoS prediction), and return the QoS monitoring report to the AIML system.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "6.15.3\tImpacts on services, entities and interfaces",
                            "text_content": "UE:\n-\tExtend support for PMF functionality to single PDU Session, in addition to MA PDU.\nUPF:\n-\tExtend support for PMF functionality to single PDU Session, in addition to MA PDU. New NF or existing.\nNF (e.g. PCF):\n-\tHandle the QoS monitoring request from the AIML application server. It also interacts with other 5GC NFs (e.g. SMF) to configure and collect the QoS monitoring report.\n-\tDefine new SBI interfaces to NEF.\nSMF:\n-\tConfigure PMF functionality to be used for ATSSS and/or application AIML measurements.\n",
                            "figures_meta_data": [],
                            "tables": []
                        }
                    ]
                },
                {
                    "title": "6.16\tSolution #16: Solution for supporting the aggregated QoS parameters based on the Group-MBR",
                    "description": "",
                    "summary": "",
                    "text_content": "",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": [
                        {
                            "title": "6.16.1\tDescription",
                            "text_content": "This solution touches on KI #1, #5, #6 and #7. Federated learning (FL) is a group-based learning method and there will be many files and multiple rounds of interactions between the UEs and the FL server over 5GS during the FL process. Just like any other services, there should be SLA between the MNO and ASP to agree on the allowance of the maximum throughput that can be consumed between the end points (i.e. the group of UEs and the AS) of the given FL operation. Therefore, it is necessary to introduce a system monitoring parameter to assist the 5GS to keep track of the aggregated status of the total throughput usage for the given federated learning operation.\nDuring the FL operation, the application server can be connected to one or more NG-RAN nodes through a single UPF, and each NG-RAN node could be serving multiple UEs participating in FL operation. Figure 6.16.1-1 below, illustrates an example of 10 UEs in total within the service area of a UPF that could be selected to participate in the given FL operation. In a certain round, AS selects 5 of them to be participated in the FL training. In order to ensure that the resources consumed by the 5 UEs are within the specified throughput limit, the UPF keeps track of aggregate bit rate against the Group-MBR among the set of QoS flows of the UEs who participate in the given FL operation. The aggregate bit rate shall not exceed the pre-determined Group-MBR for that specific FL operation. The following summarizes how the aggregated bit rate among the set of QoS flows of the UEs is monitored against Group-MBR:\n-\t10 UEs respectively establish individual PDU sessions with the core network, and can transmit application data through GBR and/or non-GBR QoS flows.\n-\tAs shown in the figure 6.16.1-2, Group-MBR is defined as the upper bound of the aggregate bit rate across all GBR and Non-GBR QoS Flows corresponding to the group of PDU Sessions of the UEs who participate in a group of transmissions concurrently (e.g. Federated Learning (FL) operation) with active user planes. The anchor UPF of the group of transmissions (e.g. FL operation) measures the aggregated bit rate across all GBR and Non-GBR QoS Flows against the Group-MBR provided by associated anchor SMF of the corresponding group of PDU sessions that support the group of transmissions. The aggregated bit rate is measured over an AMBR averaging window which is a standardized value as described in clause 5.7.2.6 of TS 23.501 [3]. The Group-MBR is a monitoring parameter which is provided by the AF to activate the Group-MBR monitoring operation.\n-\tIn the following figures, the UEs participating in a given Federated Learning training session may consume different aggregate bit rate during each round of the FL operation, however, the aggregate bit rate among the corresponding set of QoS flows for each round of the FL operation should not exceed the contracted Group-MBR that was agreed between the ASP and the serving MNO. For example, the value of the contracted Group-MBR is 20 Mbps, the aggregated bit rate across the set of QoS flows for the participating UEs in each round of the FL operation can not exceed the Group-MBR i.e. 20 Mbps.\n-\tThe UPF continues to monitor and measure the aggregate bit rate to assist the AF to ensure that the measured aggregate bit rate of the UEs in the given group should not be greater than the Group-MBR.\n-\tWhen the measured aggregate bit rate value exceeds the Group-MBR, the anchor UPF may perform gating of one or more QoS flows for the given group of UEs based on the policy provided by the AF (to the anchor UPF via the SMF via the PCF) in order to mediate the aggregate bit rate not to exceed the Group-MBR that has been contracted.\nEditor's note:\tWhat and how to apply the gating policy for Group-MBR is FFS.\nThe figure depicts a simplified representation of federated learning scenarios with a single Unified Platform for Federated Learning (UPF). It illustrates the concept of federated learning, where multiple clients collaborate to train a machine learning model, with each client having its own local dataset. The UPF serves as a central hub, facilitating communication between the clients and the server, while maintaining privacy and security. The figure includes a single UPF, which is a key component in the federated learning architecture.\nFigure 6.16.1-1: Federated learning scenarios with a single UPF\nThe figure depicts the definition of the aggregated bit rate and the Group-MBR, which are key concepts in the context of 5G network architecture. The aggregated bit rate is a measure of the total data rate that can be transmitted over a given bandwidth, while the Group-MBR is a method used to optimize the use of the available bandwidth by grouping data into smaller segments. This figure is crucial for understanding the performance of 5G networks and their ability to support high-speed data transmission.\nFigure 6.16.1-2: The definition of the aggregated bit rate and the Group-MBR\nIn order to support the Group-MBR monitoring as described above, this solution proposes to extend the Application Function (AF) Influence on traffic routing functionality to enable the Group-MBR monitoring for the FL operation when such operation is activated by the Application AI/ML AF.\nIt is beneficial to leverage existing AF Influence for Traffic Routing to support Group-MBR monitoring, because it is likely that MEC services will be applied to FL operation.\nMeaning, the AF Influence procedure can be used in the context of AI/ML FL to accomplish two goals:\n1.\tAdjust the original anchor UPF to a local PSA by applying any of the Edge Computing methods described in TS 23.548 [10] and in clause 4.3.5 of TS 23.502 [4] as/if needed.\n2.\tPass on the Group-MBR monitoring information to the proper anchor UPF/local PSA.\nThe existing group policy management and group traffic routing procedures can be easily extended to support Group-MBR monitoring.\nThis solution proposes to introduce a new information element, i.e. information supporting the Group-MBR monitoring, (see 6,16.2.2 below) to be included in the AF request to initiate the Group-MBR monitoring for a set of QoS flows of a group of PDU sessions supporting the FL operation for the given AF. The existing Traffic Description and Target UE Identifier(s) IEs defined in clause 5.6.7-1 of TS 23.501 [3] are used as is for traffic and group identification.\nThis solution assumes that the MNO, which supports the Group-MBR monitoring, is able to provision the subscription information for the group of UEs, associated with FL operation, in a new entry of the Group Data table in the Subscription Data part of the UDR (consumed by the UDM) with the following configurations for the corresponding S-NSSAI and DNN:\n-\tSame SMF is to be selected for all PDU sessions established by any subscriber in the group as currently supported in clause 6.3.2 of TS 23.501 [3] for SMF discovery and selection.\n-\tSame PCF is to be selected for the group of SM Policy Association corresponding to a given S-NSSAI and DNN to provide the SM Policy Control as currently supported in clause 6.3.7.1 of TS 23.501 [3] for PCF discovery and selection, and\n-\tSame PSA UPF is to be selected for UEs that are served by the same S-NSSAI and DNN combination in order to perform the Group-MBR related measurement and to support Group-MBR monitoring.\nDuring PDU Session Establishment procedure of any of the UEs in the above Group to the combination of S-NSSAI/DNN, the AMF will use the above subscription information to discover and/or select the same anchor SMF across all of the PDU Sessions.\nConsequently, that anchor SMF will use the above subscription information to discover and/or select the same anchor PCF and the same anchor UPF across all of the PDU Sessions.\nNOTE:\tIt is implicitly assumed here that a combination of Group-ID/S-NSSAI/DNN can be dedicated for the use of AI/ML FL.\nEditor's note:\tHow to decide which UPF is the anchor UPF (and which are the corresponding anchor SMF and anchor PCF) is FFS.\nEditor's note:\tHow to extend this solution to support multiple UPFs is FFS.\nThe descriptions of this solution are organized as follows:\n-\tClauses 6.16.2.1 - 6.16.2.4 describe how to extend existing AF Influence Routing feature to enable the AF request for Group-MBR monitoring.\n-\tClauses 6.16.2.5 - 6.16.2.6 describe how the Group-MBR is monitored.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "6.16.2\tProcedures",
                            "text_content": "This solution defines Group-MBR as follows:\nGroup Maximum Bit Rate (Group-MBR):\n-\tThe Group-MBR provides the upper bound of the aggregate bit rate across all GBR and Non-GBR QoS Flows corresponding to the group of PDU Sessions of the UEs who participate in a group of transmissions concurrently (e.g. Federated Learning (FL) operation) with active user planes. The anchor UPF of the group of transmissions (e.g. FL operation) measures the aggregated bit rate across all GBR and Non-GBR QoS Flows against the Group-MBR provided by the associated anchor SMF of the corresponding group of PDU sessions that support the group of transmissions. The aggregated bit rate is measured over an AMBR averaging window which is a standardized value as described in clause 5.7.2.6 of TS 23.501 [3]. The Group-MBR is provided by the AF to initiate the Group-MBR monitoring for a set of QoS flows of a group of PDU sessions supporting a group of concurrent transmissions.\nThis solution proposes to update TS 23.501 [3], Table 5.6.7-1: Information element contained in AF request, with a new optional AF Influence information element in AF request to support aggregate bit rate monitoring against Group-MBR. The changes to Table 5.6.7-1 are in \"bold italic\" as shown below.\n\n\nThis solution proposes to extend the AF traffic influence for traffic routing service procedure as defined in clause 5.2.6.7.2 of TS 23.502 [4] to include the new optional information element, Information for Supporting Group-MBR monitoring, to enable the support for Group-MBR monitoring that was described in clause 6.16.2.2 above for Table 5.6.7-1: Information element contained in AF request, in TS 23.501 [3]. The changes are shown below in \"bold italic\".\n\n\nThis solution proposes to extend the procedure \"Processing AF requests to influence routing for Session not identified by a UE address\" as defined in clause 4.3.6.2 of TS 23.502 [4] to enable the support for Group-MBR monitoring. The following descriptions focus on the changes to the procedure as described in clause 4.3.6.2 of TS 23.502 [4].\n\n\n1.\tApplication AI/ML AF includes the new information element, Information for Supporting Group-MBR Monitoring, as described in 6.16.2.2 for Table 5.6.7-1 of TS 23.501 [3] in the AF request to NEF. The above information element includes also the Group-MBR monitoring parameter which has/have bit rate monitoring value(s) for uplink and downlink traffic flows.\nEditor's note:\tWhether the Group-MBR monitoring parameter should be pre-configured in the UDM/UDR or dynamically provided by the AF is FFS.\n2.\tThe AF includes the new information element provided in Step-1 to NEF in case of Nnef_TrafficInfluence_Create or Update.\n3.\tIn case of Nnef_TrafficInfluence_Create or Update, the NEF stores the AF request together with the new information element provided in Step-1 by the AF in the UDR which indicates all the future and the existing PDU sessions for the specified group (i.e. per (S-NSSAI, subscribed DNN)) are required to be served by the same PSA UPF and such UPF is required to be able to support the monitoring of the Group-MBR for the specified set of QoS flows among the group of PDU sessions for the specific group operation.\nNOTE:\tThe selection of the same PSA UPF by the SMF is feasible as described in clauses 6.3.3.1 and 6.3.3.2 of TS 23.501 [3] by leveraging the procedures as defined in clauses 4.4.1 and 4.4.3 of TS 23.502 [4].\n6.\tThis solution applies the same design consideration as the current procedure defined in clause 4.3.6.2 of TS 23.502 [4] to the existing PDU session. Based on the updated policy information about the PDU session from PCF, the SMF may take the new action proposed by this solution, when applicable, to reconfigure the UPF of the existing PDU session by recognizing for the need of the UPF to support the monitoring the Group-MBR among the group of PDU session.\nAfter the PDU sessions and the corresponding QOS flows are established between the UEs and the AF, the PSA UPF is activated by the SMF to monitor the aggregate bit rate among the active QoS flows for the given DNN and S-NSSAI to ensure that the measured aggregated bit rate does not exceed the Group-MBR.\nThe figure depicts a group-MBR monitoring system, where AF requests are processed and monitored. The system includes a group-MBR (Group Multiplexer-Based Reconfiguration) controller, which is responsible for managing the group-MBR configuration. The figure shows the AF request processing and monitoring process, with the controller displaying the status of the AF requests and the status of the group-MBR configuration.\nFigure 6.16.2.5-1: Group-MBR Monitoring via AF request\n1.\tSeveral PDU sessions are established between the group of UEs and their serving AF for the given application by leveraging the AF Influence Routing procedures with the new IE introduced by this solution as described in clause 6.16.2.4 to support the Group-MBR monitoring.\n2.\tAF invokes the Nnef_EventExposure_Subscribe and Nsmf_EventExposure_Subscribe services operation as described in steps 1, 2, 3c, 3d and 5 in clause 4.15.3.2.3 of TS 23.502 [4] to subscribe the event for the monitoring the Group-MBR for its FL operation.\n3.\tSending the acknowledgement to the AF of step 2 above for initiating the Group-MBR monitoring.\n4.\tWith the support from PSA UPF, SMF initiates the Group-MBR monitoring for specific QoS flow for specific PDU session within the group of PDU sessions via N4 signalling. SMF considers this as an active and ongoing operation initiated by the AF without the constant or repeated requests from AF.\nEditor's note:\tWhether to extend PSA UPF or SMF to measure the aggregate bit rate among the target QoS flows and/or compare it against Group-MBR and notify it to the proper NF (e.g. SMF or NEF) is FFS.\n5.\tIf the measured aggregated bit rate exceeds the Group-MBR, SMF sends the Nsmf_EventExposure_Notify and Nnef_EventExposure_Notify in steps 6e and 7 as described in clause 4.15.3.2.3 in TS 23.502 [4] to AF via NEF for the Group-MBR monitoring result with the event as described in clause 6.16.2.6 below.\n6.\tAF may provide policy to SMF via PCF as described in step 1a in clause 4.16.5.2 of TS 23.502 [4] to apply gating towards one or more QoS flows in respond to the overflow of the Group-MBR.\nNOTE: The decision on how AF determines for which the QoS flow(s) to apply the gating policy is beyond this specification.\n7.\tAF unsubscribes to the Group-MBR monitoring event by invoking Nnef_EventExposure_Unsubscribe and Nsmf_EventExposure_Unsubscribe services in steps 1, 2, 3c, 3d and 5 as described in clause 4.15.3.2.3 of TS 23.502 [4].\n8.\tSMF/UPF stop(s) the Group-MBR Monitoring.\nThis solution extends the existing Monitoring Events leveraging NEF event exposure as defined in clause 4.15.3 of TS 23.502 [4] to support Group-MBR monitoring event for a set of QoS flows of a group of PDU sessions for a given AF operation (e.g. Application FL operation). The following focus on the changes to Nnef_EventExposure Service as defined in clause 4.15.3 of TS 23.502 [4].\nThis solution proposes to add a new event to Table 4.15.3.1-1 in TS 23.502 [4] for \"Aggregate bit rate Monitoring for Group-MBR\" and the SMF is responsible for the event detection. For this new event, if the monitored aggregated bit rate of the group of PDU sessions corresponding to the specified S-NSSAI, DNN and 5 tuple traffic filter exceeds the Group-MBR value, the SMF will notify the AF which may apply the gating policy for one or more QoS flows. When the monitored aggregate bit rate of the group of PDU sessions fall below the Group-MBR, the AF will also be notified and it may restore the bitrate allowance on those QoS flows. The aggregated bit rate is measured over an AMBR averaging window which is a standardized value as described in clause 5.7.2.6 of TS 23.501 [3].\nNOTE:\tThe decision on how AF determines for which the QoS flow(s) to apply the gating policy is beyond this specification.\nThe description of the new NEF monitoring event as introduced by this solution is to be captured in Table 4.15.3.1-1 of TS 23.502 [4] as shown below.\n\n\n",
                            "figures_meta_data": [],
                            "tables": [
                                {
                                    "description": "",
                                    "table number": 6,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "",
                                    "table number": 7,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "",
                                    "table number": 8,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "",
                                    "table number": 9,
                                    "summary": "",
                                    "name": ""
                                }
                            ]
                        },
                        {
                            "title": "6.16.3\tImpacts on services, entities and interfaces",
                            "text_content": "-\tTBD.\n",
                            "figures_meta_data": [],
                            "tables": []
                        }
                    ]
                },
                {
                    "title": "6.17\tSolution #17: 5GS assistance for FL member selection using QoS monitoring",
                    "description": "",
                    "summary": "",
                    "text_content": "",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": [
                        {
                            "title": "6.17.1\tDescription",
                            "text_content": "The basic principle for this solution, is for the AF to provide the enhanced NEF (eNEF) the candidate UE selection request which includes the UE filtering policy (e.g. target location). and eNEF activates the QoS monitoring on a group of UEs at a specific target location. The set of candidates UEs requested by the AF will then be identified based on their respective delay performance and the UE filtering policy. The UEs which have the best monitoring results (i.e. low latency) and comply to the UE filtering policy will be considered as the candidate UEs to be provided to the AF via eNEF.\nPrior to the AF to select a group of UEs to participate in its FL operation, the following events happen:\n1)\tThe AF provides UE filtering policy to enhanced NEF (eNEF). The UE Filtering policy includes:\n-\tOne or more UE address(es) (IP address or MAC address) and AF Identifier(s) together with the protocol port info: This parameter is used to identify an initial group of UEs for the specific application to be further filtered.\n-\tMonitoring area (i.e. AOI): the 5GC considers the UE as a candidate UE only when the UE is in the monitoring area (i.e. Area of Interest - AOI)\n-\tThe number of candidates UEs for reporting e.g. select 6 candidate UEs with lowest measurement delay among the group of UEs being monitored for FL operation;\n-\tThe minimum local training data acquisition time interval: select UEs with different data acquisition time(e.g. sensors waking up at different time may gather different data in the same AOI)\n-\tThe minimum separation distance between candidate UEs based on locations: select those UEs that are geographically separated with sufficient distance(e.g. two vehicles close by may overlap in their Field of View and have same or similar data)\n-\tData sources of the local training data for the set of distributed nodes: defined by whom the data are generated, e.g. two BMW vehicle may have similar data and less preference than one BMW and one Toyota.\n2)\tBased on UE filtering policy, the eNEF triggers the QoS monitoring per UE per QoS flow:\neNEF triggers the QoS monitoring per UE per QoS flow reusing the QoS monitoring mechanism. According to the UE Filtering policy and the monitoring results, the eNEF applies UE filtering policy in order to determine the set of candidate UEs. The eNEF reports the list of candidate UEs to the AF.\n3)\tBased on the candidate UEs provided by the eNEF, The AF make the final decision on the set of target UEs to be participated in its FL operation.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "6.17.2\tProcedures",
                            "text_content": "The figure depicts a 5G signal path with various elements such as base stations (gNB), user equipment (UE), and scatterers. It highlights the importance of beamforming techniques to mitigate interference and the use of optical fiber-optic backbone for redundancy and failover. The layered design of the optical backbone aligns with SDN principles, providing a reliable and efficient communication network.\nFigure 6.17.2-1: 5GS assistance for QoS monitoring support for FL member selection\n1.\tUE establishes PDU session as described in clause 4.3.2.2.1 of TS 23.502 [4].\n2.\tAF sends Candidate-UE List Filtering request with Candidate-UE filtering policy (e.g. Area of Interest (AOI) for QoS monitoring) to request the eNEF to provide the list of UEs that match the Candidate-UE filtering policy. In order to do so, the eNEF may need a new service operation to enable the AF to request 5GS assistance to support the Candidate UE selection. The AF may provide a list of IP addresses or an External Group Identifier to eNEF.\n3.\tIf the list of UE IP addresses is received, the eNEF triggers the procedure as defined in TS 23.502 [4], Clause 4.15.10 in order to obtain the corresponding list of SUPIs.\nIf the External Group Identifier is received, the eNEF triggers the procedure as defined in TS 23.502 [4], Clause 4.13.2 in order to translate the External Group Identifier to Internal Group Identifier.\n4-5.\tIf the monitoring area is received, the eNEF needs to identify the set of Candidate UEs which are located at the monitoring area. In order to achieve it, the eNEF is subscribed to Namf_EventExposure_Subscribe service with Internal Group Identifier (i.e. S-NSSAI, DNN) and event ID = Number of Ues present in a geographical area. If AF provided a specific list of UEs in step 1, eNEF matches the UE list from the AF against the Candidate-UE list from the Namf_EventExposure_Notify in order to determine the list of Candidate UEs which are associated with the AF in the monitoring area. Otherwise, all UEs in the Candidate-UE list from the Namf_EventExposure_Notify are considered as the list of candidate UEs.\n6.\tThe eNEF also needs to keep track of whether any of the Candidate UEs identified from Steps 4-5 above will move in or out of the monitoring area, hence, the eNEF invokes the Namf_EventExposure_Subscribe service for each UE from candidate list by providing the corresponding SUPI and specifies the event ID=UE moving in/out of AoI(PRA) to monitor the each candidate UE moving in/out of the monitoring area.\n7-11.\tThe eNEF triggers the PDU session modification to activate the QoS monitoring. Based on the received UE filtering policy, it may request the SMF/UPF to trigger the monitoring periodically per UE per QoS flow, so that the UPF can provide the measurement delay to eNEF periodically.\nIn order to do so, the Npcf_PolicyAuthorization_Create request procedures as described in clause 4.15.6.6 of TS 23.502 [4] as well as other QoS monitoring related procedures to trigger the per UE per QoS flow delay monitoring for each UE which is present in the monitoring area can be used.\n12-14.\tBased on the Candidate-UE filtering policy, the location related event notification from AMF and the measurement result from UPF, the eNEF applies the Candidate-UE filtering policy to determine the set of Candidate UEs. The eNEF will map the list of SUPI to the list of UE IP address or map the Internal Group Identifier to External Group Identifier. The UEs which have the best monitoring results (i.e. low latency) and within the monitoring area will be considered as the candidate UEs to be provided to the AF via eNEF.\nThe eNEF may need a new service operation to send the Candidate UE list to AF to reply the request from step 2.\n15-16.\tIf a given UE moves out of the monitoring area because of steps 6 above, the eNEF will be notified by the AMF via Namf_EventExposure_Notify service. In such case, the eNEF relays such notification to the AF.\n17.\tWhen AF completes the QoS monitoring operation or a specific UE has moved out of the monitoring area (as described in Steps 14-15 above), the AF triggers the Nnef_AFsessionWithQoS_Revoke to terminate all QoS monitoring operation for all UEs or for specific UE, respectively.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "6.17.3\tImpacts on services, entities and interfaces",
                            "text_content": "eNEF:\nA new service to enable the AF to request 5GS assistance to support the candidate UE selection and send the Candidate-UE list to AF.\nBased on the Candidate-UE List filtering request from the AF, eNEF subscribes the event to AMF.\nBased on the event notify from AMF, eNEF trigger the QoS monitoring.\nApply Candidate-UE filtering policy to filter the Candidate-UE list based on the information provided by the AMF and UPF and provide the Candidate-UE list to the AF.\nAF:\nSend the Candidate-UE-List filtering request to eNEF.\n",
                            "figures_meta_data": [],
                            "tables": []
                        }
                    ]
                },
                {
                    "title": "6.18\tSolution #18: 5GS assistance for FL member selection based on UE's visited AOI information",
                    "description": "",
                    "summary": "",
                    "text_content": "This contribution addresses KI#7 on \"5GS Assistance to Federated Learning Operation\" by providing 5GS assistance for FL member selection based on UE visited AOI information.\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": [
                        {
                            "title": "6.18.1\tDescription",
                            "text_content": "Federated Learning (FL) is a good method to use multiple UEs' local dataset and computation while preventing the sensitive information exposed from being exposed. To perform FL operation, it is possible for a centralized FL operation to involve several EC servers, for example, better proximity with the target FL clients to perform distributed FL training operation. A typical scenario is shown in Figure 6.18.1-1 below, where an EC server is organizing UEs for FL training within its coverage area, meanwhile the training model applies to a larger area which is beyond the EC server's coverage.\nThe figure depicts a network setup where an EC server, equipped with a training model, determines the target UEs within its coverage area to perform FL training. The training model's applicability area can be larger than its coverage area, allowing for more efficient training.\nFigure 6.18.1-1: A EC server determines the target UEs within its coverage to perform the FL training, where the training model's applicable area can be larger than its coverage area\nAs shown in Figure 6.18.1-2, in order to train a model of trajectory prediction applying to the model's applicable area, the application server (EC server) needs to find the UEs which are currently under its coverage but they were moved from a different Area Of Interests (AOIs) within the model's applicable area. Those UEs are expected to be able to provide a more diverse dataset that offers broader representation of the whole model's applicable area.\nThe given telecommunication figure depicts a network architecture with various components, including base stations (gNB), user equipment (UE), and scatterers. The figure illustrates the signal propagation in a 5G network, highlighting the importance of beamforming techniques to mitigate interference. The architecture includes core switches, optical line terminals (OLTs), and distributed nodes, which are essential for maintaining network reliability and scalability. The figure also highlights the use of FL (Fiber-Optic Localization) and EC (Edge Computing) servers to select the UEs with the most relevant datasets in different AOIs, ensuring that the model's applicability is represented accurately.\nFigure 6.18.1-2: The left picture shows all UEs' data set are in a subset of the whole district which cannot represent the model's applicable area, so an FL EC server should select the UEs that each of them respectively has a dataset in different AOIs as the right picture shows\nWith the motivation described above, this solution is to enable the 5G assistance to the AF to select the UEs which are within the FL server coverage, however, were moved from the AOI that is outside of the FL server coverage but within the model's applicable area. This approach allows the FL server to select the member UEs which have the dataset history of other AOI(s) so that they can provide broader representations of a model applicable area. To achieve it, the following concepts are defined in order to describe this solution:\n-\tFL Coverage Area - the coverage area that the specific FL server applies the training.\n-\tModel's Applicable Area - the area that the FL trained model can apply.\n-\tHistorical Nomadic Period - The \"historical nomadic period\" is referred to the minimum duration that the UE was roving within the visited AOI as defined in TS 23.288 [6] in order to consider the UE's dataset to be beneficial for the FL training operation. Note that, the determination of the duration for the historical nomadic period is application implementation decision which is beyond the scope of this solution.\n-\tTarget Area Of Interest (AOI) - the target AOI which is beyond the FL coverage area but is within the model's applicable area. Target AOI has the same concept as the visited AOI as defined in TS 23.288 [6].\nThis solution proposes the following information exchanges between the AF and the 5GC in order to support the Application FL member selection based on visited AOI considerations:\n-\tFrom the AF to 5GC:\n-\tTarget AOI;\n-\tFL Coverage Area; and\n-\tHistorical nomadic period for the given target AOI.\n-\tFrom 5GC to AF:\n-\tthe 5GC selects the in-coverage UEs coming from the target AOI and have been roving there over historical nomadic period.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "6.18.2\tProcedures",
                            "text_content": "The figure depicts a 5G assistance system for FL member selection, showing the relationship between the visited AOI (Area of Interest) and the UE's visited AOI. The system uses a combination of 5G signal strength, UE location, and the visited AOI to determine the most suitable FL member. This system is designed to improve the selection process and ensure the most efficient use of resources.\nFigure 6.18.2-1: 5GS assistance for FL member selection based on UE's visited AOI\nNOTE:\tThe functionality of the NEF has been extended in this solution in order to support the assistance of the FL member selection for the given FL operation.\n1.\tIn order to select the UEs with broader dataset which are within the model's applicable area, the AF requests 5GS assistance to support the UE selection by considering the UE's visited AOI info. AF includes the External Group Identifier and the following filtering info as part of the FL UE selection request:\n-\tTarget AOI and historical nomadic period:\n-\tThe Target AOI where the UEs have been roving over the historical nomadic period before moving into the FL coverage area.\n-\tFL Coverage Area:\n-\tThe FL training server's coverage area, i.e. the coverage area of the FL training server where the selected UEs participate in the FL operation\n2.\tNEF translates the External Group Identifier to Internal Group Identifier.\n3-4.\tIn order to locate the group of UEs which are associated with the AF and are within the FL training server coverage (i.e. FL coverage area), the NEF invokes Namf_EventExposure_Subscribe service operation with the Internal Group Identifier, event ID = Number of UEs present in a geographical area. AMF will provide a list of UEs that are within the FL coverage area to the NEF using the Namf_EventExposure_Notify service operation. The NEF obtains the list of possible target UEs from AMF within the FL training server's coverage.\n5.\tIn order to identify the appropriate NWDAF which can provide analytic output to derive the visited AOI info for the possible target UEs above, the NEF needs to select the suitable NWDAF by initiating the NWDAF discovery request (Analytics ID = UE mobility, AOI = Target AOI) with Internal Group Identifier.\n6-7.\tThe NEF invokes NWDAF Analytics Info request (Internal Group Identifier, Analytics ID = UE mobility, Filters include \"Visited AoI = Target AOI\" and \"target period = historical nomadic period\"). NWDAF will then provide a list of UEs that were ever roving within the target AOI, at the minimum, over the historical nomadic period. Then the NEF gets the corresponding statistics of UE mobility (as defined in TS 23.288 [6], clause 6.3.2)\n8-9.\tThe NEF compares the UE list provided by the AMF in steps 3-4 against the UE list provided by the NWDAF in steps 6-7. The NEF will then determine the FL candidate UEs which are now within the FL coverage area but were roving within the target AOI over the historical nomadic period as requested by AF. The NEF notifies AF for such UE candidate list.\n10.\tThe NEF also needs to consider the list of UEs which are now within the FL coverage area, but may move out of the FL coverage area. Therefore, for each UE in the candidate list in steps 8-9, the NEF invokes the Namf_EventExposure_Notify service with UE ID = SUPI, Event ID=UE moving in/out of AOI (PRA) to keep track the movement of the UE(s) in/out of the AOI.\n11-12.\tIf step 10 identifies any UE which is moving out of the FL coverage area, the NEF may further notify AF of the given UE which is moving out the coverage.\n13.\tWhen AF completes the FL operation, it terminates the 5GS assistance support for the UE selection based on the UE's visited AOI info.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "6.18.3\tImpacts on services, entities and interfaces",
                            "text_content": "NEF:\n-\tNew service operation to provide the candidate UE selection function.\n-\tSelect the candidate UE list based on the Interested area information and historical period and the coverage information provided by AF.\nAF:\n-\tRequest NEF to provide the candidate UE list based on the Target AOI information and historical period and the coverage information.\n",
                            "figures_meta_data": [],
                            "tables": []
                        }
                    ]
                },
                {
                    "title": "6.19\tSolution #19: 5G assisted FL member selection",
                    "description": "",
                    "summary": "",
                    "text_content": "",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": [
                        {
                            "title": "6.19.1\tDescription",
                            "text_content": "This solution is applied to KI#7: 5GS Assistance to Federated Learning Operation.\nOne aspect in KI#7 is about 5GS assist to selection of UEs for application layer FL operation. The AF may select a list of UEs in different location for FL, for example, different UEs in different registration areas, different cells and maybe in different geographic area. Since the application does not know the UE location information and the operator may not want to expose the UE location information to the AF, the AF may request the 5GC to provide assistance information to AF to determine the final list of UEs for FL.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "6.19.2\tProcedures",
                            "text_content": "AF sends an analytics request to NWDAF to provide a list of UEs that in different location in specific duration time according to the UE mobility prediction. The procedure is described in Figure 6.19.2-1.\nThe figure depicts a 5G assisted FL member selection procedure, illustrating the steps involved in selecting a suitable member for the network. The figure includes a flowchart with various stages, such as network analysis, network planning, and network design, as well as a matrix of criteria for evaluating the candidate members. The figure also includes a legend to help understand the different stages and criteria. Overall, the figure provides a comprehensive overview of the 5G assisted FL member selection process, highlighting the importance of network analysis, network planning, and network design in selecting suitable members for the network.\nFigure 6.19.2-1: 5G assisted FL member selection procedure\n1.\tAF sends Nnef_AnalyticsExposure_Subscribe to NEF with the Analytics ID is \"UE mobility\", event type set as location requirement. The location requirements includes a list of location information and the required number of UEs that in these areas. If the AF is configured with the registration / cell information of the network, The location information in the location requirement may include a list of registration area, list of different cell ID and list of different geographic area. Otherwise, if the AF is not configured with the registration / cell information of the network, the AF provides the required geographic area in this message.\nThe Application ID is included in this message.\nAF may provide a list of UE Identity in this message or AF indicates \"any UE\" in this message.\n2.\tNEF forwards the requested to NWDAF via Nnwdaf_AnalyticsSubscription_Subscribe message.\nStep 3 to step 6 are only performed if \"any UE\" is included in step 1. If the UE Identity is provided by AF, NWDAF will perform step 7 directly.\n3.\tIf \"any UE\" is requested by AF in step 1, the NWDAF will determine a UE list that activate the application.\nNWDAF sends Npcf_EventExposure_request message to PCF with the Application ID to ask PCF detection the start or stop of application traffic.\n4.\tPCF install a PCC Rule and activate start and stop of application detection in the SMF(s).\n5.\tSMF instructs the UPF to detect the Start and Stop of the application traffic for the PCC rules used for application detection for the Application ID and report the result to PCF.\n6.\tPCF reports the UE list that start the application traffic for the specific Application ID to NWDAF. The received UE list are the UEs that activate the application for the Application ID.\n7.\tIf \"UE Identity\" is provided by AF in step 1, the NWDAF will initiate UE mobility analytics for each UEs that requested by AF.\nIf \"Any UE\" is requested by AF in step 1, the NWDAF will initiate UE mobility analytics for each UEs that received in step 6.\nThe UE mobility prediction procedure is described in TS 23.288 [6], the enhancement with more accurate UE location statistics and UE location predictions that are considered in eNA_Ph3.\n8.\tNWDAF further determine a UE list based on the location requirement that received in step 2, e.g. selects different UEs that located in different location area and reports the list of UE Identity to NEF via Nnwdaf_AnalyticsSubscription_Notify message.\n9.\tNEF sends the list of UE Identity to AF via Nnef_AnalyticsExposure_Notify. AF will further determine the FL members, for example, AF may consider the the received UE list, local configuration and UE client FL capability that negotiated between UE client and Application server. How does AF determine the FL members is out of 3GPP scope.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "6.19.3\tImpacts on services, entities and interfaces",
                            "text_content": "NWDAF:\n-\tRequests the application detection for the Application ID from PCF and determines a list of UE that activate the Application traffic.\n-\tInitiates the UE mobility analytics for the determined list of UE and further determines a group of UE based on the location requirement provided by AF.\n",
                            "figures_meta_data": [],
                            "tables": []
                        }
                    ]
                },
                {
                    "title": "6.20\tSolution #20: 5GS assistance to reduce the latency divergence",
                    "description": "",
                    "summary": "",
                    "text_content": "",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": [
                        {
                            "title": "6.20.1\tDescription",
                            "text_content": "This solution addresses Key Issue #7 \"5GS Assistance to Federated Learning Operation\" on FL performance.\nAs shown in Figure 6.20.1-1, one iterator process for the FL model training phase is as follows:\n-\tStep 1: Each UE in the FL group derives the local ML model information based on the its own raw data and sends the local ML model information to the AF/AS.\n-\tStep 2: When the local ML model information from all the UEs in the FL group are received, the AF/AS aggregates all the local ML model information into a global ML model information.\n-\tStep 3: The AF/AS feedbacks the global ML model information to each UE.\n-\tStep 4: Each UE in the FL group derives the update local ML model information based on the global ML model information.\nThe figure depicts a training process of application-level Federated Learning, illustrating the steps involved in training a machine learning model on a decentralized dataset. The process includes data collection, model training, and model evaluation, all within a federated learning framework.\nFigure 6.20.1-1: Training process of application level Federated Learning\nThe selected UEs to participate in FL operation may have different local computing capabilities and 5GS communication capabilities, which affects the efficiency of FL operation (e.g. FL model training). Specifically, the local computation delay and the model transmission delay of different UEs may be quite different. However, if some security aggregation algorithms are used, the AF/AS cannot update the global model information until all UE transmissions are completed, resulting in a longer overall training delay.\nTo solve this problem, as shown in Figure 6.20.1-2, the transmission delay of different UEs can be set or adjusted so that the sum of local computation delay and model transmission delay of different UEs can be nearly the same.\nThe figure depicts a graph with two axes: the x-axis represents the delay in milliseconds, and the y-axis represents the number of users. The graph shows the relationship between delay and the number of users, highlighting the importance of optimizing UE transmission delay for better user experience and network performance.\nFigure 6.20.1-2: Optimization of UE transmission delay\nBefore FL operation starts, the AF can collect the local computation delay of UE participating in FL operation, and the AF may request PCF to set different PDB according to the local computation delay of different UEs.\nNOTE:\tThe AF may obtain the data volume to be transmitted of different UEs via application layer, and the AF may request PCF to set different PDB according to the local computation delay and data volume to be transmitted of different UEs.\nDuring the FL operation, the AF may calculate the mean value of the sum of local computation and transmission delay of different UEs as the expected FL updating delay for UL (i.e. the sum of local computation delay and UL transmission delay). If the actual FL updating delay for UL of UE is lower or higher than a threshold related to the expected FL updating delay for UL, the AF may request PCF to adjust the QoS parameters (e.g. 5QI, ARP, GFBR) of QoS flow associated with the UE.\nNOTE:\tThe resource type of QoS Flow may change from Non-GBR to GBR or Delay-critical GBR based on the requirements provided by the AF.\nIn addition, during the FL model training, the AF may subscribe the predicted UE transmission delay to NWDAF, then the AF can calculate the predicted FL updating delay for UL of different UEs based on the local computation delay and the predicted UE transmission delay from NWDAF. Then the AF can adjust the QoS parameters (e.g. 5QI, ARP, GFBR) of QoS Flow for the UE if the predicted FL updating delay for UL of UE is lower or higher than a threshold.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "6.20.2\tProcedures",
                            "text_content": "The figure depicts a simplified representation of the 5G assistance process, which aims to reduce latency divergence in real-time communication. It illustrates the steps taken by 5G networks to ensure seamless communication, including the use of 5G-specific protocols and technologies. The figure highlights the importance of network slicing, network slicing, and network slicing in managing latency and ensuring high-quality communication.\nFigure 6.20.2-1: Procedures of 5GS assistance to reduce the latency divergence\n0.\tBefore FL operation starts, AF can collect the local computation delay of UE participating in FL operation.\nNOTE 1:\tStep 0 is application layer operation, which is not within the scope of 3GPP.\n1.\tThe AF determines to adjust the PDB of QoS Flow according to the local computation delay of different UEs.\n2.\tThe AF sends the QoS parameters (i.e. PDB) to be modified to the PCF using Npcf_PolicyAuthorization_Create/Update Request service operation.\n3.\tThe PCF sets QoS parameters based on the request from the AF and generates PCC rules, and then SMF binds the PCC rules to the corresponding QoS flow as defined in clause 6.1.3.2.4 of TS 23.503 [5].\n4.\tThe PCF instructs the AF policy establishment success or failure using Npcf_PolicyAuthorization_Create/Update Response service operation.\n5.\tThe application layer FL operation between UE and AF starts.\nNOTE 2:\tStep 5 is application layer operation, which is not within the scope of 3GPP.\n6a.\tThe AF collects the actual FL updating delay for UL (i.e. the sum of local computation and UL transmission delay) of UE, and may calculate the mean value of actual FL updating delay for UL lay of different UEs as the expected FL updating delay for UL. The AF determines to adjust the QoS parameters (e.g. 5QI, ARP, GFBR) of QoS Flow associated with the UE whose actual FL updating delay for UL is lower or higher than a threshold related to the expected FL updating delay for UL.\nNOTE 3:\tThe AF collects the actual FL updating delay for UL and calculate the expected FL updating delay for UL of different UEs are application layer operations, which are not within the scope of 3GPP.\nNOTE 4:\tThe AF may also tell the UE to wait (if it is too fast) or remove the UE from FL group (if it is too slow), but this solution out the scope of 3GPP and will not be discussed here.\n6b-9b. The AF subscribes the predicted UE transmission delay to NWDAF for the UE participating in FL operation, then the AF can adjust the QoS parameters of QoS Flow for the UE according to the UE Communication Predictions obtained from NWDAF.\n10.\tThe AF sends the QoS parameters (e.g. 5QI, ARP, GFBR) to be modified to the PCF using Npcf_PolicyAuthorization_Update Request service operation.\n11.\tThe PCF updates QoS parameters based on the request from the AF and generates PCC rules, and then SMF binds the PCC rules to the corresponding QoS flow as defined in clause 6.1.3.2.4 of TS 23.503 [5].\n12.\tThe PCF instructs the AF policy establishment success or failure using Npcf_PolicyAuthorization_Update Response service operation.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "6.20.3\tImpacts on services, entities and interfaces",
                            "text_content": "AF:\n-\tSubscribes the predicted UE transmission delay to NWDAF for the UE participating in FL operation.\nNWDAF:\n-\tProvides the predicted UE transmission delay to AF.\n",
                            "figures_meta_data": [],
                            "tables": []
                        }
                    ]
                },
                {
                    "title": "6.21\tSolution #21: Exposure of UE performance or a group of UEs performance",
                    "description": "",
                    "summary": "",
                    "text_content": "",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": [
                        {
                            "title": "6.21.1\tDescription",
                            "text_content": "This solution aims to address the key issue #7, it addresses how to monitor and expose a UE or a group of UEs performance (e.g. aggregated QoS parameters). To address how to monitor and expose a UE or a group of UEs performance (e.g. aggregated QoS parameters), this solution follows the principles below:\n-\tThe group of UEs performance are defined by the combination of event parameters that are defined in table 6.1.3.18-1 in TS 23.503 [5] and supported by Nnef_EventExposure service and the group performance type (i.e. min value, max value, mean value, sum of values). For instance, the combination for representing \"longest UL delay in UEs\" can be represented by (Event ID: \"QoS Monitoring parameters\", QoS parameter to be monitored: \"UL packet delay\", Group Performance Type: \"max\").\n-\tEnhanced NEF event exposure service by adding \"Group Performance Type\" (i.e. max, min, mean, sum) as a new optional input parameter of Nnef_EventExposure_Suscribe service operation. For instance, when AF want to know the longest UL delay among UEs in the group, AF sends event exposure request message with [Addresses of UEs, Event ID: \"QoS Monitoring parameters\", QoS parameter to be monitored: \"UL packet delay\", Group Performance Type: \"max\", Group Reporting Mode: \"Group Member\"] to NEF.\n-\tEnhanced Event Reporting Information by adding the \"Group Reporting mode\" parameter (i.e. \"Group Member\", \"Group Reporting Guard Time\") as an optional parameter to represent how NEF aggregates the event reports from other NFs (e.g. PCF(s)). When the \"Group Reporting mode\" parameter is requested as \"Group Reporting Guard Time\", NEF aggregates the event reports until the Group Reporting Guard timer is expired. On the other hand, when the \"Group Reporting mode\" parameter is requested as \"Group Member\", NEF aggregates the event reports of all UEs in the group.\n-\tNew functionality of NEF to calculate the group performance based on the aggregated event reports and the requested \"Group Performance Type\" parameter.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "6.21.2\tProcedures",
                            "text_content": "Figure 6.21.2-1 outlines the procedure of exposing UE performance and a group of UEs performance.\nThe figure depicts a procedure for exposing the performance of a group of User Equipment (UE) and a User Equipment (UE) in a 5G network. It illustrates the steps taken to measure and analyze the performance of these devices, highlighting the importance of network slicing and network slicing management in ensuring efficient and reliable communication.\nFigure 6.21.2-1: Procedure of exposing UE performance and a group of UEs performance\n1.\tThe AF sends Nnef_EventExposure_Subscribe Request to NEF to subscribe target group performance.\nIf AF needs to obtain \"the worst UL packet delay among that of UEs\", AF sends request message with [Addresses of UEs, Event ID: \"QoS Monitoring parameters\", QoS parameter to be monitored: \"UL packet delay\", Group Performance Type: \"max\", Group Reporting Mode: \"Group Member\"]. On the other hand, if AF want to monitor whether \"the UL delay of UEs in the target group is can no longer (or can again) be fulfilled\", AF sends request message with [Addresses of UEs, Event ID: \"QoS targets can no longer (or can again) be fulfilled\", QoS parameter to be monitored: \"UL packet delay\", Target QoS: UL delay (e.g. 1msec)]. Note that the above Event IDs (i.e. \"QoS Monitoring parameters\" and \"QoS targets can no longer (or can again) be fulfilled\") are defined by Table 6.1.3.18-1 in TS 23.503 [5] and also these events are supported by Nnef_EventExposure, Npcf_EventExposure and Npcf_PolicyAuthorization services.\n2.\tNEF sends Npcf_EventExposure_Subscribe request (or Npcf_PolicyAuthorization_Subscribe request) with [target UE, Event ID parameter] to each PCF per UEs.\n3.\tPCF(s) sends Npcf_EventExposure_Notify (or Npcf_PolicyAuthorization_Notify) message with execution results (e.g. the UL packet delay of UE) to NEF.\n4.\tThe NEF aggregates the event reports from PCF(s) based on \"Group Reporting Mode\" parameters. If \"Group Reporting Mode\" is set to \"Group Member\", NEF aggregates the event reports of all UEs in the target group. If \"Group Reporting Mode\" is set to \"Group Reporting Guard Time\", NEF aggregates the monitoring reports until Group Reporting Guard timer is expired.\nThen, NEF calculate the group performance according to \"Group Performance Type\" and the aggregated event reports. For instance, if \"Group Performance Type\" is set to \"max\", and the monitoring results (e.g. [UE1, \"UL packet delay\": 1msec] and [UE2, \"UL packet delay\": 2msec] are reported by PCF(s) at step 3, NEF calculates the group of UEs performance as \"2msec\".\n5.\tThe NEF sends the group performance to AF via Nnef_EventExposure_Notify.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "6.21.3\tImpacts on services, entities and interfaces",
                            "text_content": "NEF:\n-\tEnhanced Nnef_EventExposure_Subscribe service operation by adding \"Group Performance Type\" parameter (i.e. \"worst\", \"mean\", \"best\", \"sum\") as a new optional input parameter and by supporting enhanced Event Reporting Information. The enhanced Event Reporting Information is included by new optional parameter (i.e. \"Group Reporting Mode\" parameter (i.e. \"Group Member\", \"Group Reporting Guard Time\")).\n-\tEnhanced NEF operations to request the event report per UE to PCF(s) (i.e. Npcf_EventExposure_Subscribe request or Npcf_PolicyAuthorization_Subscribe request) according to requested Event ID from AF and to aggregate the event reports of each UE according to \"Group Reporting mode\" parameter.\n-  Enhanced NEF operations to aggregate the event report (i.e. performance) of UEs in the group and calculate the group performance from the aggregated UEs' performance based on the requested \"Group Reporting mode\" and Group Performance Type\", respectively.\n",
                            "figures_meta_data": [],
                            "tables": []
                        }
                    ]
                },
                {
                    "title": "6.22\tSolution #22: 5GC-assisted Federated Learning over 5G VN group",
                    "description": "",
                    "summary": "",
                    "text_content": "",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": [
                        {
                            "title": "6.22.1\tDescription",
                            "text_content": "This solution addressed Key Issue #7 \"5GS Assistance to Federated Learning Operation\".\nIn federated learning (FL), multiple rounds of training and interactions are required between central server and edge nodes (e.g. edge servers or UEs). It can be considered that federated learning is a kind of group training that does not reveal the privacy of edge nodes. In order to improve the efficiency of federated learning, it is necessary to ensure a more stable connection between edge nodes and central server, and a consistency of the communication characteristics and requirements of each edge node, such as the requirement of resources, bandwidth, delay, and the unified start and termination of training.\nThis solution proposes to form the edge nodes and central server of federated learning into a 5G VN group in order to facilitate unified management of member in the LAN group, allocation of resources, adding and removing FL members flexibly, group-level rules management, adjustment of Access and mobility related and Session management related policies.\nNWDAF provides suggestions to AF to establish VN group with the related policies, and may also include the suggested FL member list if member selection is required by AF.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "6.22.2\tProcedures",
                            "text_content": "Figure 6.22.2.1-1 shows the procedure for VN group establishment initiated by AF.\nThe figure depicts the procedure of VN group establishment by AF, showing the steps involved in creating a virtual network group. The figure includes a diagram of the network, with the VN group highlighted as a separate entity. The steps are outlined in a step-by-step manner, with each step represented by a separate box. The figure is a visual representation of the process, making it easy to understand and follow.\nFigure 6.22.2.1-1: Procedure of VN group establishment by AF\n1.\tThe AF subscribes to receive analytics via NEF by invoking Nnef_AnalyticsExposure_Subscribe service operation as defined in TS 23.502 [4]. The parameters includes:\n-\tAnalytics ID.\n-\tMember selection flag: A flag indicating whether member selection is required.\n-\tAnalytics Filter Information including:\n-\tMembers list (a list of SUPIs or group ID, if member selection flag is 0), candidate members list (a list of SUPIs or Group ID, if member selection flag is 1) or any UE (if member selection flag is 1).\n-\t[Optional] Maximum and/or minimum number of members (if member selection flag is 1).\n-\tArea of Interest.\n-\tS-NSSAI or DNN.\n-\tExpected time period.\n-\t[Optional] Information of ML model to be trained (e.g. model size).\n-\t[Optional] The requirements of performance (e.g. bandwidth, time delay etc.).\n2.\tBased on the subscription from the AF, the NEF subscribes to NWDAF by invoking the Nnwdaf_AnalyticsSubscription_Subscribe service operation.\n3.\tThe NWDAF collects data and do the analytics. If the member selection flag is 1 and the user consent is granted, NWDAF may begin to select members from the list of candidate UE provided by AF. NWDAF may conduct \"UE mobility analytics\", \"abnormal behaviour related network data analytics\", \"Network Performance Analytics\", \"NF load analytics\", \"User Data Congestion Analytics\", \"DN performance analytics\" and other Analytics ID to select the appropriate members. Based on the analytics results, the NWDAF may also suggest a VN group data and assistant information for the related policies..\nEditor's note:\tWhether the NWDAF can provide such information is FFS.\n4.\tNWDAF sends the analytics results to NEF by invoking Nnwdaf_AnalyticsSubscription_Notify service operation.\n5.\tThe NEF notifies the analytics information to AF by invoking Nnef_AnalyticsExposure_Notify service operation.\n6.\tAF sends VN group data as defined in clause 4.15.6.3b of TS 23.502 [4] via UDR using the procedure specified in clause 4.15.6.7 of TS 23.502 [4]. PCF generates URSP rules based on VN group data and delivers it to UE using the procedure specified in clause 4.2.4.3 of TS 23.502 [4].\n7.\tAF sends the exclusive PCC rules for the VN group as defined in TS 23.503 [5] clause 6.3 to PCF via UDR using the procedure specified in clause 4.15.6.7 of TS 23.502 [4].\n8.\tAF may trigger PDU session establishment.\n9.\tUEs that have previously received URSP rules establish PDU session using the procedure in clause 4.3.2.2.1 of TS 23.502 [4] and join the VN group.\n10.\tAF starts Federated Learning with selected UEs over the established VN group.\n11.\tDuring the learning, the AF may sends subscription of network performance monitoring analytics of member UE list to NWDAF that may include \"Network Performance Analytics\", \"UE mobility analytics\", \"User Data Congestion Analytics\", \"DN performance analytics\", etc.. The AF may also modify the candidate UE list, and subscribe analytics of the new candidate UE list that may include the Analytics IDs in step 3.\n12.\tThe NWDAF collects data and do the analytics based on the AF's subscription.\n13.\tNWDAF notifies the updated suggested member list (if required), and the analytics results to NEF by invoking Nnwdaf_AnalyticsSubscription_Notify service operation.\n14.\tThe NEF notifies the analytics information to AF by invoking Nnef_AnalyticsExposure_Notify service operation.\n15.\tAF modifies VN group data and/or members via UDR using the procedure specified in clause 4.15.6.7 of TS 23.502 [4]. The AF can change the candidate UE list based on internal decision or analytics result. The AF can send request to add or remove FL members at any time. The PCF modifies URSP rules based on VN group data and delivers it to UE using the procedure specified in clause 4.2.4.3 of TS 23.502 [4].\n16.\tAF modifies the PCC rules for the VN group using the procedure specified in clause 4.15.6.7 of TS 23.502 [4]. A FL task contains multiple rounds of training. Steps 14-19 may be repeated for multiple times based on the requirements of subscription from AF to NWDAF.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "6.22.3\tImpacts on services, entities and interfaces",
                            "text_content": "NWDAF:\n-\tSupports application federated learning related analytics (e.g. a new Analytics ID);\nNEF:\n-\tSupports receiving application federated learning related subscription.\n",
                            "figures_meta_data": [],
                            "tables": []
                        }
                    ]
                },
                {
                    "title": "6.23\tSolution #23: Federated Learning Assistance Function assisting on federated learning members selection",
                    "description": "",
                    "summary": "",
                    "text_content": "",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": [
                        {
                            "title": "6.23.1\tDescription",
                            "text_content": "This solution addresses aspects of key issue #7 on 5GS Assistance to Federated Learning Operation and key issue #3 on 5GC Information Exposure to authorized 3rd party for Application Layer AI / ML Operation.\nThe solution allows the 5GS to suggest devices that should be part of FL operation, based on requirements expressed by the AI/ML application server.\nThe solution relies on introduction of a Federated Learning Assistance Function which, when receiving a request from the AI/ML application server (acting as AF), helps to select UEs suitable to participate to the FL operation. The AI/ML application Server tasks the Federated Learning Assistance Function to propose UEs for FL operation. Based on suggestion from the Federated Learning Assistance Function, the AI/ML application server can trigger FL operations. The Federated Learning Assistance Function can be integrated in NEF, in NWDAF or be standalone.\nFurther, the Federated Learning Assistance Function monitors whether suggested UEs remain available (e.g. registered, active, reachable), or still meet other selection criteria e.g. are still in the area of interest as proposed by the AI/ML application server. If UEs become unavailable or no longer meet selection criteria, the Federated Learning Assistance Function notifies the AF and may suggests new UEs. The AF then sends to suggested UEs a request to start federated learning cycle(s) and provides input model and receives output model from each UE for each learning cycle.\nThe Federated Learning Assistance Function may inquire or subscribe to UE locations (e.g. via AMF) and predictions (e.g. from NWDAF) about network load at UE locations and select the UEs located in network areas with lower load.\nThe Federated Learning Assistance Function may inquire analytics about UE or network serving the UE (e.g. from NWDAF, e.g. Observed Service Experience related network data analytics, Network Performance Analytics, UE related analytics e.g. UE mobility analytics, User Data Congestion Analytics, and/or Dispersion Analytics as defined in TS 23.288 [6]) and may preferably select UEs served by less loaded network components.\nThe Federated Learning Assistance Function may query or subscribe at AMF to UE related events such as connectivity state, UE loss of communication, UE reachability status, registration state changes, UE location, or UE moving in or out of area of interest, to inquire or monitor availability of UEs and preferably select connected, active, registered, and/or reachable UEs, and/or UEs within a desired area.\nThe Federated Learning Assistance Function may query or subscribe at UDM for UE reachability and preferably select reachable UEs. The Federated Learning Assistance Function shall query or subscribe at UDM for roaming status and shall only select non-roaming UEs.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "6.23.2\tProcedures",
                            "text_content": "The procedure for Federated Learning Assistance Function assisting on federated learning members selection is depicted in figure 6.23.2-1.\nThe figure depicts a federated learning assistance function (FLAS) that suggests UEs that can participate in FL operations. The FLAS is designed to assist UEs in participating in FL, providing suggestions for UEs that can contribute to the learning process.\nFigure 6.23.2-1: Federated Learning Assistance Function provides suggestions for UEs that can participate to FL operation\nNOTE 1:\tFor simplicity, NEF is not shown in the figure, however, the 3rd party AF would first interact with NEF which then would in turn interact with the Federated Learning Assistance Function.\n1.\tThe AI/ML application server (acting as AF) prepares for running FL training by collecting information such as potential FL members, FL aggregated model size, local model size, model aggregation average latency target for FL iterations, and duration of an iteration, time window when FL training needs to be performed. It determines an initial list for candidate FL members.\n2.\tThe AF tasks Federated Learning Assistance Function (which could be integrated in NEF, NWDAF or be standalone) to propose UEs for FL operation.\nThe AF indicates a list or group of UEs to choose from, the number of UEs required to perform federated learning cycle, possibly a desired location of UEs in a form of a target area for FL, duration of an iteration and desired average latency for FL iterations. When providing a target area for FL, the AF may provide sub-areas, and provide a percentage of UEs that should take part in FL from each sub-area, and/or a minimum number of UEs and /or a maximum number of UEs that should take part in FL from each sub-area.\nOptionally, the AF may provide time when to start federated learning, duration of federated learning, size of input model and/or output model.\nNOTE 2:\tStep 2 is shown as AIML_session Create Request, but step 2 could also be realized via an analytics request / subscription with new analytics type.\n3-4.\tThe Federated Learning Assistance Function may query or subscribe at AMF to UE related events such as connectivity state, UE loss of communication, UE reachability status, registration state changes, UE location, or UE moving in or out of area of interest, to inquire or monitor availability of UEs and preferably select connected, active, registered, and/or reachable UEs and/or UEs within a desired region.\n5.\tThe Federated Learning Assistance Function may query or subscribe at UDM for UE reachability and preferably select reachable UEs. The Federated Learning Assistance Function shall query or subscribe at UDM for roaming status and shall only select non-roaming UEs.\n6-7.\tThe Federated Learning Assistance Function may inquire analytics about UE or network serving the UE (e.g. from NWDAF, e.g. Observed Service Experience related network data analytics, Network Performance Analytics, UE related analytics, UE mobility analytics, User Data Congestion Analytics, and/or Dispersion Analytics as defined in TS 23.288 [6]) and may preferably select UEs served by less loaded network components.\nNOTE 3:\tSteps 3-4, 5 and 6-7 can happen in parallel. Federated Learning Assistance Function can decide to apply steps 3-4 only, or step 5 only, instead of applying both steps 3-4 and step 5.\n8.\tThe Federated learning Assistance Function select UEs for the federated learning from the group of UEs. The Federated Learning Assistance Function may select more UEs than requested to prepare for unresponsive UEs.\n9.\tThe Federated Learning Assistance Function provides a list of suggested UEs to the AF, possibly containing more UEs than requested by the AF at step 2. The Federated Learning Assistance Function can provide different lists of UEs for different time windows.\n10.\tThe AF sends to suggested UEs a request to start federated learning cycle(s) with input model and receives output model from each UE for each learning cycle.\n11-12.\tThe Federated Learning Assistance Function monitors whether suggested UEs remain available (registered, active, reachable), or still meet other selection criteria e.g. area of interest. If UEs become unavailable or no longer meet selection criteria the Federated Learning Assistance Function notifies the AF, together with time information when the UEs become unavailable. The Federated Learning Assistance Function may also suggest new UEs for FL operation together with related time window(s).\n13-16.\tWhen the AF requests termination of federated learning session from Federated Learning Assistance Function, the Federated Learning Assistance Function terminates related events subscriptions and analytics subscriptions at AMF, UDM, and/or NWDAF.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "6.23.3\tImpacts on services, entities and interfaces",
                            "text_content": "Federated Learning Assistance Function providing suggestions to the AI/ML application server on UEs that should take part of FL operation.\nNEF services to allow AI/ML application server to use the Federated Learning Assistance Function services.\nNew analytics from NWDAF if the Federated Learning Assistance Function is located in NWDAF.\nEditor's note:\tWhere the Federated Learning Assistance Function is located, e.g. at NEF, or NWDAF or standalone, is to be decided during the evaluation and conclusion phase. If standalone, whether the function will only assist FL operation or assist also other AI/ML operations is to be decided during the evaluation and conclusion phase..\n",
                            "figures_meta_data": [],
                            "tables": []
                        }
                    ]
                },
                {
                    "title": "6.24\tSolution #24: 5GS Assistance to Federated Learning",
                    "description": "",
                    "summary": "",
                    "text_content": "",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": [
                        {
                            "title": "6.24.1\tDescription",
                            "text_content": "This solution is about KI# 7 to address how and what information provided by 5GC to the AF to select the group of UEs which will be part of FL operation.\nDue to large model files transmission between server and clients and multi times interactions in the FL process, it will lead to heavy data traffic if FL interaction data is transferred between AF server and UE client(s) via 5GS. As a consequence, the UE selection and data transmission for FL training should be more careful in 5G. To ensure that the training process of FL not lead network performance degrading and traffic/fee for clients increasing substantially, one criterion is to choose those UEs who are in WLAN and the signal quality is good enough.\nThe AF can consume WLAN performance analytics per UE from the NWDAF for candidate UE list or for any UE in the AOI. Then take the WLAN performance analytics per UE, UE consent for FL and UE capability for FL of each UE into account, the AF determines the UE group for FL.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "6.24.2\tProcedures",
                            "text_content": "The figure depicts a procedure for 5G-assisted federated learning, illustrating the steps involved in the process. It includes a step-by-step guide on how to set up the 5G network, connect the devices, and initiate the federated learning process. The figure also highlights the importance of network security and privacy measures to ensure the data is protected during the federated learning process.\nFigure 6.24.2-1: Procedure for 5GS Assistance to Federated Learning\n1.\tTo select UE group to participate in Federated Leaning procedure, the AF for Federated Leaning subscribes to WLAN Performance analytics per UE list from the NWDAF via NEF by invoking the Nnef_AnalyticsExposure_Subscribe service operation, including Analytics ID=WLAN Performance, Analytics filter=AOI, Target of analytics=candidate UE list and preferred reporting granularity=per UE.\n2.\tBased on the request from the AF, the NEF subscribes to WLAN Performance analytics by invoking the Nnwdaf_AnalyticsSubscription_Subscribe service operation. Wherein, the NEF may map the AOI e.g. geographical area provided by the AF to the area e.g. TA or cell list inside network, and map the candidate UE ID list to the UE ID list used inside the network.\n3-4.\tThe NWDAF collects related data from data providers, e.g. OAM, UPF and SMF, and derives requested analytics with the collected data as defined TS 23.288 [6] and UE ID. The detailed operations are similar as the steps 2-5 defined in clause 6.11.4 of TS 23.288 [6]. The outputs of the WLAN performance analytics is per UE granularity, which contains the start time, duration, quality and performance of WLAN connection (e.g. the proportion of time the signal quality is above the threshold) per UE location.\nNOTE:\tHow to collect data from UPF should depend on the conclusion of FS_UPEAS.\n5.\tNWDAF notifies the NEF with the analytics information by invoking Nnwdaf_AnalyticsSubscription_Notify service operation.\n6.\tThe NEF notifies the AF with the analytics information by invoking Nnef_AnalyticsExposure_Notify service operation defined in TS 23.502 [4].\n7.\tAfter receiving the WLAN performance analytics per UE, the AF for Federated Leaning selects the UE group to participate in Federated Leaning procedure, taking the WLAN performance analytics per UE, UE consent for FL and UE capability for FL of each UE into account.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "6.24.3\tImpacts on services, entities and interfaces",
                            "text_content": "NWDAF:\n-\tEnhances the existing WLAN performance analytics to WLAN performance analytics per UE granularity, which contains the start time, duration, quality and performance of WLAN connection (e.g. the proportion of time the signal quality is above the threshold) per UE location, and reports it per UE granularity according to the request from the AF.\n-\tCollects data from corresponding data provider(s) to derive the enhanced WLAN performance analytics.\nAF:\n-\tRequests WLAN performance analytics per UE granularity from the NWDAF.\n-\tSelects the UE group to participate Federated Leaning based on the WLAN performance analytics per UE, UE consent for FL and UE capability for FL of each UE.\n",
                            "figures_meta_data": [],
                            "tables": []
                        }
                    ]
                },
                {
                    "title": "6.25\tSolution #25: Providing 5GS Assistance Information to AF for Federated Learning Operation",
                    "description": "",
                    "summary": "",
                    "text_content": "",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": [
                        {
                            "title": "6.25.1\tDescription",
                            "text_content": "This is a solution for key issue #7 \"5GS Assistance to Federated Learning Operation\".\nThe outline of the proposed solution for providing 5GS assistance information to AF for Federated Learning operation is as below:\n-\tThis solution introduces an AIML NF, which may be co-located with NEF and used for external exposure to assist 5G AIML services. (e.g. receives request from AF (i.e. AI/ML Application Server) and response/notify with 5GS assistance information for AIML operation).\n-\tAI/ML Application Server requests assistance information with input parameters for FL operation. (e.g. UE list, QoS references, geographic area, minimum number of UEs for FL operation, Preferred AIML time periods, whether to request the lists of candidate UEs for FL operation, preferred time periods for AIML operation, Wireless Access technology, the quality of signal, etc.). For example, some FL operation should be performed during a certain time or some FL operations may not need to be performed immediately. In this case, AI/ML Application Server can provide preferred AIML operation time period. Also, based on the training data size, AI/ML Application Server can provide expected AIML operation time duration. The AIML NF/NEF can derive recommended time periods for AIML operation by considering the preferred AIML operation time periods and the expected AIML operation time duration, and by predicting the network condition such as user data congestion time.\n-\tAI/ML Application Server can subscribe for AIML assistance information for FL operation. For example, AI/ML Application Server may want to update FL member UEs for FL operation after starting the FL operation if it is expected that the member UE's threshold for QoS references or QoS Requirements cannot be met or new candidate UE can meet the threshold due to changed network condition. In this case, AIML NF/NEF can provide updated assistance information (e.g. new recommended UEs) to AI/ML Application Server so that it can reselect the FL member UEs that can satisfy the QoS requirements based on the assistance information.\nAI/ML Application Server can manage the subscription with a Subscription Correlation ID. It can update the subscription (e.g. a new list of UEs, QoS requirements) or unsubscribe to AIML NF/NEF using Subscription Correlation ID.\n-\tAIML NF/NEF processes the request from AI/ML Application Server by interacting with other NFs such as NWDAF, UDM, SMF, UPF, OAM, etc. and generates assistance information (e.g. lists of candidate UEs for recommended time periods) for FL operation based on the collected information, and provides the assistance information for FL operation requested by AI/ML Application Server.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "6.25.2\tProcedures",
                            "text_content": "Figure 6.25.2.1-1 shows the procedure for providing 5GS assistance information to AI/ML Application Server for Federated Learning operation.\nThe figure depicts a procedure for providing 5G S assistance information for Federated Learning operations, illustrating the steps involved in ensuring the efficient and secure operation of the system.\nFigure 6.25.2.1-1: Procedure for providing 5GS assistance information for Federated Learning operation\n1.\tAI/ML Application Server invokes Nnef_AIMLAssistanceInfo_Request/Nnef_AIMLAssistanceInfo_Subscribe to request/subscribe 5G assistance information with specific conditions for FL operation. The AI/ML Application Server requests FL assistance information for the UE list included in the request. It also indicates that these UEs are authorized by AI/ML Application Server (application side) for FL operation.\nThe input parameters of the Nnef_AIMLAssistanceInfo_Request service operation can be as below:\n-\tAF Identifier.\n-\tUE List (GPSIs, External Group ID, or IP addresses).\n-\tAF-Service-Identifier.\n-\tExternal Application Identifier.\n-\tQoS References or QoS requirements.\n-\tWhether to request the list of candidate UEs (If indicated, AIML NF/NEF provides candidate UE list in the response).\n-\tTime when assistance information is needed (Indicates to the AIML NF/NEF the latest time the analytics consumer expects to receive assistance data provided by AIML NF/NEF).\n-\tExpected AIML operation time duration (Expected time duration by AI/ML Application Server based on the training information such as training model and training data size).\n-\tPreferred AIML operation time periods (Time periods that the AI/ML Application Server want to perform AIML operation).\n-\tWhether to request the recommended AIML operation time periods (If indicated, AIML NF/NEF provides recommended AIML operation time periods in the response).\n-\tTraffic volume for downloading global model and uploading training results.\n-\tDNN and S-NSSAI.\n-\tExpected UE Moving Trajectory for each UE in the UE list (e.g. A planned path of movement).\n-\tArea of Interest (AIML operation for the UEs in the area of interest).\n-\tMinimum number of UEs needed for FL operation.\n-\tPreferred Wireless Access technology (Access type/RAT type, e.g. WLAN, 5G, Multi-Access, where the AI/ML Application Server expects the UE to stay for FL operation).\n-\tPreferred quality of signal (Requirement of UE radio signal for FL operation, e.g. average RSSI (received Signal Strength Indication) and RTT (round trip time)) for WLAN.\n-\tUE traffic usage (the expected range of UE traffic usage or remaining traffic for FL operation).\n-\tWhether to request Multi-Access PDU Session Information of the UE (Whether the UE have established MA PDU Session, UE is allowed/capable to have MA PDU Session for AIML FL application, which access type the PDU Session is connected to).\nAdditional input parameters for the Nnef_AIMLAssistanceInfo_Subscribe service operation can be as below:\n-\tNotification Target Address (+ Notification Correlation ID), when the AI/ML Application Server subscribe to AIML NF/NEF.\n-\tReporting Parameters (e.g. periodic reporting, Reporting Thresholds (QoS References or QoS requirements)).\n2-3.\tIf the request from AI/ML Application Server is authorized, AIML NF/NEF determines whether the UEs provided by AI/ML Application Server are authorized by 5GC to support AIML operations and whether each UE consents to participate in the FL operation from UDM, which is stored in the UE subscription information, by invoking Nudm_SDM_Get service operation. After successful response is received, the AIML NF/NEF may subscribe to be notified of the Subscription data modification using Nudm_SDM_Subscribe.\nIf AI/ML Application server requested for MA PDU Session Information of UEs or the network is configured to collect MA PDU Session information although the application server did not explicitly request, AIML NF/NEF collects MA PDU Session Information of the PDU session of DNN/S-NSSAI for FL operation from the SMF. The AIML NF/NEF may subscribe to be notified of the MA PDU Session information.\n4.\tFor the authorized UEs for AIML operation by 5GC, AIML NF/NEF determines appropriate analytics information and input parameters to be collected based on the requested inputs in step 1 to derive assistance information such as lists of candidate UEs or recommended areas with recommended time periods that can satisfy the request from AI/ML Application Server.\nThe inputs from step 1 can be used for input parameters to request/subscribe analytics information to NWDAF. For example, QoS reference, Expected AIML operation time duration and Preferred AIML operation time periods can be used to request QoS Sustainability Analytics at that time. Also, \"Time when assistance information is needed\" can be used as an input for \"Time when analytics information is needed\" to NWDAF as clause 6.1.3 in TS 23.288 [6]. Traffic volume for downloading global model and uploading training results can be used to predict the time duration for downloading global model and uploading training result.\nAIML NF/NEF may request/subscribe analytics information to NWDAF in order to collect analytics information of the requested UEs (e.g. UE Communication analytics, UE Mobility analytics, User Data Congestion analytics, QoS Sustainability analytics, WLAN performance analytics per UE). If the AI/ML Application Server did not provide some of input parameters, AIML NF/NEF can derive them based on local configuration or based on analytics such as UE Mobility analytics and WLAN performance analytics per UE. If \"Preferred AIML operation time periods\" and \"Time when assistance information is needed\" are not provided as input parameters, it can be regarded as the immediate AIML operation will be performed.\nNOTE:\tThe output of WLAN performance analytics per UE will be decided by FS_eNA_Ph3.\n5.\tThe NWDAF collects the data for the requested Analytics IDs as specified in TS 23.288 [6].\n6.\tThe NWDAF derives the requested analytics as specified TS 23.288 [6].\n7.\tThe NWDAF provides analytics response to the AIML NF/NEF.\n8.\tAIML NF/NEF collects all the analytics information from NWDAF and derives assistance information that can satisfy the request from AI/ML Application Server taking into account, e.g. the QoS, User Data Congestion, UE mobility, the preferred AIML time periods for FL operation, preferred Wireless Access technology, preferred quality of signal, and UE traffic usage, MA PDU Session information, etc.\n9.\tAIML NF/NEF responds/notifies to the AI/ML Application Server with the derived assistance information.\nThe output parameters of the Nnef_AIMLAssistanceInfo_Request service operation can be as below:\n-\tSet of the 5GS Assistance information requested by AI/ML Application Server. Each 5GS Assistance information can contain:\n-\tList of candidate UEs for FL operation.\n-\tRecommended time period to perform AIML operation.\n-\tRecommended area for AIML operation.\n-\tRecommended Access type/RAT type to perform AIML operation.\n-\tMulti Access PDU Session information of the UE.\nEach of above information can be provided in a prioritized order to help the AI/ML Application Server to select the UEs.\nThe lists of candidate UEs for recommended FL operation can be different according to the recommended time period and/or the recommended area for AIML operation.\nIf the \"time when assistance information is needed\" was provided in step 1, AIML NF/NEF takes this into account in responding to the AI/ML Application Server.\nMulti-Access PDU Session information can be provided with candidate UEs or the list of candidate UEs can be generated taking into account the MA PDU Session information (e.g. suggest for the UEs have MA PDU Session).\nBased on the received the 5GS assistance information, the AI/ML Application Server can select and manage the group of UEs, and determine the start time for FL operation.\n10.\tIf AIML NF/NEF subscribed for MA PDU Session information at step 3 and the MA PDU Session information of the UEs are changed (e.g. the UE previously connected with 3GPP access, additionally connected with non-3GPP access), SMF notifies the changed MA PDU Session of the UE to AIML NF/NEF.\n11-15.\tIf AI/ML Application server and AIML NF/NEF subscribed for AIML assistance information at step 1/step 4 when NWDAF generates new analytics, AIML NF/NEF notifies new assistance information to AI/ML Application server.\nAfter the start of FL operation, AIML NF/NEF can notify new AIML assistance information (e.g. new recommended UEs) due to the changed network condition and AI/ML Application Server can reselect FL members based on the information.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "6.25.3\tImpacts on services, entities and interfaces",
                            "text_content": "UDM:\n-\tNew subscription information whether the UE is authorized for 5G AI/ML operation.\nAIML NF/NEF:\n-\tAIML NF may be co-located with NEF.\n-\tNew service operation to assist application AI/ML operation.\nNWDAF:\n-\tSupports WLAN performance analytics per UE.\nSMF:\n-\tProvides UE's MA PDU Session information of DNN/S-NSSAI used for AIML operation.\n",
                            "figures_meta_data": [],
                            "tables": []
                        }
                    ]
                },
                {
                    "title": "6.26\tSolution #26: FL operation with 5GS coordination for UE selection",
                    "description": "",
                    "summary": "",
                    "text_content": "",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": [
                        {
                            "title": "6.26.1\tDescription",
                            "text_content": "Based on the KI#7 objective, federated learning between the UE and application server (federated server) need to determine and agree on learning via mobile network. In this case, application server needs to coordinate with the mobile network before determining the participate UEs, learning model and learning time.\nThis solution proposed that application server determine the UE groups for FL operation based on the UE's capability, UE's wishes (if any e.g. time window that UE is available), location, and available QoS. The application server coordinate with the 5GS (e.g. available QoS) to finalize the UE list for FL operation. For instance, if the 5GS cannot provide the agreed QoS for specific UE, the application server does not consider this UE for the FL operation.\nWhen an application server determines to perform the federated learning with UEs in a specific location, the application server request the 5GC via NEF with required QoS, location information and UEs details such as UE ID. In addition, optionally, application server can also provide time window (e.g. start and end time) of FL operation. The NEF checks the authorization of the application server request with local policy or with a UDM. NEF forwards the request to 5GC NF.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "6.26.2\tProcedures",
                            "text_content": "The figure depicts a procedure to coordinate with 5G for UE selection, illustrating the steps involved in selecting an appropriate UE for a given 5G network. The figure includes a flowchart with arrows indicating the sequence of actions, such as selecting a 5G network, selecting an appropriate UE, and selecting a 5G network. The figure also includes a legend to clarify the meaning of the different symbols and colors used in the flowchart.\nFigure 6.26.2-1: Procedure to coordinate with 5GS for UE selection\n0.\tBoth the UE and application server exchanges the FL operation information such as UE's capability, UE's wishes (if any e.g. time window that UE is available), location information. This operation takes place in the application layer.\nNOTE 1:\tThe communication between the AF and UE is outside the scope of SA WG2.\n1.\tWhen an AF determines to perform the federated learning with UEs in a specific location, the AF request the PCF via NEF with QoS requirements, location information specific UE ID, external group ID if available. In addition, optionally, AF can also provide time window (e.g. start and end time) of FL operation. The NEF checks the authorization of the application server request with local policy or with a UDM. NEF forwards the request to PCF.\nNOTE 2:\tBased on step 0, the AF determines the UE list and the QoS requirements to perform the FL operation. Also, what triggers the FL operation (e.g. at a specific location, in a specific time window) is AF's internal business logic and is outside the scope of SA WG2.\n2.\tBased on the policy, the PCF checks the AF request and determine whether the network can provide required QoS in specific location on required time window (if included). The PCF may interact with the NWDAF and request the Network Performance analytics information for the Desired time window in the area of interest and other analytics such as UE related analytics as defined in TS 23.288 [6].\n3.\tIf PCF determine that it can allocate the required QoS, then the PCF sends the accept message to the AF with the agreed resources (QoS) information. If PCF determine that it cannot allocate the required QoS on specified time or time window, the PCF rejects the AF request. In addition, PCF may provide alternative time or time window that network can provide required resources (QoS) in the rejection message.\n4.\tUp on the notification from PCF, AF selects the UEs and sends FL operation request to the UE with agreed time or time window with the network. The UEs determine whether it can join the FL operation or not. If yes, UE sends the accept notification to the AF or else reject notification.\nBased on the notification from the UEs, the AF finalizes UE list which participate the federated learning operation.\nNOTE 3:\tIt is up to the AF implementation the selection and finalization of the UE list.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "6.26.3\tImpacts on Existing Nodes and Functionality",
                            "text_content": "NOTE:\tThe current mechanism already supports the coordination between the PCF and AF which can be used for the UE selection for FL operation by the AF based on AF implementation logic. Therefore, no new impacts are realized in the solution, since most of the operation takes place in the application layer.\n",
                            "figures_meta_data": [],
                            "tables": []
                        }
                    ]
                },
                {
                    "title": "6.27\tSolution #27: Assistance to selection of UEs for federated learning operation",
                    "description": "",
                    "summary": "",
                    "text_content": "",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": [
                        {
                            "title": "6.27.1\tDescription",
                            "text_content": "This solution addresses the issue about assistance to selection of UEs for FL operation defined in Key Issue #7: 5GS Assistance to Federated Learning Operation.\nThe key operational characteristics of FL is that UEs play a role as training devices and upload local update information to a central server (we call it \"FL server\") for global model update. It enables model training in a distributed manner without privacy concern, but it tends to cause poor model performance due to various constraints or characteristics of UEs who are selected as training devices. For example, when most of devices selected for local training tasks have low power or high mobility, model performance can be degraded by incomplete interim updates. It motivates us to investigate on what information is useful for AF to select appropriate UEs for FL operation. In the aforementioned example, prediction of high mobility can be provided by 5GS (i.e. NWDAF in 5GC) while low-power state information can be provided by a UE application, not by 5GS. Note that the latter case is not applicable to 5GS assistance defined in Key Issue #7. Thus, the solution only deals with how 5GS could provide assistance to AF so that appropriate UEs can be selected for FL operation as in the former case.\nThis solution proposes a NWDAF-assisted approach where NWDAF in 5GC provides useful analytics information for AF to select appropriate UEs for FL operation. Here, it is assumed that analytics from the NWDAF is requested or subscribed by AF (i.e. Analytics service consumer is AF). The proposed solution is based on existing analytics (e.g. QoS Sustainability, Service Experience, UE mobility, UE Communication, User Data Congestion, and/or Abnormal behavior). For example, QoS Sustainability and/or Service Experience Analytics can be used to select UEs who can provide acceptable QoS sustainability and/or service experience level for FL operation. UE Communication and User Data Congestion Analytics can be also used to select UEs who have regular and light traffic patterns as much as possible during the model distribution and upload phases for FL operation. In addition, UE mobility and/or Abnormal behavior Analytics can be used to exclude UEs with high mobility and/or high abnormality level to achieve better model performance.\nAny extension for procedures defined in existing analytics is not required. However, some enhancements are proposed for the following analytics by targeting FL operation.\n1.\tQoS Sustainability Analytics:\n-\tProposal: Extend \"Target of Analytics Reporting\" including a single UE level granularity without location information as a mandatory parameter in Analytics Filter Information, instead of \"any UE\" in a location of interest (e.g. TAIs or Cell IDs) as in the existing Analytics. In order to provide the analytics information in the UE level granularity, input data from OAM may also need to be extended such as RAN throughput per UE and QoS flow Retainability per UE.\n-\tMotivation: \"Target of Analytics Reporting\" needs to be provided in the UE level granularity to support FL operation because supportable QoS levels from some UEs in the same area (e.g. TAIs or Cell IDs) can be different and thus unreliable prediction information can be provided by the existing Analytics. Finally, poor model performance can be achieved by UEs selected based on the unreliable prediction information.\n2.\tService Experience Analytics:\n-\tProposal: Extend \"customized MOS at AF or QoE metrics at UE (via AF)\" including success rates for upload of local update results from UE to AF within a given interval or success rates for model distribution from AF to UE within a given interval to support FL as a new promising AI/ML service type, not just mentioning a general description (e.g. a customized MOS for any kind of service including those not related to video or voice, and ASP specific QoE metrics as agreed in the SLA) as in the existing Analytics.\n-\tMotivation: The extended \"customized MOS at AF or QoE metrics at UE (via AF)\" including success rates for model update and distribution need to be explicitly specified because FL is one of new main service types considering that 5GS will be used as a platform to support AI/ML services.\nNOTE:\tAny potential impact towards NWDAF will be coordinated with eNA study in Rel-18.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "6.27.2\tProcedures",
                            "text_content": "Figure 6.27.2-1 shows the procedure for 5GS assistance to AF selecting UEs for FL operation.\nThe figure depicts a procedure for 5G assistance to AF (Air Force) in selecting UEs (Unmanned Aerial Vehicles) for FL (Fleet-Level) operation. The figure shows a flowchart with steps for selecting UEs based on their performance, network coverage, and other relevant factors. The steps include evaluating the performance of the selected UEs, considering network coverage, and ensuring that the selected UEs are compatible with the 5G network. The figure provides a clear and concise visual representation of the process, making it easy for AF to select the best UEs for FL operation.\nFigure 6.27.2-1. Procedure for 5GS assistance to AF selecting UEs for FL operation\n1.\tIt is assumed that PDU session establishment procedures were already complete as follows: UE already established PDU session to the application server of ASP with interested AI/ML application services. As an option, the application server may trigger for UE who provides consent to establish a new PDU session to a central FL server via the user plane (UP) so that the FL server can play a dedicated role for training tasks. On receipt of the trigger, UE may establish the new PDU session to the FL server. The ASP application server or FL server (which is mapped with AF in the figure) can collect necessary information (e.g. computation and network capability and data characteristics) for training from UE via the PDU session.\n2.\tThe AF owned by the ASP may request or subscribe to the NWDAF to collect analytics information for interested UEs such as QoS Sustainability, Service Experience, UE mobility, UE Communication, User Data Congestion, and/or Abnormal behaviour. Here, the NEF is used when the AF is untrusted as 3rd party as usual.\n3.\tThe NWDAF collects necessary data for analysis from NFs (e.g. AMF, SMF, AF) or OAM.\n4.\tThe NWDAF checks the trigger conditions for analytics and derives the requested analytics. The NWDAF also detects notification conditions (e.g. defined by reporting thresholds).\n5.\tThe NWDAF provides response or notification to the AF.\n6.\tBased on the response or notification information provided by the NWDAF, the AF can (re)select UEs for FL operation. Then, the AF would (re)distribute a global model to the selected UEs via the UP and aggregate local training update results from the UEs to update the global model.\nSteps 2 to 6 can be repeated whenever new analytics is requested by the AF.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "6.27.3\tImpacts on services, entities and interfaces",
                            "text_content": "NWDAF:\n-\tExisting Analytics IDs such as QoS Sustainability and Service Experience need to be enhanced to support FL operation as described in clause 6.27.1.\n-\tFor QoS Sustainability Analytics, input data from OAM need to be extended to include \"Throughput for DL and UL per UE, Packet delay for DL and UL per RAB/DRB per UE, Packet loss rate for DL and UL per RAB/DRB per UE in TS 37.320 [12]\" for the analytics information in the UE level granularity.\n-\tFor Service Experience Analytics, input data from UE (via AF) and AF need to be extended to include success rates for model update and distribution.\nUE:\n-\tNew QoE metrics for model distribution dedicated for FL operation need to be measured and provided to NWDAF as described in clause 6.27.1.\nAF:\n-\tNew customized MOSs for model update dedicated for FL operation need to be measured and provided to NWDAF as described in clause 6.27.1.\n",
                            "figures_meta_data": [],
                            "tables": []
                        }
                    ]
                },
                {
                    "title": "6.28\tSolution #28: Application AI/ML Assistance Services",
                    "description": "",
                    "summary": "",
                    "text_content": "",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": [
                        {
                            "title": "6.28.1\tDescription",
                            "text_content": "This solution has impact to all KIs.\nIt is observed that, many of the Application AI/ML operation may request similar assistance info and operation support from the 5G Core, the intent of this solution is to take into the considerations of the system requirements as identified by the 7 key issues as captured in clause 5, it proposes a common solution framework to assist various Application AI/ML operations which acquire similar assistance info and procedures from 5G core. In this framework, the similar service requirements and operational behaviours are organized into various Application AI/ML Assistance (AaaML) Service Profiles where each profile defines specific AaaML Service.\nEditor's note:\tWhether a generic and dedicated application AIML service framework or NF is required cannot be determined until other solutions discussions progress and level of visibility to the 5GC of such operations is clarified.\nThe AaaML Services are a set of collective extensions to the existing 5G Core Services (e.g. NEF services) and the new 5G Core services which are defined specifically to assist the application layer AI/ML operation. With the support of the AaaML Service Profile information that indicates specific service requirements, an AaaML service can then be served by the existing 5G Core NF (e.g. NEF) and the new 5G Core NF, referred as Application AI/ML Assistance Network Function, i.e. AaaML NF, which is introduced by this proposal specifically to support the coordination of the AaaML Service.\nAn AaaML Service Profile is composed of three main parts of information:\n-\tObjective of target AaaML operation:\n-\te.g. Assuming the objective of this operation is to support \"AI/ML member selection for a particular Application AI/ML operation based on per UE's QoS sustainability\". In this case, the AI/ML member selection is the main service, and the per UE's QoS sustainability analytics is the sub-service.\n-\te.g. To expand the example above, instead of just referring to the UE's QoS sustainability analytic to support \"AI/ML member selection, the UE's location mobility event and moving direction event are also part of the selection criteria. As a result, there are composite services which are composed of QoS sustainability analytic, mobility event and moving direction event to meet the objective of this given AaaML Service.\n-\tInput of provisioned service parameter(s):\n-\te.g. minimum one way delay, predicted QoS performance within the next 5 minutes.\n-\tOutput:\n-\te.g. list of candidate UEs, event report for the group of UE's bandwidth consumption.\nThe configuration of an AaaML Service Profile is dependent on the corresponding Application.\nEach AaaML Service Profile is identified by the AaaML Profile ID, Application ID, UE ID or Group ID or Any and optionally, one or more AaaML Sub-Profile ID. Each of the IDs above has the following purposes:\n-\tAaaML Profile ID - It identifies the main service of AaaML Service Profile that defines:\ni.\twhat are the set of input AaaML service parameters required from the consumer and how they may be translated (e.g. GPSI to SUPI, geographical location into cell, TA, QoS requirements into QoS parameters etc.);\nii.\twhat are the target AaaML service information are to be collected from 5G Core (e.g. network analytic info for a given UE or a group or UEs, UE mobility update etc.); and\niii.\twhat are the target AaaML assistance operation is to be conducted in 5G Core (e.g. data transmission, service provisioning, performance monitoring, etc.).\n-\t(Optional) AaaML Sub-Profile ID - It describes the AaaML Service Sub profile for specifying the composite set of service requirement(s) for the target AaaML operation (e.g. AI/ML operation UE member selection based on QoS sustainability performance, AI/ML data transmission based on Time Of Date etc.). More than one Sub-profile can be specified for the given AaaML Service Profile.\n-\tThe Application ID - It identifies the Application that require 5G Core assistance for the AI/ML operation.\n-\tUE ID or Group ID or any - The identifier of the target UE or a group of target UE or any UE who is/are involved in the target AaaML service.\nAs part of the AaaML service solution, the new 5GC NF, AaaML NF, is introduced to be the anchor point to coordinate the 5GC control plane and user plane functionalities to assist the Application AI/ML operation. The benefits with this new 5GC NF are:\n-\ta common point of contact between the Application AI/ML AF and the 5GC which simplifies the external communication interface with the 5G system.\n-\tan anchor point to conduct the specific tasks which are required to coordinate with other new or existing 5GC NF to assist the Application AI/ML operation and therefore\n-\ta signalling aggregation, distribution and filtering point which could minimize signalling overhead when supporting the communication between the Application AI/ML AF and the 5GC\n-\ta AaaML service translator between the 3rd party Application AI/ML AF and the 5GC according to the definitions of the AaaML Service Profile\n-\ta privacy shield for 5GS when exposing 5GS system information to AF to assist the Application AI/ML operation (e.g. conceal the UE's exact location information)\n-\tan enabler for mobile operator to provide Application AI/ML as-a-service when continuing to evolve the 5GS assistance to support the Application AI/ML operation\nNOTE:\tAaaML NF is not a data analytics function nor it provides any assistance to support network operation within the 5GC of which NWDAF provides.\nThe figure depicts a 5G application AI/ML Service Assistance Framework, illustrating the various components and services involved in providing AI/ML-based assistance to users. Key components include AI/ML algorithms, data processing, and user interface, all integrated into a unified framework. The figure highlights the importance of AI/ML in enhancing the user experience and improving the overall 5G network performance.\nFigure 6.28.1-1: 5GC Application AI/ML Service Assistance Framework\nAaaML NF can be co-located with NEF or standalone. Note that, the standalone the AaaML NF responds to the AaaML Service request as the Producer of which the AaaML Service is not based on the extension of the existing NEF Service. Such deployment consideration is necessary in order to ensure the integrity of the existing NEF services in 5G Core when they are extended to support the AaaML services so as not to confuse the service consumer(s) which are trying to communicate with their corresponding serving service producer(s) using the similar service based interfaces (i.e. Nnef_<x>).\nFigure 6.28.1-2 below explains the standalone configuration considerations for AaaML.\nThe figure depicts a simplified representation of standalone AaaML NF (Network Function Virtualization) in a service-based interface, highlighting the considerations for leveraging existing service-based interfaces to support AaaML services.\nFigure 6.28.1-2: Considerations for Standalone AaaML NF when Leveraging Existing Service Based Interface to support AaaML Services\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "6.28.2\tAaaML Service Architecture",
                            "text_content": "This solution introduces new network function, Application AI/ML Assistance Network Function (AaaML NF), to provide necessary coordination support for the AaaML Services as described in 6.28.1 above. The new service based interface for AaaML NF is Naaaml. AaaML NF can be co-located with NEF or be standalone. For standalone AaaML NF configuration, it is only allowed when AaaML NF is the producer to respond to the AaaML Service request of which the service procedure is not based on the extensions of the existing 5G Core Service (i.e. NEF Service).\nThe figure depicts the 5G Service Architecture, illustrating the various components and their interconnections. It includes the 5G Core Network, which is responsible for the core network functions, such as network slicing, network slicing, and network slicing. The figure also shows the 5G Core Network's role in providing network slicing, which allows for the creation of virtual networks and services. The figure also includes the 5G Core Network's role in providing network slicing, which allows for the creation of virtual networks and services. The figure also includes the 5G Core Network's role in providing network slicing, which allows for the creation of virtual networks and services. The figure also includes the 5G Core Network's role in providing network slicing, which allows for the creation of virtual networks and services. The figure also includes the 5G Core Network's role in providing network slicing, which allows for the creation of virtual networks and services. The figure also includes the 5G Core Network's role in providing network slicing, which allows for the creation of virtual networks and services. The figure also includes the 5G Core Network's role in providing network slicing, which allows for the creation of virtual networks and services. The figure also includes\nFigure 6.28.2-1: 5GS Service Architecture\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "6.28.3\tAaaML Services",
                            "text_content": "The AaaML Services are a set of collective extensions to the existing 5G Core Services (e.g. NEF services, NWDAF services) and the new 5G Core. AaaML NF which is specified to coordinate the 5G Core assistance to support the Application AI/ML operation.\nIn this clause, Table 6.28.3-1 describes the new 5G Core Services specifically defined for assisting the Application AI/ML operation of which the AaaML NF is the producer to respond to the AaaML service request and to provide the necessary coordination between various 5G Core Services (e.g. NEF services, NWDAF services etc.) when responding to the AaaML service request.\nTable 6.28.3-2 presents the AaaML service mappings which describe the corresponding AaaML Service Profile and the corresponding existing/new 5G Core Service procedures for a specific AaaML Service as described in the appropriate clauses in the corresponding 3gpp specifications.\nTable 6.28.3-1: AaaML services provided by AaaML NF (Producer)\n\nTable 6.28.3-2: Application AI/ML Assistance Information provided by NEF/AaaML NF\n\nEditor's note:\tIt is FFS for the list of Sub-AaaML Services to be defined for the given AaaML Service when this study is reaching conclusion. For example, the clause n.m,x TS 23.xxx describes the Group QoS Monitoring, is the Sub-AaaML Service of the Network Resource Monitoring of AaaML Service.\nEditor's note:\tIt is FFS to finalize the corresponding NF services to support the given AaaML Service when this study is reaching conclusion. For example, the clause n.m TS 23.xxx describes the Network Resource Monitoring of AaaML Service.\nEditor's note:\tIt is FFS for more AaaML services to be defined or if just one service can be defined with use of AaaML Profile IDs.\n",
                            "figures_meta_data": [],
                            "tables": [
                                {
                                    "description": "Table 6.28.3-1: AaaML services provided by AaaML NF (Producer)",
                                    "table number": 10,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 6.28.3-2: Application AI/ML Assistance Information provided by NEF/AaaML NF",
                                    "table number": 11,
                                    "summary": "",
                                    "name": ""
                                }
                            ]
                        },
                        {
                            "title": "6.28.3\tProcedures for AaaML Services",
                            "text_content": "This clause explains how to retrieve the AaaML Service Profile to support the AaaML service procedures.\nThe figure depicts a service profile support for AaaML Service Operation, which is a key component of the AaaML (Advanced Access Multiplexing) protocol. The figure illustrates the various service profiles that can be used to support AaaML Service Operation, including the AaaML Service Profile, AaaML Service Profile 1, and AaaML Service Profile 2. The figure also includes a diagram of the AaaML Service Operation, showing the flow of data between the sender and receiver. The figure is important for understanding the AaaML protocol and its support for AaaML Service Operation.\nFigure 6.28.3.1-1: AaaML Service Profile support for AaaML Service Operation\n1-2.\tIf the AF has not discovered its serving NEF or AaaML NF, it queries NRF to retrieve its serving NEF or AaaML NF that supports its target AaaML Service Profile.\n3.\tA PDU Session between the UE and the AF may have been established.\n4.\tAF subscribe or requests the AaaML service by sending NEF service request or AaaML service request with the required parameters and AF Transaction ID, more specifically, AF includes the Application Identifier, UE ID or Group ID, AaaML Profile ID and optionally AaaML Sub-Profile ID.\n5.\tNEF verifies the authorization of the AF Request.\n6-7.\tNEF or AaaML NF sends request to UDR to retrieve the AaaML service profile by providing the Application Identifier, UE ID or Group ID, AaaML Profile ID and optionally AaaML Sub-Profile ID in case of the composite set of 5GC services is requested for the given AaaML service.\nNOTE:\tWhether the AaaML service profile is stored locally to the AaaML NF or in the UDR is to be determined.\n8.\tBy referring to the service parameters and based on the information of the AaaML service profile and the AaaML Sub-Profile, if requested, NEF or AaaML NF proceeds with the AaaML service procedures which may involve a composite set of 5GC service procedures corresponding to a set of 5GC events, analytics and/or notifications.\n9.\tBased on the outcome of the AaaML service procedures, NEF or AaaML NF replies to AF with the service response or notification which may be based on the collective outcomes of a composite set of 5GC service procedures..\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "6.28.3\tImpacts on services, entities and interfaces",
                            "text_content": "NRF:\n-\tRecognize the new service parameter, AaaML Profile ID, to support the NEF and AaaML discovery.\nAF, NEF, AaaML:\n-\tRecognizes new service parameters, AaaML Profile ID, AaaML Sub-Profile ID to support the AaaML service procedure which may be composed of a set of 5GC service procedures (i.e. 5GC events, analytics and/or notifications).\n",
                            "figures_meta_data": [],
                            "tables": []
                        }
                    ]
                },
                {
                    "title": "6.29\tSolution #29: 5GC assistance to UE on performing AI/ML task",
                    "description": "",
                    "summary": "",
                    "text_content": "",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": [
                        {
                            "title": "6.29.1\tDescription",
                            "text_content": "This solution is proposed to address Key Issue #2: 5GC information exposure to UE and Key Issue #4: Enhancing External Parameter Provisioning.\nIn some scenarios, AI/ML based services need stable network quality to ensure service sustainability, for example, as described in TS 22.261 [2], UE may upload or download AI/ML models or learning data from application servers (i.e. online model distribution is needed). If UE can get information about when the network can provide sufficient network resource, it can make better decisions on AI/ML operations (e.g. whether begin to perform an AI/ML service). It is helpful to expose some information to UE.\nHowever, network information exposure directly to UE may cause security issues and some network information is not useful for UE to make decisions on AI/ML operations since how to allocate the network resource is determined by network rather than UE. Thus, it is important to study what information is valuable to be exposed to UE.\nOn the other hand, network tends to provide service for each UE according to the QoS requirement. However, when many AI/ML applications are running over 5G mobile network, these applications may generate large data traffic and give heavy load to network.\nTo reduce the impact on other services in the network and guarantee the quality of AI/ML based service, this solution proposes that the 5GC exposes a recommended service transmission time duration for UE to suggest when to perform AI/ML tasks, which means the network is more likely to provide sufficient network resources in this time duration. 5GC will consider AI/ML task related information and network resource to select a relatively idle time duration of both network and UE as recommended service transmission time duration, so that UE can perform these AI/ML tasks in this time duration.\nIn this solution, the two main functionalities are proposed to take into consideration:\n-\tUE and AI/ML application servers negotiate AI/ML task in application layer and provision following AI/ML task related information to 5GC (UDM):\n-\tAI/ML application identifier: identifies the AI/ML application.\n-\tAI/ML task identifier: identifies AI/ML task to be performed by UE. It is AI/ML related traffic which needs to be transferred over 5GS and used to distinguish different tasks for the same application.\n-\tAI/ML task duration: defines the estimated time duration how long the task will take.\n-\tAI/ML task valid time: defines the time period during which the task is valid.\n-\tIn addition to above information, 5GC (SMF) considers network performance by requesting analytics from NWDAF to determines recommended service transmission time duration. SMF exposes recommended service transmission time duration to UE. The analytics ID can be requested from NWDAF includes:\n-\tNetwork Performance.\n-\tNF load information.\n-\tService Experience.\n-\tUE communication.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "6.29.2\tProcedures",
                            "text_content": "Figure 6.29.2-1 illustrates the procedure for AF provisioning information to 5GC.\nThe figure depicts a diagram illustrating the procedures for AF provisioning information to 5GC, with key components such as the 5GC, 5G Core, and the 5G Core Network. The figure highlights the importance of proper provisioning and management of the 5GC, ensuring efficient and reliable network operations.\nFigure 6.29.2-1: Procedures for AF provisioning information to 5GC\n1.\tUE and AI/ML application servers negotiate the AI/ML task to be performed and the task related parameters in 6.29.1. AF provides AI/ML task related parameters (UE ID or UE group ID, AI/ML application identifier, AI/ML task identifier, AI/ML task duration, AI/ML task valid time) to be created or updated in a Nnef_ParameterProvision_Create or Nnef_ParameterProvision_Update Request to the NEF.\n2.\tIf the AF is authorised by the NEF to provision the parameters, the NEF requests to create, update and store provisioned parameters as part of the subscriber data via Nudm_ParameterProvision_Create, Nudm_ParameterProvision_Update or Nudm_ParameterProvision_Delete Request message.\nIf the AF is not authorised to provision the parameters, then the NEF continues in step 4 indicating the reason to failure in Nnef_ParameterProvision_Create/Update Response message.\n3.\tUDM responds the request with Nudm_ParameterProvision_Create/Update Response. If the procedure failed, the cause value indicates the reason.\n4.\tNEF responds the request with Nnef_ParameterProvision_Create/Update Response. If the procedure failed, the cause value indicates the reason.\nFigure 6.29.2-2 illustrates the procedure for 5GC determining recommended service transmission time duration and exposing it to UE.\nThe figure depicts a 5G communication system, specifically highlighting the procedures for 5G Core (5GC) to expose information to the User Equipment (UE). The diagram illustrates the various steps involved in the 5GC process, including the establishment of a 5G Core, the establishment of a 5G Core network, and the establishment of a 5G Core network with a UE. The figure also includes a diagram of the 5G Core network, showing the various components such as the 5G Core, the 5G Core network, and the UE. The figure is a visual representation of the 5G communication system, providing a clear and concise overview of the procedures involved in 5GC.\nFigure 6.29.2-2: Procedures for 5GC exposing information to UE\n1.\tThe PDU session between UE and AI/ML application server has been established and SMF subscribes to be notified when the subscriber data for the UE is changed from UDM. If UE has ability to perform AI/ML service, it will indicate to request AI/ML service notification.\n2.\tWhen the subscriber data is changed by the procedure as 6.29.2.1, the UDM notify SMF in a Nudm_SDM_Notification including AI/ML task related parameters (UE ID or UE group ID, AI/ML application identifier, AI/ML task identifier, AI/ML task duration, AI/ML task valid time).\n3.\tThe SMF considers AI/ML task related parameters and requests analytics (Network Performance, NF load information, Service Experience, UE communication) from NWDAF by setting time when analytics information is needed within the AI/ML task valid time.\n4.\tThe NWDAF collects input data and derives analytics output as TS 23.288 [6].\n5.\tThe NWDAF sends the output to the SMF.\n6.\tThe SMF considers the output of analytics, AI/ML task duration, AI/ML task valid time and operator configuration to determine recommended service transmission time duration.\n7.\tThe SMF sends the AI/ML service notification including AI/ML application identifier, AI/ML task identifier and recommended service transmission time duration to UE by NAS layer.\n8.\tUE may perform AI/ML task during the recommended service transmission time duration by using existing PDU session or establishing a new PDU session.\nThe procedure for 5GC exposing information to UE for Application AI/ML operation via UE policy is depicted in Figure 6.29.2-3.\nThe figure depicts a flowchart for 5G Core Gateway (GC) exposing information to User Equipment (UE) via User Policy (UP). The diagram illustrates the steps involved in enabling and managing 5G services, including network slicing, network slicing policy, and network slicing policy enforcement.\nFigure 6.29.2-3: Procedures for 5GC exposing information to UE via UE policy\n1.\tThe PCF sends an Analytics request/subscribe (Analytics ID = Service Experience, Target of Analytics Reporting = UE ID or UE Group ID or any UE, Analytics Filter Information (Application ID, S-NSSAI, DNN, Area of Interest, RAT type(s)), Analytics Reporting Information) to NWDAF by invoking a Nnwdaf_AnalyticsInfo_Request or a Nnwdaf_AnalyticsSubscription_Subscribe.\nThe PCF may decide to send the analytics request/subscribe message based on local configuration (e.g. specific S-NSSAI and/or DNN for Application AI/ML operation traffic), AF request (e.g. AF request for Application AI/ML operation traffic monitoring which contains the Application ID and may also contain other information (e.g. UE ID or a list of UE IDs)) or triggers from other 5GC NFs (e.g. notifications from the UDM/UDR on Application AI/ML operation traffic related data change).\nNOTE 1:\tOther network analytics (e.g. UE Communication, Network Performance) can also be requested from the NWDAF, with the same enhancements to the input data and output analytics as described in the following steps.\n2.\tNWDAF collects network data or service data from the UE, 5GC NF(s) (including the AF) and the OAM as specified in TS 23.288 [6].\nIn addition to the existing input data as defined in TS 23.288 [6] for Service Experience analytics, the input data also includes AI information of the UE, which describes the Application AI/ML operation in the UE per application (e.g. whether AI/ML operation is enabled or not for the application, the Application AI/ML operation type) and can be collected from UE applications via the AF.\n3.\tUsing these input data, the NWDAF derives the service experience analytics for the application.\n4.\tThe NWDAF provides the analytics information of the observed Service Experience to the PCF by means of either Nnwdaf_AnalyticsInfo_Request response or Nnwdaf_AnalyticsSubscription_Notify, depending on the service used in step 1.\nIn addition to the existing output analytics as defined in TS 23.288 [6] for Service Experience analytics, the output analytics also includes AI information of the UE, which describes the Application AI/ML operation in the UE per application. The output analytics (i.e. statistics and/or predictions information) are about the Service Experience of the UE per application when the Application AI/ML operations apply.\n5.\tThe PCF decides on UE policy with regards to the Application AI/ML operations, based on AF request and/or the output analytics if available, which may include:\n-\trecommended Time Window and/or Location Criteria for the UE to apply the Application AI/ML operation and transmit the Application AI/ML traffic per Application. This can be indicated via the URSP rules.\n-\twhether the Application AI/ML operation(s) is/are recommended for the application(s) in the UE.\n-\twhether the Application AI/ML operation type(s) is/are recommended for the application(s) in the UE.\nNOTE 2:\tBased on the conclusion of the study, if the network is not aware of the Application AI/ML operation type(s), the Application AI/ML operation type(s) will not be provided in step 2 and step 5.\nNOTE 3:\tWhether the above UE policy is indicated in the URSP or in a new type of UE policy is to be decided during the normative phase.\nEditor's note:\tHow the parameters are passed to UE application layer is FFS. The exact parameters are to be decided during conclusion.\n6.\tThe PCF delivers the UE policy to the UE via the AMF.\n7.\tThe UE applies the UE policy received in step 5, i.e. performing Application AI/ML operation(s) for the application(s) accordingly.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "6.29.3\tImpacts on Existing Nodes and Functionality",
                            "text_content": "AF:\n-\tSupport on provisioning AI/ML based service information to 5GC.\nUDM:\n-\tSupport on modifying AI/ML related subscriber data by AF.\n-\tSupport on notifying AI/ML related subscriber data to SMF.\nSMF:\n-\tSupport on determining recommended service transmission time duration by getting notification form UDM and requesting analytics from NWDAF.\n-\tSupport on sending AI/ML service notification to UE.\nUE:\n-\tSupport on receiving AI/ML service notification from 5GC via NAS.\n-\tSupport performing Application AI/ML operations based on the relevant UE policy.\nPCF:\n-\tSupport providing UE policy on the Application AI/ML operations based on network analytics from the NWDAF.\nNWDAF:\n-\tSupport collecting additional input data, i.e. information about the Application AI/ML operations in the UE per application (e.g. whether AI/ML operation is enabled or not for the application, the Application AI/ML operation type), and including the information in the output analytics.\n\n",
                            "figures_meta_data": [],
                            "tables": []
                        }
                    ]
                },
                {
                    "title": "6.30\tSolution #30: AI/ML Translator (AI/ML-T) for 5GC Information Exposure to UE",
                    "description": "",
                    "summary": "",
                    "text_content": "",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": [
                        {
                            "title": "6.30.1\tDescription",
                            "text_content": "Key Issue #2: 5GC information exposure to UE is to study whether and how to enhance the 5GC to expose information to the UE to facilitate its Application AI/ML operation (e.g. Model Training, Splitting and inference feedback, etc.). This document covers the following bullets.\n-\tWhether and for which purpose there is a need for 5GC to expose information or data analytics to the UE, and what are the information or data analytics that can be provided by 5GC to the UE to assist the Application AI/ML operation at the UE side.\n-\tHow the 5GC exposes such information or data analytics to the UE.\nTo solve the above problems, an AI/ML translator (AIML-T) is proposed. The AIML-T is responsible for translating (mapping) the Application layer AI/ML related assistance requests received from UE(s) to the analytics requests for 5GC (i.e. from assistance request to analytics request to 5GC), and converting the information or analytics produced at 5GC to AI/ML assistance information for UE(s) (i.e. from 5GC information/analytics to AI/ML assistance information).\nThe AI/ML translator could be integrated into IEAF or AF. The IEAF or AF is responsible for receiving the requirements from UE(s), and for exposure the required assistance information to the UE(s) to assist its local Application layer AI/ML operations. If the IEAF or AF is in trusted domain, it interacts with the NFs in 5GC directly. If the AF is in untrusted domain, it interacts with the NFs in 5GC via NEF. Alternatively, the AIML-T can be placed in NEF.\nThe figure depicts a simplified representation of an AIML-T integrated into DCAF or AF or NEF, illustrating the integration of AIML-T with the existing network architecture. The figure shows the various components and their connections, highlighting the importance of AIML-T in enhancing network performance and efficiency.\nFigure 6.30.1-1: AIML-T integrated into DCAF or AF or NEF\nFigure 6.30.1-1 shows the AIML-T integrated into IEAF or AF or NEF. The assistance requests from UE(s) could be obtained and processed by the integrated AI/ML-T at the IEAF or AF or NEF.\nAfter the assistance request is translated (mapped) to 5GC request at the AIML-T, the IEAF or AF (or via NEF) sends request or subscribes to the other NFs (e.g. NWDAF, etc.) in 5GC for analytics and/or information. The integrated AIML-T at the IEAF or AF (or NEF) processes the received analytics and information, converts them into AI/ML assistance information required by UE(s). After the converting is completed, the IEAF or AF responses or notifies to the UE(s) with its required assistance information. Based on the AI/ML assistance information, the UE(s) make decision and performs corresponding AI/ML operations.\nNOTE: \tIf AIML-T is integrated into AF or NEF, how AF exposes the 5GC information to the UE is outside the scope of 3GPP. If AIML-T is integrated with IEAF, then this solution can be merged into Solution#2.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "6.30.2\tProcedures",
                            "text_content": "The figure depicts a 5G communication system with various components, including base stations (BTS), user equipment (UE), and scatterers. It illustrates the signal propagation in a 5G network, highlighting the importance of beamforming techniques to mitigate interference. The figure also shows the fiber-optic backbone architecture, with core switches, optical line terminals (OLTs), and distributed nodes. Redundancy paths are shown in dashed lines to ensure failover reliability. The layered design aligns with SDN principles, allowing for efficient information preparation and exposure to assist AI/ML operations at the UE side.\nFigure 6.30.2-1: 5GC information preparation and exposure to assist AI/ML operations at UE side, with AIML-T integrated at DCAF/AF or NEF\nFigure 6.30.2-1 illustrates the procedure of interactions among UE(s), IEAF/AF (or via NEF), and the other NFs (e.g. NWDAF(s)) in 5GC for assistance information preparation and exposure.\n1.\tUE(s) requests or subscribes to IEAF or AF for AI/ML assistance information to assist local AI/ML decisions/operations at UE side. UE(s) may request the following assistance information:\n-\tInformation of UE service experience\n-\tInformation of UL/DL latency, data rate, and packet loss rate\nUE(s) may specify:\n-\tType of assistance information in need, i.e. statistics, and/or predictions.\n-\tTime window (for one-time) or time interval (for periodically) requirement to AF to provide the assistance information\nNOTE 1:\tThe parameter details of the information will be decided in normative phase.\n2.\t[If AIML-T is integrated at IEAF or AF] After receiving the request (for request information or subscription request) from the UE(s), the IEAF/AF translates (maps) the assistance request to request for 5GC (e.g. requests to analytics (statistics, predictions) for one or multiple Analytics IDs) according to the requirements/parameters in the request from UE(s).\nFor example: If receive assist AI/ML splitting operation request, this request may be translated to request to analytics and Analytics IDs \"DN Performance\", \"Service Experience\". The mapping between the assistance request from UE to the analytics request to 5GC could be based on a preconfigured mapping table stored at the AF/IEAF or up to the AF/IEAF implementation.\n3.\tAF/IEAF requests or subscribes to one or multiple NFs (e.g. NWDAF, etc.) for analytics and/or data. The NFs perform corresponding operations to produce analytics or collect data, and responses/notifies to the IEAF /AF with the analytics and/or data.\nIf AIML-T is integrated at NEF, the AF/ IEAF forwards the assistance request from UE to NEF, where the request will be translated (mapped) to request for 5GC at NEF. Then NEF will requests or subscribes to one or multiple NFs (e.g. NWDAF, etc.) for analytics and/or data.\n4.\t[If AIML-T is integrated at AF] The AF translates (converts) the received analytics/information to AI/ML assistance information according to the type of assistance information required. One AI/ML assistance information may be produced based on one or multiple analytics/information.\nAlternatively, if AIML-T is integrated at NEF, the received analytics/information will be translated (converted) to AI/ML assistance information at NEF and NEF sends the information back to AF/ IEAF.\nThe AI/ML assistance information to UE(s) might be:\n-\tPredictions on UE service experience, latency, bitrate, packet loss rate, and corresponding time window.\n-\tPredictions on network condition changes and corresponding time\n-\tPredictions on the need of downloading ML model or certain amount of data\n-\tInformation of resource utilization (e.g. monitoring information or analytics information), etc.\n5.\tThe AF responses or notifies to the UE(s) with the required AI/ML assistance information.\nEditor's note:\tWhether and how the UE can use 5GC information for AI/ML operations is FFS and needs to be describe with valid justification before solution can be adopted, considering also that the same information will be used by the AI/ML application server as well.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "6.30.3\tImpacts on Existing Nodes and Functionality",
                            "text_content": "AF or IEAF:\n-\tIf AIML-T is integrated at IEAF or AF. The AIML-T integrated at the IEAF/AF translates (maps) the Application layer AI/ML related requests received from UE(s) to the requests for 5GC (i.e. from assistance request to analytics request to 5GC), and converts the information or analytics produced at 5GC to AI/ML assistance information for UE(s) (i.e. from 5GC information/analytics to AI/ML assistance information).\n-\tReceive assistance requests from UE(s).\n-\tCheck about authorization information of UE(s) based on local policy.\n-\tExpose AI/ML assistance information to UE(s).\nNEF:\n-\tIf AIML-T is integrated at NEF. The AIML-T integrated at NEF translates (maps) the Application layer AI/ML related requests received from UE(s) to the requests for 5GC (i.e. from assistance request to analytics request to 5GC), and converts the information or analytics produced at 5GC to AI/ML assistance information for UE(s) (i.e. from 5GC information/analytics to AI/ML assistance information).\n-\t(If AIML-T is placed in NEF) Receive assistance requests from IEAF or AF.\n-\t(If AIML-T is placed in NEF) Check about authorization information of UE(s) based on local policy.\n-\t(If AIML-T is placed in NEF) Expose AI/ML assistance information to IEAF or AF.\nNOTE: \tIf AIML-T is integrated into AF or NEF, how AF exposes the 5GC information to the UE is outside the scope of 3GPP. If AIML-T is integrated with IEAF, how UE/ IEAF are configured and expose 5GC information to the UE is outside the scope of this solution.\nUE:\n-\tUE should be able to communicate with AIML-T.\n",
                            "figures_meta_data": [],
                            "tables": []
                        }
                    ]
                },
                {
                    "title": "6.31\tSolution #31: Network information exposure to UE",
                    "description": "",
                    "summary": "",
                    "text_content": "",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": [
                        {
                            "title": "6.31.1\tDescription",
                            "text_content": "This solution is for KI#2.\nThe AI/ML applications at the UE can rely on the application server in the data centre to overcome its limited computational capability for complex AI/ML operations, e.g. model training, inference, etc. In the case, the performance of the AI/ML application becomes vulnerable to the varying network conditions. For example, improper model selection based on inaccurate assessment of network conditions can seriously degrade the performance of AI/ML applications. It is known by several researches that the performance of AI/ML applications, including split computing and model transfer cases, can be improved significantly when the estimation on the network conditions can be given to the AI/ML applications before/during the operations.\nIn the solution, the 5G network provides a UE with assistance information on the network congestion level. The UE can utilize the received analytics on network congestion prediction to decide, e.g. its ML model for training and inference, selection of ML models to transfer from/to the model server in the network, etc.\nEditor's note:\tWhether and how the UE can use 5GC information for AI/ML operations is FFS and needs to be describe with valid justification before solution can be adopted, considering also that the same information will be used by the AI/ML application server as well.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "6.31.2\tProcedures",
                            "text_content": "The procedure is depicted in 6.31.2-1.\nThe figure depicts a procedure for network information exposure to an end-user (UE), illustrating the steps involved in providing network information to the UE. The figure includes a diagram of the network infrastructure, with various components such as the network controller (NC), network management system (NMS), and network access control (NAC) system. The diagram also shows the network segmentation, with different segments for different types of traffic, such as voice, video, and data. The figure highlights the importance of network segmentation and the need for proper network management to ensure the security and reliability of the network.\nFigure 6.31.2-1: Procedure for network information exposure to UE\n1-2.\tThe UE requests AI/ML assistance information on network congestion during the registration procedure. The UE may include conditions for periodical provisioning of the information, e. g. S-NSSAI, DNN, reporting period, etc..\nAlternatively, UE sends UL (Up Link) NAS message to AMF, in the message it includes an Analytics container including the Analytics request to NWDAF. The Analytics container can be either read by the AMF if AMF subscribes network analytics to NWDAF on behalf of the UE, or read by NWDAF if UE interacts with NWDAF directly. AMF discovers and selects NWDAF according to clause 5.2 in TS 23.288 [6], where AMF may get the Analytics IDs in the Analytics container. Otherwise, AMF can forward the Analytics container to one of the discovered NWDAF, that NWDAF can do NWDAF selection and ask the analytics from the NWDAF who can support the requested analytics from the UE.\n3.\tThe AMF subscribes to the NWDAF to request analytics for network congestion prediction, e. g. (Slice) Load Level, NF load, Network Performance, and receives analytics output from the NWDAF. The AMF may set the Analytics Filter information based on the parameters received from the UE in the step 1 and additionally stored UE context information, e.g. UE ID, Registration Area, allowed S-NSSAIs for the UE, etc. if some parameters are not indicated by the UE. The AMF checks if analytics can be allowed to the UE based on the subscription information from UDM. Alternatively, AMF forwards the Analytics request (i.e. Analytics container) from UE to the NWDAF. NWDAF maintains which UE requests which Analytics ID(s) and all the related information in the UE analytics exposure context. When there is analytics result, NWDAF embeds the result into an Analytics container and call Namf_Communication_N1N2MessageTransfer service of AMF.\n4.\tThe AMF sends analytics information to the UE via DL NAS message.\n5-6.\tThe UE forwards the received information to the AI/ML applications that require AI/ML assistance information on network congestion prediction. The AI/ML application at the UE decides/changes AI/ML model based on the received network congestion information, and sends selected AI/ML model information to the application server using an application signalling.\nNOTE:\tThe step 5 and 6 are out of scope of 3GPP.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "6.31.3\tImpacts on Existing Nodes and Functionality",
                            "text_content": "UE:\n-\tSupport indication to request AI/ML assistance information , e.g. via Analytics container, in the registration request or UL NAS message.\n-\tSupport providing received congestion prediction information to the application.\n-\tSupport DL NAS message to deliver congestion prediction information.\nAMF:\n-\tSupport subscription to NWDAF for a UE.\n-\tSupport a NAS message to deliver congestion prediction information.\nNWDAF:\n-\tSupport receiving Analytics container from UE.\n-\tMaintaining UE analytics request context.\n-\tSupport sending Analytics container to UE via AMF through a Namf_Communication_N1N2MessageTransfer service.\n",
                            "figures_meta_data": [],
                            "tables": []
                        }
                    ]
                },
                {
                    "title": "6.32\tSolution #32: 5GC Information Exposure to Authorized 3rd Party for Assisting AI/ML Operation Splitting between AI/ML Endpoints",
                    "description": "",
                    "summary": "",
                    "text_content": "",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": [
                        {
                            "title": "6.32.1\tDescription",
                            "text_content": "This solution is proposed to address Key Issue #3: 5GC information exposure to authorized 3rd party for application layer AI/ML operation. The study bullet of this Key Issue includes:\n-\tWhether and what assistance information and events are exposed from 5GS to AF, more specifically, the prediction of UE and/or network conditions and performance (e.g. location, QoS, load, Congestion, etc.) as described in TS 22.261 [2]? How?\nTo address the challenges in above study aspects for split inference, the following problems need be solved\n-\tWhat assistance information is required to expose from 5GS to AF?\n-\tWhich Analytics ID could be reused for generating the AI/ML assistance information?\n-\tWhether new inputs are required for the analytics on the Analytics ID? And how to use the new inputs?\nAs introduced in TS 22.261 [2], AI/ML operation splitting between AI/ML endpoints is one of the three types of AI/ML operation that the 5G system can support. One use case of AI/ML operation splitting between AI/ML endpoints given in TR 22.874 [8] is split AI/ML inference, as shown in Figure 6.32.1-1 is an example of split AI/ML inference. The network AI/ML endpoint in Figure 6.32.1-1 is AI/ML processing entity, e.g. edge/cloud server, etc. but excluding UE.\nThe figure depicts an example of split AI/ML inference, where AI/ML models are split into two distinct parts: the AI part and the ML part. The AI part is responsible for the decision-making process, while the ML part is responsible for the data processing and analysis. This split allows for more efficient use of resources and better control over the AI/ML model's behavior.\nFigure 6.32.1-1: Example of split AI/ML inference\nUE triggers split inference. UE and an AI/ML server negotiate over application layer for the split inference operations. Assistance information from 5GC is needed to assist the AI/ML server to make corresponding decisions for the split inference, e.g. the AI/ML processing entities (e.g. cloud/edge servers) and the number of layers for dealing with the split tasks (e.g. AI/ML operations) from UE, etc.\nThe AF requests/subscribes to one or multiple NWDAF(s) for analytics to generate AI/ML assistance information. NWDAF(s) collects information from the AF on e.g. (if multiple layers) end-to-end performance between the AI/ML processing entities in two adjacent layers, etc. The collected information is used at the NWDAF(s) as new inputs to the analytics of one or multiple Analytics IDs, e.g. DN Performance, Observed Service Experience. During the analytics process, NWDAF(s) also interact with other NFs in 5GC for data collection.\nThe analytics results from NWDAF(s) could be converted to the required assistance information at the AF. Based on the assistance information and the current system environmental factors such as communications data rate, resource at UE, the AI/ML server AF makes decisions on split inference.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "6.32.2\tProcedures",
                            "text_content": "The figure depicts the procedure for interactions between Automatic Feature Extraction (AF) and Neural Network-based Assistance (NWDAF) for generating AI/ML assistance information. The figure illustrates the steps involved in the interaction process, including the use of Neural Network-based Feature Extraction (NEF) and Neural Network-based Assistance (NWDAF). The figure also highlights the importance of using NEF and NWDAF for generating AI/ML assistance information.\nFigure 6.32.2-1: The procedure for interactions between AF and NWDAF(s) for generate AI/ML assistance information. Interaction between AF and NWDAF may be via NEF\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "6.32.3\tImpacts on services, entities and interfaces",
                            "text_content": "AF:\n-\tNegotiate with UE for split inference.\nNOTE 1:\tHow UE negotiates with the AIML server / AF is out of the scope of this solutions.\n-\tCollect data from AI/ML processing entities (e.g. cloud/edge servers).\n-\tExpose the above collected data to NWDAF.\nNWDAF:\n-\tNew inputs for Analytics ID, e.g. \"DN Performance\", \"Observed Service Experience\", the new inputs may include:\n-\tThe data of end-to-end network performance (e.g. latency, throughput, packet loss rate) between each pair of AI/ML processing entities in two adjacent layers.\n-\tNew analytics results for Analytics ID, e.g. \"DN Performance\", \"Observed Service Experience\", the new analytics results may include:\n-\tStatistics/predictions on network performance (e.g. latency, throughput, packet loss rate) between each pair of AI/ML processing entities in two adjacent layers\n-\tStatistics/predictions on traffic rate for UL from the UE to each AI/ML processing entity(s).\n-\tStatistics/predictions on packet delay for UL from the UE to each AI/ML processing entity(s).\n-\tStatistics/predictions on packet loss rate for UL from the UE to each AI/ML processing entity(s).\n-\tService Experience when some specific endpoints are in the splitting ML operations.\n",
                            "figures_meta_data": [],
                            "tables": []
                        }
                    ]
                },
                {
                    "title": "6.33\tSolution #33: 5GC Exposure of Network Authorization for UE to participate in the Application AI/ML operation",
                    "description": "",
                    "summary": "",
                    "text_content": "",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": [
                        {
                            "title": "6.33.1\tDescription",
                            "text_content": "This solution addresses Key Issue #3 on 5GC information exposure to authorized 3rd party for Application Layer AI/ML operation.\nThe intent of this solution is to propose a mechanism to enable the network operator to have the control for which UE is allowed for participation in the Application layer AI/ML operation. The 5G system can expose the network authorization status of the UE to the AF for the UE participation in the corresponding Application AI/ML operation. Such awareness of the network authorization status for the UE can assist the AF's decision for the UE selection for the corresponding Application AI/ML operation.\nThe overall design of this solution is as follows:\nOnce the PDU session established, before the AF initiating its Application AI/ML operation, the AF can subscribe to the SMF or UDM anytime for the event monitoring to receive the network authorization status of the given UE for its participation in the AF's Application AI/ML operation. Likewise, the AF can unsubscribe to the SMF or UDM anytime for such event monitoring when the AF is no longer interested in the given UE.\nSuch awareness of the network authorization status for the UE can assist the AF's decision for the UE selection for the corresponding Application AI/ML operation.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "6.33.2\tProcedure",
                            "text_content": "\nFigure 6.33.1-1: Procedure for 5GC Exposure of the network authorization status of the UE for participation in Application Layer AI/ML operation\nThe following procedures describes how AF receives the notification of the network authorization status of the UE to be able to participate in the Application AI/ML operation:\n1.\tUE successfully completes the PDU Session Establishment procedures as described in clause 4.3.2.2.1 of TS 23.502 [4], for UE-requested PDU Session Establishment procedure for non-roaming scenarios the SMF receives the Session Management Subscription data which is corresponding to SUPI, DNN and S-NSSAI provided by the UE. More specifically, the Secondary Authentication/Authorization as described in step 6 in clause 4.3.2.2.1 of TS 23.502 [4], which is defined in clause 4.3.2.3 of TS 23.502 [4] and in clause 5.6.6 of TS 23.501 [3], may be triggered during the PDU Session Establishment procedures.\n2.\tThe AF selects the appropriate NEF via pre-configuration or via the support from NRF by providing its Application Identifier or {S-NSSAI, DNN} as described in clause 6.3.14 of TS 23.501 [3].\n3.\tIn order to determine if the given UE is authorized by the 5G system to be able to participate in the Application AI/ML operation, the AF sends Nnef_EventExposure_Subscribe Request to SMF or UDM via NEF as described in clauses 4.15.3.2.3 and 5.2.6.2.2 of TS 23.502 [4] together with its Application Identifier or {S-NSSAI, DNN}in order to subscribe to the notification from SMF for the new event \"Application AI/ML Authorized\" introduced by this solution as described in clause 6.33.2.2.3 below.\n4a-5.\tSMF receives notification from UDM regarding the information of the \"Application AI/ML subscription data\" which is introduced by this solution as described in clause 6.33.2.2 below, and relays the notification to the associated notification endpoint NEF by Nsmf_EventExposure_Notify.\nThe \"Application AI/ML subscription data\" for a UE is part of the UE subscription data.\nThe AF may continue to monitor the event to keep track of the subscription info of the \"Application AI/ML subscription data\" which reflects UE authorization status for participation in the Application AI/ML operation.\n4b.\tThe UDM detects the event occurs and sends the event report, by means of Nudm_EventExposure_Notify message to the associated notification endpoint of the NEF. If UDM notifies AF directly, step 5 can be skipped.\n6.\tNEF forwards to the AF the reporting event received by Nsmf_EventExposure_Notify or Nudm_EventExposure_Notify.\n7.\tThe AF sends Nnef_EventExposure_Unsubscribe Request to SMF via NEF as described in clauses 4.15.3.2.3 and 5.2.6.2.2 of TS 23.502 [4] if the AF is no longer interest in the corresponding UE for participation in its Application AI/ML operation.\nThe UDM stores the subscription information to indicate the network authorization status for the UE to be able to participate in the Application AI/ML operation. The subscription information includes the \"Application AI/ML subscription data\" for a UE which is introduced by this solution and is part of the UE subscription data.\nAt any time, the subscription for the Application AI/ML services could be changed in the UDM.\nThe Application AI/ML subscription data in the UE subscription data contains the following information:\n-\tWhether the UE is authorized to be participated in the Application AI/ML operation.\n-\tApplication Identifier or {DNN, S-NSSAI} corresponding to the AF that requests the Application AI/ML operation.\nThe Application AI/ML subscription data is provided by the UDM to the SMF during or after the establishment of the PDU session associated with the AF by using the Nudm_SDM service for the subscription data type \"Application AI/ML subscription data\" during the PDU session establishment.\nThe UDR stores the Application AI/ML data, which may be updated by UDM.\nThis solution proposes the following the changes to the SDM services as defined in clause 5.2.3.3.1 of TS 23.502 [4] to describe the subscription data type that is used to store the \"Application AI/ML subscription data\" in the UDM and is used to determine whether the given UE is authorized by the 5G system for the participation in the Application AI/ML operation. The following descriptions focus on the changes to the existing tables which are shown in \"bold italic\".\n\n\nThis solution extends the existing Monitoring Events leveraging NEF event exposure as defined in clause 4.15.3 of TS 23.502 [4] to monitor if the given UE is authorized by the 5G system to participate in the Application AI/ML operation requested by the corresponding AF. The following descriptions focus on the changes to Nnef_EventExposure Service as defined in clause 4.15.3 of TS 23.502 [4].\nThis solution proposes to add a new event to Table 4.15.3.1-1 in TS 23.502 [4] for \"Application AI/ML Authorization\" and the SMF or UDM is responsible for the event detection. For this new event proposed by this solution, if the 5G system decides to revoke the permission to allow the UE to participate in the Application AI/ML operation, the SMF or UDM will notify the AF via the support of NEF. AF will then release the associated PDU session, if any, to terminate the corresponding Application AI/ML operation, or, AF will negotiate with UE at application layer and the UE will avoid initiating related data traffic.\nThe description of the new NEF monitoring event as introduced by this solution is to be captured in Table 4.15.3.1-1 of TS 23.502 [4] as shown below.\n\n\n",
                            "figures_meta_data": [],
                            "tables": [
                                {
                                    "description": "",
                                    "table number": 12,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "",
                                    "table number": 13,
                                    "summary": "",
                                    "name": ""
                                }
                            ]
                        },
                        {
                            "title": "6.33.3\tImpacts on existing services, entities and interfaces",
                            "text_content": "SMF:\n-\tSupport a new event for monitoring network authorization status for a given UE to participate in a given Application AI/ML operation.\nUDM:\n-\tSupport a new event for monitoring network authorization status for a given UE to participate in a given Application AI/ML operation.\nUDR:\n-\tNew application subscription for the UE regarding the network authorization status for UE to participate in a given Application AI/ML operation.\nAF:\n-\tAbility to subscribe to the event for tracking UE\"s subscription status for the UE participation in its Application AI/ML operation.\n",
                            "figures_meta_data": [],
                            "tables": []
                        }
                    ]
                },
                {
                    "title": "6.34\tSolution #34: Expose AI/ML traffic transmission status to the authorized 3rd party for Application Layer AI/ML Operation",
                    "description": "",
                    "summary": "",
                    "text_content": "",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": [
                        {
                            "title": "6.34.1\tDescription",
                            "text_content": "This solution addresses KI#3 and KI#1.\nBased on the collected data for monitoring network resource, the prediction/statistics of UE and/or network conditions and performance (e.g. location, QoS, load, Congestion, etc.) for Application AI/ML traffic transmission can be derived by the NWDAF. Then the NWDAF can expose the prediction/statistics to the AF.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "6.34.2\tProcedures",
                            "text_content": "Figure 6.34.2-1 shows the procedure of the Application AI/ML traffic transmission status information exposure to the AF.\nThe figure depicts a 34.2-1 application AI/ML traffic transmission status information exposure to the AF, highlighting the importance of monitoring and managing this traffic to ensure the network's performance and security.\nFigure 6.34.2-1: Application AI/ML traffic transmission status information exposure to the AF\n0.\tThe PDU session is established/modified for Application AI/ML traffic transmission between the UE and the AF as specified in TS 23.502 [4].\n1.\tThe AF sends an Analytics request/subscribe (Analytics ID =\"User Data Congestion\" (or \"Service Experience\", or \"NF load information\"), Target of Analytics Reporting =(a UE or a group of UEs), Analytics Filter Information =(Application ID, S-NSSAI, DNN, Application Server Address(es), Area of Interest, QFI(s)), Analytics Reporting Information= Analytics target period), to the NWDAF as specified in TS 23.288 [6] clause 6.1, where:\n-\tthe Application ID indicates the application that transmits the AI/ML traffic;\n-\tthe DNN and S-NSSAI indicates the DNN and S-NSSAI of the PDU Session for Application the AI/ML traffic transmission;\n-\tthe AoI indicates the network area where the UE(s) receiving the Application AI/ML traffic locate；\n-\tthe Application Server Address(es) indicates the list of IP address(s)/FQDN(s) of the Application Server(s) which transfers the Application AI/ML traffic to the UE(s);\n-\tthe QFI(s) for the QoS flow of the Application AI/ML traffic transmission are in the Analytics Filter Information;\n-\tthe Target of Analytics Reporting for \"User Data Congestion\" can be a group of UEs;\n2.\tThe NWDAF subscribes the network data from the 5GC NF(s) in Table 6.8.2-2 (Table 6.4.2-1a, Table 6.4.2-2, or Table 6.5.2-1) by invoking Nnf_EventExposure_Subscribe service operation, where:\n-\tthe Throughput UL/DL in Table 6.8.2-2 indicates the UL/DL data throughput of the Application AI/ML traffic, where the IP Packet Filter Set identifies the QoS flow for Application AI/ML traffic transmission;\n-\tthe UE Location in Table 6.4.2-1a indicates the location of the UE that transmits/receives the AI/ML traffic;\n-\tthe QoS flow level network data (QFI, QoS flow Bit Rate, QoS flow Packet Delay, Packet transmission, Packet retransmission) in Table 6.4.2-2 indicates the observed QoS information about the Application AI/ML traffic transmission, where the IP filter information identifies the QoS flow for Application AI/ML traffic transmission;\n-\tthe NF resource usage in Table 6.5.2-1 indicates the virtual resources currently in use for specific NF instance(s) (mean usage of virtual CPU, memory, disk) for Application AI/ML traffic transmission;\n-\tthe NF load in Table 6.5.2-1 indicates the load of specific NF instance(s) for Application AI/ML traffic transmission in their NF profile.\nNOTE 1:\tThe specific NF could be UPF, the NWDAF may collect the UPF resource usage from the OAM for NF load analytics and may collect the UPF load from the NRF for NF load analytics.\n3.\tWith these data, the NWDAF derives the analytics information for User Data Congestion, Observed Service Experience and/or NF load for the Application AI/ML traffic transmission.\n4.\tThe NWDAF provides the analytics information in Table 6.8.3-1 (Table 6.8.3-2, Table 6.4.3-1, Table 6.4.3-2, Table 6.5.3-1 or Table 6.5.3-2) to the AF based on the service used in step1, with the following enhancements:\n-\tthe Network Status Indication in Table 6.8.3-1 and Table 6.8.3-2 indicates the statistics/prediction of Congestion Level for the Application AI/ML traffic transmission;\n-\tthe UE Location in Table 6.4.3-1 and Table 6.4.3-2 indicates the statistics/prediction location of the UE that transmits the AI/ML traffic;\n-\tthe NF resource usage in Table 6.5.3-1 and Table 6.5.3-2 indicates the statistics/prediction of average usage of assigned resources (CPU, memory, disk) for the Application AI/ML traffic transmission;\n-\tthe NF load in Table 6.5.3-1 and Table 6.5.3-2 indicates the statistics/prediction of average load of the NF instances for Application AI/ML traffic transmission.\nThe following new output data for Application AI/ML traffic transmission are added in the statistics/predictions:\n-\tQoS flow level data (QFI, QoS flow Bit Rate, QoS flow Packet Delay, Packet transmission, Packet retransmission), as the statistics/prediction of QoS for the Application AI/ML traffic transmission.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "6.34.3\tImpacts on services, entities and interfaces",
                            "text_content": "This solution reuses the current specification in TS 23.288 [6] for providing data analytics and exposing the information to the AF, with the following enhancements:\n-\tAF: requests the Application AI/ML traffic transmission status information (e.g. location, QoS, load, Congestion, etc.) from the NWDAF.\n-\tNWDAF: provides analytics information of Application AI/ML traffic transmission status to the AF.\n",
                            "figures_meta_data": [],
                            "tables": []
                        }
                    ]
                },
                {
                    "title": "6.35\tSolution #35: External parameter provisioning by AF for AI/ML data transport",
                    "description": "",
                    "summary": "",
                    "text_content": "",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": [
                        {
                            "title": "6.35.1\tDescription",
                            "text_content": "This solution addresses KI#4.\nThe AI/ML model, intermediate data, inference results, or model performance data at the UE are transported by 5GS for the Application AI/ML operation. In order to assist the Application AI/ML operation, the 5GC can maintain and use the external parameters provisioned by AF to decide the policy to transport the Application AI/ML traffic(s).\nAccording to TS 22.261 [2], the characteristics of AI/ML model data is different from the other Application AI/ML traffic, and different policy e.g. QoS, may be needed for the transport of the different kinds of AI/ML data. Since the AF knows well the characteristics of the AI/ML data to be transported, and the AF can provision specific policy parameters to the 5GS to support the transport of the AI/ML data.\nThe transport of the AI/ML model happens discontinuously and has less strict end-to-end latency requirements, and the AF can provision the transport policy by setting a policy for a future AF session procedure as for background data transfer as defined in clause 4.15.6.8 of TS 23.502 [4] for such AI/ML model distribution to a large amount of UEs. For model transport to a specific UE or model distribution to a small amount of UEs, AF session with required QoS update procedure as defined in clause 4.15.6.6a of TS 23.502 [4] is more appropriate to be used by the AF to provision the transport policy. Other Application AI/ML traffics, such as intermediate data, inference results, or model performance data, are continuous and have relatively stringent latency requirement, and are more suitable to be transported with specific QoS provisioned by setting up an AF session with required QoS procedure as defined in clause 4.15.6.6 of TS 23.502 [4].\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "6.35.2\tProcedures",
                            "text_content": "When the Application AI/ML begins to transport intermediate data, local training data, inference results, or model performance data through 5GS, the AF sends Nnef_AFsessionWithQoS_Create request message as described in clause 4.15.6.6 of TS 23.502 [4], including the specific QoS parameters for the AF session. The QoS parameters include the service requirements described in clause 7.10 of TS 22.261 [2].\nFor AI/ML model transmission to a specific UE or model distribution to a small amount of UEs, the AF may update the QoS request for the AF session by sending Nnef_AFsessionWithQoS_Update request message as described in clause 4.15.6.6a of TS 23.502 [4], including the Flow Description(s) and QoS parameters for the model transmission or distribution.\nWhen distributing the AI/ML model to large-scale UEs, the AF schedules the model distribution by invoking the Nnef_ApplyPolicy_Create service operation as described in clause 4.15.6.8 of TS 23.502 [4], to apply a policy for background data transfer to these UEs, which was negotiated as described in clause 4.16.7.2 of TS 23.502 [4] with the service requirements described in clause 7.10 of TS 22.261 [2].\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "6.35.3\tImpacts on services, entities and interfaces",
                            "text_content": "No impact.\n",
                            "figures_meta_data": [],
                            "tables": []
                        }
                    ]
                },
                {
                    "title": "6.36\tSolution #36: Enhancing External Parameter Provisioning",
                    "description": "",
                    "summary": "",
                    "text_content": "",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": [
                        {
                            "title": "6.36.1\tDescription",
                            "text_content": "As outlined in clause 4.15.6 of TS 23.502 [4], provisioning capability allows an external party to provision the information, such as expected UE behaviour and service specific parameters to 5G network functions. As part of this, currently the AF may subscribe to the NWDAF for UE mobility and/or UE communication analytics for a UE or group of UEs.\nThe AI/ML AF may additionally leverage other sources of data in order to update or refine existing parameters provisioned (see clause 4.15.6 of TS 23.502 [4]). To do so, the AI/ML AF may use AI/ML traffic from the UE(s) (e.g. intermediate data, local training data, inference results or model performance) that are exchanged over the User Plane PDU session established between AI/ML AF and the UE (or the AI/ML application client on the UE) to derive AI/ML-assisted parameters. The AI/ML AF may also subscribe to the NWDAF for existing collective behaviour information as part of NF load analytics (see clause 6.5.2, TS 23.288 [6]).\nThe AI/ML AF may provide AI/ML assisted parameters i.e. a new (set of) parameter(s) as shown in Table 6.36.1-1. An enhanced external parameter provisioning procedure is depicted in clause 6.36.2.\nNOTE 1:\tThe AI/ML traffic from the UE(s) are not consumed by 5GC. The AI/ML AF extracts (or derives) a set of one or more parameters that can be consumed by 5GC NFs (e.g. AMF or SMF).\nTable 6.36.1-1: Description of AI/ML assisted UE Behaviour data\n\nNOTE 2:\tWhether CP/UP related information is useful or not will be determined in the conclusion clause.\n",
                            "figures_meta_data": [],
                            "tables": [
                                {
                                    "description": "Table 6.36.1-1: Description of AI/ML assisted UE Behaviour data",
                                    "table number": 14,
                                    "summary": "",
                                    "name": ""
                                }
                            ]
                        },
                        {
                            "title": "6.36.2\tProcedures",
                            "text_content": "The figure depicts a schematic representation of external parameter provisioning using AI/ML AF, which is a key component in the design of a 5G network. The figure illustrates the process of configuring external parameters, such as network parameters, in a centralized manner, ensuring efficient and reliable network operation. AI/ML AF leverages machine learning algorithms to automate the process, reducing human error and improving the overall network performance.\nFigure 6.36.2-1: External Parameter Provisioning via AI/ML AF\n1.\tThe NF (e.g. AMF, SMF) can subscribe to Group Subscription data from UDM. The NF may request externally provisioned AI/ML assisted individual parameters or as a set of AI/ML assisted parameters.\nIf a parameter subscription is provided by the NF, the subscription may include a threshold indicating that certain confidence and/or level of accuracy must be met for the parameter(s) to be notified by UDM to the NF. The NF may decide such a threshold e.g. to prevent AI/ML assisted parameters being notified without certain minimum level of confidence. Meeting the threshold condition may mean that a parameter is equal to a certain threshold, or less than a certain threshold, or greater than a certain threshold, or less than or equal to a certain threshold, or greater than or equal to a certain threshold. The threshold may be in the form of a range (e.g. minimum value to maximum value, where each may be inclusive or exclusive).\n2.\tThe AI/ML AF may configure the AIML transport configuration information using partly the procedure to influence the traffic routing as defined by clause 4.3.6 of TS 23.502 [4] (see also enhancements in Solution #13). This is to establish User Plane PDU session(s) by UE or by group of UEs to the AI/ML AF. The PDU session can be used by AI/ML AF to collect AI/ML traffic from the UE(s) (e.g. intermediate data, local training data, inference results or model performance). This is in addition to the subscription to the NWDAF for UE mobility and/ or UE communication analytics for a UE or group of UEs.\nThe AI/ML AF may also subscribe to the NWDAF for existing collective behaviour information as part of NF load analytics (e.g. by setting an area of interest for the group of UEs as part of analytics filters).\n3.\tThe AI/ML AF collects, validates, aggregates and normalises the collected AI/ML traffic and analytics related to different UEs from multiple sources (e.g. AI/ML application client on the UE, NWDAF or DCAF).\n4.\tThe AI/ML AF provides one or more AI/ML assisted parameter(s), to be created, updated or deleted at the UDR using existing NEF services (e.g. in case of untrusted AI/ML AF). Alternatively, a trusted AI/ML AF may directly interact with UDM / UDR without NEF intervention.\n(When applicable) NEF checks whether the requestor is allowed to perform the requested service operation by checking requestor's identifier (e.g. the AI/ML AF Identifier). The payload of the request is covered in Table 6.36.1-1 in addition to other existing parameters from clause 4.15.6.3 of TS 23.502 [4].\n5.\tIf the AI/ML AF is authorised by the NEF to provision the parameter(s), the NEF requests to create, update and store, or delete the provisioned parameter(s) as part of existing UDM services.\nIf the AI/ML AF is not authorised to provision the parameter(s), then the NEF continues in step 8 indicating the reason for failure in NEF response message. Steps 9 and 10 can also be skipped.\nThe NEF can translate the AI/ML AF Identifier to DNN and/or S-NSSAI of the AI/ML AF or any associated AI/ML Application Server(s) when applicable for an untrusted AF.\n6.\tUDM interacts with UDR to create, update, or delete the AI/ML assisted parameters based on the existing services (subject to authorisation). The UDM classifies the received AI/ML assisted parameters into e.g. AMF associated, SMF associated, (including validity time) and then stores them under the corresponding data within the UDR.\nBased on local configuration, UDM may determine if there is any requirement in terms of threshold conditions that need to be met by the provisioned parameter before storing it in UDR. If satisfied, UDM may proceed seamlessly. If not satisfied, step 7 is triggered as a failed procedure and a cause value is provided e.g. \"confidence level not sufficient\". In that case the rest of step 6 is skipped.\n7.\tUDM responds the request with existing UDM services. If the procedure fails, the cause value indicates the reason.\n8.\tNEF responds the request with existing NEF services. If the procedure fails, the cause value indicates the reason, which may have been indicated to NEF by UDM.\n9.\tUDM notifies to the subscribed Network Function (e.g. AMF, SMF) of the updated UE and/or Group subscription data via UDM Notify message.\nIf the NF subscription in step 1 included a threshold, UDM may determine if there is any requirement in terms of threshold conditions that need to be met by the provisioned parameter before sending a notification with the parameter value to the NF. If satisfied, UDM may proceed seamlessly. If not satisfied, the provisioned parameter is not sent to the NF.\n10a.\tIf the NF is AMF, the AMF identifies whether there are overlapping parameter set(s) and merges the parameter set(s), e.g. in the AI/ML assisted Expected UE Behaviour parameters, if necessary. The AMF uses the received AI/ML assisted parameters to derive the appropriate UE configuration of the NAS parameters and to derive Core Network assisted RAN parameters.\nIn one alternative, if the AMF receives more than one parameter per entry (i.e. a set of parameters), the AMF may choose one of the parameters based on the associated probability assertion/confidence (e.g. the one with the highest probability is chosen) or based on the evaluation metrics that are received for each case (e.g. level of accuracy). The AMF may also choose a parameter out of the set based on local policies and/or subscription information. The AMF may then act as described above once a parameter has been selected.\nIf the NF is SMF, the SMF stores the received AI/ML assisted parameters and associates them with a PDU Session based on the DNN and S-NSSAI included in the message from UDM. The SMF identifies whether there are overlapping parameter set(s), e.g. in the AI/ML assisted Expected UE behaviour parameters and merges the parameter set(s), if necessary. The SMF may use the received AI/ML assisted parameters as follows:\n-\tSMF configures the UPF accordingly. The SMF may use the Communication Duration Time and/or Battery Indication and/or Expected Inactivity Time and/or Expected CP-UP Switch combined with probability assertion per entry to determine an individual or collective pattern of activating or deactivating UP connection for AI/ML traffic (e.g. for a UE or across a group of UEs for FL operation) and to perform CN-initiated selective deactivation of UP connection of an existing PDU Session when necessary. If the Expected CP-UP Switch parameter is provisioned by the AF and Control Plane CIoT 5GS Optimisation is enabled, the SMF may leverage the provisioned parameter (as well as additional information such as amount of data to be transferred or congestion) to optimize the timing of the switch to user plane transmission by following the descriptions in clause 5.31.4.2 of TS 23.501 [3] and clause 4.2.10.2 of TS 23.502 [4] to trigger a N3 data transfer establishment procedure.\nIf the SMF receives more than one parameter per entry (i.e. a set of parameters), the SMF may choose one of the received parameters based on an associated probability assertion (e.g. the one with the highest probability is chosen) or based on the evaluation metrics that are received for each case (e.g. the level of accuracy). The SMF may also choose a parameter out of the set based on local policies and/or subscription information. The SMF may then act as described above once a parameter has been selected.\n-\tThe SMF may derive SMF derived CN-assisted RAN information for the PDU Session. The SMF provides the SMF derived CN assisted RAN information to the AMF as described in PDU Session establishment procedure or PDU Session modification procedure.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "6.36.3\tImpacts on services, entities and interfaces",
                            "text_content": "AI/ML AF:\n-\tTo collect AI/ML-related traffic from the UE(s).\n-\tTo derive AI/ML assisted parameters.\n-\tTo provision AI/ML assisted parameters to 5GC.\nUDM:\n-\tTo classify, request to store in UDR or notify AI/ML assisted parameters in addition to other existing parameters.\n-\tTo determine if there is any threshold conditions that need to be met by the provisioned AI/ML assisted parameter(s).\nUDR:\n-\tTo store AI/ML assisted parameters.\nAMF:\n-\tTo request or subscribe for AI/ML assisted parameters.\nSMF:\n-\tTo request or subscribe for the AI/ML assisted parameters.\n",
                            "figures_meta_data": [],
                            "tables": []
                        }
                    ]
                },
                {
                    "title": "6.37\tSolution #37: Solution for 5GC Assistance to support Group-MBR Monitoring",
                    "description": "",
                    "summary": "",
                    "text_content": "",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": [
                        {
                            "title": "6.37.1\tDescription",
                            "text_content": "This solution touches on KI #1 and #7.\nNOTE:\tThe Sol#16 with overlapping contents and similar concept is merged into this solution.\nFederated learning (FL) is a group-based learning method and there will be many files and multiple rounds of interactions between the UEs and the FL server over 5GS during the FL process. Just like any other services, there should be SLA between the MNO and ASP to agree on the allowance of the maximum throughput that can be consumed between the end points (i.e. the group of UEs and the AS) of the given FL operation. Therefore, it is necessary to introduce a system monitoring parameter to assist the AF to keep track of the status of the aggregated throughput usage for the given federated learning operation.\nDuring the FL operation, the application server can be connected to one or more NG-RAN nodes through one or more UPFs, and each NG-RAN node could be serving multiple UEs participating in FL operation. Figure 6.37.1-1 below, illustrates an example of 7 UEs in total within the service area of a given FL operation. In a specific round, AF selects 5 of them to be participated in the FL training. In order to ensure that the resources consumed by the 5 UEs are within the specified throughput limit, the UPF(s) report(s) the actual bit rate for the 5 corresponding QoS flows that support the FL operation periodically to the serving NEF. The serving NEF then aggregates the bit rates for the 5 QoS flows and compares aggregated bit rate against the Group-MBR for the given FL operation. The aggregated bit rate shall not exceed the provisioned Group-MBR for the given FL operation. The following figure presents the high-level representation of the descriptions above.\nThe figure depicts the aggregated bit rate and the Group-MBR (Group Bit Rate) in a 5G network, illustrating the key metrics for network performance. The aggregated bit rate is the sum of the bit rates of all the users, while the Group-MBR represents the average bit rate of all the users in a group. This figure is crucial for understanding the overall network capacity and performance, as it provides insights into the efficiency of the network in terms of bit rate.\nFigure 6.37.1-1: The definition of the aggregated bit rate and the Group-MBR\nIn order to support the Group-MBR monitoring as described above, this solution proposes to extend the Application Function (AF) Influence on traffic routing functionality to enable 5GC assistance to support the Group-MBR monitoring for the group transmission operation (e.g. FL operation) when such operation is activated by the Application AI/ML AF.\nIt is beneficial to leverage existing AF Influence for Traffic Routing to support Group-MBR monitoring, because it is capable of triggering the group policy management in PCFs, SMFs and UPFs that serve the UEs who participate in the Application AI/ML operation.\nIn order to assist the Application Function (AF) to supervise the total aggregated bit rate consumed by the group of the transmissions for the given Application AI/ML operation (e.g. FL operation) to be in compliance with the SLA between the MNO and the ASP, this solution proposes the Group-MBR monitoring operation to provide the assistance to the AF as follows:\nThe Group-MBR monitoring is initiated by the Application AI/ML AF to request 5G system which supports the group transmission operation for the Application AI/ML traffic (e.g. FL operation). The Group-MBR monitoring is applied separately for uplink and downlink Application AI/ML traffic. This is to accommodate the case of asymmetric bitrate for UL and DL directions. The following presents the high-level descriptions of this solution on how 5G system assists the Application AI/ML AF to perform the Group-MBR monitoring:\n-\tPrior to the start of the group transmission operation of user plane traffic initiated by the Application AI/ML AF, the Group-MBR threshold should have been provisioned in the 5G Core related to the application subscription data which is identified by Application Identifier and/or traffic filtering information. network slice (i.e. S-NSSAI) and DNN.\n-\tThe Application Function (AF), which controls and operates the given application AI/ML operation, initiates the Group-MBR monitoring request to 5G Core for a given set of QoS flows corresponding to a group of PDU sessions that support a group transmission operation (e.g. FL operation). The AF request includes the AF Transaction Id, the AF own identifier (i.e. AF Identifier), the Group Identifier, the Application Identifier and/or the traffic filtering information, as well as the Maximum Duration of Reporting and Group Reporting Guard Time as specified in clause 4.15.1 of TS 23.502 [4].\n-\tWhen the NEF receives the AF request, it ensures the necessary authorization for the incoming AF request. NEF may have to perform mapping for the information from the AF request. NEF will then store the information received from the AF request into the UDR.\n-\tThe Policy Control Functions (PCFs) which serve the group of UEs for their corresponding PDU sessions that support the group transmission operation (e.g. FL operation) for the given application will be notified by the UDR about the policy impacts towards those PDU sessions as the outcome of the AF request.\n-\tThe PCFs updates the corresponding Session Management Functions (SMFs) that provision the PSA UPFs which control the affected PDU sessions with the Bit Rate Reporting policy for the target QoS flows. In addition, the Group Reporting Guard Time and the Maximum Duration of Reporting are provided to each of the PSA UPFs. The PSA UPFs are then activated for the Bit Rate Reporting of the QoS flows that supports the Application AI/ML group transmission operation (e.g. FL operation). The consumer of the Bit Rate Reporting is associated with the address of the NEF.\n-\tBetween the Group Reporting Guard Times, the PSA UPF for a given UE, who participates in the group transmission operation (e.g. FL operation), reports the bit rate of the QoS flow corresponding to the specified Application Identifier or Traffic Filtering information. The given QoS flow could be either GBR or Non-GBR. The UPF reports the bit rate of the given QoS Flow to the AF's serving NEF based on the address that is provisioned by the PCF.\n-\tWhen the NEF receive a set of bit rates reports from the group of PSA UPFs, the NEF will aggregate the set of bit rates and compare the aggregated value against the Group-MBR threshold. If the aggregate bit rate exceeds the Group-MBR threshold, the NEF will notify the AF for the event about the excess traffic over the Group-MBR threshold together with the AF Transaction Identifier.\n-\tThe NEF sums up the bit rates for the active QoS flows per uplink and downlink separately NEF sums up the bit rate of the active QoS flows for the uplink and for the downlink traffic. NEF compares the aggregated bit rate for the uplink or downlink traffic against the provisioned Group-MBR threshold for the uplink or downlink traffic, respectively.\n-\tWhether the AF exerts any traffic mediation action when it receives the Group-MBR monitoring report (e.g. requesting 5G Core to apply traffic gating on specific QoS flow), it is beyond the scope of this solution.\n-\tUntil the expiration of the Maximum Duration of Reporting which was specified by the AF, the time left until the Maximum duration of reporting is less than the Group Reporting Guard Time, or AF explicitly terminates the Group-MBR monitoring, the Group Reporting Guard Timer will restart and the PSA UPF continues to perform the Bit Rate Reporting for the given QoS flow to the NEF periodically.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "6.37.2\tProcedures",
                            "text_content": "This solution defines Group-MBR as follows:\nGroup Maximum Bit Rate (Group-MBR)\n-\tThe Group-MBR threshold provides the upper bound of the aggregated bit rate across a set of QoS flows which are either a group of GBR or Non-GBR QoS flows corresponding to a group of PDU Sessions for a group of UEs who participate in a specific group transmission operation (e.g. Federated Learning (FL) operation) with active user planes. In general, the Group-MBR threshold is provisioned as part of the Application Subscription data based on the Service Level Agreement (SLA) between the Mobile Network Operation (MNO) and the Application Service Provider (ASP) for a given application. In the case when the application with asymmetric uplink and downlink traffic, Separate Group-MBR thresholds are provisioned for uplink and downlink accordingly.\nThis solution proposes to update Table 5.6.7-1 of TS 23.501 [3]: Information element to be included in AF request, with a new optional AF Influence information element introduced by this solution in AF request, Group-MBR Monitoring, to indicate the AF request for monitoring the aggregated bit rate of a group of QoS flows, that are used to support the Application AI/ML group transmission, against the Group-MBR threshold which is also introduced by this solution and is to be part of the Application Subscription data provisioned in the UDR. In addition, the two existing Event Reporting Information Parameters - Group Reporting Guard Time and Maximum Duration of Reporting, as described in clause 4.15.1 of TS 23.502 [4], should also be provisioned in the UDR with the proper values for the given Application AI/ML group transmission operation. The Group-MBR Monitoring threshold is determined based on the Service Level Agreement (SLA) between the Mobile Network Operator (MNO) and Application Service Provider (ASP). The changes to Table 5.6.7-1 of TS 23.501 [3] for the new information element that is introduced by this solution to indicate the Group-MBR Monitoring request is shown in \"bold italic\" in the table below.\nNote that, the \"Traffic Description\" information element in the table below is the \"existing\" information that has been defined in Table 5.6.7 of TS 23.501 [3] and is contained in the AF request. This existing information element is used to indicate the target QoS flow(s) that are applicable to the Group-MBR monitoring.\n\n\nThis solution proposes to extend the AF traffic influence for traffic routing service procedure as defined in clause 5.2.6.7.2 of TS 23.502 [4] to include the new optional information element, Group-MBR monitoring, to indicate the AF request for Group-MBR monitoring that was described in clause 6.37.2.2 above for the Table 5.6.7-1 of TS 23.501 [3]: Information element contained in AF request. The changes are shown below in \"bold italic\".\nTable 6.37.2.3-1: Proposed added parameters for AF Influence to support Group-MBR monitoring\n\nThis solution proposes to extend the UPF Services as defined in clause 5.2.6 of TS 23.502 [4] to enable UPF reporting of the Bit Rate for specific QoS flow. The proposed extensions are shown in the table below in \"bold italic\".\nTable 6.37.2.4-1: Proposed Extensions for UPF Services as defined in clause 5.2.6 of TS 23.502 [4]\n\nThis solution proposes to extend the procedure \"Processing AF requests to influence routing for Session not identified by a UE address\" as defined in clause 4.3.6.2 of TS 23.502 [4] to update the N4 policy to trigger the Group-MBR monitoring operation as described in clause 6.37.2.6 below. The following descriptions focus only on the changes to the existing procedure as described in clause 4.3.6.2 of TS 23.502 [4].\nReference to clause 4.3.6.2 of TS 23.502 [4]:\n\nThe figure depicts a network architecture with multiple layers, including a processing unit (PU) responsible for AF requests, a Session Manager (SM), and a Traffic Manager (TM). The SM processes AF requests, while the TM determines the optimal route for traffic based on the Session ID. The figure illustrates the flow of traffic and the interactions between these components, highlighting the importance of network management and traffic routing in ensuring efficient and reliable communication.\nFigure 4.3.6.2-1: Processing AF requests to influence traffic routing for Sessions not identified by an UE address\nFigure 6.37.2.5-1: Reference to clause 4.3.6.2 of TS 23.502 [4] on the example extensions to trigger Group-MBR Monitoring\n1.\tApplication AI/ML AF includes the new information element, Information for Supporting Group-MBR Monitoring, as described in Table 5.6.7-1 in clause 6.37.2.1 of TS 23.501 [3] in the AF request to NEF. The information element indicates the Group-MBR monitoring request for the given Application AI/ML group transmission operation (e.g. FL operation). More specifically, the AF request includes the AF Transaction Id, the AF own identifier (i.e. AF Identifier), the Group Identifier, the Application Identifier and/or the traffic filtering information.\n2.\tPrior to AF sends its request to the NEF, it includes the new information element provided in step 1. Above to NEF in case of Nnef_TrafficInfluence_Create or Update. Then the existing procedures as described in step 2 in clause 4.3.6.2 of TS 23.502 [4] proceed.\n3.\tIn the case of Nnef_TrafficInfluence_Create or Update, in additional of the set of AF request information to be stored, the NEF stores also the new information element provided in step 1. above by the AF in the UDR together with the address of the AIML NF/NEF which is to trigger the Group-MBR monitoring for the group of QoS flows of the future and the existing PDU sessions that are identified by the tuple {S-NSSAI, subscribed DNN}, Application Identifier and/or the traffic filters. It is expected that the two existing Event Reporting Information Parameters - Group Reporting Guard Time and Maximum Duration of Reporting, as described in clause 4.15.1 of TS 23.502 [4], should also have been provisioned in the UDR with the proper values for the given Application AI/ML group transmission operation.\n5.\tIn the Npcf_SMPolicyControl_UpdateNotify in the current step 5. in clause 4.3.6.2 of TS 23.502 [4], the PCF includes the Group-MBR Monitoring request in the PCC rule(s) the information required for reporting the event, including the Notification Target Address pointing to the NEF and the Notification Correlation ID containing the AF Transaction Internal ID.\n6.\tBased on the current step 6 in clause 4.3.6.2 of TS 23.502 [4], when the updated policy information about the Group-MBR monitoring request is received from the PCF, the SMF responds to the request by taking the appropriate action to trigger the Bit Rate Reporting per QoS Flow in PSA UPF over N4. The N4 policy enables SMF to provision the PSA UPF to report the current bit rate for the specific QoS flow to the NEF periodically between the Group Reporting Guard Times until Maximum Duration of Reporting is expired. The Nupf_EventExposure service as previously described in clause 6.37.2.4 above is then implicitly subscribed by NEF to receive the report from PSA UPF for the Bit Rate Reporting per QoS Flow.\nAfter the PDU session establishment/modification, and the policy negotiation and provisioning as described in previous clause of 6.37.2.6 above between the UEs and the AF, the PSA UPFs of a group of PDU sessions are activated by their respective SMFs to report the current bit rates of the active QoS flows corresponding to the given Application Identifier, DNN and S-NSSAI periodically to the specified NEF. The NEF will then aggregate the bit rates and compare the aggregated bit rate against the Group-MBR threshold. If the aggregated bit rate exceeds the Group-MBR threshold, the NEF notifies the AF.\nThe figure depicts a group-MBR monitoring system, which is a crucial component in network management. It shows the process of AF request, indicating that the system is actively monitoring the group-MBR for any issues. This system is designed to ensure the reliability and performance of the network by continuously monitoring and responding to any potential problems.\nFigure 6.37.2.6-1: Group-MBR Monitoring via AF request\n1.\tBy extending the AF Influence Routing procedures to enable the policy negotiation and provisioning to support the Group-MBR monitoring as described in previous clause 6.37.2.5, the corresponding group of PCFs, SMFs and PSA UPFs are triggered to activate the Bit Rate Reporting per QoS Flow for the group of QoS flows that is used to support the given Application AI/ML group transmission operation (e.g. FL operation) as requested by the AF.\n2.\tThe PSA UPF performs the Bit Rate Reporting per QoS Flow of the active QoS flow which is used to support given Application AI/ML group transmission periodically between the Group Reporting Guard Times. The QoS flow is identified by Application Identifier and/or Traffic Filter. The reported QoS flow could be either GBR or Non-GBR.\n3.\tThe PSA UPF sends Nupf_EventExposure_Notify to report the current bit rate of the given QoS Flow to the target NEF based on the address that has been provisioned by the PCF as described in clause 6.37.2.5, step 5.\n4.\tThe NEF sums up the bit rates of all the active QoS flows which are reported by the UPFs. If the given Application AI/ML traffic is asymmetric, the bit rate aggregation is done per uplink and downlink separately; otherwise, the bit rate aggregation is done per either uplink or downlink. NEF compares the aggregated bit rate of the uplink or downlink against the provisioned Group-MBR threshold for the uplink or downlink, accordingly.\n5.\tIf the aggregate bit rate exceeds the Group-MBR threshold, the NEF will notify the Application AI/ML AF of such event with the AF transaction Identifier.\n6.\tAF may apply traffic mediation action in responding to the Group-MBR monitoring report (e.g. requesting 5G Core to apply traffic gating on specific QoS flow such as asking 5GC to block some of the flows) or may decide not to take any action other than use it for its own statistics or charging.\n7.\tUntil the time for Maximum Duration of Reporting is expired, the time left until the Maximum duration of reporting is less than the Group Reporting Guard Time, or AF terminates the Group-MBR monitoring, the Group Reporting Guard Timer will restart and the UPF continues to perform the Bit Rate Reporting for the given QoS flow to the NEF periodically as described in steps 2 to 6 above. If AF wants to terminate the Group-MBR monitoring, AF sends either Nnef_TrafficInfluence_Update or Delete as described in clause 4.3.6.2 of TS 23.502 [4].\n",
                            "figures_meta_data": [],
                            "tables": [
                                {
                                    "description": "",
                                    "table number": 15,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 6.37.2.3-1: Proposed added parameters for AF Influence to support Group-MBR monitoring",
                                    "table number": 16,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 6.37.2.4-1: Proposed Extensions for UPF Services as defined in clause 5.2.6 of TS 23.502 [4]",
                                    "table number": 17,
                                    "summary": "",
                                    "name": ""
                                }
                            ]
                        },
                        {
                            "title": "6.37.3\tImpacts on services, entities and interfaces",
                            "text_content": "NEF:\n-\tRecognizes the new IE for Group-MBR Monitoring for the existing feature of AF Influence Traffic Rerouting.\n-\tSupports the Bit Rate Reporting event notification from UPF.\n-\tPerforms the aggregation for the bit rates that are reported by the UPFs.\nPCF:\n-\tSubscribes to the application subscription data corresponding the Application Identifier and/or the Traffic Filters.\n-\tGenerates the new PCC rules corresponding to the Group-MBR Monitoring.\nSMF:\n-\tResponds to the new PCC rules related to the Group-MBR Monitoring and determines the N4 rules to trigger UPF to activate Bit Rate Reporting per QoS Flow towards NEF.\nUPF:\n-\tSupport the new event reporting for Bit Rate Reporting per QoS Flow towards the target NEF.\n-\tResponds to the N4 rules to activate periodic Bit Rate Reporting per QoS Flow towards the target NEF between the Group Reporting Guard Times until Maximum Duration of Reporting is expired, the time left until the Maximum duration of reporting is less than the Group Reporting Guard Time, or AF terminates the Group-MBR monitoring.\n",
                            "figures_meta_data": [],
                            "tables": []
                        }
                    ]
                },
                {
                    "title": "6.38\tSolution #38: Time dependent QoS for ML model distribution in federated learning",
                    "description": "",
                    "summary": "",
                    "text_content": "",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": [
                        {
                            "title": "6.38.1\tDescription",
                            "text_content": "This solution addresses aspects of key issue #6 on QoS and Policy enhancements and key issue #7 on 5GS Assistance to Federated Learning Operation.\nThe time dependent QoS, whereby resources can be reserved for prescribed periods in the 5GS, can meet the needs of AI/ML model transfer, which requires brief and periodic use of significant 5GS resources. Reserving resources at specific times allows more efficient multiplexing of groups of UEs that need to transfer AI/ML models.\nThe solution is based on the following steps:\n1.\tAn AF (AI/ML application server acting as AF) sends to the 5GS a QoS request containing traffic pattern information for model transfer (e.g. model size, transfer direction, model transfer periodicity, start time(s), stop time(s)) or QoS timing information indicating the period when the QoS should be applied. The AF may also specify QoS requirements for periods when a model is not being transferred to the application clients on the UEs but other AI/ML operations could take place, e.g. a model update is provided by the application client on the UE to the AF, or inference feedback is sent by the application client on the UE to the AF. An AI/ML service may rely on different types of AI/ML operations, which would require different QoS patterns for the same AI/ML service.\n2.\tThe 5GS (NEF or Federated Learning Assistance Function) verifies and potentially converts the request to a time-dependent QoS request that the PCF can in turn provide as one or several PCC rule(s) to the SMF together with timing information. The SMF maps the information received from the PCF to one or several QoS Profiles which are applicable only at times which are indicated by the PCF (e.g. via start time, duration, and possible repetition period). For example, there can be one QoS Profile applicable for the time during which model(s) are transferred and a second QoS profile applicable for the time when models are not transferred.. As an option, the PCF also includes information about the data volume to be expected during a time period in the QoS profile, based on model size information.\n3.\tThe SMF sends the QoS profiles to the NG-RAN and the QoS Profile Timing Map. If the Traffic Pattern Information is received, the NG-RAN formulates QoS Profile Timing Map.\n4.\tThe NG-RAN alternates between the different QoS Profiles provided by the SMF according to the QoS Profile Timing Map. The QoS Profile Timing Map may, for example, specify alternating QoS between:\n-\tQoS 1: Time 2:30:30 to 2:30:35 (five seconds).\n-\tQoS 2: Time 3:30:00 to 3:40:00 (10 minutes).\nWhere QoS 1 provides resources for model transfer while QoS 2 provides resources for low bandwidth background traffic (i.e. when no model transfer occurs).\nWhen the requested QoS cannot be provided in the specific time slot, the AF is notified that QoS targets can no longer be fulfilled, as per TS 23.503 [5] clause 6.1.3.18.\nThe existing procedures for resources reservation and QoS fulfilment apply, i.e. there is no additional mechanism proposed by this solution in this respect. Approach in NG-RAN is similar to alternative QoS handling.\nThe solution allows switching between different QoS profiles at NG-RAN, thus avoiding signalling at each QoS change, between PCF and SMF, and between SMF and NG-RAN.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "6.38.2\tProcedures",
                            "text_content": "Procedure as depicted in figure 6.38.2.1-1 is based on enhancing the procedure for setting up an AF Session for specific QoS.\nThe figure depicts a procedure for time-dependent Quality of Service (QoS) management in a telecommunications network. It illustrates the steps involved in configuring and monitoring QoS parameters, such as packet loss, jitter, and delay, to ensure reliable and efficient communication. The figure includes a flowchart and a set of icons representing different QoS metrics, making it easy to understand the process and its components.\nFigure 6.38.2.1-1: Procedure for time dependent QoS\n1.\tAn AF sends QoS requirements (e.g. bandwidth required, PER, 5GS Delay, GBR) with QoS timing information (e.g. Model transfer periodicity etc.) to the NEF. Time dependency information indicates time for which these requirements shall apply (e.g. required QoS1 applies for when an ML model data transfer is taking place and, as an option, required QoS2 applies for the rest of the time).\nAlternatively (not shown in the Figure), the AF may send traffic pattern information (e.g. model size, model transfer periodicity, start time(s), duration(s), stop time(s)), so that traffic pattern information can be translated to time-dependent QoS requirements in the 5GC.\nThe AF may provide the information for a single UE or for a list or group of UEs. If the AF provides a list of UEs, it may indicate different periods during which these requirements shall be valid or time of model transfer for different UEs within the list.\nNOTE 1:\tThe AF can send this request to an NEF (as shown in the figure, if the AF is untrusted), or to a Federated Learning Assistance Function, or a PCF.\nNOTE 2:\tThe AF can use the External Parameter Provisioning procedure as shown in clause 4.15.6 of TS 23.502 [4] to provide this information via NEF and UDM towards the PCF (not shown in Figure 3),\n2.\tIn the case of untrusted AF, the NEF authorizes the AF request as per the standard procedures. Regular NEF behaviour applies, e.g. converting external identifiers into internal 5GS identifiers.\n3.\tThe NEF forwards the request to Federated Learning Assistance Function, to perform the functions described in steps 4 to select PCF(s), authorize QoS and provide time and periodicity for time dependent QoS. Alternatively, if the PCF is contacted directly, it authorizes QoS and uses the information in the request from the AF/NEF to determine QoS timing and periodicity for use in step 6.\n4.\tThe Federated Learning Assistance Function may map the possibly provided information for model transfer to QoS information for the UEs provided in step 3.\n5.\tThe Federated Learning Assistance Function selects PCFs handling involved UEs, and requests those PCFs to authorize the QoS required for the model transfer separately for each involved UE. It provides QoS information and time information (start time(s), stop time(s), periodicity) to the PCF.\n6.\tThe PCF determines PCC rule(s) that include QoS applicability time(s) (e.g. start time(s), duration(s), and repetition period(s)) that are to be transferred to the NG-RAN. The PCF may provide several QoS Parameter sets with applicability times associated to these QoS Parameter sets. The PCF may also include information about the data volume to be expected during applicable QoS time periods.\n7.\tThe PCF sends the PCC rule(s) with the information determined in step 6 to the SMF.\n8.\tThe SMF determines based on the PCC Rule(s) QoS profiles with QoS Profiles' Timing Map and optional data volume(s) and provisions them to the NG RAN. The PCF may also provide time dependent PDRs to the UPF.\n9.\tNG RAN executes time dependent QoS as per the specified QoS profiles in the specified QoS Profiles' Timing.\nNOTE:\tCoordination is needed with RAN for the NG RAN impacts aspects.\n10-13.\tResponses to the requests of steps 1, 3, 5, and 7 are sent back to the respective NF service consumers.\nProcedure as depicted in figure 6.38.2.2-1 is based on enhancing the procedure for solution #23 while introducing UEs' staggering functionality.\nWhen the Federated Learning Assistance Function provides suggested UEs to the AF, it also provides suggested times for the federated learning cycles with those UEs back to the AF. AF select UEs and times from the list of suggested UEs and suggested times, and request QoS to 5GC for those UEs with QoS timing information as described in clause 6.38.2.1. The Federated Learning Assistance Function selects PCFs handling involved UEs, and requests those PCFs to authorize the QoS required for the model transfer separately for each involved UE. The Federated Learning Assistance Function provides time(s) and optionally periodicity when the model transfer to/from the UE will occur to the PCF. The actions triggered by the PCF are as described for procedure in clause 6.38.2.1.\nThe figure depicts a scenario where UEs are staggered with notification to the Access Facilitator (AF) to ensure efficient network utilization.\nFigure 6.38.2.2-1: UEs' staggering with notification to AF\nThe procedure follows the procedure depicted for solution #23 with the following additions:\n1.\tThe AF provides QoS requirements (e.g. bandwidth required, PER, 5GS Delay, GBR) with time dependency information (e.g. bandwidth required, PER, 5GS Delay, GBR, Model transfer periodicity etc.) to the NEF. Alternatively (not shown in the Figure), the AF may send traffic pattern information (e.g. model size, model transfer periodicity, Start time(s), duration(s), stop time(s)).\n8.\tThe Federated learning Assistance Function select UEs for the federated learning from the group of UEs and determines the times for models download for the different UEs to be suggested to AF.\n9.\tThe Federated Learning Assistance Function provides a list of suggested UEs to the AF together with suggested times for the different UEs.\n10.\tAF select UEs and times from the list of suggested UEs and suggested times, and request QoS to 5GC for those UEs with QoS timing information as described in clause 6.38.2.1.\n12-13.\tThe Federated Learning Assistance Function determine times for new suggested UEs and provide the information to the AF.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "6.38.3\tImpacts on services, entities and interfaces",
                            "text_content": "AF:\n-\tProvides time dependency information to the NEF in addition to existing QoS requirements. Alternatively, provides traffic pattern information.\nFederated Learning Assistance Function: Maps traffic pattern information to QoS profile and time information.\nPCF:\n-\tDerives PCC rules with QoS applicability times, based on different QoS profiles with different time information.\nSMF:\n-\tProvisions the PCC rules with QoS applicability time to the NG-RAN and time dependent PDRs to the UPF.\nNG-RAN:\n-\tSchedules time dependent QoSs.\nNOTE:\tCoordination is needed with RAN for the NG RAN impacts aspects.\nUPF:\n-\tEnforces time dependent PDRs.\n",
                            "figures_meta_data": [],
                            "tables": []
                        }
                    ]
                },
                {
                    "title": "6.39\tSolution #39: 5GC information assistance to FL members' selection",
                    "description": "",
                    "summary": "",
                    "text_content": "",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": [
                        {
                            "title": "6.39.1\tDescription",
                            "text_content": "This solution addresses Key Issue #7 \"5GS Assistance to Federated Learning Operation\" on assistance to selection of UEs for FL operation and on how to monitor and expose a UE performance for the purpose of FL operations or to support performance KPIs defined in clause 7.10 of TS 22.261 [2], that is part of KI#6.\nThis solution is based on the principles as follows:\n-\tThe FL group management is under the control of the AF; and\n-\tThe 5GC NF just provides some network information to help the AF to select and manage the group of UEs which will be part of FL operation; and\n-\tHow the AF selects and manages the group of UEs which will be part of FL operation based on the network information is out of 3GPP scope.\nTo request the network information from the 5GC NF, the AF may provide an Area of Interest and/or a UE group ID to reduce the signalling of network information exposure. Take the FL assisted Word Query Suggestion Model as an example, the AF for Gboard on Android (i.e. the Google Keyboard) may provide TAC (Type Allocation Code) as an External UE group ID to 5GC NF to request the UE's network information if the UE is an Android terminal. Furthermore, there are hundreds of millions of Android UEs in the 5G network, so to save the signalling of network information exposure, the AF may also provide an AoI to 5GC NF to request the UE's network information if the UE is located in the AoI or about to enter the AoI.\nThe assistance network information which can be provided by 5GC NFs to assist FL members' selection by AF is shown in Table 6.39.1-1.\nTable 6.39.1-1: Information which can be provided by 5GC NFs for FL members' selection\n\nTo subscribe to the UE locations, CM state and UE Reachability from AMF, the Event IDs \"Location Report\", \"Connectivity state changes\", \"UE reachability status\" as defined in clause 5.2.2.3.1 of TS 23.502 [4] are used respectively. Instead of the \"Location Report\", the \"UE moving in or out of a subscribed \"Area Of Interest\"\" event can also be used to monitor if a UE is located in the requested AoI.\nTo subscribe to the UE Mobility analytics and Abnormal behaviour related network data analytics from NWDAF, the Analytics ID \"UE Mobility\" as defined in clause 6.7.2 of TS 23.288 [6] and \"Abnormal behaviour\" as defined in clause 6.7.5 of TS 23.288 [6] are used respectively.\nNOTE:\tWhich network information is requested by the AF depends on the FL member selection criteria at the AF.\nTable 6.39.1-2. Information that 5GC NFs can provide to the AI/ML server for performance monitoring of a UE involved in an AI/ML operation\n\nTo subscribe to Notification control, the AF provides Alternative QoS profile in the AF request with requested QoS to the PCF, may be via NEF when the AF is untrusted, that triggers the subscription to the Notification on QoS targets can no longer (or can again) be fulfilled. This subscription also triggers the request for notifications of Resource allocation outcome, either successful or unsuccessful, when the resource allocation is unsuccessful the notification on QoS targets is not subscribed either.\n",
                            "figures_meta_data": [],
                            "tables": [
                                {
                                    "description": "Table 6.39.1-1: Information which can be provided by 5GC NFs for FL members' selection",
                                    "table number": 18,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 6.39.1-2. Information that 5GC NFs can provide to the AI/ML server for performance monitoring of a UE involved in an AI/ML operation",
                                    "table number": 19,
                                    "summary": "",
                                    "name": ""
                                }
                            ]
                        },
                        {
                            "title": "6.39.2\tProcedures",
                            "text_content": "The figure depicts a procedure for selecting FL members, with steps outlined in Figure 6.39.2. The figure includes a flowchart with arrows indicating the sequence of actions, such as selecting a member, reviewing the member's qualifications, and providing feedback. The figure is essential for ensuring that the selection process is fair and transparent, and that the selected members are qualified and capable of performing their duties effectively.\nFigure 6.39.2: Procedure for 5GS assistance to FL members' selection\nThe AF ensures that the UEs associated to the UE group ID have application users consent in place and then follows the following procedure.\n1a-5a.\tThe procedure in clause 6.1.1.2 of TS 23.288 [6] for UE-related analytics subscribe by AFs via NEF are re-used.\n1b-5b.\tThe procedure in clause 4.15.3.2.3 of TS 23.502 [4] for UE-related event notifications subscribe by AFs via NEF are re-used.\nAfter having notification from the 5G network, the AF selects AI/ML user members for FL operation. Then the AF initiates the Nnef_AFSessionWithQoS_Create/Notify/Update/Revoke procedure in TS 23.502 [4] clause 4.15.6.6 for selected UEs for AI/ML operation.\nIn step 1a or step 1b, AF can include user consent indication and the UE filtering policy (e.g. UE group ID, Expected number of UE for reporting, validity conditions of areas of interest and time) in the subscription service operation, and NWDAF or AMF can derive the notifications based on the UE filtering policy.\nWith user consent indication and the UE filtering policy (e.g. UE group ID), the NEF checks with UDM for the user consent of the requested Analytics and Events Exposure Notifications before proceed step 3a and 2b. The NEF only indicates the list of UEs with granted user consent to NWDAF or UDM. The NEF also subscribes to the UDM with user consent change notification. If user consent changes for the UE, the NEF notifies the AF indicating the UE ID with proper cause value.\nIn step 3a and step 2b, the user consent indication is indicated to NWDAF and UDM, respectively. With the user consent indication and target list of UEs for Analytics and Event Exposure, the UDM does not check user consent again. If target list of UEs is not indicated, i.e. for any UEs, the user consent indication triggers requested NF, e.g. NWDAF, UDM, to check user consent of UEs that meet the validity conditions, e.g. Area of Interest, time.\nAlternatively, the AF can request to check user consent for Event/Analytics Exposure before proceeding step 1a-5a and step 1b-5b by subscribing to a new Event notification of user consent change by using the procedure in clause 4.15.3.2.3 of TS 23.502 [4] for UE-related event notifications.\nNOTE 1:\tWhether and how the AF can indicate one or more purpose(s) needs to cooperate with SA WG3.\nNOTE 2:\tThe user consent checking for the UE related 5GC information or analytics exposure to 3rd party AF when there are potentially more than one user consent enforcement points would need to be investigated by SA WG3. Whether a user consent indication or one or more purposes from AF or a new AF request message can be used to trigger user consent checking would need to be investigated by SA WG3.\nThe procedure for AF request for QoS is reused as defined in TS 23.502 [4] clause 4.15.6.6, the steps below describe how AI/ML AF consumes the Nnef_AFSessionwithQoS or Npcf_PolicyAuthorization services. When the AI/ML server requests QoS maps the performance requirements described in clause 7.10 of TS 22.261 [2] as follows:\n-\tExperience Data Rate UL/DL into Requested Guaranteed Bitrate, Requested Maximum Bitrate,\n-\tCalculate from the maximum end to end latency the latency in 5GS then map it into Requested 5GS Delay.\n-\tReliability into Requested Packet Error Rate.\nThe AI/ML AF requests QoS Notification Control that is used to help the AF to manage the communication with the UE. The AF subscribes to \"QoS targets can no longer (or can again) be fulfilled\", the AF may provide a list of Alternative QoS parameter for example:\n-\tIf the UE communication with the AI/ML mode is for decisions on the AI/ML model split, then the AF will provide one Alternative QoS parameter for each different split point between the UE and the AI/ML server.\n-\tIf the UE communication with the AI/ML model is for decisions on the AI/ML model to be downloaded, then the AF will provide one Alternative QoS parameter for each different AI/ML model that can be used for image-recognition.\nThe figure depicts a step-by-step procedure for 5G assistance to AI/ML operations, illustrating the various steps involved in enabling AI/ML capabilities in a 5G network. The figure includes a flowchart, a list of steps, and a glossary of terms, providing a clear and concise overview of the process.\nFigure 6.39.2-2: Procedure for 5GS assistance to AI/ML operations\n1.\tThe AF sends a request to reserve resources for an AF session using Nnef_AFsessionWithQoS_Create request message (UE IP address, AF Identifier, Flow description(s) or External Application Identifier, QoS reference, QoS parameters, Alternative Service Requirements) to the NEF. The AF may, instead of a QoS Reference, map the experience data rate UL/DL into the Requested Guaranteed Bitrate, Requested Maximum Bitrate, the maximum e2e latency is split to the UE to UPF latency then mapped into the Requested 5GS Delay, Reliability mapped into Requested Packet Error Rate and Requested Alternative QoS Parameter Set(s) or Alternative Service Requirements.\n2.\tThe NEF authorizes the AF requests, then contact the PCF that serves the SM Policy association for the provided UE IP address, triggering the Npcf_PolicyAuthorization_Create request and provides the UE address, AF Identifier, Flow description(s), the individual QoS parameters, QoS Reference and the Alternative Service Requirements. If the AF is trusted, the the AF uses the Npcf_PolicyAuthorization_Create request message to interact directly with PCF to request reserving resources for an AF session. The PCF that serves the SM policy association is found by querying BSF using the UE IP address.\n3.\tIf the request is authorized, the PCF derives the required QoS parameters based on the information provided by the NEF and notifies the result to the NEF using Npcf_PolicyAuthorization_Create request, The PCF derives the Alternative QoS parameter set(s) from the one or more QoS reference parameters or the Requested Alternative QoS Parameter Set(s) contained in the Alternative Service Requirements in the same prioritized order. The PCF sends PCC rules to the SMF with the QoS parameters including the Alternative QoS parameter set(s).\n4.\tThe PCF sends the Npcf_PolicyAuthorization_Update response message directly to the AF\n5.\tThe NEF sends a Nnef_AFsessionWithQoS_Create response message to the AF. Result indicates whether the request is granted or not.\n6.\tThe NEF shall send a Npcf_PolicyAuthorization_Subscribe message to the PCF to subscribe to notifications of Resource allocation status and to QoS targets can no longer (or can again) be fulfilled.\n7.\tWhen the the establishment of the transmission resources corresponding to the QoS succeeded or failed, the PCF sends Npcf_PolicyAuthorization_Notify message to the NEF notifying about the event.\n8.\tThe NEF sends Nnef_AFsessionWithQoS_Notify message wto indicate that resources are reserved, this includes provisioning of Alternative QoS Profiles to NG-RAN.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "6.39.3\tImpacts on services, entities and interfaces",
                            "text_content": "AF:\n-\tSupport to subscribe the Event IDs \"Location Report\", \"Connectivity state changes\", \"UE reachability status\", and/or \"UE moving in or out of a subscribed \"Area Of Interest\"\" by AMF, via NEF.\n-\tSupport to subscribe the Analytics IDs \"UE Mobility\" and \"Abnormal behaviour\" by NWDAF, via NEF.\n-\tIncluding the UE filtering policy in the subscription service operation.\n-\tAF request for QoS including subscription to resource allocation outcome and QoS targets can no longer (or can again) be fulfilled.\n-\tAF maps performance KPIs into QoS parameters exposed by NEF or by PCF, i.e. Requested GBR, MBR, PDB and PER.\n-\tIncluding user selection indication for AnalyticsExposure_Subscribe/EventExposure Subscribe.\nNEF:\n-\tSupport to check user consent if receiving user selection indication in AnalyticsExposure_Subscribe or EventExposure Subscribe from AF.\n-\tSupport to subscribe the new Event ID \"user consent changes\" from UDM for Event Exposure.\n-\tSupport to notify the AF with the UE ID and the proper cause of notification when user consent of a UE is changed.\nUDM:\n-\tSupport to store user consent for Event/Analytics Exposure in subscription information.\n",
                            "figures_meta_data": [],
                            "tables": []
                        }
                    ]
                },
                {
                    "title": "6.40\tSolution #40: Flexible Federated Learning Operation over 5GS",
                    "description": "",
                    "summary": "",
                    "text_content": "",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": [
                        {
                            "title": "6.40.1\tDescription",
                            "text_content": "The solution addresses Key Issue #7: 5GS Assistance to Federated Learning Operation as well as Key Issue #6: QoS and Policy Enhancements. The solution introduces flexibility in the FL operation by addressing group QoS aspects of the FL operation, introducing FL operation configuration recommendations to the AF by the 5GC, and enabling UE-initiated requests for FL operation.\nThe application server may derive group QoS requirements for the UEs selected for the FL operation that may work as a criteria for joining the FL operation. That is, the UEs participating in the FL operation which cannot meet the group QoS requirement may become stragglers in the FL task. The group QoS requirement may consist of required QoS parameters per UE or per multiple UEs.\nTo support such group QoS requirement concept in 5GS, the solution enables AF to request the group QoS requirements for a list of candidate UEs (i.e. group QoS) and obtain the list of selected UEs that have been provisioned with QoS Flows that meet the group QoS requirements.\nIn addition, the FL operation of an AI/ML-based application over the 5GS encounters suffers from rigidity constraints when all UEs are expected to provide their updated models within strict delay boundaries for the application server to update and distribute the global model. This has implications for the group QoS, which can be significantly affected by these boundaries. This solution thus proposes a more flexible FL operation by virtue of the following functional enablers:\ni.\tEnabling the UEs to engage in FL where synchronous operation is utilized by the application server, where the application server needs to wait for all local updates from the UEs before the aggregation takes place, and asynchronous mode operation, where the application server can aggregate models and provide a global model update as soon as a new model update arrives. In addition, hybrid modes are possible, e.g. application server would wait for selected group of UEs sharing a set of local models/model updates but not wait for other UEs sharing their models/model updates before the aggregation of models (or models updates) into a global model.\nii.\tEnabling the UEs to request joining an already existing FL group/session, which may be used as part of an asynchronous FL aggregation mode where the UEs may decide when to provide their model updates if the network authorizes it.\nThis solution relies on a new 5GC entity supporting the flexible application federated learning operation, which is proposed to be named Application Federated Learning Support Function (AFLSF). The proposal of such NF effectively means the 5GC is aware that an application FL operation is taking place, and the AF is requesting 5GC assistance for this. This entity could be a standalone NF or co-located with another 5GC NF. The AFLSF is in charge of informing and/or recommending the FL configuration to the application server. Furthermore, the information to derive the group QoS requirements may be limited in the application server and the QoS requirements can also be significantly affected by the aggregation mode of the FL operation, so the AFLSF may conduct analytics and provide recommendation on the group QoS requirements to the application server. While the aggregation mode decision, UE model sharing operation and selection of UEs participating in the FL operation are all proposed to happen at the application layer. The level of synchronization required among UEs when sharing their trained models with the application server is meant to depend on the 5GS overall state, hence the AFLSF providing the recommendation.\nIn addition, an AI/ML session identifier (AMSID) is introduced and UE-initiated request is proposed to support the flexible FL operation. The UE is provided with an AI/ML session identifier (AMSID) either by the AF or the AFLSF. Then, the UE which needs to perform FL would send the AMSID in a NAS message and a network node verifies if the AMSID is valid to be used for FL. This verification may be performed against existing FL UE context which contains the set of valid AMSID, and/or whether the UE is allowed to perform FL. Other conditions may also exist in the UE context e.g. the location where FL is allowed to be performed by the UE, the time of the day, etc. This information may be available at the network either from the UDM (e.g. subscription) or from an interaction between the Application Function (AF) and the network optionally via a Network Exposure Function (NEF). The network then determines if the UE is allowed to perform FL and if so the network grants the UE's request which may be a request to establish/modify a PDU session with a certain QoS profile. The network may apply specific QoS parameters for the UE's session as per information that is associated with the AMSID.\nIt is proposed that a selected UE which is to engage in FL should be provided with a new identifier which represents the AI/ML session identity. The UE may receive the AMSID from the AF or from the AFLSF.\nIn case the AF is responsible to allocate the AMSID to the UE, the allocation may be performed via application layer signalling that is out of scope of 3GPP.\nAlternatively, the AFLSF may be responsible to allocate an AMSID to the UE, or coordinate with the AF to allocate the AMSID. To achieve this, the following overall behaviour and actions are proposed:\n-\tThe AF communicates with the 5GC to indicate which UE(s) should be provided with the AMSID. The AF indicates which UE is selected to the AFLSF, optionally via another network node if required.\n-\tIn addition to identifying which UE should be provided with an AMSID, the AF may also provide other conditions that need to be met before the UE is allowed to engage in FL. These conditions may include any combination of the following, noting that other potential conditions may also be defined:\n-\tLocation of the UE where the FL is allowed\n-\tTime of the day, etc. at which the UE can/should connect to be part of a FL procedure\n-\tThe duration and frequency of the FL operation. For example, the UE should connect at a certain time T and can only continue to be part of a FL procedure after X units of time have elapsed, etc. The AF may also provide indication of when a UE may or may not re-join an ongoing FL training session after it does not provide a model update during a FL iteration.\n-\tWhether a certain number of UEs need to also be available at the same time (or at separate/different designated time) for FL, etc.\n-\tThe subscription information may determine which UE (or group(s) of UEs) is allowed to perform FL, and whether FL may be performed for one group only, or more than one group at any time, etc.\nSimilarly to other IDs used across the 5GS, the uniqueness of the AMSID is ensured by the entity that allocates it, namely the AF or the 5GC entity, i.e. the AFLSF. If the AF is independently responsible for the AMSID allocation, then the mechanism to guarantee uniqueness is out of 3GPP scope. If the AFLSF (or any 5GC NF) is responsible for the allocation (on its own, or in coordination with the AF), then a potential way to guarantee the uniqueness of AMSID is by receiving an allocation proposal from the AF and/or using a combination of the PLMN ID plus the group ID referring to the participants in the FL operation. In addition, other identifiers may be used in the AMSID allocation such as AF ID, other AI/ML session identifiers, etc.\nIf the AFLSF allocates the AMSID, once the AFLSF identifies a UE for FL, the AFLSF may allocate at least one AMSID and saves it in the UE context, where the context may also contain any other conditions that have been listed earlier e.g. location of UE where this AMSID allows the UE to engage in FL, time of the day, etc.\nThe allocated AMSID may be associated with a validity timer and/or validity location that indicate when and potentially where a FL session is valid. The AFLSF (or the AF, if this is provided over the application layer) may update the UE with different conditions that are associated with an AMSID if they change, or may provide a new AMSID if the validity timer and/or validity location expire.\nOnce allocated, the AFLSF provides this information (i.e. at least the AMSID and optionally with other conditions as listed earlier) to the UE using the following method:\n-\tThe AMSID information (which may include other conditions as listed earlier) may be provided to the UE via the application layer, where the AFSLF may first provide this information to the AF which in turn sends it to the UE via application layer signalling.\nIn addition, the UE may also have local policies or other configuration information that recommend/specify when the UE should engage in FL or when the UE should initiate a request for FL. For example, the UE may be configured with information that indicates when the UE should engage in FL, optionally for a particular AMSID. The UE should use the AMSID according to the conditions that are provided, if any. For example, the UE may:\n-\tuse an AMSID with a specific slice (S-NSSAI) and/or DNN if this information is provided with the AMSID, or may use the AMSID only if the a PDU session has been established with the provided S-NSSAI and/or DNN\n-\tuse the AMSID for a certain validity period if a validity timer is provided, or\n-\tuse the AMSID in a certain location if location information is provided such that the location information describes the validity of the AMSID (noting that the location information may be in the form of a list of tracking area identity list or any other type of location information)\n-\tuse the AMSID as a specific time or location, or when other conditions are met – where these conditions may be defined accordingly\nNote that any combination of the above conditions may be verified or enforced by the UE in order to use the AMSID.\nThe AMSID is subsequently used by the UE when it determines to use FL as described in clause 6.40.2.3. At that stage, a session management procedure is triggered where the request of the UE to join the FL operation is forwarded by the SMF to the AFLSF and a validation is performed by the AFLSF, which provides a recommendation to the AF. If the request is accepted/validated, the AFLSF response to the SMF may include QoS recommendation for the session. Alternatively, an application layer message can be triggered by the UE to join the FL operation. Then the AF requests a validation/recommendation to AFLSF including the AMSID for the UE to join the FL. The AFLSF provides a response to the AF including the information that the request to join the FL for the UE is accepted/validated. The AF may request the network to provide QoS for the joined UE.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "6.40.2\tProcedures",
                            "text_content": "The signalling flow for the AF to request the network to provide group QoS for a list of UEs (e.g. request to provide a same QoS for a list of UEs) is based on the signalling flow in Figure 4.15.6.6-1 of TS 23.502 [4] with the following differences and clarifications:\n-\tIn step 1, AF may include group QoS request indicator, a list of UE addresses, Group identifier (either Internal Group Identifier or External Group Identifier), the group QoS requirements in Nnef_AFsessionWithQoS_Create request message to request the QoS setup for UEs in the list of UE addresses based on the group QoS requirements for UEs in the list of UE addresses.\n-\tIn step 3, if the NEF received group QoS request indication and the list of UE addresses with more than one UEs from the AF, the NEF discovers PCF(s) for the list of UE addresses from BSF as defined in 6.40.2.4. NEF sends Npcf_PolicyAuthorization_Update request to each PCF with the list of UEs served by the PCF in addition to group QoS request indicator, AF Identifier, Flow description(s), the QoS Reference or individual QoS parameters and the optional Alternative Service Requirements received from the AF.\n-\tIn step 4, if the PCF received the request with group QoS request indication and the list of UE addresses from the NEF in step 3, the PCF processes the request as a multiple request from NEF with a single UE address. The PCF notifies the result per UE to the NEF.\nThe figure depicts a procedure for enabling FL operation configuration recommendation by AFLSF, with a focus on the steps involved in the process. The figure includes various elements such as the AFLSF, the FL operation, and the configuration recommendation. The steps are clearly outlined, with each step represented by a different colored box, making it easy to understand the sequence of actions. The figure also includes a legend to help users understand the different colors and symbols used in the diagram. Overall, the figure provides a clear and concise representation of the procedure for enabling FL operation configuration recommendation by AFLSF.\nFigure 6.40.2.2-1: Procedure for enabling FL operation configuration recommendation by AFLSF\nThe procedure for enabling FL operation configuration recommendation by AFLSF in Figure 6.40.2.2-1 is described step-by-step below.\n1.\tThe application server acting as AF determines to use FL to train a global model to be distributed and used by multiple UEs.\n2.\tThe AF requests 5GC assistance for FL operation (via NEF if AF is untrusted for the operator) using services provided by the AFLSF or NEF (e.g. Naflsf_FL_assistance_request/Nnef_FL_assistance_request or Naflsf_FL_assistance_subscribe/ Nnef_FL_assistance_subscribe). The request message (or subscription request message) may optionally include FL configuration parameters relevant to the 5GS as described in clause 6.40.1.1. These parameters may include a list of UEs or group of UEs for the complete FL operation (i.e. one list for all FL iterations) or one list per FL iteration, the maximum number of allowed iterations, a time window for model aggregation, QoS requirements, AMSID, target area(s), time validity, a minimum number of awaited models before global model update, UE continuous training flag.\n\tThe description of potential input parameters to the service requesting 5GC assistance for FL can be found in the following:\n-\tList/Group of UEs: external or internal ID of the UEs participating in the application FL operation. The same list/group can be provided for the complete FL operation, or a different list may be provided for each iteration of the FL operation.\n-\tMaximum number of learning iterations: the maximum iterations of model exchanges from the UEs to the application server and vice versa. The maximum number of iterations may not be reached if e.g. the training error criterion is met before the maximum number of iterations is reached.\n-\tA time window for model aggregation: maximum time that an application server can wait to receive local models from UEs to provide an update of the global model. If the time window is zero, then the application server operates in fully asynchronous mode.\n-\tMinimum number of awaited models: number of local UE models the application server requires to receive within the model aggregation time window to provide an update of the global model.\n-\tContinuous training flag: flag indicating whether UEs are allowed to continue performing training once they have shared their local model and before they receive an update of the global model.\n-\tQoS requirements: QoS requirements being requested by the AF for the FL operation to meets its performance.\n-\tAMSID: identification of AI/ML session identifier to be used for the application FL operation.\n-\tTarget area(s): area(s) where UEs should be located to be selected for FL operation.\n-\tOperation time validity: time during which the FL operation may be performed\n3.\tThe AFLSF subscribes to or requests NWDAF analytics to get assistance on the determination of the FL configuration recommendation. Those analytics include but may not be restricted to UE communication analytics and DN performance analytics, which provide statistics and/or predictions on user plane traffic that may help profiling UEs by the AFLSF and determine if and how they can be part of a FL group.\n4.\tThe AFLSF may consume the event exposure service Nsmf_EventExposure from SMF to collect available information relevant to the UE and the user plane status, which may help profiling UEs by the AFLSF and determine if and how they can be part of the FL group. Hence, the AFLSF may subscribe to user plane status information event, UE communications trends event, UE session behaviour trends event. The AFLSF may also subscribe to the QoS Monitoring report event, which should be made available in the context of AI/ML-based services in addition to the previously supported URLLC.\n5.\tThe AFLSF may consume the event exposure service Namf_EventExposure from AMF to collect available information relevant to the UE, which may help profiling UEs by the AFLSF and determine if and how they can be part of a FL group. Hence, the AFLSF may subscribe to UE location trends event, UE moving in or out of area of interest event, UE loss of communication event, UE reachability status event.\n6.\tBased on the collected inputs, the AFLSF derives a FL configuration recommendation based on the assistance request from the AF in step 2. The AFLSF may also derive an AMSID according to clause 6.40.1.2 if it doesn't have a suitable one yet. The AMSID is associated with the UEs which have been recommended for FL operation.\n7.\tA response is provided by the AFLSF notify service operation (e.g. Naflsf_FL_assistance_notify) to the AF via NEF if needed with a notification indicating the FL configuration parameters suggested by the AFLSF. The notification may contain some or all of the parameters mentioned in step 2 and described in clause 6.40.1.1. The AF may confirm whether the AFLSF recommendation has been accepted.\n8.\tAF requests the network to provide group QoS for a list of UEs as described in clause 6.40.2.1.\n9.\tThe application FL operation takes place between the application server at the AF and the UE.\n\nThe figure depicts a procedure for an UE (User Equipment) to initiate a request to join an AI/ML session for FL (Fiber-Optic Line Switching) in a 40G network. The figure illustrates the steps involved in initiating the request, including the use of a 40G optical line terminal (OLT) and distributed nodes. The figure also highlights the importance of redundancy paths to ensure failover reliability in the network.\nFigure 6.40.2.3.1-1: Procedure for UE-initiated request to join an AI/ML session for FL\nThe procedure for UE-initiated request to join an AI/ML session for FL in Figure 6.40.2.3.1-1 is described step-by-step below.\n1.\tAn AMSID is allocated to the UE according to the description of clause 6.40.1.2 when the AF selects the UE for application FL operation.\n2.\tThe UE decides to request to join an AI/ML session for FL. The decision is made by the application, thus it is out of 3GPP scope. The decision may be done if the UE has been allowed to participate in FL operation using asynchronous aggregation mode.\n3.\tThe UE sends a session management request message including the AMSID towards the SMF indicating the request to use FL.\n4.\tThe SMF sends a validation request to the AFLSF for the AMSID to be used by the UE in order to determine whether the UE is allowed to engage in FL using the AMSID.\n5.\tWhen the AFLSF receives an AMSID from the SMF, the AFLSF validates if the AMSID can be used for the UE:\n-\tThe AFLSF may indicate whether the request should be granted or not. The AFLSF may also indicate the QoS parameters to use for the session and provide that to the SMF.\n-\tThe above may require the AFLSF checking whether the AMSID can be used based on previous interactions of the AFLSF with the AF.\n6.\tThe AFLSF may provide an updated recommendation to the AF to select the UE for the FL operation indicating the AMSID, and the AF may confirm if the recommendation is accepted.\n7.\tThe AFLSF provides a validation response to the SMF indicating whether the UE request to join the FL operation using the AMSID is authorized. If the request is authorized, the validation response may include the AMSID, required QoS, etc.\n8.\tIf the SMF determines that the UE is allowed to use FL as per the AMSID being allowed, then the SMF may accept the PDU session management request with the QoS that is indicated by the AFLSF.\n9.\tThe UE starts the FL process after the establishment of the user plane resources.\nThe figure depicts a procedure for an UE (User Equipment) to initiate a request to join an AI/ML session for FL (Fiber-Optic Line Switching) in a 5G network. The figure illustrates the steps involved in initiating the request, including the UE's interaction with the network, the network's response, and the UE's subsequent actions. The figure also includes a visual representation of the network's architecture, highlighting the role of the UE in the network's operation.\nFigure 6.40.2.3.2-1: Procedure for UE-initiated request to join an AI/ML session for FL\nThe procedure for UE-initiated request to join an AI/ML session for FL in Figure 6.40.2.3.2-1 is described step-by-step below.\n1.\tAn AMSID is allocated to the UE according to the description of clause 6.40.1.2 when the AF selects the UE for application FL operation.\n2.\tThe UE decides to request to join an AI/ML session for FL. The decision is made by the application, thus it is out of 3GPP scope. The decision may be done if the UE has been allowed to participate in FL operation using asynchronous aggregation mode.\n3.\tThe UE sends a request to join AI/ML session including AMSID towards the AF via application layer.\n4.\tThe AF sends a validation request to the AFLSF for the AMSID to be used by the UE in order to determine whether the UE is allowed to engage in FL using the AMSID. The AF requests to the 5GC using services provided by the AFLSF or NEF (e.g. Naflsf_FL_assistance_request/Nef_FL_assistance_request). The request message includes an AMSID from the UE, a list of UEs, and join indication. There may be more than one UE to want to join the same AMSID when the AF sends the request.\n5.\tWhen the AFLSF receives the request from AF, the AFLSF validates if the AMSID can be used for the UE:\n-\tThe AFLSF may indicate whether the request should be granted or not. The AFLSF may also indicate the QoS parameters to use for the session to the AF.\n-\tThe above may require the AFLSF checking whether the AMSID can be used based on previous interactions of the AFLSF with the AF.\n6.\tThe AFLSF provides response to the AF whether the AMSID can be used for the UE. The response may include the AMSID, required QoS, etc.\n7.\tThe AF confirms that the request from UE to join the AI/ML session for FL with the AMSID is authorized. The AF may request the network to provide QoS for the newly joined UE.\n8.\tThe UE starts the FL process after the establishment of the user plane resources.\nBSF supports PCF discovery for multiple UEs, which can be used for AF to create or update QoS for the multiple UEs (e.g. for FL operation). The support of PCF discovery for multiple UEs can be achieved by the following enhancements:\n-\t(Consumer NF registration to BSF) When registering to the BSF, the PCF includes in Nbsf_Management_Register request message group identifier of the UE in addition to UE ID and PCF address. The BSF stores the group identifier, UE ID, PCF address.\n-\t(PCF Discovery of BSF) When Consumer NF wants to discover PCF address based on the group identifier or the list of UE IDs, Consumer NF provides in Nbsf_Management_Discovery request message a group identifier or a list of UE IDs. When the Nbsf management discovery request contains group identifier or a list of UE IDs, the BSF finds the PCF address(es) for each UE within the group identified by the group identifier or the PCF address(es) for each UE within the list of UE IDs. Then, the BSF returns to the Consumer NF with the PCF address per UE(s).\n\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "6.40.3\tImpacts on services, entities and interfaces",
                            "text_content": "AF:\n-\tProvides FL configuration parameters to the 5GC (NEF if AF is untrusted, or AFLSF is AF is trusted) via FL assistance services.\n-\tSends validation request to the 5GC for the UE to join the FL with the AMSID.\nNEF:\n-\tProvides request/subscription services for FL assistance operation and consumes AFLSF services.\nAFLSF:\n-\tImplicit awareness of application FL operation\n-\tProvides request/subscription services for FL assistance operation\n-\tSubscribes to NWDAF analytics, AMF/SMF event exposure\n-\tHandling of AMSID validation request\nSMF:\n-\tSends validation request to AFLSF for the AMSID to be used by the UE.\nBSF:\n-\tDiscovery of PCF address is enhanced to support discovery of PCF address(es) based on the group id for UE\n-\tDiscovery of PCF address is enhanced to support discovery of PCF address(es) based on a list of UE IDs as an inputUE:\n-\tRequests to join an AI/ML session for FL.\nUE:\n-\tMay include the AMSID in the session management request to indicate the request to join the FL.\n",
                            "figures_meta_data": [],
                            "tables": []
                        }
                    ]
                },
                {
                    "title": "6.41\tSolution #41: Solution for supporting aggregated UE performance monitoring and exposure for a group of UEs",
                    "description": "",
                    "summary": "",
                    "text_content": "",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": [
                        {
                            "title": "6.41.1\tDescription",
                            "text_content": "This solution aims to address the key issue #7 to support aggregated UE performance monitoring and exposure for a group of UEs. The proposed solution is suitable for any group based AIML operations, including Federated Learning operations.\nRegarding UE performance, we focus on the QoS parameters, such as packet latency, bit rate, packet drop rate. Those QoS parameters are already specified as part of the output parameters of DN Performance Analytics in clause 6.14 of TS 23.288 [6]. However, current output parameters of DN Performance analytics need to be extended to include aggregated parameters. Therefore, the solution proposes to add the following Analytics subsets in DN Performance Analytics:\n-\taggregated traffic rate;\n-\tvariance of the traffic rate;\n-\tvariance of packet delay;\n-\tvariance of packet loss rate.\n-\tthe UEs in the group whose traffic rate, packet delay and loss rate higher or lower than a threshold, respectively, where the threshold can be specified by the Analytics consumer in the Analytics request. When the analytics consumer specifies the SUPImax (defined in TS 23.288 [6]) parameter, NWDAF only reports the top N UEs whose QoS parameters are higher or lower than the threshold, where N equals to SUPImax.\nThe extended output parameters do not require any changes on the current input data of the DN performance Analytics.\nWhen the AF requests analytics for a group of UEs (i.e. UEs involved in the same FL application procedure) then the AF provides the list of UE IDs and the corresponding Analytics subsets shown above in the Analytics Subscription request to the NWDAF.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "6.41.2\tProcedures",
                            "text_content": "The procedure is the same as clause 6.14.4 of TS 23.288 [6], where the analytics consumer is the AF (via NEF) and the Target of Analytics Reporting is a group of UEs which are participating the AIML operations.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "6.41.3\tImpacts on services, entities and interfaces",
                            "text_content": "-\tThe output of the DN Performance Analytics is extended with more parameters.\n",
                            "figures_meta_data": [],
                            "tables": []
                        }
                    ]
                },
                {
                    "title": "6.42\tSolution #42: FL operation support by 5GS based on AF session with required QoS provided by Application Server",
                    "description": "",
                    "summary": "",
                    "text_content": "",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": [
                        {
                            "title": "6.42.1\tDescription",
                            "text_content": "This solution maps to KI#7 and KI#6 described in clause 5.\nBased on KI#7 objective, Federated Learning between UE(s) and Application Function requires significant computation both on UE and Model provider Application Function to execute one round/iteration of the FL task. For each iteration the server selects FL members (UEs) that will participate in this iteration, perform relevant configuration, download the global model, relevant model parameters and then wait for the UE(s) to report back with the updated local model. Only if enough UE(s) report back, the iteration will be considered successful else the iteration may be abandoned. Given this, to ensure most of the iteration are successful to in turn generate an optimum global model i.e. to avoid straggling devices (devices which do not report back in time or do not respond on configuration by the server) it is beneficial if 5GS can expose relevant network status/information to aid the Application Function to select the FL members with best chance for a successful iteration. The selection of devices for a given iteration is in the scope of AF. However, the 5GS can aid the AF to make intelligent decisions (best chance for a successful iteration within a given period) regarding FL member selection.\nThe following is the assumption in this solution:\n-\tHow the candidate list of UE(s) is selected to participate in each iteration of Federated Learning is in scope of the Application Function.\nThe following outlines the salient features of this solution:\n-\tThe AF sends a request to reserve resources for AF session to the NEF which includes AIML group information, AIML group performance information. The AIML group information consists of External Group ID or list of candidate UEs selected by the AF to participate in an FL iteration, Area of Interest. The AIML group performance information includes Maximum latency for the AIML group, Maximum packet loss rate in UL, Maximum packet loss rate in DL, Duration for the requested QoS, Minimum number of UEs in the AIML group.\n-\tIf multiple UE(s) from the AF group is served by the same PCF, the NEF may trigger a Npcf_GroupPolicyAuthorization_Create request towards the PCF with UE address(es), AF Identifier, Flow description(s), AIML Group performance information, AIML session indicator as input parameters. The NEF includes AIML session indicator if the Nnef_GroupAFsessionWithQoS_Create request in step 1 includes the AIML Group Performance container.\n-\tIf the PCF determines that the SMF serving the UE needs updated policy information, the PCF issues a Npcf_SMPolicyControl_UpdateNotify request with updated policy information about the PDU Session. The QoS flow binding shall ensure that, when the PCF provisions the PCC rule in SMF which contains the AIML group performance information and AIML session indicator, the PCC rule is bound to a new QoS Flow and no other PCC rule is bound to this QoS Flow.\nThe procedure for AF request for required QoS for the potential list of UE(s) that are selected by AF for participation in an iteration of Federated Learning is illustrated in Figure 6.42.2-1.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "6.42.2\tProcedures",
                            "text_content": "The figure depicts a procedure for AF to request QoS for potential UE(s) that are selected by AF. The procedure includes steps for selecting the potential UE(s), obtaining the required QoS, and submitting the request to the network control center.\nFigure 6.42.2-1: Procedure for AF request for required QoS for the potential list of UE(s) that are selected by AF\n1.\tThe AF sends a request to reserve resources for AF session using Nnef_GroupAFsessionWithQoS_Create request message (AF Identifier, Flow description(s) or External Application Identifier, QoS reference, DNN, S-NSSAI, AIML group information, AIML group performance information) to the NEF. The AIML group information consists of External Group ID or list of candidate UEs selected by the AF to participate in an FL iteration, Area of Interest. The AIML group performance information includes Minimum and Maximum latency for the AIML group, Minimum and Maximum packet loss rate in UL, Minimum and Maximum packet loss rate in DL, Duration for the requested QoS, Minimum number of UEs in the AIML group. Maximum Requested bandwidth DL/UL is the maximum bandwidth in DL/UL for all the UEs included in the AIML group information. Maximum latency for the AIML group is the maximum reporting delay acceptable for all the UEs included in the AIML group information. Maximum packet loss rate in UL/DL is the maximum packet loss rate acceptable for all the UEs included in the ALML group information. Duration for the requested QoS is the time for which requested QoS is required for all the UEs included in the AIML group information. Minimum number of UEs in the AIML group indicates the minimum number of UEs which for which the requested QoS can be provided for the list of UEs included in the AIML group information.\nEditor's note:\tIt is FFS whether additional parameters are sent from AF as AIML group performance information.\n2.\tThe NEF assigns a Transaction Reference ID to the Nnef_GroupAFsessionWithQoS_Create request. The NEF authorizes the AF request and may apply policies to control the overall amount of QoS authorized for the AF. If the authorization is not granted, the NEF replies to the AF with a Result value indicating that the authorization failed.\n3.\tThe NEF uses the External Group ID or list of UE addresses in step 1 to sends a Nbsf_Management_Discovery request to BSF to discover the PCF(s) serving the UEs of the indicated group in the AF request.\nIf the AF is considered to be trusted by the operator, the AF uses the Npcf_PolicyAuthorization_Create request message to interact directly with PCF(s) to request reserving resources for an AF session or sends a Nbsf_Management_Discovery request to BSF to discover the PCF(s) serving the UEs.\n4.\tThe BSF performs PCF discovery based on the input provided by the NEF in step 3.\n5.\tThe BSF sends a Nbsf_Management_Discovery response including the list of PCF(s) serving the UEs of the indicated in AIML group information provided by the AF.\nIf the AF is trusted by the operator, the BSF sends a Nbsf_Management_Discovery response including the list of PCF(s) associating to the UEs of the AIML group provided by the AF, in which each PCF may be associated to different UEs of the indicated group.\n6.\tIf multiple UE(s) from the AF group is served by the same PCF, the NEF may trigger a Npcf_GroupPolicyAuthorization_Create request towards the PCF with UE address(es), AF Identifier, Flow description(s), AIML Group performance information, AIML session indicator as input parameters. The NEF includes AIML session indicator if the Nnef_GroupAFsessionWithQoS_Create request in step 1 includes the AIML Group Performance container.\n7.\tFor request received from the NEF in step 6, the PCF determines whether the request is authorized and notifies the NEF if the request is not authorized. If the request is authorized, PCF derives the required QoS parameters based on the information provided in the ALML group performance container and determines whether this QoS is allowed (according to the PCF configuration) and notifies the result to the NEF.\nWhen the PCF authorizes the service information from the AF, it generates a PCC rule by deriving the QoS parameters of the PCC rule based on the service information, AIML Group performance information and includes the AIML session indicator.\nIf multiple UE(s) from the AF group is served by the same PCF, the PCF sends Npcf_GroupAuthorization_Create response with the result (success or failure) associated with the list of UEs for which policy authorization was successful and reason for failure for the list of UEs for which policy authorization failed.\nIf the AF is trusted by the operator, the PCF sends the Npcf_GroupPolicyAuthorization_Create response message directly to the AF.\nIf the PCF determines that the SMF serving the UE needs updated policy information, the PCF issues a Npcf_SMPolicyControl_UpdateNotify request with updated policy information about the PDU Session. The QoS flow binding shall ensure that, when the PCF provisions the PCC rule in SMF which contains the AIML group performance information and AIML session indicator, the PCC rule is bound to a new QoS Flow and no other PCC rule is bound to this QoS Flow.\nSteps 6 and 7 are repeated for all the PCFs identified in step 5.\n8.\tThe NEF keeps track of the result included step 7 from all the PCFs identified in step 5. If minimum UEs in the group with requested QoS parameter is provided in step1, and the results from all PCFs matches or exceeds the minimum UEs in the group with requested QoS parameter, the NEF sends a Nnef_GroupAFsessionWithQoS_Create response message (Transaction Reference ID, Result, list of UEs in the AIML group for which the requested QoS is allowed) to the AF where the Result indicates that the request is granted. The UEs in the AIML group for which the QoS is allowed is included in the response only when the response from PCF(s) to NEF in step 7 indicates requested QoS for UE(s) is not allowed for all the UEs belonging to the AIML group provided as input in step 1.\n9.\tThe NEF shall send a Npcf_PolicyAuthorization_Subscribe message to the PCF(s) to subscribe to notifications of Resource allocation status. The PCF responds with a Subscription Corelation ID which allows the NEF to track all the subscription notification unique to each UE in step 8.\n10.\tWhen the event condition is met, e.g. the establishment of the transmission resources corresponding to the QoS update succeeded or failed, the QoS target can no longer be fulfilled, QoS monitoring parameters the PCF sends Npcf_PolicyAuthorization_Notify message to the NEF notifying about the event. The PCF includes the event information and Notification correlation information which identifies the AIML group AF session.\nIf the operator trusts the AF, the PCF(s) sends the Npcf_PolicyAuthorization_Notify message directly to AF.\n11.\tWhen the NEF receives the Npcf_PolicyAuthorization_Notify for all the UEs for the request was granted in step 8, the NEF sends Nnef_GroupAFsessionWithQoS_Notify message with the event reported by the PCF(s) to the AF i.e. QoS resource allocated for all the UEs for which the request was granted in step 8 with the Transaction Reference ID.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "6.42.3\tImpacts on services, entities and interfaces",
                            "text_content": "NEF:\n-\tNew service operation to assist resource reservation for list of UEs provided by the AF.\n-\tProvides AIML session indicator to the PCF.\nBSF:\n-\tExtend support for BSF management discovery service operation to discover the serving PCF(s) to include list of UEs provided by the AF.\nPCF:\n-\tNew service operation for group policy authorization when multiple UEs are served by the same PCF.\n-\tHandles the policy authorization request from the NEF and generates PCC rule by deriving the QoS parameters of the PCC rule based on the service information, AIML Group performance information and includes the AIML session indicator.\n",
                            "figures_meta_data": [],
                            "tables": []
                        }
                    ]
                },
                {
                    "title": "6.43\tSolution #43: FL member selection",
                    "description": "",
                    "summary": "",
                    "text_content": "",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": [
                        {
                            "title": "6.43.1\tDescription",
                            "text_content": "This solution is proposed to address Key Issue #7: 5GS Assistance to Federated Learning Operation.\nThis solution proposed that application server determine the UE groups for FL operation based on the user consent subscription information, UE's location, end to end delay and packet drop for the UE.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "6.43.2\tProcedures",
                            "text_content": "\nThe figure depicts a procedure for selecting FL members, which is an essential step in the FL (Federated Learning) process. The figure shows a flowchart with various steps, such as selecting the FL member, defining the learning algorithm, and selecting the FL algorithm. The steps are numbered and labeled, making it easy to follow the process. The figure also includes a legend to help understand the different options for selecting FL members. Overall, the figure provides a clear and concise visual representation of the FL member selection process.\nFigure 6.43.2.1-1: Procedure for FL member selection\n1.\tThe AF retrieves the user consent subscription data, indicating whether the network is allowed to expose UE related 5GC information, for the UEs in the candidate list from the UDM (via NEF if AF is untrusted) by invoking Nudm_SDM_Get service operation.\n2.\t[Optional]The AF requests the location reporting of the UEs from the AMF (via NEF if AF is untrusted) by invoking Namf_EventExposure_Subscribe (Location Reporting).\nThe AF should maintain the candidate UE list itself before FL member selection, and include the Target UE Identifier(s) for the UEs in the candidate list in the request as described in clause 5.6.7 of TS 23.501 [3], which is same for step 2 and step 3.\n3.\tThe AF initiates direct notification of Qos Monitoring procedure for delay information for the UEs in the candidate list, as defined in steps 1a-5 of clause 6.4.2.1 of TS 23.548 [10].\n4.\tThe AF requests user plane information, e.g. Throughput UL/DL, Packet transmission, Packet retransmission, for the UEs in the candidate list from UPF.\nNOTE 1:\tHow to collect data from UPF will depend on the outcome of FS-UPEAS SID.\n5.\tThe AF selects FL members based on user consent subscription data from UDM, UE location from AMF, and delay and packet drop information reporting from UPF.\nNOTE 2:\tAF may keep monitoring the information from AMF/UPF/UDM to update FL members.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "6.43.3\tImpacts on services, entities and interfaces",
                            "text_content": "AF:\n-\tSupporting user consent subscription data collection from UDM.\n-\tSupporting FL member selection based on the information from AMF, UDM and UPF.\nUDM:\n-\tSupporting user consent information of whether the network is allowed to expose UE related 5GC information.\nUPF:\n-\tSupporting to report user plane information to AF.\n",
                            "figures_meta_data": [],
                            "tables": []
                        }
                    ]
                },
                {
                    "title": "6.44\tSolution #44: 5G assisted FL member selection for application request",
                    "description": "",
                    "summary": "",
                    "text_content": "",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": [
                        {
                            "title": "6.44.1\tDescription",
                            "text_content": "This solution is applied to KI#7: 5GS Assistance to Federated Learning Operation.\nThis solution supports AF sends request to 5GS for a list of UEs with one or multiple restriction criterial, for example:\n-\tUEs in Connected state.\n-\tUEs in different location information.\n-\tUE QoS monitoring threshold.\n-\tService Experience threshold.\nThe AIML function maybe co-located with NEF or deployed standalone and used for external exposure to assist 5G AIML service. AIML function / NEF sends assistance information request to 5GC according to the restriction criterial that received from AF and determines / reduces the UE list according to the feedback from 5GC. For example, AIML function / NEF requests AMF to provide the UEs activated status and location information, AIML function / NEF requests PCF to provide the QoS monitoring information and NWDAF to provide Service Experience analytics, AIML function / NEF reduces the UE list step by step based on all these received information from AMF and NWDAF, and sends the final potential UE list to AF.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "6.44.2\tProcedures",
                            "text_content": "The figure depicts a 5G assisted FL member selection process for application requests with a restriction criterion. It illustrates the selection process, including the selection criteria, the selection algorithm, and the selection results. The figure is used to demonstrate the effectiveness of 5G in assisting FL member selection, which is crucial for the efficient and reliable operation of the network.\nFigure 6.44.2-1: 5G assisted FL member selection for application request with restriction criterial\n1.\tAF sends the request to the AIML NF / NEF with the Target of reporting set as UE ID list 1 and the restriction criterial as described in clause 6.44.1.\n2.\tAIML NF / NEF may send Namf_EventExposure_Subscribe message to AMF(s) and the event type sets to UE reachability and UE location for the UE ID list 1 that received from AF.\n3.\tAMF(s) send the UE reachability and UE location information to AIML NF / NEF. AIML NF / NEF filters the UE ID list 2 from UE ID list 1 based on the received UE reachability and UE location information from AMF(s) and the restriction criterial from AF.\n4.\tAIML NF / NEF sends Npcf_EventExposure_Subscribe message to PCF(s) to request to QoS monitoring information (e.g, the UL and DL Packet delay) for UE ID list 2.\n5.\tPCF responses the QoS monitoring information for UE ID list 2 to AIML NF / NEF. AIML NF / NEF filters the UE ID list 3 from UE ID list 2 based on the received QoS monitoring information and the restriction criterial from AF.\n6.\tAIML NF / NEF sends Nnwdaf_AnalyticsSubscription_Subscribe to NWDAF(s) to request the UE QoS monitoring prediction for the UE ID list 2.\n7.\tNWDAF sends the requested analytics result to AIML NF / NEF for UE list 3. AIML NF / NEF filters UE ID list 4 from UE ID list 3 based on the received Analytics result and the restriction criterial from AF.\nNOTE 1:\tSteps 2-3, steps 4-5 and steps 6-7 may be performed in different sequence which depends on AIML NF / NEF implementation.\nNOTE 2:\tThis solution can also applied to other restriction criterial that requested by AF.\n8.\tAIML NF / NEF sends the UE ID list 4 to AF.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "6.44.3\tImpacts on services, entities and interfaces",
                            "text_content": "AI ML NF:\n-\treceive request from AF for a list of UE with the restriction criterial.\n-\tdetermines the UE list based on the received information from 5GC and the restriction criterial from AF.\n-\texpose the potential UE list to AF.\n",
                            "figures_meta_data": [],
                            "tables": []
                        }
                    ]
                },
                {
                    "title": "6.45\tSolution #45: Improving FL performance by selecting central application server with 5GC's assistance",
                    "description": "",
                    "summary": "",
                    "text_content": "",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": [
                        {
                            "title": "6.45.1\tDescription",
                            "text_content": "This solution addresses the following aspect of Key Issue #7 \"5GS Assistance to Federated Learning Operation\".\n-\tHow to assist AF to increase the FL performance (e.g. to manage latency divergence) among UEs when the application server receives the local ML model training information from different UEs in order to perform global model update.\nIn federated learning, an increase of communication delay for anyone of member UE will cause a delay for overall FL progress. In application AI/ML based FL, the member UEs may be served by different application servers. Figure 6.45.1-1 presents an example that FL central server may distributed in different area.\nThe figure depicts a network architecture with different application servers as central servers, each serving a specific application. The central server is responsible for managing the network's resources and ensuring the smooth operation of the network. The figure illustrates the different types of application servers, such as web servers, database servers, and application servers, and their respective roles in the network. The central server is also responsible for managing the network's resources and ensuring the smooth operation of the network.\nFigure 6.45.1-1: Using Different Application Server as Central Server\nNOTE:\tIt is assumed that there is only one central server in each round of FL.\nIt is obvious that using different application server as FL central server will achieve different performance (e.g. overall packet delay, traffic rate, etc.). To improve the overall performance of FL, how to select appropriate central server of application AI/ML based FL should be considered. The AF should be able to determine the best central server for one or multiple rounds of FL with 5GC's assistance to improve the overall FL performance. During FL operation, due to the member UE's mobility, the AF should be able to change the central server dynamically. On the other hand, due to UE mobility, UE status and application behavior changes, it is not optimal if some member UEs are still served by the chosen central server, the AF may change the member UE(s) dynamically and change central server in parallel.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "6.45.2\tProcedures",
                            "text_content": "The figure depicts the procedure of selecting a FL (Federated Learning) Central Server, which is crucial for the efficient training of machine learning models. The figure illustrates the steps involved in selecting a suitable FL Central Server, including evaluating the server's performance, considering the server's capacity, and ensuring that it meets the required security standards. The figure also highlights the importance of selecting a server that is geographically distributed to ensure data privacy and security.\nFigure 6.45.2-1: Procedure of FL Central Server Selection\n1-2.\tThe AF sends Analytics subscription to the NWDAF via NEF. The parameters should include:\n-\tAnalytics ID(s) (\"DN Performance\" is mandatory, \"UE Mobility\", \"Network Performance\" and others are optional);\n-\tMember UE(s);\n-\tApplication ID(s);\n-\tApplication server instance address(es);\n-\tThe target time period;\n-\tA flag indicating that whether suggested server list is required;\n-\tOther parameters related to the Analytics ID(s);\n3.\tThe NWDAF collects data from related NF(s) and derives the analytics. The input data of \"DN performance\" are mainly provided by the AF. The input data of other Analytics ID (e.g. \"UE Mobility\", \"Network Performance\" ) may be provided by other NFs (e.g. AMF, NRF). This may include:\n-\tTime delay between member UE(s) and the application servers;\n-\tMaximum latency divergence between member UE(s) and different application server;\n-\tTraffic rate for member UE(s) communicating with the application servers;\n-\tPacket loss rate of communications between member UE(s) and the application servers;\n-\tOther results related to the analytics ID(s);\nOptionally, the NWDAF derives the suggested list of application server(s) (sorting in descending order) according to the above analytics based on the AF's requirement in step 1.\nNOTE 1:\tHow the AF assists NWDAF to do \"DN performance\" analytics is out of the scope of this study.\n4-5.\tThe NWDAF sends the analytics report or the suggested list of application server(s) to the AF via NEF.\n6.\tThe AF selects the best application server as the FL central server based on local internal logic and the analytics results or the suggested list received from NWDAF. The AF may update the subscription to NWDAF based on the final decision.\n7.\tOptionally, the AF may send policy related information (e.g. AM or SM policies related information) to PCF.\n8.\tThe AF sends notify to the selected central server with the FL related information. The central server starts FL with the member UE(s).\n9-10.\tThe AF sends Analytics subscription to the NWDAF via NEF for the member UE(s). The parameters may include:\n-\tAnalytics ID(s) (\"DN Performance\", \"UE Mobility\", \"Abnormal behaviour\", \"Network Performance\");\n-\tMember UE(s);\n-\tApplication ID(s);\n-\tApplication server instance address(es);\n-\tThe target time period;\n-\tOther parameters related to the Analytics ID(s).\n11.\tThe NWDAF collects data from related NF(s) (e.g. AF, AMF, NRF, SMF) and derives the analytics.\n12-13.\tThe NWDAF sends the analytics report to the AF via NEF.\n14.\tThe AF selects the best member UE(s) as the FL clients based on local internal logic and the analytics results received from NWDAF. The AF may update the subscription to NWDAF based on the final decision.\n15.\tOptionally, the AF may send policy related information (e.g. AM or SM policies related information) to PCF.\n16-17.\tThe NWDAF may continuously send new analytics report or new suggested list of application server(s) based on the subscription of the AF in step 1 and 9.\n18.\tThe AF may reselect the central server and member UE(s) based on local internal logic and information received from NWDAF.\n19.\tIf the central server changed, the AF sends notification to the original server and the new central server. The original central server then may send the FL context to the new central server. The new central server continues the FL with member UE(s). Similarly, if the member UE(s) changed, the AF sends notification to the original member UE(s) and the new member UE(s). The original member UE(s) then may send the FL context to the new member UE(s). The new member UE(s) continues the FL with central server.\nNOTE 2:\tHow the new central server and the new member UE(s) get the FL context should be determined by AF.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "6.45.3\tImpacts on services, entities and interfaces",
                            "text_content": "NWDAF:\n-\tDerive the latency divergence in \"DN Performance\".\n-\t[OPTIONAL] Derive the suggested list of application server based on the analytics result.\nAF:\n-\tDetermine the best application server based on internal logic and information received from NWDAF.\n-\tDetermine the best member UE(s) based on internal logic and information received from NWDAF.\n",
                            "figures_meta_data": [],
                            "tables": []
                        }
                    ]
                },
                {
                    "title": "6.46\tSolution #46: 5GS assistance for FL member selection based on UE's location and direction",
                    "description": "",
                    "summary": "",
                    "text_content": "This contribution addresses KI#7 on \"5GS Assistance to Federated Learning Operation\" by providing 5GS assistance for FL member selection based on UE's location and direction.\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": [
                        {
                            "title": "6.46.1\tDescription",
                            "text_content": "The example shown in Figure 6.46.1-1 is very common for vehicles since they can only move on the road which makes that geographically close vehicles tend to have similar data sets from in-vehicle cameras or sensors. To avoid to select these nodes with similar data sets for FL training, 5GC needs to ensure that the distance between each candidate UE provided to the FL server is adequately apart.\nMoreover, in Figure 6.46.1-1, car1 and car2 have the same location information from 5GC point of view since they are in the same cell, however they are running at different direction on the road and may have different data sets from in-vehicle camera. For location based FL member selection, this situation need to be considered which means finer granularity (e.g. cell level instead of TA level) and more specifically defined (e.g. same or opposite direction) of location information is needed.\nThe figure depicts a traffic accident scene with various elements such as vehicles, traffic lights, and pedestrians. The scene is captured in a 3D perspective, allowing for a comprehensive view of the accident. The figure includes a variety of objects, such as cars, trucks, and pedestrians, each with distinct colors and positions. The traffic lights are shown in different states, indicating the current traffic conditions. The scene is further detailed with the presence of traffic signs, which provide important information to the viewer. Overall, the figure provides a detailed and realistic representation of a traffic accident scene, allowing viewers to understand the situation and make informed decisions.\nFigure 6.46.1-1: Recognition of traffic accident\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "6.46.2\tProcedures",
                            "text_content": "The figure depicts a graphical representation of the 5G assistance system for FL member selection, showing the location and direction of each UE (User Equipment) based on their location and direction. The system uses a combination of location-based and direction-based assistance to provide the most relevant assistance to each UE.\nFigure 6.46.2-1: 5GS assistance for FL member selection based on UE's location and direction\nNOTE:\tThe functionality of the NEF has been extended in this solution in order to support the assistance of the FL member selection for the given FL operation.\nStep 1:\nIn order to select the UEs with different data sets which are within the FL coverage area, the AF requests 5GS assistance to support the UE selection by considering the UE's current location and direction. AF includes the External Group Identifier and the following filtering info as part of the FL UE selection request:\nFL Coverage Area: The FL training server's coverage area, i.e. the coverage area of the FL training server where the selected UEs participate in the FL operation.\nWhen providing a target area for FL, the AF may provide sub-areas (e.g. cell 1,2,3), and provide a maximum number of UEs (e.g. 2) that should take part in FL from each sub-area.\n-\tDirection: Select the UE with the different direction in the FL coverage Area.\nStep 2:\nNEF translates the External Group Identifier to Internal Group Identifier (the procedure as defined in clause 4.13.2 of TS 23.502 [4]).\nSteps 3-4:\nIn order to locate the group of UEs which are associated with the AF and are within the FL training server coverage (i.e. FL coverage area), and more specifically, they can be identified to be located at the sub-area of the FL coverage area, for each sub-area of the FL coverage area, the NEF invokes Namf_EventExposure_Subscribe service operation with the Internal Group Identifier, event ID = Number of UEs present in a geographical area. AMF will provide a list of UEs that are within the sub-area of the FL coverage area to the NEF using the Namf_EventExposure_Notify service operation.\nStep 5:\nIn order to identify the appropriate NWDAF which can provide UE mobility analytic output in order to get the UE direction, the NEF needs to select the suitable NWDAF by initiating the NWDAF discovery request (Analytics ID = UE mobility, AOI = Target AOI) with Internal Group Identifier.\nSteps 6-7:\nThe NEF invokes NWDAF Analytics Info request (Internal Group Identifier, Analytics ID = UE mobility, Filters include \"AOI (e.g. cell 1, 2, 3))\"). NWDAF will then provide a list of UEs and UE's location in the order of which the UE passes through to the NEF. Then the NEF gets the corresponding statistics of UE mobility and the UE's direction (as defined in clause 6.7.2 of TS 23.288 [6]).\nSteps 8-9:\nBased on the step 3-4, the NEF knows the list of UE in the FL coverage area and each UE's location within the sub-area. Based on the step 6-7, NEF will know the direction of each UE. NEF selects the candidate UEs based on the request from AF. For example, the NEF selects two UEs in each cell and the NEF selects the UE with the different direction within the FL coverage Area. The NEF notifies AF for such UE candidate list.\nNOTE:\tExample of how NWDAF can retrieve UE's direction can be found in solution #26 from TR 23.700-81 [11].\nSteps 10:\nThe NEF also needs to consider the list of UEs which are now within the FL coverage area, but may move out of the FL coverage area. Therefore, for each UE in the candidate list in steps 8-9, the NEF invokes the Namf_EventExposure_Notify service with UE ID = SUPI, Event ID=UE moving in/out of AOI (PRA) to keep track the movement of the UE(s) in/out of the AOI.\nSteps 11-12:\nIf step 10 identifies any UE which is moving out of the FL coverage area, the NEF may further notify AF of the given UE which is moving out the coverage.\nStep 13:\nWhen AF completes the FL operation, it terminates the 5GS assistance support for the UE selection based on the UE's location and direction.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "6.46.3\tImpacts on services, entities and interfaces",
                            "text_content": "NEF:\n-\tNew service operation to provide the candidate UE selection function.\n-\tSelect the candidate UE list based on the Interested area information, maximum number of UEs in sub-area and UE direction request provided by AF.\nAF:\n-\tRequest NEF to provide the candidate UE list based on the Interested area information, maximum number of UEs in sub-area and UE direction.\nNWDAF:\n-\tIf multiple UE locations are provided, they will be in the order of which the UE passes through.\n",
                            "figures_meta_data": [],
                            "tables": []
                        }
                    ]
                },
                {
                    "title": "6.47\tSolution #47: Composite exposure service for 5GS assistance to FL member selection",
                    "description": "",
                    "summary": "",
                    "text_content": "",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": [
                        {
                            "title": "6.47.1\tDescription",
                            "text_content": "Editor's note:\tTrusted AF scenario (to perform this functionality at existing NFs or a new NF) is FFS.\nSeveral kinds of 5GS exposure information have been proposed to assist FL member selection in TR 23.700-80 such as EventExposure from AMF, PCF, SMF/UPF and AnalyticsExposure from NWDAF in solution #17, #18, #19, #21 and #24. A combination of these exposures are often necessary according to various FL member selection policies of actual use cases.\nThis solution proposes a new service (CompositeExposure) of NEF which combines current EventExposure service and AnalyticsExposure service. AF can indicate multiple Event ID(s) and Analytics ID(s) according to different FL member selection policies. For each Event ID and Analytics ID, NEF provides the service as defined in clause 5.2.6 of TS 23.502 [4] to gather the information from the corresponding NFs. Then NEF replied to AF with UE information that has matched all indicated Event ID(s) and Analytics ID(s).\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "6.47.2\tProcedures",
                            "text_content": "The figure depicts a composite exposure service for 5GS assistance to FL member selection, illustrating the process of selecting FL members based on their exposure to 5G signals. The service is designed to ensure that only the most suitable FL members are selected for the 5GS assistance, taking into account factors such as exposure to 5G signals and the potential impact on the environment.\nFigure 6.47.2-1: Composite exposure service for 5GS assistance to FL member selection\nStep 1:\nAF requests to subscribe Nnef_CompositeExposure service indicating parameters as follows:\n-\tUE list (GPSIs, SUPIs, External Group Identifiers, IP addresses).\n-\tAnalytics ID(s), Analytics Filter Information and etc. as defined in clause 5.2.6.16.2 of TS 23.502 [4].\n-\tEvent ID(s), Event Filter(s) and etc. as defined in clause 5.2.6.2.2 of TS 23.502 [4].\n-\tArea info (TA/Cell ID, geographical area).\n-\tExpiry time.\nSteps 2-3:\nNEF operates Nnef_AnalyticsExposure service as defined in clause 5.2.6.16 of TS 23.502 [4].\nNOTE:\tIf AF sends UE ID set as IP addresses, NEF retrieves the corresponding SUPIs using the procedure in clause 4.15.10 of TS 23.502 [4].\nSteps 4-5:\nAF operates Nnef_EventExposure service as defined in clause 5.2.6.16 of TS 23.502 [4].\nStep 6:\nNEF selects candidate UEs based on the results of steps 2-5.\nStep 7:\nNEF replies to AF with the following information.\n-\tCandidate UE list.\n-\tEvent information (defined on a per Event ID basis).\n-\tAnalytic information (defined on a per Analytic ID basis).\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "6.47.3\tImpacts on Existing Nodes and Functionality",
                            "text_content": "NEF:\n-\tProvide new service operation of composite exposure.\nAF:\n-\tRequest NEF to provide the candidate UE list by indicating necessary Event ID(s) and Analytics ID(s).\n",
                            "figures_meta_data": [],
                            "tables": []
                        }
                    ]
                }
            ]
        },
        {
            "title": "7\tEvaluation",
            "description": "",
            "summary": "",
            "tables": [],
            "figures_meta_data": [],
            "subsections": [
                {
                    "title": "7.1\tKey Issue #1: Monitoring of network resource utilization for support of Application AI/ML operations",
                    "description": "",
                    "summary": "",
                    "text_content": "Six different solutions have been proposed to address aspects of or the complete description of Key Issue #1 in clause 5.1. These solutions as identified in clause 6.0 are #1, #11, #16, #28, #34, and #37. Solutions #16 and #37 being very similar this evaluation only considers solution #37. While the scope of solution #28 is rather broad and apply to general architecture framework of which the discussions should be deferred to the end of the conclusion phase, solutions #1, #11, #34, and #37 are more focused on specific aspects of KI#1.\nA set of architecture principles proposed in the context of the above solutions have been identified for KI#1, and this evaluation clause is structured around those identified principles rather than the individual solutions themselves.\nThe following list shows positively evaluated architecture principles as potential basis for normative work along the corresponding proposing solutions and their relation to the principle:\n-\tMaximizing the reuse of existing 5GS mechanisms with extensions, when needed, to assist the AF to monitor the 5G network resource utilization.\n-\tSolution #1 proposes reutilizing the procedures in clauses 4.15.16.6, 4.16.5 and 4.4.2.2 of TS 23.502 [4] to facilitate monitoring of resources that are relevant in the context of AI/ML-based services and applications.\n-\tSolution #11 and Solution #34 propose the existing NWDAF framework in TS 23.288 [6] to be reused for AF resource monitoring purposes in the context of AI/ML-based services and applications as well as specific NWDAF analytics enhancements for application AI/ML traffic status.\n-\tSolution#37 proposes to reuse existing UPF Exposure Service by introducing a new event type \"Bit Rate Reporting per QoS Flow\" to the existing consumer \"NEF\" for this service.\n-\tSupport aggregated bit rate monitoring to assist AF to conduct the Application AI/ML operation according to the SLA.\n-\tSolution #37 propose monitoring the aggregated bit rate among a set of QoS flows of the group of UEs that are part of the FL operation.\n-\tSupport QoS monitoring for AI/ML-based services triggered by AF to assist AF to conduct the application AI/ML operation according to the SLA.\n-\tSolution #1 proposes the existing QoS monitoring mechanism in TS 23.502 [4] currently applicable to assist URLLC services to be used, and enhanced, in the context of AI/ML-based services and applications. Based on the outcome of the moderated discussions, more discussions and better understandings are needed to justify the new monitoring parameters.\n-\tNew monitoring parameters available at AF.\n-\tSolution #1 proposes traffic/data volume and session inactivity time as new monitoring parameters to be available at the AF to assist with the operation of the AI/ML application. The monitoring procedures are based on UPF event exposure.\n-\tAF monitoring of availability of network resources to assist the application in training of its AI/ML algorithms.\nFurthermore, an additional set of architecture principles have also been identified in the context of KI#1 that do not appear suitable towards normative work. Those architecture principles as well as evaluation views for each principle can be found below:\n-\tSupport for AF resource utilization request from NWDAF, PCF, SMF, where the AF can request the network resource utilization related information from NWDAF, PCF and SMF. It is not clear what is the purpose of AF being aware of which 5GC NF is producing the information, and the principle lacks a description of what type of network resources it is referring to.\n-\tNetwork monitoring of resource usage by the operator to ensure there is a balance between the AI/ML traffic and other service traffic. While the architecture principle holds true in general for 5GS, it is unclear whether this TR and the follow up normative work should develop solutions in line with this principle or it is out of scope.\n-\tControl plane resource usage monitoring is also required, in addition, to the user plane, to avoid signalling storms. It does not seem necessary to develop new congestion control mechanisms beyond what is already existing, and it is currently unclear what other control plane resources are meant by the principle.\nThe following table is to evaluate the applicable solutions in KI#1 with regards to the proposed criteria. Some extra criteria were added on top of what have been discussed during the moderated evaluation in order to provide a more completed considerations when evaluating this KI#1:\nTable 7.1-1: Evaluation of KI#1 solutions\n\n",
                    "tables": [
                        {
                            "description": "Table 7.1-1: Evaluation of KI#1 solutions",
                            "table number": 20,
                            "summary": "",
                            "name": ""
                        }
                    ],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "7.2\tKey Issue #2: 5GC information exposure to UE",
                    "description": "",
                    "summary": "",
                    "text_content": "Table 7.2-1: Evaluated based on the NAS based solution vs IEAF/AF based solution\n\nTable 7.2-2: Evaluated based on other specific criteria\n\n",
                    "tables": [
                        {
                            "description": "Table 7.2-1: Evaluated based on the NAS based solution vs IEAF/AF based solution",
                            "table number": 21,
                            "summary": "",
                            "name": ""
                        },
                        {
                            "description": "Table 7.2-2: Evaluated based on other specific criteria",
                            "table number": 22,
                            "summary": "",
                            "name": ""
                        }
                    ],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "7.3\tKey Issue #3: 5GC Information Exposure to authorized 3rd party for Application Layer AI/ML Operation",
                    "description": "",
                    "summary": "",
                    "text_content": "There are 7 solutions which have been proposed to address KI#3, i.e. Solution#6, Solution#7, Solution#8, Solution#28, Solution#32, Solution#33, and Solution#34. Among them, there are 4 solutions (solutions #6, #8, #32, #34) using NWDAF to analyse Application AI/ML traffic transmission and expose analytic results to the AF.\nSolution#28 is proposed as the overall architecture framework and should only be further considered when all the KIs are getting close to be concluded.\nSolution #6 proposes that 5GC NWDAF defines new FL analytics on expected latency for candidate FL members, with input parameters (e.g. Candidate FL members, Local model size, Aggregated model size, etc.) provided by AI/ML application server. It is consumed by AI/ML application server to do FL members selection. User consent checking for each member from UDM should be done by NWDAF before exposing the analytics.\nSolution #7 proposes that 5GS provide the supported UL/DL data rate to AI/ML application server to make the decision on AI/ML operation, e.g. to determine the splitting point for AI/ML model splitting, or to determine the AI/ML model and the size of parameter for AI/ML model downloading. It requires the RAN node to estimate the supported UL/DL data rate based on the channel condition between RAN node and UE, the bandwidth available for the UE and other factors, and then the RAN sends data rate monitoring results to UPF over user plane, which will be exposed to AI/ML application server by UPF via SMF or exposed to local AF directly/via NEF. Coordination with RAN WGs may be required.\nSolution #8 addresses both KI#2 and KI#3, it proposes that 5G NF/NWDAF provides 5GC information or analytics to UE(KI#2) or AF(KI#3) for the purpose of triggering decisions on AI/ML operation or application adaptation. For KI#3, AF subscribes for network information or data analytics from 5GC for the UE, and NF/NWDAF notifies AF about the non-AF Session/PDU Session specific network information or data analytics.\nSolution #32 proposes that 5GC NWDAF provides enhanced \"DN Performance\", \"Observed Service Experience\" analytics to assist AF to make AI/ML decisions for split inference. New inputs and new outputs for these existing analytics IDs are defined in this solution, for example, Statistics/predictions on network performance between AI/ML processing entities and traffic rate for UL, on packet delay for UL and on packet loss rate for UL from the UE to each AI/ML processing entity(s).\nSolution #33 proposes a mechanism to enable the network operator to have the control for which UE is allowed for participation in the Application layer AI/ML operation. The 5G system can expose the network authorization status of the UE to the AF for the UE participation in the corresponding Application AI/ML operation. Such awareness of the network authorization status for the UE can assist the AF's decision for the UE selection for the corresponding Application AI/ML operation. Network authorization status for the UE is newly defined and stored as subscription information of UE in the UDM.\nSolution #34 proposes that AF requests the NWDAF to provide the analytics (e.g. \"User Data Congestion\", \"Service Experience\", \"NF load information\") to obtain the prediction/statistics for the Application AI/ML traffic transmission status. Then, the analytics results (e.g. NF resource usage, NF load, QoS flow level data for the Application AI/ML traffic) can be exposed to the AF to assist the Application AI/ML traffic transmission.\nTable 7.3-1: Evaluations of solutions for KI#3\n\nFor 'Principle#12: Although the network does not need to know about internals of AI/ML aspects of working of the application, it needs to be able to distinguish AI/ML related traffic from rest of the user services related traffic. In that sense the network is not completely agnostic of AI/ML traffic', there is no relevant information given by the solutions listed in the table. Therefore, Principle#12 is not evaluated in the table.\nAs for the Solution#7, in reality, this Solution#7 should be closer to KI#1 than KI#3. Solution#7 not only has dependency on RAN, but it also imposes the signalling overheads over NGAP. It is unclear why this solution approach with RAN dependency is necessary to derive the data rate performance without any obvious benefit when it is compared to other solutions.\nFor user consent checking support, Solution #39 and Solution #43 propose that AF requests for triggering user consent checking in 5GC for Event/Analytics Exposure.\nSolution #39 proposes that AF ensures that the UEs associated to the UE group ID have application users consent in place and then reuse existing Event/Analytics exposure mechanisms such as UE location, CM state, UE reachability, etc. to supports 5GC assistance for application FL operation. The AF request for Event/Analytics Exposure includes user consent indication to enable NEF for user consent checking from UDM which stores user consent for Event/Analytics Exposure in subscription information. Alternatively, a new AF request message is proposed to check user consent for Event/Analytics Exposure before proceeding existing Event/Analytics exposure mechanisms.\nSolution #43 proposes that AF retrieves the user consent subscription data, indicating whether the network is allowed to expose UE related 5GC information for Event/Analytics Exposure, for the UEs in the candidate list from the UDM directly or via NEF.\n",
                    "tables": [
                        {
                            "description": "Table 7.3-1: Evaluations of solutions for KI#3",
                            "table number": 23,
                            "summary": "",
                            "name": ""
                        }
                    ],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "7.4\tKey Issue #4: Enhancing External Parameter Provisioning",
                    "description": "",
                    "summary": "",
                    "text_content": "Five different solutions are addressing aspects of key issue #4. Solutions #9, #35 and #36 are addressing only Key Issue #4. Solution #29 addresses both Key Issue #4 and Key Issue #2.\nSolutions #28 is more general and addresses aspects of all Key Issues and should be evaluated outside KI#4.\nSolution #35 has no impact on services, entities, and interfaces. It proposes to reuse procedures for AF session with specific QoS as in clause 4.15.6.6 and clause 4.15.6.6a of TS 23.502 [4], with specific QoS parameters for the AF session, for some type of AI/ML operations. It also proposes to negotiate and apply a policy for background data transfer as per procedures in clause 4.16.7.2 and clause 4.15.6.8 of TS 23.502 [4], for some other types of AI/ML operations.\nIn solution #9, the AF provides configuration information required for AI/ML operations related area-based to the PCF, via NEF and UDR, using the service specific parameter provisioning procedure as defined in clause 4.15.6.7 of TS 23.502 [4].\nIn solution #29, the AI/ML AF provisions AI/ML task related parameters (UE ID or UE group ID, AI/ML application identifier, AI/ML task identifier, AI/ML task duration, AI/ML task valid time) to the 5GS (UDR), reusing procedure for external parameter provisioning from clause 4.15.6.2 of TS 23.502 [4].\nIn solution #36, the AI/ML AF provides AI/ML assisted expected UE behaviour parameters to the 5GS (UDR), possibly associated with a probability assertion (i.e. confidence) and optionally other parameters (e.g. the level of accuracy), reusing procedure for external parameter provisioning from clause 4.15.6.2 of TS 23.502 [4]. AMF and SMF can then further use these provisioned parameters for their own procedures.\nIn solution #28, the AI/ML AF provisions an AaaML service profile in 5GS (UDR). AaaML service profile contains objective of target AaaML operation, input of provisioned service parameter(s), and expected output.\nThe following principles are proposed as potential basis for further evaluation of the solutions:\n-\tAI/ML AF providing specific policy parameters related to the AI/ML operation type to the 5GC, instead of 5GC deriving such policy parameters from AI/ML operation type:\nNone of the solutions propose to provision the AI/ML operation type to the 5GC. Solution #29 proposes an AI/ML task identifier but 5GC does not use the information, rather it forwards this to the UE.\nSolutions #9 and #29 propose that AI/ML AF provisions configuration information.\nMore discussion is needed on the exact configuration parameters needed for each AI/ML operation type.\n-\tAI/ML AF provides one or more AI/ML assisted Expected UE Behaviour parameter(s) and can provide at least probability assertions/confidence levels and accuracy levels to each of them:\nThis is specific to solution #36.\nMore discussion is needed on the specific parameters (existing and new ones) to be provisioned, and the related scenarios for using these parameters in the 5GC NFs.\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "7.5\tKey Issue #5: 5GC Enhancements to enable Application AI/ML Traffic Transport",
                    "description": "",
                    "summary": "",
                    "text_content": "The following table summarize the similarity and differences among the 3 solutions to address KI#5.\nTable 7.5-1: Evaluation of KI#5 solutions\n\n",
                    "tables": [
                        {
                            "description": "Table 7.5-1: Evaluation of KI#5 solutions",
                            "table number": 24,
                            "summary": "",
                            "name": ""
                        }
                    ],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "7.6\tKey Issue #6: QoS and Policy enhancements",
                    "description": "",
                    "summary": "",
                    "text_content": "This Evaluation is related to the following requirements described in KI#6: \"In order to conclude whether the 5G system meets QoS performance requirements as specified in clause 7.10 of TS 22.261 [2], this study needs to determine whether any additional QoS and/or policy enhancements to the 5G system are required\".\nThe criteria for evaluation of solutions is as follows:\n-\tWhether a solution addresses the KI description, what aspects if not all.\n-\tImpacts in the system, NF and NF services impacted, procedure impacted.\n-\tCompleteness of the solution, whether open issues are identified or Editor´s notes are listed.\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": [
                        {
                            "title": "7.6.1\tQoS performance measurement assistance to Application AI/ML operation",
                            "text_content": "Table 7.6.1-1 lists solutions that addresses how to map performance KPIs into 5GS QoS parameters and the procedure to perform QoS Monitoring for the UE to AI/ML application traffic to perform both the AI/ML split, AI/ML download and federated learning as defined in KI#6.\nTable 7.6.1-1: Mapping performance KPIs into QoS parameters. Procedure for Monitoring QoS parameters\n\nBased on the evaluations above, it can be stated that the AI/ML application request to monitor the latency provides the Requested 5GS Delay for the AI/ML application traffic in the procedure for Setting up an AF session with required QoS procedure as well as the subscription for QoS measurement. This follows the existing procedure for Setting up (or Update) an AF session with required QoS procedure.\nMonitoring other QoS parameters such as packet loss rate or bandwidth is not described to a level that can be evaluated yet. However, monitoring if the bitrate can be achieved using the existing GBFR can or cannot be fulfilled that is already supported with and without provisioning of Alternative QoS requirements.\nBased on the above, the proposal is that the monitoring and reporting resource utilization is performed for those performance KPIs described in clause 7.10 of TS 22.261 [2], those are Max. allowed UL/DL end to end latency into 5GS Requested latency then provided in the AF request for QoS procedures.\n",
                            "figures_meta_data": [],
                            "tables": [
                                {
                                    "description": "Table 7.6.1-1: Mapping performance KPIs into QoS parameters. Procedure for Monitoring QoS parameters",
                                    "table number": 25,
                                    "summary": "",
                                    "name": ""
                                }
                            ]
                        },
                        {
                            "title": "7.6.2\tMonitoring Group-MBR",
                            "text_content": "There is one solution that proposes that the MNO checks the SLA for the Group-MBR threshold for the given AI/ML application for FL traffic and to notify the AF when such threshold is crossed, this KI is more towards the KI#1 and KI#7, and lesser towards KI#6. It may also be discussed if it fits KI#7 that request to monitor and expose a UE or a group of UEs performance (e.g. aggregated QoS parameters) as described in TS 22.261 [2] related to FL operations.  It is proposed to evaluate this Group-MBR monitoring solution in KI#1.\nTable 7.6.2-2: Mapping performance KPIs into QoS parameters. Procedure for Monitoring QoS parameters\n\nBased on the above, the proposal is that Analytics ID(s) on both the UE communication and QoS Sustainability are used to predict the location of the UE when the UE to AI/ML communication is performed, and the QoS Sustainability indicate changes on the QoS related to this 5QI.  These two proposals may be useful to assist the AF to prepare for the initial Application AI/ML operation.\n",
                            "figures_meta_data": [],
                            "tables": [
                                {
                                    "description": "Table 7.6.2-2: Mapping performance KPIs into QoS parameters. Procedure for Monitoring QoS parameters",
                                    "table number": 26,
                                    "summary": "",
                                    "name": ""
                                }
                            ]
                        },
                        {
                            "title": "7.6.3\tOther topics",
                            "text_content": "Sol #40 proposes to support a group QoS request using Nnef_AFsessionwithQoS including the list of UE IP addresses or group identifiers for each of the group members. The NEF checks the PCF serving the PDU Session for this UE IP address using BSF as per current procedures. Also, the BSF extension is proposed to support discovery of serving PCF(s) based on the list of UE IP addresses so that the NEF does not have to contact BSF multiple times.\nSol #42 proposes that the AF request resources to NEF including AIML group information, AIML group performance information. The AIML group information consists of External Group ID or list of candidate UEs selected by the AF to participate in an FL. The AIML group performance information includes Maximum latency for the AIML group, Maximum packet loss rate in UL, Maximum packet loss rate in DL, Duration for the requested QoS, Minimum number of UEs in the AIML group. The proposal is to define a new Nnef_GroupAFsessionWithQoS and Npcf_GroupPolicyAuthorization.\nSol#42 has larger impacts compared with Sol#40 that also allows to request QoS for the candidate members of the FL. It is assumed that the UEs that are candidate to be part of the FL have a PDU Session Established, given that there has been a selection of the list of candidates based on other criteria than QoS such as location. As such it is recommended to use Sol#40 to request QoS for a group of UEs that has a PDU Session Established. Note that if there are any requirement to request QoS for members that may not be connected, then conclusions in GMEC study, Key Issue #3: NEF exposure framework for provisioning of traffic characteristics and monitoring of performance characteristics should be considered, as this is resolved there.\nOn the group performance information, the AF can provide 5GS QoS Parameters, e.g. Maximum latency is mapped to Requested 5GS Delay. The Maximum Packet Loss rate can be added to the list of 5GS QoS Parameters that are exposed, as the Maximum Packet Loss Rate is part of the 5GS QoS parameter defined in TS 23.501 [3].\nSolution #38 proposes that AF provides time dependency information to the NEF in addition to existing QoS requirements when requesting to setup an AF session. Alternatively, the AF provides traffic pattern information which are converted into QoS profiles and time information by a dedicated FL assistance function (as proposed also in solution #23). Then PCF derives PCC rules with QoS applicability times, based on different QoS profiles with different time information received either from NEF or from FL assistance function, and provides these PCC rules to the SMF. The SMF then determines QoS profiles and provisions QoS profiles with QoS applicability time to the NG-RAN and time dependent PDRs to the UPF, and NG-RAN then schedules time dependent QoSs.\n",
                            "figures_meta_data": [],
                            "tables": []
                        }
                    ]
                },
                {
                    "title": "7.7\tKey Issue #7: 5GS Assistance to Federated Learning Operation",
                    "description": "",
                    "summary": "",
                    "text_content": "One of major goals with proposals addressing KI#7 is developing solutions to provide external exposure data to assist in the selection of FL members, therefore an evaluation may be made by classifying solutions in the way they propose the 5GC exposure mechanism.\nTherefore, solutions may be classified, based on the entity (NF or NFs) providing data to AF either directly or through the NEF, as:\n-\tClass 1 (exposure coordinated by NEF):\n-\tSol #17, sol#18, sol#21, sol#37, sol#39, sol#43, sol#46, sol#42 and sol#47 belong to this class.\n-\tClass 2 (exposure generated by NWDAF):\n-\tSol #6, sol#19, sol#22, sol#24, sol#27, sol#41, and sol#45 belong to this class.\n-\tClass 3 (exposure coordinated by a newly defined AI/ML assistance function):\n-\tSol #23, sol#25, sol#28, sol#40, sol#44 belong to class this class.\nSol#6 supports assistance to selection of UEs for FL operation and assistance on increasing FL performance on KI#7 by providing new analytic/prediction information for FL operation such as expected QoS, suggested time window and geographical distribution for each UE in target UE list. It assumes that AI/ML application server provides specific parameters which can be understood by 3GPP network such as candidate UE list, slice information, traffic pattern (model size, number of iterations, and time interval), and QoS requirements and NWDAF provides exposure of analytics information after interaction with PCF, AMF, and UDM to acquire status information relating to those parameters. Given that the AIML operation is conducted on a single slice according to clause 4.2, and considering that the AF is providing other parameters, e.g. SUPI and Group Id, it is not clear why the AF needs to provide the S-NSSAI and/or how the network slice information is used by the 5GC. It proposes that analytic information is provided by NWDAF to AF per time window. Analytics may be provided per iteration and/or on average, as suggested by the AF.\nSol#16 and Sol#37 both solution address monitoring of Group-MBR. This is an important aspect that needs to be covered, however Sol#37 seems to offer a more complete and straightforward approach by comparing the monitoring results against a Group-MBR threshold provisioned by the AF in the 5GC. This approach also results in reduced in a cleaner impact to NFs, where the NEF can aggregate bit-rate provide by the SMF and compare them against a threshold. Note: Monitoring Group-MBR is discussed under KI#1\nSol #17 supports assistance to selection of UEs for FL operation based on result of QoS monitoring in area or interest. It introduces UE filtering policy such as UE address(es), monitoring area, time interval, etc in order to select target UE. And it proposes to enhance NEF to handle new analytic operation such as selection of candidate UE based on UE filtering policy and result of QoS monitoring.\nSol #18 supports assistance to selection of UEs for FL operation based on analytic on UE's mobility in the target area. Similarly, to sol#17, it proposes UE filtering policy for UE selection, but it is focused on Area of Interest and enhancement of NEF to handle new analytic operation such as selection of candidate UE based on UE filtering policy and UE mobility analytic.\nSol #19 supports assistance to selection of UEs by providing enhanced analytic information on UE's mobility by NWDAF. It proposes to enhance existing UE's mobility analytic to include activation status of target application by adding interaction between PCF and NWDAF. The service operation between NWDAF and PCF is reusing existing service operation.\nSol #21 supports assistance for FL operation by providing event exposure on performance of group of UEs. It proposes to enhance NEF to support event exposure as group performance type but service operation between NEF and other NF e.g. PCF is performed per UE granularity.\nSol#22 supports assistance to selection of UEs for FL operation by providing new analytic such as suggestion of VN group with policy information including AM policy and SM policy. It proposes to enhance NWDAF to handle VN group decision, member selection, and derivation of relating policy. It assumes that AI/ML application server provides specific parameters which can be understood by 3GPP network such as candidate UE list, area information, S-NSSAI/DNN, and performance requirements.\nSol #23 supports assistance for FL operation by providing new service through a newly defined dedicated NF for Federated Learning assistance function (FLAF). It proposes that AI/ML AF request assistance to FLAF (via NEF) with detailed input parameters such as candidate UE's list and target location, and timing information and FLAF provides new analytics such as list of suggested UEs for FL operation.\nSol #24 supports assistance to selection of UEs by providing enhanced analytic information on WLAN performance per UE by NWDAF. It proposes to enhance existing WLAN performance analytic to WLAN performance analytics per UE granularity for a certain period and area. It only impacts NWDAF and AF.\nSol#25 supports assistance to selection of UEs for FL operation and assistance on increasing FL performance on KI#7 by introducing AIML NF which is used to response/notify with 5GS assistance information for external exposure. It provides detail input parameters for FL operation from AI/ML App server with subscription for AIML assistance information for FL operation and AIML NF/NEF provides exposure of updated assistance information e.g. new recommended UEs based on analytic information from NWDAF. It does not provide how the AIML NF may derives assistance information from the existing analytic information from NWDAF.\nSol #27 supports assistance to selection of UEs by providing enhanced analytic information on QoS sustainability and Service exposure analytics by NWDAF. It proposes to enhance existing QoS sustainability to include a single UE level granularity and to enhance Service Experience analytics to include success rates of transmission of FL traffic for some time. It may require more input data from OAM to provide RAN throughput per UE and may impact UE with new QoE metrics relating to FL data.\nSol #28 provided list of AI/ML services for assistance of FL operation. And it proposes the framework how to interact between AIML AF and AIML assistance network function based on service-based architecture.\nSol #39 supports assistance for FL operation by providing existing event exposure and analytics such as UE location, CM state, UE reachability, etc. It analysed list of event exposure for FL member selection and proposes to reuse current event exposure.\nSol #40 supports assistance to flexible selection of UEs for FL operation, assistance on increasing FL performance on KI#7 and introduces AFLSF (Application Federated Learning Support Function). It proposes to support a group QoS request in which the required QoS for multiple UEs can be requested via both a single service operation for the UEs in a FL group, and an enhancement of the PCF discovery of BSF. It also proposes AFLSF to provide assistance for FL configuration to the AF, and suggestion of candidate UE's list satisfying group QoS requirements. It also proposes UE-initiated request to join AIML session via 5GS which is embedded in session management request. It still for further study, whether the AFLSF requires awareness of FL operation modes to conduct the functionality described in the solution.\nSol #41 supports aggregated UE performance monitoring and exposure, by extending performance parameters provided by the NWDAF within the DN Performance analytics, by adding aggregated parameters such as aggregated traffic rate, and variance of traffic rate, packet delay and packet loss, as well as information of UEs that are too fast or slow.\nSol #42 supports assistance to selection of UEs for FL operation and assistance on increasing FL performance on KI#7 by allowing the AF to include the AIML group information, and the AIML group performance information in the Nnef_GroupAFsessionWithQoS_Create request. When multiple UE(s) from the AF group are served by the same PCF, the NEF includes AIML Group performance information and AIML session indicator as input parameters in the Npcf_GroupPolicyAuthorization_Create request towards the PCF. When the PCF determines that the SMF needs updated policy information, the PCF provisions the PCC rule in SMF which contains AIML session indicator. With the AIML session indicator included in the PCC rule, the QoS flow binding ensures that the PCC rule is bound to a new QoS Flow and no other PCC rule is bound to this QoS Flow.\nSol #43 supports assistance to selection of UEs directly or via NEF, firstly by checking user consent data from UDM, then the UE location collected from AMF (optional), delay obtained by reusing QoS Monitoring procedure from UPF, Throughput UL/DL, Packet transmission, Packet retransmission information by reusing event exposure from UPF.\nSol #44 supports assistance to selection of UEs for FL operation by a new AI/ML assistance network function which is responsible for analysing of exposure data from other NF including NWDAF and exposure of assistance information for FL operation to the AF which may include selecting of UE list for FL operation. It proposes that AF to provide restriction criteria for selection of UE, but no other input parameters are provided.\nSol #45 supports assistance on FL performance by providing analytic information on DN Performance of each application server and with possible combination with other analytics such as UE Mobility and Network Performance. It proposes to enhance existing DN performance analysis to provide analytics of latency divergence between UEs and application servers.\nSol #46 supports assistance to selection of UEs for FL operation based on analytic on UE's mobility including moving direction. Similarly, to sol#18, it proposes UE filtering policy for UE selection with FL coverage and enhancement of NEF to handle some analytic operation such as selection of candidate UE based on UE filtering policy and UE mobility analytic.\nSol #47 supports assistance to selection of UEs for FL operation by composite event exposure. It proposes an enhancement of NEF to analyse composite analytic data for selection of candidate UE. It does not require enhancement of event exposure from other NF.\nThose solutions that are related to the selection of FL member UEs can be further grouped into two groups depending on whether a solution introduces a new so called FL Member Selection Assistance Functionality or not. Here the new functionality can be defined as a functionality that is hosted by one of 5GC NFs (i.e., NEF, NWDAF or a new NF) and receives a request from the AIML AF to provide a list of candidate UEs based on the request from the AF to perform FL member selection. The 5GC NF offering the new functionality then triggers the corresponding 5GC procedures to derive the set of candidate UE list as part of the assistance to be reported back to the AIML AF.\n-\tSolutions #17, #18, #19, #22, #23, #25, #28, #40, #44, #46 and #47 propose to support such a new functionality.\n-\tSolutions #6, #24, #27, #39, #42 and #43 propose to reuse the existing or enhanced exposures.\nWith the proposed new FL Member Selection Assistance Functionality, less signalling between the AIML AF and 5GC may be expected, and AF can utilize a list of candidate UEs provided by 5GC for determining the final FL member UEs whereas more complexity on 5GC to offer the new functionality will be required. Supporting this new functionality does not preclude AF requesting 5GC information directly to the relevant NFs.\nWithout the proposed new FL Member Selection Assistance Functionality, the AIML AF should directly request/receive the necessary 5GC information to/from the relevant NFs possibly via NEF and determine the FL member UEs on its own. This is how it is supported from the previous release and no more impact other than enhancing the already existing exposures is expected.\nObservation 1: The newly proposed FL Member Selection Assistance Functionality can be helpful to reduce signalling between 5GC and AF and to help the AIML AF select the FL member UEs.\nObservation 2: Even if the new functionality is supported, AF should be able to directly use 5GC exposures (events, analytics) and determine the FL member UEs without the new assistance functionality.\nAmong those solutions supporting the new functionality, they can be further categorized into three groups depending on where the FL Member Selection Assistance Functionality is accommodated.\n-\tNEF: #17, #18, #46, #47\n-\tNWDAF: #19, #22\n-\tA new dedicated NF: #23, #25, #28, #40, #44\nObservation 3: The new FL Member Selection Assistance Functionality may include some procedures that have nothing to do with analytics such as checking user consent. Hence hosting the new functionality on NWDAF should be avoided not to lose its primary purpose.\nObservation 4: Defining a new NF eventually entails a lot of system impacts and the need for defining a new NF is not well justified to support FL member selection assistance. Instead, NEF as a gateway between 5GC and AF can be enhanced to support such a new functionality with enhanced or new service operations.\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": [
                        {
                            "title": "7.7.1\tEvaluation for solutions based on the Performance monitoring/exposure",
                            "text_content": "For KI#7, one of major goal is How to monitor and expose a UE or a group of UEs performance to AF. There are some solutions to achieve this goal, as:\n-\tSol # 21 supports assistance for FL operation by providing event exposure on performance of group of UEs (e.g., maximum UL,DL or RTT delay among UEs in the target group). It proposes to enhance NEF to support event exposure as group performance type but service operation between NEF and other NF e.g. PCF is performed per UE granularity.\n-\tSol #41 supports assistance for FL operation by exposing the analysed performance of group of UEs (e.g., aggregated traffic rate of UEs in target group, variance of traffic rate of the target group). It proposes to extend performance parameters provided by the NWDAF within the DN Performance analytics, by adding aggregated parameters such as aggregated traffic rate, and variance of traffic rate, packet delay and packet loss.\nTable 7.7.1-1: Summary of KI#7 solution evaluations for performance monitoring/exposure\n\n",
                            "figures_meta_data": [],
                            "tables": [
                                {
                                    "description": "Table 7.7.1-1: Summary of KI#7 solution evaluations for performance monitoring/exposure",
                                    "table number": 27,
                                    "summary": "",
                                    "name": ""
                                }
                            ]
                        }
                    ]
                },
                {
                    "title": "7.8\tUsage of analytics",
                    "description": "",
                    "summary": "",
                    "text_content": "",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": [
                        {
                            "title": "7.8.1\tOverview",
                            "text_content": "Table 7.8.1-1 lists the existing solutions in TR 23.700-80, which refer to either specific analytics ID from TS 23.288 [6], with possible enhancements, or to new proposed analytics IDs.\nTable 7.8.1-1: Usage of analytics in solutions\n\n",
                            "figures_meta_data": [],
                            "tables": [
                                {
                                    "description": "Table 7.8.1-1: Usage of analytics in solutions",
                                    "table number": 28,
                                    "summary": "",
                                    "name": ""
                                }
                            ]
                        },
                        {
                            "title": "7.8.2\tUsage of analytics for assistance to federated learning",
                            "text_content": "Solution #6 proposes new FL analytics on expected latency for candidate FL members, which includes, as outputs, candidate members' expected latency performance (per iteration and/or on average), geographical distribution of the member UEs and QoS flow level data (QFI, QoS flow Bit Rate, QoS flow Packet Delay, Packet transmission, Packet retransmission) of QoS for the FL traffic transmission.\nThe geographical distribution of UEs is also proposed in solutions with UE mobility analytics enhancements, e.g., solution #19 or solution #46. It is recommended to introduce information on geographical distribution of member UEs as part of enhanced UE mobility analytics outputs.\nThe QoS flow level data is also proposed as part of Service Experience and DN Performance analytics (in solution #11) and User Data Congestion, Service Experience and NF load analytics (solution #34). NF load analytics are not intended to be used by external AFs, hence QoS flow level data should not be considered for NF load analytics.\nSolution #22 proposes new Application federated learning analytics to select the appropriate FL members. Based on the analytics results, the NWDAF may also suggest a VN group data and assistant information for the related policies. It is unclear which policies the NWDAF would provide from current description of the solution.\nSolution #23 briefly refers to new analytics from NWDAF if the Federated Learning Assistance Function is located in NWDAF without providing much information on the expected outputs of these analytics beyond suggested UEs' list.\nSolutions #24 and #25 propose to extend WLAN performance analytics with per UE granularity.\nSolution #27 proposes to enhance QoS sustainability analytics with more OAM data from TS 37.320 as an existing OAM specification to allow the analytics outputs on a per UE granularity, which does not require any enhancement of OAM. It also proposes to add new inputs from UE (via AF) and from AF on the success rates for model update and distribution, with the intention to add this information to \"customized MOS at AF or QoE metrics at UE (via AF)\". It is unclear why this information would need to be provided by 5GC to the AF while the AF knows this information already.\nSolution #29 is leveraging information on the Application AI/ML operations in the UE per application. This solution is dependent on the overall principle whether operation types are known to the 5GS.\nSolution #41 enhances DN Performance analytics with aggregated traffic rate, variance of the traffic rate, variance of packet delay and variance of packet loss rate.\nSolution #45 proposed that NWDAF provides to the AF a suggested list of application servers to increase the FL performance (e.g. to manage latency divergence). Selection of application servers is not in scope for Key Issue #7.\n",
                            "figures_meta_data": [],
                            "tables": []
                        }
                    ]
                }
            ]
        },
        {
            "title": "8\tConclusion",
            "description": "",
            "summary": "",
            "tables": [],
            "figures_meta_data": [],
            "subsections": [
                {
                    "title": "8.0\tGeneral Architecture Principles",
                    "description": "",
                    "summary": "",
                    "text_content": "The following general architecture principles are agreed as conclusions:\n-\tPrinciple #1: Application AI/ML decisions and their internal operation logic reside at the AF and UE application client and is out of scope of 3GPP. If the AF wants to know the Application layer AI/ML capability in UE application client, this can be done via interaction between the AF and the UE application client, which is out of the 3GPP scope.\n-\tPrinciple #2: The AF does not include the application AI/ML operation type in the request sent to 5GC to request assistance for the application AI/ML operation.\n-\tPrinciple #3: UE capability indication to support specific Application's AI/ML operation type is not required.\n-\tPrinciple #4: 5GC shall not waste the network resources to provide assistance for UEs which do not have proper subscription, e.g., mobility restriction, DNN, S-NSSAI, etc.\n-\tPrinciple #5: Based on application logic, it is the application decision whether to request assistance from 5GC.\n-\tPrinciple #6: The 5GC could provide assistance to AF for UE selection\n-\tPrinciple #7: The support of 5GS to AI/ML-based services should strive to re-use existing NFs and procedures with necessary enhancements in order to fulfil the service requirement.\nNOTE 1:\tMore clarifications on the system parameters for the Application AI/ML services are needed as part of the specific KI discussions.\n-\tPrinciple #8: The architecture to support AI/ML-based services should be backward compatible with related 5GS features. It should also be designed to enable future extensions.\n-\tPrinciple #9: Although the network does not need to know about internals of AI/ML services, it needs to be able to distinguish AI/ML related traffic from rest of the user services related traffic. In that sense the network is not completely agnostic of AI/ML traffic.\nNOTE 2:\tWhile AI/ML traffic is considered as a new traffic category, it is assumed that existing detection mechanisms will be used to distinguish AI/ML related traffic from the rest of the user services related traffic.\n-\tPrinciple #10: The architecture/procedure to support AI/ML-based services and applications should avoid unnecessary signalling in the mobile network and/or between 5GC and AF. The principle should also apply for 5GS assistance to the AF monitoring of the application AI/ML operation utilization of network resources.\n-\tPrinciple #11: Mobile network security and privacy (both UEs and mobile networks) are important and solutions should avoid sensitive information exposure from the mobile networks.\nNOTE 3:\tThis principle requires involvement from SA WG3.\nNOTE 4:\tThe user consent checking procedure regarding for this Study Item will be sync up with SA3’s conclusion during normative work.\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "8.1\tKey Issue #1: Monitoring of network resource utilization for support of Application AI/ML operations",
                    "description": "",
                    "summary": "",
                    "text_content": "It is proposed that the architecture principles and specific mechanisms below are considered for the normative work on monitoring of network resource utilization for support of application AI/ML operations:\n-\tNWDAF-based procedures and data analytics as described in TS 23.288 [6] for the Observed Service Experience, User Data Congestion, DN performance Analytics, UE Communication Analytics can be used by the AF as assistance information for Application AI/ML operation. No normative work is required to enhance these analytics for this key issue.\n-\tWhen aggregated bit rate monitoring is requested for a set of QoS flows of a group of UEs against the pre-defined Group MBR threshold, the UPF exposure extension proposed by Solution#37 with the new event type 'Bit Rate Reporting per QoS Flow' consumed by NEF as described in Solution #37 is a simple useful tool to be supported to monitor the aggregated throughput performance for the specific Application AI/ML operation.\n-\tAF knowledge on the session inactivity time with new monitoring parameters to recognize the current system performance respective to a given UE as described in Solution#1 is to be supported to assist Application AI/ML application operation. The monitoring procedures are based on UPF event exposure as described in Solution #1. No new normative work is expected at SMF and UPF for this aspect.\n-\tHow the UPF reports traffic/data volume is determined in UPEAS SID. Only after UPEAS study work is completed, AIMLsys will determine if the traffic/data volume is required to report from 5GC to AF.\nIt is understood that AI/ML applications can be assisted by enabling the monitoring of available resources in the network as above, however this is out of the scope of 3GPP.\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "8.2\tKey Issue #2: 5GC information exposure to UE",
                    "description": "",
                    "summary": "",
                    "text_content": "No normative work will be progressed in Rel-18 for Key Issue #2.\nNOTE:\tTo facilitate Application AI/ML operation, how and which information are exposed from the AI/ML application server to the UE application via application layer is out of 3GPP scope.\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "8.3\tKey Issue #3: 5GC Information Exposure to authorized 3rd party for Application Layer AI/ML Operation",
                    "description": "",
                    "summary": "",
                    "text_content": "Proposal for the conclusions for KI#3 are based on solution evaluation in Clause 7.3 and to be used as basis for normative work based on the following principles: i.e.\n-\tThe user consent is required for the UE related information or data analytics to be exposed to the 3rd party.\nNOTE 1:\tThe user consent checking procedure to verify the data exposure to AF will be sync up with SA3's conclusion during normative work.\n-\tUL/DL data rate exposure to AF based on AF request for data rate monitoring with solution without RAN impact.\n-\tThe AF could subscribe AF Session/ PDU Session related information for the specific AF Session and reuse the existing notification and subscription mechanism.\nNOTE 2:\tUL/DL data rate exposure to AF may consider the conclusions of FS_UPEAS KI#2.\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "8.4\tKey Issue #4: Enhancing External Parameter Provisioning",
                    "description": "",
                    "summary": "",
                    "text_content": "It is proposed that the specific mechanisms below proposed by KI#4 solutions are considered for the normative work on enhancing external parameter provisioning to support application AI/ML operations:\n-\tThe following new parameters related to expected UE behaviour can be provisioned by the AF to the 5GC:\n-\tConfidence and/or accuracy levels for entries of the expected UE behaviour parameters in Table 4.15.6.3-1 of TS 23.502 [4]. A confidence and/or accuracy threshold may also be provided by the NF requesting expected UE behaviour parameters UDM, indicating that certain confidence and/or level of accuracy must be met for the parameter(s) to be notified by UDM to the NF.\n-\tExpected Inactivity Time of AIML traffic, provided as a time interval. Confidence and/or accuracy levels may be provided for this new parameter.\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "8.5\tKey Issue #5: 5GC Enhancements to enable Application AI/ML Traffic Transport",
                    "description": "",
                    "summary": "",
                    "text_content": "First Step: AI/ML data transfer window negotiation mechanism: It is agreed to consider the following principles some of them are based on solution#10, this principle are the basis for KI#5 conclusions:\nWhen the AF requests the network to provide QoS with individual QoS parameters, one or more Requested Alternative QoS Parameter Set(s) in a prioritized order. Each Requested Alternative QoS Parameter Set is comprised of the following individual parameters: Requested 5GS Delay and Requested Guaranteed Flow Bitrate.\n-\tPrinciple 1: A new Application Data Transfer (ADT) policy is adopted to support application data transfer. The ADT policy includes a list of recommended time window(s) with predicted QoS parameters per UE per time window for the Application data transfer to start. The predicted QoS corresponds to one of the Requested QoS or Requested Alternative QoS that was requested by the AF.\n-\tPrinciple 2: The AF includes QoS requirements and possibly Alternative QoS Profile(s) with a combination of QoS parameters to which the application data traffic transmission is able to adapt , in the ADT policy negotiation request.\nNOTE 1:\tThe Alternative QoS Profile also includes the GFBR, however this is part of the AF request for ADT negotiation as it is not possible to derive a GFBR from the Network Performance Analytics and the Data Network Performance Analytics.\nNOTE 2:\tAF includes the expected minimum QoS requirement from the network.\n-\tPrinciple 3: The PCF uses the extended Network Performance Analytics of NWDAF to derive the candidate time window(s) that may fulfil the requirements requested from AF. The PCF generates the list of ADT policies and feedback it to the AF. The QoS parameters in the ADT policy are determined by PCF based on the list of individual QoS parameters and the requested Alternative QoS Profile(s) from the AF.\n-\tThe Network Performance Analytics support the following analytics outputs (other outputs may be discussed during normative phase). If and how to extend Network Performance Analytics and which input data to use will be discussed in normative phase.\n-\tOverall Average and Maximum Packet Delay for UL/DL per UE per time window;\n-\tOverall Average and Maximum Packet Loss Rate for UL/DL per UE per time window;\n-\tOverall Average, Minimum and Maximum Traffic rate for UL/DL per UE per time window.\n-\tPrinciple 5: The AF selects one of the ADT policies provided by PCF which may most fit for its requirement and indicate it to the PCF.\n-\tThe Application traffic could be non GBR type or GBR type. The AF can provide Alternative QoS profile(s) for GBR flows only.\nSecond step - Application Data Transmission:\n-\tWhen the Application AI/ML begins e.g. to transport intermediate data, local training data, inference results, or model performance data, through 5GS, the AF can leverage the either existing service Nnef_AFsessionWithQoS_Create request message as described in clause 4.15.6.6 of TS 23.502 [4], including the specific QoS parameters for the AF session or new AF service which will be further determined during the normative phase.\nCharging for Application AIML traffic transport:\n-\tBased on operator policy, charging of different Application AI/ML traffic needs to be perform, however, do not expect any normative work on this aspect in the SA WG2 specifications.\nNOTE 3:\tAn alignment can be required (if any) in the normative based on the outcome of SA WG5.\nThe AF configuration information used for application AI/ML transport is provisioned by the AF to the UE via application layer and may contain AF address(es), so no normative work is required.\nThe resolution of the AF address from a FQDN to the IP address of the AF or any associated AI/ML application server(s) is performed using the DNS server address for the PDU Session that is provided to the UE as defined in clause 5.6.10.1 of TS 23.501 [3].\nNo normative work is needed to provide authentication information to the UE for the UE to AI/ML traffic exchange.\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "8.6\tKey Issue #6: QoS and Policy enhancements",
                    "description": "",
                    "summary": "",
                    "text_content": "It is recommended to use the following conclusions based on solution evaluation in Clause 7.6 as the basis for the normative work on \"KI #6 QoS and Policy enhancements\".\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": [
                        {
                            "title": "8.6.1\tQoS performance measurement assistance to Application AI/ML operation",
                            "text_content": "The monitoring and reporting resource utilization is performed for those performance KPIs and provided to the AF request for QoS procedures. The KPIs are described in clause 7.10 of TS 22.261 [2], i.e. Max. allowed UL/DL end to end latency etc.\n-\tThe Guarantee Bit Rate is to be monitored using the existing reporting on whether GFBR can or cannot be fulfilled as defined in clause 5.7.2.4.1a of TS 23.501 [3] (Notification control with no Alternative QoS), which is already supported.\n-\tExisting QoS monitoring mechanism for URLLC services is reused for AI/ML traffic.\n-\tThe AF can consume UE Communication Analytics for assisting the AI/ML application operations.\nThe AF may provide additional QoS parameter sets in Nnef_AFsessionWithQoS_Create service operation, together with timing (start time, duration) information for each QoS parameter set, and the PCF controls the timing that is provided by the AF and derives PCC rules according to the different QoS parameter sets and provides these rules to the SMF at the time indicated by the AF.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "8.6.2\tQoS request for a group of UEs",
                            "text_content": "For AIML each of the members of the group has a PDU Session established, and the members of the group have been selected using procedures defined in conclusions to KI#7, such as location or QoS monitoring. In order to request QoS for the AIML communication with each of the members of the group, extensions to the procedure for the AF request with QoS, and Nnef_AFsessionwithQoS to provide a list of UE IP address are required. The QoS parameters that are provided apply for each of the UE to AIML application communication (i.e. the QoS parameters are not related to the aggregated QoS for all FL members), as such those are provided to the PCF in the Npcf_PolicyAuthorization. For the scenario where there are more than one PCFs serving the list of UEs whose group QoS is requested, extensions to BSF management discovery to provide a list of PCF addresses based on the UE addresses are supported.\nNo requirements to provide QoS for a group of UEs that have no PDU Session Established, as those cannot be selected as group members based on QoS monitoring, however if this is a requirement, conclusions on in GMEC study, Key Issue #3: NEF exposure framework for provisioning of traffic characteristics and monitoring of performance characteristics applies, as this is resolved there.\nNo new 5G QoS parameter is required to be introduced to support group related Application AI/ML operation over 5GS.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "8.6.3\tPerformance KPIs mapping to 5GS QoS parameters",
                            "text_content": "It is concluded on the performance KPIs mapping to 5GS QoS parameters:\n-\tThe 5GS should bind the AI/ML traffic to distinct QoS flow (i.e. not sharing QoS flow with other applications).\n-\tWhether existing 5QI values can be applied for AI/ML traffic or new 5QI values should be defined can be decided during normative phase.\n",
                            "figures_meta_data": [],
                            "tables": []
                        }
                    ]
                },
                {
                    "title": "8.7\tKey Issue #7: 5GS Assistance to Federated Learning Operation",
                    "description": "",
                    "summary": "",
                    "text_content": "-\tThe new member selection assistance functionality will be specified in the normative phase. The new member selection assistance functionality is defined as a functionality offered by the 5GC upon receiving a request from the AF to provide a list of candidate UEs and additional information.\n-\tThe new member selection assistance functionality can be used by the AI/ML based application to select FL members.\n-\tThe new member selection assistance functionality can provide a list of recommended UEs based on the parameters contained in the request from the AF.\n-\tThe AF includes the following parameters as part of the request service operation to the 5GC:\n-\tUE list (a UE or a UE list).\n-\tThe 5GC provides the following parameters as part of the response service operation to the AF:\n-\tList(s) of candidate UEs which can be selected by the AF.\nNOTE 1:\tAny further parameters to be contained in the request/response from/to the AF and the procedure for selecting the list of candidate UEs will be discussed in the normative.\n-\tThe new member selection assistance functionality will be hosted in NEF.\nNOTE 2:\tIf this new member selection assistance functionality is not used, AF can select the AI/ML members based on existing network exposure information as described in clause 4.15 of TS 23.502 [4].\nNOTE 3:\tHow to support the trusted AF with member selection assistance functionality will be addressed during the normative phase.\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": [
                        {
                            "title": "8.7.1\tPerformance monitoring/exposure",
                            "text_content": "For the Key Issue #7 on performance monitoring/exposure, the following principle is proposed for the normative work.\n-\tThe group of UEs performances are provided by NEF to AF to assist the FL operation. These performances correspond to the QoS monitoring parameters, as defined in clause 6.1.3.18 of TS 23.503 [5].\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "8.7.2\tAnalytics to Assist Federated Learning Operation",
                            "text_content": "AF can request NWDAF (via NEF if needed) to provide existing, enhanced or new analytics to assist with federated learning operation. NWDAF Analytics services will be enhanced as follows:\n-\tNew latency performance analytics are introduced for NWDAF.\nNOTE 1:\tThe specific input and output parameters for the latency performance analytics among the group of UEs to assist the Application AI/ML FL operation will be determined during the normative phase.\n-\tUE mobility analytics are enhanced as follows: a list of areas can be provided by the AF, which helps the NWDAF to provide UE's direction and geographical distribution of the UEs to the AF.\n-\tWLAN performance analytics are enhanced to allow analytics outputs on a per UE granularity. For UEs' list provided by the AF, the NWDAF can provide WLAN performance analytics per UE granularity to assist AF to determine the final list of member UEs.\n-\tQoS sustainability analytics enhancements from eNA_Ph3 normative work can be used.\nNOTE 2:\tWhether QoS sustainability analytics need to be enhanced on a per UE granularity or Service Experience analytics can be used can be discussed during the normative phase.\n-\tDN performance analytics are enhanced to include aggregated UE's traffic rate, variance of the traffic rate among UEs, variance of packet delay among UEs, variance of packet loss rate among UEs as well as top UEs who cannot meet the traffic rate, packet delay and loss rate threshold.\n\n",
                            "figures_meta_data": [],
                            "tables": [
                                {
                                    "description": "",
                                    "table number": 29,
                                    "summary": "",
                                    "name": ""
                                }
                            ]
                        }
                    ]
                }
            ]
        }
    ]
}