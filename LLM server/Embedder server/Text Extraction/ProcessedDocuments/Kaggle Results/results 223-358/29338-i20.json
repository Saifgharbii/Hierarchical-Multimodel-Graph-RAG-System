{
    "document_name": "29338-i20.docx",
    "content": [
        {
            "title": "Foreword",
            "description": "This Technical Specification has been produced by the 3rd Generation Partnership Project (3GPP).\nThe contents of the present document are subject to continuing work within the TSG and may change following formal TSG approval. Should the TSG modify the contents of the present document, it will be re-released by the TSG with an identifying change of release date and an increase in version number as follows:\nVersion x.y.z\nwhere:\nx\tthe first digit:\n1\tpresented to TSG for information;\n2\tpresented to TSG for approval;\n3\tor greater indicates TSG approved document under change control.\ny\tthe second digit is incremented for all changes of substance, i.e. technical enhancements, corrections, updates, etc.\nz\tthe third digit is incremented when editorial only changes have been incorporated in the document.\nIn the present document, modal verbs have the following meanings:\nshall\tindicates a mandatory requirement to do something\nshall not\tindicates an interdiction (prohibition) to do something\nThe constructions \"shall\" and \"shall not\" are confined to the context of normative provisions, and do not appear in Technical Reports.\nThe constructions \"must\" and \"must not\" are not used as substitutes for \"shall\" and \"shall not\". Their use is avoided insofar as possible, and they are not used in a normative context except in a direct citation from an external, referenced, non-3GPP document, or so as to maintain continuity of style when extending or modifying the provisions of such a referenced document.\nshould\tindicates a recommendation to do something\nshould not\tindicates a recommendation not to do something\nmay\tindicates permission to do something\nneed not\tindicates permission not to do something\nThe construction \"may not\" is ambiguous and is not used in normative elements. The unambiguous constructions \"might not\" or \"shall not\" are used instead, depending upon the meaning intended.\ncan\tindicates that something is possible\ncannot\tindicates that something is impossible\nThe constructions \"can\" and \"cannot\" are not substitutes for \"may\" and \"need not\".\nwill\tindicates that something is certain or expected to happen as a result of action taken by an agency the behaviour of which is outside the scope of the present document\nwill not\tindicates that something is certain or expected not to happen as a result of action taken by an agency the behaviour of which is outside the scope of the present document\nmight\tindicates a likelihood that something will happen as a result of action taken by some agency the behaviour of which is outside the scope of the present document\nmight not\tindicates a likelihood that something will not happen as a result of action taken by some agency the behaviour of which is outside the scope of the present document\nIn addition:\nis\t(or any other verb in the indicative mood) indicates a statement of fact\nis not\t(or any other negative verb in the indicative mood) indicates a statement of fact\nThe constructions \"is\" and \"is not\" do not indicate requirements.\n",
            "summary": "",
            "tables": [],
            "figures_meta_data": [],
            "subsections": []
        },
        {
            "title": "1\tScope",
            "description": "The present document defines the Diameter-based interfaces specific to SMS when they are used in conjunction with the \"SMS in MME\" architecture specified in 3GPP TS 23.272 [2] or for SGSN supporting EPS interfaces, or the\" SMS in 5GS\" architecture specified in 3GPP TS 23.501 [21]. It comprises:\n-\tthe Diameter application for the S6c interface between the HSS/UDM and the central SMS functions (SMS-GMSC, SMS Router) ;\n-\tthe Diameter application\n-\tfor the SGd interface between the MME/SMSF, the SMS-IWMSC, the SMS-GMSC and the SMS Router.\n-\tfor the Gdd interface between the SGSN, the SMS-IWMSC, the SMS-GMSC and the SMS Router.\nFor the purpose of supporting SMS in 5GS, the UDM may implement the requirements specified in the present specification for HSS, with the following modification:\n-\t\"HSS\" is to be replaced with \"UDM\".\n",
            "summary": "",
            "tables": [],
            "figures_meta_data": [],
            "subsections": []
        },
        {
            "title": "2\tReferences",
            "description": "The following documents contain provisions which, through reference in this text, constitute provisions of the present document.\n-\tReferences are either specific (identified by date of publication, edition number, version number, etc.) or non-specific.\n-\tFor a specific reference, subsequent revisions do not apply.\n-\tFor a non-specific reference, the latest version applies. In the case of a reference to a 3GPP document (including a GSM document), a non-specific reference implicitly refers to the latest version of that document in the same Release as the present document.\n[1]\t3GPP TR 21.905: \"Vocabulary for 3GPP Specifications\".\n[2]\t3GPP TS 23.272: \"Circuit Switched (CS) fallback in Evolved Packet System (EPS); Stage 2\".\n[3]\t3GPP TS 23.040: \"Technical realization of the Short Message Service (SMS)\".\n[4]\t3GPP TS 29.272: \"Evolved Packet System (EPS); Mobility Management Entity (MME) and Serving GPRS Support Node (SGSN) related interfaces based on Diameter protocol\".\n[5]\t3GPP TS 29.229: \"Cx and Dx interfaces based on the Diameter protocol; Protocol details\".\n[6]\tIETF RFC 2234: \"Augmented BNF for Syntax Specifications: ABNF\".\n[7]\tVoid.\n[8]\tIETF RFC 5516: \"Diameter Command Code Registration for the Third Generation Partnership Project (3GPP) Evolved Packet System (EPS)\".\n[9]\t3GPP TS 29.002: \"Mobile Application Part (MAP) specification\".\n[10]\t3GPP TS 29.173: \"Location Services (LCS); Diameter-based SLh interface for Control Plane LCS\".\n[11]\t3GPP TS 33.210: \"3G security; Network Domain Security (NDS); IP network layer security \".\n[12]\tIETF RFC 4960: \"Stream Control Transport Protocol\".\n[13]\tITU-T Recommendation E.164: \"The international public telecommunication numbering plan\".\n[14]\t3GPP TS 29.329: \"Sh Interface based on the Diameter protocol; Protocol details\".\n[15]\t3GPP TS 29.336: \"Home Subscriber Server (HSS) diameter interfaces for interworking with packet data networks and applications\".\n[16]\t3GPP TS 23.003: \"Numbering, addressing and identification\".\n[17]\t3GPP TS 23.204: \"Support of Short Message Service (SMS) over generic 3GPP Internet Protocol (IP) access; Stage 2\".\n[18]\t3GPP TS 23.682: \"Architecture enhancements to facilitate communications with packet data networks and applications\".\n[19]\tIETF RFC 7944: \"Diameter Routing Message Priority\".\n[20]\tIETF RFC 6733: \"Diameter Base Protocol\".\n[21]\t3GPP TS 23.501:\"System Architecture for the 5G System\".\n",
            "summary": "",
            "tables": [],
            "figures_meta_data": [],
            "subsections": []
        },
        {
            "title": "3\tDefinitions, symbols and abbreviations",
            "description": "",
            "summary": "",
            "tables": [],
            "figures_meta_data": [],
            "subsections": [
                {
                    "title": "3.1\tDefinitions",
                    "description": "",
                    "summary": "",
                    "text_content": "For the purposes of the present document, the terms and definitions given in TR 21.905 [1] and the following apply. A term defined in the present document takes precedence over the definition of the same term, if any, in TR 21.905 [1].\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "3.2\tAbbreviations",
                    "description": "",
                    "summary": "",
                    "text_content": "For the purposes of the present document, the abbreviations given in TR 21.905 [1] and the following apply. An abbreviation defined in the present document takes precedence over the definition of the same abbreviation, if any, in TR 21.905 [1].\nABNF\tAugmented Backus-Naur Form\nDRMP\tDiameter Routing Message Priority\nDSCP\tDifferentiated Services Code Point\nIANA\tInternet Assigned Numbers Authority\nIP-SM-GW\tIP Short Message Gateway\nMWD\tMessage Waiting Data\nRP\tRelay layer Protocol\nRP-MTI\tRP Message Type Indicator\nRP-SMEA\tRP SME-Address\nRP-UI\tRP User Information\nSM RL\tShort Message Relay Layer\nSMS-GMSC\tGateway MSC for SMS\nSMS-IWMSC\tInterworking MSC for SMS\nSMSMI\tSMS without MSISDN in IMS\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                }
            ]
        },
        {
            "title": "4\tGeneral",
            "description": "",
            "summary": "",
            "tables": [],
            "figures_meta_data": [],
            "subsections": [
                {
                    "title": "4.1\tIntroduction",
                    "description": "",
                    "summary": "",
                    "text_content": "The SMS in MME architecture is described in 3GPP TS 23.272 [2] and the SMS in 5GS architecture is described in 3GPP TS 23.501 [21], have specified the reference points S6c and SGd.\nThe clause 4 addresses Diameter aspects which are common to S6c, SGd and Gdd.\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "4.2\tUse of Diameter Base protocol",
                    "description": "",
                    "summary": "",
                    "text_content": "The Diameter base protocol as specified in IETF RFC 6733 [20] shall apply except as modified by the defined support of the methods and the defined support of the commands and AVPs, result and error codes as specified in this specification. Unless otherwise specified, the procedures (including error handling and unrecognised information handling) shall be used unmodified.\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "4.3\tSecuring Diameter messages",
                    "description": "",
                    "summary": "",
                    "text_content": "For secure transport of Diameter messages, see 3GPP TS 33.210 [11].\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "4.4\tAccounting functionality",
                    "description": "",
                    "summary": "",
                    "text_content": "Accounting functionality (Accounting Session State Machine, related command codes and AVPs) shall not be used on the S6c, SGd and Gdd interfaces.\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "4.5\tUse of sessions",
                    "description": "",
                    "summary": "",
                    "text_content": "Diameter sessions shall be implicitly terminated over the S6c, SGd and Gdd interfaces. An implicitly terminated session is one for which the server does not maintain state information. The client shall not send any re-authorization or session termination requests to the server.\nThe Diameter base protocol specified in IETF RFC 6733 [20] includes the Auth-Session-State AVP as the mechanism for the implementation of implicitly terminated sessions.\nThe client (server) shall include in its requests (responses) the Auth-Session-State AVP set to the value NO_STATE_MAINTAINED (1), as described in IETF RFC 6733 [20]. As a consequence, the server shall not maintain any state information about this session and the client shall not send any session termination request. Neither the Authorization-Lifetime AVP nor the Session-Timeout AVP shall be present in requests or responses.\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "4.6\tTransport protocol",
                    "description": "",
                    "summary": "",
                    "text_content": "Diameter messages over the S6c, SGd and Gdd interfaces shall make use of SCTP as specified in IETF RFC 4960 [12] as transport protocol.\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "4.7\tAdvertising application support",
                    "description": "",
                    "summary": "",
                    "text_content": "The MME, HSS, SMS-IWMSC, SMS-GMSC and SMS Router shall advertise support of the Diameter S6c Application over the S6c interface and of the Diameter SGd Application over the SGd interface by including the value of the application identifier in the Auth-Application-Id AVP within the Vendor-Specific-Application-Id grouped AVP of the Capabilities-Exchange-Request and Capabilities-Exchange-Answer commands. The MME, SMS-GMSC and SMS Router shall additionally advertise support of the Diameter S6c Application over the SGd interface if they support the Alert Service Centre procedure between the MME, SMS-GMSC and SMS Router.\nThe SGSN, SMS-IWMSC, SMS-GMSC and SMS Router shall advertise support of the Diameter SGd Application over the Gdd interface by including the value of the application identifier in the Auth-Application-Id AVP within the Vendor-Specific-Application-Id grouped AVP of the Capabilities-Exchange-Request and Capabilities-Exchange-Answer commands. The SGSN, SMS-GMSC and SMS Router shall additionally advertise support of the Diameter S6c Application over the Gdd interface if they support the Alert Service Centre procedure between the SGSN, SMS-GMSC and SMS Router.\nThe MTC-IWF and SMS-IWMSC shall advertise support of the Diameter SGd Application over the T4 interface if they support the MO-Forward-Short-Message procedure between the SMS-IWMSC and the MTC-IWF.\nThe vendor identifier value of 3GPP (10415) shall be included in the Supported-Vendor-Id AVP of the Capabilities-Exchange-Request and Capabilities-Exchange-Answer commands, and in the Vendor-Id AVP within the Vendor-Specific-Application-Id grouped AVP of the Capabilities-Exchange-Request and Capabilities-Exchange-Answer commands.\nThe Vendor-Id AVP included in Capabilities-Exchange-Request and Capabilities-Exchange-Answer commands that is not included in the Vendor-Specific-Application-Id AVPs as described above shall indicate the manufacturer of the Diameter node as per IETF RFC 6733 [20].\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "4.8\tDiameter Application Identifier",
                    "description": "",
                    "summary": "",
                    "text_content": "The S6c and the SGd/Gdd interface protocols shall be defined, each, as an IETF vendor specific Diameter application, where the vendor is 3GPP. The vendor identifier assigned by IANA to 3GPP (http://www.iana.org/assignments/enterprise-numbers) is 10415.\nThe Diameter application identifier assigned to the S6c Diameter application is 16777312 (allocated by IANA).\nThe Diameter application identifier assigned to the SGd Diameter application, which is also applicable to the Gdd and T4 interfaces is 16777313 (allocated by IANA).\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "4.9\tUse of the Supported-Features AVP",
                    "description": "",
                    "summary": "",
                    "text_content": "When new functionality is introduced on the S6c or SGd Diameter applications, it should be defined as optional. If backwards incompatible changes can not be avoided, the new functionality shall be introduced as a new feature and support advertised with the Supported-Features AVP. The usage of the Supported-Features AVP on the S6c or SGd applications is consistent with the procedures for the dynamic discovery of supported features as defined in clause 7.2 of 3GPP TS 29.229 [5].\nWhen extending the application by adding new AVPs for a feature, the new AVPs shall have the M bit cleared and the AVP shall not be defined mandatory in the command ABNF.\nAs defined in 3GPP TS 29.229 [5], the Supported-Features AVP is of type grouped and contains the Vendor-Id, Feature-List-ID and Feature-List AVPs. On the all reference points as specified in this specification, the Supported-Features AVP is used to identify features that have been defined by 3GPP and hence, for features defined in this document, the Vendor-Id AVP shall contain the vendor ID of 3GPP (10415). If there are multiple feature lists defined for the reference point, the Feature-List-ID AVP shall differentiate those lists from one another.\nThe Table 5.3.3.13/1 defines the features applicable to the S6c interface for the feature list with a Feature-List-ID of 1.\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                }
            ]
        },
        {
            "title": "5\tDiameter based S6c interface between HSS and central SMS functions",
            "description": "",
            "summary": "",
            "tables": [],
            "figures_meta_data": [],
            "subsections": [
                {
                    "title": "5.1\tIntroduction",
                    "description": "",
                    "summary": "",
                    "text_content": "The S6c interface enables the retrieval of routing information for the transfer of short messages, the report of status of the delivery status of a short message and the alerting of the SMS-SC between the HSS, the SMS-GMSC and the SMS Router as described in 3GPP TS 23.040 [3].\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "5.2\tProcedures description",
                    "description": "",
                    "summary": "",
                    "text_content": "",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": [
                        {
                            "title": "5.2.1\tSend Routing Info for SM procedure",
                            "text_content": "This procedure shall be used between the SMS-GMSC or the IP-SM-GW and the HSS to retrieve the routing information needed for routing the short message to the serving MSC or MME or SGSN or SMSF. This procedure is also used between the SMS-GMSC and the SMS Router or the IP-SM-GW, and between the HSS and the SMS Router or the IP-SM-GW in order to enforce routing of the SM delivery via the HPLMN of the receiving MS.\nThis procedure is applicable to an IP-SM-GW for its SMS Router function when using the S6c interface.\nThis procedure is used according to the call flows described in 3GPP TS 23.040 [2] clause 10.\nTable 5.2.1.1-1 specifies the involved information elements for the request.\nTable 5.2.1.1-2 specifies the involved information elements for the answer.\nThis procedure is mapped to the commands Send-Routing-Info-for-SM-Request/Answer (SRR/SRA) in the Diameter application specified in clause 5.3.2.\n\nTable 5.2.1.1-1: Send Routing Info for SM Request\n\nTable 5.2.1.1-2: Send Routing Info for SM Answer\n\nThe SMS-GMSC shall make use of this procedure to retrieve the routing information needed for routing the short message to the serving MSC or MME or SGSN or SMSF registered for 3GPP access or SMSF registered for non-3GPP access  for enforcing routing of the SM delivery via the SMS Router of HPLMN.\nIt shall populate the information elements in the Send Routing Info for SM request according to the table 5.2.1.1-1.\nWhen the Send Routing Info for SM Request is sent by the SMS-GMSC to the HSS in a retry context of SMS for IMS UE to IMS UE without MSISDN (see 3GPP TS 23.204 [17]), IMSI may not be available. In this case the IMSI information element shall be populated with the HSS-ID value.\nWhen receiving the Send Routing Info for-SM Answer, the SMS-GMSC or the SMS Router shall use the received Diameter address if the SMS-GMSC or the SMS Router transfers the terminating short message over the SGd or the Gdd interface.\nThis clause describes the HSS behaviour when the HSS receives a Send Routing Info for SM request which is not forwarded to an SMS Router or an IP-SM-GW.\nThe HSS shall check if the user identified by the MSISDN is known; otherwise, the HSS shall return an Experimental-Result-Code set to DIAMETER_ERROR_USER_UNKNOWN.\nThe HSS shall check if a MT SMS Teleservice subscription exists; otherwise, the HSS shall return an Experimental-Result-Code set to DIAMETER_ERROR_SERVICE_NOT_SUBSCRIBED.\nThe HSS shall check if the user is not barred for receiving MT short messages; otherwise, the HSS shall return an Experimental-Result-Code set to DIAMETER_ SERVICE _ERROR_BARRED.\nThe HSS shall check if one or more serving nodes (not marked with the mobile not reachable flag) are registered for MT SMS; otherwise, the HSS shall return an Experimental-Result-Code set to DIAMETER_ERROR_ABSENT_USER and update the MWD list and MNRF/MNRG. If there is no serving node being registered for MT SMS and the Single-Attempt-Delivery flag in SRR-Flags AVP is set, the HSS shall not add the SC address into the MWD list.\nThe HSS shall then return a Send Routing Info for SM answer with a Result-Code set to DIAMETER_SUCCESSFUL that shall contain the addresses of the serving nodes that are registered for MT SMS according the following rules:\n-\tif the GPRS indicator is not set, only one serving node address shall be returned according to the SM transfer option where MME is considered as a MSC. The address of the MME, if returned, shall comprise the MME Diameter address and the MME Number for MT SMS. The address of the SMSF, if returned, shall comprise the SMSF Diameter address and the SMSF Number.\n-\tif the GPRS indicator is set, two serving node addresses may be returned of which\n-\tthe Diameter address of the SGSN if available and the SGSN number,\n-\teither the number of the MSC or the Diameter address and the number of the MME for MT SMS.\n-\twhen two serving g nodes addresses are returned, the HSS selects which serving node it will populate in the Serving Node information element and in the Additional Serving Node information elements.\n-\tif the feature SMSF-Support is commonly supported, the HSS includes addresses of the registered SMSFs (if any) in the response, regardless of the GPRS indicator.\nNOTE:\tMSC and MME cannot be both registered as serving nodes for MT SMS at a given time (cf 3GPP TS 23.272 [2])\nIf the stored MSISDN number is not the same as the one received in the Send Routing Info for SM request service, the stored MSISDN number shall be included in the message.\nIn the context of MSISDN-less SMS delivery in IMS (see 3GPP TS 23.204 [17]), if the HSS receives an SMSMI correlation ID, the HSS shall return the IP-SM-GW number and shall not forward the request to an IP-SM-GW.\nWhen receiving a Send Routing Info for SM request, the SMS Router shall:\n-\tsend a Send Routing Info for SM request to the HSS to retrieve the routing information needed for routing the short message to the serving MSC or MME or SGSN or SMSF;\n-\tif the Send Routing Info for SM answer received from HSS is successful, the SMS Router shall send a Send Routing Info for SM answer to the SMS-GMSC where\n-\tthe SMS router shall populate the same Serving Node and Additional Serving Node fields (i.e AVPs) as the ones it received in the Send Routing Info for SM answer from HSS, but with its own SMS Router number and its own SMS Router Diameter address;\n-\tif the Send Routing Info for SM answer received from HSS is not successful, the SMS Router shall send a Send Routing Info for SM answer to the SMS-GMSC with the same Diameter error result code.\nIf the SMS Router receives some of the following information elements, User Identifier Alert, MWD Status, MSC Absent User Diagnostic SM, MME Absent User Diagnostic SM, SGSN Absent User Diagnostic SM, it shall transfer them in the Send-Routing Info for SM answer to the SMS-GMSC.\n",
                            "figures_meta_data": [],
                            "tables": [
                                {
                                    "description": "Table 5.2.1.1-1: Send Routing Info for SM Request",
                                    "table number": 3,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 5.2.1.1-2: Send Routing Info for SM Answer",
                                    "table number": 4,
                                    "summary": "",
                                    "name": ""
                                }
                            ]
                        },
                        {
                            "title": "5.2.2\tAlert Service Centre procedure",
                            "text_content": "This procedure shall be used between the HSS and the SMS-IWMSC to indicate that the MS is now recognized by the PLMN to have recovered its operation to allow for an MT SMS delivery. This procedure is used according to the call flows described in 3GPP TS 23.040 [2] clause 10.\nTable 5.2.2.1-1 specifies the involved information elements for the request.\nTable 5.2.2.1-2 specifies the involved information elements for the answer.\nThis procedure is mapped to the commands Alert-Service-Centre-Request/Answer (ALR/ALA) in the Diameter application specified in clause 5.3.2.\nTable 5.2.2.1-1: Alert Service Centre Request\n\nTable 5.2.2.1-2: Alert Service Centre Answer\n\nThe HSS shall make use of this procedure to alert the service centre when the mobile user is active after a short message transfer has failed because the mobile user is not reachable, or when the UE has indicated that it has memory capacity to accept a short message.\nIt is an operator option to resend an Alert Service Centre request to the SMS-IWMSC if the alert is unsuccessful. The number of repeat attempts and the interval between them is also an operator option. The service centre address should be purged from the MWD list if the alert is consistently unsuccessful.\nWhen receiving an Alert Service Centre request the SMS-IWMSC shall check whether the service centre address is known. If the service centre address is not valid, then no further action shall be taken.\nIf the service centre address is valid, the SMS-IW-MSC generates an Alert Service Centre message towards the SMS Centre.\n",
                            "figures_meta_data": [],
                            "tables": [
                                {
                                    "description": "Table 5.2.2.1-1: Alert Service Centre Request",
                                    "table number": 5,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 5.2.2.1-2: Alert Service Centre Answer",
                                    "table number": 6,
                                    "summary": "",
                                    "name": ""
                                }
                            ]
                        },
                        {
                            "title": "5.2.3\tReport SM Delivery Status procedure",
                            "text_content": "This procedure shall be used between the SMS-GMSC or the IP-SM-GW and the HSS to update the Message Waiting Data in the HSS or to inform the HSS of a successful SM transfer after polling. This procedure is invoked by the SMS-GMSC or the IP-SM-GW.\nThis procedure is applicable to an IP-SM-GW for its SMS Router function when using the S6c interface.\nThis procedure is used according to the call flows described in 3GPP TS 23.040 [2] clause 10.\nTable 5.2.3.1-1 specifies the involved information elements for the request.\nTable 5.2.3.1-2 specifies the involved information elements for the answer.\nThis procedure is mapped to the commands Report-SM-Delivery-Status-Request/Answer (RDR/RDA) in the Diameter application specified in clause 5.3.2.\nTable 5.2.3.1-1: Report SM Delivery Status Request\n\nTable 5.2.3.1-2: Report SM Delivery Status Answer\n\nThe SMS-GMSC shall make use of this procedure if:\n-\tthe reason received from the serving node for failure to deliver the message is absent user, unidentified user or SM delivery failure with error cause \"UE memory capacity exceeded\", and the SC address is not yet included in the MWD set, and the serving node did not request the SMS-GMSC to retransmit the Short Message at a later requested retransmission time, or\n-\tthe reason received from the serving node for failure to deliver the message is absent user, unidentified user or SM delivery failure with error cause \"UE memory capacity exceeded\", and the corresponding flag in the HSS (as indicated in the information received from HSS) is not set, or\n-\tthe reason received from the serving node (MSC/MME, SGSN or SMSF) for failure to deliver the message is absent user and the absent user diagnostic is different from the absent user diagnostic received from the HSS.\nIf absent user diagnostic information (see 3GPP TS 23.040 [3]) is received with the absent user error indication then the SMS-GMSC shall relay this information to the HSS.\nThe IP-SM-GW shall make use of this procedure if:\n-\tthe reason for failure to deliver the message is absent user, unidentified user or SM delivery failure with error cause \"UE memory capacity exceeded\", and the SC address is not yet included in the MWD set, or\n-\tthe reason for failure to deliver the message is absent user, unidentified user or SM delivery failure with error cause \"UE memory capacity exceeded\", and the corresponding flag in the HSS (as indicated in the information received in the MAP_INFORM_SERVICE_CENTRE) is not set, or\n-\tthe reason for failure to deliver the message is absent user and the absent user diagnostic is different from the absent user diagnostic received from the HSS.\nWhen receiving a Report SM Delivery Status request the HSS shall check if the user is known.\nIf the user is not known, the HSS shall return an Experimental-Result-Code set to DIAMETER_ERROR_USER_UNKNOWN.\nIf it is known, the HSS shall update the Message Waiting data as described in 3GPP TS 23.040 [3]. If the Single-Attempt-Delivery flag in RDR-Flags AVP is set, the HSS shall not add the SC address into the MWD list.\nIf the message waiting data is full, the HSS shall return an Experimental-Result-Code set to DIAMETER_ERROR_MWD_LIST_FULL.\nIf the received MSISDN is different from the stored MSISDN, the HSS shall return the Alert MSISDN.\n",
                            "figures_meta_data": [],
                            "tables": [
                                {
                                    "description": "Table 5.2.3.1-1: Report SM Delivery Status Request",
                                    "table number": 7,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 5.2.3.1-2: Report SM Delivery Status Answer",
                                    "table number": 8,
                                    "summary": "",
                                    "name": ""
                                }
                            ]
                        }
                    ]
                },
                {
                    "title": "5.3\tProtocol specification",
                    "description": "",
                    "summary": "",
                    "text_content": "",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": [
                        {
                            "title": "5.3.1\tRouting considerations",
                            "text_content": "The clauses in 5.3.1.1 specify the use of the Diameter routing AVPs Destination-Realm and Destination-Host over the S6c interface for Diameter command requests from the SMS-GMSC or the SMS router or the IP-SM-GW (i.e. for the Send Routing Info for SM and the Report SM Delivery Status procedures) The clause 5.3.1.1 also applies for the Report SM Delivery Status request generated by a SMS-SC in a retry context of SMS for IMS UE to IMS UE without MSISDN (see 3GPP TS 23.204 [17]) .\nIf the SMS-GMSC or the SMS router has stored or can obtain the address/name and the home network domain name of the HSS identified by the MSISDN or the IMSI, both the Destination-Realm and Destination-Host AVPs shall be present in the request.\nThe SMS Router shall use the MCC/MNC values of the PLMN to which it belongs, to build the MCC/MNC based network domain as described in clause 19.2 of 3GPP TS 23.003 [16] and include it in the Destination-Realm AVP of the request. The request shall then be routed to the next Diameter node.\nIf the SMS-GMSC can only obtain the MCC/MNC values from the MSISDN or the IMSI, the SMS-GMSC shall use them to build the MCC/MNC based network domain as described in clause 19.2 of 3GPP TS 23.003 [16] and include it in the Destination-Realm AVP of the request. The request shall then be routed to the next Diameter node.\nIf the SMS-GMSC cannot obtain the MCC/MNC values from the MSISDN of the user, the SMS-GMSC may forward the request to a Diameter node within the same PLMN, the Destination Realm content being left to the PLMN operator choice. Then:\n-\tif a Diameter node in the routing path insides the PLMN of the SMS-GSMC can obtain the MCC/MNC values of the PLMN to which the user is subscribed to (i.e. when the number portability is resolved in the network of the SMS-GMSC), or\n-\tif, otherwise, the Diameter node can obtain the MCC/MNC values of the PLMN associated to the CC and NDC codes of the MSISDN of the user, then\n-\tthe Diameter node shall use them to build the MCC/MNC based network domain as described in clause 19.2 of 3GPP TS 23.003 [16] and include it in the Destination-Realm AVP of the request. The request shall then be routed to the next Diameter node.\nIf the MCC/MNC values of the PLMN associated to the CC and NDC codes of the MSISDN or the MCC/MNC values of the PLMN to which the user is subscribed to cannot be obtained in the PLMN of the SMS-GMSC, the request shall be replaced in the PLMN of the SMS-GMSC by an equivalent request routed through a MAP interface (e.g. via an IWF).\nNOTE 1:\tThe inter PLMN routing principle is to reuse the routing based on a MCC/MNC based domain name as used by other Diameter applications such as S6a/d. It is assumed that obtaining the relevant MCC/MNC values from the MSISDN can be achieved in the PLMN to which the SMS-GMSC belongs. Otherwise MAP based routing is used. This routing principle may be completed with other routing solutions in the future.\nNOTE 2:\tThe Number portability resolution in the PLMN of the SMS-GMSC can be handled by an intermediate Diameter agent consulting a Number Portability Database of the Network Portability domain to which the PLMN of the SMS-GMSC belongs.\nIf the SMS-SC or the SMS-GMSC, in a retry context of SMS for IMS UE to IMS UE without MSISDN (see 3GPP TS 23.204 [17]), has stored or can obtain the address/name and the home network domain name of the HSS identified by the HSS ID, both the Destination-Realm and Destination-Host AVPs shall be present in the request.\nIf the SMS-SC or the SMS-GMSC, in a retry context of SMS for IMS UE to IMS UE without MSISDN (see 3GPP TS 23.204 [17]), can only obtain the MCC/MNC values from the HSS ID, the SMS-SC shall use them to build the MCC/MNC based network domain as described in clause 19.2 of 3GPP TS 23.003 [16] and include it in the Destination-Realm AVP of the request. The request shall then be routed to the next Diameter node.\nNOTE:\tIn a retry context of MSISDN-less SMS delivery in IMS (see 3GPP TS 23.204 [17]), the SMS-SC gets the HSS-ID from the MO Forward Short Message request as described in clause 6.2.1.\nWhen the request reaches a Diameter node in the home PLMN of the user and when multiple and separately addressable HSSs have been deployed in the home PLMN, the identity of the HSS that holds the subscriber data for a given user identified by its MSISDN may be retrieved by a user identity to HSS resolution mechanism as described in clause 5.4.\nWhen the request (i.e Send Routing Info for SM or Report SM Delivery Status) for SM occurs in the retry context of SMS for IMS UE to IMS UE without MSISDN (see 3GPP TS 23.204 [17]), the Diameter identity of the HSS that holds the subscriber data for a given user may be retrieved by a user identity to HSS resolution mechanism as described in clause 5.4, where the HSS ID conveyed in the request is considered as a user identity.\nConsequently, the Destination-Host AVP is declared as optional in the ABNF for all requests initiated by an SMS-GMSC or a SMS Router.\nThe HSS, when receiving a Send Routing Info for SM request, checks if an SMS Router is configured in the home network or if an IP-SM-GW has been registered for the user. If yes, the HSS shall act as a Diameter proxy and forward the request to the SMS Router or to the IP-SM-GW, by inserting the Diameter address of the SMS Router or of the IP-SM-GW as the Diameter destination address. If the Send Routing Info for SM request occurs in the retry context of SMS for IMS UE to IMS UE without MSISDN (see 3GPP TS 23.204 [17]), the HSS shall return the IP-SM-GW address and shall not forward the request to an IP-SM-GW.\nIf the Vendor-Specific-Application-ID AVP is received in any of the commands defined in this specification, it shall be ignored by the receiving node, and it shall not be used for routing purposes.\nThis clause specifies the use of the Diameter routing AVPs Destination-Realm and Destination-Host over the S6c interface for Diameter command requests from the HSS (i.e. for the Alert SC procedure).\nIf the HSS has stored the address/name of the SMS-SC and the associated home network domain name in the Message Waiting Data of the user, both the Destination-Realm and Destination-Host AVPs shall be present in the Diameter request. Otherwise the routing shall use MAP.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "5.3.2\tCommands",
                            "text_content": "This clause defines the Command code values and related ABNF for each command described for the S6c interface.\nThis clause defines the Command-Code values for the S6c interface application as allocated by IANA in the IETF RFC 5516 [8].\nEvery command is defined by means of the ABNF syntax IETF RFC 2234 [6], according to the Command Code Format (CCF) specification defined in IETF RFC 6733 [20]. In the case, the definition and use of an AVP is not specified in this document, the guidelines in IETF RFC 6733 [20] shall apply.\nThe Vendor-Specific-Application-Id AVP shall not be included in any command sent by Diameter nodes supporting applications defined in this specification. If the Vendor-Specific-Application-Id AVP is received in any of the commands defined in this specification, it shall be ignored by the receiving node.\nNOTE:\tThe Vendor-Specific-Application-Id is included as an optional AVP in all Command Code Format specifications defined in this specification in order to overcome potential interoperability issues with intermediate Diameter agents non-compliant with IETF RFC 6733 [20].\nThe following Command Codes are defined in this specification:\nTable 5.3.2.2/1: Command-Code values for S6c\n\nFor these commands, the Application-ID field shall be set to 16777312 (application identifier of the S6c interface application allocated by IANA).\nThe Send-Routing-Info-for-SM-Request (SRR) command, indicated by the Command-Code field set to 8388647 and the \"R\" bit set in the Command Flags field, is sent from SMS-GMSC to HSS or SMS Router or from SMS Router to HSS.\nMessage Format:\n< Send-Routing-Info-for-SM-Request > ::=\t< Diameter Header: 8388647, REQ, PXY, 16777312 >\n< Session-Id >\n[ DRMP ]\n[ Vendor-Specific-Application-Id ]\n{ Auth-Session-State }\n{ Origin-Host }\n{ Origin-Realm }\n[ Destination-Host ]\n{ Destination-Realm }\n[ MSISDN ]\n[ User-Name ]\n[ SMSMI-Correlation-ID ]\n*[ Supported-Features ]\n[ SC-Address ]\n[ SM-RP-MTI ]\n[ SM-RP-SMEA ]\n[ SRR-Flags ]\n[ SM-Delivery-Not-Intended ]\n*[ AVP ]\n*[ Proxy-Info ]\n*[ Route-Record ]\nThe Send-Routing-Info-for-SM-Answer command (SRA) command, indicated by the Command-Code field set to 8388647 and the 'R' bit cleared in the Command Flags field, is sent from HSS to SMS-GMSC or SMS Router or from SMS Router to SMS-GMSC.\nMessage Format\n< Send-Routing-info-for-SM-Answer > ::=\t< Diameter Header: 8388647, PXY, 16777312 >\n< Session-Id >\n[ DRMP ]\n[ Vendor-Specific-Application-Id ]\n[ Result-Code ]\n[ Experimental-Result ]\n{ Auth-Session-State }\n{ Origin-Host }\n{ Origin-Realm }\n[ User-Name ]\n*[ Supported-Features ]\n[ Serving-Node ]\n[ Additional-Serving-Node ]\n[ SMSF-3GPP-Address ]\n[ SMSF-Non-3GPP-Address ]\n[ LMSI ]\n[ User-Identifier ]\n[ MWD-Status ]\n[ MME-Absent-User-Diagnostic-SM ]\n[ MSC-Absent-User-Diagnostic-SM ]\n[ SGSN-Absent-User-Diagnostic-SM ]\n[ SMSF-3GPP-Absent-User-Diagnostic-SM ]\n[ SMSF-Non-3GPP-Absent-User-Diagnostic-SM ]\n*[ AVP ]\n[ Failed-AVP ]\n*[ Proxy-Info ]\n*[ Route-Record ]\nThe Alert-Service-Centre-Request (ALR) command, indicated by the Command-Code field set to 8388648 and the \"R\" bit set in the Command Flags field, is sent from the HSS to the SMS-IWMSC and from the MME or SGSN to the SMS-GMSC (possibly via an SMS Router).\nMessage Format:\n< Alert-Service-Centre-Request > ::=\t< Diameter Header: 8388648, REQ, PXY, 16777312 >\n< Session-Id >\n[ DRMP ]\n[ Vendor-Specific-Application-Id ]\n{ Auth-Session-State }\n{ Origin-Host }\n{ Origin-Realm }\n[ Destination-Host ]\n{ Destination-Realm }\n{ SC-Address }\n{ User-Identifier }\n[ SMSMI-Correlation-ID ]\n[ Maximum-UE-Availability-Time ]\n[ SMS-GMSC-Alert-Event ]\n[ Serving-Node ]\n*[ Supported-Features ]\n*[ AVP ]\n*[ Proxy-Info ]\n*[ Route-Record ]\nThe Alert-Service-Centre-Answer (ALA) command, indicated by the Command-Code field set to 8388648 and the 'R' bit cleared in the Command Flags field, is sent from the SMS-IWMSC to the HSS and from the SMS-GMSC to the MME or SGSN (possibly via an SMS Router).\nMessage Format\n< Alert-Service-Centre-Answer > ::=\t< Diameter Header: 8388648, PXY, 16777312 >\n< Session-Id >\n[ DRMP ]\n[ Vendor-Specific-Application-Id ]\n[ Result-Code ]\n[ Experimental-Result ]\n{ Auth-Session-State }\n{ Origin-Host }\n{ Origin-Realm }\n*[ Supported-Features ]\n*[ AVP ]\n[ Failed-AVP ]\n*[ Proxy-Info ]\n*[ Route-Record ]\nThe Report-SM-Delivery-Status-Request (RDR) command, indicated by the Command-Code field set to 8388649 and the \"R\" bit set in the Command Flags field, is sent from SMS-GMSC or IP-SM-GW to HSS.\nMessage Format:\n< Report-SM-Delivery-Status-Request > ::=\t< Diameter Header: 8388649, REQ, PXY, 16777312 >\n< Session-Id >\n[ DRMP ]\n[ Vendor-Specific-Application-Id ]\n{ Auth-Session-State }\n{ Origin-Host }\n{ Origin-Realm }\n[ Destination-Host ]\n{ Destination-Realm }\n*[ Supported-Features ]\n{ User-Identifier }\n[ SMSMI-Correlation-ID ]\n{ SC-Address }\n{ SM-Delivery-Outcome }\n[ RDR-Flags ]\n*[ AVP ]\n*[ Proxy-Info ]\n*[ Route-Record ]\nThe Report-SM-Delivery-Status-Answer (RDA) command, indicated by the Command-Code field set to 8388649 and the 'R' bit cleared in the Command Flags field, is sent from HSS to SMS-GMSC or IP-SM-GW.\nMessage Format\n< Report-SM-Delivery-Status-Answer > ::=\t< Diameter Header: 8388649, PXY, 16777312 >\n< Session-Id >\n[ DRMP ]\n[ Vendor-Specific-Application-Id ]\n[ Result-Code ]\n[ Experimental-Result ]\n{ Auth-Session-State }\n{ Origin-Host }\n{ Origin-Realm }\n*[ Supported-Features ]\n[ User-Identifier ]\n*[ AVP ]\n[ Failed-AVP ]\n*[ Proxy-Info ]\n*[ Route-Record ]\n",
                            "figures_meta_data": [],
                            "tables": [
                                {
                                    "description": "Table 5.3.2.2/1: Command-Code values for S6c",
                                    "table number": 9,
                                    "summary": "",
                                    "name": ""
                                }
                            ]
                        },
                        {
                            "title": "5.3.3\tAVPs",
                            "text_content": "The following table specifies the Diameter AVPs defined for the S6c interface protocol, their AVP Code values, types, possible flag values and whether or not the AVP may be encrypted. The Vendor-ID header of all AVPs defined in this specification shall be set to 3GPP (10415).\nFor all AVPs which contain bit masks and are of the type Unsigned32, e.g. TFR-Flags, bit 0 shall be the least significant bit. For example, to get the value of bit 0, a bit mask of 0x0001 should be used.\nTable 5.3.3.1/1: S6c specific Diameter AVPs\n\nThe following table specifies the Diameter AVPs re-used from existing Diameter Applications, including a reference to their respective specifications and when needed, a short description of their use within this interface.\nAny other AVPs from existing Diameter Applications, except for the AVPs from Diameter Base Protocol specified in IETF RFC 6733 [20], do not need to be supported. The AVPs from Diameter base protocol specified in IETF RFC 6733 [20] are not included in table 5.3.3.1/2, but they may be re-used for this interface.\nTable 5.3.3.1/2: S6c re-used Diameter AVPs\n\nThe SM-RP-MTI AVP is of type Enumerated and shall contain the RP-Message Type Indicator of the Short Message. The following values are defined:\n-\tSM_DELIVER (0)\n-\tSM_STATUS_REPORT (1)\nThe SM-RP-SMEA AVP is of type OctetString and shall contain the RP-Originating SME-address of the Short Message Entity that has originated the SM. It shall be formatted according to the formatting rules of the address fields described in 3GPP TS 23.040 [3].\nThe SRR-Flags AVP is of type Unsigned32 and it shall contain a bit mask. The meaning of the bits shall be as defined in table 5.3.3.4./1:\nTable 5.3.3.4/1: SRR-Flags\n\nThe SM-Delivery-Not-Intended AVP is of type Enumerated and shall indicate by its presence that delivery of a short message is not intended. It further indicates whether only IMSI or only MCC+MNC with the following values:\n-\tONLY_IMSI_REQUESTED (0),\n-\tONLY_MCC_MNC_REQUESTED (1).\nThe Serving-Node AVP is of type Grouped. This AVP shall contain the information about the network node serving the targeted SMS user. It is originally defined in 3GPP TS 29.173 [10].\nAVP format\nServing-Node ::=\t<AVP header: 2401 10415>\n[ SGSN-Name ]\n[ SGSN-Realm ]\n[ SGSN-Number ]\n[ MME-Name ]\n[ MME-Realm ]\n[ MME-Number-for-MT-SMS ]\n[ MSC-Number ]\n[ IP-SM-GW-Number ]\n[ IP-SM-GW-Name ]\n[ IP-SM-GW-Realm ]\n[ IP-SM-GW-SBI-Support-Indicator ]\n*[AVP]\nThe following combinations are allowed:\na) SGSN-Number\nb) SGSN-Name & SGSN-Realm & SGSN-Number if the HSS supports the \"Gdd in SGSN\" feature and has received the \"Gdd in SGSN\" indication over S6a or Gr interface from the SGSN (cf. 3GPP TS 29.272 [4] and 3GPP TS 29.002 [9])\nc) MME-Name & MME-Realm & MME-Number-for-MT-SMS\nd) MSC-Number\ne) MSC-Number & MME-Name & MME-Realm\nf) IP-SM-GW-Number\ng) IP-SM-GW-Number & IP-SM-GW-Name.\nh) IP-SM-GW-Number & IP-SM-GW-SBI-Support-Indicator\ni) IP-SM-GW-Number & IP-SM-GW-Name & IP-SM-GW-SBI-Support-Indicator.\nThe Additional-Serving-Node AVP is of type Grouped. This AVP shall contain the information about the network node serving the targeted user. It is originally defined in 3GPP TS 29.173 [10].\nAVP format\nAdditional-Serving-Node ::=\t<AVP header: 2406 10415>\n[ SGSN-Name ]\n[ SGSN-Realm ]\n[ SGSN-Number ]\n[ MME-Name ]\n[ MME-Realm ]\n[ MME-Number-for-MT-SMS ]\n[ MSC-Number ]\n*[AVP]\nThe following combinations are allowed:\na) SGSN-Number\nb) SGSN-Name & SGSN-Realm & SGSN-Number if the HSS supports the \"Gdd in SGSN\" feature and has received the \"Gdd in SGSN\" indication over S6a or Gr interface from the SGSN (cf. 3GPP TS 29.272 [4] and 3GPP TS 29.002 [9]\nc) MME-Name & MME-Realm & MME-Number-for-MT-SMS\nd) MSC-Number\ne) MSC-Number & MME-Name & MME-Realm\nThe MWD-Status AVP is of type Unsigned32 and it shall contain a bit mask. The meaning of the bits shall be as defined in table 5.3.3.8/1:\nTable 5.3.3.8/1: MWD Status\n\nThe MME-Absent-User-Diagnostic-SM AVP is of type Unsigned32 and shall indicate the diagnostic explaining the absence of the user given by the MME. The values are defined in 3GPP TS 23.040 [3] clause 3.3.2.\nThe MSC-Absent-User-Diagnostic-SM AVP is of type Unsigned32 and shall indicate the diagnostic explaining the absence of the user given by the MSC. The values are defined in 3GPP TS 23.040 [3] clause 3.3.2.\nThe SGSN-Absent-User-Diagnostic-SM AVP is of type Unsigned32 and shall indicate the diagnostic explaining the absence of the user given by the SGSN. The values are defined in 3GPP TS 23.040 [3] clause 3.3.2.\nThe syntax of this AVP is defined in 3GPP TS 29.229 [5]. For this release, the Feature-List-ID AVP value shall be set to 1.\nThe syntax of this AVP is defined in 3GPP TS 29.229 [5]. A null value indicates that there is no feature used by the application.\nFor the S6c application, the meaning of the bits shall be as defined in table 5.3.3.13/1 for the Feature-List-ID 1.\nTable 5.3.3.13/1: Features of Feature-List-ID 1 used in S6c\n\nThe SM-Delivery-Outcome AVP is of type Grouped. This AVP contains the result of the SM delivery.\nAVP format:\nSM-Delivery-Outcome::= <AVP header: 3316 10415>\n[ MME-SM-Delivery-Outcome ]\n[ MSC-SM-Delivery-Outcome ]\n[ SGSN-SM-Delivery-Outcome ]\n[ IP-SM-GW-SM-Delivery-Outcome ]\n[ SMSF-3GPP-SM-Delivery-Outcome ]\n[ SMSF-Non-3GPP-SM-Delivery-Outcome ]\n*[AVP]\nThe MME-Delivery-Outcome AVP is of type grouped and shall indicate the outcome of the SM delivery for setting the message waiting data in the HSS when the SM delivery is with an MME.\nAVP format:\nMME-SM-Delivery-Outcome::= <AVP header: 3317 10415>>\n[ SM-Delivery-Cause ]\n[ Absent-User-Diagnostic-SM ]\nThe MSC-Delivery-Outcome AVP is of type grouped and shall indicate the outcome of the SM delivery for setting the message waiting data in the HSS when the SM delivery is with an MSC.\nAVP format:\nMSC-SM-Delivery-Outcome::= <AVP header: 3318 10415>\n[ SM-Delivery-Cause ]\n[ Absent-User-Diagnostic-SM ]\nThe SGSN-Delivery-Outcome AVP is of type grouped and shall indicate the outcome of the SM delivery for setting the message waiting data in the HSS when the SM delivery is with an SGSN.\nAVP format:\nSGSN-SM-Delivery-Outcome::= <AVP header: 3319 10415>\n[ SM-Delivery-Cause ]\n[ Absent-User-Diagnostic-SM ]\nThe IP-SM-GW-SM-Delivery-Outcome AVP is of type grouped and shall indicate the outcome of the SM delivery for setting the message waiting data when the SM delivery is with an IP-SM-GW. The following values are defined.\nAVP format:\nIP-SM-GW-SM-Delivery-Outcome::= <AVP header: 3320 10415>\n[ SM-Delivery-Cause ]\n[ Absent-User-Diagnostic-SM ]\nThe SM-Delivery-Cause AVP is of type Enumerated and shall indicate the cause of the SMP delivery result. The following values are defined:\n-\tUE_ MEMORY_CAPACITY_EXCEEDED (0)\n-\tABSENT_USER (1)\n-\tSUCCESSFUL_TRANSFER (2)\nThe Absent-User-Diagnostic-SM AVP is of type Unsigned32 and shall indicate the diagnostic explaining the absence of the subscriber. The values are defined in 3GPP TS 23.040 [3] clause 3.3.2.\nThe RDR-Flags AVP is of type Unsigned32 and it shall contain a bit mask. The meaning of the bits shall be as defined in table 5.3.3.21/1:\nTable 5.3.3.21/1: RDR-Flags\n\nThe Maximum-UE-Availability-Time is of type Time and in shall contain the timestamp (in UTC) until which a UE using a power saving mechanism (such as extended idle mode DRX) is expected to be reachable for SM Delivery.\nThe SMS-GMSC-Alert-Event AVP is of type Unsigned32 and it shall contain a bit mask. The meaning of the bits shall be as defined in table 5.3.3.23/1:\nTable 5.3.3.23/1: SMS-GMSC-Alert-Event\n\nThe DRMP AVP is of type Enumerated and it is defined in IETF RFC 7944 [19]. This AVP allows the HSS, the SMS-GMSC, the SMS-Router and the IP-SM-GW to indicate the relative priority of Diameter messages over the S6c interface. The DRMP AVP may be used to set the DSCP marking for transport of the associated Diameter message.\nThe SMSF-3GPP-Absent-User-Diagnostic-SM AVP is of type Unsigned32 and shall indicate the diagnostic explaining the absence of the user given by the SMSF registered for 3GPP access. The values are defined in 3GPP TS 23.040 [3] clause 3.3.2.\nThe SMSF-Non-3GPP-Absent-User-Diagnostic-SM AVP is of type Unsigned32 and shall indicate the diagnostic explaining the absence of the user given by the SMSF registered for Non-3GPP access. The values are defined in 3GPP TS 23.040 [3] clause 3.3.2.\nThe SMSF-3GPP-SM-Delivery-Outcome AVP is of type grouped and shall indicate the outcome of the SM delivery for setting the message waiting data in the HSS when the SM delivery is with an SMSF registered for 3GPP access.\nAVP format:\nSMSF-3GPP-SM-Delivery-Outcome::= <AVP header: 3336 10415>>\n[ SM-Delivery-Cause ]\n[ Absent-User-Diagnostic-SM ]\nThe SMSF-Non-3GPP-SM-Delivery-Outcome AVP is of type grouped and shall indicate the outcome of the SM delivery for setting the message waiting data in the HSS when the SM delivery is with an SMSF registered for Non-3GPP access.\nAVP format:\nSMSF-Non-3GPP-SM-Delivery-Outcome::= <AVP header: 3337 10415>>\n[ SM-Delivery-Cause ]\n[ Absent-User-Diagnostic-SM ]\nThe SMSF-3GPP-Number AVP is of type OctetString and it shall contain the ISDN number of the SMSF registered for 3GPP access. For further details on the definition of this AVP, see 3GPP TS 23.003 [3]. This AVP contains an SMSF-3GPP-Number in international number format as described in ITU-T Rec E.164 [13] and shall be encoded as a TBCD-string. See 3GPP TS 29.002 [9] for encoding of TBCD-strings. This AVP shall not include leading indicators for the nature of address and the numbering plan; it shall contain only the TBCD-encoded digits of the address.\nThe SMSF-Non-3GPP-Number AVP is of type OctetString and it shall contain the ISDN number of the SMSF registered for Non-3GPP access. For further details on the definition of this AVP, see 3GPP TS 23.003 [3]. This AVP contains an SMSF-Non-3GPP-Number in international number format as described in ITU-T Rec E.164 [13] and shall be encoded as a TBCD-string. See 3GPP TS 29.002 [9] for encoding of TBCD-strings. This AVP shall not include leading indicators for the nature of address and the numbering plan; it shall contain only the TBCD-encoded digits of the address.\nThe SMSF-3GPP-Name AVP is of type DiameterIdentity and it shall contain the Diameter identity of the serving SMSF registered for 3GPP access. For further details on the encoding of this AVP, see IETF RFC 6733 [20].\nThe SMSF-Non-3GPP-Name AVP is of type DiameterIdentity and it shall contain the Diameter identity of the serving SMSF registered for Non-3GPP access. For further details on the encoding of this AVP, see IETF RFC 6733  [20].\nThe SMSF-3GPP-Realm AVP is of type DiameterIdentity and it shall contain the Diameter Realm Identity of the serving SMSF registered for 3GPP access. For further details on the encoding of this AVP, see IETF RFC 6733 [20].\nThe SMSF-Non-3GPP-Realm AVP is of type DiameterIdentity and it shall contain the Diameter Realm Identity of the serving SMSF registered for Non-3GPP access. For further details on the encoding of this AVP, see IETF RFC 6733 [20].\nThe SMSF-3GPP-Address AVP is of type Grouped. This AVP shall contain the information about the SMSF serving the targeted user for 3GPP access.\nAVP format\nSMSF-3GPP-Address ::=\t<AVP header: 3344 10415>\n[ SMSF-3GPP-Number ]\n[ SMSF-3GPP-Name ]\n[ SMSF-3GPP-Realm ]\n[ SMSF-3GPP-SBI-Support-Indicator ]\n*[AVP]\nThe SMSF-Non-3GPP-Address AVP is of type Grouped. This AVP shall contain the information about the SMSF serving the targeted user for Non-3GPP access.\nAVP format\nSMSF-Non-3GPP-Address ::=\t<AVP header: 3345 10415>\n[ SMSF-Non-3GPP-Number ]\n[ SMSF-Non-3GPP-Name ]\n[ SMSF-Non-3GPP-Realm ]\n[ SMSF-Non-3GPP-SBI-Support-Indicator ]\n*[AVP]\nThe SMSF-3GPP-SBI-Support-Indicator AVP is of type Enumerated and shall indicate whether the SMSF support service-based-interface or not, with the following values:\n-\tNOT_SUPPORT_SBI (0),\n-\tSUPPORT_SBI (1).\nThe SMSF-Non-3GPP-SBI-Support-Indicator AVP is of type Enumerated and shall indicate whether the SMSF support service-based-interface or not, with the following values:\n-\tNOT_SUPPORT_SBI (0),\n-\tSUPPORT_SBI (1).\nThe IP-SM-GW-SBI-Support-Indicator AVP is of type Enumerated and shall indicate whether the IP-SM-GW support service-based-interface or not, with the following values:\n-\tNOT_SUPPORT_SBI (0),\n-\tSUPPORT_SBI (1).\n\n",
                            "figures_meta_data": [],
                            "tables": [
                                {
                                    "description": "Table 5.3.3.1/1: S6c specific Diameter AVPs",
                                    "table number": 10,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 5.3.3.1/2: S6c re-used Diameter AVPs",
                                    "table number": 11,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 5.3.3.4/1: SRR-Flags",
                                    "table number": 12,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 5.3.3.8/1: MWD Status",
                                    "table number": 13,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 5.3.3.13/1: Features of Feature-List-ID 1 used in S6c",
                                    "table number": 14,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 5.3.3.21/1: RDR-Flags",
                                    "table number": 15,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 5.3.3.23/1: SMS-GMSC-Alert-Event",
                                    "table number": 16,
                                    "summary": "",
                                    "name": ""
                                }
                            ]
                        }
                    ]
                },
                {
                    "title": "5.4\tUser identity to HSS resolution",
                    "description": "",
                    "summary": "",
                    "text_content": "The User identity to HSS resolution mechanism enables the SMS-GMSC or SMS Router in the home PLMN or Diameter proxy agents in the home PLMN to find the identity of the HSS that holds the subscriber data for a given user identified by its MSISDN or by its IMSI when multiple and separately addressable HSSs have been deployed in the home PLMN. The resolution mechanism is not required in PLMNs that utilise a single HSS.\nThis User identity to HSS resolution mechanism may rely on routing capabilities provided by Diameter and be implemented in the home PLMN within dedicated Diameter Agents (Proxy Agents) responsible for determining the HSS identity based on the provided user identity. If this Diameter based implementation is selected by the home PLMN operator, the principles described below shall apply.\nWhen more than one independently addressable HSS are deployed in the home PLMN, each SMS-GMSC or SMS-Router network of the home PLMN shall be configured with the address/identity of a Diameter Agent (Proxy Agent) implementing this resolution mechanism.\nDiameter Relay agents and/or Diameter Proxy agents in the home PLMN receiving the Diameter signalling from SMS-GMSC located in other PLMNs shall be configured with the address/identity of a Diameter Agent (Proxy Agent) implementing this resolution mechanism.\nTo get the HSS identity that holds the subscriber data for a given user identity in the home network, the Diameter request normally destined to the HSS shall be sent to the pre-configured address/identity of a Diameter Proxy agent supporting the User identity to HSS resolution mechanism.\n-\tIf this Diameter request is received by a Diameter Redirect Agent, the Diameter Redirect Agent shall determine the HSS identity based on the provided user identity (i.e. MSISDN or IMSI) and shall return a notification of redirection towards the HSS identity, in response to the Diameter request. Multiple HSS identities may be included in the response, as specified in IETF RFC 6733 [20]. In such a case, the requesting Diameter entity shall send the Diameter request to the first HSS identity in the ordered list received in the Diameter response from the Diameter Redirect Agent. If no successful response to the Diameter request is received, the requesting Diameter entity shall send a Diameter request to the next HSS identity in the ordered list. This procedure shall be repeated until a successful response from an HSS is received. After the user identity to HSS resolution, the MME or the SGSN shall store the determined HSS identity/name/Realm and shall use it in further Diameter requests to the same user identity.\n-\tIf this Diameter request is received by a Diameter Proxy Agent, the Diameter Proxy Agent shall determine the HSS identity based on the provided user identity (i.e. MSISDN or IMSI) and shall forward the Diameter request directly to the HSS. In this case, the user identity to HSS resolution decision is communicated to the SMS-GMSC in the Origin-Host/Origin-Realm AVPs of the response.\nNOTE:\tAlternatives to the user identity to HSS resolution Diameter based implementation are outside the scope of this specification.\nThe User identity to HSS resolution mechanism, in a retry context of SMS for IMS UE to IMS UE without MSISDN (see 3GPP TS 23.204 [17]), applies as described in this clause for requests issued by the SMS-SC to a HSS and where the IMSI of the user is replaced by the HSS ID of the HSS storing the subscription data of the user.\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                }
            ]
        },
        {
            "title": "6\tDiameter based SGd/Gdd interfaces between MME/SGSN and central SMS functions",
            "description": "",
            "summary": "",
            "tables": [],
            "figures_meta_data": [],
            "subsections": [
                {
                    "title": "6.1\tIntroduction",
                    "description": "",
                    "summary": "",
                    "text_content": "The SGd interface enables the transfer of short messages between the MME, the SMS-IWMSC, the SMS-GMSC and the SMS Router, and the alerting of the SMS-GMSC by the MME (possibly via an SMS Router), as described in 3GPP TS 23.040 [3].\nThe Gdd interface enables the transfer of short messages between the SGSN, the SMS-IWMSC, the SMS-GMSC and the SMS Router, and the alerting of the SMS-GMSC by the SGSN (possibly via an SMS Router) as described in 3GPP TS 23.040 [3].\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "6.2\tProcedures description",
                    "description": "",
                    "summary": "",
                    "text_content": "",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": [
                        {
                            "title": "6.2.1\tMO Forward Short Message procedure",
                            "text_content": "This procedure shall be used between the serving MME or SGSN or IP-SM-GW and the SMS-IWMSC to forward mobile originated short messages from a mobile user to a Service Centre.\nThis procedure is used according to the call flows described in 3GPP TS 23.040 [3] clause 10.\nThis procedure may also be used between the SMS-IWMSC and the MTC-IWF to forward mobile originated short messages from a mobile user to an MTC-IWF; see 3GPP TS 23.682 [18].\nTable 6.2.1.1/1 specifies the involved information elements for the request.\nTable 6.2.1.1/2 specifies the involved information elements for the answer.\nThis procedure is mapped to the commands MO-Forward-Short-Message-Request/Answer (OFR/OFA) in the Diameter application specified in clause 6.3.2.\nTable 6.2.1.1/1: MO Forward Short Message Request\n\nNOTE:\tIn the context of MSISDN-less SMS delivery in IMS (see 3GPP TS 23.204 [17]), the IP-SM-GW gets the HSS-ID and the SM Delivery Outcome from the SIP message coming from the IMS network of the destination user and indicating a temporary SMS delivery failure.\nTable 6.2.1.1/2: MO-Forward Short Message Answer\n\nWhen the \"SMS in MME\" feature is applied for the UE, the MME shall make use of this procedure to forward mobile originated short messages received from the UE to the SMS-IWMSC associated to the SMS-SC indicated by the UE.\nWhen the SGSN supports the SMS service for the UE, the SGSN shall make use of this procedure to forward mobile originated short messages received from the UE to the SMS-IWMSC associated to the SMS-SC indicated by the UE.\nThe IP-SM-GW shall make use of this procedure to forward mobile originated short messages received from the UE to the SMS-IWMSC associated to the SMS-SC indicated by the UE. This procedure shall be also used in the context of MSISDN-less SMS delivery in IMS (see 3GPP TS 23.204 [17]), when the direct SMS delivery has failed,\nThe MME or the SGSN shall check if the SMS related subscription data (e.g. ODB data and Call Barring) allows forwarding the short message.\nWhen receiving the MO Forward Short Message Request, the SMS-IWMSC shall check if the SMS-SC is known, if it is not, an Experimental-Result-Code set to DIAMETER_ERROR_SM_DELIVERY_FAILURE and a SM Delivery Failure Cause indicating \"unknown Service Centre address\" shall be returned to the MME or the SGSN.\nThe SMS IWMSC shall then pass the short message to the addressed SMS-SC, or, if the destination user identity maps to an MTC-IWF based on a pre-configured mapping table, forward it to the appropriate MTC-IWF.\nIf the SMS-SC or MTC-IWF returns a negative acknowledgement, an Experimental-Result-Code set to DIAMETER_ERROR_SM_DELIVERY_FAILURE and a SM Delivery Failure Cause indicating the cause given by the SMC-SC or MTC-IWF shall be returned to the MME or the SGSN.\nIf the SMS-SC or MTC-IWF returns a positive acknowledgement to the SMS IWMSC, a Result-Code set to DIAMETER_SUCCESS shall be returned to the MME or the SGSN.\nIf a requested facility is not supported, an Experimental-Result-Code set to DIAMETER_ERROR_FACILITY_NOT_SUPPORTED shall be returned.\n",
                            "figures_meta_data": [],
                            "tables": [
                                {
                                    "description": "Table 6.2.1.1/1: MO Forward Short Message Request",
                                    "table number": 17,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 6.2.1.1/2: MO-Forward Short Message Answer",
                                    "table number": 18,
                                    "summary": "",
                                    "name": ""
                                }
                            ]
                        },
                        {
                            "title": "6.2.2\tMT Forward Short Message procedure",
                            "text_content": "This procedure shall be used between the SMS-GMSC and the serving MME or SGSN (transiting an SMS Router, if present) or IP-SM-GW to forward mobile terminated short messages.\nThis procedure is used according to the call flows described in 3GPP TS 23.040 [3] clause 10.\nTable 6.2.2.1/1 specifies the involved information elements for the request.\nTable 6.2.2.1/2 specifies the involved information elements for the answer.\nThis procedure is mapped to the commands MT-Forward-Short-Message-Request/Answer (TFR/TFA) in the Diameter application specified in clause 6.3.2.\nTable 6.2.2.1/1: MT Forward Short Message Request\n\nTable 6.2.2.1/2: MT Forward Short Message Answer\n\nWhen receiving a MT Forward Short Message Request, the MME or the SGSN shall check if the IMSI is known,\nIf it is not known, an Experimental-Result-Code set to DIAMETER_ERROR_USER_UNKNOWN shall be returned.\nThe MME or the SGSN shall attempt to deliver the short message to the UE.\nIf the delivery of the short message to the UE is successful, the MME or the SGSN shall return a Result-Code set to DIAMETER_SUCCESS.\nIf the UE is not reachable via the MME, the MME shall set the MNRF flag and shall return an Experimental-Result-Code set to DIAMETER_ERROR_ABSENT_USER.\nIf the UE is not reachable via the SGSN, the SGSN shall set the MNRG flag and shall return an Experimental-Result-Code set to DIAMETER_ERROR_ABSENT_USER.\nIf the UE is using extended idle mode DRX (as defined in 3GPP TS 23.682 [18]) and the UE is expected to not respond to paging shortly or within the time frame indicated by the SM-Delivery-Timer and SM-Delivery-Start-Time IEs, the MME or SGSN may behave as specified above for a UE that is not reachachable, while still paging the UE.\nNOTE 1:\tThis mechanism is not intended for UEs which are known to wake up shortly (e.g. within the next 10 seconds) as enough time needs to elapse, between the sending of the MT Forward Short Message Answer and the subsequent Notification procedure towards the HSS when the UE becomes reachable, to enable the Report SM Delivery Status procedure to take place beforehand from the SMS-GMSC to the HSS.\nIf the UE is using extended idle mode DRX (as defined in 3GPP TS 23.682 [18]) and the UE is expected to respond to paging shortly or within the time frame indicated by the SM-Delivery-Timer and SM-Delivery-Start-Time IEs, the MME or SGSN should page the UE and attempt to deliver the short message to the UE.\nIf the UE is using a power saving mechanism such as extended idle mode DRX (see 3GPP TS 23.682 [18]), and if the MT Forward Short Message Request includes the Maximum-Retransmission-Time AVP, the MME or SGSN may return an MT Forward Short Message Answer with the Experimental-Result-Code set to DIAMETER_ERROR_ABSENT_USER and with the Requested-Retransmission-Time AVP requesting the SMS-GMSC to retransmit the Short Message at a later time prior to the Maximum Retransmission Time. In that case, the MME or SGSN shall store (if not already done) the Origin-Host, the Origin-Realm and the SMS-GMSC address received in request and shall not set the MNRF or MNRG flag.\nNOTE 2:\tThis mechanism does not cause additional signalling at the HSS to retransmit the Short Message.\nIf the delivery of the mobile terminated short message failed because of memory capacity exceeded or UE error or UE not SM equipped, the MME or the SGSN shall return an Experimental-Result-Code set to DIAMETER_ERROR_SM_DELIVERY_FAILURE complemented with a SM Delivery Failure Cause indication.\nIf a requested facility is not supported, the MME or the SGSN shall return an Experimental-Result-Code set to DIAMETER_ERROR_FACILITY_NOT_SUPPORTED.\nIf the user is busy for MT SMS, i.e. the mobile terminated short message transfer cannot be completed because:\n-\tanother mobile terminated short message transfer is going on and the delivery node does not support message buffering; or\n-\tanother mobile terminated short message transfer is going on and it is not possible to buffer the message for later delivery; or\n-\tthe message was buffered but it is not possible to deliver the message before the expiry of the buffering time defined in 3GPP TS 23.040 [3],\nthe MME or the SGSN shall return an Experimental-Result-Code set to DIAMETER_ERROR_USER_BUSY_FOR_MT_SMS.\nIf the delivery of the mobile terminated short message failed because the mobile station failed authentication, the MME or the SGSN shall return an Experimental-Result-Code set to DIAMETER_ERROR_ILLEGAL_USER.\nIf the delivery of the mobile terminated short message failed because an IMEI check failed, i.e. the IMEI was prohibite-listed or not permitted-listed, the MME or the SGSN shall return an Experimental-Result-Code set to DIAMETER_ERROR_ILLEGAL_EQUIPMENT.\nThe SMS-GMSC shall make use of this procedure over the SGd interface or over the Gdd interface for the delivery of a MT short message when it has selected the serving node of which it obtained the Diameter Identity from the answer of the Send Routing Info for SM procedure.\nNOTE:\tThe SMS-GMSC is not aware that the MT Forward Short Message Request may be routed to a SMS router.\nThe SMS-GMSC may include the Maximum-Retransmission-Time AVP in the MT Forward Short Request to indicate that it is capable to retransmit the Short Message until the indicated maximum retransmission time, if the following conditions are fulfilled:\n-\tthe destination user pertains to the PLMN of the SMS-GMSC; and\n-\tif an SMS Router is used for MT SMS sent to destination users pertaining to the PLMN of the SMS-GMSC, the SMS Router is known to support the Alert Service Centre procedure specified in clause 6.2.3.\nThe SMS-GMSC shall include its E.164 number in the SMS-GMSC address in the request if it also includes the Maximum-Retransmission-Time AVP.\nWhen the SMS router has received a MT Forward Short Message from the SMS-GMSC and the SMS Router has selected the MME or the SGSN for delivery, the SMS Router shall forward it to the MME or the SGSN.\nIf the MT Forward Short Message Request includes the Maximum-Retransmission-Time AVP, the SMS Router shall store the SMS-GMSC Diameter Identity (received in the Origin-Host and Origin-Realm AVPs) and the SMS-GMSC address received in the request and replace them by its SMS Router Diameter Identity (in the Origin-Host and Origin-Realm AVPs) and SMS Router address (E.164 number) when forwarding the request to the MME or SGSN.\nWhen a MT Forward Short Message Answer is received from the MME, the SMS Router shall forward it to the SMS-GMSC.\nIf the MT Forward Short Message Answer includes the Requested-Retransmission-Time AVP, the SMS Router shall include a User Identifier Alert AVP when forwarding the answer to the SMS-GMSC.\nNOTE:\tThe User Identifier Alert is further used in the Alert Service Centre procedure specified in clause 6.2.3 to enable the SMS-GMSC to identify and retransmit all pending MT SMS messages towards the destination user.\n",
                            "figures_meta_data": [],
                            "tables": [
                                {
                                    "description": "Table 6.2.2.1/1: MT Forward Short Message Request",
                                    "table number": 19,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 6.2.2.1/2: MT Forward Short Message Answer",
                                    "table number": 20,
                                    "summary": "",
                                    "name": ""
                                }
                            ]
                        },
                        {
                            "title": "6.2.3\tAlert Service Centre procedure",
                            "text_content": "This procedure shall be used between the MME or SGSN and the SMS-GMSC, possibly via an SMS Router, to indicate that a UE, for which one or more MT SMS have been requested to be retransmitted at a later time, is now available for MT SMS delivery or that it has moved under the coverage of another MME or SGSN. This procedure is used according to the call flows described in 3GPP TS 23.040 [2] clause 10.\nTable 6.2.3.1-1 specifies the involved information elements for the request.\nTable 6.2.3.1-2 specifies the involved information elements for the answer.\nThis procedure is mapped to the commands Alert-Service-Centre-Request/Answer (ALR/ALA) in the Diameter application specified in clause 5.3.2.\nTable 6.2.3.1-1: Alert Service Centre Request\n\nTable 6.2.3.1-2: Alert Service Centre Answer\n\nThe MME or SGSN shall make use of this procedure to alert the SMS-GMSC when the UE, for which one or more MT SMS have been requested to be retransmitted at a later time, becomes available for MT SMS delivery or moves under the coverage of another MME or SGSN prior to the requested SM retransmission time.\nThe MME or SGSN shall delete the stored SMS-GMSC Diameter Identity (i.e. Origin-Host and Origin-Realm) and address after the Alert Service Centre procedure is completed.\nWhen receiving an Alert Service Centre request, the SMS-GMSC shall retransmit pending MT SMS(s) for the destination user identified by the User Identifier Alert, to the same serving node if the SMS-GMSC Alert Event indicates that the UE is available for MT SMS, or to the new serving node if the SMS-GMSC Alert Event indicates that the UE has moved under the coverage of another MME or SGSN. In the latter case, if no New Serving Node Identity is received in the Alert Service Centre request, the SMS-GMSC shall initiate a Send Routing Info for SM procedure to retrieve the new serving node 's address from the HSS.\nWhen receiving an Alert Service Centre request, the SMS-Router shall replace the IMSI received in the User Identifier Alert by the User Identifier Alert previously sent in the MT Forward Short Message Answer, and forward that request to the SMS-GMSC.\n",
                            "figures_meta_data": [],
                            "tables": [
                                {
                                    "description": "Table 6.2.3.1-1: Alert Service Centre Request",
                                    "table number": 21,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 6.2.3.1-2: Alert Service Centre Answer",
                                    "table number": 22,
                                    "summary": "",
                                    "name": ""
                                }
                            ]
                        }
                    ]
                },
                {
                    "title": "6.3\tProtocol specification",
                    "description": "",
                    "summary": "",
                    "text_content": "",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": [
                        {
                            "title": "6.3.1\tRouting considerations",
                            "text_content": "This clause specifies the use of the Diameter routing AVPs Destination-Realm and Destination-Host over the SGd or Gdd interfaces for the Diameter command requests from the MME or from the SGSN (i.e. for the MO forward SM procedure).\nAlso, this clause specifies the use of the Diameter routing AVPs Destination-Realm and Destination-Host over the T4 interface for the Diameter command requests from the SMS-IWMSC (i.e. for the MO forward SM procedure).\nThis clause also applies for the Diameter command MO forward SM request from the IP-SM-GW towards an SMS-SC/SMS-IWMSC, including the case where the MO forward SM request occurs in the retry context of SMS for IMS UE to IMS UE without MSISDN (see 3GPP TS 23.204 [17]). MME or SGSN is replaced by IP-SM-GW in the text of this clause.\nIf the MME or the SGSN, from the SMS-SC E.164 number received from the UE, can obtain the address/name of the SMS-IWMSC and the associated home network domain name (e.g. by local configuration), both the Destination-Realm and Destination-Host AVPs shall be present in the request.\nIf the MME or the SGSN, from the SMS-SC E.164 number received from the UE, can only obtain the MCC/MNC values of the PLMN to which the SMS-SC belongs, the MME or the SGSN shall use them to build the MCC/MNC based network domain as described in clause 19.2 of 3GPP TS 23.003 [16] and include it in the Destination-Realm AVP of the request. The request shall then be routed to the next Diameter node.\nIf the MME or the SGSN cannot obtain the MCC/MNC values from the SMS-SC E.164 number, the MME or the SGSN shall forward the request to a Diameter node within the same PLMN, the Destination Realm content being left to the PLMN operator choice. Then:\n-\tif a Diameter node in the routing path insides the PLMN of the MME can obtain the MCC/MNC values of the PLMN to which the SMS-SC belongs,\n-\tit shall use them to build the MCC/MNC based network domain as described in clause 19.2 of 3GPP TS 23.003 [16] and include it in the Destination-Realm AVP of the request. The request shall then be routed to the next Diameter node.\nIf the MCC/MNC values of the PLMN to which the SMS-SC belongs cannot be obtained in the PLMN of the MME or the SGSN, the request shall be replaced in the PLMN of the MME or the SGSN by an equivalent request routed through a MAP interface (e.g. via an IWF).\nNOTE 1:\tThe inter PLMN routing principle is to reuse the routing based on a MCC/MNC based domain name as used by other Diameter applications such as S6a/d. It is assumed that obtaining the relevant MCC/MNC values from the E.164 number of the SMS-SC can be achieved in the PLMN which the MME belongs to. Otherwise a MAP based routing is used. This routing principle may be completed with other routing solutions in the future.\nConsequently, the Destination-Host AVP is declared as optional in the ABNF for all requests initiated by an MME or a SGSN.\nThe SMS-IWMSC shall be able to obtain the address/name of the MTC-IWF and the associated home network domain name from the destination SME address included in the MO TPDU (e.g. by local configuration); therefore both the Destination-Realm and Destination-Host AVPs shall be present in the request.\nThis clause specifies the use of the Diameter routing AVPs Destination-Realm and Destination-Host for the Diameter command requests from the SMS-GMSC or the SMS Router (i.e. for the MT forward SM procedure).\n-\tif the SMS-GMSC has received the Diameter address/name of an MME or of the SGSN in the answer to its interrogation to the HSS/HLR for retrieving routing information and if it selects this serving node, it shall use it to populate the Destination-Realm and Destination-Host AVPs.\n-\tIf the SMS Router has received the Diameter address/name of the MME or of the SGSN in the answer to its interrogation to the HSS/HLR for retrieving routing information and if it selects this serving node, it shall use this Diameter address/name to populate the Destination-Realm and Destination-Host AVPs.\nConsequently, the Destination-Host AVP is declared as mandatory in the ABNF for all requests initiated by an SMS-GMSC or a SMS router.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "6.3.2\tCommands",
                            "text_content": "This clause defines the Command code values and related ABNF for each command described for the SGd interface.\nThis clause defines the Command-Code values for the SGd interface application as allocated by IANA in the IETF RFC 5516 [8], the SGd interface application being used over the SGd and Gdd interfaces. The Alert Service Centre procedure used over the SGd and Gdd interfaces also uses commands of the S6c interface application.\nEvery command is defined by means of the ABNF syntax IETF RFC 2234 [6], according to the Command Code Format (CCF) specification defined in IETF RFC 6733 [20]. In the case, the definition and use of an AVP is not specified in this document, the guidelines in IETF RFC 6733 [20] shall apply.\nThe Vendor-Specific-Application-Id AVP shall not be included in any command sent by Diameter nodes supporting applications defined in this specification. If the Vendor-Specific-Application-Id AVP is received in any of the commands defined in this specification, it shall be ignored by the receiving node.\nNOTE:\tThe Vendor-Specific-Application-Id is included as an optional AVP in all Command Code Format specifications defined in this specification in order to ensure potential interoperability issues with Diameter agents non-compliant with IETF RFC 6733 [20].\nThe following Command Codes are defined in this specification:\nTable 6.3.2.2/1: Command-Code values for SGd/Gdd\n\nFor these commands, the Application-ID field shall be set to 16777313 (application identifier of the SGd interface application, allocated by IANA), except for the ALR/ALA commands for which the Application-ID field shall be set to 16777312 (application identifier of the S6c interface application, allocated by IANA).\nThe MO-Forward-Short-Message-Request (OFR) command, indicated by the Command-Code field set to 8388645 and the \"R\" bit set in the Command Flags field, is sent from the MME / SGSN to the SMS-IWMSC and it is also sent from the SMS-IWMSC to the MTC-IWF.\nMessage Format\n< MO-Forward-Short-Message-Request > ::=\t< Diameter Header: 8388645, REQ, PXY, 16777313 >\n< Session-Id >\n[ DRMP ]\n[ Vendor-Specific-Application-Id ]\n{ Auth-Session-State }\n{ Origin-Host }\n{ Origin-Realm }\n[ Destination-Host ]\n{ Destination-Realm }\n{ SC-Address }\n[ OFR-Flags ]\n*[ Supported-Features ]\n{ User-Identifier }\n[ EPS-Location-Information ]\n{ SM-RP-UI }\n[ SMSMI-Correlation-ID ]\n[ SM-Delivery-Outcome ]\n*[ AVP ]\n*[ Proxy-Info ]\n*[ Route-Record ]\nThe MO-Forward-Short-Message-Answer Command (OFA) command, indicated by the Command-Code field set to 8388645 and the 'R' bit cleared in the Command Flags field, is sent from the SMS-IWMSC to the MME / SGSN and it is also sent from the MTC-IWF to the SMS-IWMSC.\nMessage Format\n< MO-Forward-Short-Message-Answer > ::=\t< Diameter Header: 8388645, PXY, 16777313 >\n< Session-Id >\n[ DRMP ]\n[ Vendor-Specific-Application-Id ]\n[ Result-Code ]\n[ Experimental-Result ]\n{ Auth-Session-State }\n{ Origin-Host }\n{ Origin-Realm }\n*[ Supported-Features ]\n[ SM-Delivery-Failure-Cause ]\n[ SM-RP-UI ]\n[ External-Identifier ]\n*[ AVP ]\n[ Failed-AVP ]\n*[ Proxy-Info ]\n*[ Route-Record ]\nThe MT-Forward-Short-Message-Request (TFR) command, indicated by the Command-Code field set to 8388646 and the \"R\" bit set in the Command Flags field, is sent from the SMS-GMSC to the MME / SGSN (transiting an SMS Router, if present).\nMessage Format\n< MT-Forward-Short-Message-Request > ::=\t< Diameter Header: 8388646, REQ, PXY, 16777313 >\n< Session-Id >\n[ DRMP ]\n[ Vendor-Specific-Application-Id ]\n{ Auth-Session-State }\n{ Origin-Host }\n{ Origin-Realm }\n{ Destination-Host }\n{ Destination-Realm }\n{ User-Name }\n*[ Supported-Features ]\n[ SMSMI-Correlation-ID ]\n{ SC-Address }\n{ SM-RP-UI }\n[ MME-Number-for-MT-SMS ]\n[ SGSN-Number ]\n[ TFR-Flags ]\n[ SM-Delivery-Timer ]\n[ SM-Delivery-Start-Time ]\n[ Maximum-Retransmission-Time ]\n[ SMS-GMSC-Address ]\n*[ AVP ]\n*[ Proxy-Info ]\n*[ Route-Record ]\nThe MT-Forward-Short-Message-Answer Command (TFA) command, indicated by the Command-Code field set to 8388646 and the 'R' bit cleared in the Command Flags field, is sent from the MME / SGSN to the SMS-GMSC (transiting an SMS Router, if present).\nMessage Format\n< MT-Forward-Short-Message-Answer > ::=\t< Diameter Header: 8388646, PXY, 16777313 >\n< Session-Id >\n[ DRMP ]\n[ Vendor-Specific-Application-Id ]\n[ Result-Code ]\n[ Experimental-Result ]\n{ Auth-Session-State }\n{ Origin-Host }\n{ Origin-Realm }\n*[ Supported-Features ]\n[ Absent-User-Diagnostic-SM ]\n[ SM-Delivery-Failure-Cause ]\n[ SM-RP-UI ]\n[ Requested-Retransmission-Time ]\n[ User-Identifier ]\n[ EPS-Location-Information ]\n*[ AVP ]\n[ Failed-AVP ]\n*[ Proxy-Info ]\n*[ Route-Record ]\n\n",
                            "figures_meta_data": [],
                            "tables": [
                                {
                                    "description": "Table 6.3.2.2/1: Command-Code values for SGd/Gdd",
                                    "table number": 23,
                                    "summary": "",
                                    "name": ""
                                }
                            ]
                        },
                        {
                            "title": "6.3.3\tAVPs",
                            "text_content": "The following table specifies the Diameter AVPs defined for the SGd/Gdd interface protocol, their AVP Code values, types, possible flag values and whether or not the AVP may be encrypted. The Vendor-ID header of all AVPs defined in this specification shall be set to 3GPP (10415).\nFor all AVPs which contain bit masks and are of the type Unsigned32, e.g., TFR-Flags, bit 0 shall be the least significant bit. For example, to get the value of bit 0, a bit mask of 0x0001 should be used.\nTable 6.3.3.1/1: SGd/Gdd specific Diameter AVPs\n\nThe following table specifies the Diameter AVPs re-used from existing Diameter Applications, including a reference to their respective specifications and when needed, a short description of their use within this interface.\nAny other AVPs from existing Diameter Applications, except for the AVPs from Diameter base protocol specified in IETF RFC 6733 [20], do not need to be supported. The AVPs from Diameter base protocol specified in IETF RFC 6733 [20] are not included in table 6.3.3.1/2, but they may be re-used for this interface.\nTable 6.3.3.1/2: SGd/Gdd re-used Diameter AVPs\n\nThe SC-Address AVP is of type OctetString and it shall contain the E.164 number of the SMS-SC or MTC-IWF, in international number format as described in ITU-T Recommendation E.164 [13] and encoded as a TBCD-string. See 3GPP TS 29.002 [9] for encoding of TBCD-strings. This AVP shall not include leading indicators for the nature of address and the numbering plan; it shall contain only the TBCD-encoded digits of the address.\nThe SM-RP-UI is of type OctetString and it shall contain a short message transfer protocol data unit (TPDU) which is defined in 3GPP TS 23.040 [3] and represents the user data field carried by the short message service relay sub-layer protocol. Its maximum length is of 200 octets.\nThe TFR-Flags AVP is of type Unsigned32 and it shall contain a bit mask. The meaning of the bits shall be as defined in table 6.3.3.4/1:\nTable 6.3.3.4/1: TFR-Flags\n\nThe SM-Delivery-Failure-Cause AVP is of type Grouped. It shall contain information about the cause of the failure of a SM delivery with an optional Diagnostic information.\nThe AVP format shall conform to:\nSM-Delivery-Failure-Cause ::= <AVP header: 3303 10415>\n{ SM-Enumerated-Delivery-Failure-Cause }\n[ SM-Diagnostic-Info ]\n*[ AVP ]\nThe SM-Enumerated-Delivery-Failure-Cause AVP is of type enumerated and it shall contain the cause of the failure of a SM delivery. The following values are defined:\nMEMORY_CAPACITY_EXCEEDED  (0),\nEQUIPMENT_PROTOCOL_ERROR  (1),\nEQUIPMENT_NOT_SM-EQUIPPED  (2),\nUNKNOWN_SERVICE_CENTRE  (3),\nSC-CONGESTION  (4),\nINVALID_SME-ADDRESS  (5),\nUSER_NOT_SC-USER  (6).\nNOTE:\tThe values of the SM- Enumerated-Delivery-Failure-Cause AVP correspond to the ones for the SM-EnumeratedDeliveryFailureCause parameter in MAP as described in 3GPP TS 29.002[9].\nThe SM-Diagnostic-Info AVP is of type OctetString and it shall contain a complementary information associated to the SM Delivery Failure cause.\nThe syntax of this AVP is defined in 3GPP TS 29.229 [5]. For this release, the Feature-List-ID AVP value shall be set to 1.\nThe syntax of this AVP is defined in 3GPP TS 29.229 [5]. A null value indicates that there is no feature used by the application.\nNOTE:\tThere is no feature defined for this release.\nThe SM-Delivery-Timer is of type Integer and it shall contain the value in seconds of the timer for SM Delivery.\nThe SM-Delivery-Start-Time is of type Time and in shall contain the timestamp (in UTC) at which the SM Delivery Supervision Timer was started.\nThe OFR-Flags AVP is of type Unsigned32 and it shall contain a bit mask. The meaning of the bits shall be as defined in table 6.3.3.12/1:\nTable 6.3.3.12/1: OFR-Flags\n\nThe SMSMI-Correlation-ID AVP is of type Grouped. It shall contain information identities used in the context of MSISDN-less SMS delivery in IMS (see 3GPP TS 23.204 [17]).\nThe AVP format shall conform to:\nSMS-MI-Correlation-ID  ::= <AVP header: 3308 10415>\n[ HSS-ID ]\n[ Originating-SIP-URI ]\n[ Destination-SIP-URI ]\n*[ AVP ]\nThe HSS-ID AVP is of type UTF8String. The definition and the composition of the HSS-ID are specified in 3GPP TS 23.003 [16].\nThe Originating-SIP-URI AVP is of type UTF8String. It shall contain the Public identity of the IMS UE without MSISDN which is the sender of a short message, in the context of MSISDN-less SMS delivery in IMS (see 3GPP TS 23.204 [17]).\nThe Destination-SIP-URI AVP is of type UTF8String. It shall contain the Public identity of the IMS UE without MSISDN which is the recipient of a short message, in the context of MSISDN-less SMS delivery in IMS (see 3GPP TS 23.204 [17]).\nThe Maximum-Retransmission-Time is of type Time and in shall contain the maximum retransmission time (in UTC) until which the SMS-GMSC is capable to retransmit the MT Short Message.\nThe Requested-Retransmission-Time is of type Time and in shall contain the timestamp (in UTC) at which the SMS-GMSC is requested to retransmit the MT Short Message.\nThe SMS-GMSC-Address AVP is of type OctetString and it shall contain the E.164 number of the SMS-GMSC or SMS Router, in international number format as described in ITU-T Recommendation E.164 [13] and encoded as a TBCD-string. See 3GPP TS 29.002 [9] for encoding of TBCD-strings. This AVP shall not include leading indicators for the nature of address and the numbering plan; it shall contain only the TBCD-encoded digits of the address.\nThe DRMP AVP is of type Enumerated and it is defined in IETF RFC 7944 [19]. This AVP allows the MME, the SGSN, the SMS-IWMSC, the SMS-GMSC, the SMS Router and the IP-SM-GW to indicate the relative priority of Diameter messages. The DRMP AVP may be used to set the DSCP marking for transport of the associated Diameter message.\n",
                            "figures_meta_data": [],
                            "tables": [
                                {
                                    "description": "Table 6.3.3.1/1: SGd/Gdd specific Diameter AVPs",
                                    "table number": 24,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 6.3.3.1/2: SGd/Gdd re-used Diameter AVPs",
                                    "table number": 25,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 6.3.3.4/1: TFR-Flags",
                                    "table number": 26,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 6.3.3.12/1: OFR-Flags",
                                    "table number": 27,
                                    "summary": "",
                                    "name": ""
                                }
                            ]
                        }
                    ]
                }
            ]
        },
        {
            "title": "7\tResult Codes and Experimental-Result values",
            "description": "",
            "summary": "",
            "tables": [],
            "figures_meta_data": [],
            "subsections": [
                {
                    "title": "7.1\tGeneral",
                    "description": "",
                    "summary": "",
                    "text_content": "This clause defines result code values that shall be supported by all Diameter implementations that conform to this specification.\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "7.2\tSuccess",
                    "description": "",
                    "summary": "",
                    "text_content": "Result codes that fall within the Success category shall be used to inform a peer that a request has been successfully completed. The Result-Code AVP values defined in Diameter base protocol specified in IETF RFC 6733 [20] shall be applied.\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "7.3\tPermanent Failures",
                    "description": "",
                    "summary": "",
                    "text_content": "",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": [
                        {
                            "title": "7.3.1\tGeneral",
                            "text_content": "Errors that fall within the Permanent Failures category shall be used to inform the peer that the request has failed, and should not be attempted again. The Result-Code AVP values defined in Diameter base protocol specified in IETF RFC 6733 [20] shall be applied. When one of the result codes defined here is included in a response, it shall be inside an Experimental-Result AVP and the Result-Code AVP shall be absent.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "7.3.2\tDIAMETER_ERROR_USER_UNKNOWN (5001)",
                            "text_content": "This result code shall be sent by the MME over the SGd interface or by the SGSN over the Gdd interface to indicate that the user identified by the IMSI is unknown.\nThis result code shall be sent by the SMS-IWMSC over the SGd interface to indicate that the user identified by the MSISDN is unknown.\nThis result code shall be sent by the HSS or the SMS Router over the S6c interface to indicate that the user identified by the MSISDN is unknown.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "7.3.3\tDIAMETER_ERROR_ABSENT_USER (5550)",
                            "text_content": "This result code shall be sent by the MME over the SGd interface or by the SGSN over the Gdd interface to indicate that the UE is not reachable.\nThis result code shall be sent by the HSS or the SMS Router over the S6c interface to indicate that the UE is not reachable.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "7.3.4\tDIAMETER_ERROR_USER_BUSY_FOR_MT_SMS (5551)",
                            "text_content": "This result code shall be sent by the MME or the SGSN when the user is busy for MT SMS.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "7.3.5\tDIAMETER_ERROR_FACILITY_NOT_SUPPORTED (5552)",
                            "text_content": "This result code shall be sent to indicate a requested facility is not supported.\nNOTE: This code corresponds to the Facility Not Supported MAP error and may be used by an IWF.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "7.3.6\tDIAMETER_ERROR_ILLEGAL_USER (5553)",
                            "text_content": "This result code shall be sent by the MME or the SGSN to indicate that the delivery of the mobile terminated short message failed because the mobile station failed authentication.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "7.3.7\tDIAMETER_ERROR_ILLEGAL_EQUIPMENT (5554)",
                            "text_content": "This result code shall be sent by the MME or the SGSN to indicate that the delivery of the mobile terminated short message failed because an IMEI check failed, i.e. the IMEI was prohibited-listed or not permitted-listed.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "7.3.8\tDIAMETER_ERROR_SM_DELIVERY_FAILURE (5555)",
                            "text_content": "This result code shall be sent by the MME or the SGSN or the SMS-IWMSC to indicate that the delivery of the mobile terminated short message failed.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "7.3.9\tDIAMETER_ERROR_SERVICE_NOT_SUBSCRIBED (5556)",
                            "text_content": "This result code shall be sent by the HSS or the SMS Router over the S6c interface to indicate that the MT SMS Teleservice is not part of the subscription.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "7.3.10\tDIAMETER_ERROR_SERVICE_BARRED (5557)",
                            "text_content": "This result code shall be sent by the HSS or the SMS Router over the S6c interface to indicate that the MT SMS Teleservice is barred.\nThis result code shall be sent by the MME to indicate that the delivery of the mobile terminated short message failed because of the barring of the SMS service.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "7.3.11\tDIAMETER_ERROR_MWD_LIST_FULL (5558)",
                            "text_content": "This result code shall be sent by the HSS over the S6c interface to indicate that the Message Waiting List is full.\n",
                            "figures_meta_data": [],
                            "tables": []
                        }
                    ]
                },
                {
                    "title": "7.4\tTransient Failures",
                    "description": "",
                    "summary": "",
                    "text_content": "",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": [
                        {
                            "title": "7.4.1\tGeneral",
                            "text_content": "Result codes that fall within the transient failures category shall be used to inform a peer that the request could not be satisfied at the time it was received, but may be able to satisfy the request in the future. The Result-Code AVP values defined in Diameter base protocol specified in IETF RFC 6733 [20] shall be applied.\n",
                            "figures_meta_data": [],
                            "tables": []
                        }
                    ]
                }
            ]
        },
        {
            "title": "A.1\tGeneral",
            "description": "IETF RFC 7944 [19] specifies a Diameter routing message priority mechanism that allows Diameter nodes to indicate the relative priority of Diameter messages. With this information, other Diameter nodes may leverage the relative priority of Diameter messages into routing, resource allocation, set the DSCP marking for transport of the associated Diameter message, and also abatement decisions when overload control is applied.\n",
            "summary": "",
            "tables": [],
            "figures_meta_data": [],
            "subsections": []
        },
        {
            "title": "A.2\tS6c, SGd, Gdd interfaces",
            "description": "The Diameter message priority mechanism is an optional feature which may apply on one or several of the S6c,SGd,Gdd interfaces.\nA 3GPP functional entity supporting the Diameter message priority mechanism over one or several of the S6c,SGd,Gdd interfaces shall comply with IETF RFC 7944 [19].\nA 3GPP functional entity sending a request shall determine the required priority according to its policies. When priority is required, it shall include the DRMP AVP indicating the required priority level in the request it sends, and shall prioritise the request according to the required priority level.\nWhen a 3GPP functional entity receives the corresponding response, it shall prioritise the received response according to the priority level received within the DRMP AVP if present in the response, otherwise according to the priority level of the corresponding request.\nWhen a 3GPP functional entity receives a request, it shall handle the request according to the received DRMP AVP priority level. For the response, it may modify the priority level received in the DRMP AVP according to its policies and shall handle the response according to the required priority level. If the required priority level is different from the priority level received in the request, it shall include the DRMP AVP in the response.\nThe decisions of the 3GPP functional entity for a required priority and for the priority level value are implementation specific.\nIf:\n-\ta 3GPP functional entity supports using the Diameter message priority mechanism for DSCP marking purposes,\n-\tthe transport network utilizes DSCP marking, and\n-\tmessage-dependant DSCP marking is possible for the protocol stack transporting Diameter,\nthen the 3GPP functional entity shall set the DSCP marking for transport of the request or response according to the required priority level.\nDiameter requests related to high priority traffic shall contain a DRMP AVP with a high priority of which the level value is operator dependent.\n\n",
            "summary": "",
            "tables": [
                {
                    "description": "",
                    "table number": 28,
                    "summary": "",
                    "name": ""
                }
            ],
            "figures_meta_data": [],
            "subsections": []
        }
    ]
}