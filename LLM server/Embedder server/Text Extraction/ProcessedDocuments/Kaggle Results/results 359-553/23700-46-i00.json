{
    "document_name": "23700-46-i00.docx",
    "content": [
        {
            "title": "Foreword",
            "description": "This Technical Report has been produced by the 3rd Generation Partnership Project (3GPP).\nThe contents of the present document are subject to continuing work within the TSG and may change following formal TSG approval. Should the TSG modify the contents of the present document, it will be re-released by the TSG with an identifying change of release date and an increase in version number as follows:\nVersion x.y.z\nwhere:\nx\tthe first digit:\n1\tpresented to TSG for information;\n2\tpresented to TSG for approval;\n3\tor greater indicates TSG approved document under change control.\ny\tthe second digit is incremented for all changes of substance, i.e. technical enhancements, corrections, updates, etc.\nz\tthe third digit is incremented when editorial only changes have been incorporated in the document.\nIn the present document, modal verbs have the following meanings:\nshall\t\tindicates a mandatory requirement to do something\nshall not\tindicates an interdiction (prohibition) to do something\nThe constructions \"shall\" and \"shall not\" are confined to the context of normative provisions, and do not appear in Technical Reports.\nThe constructions \"must\" and \"must not\" are not used as substitutes for \"shall\" and \"shall not\". Their use is avoided insofar as possible, and they are not used in a normative context except in a direct citation from an external, referenced, non-3GPP document, or so as to maintain continuity of style when extending or modifying the provisions of such a referenced document.\nshould\t\tindicates a recommendation to do something\nshould not\tindicates a recommendation not to do something\nmay\t\tindicates permission to do something\nneed not\tindicates permission not to do something\nThe construction \"may not\" is ambiguous and is not used in normative elements. The unambiguous constructions \"might not\" or \"shall not\" are used instead, depending upon the meaning intended.\ncan\t\tindicates that something is possible\ncannot\t\tindicates that something is impossible\nThe constructions \"can\" and \"cannot\" are not substitutes for \"may\" and \"need not\".\nwill\t\tindicates that something is certain or expected to happen as a result of action taken by an agency the behaviour of which is outside the scope of the present document\nwill not\t\tindicates that something is certain or expected not to happen as a result of action taken by an agency the behaviour of which is outside the scope of the present document\nmight\tindicates a likelihood that something will happen as a result of action taken by some agency the behaviour of which is outside the scope of the present document\nmight not\tindicates a likelihood that something will not happen as a result of action taken by some agency the behaviour of which is outside the scope of the present document\nIn addition:\nis\t(or any other verb in the indicative mood) indicates a statement of fact\nis not\t(or any other negative verb in the indicative mood) indicates a statement of fact\nThe constructions \"is\" and \"is not\" do not indicate requirements.\n",
            "summary": "",
            "tables": [],
            "figures_meta_data": [],
            "subsections": []
        },
        {
            "title": "1\tScope",
            "description": "The objective of this Technical Report is to study whether and how to enable 3GPP support for DetNet such that a mapping is provided between the central DetNet controller entity (as defined in IETF) and the 5G system. Mapping involves translation of DetNet traffic profile and flow specification to 5GS QoS parameters and TSCAI. The study also considers which information needs to be exposed from the 5G system to the DetNet controller.\nThe study scope assumes the following:\n-\tOnly IP based DetNet is in the scope of the work; MPLS based DetNet is out of scope.\n-\tDetNet over Ethernet TSN is not in the scope of the work as it can be supported based on existing 3GPP and IETF standards.\n-\tIt is out of scope to support for edge DetNet node functions in the 3GPP network.\n",
            "summary": "",
            "tables": [],
            "figures_meta_data": [],
            "subsections": []
        },
        {
            "title": "2\tReferences",
            "description": "The following documents contain provisions which, through reference in this text, constitute provisions of the present document.\n-\tReferences are either specific (identified by date of publication, edition number, version number, etc.) or non-specific.\n-\tFor a specific reference, subsequent revisions do not apply.\n-\tFor a non-specific reference, the latest version applies. In the case of a reference to a 3GPP document (including a GSM document), a non-specific reference implicitly refers to the latest version of that document in the same Release as the present document.\n[1]\t3GPP TR 21.905: \"Vocabulary for 3GPP Specifications\".\n[2]\tIETF RFC 8655: \"Deterministic Networking Architecture\".\n[3]\tIETF RFC 8939: \"Deterministic Networking (DetNet) Data Plane: IP\".\n[4]\tIETF RFC 9016: \"Flow and Service Information Model for Deterministic Networking (DetNet)\".\n[5]\tdraft-ietf-detnet-yang: \"Deterministic Networking (DetNet) YANG Model\".\n[6]\tIETF RFC 8344: \"A YANG Data Model for IP Management\".\n[7]\tIETF RFC 8343: \"A YANG Data Model for Interface Management\".\n[8]\tIETF RFC 6241: \"Network Configuration Protocol (NETCONF) \".\n[9]\tIETF RFC 8040: \"RESTCONF Protocol\".\n[10]\tIETF RFC 6021: \"Common YANG Data Types\".\n[11]\tIETF RFC 8349: \"A YANG Data Model for Routing Management (NMDA Version)\".\n[12]\t3GPP TS 23.501: \"System architecture for the 5G System (5GS); Stage 2\".\n[13]\t3GPP TS 23.502: \"Procedures for the 5G System; Stage 2\".\n[14]\t3GPP TS 23.503: \"Policy and charging control framework for the 5G System (5GS); Stage 2\".\n[15]\t3GPP TS 29.514: \"5G System; Policy Authorization Service; Stage 3\".\n",
            "summary": "",
            "tables": [],
            "figures_meta_data": [],
            "subsections": []
        },
        {
            "title": "3\tDefinitions of terms and abbreviations",
            "description": "",
            "summary": "",
            "tables": [],
            "figures_meta_data": [],
            "subsections": [
                {
                    "title": "3.1\tTerms",
                    "description": "",
                    "summary": "",
                    "text_content": "For the purposes of the present document, the terms given in TR 21.905 [1] apply.\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "3.2\tAbbreviations",
                    "description": "",
                    "summary": "",
                    "text_content": "For the purposes of the present document, the abbreviations given in TR 21.905 [1] and the following apply. An abbreviation defined in the present document takes precedence over the definition of the same abbreviation, if any, in TR 21.905 [1].\nDetNet\tDeterministic Networking\n\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                }
            ]
        },
        {
            "title": "4\tArchitecture Assumptions",
            "description": "The study has the following architecture assumptions:\n-\tDetNet may be used in combination with time synchronization mechanisms as defined in Rel-17 but does not require usage of these mechanisms.\n-\tSince synchronization mechanisms that can be used are out of the scope in IETF DetNet specifications, the time synchronization framework in Release 17 is not modified for this study.\n-\tExisting 3GPP routing mechanisms can be re-used for DetNet; no new routing function in the 3GPP system is to be defined.\n-\tThe existing filtering mechanisms can be re-used in the UE and in the UPF to identify the traffic for QoS differentiation.\n-\tIt is out of scope to extend 3GPP multicast mechanisms, but the existing multicast capabilities can be re-used for DetNet communications.\n-\tIP based DetNet traffic is carried in PDU Sessions of IP type.\n-\tThe mapping functionality for DetNet is realized in the TSCTSF.\n-\tThe solutions should reuse the functionality of the TSC framework defined in Release 17 where applicable.\n-\tThe study considers 5GS acting as a DetNet node in the DetNet domain. Use cases where the 5GS acts as a sub-network (see RFC 8655 [2] clause 4.1.2) are also possible but do not require additional 3GPP standardization. A special case where the 5GS can act as a sub-network is when the 5GS acts as a TSN network, which is already supported based on 3GPP Release 16-17.\n-\tThe study considers the DetNet forwarding sub-layer related functions that are applicable to the 5GS. For the IP case according to RFC 8939 [3] clause 1, no service sub-layer function needs to be defined.\n-\tThe granularity of the 5GS DetNet node is per UPF for each network instance.\n-\tThe solutions shall not have any 5G AN and UE impacts\nThe 5G System is extended to support the following:\n-\tThe UE is part of the 5GS logical DetNet Node, thus is not a DetNet Node or End System on its own\nThe reference architecture is shown as below:\nEditor's note:\tIt is FFS whether the NEF can be used between the DetNet controller and the TSCTSF.\nEditor's note:\tThe protocol interactions between TSCTSF and the DetNet controller are FFS.\n",
            "summary": "",
            "tables": [],
            "figures_meta_data": [],
            "subsections": []
        },
        {
            "title": "5\tKey Issues",
            "description": "",
            "summary": "",
            "tables": [],
            "figures_meta_data": [],
            "subsections": [
                {
                    "title": "5.1\tKey Issue #1: 5GS DetNet node reporting",
                    "description": "",
                    "summary": "",
                    "text_content": "",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": [
                        {
                            "title": "5.1.1\tDescription",
                            "text_content": "Clause 4.8 of IETF RFC 8655 [2] describes the Resources, Capabilities, and Adjacencies which may be reported by DetNet node to DetNet CPF (Controller Plane Function).\nFor this Key Issue, the following areas should be studied:\n-\twhich information the 5GS needs to report;\n-\thow the 5GS collects the information to report.\nThe solution should clarify whether the NEF could be deployed between the TSCTSF and the DetNet controller.\n",
                            "figures_meta_data": [],
                            "tables": []
                        }
                    ]
                },
                {
                    "title": "5.2\tKey Issue #2: Provisioning DetNet configuration from the DetNet controller to 5GS",
                    "description": "",
                    "summary": "",
                    "text_content": "",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": [
                        {
                            "title": "5.2.1\tDescription",
                            "text_content": "A DetNet controller may provide DetNet configuration as defined in ietf-detnet YANG module to the 5GS acting as a DetNet node. This key issue will study how to map the DetNet configuration.\nThe DetNet controller communicates with the 5G system through TSCTSF. DetNet Flow-Related Parameters may be provided by the DetNet controller as defined in draft-ietf-detnet-yang [5]. The TSCTSF should map the parameters provided by the DetNet controller into 5G QoS parameters or other parameters e.g. TSCAI to configure 5GS flows for the DetNet traffic.\nThis KI will address:\n-\tWhich parameters provided by the DetNet controller should be mapped into which 5G parameters.\n-\tHow the 5GS finds the PDU Sessions corresponding to the given DetNet configuration.\n-\tWhat mechanisms are used in 5GS to configure the system according to the configuration provided by the DetNet controller.\nThe solution should clarify whether the NEF could be deployed between the TSCTSF and the DetNet controller.\n",
                            "figures_meta_data": [],
                            "tables": []
                        }
                    ]
                }
            ]
        },
        {
            "title": "6\tSolutions",
            "description": "",
            "summary": "",
            "tables": [],
            "figures_meta_data": [],
            "subsections": [
                {
                    "title": "6.1\tSolution #1 for Key Issue #1: Node and neighbour information reporting to DetNet controller",
                    "description": "",
                    "summary": "",
                    "text_content": "",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": [
                        {
                            "title": "6.1.1\tIntroduction",
                            "text_content": "The 5GS may report information about the node and its interfaces which correspond to the PDU Sessions (device side) and UPF interfaces (network side). The reporting from the TSCTSF to the DetNet controller also referred to as CPF, Controller Plane Function) is carried out using IETF protocols.\nThe assumed architecture is shown in the figure below. On the device side, we typically have an end host as a DetNet system that makes use of the DetNet functionality. Note that the end host does not have to be DetNet aware.\nThe figure depicts the architecture for DetNet integration in a 5G system, showcasing the various components and their interconnections. It includes base stations (BTS), user equipment (UE), and scatterers, highlighting the importance of beamforming techniques to mitigate interference. The figure also illustrates the use of redundant paths for failover reliability.\nFigure 6.1.1-1: Architecture for DetNet integration of 5GS\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "6.1.2\tFunctional Description",
                            "text_content": "Information to report\nA DetNet node may report the following information. There can be multiple options regarding the detailed use of parameters, and the choice is up to the needs of the given implementation and deployment.\n-\tThe interfaces of the 5GS acting as a DetNet node can be reported based on the YANG model in RFC 8344 [6]. That model is in turn based on RFC 8343 [7]. The model includes for each interface\n-\tif-Index and name to identify the interface (see below for more details);\n-\ttype of the interface, which can identify whether it is a 3GPP interface on the device side or a fixed interface on the network side;\n-\tIP address and subnet;\n-\twhen available in the case of network side interfaces, list of neighbour IP address and link layer address (which could be based on ARP or Ipv6 neighbour discovery). In the case of device side interfaces the solution does not assume neighbours; only the hosts that are reachable with the assigned IP address(es) on the given PDU Session are reachable.\n-\tIn addition to the list of interfaces, the 5GS node itself also needs to be identified. There can be alternatives:\n-\tThe identification can be based on a YANG parameter of host type as defined in RFC 6021 [10] which can be either an IP address or a domain name. With this approach, the host is identified towards the DetNet controller, and the host identification is also provided together with the configuration.\n-\tAlternatively, the DetNet node may also be identified by the IP address terminating the interface on the TSCTSF towards the DetNet controller, but in that case that IP address needs to be different for each logical DetNet node which is on a per UPF granularity.\n-\tIt is useful for the DetNet controller to be able to identify that the 5GS node is a 3GPP defined 5GS system, rather than a router with fixed interfaces only. This knowledge can be useful for the DetNet controller to consider for the QoS that can be provided for a flow. There can be several alternatives how this is determined in the DetNet controller. The alternatives below may be used depending on the needs of the deployment; the specification does not need to mandate a given mechanism.\n-\tThe interface type (as mentioned above) may indicate a 3GPP interface. A node having a 3GPP interface can be considered a 5GS system for a DetNet controller.\n-\tIf the 5GS DetNet node is identified by a domain name, that domain name may include a substring that identify the node as a 5GS node.\n-\tThe DetNet controller may be pre-configured with a list or range of the node addresses or names that correspond to 5GS nodes.\nThe reporting from the 5GS node to the DetNet controller is performed using YANG data models that can be carried using Netconf RFC 6241 [8] or Restconf RFC 8040 [9]. Given that DetNet is an IETF solution that can be used for a number of link layer technologies, IETF protocols are assumed at the DetNet controller.\nThe solution does not require an NEF between the DetNet controller and the TSCTSF, since the DetNet controller is assumed to be trusted by the operator and can influence the QoS of the traffic flows. A NEF anyway cannot intercept the messages carried over Netconf or Restconf, which may be encrypted using TLS.\nCollection of the information\nThe information about 5GS acting as a DetNet node is provided to the TSCTSF within the 3GPP system as follows.\n-\tFor each PDU Session, the UPF generates a port number that is unique to the given UPF in the given network instance, similarly as in the Release 17 case. The port number is sent via the SMF and PCF to the TSCTSF. Similarly, a port number is generated for each interface on the UPF in the network side. The port number is used as the if-Index. Based on the if-Index, the name is generated, e.g. by using the if-Index as a string, possibly adding a substring prefix or postfix based on configuration. Note that the if-Index and the name of the interface contain essentially the same information, but both can be provided, since the name is used as the key in the YANG model, while if-Index is usually considered as the basis for interface management of IP nodes.\n-\tFor each PDU Session, the allocated IP address is sent to the TSCTSF as in Release 17. Similarly, for each network interface of the UPF, the IP address and subnet is sent to the TSCTSF.\nIn the case of interfaces that correspond to the PDU Sessions, the information about the port number as well as the IP address is delivered to the TSCTSF without requiring a PMIC container from the UE. It can be useful to be able to use DetNet even without having to require a PMIC, which makes the DetNet solution easier to deploy (but using a PMIC is not excluded, e.g. for time synch purposes). Based on configuration in the PCF for a given DNN, S-NSSAI, the TSCTSF is notified of the information.\nIn the case of interfaces that correspond to the network side interfaces of the UPF, the information is carried in the PMIC, together with the port number and user plane node ID that is sent outside of the PMIC. The PMIC in this case includes the IP address, the subnet, and the neighbour information (list of neighbour IP addresses when available).\nThe UPF also provides a user plane node ID. This can be constructed based on an IP address of the UPF, or also using the DNN, S-NSSAI or network instance known at the UPF, or it can be derived in other ways. The TSCTSF uses the user plane node ID provided by the UPF, and may optionally update it as needed (e.g. convert it to a domain name string, or map it to an IP address used for a network management protocol), to determine the host identification used for the given 5GS node.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "6.1.3\tProcedures",
                            "text_content": "The charts below show a high level view of the procedures. Only the relevant steps are discussed, unaffected steps are not shown in the figures and not discussed in the explanations.\nFor the device side ports of the 5GS node, the PDU Session Establishment procedure is used with the following extensions. (Similar extensions possible for the PDU Session Modification and PDU Session Release procedure.) The functionality is based on the Release 16-17 IioT functions.\nThe figure depicts the signalling at PDU Session Establishment in a 5G network, illustrating the various components involved in the process, such as the PDU (Physical to Logical) and the session establishment. The figure shows the PDU, which is the logical representation of the physical signal, and the session establishment, which is the process of establishing a session between the PDU and the network. The figure also includes the physical signal, which is the actual signal being transmitted, and the network, which is the infrastructure that supports the signal. The figure provides a clear and concise representation of the signalling process in a 5G network, allowing for better understanding and analysis of the system.\nFigure 6.1.3-1: Signalling at PDU Session Establishment\n1.\tIn the N4 Session Establishment Request, the SMF requests the UPF to provide port and node information. The SMF request may be based on configuration for the given DNN, S-NSSAI.\n2.\tThe UPF provides a port number that identifies the given port corresponding to the PDU Session in the logical 5GS node, and provides a user-plane node ID.\n3.\tAs part of the SMF initiated SM Policy Association Modification procedure, the SMF provides node and port information to the PCF, including the port number and the user plane node ID as well as the UE IP address. For this, based on configuration for the given DNN, S-NSSAI, the SMF is armed for reporting this information to the PCF.\n4.\tAs part of the SMF initiated SM Policy Association Modification procedure, the PCF reports the node and port information to the TSCTSF.\n5.\tThe TSCTSF provides information about the change in the 5GS node state, including information that is derived from the info received in the previous step. The detailed signalling for this step may depend on the actual IETF protocol used between the TSCTSF and the DetNet controller plane function (CPF). The update of the information may take place immediately based on a notification mechanism from the TSCTSF to the CPF, or it may take place when the CPF requests for the information.\nFor the network side ports of the 5GS node, as in Releases 16-17, the N4 Session Level Reporting Procedure from the UPF to the SMF is used followed by the SMF initiated SM Policy Association Modification procedure. The signalling is extended with the relevant new parameters as illustrated below.\nThe figure depicts a schematic representation of a node and port update system in a 5G network. It illustrates the process of updating node and port information, including the transmission of updates, the reception of updates, and the transmission of responses. The system uses a combination of radio frequency (RF) and optical signals to ensure reliable communication.\nFigure 6.1.3-2: Signalling for updating node and port information\n1.\tAs part of N4 reporting, the UPF provides a port and node information. This includes the port number that identifies the given port, and provides a user-plane node ID. The UPF also provides the IP address and subnet that is used on the given interface, the type of the interface, and if available, the IP addresses of the neighbours. This information can be included in the PMIC.\n2.\tAs part of the SMF initiated SM Policy Association Modification procedure, the SMF provides node and port information to the PCF, including the port number and the user plane node ID and other information provided by the UPF. For this, based on configuration for the given DNN, S-NSSAI, the SMF is armed for reporting this information to the PCF.\n3.\tAs part of the SMF initiated SM Policy Association Modification procedure, the PCF reports the node and port information to the TSCTSF.\n4.\tThe TSCTSF provides information about the change in the 5GS node state, including information that is derived from the info received in the previous step. The detailed signalling for this step may depend on the actual IETF protocol used between the TSCTSF and the DetNet controller plane function (CPF). The update of the information may take place immediately based on a notification mechanism from the TSCTSF to the CPF, or it may take place when the CPF requests for the information.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "6.1.4\tImpacts on existing entities and interfaces",
                            "text_content": "UPF:\n-\tProvide node and interface information, optionally neighbour information. Generation of PMIC.\nSMF:\n-\tConfiguration update to trigger signalling.\nTSCTSF:\n-\tMap collected information to IETF YANG models and provide to CPF.\n",
                            "figures_meta_data": [],
                            "tables": []
                        }
                    ]
                },
                {
                    "title": "6.2\tSolution #2 for Key Issue #1: Network function enhancement to support 5GS DetNet node reporting",
                    "description": "",
                    "summary": "",
                    "text_content": "",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": [
                        {
                            "title": "6.2.1\tIntroduction",
                            "text_content": "In 5G mobile network, in order to realize DetNet deterministic forwarding mechanism and ensure the certainty of wide area, the DetNet control plane requires the DetNet node to report relevant information to the DetNet control plane before issuing the strategy.\nIETF RFC 8655 [2] stipulates that DetNet nodes need to report corresponding information to DetNet control plane, including recognization of adjacent DetNet nodes.\nTherefore, as a DetNet node, 5GS system should also report corresponding information to the DetNet control plane to assist the DetNet control plane in making corresponding forwarding strategy.\nThis report puts forward the method for the DetNet control plane to obtain the topology of adjacent 5GS DetNet node, and defines the mechanism of 5GS as a DetNet node to the DetNet control plane. An enhanced architecture supporting the reporting of mobile network information to DetNet control layer is designed. The architecture enhances the functions of NEF, SMF, and UPF respectively, so as to support the information collection, subscription and reporting of DetNet capability.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "6.2.2\tFunctional Description",
                            "text_content": "The figure depicts an enhanced architecture and network function, showcasing a multi-layered design with key components such as core switches, optical line terminals (OLTs), and distributed nodes. Redundancy paths are depicted in dashed lines, ensuring failover reliability. The layered design aligns with SDN principles, emphasizing the importance of network function virtualization and network slicing.\nFigure 6.2.2-1: Enhanced architecture and network function\nAs shown in the figure1, the 3GPP exposure architecture is enhanced to support DetNet node reporting. Extend NEF function to support the capability exposure of DetNet node, and extend SMF, and UPF to support DetNet information reporting function. The related network functions are enhanced to support following features:\n-\tExtend NEF function to support the exposure of DetNet capability:\n-\tReceive the capability exposure subscription from DetNet control plane, and report related ability to it;\n-\tForward DetNet information reporting requirements to SMF based on DetNet controller subscription, including reporting contents, reporting frequency, indication of direct notification from UPF, etc..\n-\tEnhance the function of NEF to support the authentication of DetNet controller.\n-\tThe signalling protocol between NEF and DetNet control uses IETF Netconf [8] or Restconf [9].\n-\tExpand SMF to support DetNet information reporting function. Based on the reporting requirements issued by NEF, SMF receives DetNet related information reported by UPF on N4 interface, and sends it to NEF as required.\n-\tExpand UPF to support DetNet information reporting function, and report the following information through N4 interface, or via network exposure service:\n-\tIdentity and link with adjacent DetNet nodes: the identification of surrounding nodes can be obtained through routing broadcast messages on N6.\n-\tWhen the PDU session is established, the UPF detects the DetNet node on the N6 interface, associates it with the PDU session, and sends the information to the SMF in the N4 PDU session update message, and the SMF forwards it to the NEF for external reporting.\nThe collection and reporting methods of network information are as follows:\n-\tReporting method of adjacent DetNet nodes for the UPF:\n-\tUPF obtains identification of DetNet nodes around the N6 interface through BGP and other routing broadcast messages.\n-\tUPF reports the identification and link of adjacent DetNet nodes to SMF through N4 interface, then opens the information to DetNet control plane.\n-\tThe UPF reports the identification and link of adjacent DetNet nodes information to the SMF on the N4 interface. And the SMF forwards the information to the NEF. There are no impacts on the PCF and TSCTSF.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "6.2.3\tProcedures",
                            "text_content": "The figure depicts a simplified representation of the subscription and reporting process of DetNet ability opening, which is a key component of the DetNet (Distributed Network Operations) framework. The figure illustrates the steps involved in initiating and managing network operations, including the creation of a subscription, the submission of reports, and the monitoring and management of network status. The visual elements, such as the flowchart and the text boxes, provide a clear and concise overview of the process, making it easy for users to understand and follow.\nFigure 6.2.3-1: Subscription and reporting process of DetNet ability opening\n1.\tBefore issuing the forwarding strategy, or based on the need of periodic collection of the DetNet capability, the DetNet control plane subscribes the capability exposure to NEF, which includes the information to be reported ,reporting frequency and triggers.\n2.\tNEF forwards the requested capability reporting requirements to SMF.\n3.\tSMF subscribes the capability reporting of DetNet from UPF.\n4.\tAccording to the subscription request, UPF collects the relevant information of DetNet on the network side, including N6 interface topology; UPF may report the identification and link of adjacent DetNet nodes to NEF directly via network exposure service if received indication of direct notification from NEF.\n5.\tSMF integrates the reporting messages received on the N4 interface to form the reporting data of 5GS as a DetNet node, such as adjacent nodes, which can be collected by NEF and be reported to the DetNet controller.\n6.\tNEF reports corresponding information to DetNet control plane.\n7.\tThe DetNet control plane generates the DetNet forwarding strategy based on the received reports.\nIn the above figure, steps 1-3 is the capability reporting subscription procedure, and steps 4-6 is the capability reporting procedure.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "6.2.4\tImpacts on existing entities and interfaces",
                            "text_content": "The new requirements are mainly aimed at the functional enhancement of NEF, SMF and UPF modules.\nExtend NEF to achieve:\n-\tReceiving subscription information from DetNet control plane and reporting related capabilities to the outside,\n-\tBased on subscription requirements, send DetNet information reporting requirements to SMF, including the information to be reported, reporting frequency, etc.\nExtend SMF to achieve:\n-\tBased on the reporting requirements issued by NEF, SMF receives DetNet related information reported by UPF on N4 interface.\n-\tComprehensively process relevant information and send it to NEF according to the required frequency or conditions.\nExtend UPF to achieve:\n-\tReport the identity and link with adjacent DetNet nodes through N4 interface.\n-\tThe UPF reports the identification and link of adjacent DetNet nodes information to the SMF on the N4 interface. And the SMF forwards the information to the NEF. There are no impacts on the PCF and TSCTSF.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "6.2.5\tSolution evaluation",
                            "text_content": "-\tAdjust the strategy in time when the network capability changes.\n-\tBetter ensure the implementation of certainty on WAN.\n-\tWithout significantly changing the original framework, the information requirements of DetNet control plane can be met by expanding the existing network function.\n",
                            "figures_meta_data": [],
                            "tables": []
                        }
                    ]
                },
                {
                    "title": "6.3\tSolution #3 for Key Issue #2: Mapping from DetNet YANG model to 3GPP configuration",
                    "description": "",
                    "summary": "",
                    "text_content": "",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": [
                        {
                            "title": "6.3.1\tIntroduction",
                            "text_content": "The assumed architecture is shown in the figure below. On the device side, we typically have an end host as a DetNet system that makes use of the DetNet functionality. Note that the end host does not have to be DetNet aware.\nThe figure depicts the DetNet logical reference architecture distribution in 5G Core Network (5GC). It illustrates the network's architecture, including the distribution of logical reference units (LRUs) and the logical reference network (LRN). The figure highlights the use of SDN principles, with the LRUs being distributed across the network to improve network efficiency and reliability.\nFigure 6.3.1-1: DetNet logical reference architecture distribution in 5GC\nThe main principles of the solution are as follows.\n-\tIn the DetNet YANG model (draft-ietf-detnet-yang [5]), the forwarding sub-layer configuration and the traffic profile are for the mapping.\n-\tThe forwarding sub-layer configuration identifies the flow and the incoming, outgoing interfaces. Based on this information, the PDU Session and the flow direction (uplink, downlink or whether it is UE to UE) can be determined.\n-\tThe DetNet traffic requirements in the traffic profile include the max-latency, min-bandwidth and the max-loss, which can be converted to the 3GPP delay, GFBR and PER requirements.\n-\tThe YANG model as currently defined in IETF only includes the end to end traffic requirements. There are two options: the TSCTSF may either derive the per 5GS requirements from the end to end requirements, or the DetNet YANG model is extended for the 5GS to include also the requirements specific to the 5GS.\n-\tThe DetNet traffic specification is used to determine the periodicity and the bandwidth requirement of the flow.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "6.3.2\tFunctional Description",
                            "text_content": "Parameters to consider from the DetNet controller\nThe YANG model in draft-ietf-detnet-yang [5] describes the parameters that are used by the DetNet nodes to set up the configuration for DetNet. As the 5GS realizes the forwarding sub-layer, it is the forwarding sub-layer configuration that needs to be considered in the YANG model. In addition, the YANG configuration can provide the Traffic Profile that includes the traffic requirements and the traffic specification that could be used by the 5GS system.\nThe DetNet YANG model contains the following parameters in the traffic requirements referenced in the forwarding sub-layer which can be mapped to 3GPP parameters.\n-\tMax-latency, which relates to the required delay in the 5GS.\n-\tMin-bandwidth, which relates to the guaranteed bitrate that is needed for the flow (GFBR).\n-\tMax-loss, which relates to the PER that is being proposed to be added as a new parameter in the release 18 in the 5TRS_URLLC study that can be provided to the 5GS.\nThe DetNet YANG model also contains other parameters in the traffic profile that is referenced in the forwarding sub-layer which do not easily map to 3GPP parameters: max-latency-variation, max-consecutive-loss-tolerance, max-mis-ordering. There is no straightforward 3GPP mapping for these parameters as their definition differs from the current 3GPP parameters. Hence it is proposed not to standardize any mapping for these parameters in the current release.\nThe traffic specification referenced in the forwarding sub-layer includes the following parameters that can be mapped.\n-\tInterval: this corresponds to the periodicity in the 3GPP system.\n-\tmax-pkts-per-interval, max-payload-size: can be used to determine the maximum burst size; together with the interval parameter, the required bandwidth can be calculated, which corresponds to the MFBR.\nThe traffic specification can also contain min-pkts-per-interval, min-payload-size, which do not map to any 3GPP parameters hence these are not proposed to be supported in the standardized mapping.\nThe TSCTSF can use the Interval to generate the periodicity value in the TSCAI.\nRegarding the traffic requirements, it must be noted that the current DetNet YANG model includes only the end to end traffic requirements (e.g. in terms of maximal latency), and not the per node requirements that need to be realized by a given node. Even though it is the per node requirements that matter for the configuration of a given node, that information is currently not included in the IETF model as of today.\nBased on the current IETF YANG model as currently defined, two main options can be used by the 5GS acting as a DetNet node.\n-\tThe TSCTSF derives the per node traffic requirements from the end to end traffic requirements using a pre-configured mapping in the TSCTSF, based on the knowledge of the given deployment. E.g. take a given fraction of the end to end requirements and/or subtract a constant that corresponds to the rest of the network.\n-\tExtend the IETF YANG model with additional parameters that apply to the 5GS system on a per node basis. The YANG modelling language allows for extensibility. That can be achieved by a 3GPP defined YANG model that imports the IETF defined DetNet YANG model and adds the needed per node parameters. In that way, the model used by 5GS remains compatible with IETF DetNet, but allows for the DetNet controller to provide the traffic requirements on a per node basis when the DetNet controller is prepared for this and when it is aware that the DetNet node is a 5GS. (That knowledge can be available based on the exposure solution in Key Issue #1.)\nEditor's note:\tWhether and How to map the E2E traffic requirement is FFS.\nEditor's note:\tWhether and How to Extend the IETF YANG model is FFS.\nIdentification of the PDU Sessions\nThe TSCTSF receives the DetNet YANG forwarding configuration, which refers to the incoming and outgoing interfaces in 5GS. These are based on the interface identification that is provided in the reporting from the 5GS to the DetNet controller as part of Key Issue #1 solution. The interface is identified by its name, which is derived from the if-Index, which in turn is based on the port number that is set by the UPF. The TSCTSF stores the mapping between the port number (if-Index and the corresponding interface name) and the PDU Session, hence the PDU Session can be identified. The incoming and outgoing interfaces also identify whether the flow is uplink or downlink, hence flow direction is known, and also whether it is a UE to UE flow.\nThe TSCTSF may also perform a verification whether the 3GPP system routes the given flow as defined in the DetNet forwarding sub-layer. Note that it is out of scope of the current study to update the 3GPP system's routing based on the DetNet configuration, but it can be possible to verify in the TSCTSF whether the incoming and outgoing interfaces in the DetNet configuration correspond to a valid routing in the 3GPP system. As an example, the TSCTSF may verify whether the destination IP address in a downlink flow towards a given interface corresponding to a PDU Session is the same IP address that is assigned for the same PDU Session. As another example, the TSCTSF may be preconfigured with the knowledge whether or not UE to UE routing is enabled or not. The TSCTSF may also verify other parameters of the configuration, and indicate that the configuration for the flow is not accepted if the configuration is outside of the supported range, based on TSCTSF preconfiguration. As a result of this optional verification, the TSCTSF may decide to accept or reject a given DetNet configuration.\nIn the case of a UE to UE flow, if the system allows for such traffic, the TSCTSF generates separate requests on PDU Session basis towards the PCF(s) for the uplink and the downlink legs of the flow.\n3GPP configuration for DetNet\nThe PCF receives the relevant QoS requirements from the TSCTSF as well as the flow description as determined by the TSCTSF based on the DetNet configuration. The stage 3 definition of the flow description is extended according to the needs of DetNet, also including the DSCP value and optionally Ipv6 flow label and Ipsec SPI. The PCF determines the 3GPP QoS parameters based on the QoS requirements provided by the TSCTSF. The PCF may also consider the DSCP value in the flow description. The PCF may establish new QoS flows or modify existing QoS flows as needed.\nDeployment option: configuration of the implementation specific routing functionality on N6\nBelow we clarify a possible deployment option that does not require additional 3GPP specification.\nThe UPF node may have routing functionality on the N6 interface side which is implementation specific. The 3GPP specifications are not responsible for setting the routing on the N6 interface side. In deployments where the implementation specific routing functionality on the N6 side also needs to be configured for DetNet, direct configuration can be used between the CPF and the routing functionality co-located with the UPF. This case can be modelled with a single interface between the UPF and the router; when the UPF and the router are co-located in the same physical node, then the interface between them can be modelled as a single virtual interface. This optional deployment is shown in the figure below. There is no need to use this option in deployments where there is no need for routing configuration by the CPF on the N6 side.\nThe figure depicts a simplified deployment scenario of a 5G network, showing the optional deployment of CPF control for N6 routing. It illustrates the use of CPF (Control Plane Forwarding) to manage the routing of traffic in a 5G network, which is a key feature of the 5G standard. The figure shows the network's core switches, optical line terminals (OLTs), and distributed nodes, all interconnected through a fiber-optic backbone. The layered design of the network aligns with SDN (Software-Defined Networking) principles, allowing for efficient and flexible network management.\nFigure 6.3.2-1: Optional deployment scenario with CPF control of N6 routing\nOther considerations\nThe solution does not require an NEF between the DetNet controller and the TSCTSF, since the DetNet controller is assumed to be trusted by the operator and can influence the QoS of the traffic flows.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "6.3.3\tProcedures",
                            "text_content": "The figure illustrates the procedure for the mapping of the DetNet configuration.\nThe figure depicts a schematic of a YANG configuration for setting up DetNet, a network-wide configuration management system. It illustrates the various components and their connections, including the network interface controller (NIC), network function virtualization (NFV), and the network management system (NMS). The figure provides a clear and concise visual representation of the YANG configuration process, making it easy for network administrators to understand and manage their network infrastructure.\nFigure 6.3.3-1: Signalling for setting up YANG configuration for DetNet\n1.\tThe DetNet controller provides YANG configuration to the TSCTSF. The TSCTSF uses the identity of the incoming and outgoing interfaces to determine the affected PDU Session(s) and whether the flow is uplink or downlink. (For this, the information collected in the solution to Key Issue #1 is used.) The TSCTSF also determines if the flow is UE to UE in which case two PDU Sessions will be affected for the flow and can also verify whether the specified routing is applicable. The TSCTSF maps the configuration as described above and calculates the delay and PER requirements and the TSC Assistance Container for each flow description.\n2.\tThe TSCTSF provides the mapped parameters and the flow description to the PCF(s) on PDU Session basis.\n3.\tThe PCF(s) determines, based on the parameters received from the TSCTSF, whether the existing QoS flows need to be modified or a new QoS flow needs to be created. Additionally, the TSC Assistance Container is provided to the SMF.\n4.\tThe PCF responds to the TSCTSF, which includes information about the success of the configuration.\n5.\tThe TSCTSF provides a response to the CPF regarding the success of the configuration setup. Optionally, it can be possible to provide 3GPP specific status codes to provide additional information if the requested configuration could not be set up.\nIf the status of the flow changes later on for any reason, the TSCTSF notifies the CPF. Upon release of a PDU Session that is part of the existing DetNet configuration, the PCF notifies the TSCTSF for the PDU Session release, and TSCTSF notifies the CPF on status of the flow.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "6.3.4\tImpacts on existing entities and interfaces",
                            "text_content": "TSCTSF: Maintains mapping between the port number in a UPF and the PDU Session and the associated interface in the DetNet configuration. Mapping of DetNet parameters and providing information to the DetNet controller whether the configuration is accepted.\nPCF:\n-\tStage 3 definition of flow description parameter is extended.\n",
                            "figures_meta_data": [],
                            "tables": []
                        }
                    ]
                },
                {
                    "title": "6.4\tSolution #4 for Key Issue #2: DetNet Flow Mapping",
                    "description": "",
                    "summary": "",
                    "text_content": "",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": [
                        {
                            "title": "6.4.1\tIntroduction",
                            "text_content": "This contribution discusses about which parameters should be mapped into which 5G parameters to support the interworking between 5GS and DetNet controller. This contribution proposes an alternative mapping between DetNet flow and QoS flow.\nAccording to clause 5 of IETF RFC 9016 [4], the DetNet Flow-related parameters in the information model used in the DetNet controller can be classified into 3 categories: DetNet Flow identification parameters (including DnFlowID, DnFlowFormat and DnFlowSpecification etc.), DetNet Traffic Specification parameters (DnTrafficSpecification) and DetNet Flow requirements (e.g. DnFlowRequirements). DetNet Traffic Specification parameters parameters can be mapped into QFI and Packet Filter Sets to identify the DetNet Flow. The configuration that is sent to the 5GS is based on the Yang model in draft-ietf-detnet-yang [5]. Part of the DetNet Traffic Specification parameters and DetNet Flow requirements can be mapped into 5GS QoS related requirements (e.g. 5QI related QoS requirements and TSCAI related TSC requirements).\nThe DetNet Flow requirements provided by the DetNet controller are all per DetNet Flow parameters for the whole DetNet network. Some of the parameters of the requirements (e.g. maximum latency of the DetNet Flow) cannot be mapped to 5GS QoS requirements directly and the status/capability information of the other nodes in the DetNet flow path is needed.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "6.4.2\tFunctional Description",
                            "text_content": "The TSC architecture defined in clause 4.4.8.3 of TS 23.501 [12] is reused for support of DetNet functions by the following function enhancement.\n-\tNew DetNet AF is introduced to help TSCTSF support DetNet flow mapping. The DetNet controller sends the DetNet related parameters of the DetNet flow to DetNet AF and DetNet AF maps them to 5GS QoS requirements or TSC requirements and send the requirements to TSCTSF. Then TSCTSF interacts with PCF to configure the TSC QoS flow which is mapped to the DetNet flow.\nNOTE:\tThis solution follows the Rel-17 architecture for AF requested support of Time Sensitive Communication and Time Synchronization defined in clause 4.4.8.3 of TS 23.501 [12]. Double mapping is used: DetNet controller interacts with DetNet AF using the IETF protocol defined in RFC 9016 [4] and draft-ietf-detnet-yang [5], and DetNet AF interacts with TSCTSF using the Rel-17 TSCTSF interfaces defined for TSC services. NEF may be deployed between the DetNet AF and TSCTSF according to the current architecture.\nPCF generates the QoS related policy and distributes the policy to SMF based on the current Policy control framework. TSCTSF generates the TSCAI according to the requirements sent by DetNet AF.\nTable 6.4.2-1 shows the mapping between DetNet related parameters and 5GS QoS parameters.\nTable 6.4.2-1: Mapping between DetNet related parameters and 5GS parameters\n\nEditor's note:\tWhether and how the DetNet related parameters marked as TBD in the table should be mapped to 5GS requirements is FFS.\nThe DetNet Flow requirements provided by the DetNet controller are all per DetNet Flow parameters for the whole DetNet network. The parameters in table 6.4.2-1 with value 'N' in the third column can not be mapped to 5GS QoS parameters directly and the status/capability information of the other nodes in the DetNet flow path is needed.\nEditor's note:\tWhether and how to get the other DetNet nodes' information to support DetNet network is FFS.\n",
                            "figures_meta_data": [],
                            "tables": [
                                {
                                    "description": "Table 6.4.2-1: Mapping between DetNet related parameters and 5GS parameters",
                                    "table number": 5,
                                    "summary": "",
                                    "name": ""
                                }
                            ]
                        },
                        {
                            "title": "6.4.3\tProcedures",
                            "text_content": "The existing policy control framework is reused. The only enhancement is that the DetNet AF can provide the mapped 5GS QoS requirements/ TSC requirements to to TSCTSF for support of DetNet flow transmission. The detailed procedure is shown in Figure 6.4.3-1:\nThe figure depicts a QoS flow configuration for DetNet, a network optimization tool used in telecommunications. It illustrates the various QoS parameters that can be configured, such as flow priority, flow duration, and flow rate, which are essential for ensuring reliable and efficient communication. The figure also includes a flow graph, which visually represents the flow of data packets, allowing for easy understanding of the network's performance.\nFigure 6.4.3-1 QoS flow configuration for DetNet\n1.\tThe DetNet controller provides YANG configuration with the DetNet node ID (i.e. UPF node IP address) to the DetNet AF. The DetNet AF finds the mapped UE address according to the DetNet node ID, route interface information (DS-TT or NW-TT IP address as ingress/egress interface), Next hop information in YANG configuration (neighbouring DetNet node IP addresses). The DetNet AF maps the configuration as described above and calculates the TSC requirements for each DetNet flow.\n2.\tThe DetNet AF provides the mapped TSC requirements to TSCTSF (optionally via NEF).\n3.\tThe TSCTSF calculates and provides the mapped QoS parameters, TSCAC and the flow description to the PCF(s) according to the TSC requirements.\n4.\tThe PCF(s) determines, based on the parameters received from the TSCTSF, whether the existing QoS flows need to be modified or a new QoS flow needs to be created. TSCAC is provided to the SMF.\n5.\tThe PCF responds to the TSCTSF with the result of the configuration.\n6.\tThe TSCTSF provides a response to the DetNet AF.\nNOTE:\tStep 2 to 6 refer to the clause 4.15.6.6 of TS 23.502 [13] for setting up TSC AF session with required QoS.\n7.\tDetNet AF responds to DetNet controller.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "6.4.4\tImpacts on existing entities and interfaces",
                            "text_content": "DetNet AF:\n-\tSupport of mapping DetNet flow related parameters to 5GS QoS requirements and TSC requirements and sending the parameters to TSCTSF (optionally via NEF).\n",
                            "figures_meta_data": [],
                            "tables": []
                        }
                    ]
                },
                {
                    "title": "6.5\tSolution #5 for Key Issue #2: Provisioning DetNet traffic to 5GS parameters",
                    "description": "",
                    "summary": "",
                    "text_content": "",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": [
                        {
                            "title": "6.5.1\tIntroduction",
                            "text_content": "This solution describes how 5GS maps DetNet configuration parameters given from the DetNet controller into 5GS parameters to handle DetNet traffic. There are assumptions for the solution:\n-\tDetNet Flow-Related Parameters as defined in draft-ietf-detnet-yang [5] is used as DetNet configuration parameters for DetNet traffic.\n-\tDetNet controller is located in either a different domain from the 5GS or the same trust domain as the 5GS.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "6.5.2\tFunctional Description",
                            "text_content": "5GS does not support edge DetNet node functions and DetNet service sub-layer functions, according to the scope and architecture assumptions in this TR, That is, the 5GS supports the DetNet node functions and DetNet forwarding sub-layer related functions except for service sub-layer functions. As a result, this solution uses DetNet Flow-Related Parameters from the DetNet controller as DetNet configuration parameters for DetNet traffic (Table 6.5.2-1).\nTable 6.5.2-1: DetNet configuration parameters for DetNet traffic\n\nThe TSCTSF converts DetNet configuration parameters for DetNet traffic into 5GS QoS parameters and TSCAI, such as Interval into Periodicity and MaxPacketsPerInterval and MaxPayloadSize combined into MDBV. Due to the lack of any minimum values for payload size or packets in the 5GS specification, MinPayloadSize and MinPacketsPerInterval cannot currently be mapped into 5G parameters.\nIn DnFlowRequirements, the MaxLatency, MaxLatencyVariation, MaxLoss, MaxConsecutiveLossTolerance, and MaxMisordering attributes specify requirements not in a single DetNet node but throughout the DetNet flow path. Therefore, if IETF DetNet specifications define explicit requirements on a DetNet node to enable DnFlowRequirements, how to provision them within the 5GS is dependent on the IETF DetNet specifications. At the moment, the 5GS may allow for the translation of MinBandwidth to GFBR, MaxLatency to PDB, and MaxLoss to PER.\n",
                            "figures_meta_data": [],
                            "tables": [
                                {
                                    "description": "Table 6.5.2-1: DetNet configuration parameters for DetNet traffic",
                                    "table number": 6,
                                    "summary": "",
                                    "name": ""
                                }
                            ]
                        },
                        {
                            "title": "6.5.3\tProcedures",
                            "text_content": "This solution considers both the case where the DetNet controller is in a different domain from the 5GS and the case where it is in the same trust domain as the 5GS. Depending on whether the DetNet controller is within the 5GS domain or not, the NEF may be employed. The NEF may optionally be used, according to the TR's conclusion.\nUsing the Setting up an AF session with required QoS procedure as described in Figure 4.15.6.6-1 of TS 23.502 [13], the DetNet controller sends to the NEF DetNet configuration parameters defined in clause 6.5.2. The interface between the DetNet controller and the NEF in this situation is different from the procedure described in TS 23.502 [13].\nThe figure depicts a flowchart illustrating the required TSC QoS procedure for DetNet traffic, which is a crucial aspect of network management and performance optimization. The diagram illustrates the steps involved in ensuring that the traffic is delivered with the required QoS, including the use of Quality of Service (QoS) parameters such as packet loss, jitter, and delay. The figure also highlights the importance of monitoring and managing the traffic flow to ensure that it meets the desired QoS requirements.\nFigure 6.5.3.1-1: Required TSC QoS procedure for DetNet traffic\nThe procedure of Setting up an AF session with required QoS in Figure 4.15.6.6-1 of TS 23.502 [13] is performed to handle DetNet traffic with the following modifications and clarifications:\n1.\tThe DetNet controller sends DetNet configuration parameters to the NEF.\n3a.\tIf the NEF receives DetNet configuration parameters from theDetNet controller, the NEF forwards these received parameters in the Ntsctsf_QoSandTSCAssistance_Create request message with additional DetNet configuration parameters to the TSCTSF.\nNOTE:\tThis procedure works if the DetNet controller provides YANG configuration via Restconf in accordance with IETF DetNet specifications.\nWithout the NEF, the DetNet controller directly sends to the TSCTSFDetNet configuration parameters.\nThe figure depicts a procedure for requesting TSC QoS for DetNet traffic, which is a crucial aspect of network management and optimization. The figure shows a flowchart with various steps, such as initiating the request, specifying the desired QoS level, and submitting the request to the TSC. The TSC is responsible for processing and evaluating the request, ensuring that the requested QoS is met. This figure is essential for ensuring that network traffic is prioritized and that users receive the best possible service, regardless of the network conditions.\nFigure 6.5.3.2-1: Procedure of requesting TSC QoS for DetNet traffic\n1.\tIf the DetNet controller is considered to be trusted by the operator, it sends DetNet configuration parameters to interact directly with TSCTSF.\nNOTE:\tThis procedure works if the DetNet controller provides YANG configuration via Restconf in accordance with IETF DetNet specifications.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "6.5.4\tImpacts on existing entities and interfaces",
                            "text_content": "TSCTSF:\n-\tNeeds to support to accept YANG configuration via Restconf from the DetNet controller.\n-\tNeeds to support converting DetNet configuration parameters into 5GS QoS parameters.\nNEF:\n-\t(Optional) May support to accept YANG configuration via Restconf from the DetNet controller.\n",
                            "figures_meta_data": [],
                            "tables": []
                        }
                    ]
                },
                {
                    "title": "6.6\tSolution #6 for Key Issue #2: Solution for provisioning DetNet configuration from the DetNet controller to 5GS",
                    "description": "",
                    "summary": "",
                    "text_content": "",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": [
                        {
                            "title": "6.6.1\tIntroduction",
                            "text_content": "The goal of FS_DetNet is to achieve deterministic packet forwarding in the wide area network. In order to support DetNet deterministic forwarding mechanism in 5G mobile network and realize wide area certainty, it is necessary to study how to map DetNet parameters to 5GS parameters.\nIETF RFC 9016 [4] defines the information model of the DetNet flow, draft-ietf-detnet-yang [5] defines the configuration, including DetNet flow description, and differentiate service requirements. Clause 5.7 of TS 23.501 [12] defines QoS models and parameters.\nThis contribution proposes an enhanced architecture to support the interworking between 5GS and DetNet network. This architecture enhances the function of TSCTSF to support DetNet flow mapping.\nThe architecture proposed by this contribution is based on 5GS QoS framework, and maps the DetNet flow to QoS flow. This contribution proposes a QoS parameter mapping method supporting wide area mobile deterministic networks. It also introduces an implementation procedure of DetNet business flow under 5GS QoS framework.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "6.6.2\tFunctional Description",
                            "text_content": "The figure depicts an enhanced architecture for a 5G network, showcasing a multi-path signal propagation model with key components such as base stations (gNB), user equipment (UE), and scatterers. The diagram highlights beamforming techniques to mitigate interference, emphasizing the importance of redundancy paths and the layered design of the optical backbone.\nFigure 6.6.2-1: Enhanced architecture\nAs shown in Figure 1, the TSC architecture based on 3GPP Rel-17 supports DetNet function by the following function enhancement:\n-\tEnhance the function of TSCTSF to support DetNet flow mapping.\n-\tRealize the information interaction between TSCTSF and DetNet control plane through NEF.\n-\tEnhance the function of NEF to support the transmission of DetNet flow configuration. The DetNet controller sends the DetNet related parameters of the DetNet flow to NEF and NEF transports them to TSCTSF.\n-\tEnhance the function of NEF to support the authentication of DetNet controller.\n-\tEnhance the function of NEF to convert the IETF protocols Netconf [8] or Restconf [9] on the interface between DetNet controller and NEF to HTTP protocol on N85 interface.\nThe DetNet controller transmits the forwarding requirements of the DetNet flow to TSCTSF. TSCTSF completes the QoS mapping from the service requirements of the DetNet flow to 5GS QoS flow.\n-\tGenerate QoS policies for deterministic service forwarding and forward them to PCF. According to the framework of policy control, PCF sets up the QoS. Then it can realize the certainty of wide area.\nDetNet controller distributes the information model of the DetNet flow to NEF, using IETF protocols Netconf [8] or Restconf [9].\n-\tNEF sends the information model of the DetNet flow to TSCTSF over N85.\nThe figure depicts a function and mapping method in the TSCTSF, which is a system used for the transmission of telecommunication signals. The figure shows the various components and their functions, such as the transmitter, receiver, and the transmission line. The mapping method is also explained, which is crucial for the proper functioning of the system.\nFigure 6.6.2-2: Function and mapping method in the TSCTSF\nBased on 5GS QoS management framework, the mapping relationship between DetNet flow and 5GS QoS flow is shown in Figure 2:\n-\tThe DetNet IP flow description identifies the DetNet flow; it can be mapped to Packet filter Set under 5GS QoS framework.\n-\tThe traffic specification requirements of DetNet flow are specific service requirements for specific flows. It can be mapped to QoS profile under 5GS QoS framework. The specific mapping methods are as follows:\n-\tThe minimum guaranteed bandwidth is mapped to GFBR in QoS profile.\n-\tThe maximum delay is mapped to 5QI-PDB in QoS profile.\n-\tThe maximum packet loss is mapped to 5QI-Error Rate in QoS profile.\nThe above mapping functions are executed by the DetNet flow mapping function extended in TSCTSF.\nDetNet controller determines the end-to-end path and ensures the end-to-end requirements of the DetNet flow. 5GS should strictly ensure the requirements.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "6.6.3\tProcedures",
                            "text_content": "As shown in Figure 3, it introduces how the DetNet service flow is implemented on the enhanced architecture.\nThe figure depicts the implementation process of DetNet flow forwarding under the 5GS QoS framework, illustrating the steps involved in managing network traffic and ensuring quality of service (QoS) for different types of flows. DetNet is a network management system designed to optimize network performance and provide better user experience. The figure shows the flow of data from the source to the destination, highlighting the importance of efficient routing and traffic management in a 5G network.\nFigure 6.6.3-1: Implementation process of DetNet flow forwarding under 5GS QoS framework\n-\tDetNet controller sends deterministic transmission requirements and parameters to 5GS.\n-\tThe enhanced parameter mapping function on TSCTSF maps DetNet service requirements into 5GS QoS flow parameters.\n-\tTSCTSF sends the mapped QoS policy(include flow description, and QoS requirements for the service flow as 3GPP Qos framework required) to PCF.\n-\tPCF sends QoS policy to SMF.\n-\tSMF send QoS policy to the user plane for execution.\n-\tTransmit wide area deterministic service, fulfilled DetNet service requirements.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "6.6.4\tImpacts on existing entities and interfaces",
                            "text_content": "The suggested solution mainly focuses on the TSCTSF function enhancement and 5GS QoS framework extension.\nEnhance the function of TSCTSF to support:\n-\tMaps DetNet flow requirements to 5GS requirements.\nUse DetNet controller to achieve:\n-\tRealize the information interaction between TSCTSF and DetNet control plane through NEF.\n-\tNEF: the impacts are FFS.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "6.6.5\tSolution evaluation",
                            "text_content": "-\tOn the basis of the 5GS QoS framework, support DetNet service and DetNet deterministic wide area forwarding through function enhancement.\n-\tImplement the mapping mechanism from DetNet parameters to mobile network parameters.\n-\tSupport the interworking between mobile network and DetNet network.\n-\tRealize the L3 deterministic forwarding on mobile network.\n",
                            "figures_meta_data": [],
                            "tables": []
                        }
                    ]
                },
                {
                    "title": "6.7\tSolution #7 for Key Issue #2: Detnet configuration mapping to 5GS parameters",
                    "description": "",
                    "summary": "",
                    "text_content": "",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": [
                        {
                            "title": "6.7.1\tIntroduction",
                            "text_content": "This solution is for Key Issue #2, Provisioning DetNet configuration from the DetNet controller to 5GS.\n-\tWhich parameters provided by the DetNet controller should be mapped into which 5G parameters.\n-\tHow the 5GS finds the PDU Sessions corresponding to the given DetNet configuration.\n-\tWhat mechanisms are used in 5GS to configure the system according to the configuration provided by the DetNet controller.\nThis solution follow the assumption in clause 4.\n-\tExisting 3GPP routing mechanisms can be re-used for DetNet; no new routing function in the 3GPP system is to be defined.\n-\tThe existing filtering mechanisms can be re-used in the UE and in the UPF to identify the traffic for QoS differentiation.\n-\tIP based DetNet traffic is carried in PDU Sessions of IP type.\n-\tThe mapping functionality for DetNet is realized in the TSCTSF.\n-\tThe solutions should reuse the functionality of the TSC framework defined in Release 17 where applicable.\n-\tThe solutions shall not have any 5G AN and UE impacts\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "6.7.2\tFunctional Description",
                            "text_content": "In this solution, the TSCTSF receives the configuration from Detnet controller and map it to service requirement and TSCAC.\nThe figure depicts a parameter mapping for a 5G network, illustrating the various parameters that influence signal strength and quality. The mapping includes parameters such as signal strength, signal quality, and signal attenuation, which are crucial for ensuring reliable communication in a 5G network.\nFigure 6.7.2-1: Parameters mapping\nThe Detnet flow-related parameters is defined in RFC 9016 [4], and expressed in draft-ietf-detnet-yang [5].\nThe service requirement needed for PCF is defined in clause 5.6.2.7 (MediaComponent) and clause 5.6.2.8 (MediaSubComponent) of TS 29.514 [15]. The TSCAC is defined in TS 23.501 [12].\nThe table 6.7.2-1 show the mapping relation between Detnet configuration defined in clause 5 of RFC 9016 [4] and 5G QoS parameters (service requirement and TSCAC).\nTable 6.7.2-1: Mapping between DetNet parameters and 5GS parameters\n\nThe TSCTSF uses the incoming and outgoing interfaces in the draft-ietf-detnet-yang [5] to determine the related PDU Session (s) and Flow direction. If the incoming and outgoing interface are related the UE side, the TSCTSF separate it to two PDU Sessions, one for UL and one for DL.\nNOTE:\tFor the IP type traffic, the incoming interface is optional. If there is no incoming interface for UL traffic, the TSCTSF determine the PDU session according to configuration, topology information learned from KI#1 and source IP address in the DnFlowSpecification.\nEditor's note:\tHow the map the end to end Detnet parameters to 5GS parameters is FFS.\nEditor's note:\tWhich parameters in the table are carried in draft-ietf-detnet-yang [5] to Detnet node is FFS.\n",
                            "figures_meta_data": [],
                            "tables": [
                                {
                                    "description": "Table 6.7.2-1: Mapping between DetNet parameters and 5GS parameters",
                                    "table number": 7,
                                    "summary": "",
                                    "name": ""
                                }
                            ]
                        },
                        {
                            "title": "6.7.3\tProcedures",
                            "text_content": "The procedure in clauses 4.15.6 and 4.15.6.6a of TS 23.502 [13] are re-used with the following enhancement:\n-\tThe Detnet controller send the Detnet configuration to TSCTSF.\nNOTE:\tIn this solution, there is no NEF between TSCTSF and Detnet controller..\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "6.7.4\tImpacts on existing entities and interfaces",
                            "text_content": "TSCTSF:\n-\tmapping DetNet flow configuration to 5GS QoS requirements and TSC parameters.\nEditor's note:\tAdditional impacts are FFS.\n",
                            "figures_meta_data": [],
                            "tables": []
                        }
                    ]
                },
                {
                    "title": "6.8\tSolution #8 for Key Issues #1 and #2: 5GS DetNet Node IP Operation, Management and Exposure",
                    "description": "",
                    "summary": "",
                    "text_content": "",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": [
                        {
                            "title": "6.8.1\tIntroduction",
                            "text_content": "The 5G System supports IETF DetNet deterministic networking by abstracting the whole 5GS as a DetNet Node. The 5GS DetNet Node is comprised of a single UPF and a number of UEs connected to it with IP PDU Sessions. It supports DetNet IP data plane and forwarding sublayer operations, essentially acting as an IP router with specific QoS and management capabilities that are exposed to the DetNet controller.\nNo UE impact is required even though the device including the UE may support also DS TT for the sake of taking benefit from Rel-17 TSC related Time synch work. While the UE is logically part of the 5GS DetNet Node, the device including the UE may also act as a separate DetNet capable IP router node as depicted in Figure 6.8.1-2.\nThe architecture of the 5GS DetNet Node is shown in Figure 6.8.1-1.\nThe figure depicts a 5G network's DetNet Node, which is a crucial component in the network's architecture. It illustrates the various nodes and their connections, highlighting the importance of network reliability and redundancy.\nFigure 6.8.1-1: 5GS DetNet Node\nThe figure depicts a 5G network with a 5GS DetNet Node and a separate 5G Mobile Device DetNet Node, illustrating the logical link between them. The DetNet Nodes are interconnected through a logical link, which is crucial for efficient communication and data transmission in a 5G network.\nFigure 6.8.1-2: 5GS DetNet Node and a separate 5G Mobile Device DetNet Node with a logical link between them\nThe externally visible interfaces of the 5GS DetNet Node are located either at the UPF and supported by a NW-TT (2) or at the UEs and for UEs they may be supported by a DS-TT (1) when Rel-17 TSC features are required. Both UPF and UE side interfaces may be connected to other DetNet Nodes, which may be IP routers or hosts. Each interface has a distinct identity and is configured with Ipv4 and/or Ipv6 address information.\nThe 5GS DetNet Node is able to forward IP packets between any of its interfaces according to DetNet IP data plane requirements. The TSCTSF maps the configuration between the DetNet controller and the 5GS DetNet Node, maintaining the overall configuration, capability and state information of the Node. It exposes the 5GS DetNet Node's interfaces and their associated IP address and IP forwarding information to the DetNet controller. It receives DetNet flow information including flow identification and QoS requirements from the DetNet controller and sets up the 5G user plane accordingly.\nThe 5GS DetNet Node may support PTP time synchronization if the 5GS is configured to act as a PTP instance (operating as a boundary clock, peer-to-peer transparent clock or end-to-end transparent clock according to 3GPP Release 17 procedures applicable to IP PDU Sessions). The PTP time synchronization processes are orthogonal to DetNet IP QoS or IP routing (forwarding) procedure but both can be used together with the same TSCTSF, and NW-TT instances. Support of PTP time synchronization is not further detailed in the solution as it relies on Rel-17 features.\nThe granularity of the 5GS DetNet Router is per UPF for each network instance or DNN/S-NSSAI.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "6.8.2\tFunctional Description",
                            "text_content": "5GS acts as a DetNet Node supporting IP Data Plane and forwarding sub-layer functionality. To support IP Data Plane, it acts as a Layer 3 IP Router. When integrated with IETF DetNet network, 5GS acts as one or more DetNet Nodes of the DetNet network (more than one DetNet node when there are more than one UPF). The 5GS DetNet Node is composed of one or more interfaces on a single UPF (i.e. PSA) side supported by NW-TT, the user plane tunnel between the UEs and the UPF (including 5G RAN and possibly intermediate UPF(s)), the interfaces on the UE side and possibly the DS-TT (s) when Rel-17 TSC time synchronization is needed. For each 5GS DetNet Node of a DetNet network, the interfaces on NW-TT support the connectivity to the DetNet network, and the interfaces on UE side are associated to the PDU Session providing connectivity to the DetNet network.\nThe 5GS DetNet Node operation and management follow the procedures of 5GS Bridge and Support of integration with TSN as described in clause 5.28 of TS 23.501 [12] with the following differences and clarifications:\n-\tThe logical networking entity is called 5GS DetNet Node and it has a unique Node ID.\n-\t5GS DetNet Node supports IP packet forwarding as an IP router and uses IP PDU Sessions.\n-\tTSCTSF takes the role of the 5GS DetNet Node control and management entity and implements the control and management interface to the DetNet controller.\n-\tPort numbers are used to create interface IDs that uniquely identify IP interfaces on UE and NW-TT.\n-\tThe association between the UE/ IP address and (Ipv6) prefix, 5GS DetNet Node ID and port number based interface ID is maintained at TSCTSF and further used to assist to bind the DetNet flow IP traffic with the UE's IP PDU session.\n5GS DetNet Node Interface IP addressing and IP Routing information management\nThe User Plane Node and Port Management Information Container data models are extended with IP address and IP routing/forwarding information.\nFor each UPF/NW-TT side interface the following information is provided:\n-\tType of interface.\n-\tMAC address.\n-\tIP address (Ipv4 and/or Ipv6).\n-\tIP Prefix (Ipv4 and/or Ipv6).\n-\tNeighbour MAC and IP addresses.\n-\tMTU size.\n-\tIP forwarding table entries where this interface or one of its directly connected neighbours is the next hop.\nFor each UE side interface the following information is provided:\n-\tType of interface = \"3GPP\" (or any new type identifier allocated for this purpose):\n-\tinformation specific to \"3GPP\" interface type i.e. Role = \"Network\".\n-\tFor Ipv4: UE Ipv4 address.\n-\tFor Ipv6: UE interface id and Ipv6 Prefix.\n-\tMTU size.\n-\tIP forwarding table entries where this interface is the next hop based on framed route and Ipv6 prefix delegation information.\nThis allows the TSCTSF to learn for each DetNet Node interface the interface type, its IP address information and on UPF/NW-TT interfaces also neighbour information additionally useful for topology discovery.\nThe DetNet controller needs to be aware of the data path taken by IP flows exchanged between Detnet hosts in order to be able to manage the QoS/resource reservation across the whole end-to-end path. For instance, the DetNet controller needs to know that if the 5GS DetNet Node receives an IP packet with a particular destination IP address from one of its UE interfaces, from which egress interface to which next hop DetNet Node it will forward it.\nFor this purpose, for the UPF/NW-TT side interfaces, also the IP forwarding table entries are optionally provided including the following information:\n-\tIP address/prefix;\n-\taddress/prefix length;\n-\tDestination IP interface or next hop IP address.\nNOTE 1:\tAdditionally, other information about the routes can be included such as cost or delay, or the source of the routing information (static vs. dynamic).\nNOTE 2:\tAll the above information can be included in Port Management Information Containers (PMIC)  while it might be more efficient to use User Plane Node Management Information Containers (UMIC) to exchange the information for all NW-TT interfaces in a single container.\nWhile NW-TT is not necessary for IP routing/forwarding on N6, in the solution NW-TT is used for exposing the interface and interface specific routing/forwarding information to TSCTSF.\nOn UE side interfaces, also the following is optionally exposed to the TSCTSF for each interface:\n-\tFramed routes associated with the interface.\n-\tIpv6 prefixes delegated via the interface.\nTSCTSF exposing information to the DetNet controller\nAfter it has learned about the 5GS DetNet Node interfaces and their IProuting/forwarding information, the TSCTSF combines all the information into a single representation and makes it available for the DetNet controller. The information can be exposed to the DetNet controller using IETF RFC 8343, 8344 and 8345 YANG data models. RFC 8343 YANG may need to be extended with new interface type \"3GPP\" and any new information associated with it.\nBased on this information the DetNet controller learns 5GS DetNet Node interfaces, their IP addresses and IP prefixes, and the 5GS DetNet Node IP routing/forwarding- status. Using this information and similar information collected from the other DetNet IP data plane nodes, the DetNet controller is able to determine with DetNet traffic flows with given source and destination addresses are to be forwarded via the 5GS DetNet Node and which ingress and egress interfaces they will use.\nThe way to exchange PMIC and UMIC between the TSCTSF and the NW-TT (via PCF, SMF, etc.) is as defined in Rel-17 for TSC. The difference is that the content of the PMIC/UMIC may differ as explained above.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "6.8.3\tProcedures",
                            "text_content": "The figure depicts a 3D representation of a communication network, specifically highlighting the 5G signal path. It illustrates the various components involved in signal propagation, including base stations (gNB), user equipment (UE), and scatterers. The diagram highlights the use of beamforming techniques to mitigate interference, and the presence of redundancy paths to ensure failover reliability. The layered design of the network aligns with SDN principles, emphasizing the importance of network virtualization and automation.\nFigure 6.8.3-1\n1.\tPDU Session Establishment as defined clause 4.3.2.2.1-1 of TS 23.502 [13] is used to establish a PDU Session serving for TSC.\nThe SMF may determine the need to use dedicated resources (e.g. dedicated UPF(s)) for the 5GS DetNet Router based on local policies associated with the DNN and/or S-NSSAI.\nDuring this procedure, the SMF selects a UPF, which supports functions as defined in clause 5.28.1 of TS 23.501 [12], for the PDU Session.\nDuring this procedure, the SMF receives the allocated port number for UE IP interface and user-plane Node ID from the UPF: The UPF allocates the port number for UE, after receiving N4 Session Establishment Request message. The UPF retrieves also the user-plane Node ID (from the NW-TT) and provides its value to the SMF via N4 Session Level Reporting.\nDuring this procedure the SMF may also receive the UE-DS-TT residence time (if a DS TT is supported)\n2.\tThe SMF sends the information received in step 1 to the TSCTSF via PCF (via Npcf_SMPolicyControl service as defined in clause 4.16 of TS 23.502 [13]). The TSCTSF stores the binding relationship between 5GS user-plane Node ID, port number and UE IP address for future configuration. The TSCTSF requests creation (using the Npcf_PolicyAuthorization service as defined in clause 4.16.5.1 of TS 23.502 [13]) of a new AF session associated with the UE IP address and may subscribe for TSC events over the newly created AF session.\nUsing the 5GS user-plane Node ID the TSCTSF subscribes with the NW-TT for receiving user plane node management information changes for the 5GS DetNet Node indicated by the 5GS user-plane Node ID as described in clause 5.28.3.1 of TS 23.501 [12].\nAfter receiving a User plane node Management Information Container (UMIC) containing the NW-TT port numbers, the TSCTSF subscribes with the NW-TT for receiving NW-TT port management information changes for the NW-TT port indicated by each of the NW-TT port numbers as described in clause 5.28.3.1 of TS 23.501 [12].\nThe TSCTSF can use any Npcf session (any PDU Session) to subscribe with the NW-TT for node or port management information notifications. Similarly, the UPF can use any N4 session (any PDU Session) to send node or port management information notifications.\n3.\tThe TSCTSF learns the port management capabilities and interface information of each NW-TT interface. If NW-TT interfaces have locally available IP address or IP routing information, the TSCTSF learns it from the NW-TT.\n4.\tThe TSCTSF now has the up-to-date IP address and IP routing information of each UE and NW-TT interface. It combines it and makes it available for the DetNet controller.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "6.8.4\tImpacts on services, entities and interfaces",
                            "text_content": "TSCTSF:\n-\tLearns IP addressing and IP routing information on NW-TT using extended Port Management Information Container data model.\n-\tMaintains the 5GS DetNet Node interface, IP addressing and IP routing information base.\n-\tExposes the 5GS DetNet Node interface, IP addressing and IP routing information to the DetNet controller.\nSMF:\n-\tNone.\nNW-TT:\n-\tMaintains IP address management and IP routing (forwarding) configuration for the NW-TT related IP interface(s). Provides information to TSCTSF using extended User Plane Node and Port Management Information Container data models.\n",
                            "figures_meta_data": [],
                            "tables": []
                        }
                    ]
                }
            ]
        },
        {
            "title": "7\tConclusions",
            "description": "",
            "summary": "",
            "tables": [],
            "figures_meta_data": [],
            "subsections": [
                {
                    "title": "7.1\tGeneral",
                    "description": "",
                    "summary": "",
                    "text_content": "The following bullet points summarize the principles for the way forward:\n-\tYANG models over Netconf or Restconf are used between the TSCTSF and the DetNet controller.\n-\t3GPP does not standardize any signalling mechanism to include the NEF into the signalling path between the TSCTSF and the DetNet controller. If NEF functionality is desired, the relevant functions such as the authentication, authorization and potential throttling of signalling can be achieved by including such functionality in the TSCTSF depending on the needs of the given deployment.\n-\tThe TSCTSF terminates the interface towards the DetNet controller. The TSCTSF collects and provides exposure information to the DetNet controller. The TSCTSF collects the information from the UPF/NW-TT and the SMF with extensions to the 5GC data models or information elements as required. The entity reporting UPF N6 interface related information to the TSCTSF is NW-TT as in Rel-17 TSC.\n-\tThe TSCTSF may use the e2e traffic requirements in the YANG configuration, and based on a pre-configured mapping, derive 5GS requirements from them.\n-\tIt can be possible for the 5GS to verify in the TSCTSF whether the explicit routing information provided by the DetNet controller is in line with the 5GS mapping of IP addresses to PDU sessions. Apart from the verification, the 5GS routing is not modified by the DetNet controller in line with the agreed scope of the work.\n-\tBased on existing specifications, 5GS DetNet Node can forward via its UE side interface IP packets destined not only to the UE's IP address or prefix but also to other IP prefixes according to 3GPP framed routes or prefixes delegated to the UE by Ipv6 prefix delegation. To facilitate this, the additional IP addresses used for framed routes and Ipv6 prefix delegation are exposed by the SMF to the TSCTSF and by TSCTSF to the DetNet controller.\nThe following figure illustrates the DetNet architecture.\nThe DetNet architecture, depicted in Figure 7.1-1, is a comprehensive framework for managing and optimizing the network's performance. It encompasses various components such as the network slicing, network slicing management, and network slicing orchestration. The architecture is designed to ensure efficient resource allocation, optimal network utilization, and seamless integration of various services. By leveraging the DetNet architecture, network operators can optimize their network resources, improve network performance, and enhance user experience.\nFigure 7.1-1: DetNet Architecture\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "7.2\tKey Issue #1: 5GS DetNet node reporting",
                    "description": "",
                    "summary": "",
                    "text_content": "The 5GS is exposed by the TSCTSF to the DetNet controller as a router on a per UPF granularity. The node may be identified by a Node ID. The interfaces correspond to the PDU Sessions (and to the network side interfaces (i.e. including the interfaces of UPF and NW-TT). Each interface is identified by an interface identifier.\nThe following information may be reported from TSCTSF to DetNet controller for each interface.\n-\tType of interface.\n-\tIP address.\n-\tsubnet (prefix length).\n-\tNeighbour address (in case of network side interfaces).\n-\tMAC address (in case of network side interfaces).\n-\tMTU size.\nThe TSCTSF collects the information from the UPF/NW-TT and the SMF re-using the existing procedures in Rel-17 TSC, with the addition of new parameters as needed.\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "7.3\tKey Issue #2: Provisioning DetNet configuration from the DetNet controller to 5GS",
                    "description": "",
                    "summary": "",
                    "text_content": "The parameters are mapped in the TSCTSF as follows.\nNOTE 1:\tSee Clause 7.1 on mapping the end to end requirement to per node requirement.\n-\tMax-latency to Required delay.\n-\tMin-bandwidth to GFBR.\n-\tMax-loss to Required PER (new in Rel-18).\n-\tMax-consecutive-loss-tolerance to Survival time - when such mapping is possible, such as when there is only a single packet per interval. Interval to Periodicity (in TSC info).\n-\tmax-pkts-per-interval * (max-payload-size + protocol header size) to Max burst size.\n-\tmax-pkts-per-interval * (max-payload-size + protocol header size)/ Interval to MFBR.\n-\tDetNet flow specification to 3GPP flow description (also including the DSCP value and optionally Ipv6 flow label and Ipsec SPI).\nThe TSCTSF uses the identity of the incoming and outgoing interfaces to determine the affected PDU Session(s) and whether the flow is uplink or downlink. The TSCTSF also determines if the flow is UE to UE in which case two PDU Sessions will be affected for the flow; in that case the TSCTSF breaks up the requirements to individual requirements for the PDU Sessions. The TSCTSF provides the parameters to the PCF re-using the existing procedures in Rel-17 TSC, with the addition of PER.\nNOTE 2:\tFor the IP type traffic, the incoming interface is optional. If there is no incoming interface for UL traffic, the TSCTSF may determine the PDU session according to configuration, topology information (e.g. Next Hop information and so on) learned from KI#1 and source IP address in the DetNet configuration.\nThe TSCTSF provides a response to the DetNet controller regarding the success of the configuration setup. Optionally, if 3GPP may defines a new YANG module that extends the IETF DetNet YANG module, the 5GS may provide 3GPP specific status codes for additional information if the requested configuration could not be set up.\nIf the status of the flow changes later on for any reason, the TSCTSF notifies the DetNet controller. Upon release of a PDU Session that is part of the existing DetNet configuration, the PCF notifies the TSCTSF for the PDU Session release, and TSCTSF notifies the DetNet controller on status of the flow.\nNOTE 3:\t3GPP specifications do not support/ consider routing on the N6 interface, which can be explicitly set by the DetNet controller. The 3GPP specifications do not support the control of the N6 routing, since that has been considered out of scope of 3GPP.\n\n",
                    "tables": [
                        {
                            "description": "",
                            "table number": 8,
                            "summary": "",
                            "name": ""
                        }
                    ],
                    "figures_meta_data": [],
                    "subsubsections": []
                }
            ]
        }
    ]
}