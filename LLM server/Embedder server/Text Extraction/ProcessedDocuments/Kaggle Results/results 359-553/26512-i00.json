{
    "document_name": "26512-i00.docx",
    "content": [
        {
            "title": "Foreword",
            "description": "This Technical Specification has been produced by the 3rd Generation Partnership Project (3GPP).\nThe contents of the present document are subject to continuing work within the TSG and may change following formal TSG approval. Should the TSG modify the contents of the present document, it will be re-released by the TSG with an identifying change of release date and an increase in version number as follows:\nVersion x.y.z\nwhere:\nx\tthe first digit:\n1\tpresented to TSG for information;\n2\tpresented to TSG for approval;\n3\tor greater indicates TSG approved document under change control.\ny\tthe second digit is incremented for all changes of substance, i.e. technical enhancements, corrections, updates, etc.\nz\tthe third digit is incremented when editorial only changes have been incorporated in the document.\nIn the present document, modal verbs have the following meanings:\nshall\tindicates a mandatory requirement to do something\nshall not\tindicates an interdiction (prohibition) to do something\nThe constructions \"shall\" and \"shall not\" are confined to the context of normative provisions, and do not appear in Technical Reports.\nThe constructions \"must\" and \"must not\" are not used as substitutes for \"shall\" and \"shall not\". Their use is avoided insofar as possible, and they are not used in a normative context except in a direct citation from an external, referenced, non-3GPP document, or so as to maintain continuity of style when extending or modifying the provisions of such a referenced document.\nshould\tindicates a recommendation to do something\nshould not\tindicates a recommendation not to do something\nmay\tindicates permission to do something\nneed not\tindicates permission not to do something\nThe construction \"may not\" is ambiguous and is not used in normative elements. The unambiguous constructions \"might not\" or \"shall not\" are used instead, depending upon the meaning intended.\ncan\tindicates that something is possible\ncannot\tindicates that something is impossible\nThe constructions \"can\" and \"cannot\" are not substitutes for \"may\" and \"need not\".\nwill\tindicates that something is certain or expected to happen as a result of action taken by an agency the behaviour of which is outside the scope of the present document\nwill not\tindicates that something is certain or expected not to happen as a result of action taken by an agency the behaviour of which is outside the scope of the present document\nmight\tindicates a likelihood that something will happen as a result of action taken by some agency the behaviour of which is outside the scope of the present document\nmight not\tindicates a likelihood that something will not happen as a result of action taken by some agency the behaviour of which is outside the scope of the present document\nIn addition:\nis\t(or any other verb in the indicative mood) indicates a statement of fact\nis not\t(or any other negative verb in the indicative mood) indicates a statement of fact\nThe constructions \"is\" and \"is not\" do not indicate requirements.\n",
            "summary": "",
            "tables": [],
            "figures_meta_data": [],
            "subsections": []
        },
        {
            "title": "1\tScope",
            "description": "The present document specifies the set of protocols and APIs for 5G Media Streaming (5GMS) services based on the 5G Media Streaming Architecture (5GMSA). 5GMS supports services including MNO and third-party Downlink Media Streaming Services, and MNO and third-party Uplink Media Streaming Services.\n",
            "summary": "",
            "tables": [],
            "figures_meta_data": [],
            "subsections": []
        },
        {
            "title": "2\tReferences",
            "description": "The following documents contain provisions which, through reference in this text, constitute provisions of the present document.\n-\tReferences are either specific (identified by date of publication, edition number, version number, etc.) or non-specific.\n-\tFor a specific reference, subsequent revisions do not apply.\n-\tFor a non-specific reference, the latest version applies. In the case of a reference to a 3GPP document (including a GSM document), a non-specific reference implicitly refers to the latest version of that document in the same Release as the present document.\n[1]\t3GPP TR 21.905: \"Vocabulary for 3GPP Specifications\".\n[2]\t3GPP TS 26.501: \"5G Media Streaming (5GMS); General description and architecture\".\n[3]\tDASH Industry Forum, \"Specification of Live Media Ingest\",\n[4]\t3GPP TS 26.247: \"Transparent end-to-end Packet-switched Streaming Service (PSS); Progressive Download and Dynamic Adaptive Streaming over HTTP (3GP-DASH)\".\n[5]\tStandard ECMA-262, 5.1 Edition: \"ECMAScript Language Specification\", June 2011.\n[6]\tIETF RFC 6234: \"US Secure Hash Algorithms (SHA and SHA-based HMAC and HKDF)\".\n[7]\t3GPP TS 23.003: \"Numbering, addressing and identification\".\n[8]\tITU-T Recommendation X.509 (2005) | ISO/IEC 9594-8:2005: \"Information Technology – Open Systems Interconnection – The Directory: Public-key and attribute certificate frameworks\".\n[9]\tIETF RFC 7230: \"Hypertext-Transfer Protocol (HTTP/1.1): Message Syntax and Routing\".\n[10]\tIETF RFC 4648: \"The Base16, Base32, and Base64 Data Encodings\".\n[11]\tIEEE Standard 1003.1™, Issue 7: \"The Open Group Base Specifications\", 2018.\n[12]\t3GPP TS 29.571: \"Common Data Types for Service Based Interfaces; Stage 3\".\n[13]\t3GPP TS 38.321: \"NR; Medium Access Control (MAC) protocol specification\".\n[14]\t3GPP TS 36.321: \"Evolved Universal Terrestrial Radio Access (E-UTRA); Medium Access Control (MAC) protocol specification\".\n[15]\t3GPP TS 27.007: \"AT Command set for User Equipment (UE)\".\n[16]\tIETF RFC 8446: \"The Transport Layer Security (TLS) Protocol Version 1.3\", August 2018.\n[17]\tIETF RFC 7468: \"Textual Encodings of PKIX, PKCS, and CMS Structures\", April 2015.\n[18]\tISO 3166-1: \"Codes for the representation of names of countries and their subdivisions — Part 1: Country codes\".\n[19]\tISO 3166-2: \"Codes for the representation of names of countries and their subdivisions — Part 2: Country subdivision code\".\n[20]\tIETF RFC 5280: \"Internet X.509 Public Key Infrastructure Certificate and Certificate Revocation List (CRL) Profile\", May 2008.\n[21]\t3GPP TS 29.500: \"5G System; Technical Realization of Service Based Architecture; Stage 3\".\n[22]\t3GPP TS 29.501: \"5G System; Principles and Guidelines for Services Definition; Stage 3\".\n[23]\tOpenAPI: \"OpenAPI 3.0.0 Specification\", .\n[24]\tIETF RFC 7230: \"Hypertext Transfer Protocol (HTTP/1.1): Message Syntax and Routing\".\n[25]\tIETF RFC 7231: \"Hypertext Transfer Protocol (HTTP/1.1): Semantics and Content\".\n[26]\tIETF RFC 7232: \"Hypertext Transfer Protocol (HTTP/1.1): Conditional Requests\".\n[27]\tIETF RFC 7233: \"Hypertext Transfer Protocol (HTTP/1.1): Range Requests\".\n[28]\tIETF RFC 7234: \"Hypertext Transfer Protocol (HTTP/1.1): Caching\".\n[29]\tIETF RFC 7235: \"Hypertext Transfer Protocol (HTTP/1.1): Authentication\".\n[30]\tIETF RFC 5246: \"The Transport Layer Security (TLS) Protocol Version 1.2\".\n[31]\tIETF RFC 7540: \"Hypertext Transfer Protocol Version 2 (HTTP/2)\".\n[32]\tISO/IEC 23009-1: \"Information technology; Dynamic adaptive streaming over HTTP (DASH) — Part 1: Media presentation description and segment formats\".\n[33]\t3GPP TS 23.503: \"Policy and charging control framework for the 5G System (5GS); Stage 2\".\n[34]\t3GPP TS 29.514: \"5G System; Policy Authorization Service; Stage 3\".\n[35]\t3GPP TS 26.511: \"5G Media Streaming (5GMS); Profiles, codecs and formats\".\n[36]\tVoid.\n[37]\t3GPP TS 26.244: \"Transparent end-to-end packet switched streaming service (PSS); 3GPP file format (3GP)\".\n[38]\tIETF RFC 8259: \"The JavaScript Object Notation (JSON) Data Interchange Format\", December 2017.\n[39]\tISO 14496-12: \"Information technology – Coding of audio-visual objects – Part 12: ISO base media file format\".\n[40]\tISO 23000-19: \"Information technology – Coding of audio-visual objects – Part 19: Common media application format (CMAF) for segmented media\".\n[41]\tIETF RFC 3986: \"URI Generic Syntax\".\n[42]\t3GPP TS 26.118: \"Virtual Reality (VR) profiles for streaming applications\".\n[43]\t3GPP TS 24.558: \"Enabling Edge Applications; Protocol specification\".\n[44]\t3GPP TS 29.558: \"Enabling Edge Applications; Application Programming Interface (API) specification; Stage 3\".\n[45]\t3GPP TS 23.502: \"Procedures for the 5G System (5GS); Stage 2\".\n[46]\t3GPP TS 29.517: \"5G System; Application Function Event Exposure Service; Stage 3\".\n[47]\t3GPP TS 23.288: \"Architecture enhancements for 5G System (5GS) to support network data analytics services\".\n[48]\t3GPP TS 26.531: \"Data Collection and Reporting; General Description and Architecture\".\n[49]\t3GPP TS 26.532: \"Data Collection and Reporting; Protocols and Formats\".\n[50]\t3GPP TS 29.522: \"5G System. Network Exposure Function Northbound APIs; Stage 3\".\n[51]\t3GPP TS 26.346: \"Multimedia Broadcast/Multicast Service (MBMS); Protocols and codecs\".\n[52]\t3GPP TS 26.347: \"Multimedia Broadcast/Multicast Service (MBMS); Application Programming Interface and URL\".\n[53]\tIETF draft-bhutton-json-schema-validation: \"JSON Schema Validation: A Vocabulary for Structural Validation of JSON\", June 2022.\n[54]\tIETF RFC 3339: \"Date and Time on the Internet: Timestamps\", July 2002.\n[55]\t3GPP 29.591: \"Network Exposure Function Southbound Services; Stage 3\".\n",
            "summary": "",
            "tables": [],
            "figures_meta_data": [],
            "subsections": []
        },
        {
            "title": "3\tDefinitions of terms, symbols and abbreviations",
            "description": "",
            "summary": "",
            "tables": [],
            "figures_meta_data": [],
            "subsections": [
                {
                    "title": "3.1\tTerms",
                    "description": "",
                    "summary": "",
                    "text_content": "For the purposes of the present document, the terms given in 3GPP TR 21.905 [1] and the following apply. A term defined in the present document takes precedence over the definition of the same term, if any, in 3GPP TR 21.905 [1].\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "3.2\tSymbols",
                    "description": "",
                    "summary": "",
                    "text_content": "Void.\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "3.3\tAbbreviations",
                    "description": "",
                    "summary": "",
                    "text_content": "For the purposes of the present document, the abbreviations given in 3GPP TR 21.905 [1] and the following apply. An abbreviation defined in the present document takes precedence over the definition of the same abbreviation, if any, in 3GPP TR 21.905 [1].\n5GMS\t5G Media Streaming\n5GMSd\t5GMS downlink\n5GMSu\t5GMS uplink\n5GMSA\t5GMS Architecture\n5GMS EAS\tEdge-enabled 5GMS Application Server\nBMFF\t(ISO) Base Media File Format\nABR\tAdaptive Bit Rate\nACR\tApplication Context Relocation\nAF\tApplication Function\nANBR\tAccess Network Bit rate Recommendation\nAS\tApplication Server\nCDN\tContent Delivery Network / Content Distribution Network\nCGI\tCell Global Identifier\nCMAF\tCommon Media Application Format\nCRUD\tCreate, Read, Update, Delete\nCNAME\tCanonical Name\nCORS\tCross-Origin Resource Sharing\nCRL\tCertificate Revocation List\nDASH\tDynamic Adaptive Streaming over HTTP\nDER\tDistinguished Encoding Rule\nDNN\tDomain Name News\nDNS\tDomain Name Server\nEAS\tEdge Application Server\nECGI\tE-UTRAN Cell Global Identifier\nECMA\tEuropean Computer Manufacturers Association\nEES\tEdge Enabler Server\nFQDN\tFully Qualified Domain Name\nGPSI\tGeneric Public Subscription Identifier\nHLS\tHTTP Live Streaming\nISO\tInternational Organization for Standardization\nJSON\tJavaScript Object Notation\nLCID\tLogical Channel IDentifier\nMFBR\tMaximum Flow Bit Rate\nMIME\tMultipurpose Internet Mail Extensions\nMNO\tMobile Network Operator\nMPD\tMedia Presentation Description\nMSISDN\tMobile Subscriber ISDN number\nNCGI\tNR Cell Global Identifier\nNEF\tNetwork Exposure Function\nOAM\tOperations, Administration and Maintenance\nPCC\tPolicy Control and Charging\nPCF\tPolicy Control Function\nPEM\tPrivacy-Enhanced Mail\nPFD\tPacket Flow Description\nPFDF\tPacket Flow Description Function\nQoE\tQuality of Experience\nQoS\tQuality of Service\nSDF\tService Data Flow\nSHA\tSecure Hash Algorithm\nTLS\tTransport Layer Security\nURI\tUniform Resource Identifier\nURL\tUniform Resource Locator\nUTC\tCoordinated Universal Time\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                }
            ]
        },
        {
            "title": "4\tProcedures for Downlink Media Streaming",
            "description": "",
            "summary": "",
            "tables": [],
            "figures_meta_data": [],
            "subsections": [
                {
                    "title": "4.1\tGeneral",
                    "description": "",
                    "summary": "",
                    "text_content": "This clause defines all procedures for Downlink Media Streaming using the different 5G Media Streaming Reference Points.\nNOTE:\tThe descriptions of certain M1 interface procedures in clause 4.3, and of certain M5 interface procedures in clause 4.7, indicate applicability of those procedures to both downlink and uplink media streaming. This avoids redundant duplication of normative text in clause 5, regarding M1 and M5 procedures for uplink media streaming.\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "4.2\tAPIs relevant to Downlink Media Streaming",
                    "description": "",
                    "summary": "",
                    "text_content": "Table 4.2-1 summarises the APIs used to provision and use the various downlink media streaming features specified in TS 26.501 [2].\nTable 4.2-1: Summary of APIs relevant to downlink media streaming features\n\n",
                    "tables": [
                        {
                            "description": "Table 4.2-1: Summary of APIs relevant to downlink media streaming features",
                            "table number": 3,
                            "summary": "",
                            "name": ""
                        }
                    ],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "4.3\tProcedures of the M1 (5GMS Provisioning) interface",
                    "description": "",
                    "summary": "",
                    "text_content": "",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": [
                        {
                            "title": "4.3.1\tGeneral",
                            "text_content": "A 5GMS Application Provider may use the procedures in this clause to provision the network for media streaming sessions that are operated by that 5GMS Application Provider. For downlink media streaming, these sessions may be DASH streaming sessions, progressive download sessions, or any other type of media streaming or distribution (e.g. HLS) sessions. For uplink media streaming, the content format and delivery protocol are defined by the 5GMSu Application Provider, and may be either non-fully standardized or employ standardized HTTP-based streaming of ISO BMFF content fragments as profiled by CMAF [39].\nThe M1 interface offers three different sets of procedures:\n-\tFor downlink media streaming, configuration of content ingest at M2d for onward distribution by the 5GMSd AS over M4d or via other distribution systems such as eMBMS: designed as an API that is equivalent to the functionality of a public CDN. For uplink media streaming, configuration of content egest at M2u for the media content received by the 5GMSu AS from the 5GMSu Client over M4u. The resource types involved in content hosting configuration are provisioning session (see clause 4.3.2), content hosting procedures (see clause 4.3.3), ingest protocols (see clause 4.3.4), content preparation template (see clause 4.3.5), and server certificates (see clause 4.3.6).\n-\tConfiguration of dynamic policies: allows the configuration of Policy Templates at M5 that can be applied to M4 downlink/uplink media streaming sessions.\n-\tConfiguration of reporting: permits the MNO to collect, at M5, QoE metrics and consumption reports about M4 downlink sessions, as well as permits the MNO to collect, at M5, QoE metrics reports about M4 uplink sessions.\nA 5GMS Application Provider may use any of these procedures, in any combination, to support its media streaming sessions.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "4.3.2\tProvisioning Session procedures",
                            "text_content": "Prior to configuring content hosting, dynamic policies, or reporting, the 5GMS Application Provider shall create a new Provisioning Session. The following CRUD operations are used to manage a provisioning session.\nThis procedure is used by the 5GMS Application Provider to create a new Provisioning Session. The 5GMS Application Provider shall use the HTTP POST method to create a new Provisioning Session. Upon successful creation, the 5GMS AF shall respond with a 201 (Created) response message that includes the resource identifier of the newly created Provisioning Session in the body of the reply and the URL of the resource, including its resource identifier, shall be returned as part of the HTTP Location header field.\nThis procedure is used by the 5GMS Application Provider to obtain the properties of the Provisioning Session from the 5GMS AF. The 5GMS Application Provider uses the GET method for this purpose.\nThe Update operation is not allowed on Provisioning Sessions.\nThis procedure is used by the 5GMS Application Provider to destroy a Provisioning Session. The 5GMS AF will release any associated resources, purge any cached data, delete all QoS and reporting configurations associated with this Provisioning Session. The 5GMS AF shall use the HTTP DELETE method for this purpose.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "4.3.3\tContent Hosting Provisioning procedures",
                            "text_content": "These procedures are used by the 5GMSd Application Provider and the 5GMSd AF on M1d to provision the content hosting feature for downlink streaming.\nThis procedure is used by the 5GMSd Application Provider to create a new Content Hosting Configuration. The 5GMSd Application Provider shall use the HTTP POST method for this purpose and the request message body shall include a ContentHostingConfiguration resource, as specified in clause 7.6.3.1.\n-\tIf the Content Hosting Configuration uses the Pull-based content ingest method, i.e. the pull attribute is set to True, then the IngestConfiguration.baseURL property shall be nominated by the 5GMSd Application Provider in the request message body. The 5GMSd AF shall return the IngestConfiguration.baseURL property value unchanged in its response message body.\n-\tIf the Content Hosting Configuration uses the Push-based content ingest method, i.e. the pull attribute is set to False, then the IngestConfiguration.baseURL property shall be nominated by the 5GMSd AF and returned in the response message body. It shall not be set by the 5GMSd Application Provider in the request message body.\nIn all cases, the DistributionConfiguration.baseURL property is read-only: it shall be omitted from the creation request and shall be assigned by the 5GMSd AF, allowing the value to be inspected by the 5GMSd Application Provider in the returned ContentHostingConfiguration resource representation, or by using the procedure specified in clause 4.3.3.3 below.\nIf the procedure is successful, the 5GMSd AF shall generate a resource identifier representing the new Content Hosting Configuration. In this case, the 5GMSd AF shall respond with a 201 (Created) HTTP response message and shall provide the URL to the newly created resource in the Location header field. The response message body may include a ContentHostingConfiguration resource (see clause 7.6.3.1) that represents the current state of the Content Hosting Configuration, including any fields set by the 5GMSd AF.\nWhen both properties are set in a given distribution configuration by the 5GMSd Application Provider, it is a requirement that the value of domain‌Name‌Alias matches one of the Subject Alternative Names in the Server Certificate resource referenced by certificateId (allowing for wildcard matching). When the certificateId property is set, if the domainNameAlias does not match one of the Subject Alternative Names in the Server Certificate, the 5GMSd AF shall respond with a 400 (Bad Request) response message.\nIf the procedure is otherwise unsuccessful, the 5GMSd AF shall provide a response code as defined in clause 6.3.\nThis procedure is used by the 5GMSd Application Provider to obtain the properties of an existing Content Hosting Configuration resource from the 5GMSd AF. The HTTP GET method shall be used for this purpose.\nIf the procedure is successful, the 5GMSd AF shall respond with a 200 (OK) response message that includes the ContentHostingConfiguration resource in the response message body.\nIf the procedure is not successful, the 5GMSd AF shall provide a response code as defined in clause 6.3.\nThe update operation is invoked by the 5GMSd Application Provider to modify the properties of an existing ContentHostingConfiguration resource. All writeable properties except domainNameAlias may be updated. The HTTP PATCH or HTTP PUT methods shall be used for the update operation.\nIf the procedure is successful, the 5GMSd AF shall respond with a 200 (OK) and provide the content of the resource in the response, confirming the successful update operation.\nWhen both properties are set in a given distribution configuration by the 5GMSd Application Provider, it is a requirement that the value of domain‌Name‌Alias matches one of the Subject Alternative Names in the Server Certificate resource referenced by certificateId (allowing for wildcard matching). When the certificateId is set, if the domainNameAlias does not match one of the Subject Alternative Names in the Server Certificate, the 5GMSd AF shall respond with a 400 (Bad Request) response message.\nIf the procedure is otherwise unsuccessful, the 5GMSd AF shall provide a response code as defined in clause 6.3.\nThis operation is used by the 5GMSd Application Provider to destroy a Content Hosting Configuration resource and to terminate the related distribution. The HTTP DELETE method shall be used for this purpose. As a result, the 5GMSd AF will release any associated network resources, purge any cached content, and delete any corresponding configurations.\nIf the procedure is successful, the 5GMSd AF shall respond with a 200 (OK) response message.\nIf the procedure is not successful, the 5GMSd AF shall provide a response code as defined in clause 6.3.\nThis operation is used by the 5GMSd Application Provider to purge content from the 5GMSd AS Content Hosting cache. The HTTP POST method shall be used for this purpose with a regular expression describing the media resource URLs to be purged provided in the body of the request, as specified in clause 7.6.4.3. As a result, the 5GMSd AF purges any cached content whose URL matches the specified regular expression.\nIf the procedure is successful, the 5GMSd AF shall respond with a 200 (OK) response message.\nIf the procedure is not successful, the 5GMSd AF shall provide a response code as defined in clauses 6.3 and 7.6.4.3.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "4.3.4\tContent Protocols Discovery procedures",
                            "text_content": "The set of downlink content ingest or uplink content egest protocols supported by the 5GMS AS at interface M2 is described by the ContentProtocols resource at M1, as specified in clause 7.5.3.1.\nThe Create operation is not permitted for the ContentProtocols resource.\nThis procedure is used by the 5GMS Application Provider to retrieve a list of content ingest protocols supported by the 5GMS AS. The HTTP GET method shall be used for this purpose.\nIf the procedure is successful, the 5GMS AF shall respond with a 200 (OK) response that includes a ContentProtocols resource in the response message body, as specified in clause 7.5.3.1. If the procedure is not successful, the 5GMS AF shall provide a response code as defined in clause 6.3.\nThe Update operation is not permitted for the ContentProtocols resource.\nThe Delete operation is not permitted for the ContentProtocols resource.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "4.3.5\tContent Preparation Template Provisioning procedures",
                            "text_content": "For downlink media streaming, the 5GMSd AS may be required to process content ingested at interface M2d before serving it on interface M4d. For uplink media streaming, the 5GMSu AS may be required to process content it receives from the 5GMSu Client before passing it to the 5GMSu Application Provider on the egest interface M2u. The content processing operations are specified in a Content Preparation Template resource, as specified in clause 7.4.2.\nThis procedure is used by the 5GMS Application Provider to register a new Content Preparation Template with a Provisioning Session. The 5GMS Application Provider shall use the HTTP POST method to upload a new Content Preparation Template resource. The MIME content type of the Content Preparation Template shall be supplied in the Content-Type HTTP request header.\nUpon successful creation, the 5GMS AF shall respond with a 201 (Created) response message and the URL of the newly created resource, including its resource identifier, shall be returned as part of the HTTP Location header field.\nIf the MIME content type indicated in Content-Type is not acceptable to the 5GMS AF, the creation of the Content Preparation Template resource shall fail with HTTP error response status code 415 (Unsupported Media Type).\nIf the 5GMS AF is unable to provision the resources indicated in the supplied Content Preparation Template, the creation operation shall fail with an HTTP response status code of 503 (Service Unavailable).\nIf the procedure is otherwise unsuccessful, the 5GMS AF shall provide a response code as defined in clause 6.3.\nThis procedure is used by the 5GMS Application Provider to download a copy of a Content Preparation Template resource from the 5GMS AF. The 5GMS Application Provider shall use the GET method for this purpose.\nIf the procedure is successful, the 5GMS AF shall respond with 200 (OK) and shall provide the requested resource in the HTTP message response body. The Content-Type response header shall have the same value as that supplied when the Content Preparation Template resource was created.\nIf the procedure is not successful, the 5GMS AF shall provide a response code as defined in clause 6.3.\nThe update procedure is used by the 5GMS Application Provider to modify or replace an existing Content Preparation Template resource. The HTTP PATCH or HTTP PUT methods shall be used for the update operation.\nIf the procedure is successful, the 5GMS AF shall respond with a 200 (OK) and provide the content of the resource in the response, reflecting the successful update operation.\nIf the MIME content type indicated in Content-Type is not acceptable to the 5GMS AF, the creation of the Content Preparation Template resource shall fail with HTTP error response status code 415 (Unsupported Media Type).\nIf the 5GMS AF is unable to provision the resources indicated in the supplied Content Preparation Template, the update operation shall fail with an HTTP response status code of 503 (Service Unavailable).\nIf the procedure is otherwise unsuccessful, the 5GMS AF shall provide a response code as defined in clause 6.3.\nThis operation is used by the 5GMS Application Provider to destroy a Content Preparation Template resource. The HTTP DELETE method shall be used for this purpose.\nIf the procedure is successful, the 5GMS AF shall respond with a 200 (OK) response message.\nIf the procedure is not successful, the 5GMS AF shall provide a response code as defined in clause 6.3. If the Content Preparation Template is in use as part of a Content Hosting Configuration, the procedure shall fail with HTTP error response status code 409 (Conflict).\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "4.3.6\tServer Certificate Provisioning procedures",
                            "text_content": "Each X.509 server certificate [8] presented by the 5GMSd AS at reference point M4d or at reference point xMB-U is represented by a Server Certificate resource at M1d. The Server Certificates Provisioning API as specified in clause 7.3 enables a Server Certificate resource to be created within the scope of a Provisioning Session, and subsequently referenced by a Content Hosting Configuration created in the scope of the same Provisioning Session. That API supports two alternative provisioning methods for Server Certificate resources: one in which a certificate is generated by the 5GMS System operator on behalf of the 5GMSd Application Provider; the other in which a certificate is generated by the 5GMSd Application Provider from a Certificate Signing Request solicited from the 5GMSd AF. Both methods shall be supported by implementations of the 5GMSd AF.\nNOTE:\tAs a consumer of media from the 5GMSd AS in a combined architecture using 5GMS and eMBMS, the BM-SC needs to be able to trust the content it is receiving comes from a bona fide source. This issue is left to implementation.\nThis procedure is used by the 5GMSd Application Provider to request that the 5GMS System generates a new X.509 certificate [8] on its behalf within the scope of a Provisioning Session. In this case, the certificate's Common Name (CN) is assigned in a domain under the control of the 5GMSd System operator and the use of supplementary domain name aliases is not supported. The first Subject Alternative Name (subjectAltName) extension field of the certificate should be identical to its Common Name. Both fields may include a single wildcard (\"*\") character at the start to indicate applicability to several different subdomains of the same domain.\nNOTE 1:\tModern TLS client implementations ignore the obsolete Common Name (CN) field of the X.509 certificate in favour of the first Subject Alternative Name (subjectAltName) extension field.\nThe 5GMSd Application Provider shall use the HTTP POST method to create a new Server Certificate resource. Upon successful creation, the 5GMSd AF shall respond with a 201 (Created) response message and the URL of the resource, including its resource identifier, shall be returned in the HTTP Location header. The response message body may optionally include a copy of the X.509 certificate corresponding to the newly created Server Certificate resource, as specified in clause 7.3.3.2.\nNOTE 2:\tThe X.509 certificate corresponding to the newly created Server Certificate resource may not be available immediately for interrogation and use. See clause 4.3.6.4 below for more details.\nIf the procedure is not successful, the 5GMSd AF shall provide a response code as defined in clause 6.3.\nWhen the Server Certificate resource is subsequently referenced by a Content Hosting Configuration in the scope of the same Provisioning Session, the 5GMSd AF shall ensure that the canonical domain name of the 5GMSd AS is a Fully-Qualified Domain Name (FQDN) that matches the Common Name and the first Subject Alternative Name in the referenced Server Certificate resource.\nThis procedure is used by the 5GMSd Application Provider to solicit a Certificate Signing Request (CSR) from the 5GMSd AF for the purpose of generating an X.509 certificate [8] independently of the 5GMSd System. In this case, the certificate's Common Name (CN) is assigned in a domain under the control of the 5GMSd Application Provider itself, or that of a third party acting on its behalf. The first Subject Alternative Name (subjectAltName) extension field of the certificate should be identical to its Common Name. The CN and subjectAltName fields may include a single wildcard (\"*\") character at the start to indicate applicability to several different subdomains of the same domain.\nNOTE 1:\tModern TLS client implementations ignore the obsolete Common Name (CN) field of the X.509 certificate in favour of the first Subject Alternative Name (subjectAltName) extension field.\nThe 5GMSd Application Provider shall separately arrange for the FQDN carried in the Common Name of the certificate generated, or those of all Subject Alternative Name (subjectAltName) extensions in the same certificate (see section 4.2.1.6 of RFC 5280 [20]), to resolve to the address of a 5GMSd AS in the target 5GMS System.\nThe 5GMSd Application Provider may specify additional domains in its certificate reservation request to the 5GMSd AF. If provided, these domain name aliases shall be included in the returned Certificate Signing Request using the Subject Alternative Name (subjectAltName) extension (see section 4.2.1.6 of RFC 5280 [20]). In this case, the 5GMSd Application Provider is responsible for ensuring that any FQDN aliases it provisions in Content Hosting Configurations matching these additional domains resolve to the canonical domain name of the 5GMSd AS in the target 5GMS System.\nThe 5GMSd Application Provider shall use the HTTP POST method to create a new Server Certificate. Upon successful creation of the resource, the 5GMSd AF shall respond with a 201 (Created) response message and the URL of the resource, including its resource identifier, shall be returned in the HTTP Location header. The Content-Type response header and the body of the HTTP response message shall be as specified in clause 7.3.3.1.\nIf the procedure is not successful, the 5GMSd AF shall provide a response code as defined in clause 6.3.\nThis procedure is used by the 5GMSd Application Provider to download a Server Certificate resource for inspection. The HTTP GET method shall be used for this purpose. If the requested resource exists and is populated with an X.509 certificate [8], the 5GMSd AF shall respond with 200 (OK) and shall return the requested Server Certificate in accordance with clause 7.3.3.2.\nIn the case where the X.509 certificate was provisioned by the 5GMSd System on behalf of the 5GMSd Application Provider according to clause 4.3.6.2 above, the HTTP response 503 (Service Unavailable) shall be returned until such time as the X.509 certificate is generated and available for download. The optional HTTP response header Retry-After should be included in such a response, indicating when the certificate is expected to become available for inspection and use.\nIn cases where the X.509 certificate is to be generated by the 5GMSd Application Provider from a Certificate Signing Request obtained according to clause 4.3.6.3 above, the HTTP response 204 (No Content) shall be returned until such time as the X.509 certificate has been uploaded using the procedure specified in clause 4.3.6.5 below.\nThis procedure is used by a 5GMSd Application Provider to upload an X.509 certificate [8] that it has generated in response to a Certificate Signing Request solicited using the reservation procedure specified in clause 4.3.6.3 above. The HTTP PUT method shall be used for this purpose. The Content-Type request header and the body of the HTTP request message shall be as specified in clause 7.3.3.2.\nThe 5GMSd AF shall verify that the party originating the upload is the same party that reserved the Server Certificate resource using the procedure specified in clause 4.3.6.3 above before accepting the supplied X.509 certificate. The 5GMSd AF shall also verify that the X.509 certificate uploaded corresponds to the Certificate Signing Request it issued for the Server Certificate resource in question. If there is a mismatch on either count, the HTTP response 403 (Forbidden) shall be returned.\nAttempting to upload an X.509 certificate to a Server Certificate resource that has not been reserved shall elicit a 404 (Not Found) HTTP response.\nWhen the Server Certificate resource is subsequently referenced by a Content Hosting Configuration in the scope of the same Provisioning Session, the 5GMS Application Provider shall set the domainNameAlias property of all distribution configurations to a Fully-Qualified Domain Name (FQDN) that matches one of the Subject Alternative Names in the referenced Server Certificate resource.\nNOTE:\tEven if multiple distribution configurations in the same Content Hosting Configuration reference the same Server Certificate resource, they may each choose a different matching domain name alias.\nUpdating a previously uploaded Server Certificate is not permitted for security reasons. Any attempt to do so using the PUT method shall result in the HTTP response 405 (Method Not Allowed).\nTo supply a replacement X.509 certificate, for example when a previously supplied certificate is shortly due to expire, the 5GMSd Application Provider should instead use one of the procedures specified in clause 4.3.6.2 or 4.3.6.3 above to create or reserve a new Server Certificate resource and, once the certificate is available for use, update the Content Hosting Configuration to reference it.\nThis procedure is used to remove a Server Certificate resource from a Provisioning Session. The HTTP DELETE method shall be used for this purpose. On success, the HTTP response 200 (OK) or 204 (No content) shall be returned and afterwards the identifier of the Service Certificate resource is no longer valid.\nOnly the party that created (see clause 4.3.6.2) or reserved (see clause 4.3.6.3) the Server Certificate resource is permitted to destroy it. Any attempt by another party to destroy a Server Certificate resource shall elicit the HTTP response 405 (Method Not Allowed).\nThe HTTP response 409 (Conflict) shall be returned if an attempt is made to destroy a Server Certificate resource that is currently referenced by a Content Hosting Configuration resource.\nAttempting to destroy a Server Certificate resource that has been reserved but never uploaded shall elicit a 200 (OK) HTTP response. In this case, the 5GMSd AF should release any resources associated with the reservation.\nIf the procedure is not successful, the 5GMSd AF shall provide a response code as defined in clause 6.3.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "4.3.7\tDynamic Policy Provisioning procedures",
                            "text_content": "These procedures are used by the 5GMS Application Provider to configure the Policy Templates for streaming sessions of a particular Provisioning Session.\nFigure 4.3.7.1-1 below is a state diagram showing the life-cycle of a Policy Template resource.\nThe figure depicts a policy template resource state diagram, which illustrates the various components and their relationships within a policy template. The diagram includes a policy template, resource, and state, with arrows indicating the flow of data and control. The diagram is a visual representation of the complex network of policies and resources involved in a policy template, providing a clear understanding of the system's structure and functionality.\nFigure 4.3.7.1-1: Policy Template Resource State Diagram\nSince Policy Templates require 5GMS System operator verification, a Policy Template resource that is newly created cannot be used immediately. Upon creation, a Policy Template resource shall be in the PENDING state. Once all mandatory properties are provided, the 5GMS AF triggers validation. If the Policy Template is not deemed to be valid by the operator of the 5GMS System, it shall move to the INVALID state, from where it can be updated to remedy the defect. Once it has been successfully validated by the 5GMS System operator, a Policy Template resource shall take the READY state, indicating that it may be applied to media streaming sessions. If it is subsequently updated by the 5GMS Application Provider, a Policy Template resource shall return to the PENDING state, awaiting revalidation by the operator of the 5GMS System. Finally, a Policy Template resource may be SUSPENDED by the 5GMS System operator, e.g. in case of a violation of the usage terms or for some other reasons, which renders it unusable. The update of any property moves the state into PENDING and triggers revalidation.\nA Policy Template resource may be destroyed when it is in any of the abovementioned states.\nThe 5GMS AF shall verify the status of a Policy Template resource prior to allowing a Dynamic Policy Instance to instantiate it. Only a Policy Template resource in the READY state is eligible to be instantiated in this way.\nThe 5GMS AF shall indicate the current state of a Policy Template in the Policy Template resource in machine-readable form as well as indicating a human-readable reason for this state.\nThis procedure is used by the 5GMS Application Provider to create a new Policy Template resource. The HTTP POST method shall be used for this purpose.\nIf the procedure is successful, the 5GMS AF shall generate a resource identifier to uniquely identify the newly created Policy Template resource. In that case, it shall respond with a 201 (Created) HTTP response message and provide the URL to the newly created resource in the Location header field.\nIf the procedure is not successful, the 5GMS AF shall provide a response code as defined in clause 6.3.\nThe default state of a newly created Policy Template resource is PENDING. If all mandatory property values have been provided, the Policy Template resource is eligible for validation.\nThis procedure is used by the 5GMS Application Provider and other 5GMS AFs to query the properties of an existing Policy Template resource from the 5GMS AF. The HTTP GET method shall be used for this purpose.\nIf the procedure is successful, the 5GMS AF shall respond with a 200 (OK) response that includes a copy of the Policy Template resource in the response message body.\nIf the procedure is not successful, the 5GMS AF shall provide a response code as defined in clause 6.3.\nThe update operation is invoked by the 5GMS Application Provider to modify the properties of an existing Policy Template resource. All available properties except state may be updated. The HTTP PATCH or HTTP PUT methods shall be used for the update operation.\nAny update to the Policy Template resource will change its state back to PENDING, which makes it temporarily unusable. If all mandatory property values have been provided, the Policy Template is eligible for revalidation.\nIf the procedure is successful, the 5GMS AF shall respond with a 200 (OK) response message that includes a copy of the Policy Template resource in the response message body. Modifications to read-only properties, such as changes to the state of a Policy Template, shall be rejected with a 403 (Forbidden) HTTP response.\nIf the procedure is not successful, the 5GMS AF shall provide a response code as defined in clause 6.3.\nThis operation is used by the 5GMS Application Provider to destroy a Policy Template resource. The HTTP DELETE method shall be used for this purpose. As a result, the 5GMS AF will remove the Policy Template from any Provisioning Sessions that reference it.\nCurrently active media streaming sessions using the destroyed Policy Template, if any exist, shall be stopped by the removal of the Policy Template.\nIf the procedure is successful, the 5GMS AF shall respond with a 200 (OK) response message.\nIf the procedure is not successful, the 5GMS AF shall provide a response code as defined in clause 6.3.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "4.3.8\tConsumption Reporting Configuration procedures",
                            "text_content": "These procedures are used by the 5GMSd Application Provider to activate and to configure consumption reporting. This clause defines the basic procedures. More details are provided in clause 7.7.\nThis procedure is used by the 5GMSd Application Provider to activate consumption reporting for a particular Provisioning Session. The 5GMSd Application Provider shall use the HTTP POST method to activate the consumption reporting procedure and to transmit the Consumption Reporting Configuration to the 5GMSd AF. Upon successful operation, the 5GMSd AF shall respond with a 201 (Created) response message and the same resource URL shall be returned in the Location header field.\nIf the procedure is not successful, the 5GMSd AF shall provide a response code as defined in clause 6.3.\nThis procedure is used by the 5GMSd Application Provider to obtain the current Consumption Reporting Configuration from the 5GMSd AF. The 5GMSd Application Provider uses the GET method for this purpose.\nThe update operation is invoked by the 5GMSd Application Provider to modify the current Consumption Reporting Configuration. All available parameters may be updated. The HTTP PATCH or HTTP PUT methods shall be used for the update operation.\nIf the procedure is successful, the 5GMSd AF shall respond with a 200 (OK) reflecting the successful update operation.\nIf the procedure is not successful, the 5GMSd AF shall provide a response code as defined in clause 6.3.\nThis operation is used by the 5GMSd Application Provider to terminate the related consumption reporting procedure. The HTTP DELETE method shall be used for this purpose. As a result, the 5GMSd AF will release any associated resources, purge any cached data, and delete any corresponding configurations.\nIf the procedure is successful, the 5GMSd AF shall respond with a 200 (OK) response message. If the procedure is not successful, the 5GMSd AF shall provide a response code as defined in clause 6.3.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "4.3.9\tMetrics Reporting Provisioning procedures",
                            "text_content": "These procedures are used by the 5GMS Application Provider to configure QoE metrics reporting functionality associated with downlink or uplink media streaming. This clause defines the basic procedures. More details are provided in clause 7.8.3.1.\nA given instance of a Metrics Reporting Configuration resource is identified by the metricsReportingConfigurationId property of the MetricsReportingConfiguration resource, The properties of that resource, as described in clause 7.8.3.1, pertain to metrics collection and reporting by the Media Session Handler to the 5GMS AF.\nThis procedure is used by the 5GMS Application Provider to create a Metrics Reporting Configuration resource for a particular Provisioning Session. The 5GMS Application Provider shall use the HTTP POST method for this purpose and the request message body may include a MetricsReportingConfiguration resource, as specified in clause 7.8.3.1. Upon successful operation, the 5GMS AF shall respond with a 201 (Created) response message and the resource URL for the newly-created Metrics Reporting Configuration resource shall be returned in the Location header field. If the procedure is unsuccessful, the 5GMS AF shall provide a response code as defined in clause 6.3.\nThis procedure may be performed multiple times to provision different Metrics Reporting Configurations in the scope of a particular Provisioning Session. Each such configuration resource is represented by a different value of metricsReportingConfigurationId.\nThis procedure is used by the 5GMS Application Provider to obtain the properties of an existing Metrics Reporting Configuration resource from the 5GMS AF. The 5GMS Application Provider shall use the GET method for this purpose. If successful, the 5GMS AF shall respond with a 200 (OK) and the requested MetricsReportingConfiguration resource (see clause 7.8.3.1) shall be returned in the body of the HTTP response message. If the procedure is unsuccessful, the 5GMS AF shall provide a response code as defined in clause 6.3.\nThe update operation is invoked by the 5GMS Application Provider to initially upload the Metrics Reporting Configuration resource, or in the case of an existing Metrics Reporting Configuration resource, to entirely replace or modify certain properties of that resource. All available properties may be updated. The HTTP PATCH or HTTP PUT methods shall be used for the update operation.\nIf the procedure is successful, the 5GMS AF shall respond with a 200 (OK) reflecting the successful update operation. If the procedure is unsuccessful, the 5GMS AF shall provide a response code as defined in clause 6.3.\nThis operation is used by the 5GMS Application Provider to destroy a Metrics Reporting Configuration resource and to terminate the related metrics reporting procedure. The HTTP DELETE method shall be used for this purpose. As a result, the 5GMS AF should release any associated resources, discard any pending metrics reports, and delete any corresponding configurations.\nIf the procedure is successful, the 5GMS AF shall respond with a 200 (OK) response message. If the procedure is unsuccessful, the 5GMS AF shall provide a response code as defined in clause 6.3.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "4.3.10\tEdge Resources Provisioning Procedures",
                            "text_content": "These procedures are used by the 5GMS Application Provider and the 5GMS AF at reference point M1d to provision edge resources for downlink streaming.\nNOTE:\tThe requirements on an edge-enabled 5GMS AF are defined in clause 4.5.2 of TS 26.501 [2].\nThis procedure is used by the 5GMS Application Provider to create a new Edge Resources Provisioning Configuration. The 5GMS Application Provider shall use the HTTP POST method for this purpose and the request message body shall include an EdgeResourcesConfiguration resource, as specified in clause 7.10.3.1.\n-\tIf the edgeManagmentMode is set to EM_AF_DRIVEN (indicating AF-driven edge resource management), the 5GMS AF is responsible for requesting and managing the required edge resources and for handling EAS relocation in relation to media streaming sessions that fall within the scope of the parent Provisioning Session.\n-\tIf the edgeManagementMode is set to EM_CLIENT_DRIVEN (indicating client-driven edge resource management), the 5GMS AF shall only request edge resources based on requests from the EEC instantiated in the Media Session Handler at reference point EDGE-1.\nIf the procedure is successful, the 5GMS AF shall generate a resource identifier representing the new Edge Resources Provisioning Configuration. In this case, the 5GMS AF shall respond with a 201 (Created) HTTP response message and shall provide the URL to the newly created resource in the Location header field. The response message body may include an EdgeResourcesConfiguration resource (see clause 7.10.3.1) that represents the current state of the Edge Resources Provisioning Configuration, including any fields set by the 5GMS AF.\nIf the procedure is not successful, the 5GMS AF shall provide a response code as defined in clause 6.3.\nThis procedure is used by the 5GMS Application Provider to retrieve the current values of the properties of an existing Edge Resources Provisioning Configuration resource from the 5GMS AF. The HTTP GET method shall be used for this purpose.\nIf the procedure is successful, the 5GMS AF shall respond with a 200 (OK) response message that includes the EdgeResourcesConfiguration resource in the response message body.\nIf the procedure is not successful, the 5GMS AF shall provide a response code as defined in clause 6.3.\nThe update operation is invoked by the 5GMS Application Provider to modify the properties of an existing EdgeResourcesConfiguration resource. All writeable properties except edgeManagementMode may be updated. The HTTP PATCH or HTTP PUT methods shall be used for the update operation.\nIf the procedure is successful, the 5GMS AF shall respond with a 200 (OK) and provide the content of the resource in the response, confirming the successful update operation.\nIf the procedure is not successful, the 5GMS AF shall provide a response code as defined in clause 6.3.\nThis operation is used by the 5GMS Application Provider to destroy an Edge Resources Provisioning Configuration resource. The HTTP DELETE method shall be used for this purpose. This operation makes the configuration unsuable for future media streaming sessions, but it does not affect any ongoing media streaming sessions.\nIf the procedure is successful, the 5GMS AF shall respond with a 200 (OK) response message.\nIf the procedure is not successful, the 5GMS AF shall provide a response code as defined in clause 6.3.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "4.3.11\tEvent Data Processing Provisioning procedures",
                            "text_content": "These procedures are used by the 5GMS Application Provider to configure the collection and processing of UE data related to 5G Media Streaming over reference point M1 (as defined in TS 26.531 [46]) and to restrict its exposure over reference points R5 and R6 by configuring the Data Collection AF instantiated in the 5GMS AF (as defined in clause 4.7 of TS 26.501 [2]) with one or more Event Data Processing Configurations and Data Access Profiles for a particular Event ID.\nEach instance of a Data Access Profile specifies a set of data processing operations to be performed by the Data Collection AF on its collected UE data in order to synthesize the event data to be exposed to a specific Event service consumer entity. In this release, eligible Event service consumer entities of 5GMS event data are the NWDAF, the Event Consumer AF and the NEF.\nThe Event Data Processing Provisioning API is specified in clause 7.11.\nThis procedure is used by the 5GMS Application Provider to create a new Event Data Processing Configuration in the form of one or more Data Access Profiles. The 5GMS Application Provider shall use the HTTP POST method for this purpose and the request message body shall include an EventDataProcessingConfiguration resource, as specified in clause 7.11.3.\nIf the procedure is successful, the 5GMS AF shall generate a resource identifier representing the new Event Data Processing Configuration. In this case, the 5GMS AF shall respond with a 201 (Created) response message and shall provide the URL to the newly created resource in the Location header field.\nIf the procedure is unsuccessful, the 5GMS AF shall provide a response code as defined in clause 6.3.\nThis procedure is used by the 5GMS Application Provider to obtain the properties of an existing Event Data Processing Configuration resource from the 5GMS AF. The HTTP GET method shall be used for this purpose.\nIf the procedure is unsuccessful, the 5GMS AF shall provide a response code as defined in clause 6.3.\nThis operation is invoked by the 5GMS Application Provider to entirely replace or modify certain properties of an existing Event Data Processing Configuration resource. All available properties may be updated. The HTTP PATCH or HTTP PUT methods shall be used for this purpose.\nIf the operation is successful, the 5GMS AF shall respond with a 200 (OK) HTTP response message that includes a representation of the current state of the target resource in the message body to confirm successful update.\nIf the procedure is not successful, the 5GMS AF shall provide a response code as defined in clause 6.3.\nThis operation is used by the 5GMS Application Provider to destroy an existing Event Data Processing Configuration resource and to terminate the related distribution. The HTTP DELETE method shall be used for this purpose. As a result, the Data Collection AF shall process any reported UE data still outstanding and shall delete any corresponding data collection and reporting client configurations.\nIf the procedure is successful, the 5GMS AF shall respond with a 200 (OK) response message.\nIf the procedure is unsuccessful, the 5GMS AF shall provide a response code as defined in clause 6.3.\n",
                            "figures_meta_data": [],
                            "tables": []
                        }
                    ]
                },
                {
                    "title": "4.4\tProcedures of the M2d (5GMS content ingest) interface",
                    "description": "",
                    "summary": "",
                    "text_content": "The following 5GMS AS content ingest protocols are specified by the present document at reference point M2d to support downlink media streaming:\n-\tAn HTTP pull-based content ingest protocol is specified in clause 8.2, including specific handling for HTTP redirects issued to the 5GMS AS by the 5GMS Application Provider's origin server.\n-\tA DASH-IF push-based content ingest protocol is specified in clause 8.3.\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "4.5\tProcedures of the M3d interface",
                    "description": "",
                    "summary": "",
                    "text_content": "Interface M3d is internal and no procedures on this interface are specified.\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "4.6\tProcedures of the M4d (Media Streaming) interface",
                    "description": "",
                    "summary": "",
                    "text_content": "",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": [
                        {
                            "title": "4.6.1\tProcedures for DASH Session",
                            "text_content": "This procedure is used by a 5GMSd Client to establish a DASH session via the M4d interface. In order to establish such a session, the 5GMSd AS shall host an MPD as defined in ISO/IEC 23009-1 [32] or TS 26.247 [4] and the MPD URL is known to the 5GMSd Client typically using M8d.\nThe Media Player receives an MPD URL from the 5GMSd-Aware Application through M7d by methods defined in clause 13. The Media Player shall send an HTTP GET message to the 5GMSd AS including the URL of the MPD resource. On success, the 5GMSd AS shall respond with a 200 (OK) message that includes the requested MPD resource.\nAdditional procedures for reactions to different HTTP status codes are provided in TS 26.247 [4], clause A.7 and ISO/IEC 23009-1 [32] clause A.7.\nAdditional procedures for handling partial file responses are provided in TS 26.247 [4], clause A.9.\nThis information is provided through M7d to the application for selection. In addition, the currently used service description parameters are provided as status information through M7d in order for the Media Session Handler to make use of this information, for example for Dynamic Policy and Network Assistance.\nThe detailed handling of service description information is documented in clause 13.2 of the present document.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "4.6.2\tProcedures for Progressive Download Session",
                            "text_content": "This procedure is used by a 5GMSd client to establish a Progressive Download session via the M4d interface. In order to establish such a session, the 5GMSd AS shall host an 3GP/MP4 file as defined in TS 26.247 [4]. The 3GP/MP4 URL is known to the Media Player (in this case a progressive download player), typically by using M8d.\nThe Media Player receives a URL from the 5GMSd-Aware Application through M7d by methods defined in clause 13. The Media Player shall send an HTTP GET message to the 5GMSd AS including the URL of the 3GP/MP4 resource. On success, the 5GMSd AS shall respond with a 200 (OK) message that includes the requested 3GP/MP4 resource.\nAdditional procedures for reactions to different HTTP status codes are provided in TS 26.247 [4].\n",
                            "figures_meta_data": [],
                            "tables": []
                        }
                    ]
                },
                {
                    "title": "4.7\tProcedures of the M5 (Media Session Handling) interface",
                    "description": "",
                    "summary": "",
                    "text_content": "",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": [
                        {
                            "title": "4.7.1\tIntroduction",
                            "text_content": "The M5 APIs are used by a Media Session Handler within a 5GMS Client to invoke services relating to downlink or uplink media streaming at the 5GMS AF.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "4.7.2\tProcedures for Service Access Information",
                            "text_content": "Service Access Information is the set of parameters and addresses needed by the 5GMSd Client to activate reception of a downlink media streaming session or by a 5GMSu Client to activate an uplink media streaming session for contribution. The data model of the ServiceAccessInformation resource acquired by the Media Session Handler of the 5GMS Client is shown in clause 11.2.3. Service Access Information additionally includes configuration information to allow the Media Session Handler to invoke procedures for dynamic policy (see clause 4.7.3), consumption reporting (clause 4.7.4), metrics reporting (clause 4.7.5) and network assistance (clause 4.7.6).\nFor downlink media streaming, the Media Session Handler may obtain Service Access Information from either the 5GMSd-Aware Application (via M6d) or the 5GMSd AF (via M5d). In the former case, the Service Access Information is initially acquired by the 5GMSd-Aware Application from the 5GMSd Application Provider via M8d. In the latter case, the Service Access Information is derived by the 5GMSd AF from the Provisioning Session established via M1d.\nTypically, the Service Access Information for downlink media streaming includes a media entry point (e.g. a URL to a DASH MPD or a URL to a progressive download file) that can be consumed by the Media Player and is handed to the Media Player through M7d.\nIf an Edge Resources Configuration with client-driven management (EM_CLIENT_DRIVEN) is provisioned in the applicable Provisioning Session, the 5GMSd AF shall convey the ClientEdgeResources‌Configuration to the Media Session Handler (via M5d) as part of the Service Access Information.\nNOTE:\tThe requirements on an edge-enabled Media Session Handler are defined in clause 4.5.2 of TS 26.501 [2].\nFor downlink media streaming exclusively via eMBMS and for hybrid 5GMSd/eMBMS services as defined in clauses 5.10.2 and 5.10.5 respectively of TS 26.501 [2], the Service Access Information indicates that the 5GMSd Client acts as an MBMS-Aware Application.\nFor dynamically provisioned downlink media streaming via eMBMS as defined in clause 5.10.6 of TS 26.501 [2], the 5GMSd AS creates a presentation manifest that is regularly polled by the Media Player for a potential update. When an eMBMS User Service carrying the 5GMSd content is dynamically provisioned or removed by the 5GMSd AF, the 5GMSd AS shall update the presentation manifest with the locations where the updated manifest and the media segments are now available, for example to add or change to the media server in the MBMS Client.\nFor uplink media streaming, the 5GMSu Client may obtain Service Access Information from either the 5GMSu-Aware Application (via M6u/M7u) or the 5GMSu AF (via M5u). In the former case, the Service Access Information is initially acquired by the 5GMSu-Aware Application from the 5GMSu Application Provider via M8u. In the latter case, the Service Access Information is derived by the 5GMSu AF from the Provisioning Session established via M1u.\nThis clause specifies the procedures whereby the 5GMS Client fetches Service Access Information from the 5GMS AF.\nThe Create operation is not allowed on Service Access Information.\nThis procedure shall be used by the Media Session Handler to acquire Service Access Information from the 5GMS AF. The Media Session Handler uses the GET method for this purpose.\nThe downlink or uplink media streaming session for which the Media Session Handler is requesting data is identified by a unique reference contained in the path of the URL, as specified in clause 11.2.2.\nOnce it has obtained an initial set of Service Access Information, the Media Session Handler shall periodically check for updated Service Access Information by issuing a conditional HTTP GET request containing either:\n-\tan If-None-Match request header with the value of the entity tag (ETag) that was returned with the most recently acquired ServiceAccessInformation resource; or else\n-\tan If-Modified-Since request header with the Last-Modified value of that most recently acquired resource.\nThe periodicity of polling for updated Service Access Information shall be guided by the value of the Expires and/or Cache-control: max-age headers that shall be included along with every response message for this procedure.\nThe Update operation is not allowed on Service Access Information.\nThe Destroy operation is not allowed on Service Access Information.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "4.7.3\tProcedures for dynamic policy invocation",
                            "text_content": "This procedure is used by a Media Session Handler to manage Dynamic Policy Instance resources via the M5 interface. A dynamic policy invocation consists of a Policy Template Id, flow description(s), a 5GMS Application Service Configuration Id and potentially other parameters, according to TS 26.501 clause 5.7.\nA Policy Template Id identifies the desired Policy Template to be applied to an application flow. A Policy Template includes properties such as specific QoS (e.g. background data) or different charging treatments. The 5GMS AF combines the information from the Policy Template with dynamic information from the Media Session Handler to gather a complete set of parameters to invoke the N33 or N5 API call. The Policy Template may contain for example the AF identifier.\nThe flow description allows the identification and classification of the media traffic, such as the packet filter sets given in clause 5.7.6 of [2].\nIn order to instantiate a new dynamic policy, the Media Session Handler shall first create a resource for the Dynamic Policy Instance on the 5GMS AF. When the Media Session Handler needs several dynamic policies, it repeats the step as often as needed.\nThe Media Session Handler creates a new Dynamic Policy Instance by sending an HTTP POST message to the 5GMS AF. The body of the HTTP POST message shall include a Provisioning Session Id, the Policy Template Id and the Service Data Flow description. The Service Data Flow description identifies the actual application flow(s) to be policed according to the Policy Template. If the operation is successful, the 5GMS AF creates a new resource URL representing the Dynamic Policy Instance. In this case, the 5GMS AF shall respond to the Media Session Handler with a 201 Created HTTP response message, including the URL for the newly created Dynamic Policy Instance resource as the value of the Location header field.\nWhen the Dynamic Policy Instance is successfully instantiated, the 5GMS AF triggers the creation of a corresponding policy in the 5G System. Depending on the selected sdfMethod, the 5GMS AF fills in a flowDescription object and / or provides an application identifier referring to a PFD (Packet Flow Description) object containing the domain name.\nNOTE 1:\tIt is not defined in this Release how a 5GMS AF in an external Data Network provides an application identifier.\nNOTE 2:\tIt is not defined in this Release how a 5GMS AF in an external Data Network selects a specific DNN or S-NSSAI. The Media Session Handler can modify the parameters of an existing Dynamic Policy Instance resource using either the HTTP PUT or PATCH methods, as appropriate to the desired update. The 5GMS AF shall trigger the appropriate actions towards other Network Functions like PCF or NEF when all information is set.\nThe Media Session Handler can destroy a Dynamic Policy Instance resource using the HTTP DELETE method. As a result, the 5GMS AF shall trigger the appropriate actions towards other Network Functions like PCF or NEF to remove the associated PCC rule.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "4.7.4\tProcedures for consumption reporting",
                            "text_content": "These procedures are used by the Media Session Handler and the Consumption Reporting functions of the 5GMSd Client to submit a consumption report via the M5d interface if Consumption Reporting is applied for a downlink streaming session.\nThe Service Access Information indicating whether Consumption Reporting is provisioned for downlink streaming sessions is described in clause 11.2.3. When the clientConsumptionReportingConfiguration.samplePercentage value is 100, the Media Session Handler shall activate the consumption reporting procedure. If the samplePercentage is less than 100, the Media Session Handler shall generate a random number which is uniformly distributed in the range of 0 to 100, and the Media Session Handler shall activate the consumption report procedure when the generated random number is of a lower value than the samplePercentage value.\nIf the consumption reporting procedure is activated, the Media Session Handler shall produce and submit a consumption report to the 5GMSd AF when any of the following conditions occur:\n-\tStart of consumption of a downlink media streaming session;\n-\tStop of consumption of a downlink media streaming session;\n-\tUpon determining the need to report ongoing 5GMS consumption at periodic intervals determined by the clientConsumptionReportingConfiguration.reportingInterval property.\n-\tUpon determining a location change, if the clientConsumptionReportingConfiguration.locationReporting property is set to True.\n-\tUpon determining an access network change (e.g., unicast to eMBMS, or vice versa), if the clientConsumptionReportingConfiguration.accessReporting property is set to True.\nWhenever a consumption report is produced, the Media Session Handler shall reset its reporting interval timer to the value of the client‌Consumption‌Reporting‌Configuration.‌reportingInterval property and it shall begin countdown of the timer again. Whenever the Media Session Handler stops the consumption of a downlink streaming session, it shall disable its reporting interval timer.\nIn order to submit a consumption report, the Media Session Handler shall send an HTTP POST message to the 5GMSd AF. If several 5GMSd AF addresses are listed in the client‌Consumption‌Reporting‌Configuration.‌serverAddresses array (see table 11.2.3.1-1), the Media Session Handler shall choose one at random and shall send the consumption report to the selected server endpoint. The request body shall be a ConsumptionReport structure, as specified in clause 11.3.3.1. The server shall respond with a 200 (OK) message to acknowledge successful processing of the consumption report.\nNOTE:\tIf the connection via M5d for consumption reporting is temporarily unavailable, the consumption reports are expected to be stored on the UE for some time until connectivity to the 5GMSd AF is restored and \tsent later to the 5GMSd AF as a collection. Details are left to implementation.\nThe Consumption Reporting API, defining the data formats and structures and related procedures for consumption reporting, is described in clause 11.3.\nThe consumption report shall comprise a time-ordered list of consumption reporting units. Each such unit shall describe the media selected for presentation during a continuous time period of a downlink media streaming session in terms of a start time and duration. The sequence of consumption reporting units shall be contiguous with no discontinuities in the reported timeline. When no media is being consumed (e.g., because the media streaming presentation is paused), the selected media shall still be indicated in the consumption reporting unit.\n-\tA consumption reporting unit shall be included in exactly one consumption report, although delivery of this report may be attempted more than once by the Media Session Handler.\n-\tA new consumption reporting unit shall be created when the media consumed changes or (if provisioned in the consumption reporting configuration per clause 4.3.8) when the network used to access media at reference point M4d changes.\n-\tThe last (or only) consumption reporting unit in every consumption report describes the media currently being consumed in the media streaming session and indicates in the duration property how long this media has been consumed so far.\n-\tIf there is no change in the media consumed when the next consumption report is sent to the 5GMS AF, this consumption reporting unit shall be repeated as the first (and possibly only) consumption reporting unit in the next report with the same start time but with its duration updated to reflect the period of time that the media has been consumed up to the point of reporting.\n-\tThe last (or only) consumption reporting unit in the final consumption report sent to the 5GMS AF at the end of the downlink media streaming session therefore describes the last media consumed.\nThe location(s) of the UE when the media was consumed shall be included in the consumption reporting unit if the locationReporting property in the Client Consumption Reporting Configuration is set to True.\nA reporting client identifier shall be included in the consumption report. If available to the Media Session Handler, its value should be a GPSI value as defined by TS 23.003 [7]. Otherwise, the reporting client identifier should be represented by a stable and globally unique string.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "4.7.5\tProcedures for metrics reporting",
                            "text_content": "The M5 procedures for QoE metrics reporting pertain to the combination of the provisioning of metrics collection and reporting in the Media Session Handler using relevant Service Access Information, and the sending of collected metrics by the Media Session Handler to the 5GMS AF in accordance with the configured metrics scheme(s). A metrics scheme may be 3GPP-defined or non-3GPP-defined.\nWhen the metrics collection and reporting feature is activated for a downlink media streaming session, one or more metrics configuration sets, each associated with a metrics scheme, may be provided to the 5GMS Client. A given metrics configuration set contains information such as the 5GMS AF address(es) to which metrics are to be sent by the Media Session Handler, metrics reporting interval, target percentage of media streaming sessions for which reports should be sent, and the set of metrics to be collected and reported. See TS 26.501 [2] for additional details.\nFor progressive download and DASH streaming services, the listed metrics in a given metrics configuration set are associated with the 3GPP metrics scheme and shall correspond to one or more of the metrics as specified in clauses 10.3 and 10.4, respectively, of TS 26.247 [4]. Metrics related to virtual reality media, as specified in clause 9.3 of TS 26.118 [42], may also be listed in the metrics configuration. Metrics related to eMBMS delivery, as specified in clause 9.4.6 of TS 26.346 [51], may also be listed in the metrics configuration.\nWhenever a metrics report is produced for a given metrics configuration, the Media Session Handler shall reset its reporting interval timer for that configuration to the value of the clientMetrics‌Reporting‌Configurations[].‌reportingInterval property and it shall begin countdown of the timer again. Whenever the Media Session Handler stops the consumption of a downlink streaming session, it shall disable its reporting interval timer for all metrics configurations.\nIn order to submit a metrics report, the Media Session Handler shall send an HTTP POST message to the 5GMS AF. If several 5GMS AF addresses are listed in the clientMetrics‌Reporting‌Configurations[].‌serverAddresses array (see table 11.2.3.1-1), the Media Session Handler shall choose one at random and shall send the metrics report to the selected server endpoint. The request body shall be formatted according to the metrics scheme indicated in clientMetrics‌Reporting‌Configurations[].‌scheme (see table 11.2.3.1-1), as specified in clause 11.4.3. The server shall respond with a 200 (OK) message to acknowledge successful processing of the metrics report.\nNOTE:\tIf the connection via M5 for metrics reporting is temporarily unavailable, the metrics reports are expected to be stored on the UE for some time until connectivity to 5GMS AF is restored and sent later to the 5GMS AF as a collection. Details are left to implementation.\nDetails of the metrics reporting API are provided in clause 11.4, and for 3GP-DASH based downlink media streaming services, the 3GPP-defined metrics reporting scheme and metrics report format are defined in clause 11.4.3.\nA reporting client identifier may be included in the metrics report. If available to the Media Session Handler, its value should be a GPSI value as defined by TS 23.003 [7]. Otherwise, the reporting client identifier should be represented by a stable and globally unique string.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "4.7.6\tProcedures for network assistance",
                            "text_content": "These procedures are used by the 5GMS Client to request Network Assistance from one of the 5GMS AF instances listed in the networkAssistanceConfiguration.serverAddresses property of the Service Access Information resource retrieved using the procedure in clause 4.7.2.3. Details of the APIs supporting these procedures are specified in clause 11.6.\nThe 5GMS Client first creates a Network Assistance Session with its chosen 5GMS AF instance. It provides information that will later be used by the 5GMS AF to request a particular network QoS to be applied by the PCF to one or more application data flows, and to recommend a bit rate to the 5GMS Client. This procedure is further specified in clause 11.6.4.1.\nThe NetworkAssistanceSession resource may be retrieved by the Media Session Handler using the procedure specified in clause 11.6.4.2.\nWhen a Network Assistance Session is created, the responding 5GMS AF instance may nominate an MQTT endpoint URL in the NetworkAssistanceSession.notificationURL property. The Media Session Handler may subscribe to the MQTT channel provided at this endpoint and receive notifications with an up-to-date bit rate recommendation whenever this changes.\nAt any time after the Network Assistance Session resource is created, the 5GMS Client may use the Network Assistance Session identifier to explicitly request a bit rate recommendation by invoking a remote procedure call provided for this purpose by the 5GMS AF. This procedure is further specified in clause 11.6.4.3.\nUsing the Network Assistance identifier, the 5GMS Client may also request a delivery boost to be provided by the 5G System at any time by invoking a remote procedure call provided for this purpose by the 5GMS AF. This procedure is further specified in clause 11.6.4.4.\nThe information provided when first creating a Network Assistance Session may be modified subsequently by the Media Session Handler using the session modification procedure specified in clause 11.6.4.5.\nIn order to terminate a Network Assistance Session, the 5GMS Client deletes the Network Assistance session resource. This procedure is further specified in clause 11.6.4.6.\n",
                            "figures_meta_data": [],
                            "tables": []
                        }
                    ]
                },
                {
                    "title": "4.8\tProcedures of the M6d (UE Media Session Handling) interface",
                    "description": "",
                    "summary": "",
                    "text_content": "",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": [
                        {
                            "title": "4.8.1\tGeneral",
                            "text_content": "This clause contains the procedures for the interaction between the 5GMSd-Aware application or the Media Player and the Media Session Handler through the M6d API. Details are provided in clause 12.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "4.8.2\tConsumption reporting procedures",
                            "text_content": "Before a streaming session is started, the Media Session Handler shall check if the Service Access Information contains any Consumption reporting configuration, as specified in clause 4.7.3. If such a configuration is present, the Media Session Handler shall initiate consumption reporting based on this configuration for the current streaming session.\nThe Media Session Handler shall first determine whether consumption reporting is active for the session. The determination shall be based on the samplePercentage attribute specified in the consumption reporting configuration. When the samplePercentage is not present or its value is 100, consumption reporting is active for the session. If the samplePercentage is less than 100, the Media Session Handler generates a random number which is uniformly distributed in the range 0 to100; consumption reporting is active for the session when the generated random number is of a lower value than the samplePercentage value.\nIf consumption reporting for this session is active, the Media Session Handler shall regularly determine the consumption reporting parameters defined in clause 11.3.2.4 from the Media Player through the M7d interface and shall report these values according to the reportingInterval specified in the Client Consumption Reporting Configuration.\n",
                            "figures_meta_data": [],
                            "tables": []
                        }
                    ]
                },
                {
                    "title": "4.9\tProcedures of the M7d (UE Media Player) interface",
                    "description": "",
                    "summary": "",
                    "text_content": "",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": [
                        {
                            "title": "4.9.1\tGeneral",
                            "text_content": "This clause contains the procedures for the interaction between the 5GMSd-Aware Application or the Media Session Handler and the Media Player through the M7d API. Details are provided in clause 13.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "4.9.2\tMetrics reporting procedures",
                            "text_content": "These procedures shall be used by the Media Session Handler function to control metrics reporting when such reporting is configured via metadata sent in-band via the media manifest.\nWhen a streaming session is started, the Media Session Handler shall check if the manifest contains any metrics configuration, as specified in TS 26.247 clauses 10.4 and 10.5, or TS 26.118 [42] clause 9.3. If such a configuration is found, the Media Session Handler shall use it for the current streaming session.\nThe Media Session Handler shall first determine whether metrics from this session shall be reported. The determination shall be based on the samplePercentage attribute specified in the metrics configuration, according to TS 26.247 clause 10.5.\nIf metrics are reported for the session, the Media Session Handler shall request the Media Player to create a metrics collection job. The Media Player shall return a reference to the created job, which the Media Session Handler shall use in all subsequent actions related to this job.\nThe Media Session Handler shall configure the metrics collector job with the set of metrics which shall be collected during the session. The format of the configuration shall be according to TS 26.247 clause L.2, but note that only the metrics attribute in the configuration shall be used for this purpose.\nThe Media Session Handler shall regularly request the collected metrics from the Media Player according to the reportingInterval specified in the metrics configuration. The metrics returned by the Media Player shall use the format as described in TS 26.247 clause 10.6, and (for virtual reality media) in TS 26.118 [42] clause 9.4 and the Media Session Handler shall forward these to the server address(es) specified in the metrics configuration using the specified DNN according to the procedures described in TS 26.247 clause 10.6.\nWhen the session is finished the Media Session Handler shall delete the metrics collection job.\n",
                            "figures_meta_data": [],
                            "tables": []
                        }
                    ]
                },
                {
                    "title": "4.10\tProcedures of the M8d interface",
                    "description": "",
                    "summary": "",
                    "text_content": "This clause defines basic procedures for M8d.\nNo specific procedures are defined but it is expected that the 5GMSd Application Provider can provide media session entry points to a 5GMSd-Aware Application through M8d. The 5GMSd-Aware Application would then initiate the media session by providing such an entry point to the 5GMSd Client through M7d.\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "4.11\tData collection and reporting procedures at reference point R4",
                    "description": "",
                    "summary": "",
                    "text_content": "",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": [
                        {
                            "title": "4.11.1\tGeneral",
                            "text_content": "These procedures are used by the 5GMS AS, as a type of data collection client, to acquire its data collection and reporting client configuration from, and subsequently report media streaming access activity to, the Data Collection AF instantiated in the 5GMS AF. It does so by invoking the Ndcaf_DataReporting service offered by the Data Collection AF at reference point R4, as specified in clause 7 of TS 26.532 [49].\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "4.11.2\t5GMS AS data collection and reporting client configuration",
                            "text_content": "The 5GMS AS shall use the service operations and procedures specified in TS 26.532 [49] to obtain its data collection and reporting client configuration from the Data Collection AF instantiated in the 5GMS AF at reference point R4:\n-\tIn the case where both the 5GMS AS and the 5GMS AF reside in the trusted domain, the 5GMS AS shall obtain its data collection client configuration directly from the Data Collection AF by invoking appropriate Ndcaf_DataReporting service operations as specified in clause 7.2 of [49] according to the procedures specified in clauses 4.2.5 of [49].\n-\tShould the 5GMS AS and the 5GMS AF reside in different trust domains, the 5GMS AS shall instead obtain its configuration from the Data Collection AF indirectly via the NEF by invoking the equivalent operations on the Nnef_DataReporting service as defined in TS 26.531 [48].\nIn both cases, the 5GMS AS shall declare that it supports the MS_ACCESS_ACTIVITY data reporting domain in Data‌Reporting‌Session.‌supportedDomains (see clauses 7.2.3.2.1 and 7.2.3.3.1 of TS 26.532 [49]) and the Data Collection AF instantiated in the 5GMS AF shall request reporting for this domain by including the same value as a key to the Data‌Reporting‌Session.‌reportingConditions dictionary. The value of the ReportingCondition.type property at this key shall be INTERVAL, THRESHOLD or OFF.\nThe 5GMS AS shall refresh its data collection and reporting client configuration according to the procedures specified in clause 4.2.5.3 of TS 26.532 [49].\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "4.11.3\t5GMS AS data reporting",
                            "text_content": "The 5GMS AS shall use the service operations and procedures specified in TS 26.532 [49] to report media streaming access activity to the Data Collection AF instantiated in the 5GMS AF at reference point R4:\n-\tIn the case where both the 5GMS AS and the 5GMS AF reside in the trusted domain, the 5GMS AS shall submit media streaming access activity reports directly to the Data Collection AF by invoking appropriate Ndcaf_DataReporting service operations as specified in clause 7.3 of [49] according to the procedures specified in clauses 4.2.7 of [49].\n-\tShould the 5GMS AS and the 5GMS AF reside in different trust domains, the 5GMS AS shall instead submit media streaming access activity reports indirectly to the 5GMS AF via the NEF by invoking the equivalent operations on the Nnef_DataReporting service as defined in TS 26.531 [48].\nIn both cases, the conditions for sending a downlink media streaming access activity report by the 5GMSd AS and the parameters of such report are signalled in the data collection and reporting client configuration obtained using the procedure specified in clause 4.11.2.\nIn order to submit a media streaming access activity report, the 5GMS AS shall send an HTTP POST message to the Data Collection AF instantiated in the 5GMS AF. The request body shall be a JSON document of type DataReport (as defined in clause 7.3.3.2.1 of TS 26.532 [49]) containing one or more MediaStreaming‌AccessRecord structures, as specified in clauses 17.2 and C.5.1 of the present document.\nThe Data Collection AF shall respond with a 200 (OK) message to acknowledge successful processing of the media streaming access activity report.\n",
                            "figures_meta_data": [],
                            "tables": []
                        }
                    ]
                },
                {
                    "title": "4.11A\tData collection and reporting procedures at reference point R2",
                    "description": "",
                    "summary": "",
                    "text_content": "",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": [
                        {
                            "title": "4.11A.1\tGeneral",
                            "text_content": "These procedures are used by the Direct Data Collection Client instantiated in the Media Session Handler to acquire its data collection and reporting client configuration from, and subsequently report media streaming access activity to, the Data Collection AF instantiated in the 5GMS AF. It does so by invoking the Ndcaf_DataReporting service offered by the Data Collection AF at reference point R2, as specified in clause 7 of TS 26.532 [49].\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "4.11A.2\tData collection and reporting client configuration",
                            "text_content": "The Direct Data Collection Client instantiated in the Media Session Handler shall use the service operations and procedures specified in TS 26.532 [49] to obtain its data collection and reporting client configuration from the Data Collection AF instantiated in the 5GMS AF at reference point R2 by invoking appropriate Ndcaf_DataReporting service operations as specified in clause 7.2 of [49] according to the procedures specified in clauses 4.3.2 of [49].\nThe Direct Data Collection Client instantiated in the Media Session Handler shall declare that it supports the MS_ANBR_NETWORK_ASSISTANCE data reporting domain in Data‌Reporting‌Session.‌supportedDomains (see clauses 7.3.2.1 and 7.3.3.1 of TS 26.532 [49]) and the Data Collection AF instantiated in the 5GMS AF shall request reporting for this domain by including the same value as a key to the Data‌Reporting‌Session.‌reportingConditions dictionary. The value of the ReportingCondition.type property at this key shall be EVENT or OFF.\nThe Direct Data Collection Client instantiated in the Media Session Handler shall refresh its data collection and reporting client configuration according to the procedures specified in clause 4.3.2.3 of TS 26.532 [49].\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "4.11A.3\tANBR-based Network Assistance invocation reporting",
                            "text_content": "The Direct Data Collection Client instantiated in the Media Session Handler shall use the service operations and procedures specified in TS 26.532 [49] to report ANBR-based Network Assistance invocations to the Data Collection AF instantiated in the 5GMS AF at reference point R2 by invoking appropriate Ndcaf_DataReporting service operations as specified in clause 7.3 of [49] according to the procedures specified in clauses 4.3.3 of [49].\nThe conditions for sending an ANBR-based Network Assistance invocation report and the parameters of such report are signalled in the data collection and reporting client configuration obtained using the procedure specified in clause 4.11A.2.\nIn order to submit an ANBR-based Network Assistance invocation report, the Direct Data Collection Client instantiated in the Media Session Handler shall send an HTTP POST message to the Data Collection AF instantiated in the 5GMS AF. The request body shall be a JSON document of type DataReport (as defined in clause 7.3 of TS 26.532 [49]) containing a ANBRNetworkAssistanceInvocationRecord structure, as specified in clauses 17A.2 and C.5.2 of the present document.\nThe Data Collection AF shall respond with a 200 (OK) message to acknowledge successful processing of the ANBR-based Network Assistance invocation report.\n",
                            "figures_meta_data": [],
                            "tables": []
                        }
                    ]
                },
                {
                    "title": "4.12\tEvent Exposure procedures at reference points R5 and R6",
                    "description": "",
                    "summary": "",
                    "text_content": "",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": [
                        {
                            "title": "4.12.1\tGeneral",
                            "text_content": "As specified in clauses 4.7.1 and 4.7.4 of TS 26.501 [2], Events relating to 5G Media Streaming are exposed to Event consumers at reference points R5 and R6 by the Data Collection AF instantiated in the 5GMS AF (playing the role of Event service provider). Procedures for event exposure are specified in clauses 5.11.3 (for downlink media streaming) and 6.8.3 (for uplink media streaming) respectively of [2].\nThe following Naf_EventExposure service operations as defined in TS 23.502 [45] apply for such interactions between the Data Collection AF and consumer entities:\n-\tNaf_EventExposure_Subscribe,\n-\tNaf_EventExposure_Unsubscribe, and\n-\tNaf_EventExposure Notify.\nIn this release, eligible Event service consumers of 5GMS Event services are the NWDAF and NEF as NFs, and the Event Consumer AF of the 5GMS Application Provider.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "4.12.2\tEvent Exposure subscription procedure",
                            "text_content": "The definition of input and output parameters of the Naf_EventExposure_Subscribe service operation is identical to that specified in clause 5.2.19.2.2 of TS 23.502 [45], except that \"AF\" is replaced by \"Data Collection AF\" and \"consumer NF\" (or \"NF consumer\") is replaced by \"Event service consumer\".\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "4.12.3\tEvent Exposure unsubscription procedure",
                            "text_content": "The definition of input and output parameters of the Naf_EventExposure_Unsubscribe service operation is identical to that specified in clause 5.2.19.2.3 of TS 23.502 [45], except that \"AF\" is replaced by \"Data Collection AF\" and \"consumer NF\" (or \"NF consumer\") is replaced by \"Event service consumer\".\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "4.12.4\tEvent Exposure notification procedure",
                            "text_content": "The definition of input and output parameters of the Naf_EventExposure_Notify service operation is identical to that specified in clause 5.2.19.2.4 of TS 23.502 [45], except that \"AF\" is replaced by \"Data Collection AF\" and \"consumer NF\" (or \"NF consumer\") is replaced by \"Event service consumer\".\n",
                            "figures_meta_data": [],
                            "tables": []
                        }
                    ]
                },
                {
                    "title": "4.13\tProcedures for downlink media streaming via eMBMS",
                    "description": "",
                    "summary": "",
                    "text_content": "This procedure is used by a 5GMSd Client to establish a 5GMSd session either completely, or at least partially, through eMBMS.\n-\tFor downlink media streaming exclusively via eMBMS and for hybrid 5GMSd/eMBMS services, as defined in clauses 5.10.2 and 5.10.5 respectively of TS 26.501 [2]:\n-\tThe 5GMSd Application Provider shall provision a supplementary distribution network of type DISTRIBUTION_‌NETWORK_‌EMBMS in the Content Hosting configuration at reference point M1d, as specified in clause 7.6.3.1, with either MODE_EXCLUSIVE or MODE_HYBRID (as appropriate).\n-\tThe 5GMSd Application Provider may additionally provision access reporting in the Consumption Reporting Configuration at M1d, as specified in clause 7.7.3.1.\n-\tThe MBMS Client shall host an MPD as defined in ISO/IEC 23009-1 [32] or in TS 26.247 [4], or any other presentation manifest as the 5GMSd Media Entry Point such as an HLS Master Playlist.\n-\tThe URL of this presentation manifest shall be signalled to the 5GMSd Client through the 5GMSd session establishment procedure.\n-\tThe MBMS Client shall be invoked by the Media Session Handler via reference point MBMS-API-C using the procedures defined in TS 26.347 [52].\n-\tFor dynamically provisioned downlink media streaming via eMBMS as defined in clause 5.10.6 TS 26.501 [2]:\n-\tThe 5GMSd Application Provider shall provision a supplementary distribution network of type DISTRIBUTION_‌NETWORK_‌EMBMS in the Content Hosting configuration at reference point M1d, as specified in clause 7.6.3.1, with MODE_DYNAMIC.\n-\tThe 5GMSd Application Provider shall additionally provision access reporting in the Consumption Reporting Configuration at M1d, as specified in clause 7.7.3.1.\n-\tThe 5GMSd AS shall host an MPD as defined in ISO/IEC 23009-1 [32] or in TS 26.247 [4], or any other presentation manifest as the 5GMSd Media Entry Point.\n-\tThe URL of this presentation manifest shall be signalled to the 5GMSd Client through the 5GMSd session establishment procedure. If the 5GMSd service is currently available as an MBMS User Service, the 5GMSd Client forwards the manifest request to the MBMS Client; otherwise, it forwards the request to the 5GMSd AS via reference point M4d.\nNOTE:\tThe detailed execution of dynamically handling this decision is left to implementation.\n-\tThe MBMS Client shall be invoked dynamically, paused or destroyed by the Media Session Handler via reference point MBMS-API-C using the procedures defined in TS 26.347 [52].\nAdditional procedures for reactions to different HTTP status codes are provided in clause A.7 of TS 26.247 [4] and clause A.7 of ISO/IEC 23009-1 [32].\nAdditional procedures for handling partial file responses are provided in clause A.9 of TS 26.247 [4].\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                }
            ]
        },
        {
            "title": "5\tProcedures for Uplink Media streaming",
            "description": "",
            "summary": "",
            "tables": [],
            "figures_meta_data": [],
            "subsections": [
                {
                    "title": "5.1\tGeneral",
                    "description": "",
                    "summary": "",
                    "text_content": "Uplink media streaming functional entities in the 5GMS System include the 5GMSu Application Provider, 5GMSu AF, 5GMSu AS and the UE. To make use of these other entities, the UE includes a 5GMSu-Aware Application that is provided by the 5GMS Application Provider and a 5GMSu Client comprising the Media Session Handler and the Media Streamer.\nThe M1 Provisioning API enables the 5GMSu Application Provider to establish and manage the uplink media session handling and streaming options of the 5GMSu system.\nThe M2u Egest interface enables Uplink media streaming content sent by the 5GMSu Client to the 5GMSu AS over interface M4u to be subsequently delivered to the 5GMSu Application Provider. Uplink media streaming media transfer from the 5GMSu AS to the 5GMSu Application Provider may be either pull-based and initiated by the 5GMSu Application Provider using the HTTP GET method, or push-based and initiated by the 5GMSu AS using the HTTP PUT method. The resource identifier of the 5GMSu Application Provider for push-based streaming content delivery is provided to the 5GMSu AS by the 5GMSu AF over the M3u interface, as part of the M1 Provisioning Session.\nThe 5GMSu AF, having acquired M1 Provisioning information, sets up the M5 interface that the 5GMSu Client can use for Uplink media streaming session management, remote control, metrics reporting, network assistance and request for policy and/or charging treatment. Certain types of configuration and policy information accessed over M5 by the Media Session Handler, such as uplink metrics reporting, QoS policy, or support for AF-based network assistance are further passed to the Media Streamer via the M7u API.\nBased on the configuration information received on M5 and a request from the Media Streamer received over the M6u interface, the Media Session Handler sets up an Uplink media streaming session with the 5GMSu AF. Upon successful session establishment, the Media Session Handler triggers the Media Streamer to begin Uplink media streaming of media content to the 5GMSu AS over the M4u interface.\nSubscription to status and other event notification services are offered by the Media Session Handler to the 5GMSu-Aware Application and to the Media Streamer via the M6u APIs exposed by the Media Session Handler.\nSubscription to status and other event notification services are also offered by the Media Streamer to the 5GMSu-Aware Application and to the Media Session Handler via the M7u APIs exposed by the Media Player.\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "5.2\tAPIs relevant to Uplink Media Streaming",
                    "description": "",
                    "summary": "",
                    "text_content": "Table 5.2-1 summarises the APIs used to provision and use the various uplink media streaming features specified in TS 26.501 [2].\nTable 5.2-1: Summary of APIs relevant to uplink media streaming features\n\n",
                    "tables": [
                        {
                            "description": "Table 5.2-1: Summary of APIs relevant to uplink media streaming features",
                            "table number": 4,
                            "summary": "",
                            "name": ""
                        }
                    ],
                    "figures_meta_data": [],
                    "subsubsections": []
                }
            ]
        },
        {
            "title": "6\tGeneral aspects of APIs for 5G Media Streaming",
            "description": "",
            "summary": "",
            "tables": [],
            "figures_meta_data": [],
            "subsections": [
                {
                    "title": "6.1\tHTTP resource URIs and paths",
                    "description": "",
                    "summary": "",
                    "text_content": "The resource URI used in each HTTP request to the API provider shall have the structure defined in subclause 4.4.1 of TS 29.501 [22], i.e.:\n{apiRoot}/{apiName}/{apiVersion}/{apiSpecificResourceUriPart}\nwith the following components:\n-\t{apiRoot} shall be set as described in TS 29.501 [22].\n-\t{apiName} shall be set as defined by the following clauses.\n-\t{apiVersion} shall be set to \"v2\" in this release of the specification.\n-\t{apiSpecificResourceUriPart} shall be set as described in the following clauses.\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "6.2\tUsage of HTTP",
                    "description": "",
                    "summary": "",
                    "text_content": "",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": [
                        {
                            "title": "6.2.1\tHTTP protocol version",
                            "text_content": "Implementations of the 5GMS AF shall expose both HTTP/1.1 [24] and HTTP/2 [31] endpoints at interfaces M1 and M5, including support for the HTTP/2 starting mechanisms specified in section 3 of RFC 7540 [31]. In both protocol versions, TLS [29] shall be supported and HTTPS interactions should be used on these interfaces in preference to cleartext HTTP.\nThe 5GMS Application Provider may use any supported HTTP protocol version at interface M1.\nThe Media Session Handler may use any supported HTTP protocol version at interface M5.\nAll responses from the 5GMS AF that carry a message body shall include a strong entity tag in the form of an ETag response header and a modification timestamp in the form of a Last-Modified response header.\nAll endpoints shall support the conditional HTTP requests If-None-Match and If-Modified-Since.\nImplementations of the 5GMS AS shall expose HTTP/1.1 [24] endpoints at interfaces M2 and M4 and may additionally expose HTTP/2 [31] endpoints at these interfaces. In both protocol versions, TLS [30] shall be supported and HTTPS interactions should be used on these interfaces in preference to cleartext HTTP.\nFor pull-based content ingest, the 5GMS Application Provider shall expose an HTTP/1.1-based origin endpoint to the 5GMSd AS at interface M2 and may additionally expose an HTTP/2-based origin endpoint.\nFor push-based content ingest, the 5GMS Application Provider may use any supported HTTP protocol version at interface M2.\nThe Media Stream Handler may use any supported HTTP protocol version at interface M4.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "6.2.2\tHTTP message bodies for API resources",
                            "text_content": "The OpenAPI [23] specification of HTTP messages and their content bodies is contained in annex C.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "6.2.3\tUsage of HTTP headers",
                            "text_content": "Standard HTTP headers shall be used in accordance with clause 5.2.2 of TS 29.500 [21] for both HTTP/1.1 and HTTP/2 messages.\nThe Media Stream Handler in the 5GMS Client shall identify itself to the 5GMS AS at interface M4 using a User-Agent request header (see section 5.5.3 of RFC 7231 [25]) that should include the product token 5GMS‌Media‌Stream‌Handler. If this product identifier is supplied, the optional product-version suffix shall be present. This should indicate the version number of the present document (without the leading \"V\") with which the Media Stream Handler implementation complies and shall, at minimum, indicate the 3GPP release number with which the implementation complies.\nThe Media Stream Handler may additionally supply a comment element in the User-Agent request header containing vendor-specific information.\nEXAMPLE 1:\t5GMSMediaStreamHandler/17.5.0 (build2634) ExoPlayerLib/2.17.1\nEXAMPLE 2:\t5GMSMediaStreamHandler/17\nThe Media Session Handler in the 5GMS Client shall identify itself to the 5GMSd AF at interface M5d using a User-Agent request header (see section 5.5.3 of RFC 7231 [25]) in which the first element shall be a product identified by the token 5GMSMediaSessionHandler. The optional product-version suffix shall be present. This should indicate the version number of the present document (without the leading \"V\") with which the Media Session Handler implementation complies and shall, at minimum, indicate the 3GPP release number with which the implementation complies.\nThe Media Session Handler may supply additional vendor-specific product identifiers in the User-Agent request header and may additionally supply a comment element containing vendor-specific information.\nEXAMPLE 1:\t5GMSMediaSessionHandler/17.5.0 (build1536) lib5gmsclient/0.3.1\nEXAMPLE 2:\t5GMSMediaSessionHandler/17\nThe 5GMS AF shall identify itself at reference points M1 and M5 using a Server response header (see section 7.4.2 of RFC 7231  [25]) that includes a product string of the following form:\n5GMSAF-{FQDN}/{complianceInformation}\nwhere {FQDN} shall be the Fully-Qualified Domain Name of the 5GMSd AF exposed to the requesting client, and {complianceInformation} should indicate the version number of the present document (without the leading \"V\") with which the 5GMS AF implementation complies and shall, at minimum, indicate the 3GPP release number with which the implementation complies.\nThe Server response header may also include comments strings and vendor-specific subproduct strings compliant with the syntax and guidance provided in section 7.4.2 of [25].\nEXAMPLE 1:\t5GMSAF-vm10664.mno.net/17.4.0 (api=2.1.0) libsbi/2.1 libnf/1.2 libaf/1.1\nEXAMPLE 2:\t5GMSAF-vm10664.mno.net/17 (api=2.1.0) libsbi/2.1 libnf/1.2 libaf/1.1\nAll responses from the 5GMS AF that carry a resource message body shall include:\n-\ta strong entity tag for the resource, conveyed in an ETag response header,\n-\ta resource modification timestamp, conveyed in a Last-Modified response header, and\n-\ta predicted time-to-live period for the resource, conveyed in a Cache-Control: max-age response header.\nAll API endpoints on the 5GMS AF that expose the HTTP GET method shall support conditional requests using the If-None-Match and If-Modified-Since request headers. API clients should not attempt to revalidate their cached copy of a resource using a conditional GET request before the indicated time-to-live period has elapsed.\nAll API endpoints on the 5GMS AF that expose the HTTP POST, PUT, PATCH or DELETE methods shall support conditional requests using the If-Match request header. The API client should supply a strong entity tag in an ETag request header when invoking any of these HTTP methods.\n",
                            "figures_meta_data": [],
                            "tables": []
                        }
                    ]
                },
                {
                    "title": "6.3\tHTTP response codes",
                    "description": "",
                    "summary": "",
                    "text_content": "Guidelines for error responses to the invocation of APIs of NF services are specified in clause 4.8 of TS 29.501 [22]. API-specific error responses are specified in the respective technical specifications.\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "6.4\tCommon API data types",
                    "description": "",
                    "summary": "",
                    "text_content": "",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": [
                        {
                            "title": "6.4.1\tGeneral",
                            "text_content": "The data types defined in this clause are intended to be used by more than one of the 5GMS APIs.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "6.4.2\tSimple data types",
                            "text_content": "Table 6.4.2-1 below specifies common simple data types used within the 5GMS APIs, including a short description of each. In cases where types from other specifications are reused, a reference is provided.\nTable 6.4.2-1: Simple data types\n\n",
                            "figures_meta_data": [],
                            "tables": [
                                {
                                    "description": "Table 6.4.2-1: Simple data types",
                                    "table number": 5,
                                    "summary": "",
                                    "name": ""
                                }
                            ]
                        },
                        {
                            "title": "6.4.3\tStructured data types",
                            "text_content": "Table 6.4.3.1-1: Definition of type IpPacketFilterSet\n\nTable 6.4.3.2-1: Definition of type ServiceDataFlowDescription\n\nTable 6.4.3.2-1: Definition of type M5QoSSpecification\n\nTable 6.4.3.2-1: Definition of type M1QoSSpecification\n\nTable 6.5.3.2-1: Definition of type ChargingSpecification\n\nTable 6.4.3.6-1: Definition of TypedLocation type\n\nThe data model for the OperationSuccessResponse type is specified in table 6.4.3.7-1 below:\nTable 6.4.3.7-1: Definition of OperationSuccessResponse type\n\nThe EdgeProcessingEligibilityCriteria type is specified in table 6.4.3.8-1 below:\nTable 6.4.3.8-1: Definition of EdgeProcessingEligibilityCriteria type\n\nTable 6.4.3.9-1: Definition of EndpointAddress type\n\nThis data type is intended to be used as a building block in other data types.\nTable 6.4.3.10-1: Definition of MediaStreamingSessionIdentification type\n\nThis data type is intended to be used as a building block in other data types.\nTable 6.4.3.11-1: Definition of MediaStreamingAccess type\n\nThis data type is intended to be used as a building block in other data types.\nTable 6.4.3.11-1: Definition of NetworkAssistanceInvocation type\n\nThe UnidirectionalQoSSpecification data type describes a network Quality of Service specification for media streaming in one direction.\nTable 6.4.3.13-1: Definition of UnidirectionalQoSSpecification data type\n\n",
                            "figures_meta_data": [],
                            "tables": [
                                {
                                    "description": "Table 6.4.3.1-1: Definition of type IpPacketFilterSet",
                                    "table number": 6,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 6.4.3.2-1: Definition of type ServiceDataFlowDescription",
                                    "table number": 7,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 6.4.3.2-1: Definition of type M5QoSSpecification",
                                    "table number": 8,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 6.4.3.2-1: Definition of type M1QoSSpecification",
                                    "table number": 9,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 6.5.3.2-1: Definition of type ChargingSpecification",
                                    "table number": 10,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 6.4.3.6-1: Definition of TypedLocation type",
                                    "table number": 11,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 6.4.3.7-1: Definition of OperationSuccessResponse type",
                                    "table number": 12,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 6.4.3.8-1: Definition of EdgeProcessingEligibilityCriteria type",
                                    "table number": 13,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 6.4.3.9-1: Definition of EndpointAddress type",
                                    "table number": 14,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 6.4.3.10-1: Definition of MediaStreamingSessionIdentification type",
                                    "table number": 15,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 6.4.3.11-1: Definition of MediaStreamingAccess type",
                                    "table number": 16,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 6.4.3.11-1: Definition of NetworkAssistanceInvocation type",
                                    "table number": 17,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 6.4.3.13-1: Definition of UnidirectionalQoSSpecification data type",
                                    "table number": 18,
                                    "summary": "",
                                    "name": ""
                                }
                            ]
                        },
                        {
                            "title": "6.4.4\tEnumerated data types",
                            "text_content": "The data model for the CellIdentifierType enumeration which indicates the type of cell identifier as defined in TS 23.003 [7], is specified in Table 6.4.4.1-1 below:\nTable 6.4.4.1-1: Definition of CellIdentifierType enumeration\n\nThe data model for the SdfMethod enumeration is specified in table 6.4.4.2-1 below:\nTable 6.4.4.2-1: Definition of SdfMethod enumeration\n\nThe data model for the ProvisioningSessionType enumeration is specified in Table 6.4.4.3-1 below:\nTable 6.4.4.3-1: Definition of ProvisioningSessionType enumeration\n\nThe EASERelocationTolerance enumeration is specified in table 6.4.4.4-1 below:\nTable 6.4.4.4-1: Definition of EASRelocationTolerance enumeration\n\nTable 6.4.4.4-1: Definition of CacheStatus enumeration\n\n",
                            "figures_meta_data": [],
                            "tables": [
                                {
                                    "description": "Table 6.4.4.1-1: Definition of CellIdentifierType enumeration",
                                    "table number": 19,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 6.4.4.2-1: Definition of SdfMethod enumeration",
                                    "table number": 20,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 6.4.4.3-1: Definition of ProvisioningSessionType enumeration",
                                    "table number": 21,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 6.4.4.4-1: Definition of EASRelocationTolerance enumeration",
                                    "table number": 22,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 6.4.4.4-1: Definition of CacheStatus enumeration",
                                    "table number": 23,
                                    "summary": "",
                                    "name": ""
                                }
                            ]
                        }
                    ]
                },
                {
                    "title": "6.5\tExplanation of API data model notation",
                    "description": "",
                    "summary": "",
                    "text_content": "The data models in the following API clauses are specified using the following notational conventions:\n1.\tData models are expressed as an unordered list of JSON properties [38] with one property defined in each row of the data model table.\n2.\tThe Data type column defines the type of the property, according to JSON notation [38].\n3.\tThe keyword \"Array\" in the Data type column indicates that zero or more elements of the data type in brackets are included. The number of elements in the array may additionally be constrained by normative text in the Description column.\n4.\tThe Cardinality column defines whether a property is optional or mandatory. An array with cardinality 0 indicates that the array property is optional in the data structure. An array with cardinality 1 indicates that the property is mandatory in the data structure, even when the array is empty.\n5.\tThe keyword \"Object\" in the Data type column indicates a structured sub-object of an unnamed type whose properties are defined inline in the indented table rows immediately afterwards. The \"Object\" type may be combined with the \"Array\" type.\n6.\tIn the case of data types specifying RESTful resources, the additional Usage column defines the property behaviour for each CRUD Operation as follows:\n-\t\"C\" (Create), \"R\" (Read) and \"U\" (Update) refers to the CRUD procedure during which the property is present in the resource type. (The Delete operation never takes any input data type.)\n-\t\"RO\" signifies a read-only property. Only the API provider function is permitted to modify the property value. The API invoker can only read the value.\n-\t\"RW\" signifies a read/write property. The API provider and API invoker may both modify the property value.\n7.\tAn additional read-only property is included at the start of all data models defining resources that are members of a RESTful collection. This property is populated with the unique identifier of the resource within its parent collection, and corresponds to the leaf path element in the RESTful URL of that resource.\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                }
            ]
        },
        {
            "title": "7\tProvisioning (M1) APIs",
            "description": "",
            "summary": "",
            "tables": [],
            "figures_meta_data": [],
            "subsections": [
                {
                    "title": "7.1\tGeneral",
                    "description": "",
                    "summary": "",
                    "text_content": "This clause defines the provisioning API used by a 5GMS Application Provider to configure downlink or uplink 5G Media Streaming services.\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "7.2\tProvisioning Sessions API",
                    "description": "",
                    "summary": "",
                    "text_content": "",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": [
                        {
                            "title": "7.2.1\tOverview",
                            "text_content": "The Provisioning Sessions API is used by the 5GMS Application Provider to instantiate and manipulate Provisioning Sessions in the 5GMS System, as described in clause 4.3.2. Having created a Provisioning Session, the 5GMS Application Provider can then go on to provision other 5GMS features in the context of that Provisioning Session, using the APIs specified in clause 7.3 et seq. Certain of these features are only applicable to the type of Provisioning Session created.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "7.2.2\tResource structure",
                            "text_content": "The Provisioning Sessions API is accessible through the following URL base path:\n{apiRoot}/3gpp-m1/{apiVersion}/provisioning-sessions/\nTable 7.4.2-1 specifies the operations and the corresponding HTTP methods that are supported by this API. In each case, the sub-resource path specified in the second column of the table shall be appended to the above URL base path.\nTable 7.2.2-1: Operations supported by the Provisioning Sessions API\n\n",
                            "figures_meta_data": [],
                            "tables": [
                                {
                                    "description": "Table 7.2.2-1: Operations supported by the Provisioning Sessions API",
                                    "table number": 24,
                                    "summary": "",
                                    "name": ""
                                }
                            ]
                        },
                        {
                            "title": "7.2.3\tData model",
                            "text_content": "The data model for the ProvisioningSession resource is specified in table 7.2.3.1-1 below. Different properties are present in the resource depending on the type of Provisioning Session indicated in the provisioningSessionType property, and this is specified in the Applicability column.\nTable 7.2.3.1-1: Definition of ProvisioningSession resource\n\n",
                            "figures_meta_data": [],
                            "tables": [
                                {
                                    "description": "Table 7.2.3.1-1: Definition of ProvisioningSession resource",
                                    "table number": 25,
                                    "summary": "",
                                    "name": ""
                                }
                            ]
                        }
                    ]
                },
                {
                    "title": "7.3\tServer Certificates Provisioning API",
                    "description": "",
                    "summary": "",
                    "text_content": "",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": [
                        {
                            "title": "7.3.1\tOverview",
                            "text_content": "The Server Certificates Provisioning API is used to provision X.509 [8] server certificates that can be referenced by a Content Hosting Configuration and subsequently presented by the 5GMSd AS when it distributes content to 5GMSd Clients at interface M4d using Transport Layer Security [30]. Server Certificate resources are provisioned within the scope of an enclosing Provisioning Session.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "7.3.2\tResource structure",
                            "text_content": "The Server Certificates Provisioning API is accessible through the following URL base path:\n{apiRoot}/3gpp-m1/{apiVersion}/provisioning-sessions/{provisioningSessionId}/\nTable 7.3.2-1 specifies the operations and the corresponding HTTP methods that are supported by this API. In each case, the Provisioning Session identifier shall be substituted into {provisioningSessionId} in the above URL template and the sub-resource path specified in the second column shall be appended to the URL base path.\nTable 7.3.2-1: Operations supported by the Server Certificates Provisioning API\n\n",
                            "figures_meta_data": [],
                            "tables": [
                                {
                                    "description": "Table 7.3.2-1: Operations supported by the Server Certificates Provisioning API",
                                    "table number": 26,
                                    "summary": "",
                                    "name": ""
                                }
                            ]
                        },
                        {
                            "title": "7.3.3\tData model",
                            "text_content": "The Certificate Signing Request shall comply with the Privacy-Enhanced Mail (PEM) textual format specified in RFC 7468 [17], i.e. a Base64-encoded DER certificate request or certificate, including leading and trailing encapsulation boundary lines.\nThe MIME content type shall be application/x-pem-file.\nThe Server Certificate resource shall comply with the Privacy-Enhanced Mail (PEM) textual format specified in RFC 7468 [17], i.e. a Base64-encoded DER certificate request or certificate, including leading and trailing encapsulation boundary lines. The resource shall include only the public parts of the X.509 certificate. In particular, the private key shall not be included.\nThe MIME content type shall be application/x-pem-file.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "7.3.4\tOperations",
                            "text_content": "Under no circumstances shall the 5GMSd AF reveal the private key associated with the Certificate Signing Request to the 5GMSd Application Provider.\n",
                            "figures_meta_data": [],
                            "tables": []
                        }
                    ]
                },
                {
                    "title": "7.4\tContent Preparation Templates Provisioning API",
                    "description": "",
                    "summary": "",
                    "text_content": "",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": [
                        {
                            "title": "7.4.1\tOverview",
                            "text_content": "Content Preparation Templates are used to specify manipulations applied by a 5GMS AS to downlink media resources ingested at interface M2d for distribution at interface M4d, or to uplink media resources contributed at interface M4u for egest at interface M2u. The Content Preparation Templates Provisioning API is used to provision a Content Preparation Template within the scope of a Provisioning Session that can subsequently be referenced from a Content Hosting Configuration.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "7.4.2\tResource structure",
                            "text_content": "The Content Preparation Templates Provisioning API is accessible through the following URL base path:\n{apiRoot}/3gpp-m1/{apiVersion}/provisioning-sessions/{provisioningSessionId}/\nTable 7.4.2-1 specifies the operations and the corresponding HTTP methods that are supported by this API. In each case, the Provisioning Session identifier shall be substituted into {provisioningSessionId} in the above URL template and the sub-resource path specified in the second column shall be appended to the URL base path.\nTable 7.4.2-1: Operations supported by the Content Preparation Templates Provisioning API\n\n",
                            "figures_meta_data": [],
                            "tables": [
                                {
                                    "description": "Table 7.4.2-1: Operations supported by the Content Preparation Templates Provisioning API",
                                    "table number": 27,
                                    "summary": "",
                                    "name": ""
                                }
                            ]
                        },
                        {
                            "title": "7.4.3\tData model",
                            "text_content": "The data model of the Content Preparation Template resource shall be determined by its MIME content type.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "7.4.4\tOperations",
                            "text_content": "The operations shall be determined by the MIME content type of the Content Preparation Template resource.\n",
                            "figures_meta_data": [],
                            "tables": []
                        }
                    ]
                },
                {
                    "title": "7.5\tContent Protocols Discovery API",
                    "description": "",
                    "summary": "",
                    "text_content": "",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": [
                        {
                            "title": "7.5.1\tOverview",
                            "text_content": "The Content Protocols Discovery API is used by a 5GMS Application Provider to find out which content ingest or egest protocols are supported by the 5GMS AS instance(s) associated with a 5GMS AF. One of the supported ingest protocols is subsequently indicated in a Content Hosting Configuration for downlink media streaming.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "7.5.2\tResource structure",
                            "text_content": "The Content Protocols Discovery API is accessible through the following URL base path:\n{apiRoot}/3gpp-m1/{apiVersion}/provisioning-sessions/{provisioningSessionId}/\nTable 7.5.2-1 below specifies the operations and the corresponding HTTP methods that are supported by this API. In each case, the Provisioning Session identifier shall be substituted into {provisioningSessionId} in the above URL template and the sub-resource path specified in the second column of the table shall be appended to the URL base path.\nTable 7.5.2-1: Operations supported by the Ingest Protocols Discovery API\n\n",
                            "figures_meta_data": [],
                            "tables": [
                                {
                                    "description": "Table 7.5.2-1: Operations supported by the Ingest Protocols Discovery API",
                                    "table number": 28,
                                    "summary": "",
                                    "name": ""
                                }
                            ]
                        },
                        {
                            "title": "7.5.3\tData model",
                            "text_content": "The data model for the ContentProtocols resource is specified in Table 7.5.3.1-1 below:\nTable 7.5.3.1-1: Definition of ContentProtocols resource\n\nThe data model for the ContentProtocolDescriptor type is specified in table 7.5.3.2-1 below:\nTable 7.5.3.2-1: Definition of ContentProtocolDescriptor type\n\n",
                            "figures_meta_data": [],
                            "tables": [
                                {
                                    "description": "Table 7.5.3.1-1: Definition of ContentProtocols resource",
                                    "table number": 29,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 7.5.3.2-1: Definition of ContentProtocolDescriptor type",
                                    "table number": 30,
                                    "summary": "",
                                    "name": ""
                                }
                            ]
                        }
                    ]
                },
                {
                    "title": "7.6\tContent Hosting Provisioning API",
                    "description": "",
                    "summary": "",
                    "text_content": "",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": [
                        {
                            "title": "7.6.1\tOverview",
                            "text_content": "This clause specifies the API that a 5GMSd Application Provider uses at interface M1d to provision and manage 5GMSd AS Content Hosting Configurations by interacting with a 5GMSd AF. Each such configuration is represented by a ContentHostingConfiguration, the data model for which is specified in clause 7.6.3 below. The RESTful resources for managing Content Hosting Configurations are specified in clause 7.6.2 and the operations on these resources are further elaborated in clause 7.6.4.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "7.6.2\tResource structure",
                            "text_content": "The Content Hosting Provisioning API is accessible through this URL base path:\n{apiRoot}/3gpp-m1/{apiVersion}/provisioning-sessions/{provisioningSessionId}/\nTable 7.6.2-1 below specifies the operations and the corresponding HTTP methods that are supported by this API. In each case, the Provisioning Session identifier shall be substituted into {provisioningSessionId} in the above URL template and the sub-resource path specified in the second column shall be appended to the URL base path.\nTable 7.6.2-1: Operations supported by the Content Hosting Provisioning API\n\n",
                            "figures_meta_data": [],
                            "tables": [
                                {
                                    "description": "Table 7.6.2-1: Operations supported by the Content Hosting Provisioning API",
                                    "table number": 31,
                                    "summary": "",
                                    "name": ""
                                }
                            ]
                        },
                        {
                            "title": "7.6.3\tData model",
                            "text_content": "The data model for the ContentHostingConfiguration resource is specified in table 7.6.3.1-1 below:\nTable 7.6.3.1-1: Definition of ContentHostingConfiguration resource\n\nThe data model for the DistributionNetworkType enumeration is specified in Table 7.6.3.2-1 below:\nTable 7.6.3.2-1: Definition of DistributionNetworkType enumeration\n\nThe data model for the DistributionMode enumeration is specified in Table 7.6.3.3-1 below:\nTable 7.6.3.3-1: Definition of DistributionMode enumeration\n\n",
                            "figures_meta_data": [],
                            "tables": [
                                {
                                    "description": "Table 7.6.3.1-1: Definition of ContentHostingConfiguration resource",
                                    "table number": 32,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 7.6.3.2-1: Definition of DistributionNetworkType enumeration",
                                    "table number": 33,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 7.6.3.3-1: Definition of DistributionMode enumeration",
                                    "table number": 34,
                                    "summary": "",
                                    "name": ""
                                }
                            ]
                        },
                        {
                            "title": "7.6.4\tOperations",
                            "text_content": "This clause defines the behaviour that is expected from the 5GMSd AS when the Content Hosting Configuration has been successfully provisioned. The main operations that are performed affect the caching and purging of cached content as well as the processing for media preparation and at the edge.\nA Content Hosting Configuration may specify caching rules to be applied to media resources when they are distributed by the 5GMSd AS over interface M4d. The distribution shall use the urlPatternFilter in the CachingConfiguration object to determine which caching directives apply to that object. In case a media resource's URL matches the pattern filter of more than one CachingConfiguration, the first match shall apply. In case no CachingConfiguration is identified as a match, the 5GMSd AS shall apply the caching directives that were received from the origin. In the case where no match is found and the origin server does not supply caching directives at M2d, then default caching directives based on the media resource type shall be applied.\nA caching directive shall either indicate that a matching media resource is not to be cached by the 5GMSd AS, nor by downstream M4d clients (noCache set to True), or that the 5GMSd AS and downstream M4d clients are to cache it for maxAge seconds. The maxAge value applies relative to the time when a media resource was ingested, t_ingest. For an HTTP-based ingest, this corresponds to the Date header field in the HTTP request/response that carries the media resource at M2d. At the time t_ingest + maxAge, the object is considered stale and should not be served at M4d from the 5GMSd AS cache. The 5GMSd AS shall compensate for any synchronization skew between the origin and its own clock. This can be for instance done by including the max-stale HTTP cache directive in its M4d responses.\nThe maxAge value may be signalled at M4d by the 5GMSd AS using the Expires HTTP response header or the HTTP Cache-Control directives max-age or s-maxage.\nWhen distributing a media resource using HTTP, a no-cache request may be translated into a no-cache and no-store HTTP Cache-Control directive and/or a max-age=0 HTTP Cache-Control directive.\nBy default, all origin HTTP header fields shall be assumed as not forwarded by the 5GMSd AS, unless specified otherwise by setting the flag originCacheHeaders to True.\nThe 5GMSd Application Provider may perform a purge operation to invalidate some or all cached media resources of a particular Content Hosting Configuration. A regular expression describing the set of media resource URLs to be purged from the 5GMSd AS cache for the Content Hosting Configuration in question shall be supplied in the body of the request. The body shall be encoded using the application/x-www-form-urlencoded MIME content type as a key–value pair, with the key being the string pattern and the value being the regular expression.\nOn receiving a purge request, the 5GMSd AF shall immediately invalidate all media resources in the 5GMSd AS cache matching the regular expression by declaring them as stale. Any request at reference point M4d for a purged media resource will trigger the fetching (and possible caching) of the current version from the origin via M2d in case of a Pull-based ingest. For Push-based ingest, M4d requests for purged content shall be responded to with a 404 (Not Found) HTTP response, until a new version of the object is pushed by the origin to the 5GMSd AS via M2d.\nIf the procedure is successful, the 5GMSd AF shall respond with one of the following response messages:\n-\t204 (No Content) if no cache entries were purged, for example because no current cache entries matched the regular expression supplied in the original request.\n-\t200 (OK) if some cache entries were purged. The body of the response message shall indicate the total number of cache entries purged in all 5GMSd AS instances distributing the Provisioning Session in question.\nIf the procedure is not successful, the 5GMSd AF shall provide a response code as defined in clause 6.3. In addition, the HTTP response 400 (Bad Request) shall be returned in the case where the request message body – or the regular expression contained in it – are found by the 5GMSd AF to be syntactically malformed.\nThe 5GMSd AS can perform various content processing tasks (such as repackaging, encryption, ABR transcoding) on media resources ingested at M2d prior to serving them at M4d. These processing tasks shall be specified in a Content Preparation Template resource referenced from the Content Hosting Configuration object.\nThe URL signing procedure allows the 5GMSd Application Provider to prevent deep linking and unauthorized access to M4d media resources. It works by cryptographically signing some elements of the M4d request URL and then appending this authentication token to the URL as an additional query parameter. The token is generated by the 5GMSd Application Provider and supplied to the player, for example as part of an initial URL. When it receives a request that requires URL signing, the 5GMSd AS verifies the presence and validity of the token in the M4d request URL before allowing access to the requested media resource. The 5GMSd AS(s) and the origin share a secret that is encoded as part of the query parameter hash, but not shared with the 5GMSd Media Player.\nThe validity of the authentication token can also be limited to a single UE. If useIPAddress is set to True, then the public IP address of the UE as viewed by the 5GMSd AS, ue_public_ip_address, shall be incorporated into the token calculation. The parameter name shall be indicated by ipAddressName.\nThe shared secret shall be provided in UrlSignature.passphrase as a string of length between 6 and 50 characters. The parameter name for the passphrase shall be provided by passphraseName.\nThe expiry time of the signed URL, tokenExpiry, shall be included as an additional query parameter in the URL exposed at M4d with the name indicated in tokenExpiryName. The expiry time shall be the string representation of the number of seconds from 1970-01-01T00:00:00Z UTC until the specified UTC date/time, ignoring leap seconds, as defined in section 4.16 of POSIX.1 [11].\nGiven the above, the authentication token shall be calculated as:\ntoken := SHA512(url&UrlSignature.tokenExpiryName=token_expiry&UrlSignature.ipAddressName=‌ue_public_ip_address&‌UrlSignature.passphraseName=passphrase)\nwhere the SHA512 function shall be the SHA-512 hash [6] of the enclosed string. The url parameter shall be the original M4d media resource request URL, including the scheme, authority and path components but excluding any query and fragment components.\nThe resulting token value shall be \"base64url\" encoded, as specified in section 5 of RFC 4648 [10], prior to inclusion in the M4d URL.\nThe query part of the signed URL presented by the 5GMSd Media Player at M4d as proof of authenticity shall be composed as follows:\nquery := UrlSignature.tokenExpiryName=token_expiry&UrlSignature.tokenName=base64url(token)\nFor all media resources requested at reference point M4d that match the regular expression specified in UrlSignature.urlPattern, the 5GMSd AS shall validate the query presented in the request URL according to the following steps:\n1)\tIf the parameter indicated by UrlSignature.tokenName is absent from query, or if the supplied token value is malformed, the 5GMSd AS shall respond with a 403 (Forbidden) error response message and terminate further processing of the M4d request.\n2)\tIf the parameter indicated by UrlSignature.tokenExpiryName is absent from query, or if the supplied token_expiry value has expired, or if the supplied token_expiry is malformed, the 5GMSd AS shall respond with a 403 (Forbidden) error response message and terminate further processing of the M4d request.\n3)\tThe 5GMSd AS shall compute the authentication token according to the token production specified above using the requesting UE's public IP address as the value of ue_public_ip_address if required by UrlSignature.useIPAddress being set to True. After applying \"base64url\" encoding, the 5GMSd AS shall compare this with the value supplied in the URL query parameter whose name is UrlSignature.tokenName. If the two values differ, the 5GMSd AS shall respond with a 403 (Forbidden) error response message and terminate further processing of the M4d request.\n4)\tOtherwise, the presented authentication token is valid. The 5GMSd AS shall either return the media resource in a 200 (OK) response message (if it is able to serve that media resource), or else return an appropriate error response, such as 404 (Not Found) or 503 (Service Unavailable).\nThe 5GMSd Application Provider may wish to limit access to its media content at interface M2d to UEs located in certain geographical zones. Geofencing is used to configure the zone from which content is accessible.\nTwo different types of locator are specified here:\n-\tAdministrative area locator: the value of GeoFencing.locatorType shall be urn:3gpp:5gms:locator-type:‌iso3166 and each member of the GeoFencing.locators array shall be either a string representation of an ISO 3166-1 alpha-2 country code [18] (e.g. US, CN, KR, GB, FR) or an ISO 3166-2 code [19] comprising an alpha-2 country code and a country subdivision code valid for that country (e.g. US-CA, CN-GD, KR-26, GB-ENG, GB-WSM, FR-IDF, FR-75).\n[-\tTracking Area locator: the value of GeoFencing.locatorType shall be urn:3gpp:5gms:locatortype:‌trackingAreaCode and each member of the GeoFencing.locators array shall be the Fully-Qualified Domain Name representation of a Tracking Area Code, as defined in clause 19.4.2.3 of TS 23.003 [7].]\n",
                            "figures_meta_data": [],
                            "tables": []
                        }
                    ]
                },
                {
                    "title": "7.7\tConsumption Reporting Provisioning API",
                    "description": "",
                    "summary": "",
                    "text_content": "",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": [
                        {
                            "title": "7.7.1\tOverview",
                            "text_content": "The Consumption Reporting Provisioning API is a RESTful API that allows a 5GMSd Application Provider to configure the Consumption Reporting Procedure for a particular downlink media streaming Provisioning Session at interface M1d. The different procedures are described in clause 4.3.8. The Consumption Reporting Configuration is represented by a ConsumptionReportingConfiguration, the data model for which is specified in clause 7.7.3 below. The RESTful resources for managing the Consumption Reporting Configuration are specified in clause 7.7.2.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "7.7.2\tResource structure",
                            "text_content": "The Consumption Reporting Provisioning API is accessible through the following URL base path:\n{apiRoot}/3gpp-m1/{apiVersion}/provisioning-sessions/{provisioningSessionId}/\nTable 7.7.2-1 below specifies the operations and the corresponding HTTP methods that are supported by this API. In each case, the Provisioning Session identifier shall be substituted into {provisioningSessionId} in the above URL template and the sub-resource path specified in the second column shall be appended to the URL base path.\nTable 7.7.2-1: Operations supported by the Consumption Reporting Provisioning API\n\n",
                            "figures_meta_data": [],
                            "tables": [
                                {
                                    "description": "Table 7.7.2-1: Operations supported by the Consumption Reporting Provisioning API",
                                    "table number": 35,
                                    "summary": "",
                                    "name": ""
                                }
                            ]
                        },
                        {
                            "title": "7.7.3\tData model",
                            "text_content": "The data model for the ConsumptionReportingConfiguration resource is specified in table 7.7.3.1-1.\nTable 7.7.3.1-1: ConsumptionReportingConfiguration resource\n\n",
                            "figures_meta_data": [],
                            "tables": [
                                {
                                    "description": "Table 7.7.3.1-1: ConsumptionReportingConfiguration resource",
                                    "table number": 36,
                                    "summary": "",
                                    "name": ""
                                }
                            ]
                        }
                    ]
                },
                {
                    "title": "7.8\tMetrics Reporting Provisioning API",
                    "description": "",
                    "summary": "",
                    "text_content": "",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": [
                        {
                            "title": "7.8.1\tOverview",
                            "text_content": "The Metrics Reporting Provisioning API allows an 5GMS System operator or a 5GMS Application Provider to configure the Metrics Collection and Reporting procedure for a particular downlink or uplink media streamingProvisioning Session at interface M1.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "7.8.2\tResource structure",
                            "text_content": "The Metrics Reporting Provisioning API is accessible through the following URL base path:\n{apiRoot}/3gpp-m1/{apiVersion}/provisioning-sessions/{provisioningSessionId}/\nTable 7.8.2-1 below specifies the operations and the corresponding HTTP methods that are supported by this API. In each case, the Provisioning Session identifier shall be substituted into {provisioningSessionId} in the above URL template and the sub-resource path specified in the second column of the table shall be appended to the URL base path.\nTable 7.8.2-1: Operations supported by the Metrics Reporting Provisioning API\n\n",
                            "figures_meta_data": [],
                            "tables": [
                                {
                                    "description": "Table 7.8.2-1: Operations supported by the Metrics Reporting Provisioning API",
                                    "table number": 37,
                                    "summary": "",
                                    "name": ""
                                }
                            ]
                        },
                        {
                            "title": "7.8.3\tData model",
                            "text_content": "The data model for the MetricsReportingConfiguration resource is specified in table 7.8.3-1 below:\nTable 7.8.3-1: Definition of MetricsReportingConfiguration resource\n\n",
                            "figures_meta_data": [],
                            "tables": [
                                {
                                    "description": "Table 7.8.3-1: Definition of MetricsReportingConfiguration resource",
                                    "table number": 38,
                                    "summary": "",
                                    "name": ""
                                }
                            ]
                        }
                    ]
                },
                {
                    "title": "7.9\tPolicy Templates Provisioning API",
                    "description": "",
                    "summary": "",
                    "text_content": "",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": [
                        {
                            "title": "7.9.1\tOverview",
                            "text_content": "The Policy Templates Provisioning API allow a 5GMS Application Provider to configure a set of Policy Templates within the scope of a Provisioning Session that can subsequently be applied to downlink or uplink media streaming sessions belonging to that Application Provider using the Dynamic Policies API specified in clause 11.5. A Policy Template is used to specify the traffic shaping and charging policies to be applied to these media streaming sessions.\nA Policy Template, identified by its policyTemplateId, represents a set of PCF/NEF API parameters which defines the service quality and associated charging for the corresponding downlink or uplink media streaming session(s). The Policy Template is configured as part of the provisioning procedures with the 5GMS AF and is then used by the 5GMS AF to request specific QoS and charging policies for that session from the PCF or NEF.\nThe state of a Policy Template can be:\n-\tpending: The Policy Template is awaiting validation, potentially because not all required parameters have yet been provided. This is the default state after Policy Template creation.\n-\tinvalid: One or more of the Policy Template's properties failed validation by the 5GMS AF.\n-\tready: After successful validation by the 5GMS AF the Policy Template moves into this state.\n-\tsuspended: The 5GMS AF may move a Policy Template into this state under certain conditions defined within the Service Level Agreement.\nWhen the Policy Template is used for QoS Flows, the qoSSpecification object (of type M1QoSSpecification) shall be present:\n-\tThe qosReference value is obtained with the Service Level Agreement. See TS 23.502 [45] for detailed usage.\n-\tThe maxBtrUl and maxBtrDl properties define the maximal bit rate which can be used for QoS Flows. This value is defined by the 5G System.\n-\tThe maxAuthBtrUl and MaxAuthBtrDl properties define the maximal authorized bit rate values which can be requested by a Media Session Handler. Higher bit rate values are not authorized for use by the 5GMS Application Provider.\n-\tThe minPacketLossRateDl and minPacketLossRateUl properties define the minimal authorized packet loss rate, which can be requested by a Media Session Handler.\nWhen the Policy Template is used for differential charging the chargingSpecification property shall be present.\napplicationSessionContext is an optional child object.\n-\tThe dnn property contains the Data Network Name of the data network in which the 5GMS AF is hosted.\n-\tWhen Network Slicing is used, the sliceInfo property contains information about the network slice which is serving the UE.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "7.9.2\tResource structure",
                            "text_content": "The Policy Template Provisioning API is accessible through the following URL base path:\n{apiRoot}/3gpp-m1/{apiVersion}/provisioning-sessions/{provisioningSessionId}/\nTable 7.9.2-1 below specifies the operations and the corresponding HTTP methods that are supported by this API. In each case, the Provisioning Session identifier shall be substituted into {provisioningSessionId} in the above URL template and the sub-resource path specified in the second column shall be appended to the URL base path.\nTable 7.9.2-1: Operations supported by the Policy Template Provisioning API\n\n",
                            "figures_meta_data": [],
                            "tables": [
                                {
                                    "description": "Table 7.9.2-1: Operations supported by the Policy Template Provisioning API",
                                    "table number": 39,
                                    "summary": "",
                                    "name": ""
                                }
                            ]
                        },
                        {
                            "title": "7.9.3\tData model",
                            "text_content": "The data model for the PolicyTemplate resource is specified in table 7.9.3-1 below:\nTable 7.9.3.1-1: Definition of PolicyTemplate resource\n\n",
                            "figures_meta_data": [],
                            "tables": [
                                {
                                    "description": "Table 7.9.3.1-1: Definition of PolicyTemplate resource",
                                    "table number": 40,
                                    "summary": "",
                                    "name": ""
                                }
                            ]
                        }
                    ]
                },
                {
                    "title": "7.10\tEdge Resources Provisioning API",
                    "description": "",
                    "summary": "",
                    "text_content": "",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": [
                        {
                            "title": "7.10.1\tGeneral",
                            "text_content": "The Edge Resources Provisioning API is used by the 5GMS Application Provider to provision edge resource usage for media streaming sessions associated with the parent Provisioning Session. The information serves as a template to select or instantiate the appropriate 5GMS AS EAS instance that will serve the media session to the UE.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "7.10.2\tResource structure",
                            "text_content": "The Edge Resources API is accessible through the following URL base path:\n{apiRoot}/3gpp-m1/{apiVersion}/provisioning-sessions/{provisioningSessionId}/\nTable 7.10.2-1 specifies the operations and the corresponding HTTP methods that are supported by the Edge Resources API. In each case, the Provisioning Session identifier shall be substituted into {provisioningSessionId} in the above URL template and the sub-resource path indicated by the second column of the table shall be appended to the resulting URL base path.\nTable 7.10.2-1: Operations supported by the Edge Resources API\n\n",
                            "figures_meta_data": [],
                            "tables": [
                                {
                                    "description": "Table 7.10.2-1: Operations supported by the Edge Resources API",
                                    "table number": 41,
                                    "summary": "",
                                    "name": ""
                                }
                            ]
                        },
                        {
                            "title": "7.10.3\tData model",
                            "text_content": "The data model for the Edge Resources Configuration resource is specified in table 7.10.3.1-1:\nTable 7.10.3.1-1: Definition of EdgeResourcesConfiguration resource type\n\nThe EdgeManagementMode enumeration is specified in table 7.10.3.2-1 below:\nTable 7.10.3.2-1: Definition of EdgeManagementMode enumeration\n\nThe EASRequirements type is specified in table 7.10.3.3-1 below:\nTable 7.10.3.3-1: Definition of EASRequirements type\n\nThe M1ACRRequirements type is specified in table 7.10.3.4-1 below:\nTable 7.10.3.4-1: Definition of M1EASRelocationRequirements type\n\n",
                            "figures_meta_data": [],
                            "tables": [
                                {
                                    "description": "Table 7.10.3.1-1: Definition of EdgeResourcesConfiguration resource type",
                                    "table number": 42,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 7.10.3.2-1: Definition of EdgeManagementMode enumeration",
                                    "table number": 43,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 7.10.3.3-1: Definition of EASRequirements type",
                                    "table number": 44,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 7.10.3.4-1: Definition of M1EASRelocationRequirements type",
                                    "table number": 45,
                                    "summary": "",
                                    "name": ""
                                }
                            ]
                        }
                    ]
                },
                {
                    "title": "7.11\tEvent Data Processing Provisioning API",
                    "description": "",
                    "summary": "",
                    "text_content": "",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": [
                        {
                            "title": "7.11.1\tGeneral",
                            "text_content": "The Event Data Processing Provisioning API is used by a 5GMS Application Provider to provide Event Data Processing Configurations to the Data Collection AF instantiated in the 5GMS AF. Each such configuration is represented by an EventDataProcessingConfiguration resource, the data model of which is specified in clause 7.11.3 below. It comprises processing rules and parameters expressed by Data Access Profiles each of which defines a level of access by Event consumers to the UE data collected by the Data Collection AF. The RESTful structure of the Data Exposure Restriction Configuration resource collection, along with the operations and corresponding HTTP methods for managing resources of this type are defined in clause 7.11.2.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "7.11.2\tResource structure",
                            "text_content": "The Event Data Processing Provisioning API is accessible through the following URL base path:\n{apiRoot}/3gpp-m1/{apiVersion}/provisioning-sessions/{provisioningSessionId}/\nTable 7.11.2-1 below specifies the operations and the corresponding HTTP methods that are supported by this API. In each case, the Provisioning Session identifier shall be substituted into {provisioningSessionId} in the above URL template and the sub-resource path specified in the second column shall be appended to the URL base path.\nTable 7.11.2-1: Operations supported by the Data Exposure Restriction API\n\n",
                            "figures_meta_data": [],
                            "tables": [
                                {
                                    "description": "Table 7.11.2-1: Operations supported by the Data Exposure Restriction API",
                                    "table number": 46,
                                    "summary": "",
                                    "name": ""
                                }
                            ]
                        },
                        {
                            "title": "7.11.3\tData model",
                            "text_content": "The data model for the EventDataProcessingConfiguration resource is specified in table 7.11.3-1 below:\nTable 7.11.3-1: Definition of EventDataProcessingConfiguration resource\n\n",
                            "figures_meta_data": [],
                            "tables": [
                                {
                                    "description": "Table 7.11.3-1: Definition of EventDataProcessingConfiguration resource",
                                    "table number": 47,
                                    "summary": "",
                                    "name": ""
                                }
                            ]
                        }
                    ]
                }
            ]
        },
        {
            "title": "8\tMedia Ingest and Publish (M2) protocols",
            "description": "",
            "summary": "",
            "tables": [],
            "figures_meta_data": [],
            "subsections": [
                {
                    "title": "8.1\tGeneral",
                    "description": "",
                    "summary": "",
                    "text_content": "The set of content protocols supported by the 5GMS AS is listed in table 8.1-1 below:\nTable 8.1-1: Supported content protocols\n\n",
                    "tables": [
                        {
                            "description": "Table 8.1-1: Supported content protocols",
                            "table number": 48,
                            "summary": "",
                            "name": ""
                        }
                    ],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "8.2\tHTTP pull-based content ingest protocol",
                    "description": "",
                    "summary": "",
                    "text_content": "If IngestConfiguration.protocol is set to urn:3gpp:5gms:content-protocol:http-pull-ingest in the Content Hosting Configuration, media resources shall be ingested by the 5GMSd AS using HTTP [9]. The IngestConfiguration.pull property shall be set to True, indicating that a Pull-based protocol is used. The IngestConfiguration.baseURL property shall point at the 5GMSd Application Provider's origin server, as specified in table 7.6.3.1-1, and may indicate the use of HTTPS [16].\nWhen the 5GMSd AS receives a request for a media resource at interface M4d that cannot be satisfied from its content cache, the request shall be transformed into a corresponding HTTP GET request directed to the 5GMSd Application Provider's origin server via interface M2d as follows:\n1.\tThe prefix of the request URL indicated in the Distribution‌Configuration.‌baseURL of the applicable Content Hosting Configuration is replaced with that of the corresponding Ingest‌Configuration‌.baseURL.\nNOTE 1:\tIt is the responsibility of the 5GMSd AF to assign unique M4d base URLs to each provisioned Content Hosting Configuration so as to ensure that this substitution is unambiguous.\n2.\tThe path rewrite rules (if provisioned in DistributionConfiguration.PathRewriteRules) are applied in strict order to the remainder of the request URL (i.e., the path segments following Distribution‌Configuration.‌baseURL). The requestPathPattern of the first matching path rewrite rule is replaced with the corresponding mappedPath.\nIn the case where the 5GMSd Application Provider's origin server issues an HTTP 3xx redirect at reference point M2d pointing to another location, the 5GMSd AS shall issue an equivalent HTTP redirect to the Media Player via reference point M4d whose location is a dynamically generated M4d endpoint. Requests to this location shall be rewritten by the 5GMSd AS to the target location of the M2d redirection.\nNOTE 2:\tThis explicit handling of HTTP redirects received by the 5GMSd AS at reference point M2d ensures that it is not bypassed by the Media Player. The general concept underlying this is commonly referred to as a \"reverse mapping rule\" by HTTP reverse proxies.\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "8.3\tDASH-IF push-based content ingest protocol",
                    "description": "",
                    "summary": "",
                    "text_content": "If IngestConfiguration.protocol is set to urn:3gpp:5gms:content-protocol:dash-if-ingest in the Content Hosting Configuration, media resources shall be ingested by the 5GMSd AS as specified by the DASH-IF Live Media Ingest specification [3]. The IngestConfiguration.pull property shall be set to False, indicating that a Push-based protocol is used. The IngestConfiguration.baseURL property shall be set by the 5GMSd AF to the base URL that is to be used by the 5GMSd Application Provider to upload the DASH segments and MPD(s) to the 5GMSd AS at reference point M2d.\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                }
            ]
        },
        {
            "title": "9\tInternal (M3) APIs",
            "description": "APIs of this reference point are not specified within this release.\n",
            "summary": "",
            "tables": [],
            "figures_meta_data": [],
            "subsections": []
        },
        {
            "title": "10\tMedia Streaming (M4) APIs",
            "description": "",
            "summary": "",
            "tables": [],
            "figures_meta_data": [],
            "subsections": [
                {
                    "title": "10.1\tGeneral",
                    "description": "",
                    "summary": "",
                    "text_content": "This clause deals with the interface and APIs for media streaming for different distribution formats and protocols. TS 26.511 [35] defines the integration of several media codecs into 5G Media Streaming,and provides requirements and recommendations for the support of these media profiles in specific 5G Media Streaming profiles. However, 5GMS is not restricted to the media profiles defined in TS 26.511 [35]. Any CMAF media profile may be used and distributed within 5G Media Streaming as long as it can be used with APIs and interfaces defined in this specification.\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "10.2\tDASH Distribution",
                    "description": "",
                    "summary": "",
                    "text_content": "In the case of DASH distribution, M4d is relevant for the distribution as shown in figure 10.2-1.\nThe figure depicts a 2-1 diagram illustrating the usage of M4d (Multi-Rate 4-bit) for DASH distribution. The diagram shows the distribution of data packets over two different paths, with the M4d usage indicated by the dashed lines. The use of M4d ensures efficient data transmission and reduces the number of packets that need to be retransmitted, resulting in improved network performance.\nFigure 10.2-1: M4d usage for DASH distribution\nFor DASH-based distribution according to TS 26.247 [4] and ISO/IEC 23009-1 [32], two main formats are of relevance:\n1)\tThe Media Presentation Description (MPD) that is processed in the DASH Access Client.\n2)\tThe Segment formats that are passed through the DASH Access Client and processed in the Media Playback and Content Decryption Platform. Note that the DASH Access Client may parse Segments to extract for example Inband Events or producer reference times.\nOther resources may be referenced in the MPD, for example DRM related information.\nThe Segment formats for DASH Streaming in the context of 5G Media Streaming are defined in TS 26.511 [35] based on the CMAF encapsulation. The DASH Access Client downloads the Segments from the 5GMSd AS based on the instructions in the MPD and the instructions from the 5GMSd-Aware Application through M7d (see clause 13 for details).\nThe interface between the DASH Access Client and the Media Playback and Content Decryption Platform as well as the 5GMSd Client requirements for media codecs are documented in TS 26.511 [35].\nThe following requirements apply for M4d:\n1)\tThe Media Presentation Description (MPD) and Segments shall conform to an MPD according to ISO/IEC 23009-1 [32] or TS 26.247 [4].\n2)\tThe Segment formats should conform to CMAF addressable resources as well as to the requirements in TS 26.511 [35].\n3)\tThe Media Presentation should conform to the 5G Media Streaming DASH Interoperability Point as defined in clause 7.3.11 of TS 26.247 [4].\nA 5GMSd Client shall support the 5G Media Streaming DASH Interoperability Point as defined in TS 26.247 [4], clause 7.3.11. A 5GMSd Client may support additional DASH profiles and interoperability points.\nThe MPD may contain a one or several ServiceDescription elements that include operational parameters. The MPD may also include multiple configurations for the media (different codecs, different content protection, different resolutions, etc.), for example for playback under different operating policies. The handling of this information is documented in clause 13.2.\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                }
            ]
        },
        {
            "title": "11\tMedia Session Handling (M5) APIs",
            "description": "",
            "summary": "",
            "tables": [],
            "figures_meta_data": [],
            "subsections": [
                {
                    "title": "11.1\tGeneral",
                    "description": "",
                    "summary": "",
                    "text_content": "This clause defines the Media Session Handling APIs used by the Media Session Handler to access resources exposed by the 5GMS AF at interface M5.\nNOTE:\tWhile the entirety of the Media Session Handling APIs apply to downlink media streaming, only a subset is applicable to uplink media streaming. Specifically, the Consumption Reporting API is not applicable to uplink media streaming.\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "11.2\tService Access Information API",
                    "description": "",
                    "summary": "",
                    "text_content": "",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": [
                        {
                            "title": "11.2.1\tGeneral",
                            "text_content": "The Service Access Information API is used by the Media Session Handler to obtain configuration information from the 5GMS AF that enables it to use the other Media Session Handling APIs specified in clause 11.3 et seq.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "11.2.2\tResource structure",
                            "text_content": "The Service Access Information API is accessible through the following URL base path:\n{apiRoot}/3gpp-m5/{apiVersion}/service-access-information/\nThe operations and the corresponding HTTP methods in Table 11.2.2-1 are supported. In each case, the sub-resource path specified in the second column shall be appended to the URL base path.\nTable 11.2.2-1: Operations supported by the Service Access Information API\n\n",
                            "figures_meta_data": [],
                            "tables": [
                                {
                                    "description": "Table 11.2.2-1: Operations supported by the Service Access Information API",
                                    "table number": 49,
                                    "summary": "",
                                    "name": ""
                                }
                            ]
                        },
                        {
                            "title": "11.2.3\tData model",
                            "text_content": "The data model for the ServiceAccessInformation resource is specified in table 11.2.3.1-1 below. Different properties are present in the resource depending on the type of Provisioning Session from which the Service Access Information is derived (as indicated in the provisioningSessionType property) and this is specified in the Applicability column.\nTable 11.2.3.1-1: Definition of ServiceAccessInformation resource\n\nTable 11.2.3.2-1  Definition of EASDiscoveryTemplate type\n\nTable 11.2.3.3-1: Definition of M5EASRelocationRequirements type\n\n",
                            "figures_meta_data": [],
                            "tables": [
                                {
                                    "description": "Table 11.2.3.1-1: Definition of ServiceAccessInformation resource",
                                    "table number": 50,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 11.2.3.2-1  Definition of EASDiscoveryTemplate type",
                                    "table number": 51,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 11.2.3.3-1: Definition of M5EASRelocationRequirements type",
                                    "table number": 52,
                                    "summary": "",
                                    "name": ""
                                }
                            ]
                        },
                        {
                            "title": "11.2.4\tOperations",
                            "text_content": "This clause defines the behaviour that is expected from the 5GMS AF when a Service Access Information resource is acquired by the Media Session Handler. The main operation that is performed is to look up or generate the Service Access Information corresponding to the requested Provisioning Session.\n",
                            "figures_meta_data": [],
                            "tables": []
                        }
                    ]
                },
                {
                    "title": "11.3\tConsumption Reporting API",
                    "description": "",
                    "summary": "",
                    "text_content": "",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": [
                        {
                            "title": "11.3.1\tGeneral",
                            "text_content": "The Consumption Reporting API allows the Media Session Handler to report downlink media consumption to the 5GMSd AF. The API defines data models, resources and the related procedures for the creation and management of the consumption reporting procedures. This procedure is configured by the ServiceAccessInformation resource, as defined in clause 11.2.3.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "11.3.2\tReporting procedure",
                            "text_content": "Consumption reports shall be submitted to a 5GMSd AF endpoint according to the following general URL format:\n{apiRoot}/3gpp-m5/{apiVersion}/consumption-reporting/{provisioningSessionId}\nwhere the first three elements shall be substituted by the 5GMSd Client with one of the base URLs selected from the client‌Consumption‌Reporting‌Configuration.‌serverAddresses array of the ServiceAccessInformation resource (see clause 11.2.3.1) and {provisioningSessionId} shall be substituted with the relevant Provisioning Session identifier obtained from Service Access Information (see clause 11.2.3).\nThe only HTTP method supported by this endpoint is POST.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "11.3.3\tReport format",
                            "text_content": "This type represents the format of consumption report instance. This structure is used by the Media Session Handler to report the consumption.\nTable 11.3.3.1-1: Definition of ConsumptionReport format\n\nThis type represents a single consumption reporting unit.\nTable 11.3.3.2-1: Definition of type ConsumptionReportingUnit\n\n",
                            "figures_meta_data": [],
                            "tables": [
                                {
                                    "description": "Table 11.3.3.1-1: Definition of ConsumptionReport format",
                                    "table number": 53,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 11.3.3.2-1: Definition of type ConsumptionReportingUnit",
                                    "table number": 54,
                                    "summary": "",
                                    "name": ""
                                }
                            ]
                        }
                    ]
                },
                {
                    "title": "11.4\tMetrics Reporting API",
                    "description": "",
                    "summary": "",
                    "text_content": "",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": [
                        {
                            "title": "11.4.1\tGeneral",
                            "text_content": "The Metrics Reporting API allows the Media Session Handler to send QoE metrics reports to the 5GMS AF. This procedure is configured by the ServiceAccessInformation resource, as defined in clause 11.2.3. Note that multiple metrics configurations can be active at the same time, each identified by a unique metricsReportingConfigurationId.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "11.4.2\tReporting procedure",
                            "text_content": "Metrics reports related to a specific metricsReportingConfigurationId shall be submitted according to the following general format:\n{apiRoot}/3gpp-m5/{apiVersion}/metrics-reporting/‌{provisioningSessionId}/‌{metricsReporting‌ConfigurationId}\nwhere the first three elements shall be substituted by the 5GMS Client with one of the base URLs selected from the client‌Metrics‌Reporting‌Configurations.serverAddresses array of the ServiceAccessInformation resource (see clause 11.2.3.1), {provisioning‌Session‌Id} shall be substituted with the relevant Provisioning Session identifier obtained from Service Access Information (see clause 11.2.3) and {metricsReportingConfigurationId} shall be substituted with the relevant Metrics Reporting Configuration identifier.\nThe only HTTP method supported by this endpoint is POST.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "11.4.3\tReport format",
                            "text_content": "Metrics reports shall be submitted by the Media Session Handler in a format specified by the metrics reporting scheme in question. The Content-Type HTTP request header shall be set in accordance with the relevant metrics reporting scheme specification.\nNOTE:\tFor downlink media streaming, TS 26.247 [7] clauses 10.6.1 and 10.6.2 specify the required MIME content type and metrics report format for the 3GPP urn:‌3GPP:‌ns:‌PSS:‌DASH:‌QM10 metrics reporting scheme. For virtual reality media the report format is further extended as defined in TS 26.118 [42] clause 9.4.\nIn XML documents representing metrics reports for 3GP-DASH downlink media streaming services, the ReceptionReport@clientID attribute, if present and is available to the Media Session Handler, should be a GPSI value as defined by TS 23.003 [7]. Otherwise, this attribute should be represented by a stable and globally unique string.\n",
                            "figures_meta_data": [],
                            "tables": []
                        }
                    ]
                },
                {
                    "title": "11.5\tDynamic Policies API",
                    "description": "",
                    "summary": "",
                    "text_content": "",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": [
                        {
                            "title": "11.5.1\tOverview",
                            "text_content": "The Dynamic Policies API allows the Media Session Handler to request a specific policy and charging treatment to be applied to a particular application data flow of a downlink or uplink media streaming session by invoking RESTful operations on the 5GMS AF at interface M5. The API defines a set of data models, resources and the related procedures for the creation and management of the dynamic policy request.\nApplication Identifiers, referring to one or more Packet Flow Description (PFD), may be used as alternative traffic filtering parameters for dynamic policy invocation. The 5GMSd AF shall first provision a PFD in the PFDF for one or more (external) Application IDs by sending an HTTP POST message to the NEF as specified in clause 4.4.10 of TS 29.122 [12]. The mapping between the (external) Application Identifiers and PFDs stored in the PFDF will then be pushed to or pulled from the SMF and installed in the UPF for future traffic identifications.\nNOTE:\tThe PFDF is a functionality within the NEF.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "11.5.2\tResource structure",
                            "text_content": "The Dynamic Policies API is accessible through the following URL base path:\n{apiRoot}/3gpp-m5/{apiVersion}/dynamic-policies/\nwhere the first three elements shall be substituted by the 5GMS Client with one of the URLs selected from the dynamicPolicy‌Invocation‌Configuration.serverAddresses array of the ServiceAccessInformation resource (see clause 11.2.3.1).\nTable 11.5.2-1 below specifies the operations and the corresponding HTTP methods that are supported by this API. The sub-resource path specified in the second column shall be appended to the URL base path.\nTable 11.5.2-1: Operations supported by the Dynamic Policies API\n\n",
                            "figures_meta_data": [],
                            "tables": [
                                {
                                    "description": "Table 11.5.2-1: Operations supported by the Dynamic Policies API",
                                    "table number": 55,
                                    "summary": "",
                                    "name": ""
                                }
                            ]
                        },
                        {
                            "title": "11.5.3\tData model",
                            "text_content": "The DynamicPolicy resource is specified in table 11.5.3.1-1 below.\nTable 11.5.3.1-1: Definition of Dynamic Policy resource\n\n",
                            "figures_meta_data": [],
                            "tables": [
                                {
                                    "description": "Table 11.5.3.1-1: Definition of Dynamic Policy resource",
                                    "table number": 56,
                                    "summary": "",
                                    "name": ""
                                }
                            ]
                        },
                        {
                            "title": "11.5.4\tOperations",
                            "text_content": "This clause defines the behaviour that is expected when activating a Dynamic Policy Instance.\nThe policyTemplateId property uniquely identifies the Policy Template with which the Dynamic Policy Instance is associated.\nThe provisioningSessionId property associates the Dynamic Policy Instance with a Provisioning Session.\nThe Dynamic Policy resource contains a serviceDataFlowDescriptions property which contains a set of service data flow templates according to TS 23.503 [33]. Each service data flow template contains one of:\n-\ta flowDescription object (including 5-tuples, Type of Service, Security Parameter Index, etc.).\n-\ta domainName.\nWhen the Media Session Handler is attempting to activate a QoS-related Dynamic Policy Template, then the qosSpecification property shall be present and it shall contain the following properties:\n-\tmarBwDlBitRate or marBwUlBitRate, indicating the maximum requested bit rate by the Media Session Handler.\n-\tmirBwDlBitRate or mirBwUlBitRate, indicating the minimum requested bit rate by the Media Session Handler.\n-\tminDesBwDlBitRate or minDesBwUlBitrate, indicating the minimum bit rate desired by the Media Session Handler.\nWhen the 5G System employs a traffic enforcement function to ensure that the traffic is complying a certain traffic policy, the Dynamic Policy resource may contain the following two properties:\n-\tan enforcementMethod, indicating the type of enforcement method (like leaky bucket).\n-\tan enforcementBitrate property, indicating the maximal permitted bit rate.\n",
                            "figures_meta_data": [],
                            "tables": []
                        }
                    ]
                },
                {
                    "title": "11.6\tNetwork Assistance API",
                    "description": "",
                    "summary": "",
                    "text_content": "",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": [
                        {
                            "title": "11.6.1\tOverview",
                            "text_content": "If AF-based Network Assistance is supported, then the Network Assistance API component of interface M5, as defined in the present sub-clause, is first used to provision a Network Assistance Session resource. The Network Assistance Resource can then be used to obtain bit rate recommendations and to issue delivery boost requests during the ongoing media streaming session.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "11.6.2\tResource structure",
                            "text_content": "The Network Assistance API is accessible via the following URL base path:\n{apiRoot}/3gpp-m5/{apiVersion}/network-assistance/\nwhere the first three elements shall be substituted by the 5GMS Client with one of the URLs selected from the network‌Assistance‌Configuration.serverAddresses array of the ServiceAccessInformation resource (see clause 11.2.3.1).\nTable 11.6.2-1 below specifies the operations and the corresponding HTTP methods that are supported by this API. In each case, the sub-resource path specified in the second column of the table shall be appended to the URL base path.\nTable 11.6.2-1: Operations supported by the Network Assistance API\n\n",
                            "figures_meta_data": [],
                            "tables": [
                                {
                                    "description": "Table 11.6.2-1: Operations supported by the Network Assistance API",
                                    "table number": 57,
                                    "summary": "",
                                    "name": ""
                                }
                            ]
                        },
                        {
                            "title": "11.6.3\tData model",
                            "text_content": "The NetworkAssistanceSession resource is specified in table 11.6.3.1-1 below.\nTable 11.6.3.1-1: Definition of NetworkAssistanceSession resource\n\n",
                            "figures_meta_data": [],
                            "tables": [
                                {
                                    "description": "Table 11.6.3.1-1: Definition of NetworkAssistanceSession resource",
                                    "table number": 58,
                                    "summary": "",
                                    "name": ""
                                }
                            ]
                        },
                        {
                            "title": "11.6.4\tOperations",
                            "text_content": "This clause defines the behaviour that is expected when creating a Network Assistance session.\nThe Media Session Handler uses the POST HTTP method to create a Network Assistance session with the 5GMS AF. The request includes a NetworkAssistanceSession resource representation in the message body.\nThe provisioningSessionId property associates the Network Assistance session with a Provisioning Session.\nThe Media Session Handler populates the NetworkAssistanceSession resource representation in the request with service data flow information and optionally the Policy Template identifier of the network QoS policy currently in force on the media streaming session for which Network Assistance operations are to be performed. (The 5GMS AF subsequently uses this information to execute Network Assistance operations in the 5GC.)\nThe serviceDataFlowDescriptions property contains a set of service data flow templates according to TS 23.503 [33]. Each service data flow template contains one of:\n-\ta flowDescription object (including 5-tuples, Type of Service, Security Parameter Index, etc.).\n-\ta domainName.\nThe requestedQoS property is used by the Media Session Handler to specify a network QoS it initially wishes to use for the media streaming session. If the policyTemplateId property is also populated in the NetworkAssistanceSession resource, the 5GMS AF shall return a 400 Bad Request HTTP response message if the requested network QoS lies outside the limits specified in the referenced Policy Template.\nIf the requestedQoS property is omitted from the NetworkAssistanceSession resource but the policyTemplateId is populated, the 5GMS AF shall use the network QoS currently provisioned in the referenced Policy Template as the floor/ceiling for bit rate recommendations and delivery boosts within the scope of the Network Assistance session.\nIf neither a policyTemplateId nor a requestedQoS are supplied when creating a Network Assistance session, operations invoked on the 5GMS AF within the scope of the Network Assistance session are constrained only by the policies of the PCF.\nThe 5GMS AF returns the Network Assistance session identifier if session setup was successful, otherwise an error code is returned without a Network Assistance session identifier.\nThe 5GMS Client uses the Network Assistance session resource identifier (naSessionId) provided by the 5GMS AF to refer all subsequent API calls to the 5GMS AF applicable to that Network Assistance session.\nThe 5GMS Client uses the GET HTTP method with the Network Assistance Session resource identifier to retrieve a Network Assistance Session resource from the 5GMS AF. The 5GMS AF returns the Network Assistance Session resource if retrieval was successful, otherwise an appropriate error code is returned without the session resource in case of failure.\nThe Media Session Handler uses the GET HTTP method with the sub-resource path specified in table 11.6.2-1 to request a bit rate recommendation from the 5GMS AF. The 5GMS AF shall return the recommended bit rate in an HTTP response body of type M5QoSSpecification if a bit rate recommendation could be obtained, otherwise an appropriate HTTP error code shall be returned with no response body.\n-\tFor a downlink media streaming session, the recommended minimum and maximum downlink bit rates shall be indicated in the properties mirBwDlBitRate and marBwDlBitRate respectively. The 5GMSd Client shall ignore the mandatory properties related to uplink streaming, i.e. mirBwUlBitRate and marBwUlBitRate.\n-\tFor an uplink media streaming session, the recommended minimum and maximum uplink bit rates shall be indicated in the properties mirBwUlBitRate and marBwUlBitRate, respectively. The 5GMSu Client shall ignore the mandatory properties related to downlink streaming, i.e. mirBwDlBitRate and marBwDlBitRate.\nIf a unique recommendation is given by the 5GMS AF then this recommended bit rate shall be set in both of these properties. The optional properties minDesBwDlBitRate, minDesBwUlBitRate, desLatency and desLoss shall not be included in the response.\nThe Media Session Handler uses the POST HTTP method with the sub-resource path specified in table 11.6.2-1 to request a delivery boost from the 5GMS AF. The 5GMS AF shall respond with the OperationSuccessResponse data type indicating whether or not the delivery boost will be attempted by the network within an upcoming nominal time period.\nThe Media Session Handler uses the PUT or PATCH HTTP methods to replace the existing steaming session parameters with new settings. For example, any change to the Policy Template currently in force resulting from an invocation of the Dynamic Policies API (see clause 11.5) should also be notified to the 5GMS AF using this operation if a Network Assistance session has been created for the media streaming session in question.\nThe 5GMS AF returns the NetworkAssistanceSession resource with settings resulting from the PUT or PATCH update operation.\nThe Media Session Handler uses the DELETE HTTP method to terminate the indicated Network Assistance session. The 5GMS AF returns an appropriate response code. If the termination was successful, then any subsequent calls referring to the terminated session will result in the error 404 (Not Found).\n",
                            "figures_meta_data": [],
                            "tables": []
                        }
                    ]
                }
            ]
        },
        {
            "title": "12\tUE Media Session Handling (M6) APIs for uplink and downlink",
            "description": "",
            "summary": "",
            "tables": [],
            "figures_meta_data": [],
            "subsections": [
                {
                    "title": "12.1\tGeneral",
                    "description": "",
                    "summary": "",
                    "text_content": "This clause defines the client APIs for Media Session Handling to be used by other 5G System components such as a Media Player in a 5GMSd Client or the Media Streamer in a 5GMSu Client.\nNOTE:\tClient-driven management of edge processing resources via reference point M6 is not specified in this release.\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "12.2\tMedia Session Handling for Downlink media streaming – APIs and Functions",
                    "description": "",
                    "summary": "",
                    "text_content": "",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": [
                        {
                            "title": "12.2.1\tOverview",
                            "text_content": "In the following, it is assumed that the Media Session Handler for downlink media streaming adheres to a basic set of functionalities as shown in Figure 12.2.1-1.\nThe figure depicts a usage of M6d in Media Downlink Streaming, illustrating the use of M6d in the Media Downlink (MDL) system. MDL is a key component in 5G networks, enabling efficient and reliable data transmission. The figure shows the MDL system's architecture, including the use of M6d, which is a key technology in 5G networks. The figure also highlights the importance of M6d in ensuring high-quality streaming experiences for users.\nFigure 12.2.1-1: Usage of M6d in Media Downlink Streaming\nThe Media Session Handler is considered to run as a service in the background, and is invoked for a media session once a media player in the 5GMSd streaming client is activated with an MPD URL of media MIME type \"application/dash+xml\". Based on the MPD URL, the Media Session Handler may initiate communication with the 5GMSd AF through M5d.\nNOTE:\tThe initiation of the Media Session Handler for other media types than DASH is for further study.\nFor an ongoing 5G Media Streaming session, the Media Session Handler is given the following authorizations:\n1)\tThe ability to do status query on M7d. For details see clause 13.\n2)\tThe ability to process notifications and error on M7d. For details see clause 13.\n3)\tThe ability to configure certain parameters on the media player based on M7d. For details again see clause 13.\nIn addition, the MSH can provide information on M6d to the application and possibly delegated to Media Player using M6d for each of the Media Session Handler functionalities, namely providing:\n1)\tNotification and Error Events;\n2)\tStatus Information.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "12.2.2\tMedia Session Handler model",
                            "text_content": "An informative state model for the Media Session Handler is for further study.\nThe Media Session Handler maintains internal properties as defined Table 12.2.2.2-1. Note that the parameters are conceptual and internal and only serve for the purpose to describe message generation on the API calls.\nTable 12.2.2.2-1: Parameters of Media Session Handler\n\nThis aspect is for further study.\nThere are different ways to start a Media Session Handler. The most typical one is that the start is bound to the call of a Media Player with an MPD URL. That start method offers a client–server like interface realized by M6d. The service is bound such that the Media Session Handler communicates back to the Media Player.\n",
                            "figures_meta_data": [],
                            "tables": [
                                {
                                    "description": "Table 12.2.2.2-1: Parameters of Media Session Handler",
                                    "table number": 59,
                                    "summary": "",
                                    "name": ""
                                }
                            ]
                        },
                        {
                            "title": "12.2.3\tGeneral",
                            "text_content": "Table 12.2.3-1 provides a list status information that can be obtained from the Media Session Handler through reference point M6d.\nTable 12.2.3-1: General Status Information\n\nTable 12.2.3-2 provides a list of general notification events exposed at reference point M6d.\nTable 12.2.3-2: General Notification Events\n\nTable 12.2.3-3 provides a list of general error events exposed at reference point M6d.\nTable 12.2.3-3: General Error Events\n\n",
                            "figures_meta_data": [],
                            "tables": [
                                {
                                    "description": "Table 12.2.3-1: General Status Information",
                                    "table number": 60,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 12.2.3-2: General Notification Events",
                                    "table number": 61,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 12.2.3-3: General Error Events",
                                    "table number": 62,
                                    "summary": "",
                                    "name": ""
                                }
                            ]
                        },
                        {
                            "title": "12.2.4\tDynamic Policy Information",
                            "text_content": "Details are for further study.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "12.2.5\tNetwork Assistance Information",
                            "text_content": "Details are for further study.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "12.2.6\tConsumption Reporting Information",
                            "text_content": "Table 12.2.6-1 provides a list status information that can be obtained from the Media Session Handler through reference point M6d.\nTable 12.2.6-1: Status Information relating to Consumption Reporting\n\nTable 12.2.6-2 provides a list of general notification events exposed by the Media Session Handler at reference point M6d.\nTable 12.2.6-2: Notification Events relating to Consumption Reporting\n\nTable 12.2.6-3 provides a list of general error events exposed by the Media Session Handler at reference point M6d.\nTable 12.2.6-3: Error Events relating to Consumption Reporting\n\n",
                            "figures_meta_data": [],
                            "tables": [
                                {
                                    "description": "Table 12.2.6-1: Status Information relating to Consumption Reporting",
                                    "table number": 63,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 12.2.6-2: Notification Events relating to Consumption Reporting",
                                    "table number": 64,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 12.2.6-3: Error Events relating to Consumption Reporting",
                                    "table number": 65,
                                    "summary": "",
                                    "name": ""
                                }
                            ]
                        },
                        {
                            "title": "12.2.7\tMetrics Reporting Information",
                            "text_content": "Table 12.2.7-1 provides a list of status information that can be obtained from the Media Session Handler through M6d.\nTable 12.2.7-1: Status Information relating to Metrics Reporting\n\nTable 12.2.7-2 provides a list of general notification events exposed at reference point M6d.\nTable 12.2.7-2: Notification Events relating to Metrics Reporting\n\nTable 12.2.7-3 provides a list of general error events exposed at reference point M6d.\nTable 12.2.7-3: Error Events relating to Metrics Reporting\n\nDetails of status information for RAN-based metrics reporting are for further study.\n",
                            "figures_meta_data": [],
                            "tables": [
                                {
                                    "description": "Table 12.2.7-1: Status Information relating to Metrics Reporting",
                                    "table number": 66,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 12.2.7-2: Notification Events relating to Metrics Reporting",
                                    "table number": 67,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 12.2.7-3: Error Events relating to Metrics Reporting",
                                    "table number": 68,
                                    "summary": "",
                                    "name": ""
                                }
                            ]
                        }
                    ]
                },
                {
                    "title": "12.3\tMedia Session Handling for Uplink Streaming – APIs and Functions",
                    "description": "",
                    "summary": "",
                    "text_content": "Details are for further study.\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                }
            ]
        },
        {
            "title": "13\tUE Media Stream Handler (M7) APIs for uplink and downlink",
            "description": "",
            "summary": "",
            "tables": [],
            "figures_meta_data": [],
            "subsections": [
                {
                    "title": "13.1\tGeneral",
                    "description": "",
                    "summary": "",
                    "text_content": "This clause defines a set of APIs and methods that permit an application or other UE functions to communicate with a Media Player or Media Streamer. The main focus of this clause is to formalize and harmonize commonly available proprietary APIs in order to support the usage of a Media Player or a Media Streamer in a 5G Media Streaming context.\nThe APIs specified in this clause are language- and runtime-independent. Implementations are expected to provide language bindings appropriate to the UE runtime environment.\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "13.2\tDASH Media Player – APIs and Functions",
                    "description": "",
                    "summary": "",
                    "text_content": "",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": [
                        {
                            "title": "13.2.1\tOverview",
                            "text_content": "In the following, it is assumed that the Media Player (in this case a DASH client) adheres to a basic set of functionalities as shown in Figure 13.2-1. The DASH client downloads, processes and presents a DASH Media Presentation by instruction of a 5GMSd-Aware Application using the M7d interface.\nThe 5GMSd-Aware Application can, in addition, configure the presentation of the media, can receive notifications on events, or can query the internal status of the DASH Player, also supported through M7d. Different functions of the DASH Access Client that are typically necessary to process a DASH Media Presentation, are shown in Figure 13.2-1. Additional functions may be available as well.\nThe figure depicts the architecture of a DASH client, which is a software application used to stream multimedia content over the internet. The client is designed to handle the complexities of the DASH protocol, ensuring that the content is delivered in a timely and efficient manner. The figure includes various components such as the client's interface, the media server, and the network infrastructure, all of which work together to deliver high-quality video and audio content to users.\nFigure 13.2.1-1: DASH Client Architecture\nThe key functionalities of each of the functions as shown in Figure 13.2-1 are summarized in the following:\n-\t5GMSd-Aware Application: Application that makes use of the DASH/Media Player to playback a DASH Media Presentation using the APIs defined in this clause.\n-\tMedia Player: A complete player for the playback of a Media Presentation, including the Media Playback and Content Decryption Platform as defined in TS 26.511 [35].\n-\tAccess Client: A part of the DASH Player that accesses and downloads of the resources and provides the downloaded resources to the Media Playback Platform and Content Decryption for the playback of DASH content.\n-\tManagement: Controls all internal processes and the communication with the 5GMSd-aware application. In particular this includes the handling of service descriptions and operation points.\n-\tMPD Processing: parses and processes the MPD and extracts the relevant information.\n-\tAdaptation Set Selection: selects the Adaptation Set based on user, application and/or device capability information. Information provided through M7d may be used.\n-\tABR Controller and Dynamic Switching: runs adaptive bit rate logic and triggers adaptive switching of Representations. Information provided to the DASH client through M7d may be used.\n-\tThroughput Estimation: estimates the throughput from the 5GMSd Application Server.\n-\tMetrics Logging: logs relevant low-level metrics and provides those to the metrics aggregation and reporting functions in the Media Session Handler.\n-\tMedia Playback Management and Protection Controller: manages the media playback by moving downloaded information into media playback platform and also addresses handling of protection and DRM related information.\n-\tMedia Playback and Content Decryption Platform: plays back CMAF-based media content according to the playback requirements in TS 26.511 [35]. It also provides status information as well as events that maybe be provided through M7d.\n-\tEvent Processing: Processes DASH events and provides information to application as defined in TS 26.247 [4].\nThis clause focuses on Media Player related communication through M7d. In particular, the following aspects of M7d are defined:\n1)\tMethods to interact with the Media Player are defined in clause 13.2.3.\n2)\tNotification and Error Events are defined in clause 13.2.4.\n3)\tConfiguration and Settings APIs are defined in clause 13.2.5.\n4)\tStatus Information API is defined in clause 13.2.6.\nThe communication to the media playback platform is defined through the details in TS 26.511 [35].\nA 5GMSd client for DASH distribution shall support the APIs defined in this clause 13.\nNOTE:\tThe initial APIs have largely been designed based on the dash.js APIs documented here: .\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "13.2.2\tMedia Player model",
                            "text_content": "Figure 13.2.2-1 provides an informative client state model in order to appropriately describe the messages on the Media streaming service API. Six different states are defined.\nState changes may happen based on:\n-\tCalls from application.\n-\tInformation provided in the Media Presentation Description (MPD).\nThe figure depicts a state diagram for a media player, illustrating the various components and their interactions. The diagram includes a media player, a media source, and a media decoder, with arrows representing the flow of data between them. The media player is connected to the media source via a cable, and the media decoder is connected to the media source via a cable as well. The diagram also includes a power supply and a network interface card (NIC), which are essential for the media player's operation. The diagram is a visual representation of the media player's functionality, allowing for easy understanding of its components and their interconnections.\nFigure 13.2.2-1: State Diagram for Media Player\nTable 13.2.2-1 defines states for the Media Player. Detailed descriptions are provided in the following subclauses.\nTable 13.2.2-1: States of Media Player\n\nIt is assumed that the DASH Access Client manages the playback of at most one CMAF track for each media type, namely one for video, one for audio and one for subtitles as defined in TS 26.511 [35]. Playback of multiple CMAF tracks of the same media type is not excluded for 5GMS, but details is for further study.\n",
                            "figures_meta_data": [],
                            "tables": [
                                {
                                    "description": "Table 13.2.2-1: States of Media Player",
                                    "table number": 69,
                                    "summary": "",
                                    "name": ""
                                }
                            ]
                        },
                        {
                            "title": "13.2.3\tMethods",
                            "text_content": "Based on the state model in clause 13.2.2, this clause introduces relevant procedures and API calls.\nTable 13.2.3.1-1 provides an overview over the methods defined for the DASH-based streaming API. Note that in implementations, additional methods may be supported.\nTable 13.2.3.1-1: Methods defined for DASH Streaming API\n\nThis clause defines the initialize() method.\nThe Media Player is created by initializing using the initialize() method. The following functions are initialized:\n-\tMedia Playback Management in order to enable API-based communication through M7d. In particular, the M7d Notifications and Errors API (see clause 13.2.4) and the Status Query (see clause 13.2.5) are established.\nThis clause defines the attach() method.\nThe following pre-conditions apply:\n-\tThe MediaPlayer is be in INITIALIZED state.\nAn 5GMSd-Aware Application calls attachMPD() to set a source URL to an MPD file or a previously downloaded and parsed MPD.\nThe parameters of the method are defined in Table 13.2.3.3-1.\nTable 13.2.3.3-1: Parameters for attachMPD()\n\nThe following Media Player Actions are expected:\n-\tThe Request Scheduling and Download functions are established.\n-\tIf the input is a URL, the Media Player requests the MPD at the corresponding URL through M4d.\n-\tIf the MPD is not found after multiple retries, an error ERROR_MPD_NOT_FOUND is returned and the process is terminated.\n-\tThe MPD Processing function is established and the MPD parsed.\n-\tIf the MPD is not valid, an error ERROR_MPD_NOT_VALID is returned and the process is terminated.\n-\tIf the DASH Player does not support the profiles as indicated in the MPD, an error ERROR_PROFILE_NOT_SUPPORTED is returned and the process is terminated.\n-\tDepending on the type of the MPD, possibly present anchors as well as the wall-clock time, the Media Player selects the Period in the content that is expected to be played next.\n-\tThe Media Playback Management and Protection Controller is established.\n-\tThe MPD is parsed for available Service Descriptions (including Media Subsets and Adaptation Sets). By using capability mechanisms defined in TS 26.511 [35] as well as using other information (language settings, output capabilities, accessibility settings), the Media Player identifies a set of permissible Service Descriptions including Media Subsets and Adaptation Sets. If no Adaptation Sets are capable to be played, an error ERROR_MEDIA_NOT_SUPPORTED is returned and the process is terminated.\n-\tThe available Service Descriptions including included Adaptation Sets are provided to the application through M7d.\n-\tThe application may select a Service Description instance as well as Adaptation Sets. Additional Service Descriptions parameters may be configured through M7d.\n-\tBased on the service description parameters and selected Adaptation Sets:\n-\tthe Operation Point parameters are set.\n-\tthe Media Playback Platform and Content Decryption is established using the methods defined in TS 26.511.\n-\tThe selected Adaptation Sets are initialized by downloading the relevant Initialization Segments/CMAF Headers through M4d in the Media Playback Platform as in TS 26.511 [35] establishing a track buffer for each selected media type.\n-\tDepending on the MPD information and/or M7d configuration, one or more of the following functions may be established:\n-\tMetrics Logging and Collection\n-\tEvent Processing and Notification\n-\tClient Metadata handling\n-\tThe Media Player is left in the READY state.\nAn application may use this method to load an MPD and in order to prepare playback. In case of errors notifications, it is up to the application to initiate appropriate actions.\nThis clause defines the preload() method.\nThe following pre-conditions apply:\n-\tThe MediaPlayer is in INITIALIZED or READY state.\nAn 5GMSd-Aware Application calls preload() to cause the player to begin streaming the media as set by the attach() method in preparation for playing.\nThe parameters of the method are defined in Table 13.2.3.4-1.\nTable 13.2.3.4-1: Parameters for attachSource()\n\nThe following Media Player Actions are expected:\n-\tIf in INITIALIZED state, the attach() method is invoked.\n-\tDepending on the type of the MPD, possibly present anchors as well as the wall-clock time, and other MPD information, the earliest media time span for pre-loading is identified.\n-\tThe Access Client schedules and generates requests for the relevant media segments based on the ABR Controller information, as well as the throughput estimation and downloads this media.\n-\tThe Segments are downloaded from the corresponding URLs through M4d earliest at the segment availability start time of the Segments.\n-\tThe Segments ate appropriately appended to the track buffers as established according to Media Playback Platform and Content Decryption APIs, following the description in TS 26.511 [35] for playback requirements.\n-\tConfiguration and service description parameters are taking into account, for example the content is continuously loaded to remain at the live edge following the latency requirements provided in the service description setting. Content not at the live edge is removed. For static services, the content is loaded from the beginning up to a suitable buffer duration, possibly as configured, and then downloading is stopped.\n-\tAppropriate notifications and error messages are generated. For details refer to clause 13.2.5.\n-\tAppropriate Status Information is generated. For details refer to clause 13.2.6.\n-\tThe Media Player is in PRELOADED state.\nAn application may use this method to preload media into the player in order minimize the start-up time.\nThis clause defines the play() method.\nThe following pre-conditions apply:\n-\tThe MediaPlayer is in INITIALIZED or READY or PRELOADED or PAUSED state.\nAn 5GMSd-Aware Application calls play() to cause the player to begin playback of the media as set by the attach() method.\nThe parameters of the method are defined in Table 13.2.3.5-1.\nTable 13.2.3.5-1: Parameters for play()\n\nThe following Media Player Actions are expected:\n-\tIf in INITIALIZED state, the attach() method is invoked.\n-\tIf in PAUSED state, the earliest media time is MEDIA_TIME (for details see clause 13.2.3.6), else, depending on the type of the MPD, possibly present anchors as well as the wall-clock time, and other MPD information, the earliest media time for start-up is identified.\n-\tThe Access Client checks the available buffer state of media in the Media Playback Platform. Based on this, the Access Client schedules and generates requests for the relevant media segments based on the ABR Controller information, as well as the throughput estimation and downloads this media.\n-\tThe Segments are downloaded from the corresponding URLs through M4d earliest at the segment availability start times.\n-\tThe media is appropriately appended to the Media Playback Platform and Content Decryption APIs, following the description in TS 26.511 [35] for playback requirements.\n-\tOnce a threshold for sufficient buffering is reached, the Media Playback platform is initiated to be started, i.e. a playback is initiated, following the description in TS26.511 [35] for playback requirements.\n-\tThe content is continuously streamed, downloaded and played back.\n-\tAppropriate notifications and error messages are generated. For details refer to clause 13.2.4.\n-\tAppropriate Status Information is generated. For details refer to clause 13.2.5.\n-\tThe Media Player is in PLAYING state.\nAn application may use this method to initiate playback of media.\nThis clause defines pause() method.\nThe following pre-conditions apply:\n-\tThe Media Player is in PLAYING state.\nAn 5GMSd-Aware Application calls pause() to cause the Media Playback Platform to pause playback.\nNo parameters are attached.\nThe following Media Player Actions are expected:\n-\tThe playback on the playback platform is paused and the media time is maintained as MEDIA_TIME.\n-\tThe Access Client checks the available buffer state of media in the Media Playback Platform. Based on this, the Access Client schedules and generates requests for the relevant media segments based on the ABR Controller information, as well as the throughput estimation and downloads this media.\n-\tThe media is downloaded from the corresponding URL through M4d earliest at the segment availability start time of the media.\n-\tThe media is appropriately appended to the Media Playback Platform and Content Decryption APIs, following the description in TS 26.511 [35] for playback requirements.\n-\tOnce the buffers are sufficiently filled, the client stops downloading.\n-\tAppropriate notifications and error messages are generated. For details refer to clause 13.2.4.\n-\tAppropriate Status Information is generated. For details refer to clause 13.2.5.\n-\tThe Media Player is in PAUSED state.\nAn application may use this method to play back media.\nThis clause defines seek() method.\nThe following pre-conditions apply:\n-\tThe MediaPlayer is in INITIALIZED, READY, PRELOADED or PAUSED state.\nAn 5GMSd-Aware Application calls seek() to cause the player to go a specific media time.\nThe parameters of the method are defined in Table 13.2.3.7-1.\nTable 13.2.3.7-1: Parameters for seek()\n\nThe following Media Player Actions are expected:\n-\tIf in INITIALIZED state, the attach() method is carried out.\n-\tIf the mediaTime is not accessible return an error ERROR_MEDIA_TIME_NOT_ACCESSIBLE and terminate the process.\n-\tThe earliest media time is set to the mediaTime.\n-\tThe state is set to PAUSED.\n-\tThe play() command is issued.\nAn application may use this method to initiate playback of media.\nThis clause defines the reset() method.\nThe following pre-conditions apply:\n-\tThe Media Player may be in any state.\nAn 5GMSd-Aware Application calls reset()resets all information related to the media and the Media Presentation described by the MPD is destroyed.\nNo parameters are attached.\nThe following Media Player Actions are expected:\n-\tThe playback on the playback platform terminated.\n-\tAll open requests are cancelled.\n-\tAll scheduled requests are deleted.\n-\tThe current MPD is removed.\n-\tThe Media Player is left in the INITIALIZED state.\nAn application may use this method to terminate the playback of any media.\nThis clause defines destroy() method.\nThe following pre-conditions apply:\n-\tThe Media Player may be in any state.\nAn 5GMSd-Aware Application calls destroy()resets all information related to the media and the network.\nNo parameters are attached.\nThe following Media Player Actions are expected:\n-\tThe playback on the playback platform terminated.\n-\tAll open requests are cancelled.\n-\tAll scheduled requests are deleted.\n-\tThe current MPD is removed.\n-\tAll network information is history is cleared.\n-\tThe Media Player is left in the IDLE state.\nAn application may use this method to terminate the playback of any media clear and download related information.\n",
                            "figures_meta_data": [],
                            "tables": [
                                {
                                    "description": "Table 13.2.3.1-1: Methods defined for DASH Streaming API",
                                    "table number": 70,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 13.2.3.3-1: Parameters for attachMPD()",
                                    "table number": 71,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 13.2.3.4-1: Parameters for attachSource()",
                                    "table number": 72,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 13.2.3.5-1: Parameters for play()",
                                    "table number": 73,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 13.2.3.7-1: Parameters for seek()",
                                    "table number": 74,
                                    "summary": "",
                                    "name": ""
                                }
                            ]
                        },
                        {
                            "title": "13.2.4\tConfigurations and settings API",
                            "text_content": "DASH streaming may be configured with the parameters provided in Table 13.2.4-1. Note that these parameters may be set and they may also be observed.\nTable 13.2.4-1: Configuration API\n\n",
                            "figures_meta_data": [],
                            "tables": [
                                {
                                    "description": "Table 13.2.4-1: Configuration API",
                                    "table number": 75,
                                    "summary": "",
                                    "name": ""
                                }
                            ]
                        },
                        {
                            "title": "13.2.5\tNotifications and error events",
                            "text_content": "Table 13.2.5-1 provides a list of notification events that are provided by the Media Player.\nTable 13.2.5-1: Notification events\n\nTable 13.2.5-2 provides a list of error events.\nTable 13.2.5-2: Error events\n\n",
                            "figures_meta_data": [],
                            "tables": [
                                {
                                    "description": "Table 13.2.5-1: Notification events",
                                    "table number": 76,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 13.2.5-2: Error events",
                                    "table number": 77,
                                    "summary": "",
                                    "name": ""
                                }
                            ]
                        },
                        {
                            "title": "13.2.6\tStatus Information",
                            "text_content": "Table 13.2.6-1 provides a list of dynamically changing status information that can be obtained from the client.\nTable 13.2.6-1: Dynamic Status information\n\nTable 13.2.6-2 provides a list of configured operation point information that can be obtained from the client. Any change to a parameter below shall be announced with a notification OPERATION_POINT_CHANGED.\nTable 13.2.6-2: Service Operation Point Information\n\n",
                            "figures_meta_data": [],
                            "tables": [
                                {
                                    "description": "Table 13.2.6-1: Dynamic Status information",
                                    "table number": 78,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 13.2.6-2: Service Operation Point Information",
                                    "table number": 79,
                                    "summary": "",
                                    "name": ""
                                }
                            ]
                        },
                        {
                            "title": "13.2.7\tUsage of M7d Information by Media Session Handler",
                            "text_content": "The media session handler may use the notifications, errors and status information provided through M7d to execute relevant tasks.\n",
                            "figures_meta_data": [],
                            "tables": []
                        }
                    ]
                }
            ]
        },
        {
            "title": "14\tApplication (M8) APIs for uplink and downlink",
            "description": "APIs of this reference point are not specified within this release.\n",
            "summary": "",
            "tables": [],
            "figures_meta_data": [],
            "subsections": []
        },
        {
            "title": "15\tMiscellaneous UE-internal APIs",
            "description": "",
            "summary": "",
            "tables": [],
            "figures_meta_data": [],
            "subsections": [
                {
                    "title": "15.1\tGeneral",
                    "description": "",
                    "summary": "",
                    "text_content": "While the core functionality of 5GMS is specified in terms of the dedicated system interfaces and APIs that impact the UE, specified in clauses 10 to 14 (M4 to M8 respectively), certain features of 5GMS rely on interfaces and APIs that are essentially UE-internal.\nEach usage of a UE-internal interface is specified in subsequent sub-clauses of the present clause.\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "15.2\tRAN Signaling-based Network Assistance API",
                    "description": "",
                    "summary": "",
                    "text_content": "If RAN Signaling-based Network Assistance is supported, the Media Session Handler uses an interface to the RAN Modem (specifically, the UE MAC entity in the modem) to send and receive bit rate recommendation messages. The interface to the modem may be based on the AT commands +CGBRRREQ and +CGBRRREP as defined in [15].\nFurthermore, messaging across that interface corresponds to the logical translations of the Bit Rate Recommendation and/or Bit Rate Recommendation Query messages, carried by the Recommended bit rate MAC CE, exchanged between the RAN Modem and the RAN, as specified in [13] for 5G NR and [14] for LTE. The association between the LCID for which the recommendation applies and the actual flow (including the intermediate RLC channel) is performed by the modem.\nNOTE:\tThe +C5GQOSRDP=? command may be used to get a list of CID values that are associated with QoS flows (both network and MT/TE initiated).When used for requesting a bit rate boost, the query shall not request a bit rate that may exceed the MFBR for the corresponding QoS Flow. Failure to ensure this may result in unexpected congestion-induced packet delays and dropping.\nThe Bit Rate Recommendation Query shall indicate the bit rate desired by the application, as described by [13] and [14]. This request may be used by the 5GMSd Media Session Handler to request for a temporary increase in bit rate for the corresponding flow (bit rate boost). The RAN responds with a Bit Rate Recommendation message that confirms the recommended bit rate after the boost grant. Once the bit rate drops again after a boost grant, the network shall inform the Media Session Handler about the new recommended bit rate by means of an ANBR message.\nWhenever the Media Session Handler receives a message from the RAN Modem, corresponding to the logical translation of the Bit Rate Recommendation message for the associated RAN uplink or downlink, it shall indicate the associated bit rate recommendation to either the Media Player (via M7d, in the case of downlink streaming) or Media Streamer (via M7u, in the case of uplink streaming) function of an affiliated PDU session. Furthermore, whenever the Media Session Handler receives a request for a bit rate boost from either the Media Player (via M6d in the case of downlink streaming) or the Media Streamer (via M6u, in the case of uplink streaming) function of an affiliated PDU session, it may send a bit rate boost message to the RAN Modem. That bit rate boost request is logically translated by the modem to the Bit Rate Recommendation Query message which is then sent to the RAN on the associated RAN uplink or downlink.\nIt is left to the implementer of the media player to decide how to best use the bit rate recommendation and the bit rate recommendation query information for the media streaming sessions.\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "15.3\tRAN-based Metrics Reporting API",
                    "description": "",
                    "summary": "",
                    "text_content": "These procedures shall be used by the Media Session Handler to control metrics reporting when such reporting is configured by the OAM via the 5G control channel.\nThe Media Session Handler shall subscribe to metrics configurations from the OAM according to TS 26.247 clause L.1. This configuration may also include virtual reality metrics as specified in TS 26.118 [42] clause 9.3. When a metrics configuration is received, the Media Session Handler shall store this configuration and use it for all subsequent streaming sessions.\nWhen a streaming session is started the Media Session Handler shall determine whether metrics from this session shall be reported. The determination shall be based on the sample percentage and streaming source filter specified in the stored metrics configuration, according to TS 26.247 Annex F.\nIf metrics are to be reported for the session, the Media Session Handler shall request the Media Player to create a metrics collection job. The Media Player shall return a reference to the created job, which the Media Session Handler shall use in all subsequent actions related to this job.\nThe Media Session Handler shall configure the metrics collection job with the set of metrics that shall be collected during the session. The format of the configuration shall be according to TS 26.247 clause L.2, but note that only the metrics attribute in the configuration shall be used for this purpose.\nThe Media Session Handler shall regularly request the collected metrics from the Media Player according to the reportingInterval specified in the metrics configuration. The metrics returned by the Media Player shall use the format as described in TS 26.247 clause 10.6, and (for virtual reality media) in TS 26.118 [42] clause 9.4, and the Media Session Handler shall forward these to the OAM according to TS 26.247 clause L.1.\nWhen the session is finished the Media Session Handler shall delete the metrics collection job.\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                }
            ]
        },
        {
            "title": "16\tUsage of 5GC interfaces and APIs",
            "description": "",
            "summary": "",
            "tables": [],
            "figures_meta_data": [],
            "subsections": [
                {
                    "title": "16.1\tGeneral",
                    "description": "",
                    "summary": "",
                    "text_content": "While the core functionality of 5GMS is specified in terms of the dedicated system interfaces and APIs specified in clauses 7 to 14 (for M1 to M8 respectively), certain features of 5GMS rely on interfaces and APIs defined within the scope of the 5GC.\nEach such case of usage of a 5GC interface and API is documented in subsequent sub-clauses of the present clause.\nNOTE:\tThe 5GMS architecture may be applied to an EPS although such an application is not specified in the present document and is left to the discretion of deployments and implementations.\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "16.2\tUsage of N5/N33 for AF-based Network Assistance",
                    "description": "",
                    "summary": "",
                    "text_content": "The AF-based Network Assistance feature operates at reference point M5 between the Media Session Handler in the 5GMS Client and a 5GMS AF that provides Network Assistance capabilities. The Network Assistance API at reference point M5 (see clause 11.6) is specified in a generic way such that the associated Network Assistance functionality in the 5GC may be realised by various means.\nNOTE 1:\tThis clause does not limit the possible set of 5G System exposure functionalities for obtaining Network Assistance information.\nIn this release, the 5GMS AF converts Network Assistance API invocations received at reference point M5 into direct or indirect invocations of the Policy Authorization Service exposed by the PCF, and converts responses and notifications from the PCF into their equivalents at reference point M5 for delivery to the Media Session Handler.\nIf it supports the Network Assistance feature, the 5GMS AF shall offer the bit rate recommendation (throughput estimation) and delivery boost request API based on existing Policy Templates that match the filtering criteria for a media streaming session, and the 5GMS AF shall interact with the PCF using one of the following methods:\nA.\tIf the 5GMS AF is deployed in the Trusted DN, it may directly invoke the Npcf_Policy‌Authorization service at reference point N5, as specified in TS 29.514 [34].\nNOTE 2:\tIt is the responsibility of the 5GMS AF in this case to discover and track changes to the PCF instance responsible for the PDU Session supporting the media streaming session at reference point M4 using the discovery services provided by the NRF and/or BSF.\nB.\tIf the 5GMS AF is deployed outside the Trusted DN, or if it is more convenient for a 5GMS AF deployed in the Trusted DN to do so, it invokes the Nnef_AFSessionWithQoS service exposed by the NEF, as specified in clause 4.4.9 of TS 29.522 [50], to indirectly invoke the PCF at reference point N33.\nNOTE 3:\tPer clause 4.4.9 of TS 29.522 [50], the Nnef_AFSession‌With‌QoS service is realised at reference point N33 by the AsSession‌With‌QoS exposure API.\nNOTE 4:\tConfiguration of the NEF endpoint address and access credentials in the 5GMS AF in this case is beyond the scope of the present document.\nWhen a Network Assistance session is created by the Media Session Handler (per clauses 4.7.6 and 11.6.4.1), the 5GMS AF shall create an AF application session context in the PCF responsible for the PDU Session corresponding to the M4 application flows listed in the NetworkAssistanceSession.‌serviceDataFlow‌Descriptions property.\nIf no corresponding AF application session context already exists, the 5GMS AF shall use the Npcf_‌Policy‌Authorization_‌Create operation at reference point N5 (or, if deployed outside the Trusted DN, the equivalent AsSession‌WithQoS service operation) with the appropriate service information to create and provision a new AF application session context. The information in the AppSessionContext‌ReqData shall be derived from the service data flow descriptions in the Network Assistance session resource, as well as from the referenced Policy Template (if any) and/or the requested QoS.\nThe AF application session context shall declare exactly one media component per media streaming session. A separate sub-component shall be declared for each M4 application flow listed in the NetworkAssistanceSession.‌serviceDataFlow‌Descriptions array.\nFor each of the Network Assistance sessions it is managing, the 5GMS AF shall subscribe to the following PCF notifications on the corresponding AF application session context:\n-\tService Data Flow QoS notification control;\n-\tService Data Flow deactivation;\n-\tResources allocation outcome.\nWhen requesting QoS provisioning for a media streaming session, the 5GMS AF shall use the configured Policy Templates of the Provisioning Session to determine the list of the QoS references within the \"altSerReqs\". The lowest priority index shall be assigned to the policy template with the lowest QoS requirement, and the highest priority shall be assigned to the requested operation point by the UE (if the UE is allowed to use that operation point).\nWhen a Network Assistance session is subsequently destroyed by the Media Session Handler (per clauses 4.7.6 and 11.6.4.6), the 5GMS AF shall destroy the corresponding AF application session context in the relevant PCF instance.\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "16.3\tUsage of N5/N33 for dynamic policies",
                    "description": "",
                    "summary": "",
                    "text_content": "The dynamic policies feature operates at reference point M5 between the Media Session Handler in the 5GMS Client and a 5GMS AF that has been appropriately provisioned with Policy Templates. The Dynamic Policies API at reference point M5 (see clause 11.5) is specified in a generic way such that the associated functionality in the 5GC may be realised by various means.\nNOTE 1:\tThis clause does not limit the possible set of 5G System exposure functionalities for realising dynamic policies.\nIn this release, the 5GMS AF converts Dynamic Policies API invocations received at reference point M5 into direct or indirect invocations of the Policy Authorization Service exposed by the PCF, and converts responses from the PCF into their equivalents at reference point M5 for return to the Media Session Handler.\nTo realise dynamic policies, the 5GMS AF shall interact with the PCF using one of the following methods:\nA.\tIf the 5GMS AF is deployed in the Trusted DN, it may directly invoke the Npcf_Policy‌Authorization service at reference point N5, as specified in TS 29.514 [34].\nNOTE 2:\tIt is the responsibility of the 5GMS AF in this case to discover and track changes to the PCF instance responsible for the PDU Session supporting the media streaming session at reference point M4 using the discovery services provided by the NRF and/or BSF.\nB.\tIf the 5GMS AF is deployed outside the Trusted DN, or if it is more convenient for a 5GMS AF deployed in the Trusted DN to do so, it invokes the Nnef_AFSession‌With‌QoS and/or Nnef_Chargeable‌Party services exposed by the NEF, as specified in clauses 4.4.9 and 4.4.8 respectively of TS 29.522 [50], to indirectly invoke the PCF at reference point N33.\nNOTE 3:\tPer clause 4.4.9 of TS 29.522 [50], the Nnef_AFSession‌With‌QoS service is realised at reference point N33 by the AsSession‌With‌QoS exposure API. Similarly, the Nnef_Chargeable‌Party service is realised by the Chargeable‌Party exposure API per clause 4.4.8 of [50].\nNOTE 4:\tConfiguration of the NEF endpoint address and access credentials in the 5GMS AF in this case is beyond the scope of the present document.\nWhen a dynamic policy is instantiated by the Media Session Handler (per clause 4.7.3), the 5GMS AF shall create an AF application session context in the PCF responsible for the PDU Session corresponding to the M4 application flows listed in the DynamicPolicy.‌serviceDataFlow‌Descriptions property.\nIf no corresponding AF application session context already exists, the 5GMS AF shall use the Npcf_‌Policy‌Authorization_‌Create operation at reference point N5 (or, if deployed outside the Trusted DN, the equivalent AsSession‌WithQoS service operation) with the appropriate service information to create and provision a new AF application session context. The information in the AppSessionContext‌ReqData shall be derived from the service data flow descriptions in the dynamic policy resource and/or the requested QoS.\nThe AF application session context shall declare exactly one media component per media streaming session. A separate sub-component shall be declared for each M4 application flow listed in the NetworkAssistanceSession.‌serviceDataFlow‌Descriptions array.\nFor each of the dynamic policies it is managing, the 5GMS AF shall subscribe to the following PCF notifications on the corresponding AF application session context:\n-\tService Data Flow QoS notification control;\n-\tService Data Flow deactivation;\n-\tResources allocation outcome.\nWhen requesting QoS provisioning for a media streaming session, the 5GMS AF shall use the configured Policy Template of the dynamic policy to determine the list of the QoS references within the \"altSerReqs\". The lowest priority index shall be assigned to the policy template with the lowest QoS requirement, and the highest priority shall be assigned to the requested operation point by the UE (if the UE is allowed to use that operation point).\nWhen a dynamic policy is subsequently destroyed by the Media Session Handler (per clause 4.7.3), the 5GMS AF shall destroy the corresponding AF application session context in the relevant PCF instance.\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                }
            ]
        },
        {
            "title": "17\tMedia Streaming data reporting at R4",
            "description": "",
            "summary": "",
            "tables": [],
            "figures_meta_data": [],
            "subsections": [
                {
                    "title": "17.1\tGeneral",
                    "description": "",
                    "summary": "",
                    "text_content": "The following record types shall be used with the Ndcaf_DataReporting_Report service operation specified in clause 7.2.3.4.1 of TS 26.532 [47]. In each case, one or more records are included in a DataReport, as specified in clause 7.3.3.2.1 of [47].\nThe OpenAPI definitions of the record types are found in clause C.5.1 of the present document.\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "17.2\tMediaStreamingAccessRecord type",
                    "description": "",
                    "summary": "",
                    "text_content": "As specified in clause 4.11.3, the MediaStreamingAccessRecord type shall be used by the 5GMS AS to report media streaming access. This data type is defined in clause C.5.1 as the combination of:\n-\tBaseRecord, as defined in clause B.4 of TS 26.532 [49], which provides a record timestamp for the data report.\n-\tMediaStreamingSessionIdentification, as defined in clause 6.4.3.10 of the present document.\nIf a media streaming session identifier is not explicitly provided by the 5GMS Client at reference point M4, the 5GMS AS may instead synthesise a value for the sessionId property, for example a one-way hash of the transport connection identifier (if available from the underlying transport protocol) or a one-way hash of the 5-tuple formed from the Media Stream Handler and 5GMSd AS endpoint addresses and a transport protocol identifier, combined with a randomly chosen salt to prevent reverse engineering of the original values.\n-\tMediaStreamingAccess, as defined in clause 6.4.3.11 of the present document. These properties shall be populated by the 5GMS AS.\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                }
            ]
        },
        {
            "title": "17A\tData reporting at R2",
            "description": "",
            "summary": "",
            "tables": [],
            "figures_meta_data": [],
            "subsections": [
                {
                    "title": "17A.1\tGeneral",
                    "description": "",
                    "summary": "",
                    "text_content": "The following record types shall be used with the Ndcaf_DataReporting_Report service operation specified in clause 7.2.3.4.1 of TS 26.532 [49]. In each case, one or more records are included in a DataReport, as specified in clause 7.3.2.3 of [49].\nThe OpenAPI definitions of the record types are found in clause C.5.2 of the present document.\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "17A.2\tANBRNetworkAssistanceInvocationRecord type",
                    "description": "",
                    "summary": "",
                    "text_content": "As specified in clause 7.3.2.3 of TS 26.532 [49], the ANBRNetworkAssistanceInvocationRecords type shall be used by the Media Session Handler to report ANBR-based Network Assistance invocations at reference point R2.\nThe ANBRNetworkAssistanceInvocationRecords type structure is defined in clause C.5.2 as the combination of:\n-\tBaseRecord, as defined in clause B.4 of [49], which provides a record timestamp for the data report.\n-\tMediaStreamingSessionIdentification, as defined in clause 6.4.3.10 of the present document.\n-\tNetworkAssistanceInvocation, as defined in clause 6.4.3.12 of the present document.\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                }
            ]
        },
        {
            "title": "18\tEvent exposure at R5 and R6",
            "description": "",
            "summary": "",
            "tables": [],
            "figures_meta_data": [],
            "subsections": [
                {
                    "title": "18.1\tGeneral",
                    "description": "",
                    "summary": "",
                    "text_content": "The Naf_EventExposure service specified in TS 29.517 [46] shall be used by event consumers to subscribe to the following types of 5G Media Streaming event notifications, identified by their respective Event IDs, from the Data Collection AF instantiated in the 5GMS AF, and subsequently to receive such notifications in the form of AfEventNotification objects as specified in table 5.6.2.6-1 of [46] and as further specified in this clause:\n1.\tMedia Streaming QoE Event notifications, as specified in clause 18.3, comprising\na)\t3GPP-defined QoE metrics information, and\nb)\tnon-3GPP-defined QoE metrics information.\n2.\tMedia Streaming Consumption Event notifications, as specified in clause 18.4.\n3.\tMedia Streaming Network Assistance Invocation Event notifications, as specified in clause 18.5.\n4.\tMedia Streaming Dynamic Policy Invocation Event notifications, as specified in clause 18.6.\n5.\tMedia Streaming Access Event notifications, as specified in clause 18.7.\nOpenAPI data types for these event notifications are found in clause C.6.\nIn this release, eligible event consumer subscribers to the Naf_EventExposure service as specified in [46] are the following:\n-\tThe NWDAF defined in TS 23.288 [47].\n-\tThe Event Consumer AF defined in TS 26.531 [46] when it is deployed in the Trusted DN.\n-\tThe NEF defined in TS 23.501 [2] when it is used to expose the Naf_EventExposure service to functions outside the Trusted DN via the Nnef_EventExposure service defined in TS 23.502 [45] and specified in TS 29.591 [55].\nImplementations of the Data Collection AF instantiated the 5GMS AF shall support negotiation of the optional features relating to 5G Media Streaming specified in table 5.8-1 of TS 29.517 [46]. Feature negotiation by event consumers is achieved as specified in clause 5.8 of [46].\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "18.2\tCommon data types for event exposure",
                    "description": "",
                    "summary": "",
                    "text_content": "",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": [
                        {
                            "title": "18.2.1\tBaseEventCollection data type",
                            "text_content": "BaseEventCollection is an abstract base data type for describing a collection of media streaming event records. It is combined with other collection data types to form concrete collections. As such, this data type shall not be exposed by the Data Collection AF instantiated in the 5GMS AF.\nTable 18.2.1-1: BaseEventCollection data type\n\n",
                            "figures_meta_data": [],
                            "tables": [
                                {
                                    "description": "Table 18.2.1-1: BaseEventCollection data type",
                                    "table number": 80,
                                    "summary": "",
                                    "name": ""
                                }
                            ]
                        },
                        {
                            "title": "18.2.2\tBaseEventRecord data type",
                            "text_content": "BaseEventRecord data type is an abstract base data type for describing a single UE data record or summarising a summarising a set of UE data records. It is combined with other collection data types to form concrete collections. As such, this data type shall not be exposed by the Data Collection AF instantiated in the 5GMS AF.\nTable 18.2.2-1: BaseEventRecord data type\n\nTable 18.2.2-2: EventRecordType enumeration\n\n",
                            "figures_meta_data": [],
                            "tables": [
                                {
                                    "description": "Table 18.2.2-1: BaseEventRecord data type",
                                    "table number": 81,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 18.2.2-2: EventRecordType enumeration",
                                    "table number": 82,
                                    "summary": "",
                                    "name": ""
                                }
                            ]
                        }
                    ]
                },
                {
                    "title": "18.3\tQoE metrics event notifications",
                    "description": "",
                    "summary": "",
                    "text_content": "",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": [
                        {
                            "title": "18.3.1\tQoEMetricsCollection data type",
                            "text_content": "QoEMetricsCollection is a concrete data type describing a collection of QoE Metrics Event records.\nTable 18.3.1-1: QoEMetricsCollection data type\n\n",
                            "figures_meta_data": [],
                            "tables": [
                                {
                                    "description": "Table 18.3.1-1: QoEMetricsCollection data type",
                                    "table number": 83,
                                    "summary": "",
                                    "name": ""
                                }
                            ]
                        },
                        {
                            "title": "18.3.2\tQoEMetricsEvent data type",
                            "text_content": "QoEMetricsEvent is a concrete data type describing a set of, or summaries of, QoE metric samples of the same type.\nTable 18.3.2-1: QoEMetricsEvent data type\n\n",
                            "figures_meta_data": [],
                            "tables": [
                                {
                                    "description": "Table 18.3.2-1: QoEMetricsEvent data type",
                                    "table number": 84,
                                    "summary": "",
                                    "name": ""
                                }
                            ]
                        }
                    ]
                },
                {
                    "title": "18.4\tConsumption reporting event notifications",
                    "description": "",
                    "summary": "",
                    "text_content": "",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": [
                        {
                            "title": "18.4.1\tConsumptionReportingUnitsCollection data type",
                            "text_content": "ConsumptionReportingUnitsCollection is a concrete data type describing a collection of consumption reporting event records.\nTable 18.4.1-1: ConsumptionReportingUnitsCollection data type\n\n",
                            "figures_meta_data": [],
                            "tables": [
                                {
                                    "description": "Table 18.4.1-1: ConsumptionReportingUnitsCollection data type",
                                    "table number": 85,
                                    "summary": "",
                                    "name": ""
                                }
                            ]
                        },
                        {
                            "title": "18.4.2\tConsumptionReportingEvent data type",
                            "text_content": "ConsumptionReportingEvent is a concrete data type corresponding to a single consumption reporting unit.\nTable 18.4.2-1: ConsumptionReportingEvent data type\n\n",
                            "figures_meta_data": [],
                            "tables": [
                                {
                                    "description": "Table 18.4.2-1: ConsumptionReportingEvent data type",
                                    "table number": 86,
                                    "summary": "",
                                    "name": ""
                                }
                            ]
                        }
                    ]
                },
                {
                    "title": "18.5\tNetwork Assistance invocation event notifications",
                    "description": "",
                    "summary": "",
                    "text_content": "",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": [
                        {
                            "title": "18.5.1\tNetworkAssistanceInvocationsCollection data type",
                            "text_content": "NetworkAssistanceInvocationsCollection is a concrete data type describing a collection of Network Assistance Invocation Event records.\nTable 18.5.1-1: NetworkAssistanceInvocationsCollection data type\n\n",
                            "figures_meta_data": [],
                            "tables": [
                                {
                                    "description": "Table 18.5.1-1: NetworkAssistanceInvocationsCollection data type",
                                    "table number": 87,
                                    "summary": "",
                                    "name": ""
                                }
                            ]
                        },
                        {
                            "title": "18.5.2\tNetworkAssistanceInvocationEvent data type",
                            "text_content": "NetworkAssistanceInvocationEvent is a concrete data type describing a single invocation of the Network Assistance API (see clause 11.6).\nTable 18.5.2-1: NetworkAssistanceInvocationEvent data type\n\nTable 18.5.2-2: NetworkAssistanceType enumeration\n\n",
                            "figures_meta_data": [],
                            "tables": [
                                {
                                    "description": "Table 18.5.2-1: NetworkAssistanceInvocationEvent data type",
                                    "table number": 88,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 18.5.2-2: NetworkAssistanceType enumeration",
                                    "table number": 89,
                                    "summary": "",
                                    "name": ""
                                }
                            ]
                        }
                    ]
                },
                {
                    "title": "18.6\tDynamic policy invocation event notifications",
                    "description": "",
                    "summary": "",
                    "text_content": "",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": [
                        {
                            "title": "18.6.1\tDynamicPolicyInvocationsCollection data type",
                            "text_content": "DynamicPolicyInvocationsCollection is a concrete data type describing a collection of Dynamic Policy Invocation records.\nTable 18.6.1-1: DynamicPolicyInvocationsCollection data type\n\n",
                            "figures_meta_data": [],
                            "tables": [
                                {
                                    "description": "Table 18.6.1-1: DynamicPolicyInvocationsCollection data type",
                                    "table number": 90,
                                    "summary": "",
                                    "name": ""
                                }
                            ]
                        },
                        {
                            "title": "18.6.2\tDynamicPolicyInvocationEvent data type",
                            "text_content": "DynamicPolicyInvocationEvent is a concrete data type describing a single invocation of the Dynamic Policies API (see clause 11.5).\nTable 18.6.2-1: DynamicPolicyInvocationEvent data type\n\n",
                            "figures_meta_data": [],
                            "tables": [
                                {
                                    "description": "Table 18.6.2-1: DynamicPolicyInvocationEvent data type",
                                    "table number": 91,
                                    "summary": "",
                                    "name": ""
                                }
                            ]
                        }
                    ]
                },
                {
                    "title": "18.7\tMedia streaming access event notifications",
                    "description": "",
                    "summary": "",
                    "text_content": "",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": [
                        {
                            "title": "18.7.1\tMediaStreamingAccessesCollection data type",
                            "text_content": "MediaStreamingAccessesCollection is a concrete data type describing a collection of Media Streaming Access Event records.\nTable 18.7.1-1: MediaStreamingAccessesCollection data type\n\n",
                            "figures_meta_data": [],
                            "tables": [
                                {
                                    "description": "Table 18.7.1-1: MediaStreamingAccessesCollection data type",
                                    "table number": 92,
                                    "summary": "",
                                    "name": ""
                                }
                            ]
                        },
                        {
                            "title": "18.7.2\tMediaStreamingAccessEvent data type",
                            "text_content": "MediaStreamingAccessEvent is a concrete data type describing a single media access by a Media Stream Handler.\nTable 18.7.2-1: MediaStreamingAccessEvent data type\n\n\n",
                            "figures_meta_data": [],
                            "tables": [
                                {
                                    "description": "Table 18.7.2-1: MediaStreamingAccessEvent data type",
                                    "table number": 93,
                                    "summary": "",
                                    "name": ""
                                }
                            ]
                        }
                    ]
                }
            ]
        },
        {
            "title": "A.1\tEnd-to-end model",
            "description": "Figure A.1-1 below depicts an end-to-end model for the 5GMS parameter propagation for DASH streaming with dynamic policy. The arrows indicate the main information flow. The interfaces specified in TS 26.501 [2] are used throughout. However, there are additional interfaces (i.e. P1 or U1), which are not in the 5GMS Architecture.\nThe figure depicts a simplified end-to-end model for dynamic policy parameter propagation in a wireless network. It illustrates the flow of information from the source to the destination, including the transmission of policy parameters, the reception of the policy parameters, and the transmission of the policy parameters back to the source. The figure shows the use of different types of nodes, such as the source, the relay, and the destination, and the use of different types of links, such as the wireless link and the wired link. The figure also shows the use of different types of routing protocols, such as the Forwarding Protocol and the Forwarding Protocol, to ensure that the information is transmitted in the most efficient way possible.\nFigure A.1-1: End-to-end model for dynamic policy parameter propagation\nThe interfaces involved and their roles in this feature are as follows:\n-\tM1: Provisioning interface between the 5GMS Application Provider and the 5GMS AF.\n-\tP1: The 5GMS Application Provider provisions the DASH MPD generator, e.g. by annotating the MPD with Service Descriptions.\n-\tU1: User Interface to the 5GMS-Aware Application.\nNOTE:\tThe 5GMS Application Provider controls the application, i.e. controls the GUI choices.\n-\tM8: Non-standardized input from the 5GMS Application Provider to the 5GMS-Aware Application, such as country-specific application behaviours (languages, on-demand catalogue, etc).\n-\tInput on subscriptions (e.g. 4K subscription versus SD subscription).\n-\tDevice-specific content selection rules (e.g. SmartPhone versus Smart TV).\n-\tAdditional service offering features (e.g. background download possible).\n-\tC1 (one of M6 or M7): Information from the 5GMS-Aware Application to the 5GMS Client, e.g. user content selections.\n-\tM6: Information flow from the DASH Player to the Media Session Handler.\n-\tM7: Information flow from the Media Session Handler to the DASH Player.\n-\tM5_1: Information flow into the Media Session Handler for parameter provisioning (Policy Descriptions, which originate from 5GMS AF and 5GMS Application Provider). The Policy Descriptions contain or reference the detailed Service Access Information, i.e. URLs to activate a certain policy.\n-\tM5_2: Information flow from the Media Session Handler to the 5GMS AF. This includes:\n-\tinput to create the Service Data Flow Templates (see TS 23.503 [33]) for identifying the application data flows within a PDU Session,\n-\tan identifier for the Dynamic Policy instance (e.g. QoS, Conditional Zero-rating, charging, etc) and\n-\toptionally, Network Assistance information, e.g. bit rate recommendations.\nIn its Annex K, the DASH standard [32] specifies so-called \"Service Descriptions\". The purpose of Service Descriptions is to provide additional information to a DASH player to influence its \"Selection Logic\", e.g. a DASH player should prefer a certain set of representations within an adaptation set. It is assumed in the following that the DASH MPD can be annotated using Service Descriptions to give hints for subscription models and different device types.\nThe 5G System specifies a number of different means to detect application flows. When activating a Dynamic Policy, the Media Session Handler provides a Service Data Flow Template to the 5GMS System, which identifies the application flow(s) of interest. It is assumed here that multiple applications are executing simultaneously on a given UE and that each application may independently access the network. Therefore, the Media Session Handler needs to provide (and update) these Service Data Flow Templates in order that the application traffic can be treated according to the corresponding Dynamic Policy.\nIn the following clauses, the parameter propagation for a number of different use cases is described.\n",
            "summary": "",
            "tables": [],
            "figures_meta_data": [],
            "subsections": []
        },
        {
            "title": "A.2\tPremium QoS dynamic policy",
            "description": "",
            "summary": "",
            "tables": [],
            "figures_meta_data": [],
            "subsections": [
                {
                    "title": "A.2.1\tGeneral",
                    "description": "",
                    "summary": "",
                    "text_content": "To realise a Premium QoS service offering, the 5GMS Client should activate a QoS Flow with characteristics matching the service needs. It is assumed that the DASH content is prepared for different subscription levels, e.g. 4K, HDR or SD, and for different target device types, e.g. SmartPhone or SmartTV. When commencing playback of a DASH presentation according to a particular subscription level (e.g. 4K), the 5GMS Client needs to activate a QoS Flow with a matching bit rate setting.\nNOTE:\tThe 5GMS Client may choose to activate a QoS Flow with a lower bit rate than the maximum supported by the 5G System, e.g. a small screen SmartPhone may select different QoS settings from a large screen device.\nThe per-title quality and the subscription levels of an example on-demand catalogue are illustrated in the figure below. The subscription levels in this example are 4K, FullHD, HD, SD and 480p. Only devices entitled to activate a 4K quality should actually select the according representations from the MPDs. In this example, all titles are available in SD and HD quality. Often, not all titles are available in 4K quality. Thus, a device with a 4K subscription can only activate reception of the HD or SD representations.\nThe figure depicts a subscription level hierarchy for premium QoS in a telecommunications network, illustrating the different tiers of service quality offered to subscribers.\nFigure A.2.1-1: Subscription Levels for Premium QoS\nThe bit rate required to sustain a certain quality varies from title to title. In the figure, the bit rate needed for Title4 in HD is in the same range as SD quality of Title3.\nThe various consumer-facing Network Subscription Levels define a set of bounded Operation Ranges, as illustrated on the right side of the figure. Each such Operation Range is conveniently modelled in the 5GMS architecture as a Policy Template. The Policy Template for SD subscription level (SD Operation Range) is authorized to activate a maximal bit rate of btr#1. The Policy Template for 4K subscription level is authorized to activate between any low bit rate and a maximal bit rate of btr#3.\nWhen activating a Dynamic Policy instance, the 5GMSd Client provides a desired bit rate for the selected title. The desired bit rate can be smaller than the maximal bit rate allowed by the Policy Template. The 5GMSd Client always activates a Dynamic Policy instance from its assigned Network Subscription Level, even when the desired bit rate justifies a different Policy Template.\nWhen activating a QoS Flow for a certain subscription level and title, the 5GMSd Client should preferably select a desired bit rate matching the quality needed. For example, a device with an HD Operation Range subscription needs a higher desired bit rate when consuming Title3 in HD quality and a lower desired bit rate when consuming Title4 in HD quality.\nIn some cases, the system rejects a requested QoS Flow or drops an established QoS Flow due to insufficient available network resource. The 5GMSd Client can then try to activate a different QoS Flow with a lower desired bit rate.\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "A.2.2\tProcedure",
                    "description": "",
                    "summary": "",
                    "text_content": "The procedure for activating a Premium Qos dynamic policy is illustrated in figure A.2.2-1 below.\nThe figure depicts a procedure for activating a Premium QoS dynamic policy in a telecommunications network. It illustrates the steps involved in configuring and activating the policy, which is crucial for ensuring high-quality service delivery to subscribers. The figure includes a flowchart and a list of steps, making it easy for network administrators to understand the process and ensure that the policy is properly implemented.\nFigure A.2.2-1: Procedure for activating Premium QoS dynamic policy\nSteps:\n1.\tThe 5GMS Application Provider interacts with the 5GMS AF to set up one or more Policy Templates (using M1). Each Policy Template is identified by a Policy Template identifier and contains information about how to activate the corresponding policy within the 5G System (e.g. N5 URLs and parameters).\n2.\tThe 5GMS Application Provider interacts with its DASH content generation function (e.g. an MPD provider) to annotate the DASH MPD with Service Descriptions (using P1). The Service Descriptions define the Operational Ranges within the Media Player should operate. The DASH MPD and the DASH Media Segments are then ingested by the 5GMS AS.\n3.\tThe 5GMS-Aware Application is configured via M8 (step 3) with information about the available content catalogue (e.g. resolving MPD URLs), the available subscription identifiers (e.g. the user has a 4K subscription or the user has an SD subscription), device type identifiers and network policy identifiers.\nThe subscription identifiers and the device type identifiers are collectively referred to as Service Description Filters in the following.\nNOTE 1:\tIt is for further study whether network policy identifiers are embedded in the MPD Service Descriptions or derived from the Service Descriptions.\nNOTE 2:\tThe network policy identifier can be equal to a Policy Template identifier when the 5GMS-Aware Application is aware about its usage (e.g. for QoS streaming or background download). It is assumed here, that a unique Network Policy identifier is assigned to each subscription level.\n4.\tWhen the user selects an item via the User Interface (U1), the 5GMS-Aware Application translates the input to the needed 5GMSd API calls.\n5.\tThe 5GMS-Aware Application provides input (via C1) on the selected presentation entry (i.e. MPD URL) together with a Network Policy Identifier (the value indicates here a \"HD Premium QoS\" policy (alternative Network Policy Identifiers can refer to e.g. 4K quality), i.e. make the Media Session Handler request a QoS Flow) and Service Description Filters. The Service Description Filter is used by the Media Player to identify the usable Service Descriptions from the MPD. The Network Policy Identifier is used by the Media Session Handler to find the according Policy Description containing information on the Dynamic Policy instantiation method (i.e. procedure and parameters such as Policy Template identifier).\n6.\tThe DASH player fetches the MPD.\n7.\tThe Media Player selects the Service Description and applies the Service Description Filter.\n8.\tThe DASH player indicates to the Media Session Handler (M6) that a \"HD Premium QoS\" network service should be activated (value of the Network Policy Identifier). The DASH player provides input on bit rate ranges (which may depend on the device type and the title quality). The Media Session Handler has received one or more Policy Descriptions together with matching Service Access Information (via M5_1). When the Media Session Handler has received the policy indication, the Media Session Handler uses the Network Policy Identifier to find the procedure and the parameters to activate the Dynamic Policy instance (i.e. find the matching Policy Description). The Media Session Handler activates a Dynamic Policy instance in the 5GMS AF, providing Service Data Flow Templates identifying the DASH media flows (audio, video, etc) and to provide the desired bit rate of the video.\n9.\tThe Media Session Handler activates a Dynamic Policy instance with the 5GMS AF. The 5GMS AF uses the Policy Template identifier to look up the matching Policy Template in order to create the PCF or NEF API invocation. As result, the Media Session Handler receives the enforcement bit rate in the 5GMS AF response. The 5GMS Client should not exceed this bit rate threshold.\nThe Service Access Information (via M5_1) includes a list of recommended traffic detection methods. The Media Session Handler selects a Service Data Flow description method (e.g. 5-Tuples). When the Media Session Handler selects:\n-\t5-Tuples: For each new TCP connection, the Media Session Handler updates the Dynamic Policy instances and adds a new 5-Tuple. For each closed TCP connection, the Media Session Handler updates the Dynamic Policy instances and removes the 5-Tuple of the closed TCP connection.\n-\tTOS or Traffic Class: The Media Session Handler sets the TOS or Traffic Class for each new TCP connection.\n-\tDomain name: The Media Session Handler provides the domain name with the Dynamic Policy Instance.\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "A.2.3\tExample parameters",
                    "description": "",
                    "summary": "",
                    "text_content": "Table A.2.3-1: M5_1 parameters for Policy Descriptions (used by the Media Session Handler)\n\nTable A.2.3-2: M5_1 parameters for Service Access Information\n\n",
                    "tables": [
                        {
                            "description": "Table A.2.3-1: M5_1 parameters for Policy Descriptions (used by the Media Session Handler)",
                            "table number": 94,
                            "summary": "",
                            "name": ""
                        },
                        {
                            "description": "Table A.2.3-2: M5_1 parameters for Service Access Information",
                            "table number": 95,
                            "summary": "",
                            "name": ""
                        }
                    ],
                    "figures_meta_data": [],
                    "subsubsections": []
                }
            ]
        },
        {
            "title": "A.3\t(Conditional) Zero Rating dynamic policy",
            "description": "",
            "summary": "",
            "tables": [],
            "figures_meta_data": [],
            "subsections": [
                {
                    "title": "A.3.1\tGeneral",
                    "description": "",
                    "summary": "",
                    "text_content": "In the case of (Conditional) Zero Rating, the quality of a video streaming service should not exceed a certain bit rate threshold (called the policy threshold). This can be realized by deploying a traffic shaper in the network (e.g. a policing function in the UPF) or by instructing the DASH Player not to exceed a certain policy threshold bit rate. The policy threshold may be network-specific, i.e. depending on the 5G System. The following realization assumes the latter, i.e. the DASH Player is not exceeding the bit rate policy and the UPF is just monitoring the compliance of the application flows (one or more TCP and/or UDP flows). The MPD is annotated using DASH Service Descriptions in such a way that the DASH Player can identify which maximal representation bit rates still comply with the policy threshold.\nFigure A.3.1-1 below illustrates the per-title quality and the policy threshold. For Title1 and Title2, the 5GMSd Client can activate the SD and HD representations. For Title3, the 5GMSd Client can activate the 480p and the SD representations. For Title4, the 5GMSd Client can activate all available representations (i.e. SD and HD).\nThe figure depicts a policy threshold versus quality graph, illustrating the relationship between policy thresholds and quality metrics. The graph shows that as the policy threshold increases, the quality metric also increases, indicating that a higher policy threshold is associated with a higher quality of service. This graph is useful for understanding the trade-off between policy enforcement and quality in a network.\nFigure A.3.1-1: Policy threshold versus quality\nWhen the 5GMSd Client receives the bit rate of the policy threshold from the network, the 5GMSd Client filters the MPD for policy-compliant representations (i.e. those that lie at or below the policy threshold).\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "A.3.2\tProcedure",
                    "description": "",
                    "summary": "",
                    "text_content": "The procedure for activating a (Conditional) Zero Rating dynamic policy is illustrated in figure A.3.2-1 below.\nThe figure depicts a procedure for activating a Conditional Zero Rating dynamic policy, which is a key feature in the 5G network. The policy allows for the allocation of zero-rated resources to specific users or devices, reducing the overall cost of network operations. The figure illustrates the steps involved in activating the policy, including the selection of the policy, the creation of a zero-rated resource, and the assignment of the resource to the user or device.\nFigure A.3.2-1: Procedure for activating (Conditional) Zero Rating dynamic policy\nSteps:\n1.\tThe 5GMS Application Provider interacts with the 5GMS AF to set up one or more Policy Templates. Each Policy Template is identified by a Policy Template identifier and contains information about how to activate the corresponding policy within the 5G System (e.g. N5 URLs and parameters).\n2.\tThe 5GMS Application Provider interacts with its DASH content generation function (e.g. an MPD provider) to annotate the DASH MPD with Service Descriptions (step 2). The intention of the Service Descriptions here is that the DASH Player can identify those representation combinations which do not exceed the bit rate requirement.\n3.\tThe 5GMSAware Application is configured via M8 with information about the available content catalogue (e.g. resolving MPD URLs), the available subscription identifiers (e.g. the user has a 4K content subscription or the user has an SD subscription), device type identifiers.\nThe 5GMSd-Aware Application is configured via M8 about the available (Conditional) Zero Rating policy. This includes the Network Policy Ids.\n4.\tWhen a user selects an item via the User Interface (U1), the 5GMS-Aware Application translates the input to the needed 5GMSd API calls.\n5.\tThe 5GMS Aware Application provides input (via C1) on the selected presentation entry (i.e. MPD URL) and also on the Network Policy Id (the value in this case indicates a (Conditional) Zero-Rating policy, i.e. make the Media Session Handler request the policy threshold parameter from the network).\nNOTE:\tC1 is an abstract interface and indicates that the 5GMS-Aware Application may either first use M6 or M7 for the interactions with the 5GMS Client.\n6.\tThe Media Session Handler uses the Network Policy Identifier to find the procedure and the parameters to activate the Dynamic Policy Instance (here a (Conditional) Zero Rating policy). The Media Session Handler has received one or more Policy Descriptions together with matching Service Access Information (via M5_1). The Media Session Handler uses the Network Policy Identifier as a key to find the correct Policy Description. Here, the Network Policy Identifier indicates a (Conditional) Zero Rating policy. The Media Session Handler should activate a dynamic policy in the 5GMS AF, providing Service Data Flow Template information about the DASH media flows (audio, video, etc.) and retrieving the bit rate threshold, which cannot be exceeded to comply with the policy. The Media Session Handler receives (as result of the Dynamic Policy activation) some information on the policy enforcement (enforcementMethod and/or enforcementBitrate), so that the representation selection logic (bit rate adaptation function) in the DASH Player can consider the effects of the enforcement scheme.\n7.\tThe Media Session Handler activates the Dynamic Policy instance on M5, providing a Policy Template identifier. Upon positive response, the Media Session Handler notifies the DASH Player, providing Service Descriptor Filters. The Media Session Handler may receive these Service Descriptor Filters with the response, or it may look up the Service Descriptor Filter values by a response value. Alternatively, the Media Session Handler receives a maximum bit rate with the response and the Media Session Handler derives the Service Descriptor Filter. The Media Session Handler may also receive information about Policy Enforcement, e.g. what type of traffic shaper will throttle the bit rate.\nThe Media Session Handler may need to update the Dynamic Policy instance, depending on the selected traffic detection method. For example, when the Media Session Handler uses 5-Tuples, the Media Session Handler needs to update the Dynamic Policy instance with every newly opened and every closed TCP connection.\n8.\tThe DASH Player fetches the MPD of the selected content.\n9.The Service Descriptor Filter is used by the DASH Player to filter policy-compliant Service Descriptions from the MPD. The DASH Access Engine or Selection Logic (see ISO/IEC 23009-1 [32] figure K.1) selects only adaptation sets and representations according to the filter. Here, the DASH Player fetches the MPD after the notification from the Media Session Handler.\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "A.3.3\tExample parameters",
                    "description": "",
                    "summary": "",
                    "text_content": "Table A.3.3-1: M5_1 parameters for Policy Descriptions (used by the Media Session Handler)\n\nTable A.3.3.-2: M5_1 parameters for Service Access Information\n\n",
                    "tables": [
                        {
                            "description": "Table A.3.3-1: M5_1 parameters for Policy Descriptions (used by the Media Session Handler)",
                            "table number": 96,
                            "summary": "",
                            "name": ""
                        },
                        {
                            "description": "Table A.3.3.-2: M5_1 parameters for Service Access Information",
                            "table number": 97,
                            "summary": "",
                            "name": ""
                        }
                    ],
                    "figures_meta_data": [],
                    "subsubsections": []
                }
            ]
        },
        {
            "title": "A.4\tBackground Download",
            "description": "",
            "summary": "",
            "tables": [],
            "figures_meta_data": [],
            "subsections": [
                {
                    "title": "A.4.1\tGeneral",
                    "description": "",
                    "summary": "",
                    "text_content": "In the case of Background Download, the asset is acquired in the background, prior to viewing. Many application services offer the capability of acquiring a VoD item for later consumption. The 5GMS-Aware Application triggers the Media Session Handler to acquire the item, providing a background download network policy id.\nNOTE:\tHere, the DASH Player is handling the acquisition, since the DASH Player contains the MPD processing and the DASH Access engine parts. Other realizations would use a separate background download agent, which is not even try to decode and render the video.\nFigure A.4.1-1 below illustrates the representation marking for background download. The MPD may be annotated with Service Descriptions clearly identifying representations intended for download. Here, Title1 should be downloaded in Full HD quality and all other titles in regular HD quality.\nThe figure depicts background download representations, illustrating the various types of data that can be downloaded from the network.\nFigure A.4.1-1: Background Download Representations\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "A.4.2\tProcedure",
                    "description": "",
                    "summary": "",
                    "text_content": "The procedure for activating a Background Download dynamic policy is illustrated in figure A.3.2-1 below.\nThe figure depicts a procedure for activating a Background Download dynamic policy in a network. The figure shows a user interface with various options for configuring the policy, such as the number of background downloads, the frequency of background downloads, and the duration of background downloads. The figure also includes a button to initiate the policy, and a progress bar to show the status of the policy. The figure is designed to be user-friendly and intuitive, making it easy for network administrators to configure and manage the policy.\nFigure A.3.2-1: Procedure for activating Background Download dynamic policy\nSteps:\n1.\tThe 5GMS Application Provider interacts with the 5GMS AF to set up one or more Policy Templates (M1). Each Policy Template is identified by a Policy Template identifier and contains information about how to activate the according policy within the 5G System (e.g. N5 URLs and parameters).\n2.\tThe 5GMS Application Provider also interacts with its DASH content generation function (e.g. an MPD provider) to annotate the DASH MPD with Service Descriptions, e.g. to identify, which representation is intended for background download.\n3.\tThe 5GMS-Aware Application is configured via M8 with information about the available content catalogue (e.g. resolving MPD URLs), the available subscription identifiers (e.g. the user has a 4K subscription or the user has an SD subscription), device type identifiers.\nThe 5GMSd-Aware Application is configured via M8 about the available background download policy. This includes the Network Policy Id which hints a background download policy.\n4.\tWhen a user selects an item via the User Interface (U1) for Background Download the 5GMS-Aware Application translates the input to the needed 5GMSd API calls.\n5.\tThe 5GMS-Aware Application provides input (via C1) on the selected presentation entry (i.e. MPD URL) and also on the Network Policy Identifier (indicating a background download policy, i.e. make the Media Session Handler request a bearer suitable for Background Download).\nNOTE:\tC1 is an abstract interface and indicates that the 5GMS-Aware Application may either first use M6 or M7 for the interactions with the 5GMS Client.\n6.\tThe Media Session Handler uses the Network Policy Identifier to find the procedure and the parameters to activate the Dynamic Policy Instance (here a Background Download policy). The Media Session Handler has received one or more Policy Descriptions together with matching Service Access Information (via M5_1). The Media Session Handler uses the Network Policy Identifier as a key to find the correct Policy Description. The Media Session Handler should activate a Dynamic Policy in the 5GMS AF, providing Service Data Flow Template information of the media flows (audio, video, etc). The Media Session Handler can also receive information on a bit rate policing (enforcementMethod and/or enforcementBitrate), e.g. that the bit rate is actively limited.\n7.\tThe Media Session Handler activates the Dynamic Policy instance on M5, providing the Policy Template identifier and additional parameters. Upon positive response, the Media Session handler notifies the DASH Player to start the Background Download. The notification contains a Service Descriptor Filters, which is used by the DASH Player to filter policy-compliant Service Descriptions from the MPD. The Media Session Handler may receive the Service Descriptor Filters with the response or may look up the Service Descriptor Filter values by a response value (e.g. derived from a maximum bit rate indication).\nThe Media Session Handler may need to update the Dynamic Policy instance, depending on the selected traffic detection method. For example, when the Media Session Handler uses 5-Tuples, it needs to update the Dynamic Policy instance with every newly opened and every closed TCP connection.\n8.\tThe DASH Player fetches the MPD of the selected content.\n9.\tThe DASH Access Engine / Selection Logic (see ISO 23009-1 [32] figure K.1) selects only adaptation sets and representations according to the filter (i.e. suitable for Background Download). Here, the DASH Player fetches the MPD after the notification from the Media Session Handler.\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "A.4.3\tExample parameters",
                    "description": "",
                    "summary": "",
                    "text_content": "Table A.4.3-1: M5_1 Parameters for Policy Descriptions (used by the Media Session Handler)\n\nTable A.4.3-2: M5_1 Parameters for Service Access Information\n\n",
                    "tables": [
                        {
                            "description": "Table A.4.3-1: M5_1 Parameters for Policy Descriptions (used by the Media Session Handler)",
                            "table number": 98,
                            "summary": "",
                            "name": ""
                        },
                        {
                            "description": "Table A.4.3-2: M5_1 Parameters for Service Access Information",
                            "table number": 99,
                            "summary": "",
                            "name": ""
                        }
                    ],
                    "figures_meta_data": [],
                    "subsubsections": []
                }
            ]
        },
        {
            "title": "B.1\tPull-based content ingest example",
            "description": "",
            "summary": "",
            "tables": [],
            "figures_meta_data": [],
            "subsections": [
                {
                    "title": "B.1.1\tOverview",
                    "description": "",
                    "summary": "",
                    "text_content": "1.\tThe 5GMSd Client on the UE requests a media resource via M4d.\n2.\tThe 5GMSd AS determines that it does not have a cached copy of the requested media resource.\n3.\tThe 5GMSd AS transforms the M4d request URL into a request to the 5GMSd Application Provider's origin server via M2d.\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "B.1.2\tDesired URL mapping",
                    "description": "",
                    "summary": "",
                    "text_content": "In the example shown in table B.1.2-1 below, media resources are exposed at M4d from a default canonical domain 5gmsd-as.mno.net determined by the 5GMSd System operator, and also from a custom domain name alias mno-cdn.5gmsd-ap.com that has been configured by the 5GMSd Application Provider.\nTable B.1.2-1: Example URL mapping for pull-based ingest\n\n",
                    "tables": [
                        {
                            "description": "Table B.1.2-1: Example URL mapping for pull-based ingest",
                            "table number": 100,
                            "summary": "",
                            "name": ""
                        }
                    ],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "B.1.3\tContent Hosting Configuration",
                    "description": "",
                    "summary": "",
                    "text_content": "Table B.1.3-1 below shows the relevant Content Hosting Configuration parameters needed to achieve the example mapping described in table B.1.2-1 above.\nTable B.1.3-1: Content Hosting Configuration properties relevant to pull-based ingest\n\n",
                    "tables": [
                        {
                            "description": "Table B.1.3-1: Content Hosting Configuration properties relevant to pull-based ingest",
                            "table number": 101,
                            "summary": "",
                            "name": ""
                        }
                    ],
                    "figures_meta_data": [],
                    "subsubsections": []
                }
            ]
        },
        {
            "title": "B.2\tPush-based content ingest example",
            "description": "",
            "summary": "",
            "tables": [],
            "figures_meta_data": [],
            "subsections": [
                {
                    "title": "B.2.0\tOverview",
                    "description": "",
                    "summary": "",
                    "text_content": "1.\tThe 5GMSd Application Provider uploads content to the 5GMSd AS via M2d.\n2.\tThe 5GMSd AS rewrites the M2d upload URL to an M4d downlink URL that is exposed to the 5GMSd Client on the UE.\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "B.2.1\tDesired URL mapping",
                    "description": "",
                    "summary": "",
                    "text_content": "In the example shown in table B.2.1-1, media resources are pushed into the 5GMSd AS at M2d by the 5GMSd Application Provider and exposed to the 5GMSd Client at M4d using the canonical name of the 5GMSd AF 5gmsd-as.mno.net and an additional domain name alias mno-cdn.5gmsd-ap.com configured by the 5GMSd Application Provider.\nTable B.2.1-1: Example URL mapping for pull-based ingest\n\n",
                    "tables": [
                        {
                            "description": "Table B.2.1-1: Example URL mapping for pull-based ingest",
                            "table number": 102,
                            "summary": "",
                            "name": ""
                        }
                    ],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "B.2.2\tContent Hosting Configuration",
                    "description": "",
                    "summary": "",
                    "text_content": "Table B.2.2-1 below shows the relevant Content Hosting Configuration parameters needed to achieve the example mapping described in table B.2.1-1 above.\nTable B.2.2-1: Content Hosting Configuration properties relevant to push-based ingest\n\n",
                    "tables": [
                        {
                            "description": "Table B.2.2-1: Content Hosting Configuration properties relevant to push-based ingest",
                            "table number": 103,
                            "summary": "",
                            "name": ""
                        }
                    ],
                    "figures_meta_data": [],
                    "subsubsections": []
                }
            ]
        },
        {
            "title": "C.1\tGeneral",
            "description": "This annex is based on the OpenAPI 3.0.0 specification [23] and provides corresponding representations of all APIs defined in the present document.\nNOTE 1:\tAn OpenAPIs representation embeds JSON Schema representations of HTTP message bodies.\nThis Annex shall take precedence when being discrepant to other parts of the present document with respect to the encoding of information elements and methods within the API(s).\nNOTE 2:\tThe semantics and procedures, as well as conditions, e.g. for the applicability and allowed combinations of attributes or values, not expressed in the OpenAPI definitions but defined in other parts of the specification also apply.\n",
            "summary": "",
            "tables": [],
            "figures_meta_data": [],
            "subsections": []
        },
        {
            "title": "C.2\tData Types applicable to several APIs",
            "description": "For the purpose of referencing entities defined in this clause, it shall be assumed that the OpenAPI definitions below are contained in a physical file named \"TS26512_CommonData.yaml\".\n\n",
            "summary": "",
            "tables": [
                {
                    "description": "For the purpose of referencing entities defined in this clause, it shall be assumed that the OpenAPI definitions below are contained in a physical file named \"TS26512_CommonData.yaml\".",
                    "table number": 104,
                    "summary": "",
                    "name": ""
                }
            ],
            "figures_meta_data": [],
            "subsections": []
        },
        {
            "title": "C.3\tOpenAPI representation of the M1 APIs",
            "description": "",
            "summary": "",
            "tables": [],
            "figures_meta_data": [],
            "subsections": [
                {
                    "title": "C.3.1\tM1_ProvisioningSessions API",
                    "description": "",
                    "summary": "",
                    "text_content": "\n",
                    "tables": [
                        {
                            "description": "",
                            "table number": 105,
                            "summary": "",
                            "name": ""
                        }
                    ],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "C.3.2\tM1_ServerCertificatesProvisioning API",
                    "description": "",
                    "summary": "",
                    "text_content": "\n",
                    "tables": [
                        {
                            "description": "",
                            "table number": 106,
                            "summary": "",
                            "name": ""
                        }
                    ],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "C.3.3\tM1_ContentPreparationTemplatesProvisioning API",
                    "description": "",
                    "summary": "",
                    "text_content": "\n",
                    "tables": [
                        {
                            "description": "",
                            "table number": 107,
                            "summary": "",
                            "name": ""
                        }
                    ],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "C.3.4\tM1_ContentProtocolsDiscovery API",
                    "description": "",
                    "summary": "",
                    "text_content": "\n",
                    "tables": [
                        {
                            "description": "",
                            "table number": 108,
                            "summary": "",
                            "name": ""
                        }
                    ],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "C.3.5\tM1_ContentHostingProvisioning API",
                    "description": "",
                    "summary": "",
                    "text_content": "\n",
                    "tables": [
                        {
                            "description": "",
                            "table number": 109,
                            "summary": "",
                            "name": ""
                        }
                    ],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "C.3.6\tM1_ConsumptionReportingProvisioning API",
                    "description": "",
                    "summary": "",
                    "text_content": "\n",
                    "tables": [
                        {
                            "description": "",
                            "table number": 110,
                            "summary": "",
                            "name": ""
                        }
                    ],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "C.3.7\tM1_MetricsReportingProvisioning API",
                    "description": "",
                    "summary": "",
                    "text_content": "\n",
                    "tables": [
                        {
                            "description": "",
                            "table number": 111,
                            "summary": "",
                            "name": ""
                        }
                    ],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "C.3.8\tM1_PolicyTemplatesProvisioning API",
                    "description": "",
                    "summary": "",
                    "text_content": "\n",
                    "tables": [
                        {
                            "description": "",
                            "table number": 112,
                            "summary": "",
                            "name": ""
                        }
                    ],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "C.3.9\tM1_EdgeResourcesProvisioning API",
                    "description": "",
                    "summary": "",
                    "text_content": "\n",
                    "tables": [
                        {
                            "description": "",
                            "table number": 113,
                            "summary": "",
                            "name": ""
                        }
                    ],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "C.3.10\tM1_EventDataProcessingProvisioning API",
                    "description": "",
                    "summary": "",
                    "text_content": "\n",
                    "tables": [
                        {
                            "description": "",
                            "table number": 114,
                            "summary": "",
                            "name": ""
                        }
                    ],
                    "figures_meta_data": [],
                    "subsubsections": []
                }
            ]
        },
        {
            "title": "C.4\tOpenAPI representation of the M5 APIs",
            "description": "",
            "summary": "",
            "tables": [],
            "figures_meta_data": [],
            "subsections": [
                {
                    "title": "C.4.1\tM5_ServiceAccessInformation API",
                    "description": "",
                    "summary": "",
                    "text_content": "\n",
                    "tables": [
                        {
                            "description": "",
                            "table number": 115,
                            "summary": "",
                            "name": ""
                        }
                    ],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "C.4.2\tM5_ConsumptionReporting API",
                    "description": "",
                    "summary": "",
                    "text_content": "\n",
                    "tables": [
                        {
                            "description": "",
                            "table number": 116,
                            "summary": "",
                            "name": ""
                        }
                    ],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "C.4.3\tM5_MetricsReporting API",
                    "description": "",
                    "summary": "",
                    "text_content": "\n",
                    "tables": [
                        {
                            "description": "",
                            "table number": 117,
                            "summary": "",
                            "name": ""
                        }
                    ],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "C.4.4\tM5_DynamicPolicies API",
                    "description": "",
                    "summary": "",
                    "text_content": "\n",
                    "tables": [
                        {
                            "description": "",
                            "table number": 118,
                            "summary": "",
                            "name": ""
                        }
                    ],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "C.4.5\tM5_NetworkAssistance API",
                    "description": "",
                    "summary": "",
                    "text_content": "\n",
                    "tables": [
                        {
                            "description": "",
                            "table number": 119,
                            "summary": "",
                            "name": ""
                        }
                    ],
                    "figures_meta_data": [],
                    "subsubsections": []
                }
            ]
        },
        {
            "title": "C.5\tOpenAPI representation of data reporting records",
            "description": "",
            "summary": "",
            "tables": [],
            "figures_meta_data": [],
            "subsections": [
                {
                    "title": "C.5.1\tR4 data reporting records",
                    "description": "",
                    "summary": "",
                    "text_content": "For the purpose of referencing entities defined in this clause, it shall be assumed that the OpenAPI definitions below are contained in a physical file named \"TS26512_R4_DataReporting.yaml\".\n\n",
                    "tables": [
                        {
                            "description": "For the purpose of referencing entities defined in this clause, it shall be assumed that the OpenAPI definitions below are contained in a physical file named \"TS26512_R4_DataReporting.yaml\".",
                            "table number": 120,
                            "summary": "",
                            "name": ""
                        }
                    ],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "C.5.2\tR2 data reporting records",
                    "description": "",
                    "summary": "",
                    "text_content": "For the purpose of referencing entities defined in this clause, it shall be assumed that the OpenAPI definitions below are contained in a physical file named \"TS26512_R2_DataReporting.yaml\".\n",
                    "tables": [
                        {
                            "description": "For the purpose of referencing entities defined in this clause, it shall be assumed that the OpenAPI definitions below are contained in a physical file named \"TS26512_R2_DataReporting.yaml\".",
                            "table number": 121,
                            "summary": "",
                            "name": ""
                        }
                    ],
                    "figures_meta_data": [],
                    "subsubsections": []
                }
            ]
        },
        {
            "title": "C.6\tOpenAPI representation of event exposure data types",
            "description": "For the purpose of referencing entities defined in this clause, it shall be assumed that the OpenAPI definitions below are contained in a physical file named \"TS26512_EventExposure.yaml\".\n\nTable D-1: Index of Provisioning (M1) APIs\n\nTable D-2: Index of Media Session Handling (M5) APIs\n\n",
            "summary": "",
            "tables": [
                {
                    "description": "For the purpose of referencing entities defined in this clause, it shall be assumed that the OpenAPI definitions below are contained in a physical file named \"TS26512_EventExposure.yaml\".",
                    "table number": 122,
                    "summary": "",
                    "name": ""
                },
                {
                    "description": "Table D-1: Index of Provisioning (M1) APIs",
                    "table number": 123,
                    "summary": "",
                    "name": ""
                },
                {
                    "description": "Table D-2: Index of Media Session Handling (M5) APIs",
                    "table number": 124,
                    "summary": "",
                    "name": ""
                }
            ],
            "figures_meta_data": [],
            "subsections": []
        },
        {
            "title": "E.1\tGeneral",
            "description": "The set of parameters used to provision processing and exposure of UE data is defined for each exposed Event by a controlled vocabulary with a unique name space identifier string in the form of a URN. Each parameter is specified as a term identifier string that is unique within the scope of its parent name space.\nIn the context of 5G Media Streaming, the values signalled in DataAccessProfile.parameters (see clause 6.3.2.3 of TS 26.532 [47]) shall be fully-qualified URIs formed from the name space identifier specified in the following clauses concatenated with a single hash character ('#') concatenated with the appropriate term identifier.\n",
            "summary": "",
            "tables": [],
            "figures_meta_data": [],
            "subsections": []
        },
        {
            "title": "E.2\tControlled vocabularies of DASH QoE metrics reporting parameters",
            "description": "",
            "summary": "",
            "tables": [],
            "figures_meta_data": [],
            "subsections": [
                {
                    "title": "E.2.1\tReporting parameters for 3GP-DASH metrics",
                    "description": "",
                    "summary": "",
                    "text_content": "The name space identifier for the controlled vocabulary of DASH QoE metrics is:\nurn:‌3GPP:‌ns:‌PSS:‌DASH:‌QM10\nThe term identifiers in this controlled vocabulary shall be the set of key names defined in clause 10.2 of TS 26.247 [4], using a single forward slash character ('/') as the hierarchical separator in the resulting path specifier. In the case of metrics lists, the Entry object shall be omitted from the term identifier path.\nEXAMPLE 1:\turn:‌3GPP:‌ns:‌PSS:‌DASH:‌QM10#AvgThroughput/numbytes\nTo select all reportable metrics below a common branch of the metrics hierarchy the relevant terminal path element(s) are pruned from the term identifier.\nEXAMPLE 2:\turn:‌3GPP:‌ns:‌PSS:‌DASH:‌QM10#AvgThroughput\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "E.2.2\tReporting parameters for VR metrics",
                    "description": "",
                    "summary": "",
                    "text_content": "The name space identifier for the controlled vocabulary of VR metrics is:\nurn:‌3gpp:‌metadata:‌2020:‌VR:‌metrics\nThe term identifiers in this controlled vocabulary shall be the set of key names defined in clause 9.3 of TS 26.118 [42], using a single forward slash character ('/') as the hierarchical separator in the resulting path specifier. In the case of metrics lists, the Entry object shall be omitted from the term identifier path.\nEXAMPLE 1:\turn:‌3gpp:‌metadata:‌2020:‌VR:‌metrics#CompQualLatency/Latency\nTo select all reportable metrics below a common branch of the metrics hierarchy the relevant terminal path element(s) are pruned from the term identifier.\nEXAMPLE 2:\turn:‌3gpp:‌metadata:‌2020:‌VR:‌metrics#CompQualLatency\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                }
            ]
        },
        {
            "title": "E.3\tControlled vocabulary of 5GMS consumption reporting parameters",
            "description": "The name space identifier for the controlled vocabulary of 5GMS consumption reporting parameters is:\nurn:3gpp:5gms:event-exposure:consumption-reporting\nThe term identifiers in this controlled vocabulary are specified in table E.3-1 below.\nEXAMPLE:\turn:3gpp:5gms:event-exposure:consumption-reporting#locations\nTable E.3-1: Controlled vocabulary of 5GMS consumption reporting parameters\n\n",
            "summary": "",
            "tables": [
                {
                    "description": "Table E.3-1: Controlled vocabulary of 5GMS consumption reporting parameters",
                    "table number": 125,
                    "summary": "",
                    "name": ""
                }
            ],
            "figures_meta_data": [],
            "subsections": []
        },
        {
            "title": "E.4\tControlled vocabulary of 5GMS Network Assistance reporting parameters",
            "description": "The name space identifier for the controlled vocabulary of 5GMS Network Assistance parameters is:\nurn:3gpp:5gms:event-exposure:network-assistance\nThe term identifiers in this controlled vocabulary are specified in table E.4-1 below.\nEXAMPLE:\turn:3gpp:5gms:event-exposure:network-assistance#requested-qos\nTable E.4-1: Controlled vocabulary of 5GMS Network Assistance parameters\n\n",
            "summary": "",
            "tables": [
                {
                    "description": "Table E.4-1: Controlled vocabulary of 5GMS Network Assistance parameters",
                    "table number": 126,
                    "summary": "",
                    "name": ""
                }
            ],
            "figures_meta_data": [],
            "subsections": []
        },
        {
            "title": "E.5\tControlled vocabulary of 5GMS Dynamic Policy reporting parameters",
            "description": "The name space identifier for the controlled vocabulary of 5GMS Dynamic Policy parameters is\nurn:3gpp:5gms:event-exposure:dynamic-policy\nThe term identifiers in this controlled vocabulary are specified in table E.5-1 below.\nEXAMPLE:\turn:3gpp:5gms:event-exposure:dynamic-policy#enforcement-bit-rate\nTable E.5-1: Controlled vocabulary of 5GMS Dynamic Policy parameters\n\n",
            "summary": "",
            "tables": [
                {
                    "description": "Table E.5-1: Controlled vocabulary of 5GMS Dynamic Policy parameters",
                    "table number": 127,
                    "summary": "",
                    "name": ""
                }
            ],
            "figures_meta_data": [],
            "subsections": []
        },
        {
            "title": "E.6\tControlled vocabulary of 5GMS media access activity parameters",
            "description": "The name space identifier for the controlled vocabulary of 5GMS media access activity is:\nurn:3gpp:5gms:event-exposure:access-activity\nThe term identifiers in this controlled vocabulary are specified in table E.6-1 below.\nEXAMPLE:\turn:3gpp:5gms:event-exposure:access-activity#request-message/url\nTable E.6-1: Controlled vocabulary of 5GMS media access activity parameters\n\n\n",
            "summary": "",
            "tables": [
                {
                    "description": "Table E.6-1: Controlled vocabulary of 5GMS media access activity parameters",
                    "table number": 128,
                    "summary": "",
                    "name": ""
                }
            ],
            "figures_meta_data": [],
            "subsections": []
        },
        {
            "title": "F.1\tGeneral",
            "description": "This annex describes 5GMS AS discovery by the 5GMS Client, including provisioning aspects that leverage the Domain Name System (DNS).\n",
            "summary": "",
            "tables": [],
            "figures_meta_data": [],
            "subsections": []
        },
        {
            "title": "F.2\t5GMS AS discovery and media streaming access with a Server Certificate created by the 5GMS System",
            "description": "Figure F.2-1 illustrates the initial provisioning needed to allow discovery of a 5GMS AS by the 5GMS Client as well as the eventual 5GMS AS discovery sequence using the Domain Name System (DNS). Specific focus here is on the provisioning and usage of TLS Certificates. The desired outcome is that the 5GMS Client is satisfied that it has established a TLS connection with an authorized 5GMS AS instance.\nHere, the Server Certificate Create procedure (see clause 4.3.6.2) is used to request that the 5GMS AF creates the server certificate resource. In this case, the certificate's Common Name (CN) is assigned in a domain under the control of the 5GMS System operator (i.e., the 5GMS System operator is the legitimate owner of the domain name). The 5GMS System operator may use a third-party DNS service to host the domain in question.\nFor example, the 5GMS System operator uses the full canonicalDomainName value <canonicalAsHostname>.‌<5GMS_Operator>.‌net as the Common Name in the Server Certificate. The 5GMS AF embeds this host name in the distribution base URL it returns to the 5GMS Application Provider.\nTable F.2-1: Example Content Hosting Configuration corresponding to\nCreate Server Certificate procedure\n\nThe 5GMS System operator may instead use the wildcarded domain name *.<5GMS_Operator>.net as the Common Name of the Server Certificate, in which case the 5GMS AF assigns a canonical host name <canonicalAsHostname> for the 5GMS AS in this domain and embeds this in the distribution base URL it returns to the 5GMS Application Provider.\nIn both cases, the Media Entry Point URL advertised via reference point M5 or M8 (used by the Media Player to access the content in the 5GMS AS at reference point M4) is then:\nhttps://<canonicalAsHostname>.<5GMS_Operator>.net/<af-nominated-base-path>/<relativePath>\nThe figure depicts a 5G MS AS discovery process using DNS, with the creation of server certificates for the 5GMS System.\nFigure F.2-1: 5GMS AS discovery using DNS using 5GMS System created server certificates\nPrerequisites:\n-\tA 5GMS-Aware Application is installed on the UE. This includes a list of API endpoint addresses for interacting with the 5GMS AF at reference point M5.\nAt application service deployment time:\n1.\tThe 5GMS Application Provider creates a Provisioning Session using the procedure specified in clause 4.3.2.2. The 5GMS AF provides the Provisioning Session Id in its response to the 5GMS Application Provider.\n2.\tThe 5GMS Application Provider creates a Content Hosting Configuration using the procedure specified in clause 4.3.3.2. If it has not already done so, the 5GMS AF assigns a canonical domain name for the 5GMS AS and includes this in its respose to the 5GMS Application Provider (canonical‌Domain‌Name).\n3.\tThe 5GMS Application Provider requests that the 5GMS AF creates a Server Certificate for this Provisioning Session using the procedure specified in clause 4.3.6.2. If it has not already done so, the 5GMS AF assigns a canonical domain name for the 5GMS AS and this is used as the Common Name and the first (and only) Subject Alternative Name of the generated server certificate. The CertificateId is provided to the 5GMS Application Provider upon success.\nNOTE:\tThe order of step 2 and step 3 may be reversed, in which case step 4 is not needed and the 5GMS AS is updated as a consequence of step 2.\n4.\tThe 5GMS Application Provider updates the Content Hosting Configuration using the procedure specified in clause 4.3.3.4, adding the Certificate Identifier of the newly created Server Certificate resource (i.e., modifying the value of distributionConfigurations[ ].certificateId).\nAs a consequence, the 5GMS AF provisions the 5GMS AS with relevant information from the Provisioning Session, including the Server Certificate and Content Hosting Configuration.\n5:\tIf it has not already done so, the 5GMS AF provisions A and/or AAAA records in the DNS service mapping the canonical domain name of the 5GMS AS instance to its assigned IP address(es).\nNOTE:\tThe DNS service may be provided by a third-party service provider under the direction of the 5GMS System operator.\nWhen content is selected in the 5GMS-Aware Application:\n6.\tWhen Service Access Information retrieval at reference point M5 is used (see clause 4.7.2.3), the 5GMS Client in the UE retrieves the Service Access Information. This may include media entry point URLs within the streamAccess.entryPoints array. Otherwise, the 5GMS-Aware Application obtains this information via reference point M8.\n7.\tThe 5GMS Client in the UE selects one of the offered Media Entry Point URLs corresponding to the its media stream handling capabilities.\n8.\tThe 5GMS Client extracts the Fully-Qualified Domain Name (FQDN) from the chosen media entry point URL and uses the DNS service to resolve its IP address.\n9.\tWhen establishing the TLS connection to the 5GMS AS at reference point M4, the Media Stream Handler in the UE cites the FQDN of the media entry point URL in the Server Name Indication (SNI) field of the TLS Client Hello message. The 5GMS AS uses the value of the SNI field to look up the corresponding Server Certificate and returns it to the Media Stream Handler in its Server Hello response. If the Server Certificate was provisioned with a wildcard Common Name, appropriate matching rules are followed by the 5GMS AS to identify the correct Server Certificate to present to the Media Stream Handler.\n10.\tThe 5GMS Client validates the Server Certificate, including whether the value of the Common Name (or one of its Subject Alternative Names) matches the FQDN of the chosen Media Entry Point URL.\nWhen all server certificate validation steps are successfully passed, the following steps are executed:\n11.\tThe 5GMS Client requests the resource identified by the Media Entry Point over the TLS connection established with the 5GMS AS at reference point M4.\n",
            "summary": "",
            "tables": [
                {
                    "description": "Table F.2-1: Example Content Hosting Configuration corresponding to\nCreate Server Certificate procedure",
                    "table number": 129,
                    "summary": "",
                    "name": ""
                }
            ],
            "figures_meta_data": [],
            "subsections": []
        },
        {
            "title": "F.3\t5GMS AS discovery and service access with a Server Certificate owned by the 5GMS Application Provider",
            "description": "Figure F.3-1 illustrates the initial provisioning needed to allow discovery of a 5GMS AS by the 5GMS Client as well as the eventual 5GMS AS discovery sequence using the Domain Name System (DNS). Specific focus here is on the provisioning and usage of TLS Certificates. The desired outcome is that the 5GMS Client is satisfied that it has established a TLS connection with an authorized 5GMS AS instance.\nHere, the Reserve Server Certificate (see clause 4.3.6.3) and Upload Server Certificate (see clause 4.3.6.5) procedures are used for creating the Server Certificate resource and for subsequently providing it to the 5GMS AF. In this case, the certificate’s Common Name (CN) is assigned in a domain under the control of the 5GMS Application Provider (i.e., Application Provider is the legitimate owner of the domain name). The 5GMS Application Provider may use the 5GMS System operator or any third-party DNS service to host the domain in question.\nFor example, the 5GMS Application Provider wishes to use the alias <aliasHostname>.<AppProvider>.com to access content through the 5GMS AS and it includes its chosen host name as a parameter to the Reserve Server Certificate operation. In response, the 5GMS AF generates a Certificate Signing Request (CSR) which it returns to the 5GMS Application Provider. The 5GMS AF assigns a canonical host name for the 5GMS AS in a domain under its control. The 5GMS AF embeds the Fully-Qualified Domain Name of the alias in the distribution base URL of the Content Hosting Configuration it returns to the 5GMS Application Provider.\nTable F.3-1: Example Content Hosting Configuration corresponding to\nReserve/Upload Server Certificate procedure\n\nThe 5GMS Application Provider additionally configures the 5GMS AF-nominated canonical‌DomainName as a CNAME record for its chosen 5GMS AS domain name alias in its preferred DNS service.\nListing F.3-1: Example DNS CNAME record to support distribution configuration in table F.3-1\n\nThe Media Entry Point URL advertised via reference point M5 or M8 (used by the Media Player to access the content <relativePath> at reference point M4) is then:\nhttps://<aliasHostname>.<AppProvider>.com/<af-nominated-base-path>/<relativePath>\nThe figure depicts a simplified representation of the 5G Mobile Subscriber Identity (MS) discovery process using Domain Name System (DNS) for the Authentication and Security Service (AS). The figure illustrates the process of identifying the 5G Mobile Subscriber Identity (MS) using uploaded Server Certificates. The process involves the use of DNS to query the server certificates for the 5G MS, which is then used to authenticate the user and establish a secure connection.\nFigure F.3-1: 5GMS AS discovery using DNS using uploaded Server Certificates\nPrerequisites:\n-\tA 5GMS-Aware Application is installed on the UE. This includes a list of API endpoint addresses for interacting with the 5GMS AF at reference point M5.\nAt application service deployment time:\n1.\tThe 5GMS Application Provider creates a Provisioning Session using the procedure specified in clause 4.3.2.2. The 5GMS AF provides the Provisioning Session Id in its response to the 5GMS Application Provider.\n2.\tThe 5GMS Application Provider creates a CSR using the Reserve Server Certificate procedure of this Provisioning Session using the procedure specified in clause 4.3.6.3. The 5GMS Application Provider provides a set of 5GMS AS domain name aliases as input. The CSR and the Certificate Id are provided upon success in the response.\n3.\tThe 5GMS Application Provider uses the CSR for obtaining the Server Certificate from its prefered Certificate Authority.\n4.\tThe Application Provider uses the Upload Server Certificate procedure (see clause 4.3.6.5) to upload the received Server Certificate.\n5.\tThe 5GMS Application Provider creates the Content Hosting Configuration using the procedure specified in clause 4.3.3.2, adding the Domain Name Alias distributionConfigurations.domainNameAlias and CertificateId of the uploaded Server Certificate (distributionConfigurations.certificateId). The 5GMS AF assigns a cannonical domain name (canonicalDomainName) and provides its with the response.\nAs a consequence, the 5GMS AF provisions the 5GMS AS with relevant information from the Provisioning Session, including the Server Certificate and Content Hosting Configuration.\n6:\tIf it has not already done so, the 5GMS AF provisions A and/or AAAA records in the 5GMS System’s DNS service mapping the canonical name of the 5GMS AS instance to its assigned IP address(es).\nNOTE 1:\tThe DNS service may be provided by a third-party service provider under the direction of the 5GMS System operator.\n7.\tThe 5GMS Application Provider provisions its DNS service with the CNAME record mapping its chosen host name alias to the canonical name of the 5GMS AS instance.\nNOTE 2:\tThe 5GMS Application Provider may leverage the DNS of the 5GMS System.\nWhen content is selected in the 5GMS-Aware Application:\n8.\tWhen Service Access Information retrieval at reference point M5 is used (see clause 4.7.2.3), the 5GMS Client in the UE retrieves the Service Access Information. This may include media entry point URLs within the streamAccess.entryPoints array. Otherwise, the 5GMS-Aware Application obtains this information via reference point M8.\n9.\tThe 5GMS Client in the UE selects one of the offered Media Entry Point URLs corresponding to the its media stream handling capabilities.\n10.\tThe 5GMS Client extracts the Fully-Qualified Domain Name (FQDN) from the chosen Media Entry Point URL and uses the DNS service to resolve its IP address, first resolving the domain name alias to the canonical domain name using the 5GMS Application Provider’s nominated DNS service, and then resolving the canonical domain name to the IP address(es) using the 5GMS System operator’s nominated DNS service.\n11.\tWhen establishing the TLS connection to the 5GMS AS at reference point M4, the Media Stream Handler in the UE cites the FQDN of the Media Entry Point URL in the Server Name Indication (SNI) field of the TLS Client Hello Message. The 5GMS AS uses the value of the SNI field to look up the corresponding Server Certificate and returns it to the Media Stream Handler in its Server Hello response.\nNOTE 3:\tIf the Server Certificate was provisioned with a wildcard Common Name, appropriate matching rules are followed by the 5GMS AS to identify the correct Server Certificate to present to the Media Stream Handler.\n12.\tThe 5GMS Client Validates the Server Certificate, including whether the value of the Common Name (or one of its Subject Alternative Names) matches the FQDN of the chosen Media Entry Point URL.\nWhen all server certificate validation steps are successfully passed, the following steps are executed\n13.\tThe 5GMS Client requests the resource identified by the Media Entry Point over the TLS connection established with the 5GMS AS at reference point M4.\n\n",
            "summary": "",
            "tables": [
                {
                    "description": "Table F.3-1: Example Content Hosting Configuration corresponding to\nReserve/Upload Server Certificate procedure",
                    "table number": 130,
                    "summary": "",
                    "name": ""
                },
                {
                    "description": "Listing F.3-1: Example DNS CNAME record to support distribution configuration in table F.3-1",
                    "table number": 131,
                    "summary": "",
                    "name": ""
                },
                {
                    "description": "",
                    "table number": 132,
                    "summary": "",
                    "name": ""
                }
            ],
            "figures_meta_data": [],
            "subsections": []
        }
    ]
}