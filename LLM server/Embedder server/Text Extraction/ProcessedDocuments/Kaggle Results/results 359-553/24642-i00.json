{
    "document_name": "24642-i00.docx",
    "content": [
        {
            "title": "Foreword",
            "description": "This Technical Specification has been produced by the 3rd Generation Partnership Project (3GPP).\nThe contents of the present document are subject to continuing work within the TSG and may change following formal TSG approval. Should the TSG modify the contents of the present document, it will be re-released by the TSG with an identifying change of release date and an increase in version number as follows:\nVersion x.y.z\nwhere:\nx\tthe first digit:\n1\tpresented to TSG for information;\n2\tpresented to TSG for approval;\n3\tor greater indicates TSG approved document under change control.\ny\tthe second digit is incremented for all changes of substance, i.e. technical enhancements, corrections, updates, etc.\nz\tthe third digit is incremented when editorial only changes have been incorporated in the document.\n",
            "summary": "",
            "tables": [],
            "figures_meta_data": [],
            "subsections": []
        },
        {
            "title": "1\tScope",
            "description": "The present document specifies the stage three Protocol Description of the Completion of Communications to Busy Subscriber (CCBS) service, the Completion of Communications on no Reply (CCNR) service, and Completion of Communications on not Logged-in (CCNL) service, based on stage one and two of the ISDN supplementary services. It provides the protocol details in the IP Multimedia (IM) Core Network (CN) subsystem based on the Session Initiation Protocol (SIP) and the Session Description Protocol (SDP).\nThe Completion of Communications to Busy Subscriber CCBS service enables user A, encountering a busy destination B, to have the communication  completed without having to make a new communication attempt when the destination B becomes not busy.\nThe Completion of Communications on No Reply CCNR supplementary service enables user A, encountering a destination B which does not answer the communication (No Reply), to have the communication completed without having to make a new communication attempt when the destination becomes not busy after having initiated an activity.\nThe Completion of Communications on Not Logged-in CCNL supplementary service enables user A, encountering a destination B which is not registered with the IMS network, to have the communication completed without having to make a new communication attempt when the destination becomes registered.\nThe present document is applicable to User Equipment (UE) and Application Servers (AS) which are intended to support the CCBS and CCNR supplementary services.\n",
            "summary": "",
            "tables": [],
            "figures_meta_data": [],
            "subsections": []
        },
        {
            "title": "2\tReferences",
            "description": "The following documents contain provisions which, through reference in this text, constitute provisions of the present document.\n-\tReferences are either specific (identified by date of publication, edition number, version number, etc.) or non-specific.\n-\tFor a specific reference, subsequent revisions do not apply.\n-\tFor a non-specific reference, the latest version applies. In the case of a reference to a 3GPP document (including a GSM document), a non-specific reference implicitly refers to the latest version of that document in the same Release as the present document.\n[1]\t3GPP TS 22.173: \"IP Multimedia Core Network Subsystem (IMS) Multimedia Telephony Service and supplementary services; Stage 1\".\n[2]\t3GPP TS 24.229: \"Internet Protocol (IP) multimedia call control protocol based on Session Initiation Protocol (SIP) and Session Description Protocol (SDP); Stage 3\".\n[3]\t3GPP TS 24.628: \"Common Basic Communication procedures using IP Multimedia (IM) Core Network (CN) subsystem; Protocol specification\".\n[4]\t3GPP TS 24.623: \"Extensible Markup Language (XML) Configuration Access Protocol (XCAP) over the Ut interface for Manipulating Supplementary Services\".\n[5]\tRFC 6910 (April 2013): \"Completion of Calls for the Session Initiation Protocol (SIP)\".\n[6]\tRFC 6665 (July 2012): \"SIP-Specific Event Notification\".\n[7]\t3GPP TS 24.238: \"Session Initiation Protocol (SIP) based user configuration\".\n[8]\tITU-T Recommendation I.221 (1993): \"Common specific characteristics of services\".\n[9]\tRFC 5875 (May 2010): \"An Extensible Markup Language (XML) Configuration Access Protocol (XCAP) Diff Event Package \".\n[10]\tIETF RFC 4825: \"The Extensible Markup Language (XML) Configuration Access Protocol (XCAP)\".\n[11]\tIETF RFC 3023: \"XML Media Types\".\n[12]\tIETF RFC 4483: \"A Mechanism for Content Indirection in Session Initiation Protocol (SIP) Messages\".\n[13]\tIETF RFC 3261: \"SIP: Session Initiation Protocol\".\n",
            "summary": "",
            "tables": [],
            "figures_meta_data": [],
            "subsections": []
        },
        {
            "title": "3\tDefinitions and abbreviations",
            "description": "",
            "summary": "",
            "tables": [],
            "figures_meta_data": [],
            "subsections": [
                {
                    "title": "3.1\tDefinitions",
                    "description": "",
                    "summary": "",
                    "text_content": "For the purposes of the present document, the terms and definitions given in 3GPP TS 22.173 [1] and the following terms and definitions apply.\nbusy: See ITU-T Recommendation I.221 [8], subclause 2.1.5.\ncall information retention: A procedure of network A to store the call information of a specific call so that it can be used for that call.\ncaller: The user who originated the call and to whom the CCBS service is provided.\ncallee: The user which is identified as destination B.\nCC: Completion of Communication\nCC busy: Any one of the following conditions will cause a CCBS busy condition:\n-\tmaximum number of calls reached at user A (see ITU-T Recommendation I.221 [8], subclause 2.1.3, item 2));\n-\tno resources (bandwidth) available at user A;\n-\tCC recall pending on user A.\nCC call: A call generated by the network connecting the caller to the callee, resulting from the callers' acceptance of a CC recall.\nCC recall: An indication informing the caller that the network is ready to initiate a CC call to the callee and that the network is awaiting a response to this indication.\nCC request: An instance of an activation of the CCBS/CCNR/CCNL service which is held in a queue pending the correct conditions for the CCBS/CCNR/CCNL service to be completed.\nSuspended CC request: A CC request which cannot be served even if the callee is in the appropriate state because the caller is busy.\nCC request retention: If an attempt to establish a CC call fails because the destination is busy again, then the network provider option \"CC request retention\" defines whether the CC supplementary service is continued or not, i.e. if the \"CC request retention\" is supported, the original CC request retains its position in the queue B, and monitoring of user B shall continue. Otherwise the CC request is revoked.\nCC service duration timer: A maximum time a CC service will remain activated for the caller within the network.\ndestination B: The entity addressed in the original call.\nlong-term denial: The network cannot accept user A's request to activate the CC service and a later attempt to activate the CC service for the same destination B will also be rejected.\nqueue A: A buffer at the originating side for the control of CC requests associated with the caller.\nqueue B: A buffer at the terminating side for the control of CC requests associated with destination B.\nretain option: The retain option, if supported in both the originating and destination network, will maintain the CC request in the destination B queue, if a CC call has failed due to destination busy condition.\nshort-term denial: The network temporarily cannot accept user A's request to activate the CC service. A later attempt to activate the CC service for the same destination B may succeed.\nUE-A: The caller’s UE.\nUE-B: The callee’s UE.\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "3.2\tAbbreviations",
                    "description": "",
                    "summary": "",
                    "text_content": "For the purposes of the present document, the following abbreviations apply:\nAOC\tAdvice Of Charge\nAS\tApplication Server\nCB\tCommunication Barring\nCC\tCompletion of Communications\nCCBS\tCompletion of Communications to Busy Subscriber\nCCNL\tCompletion of Communications on Not Logged-in\nCCNR\tCompletion of Communications on No Reply\nCD\tCommunication Deflection\nCDIV\tCall DIVersion\nCFB\tCommunication Forwarding Busy\nCFNL\tCommunication Forwarding on No Logged-in\nCFU\tCommunication Forwarding Unconditional\nCN\tCore Network\nCNR\tCompletion of communication on No Reply\nCONF\tCONFerence calling\nCS\tCircuit Switched\nCW\tCommunication Waiting\nECT\tExplicit Communication Transfer\nHOLD\tCommunication Hold\nIFC\tInitial Filter Criteria\nIM\tIP Multimedia\nIMS\tIP Multimedia Subsystem\nIP\tInternet Protocol\nISDN\tIntegrated Service Data Network\nMCID\tMalicious Communication IDentification\nMiD\tMulti-iDentity\nMIME\tMultipurpose Internet Mail Extensions\nMuD\tMulti-Device\nOIP\tOriginating Identification Presentation\nOIR\tOriginating Identification Restriction\nPLMN\t   Network\nN\tPublic Switch Telephone Network\nSIP\tSession Initiation Protocol\nTIP\tTerminating Identification Presentation\nTIR\tTerminating Identification Restriction\nUE\tUser Equipment\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                }
            ]
        },
        {
            "title": "4\tCompletion of Communications to Busy Subscriber (CCBS), Completion of Communications on No Reply (CCNR) and Completion of Communications on Not Logged-in (CCNL)",
            "description": "",
            "summary": "",
            "tables": [],
            "figures_meta_data": [],
            "subsections": [
                {
                    "title": "4.1\tIntroduction",
                    "description": "",
                    "summary": "",
                    "text_content": "The CCBS, CCNR and CCNL services enable a user, encountering a destination that is busy, does not answer or is not logged-in, to have the communication completed at a later point in time without the user having to manually initiate a new communication attempt.\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "4.2\tDescription",
                    "description": "",
                    "summary": "",
                    "text_content": "",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": [
                        {
                            "title": "4.2.1\tGeneral description",
                            "text_content": "The CCBS service enables user A, encountering a busy destination B, to have the communication completed without the user having to manually initiate a new communication attempt when the destination B becomes not busy.\nWhen user A requests the CCBS supplementary service, the network will monitor for destination B becoming free again.\nWhen destination B becomes free again, the network will wait a short time in order to allow the resources to be re-used for originating a communication. If the resources are not re-used by destination B within this time, the network will automatically recall user A.\nWhen user A accepts the CC recall, the network will automatically generate a CC call to destination B.\nThe CCNR supplementary service enables user A, encountering a destination B which does not answer the communication (No Reply), to have the communication completed without the user having to manually initiate a new communication attempt when the destination becomes not busy after having initiated and completed a new communication.\nWhen user A encounters a destination B which does not answer the communication (No Reply), user A can request the CCNR supplementary service.\nWhen user A requests the CCNR supplementary service, the network will monitor for destination B becoming not busy after having initiated and completed a new communication.\nWhen destination B becomes not busy after having initiated and completed a new communication, the network will wait a short time (as defined by the destination B idle guard timer) in order to allow the resources to be reused for originating a communication. If the resources are not reused by destination B within this time, the network will automatically recall user A.\nWhen user A accepts the CC recall, then the network will automatically generate a CC call to destination B.\nThe CCNL supplementary service enables user A, encountering a destination B which is not registered with the IMS network (Not Logged-in), to have the communication completed without the user having to manually initiate a new communication attempt when the destination becomes logged in.\nWhen user A encounters a destination B which is not registered with the IMS network (Not Logged-in), user A can request the CCNL supplementary service.\nWhen user A requests the CCNL supplementary service, the network will monitor for destination B becoming registered.\nWhen destination B becomes registered, the network will wait a short time (as defined by the destination B idle guard timer) in order to allow the resources to be used for originating a communication. If the resources are not used by destination B within this time, the network will automatically recall user A.\nWhen user A accepts the CC recall, then the network will automatically generate a CC call to destination B.\nThe CCBS, CCNR and CCNL service control is done by the application servers. It is possible to modify the queue by the users (add entry, delete entries, delete whole queue) by usage of appropriate procedures.\nOn the originating side the originating AS A manages the queue of user A and on terminating side the terminating AS B manages the queue of outstanding communications towards UE B.\nThe originating AS keeps track of the CC requests started by each user for a given period of time, and rejects a new request in case the provisioned limit has been overcome.\nThe terminating AS keeps track of the CC requests directed to each user for a given period of time, and rejects a new request in case the provisioned limit has been overcome.\nAfter successful CC Call setup the respective entry is deleted in both queues. Also a proper management of the queue in the suspend/resume scenario upon reception of the corresponding message takes place.\n",
                            "figures_meta_data": [],
                            "tables": []
                        }
                    ]
                },
                {
                    "title": "4.3\tOperational requirements",
                    "description": "",
                    "summary": "",
                    "text_content": "",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": [
                        {
                            "title": "4.3.1\tProvision/withdrawal",
                            "text_content": "The CCBS, CCNR and CCNL services are provided to the served user after prior arrangement with the service provider, or as a service provider option. Withdrawal of these services is made on the served user's request or for service provider reasons.\n",
                            "figures_meta_data": [],
                            "tables": []
                        }
                    ]
                },
                {
                    "title": "4.4\tCoding requirements",
                    "description": "",
                    "summary": "",
                    "text_content": "No specific requirements needed.\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "4.5\tSignalling requirements",
                    "description": "",
                    "summary": "",
                    "text_content": "",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": [
                        {
                            "title": "4.5.1\tActivation/deactivation",
                            "text_content": "The call completion services are individually activated at provisioning or at the subscriber's request.\nThe call completion services are individually deactivated at withdrawal or at the subscriber's request.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "4.5.2\tRegistration/erasure",
                            "text_content": "The CCBS, CCNR and CCNL services require no registration. Erasure is not applicable.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "4.5.3\tInterrogation",
                            "text_content": "For the interrogation of the call-completion services the Ut interface using XCAP as enabling protocol as described in 3GPP TS 24.623 [4] or SIP based user configuration as described in 3GPP TS 24.238 [7] in combination with announcement procedures according to 3GPP TS 24.628 [3] could be used.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "4.5.4\tInvocation and operation",
                            "text_content": "Basic call procedures and in case of a call-completion recall initiated by a REFER request, normal REFER method handling procedures according to 3GPP TS 24.229 [2] shall apply.\nWhen the UE receives a SIP final response to the SIP INVITE request and the SIP response contains\na)\ta Date header field; and\nb)\ta MIME body of the message/external-body MIME type as specified in IETF RFC 4483 [12] with:\n1.\t\"access-type\" MIME type parameter containing \"URL\";\n2.\t\"URL\" MIME type parameter containing an HTTP URI identifying an element <cc-entry> stored in the XML document of the \"users\" tree of the communication completion request records XCAP application usage and the element <cc-entry> is identified by attribute selector using the \"id\" attribute; and\n3.\t\"expiration\" MIME type parameter;\nthen the UE should use this information to inform the user that:\na)\tif the date and time in the \"expiration\" MIME type parameter is later than the date and time of the Date header field, then the communication attempt has led to a communication completion invocation; and\nb)\tif the date and time in the \"expiration\" MIME type parameter is equal to or earlier than the date and time of the Date header field, then the communication attempt has led to a communication completion revocation.\nFor invoking of the call completion services, announcement procedures according to 3GPP TS 24.628 [3] and inband-interaction procedures should be used. For revoking the call completions services SIP based user configuration as described in 3GPP TS 24.238 [7] may be used.\nNOTE:\tOther methods for revoking outstanding CC requests such as web based methods are outside the scope of the present document, but are not precluded.\nEditor's note: The usage of inband interaction procedures needs further studies and specification. For invoking and revoking of the call-completion services also out-of-band stimulus procedures according to ETSI TR 183 057 [4] could be used.\nThe originating AS shall operate as a SIP proxy as specified in subclause 5.7.4 of 3GPP TS 24.229 [2] or operate as a routing B2BUA as specified in subclause 5.7.5 of 3GPP TS 24.229 [2] for the incoming INVITE request and all future requests and responses in the same dialog.\n4.5.4.2.1.1\tNormal procedures\n4.5.4.2.1.1.1\tDetecting if CC is possible\nWhen in case of CCNL a 480 (Temporarily Unavailable) response has been received from the terminating network, and the following set of conditions apply:\n-\tthe 480 (Temporarily Unavailable) response contains an Call-Info header field with a \"purpose\" header field parameter set to \"call-completion\"; and\n-\tthe user A CCNL queue limit has not been exceeded; and\n-\tCCNL has not been activated for an identical communication (network option), determined by the stored basic communication information defined in subclause 4.5.4.2.1.1.2; and\n-\tthere are no service interactions that preclude CCNL;\nthen the service retention procedure as specified in subclause 4.5.4.2.1.1.2 is executed.\nWhen in case of CCBS a 486 (Busy Here) response has been received from the terminating network, and the following set of conditions apply:\n-\tthe 486 (Busy Here) response contains a Call-Info header field with a \"purpose\" header field parameter set to \"call-completion\"; and\n-\tthe user A CCBS queue limit has not been exceeded; and\n-\tCCBS has not been activated for an identical communication (network option), determined by the stored basic communication information defined in subclause 4.5.4.2.1.1.2; and\n-\tthere are no service interactions that preclude CCBS;\nthen the service retention procedure as specified in subclause 4.5.4.2.1.1.2 is executed.\nWhen in case of CCNR a 180 (Ringing) response has been received from the terminating network, and the following set of conditions apply:\n-\tthe 180 (Ringing) response contains a Call-Info header with a purpose parameter set to 'call-completion'; and\n-\tthe user A CCNR queue limit has not been exceeded; and\n-\tCCNR has not been invoked for an identical communication (network option), determined by the stored basic communication information defined in subclause 4.5.4.2.1.1.2; and\n-\tthere are no service interactions that preclude CCNR,\nthen the originating AS shall remove the Call-Info header from the 180 (Ringing) response, forward it to UE-A and start the CC no-reply timer CCNR-T5. When this timer expires then the service retention procedure as specified in subclause 4.5.4.2.1.1.2 is executed.\n4.5.4.2.1.1.2\tStarting of the service retention procedure\nThe originating AS shall start the retention timer CC-T1. The originating AS shall retain the following information from the original communication, if available:\n1)\tSDP offer, and\n2)\tRequest-URI, and\n3)\tTo header field, and\n4)\tFrom header field, and\n5)\tPrivacy header field, and\n6)\tP-Asserted-ID header field, and\n7)\tthe Resource-Priority header field.\n4.5.4.2.1.1.3\tCC service invocation by user A\nFor the invocation of the CC service, in case of CCNL immediately after receipt of a 480 (Temporarily Unavailable) response with a CCNL possible indication or in case of CCBS immediately after receipt of a 486 (Busy Here) response with a CCBS possible indication or in case of CCNR after receipt of a 180 (Ringing) response with a CCNR possible indication upon expiry of the No-Reply timer CCNR-T5, the originating AS shall provide an announcement that CC is possible to user A, according to 3GPP TS 24.628 [3], followed by inband-interaction procedures for the activation confirmation.\nNOTE:\tUser A can have a limited number of CC requests outstanding. This limit is a network provider option (with a maximum value of 5).\nIf user A does not confirm the activation of CC, the AS shall restore the communication condition from before the announcement and proceed with basic communication procedures by forwarding the 480 (Temporarily Unavailable) response in case of CCNL the 486 (Busy here) response in case of CCBS or sending a 199 (Early Dialog Terminated) on the announcement dialog in case of CCNR.\n4.5.4.2.1.1.4\tStopping of the service retention procedure\nOn receiving a CC invocation confirmation from user A before the expiry of the retention timer CC-T1, the originating AS shall:\na)\tstop the retention timer CC-T1; and\nb)\tstore the retained call information from the original basic communication.\nAs a network option, in case of receipt of a CCNR invocation confirmation, the originating AS may terminate the original communication by sending a CANCEL request to UE-B, in accordance with the procedures described in 3GPP TS 24.229 [2].\nNOTE:\tThe above procedure avoids a race condition between answering the call at the terminating side and subscribing to CCNR at the originating side.\n4.5.4.2.1.1.5\tSending of the CC invocation request to the terminating AS\nThe originating AS shall send a SUBSCRIBE request to the terminating AS according to RFC 6665 [6] and RFC 6910 [5]. The originating AS shall populate the SUBSCRIBE request as follows:\n-\ta Request-URI set to the URI returned by the terminating AS in the Call-Info header field of the response including the CC possible indication\n-\tin case of CCNL as received in the Call-Info header field in the 480 (Temporarily Unavailable) response, including an \"m\" SIP URI parameter with a value set to \"NL\";\n-\tin case of CCBS as received in the Call-Info header field in the 486 (Busy Here) response, including an \"m\" SIP URI parameter with a value set to \"BS\";\n-\tin case of CCNR as received in the Call-Info header in the 180 (Ringing) response, including an \"m\" SIP URI parameter with a value set to \"NR\";\n-\ta From header field set to the URI of UE-A from the original communication;\n-\ta To header field set to the URI of UE-B from the original communication;\n-\ta Contact header field set to the URI of the originating AS;\n-\ta Call-Info header field with the URI of UE-A from the P-Asserted-Identity, a \"purpose\" header field parameter set to \"call-completion\", and an m-parameter set to \"BS\" in case of CCBS or \"NR\" in case of CCNR or \"NL\" in case of CCNL;\n-\ta P-Asserted-Identity header field as received from the original INVITE request;\nNOTE 1:\tIf available and to avoid interworking problems (e.g. if the called user is in the PSTN) a P-Asserted-Identity header field that contains an E.164 number is preferable.\n-\tan Expires header field set to at least the initial value of the service duration timer CC-T3; and\n-\ta Resource-Priority header field from the original communication, if available.\nThe originating AS shall start the CC request timer CC-T2.\nNOTE 2:\tThe To header field is used to identify a particular CC target.\n4.5.4.2.1.1.6\tProcedures after CC invocation confirmation from the terminating AS\nIf the originating AS receives a NOTIFY request as an answer to an outstanding CC request which was described in subclause 4.5.4.2.1.1.5 with the cc-state parameter set to 'queued', the originating AS shall:\na)\tstop the CC request timer CC-T2;\nb)\tstart the CC service duration timer CC-T3;\nc)\tstore the information whether the cc-service-retention parameter has been received or not; and\nd)\tconfirm to the caller that the invocation was successful, using announcement procedures according to 3GPP TS 24.628 [3].\nIn case of CCNL the originating AS shall forward the 480 (Temporarily Unavailable) response to UE-A.\nIn case of CCBS the originating AS shall forward the 486 (Busy Here) response to UE-A.\nIn case of CCNR, if the original communication with the UE-B has already been cancelled by the originating AS, the originating AS shall send a 480 (Temporarily Unavailable) response to UE-A.\nThe originating AS shall include in the SIP 486 (Busy Here) response or the SIP 480 (Temporarily unavailable) response:\na)\ta Date header field containing the current date and time; and\nNOTE:\tTo function correctly the Date header field cannot be removed from SIP response to SIP INVITE request by an IBCF between originating P-CSCF and originating S-CSCF\nb)\tan message/external-body MIME type as specified in IETF RFC 4483 [12] with:\n1.\t\"access-type\" MIME type parameter containing \"URL\"; and\n2.\t\"URL\" MIME type parameter containing an HTTP URI identifying an element <cc-entry>\ni)\trepresenting the new communication completion request;\nii)\tstored in the XML document of the \"users\" tree of the communication completion request records XCAP application usage; and\niii)\tidentified by attribute selector using the \"id\" attribute;\n3.\t\"expiration\" MIME type parameter containing the date and time of the communication completion request expiration.\n4.5.4.2.1.2\tExceptional procedures\nIf the originating AS receives a 480 (Temporarily Unavailable) response (short term denial) or a 403 (Forbidden) response (long term denial), in accordance with the procedures of subclause 4.5.4.3.2.2, to an outstanding CC request which was described in subclause 4.5.2.2.1.1.5, then the originating AS shall:\na)\tstop the CC request timer CC-T2; and\nb)\tconfirm to the caller that the invocation was not successful, using announcement procedures according to 3GPP TS 24.628 [3].\nIn case of CCNL the originating AS shall forward the 480 (Temporarily Unavailable) response to UE-A.\nIn case of CCBS the originating AS shall forward the 486 (Busy Here) response to UE-A.\n4.5.4.2.2.1\tNormal procedures\n4.5.4.2.2.1.1\tGenerating a revocation request\nFor revoking the CC service, the originating AS shall send a SUBSCRIBE request to the terminating AS according to RFC 6665 [6] and RFC 6910 [5] in the SUBSCRIBE dialog. The originating AS shall populate the SUBSCRIBE request following normal procedures as specified in 3GPP TS 24.229 [2] with the following additions:\n-\ta Call-Info header field with the URI of UE-A from the P-Asserted-Identity, a \"purpose\" header field parameter set to \"call-completion\", and an m-parameter set to \"BS\" in case of CCBS or \"NR\" in case of CCNR or \"NL\" in case of CCNL;\n-\ta P-Asserted-Identity header field as received from the original INVITE request;\nNOTE:\tIf available and to avoid interworking problems (e.g. if the called user is in the PSTN) a P-Asserted-Identity header field that contains an E.164 number is preferable.\nand\n-\tan Expires header field set to zero.\n4.5.4.2.2.1.2\tRevocation requested by the user\nIf the originating AS receives a revocation request by the user, the originating AS shall\n-\tconstruct a SUBSCRIBE request according to subclause 4.5.4.2.2.1.1; and\n-\tsend the SUBSCRIBE request to the terminating AS; and\n-\tinform user A of the result of the revocation by using announcement procedures and inband-interaction procedures according to 3GPP TS 24.628 [3].\nThe originating AS shall include in the SIP final response to the revocation request:\na)\ta Date header field containing the current date and time; and\nNOTE:\tTo function correctly the Date header field cannot be removed from SIP response to SIP INVITE request by an IBCF between originating P-CSCF and originating S-CSCF\nb)\tan message/external-body MIME type as specified in IETF RFC 4483 [12] with:\n1.\t\"access-type\" MIME type parameter containing \"URL\"; and\n2.\t\"URL\" MIME type parameter containing an HTTP URI identifying an element <cc-entry>\ni)\trepresenting the communication completion request being revoked;\nii)\tstored in the XML document of the \"users\" tree of the communication completion request records XCAP application usage; and\niii)\tidentified by attribute selector using the \"id\" attribute;\n3.\t\"expiration\" MIME type parameter containing the date and time of the communication completion request revocation.\n4.5.4.2.2.1.3\tRevocation caused by timer expiry\nIf the service-duration timer CC-T3 or the CC recall timer CC-T4 expires, the originating AS shall:\n-\tconstruct a SUBSCRIBE request according to subclause 4.5.4.2.2.1.1; and\n-\tsend the SUBSCRIBE request to the terminating AS.\n4.5.4.2.2.2\tExceptional procedures\nThe originating AS shall be prepared to receive a NOTIFY request caused by a service-duration timer expiry at the terminating AS, according to the procedures of subclause 4.5.4.3.3.2, with:\n-\tthe Subscription-State header field set to \"terminated\"; and\n-\tthe \"reason\" Subscription-State header field parameter set to \"noresource\".\nIn this case the originating AS shall stop the CC service-duration timer CC-T3, if this timer is still running.\n4.5.4.2.3.1\tNormal procedures\nOn receipt of a CC recall notification as described in subclause 4.5.4.3.4.1.2, and if user A is neither busy nor CC busy, the originating AS shall initiate the CC recall to user A by sending a REFER request to UE-A according to 3GPP TS 24.229 [2], and shall start the recall timer CC-T4. The originating AS shall populate the REFER request as follows:\n-\ta Request-URI set to the URI of UE-A from the original communication, including an \"m\" SIP URI parameter with a value set to \"NL\" in case of CCNL or \"BS\" in case of CCBS or \"NR\" in case of CCNR; and\n-\ta Refer-to header set to the URI of UE-B, including an \"m\" SIP URI parameter set to the same value as in the Request-URI.\nIf there are multiple outstanding CC requests at the originating AS, then the correct target for the CC recall is identified using standard SIP dialog identification procedures.\nIn the case UE-A does not support the REFER method extension, the special REFER request handling procedures according to 3GPP TS 24.628 [3] should be used. As a network option, e.g. in the case the originating AS has knowledge that UE-A does not support the REFER method extension, the originating AS may start the 3rd party call control procedures according to 3GPP TS 24.628 [3] without waiting for a 3xx – 6xx response. In this case, the originating AS shall send an INVITE request with a Request-URI set to the URI of UE-A from the original communication, including a \"m\" SIP URI parameter with a value set to \"NL\" in case of CCNL or \"BS\" in case of CCBS or \"NR\" in case of CCNR. The INVITE request shall include:\n-\ta Call-Info header field with the URI of UE-A from the From header field in the original communication, a \"purpose\" header field parameter set to \"call-completion \", and an m-parameter set to \"NL\" in case of CCNL or \"BS\" in case of CCBS or \"NR\" in case of CCNR ; and\n-\tidentity information about user B in the From header field as received in the To header field of the original request. Other identity information may be included if allowed by the Privacy settings in the response of the original communication.\nIf user A accepts the recall before the CC recall timer expires (a NOTIFY request with a body containing SIP/2.0 100 Trying or a 200 OK to the 3pcc INVITE request according to the special REFER request handling procedures according to 3GPP TS 24.628 [3] is received), the originating AS shall stop timer CC-T4 and initiate the CC call to destination B by sending an INVITE request, in accordance with RFC 6910 [5]. The originating AS shall populate the INVITE request as follows.\n-\ta Request-URI set to the URI of UE-B from the original communication, including an \"m\" SIP URI parameter\n-\tset to \"NL\" in case of CCNL; or\n-\tset to \"BS\" in case of CCBS; or\n-\tset to \"NR\" in case of CCNR;\n-\ta From header field set to the URI of UE-A from the original communication;\n-\ta To header field set to the URI of UE-B from the original communication;\n-\ta Call-Info header field with the URI of UE-A from the P-Asserted-Identity in the original communication, a \"purpose\" header field parameter set to \"call-completion\", and an m-parameter set to \"NL\" in case of CCNL or \"BS\" in case of CCBS or \"NR\" in case of CCNR; and\n-\ta Resource-Priority header field from the original communication, if saved.\n4.5.4.2.3.2\tExceptional procedures\n4.5.4.2.3.2.1\tNon-acceptance of CC recall\nIf user A does not accept the CC recall or the CC recall timer CC-T4 expires, the originating AS shall perform the procedures in subclause 4.5.4.2.2.1.1.\n4.5.4.2.3.2.2\tUser A is found not available\nIf the caller is not available for the recall when a CC recall notification as described in subclause 4.5.4.3.4.1.2 has been received, then the originating AS shall suspend the CC request until the caller becomes available again. The originating AS shall send a PUBLISH request to the terminating AS according to RFC 6910 [5] in the existing SUBSCRIBE dialog. The originating AS shall populate the PUBLISH request as following normal procedures as specified in 3GPP TS 24.229 [2] with the following additions:\n-\ta Request-URI set to the contact address of the terminating AS returned by the terminating AS when the SUBSCRIBE dialog was created;\n-\ta Call-Info header field with the URI of UE-A from the P-Asserted-Identity in the original communication, a \"purpose\" header field parameter set to \"call-completion\", and an m-parameter set to \"BS\" in case of CCBS or \"NR\" in case of CCNR or \"NL\" in case of CCNL;\n-\ta P-Asserted-Identity header field as received from the original INVITE request;\nNOTE 1:\tIf available and to avoid interworking problems (e.g. if the called user is in the PSTN) a P-Asserted-Identity header field that contains an E.164 number is preferable.\n-\tan Expires header field set to the current value of the remaining duration of the subscription; and\n-\ta body set to a PIDF informing about the basic state 'closed' for the caller's identity as presentity.\nWhen the originating AS has received an indication that the caller is available again for the recall, then the originating AS shall resume the CC request. The originating AS shall send a PUBLISH request to the terminating AS according to RFC 6910 [5] in the existing SUBSCRIBE dialog. The originating AS shall populate the PUBLISH request as following normal procedures as specified in 3GPP TS 24.229 [2] with the following additions:\n-\ta Request-URI set to the contact address of the terminating AS returned by the terminating AS when the SUBSCRIBE dialog was created;\n-\ta To header field shall contain the URI of UE-B from the original communication;\n-\ta Call-Info header field with the URI of UE-A from the P-Asserted-Identity in the original communication, a \"purpose\" header field parameter set to \"call-completion\", and an m-parameter set to \"BS\" in case of CCBS or \"NR\" in case of CCNR or \"NL\" in case of CCNL;\n-\ta P-Asserted-Identity header field as received from the original INVITE request;\nNOTE 2:\tIf available and to avoid interworking problems (e.g. if the called user is in the PSTN) a P-Asserted-Identity header field that contains an E.164 number is preferable.\n-\tan Expires header field set to the current value of the remaining duration of the subscription; and\n-\ta body set to a PIDF informing about the basic state 'open' for the caller’s identity as presentity.\nIn case the originating AS has sent several suspension requests to different terminating ASs and the AS has received an indication that the caller is available again, the originating AS shall resume each suspended request.\n4.5.4.2.3.2.3\tThe caller makes another call to the same destination B\nIf the caller initiates another communication to the same destination B and activates the same CC service (CCNL or CCBS or CCNR) again, then:\n-\tif the two communications are identical, then the following network provider options exist:\n1)\tthe originating AS shall retain the original request with the current request being discarded and inform the caller that the request has not been accepted because a CC request had already been stored against the requested destination B; or\n2)\tthe originating AS shall treat this as a new CC request; and\n-\tif the two calls are not identical, then the originating AS shall treat this as a new CC request. In order to decide that the two calls are identical, the originating AS shall only compare the basic communication information, i.e. the SDP offer, the destination selection information, and calling user identity (if any).\nNOTE:\tIt is a network provider option which information is used to identify identical communications.\n4.5.4.2.3.2.4\tCC call failure\nIf the CC call fails, the originating AS shall inform the caller as for the basic communication procedures.\nIf CC is possible (a received 180 (Ringing) or 486 (Busy Here) or 480 (Temporarily Unavailable) response contains a Call-Info header field with a purpose parameter set to \"call-completion\"), two possibilities exist:\n-\tif the retain option is supported across the networks (the originating AS has received a cc-service-retention parameter in the NOTIFY request described in subclause 4.5.4.3.2.1), the originating AS shall keep the transaction resources and shall not restart the service duration timer CC-T3. If the caller attempts to activate CC again, the originating AS shall treat this as described in subclause 4.5.4.2.3.2.3.\n-\tif the retain option is not supported across the networks, the originating AS shall release the transaction resources. The originating AS shall deactivate the CC request and shall inform the caller accordingly.\nIf CC is not possible (a received 180 (Ringing) or 486 (Busy Here) or 480 (Temporarily Unavailable) response does not contain a Call-Info header field with a purpose parameter set to 'call-completion'), the originating AS shall deactivate the CC request according to the procedures described in subclause 4.5.4.2.2 and shall inform the caller accordingly.\nThe terminating AS shall operate as a SIP proxy as specified in subclause 5.7.4 of 3GPP TS 24.229 [2] or operate as a routing B2BUA as specified in subclause 5.7.5 of 3GPP TS 24.229 [2] for the incoming INVITE request and all future requests and responses in the same dialog.\n4.5.4.3.1.1\tNormal operation\nWhen on an incoming communication the terminating AS supports the CCNR service, then the terminating AS shall insert a Call-Info header field with either the URI of the terminating AS or the URI received in the original INVITE request, a purpose-parameter set to 'call-completion', and an m-parameter set to 'NR' in the 180 (Ringing) response forwarded by the AS to indicate whether CCNR is possible or not, in accordance with RFC 6910 [5].\nWhen on an incoming communication the callee is found to be busy and the terminating AS supports the CCBS service, then the terminating AS shall insert a Call-Info header field with either the URI of the terminating AS or the URI received in the original INVITE request, a \"purpose\" header field parameter set to \"call-completion\", and an m-parameter set to \"BS\" in the 486 (Busy Here) response generated by the terminating AS (in case of 'network determined user busy') or forwarded by the terminating AS (in case of 'user determined user busy') to indicate whether CCBS is possible or not, in accordance with RFC 6910 [5].\nWhen on a incoming communication the callee is found to be not registered and the terminating AS supports the CCNL service, then the terminating AS shall insert a Call-Info header field with either the URI of the terminating AS or the URI received in the original INVITE request, a \"purpose\" header field parameter set to \"call-completion\", and a m-parameter set to \"NL\" in the 480 (Temporarily Unavailable) response generated by the terminating AS to indicate whether CCNL is possible or not, in accordance with RFC 6910 [5].\nIf the terminating AS knows that the CC is not possible on destination B, the terminating AS shall not include a Call-Info header field with a \"purpose\" header field parameter set to \"call-completion\" in any response sent to the originating side.\n4.5.4.3.1.2\tExceptional procedures\nNot applicable\n4.5.4.3.2.1\tNormal operation\nSeveral CC requests can be queued against one destination B in the destination B CC queue (queue B). The exact size of queue B (from 1 to 5 entries) is a destination network operator option.\nAs a network option the destination network operator can reduce the sizes of the CC queues associated with individual users. The reduced size can be zero. The size of the CCBS queue can also be related to the size of the CCNR queue if existing.\nOn receipt of a CC invocation request as described in subclause 4.5.4.2.1.1.5, the terminating AS shall:\na)\tacknowledge the receipt of the SUBSCRIBE request in accordance with RFC 6665 [6].\nb)\tcheck if the Request-URI of the SUBSCRIBE request is available for the requested CC service; if there is no match, the terminating AS shall check if the URI in the To header field of the SUBSCRIBE request is available for the requested CC service; if it is available, the terminating AS shall store the information received in the CC invocation request in the destination B queue and send a NOTIFY request to the originating AS according to RFC 6910 [5]. The terminating AS shall populate the NOTIFY request as follows:\n-\ta Request-URI set to the URI of the originating AS as received in the Contact header field of the SUBSCRIBE request;\n-\ta To header field set to the URI of UE-A as received in the From header field of the SUBSCRIBE request;\n-\ta From header field set to the URI of UE-B as received in the To header field of the SUBSCRIBE request;\n-\ta Subscription-State header field set to \"active\";\n-\tthe \"expires\" Subscription-State header field parameter set to the current value of the subscription duration;\n-\ta body set to a cc-state parameter set to 'queued'; and\n-\tif the retain option is supported at the terminating AS, a cc-service-retention parameter in the same body;\nc)\tstart the service duration timer CC-T7; and\nd)\tmonitor destination B\n-\tin case of CCNL for becoming registered; or\n-\tin case of CCBS for becoming not busy; or\n-\tin case of CCNR for becoming not busy after having initiated an activity.\nNOTE:\tMethods for monitoring the callee for becoming not busy are a network provider implementation option.\n4.5.4.3.2.2\tExceptional procedures\nWhen the invocation of the requested CC service is rejected by the terminating AS, in accordance with RFC 6910 [5] the terminating AS shall send a 480 (Temporarily Unavailable) response (short term denial) or a 403 (Forbidden) response (long term denial), in the following cases:\n-\tif there are already the maximum number of requests queued against destination B;\n-\tif there is an interaction with other services which prevents the invocation of the requested CC service;\n-\tif the URI in the To header field of the SUBSCRIBE request is not available for the requested CC service at destination B.\nIf the callee is registered when the CCNL invocation request arrives, the terminating AS shall apply the normal CC invocation procedures as described in subclause 4.5.4.3.2.1.\nIf the callee is no longer busy when the CCBS invocation request arrives, the terminating AS shall apply the normal CC invocation procedures as described in subclause 4.5.4.3.2.1.\nIf the callee has answered the communication when the CCNR invocation request arrives, the terminating AS shall apply the normal CC revocation procedures as described in subclause 4.5.4.3.3.1.\nNOTE:\tA general error, e. g. a syntax error, or a non-compliance to the call-completion event-package, is answered according to the procedures described in RFC 6665 [6].\n4.5.4.3.3.1\tNormal operation\nOn receipt of a CC revocation request as described in subclause 4.5.4.2.2.1.1, the terminating AS shall delete the CC request from the destination B queue and send a NOTIFY request to the originating AS according to RFC 6665 [6] and RFC 6910 [5]. The terminating AS shall populate the NOTIFY request as follows:\n-\ta Request-URI set to the URI of the originating AS as received in the Contact header field of the SUBSCRIBE request;\n-\ta To header field set to the URI of UE-A as received in the From header field of the SUBSCRIBE request;\n-\ta From header field set to the URI of UE-B as received in the To header field of the SUBSCRIBE request;\n-\ta Subscription-State header field set to \"terminated\"; and\n-\tthe \"reason\" Subscription-State header field parameter set to 'timeout'.\n4.5.4.3.3.2\tExceptional procedures\nThe terminating AS shall automatically revoke a particular request for the CC service if the CC service duration timer CC-T7 expires. If timer CC-T7 expires, the terminating AS shall send a NOTIFY request to the originating AS as described in subclause 4.5.4.3.3.1 with the \"reason\" Subscription-State header field parameter set to 'noresource'.\n4.5.4.3.4.1\tNormal operation\n4.5.4.3.4.1.1\tThe callee becomes available\nWhen the callee becomes registered or not busy, then the terminating AS shall check queue B:\na)\tif there is an entry in the queue currently being processed, the terminating AS shall take no further action;\nb)\totherwise, the terminating AS shall examine the entries in the queue:\nc)\tif an entry is suspended, the terminating AS shall take another entry; and\nd)\tif an entry is not suspended, the terminating AS shall select it for the CC recall.\nNOTE:\tThe algorithm for the order addressing entries in the queue is outside the scope of this document. It needs not to be the order of creation of the queue entries.\nThe terminating AS shall start the destination B idle guard timer CC-T8. When the destination B idle guard timer CC-T8 expires, the terminating AS shall process the selected CC request.\n4.5.4.3.4.1.2\tThe CC recall is started\nWhen processing a CC request, provided that the callee is still available, the terminating AS shall start the CC recall procedure.\nThe CC recall procedure is defined as follows:\n-\tthe terminating AS shall send a NOTIFY request to the originating AS according to RFC 6910 [5]. The terminating AS shall populate the NOTIFY request as follows:\n-\ta Request-URI set to the URI of the originating AS as received in the Contact header field of the SUBSCRIBE request\n-\ta To header field set to the URI of UE-A as received in the From header field of the SUBSCRIBE request;\n-\ta From header field set to the URI of UE-B as received in the To header field of the SUBSCRIBE request;\n-\ta Subscription-State header field set to \"active\";\n-\tthe \"expires\" Subscription-State header field parameter set to the remaining duration of the subscription;\n-\ta body set to a cc-state parameter set to 'ready'; and\n-\tthe terminating AS shall start the CC recall timer CC-T9.\n4.5.4.3.4.1.3\tIncoming communication during the CC recall processing\nIf the terminating AS receives an INVITE request while a CC recall is processed, the terminating AS shall check whether this new incoming communication includes a CC call indicator (an \"m\" SIP URI parameter is added to the Request-URI, or a Call-Info header field exists and includes an \"m\" header parameter).\nNOTE:\tThe value of the \"m\" SIP URI parameter and \"m\" header parameter does not necessary correspond to the invoked CC service.\nIf the INVITE request includes a CC Call indicator, the terminating AS offer the incoming communication to the callee.\nIf the INVITE request does not include a CC call indicator, the terminating AS shall reject the incoming communication by generating a 486 (Busy Here) response which includes a CC possible indication, according to the normal CC possible indication procedures described in subclause 4.5.4.3.1.1.\n4.5.4.3.4.1.4\tProcedures after the CC call was offered to the callee\nWhen the terminating AS has sent a 183 (Session Progress) response, a 180 (Ringing) response or a 200 (OK) response, it shall:\n-\tstop the timers CC-T7 and CC-T9;\n-\tdelete the CC request from the destination B queue\n-\tsend a CC revocation notification as described in subclause 4.5.4.3.3.2 to the originating AS; and\n-\tif there are further CC requests to be processed, then check whether the callee is busy:\n-\tif the callee is busy, the terminating AS shall take no further action; or\n-\tif the callee is not busy, the terminating AS shall service the queue for destination B as described above.\n4.5.4.3.4.1.5\tFurther procedures\nIf the originating AS resumes a CC request according to the procedures describe in subclause 4.5.4.2.3.2.2 because user A has become free (i.e. not busy and not CC busy), then, if the callee is available and there is no entry in the CC queue which is currently being processed, the terminating AS shall service the destination B queue as described above.\nIf the originating AS suspends a CC request according to the procedures describe in subclause 4.5.4.2.3.2.2, the terminating AS shall:\n-\tstop timer CC-T9; and\n-\tsend a NOTIFY request to the originating AS, including a body with a cc-state parameter set to 'queued'; and\n-\tattempt to process another CC request in the same queue.\nIf the originating AS revokes a CC request according to the procedures described in subclause 4.5.4.2.2.1.1, the terminating AS shall stop timers CC-T7 and CC-T9 and attempt to process another CC request in the same queue.\n4.5.4.3.4.2\tExceptional procedures\na)\tThe callee is busy when destination B idle guard timer expires:\nIf, upon expiry of the destination B idle guard timer CC-T8, the callee is busy (e.g. the callee has initiated an outgoing communication), then the terminating AS shall defer servicing of the destination B CC queue until the callee becomes not busy again.\nb) The terminating AS receives a \"ready\" notification while processing the destination B CC queue:\nSee subclause 4.6.10.\nc)\tThe callee is busy upon arrival of the CC call:\nIf the callee is busy when a CC call arrives, then the procedures depend on whether the retain option is supported across the networks:\n-\tif the retain option is not supported at the terminating AS, the terminating AS shall cancel the corresponding CC request; the terminating AS shall send a 486 (Busy Here) response with a Call-Info header field with a \"purpose\" header field parameter set to \"call-completion\" to the originating AS; if a new CCBS invocation request is received from the originating AS, normal procedures apply, according to subclause 4.5.4.3.2;\n-\tif the retain option is supported at the terminating AS, the terminating AS shall retain the original CC request in the queue; in this case the terminating AS shall continue to monitor destination B, shall not restart the timer CC-T7, shall stop timer CC-T9 and shall send a 486 (Busy Here) response with a Call-Info header field with a \"purpose\" header field parameter set to \"call-completion\" to the originating AS.\nd)\tNo CC call as result:\nIf no CC call results from the CC recall mechanism, the recall timer CC-T9 expires. In this case the terminating AS shall send a NOTIFY request to the originating AS according to RFC 6665 [6] and RFC 6910 [5]. The terminating AS shall populate the NOTIFY request as follows:\n-\ta Request-URI set to the URI of the originating AS as received in the Contact header field of the SUBSCRIBE request;\n-\ta To header field set to the URI of UE-A as received in the From header field of the SUBSCRIBE request;\n-\ta From header field set to the URI of UE-B as received in the To header field of the SUBSCRIBE request;\n-\ta Subscription-State header field set to 'terminated'; and\n-\tthe \"reason\" Subscription-State header field parameter set to 'rejected'.\nBasic call procedures according to 3GPP TS 24.229 [2] shall apply.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "4.5.5\tSIP specific Event Notifications",
                            "text_content": "SIP specific Event Notifications shall be used in accordance with RFC 6665 [6] including as referenced in RFC 5875 [9] and RFC 4825 [10].\n",
                            "figures_meta_data": [],
                            "tables": []
                        }
                    ]
                },
                {
                    "title": "4.6\tInteraction of Call-Completion with other services",
                    "description": "",
                    "summary": "",
                    "text_content": "",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": [
                        {
                            "title": "4.6.1\tCommunication waiting (CW)",
                            "text_content": "The CW AS shall not invoke the CW service on a CC recall.\nNOTE 1:\tFor a waiting communication, destination B is not considered as busy. \n\tIf the communication waiting indication cannot be given at the destination B, user A will receive busy indication and can invoke the CCBS service to destination B.\nNOTE 2:\tProcedures for the case the CC call encounters busy again are described in subclause 4.5.4.3.4.2.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "4.6.2\tCommunication Hold (HOLD)",
                            "text_content": "No impact, i.e. neither service shall affect the operation of the other service.\nNOTE:\tWhen receiving a CC recall indication, user A can invoke the communication hold service in order to make interface resources available for the establishment of the CC call.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "4.6.3\tTerminating Identification Presentation (TIP)",
                            "text_content": "No impact, i.e. neither service shall affect the operation of the other service.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "4.6.4\tTerminating Identification Restriction (TIR)",
                            "text_content": "The TIR AS shall enforce the privacy settings of the CC recall answer on the CC call and if necessary on the subsequent communication, if the CC recall was invoked via 3pcc procedures.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "4.6.5\tOriginating identification presentation (OIP)",
                            "text_content": "No impact, i.e. neither service shall affect the operation of the other service.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "4.6.6\tOriginating identification restriction (OIR)",
                            "text_content": "The OIR AS shall enforce the privacy settings of the originating call on the CC call.\nThe OIR AS shall enforce the privacy settings of the originating call for SUBSCRIBE and NOTIFY requests when CC is invoked.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "4.6.7\tConference calling (CONF)",
                            "text_content": "No impact, i.e. neither service shall affect the operation of the other service.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "4.6.8\tCommunication diversion services (CDIV)",
                            "text_content": "The CDIV AS shall not divert a CC recall. The CDIV AS shall give a CC recall to user A at user A's original location.\nFor CFU activated by B before A requests CC on B:\n-\tIf user B has activated CFU, and the forwarded communication results in a call-completion condition at user C, the CC AS shall inform user A that CC is possible at user C. If user A activates CC and subsequently activates CFU, the CDIV AS shall give the CC recall to user A at his original location.\nAs a network option, in case of a diversion at user B, the CC AS shall not inform user A that CC is possible.\nFor CFU activated by B after A requests CC on B:\n-\tIf user B activates CFU after user A has activated CC on user B, then the CC AS shall revoke the CC request by sending a NOTIFY request to the originating AS as described in subclause 4.5.4.3.3.1 with the \"reason\" Subscription-State header field parameter set to 'noresource'.The CC AS serving user A shall send a notification \"CC cancelled\" to the user A.\nAs a network option, the CC AS shall suspend the CC request until user B deactivates CFU. If the service duration timer CC-T7 expires before user B deactivates CFU, the CC AS shall revoke the CC request as decribed in subclause 4.5.4.3.3.2.\nNOTE:\tHow the \"CC cancelled\" notification is send to user A is FFS.\nFor CFB activated by B before A requests CC:\n-\tIf user B has activated CFB and is busy, and the forwarded communication results in a call-completion condition at user C, the CC AS shall inform user A that CC is possible at user C. \nAs a network option, the CC AS shall inform user A that CCBS at user B is possible.\nFor CFB activated by B after A requests CC on B:\n-\tIf user B activates CFB after user A has activated CC on user B, a CC call from user A which encounters a busy condition at user B shall be treated as follows:\n-\tuser B shall be considered as being busy and the CC AS shall apply the procedures of CCBS; or\n-\tthe CDIV AS shall forward the communication as a normal communication.\nFor CFNR activated by B before A requests CC:\n-\tIf user B has activated CFNR and does not answer the communication, and the forwarded communication results in a call-completion condition at user C, the CC AS shall inform user A that CC is possible at user C. \nAs a network option, the CC AS shall inform user A that CCNR at user B is possible.\nFor CFNR activated by B after A requests CC on B:\n-\tIf user B activates CFNR after user A has activated CC on user B, a CC call from user A which encounters a no reply condition at user B shall be treated as follows:\n-\tthe CC AS shall apply the procedures of CCNR; or\n-\tthe CDIV AS shall forward the communication as a normal communication.\nFor CFNL activated by B before A requests CC on B:\n-\tIf user B has activated CFNL and is not logged in, and the forwarded communication results in a call-completion condition at user C, the CC AS shall inform user A that CC is possible at user C. \nAs a network option, the CC AS shall inform user A that CCNL at user B is possible.\nFor CFNL activated by B after A requests CC on B:\n-\tIf user B activates CFNL after user A has activated CC on user B, a CC call from user A which encounters a not logged-in condition at user B shall be treated as follows:\n-\tthe CC AS shall apply the procedures of CCNL; or\n-\tthe CDIV AS shall forward the communication as a normal communication.\nFor the originating user A:\n-\tIf a communication to the called user B is deflected to user C by the CD service and results in a call-completion condition at user C, the CC AS shall inform user A that CC is possible at user C. The CDIV AS shall not deflect a CC recall.\nFor the called user B:\n-\tThe CDIV AS shall not deflect a CC call.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "4.6.9\tAdvice of charge (AOC)",
                            "text_content": "Charging information can be given for the original communication, and for the resulting CCBS communication.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "4.6.10\tCompletion of communications (CCBS/CCNR/CCNL)",
                            "text_content": "A user can be both a \"user A\" and a \"user B\" simultaneously, i.e. that user can have activated the CC service and have CC requests outstanding whilst at the same time that user can be the destination of CC requests from other users.\nThe CC AS shall handle CC requests activated by this user (the user's queue A) with priority over CC requests activated by other users on this user (the user’s queue B), see subclause 4.5.4.3.4.1.1.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "4.6.11\tMalicious communication identification (MCID)",
                            "text_content": "No impact, i.e. neither service shall affect the operation of the other service.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "4.6.12\tAnonymous Communication Rejection and Communication Barring (ACR/CB)",
                            "text_content": "No impact, i.e. neither service shall affect the operation of the other service.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "4.6.13\tMessage Waiting Indication (MWI)",
                            "text_content": "No impact, i.e. neither service shall affect the operation of the other service.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "4.6.14\tExplicit Communication Transfer (ECT)",
                            "text_content": "Editor’s note:\tFor further studies. For ECT with REFER the transferee does not know to who he sends the INVITE, and if the SUBSCRIBE is sent on another dialog, the SUBSCRIBE may not reach the target AS.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "4.6.15\tFlexible Alerting (FA)",
                            "text_content": "No impact, i.e. neither service shall affect the operation of the other service.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "4.6.16\tCustomized Alerting Tones (CAT)",
                            "text_content": "No impact, i.e. neither service shall affect the operation of the other service.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "4.6.17\tEnhanced Calling Name (eCNAM)",
                            "text_content": "No impact, i.e. neither service shall affect the operation of the other service.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "4.6.18\tMulti-Device (MuD)",
                            "text_content": "No impact. Neither service shall affect the operation of the other service.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "4.6.19\tMulti-Identity (MiD)",
                            "text_content": "No impact. Neither service shall affect the operation of the other service.\n",
                            "figures_meta_data": [],
                            "tables": []
                        }
                    ]
                },
                {
                    "title": "4.7\tVoid",
                    "description": "",
                    "summary": "",
                    "text_content": "",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "4.8\tParameter values (timers)",
                    "description": "",
                    "summary": "",
                    "text_content": "",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": [
                        {
                            "title": "4.8.1\tTimers referring to the originating AS",
                            "text_content": "CC-T1\tRetention timer. This timer specifies the amount of time that the network retains the communication information of the original communication which was not established successfully. After being informed that CC is possible the caller sends a CC invocation request before expiry of this timer. The minimum value of this timer is 15 seconds.\nCC-T2\tCC request operation timer. Supervision of response to a CC activation request sent from the originating AS to the terminating AS. CC-T2 will expire if signalling is not possible, at signalling failures, or if the terminating AS cannot respond. The minimum value of this timer is 10 seconds.\nCC-T3\tCC service duration timer. This timer specifies the maximum time the service will remain activated for user A. The maximum value of this timer is 180 minutes.\nNOTE:\tThe value of the CC service duration timer can differ in the network dependent on the invoked CC service. CCBS can take one value and CCNR or CCNL can take another value.\nCC-T4\tCC recall timer. This timer specifies the maximum time the originating AS will wait for a response from user A to a CC recall. The maximum value of this timer is 20 seconds.\nCCNR-T5\tNo-reply timer. This timer specifies the maximum time after which the originating AS will provide the announcement that CCNR is possible, and inband activation is possible. The maximum value of this timer is 20 seconds.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "4.8.2\tTimers referring to the terminating AS",
                            "text_content": "CC-T7\tCC service duration timer CC-T7 expiry will only be meaningful if the expiry of CC-T3 has not been notified to the terminating AS. CC-T7 takes a longer duration than CC-T3, i.e. CC-T7 expires at abnormal situations only. The maximum value of this timer is 190 minutes. When CC-T7 expires, the CC request will be cancelled at the terminating AS as well as at the originating AS.\nNOTE:\tThe value of the CC service duration timer can differ in the network dependent on the invoked CC service. CCBS can take one value and CCNR or CCNL can take another value.\nCC-T8\tDestination B idle guard timer. This timer specifies the amount of time the terminating AS will delay after destination B has become free, before initiating a CC recall towards the originating AS. The maximum value of this timer is 10 seconds.\nCC-T9\tRecall timer. CC-T9 should expire at emergency only, i.e. the recall should be cancelled by CC-T4 at the originating AS if recall is not responded to. Duration of CC-T9 = 20 seconds + some seconds for CC call set-up. The maximum value is 30 seconds.\n",
                            "figures_meta_data": [],
                            "tables": []
                        }
                    ]
                },
                {
                    "title": "4.9\tCommunication completion configuration XCAP application usage",
                    "description": "",
                    "summary": "",
                    "text_content": "",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": [
                        {
                            "title": "4.9.1\tGeneral",
                            "text_content": "Communication completion configuration documents are sub-trees of the simservs XML document specified in 3GPP TS 24.623 [4]. As such, communication completion configuration documents use the XCAP application usage in 3GPP TS 24.623 [4].\nData semantics: The semantics of the communication completion XML configuration document is specified in subclause 4.9.2.\nXML schema: Implementations in compliance with this specification shall implement the XML schema that minimally includes the XML Schema defined in subclause 4.9.3 and the simservs XML schema specified in subclause 6.3 of 3GPP TS 24.623 [4].\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "4.9.2\tData semantics",
                            "text_content": "The active attribute of <communication-completion> element indicates whether the communication completion service is activated or not.\nThe <communication-completion> element contains an optional <CCBS-CC-T3-timer> and optional <CCNR-CC-T3-timer> elements.\nThe <CCBS-CC-T3-timer> is a read-only element and indicates the value, in minutes, of the CC-T3 of the CCBS service.\nThe <CCNR-CC-T3-timer> is a read-only element and indicates the value, in minutes, of the CC-T3 of the CCNR and CCNL services.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "4.9.3\tXML schema",
                            "text_content": "<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<xs:schema xmlns:ss=\"http://uri.etsi.org/ngn/params/xml/simservs/xcap\"\nxmlns:xs=\"http://www.w3.org/2001/XMLSchema\"\ntargetNamespace=\"http://uri.etsi.org/ngn/params/xml/simservs/xcap\"\nelementFormDefault=\"qualified\" attributeFormDefault=\"unqualified\"\n>\n\n<xs:include schemaLocation=\"XCAP.xml\"/>\n\n<xs:element name=\"communication-completion\" substitutionGroup=\"ss:absService\">\n<xs:annotation>\n<xs:documentation>communication completion</xs:documentation>\n</xs:annotation>\n\n<xs:complexType>\n<xs:complexContent>\n<xs:extension base=\"ss:simservType\">\n<xs:sequence>\n<xs:element name=\"CCBS-CC-T3-timer\" type=\"xs:positiveInteger\" minOccurs=\"0\"/>\n<xs:element name=\"CCNR-CC-T3-timer\" type=\"xs:positiveInteger\" minOccurs=\"0\"/>\n<xs:any namespace=\"##other\" processContents=\"lax\" minOccurs=\"0\" maxOccurs=\"unbounded\"/>\n</xs:sequence>\n<xs:anyAttribute namespace=\"##any\" processContents=\"lax\"/>\n</xs:extension>\n</xs:complexContent>\n</xs:complexType>\n</xs:element>\n\n</xs:schema>\n\n4.10\tCommunication completion request records\n4.10.1\tGeneral\nThe communication completion request records XCAP application usage allows a UE to interrogate the communication completion AS to find out a list of the currently pending communication completion requests originated by a public user identity registered at the UE.\nThe communication completion AS shall support acting as XCAP server as specified in IETF RFC 4825 [10] providing the communication completion request records XCAP application usage as specified in subclause 4.10.2 and shall support acting as notifier of the changes in the communication completion request records XML document using RFC 5875 [9].\nThe UE may support acting as XCAP client as specified in IETF RFC 4825 [10] accessing the communication completion request records XCAP application usage as specified in subclause 4.10.2 and may support acting as subscriber for the changes in the communication completion request records XML document using RFC 5875 [9].\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "4.10.2\tCommunication completion request records XCAP application usage",
                            "text_content": "The AUID of the communication completion request records XCAP application usage is \"org.3gpp.ccrr\"\nThe communication completion request records XML documents are composed according to the XML schema defined in this subclause.\n\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<xs:schema\nxmlns:xs=\"http://www.w3.org/2001/XMLSchema\"\nxmlns:ccrr=\"urn:3gpp:ns:ccrr:1.0\"\ntargetNamespace=\"urn:3gpp:ns:ccrr:1.0\"\nelementFormDefault=\"qualified\"\nattributeFormDefault=\"unqualified\">\n\n<xs:element name=\"cc-records\" type=\"ccrr:Tcomm-completion-req-records\"/>\n\n<xs:complexType name=\"Tcomm-completion-req-records\">\n<xs:sequence>\n<xs:element ref=\"ccrr:cc-entry\" minOccurs=\"0\" maxOccurs=\"unbounded\"/>\n<xs:any namespace=\"##other\" processContents=\"lax\" minOccurs=\"0\" maxOccurs=\"unbounded\"/>\n</xs:sequence>\n<xs:anyAttribute namespace=\"##any\" processContents=\"lax\"/>\n</xs:complexType>\n\n<xs:element name=\"cc-entry\" type=\"ccrr:Tcomm-completion-entry\"/>\n\n<xs:complexType name=\"Tcomm-completion-entry\">\n<xs:sequence>\n<xs:element name=\"orig-URI\" type=\"xs:anyURI\"/>\n<xs:element name=\"called-URI\" type=\"xs:anyURI\"/>\n<xs:element name=\"term-URI\" type=\"xs:anyURI\" minOccurs=\"0\"/>\n<xs:element name=\"expiration\" type=\"xs:dateTime\"/>\n<xs:any namespace=\"##other\" processContents=\"lax\" minOccurs=\"0\" maxOccurs=\"unbounded\"/>\n</xs:sequence>\n<xs:attribute name=\"id\" type=\"xs:string\" use=\"required\"/>\n<xs:anyAttribute namespace=\"##any\" processContents=\"lax\"/>\n</xs:complexType>\n\n</xs:schema>\n\nThe default namespace of the communication completion request records XCAP application usage is \"urn:3gpp:ns:ccrr:1.0\"\nThe MIME type of the communication completion request records XML document is specified in annex C.\nNo additional constraints beyond those defined by IETF RFC 4825 [10] are defined.\nThe communication completion request records XML document contains a root element <cc-records> containing a list of <cc-entry> child elements.\nThe <cc-entry> element contains information related to a particular pending communication completion request.  The <cc-entry> element contains a <orig-URI> element, a <called-URI> element, an optional <term-URI> child element and a <expiration> child element.\nThe <orig-URI> element contains the identity of the caller.\nThe <called-URI> element contains the identity called by the caller.\nThe <term-URI> element contains the identity where the call was routed to.  The <term-URI> element is included in the <cc-entry> element, if the identity where the call was routed to was provided by the terminating side and unless the privacy was requested.\nThe <expiration> element indicates the expiration of the communication completion request.\nWhen stored in a directory of a user within the \"users\" subdirectory of the communication completion request records XCAP application usage, the filename of the communication completion request records XML document is \"index\".\nWhen the communication completion request records XML document is stored in a directory of a user identified by a URI within the \"users\" subdirectory of the communication completion request records XCAP application usage, then the <orig-URI> elements contain the URI of the user owning the document.\nThe owner of the communication completion request records XML document is allowed to read the XML document.\n",
                            "figures_meta_data": [],
                            "tables": []
                        }
                    ]
                }
            ]
        },
        {
            "title": "A.1\tCCBS activation and CCBS call",
            "description": "The figure depicts the activation and call setup of CCBS (Coarse-Grain Broadcast Service) in a 5G network. It illustrates the process of activating CCBS services, including the activation of the base station (gNB) and the establishment of the call setup. The figure also shows the connection between the gNB and the base station, as well as the connection between the gNB and the user equipment (UE). The figure highlights the importance of proper call setup and activation in ensuring reliable and efficient communication in a 5G network.\nFigure A.1.1: CCBS activation and CCBS call\nFigure A.1.1 shows a basic signalling flow for a CCBS activation and a CCBS call.\nCall flows\n\n1 to 5:\tThe communication is initiated by UE-A by sending an INVITE request. The Request-URI will include the URI of UE-B. After IFC evaluation in the S-CSCF the INVITE request is routed to the originating AS and after that to the terminating AS and further on to UE-B.\nTable A.1-1: SIP INVITE request (UE to P-CSCF)\nINVITE sip:user2_public2@home2.net SIP/2.0\nVia: SIP/2.0/UDP [5555::aaa:bbb:ccc:ddd]:1357;comp=sigcomp;branch=z9hG4bKnashds7\nMax-Forwards: 70\nRoute: sip:pcscf1.home1.net:7531;lr;comp=sigcomp>, <sip:orig@scscf1.home1.net;lr>\nAccept-Contact: *;+g.3gpp.icsi-ref=\"urn%3Aurn-7%3gpp-service.ims.icsi.mmtel\"\nPrivacy: none\nFrom: <sip:user1_public1@home1.net>; tag=171828\nTo: <sip:user2_public2@home2.net>\nCall-ID: cb0s2sdfglkj490333\nCSeq: 127 INVITE\nSupported: 100rel; precondition, gruu, 199\nRequire: sec-agree\nContact: <sip:user1_public1@home1.net;gr=urn:uuid:f81d4fae-7dec-11d0-a765-00a0c91e6bf6>;+g.3gpp.icsi-ref=\"urn%3Aurn-7%3gpp-service.ims.icsi.mmtel\"\nAllow: INVITE, ACK, CANCEL, BYE, PRACK, UPDATE, INFO, REFER\nAccept: application/sdp,application/3gpp-ims+xml\nContent-Type: application/sdp\nContent-Length: (…)\n\nv=0\no=- 2987933615 2987933615 IN IP6 5555::aaa:bbb:ccc:ddd\ns=-\nc=IN IP6 5555::aaa:bbb:ccc:ddd\nt=0 0\nm=video 3400 RTP/AVP 98 99\nb=AS:75\na=curr:qos local none\na=curr:qos remote none\na=des:qos mandatory local sendrecv\na=des:qos none remote sendrecv\na=inactive\na=rtpmap:98 H263\na=fmtp:98 profile-level-id=0\na=rtpmap:99:MPVMP4V-ES\nm=audio 3456 RTP/AVP 97 96\nb=AS:25.4\na=curr:qos local none\na=curr:qos remote none\na=des:qos mandatory local sendrecv\na=des:qos none remote sendrecv\na=inactive\na=rtpmap:97 AMR\na=fmtp:97 mode-set=0,2,5,7; maxframes=2\na=rtpmap:96 telephone-event\n\n6:\tUE-B answers with a 486 (Busy Here) response. The 486 (Busy Here) response is routed back to the terminating AS.\n7 to 8:\tThe terminating AS inserts a Call-Info header field in the 486 (Busy Here) response according to the procedures described in RFC 6910 [5]. The Call-Info header field will contain the URI of the terminating AS with an \"m\" header field parameter set to \"BS\" (busy subscriber). It further includes a \"purpose\" header field parameters set to \"call-completion\". The 486 (Busy Here) response is routed back to the originating AS.\nTable A.1-2: 486 (Busy Here) response ( to S-CSCF))\nSIP/2.0 486 Busy Here\nVia: SIP/2.0/UDP tas.home2.net;branch= z9hG4bK332b23.1, SIP/2.0/UDP scscf2.home2.net;branch=z9hG4bK344a65.1, SIP/2.0/UDP icscf2_s.home2.net;branch=z9hG4bKj5hgrt2o, SIP/2.0/UDP scscf1.home1.net;branch=z9hG4bKehuehjgt, SIP/2.0/UDP oas.home1.net;branch=z9hG4bKnashds7, SIP/2.0/UDP pcscf1.visited1.net;branch=z9hG4bK240f34.1, [5555::aaa:bbb:ccc:ddd]:1357;comp=sigcomp;branch=z9hG4bKnashds7\nFrom: <sip:user1_public1@home1.net>;tag=171828\nTo: <sip:user2_public2@home2.net>;tag=314159\nCall-ID: cb03a0s09a2sdfglkj490333\nCSeq: 127 INVITE\nRetry-After: 3600\nContact: <sip:user2_public2@visited2.net;gr=urn:uuid:f81d4fae-7dec-11d0-a765-00a0c91ewxyz>;+g.3gpp.icsi-ref=\"urn%3Aurn-7%3gpp-service.ims.icsi.mmtel\"\nContent-Length: 0\nCall-Info:<sip:tas.home2.net>;purpose=call-completion;m=BS\n\n\n9 to 10:\tThe originating AS sends back a 183 (Session Progress) response to UE-A and initiates IVR procedures. User A is informed that CCBS is possible. User A activates CCBS.\n11 to 12:\tThe originating AS subscribes for the call-completion event package according to the procedures described in RFC 6910 [5] at the terminating AS. The originating AS generates a SUBSCRIBE request which Request-URI will include the URI of the terminating AS. In order to mark the SUBSCRIBE request as a request for CCBS, the originating AS adds the \"m\" SIP URI parameter with the value \"BS\" to the Request-URI. The From header field will include the caller URI. The To header field will include the callee URI.\nTable A.1-3: SUBSCRIBE request (Originating AS to S-CSCF)\nSUBSCRIBE sip:tas.home2.net;m=BS SIP/2.0\nVia: SIP/2.0/UDP oas.home1.net;branch=z9hG4bKnashds7\nMax-Forwards: 70\nRoute: <sip:scscf1.home1.net>\nP-Asserted-Identity: <sip: user1_public1@home1.net>\nFrom: <sip:user1_public1@home1.net>;tag=31415\nTo: <sip:user2_public2@home2.net>\nCall-ID: b89rjhnedlrfjflslj40a222\nCall-Info:<sip:user1_public1@home1.net>;purpose=call-completion;m=BS\nCSeq: 61 SUBSCRIBE\nEvent: call-completion\nExpires: 2700\nContact: <sip:oas.home1.net>\nContent-Length: 0\n\n13 to 14\tThe terminating AS accepts the subscription and starts busy state supervision procedures on the callee.\nTable A.1-4: 200 (OK) response ( to S-CSCF)\nSIP/2.0 200 OK\nVia: SIP/2.0/UDP scscf2.home2.net;branch=z9hG4bK344a65.1, SIP/2.0/UDP icscf2_s.home2.net;branch=z9hG4bKj5hgrt2o, SIP/2.0/UDP scscf1.home1.net;branch=z9hG4bKehuehjgt, SIP/2.0/UDP oas.home1.net;branch=z9hG4bKnashds7\nRecord-Route:\nFrom:\nTo: <sip:user2_public2@home2.net>;tag=151170\nCall-ID:\nCSeq:\nEvent:\nExpires: 2700\nContact: <sip:tas.home2.net>\nContent-Length:\n\n15 to 18:\tThe terminating AS sends a notification to the originating AS, according to the procedures described in RFC 6910 [5]. The Request-URI of the NOTIFY request will include the URI of the originating AS. The body contains parameters informing of the caller’s call-completion state 'queued' and the availability of the call-completion service retention at the terminating AS. After confirmation of the notification the originating AS starts announcements procedures informing about the activation of CCBS.\nTable A.1-5: NOTIFY request (Terminating AS to S-CSCF)\nNOTIFY sip:oas.home1.net SIP/2.0\nVia: SIP/2.0/UDP tas.home2.net;branch=z9hG4bK348923.1\nMax-Forwards: 70\nRoute: <sip:scscf2.home2.net>\nP-Asserted-Identity: <sip:tas.home2.net>\nFrom: <sip:user2_public2@home2.net>;tag=151170\nTo: <sip:user1_public1@home1.net>;tag=31415\nCall-ID: b89rjhnedlrfjflslj40a222\nCSeq: 42 NOTIFY\nSubscription-State: active ;expires=2699\nEvent: call-completion\nContact: <sip:tas.home2.net>\nContent-Type: application/call-completion\nContent-Length: (...)\n\ncc-state: queued\ncc-service retention\n\n\n19 to 20:\tThe originating AS forwards the 486 (Busy Here) response to UE-A.\n21 to 24:\tThe terminating AS sends a NOTIFY request to the originating AS, according to the procedures described in RFC 6910 [5]. The body contains a parameter informing of the caller’s call-completion state 'ready' (for recall). The originating AS confirms the notification.\nTable A.1-6: NOTIFY request (Terminating AS to S-CSCF)\nNOTIFY sip:oas.home1.net SIP/2.0\nVia: SIP/2.0/UDP tas.home2.net;branch=z9hG4bK348923.1\nMax-Forwards: 70\nRoute: <sip:scscf2.home2.net>\nP-Asserted-Identity: <sip:tas.home2.net>\nFrom: <sip:user2_public2@home2.net>;tag=151170\nTo: <sip:user1_public1@home1.net>;tag=31415\nCall-ID: b89rjhnedlrfjflslj40a222\nCSeq: 47 NOTIFY\nSubscription-State: active ;expires=1800\nEvent: call-completion\nContact: <sip:tas.home2.net>\nContent-Type: application/call-completion\nContent-Length: (...)\n\ncc-state: ready\ncc-service retention\n\n\n25 to 28:\tThe originating AS initiates the CCBS recall to UE A (by sending a REFER request, the \"m\" SIP URI parameter set to \"BS\" will be included in the Request-URI of the REFER request. UE-A confirms the REFER request.\nTable A.1-7: REFER request (Originating AS to S-CSCF)\nREFER sip:user1_public1@home1.net;m=BS SIP/2.0\nVia: SIP/2.0/UDP oas.home1.net;branch=z9hG4bK23273846\nMax-Forwards: 70\nRoute: <sip:scscf1.home1.net;lr>\nP-Asserted-Identity: <sip:oas.home1.net>\nFrom: <sip:oas.home1.net>; tag=161828\nTo: <sip:user1_public1@home1.net>\nCall-ID: cb03a0s09a2sdfglkj490333\nCSeq: 127 REFER\nRefer-To: <sip:user2_public2@home2.net;method=INVITE>\nReferred-By: <sip:oas.home1.net>\nContact: <sip:oas.home1.net>\nContent-Length: 0\n\n29 to 30:\tUE-A starts the CCBS call by sending an INVITE request to UE-B.\n31 to 33:\tIn order to mark the INVITE request as a prioritized request for call-completion, the originating AS adds the \"m\" SIP URI parameter with the value 'BS' to the Request-URI.\nTable A.1-8: SIP INVITE request ( to S-CSCF)\nINVITE sip:user2_public2@home2.net;m=BS SIP/2.0\nVia: SIP/2.0/UDP [5555::aaa:bbb:ccc:ddd]:1357;comp=sigcomp;branch=z9hG4bKnashds7\nMax-Forwards: 70\nRoute: sip:pcscf1.home1.net:7531;lr;comp=sigcomp>, <sip:orig@scscf1.home1.net;lr>\nAccept-Contact: *;+g.3gpp.icsi-ref=\"urn%3Aurn-7%3gpp-service.ims.icsi.mmtel\"\nPrivacy: none\nFrom: <sip:user1_public1@home1.net>; tag=171829\nTo: <sip:user2_public2@home2.net>\nCall-ID: cb03a0s09a2sdfglkj490444\nCall-Info:<sip:user1_public1@home1.net>;purpose=call-completion;m=BS\nCSeq: 154 INVITE\nSupported: 100rel; precondition, gruu, 199\nRequire: sec-agree\nContact: <sip:user1_public1@home1.net;gr=urn:uuid:f81d4fae-7dec-11d0-a765-00a0c91e6bg6>;+g.3gpp.icsi-ref=\"urn%3Aurn-7%3gpp-service.ims.icsi.mmtel\"\nAllow: INVITE, ACK, CANCEL, BYE, PRACK, UPDATE\nAccept: application/sdp,application/3gpp-ims+xml\nContent-Type: application/sdp\nContent-Length: (…)\n\n",
            "summary": "",
            "tables": [],
            "figures_meta_data": [],
            "subsections": []
        },
        {
            "title": "A.2\tCCBS suspend and resume procedures",
            "description": "The figure depicts the CCBS (Continuous Circuit Breaker) suspend and resume procedures, illustrating the steps taken to isolate and restore the power supply to a circuit. The figure shows the circuit breaker in a closed position, indicating that it is currently in the suspend state. As the power supply is restored, the circuit breaker opens, allowing the power to flow back into the circuit. The figure also includes a visual representation of the circuit breaker's internal components, such as the contacts and the circuit breaker body, which are essential for the proper functioning of the device.\nFigure A.2.1: CCBS suspend and resume procedures\nFigure A.2.1 shows a basic signalling flow for CCBS suspend and resume procedures.\nCall flows\n1 to 4:\tUE-A is busy and the CCBS recall fails. The originating AS initiates the suspension procedure. It generates a PUBLISH request according to the procedures described in RFC 6910 [5]. The Request-URI of the PUBLISH request includes the URI of the terminating AS. The From header field includes the URI of UE-Aand the To header field includes the URI of UE-B. The body of the PUBLISH request indicates the PIDF state 'closed'.\nTable A.2-1: PUBLISH request (Originating AS to S-CSCF)\nPUBLISH sip:tas.home2.net;m=BS SIP/2.0\nVia: SIP/2.0/UDP oas.home1.net;branch=z9hG4bKnashds7\nMax-Forwards: 70\nRoute: <sip:scscf1.home1.net>\nP-Asserted-Identity: <sip:user1_public1@home1.net>\nFrom: <sip:user1_public1@home1.net>;tag=31415\nTo: <sip:user2_public2@home2.net>; tag=151170\nCall-ID: b89rjhnedlrfjflslj40a222\nCSeq: 71 PUBLISH\nEvent: presence\nExpires: 1800\nContent-Type: application/pidf+xml\nContent-Length: (...)\n\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<presence xmlns=\"urn:ietf:params:xml:ns:pidf\"\nxmlns:rpid=\"urn:ietf:params:xml:ns:pidf:rpid\"\nxmlns:dm=\"urn:ietf:params:xml:ns:pidf:data-model\"\nxmlns:pcp=\"urn:ietf:params:xml:ns:pidf:caps\"\nxmlns:c=\"urn:ietf:params:xml:ns:pidf:cipid\"\nentity=\"pres:user2_public1@home2.net\">\n\n<tuple id=\"a8098a.672364762364\">\n<status>\n<basic>closed</basic>\n</status>\n</tuple>\n\n</presence>\n\n5 to 8:\tThe terminating AS suspends the queue entry and sends a NOTIFY request to the originating AS, according to the procedures described in RFC 6910 [5]. The body contains a parameter informing of the caller's call-completion state 'queued'. The originating AS starts busy state supervision procedures on UE-A.\nTable A.2-2: NOTIFY request (Terminating AS to S-CSCF)\nNOTIFY sip:oas.home1.net SIP/2.0\nVia: SIP/2.0/UDP tas.home2.net;branch=z9hG4bK348923.1\nMax-Forwards: 70\nRoute: <sip:scscf2.home2.net>\nP-Asserted-Identity: <sip:tas.home2.net>\nFrom: <sip:user2_public2@home2.net>;tag=151170\nTo: <sip:user1_public1@home1.net>;tag=31415\nCall-ID: b89rjhnedlrfjflslj40a222\nCSeq: 72 NOTIFY\nSubscription-State: active ;expires=1795\nEvent: call-completion\nContact: <sip:tas.home2.net>\nContent-Type: application/call-completion\nContent-Length: (...)\n\ncc-state: queued\ncc-service retention\n\n\n9 to 12:\tUE-A becomes not busy. The originating AS initiates the resumption procedure. It generates a PUBLISH request according to the procedures described in RFC 6910 [5]. The Request-URI of the PUBLISH request includes the URI of the terminating AS. The From header field includes the URI of UE-A and the To header field includes the URI of UE-B. The body of the PUBLISH request indicates the PIDF state 'open'.\nTable A.2-3: PUBLISH request (Originating AS to S-CSCF)\nPUBLISH sip:tas.home2.net;m=BS SIP/2.0\nVia: SIP/2.0/UDP oas.home1.net;branch=z9hG4bKnashds7\nMax-Forwards: 70\nRoute: <sip:scscf1.home1.net>\nP-Asserted-Identity: <sip: user1_public1@home1.net>\nFrom: <sip:user1_public1@home1.net>;tag=31416\nTo: <sip:user2_public2@home2.net>; tag=151170\nCall-ID: b89rjhnedlrfjflslj40a222\nCSeq: 85 PUBLISH\nEvent: presence\nExpires: 1100\nContent-Type: application/pidf+xml\nContent-Length: (...)\n\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<presence xmlns=\"urn:ietf:params:xml:ns:pidf\"\nxmlns:rpid=\"urn:ietf:params:xml:ns:pidf:rpid\"\nxmlns:dm=\"urn:ietf:params:xml:ns:pidf:data-model\"\nxmlns:pcp=\"urn:ietf:params:xml:ns:pidf:caps\"\nxmlns:c=\"urn:ietf:params:xml:ns:pidf:cipid\"\nentity=\"pres:user2_public1@home2.net\">\n\n<tuple id=\"a8098a.672364762364\">\n<status>\n<basic>open</basic>\n</status>\n</tuple>\n\n</presence>\n\n13 to 16:\tThe terminating AS resumes the queue entry and sends a NOTIFY request to the originating AS, according to the procedures described in RFC 6910 [5]. The body contains a parameter informing of the caller’s call-completion state 'queued'.\nTable A.2-4: NOTIFY request (Terminating AS to S-CSCF)\nNOTIFY sip:oas.home1.net SIP/2.0\nVia: SIP/2.0/UDP tas.home2.net;branch=z9hG4bK348923.1\nMax-Forwards: 70\nRoute: <sip:scscf2.home2.net>\nP-Asserted-Identity: <sip:tas.home2.net>\nFrom: <sip:user2_public2@home2.net>;tag=151170\nTo: <sip:user1_public1@home1.net>;tag=31415\nCall-ID: b89rjhnedlrfjflslj40a222\nCSeq: 86 NOTIFY\nSubscription-State: active ;expires=1095\nEvent: call-completion\nContact: <sip:tas.home2.net>\nContent-Type: application/call-completion\nContent-Length: (...)\n\ncc-state: queued\ncc-service retention\n\n\n",
            "summary": "",
            "tables": [],
            "figures_meta_data": [],
            "subsections": []
        },
        {
            "title": "A.3\tCCNR activation",
            "description": "The figure depicts a CCNR activation, which is a crucial step in the process of creating a 5G network. It illustrates the activation of the carrier-to-cracker (CC) network, which is responsible for the transmission of signals from the base station (gNB) to the user equipment (UE). The activation process involves the use of a set of key components, including the gNB, UE, and the network elements such as the base station (BTS), the radio frequency (RF) chain, and the optical line terminal (OLT). The figure also highlights the importance of redundancy in the network, as it shows the presence of redundant paths to ensure the reliability of the signal transmission.\nFigure A.3.1: CCNR activation\nFigure A.3.1 shows a basic signalling flow for a CCNR activation.\nCall flows\n\n1 to 5:\tThe communication is initiated by UE-A by sending an INVITE request. The Request-URI will include the URI of UE-B. After IFC evaluation in the S-CSCF the INVITE request is routed to the originating AS and after that to the terminating AS and further on to UE-B.\nTable A.3-1: SIP INVITE request (UE to P-CSCF)\nINVITE sip:user2_public2@home2.net SIP/2.0\nVia: SIP/2.0/UDP [5555::aaa:bbb:ccc:ddd]:1357;comp=sigcomp;branch=z9hG4bKnashds7\nMax-Forwards: 70\nRoute: sip:pcscf1.home1.net:7531;lr;comp=sigcomp>, <sip:orig@scscf1.home1.net;lr>\nAccept-Contact: *;+g.3gpp.icsi-ref=\"urn%3Aurn-7%3gpp-service.ims.icsi.mmtel\"\nPrivacy: none\nFrom: <sip:user1_public1@home1.net>; tag=171828\nTo: <sip:user2_public2@home2.net>\nCall-ID: cb0s2sdfglkj490333\nCSeq: 127 INVITE\nSupported: 100rel; precondition, gruu, 199\nRequire: sec-agree; replaces\nContact: <sip:user1_public1@home1.net;gr=urn:uuid:f81d4fae-7dec-11d0-a765-00a0c91e6bf6>;+g.3gpp.icsi-ref=\"urn%3Aurn-7%3gpp-service.ims.icsi.mmtel\"\nAllow: INVITE, ACK, CANCEL, BYE, PRACK, UPDATE\nAccept: application/sdp,application/3gpp-ims+xml\nContent-Type: application/sdp\nContent-Length: (…)\n\nv=0\no=- 2987933615 2987933615 IN IP6 5555::aaa:bbb:ccc:ddd\ns=-\nc=IN IP6 5555::aaa:bbb:ccc:ddd\nt=0 0\nm=video 3400 RTP/AVP 98 99\nb=AS:75\na=curr:qos local none\na=curr:qos remote none\na=des:qos mandatory local sendrecv\na=des:qos none remote sendrecv\na=inactive\na=rtpmap:98 H263\na=fmtp:98 profile-level-id=0\na=rtpmap:99:MPVMP4V-ES\nm=audio 3456 RTP/AVP 97 96\nb=AS:25.4\na=curr:qos local none\na=curr:qos remote none\na=des:qos mandatory local sendrecv\na=des:qos none remote sendrecv\na=inactive\na=rtpmap:97 AMR\na=fmtp:97 mode-set=0,2,5,7; maxframes=2\na=rtpmap:96 telephone-event\n\n6:\tUE-B answers with a 180 (Ringing) response. The 180 (Ringing) response is routed back to the terminating AS.\n7 to 8:\tThe terminating AS inserts a Call-Info header field in the 180 (Ringing) response according to the procedures described in RFC 6910 [5]. The Call-Info header field will contain the URI of the terminating AS with an \"m\" header field parameter set to \"NR\" (no reply). It further includes a \"purpose\" header field parameter set to \"call-completion\". The 180 (Ringing) response is routed back to the originating AS.\n\nTable A.3-2: 180 Ringing (Terminating AS to S-CSCF))\nSIP/2.0 180 Ringing\nVia: SIP/2.0/UDP tas.home2.net;branch= z9hG4bK332b23.1, SIP/2.0/UDP scscf2.home2.net;branch=z9hG4bK344a65.1, SIP/2.0/UDP icscf2_s.home2.net;branch=z9hG4bKj5hgrt2o, SIP/2.0/UDP scscf1.home1.net;branch=z9hG4bKehuehjgt, SIP/2.0/UDP oas.home1.net;branch=z9hG4bKnashds7, SIP/2.0/UDP pcscf1.visited1.net;branch=z9hG4bK240f34.1, [5555::aaa:bbb:ccc:ddd]:1357;comp=sigcomp;branch=z9hG4bKnashds7\nFrom: <sip:user1_public1@home1.net>;tag=171828\nTo: <sip:user2_public2@home2.net>;tag=314159\nCall-ID: cb03a0s09a2sdfglkj490333\nCSeq: 127 INVITE\nRetry-After: 3600\nContact: <sip:user2_public2@visited2.net;gr=urn:uuid:f81d4fae-7dec-11d0-a765-00a0c91ewxyz>;+g.3gpp.icsi-ref=\"urn%3Aurn-7%3gpp-service.ims.icsi.mmtel\"\nContent-Length: 0\nCall-Info:<sip:tas.home2.net>;purpose=call-completion;m=NR\n\n\n9 to 10:\tThe originating AS removes the Call-Info header field, forwards the 180 (Ringing) response to UE-A and initiates IVR procedures. User A is informed that CCNR is possible. User A activates CCNR.\n11 to 12:\tThe originating AS subscribes for the call-completion event package according to the procedures described in RFC 6910 [5] at the terminating AS. The originating AS generates a SUBSCRIBE request which Request-URI will include the URI of the terminating AS. In order to mark the SUBSCRIBE request as a request for CCNR, the originating AS adds the \"m\" SIP URI parameter with the value \"NR\" to the Request-URI. The From header field will include the caller URI. The To header field will include the URI of UE-B.\nTable A.3-3: SUBSCRIBE request (Originating AS to S-CSCF)\nSUBSCRIBE sip:tas.home2.net;m=NR SIP/2.0\nVia: SIP/2.0/UDP oas.home1.net;branch=z9hG4bKnashds7\nMax-Forwards: 70\nRoute: <sip:scscf1.home1.net>\nP-Asserted-Identity: <sip:user1_public1@home1.net>\nFrom: <sip:user1_public1@home1.net>;tag=31415\nTo: <sip:user2_public2@home2.net>\nCall-ID: b89rjhnedlrfjflslj40a222\nCSeq: 61 SUBSCRIBE\nCall-Info:<sip:user1_public1@home1.net>;purpose=call-completion;m=NR\nEvent: call-completion\nExpires: 5400\nContact: <sip:oas.home1.net>\nContent-Length: 0\n\n13 to 14\tThe terminating AS accepts the subscription and starts supervision procedures on activity of the callee.\nTable A.3-4: 200 (OK) response ( to S-CSCF)\nSIP/2.0 200 OK\nVia: SIP/2.0/UDP scscf2.home2.net;branch=z9hG4bK344a65.1, SIP/2.0/UDP icscf2_s.home2.net;branch=z9hG4bKj5hgrt2o, SIP/2.0/UDP scscf1.home1.net;branch=z9hG4bKehuehjgt, SIP/2.0/UDP oas.home1.net;branch=z9hG4bKnashds7\nRecord-Route:\nFrom:\nTo: <sip:user2_public2@home2.net>;tag=151170\nCall-ID:\nCSeq:\nEvent:\nExpires: 5400\nContact: <sip:tas.home2.net>\nContent-Length:\n\n15 to 18:\tThe terminating AS sends a notification to the originating AS, according to the procedures described in RFC 6910 [5]. The Request-URI of the NOTIFY request will include the URI of the originating AS. The body contains parameters informing of the caller’s call-completion state 'queued' and the availability of the call-completion service retention at the terminating AS. After confirmation of the notification the originating AS starts announcements procedures informing about the activation of CCNR.\nTable A.3-5: NOTIFY request (Terminating AS to S-CSCF)\nNOTIFY sip:oas.home1.net SIP/2.0\nVia: SIP/2.0/UDP tas.home2.net;branch=z9hG4bK348923.1\nMax-Forwards: 70\nRoute: <sip:scscf2.home2.net>\nP-Asserted-Identity: <sip:tas.home2.net>\nFrom: <sip:user2_public2@home2.net>;tag=151170\nTo: <sip:user1_public1@home1.net>;tag=31415\nCall-ID: b89rjhnedlrfjflslj40a222\nCSeq: 42 NOTIFY\nSubscription-State: active ;expires=5399\nEvent: call-completion\nContact: <sip:tas.home2.net>\nContent-Type: application/call-completion\nContent-Length: (...)\n\ncc-state: queued\ncc-service retention\n\n\n19 to 28:\tUE-A initiates the termination of the session setup by sending a CANCEL request to UE-B.\n29 to 38:\tUE-B terminates the session setup by sending a 487 Request terminated to UE-A.\n",
            "summary": "",
            "tables": [],
            "figures_meta_data": [],
            "subsections": []
        },
        {
            "title": "A.4\tCCNR call",
            "description": "The figure depicts a CCNR call, which is a crucial component in the telecommunication network. It illustrates the process of voice communication, with the call being initiated by the sender and then passed through the network to the receiver. The figure shows the various stages of the call, including the sender's location, the network's routing, and the receiver's location. This figure is crucial for understanding the overall structure and functioning of the telecommunication network.\nFigure A.4.1: CCNR call\nFigure A.4.1 shows a basic signalling flow for a CCNR operation and a CCNR call.\nCall flows\n\n1 to 4:\t\tThe terminating AS sends a NOTIFY request to the originating AS, according to the procedures described in RFC 6910 [5]. The body contains a parameter informing of the caller’s call-completion state ‘ready’ (for recall). The originating AS confirms the notification.\nTable A.4-1: NOTIFY request (Terminating AS to S-CSCF)\nNOTIFY sip:oas.home1.net SIP/2.0\nVia: SIP/2.0/UDP tas.home2.net;branch=z9hG4bK348923.1\nMax-Forwards: 70\nRoute: <sip:scscf2.home2.net>\nP-Asserted-Identity: <sip:tas.home2.net>\nFrom: <sip:user2_public2@home2.net>;tag=151170\nTo: <sip:user1_public1@home1.net>;tag=31415\nCall-ID: b89rjhnedlrfjflslj40a222\nCSeq: 47 NOTIFY\nSubscription-State: active ;expires=1800\nEvent: call-completion\nContact: <sip:tas.home2.net>\nContent-Type: application/call-completion\nContent-Length: (...)\n\ncc-state: ready\ncc-service retention\n\n\n5 to 8:\t\tThe originating AS initiates the CCNR recall to UE A by sending a REFER request, the \"m\" SIP URI parameter set to \"NR\" will be included in the Request-URI of the REFER request. UE-A confirms the REFER request.\nTable A.4-2: REFER request (Originating AS to S-CSCF)\nREFER sip:user1_public1@home1.net;m=NR SIP/2.0\nVia: SIP/2.0/UDP oas.home1.net;branch=z9hG4bK23273846\nMax-Forwards: 70\nRoute: <sip:scscf1.home1.net;lr>\nP-Asserted-Identity: <sip:oas.home1.net>\nFrom: <sip:oas.home1.net>; tag=161828\nTo: <sip:user1_public1@home1.net>\nCall-ID: cb03a0s09a2sdfglkj490333\nCseq: 127 REFER\nRefer-To: <sip:user2_public2@home2.net;method=INVITE>\nReferred-By: <sip:oas.home1.net>\nContact: <sip:oas.home1.net>\nContent-Length: 0\n\n9 to 10:\tUE-A starts the CCNR call by sending an INVITE request to UE-B.\n11 to 13:\t\tIn order to mark the INVITE request as a prioritized request for call-completion, the originating AS adds the \"m\" SIP URI parameter with the value \"NR\" to the Request-URI, and forwards the INVITE request to UE-B.\nTable A.4-3: SIP INVITE request ( to S-CSCF)\nINVITE sip:user2_public2@home2.net;m=NR SIP/2.0\nVia: SIP/2.0/UDP [5555::aaa:bbb:ccc:ddd]:1357;comp=sigcomp;branch=z9hG4bKnashds7\nMax-Forwards: 70\nRoute: sip:pcscf1.home1.net:7531;lr;comp=sigcomp>, <sip:orig@scscf1.home1.net;lr>\nAccept-Contact: *;+g.3gpp.icsi-ref=\"urn%3Aurn-7%3gpp-service.ims.icsi.mmtel\"\nPrivacy: none\nFrom: <sip:user1_public1@home1.net>; tag=171829\nTo: <sip:user2_public2@home2.net>\nCall-ID: cb03a0s09a2sdfglkj490444\nCseq: 154 INVITE\nSupported: 100rel; precondition, gruu, 199\nRequire: sec-agree\nContact: <sip:user1_public1@home1.net;gr=urn:uuid:f81d4fae-7dec-11d0-a765-00a0c91e6bg6>;+g.3gpp.icsi-ref=\"urn%3Aurn-7%3gpp-service.ims.icsi.mmtel\"\nAllow: INVITE, ACK, CANCEL, BYE, PRACK, UPDATE\nAccept: application/sdp,application/3gpp-ims+xml\nCall-Info:<sip:user1_public1@home1.net>;purpose=call-completion;m=BS\nContent-Type: application/sdp\nContent-Length: (…)\n\n",
            "summary": "",
            "tables": [],
            "figures_meta_data": [],
            "subsections": []
        },
        {
            "title": "A.5\tCCNL invocation",
            "description": "The figure depicts a CCNL invocation, which is a crucial step in the process of creating a network. It illustrates the steps involved in initiating a connection between two devices, such as a router and a switch, to establish a network. The figure shows the network interface card (NIC) and the network interface controller (NIC) in action, with the NIC initiating the connection and the NICC (Network Control Center) managing the process. The figure is essential for understanding the network's architecture and the steps involved in creating a network.\nFigure A.5.1: CCNL invocation\nFigure A.5.1 shows a basic signalling flow for a CCNL invocation.\nCall flows\n1 to 4:\tThe communication is initiated by UE-A by sending an INVITE request. The Request-URI will include the URI of UE-B. After IFC evaluation in the S-CSCF the INVITE request is routed to the originating AS and after that to the terminating AS, in accordance with the procedures for services for unregistered users as described in 3GPP TS 24.229 [2].\nTable A.5-1: SIP INVITE request (UE to P-CSCF)\nINVITE sip:user2_public2@home2.net SIP/2.0\nVia: SIP/2.0/UDP [5555::aaa:bbb:ccc:ddd]:1357;comp=sigcomp;branch=z9hG4bKnashds7\nMax-Forwards: 70\nRoute: sip:pcscf1.home1.net:7531;lr;comp=sigcomp>, <sip:orig@scscf1.home1.net;lr>\nAccept-Contact: *;+g.3gpp.icsi-ref=\"urn%3Aurn-7%3gpp-service.ims.icsi.mmtel\"\nPrivacy: none\nFrom: <sip:user1_public1@home1.net>; tag=171828\nTo: <sip:user2_public2@home2.net>\nCall-ID: cb0s2sdfglkj490333\nCSeq: 127 INVITE\nSupported: 100rel; precondition, gruu, 199\nRequire: sec-agree\nContact: <sip:user1_public1@home1.net;gr=urn:uuid:f81d4fae-7dec-11d0-a765-00a0c91e6bf6>;+g.3gpp.icsi-ref=\"urn%3Aurn-7%3gpp-service.ims.icsi.mmtel\"\nAllow: INVITE, ACK, CANCEL, BYE, PRACK, UPDATE\nAccept: application/sdp,application/3gpp-ims+xml\nContent-Type: application/sdp\nContent-Length: (…)\n\nv=0\no=- 2987933615 2987933615 IN IP6 5555::aaa:bbb:ccc:ddd\ns=-\nc=IN IP6 5555::aaa:bbb:ccc:ddd\nt=0 0\nm=video 3400 RTP/AVP 98 99\nb=AS:75\na=curr:qos local none\na=curr:qos remote none\na=des:qos mandatory local sendrecv\na=des:qos none remote sendrecv\na=inactive\na=rtpmap:98 H263\na=fmtp:98 profile-level-id=0\na=rtpmap:99:MPVMP4V-ES\nm=audio 3456 RTP/AVP 97 96\nb=AS:25.4\na=curr:qos local none\na=curr:qos remote none\na=des:qos mandatory local sendrecv\na=des:qos none remote sendrecv\na=inactive\na=rtpmap:97 AMR\na=fmtp:97 mode-set=0,2,5,7; maxframes=2\na=rtpmap:96 telephone-event\n\n5 to 6:\tThe terminating AS inserts a Call-Info header field in the 480 (Temporarily Unavailable) response according to the procedures described in RFC 6910 [5]. The Call-Info header field will contain the URI of the terminating AS with an \"m\" header field parameter set to \"NL\" (not logged-in). It further includes a \"purpose\" header field parameter set to \"call-completion\". The 480 (Temporarily Unavailable) response is routed back to the originating AS.\nTable A.5-2: 480 (Temporarily Unavailable) response ( to S-CSCF))\nSIP/2.0 480 Temporarily Unavailable\nVia: SIP/2.0/UDP tas.home2.net;branch= z9hG4bK332b23.1, SIP/2.0/UDP scscf2.home2.net;branch=z9hG4bK344a65.1, SIP/2.0/UDP icscf2_s.home2.net;branch=z9hG4bKj5hgrt2o, SIP/2.0/UDP scscf1.home1.net;branch=z9hG4bKehuehjgt, SIP/2.0/UDP oas.home1.net;branch=z9hG4bKnashds7, SIP/2.0/UDP pcscf1.visited1.net;branch=z9hG4bK240f34.1, [5555::aaa:bbb:ccc:ddd]:1357;comp=sigcomp;branch=z9hG4bKnashds7\nFrom: <sip:user1_public1@home1.net>;tag=171828\nTo: <sip:user2_public2@home2.net>;tag=314159\nCall-ID: cb03a0s09a2sdfglkj490333\nCSeq: 127 INVITE\nRetry-After: 3600\nContact: <sip:user2_public2@visited2.net;gr=urn:uuid:f81d4fae-7dec-11d0-a765-00a0c91ewxyz>;+g.3gpp.icsi-ref=\"urn%3Aurn-7%3gpp-service.ims.icsi.mmtel\"\nContent-Length: 0\nCall-Info:<sip:tas.home2.net>;purpose=call-completion;m=NL\n\n\n7 to 8:\tThe originating AS sends back a 183 (Session Progress) response to UE-A and initiates IVR procedures. User A is informed that CCNL is possible. User A activates CCNL.\n9 to 10:\tThe originating AS subscribes for the call-completion event package according to the procedures described in RFC 6910 [5] at the terminating AS. The originating AS generates a SUBSCRIBE request which Request-URI will include the URI of the terminating AS. In order to mark the SUBSCRIBE request as a request for CCNL, the originating AS adds the \"m\" SIP URI parameter with the value \"NL\" to the Request-URI. The From header field will include the caller URI. The To header field will include the callee URI. The originating AS also adds a Call-Info header field with the URI of UE-A from the P-Asserted-Identity, a \"purpose\" header field parameter set to \"call-completion\", and an m-parameter set to \"NL\".\nTable A.5-3: SUBSCRIBE request (Originating AS to S-CSCF)\nSUBSCRIBE sip:tas.home2.net;m=NL SIP/2.0;\nVia: SIP/2.0/UDP oas.home1.net;branch=z9hG4bKnashds7\nMax-Forwards: 70\nRoute: <sip:scscf1.home1.net>\nP-Asserted-Identity: <sip:oas.home1.net>\nFrom: <sip:user1_public1@home1.net>;tag=31415\nTo: <sip:user2_public2@home2.net>\nCall-ID: b89rjhnedlrfjflslj40a222\nCSeq: 61 SUBSCRIBE\nEvent: call-completion\nExpires: 2700\nContact: <sip:oas.home1.net>\nContent-Length: 0\nCall-Info:<sip:user1_public1@home1.net>;purpose=call-completion;m=NL\n\n\n11 to 12:\tThe terminating AS accepts the subscription and starts registration state supervision procedures on the callee.\n13 to 16:\tThe terminating AS sends a notification to the originating AS, according to the procedures described in RFC 6910 [5]. The Request-URI of the NOTIFY request will include the URI of the originating AS. The body contains parameters informing of the caller’s call-completion state 'queued' and the availability of the call-completion service retention at the terminating AS. After confirmation of the notification the originating AS starts announcements procedures informing about the activation of CCNL.\nTable A.5-5: NOTIFY request (Terminating AS to S-CSCF)\nNOTIFY sip:oas.home1.net SIP/2.0\nVia: SIP/2.0/UDP tas.home2.net;branch=z9hG4bK348923.1\nMax-Forwards: 70\nRoute: <sip:scscf2.home2.net>\nP-Asserted-Identity: <sip:tas.home2.net>\nFrom: <sip:user2_public2@home2.net>;tag=151170\nTo: <sip:user1_public1@home1.net>;tag=31415\nCall-ID: b89rjhnedlrfjflslj40a222\nCSeq: 42 NOTIFY\nSubscription-State: active ;expires=10800\nEvent: call-completion\nContact: <sip:tas.home2.net>\nContent-Type: application/call-completion\nContent-Length: (...)\n\ncc-state: queued\ncc-service retention\n\n\n17 to 18:\tThe originating AS forwards the 480 (Temporarily Unavailable) response to UE-A.\n",
            "summary": "",
            "tables": [],
            "figures_meta_data": [],
            "subsections": []
        },
        {
            "title": "A.6\tCCNL call",
            "description": "The figure depicts a CCNL call, which is a crucial component of the 5G network. It illustrates the signal propagation in a 5G network, showing how signals reflect off buildings (NLOS) and combine at the receiver. Key components include the base station (gNB), user equipment (UE), and scatterers. The diagram highlights beamforming techniques to mitigate interference.\nFigure A.6.1: CCNL call\nFigure A.6.1 shows a basic signalling flow for a CCNL call.\nCall flows\n\n1 to 4:\t\tThe terminating AS sends a NOTIFY request to the originating AS, according to the procedures described in RFC 6910 [5]. The body contains a parameter informing of the caller’s call-completion state ‘ready’ (for recall). The originating AS confirms the notification.\nTable A.6-1: NOTIFY request (Terminating AS to S-CSCF)\nNOTIFY sip:oas.home1.net SIP/2.0\nVia: SIP/2.0/UDP tas.home2.net;branch=z9hG4bK348923.1\nMax-Forwards: 70\nRoute: <sip:scscf2.home2.net>\nP-Asserted-Identity: <sip:tas.home2.net>\nFrom: <sip:user2_public2@home2.net>;tag=151170\nTo: <sip:user1_public1@home1.net>;tag=31415\nCall-ID: b89rjhnedlrfjflslj40a222\nCSeq: 47 NOTIFY\nSubscription-State: active ;expires=4630\nEvent: call-completion\nContact: <sip:tas.home2.net>\nContent-Type: application/call-completion\nContent-Length: (...)\n\ncc-state: ready\ncc-service retention\n\n\n5 to 8:\t\tThe originating AS initiates the CCNL recall to UE A by sending a REFER request, the \"m\" SIP URI parameter set to \"NL\" will be included in the Request-URI of the REFER request. UE-A confirms the REFER request.\nTable A.6-2: REFER request (Originating AS to S-CSCF)\nREFER sip:user1_public1@home1.net;m=NL SIP/2.0;\nVia: SIP/2.0/UDP oas.home1.net;branch=z9hG4bK23273846\nMax-Forwards: 70\nRoute: <sip:scscf1.home1.net;lr>\nP-Asserted-Identity: <sip:oas.home1.net>\nFrom: <sip:oas.home1.net>; tag=161828\nTo: <sip:user1_public1@home1.net>\nCall-ID: cb03a0s09a2sdfglkj490333\nCseq: 127 REFER\nRefer-To: <sip:user2_public2@home2.net;method=INVITE>\nReferred-By: <sip:oas.home1.net>\nContact: <sip:oas.home1.net>\nContent-Length: 0\n\n9 to 10:\tUE-A starts the CCNL call by sending an INVITE request to UE-B.\n11 to 13:\t\tIn order to mark the INVITE request as a prioritized request for call-completion, the originating AS adds the \"m\" SIP URI parameter with the value \"NL\" to the Request-URI, and forwards the INVITE request to UE-B. The originating AS also adds a Call-Info header field with the URI of UE-A from the P-Asserted-Identity from the original communication, a \"purpose\" header field parameter set to \"call-completion\", and a m-parameter set to \"NL\".\nTable A.4-3: SIP INVITE request ( to S-CSCF)\nINVITE sip:user2_public2@home2.net;m=NL SIP/2.0;\nVia: SIP/2.0/UDP [5555::aaa:bbb:ccc:ddd]:1357;comp=sigcomp;branch=z9hG4bKnashds7\nMax-Forwards: 70\nRoute: sip:pcscf1.home1.net:7531;lr;comp=sigcomp>, <sip:orig@scscf1.home1.net;lr>\nAccept-Contact: *;+g.3gpp.icsi-ref=\"urn%3Aurn-7%3gpp-service.ims.icsi.mmtel\"\nPrivacy: none\nFrom: <sip:user1_public1@home1.net>; tag=171829\nTo: <sip:user2_public2@home2.net>\nCall-ID: cb03a0s09a2sdfglkj490444\nCseq: 154 INVITE\nSupported: 100rel; precondition, gruu, 199\nRequire: sec-agree\nContact: <sip:user1_public1@home1.net;gr=urn:uuid:f81d4fae-7dec-11d0-a765-00a0c91e6bg6>;+g.3gpp.icsi-ref=\"urn%3Aurn-7%3gpp-service.ims.icsi.mmtel\"\nAllow: INVITE, ACK, CANCEL, BYE, PRACK, UPDATE\nAccept: application/sdp,application/3gpp-ims+xml\nContent-Type: application/sdp\nContent-Length: (…)\n\n",
            "summary": "",
            "tables": [],
            "figures_meta_data": [],
            "subsections": []
        },
        {
            "title": "B.0\tGeneral",
            "description": "This annex provides an example of a filter criterion that triggers SIP requests that are subject to initial filter criteria evaluation.\n",
            "summary": "",
            "tables": [],
            "figures_meta_data": [],
            "subsections": []
        },
        {
            "title": "B.1\tOriginating side",
            "description": "An example of an IFC when the CCBS, CCNR or CCNL services are active at the originating S-CSCF is:\n-\tMethod: INVITE.\nEditor’s note:\tAn example for Filter Criteria for unregistered user is needed for the CCNL service.\n",
            "summary": "",
            "tables": [],
            "figures_meta_data": [],
            "subsections": []
        },
        {
            "title": "B.2\tTerminating side",
            "description": "Examples of the IFC at the terminating S-CSCF when the user is not registered and CCNL is supported are:\n-\tMethod: INVITE.\n-\tMethod: SUBSCRIBE.\nExamples of the IFC at the terminating S-CSCF when the user is registered and CCNL is supported are:\n-\tMethod REGISTER.\nExamples of the IFC at the terminating S-CSCF when the user is registered and CCBS or CCNR or both are supported are:\n-\tMethod: INVITE.\n-\tMethod: SUBSCRIBE.\n",
            "summary": "",
            "tables": [],
            "figures_meta_data": [],
            "subsections": []
        },
        {
            "title": "C.1\tIANA registry for application media types",
            "description": "",
            "summary": "",
            "tables": [],
            "figures_meta_data": [],
            "subsections": [
                {
                    "title": "C.1.1\tIANA registration template for application/vnd.3gpp.ccrr+xml",
                    "description": "",
                    "summary": "",
                    "text_content": "Editor's note: The MIME type \"application/vnd.3gpp.ccrr+xml\" as defined in this subclause is to be registered in the IANA registry for Application Media Types based upon the following template.\nMIME media type name:\napplication\nMIME subtype name:\nvnd.3gpp.ccrr+xml\nRequired parameters:\nNone\nOptional parameters:\n\"charset\"\tthe parameter has identical semantics to the charset parameter of the \"application/xml\" media type as specified in IETF RFC 3023 [11].\nEncoding considerations:\nSame as encoding considerations of application/xml as specified in IETF RFC 3023 [11]\nSecurity considerations:\nSame as general security considerations for application/xml as specified in section 10 of IETF RFC 3023 [11]. In addition, this content type provides a format for exchanging information in SIP, so the security considerations from IETF RFC 3261 [13] apply. Furthermore, 3GPP has defined mechanisms for ensuring the privacy and integrity protection of the bodies of XCAP messages used in the 3GPP IM CN Subsystem.\nInteroperability considerations:\nSame as interoperability considerations as specified in section 3.1 of IETF RFC 3023 [11].\nPublished specification:\n3GPP TS 24.642 \"Completion of Communications to Busy Subscriber (CCBS), Completion of Communications by No Reply (CCNR) using IP Multimedia (IM) Core Network (CN) subsystem\", version 9.1.0, available via http://www.3gpp.org/specs/numbering.htm.\nApplications which use this media:\nApplications that use the 3GPP IM CN Subsystem as defined by 3GPP.\nIntended usage:\nCOMMON\nAdditional information:\n1.\tMagic number(s): none\n2.\tFile extension(s): none\n3.\tMacintosh file type code: none\n4.\tObject Identifiers: none\n\n\n\n\n",
                    "tables": [
                        {
                            "description": "",
                            "table number": 3,
                            "summary": "",
                            "name": ""
                        },
                        {
                            "description": "",
                            "table number": 4,
                            "summary": "",
                            "name": ""
                        },
                        {
                            "description": "",
                            "table number": 5,
                            "summary": "",
                            "name": ""
                        }
                    ],
                    "figures_meta_data": [],
                    "subsubsections": []
                }
            ]
        }
    ]
}