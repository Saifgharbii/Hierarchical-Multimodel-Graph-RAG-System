{
    "document_name": "29540-i30.docx",
    "content": [
        {
            "title": "Foreword",
            "description": "This Technical Specification has been produced by the 3rd Generation Partnership Project (3GPP).\nThe contents of the present document are subject to continuing work within the TSG and may change following formal TSG approval. Should the TSG modify the contents of the present document, it will be re-released by the TSG with an identifying change of release date and an increase in version number as follows:\nVersion x.y.z\nwhere:\nx\tthe first digit:\n1\tpresented to TSG for information;\n2\tpresented to TSG for approval;\n3\tor greater indicates TSG approved document under change control.\ny\tthe second digit is incremented for all changes of substance, i.e. technical enhancements, corrections, updates, etc.\nz\tthe third digit is incremented when editorial only changes have been incorporated in the document.\nIn the present document, modal verbs have the following meanings:\nshall\tindicates a mandatory requirement to do something\nshall not\tindicates an interdiction (prohibition) to do something\nThe constructions \"shall\" and \"shall not\" are confined to the context of normative provisions, and do not appear in Technical Reports.\nThe constructions \"must\" and \"must not\" are not used as substitutes for \"shall\" and \"shall not\". Their use is avoided insofar as possible, and they are not used in a normative context except in a direct citation from an external, referenced, non-3GPP document, or so as to maintain continuity of style when extending or modifying the provisions of such a referenced document.\nshould\tindicates a recommendation to do something\nshould not\tindicates a recommendation not to do something\nmay\tindicates permission to do something\nneed not\tindicates permission not to do something\nThe construction \"may not\" is ambiguous and is not used in normative elements. The unambiguous constructions \"might not\" or \"shall not\" are used instead, depending upon the meaning intended.\ncan\tindicates that something is possible\ncannot\tindicates that something is impossible\nThe constructions \"can\" and \"cannot\" are not substitutes for \"may\" and \"need not\".\nwill\tindicates that something is certain or expected to happen as a result of action taken by an agency the behaviour of which is outside the scope of the present document\nwill not\tindicates that something is certain or expected not to happen as a result of action taken by an agency the behaviour of which is outside the scope of the present document\nmight\tindicates a likelihood that something will happen as a result of action taken by some agency the behaviour of which is outside the scope of the present document\nmight not\tindicates a likelihood that something will not happen as a result of action taken by some agency the behaviour of which is outside the scope of the present document\nIn addition:\nis\t(or any other verb in the indicative mood) indicates a statement of fact\nis not\t(or any other negative verb in the indicative mood) indicates a statement of fact\nThe constructions \"is\" and \"is not\" do not indicate requirements.\n",
            "summary": "",
            "tables": [],
            "figures_meta_data": [],
            "subsections": []
        },
        {
            "title": "1\tScope",
            "description": "The present document specifies the stage 3 protocol and data model for the Nsmsf Service Based Interface. It provides stage 3 protocol definitions and message flows, and specifies the API for each service offered by the SMSF.\nThe 5G System stage 2 architecture and procedures are specified in 3GPP TS 23.501 [2] and 3GPP TS 23.502 [3].\nThe Technical Realization of the Service Based Architecture and the Principles and Guidelines for Services Definition are specified in 3GPP TS 29.500 [4] and 3GPP TS 29.501 [5].\n",
            "summary": "",
            "tables": [],
            "figures_meta_data": [],
            "subsections": []
        },
        {
            "title": "2\tReferences",
            "description": "The following documents contain provisions which, through reference in this text, constitute provisions of the present document.\n-\tReferences are either specific (identified by date of publication, edition number, version number, etc.) or non-specific.\n-\tFor a specific reference, subsequent revisions do not apply.\n-\tFor a non-specific reference, the latest version applies. In the case of a reference to a 3GPP document (including a GSM document), a non-specific reference implicitly refers to the latest version of that document in the same Release as the present document.\n[1]\t3GPP TR 21.905: \"Vocabulary for 3GPP Specifications\".\n[2]\t3GPP TS 23.501: \"System Architecture for the 5G System; Stage 2\".\n[3]\t3GPP TS 23.502: \"Procedures for the 5G System; Stage 2\".\n[4]\t3GPP TS 29.500: \"5G System; Technical Realization of Service Based Architecture; Stage 3\".\n[5]\t3GPP TS 29.501: \"5G System; Principles and Guidelines for Services Definition; Stage 3\".\n[6]\t3GPP TS 29.571: \"5G System; Common Data Types for Service Based Interfaces; Stage 3\".\n[7]\tIETF RFC 9113: \"HTTP/2\".\n[8]\tIETF RFC 8259: \"The JavaScript Object Notation (JSON) Data Interchange Format\".\n[9]\tIETF RFC 2387: \"The MIME Multipart/Related Content-type\".\n[10]\tIETF RFC 2045: \"Multipurpose Internet Mail Extensions (MIME) Part One: Format of Internet Message Bodies\".\n[11]\t3GPP TS 23.040: \"Technical realization of the Short Message Service (SMS)\".\n[12]\t3GPP TS 24.011: \"Point-to-Point (PP) Short Message Service (SMS) support on mobile radio interface\".\n[13]\t3GPP TS 33.501: \"Security architecture and procedures for 5G system\".\n[14]\tIETF RFC 6749: \"The OAuth 2.0 Authorization Framework\".\n[15]\t3GPP TS 29.510: \"Network Function Repository Services; Stage 3\".\n[16]\t3GPP TR 21.900: \"Technical Specification Group working methods\".\n[17]\tIETF RFC 9457: \"Problem Details for HTTP APIs\".\n[18]\tVoid.\n[19]\tOpenAPI: \"OpenAPI Specification Version 3.0.0\", .\n[20]\tIETF RFC 6902: \"JavaScript Object Notation (JSON) Patch\".\n[21]\t3GPP TS 23.540: \"5G System; Technical realization of Service Based Short Message Service Stage 2\".\n[22]\t3GPP TS 29.577: \"5G System; IP Short Message Gateway and SMS Router For Short Message Services Stage 3\".\n[23]\tIETF RFC 9110: \"HTTP Semantics\".\n",
            "summary": "",
            "tables": [],
            "figures_meta_data": [],
            "subsections": []
        },
        {
            "title": "3\tDefinitions and abbreviations",
            "description": "",
            "summary": "",
            "tables": [],
            "figures_meta_data": [],
            "subsections": [
                {
                    "title": "3.1\tDefinitions",
                    "description": "",
                    "summary": "",
                    "text_content": "For the purposes of the present document, the terms and definitions given in 3GPP TR 21.905 [1] and the following apply. A term defined in the present document takes precedence over the definition of the same term, if any, in 3GPP TR 21.905 [1].\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "3.2\tAbbreviations",
                    "description": "",
                    "summary": "",
                    "text_content": "For the purposes of the present document, the abbreviations given in 3GPP TR 21.905 [1] and the following apply. An abbreviation defined in the present document takes precedence over the definition of the same abbreviation, if any, in 3GPP TR 21.905 [1].\n5GC\t5G Core Network\nAMF\tAccess Management Function\nJSON\tJavascript Object Notation\nSMSF\tSMS Function\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                }
            ]
        },
        {
            "title": "4\tOverview",
            "description": "Within the 5GC, the SMSF offers services to the AMF, SMS-GMSC, IP-SM-GW and SMS Router via the Nsmsf service based interface (see 3GPP TS 23.501 [2], 3GPP TS 23.502 [3] and 3GPP TS 23.540 [21]).\nFigures 4.1 provides the reference model (in service based interface representation and in reference point representation), with focus on the SMSF and the scope of the present specification.\nThe figure depicts a reference model for a 5G network, showing the various components and their interconnections. The model includes a base station (gNB), user equipment (UE), and scatterers. Key components include the base station, which is responsible for transmitting signals, and the user equipment, which receives and processes the signals. Scatterers are the physical elements that reflect the signals, such as buildings and trees. The figure highlights the importance of beamforming techniques to mitigate interference and ensure reliable communication.\nFigure 4-1: Reference model – SMSF\nThe functionalities supported by the SMSF are listed in clause 6.2.13 of 3GPP TS 23.501 [2].\nThe services and service operations provided by the Nsmsf interface are listed in clause 5.2.9 of 3GPP TS 23.502 [3] and clause 6.4 of 3GPP TS 23.540 [21].\n",
            "summary": "",
            "tables": [],
            "figures_meta_data": [],
            "subsections": []
        },
        {
            "title": "5\tServices offered by the SMSF",
            "description": "",
            "summary": "",
            "tables": [],
            "figures_meta_data": [],
            "subsections": [
                {
                    "title": "5.1\tIntroduction",
                    "description": "",
                    "summary": "",
                    "text_content": "The SMSF supports the following services.\nTable 5.1-1: NF Services provided by SMSF\n\nTable 5.1-2 summarizes the corresponding APIs defined for this specification.\nTable 5.1-2: API Descriptions\n\n",
                    "tables": [
                        {
                            "description": "Table 5.1-1: NF Services provided by SMSF",
                            "table number": 3,
                            "summary": "",
                            "name": ""
                        },
                        {
                            "description": "Table 5.1-2: API Descriptions",
                            "table number": 4,
                            "summary": "",
                            "name": ""
                        }
                    ],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "5.2\tNsmsf_SMService Service",
                    "description": "",
                    "summary": "",
                    "text_content": "",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": [
                        {
                            "title": "5.2.1\tService Description",
                            "text_content": "The Nsmsf_SMService service provides the service capability for the NF Service Consumer (e.g. AMF) to authorize SMS and activate SMS for a service user on SMSF, for the NF Service Consumer (e.g. SMS GMSC, SMS Router and IP-SM-GW) to send the SMS payload in downlink direction to the SMSF. The following are the key functionalities of this NF service:\n-\tActivation or deactivation of SMS service for a given service user, which results in creating/updating/deleting an UE Context for SMS in SMSF;\n-\tSend SMS payload in uplink direction to SMSF;\n-\tSend SMS payload in downlink direction to SMSF.\nThe Nsmsf_SMService service supports the following service operations.\nTable 5.2.1-1: Service operations supported by the Nsmsf_SMService service\n\n",
                            "figures_meta_data": [],
                            "tables": [
                                {
                                    "description": "Table 5.2.1-1: Service operations supported by the Nsmsf_SMService service",
                                    "table number": 5,
                                    "summary": "",
                                    "name": ""
                                }
                            ]
                        },
                        {
                            "title": "5.2.2\tService Operations",
                            "text_content": "This clause introduces the related procedures using Nsmsf_SMService service operations for supporting SMS service.\nThe Activate service operation shall be used by the NF Service Consumer (e.g. AMF) to activate SMS service for a given service user, which results in creating or updating an individual UE Context for SMS in the SMSF, in the following procedures:\n-\tRegistration Procedure for SMS over NAS (see clause 4.13.3.1 of 3GPP TS 23.502 [3]);\n-\tRegistration Update Procedure for SMS over NAS due to AMF change (see clause 4.13.3.1 of 3GPP TS 23.502 [3]);\n-\tRegistration Update Procedure for SMS over NAS to add authorization for SMS over a new additional Access Type;\n-\tAMF initiated modification to UE Context in SMSF, e.g. modify the backup AMF information.\nThere shall be only one individual UE Context for SMS per service user.\nThe NF Service Consumer (e.g. AMF) shall activate SMS service for a given service user by using the HTTP PUT method as shown in Figure 5.2.2.2.2-1.\nThe figure depicts the activation of the SMS service, showing the various steps involved in the SMS activation process. The figure includes a user interface (UI) with buttons for sending a text message, a confirmation message, and a message status. The UI is designed to be user-friendly and intuitive, with clear labels and icons to guide the user through the process. The figure also includes a message status bar at the bottom, displaying the current status of the SMS activation process. Overall, the figure provides a clear and concise visual representation of the SMS activation process, making it easy for users to understand and navigate through the process.\nFigure 5.2.2.2.2-1: Activation of SMS service\n1.\tThe NF Service Consumer (e.g. AMF) shall send a PUT request to the resource representing the UE Context for SMS (i.e. …/ue-contexts/{supi}) in the SMSF to activate SMS service for a given service user. The content of the PUT request shall contain a representation of the individual UE Context resource to be created or updated.\nDepending on whether the target UE Context for SMS has already been created, the SMSF performs 2a or 2b:\n2a.\tIf the target UE Context for SMS is not created in SMSF, the SMSF registers itself in UDM for the Access Type(s) provided, retrieves subscription data from the UDM, performs service authorization for the given UE, and create UE Context for SMS for this UE.\nIf successful, \"201 Created\" shall be returned, the content of the PUT response shall contain the representation of the created resource and the \"Location\" header shall contain the URI of the created resource.\n2b.\tIf the target UE Context for SMS has already been created, the SMSF updates the UE Context for SMS with the NF Service Consumer (e.g. AMF) provided parameters.\nIf successful, \"204 No Content\" shall be returned.\n2c.\tIf the target UE Context for SMS has already been created and the NF Service Consumer (e.g. AMF) provided parameters contains 2 access types (i.e. an additional Access Type), the SMSF registers itself in UDM for the new Access Type for the given UE, performs service authorization for the given UE for the new Access Type and updates the UE context for SMS for this UE with the new additional Access Type.\nIf successful, \"204 No Content\" shall be returned.\n2d.\tOn failure, the appropriate HTTP status code (e.g. \"403 Forbidden\") indicating the error shall be returned.\nA ProblemDetails IE shall be included in the content of PUT response, with the \"cause\" attribute of ProblemDetails set to application error codes specified in table 6.1.7.3-1.\n2e.\tOn redirection, the appropriate HTTP status code (e.g. \"307 Temporary Redirect\") shall be returned.\nA RedirectResponse IE may be included in the content of PUT response, as specified in table 6.1.3.3.3.1-3.\nThe NF Service Consumer (e.g. AMF) may update UE context in SMSF for a given service user by using the HTTP PATCH method as shown in Figure 5.2.2.2.3-1.\nThe figure depicts a simplified representation of an SMSF (Service Management System) context, with a focus on the HTTP PATCH method for modifying the context. The figure includes a user interface (UI) for modifying the SMSF context, with a button labeled \"Modify\" for initiating the HTTP PATCH request. The UI includes a form for entering the desired changes, such as the new SMSF context, and a submit button for sending the request. The figure also includes a status bar indicating the progress of the request, and a confirmation message indicating the success of the request.\nFigure 5.2.2.2.3-1: Modify UE Context in SMSF using HTTP PATCH Method\n1.\tThe NF Service Consumer (e.g. AMF) shall send a PATCH request to the resource representing the UE Context for SMS (i.e. …/ue-contexts/{supi}) in the SMSF to modify the UE Context in SMSF for a given service user. The request body shall contain a list of PatchItem for each the JSON pointer is set to the attribute to be modified.\n2a.\tOn success, the request is accepted, and all the modification instructions in the PATCH request have been implemented, the SMSF shall respond with \"204 No Content\".\n2b.\tOn partial success, the request is accepted, but some of the modification instructions in the PATCH request have been discarded:\n-\tthe SMSF shall respond with \"200 OK\" including PatchResult to indicate the failed modifications, if the NF service consumer has included in the supported-feature query parameter the \"PatchReport\" feature; or\n-the SMSF shall respond with \"200 OK\" with the response body containing UeSmsContextData, if the NF service consumer does not support the \"PatchReport\" feature.\n2c.\tOn failure, the appropriate HTTP status code (e.g. \"403 Forbidden\") indicating the error shall be returned. A ProblemDetails IE shall be included in the content of PATCH response, with the \"cause\" attribute of ProblemDetails set to application error codes specified in table 6.1.7.3-1.\nIf the modification is not allowed, HTTP status code \"403 Forbidden\" should be returned including additional error information in the response body (in the \"ProblemDetails\" element).\nIf the resource does not exist, e.g. the attribute to be modified cannot be found, HTTP status code \"404 Not Found\" should be returned including additional error information in the response body (in the \"ProblemDetails\" element).\n2d.\tOn redirection, the appropriate HTTP status code (e.g. \"307 Temporary Redirect\") shall be returned. A RedirectResponse IE may be included in the content of PATCH response, as specified in table 6.1.3.3.3.1-3.\nThe Deactivate service operation shall be used by the NF Service Consumer (e.g. AMF) to deactivate SMS service for a given service user, which results in deleting or updating an individual UE Context for SMS in the SMSF, in the following procedures:\n-\tDe-Registration Procedure to remove SMS service authorization from SMSF for SMS over NAS (see clause 4.13.3.2 of 3GPP TS 23.502 [3]);\n-\tDe-Registration procedure to remove SMS service authorization from SMSF for one of the registered Access Type (see clause 4.13.3.2 of 3GPP TS 23.502 [3]);\nThe NF Service Consumer (e.g. AMF) shall deactivate SMS service for a given service user by using the HTTP DELETE method as shown in Figure 5.2.2.3.2-1.\nThe figure depicts a 3D model of a mobile phone's SIM card, showing the various components and their connections. The SIM card is shown in a deactivated state, indicating that the service has been disabled. The figure provides a visual representation of the SIM card's structure and the connections between the various components, such as the SIM card, the SIM tray, and the SIM card slot. This figure is useful for understanding the internal structure of a mobile phone's SIM card and its connections to the rest of the device.\nFigure 5.2.2.3.2-1: Deactivation of SMS service\n1.\tThe NF Service Consumer (e.g. AMF) shall send a DELETE request to the resource representing the UE Context for SMS (i.e. …/ue-contexts/{supi}) in the SMSF.\n2a.\tThe SMSF deactivates the SMS service for the service user, and deletes the UE context for SMS from the SMSF.\nOn success, \"204 No Content\" shall be returned.\n2b.\tOn failure, the appropriate HTTP status code (e.g. \"404 Not Found\") indicating the error shall be returned.\nA ProblemDetails IE shall be included in the content of DELETE response, with the \"cause\" attribute of ProblemDetails set to application error codes specified in table 6.1.7.3-1.\n2c.\tOn redirection, the appropriate HTTP status code (e.g. \"307 Temporary Redirect\") shall be returned.\nA RedirectResponse IE may be included in the content of DELETE response, as specified in table 6.1.3.3.3.2-3.\nWhen the UE has SMS service activated on both of the Access Types and the NF Service Consumer (e.g. AMF) wants to deactivate SMS service for the given UE for one of the affected Access Type, the  NF Service Consumer (e.g. AMF) shall use HTTP PUT method as shown in Figure 5.2.2.3.3-1.\nThe figure depicts a simplified representation of the SMS service authorization process, highlighting the removal of SMS service authorization over one of the access types. The figure shows the various access types, including SMS, and the process of authorization, with the removal of SMS service authorization highlighted.\nFigure 5.2.2.3.3-1: Removal of SMS service authorization over one of the access types\n1.\tThe NF Service Consumer (e.g. AMF) shall send a PUT request to the resource representing the UE Context for SMS (i.e. …/ue-contexts/{supi}) in the SMSF. The content of the PUT request shall contain a representation of the individual UE Context resource to be updated. Only one Access Type that is allowed for SMS service shall be included in the content of PUT request.\n2a.\tSince the target UE Context for SMS was already created at the SMSF with both 3GPP and non-3GPP Access Types for the same NF Service Consumer (e.g. AMF) and the NF Service Consumer provided parameters contains only one Access Type, the SMSF deregisters itself in the UDM for the affected Access Type (i.e. the access type not included in the PUT request) for the given UE and updates the UE context for SMS by removing the affected Access Type.\nOn success, \"204 No Content\" shall be returned.\n2b.\tOn failure, the appropriate HTTP status code (e.g. \"403 Forbidden\") indicating the error shall be returned.\nA ProblemDetails IE shall be included in the content of PUT response, with the \"cause\" attribute of ProblemDetails set to application error codes specified in table 6.1.7.3-1.\n2c.\tOn redirection, the appropriate HTTP status code (e.g. \"307 Temporary Redirect\") shall be returned.\nA RedirectResponse IE may be included in the content of PUT response, as specified in table 6.1.3.3.3.1-3.\nThe UplinkSMS service operation shall be used by NF Service Consumer (e.g. AMF) to send SMS payload (e.g. SMS message or Ack) in the uplink direction to SMSF, in the following procedures:\n-\tMO SMS delivery procedure (see clause 4.13.3.3-4.13.3.5 of 3GPP TS 23.502 [3]);\n-\tMT SMS delivery procedure (see clause 4.13.3.6-4.13.3.8 of 3GPP TS 23.502 [3]);\nThe NF Service Consumer (e.g. AMF) shall send SMS payload in uplink direction by using the \"sendsms\" custom operation as shown in Figure 5.2.2.4.2-1.\nThe figure depicts a 4G LTE network scenario, showing the transmission of an SMS payload in the uplink direction. The network consists of base stations (BSs) and mobile stations (MSs), with the BSs acting as the primary source of data transmission. The MSs are responsible for receiving and processing the SMS payload. The figure illustrates the use of various technologies, such as beamforming, to improve signal quality and reduce interference.\nFigure 5.2.2.4.2-1: Send SMS payload in uplink direction\n1.\tThe NF Service Consumer (e.g. AMF) shall send a POST request to the resource representing the UEContext (i.e. …/ue-contexts/{supi}/sendsms) of the SMSF. The content of the POST request shall contain the SMS record to be sent.\n2a.\tOn success, \"200 OK\" shall be returned with \"SmsRecordDeliveryData\" object in the response body.\nThe SMSF may immediately respond to the NF service consumer, after successful inspection of the SMS payload, and set the \"deliveryStatus\" attribute to \"SMS_DELIVERY_SMSF_ACCEPTED\"; the SMSF may also attempt to forward the SMS payload to SMS-GMSC/IWMSC/IP-SM-GW/SMS Router.\nIf successful, \"200 OK\" shall be returned. If needed, the payload body of the POST response shall contain the status of SMS record delivery attempts at the SMSF.\n2b.\tOn failure, the appropriate HTTP status code (e.g. \"403 Forbidden\") indicating the error shall be returned.\nA ProblemDetails IE shall be included in the content of POST response, with the \"cause\" attribute of ProblemDetails set to application error codes specified in table 6.1.7.3-1.\n2c.\tOn redirection, the appropriate HTTP status code (e.g. \"307 Temporary Redirect\") shall be returned.\nA RedirectResponse IE may be included in the content of POST response, as specified in table 6.1.3.3.4.2.2-2.\nThe MtForwardSm service operation shall be used by NF Service Consumer (e.g. SMS GMSC, SMS Router and IP-SM-GW) to send SMS payload (e.g. SMS message) in the downlink direction to SMSF, in the following procedures:\n-\tSuccessful Mobile Terminated short message transfer as defined in 3GPP TS 23.540 [21] clause 5.1.2, clause 5.1.3 and clause 5.1.4.\n-\tUnsuccessful Mobile Terminated short message transfer as defined in 3GPP TS 23.540 [21] clause 5.1.5, clause 5.1.6 and clause 5.1.9.\nThe NF Service Consumer (e.g. SMS GMSC, SMS Router and IP-SM-GW) shall send SMS payload in downlink direction by using the \"send-mt-sms\" custom operation as shown in Figure 5.2.2.5.2-1.\nThe figure depicts a 5G downlink transmission scenario, showing the SMS payload being sent from the sender to the receiver. The figure illustrates the use of various components such as the base station (gNB), user equipment (UE), and the network infrastructure, including the optical backbone and the network slicing. The figure highlights the importance of network slicing in providing differentiated services and enabling efficient resource allocation.\nFigure 5.2.2.5.2-1: Send SMS payload in downlink direction\n11.\tThe NF Service Consumer (e.g. SMS GMSC, SMS Router and IP-SM-GW) shall send a POST request to the resource representing the UEContext (i.e. …/ue-contexts/{supi}/send-mt-sms) of the SMSF. The content of the POST request shall contain the MT SMS record to be sent.\n2a.\tOn success, \"200 OK\" shall be returned with \"SmsDeliveryData\" object contains the MT SMS Delivery Report in the response body.\n2b.\tOn failure, the appropriate HTTP status code (e.g. \"403 Forbidden\") indicating the error shall be returned.\nA ProblemDetails IE shall be included in the content of POST response, with the \"cause\" attribute of ProblemDetails set to application error codes specified in table 6.1.7.3-1.\n2c.\tOn redirection, the appropriate HTTP status code (e.g. \"307 Temporary Redirect\") shall be returned.\nA RedirectResponse IE may be included in the content of POST response, as specified in table 6.1.3.3.4.3.2-2.\n",
                            "figures_meta_data": [],
                            "tables": []
                        }
                    ]
                }
            ]
        },
        {
            "title": "6\tAPI Definitions",
            "description": "",
            "summary": "",
            "tables": [],
            "figures_meta_data": [],
            "subsections": [
                {
                    "title": "6.1\tNsmsf_SMService Service API",
                    "description": "",
                    "summary": "",
                    "text_content": "",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": [
                        {
                            "title": "6.1.1\tAPI URI",
                            "text_content": "The Nsmsf_SMService shall use the Nsmsf_SMService API.\nThe request URI used in HTTP request from the NF service consumer towards the NF service producer shall have the structure defined in clause 4.4.1 of 3GPP TS 29.501 [5], i.e.:\n{apiRoot}/<apiName>/<apiVersion>/<apiSpecificResourceUriPart>\nwith the following components:\n-\tThe {apiRoot} shall be set as described in 3GPP TS 29.501 [5].\n-\tThe <apiName> shall be \"nsmsf-sms\".\n-\tThe <apiVersion> shall be \"v2\".\n-\tThe <apiSpecificResourceUriPart> shall be set as described in clause 6.1.3.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "6.1.2\tUsage of HTTP",
                            "text_content": "HTTP/2, as defined in IETF RFC 9113 [7], shall be used as specified in clause 5 of 3GPP TS 29.500 [4].\nHTTP/2 shall be transported as specified in clause 5.3 of 3GPP TS 29.500 [4].\nHTTP messages and bodies for the Nsmsf_SMService service shall comply with the OpenAPI [19] specification contained in Annex A.\nThe usage of HTTP standard headers is specified in clause 5.2.2 of 3GPP TS 29.500 [4].\nThe following content types shall be supported:\n-\tthe JSON format (IETF RFC 8259 [8]). The use of the JSON format shall be signalled by the content type \"application/json\". See also clause 5.4 of 3GPP TS 29.500 [4].\n-\tthe Problem Details JSON Object (IETF RFC 9457 [17]). The use of the Problem Details JSON object in a HTTP response body shall be signalled by the content type \"application/problem+json\".\n-\tthe JSON Patch (IETF RFC 6902 [20]). The use of the JSON Patch format in a HTTP request body shall be signalled by the content type \"application/json-patch+json\".\nMultipart messages shall also be supported (see clause 6.1.2.4) using the content type \"multipart/related\", comprising:\n-\tone JSON body part with the \"application/json\" content type; and\n-\tone binary body part with 3gpp vendor specific content subtypes.\nThe 3gpp vendor specific content subtypes defined in Table 6.1.2.2.2-1 shall be supported.\nTable 6.1.2.2.2-1: 3GPP vendor specific content subtypes\n\nSee clause 6.1.2.4 for the binary payloads supported in the binary body part of multipart messages.\nAs described in IETF RFC 9110 [23] clause 8.8.3, an \"ETag\" (entity-tag) header should be included in HTTP responses except for non-cacheable resources to allow an NF Service Consumer performing a conditional request with \"If-Match\" header. If it is included, it shall contain a server-generated strong validator, that allows further matching of this value (included in subsequent client requests) with a given resource representation stored in the server or in a cache.\nAs described in IETF RFC 9110 [23] clause 13.1.1, an NF Service Consumer may issue conditional DELETE request towards SMSF by including an \"If-Match\" header in HTTP requests containing an entity tags received in previous response for the same resource.\nIn this release of this specification, no custom headers specific to the Nsmsf_SMService service are defined. For 3GPP specific HTTP custom headers used across all service based interfaces, see clause 5.2.3 of 3GPP TS 29.500 [4].\nHTTP multipart messages shall be supported, to transfer opaque SMS payload (e.g. SMS message, CP Ack, etc.), in the following service operations (and HTTP messages):\n-\tUplinkSMS service operation;\nHTTP multipart messages shall include one JSON body part and one binary body part comprising content of SMS payload content (see clause 6.1.6.4).\nThe JSON body part shall be the \"root\" body part of the multipart message. It shall be encoded as the first body part of the multipart message. The \"Start\" parameter does not need to be included.\nThe multipart message shall include a \"type\" parameter (see IETF RFC 2387 [9]) specifying the media type of the root body part, i.e. \"application/json\".\nNOTE:\tThe \"root\" body part (or \"root\" object) is the first body part the application processes when receiving a multipart/related message, see IETF RFC 2387 [9]. The default root is the first body within the multipart/related message. The \"Start\" parameter indicates the root body part, e.g. when this is not the first body part in the message.\nA binary body part shall include a Content-ID header (see IETF RFC 2045 [10]), and the JSON body part shall make a reference to the binary body part using the Content-ID header field.\nExamples of multipart/related messages can be found in Annex B.\n",
                            "figures_meta_data": [],
                            "tables": [
                                {
                                    "description": "Table 6.1.2.2.2-1: 3GPP vendor specific content subtypes",
                                    "table number": 6,
                                    "summary": "",
                                    "name": ""
                                }
                            ]
                        },
                        {
                            "title": "6.1.3\tResources",
                            "text_content": "The figure 6.1.3.1-1 describes the resource URI structure of the Nsmsf-sms API.\n\nThe figure depicts the resource URI structure of the n smsf - sms API, which is used to access the nsm service. The structure includes the nsm service name, the resource URI, and the parameters required to access the service.\nFigure 6.1.3.1-1: Resource URI structure of the nsmsf-sms API\nTable 6.1.3.1-1 provides an overview of the resources and applicable HTTP methods.\nTable 6.1.3.1-1: Resources and methods overview\n\nThis resource represents the collection of UE Context for SMS in SMSF.\nThis resource is modelled with the Store resource archetype (see clause C.3 of 3GPP TS 29.501 [5]).\nNo HTTP method has been defined for this resource.\nResource URI: {apiRoot}/nsmsf-sms/<apiVersion>/ue-contexts\nThis resource shall support the resource URI variables defined in table 6.1.3.2.2-1.\nTable 6.1.3.2.2-1: Resource URI variables for this resource\n\nNo HTTP method has been defined for the UE Context collection resource.\nThis resource represents an individual UE Context for SMS in SMSF.\nThis resource is modelled with the Document resource archetype (see clause C.1 of 3GPP TS 29.501 [5]).\nA PUT method to this resource can be invoked by the NF Service Consumer (e.g. AMF) to:\n-\tactivate SMS service for a given UE, which results in creating new individual UE Context for SMS in SMSF, during the Registration procedure for SMS over NAS (see 3GPP TS 23.502 [3] clause 4.13.3.1);\n-\tupdate SMS service parameters for a given UE, which results in updating individual UE Context for SMS in SMSF, during the Registration Update procedure due to AMF change (see 3GPP TS 23.502 [3] clause 4.13.3.1).\n-\tupdate SMS service parameters for a given UE, which results in updating individual UE Context for SMS in SMSF, to add a new Access Type for SMS over NAS.\n-\tDeactivate SMS service for a given UE for one of the two registered Access Types, which results in updating an existing individual UE context resource in SMSF to remove the affected Access Type for SMS over NAS.\nA DELETE method to this resource can be invoked by the NF Service Consumer (e.g. AMF) to:\n-\tdeactivate SMS service for a given UE, which results in deleting existing individual UE Context for SMS in SMSF, during the De-Registration procedure form SMS over NAS (see 3GPP TS 23.502 [3] clause 4.13.3.2).\nResource URI: {apiRoot}/nsmsf-sms/<apiVersion>/ue-contexts/{supi}\nThis resource shall support the resource URI variables defined in table 6.1.3.3.2-1.\nTable 6.1.3.3.2-1: Resource URI variables for this resource\n\n6.1.3.3.3.1\tPUT\nThis method creates an individual resource of UE Context for SMS in the SMSF, or updates the indicated resource of UE Context for SMS in the SMSF.\nThis method shall support the URI query parameters specified in table 6.1.3.3.3.1-1.\nTable 6.1.3.3.3.1-1: URI query parameters supported by the PUT method on this resource\n\nThis method shall support the request data structures specified in table 6.1.3.3.3.1-2 and the response data structures and response codes specified in table 6.1.3.3.3.1-3.\nTable 6.1.3.3.3.1-2: Data structures supported by the PUT Request Body on this resource\n\nTable 6.1.3.3.3.1-3: Data structures supported by the PUT Response Body on this resource\n\nTable 6.1.3.3.3.1-4: Headers supported by the 201 Response Code on this resource\n\nTable 6.1.3.3.3.1-5: Headers supported by the 204 Response Code on this resource\n\nTable 6.1.3.3.3.1-6: Headers supported by the 307 Response Code on this resource\n\nTable 6.1.3.3.3.1-7: Headers supported by the 308 Response Code on this resource\n\n6.1.3.3.3.2\tDELETE\nThis method deletes an individual resource of UE Context for SMS in the SMSF.\nThis method shall support the URI query parameters specified in table 6.1.3.3.3.2-1.\nTable 6.1.3.3.3.2-1: URI query parameters supported by the DELETE method on this resource\n\nThis method shall support the request data structures specified in table 6.1.3.3.3.2-2 and the response data structures and response codes specified in table 6.1.3.3.3.2-3.\nTable 6.1.3.3.3.2-2: Data structures supported by the DELETE Request Body on this resource\n\nTable 6.1.3.3.3.2-3: Data structures supported by the DELETE Response Body on this resource\n\nTable 6.1.3.3.3.2-4: Headers supported by the DELETE method on this resource\n\nTable 6.1.3.3.3.2-5: Headers supported by the 307 Response Code on this resource\n\nTable 6.1.3.3.3.2-6: Headers supported by the 308 Response Code on this resource\n\n6.1.3.3.3.3\tPATCH\nThis method shall support the URI query parameters specified in table 6.1.3.3.3.3-1.\nTable 6.1.3.3.3.3-1: URI query parameters supported by the PATCH method on this resource\n\nThis method shall support the request data structures specified in table 6.1.3.3.3.3-2 and the response data structures and response codes specified in table 6.1.3.3.3.3-3.\nTable 6.1.3.3.3.3-2: Data structures supported by the PATCH Request Body on this resource\n\nTable 6.1.3.3.3.3-3: Data structures supported by the PATCH Response Body on this resource\n\nTable 6.1.3.3.3.3-4: Headers supported by the 307 Response Code on this resource\n\nTable 6.1.3.3.3.3-5: Headers supported by the 308 Response Code on this resource\n\nTable 6.1.3.3.4.1-1: Custom operations\n\nThis custom operation is used for NF Service Consumers to send SMS record in uplink direction.\nThis custom operation is used to send a SMS payload to an individual UEContext resource in the SMSF.\nThis operation shall support the request data structures specified in table 6.1.3.3.4.2.2-1 and the response data structure and response codes specified in table 6.1.3.3.4.2.2-2.\nTable 6.1.3.3.4.2.2-1: Data structures supported by the POST Request Body on this resource\n\nTable 6.1.3.3.4.2.2-2: Data structures supported by the POST Response Body on this resource\n\nTable 6.1.3.3.4.2.2-3: Headers supported by the 307 Response Code on this resource\n\nTable 6.1.3.3.4.2.2-4: Headers supported by the 308 Response Code on this resource\n\nThis custom operation is used for NF Service Consumers to send SMS record in downlink direction.\nThis custom operation is used to send a SMS payload to an individual UEContext resource in the SMSF.\nThis operation shall support the request data structures specified in table 6.1.3.3.4.3.2-1 and the response data structure and response codes specified in table 6.1.3.3.4.3.2-2.\nTable 6.1.3.3.4.3.2-1: Data structures supported by the POST Request Body on this resource\n\nTable 6.1.3.3.4.3.2-2: Data structures supported by the POST Response Body on this resource\n\nTable 6.1.3.3.4.3.2-3: Headers supported by the 307 Response Code on this resource\n\nTable 6.1.3.3.4.3.2-4: Headers supported by the 308 Response Code on this resource\n\n",
                            "figures_meta_data": [],
                            "tables": [
                                {
                                    "description": "Table 6.1.3.1-1: Resources and methods overview",
                                    "table number": 7,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 6.1.3.2.2-1: Resource URI variables for this resource",
                                    "table number": 8,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 6.1.3.3.2-1: Resource URI variables for this resource",
                                    "table number": 9,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 6.1.3.3.3.1-1: URI query parameters supported by the PUT method on this resource",
                                    "table number": 10,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 6.1.3.3.3.1-2: Data structures supported by the PUT Request Body on this resource",
                                    "table number": 11,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 6.1.3.3.3.1-3: Data structures supported by the PUT Response Body on this resource",
                                    "table number": 12,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 6.1.3.3.3.1-4: Headers supported by the 201 Response Code on this resource",
                                    "table number": 13,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 6.1.3.3.3.1-5: Headers supported by the 204 Response Code on this resource",
                                    "table number": 14,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 6.1.3.3.3.1-6: Headers supported by the 307 Response Code on this resource",
                                    "table number": 15,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 6.1.3.3.3.1-7: Headers supported by the 308 Response Code on this resource",
                                    "table number": 16,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 6.1.3.3.3.2-1: URI query parameters supported by the DELETE method on this resource",
                                    "table number": 17,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 6.1.3.3.3.2-2: Data structures supported by the DELETE Request Body on this resource",
                                    "table number": 18,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 6.1.3.3.3.2-3: Data structures supported by the DELETE Response Body on this resource",
                                    "table number": 19,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 6.1.3.3.3.2-4: Headers supported by the DELETE method on this resource",
                                    "table number": 20,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 6.1.3.3.3.2-5: Headers supported by the 307 Response Code on this resource",
                                    "table number": 21,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 6.1.3.3.3.2-6: Headers supported by the 308 Response Code on this resource",
                                    "table number": 22,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 6.1.3.3.3.3-1: URI query parameters supported by the PATCH method on this resource",
                                    "table number": 23,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 6.1.3.3.3.3-2: Data structures supported by the PATCH Request Body on this resource",
                                    "table number": 24,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 6.1.3.3.3.3-3: Data structures supported by the PATCH Response Body on this resource",
                                    "table number": 25,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 6.1.3.3.3.3-4: Headers supported by the 307 Response Code on this resource",
                                    "table number": 26,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 6.1.3.3.3.3-5: Headers supported by the 308 Response Code on this resource",
                                    "table number": 27,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 6.1.3.3.4.1-1: Custom operations",
                                    "table number": 28,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 6.1.3.3.4.2.2-1: Data structures supported by the POST Request Body on this resource",
                                    "table number": 29,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 6.1.3.3.4.2.2-2: Data structures supported by the POST Response Body on this resource",
                                    "table number": 30,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 6.1.3.3.4.2.2-3: Headers supported by the 307 Response Code on this resource",
                                    "table number": 31,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 6.1.3.3.4.2.2-4: Headers supported by the 308 Response Code on this resource",
                                    "table number": 32,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 6.1.3.3.4.3.2-1: Data structures supported by the POST Request Body on this resource",
                                    "table number": 33,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 6.1.3.3.4.3.2-2: Data structures supported by the POST Response Body on this resource",
                                    "table number": 34,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 6.1.3.3.4.3.2-3: Headers supported by the 307 Response Code on this resource",
                                    "table number": 35,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 6.1.3.3.4.3.2-4: Headers supported by the 308 Response Code on this resource",
                                    "table number": 36,
                                    "summary": "",
                                    "name": ""
                                }
                            ]
                        },
                        {
                            "title": "6.1.4\tCustom Operations without associated resources",
                            "text_content": "In this release of this specification, no custom operations without associated resources are defined.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "6.1.5\tNotifications",
                            "text_content": "In this release of this specification, no notification procedures are defined.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "6.1.6\tData Model",
                            "text_content": "This clause specifies the application data model supported by the API.\nTable 6.1.6.1-1 specifies the data types defined for the Nsmsf service based interface protocol.\nTable 6.1.6.1-1: Nsmsf specific Data Types\n\nTable 6.1.6.1-2 specifies data types re-used by the Nsmsf service based interface protocol from other specifications, including a reference to their respective specifications and when needed, a short description of their use within the Nsmsf service based interface.\nTable 6.1.6.1-2: Nsmsf re-used Data Types\n\nThis clause defines the structures to be used in resource representations.\nTable 6.1.6.2.2-1: Definition of type UeSmsContextData\n\nTable 6.1.6.2.3-1: Definition of type SmsRecordData\n\n\nTable 6.1.6.2.5-1: Definition of type SmsRecordDeliveryData\n\nThis clause defines simple data types and enumerations that can be referenced from data structures defined in the previous clauses.\nThe simple data types defined in table 6.1.6.3.2-1 shall be supported.\nTable 6.1.6.3.2-1: Simple data types\n\nThe enumeration SmsDeliveryStatus represents the status of SMS payload delivery attempt at the SMSF. It shall comply with the previsions defined in table 6.1.6.3.3-1.\nTable 6.1.6.3.3-1: Enumeration SmsDeliveryStatus\n\nThis clause defines the binary data that shall be supported in a binary body part in an HTTP multipart message (see clauses 6.1.2.2.2 and 6.1.2.4), to support delivery of binary content of SMS payload.\nTable 6.1.6.4.1-1: Binary Data Types\n\nSMS Payload Information shall encode a SMS payload as specified in 3GPP TS 23.040 [11] and 3GPP TS 24.011 [12], using the vnd.3gpp.sms content-type.\nSMS Payload Information may encode e.g. the following content:\n-\tCP-DATA, CP-ACK, CP-ERROR as specified in 3GPP TS 23.040 [11] and 3GPP TS 24.011 [12];\n",
                            "figures_meta_data": [],
                            "tables": [
                                {
                                    "description": "Table 6.1.6.1-1: Nsmsf specific Data Types",
                                    "table number": 37,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 6.1.6.1-2: Nsmsf re-used Data Types",
                                    "table number": 38,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 6.1.6.2.2-1: Definition of type UeSmsContextData",
                                    "table number": 39,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 6.1.6.2.3-1: Definition of type SmsRecordData",
                                    "table number": 40,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 6.1.6.2.5-1: Definition of type SmsRecordDeliveryData",
                                    "table number": 41,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 6.1.6.3.2-1: Simple data types",
                                    "table number": 42,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 6.1.6.3.3-1: Enumeration SmsDeliveryStatus",
                                    "table number": 43,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 6.1.6.4.1-1: Binary Data Types",
                                    "table number": 44,
                                    "summary": "",
                                    "name": ""
                                }
                            ]
                        },
                        {
                            "title": "6.1.7\tError Handling",
                            "text_content": "HTTP error handling shall be supported as specified in clause 5.2.4 of 3GPP TS 29.500 [4].\nProtocol errors handling shall be supported as specified in clause 5.2.7 of 3GPP TS 29.500 [4].\nThe common application errors defined in the Table 5.2.7.2-1 in 3GPP TS 29.500 [4] may also be used for the Nsmsf_SMService service, and the following application errors listed in Table 6.1.7.3-1 are specific for the Nsmsf_SMService service.\nTable 6.1.7.3-1: Application errors\n\n",
                            "figures_meta_data": [],
                            "tables": [
                                {
                                    "description": "Table 6.1.7.3-1: Application errors",
                                    "table number": 45,
                                    "summary": "",
                                    "name": ""
                                }
                            ]
                        },
                        {
                            "title": "6.1.8\tFeature negotiation",
                            "text_content": "The optional features in table 6.1.8-1 are defined for the Nsmsf_SMService API. They shall be negotiated using the extensibility mechanism defined in clause 6.6 of 3GPP TS 29.500 [4].\nTable 6.1.8-1: Features of supportedFeatures attribute used by Nsmsf_SMService service\n\n",
                            "figures_meta_data": [],
                            "tables": [
                                {
                                    "description": "Table 6.1.8-1: Features of supportedFeatures attribute used by Nsmsf_SMService service",
                                    "table number": 46,
                                    "summary": "",
                                    "name": ""
                                }
                            ]
                        },
                        {
                            "title": "6.1.9\tSecurity",
                            "text_content": "As indicated in 3GPP TS 33.501 [13] and 3GPP TS 29.500 [4], the access to the Nsmsf_SMService API may be authorized by means of the OAuth2 protocol (see IETF RFC 6749 [14]), based on local configuration, using the \"Client Credentials\" authorization grant, where the NRF (see 3GPP TS 29.510 [15]) plays the role of the authorization server.\nIf OAuth2 is used, an NF Service Consumer, prior to consuming services offered by the Nsmsf_SMService API, shall obtain a \"token\" from the authorization server, by invoking the Access Token Request service, as described in 3GPP TS 29.510 [15], clause 5.4.2.2.\nNOTE:\tWhen multiple NRFs are deployed in a network, the NRF used as authorization server is the same NRF that the NF Service Consumer used for discovering the Nsmsf_SMService service.\nThe Nsmsf_SMService API defines a single scope \"nsmsf-sms\" for OAuth2 authorization (as specified in 3GPP TS 33.501 [13]) for the entire API, and it does not define any additional scopes at resource or operation level.\n\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "6.1.10\tHTTP redirection",
                            "text_content": "An HTTP request may be redirected to a different SMSF service instance, within the same SMSF or a different SMSF of an SMSF set, e.g. when an SMSF service instance is part of an SMSF (service) set or when using indirect communications (see 3GPP TS 29.500 [4]). See the ES3XX feature in clause 6.1.8.\nAn SCP that reselects a different SMSF producer instance will return the NF Instance ID of the new SMSF producer instance in the 3gpp-Sbi-Producer-Id header, as specified in clause 6.10.3.4 of 3GPP TS 29.500 [4].\nIf an SMSF within an SMSF set redirects a service request to a different SMSF of the set using a 307 Temporary Redirect or 308 Permanent Redirect status code, the identity of the new SMSF towards which the service request is redirected shall be indicated in the 3gpp-Sbi-Target-Nf-Id header of the 307 Temporary Redirect or 308 Permanent Redirect response as specified in clause 6.10.9.1 of 3GPP TS 29.500 [4].\n",
                            "figures_meta_data": [],
                            "tables": []
                        }
                    ]
                }
            ]
        },
        {
            "title": "A.1\tGeneral",
            "description": "This Annex specifies the formal definition of the Nsmsf_SMService service. It consists of OpenAPI 3.0.0 specifications, in YAML format.\nThis Annex takes precedence when being discrepant to other parts of the specification with respect to the encoding of information elements and methods within the API(s).\nNOTE 1:\tThe semantics and procedures, as well as conditions, e.g. for the applicability and allowed combinations of attributes or values, not expressed in the OpenAPI definitions but defined in other parts of the specification also apply.\nInformative copies of the OpenAPI specification files contained in this 3GPP Technical Specification are available on\na Git-based repository that uses the GitLab software version control system (see 3GPP TS 29.501 [5] clause 5.3.1 and 3GPP TR 21.900 [16] clause 5B).\n",
            "summary": "",
            "tables": [],
            "figures_meta_data": [],
            "subsections": []
        },
        {
            "title": "A.2\tNsmsf_SMService API",
            "description": "openapi: 3.0.0\n\ninfo:\nversion: '2.3.0-alpha.2'\ntitle: 'Nsmsf_SMService Service API'\ndescription: |\nSMSF SMService.\n© 2023, 3GPP Organizational Partners (ARIB, ATIS, CCSA, ETSI, TSDSI, TTA, TTC).\nAll rights reserved.\n\nexternalDocs:\ndescription: 3GPP TS 29.540 V18.1.0; 5G System; SMS Services; Stage 3\nurl: 'https://www.3gpp.org/ftp/Specs/archive/29_series/29.540/'\n\nsecurity:\n- oAuth2ClientCredentials:\n- nsmsf-sms\n- {}\n\nservers:\n- url: '{apiRoot}/nsmsf-sms/v2'\nvariables:\napiRoot:\ndefault: https://example.com\ndescription: apiRoot as defined in clause 4.4 of 3GPP TS 29.501.\n\npaths:\n/ue-contexts/{supi}:\nput:\nsummary: Activate SMS Service for a given UE\noperationId: SMServiceActivation\ntags:\n- Activation of SMS service\nparameters:\n- name: supi\nin: path\nrequired: true\ndescription: Subscriber Permanent Identifier (SUPI)\nschema:\ntype: string\nrequestBody:\ncontent:\napplication/json:\nschema:\n$ref: '#/components/schemas/UeSmsContextData'\nrequired: true\nresponses:\n'201':\ndescription: UE Context for SMS is created in SMSF\ncontent:\napplication/json:\nschema:\n$ref: '#/components/schemas/UeSmsContextData'\nheaders:\nLocation:\ndescription: 'Contains the URI of the newly created resource, according to the structure: {apiRoot}/nsmsf-sms/<apiVersion>/ue-contexts/{supi}'\nrequired: true\nschema:\ntype: string\nETag:\ndescription: Entity Tag, containing a strong validator, as described in IETF RFC 9110\nschema:\ntype: string\n'204':\ndescription: UE Context for SMS is updated in SMSF\nheaders:\nETag:\ndescription: Entity Tag, containing a strong validator, as described in IETF RFC 9110\nschema:\ntype: string\n'307':\n$ref: 'TS29571_CommonData.yaml#/components/responses/307'\n'308':\n$ref: 'TS29571_CommonData.yaml#/components/responses/308'\n'400':\ndescription: Invalid Service Request\ncontent:\napplication/problem+json:\nschema:\n$ref: 'TS29571_CommonData.yaml#/components/schemas/ProblemDetails'\n'401':\n$ref: 'TS29571_CommonData.yaml#/components/responses/401'\n'403':\ndescription: Unable to create/update UE Context for SMS in SMSF\ncontent:\napplication/problem+json:\nschema:\n$ref: 'TS29571_CommonData.yaml#/components/schemas/ProblemDetails'\n'404':\ndescription: Unable to found subscription for service user or UE Context for SMS in SMSF\ncontent:\napplication/problem+json:\nschema:\n$ref: 'TS29571_CommonData.yaml#/components/schemas/ProblemDetails'\n'411':\n$ref: 'TS29571_CommonData.yaml#/components/responses/411'\n'413':\n$ref: 'TS29571_CommonData.yaml#/components/responses/413'\n'415':\n$ref: 'TS29571_CommonData.yaml#/components/responses/415'\n'429':\n$ref: 'TS29571_CommonData.yaml#/components/responses/429'\n'500':\n$ref: 'TS29571_CommonData.yaml#/components/responses/500'\n'502':\n$ref: 'TS29571_CommonData.yaml#/components/responses/502'\n'503':\ndescription: Service Unavailable\ncontent:\napplication/problem+json:\nschema:\n$ref: 'TS29571_CommonData.yaml#/components/schemas/ProblemDetails'\ndefault:\ndescription: Unexpected error\ncontent:\napplication/problem+json:\nschema:\n$ref: 'TS29571_CommonData.yaml#/components/schemas/ProblemDetails'\npatch:\nsummary: Update a parameter in the UE SMS Context in SMSF\noperationId: SMSServiceParameterUpdate\ntags:\n- Parameter update in the UE SMS Context in SMSF\nparameters:\n- name: supi\nin: path\nrequired: true\ndescription: Subscriber Permanent Identifier (SUPI)\nschema:\ntype: string\n- name: supported-features\nin: query\ndescription: Features required to be supported by the target NF\nschema:\n$ref: 'TS29571_CommonData.yaml#/components/schemas/SupportedFeatures'\nrequestBody:\ncontent:\napplication/json-patch+json:\nschema:\ntype: array\nitems:\n$ref: 'TS29571_CommonData.yaml#/components/schemas/PatchItem'\nminItems: 1\nrequired: true\nresponses:\n'200':\ndescription: Expected response to a valid request\ncontent:\napplication/json:\nschema:\noneOf:\n- $ref: 'TS29571_CommonData.yaml#/components/schemas/PatchResult'\n- $ref: '#/components/schemas/UeSmsContextData'\n'204':\ndescription: Successful response\n'307':\n$ref: 'TS29571_CommonData.yaml#/components/responses/307'\n'308':\n$ref: 'TS29571_CommonData.yaml#/components/responses/308'\n'400':\n$ref: 'TS29571_CommonData.yaml#/components/responses/400'\n'401':\n$ref: 'TS29571_CommonData.yaml#/components/responses/401'\n'403':\n$ref: 'TS29571_CommonData.yaml#/components/responses/403'\n'404':\n$ref: 'TS29571_CommonData.yaml#/components/responses/404'\n'411':\n$ref: 'TS29571_CommonData.yaml#/components/responses/411'\n'413':\n$ref: 'TS29571_CommonData.yaml#/components/responses/413'\n'415':\n$ref: 'TS29571_CommonData.yaml#/components/responses/415'\n'422':\ndescription: Unprocessable Request\ncontent:\napplication/problem+json:\nschema:\n$ref: 'TS29571_CommonData.yaml#/components/schemas/ProblemDetails'\n'429':\n$ref: 'TS29571_CommonData.yaml#/components/responses/429'\n'500':\n$ref: 'TS29571_CommonData.yaml#/components/responses/500'\n'502':\n$ref: 'TS29571_CommonData.yaml#/components/responses/502'\n'503':\n$ref: 'TS29571_CommonData.yaml#/components/responses/503'\ndefault:\ndescription: Unexpected error\ndelete:\nsummary: Deactivate SMS Service for a given UE\noperationId: SMServiceDeactivation\ntags:\n- Deactivation of SMS service\nparameters:\n- name: supi\nin: path\nrequired: true\ndescription: Subscriber Permanent Identifier (SUPI)\nschema:\ntype: string\n- name: If-Match\nin: header\ndescription: Validator for conditional requests, as described in IETF RFC 9110\nschema:\ntype: string\nresponses:\n'204':\ndescription: UE Context for SMS is deleted from SMSF\n'307':\n$ref: 'TS29571_CommonData.yaml#/components/responses/307'\n'308':\n$ref: 'TS29571_CommonData.yaml#/components/responses/308'\n'400':\ndescription: Invalid Service Request\ncontent:\napplication/problem+json:\nschema:\n$ref: 'TS29571_CommonData.yaml#/components/schemas/ProblemDetails'\n'401':\n$ref: 'TS29571_CommonData.yaml#/components/responses/401'\n'403':\n$ref: 'TS29571_CommonData.yaml#/components/responses/403'\n'404':\ndescription: Unable to found UE Context for SMS in SMSF\ncontent:\napplication/problem+json:\nschema:\n$ref: 'TS29571_CommonData.yaml#/components/schemas/ProblemDetails'\n'429':\n$ref: 'TS29571_CommonData.yaml#/components/responses/429'\n'500':\n$ref: 'TS29571_CommonData.yaml#/components/responses/500'\n'502':\n$ref: 'TS29571_CommonData.yaml#/components/responses/502'\n'503':\ndescription: Service Unavailable\ncontent:\napplication/problem+json:\nschema:\n$ref: 'TS29571_CommonData.yaml#/components/schemas/ProblemDetails'\n\n/ue-contexts/{supi}/sendsms:\npost:\nsummary: Send SMS payload for a given UE\noperationId: SendSMS\ntags:\n- Send SMS payload in uplink direction\nparameters:\n- name: supi\nin: path\nrequired: true\ndescription: Subscriber Permanent Identifier (SUPI)\nschema:\ntype: string\nrequestBody:\ncontent:\nmultipart/related:\nschema:\ntype: object\nproperties:\njsonData:\n$ref: '#/components/schemas/SmsRecordData'\nbinaryPayload:\ntype: string\nformat: binary\nencoding:\njsonData:\ncontentType: application/json\nbinaryPayload:\ncontentType: application/vnd.3gpp.sms\nheaders:\nContent-Id:\nschema:\ntype: string\nrequired: true\nresponses:\n'200':\ndescription: SMS payload is received by SMSF, and is being delivered out\ncontent:\napplication/json:\nschema:\n$ref: '#/components/schemas/SmsRecordDeliveryData'\n'307':\n$ref: 'TS29571_CommonData.yaml#/components/responses/307'\n'308':\n$ref: 'TS29571_CommonData.yaml#/components/responses/308'\n'400':\ndescription: Invalid Service Request\ncontent:\napplication/problem+json:\nschema:\n$ref: 'TS29571_CommonData.yaml#/components/schemas/ProblemDetails'\n'401':\n$ref: 'TS29571_CommonData.yaml#/components/responses/401'\n'403':\ndescription: Unable to deliver SMS at SMSF\ncontent:\napplication/problem+json:\nschema:\n$ref: 'TS29571_CommonData.yaml#/components/schemas/ProblemDetails'\n'404':\ndescription: Unable to found UE Context for SMS in SMSF\ncontent:\napplication/problem+json:\nschema:\n$ref: 'TS29571_CommonData.yaml#/components/schemas/ProblemDetails'\n'411':\n$ref: 'TS29571_CommonData.yaml#/components/responses/411'\n'413':\n$ref: 'TS29571_CommonData.yaml#/components/responses/413'\n'415':\n$ref: 'TS29571_CommonData.yaml#/components/responses/415'\n'429':\n$ref: 'TS29571_CommonData.yaml#/components/responses/429'\n'500':\n$ref: 'TS29571_CommonData.yaml#/components/responses/500'\n'502':\n$ref: 'TS29571_CommonData.yaml#/components/responses/502'\n'503':\ndescription: Service Unavailable\ncontent:\napplication/problem+json:\nschema:\n$ref: 'TS29571_CommonData.yaml#/components/schemas/ProblemDetails'\n\n/ue-contexts/{supi}/send-mt-sms:\npost:\nsummary: Send MT SMS payload for a given UE\noperationId: SendMtSMS\ntags:\n- Send SMS payload in downlink direction\nparameters:\n- name: supi\nin: path\nrequired: true\ndescription: Subscriber Permanent Identifier (SUPI)\nschema:\ntype: string\nrequestBody:\ncontent:\nmultipart/related:\nschema:\ntype: object\nproperties:\njsonData:\n$ref: 'TS29577_Nipsmgw_SMService.yaml#/components/schemas/SmsData'\nbinaryPayload:\ntype: string\nformat: binary\nencoding:\njsonData:\ncontentType: application/json\nbinaryPayload:\ncontentType: application/vnd.3gpp.sms\nheaders:\nContent-Id:\nschema:\ntype: string\nrequired: true\nresponses:\n'200':\ndescription: sending delivery report\ncontent:\nmultipart/related:\nschema:\ntype: object\nproperties:\njsonData:\n$ref: 'TS29577_Nipsmgw_SMService.yaml#/components/schemas/SmsDeliveryData'\nbinaryPayload:\ntype: string\nformat: binary\nencoding:\njsonData:\ncontentType: application/json\nbinaryPayload:\ncontentType: application/vnd.3gpp.sms\nheaders:\nContent-Id:\nschema:\ntype: string\n'307':\n$ref: 'TS29571_CommonData.yaml#/components/responses/307'\n'308':\n$ref: 'TS29571_CommonData.yaml#/components/responses/308'\n'400':\ndescription: Invalid Service Request\ncontent:\napplication/problem+json:\nschema:\n$ref: 'TS29571_CommonData.yaml#/components/schemas/ProblemDetails'\n'401':\n$ref: 'TS29571_CommonData.yaml#/components/responses/401'\n'403':\ndescription: Unable to deliver SMS at SMSF\ncontent:\napplication/problem+json:\nschema:\n$ref: 'TS29571_CommonData.yaml#/components/schemas/ProblemDetails'\n'404':\ndescription: Unable to found UE Context for SMS in SMSF\ncontent:\napplication/problem+json:\nschema:\n$ref: 'TS29571_CommonData.yaml#/components/schemas/ProblemDetails'\n'411':\n$ref: 'TS29571_CommonData.yaml#/components/responses/411'\n'413':\n$ref: 'TS29571_CommonData.yaml#/components/responses/413'\n'415':\n$ref: 'TS29571_CommonData.yaml#/components/responses/415'\n'429':\n$ref: 'TS29571_CommonData.yaml#/components/responses/429'\n'500':\n$ref: 'TS29571_CommonData.yaml#/components/responses/500'\n'502':\n$ref: 'TS29571_CommonData.yaml#/components/responses/502'\n'503':\ndescription: Service Unavailable\ncontent:\napplication/problem+json:\nschema:\n$ref: 'TS29571_CommonData.yaml#/components/schemas/ProblemDetails'\n\n\ncomponents:\n\nsecuritySchemes:\noAuth2ClientCredentials:\ntype: oauth2\nflows:\nclientCredentials:\ntokenUrl: '{nrfApiRoot}/oauth2/token'\nscopes:\nnsmsf-sms: Access to the nsmsf-sms API\n\nschemas:\n\nUeSmsContextData:\ndescription: Represents the information used for activating the SMS service for a service user, or updating the parameters of the SMS service.\ntype: object\nrequired:\n- supi\n- amfId\n- accessType\nproperties:\nsupi:\n$ref: 'TS29571_CommonData.yaml#/components/schemas/Supi'\npei:\n$ref: 'TS29571_CommonData.yaml#/components/schemas/Pei'\namfId:\n$ref: 'TS29571_CommonData.yaml#/components/schemas/NfInstanceId'\nguamis:\ntype: array\nitems:\n$ref: 'TS29571_CommonData.yaml#/components/schemas/Guami'\nminItems: 1\naccessType:\n$ref: 'TS29571_CommonData.yaml#/components/schemas/AccessType'\nadditionalAccessType:\n$ref: 'TS29571_CommonData.yaml#/components/schemas/AccessType'\ngpsi:\n$ref: 'TS29571_CommonData.yaml#/components/schemas/Gpsi'\nueLocation:\n$ref: 'TS29571_CommonData.yaml#/components/schemas/UserLocation'\nueTimeZone:\n$ref: 'TS29571_CommonData.yaml#/components/schemas/TimeZone'\ntraceData:\n$ref: 'TS29571_CommonData.yaml#/components/schemas/TraceData'\nbackupAmfInfo:\ntype: array\nitems:\n$ref: 'TS29571_CommonData.yaml#/components/schemas/BackupAmfInfo'\nminItems: 1\nudmGroupId:\n$ref: 'TS29571_CommonData.yaml#/components/schemas/NfGroupId'\nroutingIndicator:\ntype: string\nhNwPubKeyId:\ntype: integer\nratType:\n$ref: 'TS29571_CommonData.yaml#/components/schemas/RatType'\nadditionalRatType:\n$ref: 'TS29571_CommonData.yaml#/components/schemas/RatType'\nsupportedFeatures:\n$ref: 'TS29571_CommonData.yaml#/components/schemas/SupportedFeatures'\n\nSmsRecordData:\ndescription: Represents the information sent within a request message of the UplinkSMS service operation, for delivering SMS payload.\ntype: object\nrequired:\n- smsRecordId\n- smsPayload\nproperties:\nsmsRecordId:\n$ref: '#/components/schemas/RecordId'\nsmsPayload:\n$ref: 'TS29571_CommonData.yaml#/components/schemas/RefToBinaryData'\naccessType:\n$ref: 'TS29571_CommonData.yaml#/components/schemas/AccessType'\ngpsi:\n$ref: 'TS29571_CommonData.yaml#/components/schemas/Gpsi'\npei:\n$ref: 'TS29571_CommonData.yaml#/components/schemas/Pei'\nueLocation:\n$ref: 'TS29571_CommonData.yaml#/components/schemas/UserLocation'\nueTimeZone:\n$ref: 'TS29571_CommonData.yaml#/components/schemas/TimeZone'\n\nRecordId:\ndescription: Represents a record ID, used to identify a message carrying SMS payload.\ntype: string\n\nSmsRecordDeliveryData:\ndescription: Represents information on the result of invoking the UplinkSMS service operation.\ntype: object\nrequired:\n- smsRecordId\n- deliveryStatus\nproperties:\nsmsRecordId:\n$ref: '#/components/schemas/RecordId'\ndeliveryStatus:\n$ref: '#/components/schemas/SmsDeliveryStatus'\n\nSmsDeliveryStatus:\ndescription: Represents the Status of an SMS delivery attempt.\ntype: string\nenum:\n- SMS_DELIVERY_PENDING\n- SMS_DELIVERY_COMPLETED\n- SMS_DELIVERY_FAILED\n- SMS_DELIVERY_SMSF_ACCEPTED\n\n",
            "summary": "",
            "tables": [],
            "figures_meta_data": [],
            "subsections": []
        },
        {
            "title": "B.1\tExample of HTTP multipart message",
            "description": "This Annex provides a (partial) example of HTTP multipart message. The example does not aim to be a complete representation of the HTTP message, e.g. additional information or headers can be included.\nThis Annex is informative and the normative descriptions in this specification prevail over the description in this Annex if there is any difference.\n",
            "summary": "",
            "tables": [],
            "figures_meta_data": [],
            "subsections": []
        },
        {
            "title": "B.2\tVoid",
            "description": "\n",
            "summary": "",
            "tables": [],
            "figures_meta_data": [],
            "subsections": []
        },
        {
            "title": "B.3\tExample HTTP multipart message with SMS binary data",
            "description": "Example HTTP multipart message with SMS binary data:\n\nPOST /example.com/nsmsf-sms/v1/ue-contexts/{supi}/sendsms HTTP/2\nContent-Type: multipart/related; boundary=----Boundary\nContent-Length: xyz\n\n------Boundary\nContent-Type: application/json\n\n{\n\"smsRecordId\": \"777c3edf-129f-486e-a3f8-c48e7b515605\",\n\"smsPayload\": {\n\"contentId\": \"sms\"\n},\n\"gpsi\": \"msisdn-8613915900000\",\n\"pei\": \"imei-123456789012345\",\n\"accessType\": \"3GPP_ACCESS\",\n\"ueLocation\": {\n\"nrLocation\": {\n\"tai\": {\n\"plmnId\": {\n\"mcc\": \"46\",\n\"mnc\": \"000\"\n},\n\"tac\": \"A01001\",\n\"ncgi\": {\n\"plmnId\": {\n\"mcc\": \"46\",\n\"mnc\": \"000\"\n},\n\"nrCellId\": \"225BD6007\"\n}\n}\n},\n\"ueTimeZone\": \"+08:00\"\n}\n------Boundary\nContent-Type: application/vnd.3gpp.sms\nContent-Id: sms\n\n{ … SMS Message binary data …}\n------Boundary\n\nThe JSON part of the HTTP POST message includes an attribute named \"smsPayload\" which refers to RefToBinaryData structure. The \"contentId\" of RefToBinaryData is encoded as a string and used to reference the value of the Content-ID header field of the binary body part.\n\n\n",
            "summary": "",
            "tables": [
                {
                    "description": "",
                    "table number": 47,
                    "summary": "",
                    "name": ""
                }
            ],
            "figures_meta_data": [],
            "subsections": []
        }
    ]
}