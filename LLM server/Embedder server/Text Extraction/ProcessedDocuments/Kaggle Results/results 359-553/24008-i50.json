{
    "document_name": "24008-i50.docx",
    "content": [
        {
            "title": "Foreword",
            "description": "This Technical Specification has been produced by the 3rd Generation Partnership Project (3GPP).\nThe contents of the present document are subject to continuing work within the TSG and may change following formal TSG approval. Should the TSG modify the contents of the present document, it will be re-released by the TSG with an identifying change of release date and an increase in version number as follows:\nVersion x.y.z\nwhere:\nx\tthe first digit:\n1\tpresented to TSG for information;\n2\tpresented to TSG for approval;\n3\tor greater indicates TSG approved document under change control.\ny\tthe second digit is incremented for all changes of substance, i.e. technical enhancements, corrections, updates, etc.\nz\tthe third digit is incremented when editorial only changes have been incorporated in the document.\n",
            "summary": "",
            "tables": [],
            "figures_meta_data": [],
            "subsections": []
        },
        {
            "title": "Introduction",
            "description": "The present document includes references to features which are not part of the Phase 2+ Release 96 of the GSM Technical specifications. All subclauses which were changed as a result of these features contain a marker (see table below) relevant to the particular feature.\nThe following table lists all features that were introduced after GSM Release 96.\n\n\n",
            "summary": "",
            "tables": [
                {
                    "description": "",
                    "table number": 1,
                    "summary": "",
                    "name": ""
                }
            ],
            "figures_meta_data": [],
            "subsections": []
        },
        {
            "title": "1\tScope",
            "description": "The present document specifies the procedures used at the radio interface core network protocols within the 3rd generation mobile telecommunications system and the digital cellular telecommunications system.\nIt specifies the procedures used at the radio interface (Reference Point Um or Uu, see 3GPP TS 24.002 [15] or 3GPP TS 23.002 [127]) for Call Control (CC), Mobility Management (MM), and Session Management (SM).\nWhen the notations for \"further study\" or \"FS\" or \"FFS\" are present in this TS they mean that the indicated text is not a normative portion of the present document.\nThese procedures are defined in terms of messages exchanged over the control channels of the radio interface. The control channels are described in 3GPP TS 44.003 [16] and 3GPP TS 25.301 [128].\nThe structured functions and procedures of this protocol and the relationship with other layers and entities are described in general terms in 3GPP TS 24.007 [20].\nThe present document specifies functions, procedures and information which apply to GERAN Iu mode. However, functionality related to GERAN Iu mode is neither maintained nor enhanced.\n",
            "summary": "",
            "tables": [],
            "figures_meta_data": [],
            "subsections": [
                {
                    "title": "1.1\tScope of the Technical Specification",
                    "description": "",
                    "summary": "",
                    "text_content": "The procedures currently described in this TS are for the call control of circuit-switched connections, session management for GPRS services, mobility management and radio resource management for circuit-switched and GPRS services.\n3GPP TS 24.010 [21] contains functional procedures for support of supplementary services.\n3GPP TS 24.011 [22] contains functional procedures for support of point-to-point short message services.\n3GPP TS 24.012 [23] contains functional description of short message - cell broadcast.\n3GPP TS 44.060 [76] contains procedures for radio link control and medium access control (RLC/MAC) of packet data physical channels.\n3GPP TS 44.071 [23a] contains functional descriptions and procedures for support of location services.\nNOTE:\t\"layer 3\" includes the functions and protocols described in the present document. The terms \"data link layer\" and \"layer 2\" are used interchangeably to refer to the layer immediately below layer 3.\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "1.2\tApplication to the interface structures",
                    "description": "",
                    "summary": "",
                    "text_content": "The procedures defined in the present document apply to the interface structures defined in 3GPP TS 44.003 [16] and 3GPP TS 25.301 [128]. They use the functions and services provided by lower layers defined in 3GPP TS 44.005 [18] and 3GPP TS 44.006 [19] or 3GPP TS 25.331 [23c], 3GPP TS 25.322 [19b] and 3GPP TS 25.321 [19a]. 3GPP TS 24.007 [20] gives the general description of layer 3 (A/Gb mode) and Non Access Stratum (Iu mode and S1 mode) including procedures, messages format and error handling.\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "1.3\tStructure of layer 3 procedures",
                    "description": "",
                    "summary": "",
                    "text_content": "A building block method is used to describe the layer 3 procedures.\nThe basic building blocks are \"elementary procedures\" provided by the protocol control entities of the three sublayers, i.e. radio resource management, mobility management and connection management sublayer.\nComplete layer 3 transactions consist of specific sequences of elementary procedures. The term \"structured procedure\" is used for these sequences.\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "1.4\tTest procedures",
                    "description": "",
                    "summary": "",
                    "text_content": "Test procedures of the GSM radio interface signalling are described in 3GPP TS 51.010 [39] and 3GPP TS 51.02x series.\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "1.5\tUse of logical channels in A/Gb mode",
                    "description": "",
                    "summary": "",
                    "text_content": "The logical control channels are defined in 3GPP TS 45.002 [32]. In the following those control channels are considered which carry signalling information or specific types of user packet information:\ni)\tBroadcast Control CHannel (BCCH): downlink only, used to broadcast Cell specific information;\nii)\tSynchronization CHannel (SCH): downlink only, used to broadcast synchronization and BSS identification information;\niii)\tPaging CHannel (PCH): downlink only, used to send page requests to Mobile Stations (MSs);\niv)\tRandom Access CHannel (RACH): uplink only, used to request a Dedicated Control CHannel;\nv)\tAccess Grant CHannel (AGCH): downlink only, used to allocate a Dedicated Control CHannel;\nvi)\tStandalone Dedicated Control CHannel (SDCCH): bi-directional;\nvii)\tFast Associated Control CHannel (FACCH): bi-directional, associated with a Traffic CHannel;\nviii)\tSlow Associated Control CHannel (SACCH): bi-directional, associated with a SDCCH or a Traffic CHannel;\nix)\tCell Broadcast CHannel (CBCH): downlink only used for general (not point to point) short message information;\nx)\tNotification CHannel (NCH): downlink only, used to notify mobile stations of VBS (Voice Broadcast Service) calls or VGCS (Voice Group Call Service) calls.\nTwo service access points are defined on signalling layer 2 which are discriminated by their Service Access Point Identifiers (SAPI) (see 3GPP TS 44.006 [19]):\ni)\tSAPI 0: supports the transfer of signalling information including user-user information;\nii)\tSAPI 3: supports the transfer of user short messages.\nLayer 3 selects the service access point, the logical control channel and the mode of operation of layer 2 (acknowledged, unacknowledged or random access, see 3GPP TS 44.005 [18] and 3GPP TS 44.006 [19]) as required for each individual message.\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "1.6\tOverview of control procedures",
                    "description": "",
                    "summary": "",
                    "text_content": "",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": [
                        {
                            "title": "1.6.1\tList of procedures",
                            "text_content": "The following procedures are specified in the present document:\na)\tClause 4 specifies elementary procedures for Mobility Management:\n-\tmobility management common procedures (subclause 4.3):\n-\tTMSI reallocation procedure (subclause 4.3.1);\n-\tauthentication procedure (subclause 4.3.2);\n-\tidentification procedure (subclause 4.3.3);\n-\tIMSI detach procedure (subclause 4.3.4);\n-\tabort procedure (subclause 4.3.5);\n-\tMM information procedure (subclause 4.3.6).\n-\tmobility management specific procedures (subclause 4.4):\n-\tlocation updating procedure (subclause 4.4.1);\n-\tperiodic updating (subclause 4.4.2);\n-\tIMSI attach procedure (subclause 4.4.3);\n-\tgeneric location updating procedure (subclause 4.4).\n-\tconnection management sublayer service provision:\n-\tmobility management connection establishment (subclause 4.5.1);\n-\tmobility management connection information transfer phase (subclause 4.5.2);\n-\tmobility management connection release (subclause 4.5.3).\n-\tGPRS specific mobility management procedures (subclause 4.7):\n-\tGPRS attach procedure (subclause 4.7.3);\n-\tGPRS detach procedure (subclause 4.7.4);\n-\tGPRS routing area updating procedure (subclause 4.7.5).\n-\tGPRS common mobility management procedures (subclause 4.7):\n-\tGPRS P-TMSI reallocation procedure (subclause 4.7.6);\n-\tGPRS authentication and ciphering procedure (subclause 4.7.7);\n-\tGPRS identification procedure (subclause 4.7.8);\n-\tGPRS information procedure (subclause 4.7.12).\nb)\tClause 5 specifies elementary procedures for circuit switched Call Control comprising the following elementary procedures:\n-\tmobile originating call establishment (subclause 5.2.1);\n-\tmobile terminating call establishment (subclause 5.2.2);\n-\tsignalling procedures during the active state (subclause 5.3):\n-\tuser notification procedure (subclause 5.3.1);\n-\tcall rearrangements (subclause 5.3.2);\n-\tDTMF protocol control procedure (subclause 5.5.7);\n-\tin-call modification (subclause 5.3.4).\n-\tcall clearing initiated by the mobile station (subclause 5.4.3);\n-\tcall clearing initiated by the network (subclause 5.4.4);\n-\tmiscellaneous procedures:\n-\tin-band tones and announcements (subclause 5.5.1);\n-\tstatus enquiry procedure (subclause 5.5.3);\n-\tcall re-establishment procedure (subclause 5.5.4).\nd)\tClause 6 specifies elementary procedures for session management:\n-\tGPRS session management procedures (subclause 6.1):\n-\tPDP context activation (subclauses 6.1.3.1 and 6.1.3.2);\n-\tPDP context modification (subclause 6.1.3.3);\n-\tPDP context deactivation (subclause 6.1.3.4).\n-\tMBMS context activation (subclause 6.1.3.8);\n-\tMBMS context deactivation (subclause 6.1.3.9).\nThe elementary procedures can be combined to form structured procedures. Examples of such structured procedures are given in clause 7. This part of the present document is only provided for guidance to assist implementations.\nClause 8 specifies actions to be taken on various error conditions and also provides rules to ensure compatibility with future enhancements of the protocol.\n",
                            "figures_meta_data": [],
                            "tables": []
                        }
                    ]
                },
                {
                    "title": "1.7\tApplicability of implementations",
                    "description": "",
                    "summary": "",
                    "text_content": "The applicability of procedures of the present document for the mobile station is dependent on the services and functions which are to be supported by a mobile station.\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": [
                        {
                            "title": "1.7.1\tVoice Group Call Service (VGCS) and Voice Broadcast Service (VBS)",
                            "text_content": "Voice Group Call Service and Voice Broadcast Service are applicable in A/Gb mode only.\nFor mobile stations supporting the Voice Group Call Service or the Voice Broadcast Service, it is explicitly mentioned throughout the present document if a certain procedure is applicable only for such a service and, if necessary, how mobile stations not supporting such a service shall behave.\nFor VGCS and VBS, the following possible mobile station implementations exist:\n-\tsupport of listening to voice broadcast calls (VBS listening);\n-\tsupport of originating a voice broadcast call (VBS originating);\n-\tsupport of listening to voice group calls (VGCS listening);\n-\tsupport of talking in voice group calls (VGCS talking. This always includes the implementation for VGCS listening);\n-\tsupport of originating a voice group call (VGCS originating. This always includes the implementation for VGCS talking).\nApart from the explicitly mentioned combinations, all possible combinations are optional and supported by the present document.\nThe related terms are used in the present document, if information on these implementation options is required.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "1.7.2\tGeneral Packet Radio Service (GPRS)",
                            "text_content": "For mobile stations supporting the General Packet Radio Service (GPRS), it is explicitly mentioned throughout the technical specification if a certain procedure is applicable only for such a service and, if necessary, how mobile stations not supporting such a service shall behave.\nA GPRS MS may operate in one of the following MS operation modes, see 3GPP TS 23.060 [74]:\n-\tMS operation mode A;\n-\tMS operation mode B; or\n-\tMS operation mode C.\nThe MS operation mode depends on the services that the MS is attached to, i.e., only GPRS or both GPRS and non-GPRS services, and upon the MS's capabilities to operate GPRS and other GSM services simultaneously. Mobile stations that are capable to operate GPRS services are referred to as GPRS MSs.\nNOTE:\tOther GSM technical specifications may refer to the MS operation modes A, B, and C as GPRS class-A MS, GPRS class-B MS, and GPRS class-C MS.\nIt should be noted that it is possible that for a GPRS MS, the GMM procedures currently described in the ETS do not support combinations of VGCS, VBS and GPRS. The possible interactions are not studied yet.\nAn MS attached to packet switched domain may operate in one of the following MS operation modes, see 3GPP TS 23.060 [74]:\n-\tCS/PS mode of operation; or\n-\tPS mode of operation.\nThe terms 'CS/PS mode of operation' and 'PS mode of operation' are not used in the present document with some exceptions. Instead the terms 'MS operation mode A' and 'MS operation mode C' are used.\nIn network operation mode I and II (see 3GPP TS 23.060 [74]), an MS in CS/PS mode of operation shall use the same\nprocedures as for a GPRS MS operating in MS operation mode A, unless it is explicitly stated for A/Gb mode only or\nIu mode only.\nIn network operation mode I and II, an MS in PS mode of operation shall use the same procedures as for a GPRS MS operating in MS operation mode C, unless it is explicitly stated for A/Gb mode only or Iu mode only.\n",
                            "figures_meta_data": [],
                            "tables": []
                        }
                    ]
                },
                {
                    "title": "1.8\tHandling of NAS signalling low priority indication",
                    "description": "",
                    "summary": "",
                    "text_content": "An MS configured for NAS signalling low priority (see 3GPP TS 24.368 [135], 3GPP TS 31.102 [112]) indicates this by including the Device properties IE in the appropriate NAS message and setting the low priority indicator to \"MS is configured to NAS signalling low priority\" except for the following cases in which the MS shall set the low priority indicator to \"MS is not configured for NAS signalling low priority\":\n-\tthe MS is performing an attach for emergency bearer services;\n-\tthe MS has a PDN connection for emergency bearer services established and is performing mobility management procedures, or is establishing a PDN connection for emergency bearer services;\n-\tthe MS configured for dual priority is requested by the upper layers to establish a PDN connection with the low priority indicator set to \"MS is not configured for NAS signalling low priority\";\n-\tthe MS configured for dual priority is performing session management procedures related to the PDN connection established with low priority indicator set to \"MS is not configured for NAS signalling low priority\";\n-\tthe MS configured for dual priority has a PDN connection established by setting the low priority indicator to \"MS is not configured for NAS signalling low priority\" and is performing mobility management procedures;\n-\tthe MS is establishing or re-establishing an MM connection for an emergency call;\n-\tthe MS is an MS configured to use AC11 – 15 in selected PLMN; or\n-\tthe MS is responding to paging.\nThe network may use the NAS signalling low priority indication for NAS level mobility management congestion control on a per core network node basis and APN based congestion control.\nIf the NAS signalling low priority indication is provided in an ACTIVATE PDP CONTEXT REQUEST message, the SGSN stores the NAS signalling low priority indication within the default PDP context activated due to this request.\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "1.9\tRestrictions",
                    "description": "",
                    "summary": "",
                    "text_content": "Independently of what is stated elsewhere in this and other 3GPP specifications, mobile station support for PBCCH and PCCCH is optional for A/Gb-mode of operation. The network shall never enable PBCCH and PCCCH. This makes use of network operation mode III obsolete.\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                }
            ]
        },
        {
            "title": "2\tReferences",
            "description": "The following documents contain provisions which, through reference in this text, constitute provisions of the present document.\n-\tReferences are either specific (identified by date of publication, edition number, version number, etc.) or non-specific.\n-\tFor a specific reference, subsequent revisions do not apply.\n-\tFor a non-specific reference, the latest version applies. In the case of a reference to a 3GPP document (including a GSM document), a non-specific reference implicitly refers to the latest version of that document in the same Release as the present document.\n[1]\tVoid.\n[2]\tVoid.\n[2a]\t3GPP TR 21.905 \"Vocabulary for 3GPP Specifications\"\n[3]\t3GPP TS 22.002: \"Circuit Bearer Services (BS) supported by a Public Land Mobile Network (PLMN)\".\n[4]\t3GPP TS 22.003: \"Teleservices supported by a Public Land Mobile Network (PLMN)\".\n[5]\t3GPP TS 42.009, Release 4: \"Security aspects\".\n[5a]\t3GPP TS 33.102: \"3G security; Security architecture\".\n[6]\tVoid.\n[7]\t3GPP TS 42.017, Release 4: \"Subscriber Identity Modules (SIM); Functional characteristics\".\n[8]\t3GPP TS 22.101: \"Service aspects; Service principles\".\n[8a]\t3GPP TS 22.001: \"Principles of circuit telecommunication services supported by a Public Land Mobile Network (PLMN)\".\n[8b]\t3GPP TS 23.038: \"Alphabets and language-specific information\".\n[9]\tVoid.\n[9a]\t3GPP TS 23.108: \"Mobile radio interface layer 3 specification core network protocols; Stage 2 (structured procedures)\".\n[10]\t3GPP TS 23.003: \"Numbering, addressing and identification\".\n[11]\tVoid.\n[12]\t3GPP TS 23.014: \"Support of Dual Tone Multi-Frequency (DTMF) signalling\".\n[12a]\tETSI ES 201 235-2, v1.2.1: \"Specification of Dual Tone Multi-Frequency (DTMF); Transmitters and Receivers; Part 2: Transmitters\".\n[13]\t3GPP TS 43.020: \"Security-related network functions\".\n[14]\t3GPP TS 23.122: \"Non-Access-Stratum functions related to Mobile Station (MS) in idle mode\".\n[15]\t3GPP TS 24.002: \"GSM-UMTS Public Land Mobile Network (PLMN) access reference configuration\".\n[16]\t3GPP TS 44.003: \"Mobile Station - Base Station System (MS - BSS) interface; Channel structures and access capabilities\".\n[17]\tVoid.\n[18]\t3GPP TS 44.005: \"Data Link (DL) layer; General aspects\".\n[19]\t3GPP TS 44.006: \"Mobile Station - Base Station System (MS - BSS) interface; Data Link (DL) layer specification\".\n[19a]\t3GPP TS 25.321: \"Medium Access Control (MAC) protocol specification\".\n[19b]\t3GPP TS 25.322: \"Radio Link Control (RLC) protocol specification\".\n[19c]\t3GPP TS 25.413: \"UTRAN Iu interface Radio Access Network Application Part (RANAP) signalling\".\n[20]\t3GPP TS 24.007: \"Mobile radio interface signalling layer 3; General aspects\".\n[21]\t3GPP TS 24.010: \"Mobile radio interface layer 3; Supplementary services specification; General aspects\".\n[22]\t3GPP TS 24.011: \"Point-to-Point (PP) Short Message Service (SMS) support on mobile radio interface\".\n[23]\t3GPP TS 24.012: \"Short Message Service Cell Broadcast (SMSCB) support on the mobile radio interface\".\n[23a]\t3GPP TS 44.071: \"Location Services (LCS); Mobile radio interface layer 3 specification.\"\n[23b]\t3GPP TS 44.031 \"Location Services LCS); Mobile Station (MS) - Serving Mobile Location Centre (SMLC); Radio Resource LCS Protocol (RRLP)\".\n[23c]\t3GPP TS 25.331: \"Radio Resource Control (RRC) protocol specification\"\n[24]\t3GPP TS 24.080: \"Mobile radio Layer 3 supplementary service specification; Formats and coding\".\n[25]\t3GPP TS 24.081: \"Line identification supplementary services; Stage 3\".\n[26]\tVoid.\n[27]\t3GPP TS 24.083: \"Call Waiting (CW) and Call Hold (HOLD) supplementary services; Stage 3\".\n[28]\t3GPP TS 24.084: \"MultiParty (MPTY) supplementary services; Stage 3\".\n[29]\tVoid.\n[30]\tVoid.\n[31]\tVoid.\n[32]\t3GPP TS 45.002: \"Multiplexing and multiple access on the radio path\".\n[33]\t3GPP TS 45.005: \"Radio transmission and reception\".\n[34]\t3GPP TS 45.008: \"Radio subsystem link control\".\n[35]\tVoid.\n[36]\t3GPP TS 27.001: \"General on Terminal Adaptation Functions (TAF) for Mobile Stations (MS)\".\n[36a]\t3GPP TS 27.060: \"Mobile Station (MS) supporting Packet Switched Services \".\n[37]\t3GPP TS 29.002: \"Mobile Application Part (MAP) specification\".\n[38]\t3GPP TS 29.007: \"General requirements on interworking between the Public Land Mobile Network (PLMN) and the Integrated Services Digital Network (ISDN) or Public Switched Telephone Network (PSTN)\".\n[39]\t3GPP TS 51.010: \"Mobile Station (MS) conformance specification\".\n[40]\tVoid.\n[41]\tISO/IEC 646 (1991): \"Information technology - ISO 7-bit coded character set for information interchange\".\n[42]\tISO/IEC 6429: \"Information technology - Control functions for coded character sets\".\n[43]\tISO 8348 (1987): \"Information technology -- Open Systems Interconnection -- Network Service Definition\".\n[44]\tITU-T Recommendation E.163: \"Numbering plan for the international telephone service\".\n[45]\tITU-T Recommendation E.164: \"The international public telecommunication numbering plan\".\n[46]\tITU-T Recommendation E.212: \"The international identification plan for mobile terminals and mobile users\".\n[47]\tITU-T Recommendation F.69 (1993): \"The international telex service - Service and operational provisions of telex destination codes and telex network identification codes\".\n[48]\tITU-T Recommendation I.330: \"ISDN numbering and addressing principles\".\n[49]\tITU-T Recommendation Q.920 (1993): \"ISDN user-network interface data link layer - General aspects\".\n[50]\tITU-T Recommendation Q.930 (1993): \"ISDN user-network interface layer 3 - General aspects\".\n[51]\tITU-T Recommendation I.500 (1993): \"General structure of the ISDN interworking recommendations\".\n[52]\tITU-T Recommendation T.50: \"International Reference Alphabet (IRA) (Formerly International Alphabet No. 5 or IA5) - Information technology - 7-bit coded character set for information interchange\".\n[53]\tITU Recommendation Q.931: \"ISDN user-network interface layer 3 specification for basic control\".\n[54]\tITU-T Recommendation V.21: \"300 bits per second duplex modem standardized for use in the general switched telephone network\".\n[55]\tITU-T Recommendation V.22: \"1200 bits per second duplex modem standardized for use in the general switched telephone network and on point-to-point 2-wire leased telephone-type circuits\".\n[56]\tITU-T Recommendation V.22bis: \"2400 bits per second duplex modem using the frequency division technique standardized for use on the general switched telephone network and on point-to-point 2-wire leased telephone-type circuits\".\n[57]\tVoid.\n[58]\tITU-T Recommendation V.26ter: \"2400 bits per second duplex modem using the echo cancellation technique standardized for use on the general switched telephone network and on point-to-point 2-wire leased telephone-type circuits\".\n[59]\tITU-T Recommendation V.32: \"A family of 2-wire, duplex modems operating at data signalling rates of up to 9600 bit/s for use on the general switched telephone network and on leased telephone-type circuits\".\n[60]\tITU-T Recommendation V.110: \"Support by an ISDN of data terminal equipments with V-Series type interfaces\".\n[61]\tITU-T Recommendation V.120: \"Support by an ISDN of data terminal equipment with V-Series type interfaces with provision for statistical multiplexing\".\n[62]\tITU-T Recommendation X.21: \"Interface between Data Terminal Equipment (DTE) and Data Circuit-terminating Equipment (DCE) for synchronous operation on public data networks\".\n[63]\tVoid.\n[64]\tVoid.\n[65]\tITU-T Recommendation X.30: \"Support of X.21, X.21 bis and X.20 bis based Data Terminal Equipments (DTEs) by an Integrated Services Digital Network (ISDN)\".\n[66]\tITU-T Recommendation X.31: \"Support of packet mode terminal equipment by an ISDN\".\n[67]\tVoid.\n[68]\tVoid.\n[69]\tITU-T Recommendation X.121: \"International numbering plan for public data networks\".\n[70]\tETSI ETS 300 102-1: \"Integrated Services Digital Network (ISDN); User-network interface layer 3; Specifications for basic call control\".\n[71]\tVoid.\n[72]\tISO/IEC 10646: \"Information technology -- Universal Multiple-Octet Coded Character Set (UCS)\".\n[73]\t3GPP TS 22.060: \"General Packet Radio Service (GPRS); Service Description; Stage 1\".\n[74]\t3GPP TS 23.060: \"General Packet Radio Service (GPRS); Service Description; Stage 2\".\n[75]\tVoid.\n[75a]\t3GPP TS 43.318: \"Generic Access Network (GAN); Stage 2\".\n[76]\t3GPP TS 44.060: \"General Packet Radio Service (GPRS); Mobile Station (MS) - Base Station System (BSS) interface; Radio Link Control/Medium Access Control (RLC/MAC) protocol\".\n[76b]\t3GPP TS 44.318: \"Generic Access Network (GAN); Mobile GAN interface layer 3 specification; Stage 3\".\n[77]\tVoid.\n[78]\t3GPP TS 44.065: \"Mobile Station (MS) - Serving GPRS Support Node (SGSN); Subnetwork Dependent Convergence Protocol (SNDCP)\".\n[78a]\t3GPP TS 44.064: \"Mobile Station - Serving GPRS Support Node (MS-SGSN) Logical Link Control (LLC) Layer Specification\".\n[79]\tITU Recommendation I.460: \"Multiplexing, rate adaption and support of existing interfaces\".\n[80]\t3GPP TS 26.111: \"Codec for Circuit Switched Multimedia Telephony Service; Modifications to H.324\".\n[81]\t3GPP TS 23.107: \"Quality of Service (QoS) concept and architecture\".\n[82]\t3GPP TS 43.022: \"Functions related to Mobile Station (MS) in idle mode and group receive mode\".\n[83]\t3GPP TS 26.103: \"Speech Codec List for GSM and UMTS\".\n[84]\t3GPP TS 44.018: \"Mobile radio interface layer 3 specification, Radio Resource Control Protocol\".\n[85]\t3GPP TS 48.008: \"Mobile-services Switching Centre – Base Station System (MSC – BSS) interface; layer 3 specification\".\n[86]\t3GPP TS 48.018: \"General Packet Radio Service (GPRS); Base Station System (BSS) - Serving GPRS Support Node (SGSN); BSS GPRS Protocol (BSSGP)\".\n[87]\t3GPP TS 43.055: \"Dual Transfer Mode (DTM); Stage 2\".\n[88]\t3GPP TS 23.067: \"enhanced Multi-Level Precedence and Pre-emption service (eMLPP); Stage 2\".\n[88a]\t3GPP TS 23.093: \"Technical realization of Completion of Calls to Busy Subscriber (CCBS); Stage 2\".\n[89]\t3GPP TS 22.042: \"Network Identity and Time Zone (NITZ), Stage 1\".\n[90]\t3GPP TS 23.040: \"Technical realization of Short Message Service (SMS)\".\n[91]\t3GPP TS 44.056: \"GSM Cordless Telephony System (CTS), (Phase 1) CTS Radio Interface Layer 3 Specification\".\n[92]\t3GPP TS 23.226: \"Global Text Telephony; Stage 2\"\n[93]\t3GPP TS 26.226: \"Cellular Text Telephone Modem (CTM), General Description\"\n[94]\t3GPP TS 23.236: \"Intra Domain Connection of RAN Nodes to Multiple CN Nodes\"\n[95]\t3GPP TS 24.229: \"IP Multimedia Call Control Protocol based on SIP and SDP\"\n[96]\t3GPP TS 23.205: \"Bearer-independent circuit-switched core network; Stage 2\".\n[97]\t3GPP TS 23.172: \"UDI/RDI Fallback and Service Modification; Stage 2\".\n[98]\t3GPP TS 25.304: \"UE Procedures in Idle Mode and Procedures for Cell Reselection in Connected Mode\"\n[99]\tIETF RFC 4291 (February 2006): \"Internet Protocol Version 6 (IPv6) Addressing Architecture\".\n[100]\t3GPP TS 29.207, Release 6: \"Policy control over Go interface\".\n[101]\t3GPP TS 21.111: \"USIM and IC card requirements\".\n[102]\tIETF RFC 1661 (July 1994): \"The Point-to-Point Protocol (PPP)\".\n[103]\tIETF RFC 3232 (January 2002): \"Assigned Numbers: RFC 1700 is Replaced by an On-line Database\".\n[179][180][181][104]\t3GPP TS 23.034: \"High Speed Circuit Switched Data (HSCSD) – Stage 2\".\n[105]\t3GPP TS 23.271: \"Functional stage 2 description of Location Services (LCS)\".\n[106]\t3GPP TS 23.246: \"Multimedia Broadcast/Multicast Service (MBMS); Architecture and Functional Description\".\n[107]\tIETF RFC 3376 (October 2002): \"Internet Group Management Protocol, Version 3\".\n[108]\tIETF RFC 2710 (October 1999): \"Multicast Listener Discovery (MLD) for IPv6\".\n[109]\t3GPP TS 23.251: \"Network Sharing; Architecture and Functional Description\".\n[110]\t3GPP TS 25.346: \"Introduction of the Multimedia Broadcast Multicast Service (MBMS) in the Radio Access Network\"\n[111]\t3GPP TS 44.118, Release 11: \"Radio Resource Control (RRC) protocol; Iu mode\".\n[112]\t3GPP TS 31.102: \"Characteristics of the USIM Application\".\n[113]\t3GPP TS 43.129: \"Packet-switched handover for GERAN A/Gb mode; Stage 2\".\n[114]\t3GPP TS 23.009: \"Handover procedures\".\n[115]\t3GPP TR 23.903: \"Redial solution for voice-video switching\".\n[116]\t3GPP TS 24.279: \"Combining Circuit Switched (CS) and IP Multimedia Subsystem (IMS) services, stage 3\"\n[117]\tITU-T Recommendation H.324 Amendment 1: \"New Annex K \"Media Oriented Negotiation Acceleration Procedure\" and associated changes to Annex\".\n[118]\tITU-T Recommendation H.324 Amendment 2: \"New Annex L on text conversation and associated changes; corrections and clarifications to Annex K\".\n[119]\tITU-T Recommendation H.245: \"Control protocol for multimedia communication\"\n[120]\t3GPP TS 24.301: \"Non-Access-Stratum (NAS) protocol for Evolved Packet System (EPS); Stage 3\".\n[121]\t3GPP TS 36.304: \"Evolved Universal Terrestrial Radio Access (E-UTRA); User Equipment (UE) procedures in idle mode\".\n[122]\t3GPP TS 23.401: \"GPRS enhancements for E-UTRAN access\".\n[123]\t3GPP TS 33.401: \"3GPP System Architecture Evolution; Security architecture\".\n[124]\t3GPP TS 24.303: \"Mobility management based on Dual-Stack Mobile IPv6; Stage 3\".\n[125]\t3GPP TS 24.327: \"Mobility between 3GPP WLAN Interworking and 3GPP systems; GPRS and 3GPP I-WLAN aspects; Stage 3\".\n[126]\t3GPP TS 23.216: \"Single Radio Voice Call Continuity (SRVCC); Stage 2\".\n[127]\t3GPP TS 23.002: \"Network architecture\".\n[128]\t3GPP TS 25.301: \"Radio interface protocol architecture\".\n[129]\t3GPP TS 36.331: \"Evolved Universal Terrestrial Radio Access (E-UTRA); Radio Resource Control (RRC); Protocol specification\".\n[130]\t3GPP TS 29.061: \"Interworking between the Public Land Mobile Network (PLMN) supporting packet based services and Packet Data Networks (PDN)\".\n[131]\t3GPP TS 23.221: \"Architectural requirements\".\n[132]\t3GPP TS 23.090: \"Unstructured Supplementary Service Data (USSD); Stage 2\".\n[133]\t3GPP TS 23.272: \"Circuit Switched Fallback in Evolved Packet System; Stage 2\".\n[133A]\t3GPP TS 23.682: \"Architecture enhancements to facilitate communications with packet data networks and applications\".\n[134]\t3GPP TS 24.167: \"3GPP IMS Management Object (MO); Stage 3\".\n[135]\t3GPP TS 24.368: \"Non-Access Stratum (NAS) configuration Management Object (MO)\".\n[136]\t3GPP TS 24.237: \"IP Multimedia Subsystem (IMS) Service Continuity; Stage 3\".\n[137]\tIETF RFC 3261 (June 2002): \"SIP: Session Initiation Protocol\".\n[138]\t3GPP TS 22.011: \"Service accessibility\".\n[139]\tIETF RFC 3633 (December 2003): \"IPv6 Prefix Options for Dynamic Host Configuration Protocol (DHCP) version 6\".\n[140]\t3GPP TS 23.012: \"Location management procedures\".\n[141]\t3GPP TS 24.022: \"Radio Link Protocol (RLP) for circuit switched bearer and teleservices\".\n[142]\tITU-T Recommendation X.1: \"International user classes of service in, and categories of access to, public data networks and Integrated Services Digital Networks (ISDNs)\".\n[143]\tITU-T Recommendation X.25: \"Interface between Data Terminal Equipment (DTE) and Data Circuit-terminating Equipment (DCE) for terminals operating in the packet mode and connected to public data networks by dedicated circuit\".\n[144]\tITU-T Recommendation X.213: \"Information technology – Open Systems Interconnection – Network service definition\".\n[145]\tITU-T Recommendation I.334: \"Principles relating ISDN numbers/sub-addresses to the OSI reference model network layer addresses\".\n[146]\tITU-T Recommendation H.223: \"Multiplexing protocol for low bit rate multimedia communication\".\n[147]\tITU-T Recommendation V.34: \"A modem operating at data signalling rates of up to 33 600 bit/s for use on the general switched telephone network and on leased point-to-point 2-wire telephone-type circuits\".\n[148]\tIETF RFC 3810 (June 2004): \"Multicast Listener Discovery Version 2 (MLDv2) for IPv6\".\n[149]\t3GPP TS 29.018: \"General Packet Radio Service (GPRS); Serving GPRS Support Node (SGSN) - Visitors Location Register (VLR); Gs interface layer 3 specification\".\n[150]\t3GPP TS 29.272: \"Evolved Packet System (EPS); Mobility Management Entity (MME) and Serving GPRS Support Node (SGSN) related interfaces based on Diameter protocol\".\n[151]\t3GPP TS 45.008: \"Radio subsystem link control\".\n[152]\t3GPP TS 29.010: \"Information element mapping between Mobile Station - Base Station System (MS - BSS) and Base Station System - Mobile-services Switching Centre (BSS - MSC); Signalling Procedures and the Mobile Application Part (MAP)\".\n[153]\t3GPP TS 36.306: \"Evolved Universal Terrestrial Radio Access (E-UTRA); User Equipment (UE) radio access capabilities\".\n[154]\t3GPP TS 24.105: \"Application specific Congestion control for Data Communication (ACDC) Management Object (MO)\".\n[155]\t3GPP TS 23.161: \"Network-Based IP Flow Mobility (NBIFOM); Stage 2\".\n[156]\t3GPP TS 24.302: \"Access to the 3GPP Evolved Packet Core (EPC) via non-3GPP access networks; Stage 3\".\n[157]\t3GPP TS 45.001: \"Physical layer on the radio path; General description\".\n[158]\t3GPP TS 24.161: \" Network-Based IP Flow Mobility (NBIFOM); Stage 3\".\n[159]\t3GPP TS 43.064: \"Overall description of the GPRS Radio Interface; Stage 2\".\n[160]\t3GPP TS 23.167: \"IP Multimedia Subsystem (IMS) emergency sessions\".\n[161]\t3GPP TS 26.267: \"eCall Data Transfer; In-band modem solution; General description\".\n[162]\t3GPP TS 24.250: \"Protocol for Reliable Data Service; Stage 3\".\n[163]\t3GPP TS 24.292: \"IP Multimedia (IM) Core Network (CN) subsystem; Centralized Services (ICS); Stage 3\".\n[164]\t3GPP TS 29.292: \"Interworking between the IP Multimedia (IM) Core Network (CN) Subsystem (IMS) and MSC Server for IMS Centralized Services (ICS)\".\n[165]\t3GPP TS 49.031: \"Location Services (LCS); Base Station System Application Part LCS Extension (BSSAP-LE)\".\n[166]\t3GPP TS 23.501: \"System Architecture for the 5G System; Stage 2\".\n[167]\t3GPP TS 24.501: \"Non-Access-Stratum (NAS) protocol for 5G System (5GS); Stage 3\".\n[168]\tIETF RFC 3629 (November 2003): \"UTF-8, a transformation format of ISO 10646\".\n[169]\tIETF RFC 5905 (June 2010): \"Network Time Protocol Version 4: Protocol and Algorithms Specification\".\n[170]\t3GPP TS 33.501: \"Security architecture and procedures for 5G System\".\n[171]\t3GPP TS 24.193: \"Access Traffic Steering, Switching and Splitting; Stage 3\".\n[172]\tIETF RFC 7858 (May 2016): \"Specification for DNS over Transport Layer Security (TLS)\".\n[173]\tIETF RFC 8094 (February 2017): \"DNS over Datagram Transport Layer Security (DTLS)\".\n[174]\tIET RFC 6056 (January 2011): \"Recommendations for Transport-Protocol Port Randomization\".\n[175]\tIETF RFC 1035 (November 1987):\"DOMAIN NAMES - IMPLEMENTATION AND SPECIFICATION\".\n[176]\tIETF RFC 7469 (April 2015):\"Public Key Pinning Extension for HTTP\".\n[177]\tITU-T Recommendation X.690 (2002) | ISO/IEC 8825-1:2002,\nInformation technology - ASN.1 encoding rules:\nSpecification of Basic Encoding Rules (BER), Canonical\nEncoding Rules (CER) and Distinguished Encoding Rules\n(DER).\n[178]\t3GPP TS 24.502: \"Access to the 3GPP 5G System (5GS) via non-3GPP access networks; Stage 3\".\n[179]\tIETF RFC 1334 (October 1992): \"PPP Authentication Protocols\".\n[180]\tIETF RFC 1994 (August 1996): \"PPP Challenge Handshake Authentication Protocol (CHAP)\".\n[181]\tIETF RFC 1332 (May 1992): \"The PPP Internet Protocol Control Protocol (IPCP)\".\n[182]\t3GPP TS 23.548: \"5G System Enhancements for Edge Computing; Stage 2\".\n[183]\t3GPP TS 38.304: \"NR; User Equipment (UE) procedures in Idle mode and RRC Inactive state\".\n[184]\t3GPP TS 23.558: \"Architecture for enabling Edge Applications; Stage 2\".\n[185]\t3GPP TS 24.174: \"Support of multi-device and multi-identity in the IP Multimedia Subsystem (IMS); Stage 3\".\n[186]\tIETF RFC 7542: \"The Network Access Identifier\".\n\n",
            "summary": "",
            "tables": [],
            "figures_meta_data": [],
            "subsections": [
                {
                    "title": "2.1\tDefinitions and abbreviations",
                    "description": "",
                    "summary": "",
                    "text_content": "For the purposes of the present document, the abbreviations defined in 3GPP TR 21.905 [2a] and the followings apply:\nCAT\tCustomized Alerting Tone\nCHAP\tChallenge Handshake Authentication Protocol\nDRVCC\tDual Radio Voice Call Continuity\neDRX\tExtended idle-mode DRX cycle\nIP-CAN\tIP-Connectivity Access Network\nHNB\tHome Node B\nIoT\tInternet of Things\nKc\t64-bit GSM ciphering key\nKc128\t128-bit GSM ciphering key\nKint\t128-bit GSM integrity key\nL-GW\tLocal PDN Gateway\nLHN-ID\tLocal Home Network Identifier\nLIPA\tLocal IP Access\nMSD\tMinimum Set of emergency related Data\nMTU\tMaximum Transfer Unit\nNB-IoT\tNarrowband IoT\nNR\tNew Radio\nPAP\tPassword Authentication Protocol\nPSM\tPower Saving Mode\nPVS\tProvisioning Server\nSIPTO\tSelected IP Traffic Offload\nS-NSSAI\tSingle Network Slice Selection Assistance Information\nSDNAEPC\tSecondary DN authentication and authorization over EPC\nSNPN\tStand-alone Non-Public Network\nTMGI\tTemporary Mobile Group Identity\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": [
                        {
                            "title": "2.1.1\tRandom values",
                            "text_content": "In a number of places in the present document, it is mentioned that some value must take a \"random\" value, in a given range, or more generally with some statistical distribution. Such cases interest only the Mobile Station.\nIt is required that there is a low probability that two MSs in the same conditions (including the case of two MSs of the same type from the same manufacturer) will choose the same value. Moreover, it is required that, if it happens that two MSs in similar conditions choose the same value, the probability of their choices being identical at the next occasion is the same as if their first choices had been different.\nThe meaning of such a specification is that any statistical test for these values, done on a series of similar events, will obtain a result statistically compatible with the specified distribution. This shall hold even in the cases where the tests are conducted with a subset of possible events, with some common parameters. Moreover, basic tests of independence of the values within the series shall pass.\nData against which correlation with the values shall not be found are the protocol state, or the IMSI, or identities or other unrelated information broadcast by the network, or the current TDMA frame number.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "2.1.2\tVocabulary",
                            "text_content": "For the purposes of the present document, the following terms and definitions apply:\n-\tA GSM security context is established and stored in the MS and the network as a result of a successful execution of a GSM authentication challenge. The GSM security context for the CS domain consists of the GSM ciphering key and the ciphering key sequence number. The GSM security context for the PS domain consists of the GPRS GSM ciphering key and the GPRS ciphering key sequence number.\n-\tA UMTS security context is established and stored in the MS and the network as a result of a successful execution of a UMTS authentication challenge. The UMTS security context for the CS domain consists of the UMTS ciphering key, the UMTS integrity key, the GSM ciphering key, the ciphering key sequence number and the GSM Kc128 (if an A5 ciphering algorithm that requires a 128-bit ciphering key is in use). The UMTS security context for the PS domain consists of the GPRS UMTS ciphering key, the GPRS UMTS integrity key, the GPRS GSM ciphering key, the GPRS ciphering key sequence number, the GPRS GSM Kc128 (if a GEA ciphering algorithm that requires a 128-bit ciphering key is in use) and the GPRS GSM Kint (if a GIA integrity algorithm that requires a 128-bit integrity key is in use).\n-\tAn MS is attached for emergency bearer services if it has successfully completed an attach for emergency bearer services or if it has only a PDN connection for emergency bearer services established.\n-\tidle mode: In this mode, the mobile station is not allocated any dedicated channel; it listens to the CCCH and the BCCH;\n-\tgroup receive mode: (Only applicable for mobile stations supporting VGCS listening or VBS listening) In this mode, the mobile station is not allocated a dedicated channel with the network; it listens to the downlink of a voice broadcast channel or voice group call channel allocated to the cell. Occasionally, the mobile station has to listen to the BCCH of the serving cell as defined in 3GPP TS 43.022 [82] and 3GPP TS 45.008 [34];\n-\tdedicated mode: In this mode, the mobile station is allocated at least two dedicated channels, only one of them being a SACCH;\n-\tEAB: Extended Access Barring, see 3GPP TS 22.011 [138].\n-\tgroup transmit mode: (Only applicable for mobile stations supporting VGCS talking) In this mode, one mobile station of a voice group call is allocated two dedicated channels, one of them being a SACCH. These channels can be allocated to one mobile station at a time but to different mobile stations during the voice group call;\n-\tpacket idle mode: (only applicable for mobile stations supporting GPRS) In this mode, mobile station is not allocated any radio resource on a packet data physical channel; it listens to the BCCH and the CCCH, see 3GPP TS 44.060 [76].\n-\tpacket transfer mode: (only applicable for mobile stations supporting GPRS) In this mode, the mobile station is allocated radio resource on one or more packet data physical channels for the transfer of LLC PDUs.\n-\tmain DCCH: In dedicated mode and group transmit mode, only two channels are used as DCCH, one being a SACCH, the other being a SDCCH or a FACCH; the SDCCH or FACCH is called here \"the main DCCH\";\n-\tA channel is activated if it can be used for transmission, in particular for signalling, at least with UI frames. On the SACCH, whenever activated, it must be ensured that a contiguous stream of layer 2 frames is sent;\n-\tA TCH is connected if circuit mode user data can be transferred. A TCH cannot be connected if it is not activated. A TCH which is activated but not connected is used only for signalling, i.e. as a DCCH;\n-\tThe data link of SAPI 0 on the main DCCH is called the main signalling link. Any message specified to be sent on the main signalling link is sent in acknowledged mode except when otherwise specified;\n-\tThe term \"to establish\" a link is a short form for \"to establish the multiframe mode\" on that data link. It is possible to send UI frames on a data link even if it is not established as soon as the corresponding channel is activated. Except when otherwise indicated, a data link layer establishment is done without an information field.\n-\t\"channel set\" is used to identify TCHs that carry related user information flows, e.g., in a multislot configuration used to support circuit switched connection(s), which therefore need to be handled together.\n-\tA temporary block flow (TBF) is a physical connection used by the two RR peer entities to support the uni-directional transfer of LLC PDUs on packet data physical channels, see 3GPP TS 44.060 [76].\n-\tRLC/MAC block: A RLC/MAC block is the protocol data unit exchanged between RLC/MAC entities, see 3GPP TS 44.060 [76].\n-\tA GMM context is established when a GPRS attach procedure is successfully completed.\n-\tNetwork operation mode\nThe network operation modes I and II are defined in 3GPP TS 23.060 [74].\nThe network operation mode shall be indicated as system information. For proper operation, the network operation mode should be the same in each cell of one routing area.\n-\tGAN mode: See 3GPP TS 43.318 [75a].\n-\tGPRS MS operation mode\nThe three different GPRS MS operation modes A, B, and C are defined in 3GPP TS 23.060 [74].\n-\tRR connection: A RR connection is a dedicated physical circuit switched domain connection used by the two RR or RRC peer entities to support the upper layers' exchange of information flows.\n-\tPS signalling connection is a peer to peer Iu mode connection between MS and CN packet domain node.\n-\tInter-system change is a change of an MS from A/Gb mode to Iu mode of operation or vice versa, or from S1 mode to A/Gb mode or Iu mode of operation.\n-\tGPRS: Packet services for systems which operate the Gb or Iu-PS interfaces.\n-\tGSM ciphering key: A 64-bit CS GSM ciphering key\n-\tGSM Kc128: A 128-bit CS GSM ciphering key\n-\tGPRS GSM ciphering key: A 64-bit PS GSM ciphering key\n-\tGPRS GSM Kc128: A 128-bit PS GSM ciphering key\n-\tGPRS GSM Kint: A 128-bit PS GSM integrity key.\n-\tThe label (A/Gb mode only) indicates this section or paragraph applies only to a system which operates in A/Gb mode, i.e. with a functional division that is in accordance with the use of an A or a Gb interface between the radio access network and the core network. For multi system case this is determined by the current serving radio access network.\n-\tThe label (Iu mode only) indicates this section or paragraph applies only to a system which operates in UTRAN Iu mode , i.e. with a functional division that is in accordance with the use of an Iu-CS or Iu-PS interface between the radio access network and the core network. For multi system case this is determined by the current serving radio access network.\n-\tIn A/Gb mode,... Indicates this paragraph applies only to a system which operates in A/Gb mode. For multi system case this is determined by the current serving radio access network.\n-\tIn Iu mode,... Indicates this paragraph applies only to a system which operates in UTRAN Iu mode. For multi system case this is determined by the current serving radio access network.\n-\tIn A/Gb mode and GERAN Iu mode,... Indicates this paragraph applies only to a system which operates in A/Gb mode or GERAN Iu mode. For multi system case this is determined by the current serving radio access network.\n-\tIn UTRAN Iu mode,... Indicates this paragraph applies only to a system which operates in UTRAN Iu mode. For multi system case this is determined by the current serving radio access network.\n-\tIn a shared network,... Indicates this paragraph applies only to a shared network. For the definition of shared network see 3GPP TS 23.122 [14].\nNOTE:\tA shared network is applicable to GERAN and UTRAN, however, according to this definition, a multi-operator core network (MOCN) with common GERAN is not considered a shared network in 3GPP TS 23.122 [14] and in the present specification.\n-\tMulti-Operator Core Network (MOCN) with common GERAN: a network in which different core network operators are connected to a shared GERAN broadcasting only a single, common PLMN identity.\n-\tChosen PLMN: The same as selected PLMN as specified in 3GPP TS 23.122 [14].\n-\tA default PDP context is a PDP context activated by the PDP context activation procedure that establishes a PDN connection. The default PDP context remains active during the lifetime of the PDN connection.\n-\tA PDP context for emergency bearer services is a default PDP context which was activated with request type \"emergency\", or any secondary PDP contexts associated to this default PDP context.\n-\tNon-emergency PDP context: Any PDP context which is not a PDP context for emergency bearer services.\n-\tSIM, Subscriber Identity Module (see 3GPP TS 42.017 [7]).\n-\tUSIM, Universal Subscriber Identity Module (see 3GPP TS 21.111 [101]).\n-\tMS, Mobile Station. The present document makes no distinction between MS and UE.\n-\tMS configured for dual priority: An MS which provides dual priority support is configured for NAS signalling low priority and also configured to override the NAS signalling low priority indicator (see 3GPP TS 24.368 [135], 3GPP TS 31.102 [112]).\n-\tCell Notification is an (optimised) variant of the Cell Update Procedure which uses the LLC NULL frame for cell change notification which does not trigger the restart of the READY timer\n-\tDTM: Dual Transfer Mode, see 3GPP TS 44.018 [84] and 3GPP TS 43.055 [87]\n-\tThe term \"eCall only\" applies to a mobile station which is in the eCall only mode, as described in 3GPP TS 22.101 [8].\n-\t\"removal of eCall only restriction\" means that all the limitations as described in 3GPP TS 22.101 [8] for the eCall only mode do not apply any more.\n-\t\"SMS-only service\": A subset of services which includes only short message service. The MS can request \"SMS-only service\" in order to obtain SMS.\n-\tAccess domain selection: The process to select whether the CS domain or the IMS/IP-CAN is used to transmit the call control signalling between MS and core network. Definition derived from 3GPP TS 23.221 [131].\n-\tAPN based congestion control: Congestion control in session management where the network can reject session management requests from MSs or deactivate PDP contexts when the associated APN is congested.\n-\tNAS level mobility management congestion control: Congestion control mechanism in the network in mobility management. \"NAS level mobility management congestion control\" consists of \"subscribed APN based congestion control\" and \"general NAS level mobility management congestion control\".\n-\tGeneral NAS level mobility management congestion control: The type of congestion control that is applied at a general overload or congestion situation in the network, e.g. lack of processing resources.\n-\tGroup specific session management congestion control: Type of congestion control at session management level that is applied to reject session management requests from MSs belonging to a particular group when one or more group congestion criteria as specified in 3GPP TS 23.060 [74] are met.\n-\tSubscribed APN based congestion control: Congestion control in mobility management where the network can reject attach requests from MSs with a certain APN in the subscription.\n-\tMapped P-TMSI: A P-TMSI which is mapped from a GUTI previously allocated to the MS by an . Mapping rules are defined in 3GPP TS 23.003 [10]. Definition derived from 3GPP TS 23.401 [122].\n-\tNative P-TMSI: A P-TMSI previously allocated by an SGSN. Definition derived from 3GPP TS 23.401 [122].\n-\tValid LAI: A LAI that is not deleted LAI.\n-\tEMM Combined UE Waiting Flag: See 3GPP TS 29.018 [149].\n-\tPower Saving Mode: Power saving mode allows the MS to reduce its power consumption. When power saving mode is active in the MS, the MS is registered to the network and in PMM-IDLE mode (in Iu mode), EMM-IDLE mode (in S1 mode) or the READY timer is not running (in A/Gb mode) but the AS layer is deactivated. Definition derived from 3GPP TS 23.060 [74] and 3GPP TS 23.401 [122].\n-\tACDC: Application specific Congestion control for Data Communication, see 3GPP TS 22.011 [138].\n-\tHighest ranked ACDC category: The ACDC category with the lowest value as defined in 3GPP TS 24.105 [154].\n-\tExtended idle-mode DRX cycle: Extended idle-mode DRX cycle allows the MS to reduce its power consumption in PMM-IDLE mode (in Iu mode) or when the READY timer is not running (in A/Gb mode) or in EMM-IDLE mode (in S1 mode). Extended idle-mode DRX cycle is associated with the eDRX cycle value. Definition derived from 3GPP TS 23.060 [74] and 3GPP TS 23.401 [122].\n-\tEC-GSM-IoT: Extended coverage in GSM for IoT is a feature which enables extended coverage operation. See 3GPP TS 43.064 [159].\nFor the purposes of the present document, the following terms and definitions given in 3GPP TS 23.401 [122], subclause 3.2, apply:\nDCN-ID\nGlobally Unique MME Identifier (GUMMEI)\nGlobally Unique Temporary Identity (GUTI)\nIdle Mode Signalling Reduction (ISR)\nM-Temporary Mobile Subscriber Identity (M-TMSI)\nNarrowBand-IoT\nPDN connection\nTracking Area Identity (TAI)\nTemporary Identity used in Next update (TIN)\nFor the purposes of the present document, the following terms and definitions given in 3GPP TS 24.301 [120] apply:\nCSG cell\nCSG ID\nCSG selection\nEMM\nEMM-IDLE mode\nEPS\nESM\nIn NB-S1 mode\nIn WB-S1 mode\nLIPA PDN connection\nMO MMTEL voice call is started\nMO MMTEL video call is started\nMO SMSoIP is started\nMS configured to use AC11 – 15 in selected PLMN: see UE configured to use AC11 – 15 in selected PLMN\nPDN connection for emergency bearer services\nS1 mode\nSIPTO at the local network PDN connection\nSIPTO at the local network PDN connection with collocated L-GW\nSIPTO at the local network PDN connection with stand-alone GW\nFor the purposes of the present document, the following terms and definitions given in 3GPP TS 23.272 [133] apply:\nCS fallback\nSMS over SGs\nFor the purposes of the present document, the following terms and definitions given in 3GPP TS 33.401 [123] apply:\nCurrent EPS security context\nMapped security context\neKSI\nCK' and IK'\nNAS downlink COUNT\nNAS uplink COUNT\nFor the purposes of the present document, the following terms and definitions given in 3GPP TS 23.251 [109] apply:\nMulti-Operator Core Network (MOCN)\nNetwork Sharing non-supporting MS: see non-supporting UE.\nNetwork Sharing supporting MS: see supporting UE.\nFor the purposes of the present document, the following terms and definitions given in 3GPP TS 23.122 [14] apply:\nCountry\nEHPLMN\nHPLMN\nSuitable Cell\nVPLMN\nFor the purposes of the present document, the following terms and definitions given in 3GPP TS 23.216 [126] apply:\nSRVCC\nvSRVCC\nCS to PS SRVCC\nFor the purposes of the present document, the following terms and definitions given in 3GPP TS 23.251 [109] and 3GPP TS 44.018 [84] apply:\nCommon PLMN\nFor the purposes of the present document, the following terms and definitions given in 3GPP TS 44.018 [84] apply:\nAdditional PLMN\nNetwork sharing\nFor the purposes of the present document, the following terms and definitions given in 3GPP TS 23.003 [10] apply:\nLocal Home Network Identifier\nFor the purposes of the present document, the following terms and definitions given in 3GPP TS 23.161 [155] apply:\nRAN rules handling parameter\nFor the purposes of the present document, the following terms and definitions given in 3GPP TS 24.302 [156] apply:\nmove-traffic-to-WLAN indication\nmove-traffic-from-WLAN indication\nFor the purposes of the present document, the following terms and definitions given in 3GPP TS 23.060 [74] apply:\nDedicated core network\nFor the purposes of the present document, the following terms and definitions given in 3GPP TS 24.161 [158] apply:\nNBIFOM\nmulti-access PDN connection\nFor the purposes of the present document, the following terms and definitions given in 3GPP TS 23.167 [160] apply:\neCall over IMS\nFor the purposes of the present document, the following terms and definitions given in 3GPP TS 22.101 [8] apply:\nMinimum Set of Data (MSD)\nFor the purposes of the present document, the following terms and definitions given in 3GPP TS 23.501 [166] apply:\nNG-RAN\nFor the purposes of the present document, the following terms and definitions given in 3GPP TS 24.501 [167] apply:\n5GCN\n5GMM\n5GS\n5GSM\nDNN\nDNN based congestion control\nIn NB-N1 mode\nIn WB-N1 mode\nN1 mode\nService-level-AA\nFor the purposes of the present document, the following terms and definitions given in 3GPP TS 23.221 [131] apply:\nRestricted local operator services\nFor the purposes of the present document, the following terms and definitions given in 3GPP TS 23.038 [8b] apply:\n<CR>\n",
                            "figures_meta_data": [],
                            "tables": []
                        }
                    ]
                }
            ]
        },
        {
            "title": "3\tRadio Resource management procedures",
            "description": "See 3GPP TS 44.018 [84].\n",
            "summary": "",
            "tables": [],
            "figures_meta_data": [],
            "subsections": []
        },
        {
            "title": "4\tElementary procedures for Mobility Management",
            "description": "",
            "summary": "",
            "tables": [],
            "figures_meta_data": [],
            "subsections": [
                {
                    "title": "4.1\tGeneral",
                    "description": "",
                    "summary": "",
                    "text_content": "This clause describes the procedures used for mobility management for non-GPRS services and for GPRS-services at the radio interface (Reference Point Um and Uu).\nThe main function of the Mobility Management sublayer is to support the mobility of user terminals, such as informing the network of its present location and providing user identity confidentiality.\nA further function of the MM sublayer is to provide connection management services to the different entities of the upper Connection Management (CM) sublayer (see 3GPP TS 24.007 [20]).\nThere are two sets of procedures defined in this chapter:\n-\tMM procedures for non-GPRS services (performed by the MM entity of the MM sublayer); and\n-\tGMM procedures for GPRS services (performed by the GMM entity of the MM sublayer), see 3GPP TS 24.007 [20].\nAll the MM procedures described in this clause can only be performed if a RR connection has been established between the MS and the network. Else, the MM sublayer has to initiate the establishment of a RR connection (see 3GPP TS 44.018 [84] subclause 3.3 and 3GPP TS 25.331 [23c]).\nIn A/Gb mode, the GMM procedures described in this clause, use services provided by the RR sublayer without prior RR connection establishment.\nIn Iu mode: all the GMM procedures described in this clause can only be performed if a PS signalling connection has been established between the MS and the network. Else, the GMM sublayer has to initiate the establishment of a PS signalling connection (see 3GPP TS 25.331 [23c]).\nGMM procedures are mandatory and applicable only for GPRS MSs and networks supporting those MSs. For GPRS MSs which are IMSI attached for both GPRS and non-GPRS services, some MM procedures are replaced by GMM combined procedures provided that the network operates in network operation mode I, i.e. is supporting combined GMM procedures. GMM combined procedures are not applicable for the GPRS MS operation mode C but are mandatory for the GPRS MS operation modes A and B and networks supporting network operation mode I, see 3GPP TS 23.060 [74].\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": [
                        {
                            "title": "4.1.1\tMM and GMM procedures",
                            "text_content": "Depending on how they can be initiated, three types of MM procedures can be distinguished:\n1)\tMM common procedures:\nA MM common procedure can always be initiated whilst a RR connection exists. The procedures belonging to this type are:\nInitiated by the network:\n-\tTMSI reallocation procedure;\n-\tauthentication procedure;\n-\tidentification procedure;\n-\tMM information procedure;\n-\tabort procedure.\nHowever, abort procedure is used only if an MM connection is being established or has already been established i.e. not during MM specific procedures or during IMSI detach procedure, see subclause 4.3.5.\nInitiated by the mobile station:\n-\tIMSI detach procedure (with the exceptions specified in subclause 4.3.4).\n2)\tMM specific procedures:\nA MM specific procedure can only be initiated if no other MM specific procedure is running or no MM connection exists. The procedures belonging to this type are:\n-\tnormal location updating procedure;\n-\tperiodic updating procedure;\n-\tIMSI attach procedure; and\n-\teCall inactivity procedure.\n3)\tMM connection management procedures:\nThese procedures are used to establish, maintain and release a MM connection between the mobile station and the network, over which an entity of the upper CM layer can exchange information with its peer. A MM connection establishment can only be performed if no MM specific procedure is running. More than one MM connection may be active at the same time.\nDepending on how they can be initiated, three types of GMM procedures can be distinguished:\n1)\tGMM common procedures:\nIn Iu mode, a GMM common procedure can always be initiated whilst a PS signalling connection exists.\nThe procedures belonging to this type are:\nInitiated by the network when a GMM context has been established:\n-\tP-TMSI (re-) allocation;\n-\tGPRS authentication and ciphering;\n-\tGPRS identification;\n-\tGPRS information.\n2)\tGMM specific procedures:\nInitiated by the network and used to detach the IMSI in the network for GPRS services and/or non-GPRS services and to release a GMM context:\n-\tGPRS detach.\nInitiated by the MS and used to attach or detach the IMSI in the network for GPRS services and/or non-GPRS services and to establish or release a GMM context:\n-\tGPRS attach and combined GPRS attach;\n-\tGPRS detach and combined GPRS detach;\n-\teCall inactivity procedure.\nInitiated by the MS when a GMM context has been established:\n-\tnormal routing area updating and combined routing area updating;\n-\tperiodic routing area updating.\n3)\tGMM connection management procedures (Iu mode only):\nInitiated by the MS and used to establish a secure connection to the network and/or to request the resource reservation for sending data:\nService Request.\nThe Service Request procedure can only be initiated if no MS initiated GMM specific procedure is ongoing.\n\nIn Iu mode only, integrity protected signalling is mandatory with one exception regarding emergency calls (see subclause 4.1.1.1.1a). In Iu mode only, all layer 3 protocols shall use integrity protected signalling once the security mode procedure has been successfully activated in the network and the MS. Integrity protection of all layer 3 signalling messages is the responsibility of lower layers. It is the network which activates integrity protection. This is done using the security mode control procedure (3GPP TS 25.331 [23c] and 3GPP TS 44.118 [111]).\nThe supervision that integrity protection is activated shall be the responsibility of the MM and GMM layer in the MS (see 3GPP TS 33.102 [5a]). In order to do this, the lower layers shall provide the MM and GMM layer with an indication on when the integrity protection is activated in the MS (i.e. one indication to the MM layer when a security mode control procedure for the CS domain is processed successfully and one indication to the GMM layer when a security mode control procedure for the PS domain is processed successfully).\nThe CS and PS domains in the network and the MM and GMM layers in the MS, are not aware of whether integrity protection has been started in the lower layers by the other domain. It is mandatory for the network to initiate one security mode control procedure for the CS domain and one for the PS domain.\nExcept the messages listed below, no layer 3 signalling messages shall be processed by the receiving MM and GMM entities or forwarded to the CM entities, unless the network has activated the integrity protection for that domain.\n-\tMM messages:\n-\tAUTHENTICATION REQUEST\n-\tAUTHENTICATION REJECT\n-\tIDENTITY REQUEST\n-\tLOCATION UPDATING ACCEPT (at periodic location update with no change of location area or temporary identity, and, any Per MS T3212 value is not changed)\n-\tLOCATION UPDATING REJECT (if the cause is not #25)\n-\tCM SERVICE ACCEPT, if the following two conditions apply:\n-\tno other MM connection is established; and\n-\tthe CM SERVICE ACCEPT is the response to a CM SERVICE REQUEST with CM SERVICE TYPE IE set to 'emergency call establishment'\n-\tCM SERVICE REJECT (if the cause is not #25)\n-\tABORT\n-\tGMM messages:\n-\tAUTHENTICATION & CIPHERING REQUEST\n-\tAUTHENTICATION & CIPHERING REJECT\n-\tIDENTITY REQUEST\n-\tATTACH REJECT (if the cause is not #25)\n-\tROUTING AREA UPDATE ACCEPT, if any of the following conditions applies:\n-\tthe MS performs periodic routing area updating with:\n-\tno change in routing area or temporary identities;\n-\tno change in T3312 extended value;\n-\tno change in Network feature support value; and\n-\textended DRX parameters IE not included.\n-\tthe GMM entity in the MS has received an ATTACH ACCEPT message with neither ciphering nor integrity protection applied in response to an ATTACH REQUEST message with attach type set to \"emergency attach\"; or\n-\tthe MS has performed intersystem change from S1 mode to Iu mode with a PDN connection for emergency bearer services for which the \"null integrity protection algorithm\" EIA0 has been used while in S1 mode.\n-\tROUTING AREA UPDATE REJECT (if the cause is not #25)\n-\tSERVICE REJECT (if the cause is not #25)\n-\tDETACH ACCEPT (for non power-off)\n-\tATTACH ACCEPT, if the ATTACH ACCEPT is the response to an ATTACH REQUEST with attach type set to \"emergency attach\".\n-\tSERVICE ACCEPT, if any of the following conditions applies:\n-\tthe GMM entity in the MS has received an ATTACH ACCEPT message with neither ciphering nor integrity protection applied in response to an ATTACH REQUEST message, with attach type set to \"emergency attach\"; or\n-\tthe MS has performed intersystem change from S1 mode to Iu mode with a PDN connection for emergency bearer services for which the \"null integrity protection algorithm\" EIA0 has been used while in S1 mode.\n-\tCC messages:\n-\tall CC messages, if the following two conditions apply:\n-\tno other MM connection is established; and\n-\tthe MM entity in the MS has received a CM SERVICE ACCEPT message with no ciphering or integrity protection applied as response to a CM SERVICE REQUEST message, with CM SERVICE TYPE set to 'Emergency call establishment’ sent to the network;\n-\tthe MM connection was established locally due to the SRVCC handover of a PDN connection for emergency bearer services for which the \"null integrity protection algorithm\" EIA0 has been used while in S1 mode or for which integrity protection has not been activated while in Iu mode; or\n-\tthe MM connection was established locally due to the 5G-SRVCC handover from NG-RAN to UTRAN of an emergency PDU session for which the \"null integrity protection algorithm\" 5G-IA0 has been used while in N1 mode.\n-\tSM messages:\n-\tall SM messages, if any of the following conditions applies:\n-\tthe GMM entity in the MS has received an ATTACH ACCEPT message with neither ciphering nor integrity protection applied in response to an ATTACH REQUEST message, with attach type set to \"emergency attach\"; or\n-\tthe MS has performed intersystem change from S1 mode to Iu mode with a PDN connection for emergency bearer services for which the \"null integrity protection algorithm\" EIA0 has been used while in S1 mode.\nOnce integrity protection is activated, the receiving layer 3 entity in the MS shall not process any layer 3 signalling messages unless they have been successfully integrity checked by the lower layers. If any signalling messages, having not successfully passed the integrity check, are received, then the lower layers in the MS shall discard that message (see 3GPP TS 25.331 [23c] and 3GPP TS 44.118 [111]). If any layer 3 signalling message is received, in either PS or CS domains, as not integrity protected even though the integrity protection has been activated in the MS by that domain in the network, then the lower layers shall discard this message (see 3GPP TS 25.331 [23c] and 3GPP TS 44.118 [111]).\nIntegrity checking on the network side is performed by the RNC and is described in 3GPP TS 25.331 [23c] and 3GPP TS 44.118 [111].\nThe network should initiate the security mode procedure for an emergency call, in the same way as it would for any other call except in the cases defined in sub-clause \"Security Procedures Not Applied\" in 3GPP TS 33.102 [5a].\nFor the establishment of a MM connection for an emergency call when no other MM connection is established (e.g. for an emergency call initiated without a SIM/USIM no other MM connections can exist) the decision on whether or not to apply the security procedures shall be made by the network as defined in the subclause \"Emergency Call Handling\" in 3GPP TS 33.102 [5a]. If the MM connection was established locally due to the SRVCC handover of a PDN connection for emergency bearer services for which the \"null integrity protection algorithm\" EIA0 has been used while in S1 mode or for which integrity protection has not been activated while in Iu mode, the network need not apply the security procedures for this call. If the MM connection was established locally due to the 5G-SRVCC handover from NG-RAN to UTRAN of an emergency PDU session for which the \"null integrity protection algorithm\" 5G-IA0 has been used while in N1 mode, the network need not apply the security procedures for this call.\nFor an attach for emergency bearer services, (e.g. initiated without a SIM/USIM) the decision on whether or not to apply the security procedures shall be made by the network as defined in the subclause \"Emergency Call Handling\" in 3GPP TS 33.102 [5a]. After intersystem change from S1 mode to Iu mode with a PDN connection for emergency bearer services for which the \"null integrity protection algorithm\" EIA0 has been used while in S1 mode, the network need not apply the security procedures for this connection.\nFor an initial registration for emergency services, (e.g. initiated without a SIM/USIM) the decision on whether or not to apply the security procedures shall be made by the network as defined in the clause J.2 of 3GPP TS 33.501 [170]. After 5G-SRVCC handover from NG-RAN to UTRAN with an emergency PDU session for which the \"null integrity protection algorithm\" 5G-IA0 has been used while in N1 mode, the network need not apply the security procedures for this connection.\nIf the network operates in mode I, GPRS MSes that operate in mode A or B and wish to be or are simultaneously IMSI attached for GPRS and non-GPRS services, shall use the combined GPRS attach and the combined and periodic routing area updating procedures instead of the corresponding MM specific procedures IMSI attach and normal and periodic location area updating.\nA GPRS MS operating in mode A or B in a network that operates in mode I, shall perform the combined GPRS attach or routing area update procedure regardless the value of the ATT flag.\nIf a GPRS MS is operating in mode A or B in a network that operates in mode I the IMSI detach shall be performed by the GMM using the combined GPRS detach procedure.\nA GPRS MS operating in mode A or B in a network that operates in mode I, shall perform the combined GPRS detach procedure regardless the value of the ATT flag.\nA GPRS MS operating in mode A or B in network that operates in mode I, shall use the combined GMM specific procedures in place of the MM specific procedures unless the re-activation of the MM specific procedures is explicitly described, so all conditions describing when to trigger an MM specific procedure listed in subclauses 4.3 and 4.4 shall not apply.\nA GPRS MS operating in mode A or B in a network that operates in mode I should not use any MM timers relating to MM specific procedures, (e.g. T3210, T3211, T3212, T3213) unless the re-activation of the MM specific procedures is explicitly described. If the MM timers are already running, the MS should not react on the expiration of the timers.\nNOTE 1:\tWhenever GMM performs a combined GMM procedure, a GPRS MS enters the MM state MM LOCATION UPDATING PENDING in order to prevent the MM from performing a location area updating procedure.\nIf the authentication procedure is performed by MM and the authentication is rejected by the network (i.e. upon receive of AUTHENTICATION REJECT), the MS shall in addition set the GPRS update status to GU3 ROAMING NOT ALLOWED and shall, if available, delete the P-TMSI, P-TMSI signature, RAI and GPRS ciphering key sequence number stored. The SIM/USIM shall be considered as invalid for GPRS and non-GPRS services until switching off or the SIM/USIM is removed. The MS shall abort any GMM procedure and shall enter state GMM-DEREGISTERED. If S1 mode is supported in the MS, the MS shall handle the EMM parameters EPS update status, GUTI, last visited registered TAI, TAI list and KSI as specified in 3GPP TS 24.301 [120] for the case when the EPS authentication is not accepted by the network.\nIf the PS or CS domain is barred because of domain specific access control, a GPRS MS operating in mode A or B in a network that operates in mode I shall act as if in network operation mode II and access to the barred domain shall be stopped entirely. If the MS detects that a domain is barred, this shall not trigger any MM or GMM specific procedure.\nA GPRS MS operating in mode A or B in a network that operates in mode I shall perform a normal location updating procedure (in order to remove the Gs association in the MSC/VLR) when the following conditions are fulfilled:\n-\tthe GPRS MS has camped on a cell where the PS domain is barred and the CS domain is unbarred; and\n-\tT3312, T3311, T3302, or T3330 expires; and\n-\tfor the last attempt to update the registration of the location area a combined GMM procedure was performed.\nAdditionally the MS shall treat the expiry of T3312 when the PS domain changes from barred to unbarred, analogous to the descriptions for the cases when the timer expires out of coverage or in a cell that does not support GPRS (see subclause 4.7.2.2).\nIf timer T3312 expires and both the PS and CS domain are barred, then a GPRS MS operating in mode A or B in a network that operates in mode I shall treat the expiry of T3312 when the GPRS MS detects that the PS or CS domain becomes unbarred, analogous to the descriptions for the cases when the timer expires out of coverage (see subclause 4.7.2.2).\nIf the PS domain is barred and timer T3312 expires during an ongoing CS connection, then a GPRS MS operating in mode A or B in a network that operates in mode I shall treat the expiry of T3312 when the MM state MM-IDLE is entered, analogous to the descriptions for the cases when the timer expires out of coverage or in a cell that does not support GPRS (see subclause 4.7.2.2), or in a cell where the PS domain is barred.\nA GPRS MS operating in mode A or B in a network that operates in mode I shall perform a combined routing area update procedure indicating \"combined RA/LA updating with IMSI attach\" (in order to establish the Gs association in the MSC/VLR) when the following conditions are fulfilled:\n-\tthe GPRS MS detects that CS or PS domain or both change from barred to unbarred;\n-\tas a result of the change of the domain specific barring status, both domains are unbarred; and\n-\tfor the last attempt to update the registration of the location area an MM specific procedure was performed (see subclause 4.7.5.2.1) or for the last attempt to update the registration of the routing area a normal routing area update was performed.\nA GPRS MS operating in mode A or B on a PLMN which is part of \"forbidden PLMNs for GPRS service\" list in a network that is operating in mode I shall act as if in network operation mode II and proceed with appropriate MM procedures.\nIf the network operates in mode II, a GPRS MS that operates in mode A or B and wishes to be or is simultaneously IMSI attached for GPRS and non-GPRS services, shall use the MM specific procedures listed in subclauses 4.3 and 4.4 and the GMM specific procedures listed in subclauses 4.7.3, 4.7.4 and 4.7.5. The applicability of periodic location updating is further specified in subclause 4.4.2 and the periodic routing area updating is specified in subclause 4.7.2.2. If the GPRS MS, which operates in mode A or B, wishes to be IMSI attached for GPRS and \"SMS-only service\"or is simultaneously IMSI attached for GPRS and non-GPRS services in order to obtain GPRS services and \"SMS-only service\", then the GPRS MS shall first complete the GMM specific procedure before performing the MM specific procedures. If this GPRS MS receives in the ATTACH ACCEPT or ROUTING AREA UPDATE ACCEPT message the Additional network feature support IE indicating \"SMS via GPRS supported\", then the GPRS MS shall not perform the MM specific procedure until a new ATTACH ACCEPT or ROUTING AREA UPDATE ACCEPT message indicating \"SMS via GPRS not supported\" or the GPRS MS does not wish to be IMSI attached only for GPRS and \"SMS-only service\".\nIf the authentication procedure is performed by MM and the authentication is rejected by the network (i.e upon receive of AUTHENTICATION REJECT), the MS shall in addition set the GPRS update status to GU3 ROAMING NOT ALLOWED and shall, if available, delete the P-TMSI, P-TMSI signature, RAI and GPRS ciphering key sequence number stored. The SIM/USIM shall be considered as invalid for GPRS and non-GPRS services until switching off or the SIM/USIM is removed. The MS shall abort any GMM procedure and shall enter state GMM-DEREGISTERED. If S1 mode is supported in the MS, the MS shall handle the EMM parameters EPS update status, GUTI, last visited registered TAI, TAI list and KSI as specified in 3GPP TS 24.301 [120] for the case when the EPS authentication is not accepted by the network.\nIf the PS or CS domain is barred because of domain specific access control, a GPRS MS operating in mode A or B in a network that operates in mode II shall use the MM specific procedures or GMM specific procedures, respectively, in the domain which is unbarred. If the MS detects that a domain changes from barred to unbarred, it shall behave as specified in subclauses 4.3.4.4, 4.4.4.9, 4.5.1.2, 4.7.3.1.5, 4.7.4.1.4, 4.7.5.1.5, and 4.7.13.5.\nSee subclause 5.1.4 in 3GPP TS 24.301 [120].\nSee subclause 5.1.5 in 3GPP TS 24.501 [167].\nIn the network broadcast system information some of the system information is used by MM.\nAt reception of new system information, the RRC layer in the MS delivers the contents of the CN common system information and the CS domain specific system information to the MM layer in the MS.\nThe Core Network system information is included in specific information elements within some RRC messages sent to MS (see 3GPP TS 25.331 [23c] and 3GPP TS 44.118 [111]). In the Core Network system information the Common system information part and the CS domain specific system information part contains settings of parameters controlling MM functionality. No MM messages contain the Core Network System Information.\nIn the network broadcast system information some of the system information is used by GMM.\nAt reception of new system information, the RRC layer in the MS delivers the contents of the CN common system information and the PS domain specific system information to the GMM layer in the MS.\nThe Core Network system information is included in specific information elements within some RRC messages sent to MS (see 3GPP TS 25.331 [23c] and 3GPP TS 44.118 [111]). In the Core Network system information the Common system information part and the PS domain specific system information part contains settings of parameters controlling GMM functionality. No GMM messages contain the Core Network System Information.\nThe behaviour of the MS with respect to NMO I is determined by the combination of PS domain specific system information IE as defined in subclause 10.5.1.12.3 and the setting of the parameter \"NMO_I_Behaviour\" in the NAS configuration Management Object as specified in 3GPP TS 24.368 [135] or in USIM file NASCONFIG as specified in 3GPP TS 31.102 [112]:\n-\tif the parameter \"NMO_I_Behaviour\" in the NAS configuration Management Object is set to the value of \"1\", the bit 2 \"NMO I\" of system information as described in figure 10.5.1.12.3/table 10.5.1.12.3 is applied; or\n-\tif the parameter \"NMO_I_Behaviour\" in the NAS configuration Management Object is set to the value of zero or is not provisioned, the bit 1 \"NMO\" of system information as described in figure 10.5.1.12.3/table 10.5.1.12.3 is applied.\nThe network can restrict the access for certain groups of mobile stations. These groups are also known as access classes.\nThe restriction can apply for access to both domains (common access class control or EAB, depending on EAB configuration) or to one domain only (domain specific access control) (see 3GPP TS 23.122 [14]).\nAdditionally, the network can alleviate the access restriction in both domains or domain specifically, and allow restricted mobile stations to respond to paging messages or to perform generic location updating, or GPRS attach or routing area updating procedure.\nA network operator can also restrict some MSs to access the network for location registration, although via common access class control or domain specific access class control the MSs are permitted to access the network for other purposes. Therefore, for each access to the network the mobile station shall determine from the information received via the system information broadcast whether access is allowed or not:\n-\tFor paging response the mobile station shall evaluate the control information for common access control (as specified in 3GPP TS 44.018 [84], 3GPP TS 44.060 [76], and 3GPP TS 25.331 [23c]), the control information for EAB (as specified in 3GPP TS 44.018 [84], and 3GPP TS 25.331 [23c]), domain specific access control (as specified in 3GPP TS 44.018 [84] and 3GPP TS 25.331 [23c]), and the specific control information for paging response (as specified in 3GPP TS 25.331 [23c]; see \"Paging Permission with Access Control\").\n-\tFor generic location updating, GPRS attach and routing area updating procedures the mobile station shall evaluate the control information for:\n-\tcommon access control (as specified in 3GPP TS 44.018 [84], 3GPP TS 44.060 [76], and 3GPP TS 25.331 [23c]);\n-\tdomain specific access control (as specified in 3GPP TS 44.018 [84] and 3GPP TS 25.331 [23c]);\n-\tspecific control information for location registration (as specified in 3GPP TS 25.331 [23c]; see \"Paging Permission with Access Control\"); and\n-\tEAB as specified for A/Gb mode in 3GPP TS 44.018 [84], and for Iu mode in 3GPP TS 25.331 [23c].\nThe same control information shall also be taken into account, when the present document requires the mobile station to initiate a generic location updating, or GPRS attach or routing area updating procedure when it detects that a domain changes from barred to unbarred (see e.g. subclauses 4.1.1.2.1 and 4.1.1.2.2).\n-\tFor GPRS attach and routing area updating procedures in Iu mode, the mobile station shall evaluate the control information for:\n-\tACDC if the mobile station supports ACDC (as specified in 3GPP TS 25.331 [23c]).\nThe same control information shall also be taken into account, when the present document requires the mobile station to initiate a GPRS attach or routing area updating procedure in Iu mode when it detects that PS domain changes from barred to unbarred (see e.g. subclauses 4.1.1.2.1 and 4.1.1.2.2).\n-\tFor all other purposes the mobile station shall evaluate the control information for common access control as specified in 3GPP TS 44.018 [84], 3GPP TS 44.060 [76], and 3GPP TS 25.331 [23c], the control information for EAB (as specified in 3GPP TS 44.018 [84], and 3GPP TS 25.331 [23c]), domain specific access control (as specified in 3GPP TS 44.018 [84] and 3GPP TS 25.331 [23c]) and in Iu mode for PS domain if the mobile station supports ACDC, the control information for ACDC (as specified in 3GPP TS 25.331 [23c]).\nThe following requirement applies for an MS that is configured to use timer T3245 (see 3GPP TS 24.368 [135] or 3GPP TS 31.102 [112]):\nWhen the MS adds a PLMN identity to the \"forbidden PLMN list\" or the \"forbidden PLMNs for GPRS service\" list or sets the SIM/USIM as invalid for non-GPRS services or GPRS services or both, and timer T3245 is not running, the MS shall start timer T3245 with a random value, uniformly drawn from the range between 12h and 24h.\nUpon expiry of the timer T3245, the MS shall erase the \"forbidden PLMN list\" and the \"forbidden PLMNs for GPRS service\" list and set the SIM/USIM to valid for non-GPRS services and GPRS services. When the lists are erased, the MS performs a cell selection according to 3GPP TS 43.022 [82] and 3GPP TS 25.304 [98].\nIf the MS is switched off when the timer T3245 is running, the MS shall behave as follows when the MS is switched on and the SIM/USIM in the MS remains the same:\n-\tlet t1 be the time remaining for T3245 timeout at switch off and let t be the time elapsed between switch off and switch on. If t1 is greater than t, then the timer shall be restarted with the value t1 – t. If t1 is equal to or less than t, then the MS will follow the behaviour as defined in the paragraph above upon expiry of the timer T3245. If the MS is not capable of determining t, then the MS shall restart the timer with the value t1.\nThis subclause specifies the requirements for an MS that is not configured to use timer T3245 (see 3GPP TS 24.368 [135] or 3GPP TS 31.102 [112]) and receives a LOCATION UPDATING REJECT, CM SERVICE REJECT, ABORT, ATTACH REJECT, ROUTING AREA UPDATE REJECT or SERVICE REJECT message without integrity protection with specific MM or GMM causes.\nNOTE 1:\tAdditional MS requirements for this case, requirements for other MM or GMM causes, and requirements for the case when the MS receives a successfully integrity checked reject message are specified in subclauses 4.4.4.7, 4.5.1.1, 4.7.3.1.4, 4.7.3.2.4, 4.7.5.1.4, 4.7.5.2.4 and 4.7.13.4.\nThe present subclause is applicable to A/Gb mode and Iu mode. In A/Gb mode,\n-\tfor the CS domain, as integrity protection is not supported, all messages received by the MS are considered to be received \"before the network has activated the integrity protection\"; and\n-\tfor the PS domain, if integrity protection is not required (see subclause 4.7.1.2a.), all messages received by the MS are considered to be received \"before the network has activated the integrity protection\".\nThe MS may maintain a list of PLMN-specific attempt counters and a list of PLMN-specific PS-attempt counters. The maximum number of possible entries in each list is implementation dependent.\nAdditionally, the MS may maintain one counter for \"SIM/USIM considered invalid for non-GPRS services\" events and one counter for \"SIM/USIM considered invalid for GPRS services\" events.\nIf the MS maintains the above lists of attempt counters and the event counters, a MS supporting N1 mode, shall store them in its non-volatile memory. The UE shall erase the lists and reset the event counters to zero when the UICC containing the USIM is removed. The counter values shall not be affected by the activation or deactivation of power saving mode.\nThe MS may also maintain a list of \"forbidden location areas for non-GPRS services\" and a list of \"forbidden location areas for GPRS services\". If the MS is in a location area which is included in the list of \"forbidden location areas for non-GPRS services\", the MS shall not initiate any MM procedure. If the MS is in a location area which is included in the list of \"forbidden location areas for GPRS services\", the MS shall not initiate any GMM, SM, SMS or SS procedure for GPRS services.\nIf the MS receives a LOCATION UPDATING REJECT message without integrity protection with MM cause value #2, #3, #6, #11, #12, #13 or #15 before the network has activated the integrity protection for the CS domain, the MS shall start timer T3247 with a random value uniformly drawn from the range between 30 minutes and 60 minutes, if the timer is not running, and take the following actions:\n1)\tif the MM cause value received is #3 or #6, and\na)\tif the MS maintains a counter for \"SIM/USIM considered invalid for non-GPRS services\" events and the counter has a value less than an MS implementation-specific maximum value, the MS shall:\ni)\tdelete any LAI, TMSI and ciphering key sequence number stored in the SIM/USIM, reset the location update attempt counter, and set the update status to ROAMING NOT ALLOWED (and store it in the SIM/USIM according to subclause 4.1.2.2);\ndelete the list of equivalent PLMNs;\nin Iu mode, increment the counter for \"SIM/USIM considered invalid for non-GPRS services\" events, if not already incremented over the same RRC connection;\nin A/Gb mode, increment the counter for \"SIM/USIM considered invalid for non-GPRS services\" events;\nstore the current LAI in the list of \"forbidden location areas for roaming\"; and\nsearch for a suitable cell in another location area or a tracking area according to 3GPP TS 43.022 [82] and 3GPP TS 25.304 [98] or 3GPP TS 36.304 [121]; or\nii)\tproceed as specified in subclause 4.4.4.7 and;\nin Iu mode, increment the counter for \"SIM/USIM considered invalid for non-GPRS services\" events, if not already incremented over the same RRC connection;\nin A/Gb mode, increment the counter for \"SIM/USIM considered invalid for non-GPRS services\" events; and\nb)\telse the MS shall proceed as specified in subclause 4.4.4.7;\n2)\tif the MM cause value received is #2, and\na)\tif the MS maintains a counter for \"SIM/USIM considered invalid for non-GPRS services\" events and the counter has a value less than an MS implementation-specific maximum value, the MS shall:\ni)\tdelete any LAI, TMSI and ciphering key sequence number stored in the SIM/USIM, reset the location update attempt counter, and set the update status to ROAMING NOT ALLOWED (and store it in the SIM/USIM according to subclause 4.1.2.2);\ndelete the list of equivalent PLMNs;\nin Iu mode, increment the counter for \"SIM/USIM considered invalid for non-GPRS services\" events, if not already incremented over the same RRC connection;\nin A/Gb mode, increment the counter for \"SIM/USIM considered invalid for non-GPRS services\" events;\nif the MS maintains a list of \"forbidden location areas for non-GPRS services\" and a list of \"forbidden location areas for GPRS services\", proceed as follows:\nif the current LAI is already included in the list of \"forbidden location areas for GPRS services\" or the MS is not operating in MS operation mode A or B, store the current LAI in the list of \"forbidden location areas for roaming\"; otherwise store the current LAI in the list of \"forbidden location areas for non-GPRS services\"; and\nattempt to select a suitable cell according to 3GPP TS 43.022 [82] and 3GPP TS 25.304 [98] or 3GPP TS 36.304 [121], different from the cell where the LOCATION UPDATING REJECT was received; or\nNOTE 2:\tThe cell on which the reject was received could still be a suitable cell.\nii)\tproceed as specified in subclause 4.4.4.7 and;\nin Iu mode, increment the counter for \"SIM/USIM considered invalid for non-GPRS services\" events, if not already incremented over the same RRC connection;\nin A/Gb mode, increment the counter for \"SIM/USIM considered invalid for non-GPRS services\" events; and\nb)\telse the MS shall proceed as specified in subclause 4.4.4.7;\n3)\tif the MM cause value received is #12, #13 or #15, the MS shall additionally proceed as specified in subclause 4.4.4.7;\n4)\tif the MM cause value received is #11 and the MS is in its HPLMN or in a PLMN that is within the EHPLMN list (if the EHPLMN list is present):\nthe MS shall delete any LAI, TMSI and ciphering key sequence number stored in the SIM/USIM, reset the location update attempt counter, and set the update status to ROAMING NOT ALLOWED (and store it in the SIM/USIM according to subclause 4.1.2.2). Additionally, the MS shall store the current LAI in the list of \"forbidden location areas for roaming\"; and\nthe MS shall search for a suitable cell in another location area or a tracking area according to 3GPP TS 43.022 [82] and 3GPP TS 25.304 [98] or 3GPP TS 36.304 [121]; and\n5)\tif the MM cause value received is #11 and if the MS is not in its HPLMN or in a PLMN that is within the EHPLMN list (if the EHPLMN list is present), in addition to the MS requirements specified in subclause 4.4.4.7,\n-\tif the MS maintains a list of PLMN-specific attempt counters and the PLMN-specific attempt counter for the PLMN sending the reject message has a value less than an MS implementation-specific maximum value, the MS shall increment the PLMN-specific attempt counter for the PLMN.\nIf the MS receives a CM SERVICE REJECT or ABORT message with MM cause value #6 without integrity protection before the network has activated the integrity protection for the CS domain, the MS shall start timer T3247 with a random value uniformly drawn from the range between 30 minutes and 60 minutes, if the timer is not running, and\na)\tif the MS maintains a counter for \"SIM/USIM considered invalid for non-GPRS services\" events and the counter has a value less than an MS implementation-specific maximum value, the MS shall:\ni)\tproceed as specified in subclauses 4.5.1.1 or 4.3.5.2 respectively with the exception that the MS shall not consider the SIM/USIM as invalid for non-GPRS services and;\ndelete the list of equivalent PLMNs;\nin Iu mode, increment the counter for \"SIM/USIM considered invalid for non-GPRS services\" events, if not already incremented over the same RRC connection;\nin A/Gb mode, increment the counter for \"SIM/USIM considered invalid for non-GPRS services\" events;\nreset the location update attempt counter;\nstore the current LAI in the list of \"forbidden location areas for roaming\"; and\nsearch for a suitable cell in another location area or a tracking area according to 3GPP TS 43.022 [82] and 3GPP TS 25.304 [98] or 3GPP TS 36.304 [121]; or\nii)\tproceed as specified in subclauses 4.5.1.1 or 4.3.5.2 respectively and;\nin Iu mode, increment the counter for \"SIM/USIM considered invalid for non-GPRS services\" events, if not already incremented over the same RRC connection;\nin A/Gb mode, increment the counter for \"SIM/USIM considered invalid for non-GPRS services\" events; and\nb)\telse the MS shall proceed as specified in subclause 4.5.1.1 or 4.3.5.2 respectively.\nIf the MS receives an ATTACH REJECT or ROUTING AREA UPDATE REJECT message without integrity protection with GMM cause value #3, #6, #7, #8, #11, #12, #13, #14 or #15 before the network has activated the integrity protection for the PS domain, the MS shall start timer T3247 with a random value uniformly drawn from the range between 30 minutes and 60 minutes, if the timer is not running, and shall take the following actions:\n6)\tif the GMM cause value received is #3, #6, or #8, and\na)\tif the MS maintains a counter for \"SIM/USIM considered invalid for GPRS services\" events and the counter has a value less than an MS implementation-specific maximum value, the MS shall:\ni)\tset the GPRS update status to GU3 ROAMING NOT ALLOWED (and shall store it according to subclause 4.1.3.2) and shall delete any RAI, P-TMSI, P-TMSI signature and GPRS ciphering key sequence number;\ndelete the list of equivalent PLMNs;\nincrement the counter for \"SIM/USIM considered invalid for GPRS services\" events;\nif the MS maintains a counter for \"SIM/USIM considered invalid for non-GPRS services\" events and the counter has a value less than an MS implementation-specific maximum value, set the update status to U3 ROAMING NOT ALLOWED, delete any TMSI, LAI and ciphering key sequence number. If the MS is operating in MS operation mode A and an RR connection exists, the MS shall abort the RR connection, unless an emergency call is ongoing. In Iu mode, the MS shall increment the counter for \"SIM/USIM considered invalid for non-GPRS services\" events, if not already incremented over the same RRC connection. In A/Gb mode, the MS shall increment the counter for \"SIM/USIM considered invalid for non-GPRS services\" events;\nif a GPRS attach or routing area updating procedure was performed, reset the GPRS attach attempt counter or the routing area updating attempt counter, respectively;\nif S1 mode is supported by the MS, handle the EMM parameters attach attempt counter or tracking area updating attempt counter, EMM state, EPS update status, GUTI, last visited registered TAI, TAI list and KSI as specified in 3GPP TS 24.301 [120] for the case when an EPS attach or tracking area update procedure is rejected with the EMM cause of the same value in a NAS message without integrity protection;\nstore the current LAI in the list of \"forbidden location areas for roaming\" and enter the state GMM-DEREGISTERED.LIMITED-SERVICE; and\nsearch for a suitable cell in another location area or a tracking area according to 3GPP TS 43.022 [82] and 3GPP TS 25.304 [98] or 3GPP TS 36.304 [121]; or\nii)\tproceed as specified in subclauses 4.7.3.1.4, 4.7.3.2.4, 4.7.5.1.4, 4.7.5.2.4 and 4.7.13.4;\nincrement the counter for \"SIM/USIM considered invalid for GPRS services\" events; and\nif the MS maintains a counter for \"SIM/USIM considered invalid for non-GPRS services\" events and the counter has a value less than an MS implementation-specific maximum value:\nin Iu mode, increment the counter for \"SIM/USIM considered invalid for non-GPRS services\" events, if not already incremented over the same RRC connection\nin A/Gb mode, increment the counter for \"SIM/USIM considered invalid for non-GPRS services\" events; and\nb)\telse the MS shall proceed as specified in subclause 4.7.3.1.4, 4.7.3.2.4, 4.7.5.1.4, 4.7.5.2.4 and 4.7.13.4;\n7)\tif the GMM cause value received is #7, and\na)\tif the MS maintains a counter for \"SIM/USIM considered invalid for GPRS services\" events and the counter has a value less than an MS implementation-specific maximum value, the MS shall:\ni)\tset the GPRS update status to GU3 ROAMING NOT ALLOWED (and shall store it according to subclause 4.1.3.2) and shall delete any RAI, P-TMSI, P-TMSI signature and GPRS ciphering key sequence number;\ndelete the list of equivalent PLMNs;\nincrement the counter for \"SIM/USIM considered invalid for GPRS services\" events;\n-\tif a GPRS attach or routing area updating procedure was performed, reset the GPRS attach attempt counter or the routing area updating attempt counter, respectively;\nif S1 mode is supported by the MS, handle the EMM parameters attach attempt counter or tracking area updating attempt counter, EMM state, EPS update status, GUTI, last visited registered TAI, TAI list and KSI as specified in 3GPP TS 24.301 [120] for the case when an EPS attach or tracking area update procedure is rejected with the EMM cause of the same value in a NAS message without integrity protection;\nenter the state GMM-DEREGISTERED.LIMITED-SERVICE;\nif the MS maintains a list of \"forbidden location areas for non-GPRS services\" and a list of \"forbidden location areas for GPRS services\", proceed as follows:\nif the current LAI is already included in the list of \"forbidden location areas for non-GPRS services\" or the MS is operating in MS operation mode C, store the current LAI in the list of \"forbidden location areas for roaming\"; otherwise store the current LAI in the list of \"forbidden location areas for GPRS services\"; and\nattempt to select a suitable cell according to 3GPP TS 43.022 [82] and 3GPP TS 25.304 [98] or 3GPP TS 36.304 [121], different from the cell where the ATTACH REJECT or ROUTING AREA UPDATING REJECT was received; or\nNOTE 3:\tThe cell on which the reject was received could still be a suitable cell.\nii)\tproceed as specified in subclauses 4.7.3.1.4, 4.7.3.2.4, 4.7.5.1.4, 4.7.5.2.4 and 4.7.13.4; and\nincrement the counter for \"SIM/USIM considered invalid for GPRS services\" events; and\nb)\telse the MS shall proceed as specified in subclause 4.7.3.1.4, 4.7.3.2.4, 4.7.5.1.4, 4.7.5.2.4 and 4.7.13.4;\n8)\tif the GMM cause value received is #12, #13 or #15, the MS shall additionally proceed as specified in subclauses 4.7.3.1.4, 4.7.3.2.4, 4.7.5.1.4, 4.7.5.2.4 and 4.7.13.4;\n9)\tif the GMM cause value received is #11 or #14 and the MS is in its HPLMN or in a PLMN that is within the EHPLMN list (if the EHPLMN list is present):\n-\tthe MS shall set the GPRS update status to GU3 ROAMING NOT ALLOWED (and shall store it according to subclause 4.1.3.2) and shall delete any RAI, P-TMSI, P-TMSI signature and GPRS ciphering key sequence number. The MS shall delete the list of equivalent PLMNs. Additionally, if a GPRS attach or the routing area updating procedure was performed, the MS shall reset the GPRS attach attempt counter or the routing area updating attempt counter respectively;\n-\tfor GMM cause value #11, the MS shall store the current LAI in the list of \"forbidden location areas for roaming\", and enter the state GMM-DEREGISTERED.LIMITED-SERVICE;\n-\tfor GMM cause value #14, the MS shall enter the state GMM-DEREGISTERED.LIMITED-SERVICE. If the MS maintains a list of \"forbidden location areas for non-GPRS services\" and a list of \"forbidden location areas for GPRS services\", proceed as follows:\nif the current LAI is already included in the list of \"forbidden location areas for non-GPRS services\" or the MS is operating in MS operation mode C, store the current LAI in the list of \"forbidden location areas for roaming\"; otherwise store the current LAI in the list of \"forbidden location areas for GPRS services\";\n-\tif S1 mode is supported in the MS, the MS shall handle the EMM parameters EMM state, EPS update status, GUTI, last visited registered TAI, TAI list, KSI and attach attempt counter or tracking area updating attempt counter as specified in 3GPP TS 24.301 [120] for the case when the procedure is rejected with the EMM cause with the same value without integrity protection; and\n-\tthe MS shall search for a suitable cell in another location area or in another tracking area according to 3GPP TS 43.022 [82] and 3GPP TS 25.304 [98] or 3GPP TS 36.304 [121].\n10)\tif the GMM cause value received is #11 and the MS is not in its HPLMN or in a PLMN that is within the EHPLMN list (if the EHPLMN list is present), the MS shall additionally proceed as specified in subclauses  4.7.3.1.4, 4.7.3.2.4, 4.7.5.1.4, 4.7.5.2.4 and 4.7.13.4:\n-\tFurthermore, if the MS maintains a list of PLMN-specific attempt counters and the PLMN-specific attempt counter for the PLMN sending the reject message has a value less than an MS implementation-specific maximum value, the MS shall increment the PLMN-specific attempt counter for the PLMN.\n11)\tif the GMM cause value received is #14 and the MS is not in its HPLMN or in a PLMN that is within the EHPLMN list (if the EHPLMN list is present), the MS shall additionally proceed as specified in subclauses 4.7.3.1.4, 4.7.3.2.4, 4.7.5.1.4, and 4.7.5.2.4:\n-\tFurthermore, if the MS maintains a list of PLMN-specific PS-attempt counters and the PLMN-specific PS-attempt counter for the PLMN sending the reject message has a value less than an MS implementation-specific maximum value, the MS shall increment the PLMN-specific PS-attempt counter for the PLMN.\n-\tIf the MS maintains a list of \"forbidden location areas for non-GPRS services\" and a list of \"forbidden location areas for GPRS services\", proceed as follows:\nif the current LAI is already included in the list of \"forbidden location areas for non-GPRS services\" or the MS is operating in MS operation mode C, store the current LAI in the list of \"forbidden location areas for roaming\"; otherwise store the current LAI in the list of \"forbidden location areas for GPRS services\" and the MS shall enter the state GMM-DEREGISTERED.LIMITED-SERVICE.\nIf the MS receives a SERVICE REJECT message without integrity protection with GMM cause value #3, #6, #7, #8, #11, #12, #13 or #15 before the network has activated the integrity protection for the PS domain, the MS shall start timer T3247 with a random value uniformly drawn from the range between 30 minutes and 60 minutes, if the timer is not running, and proceed as specified under items 6, 7, 8, 9 and 10 above.\nUpon expiry of timer T3247, the MS shall:\n-\terase the list of \"forbidden location areas for regional provision of service\" and the list of \"forbidden location areas for roaming\";\n-\tset the SIM/USIM to valid for non-GPRS services, if\n-\tthe MS does not maintain a counter for \"SIM/USIM considered invalid for non-GPRS services\" events; or\n-\tthe MS maintains a counter for \"SIM/USIM considered invalid for non-GPRS services\" events and this counter has a value less than an MS implementation-specific maximum value.\n-\tset the SIM/USIM to valid for GPRS services, if\n-\tthe MS does not maintain a counter for \"SIM/USIM considered invalid for GPRS services\" events; or\n-\tthe MS maintains a counter for \"SIM/USIM considered invalid for GPRS services\" events and this counter has a value less than an MS implementation-specific maximum value.\n-\terase the list of \"forbidden location areas for non-GPRS services\" and the list of \"forbidden location areas for GPRS services\", if the MS maintains these lists;\n-\tif the MS maintains a list of PLMN-specific attempt counters, for each PLMN-specific attempt counter that has a value greater than zero and less than an MS implementation-specific maximum value, remove the respective PLMN from the extension of the \"forbidden PLMNs\" list;\n-\tif the MS maintains a list of PLMN-specific PS-attempt counters, for each PLMN-specific PS-attempt counter that has a value greater than zero and less than an MS implementation-specific maximum value, remove the respective PLMN from the \"forbidden PLMNs for GPRS service\" list. If the resulting \"forbidden PLMNs for GPRS service\" list is empty and the MS is supporting S1 mode, the MS re-enables the E-UTRA capability as specified in 3GPP TS 24.301 [120] for the case when timer T3247 expires;\n-\tif the MS is supporting S1 mode, perform the actions as specified in 3GPP TS 24.301 [120] for the case when timer T3247 expires;\n-\tif the MS is supporting N1 mode, perform the actions as specified in 3GPP TS 24.501 [167] for the case when timer T3247 expires; and\n-\tinitiate a location updating procedure, GPRS attach procedure or routing area updating procedure, if still needed, dependent on MM state and update status, and GMM state and GPRS update status, or perform a PLMN selection according to 3GPP TS 23.122 [14].\nIf the MS maintains a list of PLMN-specific attempt counters and PLMN-specific PS-attempt counters, when the MS is switched off, the MS shall, for each PLMN-specific attempt counter that has a value greater than zero and less than the MS implementation-specific maximum value, remove the respective PLMN from the forbidden PLMN list. When the SIM/USIM is removed, the MS should perform this action.\nNOTE 4:\tIf the respective PLMN was stored in the extension of the \"forbidden PLMNs\" list, then according to 3GPP TS 23.122 [14] the MS will delete the contents of this extension when the MS is switched off or the SIM/USIM is removed.\nThe network may detect GMM or MM signalling congestion and perform NAS level mobility management congestion control. PS domain NAS level mobility management congestion control consists of general NAS level mobility management congestion control and subscribed APN based congestion control. CS domain NAS level mobility management congestion control consists of general NAS level mobility management congestion control.\nUnder NAS level mobility management congestion control the network may reject mobility management signalling requests from MSs as specified in 3GPP TS 23.060 [74]. The network should not reject requests for emergency bearer services.\nWhen subscribed APN based congestion control is active for a particular APN, the network may reject attach request from MSs with subscription to this APN.\nIn mobility management the network may detect NAS signalling congestion. The network may start or stop performing the subscribed APN based congestion control based on mobility management level criteria such as:\n-\trate of mobility management NAS messages from a group of MSs with a subscription to a particular APN exceeds or falls below certain thresholds; or\n-\tsetting in network management.\nWhen the NAS level mobility management congestion control is active, the network may include a value for the mobility management back-off timer T3246 or T3346 in the reject messages. The MS starts the mobility management back-off timer with the value received in the mobility management reject messages. To avoid that large numbers of MSs simultaneously initiate deferred requests, the network should select the value for the mobility management back-off timer for the rejected MSs so that timeouts are not synchronised.\nFor subscribed APN based congestion control the value of timer T3346 for a particular APN may be APN dependent.\nIf the timer T3346 is running when the MS enters state GMM-DEREGISTERED, the MS remains switched on, and the SIM/USIM in the MS remains the same, then timer T3346 is kept running until it expires or it is stopped.\nIf the MS is switched off when the timer T3246 or T3346 is running, the MS shall behave as follows for each running timer when the MS is switched on and the SIM/USIM in the MS remains the same:\n-\tlet t1 be the time remaining until timeout at switch off and let t be the time elapsed between switch off and switch on. If t1 is greater than t, then the timer shall be restarted with the value t1 – t. If t1 is equal to or less than t, then the timer need not be restarted. If the MS is not capable of determining t, then the MS shall restart the timer with the value t1; and\n-\tif prior to switch off, timer T3346 was started due to a NAS request message (ATTACH REQUEST, ROUTING AREA UPDATE REQUEST or SERVICE REQUEST) which contained the low priority indicator set to \"MS is configured for NAS signalling low priority\", then if timer T3346 is restarted at switch on, the MS configured for low priority shall handle mobility management requests as indicated in subclauses 4.7.3.1.5, 4.7.5.1.5 and 4.7.13.5.\nIf the MS enters a new PLMN while timer T3246 is running, and the new PLMN is not equivalent to the PLMN where the MS started timer T3246, the MS shall stop timer T3246 when initiating mobility management procedures in the new PLMN.\nIf the MS enters a new PLMN while timer T3346 is running, and the new PLMN is not equivalent to the PLMN where the MS started timer T3346, the MS shall stop timer T3346 when initiating mobility management procedures in the new PLMN.\nAt an inter-system change from S1 mode to A/Gb mode or from Iu mode to A/Gb mode within the same RA, if the timer T3346 is running and the TIN indicates \"RAT-related TMSI\", the MS shall set the GPRS update status to GU2 NOT UPDATED and enter state GMM-REGISTERED.ATTEMPTING-TO-UPDATE.\nAfter change in RAI, if the timer T3346 is running and GPRS update status is GU1 UPDATED then MS shall set the GPRS update status to GU2 NOT UPDATED and enter state GMM-REGISTERED.ATTEMPTING-TO-UPDATE.\nAfter change in LAI, if the timer T3246 is running and MM update status is U1 UPDATED then MS shall set the MM update status to U2 NOT UPDATED and enter state MM IDLE, ATTEMPTING TO UPDATE.\nAt switch on, an ME supporting UTRAN Iu mode shall proceed as follows:\n-\tif a USIM is inserted, the ME shall read the STARTCS and STARTPS value from the USIM. If STARTCS and/or STARTPS read from the USIM are greater than or equal to the maximum value of STARTCS and STARTPS provided on the USIM (see 3GPP TS 31.102 [112]) or the CKSN or GPRS CKSN stored on the USIM indicates \"no key available\", the ME shall set the START value in the volatile memory of the ME for the corresponding core network domain(s) to zero. In addition if the read STARTCS and/or STARTPS are greater than or equal to the maximum value, the ME shall delete the corresponding CKSN or GPRS CKSN from the ME and the USIM. The ME shall set the STARTCS and STARTPS value on the USIM to the maximum value of STARTCS and STARTPS provided on the USIM (see 3GPP TS 31.102 [112]); and\n-\tif a SIM is inserted, the ME shall read the STARTCS and STARTPS value from the non-volatile memory. If STARTCS and/or STARTPS read from the non-volatile memory are greater than or equal to the default value specified in 3GPP TS 33.102 [5a], subclause 6.8.2.4 or the CKSN or GPRS CKSN stored on the SIM indicates \"no key available\", the ME shall set the START value in the volatile memory of the ME for the corresponding core network domain(s) to zero. In addition if the read STARTCS and/or STARTPS are greater than or equal to the default value, the ME shall delete the corresponding CKSN or GPRS CKSN from the ME. The ME shall set the STARTCS and STARTPS value in the non-volatile memory to the default value specified in 3GPP TS 33.102 [5a], subclause 6.8.2.4.\nNOTE:\tThe lower layer handles the STARTCS and STARTPS value stored in the volatile memory of the ME as specified in 3GPP TS 25.331 [23c].\nOnly at switch off, an ME supporting UTRAN Iu mode shall proceed for each of the two domains, CS and PS, as follows:\n-\tif since switch on the ME performed an authentication procedure for the respective domain and stored the new security context on the USIM or SIM, and the new security context was not taken into use, the ME shall set the START value for this domain on the USIM or, if a SIM is inserted, in the non-volatile memory to zero; and\n-\totherwise, if a security context for the respective domain is stored on the USIM or SIM, i.e. the CKSN or GPRS CKSN stored on the USIM or SIM is different from \"no key available\", the ME shall store the current START value used by the lower layer for this domain on the USIM or, if a SIM is inserted, in the non-volatile memory.\nThe mobile equipment shall store a list of \"equivalent PLMNs\". These PLMNs shall be regarded by the MS as equivalent to each other for PLMN selection and cell selection/re-selection. The same list is used by 5GMM, EMM, GMM and MM (see 3GPP TS 24.501 [167] and 3GPP TS 24.301 [120]).\nThe list of equivalent PLMNs is replaced or deleted at the end of each location updating procedure, routing area updating procedure and GPRS attach procedure. The stored list consists of a list of equivalent PLMNs as downloaded by the network plus the PLMN code of the registered PLMN that downloaded the list. The stored list shall not be deleted when the MS is switched off. The stored list shall be deleted if the SIM/USIM is removed or when an MS attached for emergency bearer services enters the state GMM-DEREGISTERED. The maximum number of possible entries in the stored list is 16.\nThe network may reject mobility management signalling requests from MSs due to dedicated core network as specified in 3GPP TS 23.060 [74]. When the network rejects mobility management signalling requests due to dedicated core network, the mechanism for general NAS level mobility management congestion control as specified in subclause 4.1.1.7 shall be followed.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "4.1.2\tMM sublayer states",
                            "text_content": "The description of the states for the MM sublayer is organized as follows. The main states for the MS side, related to the procedures, are described in subclause 4.1.2.1.1. The MM IDLE state is subdivided in substates for the description of the behaviour in idle mode (subclause 4.1.2.1.2). This behaviour depends on an update status, described in subclause 4.1.2.2. The states for the network side are described in subclause 4.1.2.3.\nIn this subclause, the possible states for the MM sublayer in the mobile station is described. In figure 4.1 of the present document, an overview of the MM sublayer protocol is given.\n0\tNULL\nThe mobile station is inactive (e.g. power down). Important parameters are stored. Only manual action by the user may transfer the MM sublayer to another state.\n3\tLOCATION UPDATING INITIATED\nA location updating procedure has been started and the MM awaits a response from the network. The timer T3210 is running.\n5\tWAIT FOR OUTGOING MM CONNECTION\nThe MM connection establishment has been started, and the MM awaits a response from the network. The timer T3230 is running.\n6\tMM CONNECTION ACTIVE\nThe MM sublayer has a RR connection to its peer entity on the network side. One or more MM connections are active.\n7\tIMSI DETACH INITIATED\nThe IMSI detach procedure has been started. The timer T3220 is running.\n8\tPROCESS CM SERVICE PROMPT\nThe MM sublayer has a RR connection to its peer entity on the network side. The Mobile Station has received a CM SERVICE PROMPT message but has not yet responded $(CCBS)$.\n9\tWAIT FOR NETWORK COMMAND\nThe MM sublayer has a RR connection to its peer entity in the network, but no MM connection is established. The mobile station is passive, awaiting further commands from the network. The timer T3240 may be running.\n10\tLOCATION UPDATE REJECTED\nA location updating procedure has been rejected and RR connection release is awaited. The timer T3240 is running.\n\nThe figure depicts a simplified representation of the mobility management protocol (MMP) and the Mobile Side (MS) in the 3GPP TS 24.008 standard. It illustrates the key components and their interactions, such as the Mobility Management Service (MMS) and the Mobility Management Service Interface (MMSI). The figure also includes a depiction of the Mobility Management Service (MMS) and the Mobility Management Service Interface (MMSI) in a simplified form, highlighting the key components and their interactions.\nFigure 4.1a/3GPP TS 24.008: Overview mobility management protocol/MS Side\n\n\nAdditions to Figure 4.1a/3GPP TS 24.008\n13. WAIT FOR RR CONNECTION (LOCATION UPDATING)\nThe MM sublayer has requested RR connection establishment for starting the location updating procedure.\n14. WAIT FOR RR CONNECTION (MM CONNECTION)\nThe MM sublayer has requested RR connection establishment for dedicated mode for starting the MM connection establishment.\n15. WAIT FOR RR CONNECTION (IMSI DETACH)\nThe MM sublayer has requested RR connection establishment for starting the IMSI detach procedure.\n17. WAIT FOR REESTABLISH\nA lower layer failure has occurred and re-establishment may be performed from the disturbed CM layer entities.\n18. WAIT FOR RR ACTIVE\nThe MM sublayer has requested activation of the RR sublayer.\n19. MM IDLE\nThere is no MM procedure running and no RR connection exists except that a local MM context may exist when the RR sublayer is in Group Receive mode. This is a compound state, and the actual behaviour of the mobile station to Connection Management requests is determined by the actual substate as described hereafter.\n20. WAIT FOR ADDITIONAL OUTGOING MM CONNECTION.\nThe MM connection establishment for an additional MM connection has been started, and the MM awaits response from the network.\n21. MM CONNECTION ACTIVE (GROUP TRANSMIT MODE)\n(Only applicable for mobile stations supporting VGCS talking:) The MM sublayer has a RR connection on the VGCS channel to its peer entity on the network side. Only one MM connection is active.\n22. WAIT FOR RR CONNECTION (GROUP TRANSMIT MODE)\n(Only applicable for mobile stations supporting VGCS talking:) The MM sublayer has requested to perform an uplink access on the VGCS channel.\n23. LOCATION UPDATING PENDING\n(Only applicable for GPRS MS operation modes A and B; not shown in figure 4.1a) A location updating has been started using the combined GPRS attach procedure or the combined GPRS routing area updating procedure.\n24. IMSI DETACH PENDING\n(Only applicable for GPRS MS operation modes A and B; not shown in figure 4.1a) An IMSI detach for non-GPRS services has been started using the combined GPRS detach procedure at not switching off.\n25. RR CONNECTION RELEASE NOT ALLOWED\n(Only applicable for mobile stations supporting RRLP procedures (see 3GPP TS 44.031 [23b]) or LCS procedures over RRC (see 3GPP TS 25.331 [23c])). All MM connections are released by their CM entities, but the RR connection is maintained by the network due to an ongoing RRLP procedure or LCS procedure over RRC.\nFor the description of the behaviour of the MS the MM IDLE state is subdivided in several substates, also called the service states. The service state pertains to the whole MS (ME alone if no SIM/USIM is inserted, or ME plus SIM/USIM). The service state depends on the update status (see subclause 4.1.2.2) and on the selected cell.\n19.1 NORMAL SERVICE\nValid subscriber data are available, update status is U1, a cell is selected that belongs to the LA where the subscriber is registered.\nIn this state, all requests from the CM layers are treated normally.\n19.2 ATTEMPTING TO UPDATE\nValid subscriber data are available, update status is U2 and a cell is selected. Requests from upper layers are accepted. Emergency call requests are treated normally, otherwise the request triggers first a location updating attempt in the selected cell, and then triggers the needed procedure only in case of successful location updating, otherwise the request is rejected.\n19.3 LIMITED SERVICE\nValid subscriber data are available, update status is U3, and a cell is selected, which is known not to be able to provide normal service. Only emergency services are offered.\n19.4 NO IMSI\nNo valid subscriber data (no SIM/USIM, or the SIM/USIM is not considered valid by the ME), and a cell is selected. Only emergency services are offered.\n19.5 NO CELL AVAILABLE\nNo cell can be selected. This state is entered after a first intensive search failed (state 19.7). Cells are searched at a low rhythm.\nThis state is also entered when S1 mode is activated in the MS and current cell is an E-UTRAN cell. No services, except those provided by CS fallback and SMS over SGs, are offered.\n19.6 LOCATION UPDATE NEEDED\nValid subscriber data are available, and for some reason a location updating must be done as soon as possible (for instance update status is U1 but the selected cell is not in the registered LA, or the timer has expired). This state is usually of no duration, but can last, e.g. due to access class control, (see subclause 4.1.1.2.1).\n19.7 PLMN SEARCH\nThe mobile station is searching for PLMNs, and the conditions for state 19.8 are not met. This state is ended when either a cell is selected (the new state is 19.1, 19.3 or 19.6), or when it is concluded that no cell is available for the moment (the new state is 19.5).\n19.8 PLMN SEARCH, NORMAL SERVICE\nValid subscriber data are available, update status is U1, a cell is selected which belongs to the LA where the subscriber is registered, and the mobile station is searching for PLMNs. This state is ended when either a cell is selected (the new state is 19.1, 19.3 or 19.6), or when it is concluded that no cell is available for the moment (the new state is 19.5).\n19.9 RECEIVING GROUP CALL (NORMAL SERVICE)\nOnly applicable for mobile stations supporting VGCS listening or VBS listening. Valid subscriber data are available, update status is U1, a VGCS channel or VBS channel is received in a cell that belongs to the LA where the subscriber is registered.\nIn this state, only requests from the GCC or BCC layers are treated.\n19.10 RECEIVING GROUP CALL (LIMITED SERVICE)\nOnly applicable for mobile stations supporting VGCS listening or VBS listening. Valid subscriber data are available, update status is U3, a VGCS channel or VBS channel is received in a cell which is known not to be able to provide normal service.\nIn this state, only requests from the GCC or BCC layers for the reception of VGCS or VBS calls are treated and group call emergency services are offered.\n19.11 eCALL INACTIVE\nValid subscriber data are available, update status is U4, and a cell is selected, which is expected to be able to provide normal service. Only emergency services and test/reconfiguration calls (see 3GPP TS 22.101 [8]) can be initiated by the mobile station. This state is applicable only to an eCall only mobile station (as determined by information configured in USIM). The state is entered by the mobile station in order to avoid MM activity and MM signalling in the absence of an emergency call or test/reconfiguration call. The state is ended when an emergency services or test/reconfiguration calls[8] is initiated by the mobile station, the new state depends on the result of the procedure when returning to MM-IDLE described in subclause 4.2.3.\nIn parallel with the sublayer states described in subclause 4.1.2.1 and which control the MM sublayer protocol, an update status exists.\nThe update status pertains to a specific subscriber embodied by a SIM/USIM. This status is defined even when the subscriber is not activated (SIM/USIM removed or connected to a switched-off ME). It is stored in a non volatile memory in the SIM/USIM. The update status is changed only as a result of a location updating procedure attempt (with the exception of an authentication failure and of some cases of CM service rejection). In some cases, the update status is changed as a result of a GPRS attach, GPRS routing area update, service request network initiated GPRS detach procedure or due to change in LAI while timer T3246 running.\nU1 UPDATED\nThe last location updating attempt was successful (correct procedure outcome, and the answer was acceptance from the network). With this status, the SIM/USIM contains also the LAI of the LA where the subscriber is registered, and possibly valid TMSI, GSM ciphering key, UMTS integrity key, UMTS ciphering key and ciphering key sequence number. Furthermore, if the ME supports any A5 ciphering algorithm that requires a 128-bit ciphering key and a USIM is in use, then the ME may contain a valid GSM Kc128. The \"Location update status\" stored on the SIM/USIM shall be \"updated\".\nU2 NOT UPDATED\nThe last location updating attempt made failed procedurally (no significant answer was received from the network, including the cases of failures or congestion inside the network).\nFor this status, the SIM/USIM can contain a valid LAI of the location area to which the subscriber was registered, and possibly also a valid TMSI, GSM ciphering key, UMTS integrity key, UMTS ciphering key and ciphering key sequence number. For compatibility reasons, all these fields shall be set to the \"deleted\" value if the LAI is deleted. However the presence of other values shall not be considered an error by the mobile station. Furthermore, if the ME supports any A5 ciphering algorithm that requires a 128-bit ciphering key and a USIM is in use, then the ME shall delete the GSM Kc128 stored if the LAI is deleted. The \"Location update status\" stored on the SIM/USIM shall be \"not updated\".\nU3 ROAMING NOT ALLOWED\nThe last location updating attempt run correctly, but the answer from the network was negative (because of roaming or subscription restrictions).\nFor this status, the SIM/USIM can contain a valid LAI, TMSI, GSM ciphering key, UMTS integrity key, UMTS ciphering key or ciphering key sequence number. For compatibility reasons, all these fields shall be set to the \"deleted\" value if the LAI is deleted. However the presence of other values shall not be considered an error by the mobile station. Furthermore, if the ME supports any A5 ciphering algorithm that requires a 128-bit ciphering key and a USIM is in use, then the ME shall delete the GSM Kc128 stored if the LAI is deleted. The \"Location update status\" stored on the SIM/USIM shall be \"Location Area not allowed\".\nU4 UPDATING DISABLED\nLocation updating has been disabled.\nFor this status, the SIM/USIM does not contain any valid LAI, TMSI, GSM ciphering key, UMTS integrity key, UMTS ciphering key or ciphering key sequence number. For compatibility reasons, all these fields shall be set to the \"deleted\" value at the moment the status is set to eCALL INACTIVE. However the presence of other values shall not be considered an error by the mobile station. Furthermore, if the ME supports any A5 ciphering algorithm that requires a 128-bit ciphering key and a USIM is in use, then the ME shall delete the GSM Kc128 stored at the moment the status is set to eCALL INACTIVE. The \"Location update status\" stored on the SIM/USIM shall be \"not updated\".\n1. IDLE\nThe MM sublayer is not active except possibly when the RR sublayer is in Group Receive mode.\n2. WAIT FOR RR CONNECTION\nThe MM sublayer has received a request for MM connection establishment from the CM layer. A RR connection to the mobile station is requested from the RR sublayer (i.e. paging is performed).\n3. MM CONNECTION ACTIVE\nThe MM sublayer has a RR connection to a mobile station. One or more MM connections are active, or no MM connection is active but an RRLP procedure or LCS procedure over RRC is ongoing.\n4. IDENTIFICATION INITIATED\nThe identification procedure has been started by the network. The timer T3270 is running.\n5. AUTHENTICATION INITIATED\nThe authentication procedure has been started by the network. The timer T3260 is running.\n6. TMSI REALLOCATION INITIATED\nThe TMSI reallocation procedure has been started by the network. The timer T3250 is running.\n7. SECURITY MODE INITIATED\nIn Iu mode, the security mode setting procedure has been requested to the RR sublayer. In A/Gb mode, the cipher mode setting procedure has been requested to the RR sublayer.\n8a. WAIT FOR MOBILE ORIGINATED MM CONNECTION\nA CM SERVICE REQUEST message is received and processed, and the MM sublayer awaits the \"opening message\" of the MM connection.\n8b. WAIT FOR NETWORK ORIGINATED MM CONNECTION\nA CM SERVICE PROMPT message has been sent by the network and the MM sublayer awaits the \"opening message\" of the MM connection $(CCBS)$.\n9. WAIT FOR REESTABLISHMENT\nThe RR connection to a mobile station with one or more active MM connection has been lost. The network awaits a possible re-establishment request from the mobile station.\n10. WAIT OF A GROUP CALL\nOnly applicable in case for mobile station supporting VGCS talking. The MM sublayer has received a request for establishing a VGCS from the GCC sublayer. The request for establishing a VGCS channels is given to the RR sublayer.\n11. GROUP CALL ACTIVE\nOnly applicable in case of mobile station supporting VGCS talking. A VGCS channel is established by the RR sublayer. An RR connection to the talking mobile station can be established by the RR sublayer on the VGCS channel. The MM sublayer is active but no sending of MM message between the network and the mobile station has occurred.\n12. MM CONNECTION ACTIVE (GROUP CALL)\nOnly applicable in case of mobile station supporting VGCS talking. The MM sublayer has a RR connection to the talking mobile station on the VGCS channel. Only one MM connection is active.\n13. WAIT FOR BROADCAST CALL\nOnly applicable in case of VBS. The MM sublayer has received a request for a VBS establishment from the BCC sublayer. The request for establishment of VBS channels is given to the RR sublayer.\n14. BROADCAST CALL ACTIVE\nOnly applicable in case of VBS. A VBS channel is established by the RR sublayer. The MM sublayer is active but no explicit MM establishment between the Network and the mobile station has occurred.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "4.1.3\tGPRS mobility management (GMM) sublayer states",
                            "text_content": "In this subclause, the GMM protocol of the MS and the network are described by means of two different state machines. In subclause 4.1.3.1, the states of the GMM entity in the MS are introduced. The behaviour of the MS depends on a GPRS update status that is described in subclause 4.1.3.2. The states for the network side are described in subclause 4.1.3.3.\nIn this subclause, the possible GMM states are described of a GMM entity in the mobile station. subclause 4.1.3.1.1 summarises the main states of a GMM entity, see figure 4.1b of the present document. The substates that have been defined are described in subclause 4.1.3.1.2 and subclause 4.1.3.1.3.\nHowever, it should be noted that this subclause does not include a description of the detailed behaviour of the MS in the single states and does not cover abnormal cases. Thus, figure 4.1b of the present document is rather intended to give an overview of the state transitions than to be a complete state transition diagram. A detailed description of the behaviour of the MS is given in subclause 4.2. Especially, with respect to the behaviour of the MS in abnormal cases it is referred to subclause 4.7.\n4.1.3.1.1.1\tGMM-NULL\nThe GPRS capability is disabled in the MS. No GPRS mobility management function shall be performed in this state.\n4.1.3.1.1.2\tGMM-DEREGISTERED\nThe GPRS capability has been enabled in the MS, but no GMM context has been established. In this state, the MS may establish a GMM context by starting the GPRS attach or combined GPRS attach procedure.\n4.1.3.1.1.3\tGMM-REGISTERED-INITIATED\nA GPRS attach or combined GPRS attach procedure has been started and the MS is awaiting a response from the network.\n4.1.3.1.1.4\tGMM-REGISTERED\nA GMM context has been established, i.e. the GPRS attach or combined GPRS attach procedure has been successfully performed. In this state, the MS may activate PDP contexts, MBMS contexts, may send and receive user data and signalling information and may reply to a page request. Furthermore, cell and routing area updating are performed.\n4.1.3.1.1.5\tGMM-DEREGISTERED-INITIATED\nThe MS has requested release of the GMM context by starting the GPRS detach or combined GPRS detach procedure. This state is only entered if the MS is not being switched off at detach request.\n4.1.3.1.1.6\tGMM-ROUTING-AREA-UPDATING-INITIATED\nA routing area updating procedure has been started and the MS is awaiting a response from the network.\n4.1.3.1.1.7\tGMM-SERVICE-REQUEST-INITIATED (Iu mode only)\nA service request procedure has been started and the MS is awaiting a response from the network.\nThe GMM-DEREGISTERED state is subdivided into several substates as explained below. The substates pertain to the whole MS (ME alone if no SIM/USIM is inserted, or ME plus SIM/USIM). The selection of the appropriate substate depends on the GPRS update status, see subclause 4.1.3.2, and on the selected cell.\n4.1.3.1.2.1\tGMM-DEREGISTERED.NORMAL-SERVICE\nValid subscriber data is available,  a suitable cell has been found and the PLMN or LA is not in the forbidden list. In this state, a request for GPRS attach is performed using the stored temporary mobile subscriber identity for GPRS (P-TMSI), routing area identification (RAI) and GPRS ciphering key sequence number in case of GU1. If the GPRS update status is GU2, the IMSI shall be used to attach for GPRS services.\n4.1.3.1.2.2\tGMM-DEREGISTERED.LIMITED-SERVICE\nValid subscriber data is available, and a cell is selected, which is known not to be able to provide normal service.\n4.1.3.1.2.3\tGMM-DEREGISTERED.ATTACH-NEEDED\nValid subscriber data is available and for some reason a GPRS attach must be performed as soon as possible. This state is usually of no duration, but can last, e.g. due to access class control (see subclause 4.1.1.2.1).\n4.1.3.1.2.4\tGMM-DEREGISTERED.ATTEMPTING-TO-ATTACH\nA cell is selected, a previous GPRS attach was rejected or failed due to a missing response from the network. The execution of further attach procedures depends on the GPRS attach attempt counter. No GMM procedure except GPRS attach shall be initiated by the MS in this substate.\n4.1.3.1.2.5\tGMM-DEREGISTERED.NO-IMSI\nNo valid subscriber data is available (no SIM/USIM, or the SIM/USIM is not considered valid by the ME) and a cell has been selected.\n4.1.3.1.2.6\tGMM-DEREGISTERED.NO-CELL-AVAILABLE\nNo cell can be selected. This substate is entered after a first intensive search failed (substate PLMN SEARCH). Cells are searched for at a low rhythm. No services are offered.\n4.1.3.1.2.7\tGMM-DEREGISTERED.PLMN-SEARCH\nThe mobile station is searching for PLMNs. This substate is left either when a cell has been selected (the new substate is NORMAL-SERVICE or LIMITED-SERVICE) or when it has been concluded that no cell is available at the moment (the new substate is NO-CELL-AVAILABLE).\n4.1.3.1.2.8\tGMM-DEREGISTERED.SUSPENDED (A/Gb mode only)\nThe MS shall enter this substate when entering dedicated mode and the MS limitations make it unable to communicate on GPRS channels. The MS shall leave this substate when leaving dedicated mode.\nThe state GMM-REGISTERED is subdivided into several substate as explained below. The substates pertain to the whole MS (ME alone if no SIM/USIM is inserted, or ME plus SIM/USIM).\n4.1.3.1.3.1\tGMM-REGISTERED.NORMAL-SERVICE\nUser data and signalling information may be sent and received.\n4.1.3.1.3.2\tGMM-REGISTERED.SUSPENDED (A/Gb mode only)\nThe MS shall enter this substate when entering dedicated mode and when the MS limitations makes it unable to communicate on GPRS channels. In this substate, no user data should be sent and no signalling information shall be sent. The MS shall leave this substate when leaving dedicated mode.\n4.1.3.1.3.3\tGMM-REGISTERED.UPDATE-NEEDED\nThe MS has to perform a routing area updating procedure, but its access class is not allowed in the cell due to access class control (see subclause 4.1.1.2.1). The procedure will be initiated as soon as access is granted (this might be due to a cell-reselection or due to change of the access classes allowed in the current cell). No GMM procedure except routing area updating shall be initiated by the MS in this substate. In this substate, no user data and no signalling information shall be sent.\n4.1.3.1.3.4\tGMM-REGISTERED.ATTEMPTING-TO-UPDATE\nA routing area updating procedure failed due to a missing response from the network. The MS retries the procedure controlled by timers and a GPRS attempt counter. No GMM procedure except routing area updating shall be initiated by the MS in this substate. No data shall be sent or received.\n4.1.3.1.3.5\tGMM-REGISTERED.NO-CELL-AVAILABLE\nGPRS coverage has been lost or PSM is active in the MS. If PSM is active, the MS can deactivate PSM at any time by activating the AS layer when the MS needs to send mobile originated signalling or user data. Otherwise, the MS shall not initiate any GMM procedures except of cell (and PLMN) reselection.\n\nThe figure depicts the main states of the GMM (Generalized Multi-Multipath) in the 3GPP TS 24.008 standard, which is a crucial component of 3GPP's 3GPP TS 24.008:GMM main states in the MS. The figure illustrates the GMM main states in a graphical format, with each state represented by a different color and shape, allowing for easy identification and understanding of the different states. The figure also includes a legend to help users understand the different colors and shapes used to represent the GMM main states. Overall, the figure provides a clear and concise representation of the GMM main states in the 3GPP TS 24.008 standard.\nFigure 4.1b/3GPP TS 24.008:GMM main states in the MS\n4.1.3.1.3.6\tGMM-REGISTERED.LIMITED-SERVICE\nA cell is selected, which is known not to be able to provide normal service. The MS will remain in this sub-state until a cell is selected which is able to provide normal service.\n4.1.3.1.3.7\tGMM-REGISTERED.ATTEMPTING-TO-UPDATE-MM\nA combined routing area updating procedure or a combined GPRS attach procedure was successful for GPRS services only. The MS retries the procedure controlled by timers and a GPRS attempt counter. User data and signalling information may be sent and received.\n4.1.3.1.3.8\tGMM-REGISTERED.IMSI-DETACH-INITIATED\nThe MS performs a combined GPRS detach procedure for non-GPRS services only (detach type \"IMSI Detach\"). This state is entered if the MS is attached for GPRS and non-GPRS services in a network that operates in network mode I and wants to detach for non-GPRS services only. User data and signalling information may be sent and received.\n4.1.3.1.3.9\tGMM-REGISTERED.PLMN-SEARCH\nThe mobile station is searching for PLMNs. This substate is left either when a cell has been selected (the new substate is NORMAL-SERVICE or LIMITED-SERVICE) or when it has been concluded that no cell is available at the moment (the new substate is NO-CELL-AVAILABLE).\nIn addition to the GMM sublayer states described so far, a GPRS update status exists.\nThe GPRS update status pertains to a specific subscriber embodied by a SIM/USIM. This status is defined even when the subscriber is not activated (SIM/USIM removed or connected to a switched off ME). It is stored in a non volatile memory in the SIM/USIM. The GPRS update status is changed only after execution of a GPRS attach, combined GPRS attach, network initiated GPRS detach, authentication, service request, paging for GPRS services using IMSI,  routing area updating, combined routing area updating procedure or due to change in RAI while timer T3346 running.\nGU1: UPDATED\nThe last GPRS attach or routing area updating attempt was successful (correct procedure outcome, and the answer was accepted by the network). The SIM/USIM contains the RAI of the routing area (RA) to which the subscriber was attached, and possibly a valid P-TMSI, GPRS GSM ciphering key, GPRS UMTS ciphering key, GPRS UMTS integrity key and GPRS ciphering key sequence number. Furthermore, if the ME supports any GEA ciphering algorithm that requires a 128-bit ciphering key and a USIM is in use, then the ME may contain a valid GPRS GSM Kc128. Furthermore, if the ME supports any GIA integrity algorithm that requires a 128-bit integrity key and a USIM is in use, then the ME may contain a valid GPRS GSM Kint.\nGU2: NOT UPDATED\nThe last GPRS attach or routing area updating attempt failed procedurally, e.g. no response was received from the network. This includes the cases of failures or congestion inside the network.\nIn this case, the SIM/USIM can contain the RAI of the routing area (RA) to which the subscriber was attached, and possibly also a valid P-TMSI, GPRS GSM ciphering key, GPRS UMTS ciphering key, GPRS UMTS integrity key and GPRS ciphering key sequence number. For compatibility reasons, all these fields shall be set to the \"deleted\" value if the RAI is deleted. However, the presence of other values shall not be considered an error by the MS. Furthermore, if the ME supports any GEA ciphering algorithm that requires a 128-bit ciphering key and a USIM is in use, then the ME shall delete the GPRS GSM Kc128 stored if the RAI is deleted. Furthermore, if the ME supports any GIA integrity algorithm that requires a 128-bit integrity key and a USIM is in use, then the ME shall delete the GPRS GSM Kint stored if the RAI is deleted.\nGU3: ROAMING NOT ALLOWED\nThe last GPRS attach or routing area updating attempt was correctly performed, but the answer from the network was negative (because of roaming or subscription restrictions).\nIn this case, the SIM/USIM can contain the RAI of the routing area (RA) to which the subscriber was attached, and possibly also a valid P-TMSI, GPRS GSM ciphering key, GPRS UMTS ciphering key, GPRS UMTS integrity key or GPRS ciphering key sequence number. For compatibility reasons, all these fields shall be set to the value \"deleted\" if the RAI is deleted. However, the presence of other values shall not be considered an error by the MS. Furthermore, if the ME supports any GEA ciphering algorithm that requires a 128-bit ciphering key and a USIM is in use, then the ME shall delete the GPRS GSM Kc128 stored if the RAI is deleted. Furthermore, if the ME supports any GIA integrity algorithm that requires a 128-bit integrity key and a USIM is in use, then the ME shall delete the GPRS GSM Kint stored if the RAI is deleted.\nIf the MS is attached for emergency bearer services, the MS shall not store the GMM parameters described in this subclause on the SIM/USIM or in non-volatile memory. Instead the MS shall temporarily store these parameters locally in the ME and the MS shall delete these parameters when the MS is detached.\nIn this subsubclause, the possible states are described for the GMM on the network side. Subclause 4.1.3.3.1 summarises the main states. The corresponding substates are described in subclause 4.1.3.3.2.\nHowever, it should be noted that this subclause does not include a description of the detailed behaviour of the network in the single states and does not cover abnormal cases. Thus, figure 4.1c/3GPP TS 24.008 is rather intended to give an overview of the state transitions than to be a complete state transition diagram. A detailed description of the behaviour of the MS is given in subclause 4.2. Especially, with respect to the behaviour of the MS in abnormal cases it is referred to subclause 4.7.\n4.1.3.3.1.1\tGMM-DEREGISTERED\nThe network has no GMM context or the GMM context is marked as detached, the MS is detached. In this state, the network may answer to a GPRS attach or combined GPRS attach procedure initiated by the MS.\n4.1.3.3.1.2\tGMM-COMMON-PROCEDURE-INITIATED\nA common GMM procedure, as defined in subclause 4.1.1, has been started. The network is awaiting the answer from the MS.\n4.1.3.3.1.3\tGMM-REGISTERED\nThe GMM context has been established and the GPRS attach procedure has been successfully performed.\n4.1.3.3.1.4\tGMM-DEREGISTERED-INITIATED\nThe network has started a GPRS detach procedure and is awaiting the answer from the MS.\nThe figure depicts the main states of GMM (Gigabit Multicarrier) on the network side, illustrating the various modulation schemes used in 3GPP TS 24.008. The figure shows the GMM main states in a graphical format, with each state represented by a different color and symbol, allowing for easy identification and understanding of the different modulation schemes. The figure also includes a legend to help users understand the different colors and symbols used to represent the different modulation schemes. Overall, the figure provides a clear and concise visual representation of the GMM main states in 3GPP TS 24.008, making it an essential tool for understanding the modulation schemes used in this standard.\nFigure 4.1c/3GPP TS 24.008: GMM main states on the network side\nThe state GMM-REGISTERED is subdivided into two substates as explained below.\n4.1.3.3.2.1\tGMM-REGISTERED.NORMAL-SERVICE\nUser data and signalling information may be sent and received.\n4.1.3.3.2.2\tGMM-REGISTERED.SUSPENDED (A/Gb mode only)\nIn this substate, the lower layers shall be prevented of sending user data or signalling information.\n",
                            "figures_meta_data": [],
                            "tables": []
                        }
                    ]
                },
                {
                    "title": "4.2\tBehaviour of the MS in MM Idle state, GMM-DEREGISTERED state and GMM-REGISTERED state",
                    "description": "",
                    "summary": "",
                    "text_content": "In this subclause, the detailed behaviour of the MS in the main states MM IDLE, GMM-DEREGISTERED and GMM-REGISTERED is described. Subclauses 4.2.1 to 4.2.3 refer to the state MM IDLE, whereas subclauses 4.2.4 and 4.2.5 refer to the states GMM-DEREGISTERED and GMM-REGISTERED, respectively.\nThe MM IDLE state is entered when none of the MM procedures are running and no RR connection exists. It is left when one of the MM procedures are triggered or a RR connection is established.\nThe specific behaviour in the MM IDLE state depends on the service state of the mobile station as described in subclause 4.1.2.1.2. The service state depends in particular on the update status which is defined in subclause 4.1.2.2.\nHow an appropriate service state is chosen after power on is described in subclause 4.2.1, and the specific behaviour of the mobile station in MM IDLE state is described in subclause 4.2.2. The service state chosen when the MM IDLE state is returned to from any state except NULL state is described in subclause 4.2.3.\nIt should be noted that transitions between the various MM idle states are caused by (e.g.):\n-\tresults of procedures on RR connected mode (see subclause 4.2.3);\n-\tinsertion or removal of the SIM/USIM;\n-\tcell selection/reselection (see also 3GPP TS 43.022 [82] and 3GPP TS 25.304 [98]);\n-\tPLMN search;\n-\tloss of coverage.\nHow various MM procedures affects the service state and the update status is described in the detailed descriptions of the procedures in subclauses 4.3 to 4.5.\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": [
                        {
                            "title": "4.2.1\tPrimary Service State selection",
                            "text_content": "For an eCall only mobile station (as determined by information configured in the USIM), Timers T3242 and T3243 are considered to have expired at power-on. When mobility management is activated after power-on, the service state is 19.7 PLMN SEARCH. The detailed processing in this state is described in detail in 3GPP TS 23.122 [14], 3GPP TS 43.022 [82], 3GPP TS 45.008 [34] and 3GPP TS 25.304 [98], where procedures for power on and selection of PLMN is described in detail. If the \"Location update status\" stored on the SIM/USIM is different from \"updated\", then the mobile shall act as if the \"Location update status\" stored on the SIM/USIM is \"not updated\".\nThe service state when the PLMN SEARCH state is left depends on the outcome of the search and on the presence of the SIM/USIM:\n-\tif no cell has been found, the state is NO CELL AVAILABLE, until a cell is found;\n-\tif no SIM/USIM is present the state is NO IMSI;\n-\tfor an eCall only mobile station (as determined by information configured in USIM), the state is eCALL INACTIVE.\n-\tif the mobile station has been continuously activated since loosing coverage and then returns to coverage, and if the selected cell is in the location area where the mobile station is registered and the timer T3212 has not expired, then the state is NORMAL SERVICE;\n-\tif the selected cell is in the location area where the mobile station is registered and IMSI ATTACH is not required and timer T3212 has not expired, then the state is NORMAL SERVICE;\n-\tif the mobile station is in automatic network selection mode and the selected cell is in a forbidden PLMN, is in a forbidden LA, or is a CSG cell whose CSG ID and associated PLMN identity are not in the Allowed CSG list or in the Operator CSG list stored in the MS, then the mobile station enters the LIMITED SERVICE state;\n-\tif the mobile station is in manual network selection mode and no cell of the selected PLMN has been found, or the cell that is found in the selected PLMN is a CSG cell whose CSG ID and associated PLMN identity are not in the Allowed CSG list or in the Operator CSG list stored in the MS, then the mobile station enters the LIMITED SERVICE state;\n-\totherwise, the mobile station enters the LOCATION UPDATE NEEDED state.\nThe state PLMN SEARCH is also entered in the following cases:\n-\tin state NO IMSI, a SIM/USIM is inserted;\n-\tin any state except NO IMSI, NO CELL AVAILABLE, NORMAL SERVICE and RECEIVING GROUP CALL (NORMAL SERVICE) after the user has asked for a PLMN selection;\n-\tin any state except NO IMSI and NO CELL AVAILABLE, coverage is lost;\n-\troaming is denied;\n-\toptionally, when the mobile station is in the ATTEMPTING TO UPDATE state and is in Automatic Network Selection mode and location update attempt counter is greater than or equal to 4.\nThe service state when the PLMN SEARCH is left depends on the outcome of the search and on the presence of the SIM/USIM as specified in subclause 4.2.1.1.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "4.2.2\tDetailed Description of the MS behaviour in MM IDLE State.",
                            "text_content": "In the MM IDLE state the mobile station shall behave according to the service state. In the following subclauses the behaviour is described for the non transient service states. It should be noted that after procedures in RR connected mode, e.g. location updating procedures, subclause 4.2.3 applies which specifies the selection of the MM idle state. Furthermore when in sub-state NORMAL SERVICE, if a PLMN selection is requested, the MS enters sub-state SEARCH FOR PLMN, NORMAL SERVICE.\nWhen in state MM IDLE and service state NORMAL SERVICE, the mobile station shall:\n-\tprovided that T3246 is not running, perform normal location updating when a new location area is entered;\n-\tperform location updating procedure at expiry of timer T3211 or T3213;\n-\tperform periodic updating at expiration of timer T3212;\n-\tperform IMSI detach;\n-\tprovided that T3246 is not running, support requests from the CM layer;\n-\tsupport request for emergency calls;\n-\trespond to paging; and\n-\tfor an eCall only mobile station (as determined by information configured in USIM), perform the eCall inactivity procedure at expiry of timer T3242 or timer T3243.\nIn addition, mobile stations supporting VGCS listening or VBS listening shall:\n-\tindicate notifications to the GCC or BCC sublayer;\n-\trespond to notification if the GCC or BCC sublayer requests the reception of a voice group or broadcast call for which no channel description has been received in the notification by the RR sublayer;\n-\trequest the RR sublayer to receive a voice group or broadcast call if the GCC or BCC sublayer requests the reception of a voice group or broadcast call for which a channel description has been received in the notification by the RR sublayer and then go to the service state RECEIVING GROUP CALL (NORMAL SERVICE).\nWhen in state MM IDLE and service state ATTEMPTING TO UPDATE the mobile station shall:\n-\tperform location updating procedure at expiry of timer T3211, T3213 or T3246;\n-\tperform normal location updating when entering a new PLMN, if timer T3246 is running and the new PLMN is not equivalent to the PLMN where the MS started timer T3246;\n-\tperform normal location updating when the location area identification of the serving cell changes, if timer T3246 is not running;\n-\tif entry into this state was caused by c) or d) or f) (with cause different from \"abnormal release, unspecified\") or g) (with cause \"retry upon entry into a new cell\") of subclause 4.4.4.9, then location updating shall be performed when a new cell is entered;\n-\tif entry into this state was caused by e) or f) (with cause \"abnormal release, unspecified\"), g) (with cause different from \"retry upon entry into a new cell\"), i) or j) of subclause 4.4.4.9, then location updating shall not be performed because a new cell is entered;\n-\tperform normal location updating at expiry of timer T3212;\n-\tnot perform IMSI detach unless timer T3246 is running and the location area of the current cell is same as the stored location area;\n-\tsupport request for emergency calls;\n-\tuse other request from CM layer as triggering of normal location updating procedure (if the location updating procedure is successful, then the request for MM connection is accepted, see subclause 4.5.1), if timer T3246 is not running;\n-\trespond to paging, if the location area of the current cell is same as the stored location area;\n-\trespond to paging (with IMSI) ; and\n-\tfor an eCall only mobile station (as determined by information configured in USIM), perform the eCall inactivity procedure at expiry of timer T3242 or timer T3243.\nIn addition, mobile stations supporting VGCS listening or VBS listening shall:\n-\tindicate notifications to the GCC or BCC sublayer for which a channel description has been received in the notification by the RR sublayer;\n-\treject requests of the GCC or BCC sublayer to respond to notifications for which no channel description has been received in the notification by the RR sublayer;\n-\trequest the RR sublayer to receive a voice group or broadcast call if the GCC or BCC sublayer requests the reception of a voice group or broadcast call for which a channel description has been received in the notification by the RR sublayer and then go to the service state RECEIVING GROUP CALL (LIMITED SERVICE).\nWhen in state MM IDLE and service state LIMITED SERVICE the mobile station shall:\n-\tnot perform periodic updating;\n-\tnot perform IMSI detach;\n-\treject any requests from CM entities for MM connections except for emergency calls;\n-\tperform normal location updating when a cell is entered which may provide normal service (e.g. location area not in one of the forbidden LAI lists.); and\n-\tfor an eCall only mobile station (as determined by information configured in USIM), perform the eCall inactivity procedure at expiry of timer T3242 or timer T3243.\nWhen in state MM IDLE and service state LIMITED SERVICE the mobile station may:\n-\trespond to paging (with IMSI);\nIn addition, mobile stations supporting VGCS listening or VBS listening shall:\n-\tindicate notifications to the GCC or BCC sublayer for which a channel description has been received in the notification by the RR sublayer;\n-\treject requests of the GCC or BCC sublayer to respond to notifications for which no channel description has been received in the notification by the RR sublayer;\n-\trequest the RR sublayer to receive a voice group or broadcast call if the GCC or BCC sublayer requests the reception of a voice group or broadcast call for which a channel description has been received in the notification by the RR sublayer and then go to the service state RECEIVING GROUP CALL (LIMITED SERVICE).\nWhen in state MM IDLE and service state NO IMSI the mobile station shall (see subclause 3.2, 3GPP TS 43.022 [82] and 3GPP TS 45.008 [34]):\n-\tnot start any normal location updating attempt;\n-\tnot perform periodic updating;\n-\tnot perform IMSI detach if powered down;\n-\treject any request from CM entities for MM connections except for emergency calls;\n-\tnot respond to paging;\n-\tonly perform default cell selection.\nIn addition, mobile stations supporting VGCS listening or VBS listening shall:\n-\tnot indicate notifications to the GCC or BCC layer.\nWhen in state MM IDLE and service state SEARCH FOR PLMN, NORMAL SERVICE the mobile station shall:\n-\tif timer T3211 or T3213 expires in this state perform a location updating procedure at the latest if and when back to NORMAL SERVICE state and if the cell is not changed;\n-\tif timer T3212 expires in this state perform a periodic location updating procedure at the latest if and when back to NORMAL SERVICE state;\n-\tperform IMSI detach;\n-\tsupport requests from the CM layer;\n-\tlisten as far as possible to paging, and respond; and\n-\tfor an eCall only mobile station (as determined by information configured in USIM), perform the eCall inactivity procedure at expiry of timer T3242 or T3243.\nIn addition, mobile stations supporting VGCS listening or VBS listening shall:\n-\tlisten as far as possible to notifications and indicate notifications to the GCC or BCC layer;\n-\trespond to notification if the GCC or BCC sublayer requests the reception of a voice group or broadcast call for which no channel description has been received in the notification by the RR sublayer;\n-\trequest the RR sublayer to receive a voice group or broadcast call if the GCC or BCC sublayer requests the reception of a voice group or broadcast call for which a channel description has been received in the notification by the RR sublayer.\nWhen in state MM IDLE and service state SEARCH FOR PLMN the mobile station shall:\n-\tnot start any normal location updating attempt;\n-\tnot perform periodic updating;\n-\tnot perform IMSI detach if powered down;\n-\treject any request from CM entities for MM connections except emergency calls;\n-\tnot respond to paging.\nOnly applicable for mobile stations supporting VGCS listening or VBS listening:\nWhen in state MM IDLE and service state RECEIVING GROUP CALL (NORMAL SERVICE), the mobile station shall:\n-\tperform normal location updating when a new location area is entered;\n-\tperform location updating procedure at expiry of timer T3211 or T3213;\n-\tperform periodic updating at expiration of timer T3212;\n-\tperform IMSI detach;\n-\tsupport requests from the GCC or BCC layers;\n-\tindicate notifications or paging information to the GCC or BCC layer;\n-\trespond to notification if the GCC or BCC sublayer requests the reception of a voice group or broadcast call for which no channel description has been received in the notification by the RR sublayer;\n-\trequest the RR sublayer to receive another voice group or broadcast call if the GCC or BCC sublayer requests the reception of a voice group or broadcast call for which a channel description has been received in the notification by the RR sublayer.\nOnly applicable for mobile stations supporting VGCS listening or VBS listening:\nWhen in state MM IDLE and service state RECEIVING GROUP CALL (LIMITED SERVICE), the mobile station shall:\n-\tnot perform periodic updating;\n-\tnot perform IMSI detach;\n-\treject any requests from CM entities for MM connections except for emergency calls;\n-\tperform normal location updating when a cell is entered which may provide normal service (e.g. location area not in one of the forbidden LAI lists.);\n-\tit may respond to paging (with IMSI);\n-\tindicate notifications to the GCC or BCC sublayer for which a channel description has been received in the notification by the RR sublayer;\n-\treject requests of the GCC or BCC sublayer to respond to notifications for which no channel description has been received in the notification by the RR sublayer;\n-\trequest the RR sublayer to receive a voice group or broadcast call if the GCC or BCC sublayer requests the reception of a voice group or broadcast call for which a channel description has been received in the notification by the RR sublayer and then go to the service state RECEIVING GROUP CALL (LIMITED SERVICE).\nWhen in state MM IDLE and service state eCALL INACTIVE, the mobile station shall:\n-\tnot perform periodic updating;\n-\tnot perform IMSI detach;\n-\treject any requests from CM entities for MM connections except for emergency calls and calls to a non-emergency MSISDN for test and terminal reconfiguration services;\n-\tnot perform normal location updating; and\n-\tnot respond to paging.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "4.2.3\tService state when back to state MM IDLE from another state",
                            "text_content": "When returning to MM IDLE, e.g., after a location updating procedure, the mobile station selects the cell as specified in 3GPP TS 43.022 [82] and 3GPP TS 25.304 [98]. With one exception, this is a normal cell selection.\nAn eCall only mobile station (as determined by information configured in USIM), shall start timer T3242 if the return to MM IDLE state is the result of an emergency services call and shall start timer T3243 if the return to MM IDLE state is the result of a call to a non-emergency MSISDN for test and terminal reconfiguration services, as described in subclause 4.4.7.\nIf this return to idle state is not subsequent to a location updating procedure terminated with reception of cause \"Roaming not allowed in this location area\", the service state depends on the result of the cell selection procedure, on the update status of the mobile station, on the location data stored in the mobile station and on the presence of the SIM/USIM:\n-\tif no cell has been found, the state is NO CELL AVAILABLE, until a cell is found;\n-\tif no SIM/USIM is present, or if the inserted SIM/USIM is considered invalid by the MS, the state is NO IMSI;\n-\tfor an eCall only mobile station (as determined by information configured in USIM), if timer T3242 or timer T3243 has expired and service state PLMN SEARCH is not required, the state is eCALL INACTIVE and the eCall inactivity procedure is performed as described in subclause 4.4.7;\n-\tif the selected cell is in the location area where the MS is registered, then the state is NORMAL SERVICE; it shall be noted that this also includes an abnormal case described in subclause 4.4.4.9;\n-\t(Only applicable for mobile stations supporting VGCS listening or VBS listening.) if the mobile stations was in the service state RECEIVING GROUP CALL (NORMAL SERVICE) or RECEIVING GROUP CALL (LIMITED SERVICE) before the location updating procedure and the selected cell is in the location area where the mobile station is registered, then the state is RECEIVING GROUP CALL (NORMAL SERVICE);\n-\tif the selected cell is in a location area where the mobile station is not registered but in which the MS is allowed to attempt a location update, then the state is LOCATION UPDATE NEEDED;\n-\tif the selected cell is in a location area where the mobile station is not allowed to attempt a location update, then the state is LIMITED SERVICE;\n-\tif the selected cell is a CSG cell whose CSG ID and associated PLMN identity are not in the Allowed CSG list or in the Operator CSG list stored in the MS, then the state is LIMITED SERVICE;\n-\t(Only applicable for MSs supporting VGCS listening or VBS listening.) if the MSs was in the service state RECEIVING GROUP CALL (NORMAL SERVICE) or RECEIVING GROUP CALL (LIMITED SERVICE) before the location updating procedure and the selected cell is in the location area where the MS is not allowed to attempt a location update, then the state is RECEIVING GROUP CALL (LIMITED SERVICE);\n-\tafter some abnormal cases occurring during an unsuccessful location updating procedure, as described in subclause 4.4.4.9, the state is ATTEMPTING TO UPDATE.\nIn case of a return from a location updating procedure to which was answered \"Roaming not allowed in this location area\", the service state PLMN SEARCH is entered as specified in subclause 4.2.1.2.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "4.2.4\tBehaviour in state GMM-DEREGISTERED",
                            "text_content": "The state GMM-DEREGISTERED is entered when:\n-\tthe MS is switched on;\n-\tthe GPRS capability has been enabled in the MS;\n-\ta GPRS detach or combined GPRS detach procedure has been performed;\n-\ta GMM procedure has failed (except routing area updating, see subclause 4.7.5); or\n-\tthe MS attached for emergency bearer services is in PMM-IDLE mode and its periodic routing area update timer expires (see subclause 4.7.2.2).\nThe selection of the appropriate substate of GMM-DEREGISTERED after switching on is described in subclause 4.2.4.1. The specific behaviour of the MS in state GMM-DEREGISTERED is described in subclause 4.2.4.2. The substate chosen when the GMM-DEREGISTERED state is returned to from another state except state GMM-NULL is described in subclause 4.2.4.3.\nIt should be noted that transitions between the various substates of GMM-DEREGISTERED are caused by (e.g.):\n-\tinsertion or removal of the SIM/USIM;\n-\tcell selection/reselection (see also 3GPP TS 43.022 [82] and 3GPP TS 25.304 [98]);\n-\tPLMN search;\n-\tloss/regain of coverage; or\n-\tchange of RA.\nHow various GMM procedures affect the GMM-DEREGISTERED substates and the GPRS update status is described in the detailed description of the GMM procedures in subclause 4.7.\nWhen the MS is switched on, the substate shall be PLMN-SEARCH in case the SIM/USIM is inserted and valid. See 3GPP TS 23.122 [14] and 3GPP TS 45.008 [34] for further details.\nWhen the GPRS capability in an activated MS has been enabled, the selection of the GMM-DEREGISTERED substate depends on the MM state and the GPRS update status.\nThe substate chosen after PLMN-SEARCH, in case of power on or after enabling of the GPRS capability is:\n-\tif the cell is not supporting GPRS, the substate shall be NO-CELL-AVAILABLE;\n-\tif no SIM/USIM is present the substate shall be NO-IMSI;\n-\tif a suitable cell supporting GPRS has been found and the PLMN or LA is not in the forbidden list, then the substate shall be NORMAL-SERVICE;\n-\tif the selected cell supporting GPRS is in a forbidden PLMN, is in a forbidden LA, or is a CSG cell with a CSG ID and associated PLMN identity that are not in Allowed CSG list or in the Operator CSG list stored in the MS , then the MS shall enter the substate LIMITED-SERVICE;\n-\tif the MS is in manual network selection mode and no cell supporting GPRS of the selected PLMN has been found, the MS shall enter the substate NO-CELL-AVAILABLE.\nWhen the MM state is IDLE, the GMM substate PLMN-SEARCH shall also be entered in the following cases:\n-\twhen a SIM/USIM is inserted in substate NO-IMSI;\n-\twhen the user has asked for a PLMN selection in any substate except NO IMSI and NO CELL AVAILABLE ;\n-\twhen coverage is lost in any substate except NO IMSI and NO CELL AVAILABLE ;\n-\tRoaming is denied;\n-\toptionally, when the MS is in automatic network selection mode and the maximum allowed number of consecutive unsuccessful attach attempts controlled by the GPRS attach attempt counter (subclause 4.7.3) have been performed.\nIn state GMM-DEREGISTERED, the MS shall behave according to the substate. In the following subclauses, the behaviour is described for the non transient substates.\nThe MS:\n-\tshall initiate GPRS attach or combined GPRS attach procedure if timer T3346 is not running. If timer T3346 is running, then MS shall initiate an GPRS attach or combined GPRS attach procedure on the expiry of timer T3346; and\n-\tmay initiate GPRS attach for emergency bearer services (UTRAN Iu mode only) even if timer T3346 is running.\nThe MS:\n-\tshall initiate GPRS attach on the expiry of timers T3311, T3302, or T3346;\n-\tshall initiate GPRS attach when entering a new PLMN, if timer T3346 is running and the new PLMN is not equivalent to the PLMN where the MS started timer T3346, the PLMN identity of the new cell is not in one of the forbidden PLMN lists and the location area this cell is belonging to is not in one of the lists of forbidden LAs;\n-\tmay initiate GPRS attach for emergency bearer services (UTRAN Iu mode only) even if timer T3346 is running;\n-\tshall initiate GPRS attach when the routing area of the serving cell has changed, if timer T3346 is not running, the PLMN identity of the new cell is not in one of the forbidden PLMN lists and the location area this cell is belonging to is not in one of the lists of forbidden LAs;\n-\tshall if entry into this state was caused by b) or d) with cause \"Retry upon entry into a new cell\" of subclause 4.7.3.1.5, perform GPRS attach when a new cell is entered;\n-\tshall if entry into this state was caused by c) or d) with cause different from \"Retry upon entry into a new cell\" of subclause 4.7.3.1.5, not perform GPRS attach when a new cell is entered;\n-\tshall use requests for non-GPRS services from CM layers to trigger the combined GPRS attach procedure, if timer T3346 is not running and the network operates in network operation mode I. Depending on which of the timers T3311 or T3302 is running the MS shall stop the relevant timer and act as if the stopped timer has expired; and\n-\tmay initiate GPRS attach upon request of the upper layers to establish a PDN connection for emergency bearer services (UTRAN Iu mode only).\nThe MS:\n-\tshall initiate GPRS attach when a cell is entered which may provide normal service (e.g. location area is not in one of the forbidden lists); and\n-\tmay initiate GPRS attach for emergency bearer services (UTRAN Iu mode only).\nThe MS:\n-\tshall perform default cell selection; and\n-\tmay initiate GPRS attach for emergency bearer services (UTRAN Iu mode only).\nThe MS shall:\n-\tperform cell selection according to 3GPP TS 43.022 [82] and 3GPP TS 25.304 [98] and shall choose an appropriate substate.\nThe MS shall perform PLMN selection. If a new PLMN is selected, the MS shall reset the GPRS attach attempt counter and initiate the GPRS attach procedure (see subclause .1).\nIf the selected cell is known not to be able to provide normal service, the MS may initiate GPRS attach for emergency bearer services (UTRAN Iu mode only).\nThe MS shall start a GPRS attach procedure if still needed as soon as the access class control allows network contact in the selected cell.\nThe MS may initiate GPRS attach for emergency bearer services (UTRAN Iu mode only).\nThe MS:\n-\tshall not send any user data; and\n-\tshall not send any signalling information.\nWhen returning to state GMM-DEREGISTERED, the MS shall select a cell as specified in 3GPP TS 43.022 [82] and 3GPP TS 25.304 [98].\nThe substate depends on the result of the cell selection procedure, the outcome of the previously performed GMM specific procedures, on the GPRS update status of the MS, on the location area data stored in the MS and on the presence of the SIM/USIM:\n-\tif no cell has been found, the substate is NO-CELL-AVAILABLE, until a cell is found;\n-\tif no SIM/USIM is present or if the inserted SIM/USIM is considered invalid by the MS, the substate shall be NO-IMSI;\n-\tif a suitable cell supporting GPRS has been found and the PLMN or LA is not in the forbidden list, the substate shall be NORMAL-SERVICE;\n-\tif a GPRS attach shall be performed (e.g. network requested reattach), the substate shall be ATTEMPTING-TO-ATTACH;\n-\tif a PLMN reselection (according to 3GPP TS 23.122 [14]) is needed, the substate shall be PLMN SEARCH;\n-\tif the selected cell is known not to be able to provide normal service, the substate shall be LIMITED-SERVICE.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "4.2.5\tBehaviour in state GMM-REGISTERED",
                            "text_content": "The state GMM-REGISTERED is entered when:\n-\ta GMM context is established, i.e. the MS is IMSI attached for GPRS services only or for GPRS and non-GPRS services.\nThe specific behaviour of the MS in state GMM-REGISTERED is described in subclause 4.2.5.1. The primary substate when entering the state GMM-REGISTERED is always NORMAL-SERVICE.\nIt should be noted that transitions between the various substates of GMM-REGISTERED are caused by (e.g.):\n-\tcell selection/reselection (see also 3GPP TS 43.022 [82] and 3GPP TS 25.304 [98]);\n-\tchange of RA;\n-\tloss/regain of coverage.\nHow various GMM procedures affect the GMM-REGISTERED substates is described in the detailed description of the procedures in subclause 4.7.\nIn state GMM-REGISTERED, the MS shall behave according to the substate as explained below.\nThe MS shall:\n-\tperform cell selection/reselection according to 3GPP TS 43.022 [82] and 3GPP TS 25.304 [98];\n-\tinitiate normal routing area updating;\n-\tperform periodic routing area updating except when attached for emergency bearer services (see subclause 4.7.2.2); and\n-\treceive and transmit user data and signalling information.\nGPRS MSs in operation modes C or A shall answer to paging requests.\nGPRS MS in operation mode B may answer to paging requests.\nThe MS:\n-\tshall not send any user data;\n-\tshall not send any signalling information; and\n-\tshall not perform cell-updates.\nThe MS shall:\n-\tnot send any user data;\n-\tnot send any signalling information, unless for a routing area update procedure upon request of the upper layers to establish a PDN connection for emergency bearer services (UTRAN Iu mode only);\n-\tperform cell selection/reselection according to 3GPP TS 43.022 [82] and 3GPP TS 25.304 [98]; and\n-\tchoose the appropriate new substate depending on the GPRS update status as soon as the access class control allows network contact in the selected cell.\nThe MS:\n-\tshall not send any user data;\n-\tshall initiate routing area updating procedure on the expiry of timers T3311, T3302 or T3346;\n-\tshall initiate routing area updating procedure when entering a new PLMN, if timer T3346 is running and the new PLMN is not equivalent to the PLMN where the MS started timer T3346, the PLMN identity of the new cell is not in one of the forbidden PLMN lists and the location area this cell is belonging to is not in one of the lists of forbidden LAs;\n-\tshall initiate routing area updating procedure when the routing area of the serving cell has changed, if timer T3346 is not running, the PLMN identity of the new cell is not in one of the forbidden PLMN lists and the location area this cell is belonging to is not in one of the lists of forbidden LAs;\n-\tshall, if entry into this state was caused by b) or d) with cause \"Retry upon entry into a new cell\" of subclause 4.7.5.1.5, initiate routing area updating procedure when a new cell is entered;\n-\tshall, if entry into this state was caused by c) or d) with cause different from \"Retry upon entry into a new cell\" of subclause 4.7.5.1.5, not initiate routing area updating procedure when a new cell is entered;\n-\tshall use request for non-GPRS services from CM layers to trigger the combined routing area updating procedure, if timer T3346 is not running and the network operates in network operation mode I. Depending on which of the timers T3311 or T3302 is running the MS shall stop the relevant timer and act as if the stopped timer has expired;\n-\tmay use a request for an MMTEL voice call or MMTEL video call from the upper layers to initiate routing area updating procedure (Iu mode only), if timer T3346 is not running;\n-\tmay initiate routing area updating procedure upon request of the upper layers to establish a PDN connection for emergency bearer services (UTRAN Iu mode only);\n-\tshall initiate routing area updating procedure upon request of the upper layers to establish a PDN connection without the NAS signalling low priority indication as specified in subclause 4.7.5.1.5, item j), if timer T3346 is running due to a NAS request message (ROUTING AREA UPDATE REQUEST or SERVICE REQUEST) which contained the low priority indicator set to \"MS is configured for NAS signalling low priority\" and timer T3302 and timer T3311 are not running;\n-\tmay detach locally and initiate GPRS attach for emergency bearer services even if timer T3346 is running;\n-\tshall initiate routing area updating procedure in response to paging; and\n-\tshall not initiate the signalling procedure for GPRS detach unless the routing area of the current cell is same as the stored routing area. Optionally, the MS may perform local GPRS detach.\nThe MS shall perform cell selection/reselection according to 3GPP TS 43.022 [82] and 3GPP TS 25.304 [98]. If PSM is active, the MS can deactivate PSM at any time by activating the AS layer when the MS needs to send mobile originated signalling or user data.\nThe MS:\n-\tshall perform cell selection/reselection according to 3GPP TS 43.022 [82] and 3GPP TS 25.304 [98];\n-\tmay respond to paging (with IMSI); and\n-\tmay initiate GPRS attach for emergency bearer services (UTRAN Iu mode only).\nThe MS shall:\n-\tperform cell selection/reselection according to 3GPP TS 43.022 [82] and 3GPP TS 25.304 [98];\n-\treceive and transmit user data and signalling information;\n-\tinitiate routing area update indicating \"combined RA/LA updating with IMSI attach\" on the expiry of timers T3311 or T3302;\n-\tinitiate routing area update indicating \"combined RA/LA updating with IMSI attach\" when the routing area of the serving cell has changed and the location area this cell is belonging to is not in the list of forbidden LAs.\nGPRS MSs in operation modes C or A shall answer to paging requests.\nGPRS MS in operation mode B may answer to paging requests.\nWhen the MM state is IDLE, the GMM substate PLMN-SEARCH may be entered if the MS is in automatic network selection mode and the maximum allowed number of consecutive unsuccessful routing area update attempts controlled by the GPRS routing area updating attempt counter (subclause 4.7.5) have been performed. If a new PLMN is selected, the MS shall reset the routing area updating attempt counter and perform the routing area updating procedure.\nIf the selected cell is known not to be able to provide normal service, the MS may initiate GPRS attach for emergency bearer services (UTRAN Iu mode only).\n",
                            "figures_meta_data": [],
                            "tables": []
                        }
                    ]
                },
                {
                    "title": "4.3\tMM common procedures",
                    "description": "",
                    "summary": "",
                    "text_content": "As described in subclause 4.1.1, a MM common procedure can be initiated at any time whilst a RR connection exists between the network and the mobile station.\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": [
                        {
                            "title": "4.3.1\tTMSI reallocation procedure",
                            "text_content": "The purpose of the TMSI reallocation procedure is to provide identity confidentiality, i.e. to protect a user against being identified and located by an intruder (see 3GPP TS 42.009 [5], 3GPP TS 43.020 [13] and 3GPP TS 33.102 [5a]).\nIf the identity confidentiality service is applied for an IMSI, a Temporary Mobile Subscriber Identity (TMSI) is used for identification within the radio interface signalling procedures.\nIn a network supporting the feature 'Intra domain connection of RAN nodes to multiple CN nodes' a TMSI shall be allocated to each IMSI attached mobile station. See 3GPP TS 23.236 [94], subclause 4.3.\nThe structure of the TMSI is specified in 3GPP TS 23.003 [10]. The TMSI has significance only within a location area. Outside the location area it has to be combined with the Location Area Identifier (LAI) to provide for an unambiguous identity.\nUsually the TMSI reallocation is performed at least at each change of a location area. (Such choices are left to the network operator).\nThe reallocation of a TMSI can be performed either by a unique procedure defined in this subclause or implicitly by a location updating procedure using the TMSI. The implicit reallocation of a TMSI is described together with that procedure.\nIf a TMSI provided by a mobile station is unknown in the network e.g. due to a data base failure, the network may require the mobile station to provide its International Mobile Subscriber Identity (IMSI). In this case the identification procedure (see subclause 4.3.3) should be used before the TMSI reallocation procedure may be initiated.\nThe TMSI reallocation can be initiated by the network at any time whilst a RR connection exists between the network and the mobile station.\nNOTE 1:\tUsually the TMSI reallocation is performed in ciphered mode.\nNOTE 2:\tNormally the TMSI reallocation will take place in conjunction with another procedure, e.g. at location updating or at call setup (see 3GPP TS 29.002 [37]).\nNOTE 3:\tThe explicit TMSI reallocation procedure is started by the network only if the mobile station is updated in the current location area or if a location updating procedure is ongoing for that particular mobile station, or if the network wishes to send a non-broadcast LAI according to 3GPP TS 23.236 [94] to the mobile station.\nThe network initiates the TMSI reallocation procedure by sending a TMSI REALLOCATION COMMAND message to the mobile station and starts the timer T3250.\nThe TMSI REALLOCATION COMMAND message contains a new combination of TMSI and LAI allocated by the network or a LAI and the IMSI if the used TMSI shall be deleted. Usually the TMSI-REALLOCATION COMMAND message is sent to the mobile station using a RR connection in ciphered mode (see 3GPP TS 43.020 [13] and 3GPP TS 33.102 [5a]).\nUpon receipt of the TMSI REALLOCATION COMMAND message the mobile station:\na)\tshall stores the Location Area Identifier (LAI) in the SIM/USIM;\nb)\tshall enter the sub-state NORMAL SERVICE if the MS is in the sub-state ATTEMPTING TO UPDATE;\nc)\tif the received identity is the IMSI of the relevant mobile station, shall delete any TMSI;\nd)\tif the received identity is a TMSI, shall store the TMSI in the SIM/USIM; and\ne)\tshall send a TMSI REALLOCATION COMPLETE message to the network.\nUpon receipt of the TMSI REALLOCATION COMPLETE message, the network stops the timer T3250 and either considers the new TMSI as valid or, if an IMSI was sent to the mobile station, considers the old TMSI as deleted.\nIf the RR connection is no more needed, then the network will request the RR sublayer to release it (see 3GPP TS 44.018 [84] subclause 3.5 and 3GPP TS 25.331 [23c]).\nThe following abnormal cases can be identified:\na)\tRR connection failure:\nThe mobile station shall consider the new TMSI and new LAI, if any, as valid and the old TMSI and old LAI as deleted as soon as a TMSI REALLOCATION COMMAND message or another message containing a new TMSI (e.g. LOCATION UPDATING ACCEPT message) is correctly received. Any RR connection failure at a later stage shall not have any impact on the TMSI and LAI storage.\nThe following abnormal cases can be identified:\na)\tRR connection failure:\nIf the RR connection is lost before the TMSI REALLOCATION COMPLETE message is received, the network shall release all MM connections, if any. Furthermore, the network should consider both the old and the new TMSI as occupied for a certain recovery time.\nDuring this period the network:\n-\tmay use the IMSI for paging or network originated transactions on the CM layer. Upon response from the mobile station the TMSI reallocation procedure shall be restarted;\n-\tmay consider the new TMSI as valid if it is used by the mobile station; or\n-\tmay use the identification procedure followed by a new TMSI reallocation procedure, if the mobile station uses the old TMSI (see subclause 4.3.3).\nOther implementations are possible, e.g. the network may page with the old TMSI.\nb)\tExpiry of timer T3250:\nThe TMSI reallocation procedure is supervised by the timer T3250 (see example in figure 4.1). At expiry of timer T3250 the network may release the RR connection. In this case, the network shall abort the reallocation procedure release all MM connections if any, and follow the rules for the case a as described above.\nThe figure depicts the TMSI reallocation sequence in 3GPP TS 24.008, which is a crucial aspect of the 3GPP standard for mobile network management. The sequence outlines the steps taken to reallocate TMSI identifiers to new users, ensuring efficient network management and user identification.\nFigure 4.1/3GPP TS 24.008: TMSI reallocation sequence\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "4.3.2\tAuthentication procedure",
                            "text_content": "The purpose of the authentication procedure is fourfold (see 3GPP TS 33.102 [5a]):\nFirst to permit the network to check whether the identity provided by the mobile station is acceptable or not;\nSecond to provide parameters enabling the mobile station to calculate a new UMTS ciphering key;\nThird to provide parameters enabling the mobile station to calculate a new UMTS integrity key;\nFourth to permit the mobile station to authenticate the network.\nThe cases where the authentication procedure should be used are defined in 3GPP TS 33.102 [5a].\nThe UMTS authentication procedure is always initiated and controlled by the network. However, there is the possibility for the MS to reject the UMTS authentication challenge sent by the network.\nThe MS shall support the UMTS authentication challenge, if a USIM is inserted.\nA UMTS security context is established in the MS and the network when a UMTS authentication challenge is performed in A/Gb mode or in Iu mode. After a successful UMTS authentication, the UMTS ciphering key, the UMTS integrity key, the GSM ciphering key and the ciphering key sequence number, are stored both in the network and the MS. Furthermore, in A/Gb mode both the ME and the network may derive and store a GSM Kc128 as part of the UMTS security context as described in the subclause 4.3.2.3a.\nThe purpose of the authentication procedure is twofold (see 3GPP TS 43.020 [13]):\nFirst to permit the network to check whether the identity provided by the mobile station is acceptable or not;\nSecond to provide parameters enabling the mobile station to calculate a new GSM ciphering key.\nThe cases where the authentication procedure should be used are defined in 3GPP TS 42.009 [5].\nThe authentication procedure is always initiated and controlled by the network. GSM authentication challenge shall be supported by a ME supporting GERAN or UTRAN.\nA GSM security context is established in the MS and the network when a GSM authentication challenge is performed in A/Gb mode or in Iu mode. However, in Iu mode the MS shall not accept a GSM authentication challenge, if a USIM is inserted. After a successful GSM authentication, the GSM ciphering key and the ciphering key sequence number, are stored both in the network and the MS.\nThe network initiates the authentication procedure by transferring an AUTHENTICATION REQUEST message across the radio interface and starts the timer T3260. The AUTHENTICATION REQUEST message contains the parameters necessary to calculate the response parameters (see 3GPP TS 43.020 [13] (in case of GSM authentication challenge) and 3GPP TS 33.102 [5a] (in case of an UMTS authentication challenge)).\nIn a GSM authentication challenge, the AUTHENTICATION REQUEST message also contains the GSM ciphering key sequence number allocated to the key which may be computed from the given parameters.\nIn a UMTS authentication challenge, the AUTHENTICATION REQUEST message also contains the ciphering key sequence number allocated to the key set of UMTS ciphering key, UMTS integrity key and GSM ciphering key which may be computed from the given parameters. Furthermore, the ciphering key sequence number is also linked to a GSM Kc128 if after the authentication procedure the network in A/Gb mode selects an A5 ciphering algorithm that requires a 128-bit ciphering key.\nThe mobile station shall be ready to respond upon an AUTHENTICATION REQUEST message at any time whilst a RR connection exists. With exception of the cases described in subclause 4.3.2.5.1, it shall process the challenge information and send back an AUTHENTICATION RESPONSE message to the network.\nIf a SIM is inserted in the MS, the MS shall ignore the Authentication Parameter AUTN IE if included in the AUTHENTICATION REQUEST message and shall proceed as in case of a GSM authentication challenge. It shall not perform the authentication of the network described in subclause 4.3.2.5.1.\nIn a GSM authentication challenge, the new GSM ciphering key calculated from the challenge information shall overwrite the previous GSM ciphering key and any previously stored UMTS ciphering key and UMTS integrity key shall be deleted. The new GSM ciphering key shall be stored on the SIM/USIM together with the ciphering key sequence number.\nIn a UMTS authentication challenge, the new UMTS ciphering key, the new GSM ciphering key and the new UMTS integrity key calculated from the challenge information shall overwrite the previous UMTS ciphering key, GSM ciphering key and UMTS integrity key. The new UMTS ciphering key, GSM ciphering key and UMTS integrity key are stored on the USIM together with the ciphering key sequence number. Furthermore, in A/Gb mode when after the authentication procedure an A5 ciphering algorithm that requires a 128-bit ciphering key is taken into use, then a new GSM Kc128 shall also be calculated as described in the subclause 4.3.2.3a.\nThe SIM/USIM will provide the mobile station with the authentication response, based upon the authentication challenge given from the ME. A UMTS authentication challenge will result in the USIM passing a RES to the ME. A GSM authentication challenge will result in the SIM/USIM passing a SRES to the ME.\nA ME supporting UMTS authentication challenge may support the following procedure:\nIn order to avoid a synchronisation failure, when the mobile station receives an AUTHENTICATION REQUEST message, the mobile station shall store the received RAND together with the RES returned from the USIM in the volatile memory and associate it with CS domain. When the MS receives a subsequent AUTHENTICATION REQUEST message, if the stored RAND value for the CS domain is equal to the new received value in the AUTHENTICATION REQUEST message, then the mobile station shall not pass the RAND to the USIM, but shall immediately send the AUTHENTICATION RESPONSE message with the stored RES for the CS domain. If, for the CS domain, there is no valid stored RAND in the mobile station or the stored RAND is different from the new received value in the AUTHENTICATION REQUEST message, the mobile station shall pass the RAND to the USIM, shall override any previously stored RAND and RES with the new ones and start, or reset and restart timer T3218.\nThe RAND and RES values stored in the mobile station shall be deleted and timer T3218, if running, shall be stopped:\n-\tupon receipt of a SECURITY MODE COMMAND (Iu mode only), \n\tCIPHERING MODE COMMAND (A/Gb mode only),\n\tCM_SERVICE_ACCEPT,\n\tCM_SERVICE_REJECT,\n\tLOCATION_UPDATING_ACCEPT \n\tor AUTHENTICATION REJECT message;\n-\tupon expiry of timer T3218; or\n-\tif the mobile station enters the MM state MM IDLE or NULL.\nUpon receipt of the AUTHENTICATION RESPONSE message, the network stops the timer T3260 and checks the validity of the response (see 3GPP TS 43.020 [13] in case of a GSM authentication challenge respective 3GPP TS 33.102 [5a] in case of an UMTS authentication challenge).\nUpon receipt of the AUTHENTICATION FAILURE message, the network stops the timer T3260. In Synch failure case, the core network may renegotiate with the HLR/AuC and provide the MS with new authentication parameters.\nThe ME and the network may derive and store a 128-bit circuit-switched GSM ciphering key or GSM Kc128 from an established UMTS security context. If the GSM Kc128 exists, then it is also part of the UMTS security context.\nThe ME with a USIM in use shall compute a new GSM Kc128 using the UMTS ciphering key and the UMTS integrity key from an established UMTS security context as specified in 3GPP TS 33.102 [5a]. The new GSM Kc128 shall be stored only in the ME. The ME shall overwrite the existing GSM Kc128 with the new GSM Kc128. The ME shall delete the GSM Kc128 at switch off, when the USIM is disabled as well as under the conditions identified in the subclause 4.1.2.2 and 4.3.2.4. The ME with a USIM in use shall apply the GSM Kc128 when in A/Gb mode an A5 ciphering algorithm that requires a 128-bit ciphering key is taken into use.\nThe network shall compute the GSM Kc128 using the UMTS integrity key and the UMTS ciphering key from an established UMTS security context as specified in 3GPP TS 33.102 [5a] only when in A/Gb mode an A5 ciphering algorithm that requires a 128-bit ciphering key is to be used.\nThe security parameters for authentication and ciphering are tied together in sets.\nIn a GSM authentication challenge, from a challenge parameter RAND both the authentication response parameter SRES and the GSM ciphering key can be computed given the secret key associated to the IMSI.\nIn a UMTS authentication challenge, from a challenge parameter RAND, the authentication response parameter RES and the UMTS ciphering key and the UMTS integrity key can be computed given the secret key associated to the IMSI. In addition, in the USIM a GSM ciphering key can be computed from the UMTS ciphering key and the UMTS integrity key by means of an unkeyed conversion function. Furthermore, in A/Gb mode if an A5 ciphering algorithm that requires a 128-bit ciphering key is taken into use, then a GSM Kc128 shall also be calculated as described in the subclause 4.3.2.3a.\nIn order to allow start of ciphering on a RR connection without authentication, the ciphering key sequence numbers are introduced. The ciphering key sequence number is managed by the network in the way that the AUTHENTICATION REQUEST message contains the ciphering key sequence number allocated to the GSM ciphering key (in case of a GSM authentication challenge) or the UMTS ciphering key and the UMTS integrity key (in case of a UMTS authentication challenge) which may be computed from the RAND parameter carried in that message.\nIf an authentication procedure has been completed successfully and a ciphering key sequence number is stored in the network, the network shall include a different ciphering key sequence number in the AUTHENTICATION REQUEST message when it intiates a new authentication procedure.\nThe mobile station stores the ciphering key sequence number with the GSM ciphering key (in case of a GSM authentication challenge) and the UMTS ciphering key and the UMTS integrity key (in case of a UMTS authentication challenge) and indicates to the network in the first message (LOCATION UPDATING REQUEST, CM SERVICE REQUEST, PAGING RESPONSE, CM RE-ESTABLISHMENT REQUEST) which ciphering key sequence number the stored GSM ciphering key (in case of a GSM authentication challenge) or set of UMTS ciphering, UMTS integrity, derived GSM ciphering key, and potentially the derived GSM Kc128 (in case of a UMTS authentication challenge) has.\nWhen the deletion of the ciphering key sequence number is described this also means that the associated GSM ciphering key, the UMTS ciphering key and the UMTS integrity key shall be considered as invalid and also the GSM Kc128 shall be deleted if any (i.e. the established GSM security context or the UMTS security context is no longer valid).\nIn A/Gb mode, the network may choose to start ciphering with the stored GSM ciphering key or GSM Kc128 (under the restrictions given in 3GPP TS 42.009 [5]) if the stored ciphering key sequence number and the one given from the mobile station are equal.\nNOTE 1:\tThe decision of starting ciphering with the GSM ciphering key or the GSM Kc128 depends on whether the network indicates in the CIPHERING MODE COMMAND message an A5 ciphering algorithm which requires a 64 or 128-bit ciphering key as specified in 3GPP TS 33.102 [5a].\nIn Iu mode, the network may choose to start ciphering and integrity with the stored UMTS ciphering key and UMTS integrity key (under the restrictions given in 3GPP TS 42.009 [5] and 3GPP TS 33.102 [5a]) if the stored ciphering key sequence number and the one given from the mobile station are equal.\nNOTE 2:\tIn some specifications the term KSI (Key Set Identifier) might be used instead of the term ciphering key sequence number.\nIf the authentication response (RES or SRES) is not valid, the network response depends upon the type of identity used by the mobile station in the first message, that is:\n-\tthe TMSI was used; or\n-\tthe IMSI was used.\nIf the TMSI has been used, the network may decide to initiate the identification procedure. If the IMSI given by the mobile station then differs from the one the network had associated with the TMSI, the authentication should be restarted with the correct parameters. If the IMSI provided by the MS is the expected one (i.e. authentication has really failed), the network should send an AUTHENTICATION REJECT message to the mobile station.\nIf the IMSI has been used, or the network decides not to try the identification procedure, an AUTHENTICATION REJECT message should be transferred to the mobile station.\nAfter having sent this message, all MM connections in progress (if any) are released and the network should initiate the RR connection release procedure described in subclause 3.5.of 3GPP TS 44.018 [84] (A/Gb mode only), 3GPP TS 25.331 [23c] (UTRAN Iu mode only), or in 3GPP TS 44.118 [111] (GERAN Iu mode only).\nUpon receipt of an AUTHENTICATION REJECT message,\na)\tif the message has been successfully integrity checked by the lower layers, the mobile station shall set the update status in the SIM/USIM to U3 ROAMING NOT ALLOWED, delete from the SIM/USIM the stored TMSI, LAI and ciphering key sequence number. The SIM/USIM shall be considered as invalid until switching off or the SIM/USIM is removed. If the MS maintains a counter for \"SIM/USIM considered invalid for non-GPRS services\", then the MS shall set this counter to MS implementation-specific maximum value. If the MS maintains a counter for \"SIM/USIM considered invalid for GPRS services\", then the MS shall set this counter to MS implementation-specific maximum value.\nb)\tif the message is received without integrity protection, then the MS shall start timer T3247 with a random value uniformly drawn from the range between 30 minutes and 60 minutes, if the timer is not running (see subclause 4.1.1.6A). Additionally, the MS shall:\n-\tif the MS maintains a counter for \"SIM/USIM considered invalid for non-GPRS services\" events and the counter has a value less than an MS implementation-specific maximum value, proceed as specified in subclause 4.1.1.6A, list item 1.a) for the case a LOCATION UPDATING REJECT message is received without integrity protection. Additionally, if the MS maintains a counter for \"SIM/USIM considered invalid for GPRS services\", then the MS shall increment this counter; and\n-\totherwise proceed as specified under list item a) above for the case that the message has been successfully checked by the lower layers.\nList item b) above is also applicable, if the message is received in A/Gb mode.\nIf the AUTHENTICATION REJECT message is received in the state IMSI DETACH INITIATED the mobile station shall follow subclause 4.3.4.3.\nIf the AUTHENTICATION REJECT message is received in any other state the mobile station shall abort any MM specific, MM connection establishment or call re-establishment procedure, stop any of the timers T3210, T3230, T3214 or T3216 (if they were running), release all MM connections (if any), start timer T3240 and enter the state WAIT FOR NETWORK COMMAND, expecting the release of the RR connection. If the RR connection is not released within a given time controlled by the timer T3240, the mobile station shall abort the RR connection. In both cases, either after a RR connection release triggered from the network side or after a RR connection abort requested by the MS-side, the MS enters state MM IDLE, substate NO IMSI.\nIn a UMTS authentication challenge, the authentication procedure is extended to allow the MS to check the authenticity of the core network. Thus allowing, for instance, detection of false base station.\nFollowing a UMTS authentication challenge, the MS may reject the core network, on the grounds of an incorrect AUTN parameter (see 3GPP TS 33.102 [5a]). This parameter contains two possible causes for authentication failure:\na)\tMAC code failure:\nIf the MS considers the MAC code (supplied by the core network in the AUTN parameter) to be invalid, it shall send an AUTHENTICATION FAILURE message to the network, with the reject cause 'MAC failure'. The MS shall then follow the procedure described in subclause 4.3.2.6 (c).\nb)\tSQN failure:\nIf the MS considers the SQN (supplied by the core network in the AUTN parameter) to be out of range, it shall send a AUTHENTICATION FAILURE message to the network, with the reject cause 'Synch failure' and a re-synchronization token AUTS provided by the USIM (see 3GPP TS 33.102 [5a]). The MS shall then follow the procedure described in subclause 4.3.2.6 (d).\nIn UMTS, an MS with a USIM inserted shall reject the authentication challenge if no Authentication Parameter AUTN IE was present in the AUTHENTICATION REQUEST message (i.e. a GSM authentication challenge has been received when the MS expects a UMTS authentication challenge). In such a case, the MS shall send the AUTHENTICATION FAILURE message to the network, with the reject cause \"GSM authentication unacceptable\". The MS shall then follow the procedure described in subclause 4.3.2.6 (c).\nIf the MS returns an AUTHENTICATION_FAILURE message to the network, the MS shall delete any previously stored RAND and RES and shall stop timer T3218, if running.\n(a)\tRR connection failure:\nUpon detection of a RR connection failure before the AUTHENTICATION RESPONSE message is received, the network shall release all MM connections (if any) and abort any ongoing MM specific procedure.\n(b)\tExpiry of timer T3260:\nThe authentication procedure is supervised on the network side by the timer T3260. At expiry of this timer the network may release the RR connection. In this case the network shall abort the authentication procedure and any ongoing MM specific procedure, release all MM connections if any, and initiate the RR connection release procedure described in subclause 3.5 of 3GPP TS 44.018 [84] (A/Gb mode only), 3GPP TS 25.331 [23c] (UTRAN Iu mode only), or in 3GPP TS 44.118 [111] (GERAN Iu mode only).\n(c) Authentication failure (reject cause \"MAC failure\" or \"GSM authentication unacceptable\"):\nThe MS shall send an AUTHENTICATION FAILURE message, with reject cause \"MAC failure\" or \"GSM authentication unacceptable\" according to subclause 4.3.2.5.1, to the network and start timer T3214. Furthermore, the MS shall stop any of the retransmission timers that are running (e.g. T3210, T3220 or T3230). Upon the first receipt of an AUTHENTICATION FAILURE message from the MS with reject cause \"MAC failure\" or \"GSM authentication unacceptable\", the network may initiate the identification procedure described in subclause 4.3.3. This is to allow the network to obtain the IMSI from the MS. The network may then check that the TMSI originally used in the authentication challenge corresponded to the correct IMSI. Upon receipt of the IDENTITY REQUEST message from the network, the MS shall send the IDENTITY RESPONSE message.\nNOTE:\tUpon receipt of an AUTHENTICATION FAILURE message from the MS with reject cause \"MAC failure\" or \"GSM authentication unacceptable\", the network may also terminate the authentication procedure (see subclause 4.3.2.5).\nIf the TMSI/IMSI mapping in the network was incorrect, the network should respond by sending a new AUTHENTICATION REQUEST message to the MS. Upon receiving the new AUTHENTICATION REQUEST message from the network, the MS shall stop the timer T3214, if running, and then process the challenge information as normal. If theTMSI/IMSI mapping in the network was correct, the network should terminate the authentication procedure by sending an AUTHENTICATION REJECT message.\nIf the network is validated successfully (an AUTHENTICATION REQUEST message that contains a valid SQN and MAC is received), the MS shall send the AUTHENTICATION RESPONSE message to the network and shall start any retransmission timers (e.g. T3210, T3220 or T3230), if they were running and stopped when the MS received the first failed AUTHENTICATION REQUEST message.\nIf the MS receives the second AUTHENTICATION REQUEST message while T3214 is running, and the MAC value cannot be resolved or the message contains a GSM authentication challenge, the MS shall follow the procedure specified in this subclause (c), starting again from the beginning. If the SQN is invalid, the MS shall proceed as specified in (d).\nIt can be assumed that the source of the authentication challenge is not genuine (authentication not accepted by the MS) if any of the following occur:\n-\tthe timer T3214 expires;\n-\tthe MS detects any combination of the authentication failures: \"MAC failure\", \"invalid SQN\", and \"GSM authentication unacceptable\", during three consecutive authentication challenges. The authentication challenges shall be considered as consecutive only, if the authentication challenges causing the second and third authentication failure are received by the MS, while the timer T3214 or T3216 started after the previous authentication failure is running.\nThe MS shall stop timer T3214, if the timer is running and the MS detects an RR connection failure or the network releases the RR connection.\nWhen it has been deemed by the MS that the source of the authentication challenge is not genuine (i.e. authentication not accepted by the MS), the MS shall behave as described in subclause 4.3.2.6.1.\n\nThe figure depicts the authentication failure procedure for GSM networks, specifically for the 3GPP TS 24.008 standard. It shows the steps taken to identify and resolve authentication failures, including the use of MAC failure and GSM authentication unacceptable causes. The figure is crucial for understanding the process of authentication in GSM networks and ensuring the reliability of communication.\nFigure 4.2/3GPP TS 24.008: Authentication Failure Procedure \n(reject cause \"MAC failure\" or \"GSM authentication unacceptable\")\n(d) Authentication failure (reject cause \"synch failure\"):\nThe MS shall send an AUTHENTICATION FAILURE message, with reject cause \"synch failure\", to the network and start the timer T3216. Furthermore, the MS shall stop any of the retransmission timers that are running (e.g. T3210, T3220 or T3230). Upon the first receipt of an AUTHENTICATION FAILURE message from the MS with the reject cause \"synch failure\", the network shall use the returned AUTS parameter from the authentication failure parameter IE in the AUTHENTICATION FAILURE message, to re-synchronise. The re-synchronisation procedure requires the VLR/MSC to delete all unused authentication vectors for that IMSI and obtain new vectors from the HLR. When re-synchronisation is complete, the network shall initiate the authentication procedure. Upon receipt of the AUTHENTICATION REQUEST message, the MS shall stop the timer T3216, if running.\nNOTE:\tUpon receipt of two consecutive AUTHENTICATION FAILURE messages from the MS with reject cause \"synch failure\", the network may terminate the authentication procedure by sending an AUTHENTICATION REJECT message.\nIf the network is validated successfully (a new AUTHENTICATION REQUEST message is received which contains a valid SQN and MAC) while T3216 is running, the MS shall send the AUTHENTICATION RESPONSE message to the network and shall start any retransmission timers (e.g. T3210, T3220 or T3230), if they were running and stopped when the MS received the first failed AUTHENTICATION REQUEST message.\nIf the MS receives the second AUTHENTICATION REQUEST message while T3216 is running, and the MAC value cannot be resolved or the message contains a GSM authentication challenge, the MS shall proceed as specified in (c); if the SQN is invalid, the MS shall follow the procedure specified in this subclause (d), starting again fom the beginning.\nThe MS shall deem that the network has failed the authentication check and behave as described in subclause 4.3.2.6.1, if any of the following occurs:\n-\tthe timer T3216 expires;\n-\tthe MS detects any combination of the authentication failures: \"MAC failure\", \"invalid SQN\", and \"GSM authentication unacceptable\", during three consecutive authentication challenges. The authentication challenges shall be considered as consecutive only, if the authentication challenges causing the second and third authentication failure are received by the MS, while the timer T3214 or T3216 started after the previous authentication failure is running.\nThe MS shall stop timer T3216, if the timer is running and the MS detects an RR connection failure or the network releases the RR connection.\nWhen it has been deemed by the MS that the source of the authentication challenge is not genuine (i.e. authentication not accepted by the MS), the MS shall behave as described in subclause 4.3.2.6.1.\nThe figure depicts a 3GPP TS 24.008 document, specifically Figure 4.2a, which outlines the authentication failure procedure for 3GPP TS 24.008. The document outlines the steps to be taken when a user attempts to authenticate with a device that is not responding. The figure includes a diagram of the authentication process, with arrows indicating the flow of information. The document also includes a legend to help users understand the different symbols and their meanings.\nFigure 4.2a/3GPP TS 24.008: Authentication Failure Procedure (reject cause \"Synch failure\")\nUpon receipt of an AUTHENTICATION REJECT message, the mobile station shall perform the actions as specified in subclause 4.3.2.5. If an MS has an MM connection for an emergency call established or is establishing an MM connection for an emergency call when timer T3214 or T3216 expires, the MS shall not deem that the network has failed the authentication check and not behave as described in subclause 4.3.2.6.1.\nIf the MS deems that the network has failed the authentication check, then it shall request RR or RRC to release the RR connection and the PS signalling connection, if any, and bar the active cell or cells (see 3GPP TS 25.331 [23c], 3GPP TS 25.304 [98] and 3GPP TS 44.018 [84]). The MS shall start any retransmission timers (e.g. T3210, T3220 or T3230), if they were running and stopped when the MS received the first AUTHENTICATION REQUEST message containing an invalid MAC or invalid SQN, or no AUTN when a UMTS authentication challenge was expected.\nAt inter-system change from Iu mode to A/Gb mode, ciphering may be started (see 3GPP TS 44.018 [84]) without any new authentication procedure. Deduction of the appropriate security key for ciphering in A/Gb mode, depends on the current GSM/UMTS security context stored in the MS and the network.\nThe ME shall handle the GSM ciphering key and a potential GSM Kc128 according to table 4.3.2.7.1.\nTable 4.3.2.7.1/3GPP TS 24.008: Inter-system change from Iu mode to A/Gb mode\n\nNOTE:\tA USIM with UMTS security context, passes the UMTS ciphering key, the UMTS integrity key and the derived GSM ciphering key to the ME independent on the current radio access being UTRAN or GERAN.\nIn A/Gb mode, in the case of an established GSM security context, the GSM ciphering key shall be loaded from the SIM/USIM and taken into use by the ME when any valid CIPHERING MODE COMMAND is received during an RR connection (the definition of a valid CIPHERING MODE COMMAND message is given in 3GPP TS 44.018 [84] subclause 3.4.7.2).\nIn A/Gb mode, in the case of an established UMTS security context, the GSM ciphering key shall be loaded from the USIM and taken into use by the MS when a valid CIPHERING MODE COMMAND is received during an RR connection (the definition of a valid CIPHERING MODE COMMAND message is given in 3GPP TS 44.018 [84] subclause 3.4.7.2) which indicates an A5 ciphering algorithm that requires a 64-bit ciphering key. The network shall derive a GSM ciphering key from the UMTS ciphering key and the UMTS integrity key by using the conversion function named \"c3\" defined in 3GPP TS 33.102 [5a].\nIn A/Gb mode, in the case of an established UMTS security context, the UMTS ciphering key and the UMTS integrity key shall be loaded from the USIM in order for the ME to derive the GSM Kc128 (see 3GPP TS 33.102 [5a]) and shall be taken into use by the ME when a valid CIPHERING MODE COMMAND is received during an RR connection (the definition of a valid CIPHERING MODE COMMAND message is given in 3GPP TS 44.018 [84] subclause 3.4.7.2) which indicates an A5 ciphering algorithm that requires a 128-bit ciphering key. The network shall derive a GSM Kc128 from the UMTS ciphering key and the UMTS integrity as defined in 3GPP TS 33.102 [5a].\nIn Iu mode, in the case of an established GSM security context, the ME shall derive a UMTS ciphering key and a UMTS integrity key from the GSM ciphering key by using the conversion functions named \"c4\" and \"c5\" defined in 3GPP TS 33.102 [5a]. The GSM ciphering key shall be loaded from the SIM/USIM and the derived UMTS ciphering key and UMTS integrity key shall be taken into use by the MS when a valid SECURITY MODE COMMAND indicating CS domain is received during an RR connection (the definition of a valid SECURITY MODE COMMAND message is given in 3GPP TS 25.331 [23c] and 3GPP TS 44.118 [111]). The network shall derive a UMTS ciphering key and a UMTS integrity key from the GSM ciphering key by using the conversion functions named \"c4\" and \"c5\" defined in 3GPP TS 33.102 [5a].\nIn Iu mode, in the case of an established UMTS security context, the UMTS ciphering key and UMTS integrity key shall be loaded from the USIM and taken into use by the MS when a valid SECURITY MODE COMMAND indicating CS domain is received during a RR connection (the definition of a valid SECURITY MODE COMMAND message is given in 3GPP TS 25.331 [23c] and 3GPP TS 44.118 [111]).\nIn Iu mode and A/Gb mode, if the MS received a valid SECURITY MODE COMMAND indicating CS domain in Iu mode or a valid CIPHERING MODE COMMAND in A/Gb mode before the network initiates a new Authentication procedure and establishes a new GSM/UMTS security context, the new keys are taken into use in the MS when a new valid SECURITY MODE COMMAND indicating CS domain in Iu mode, or a new valid CIPHERING MODE COMMAND in A/Gb mode, is received during the RR connection. In case of Iu mode to Iu mode handover, A/Gb mode to A/Gb mode handover, or inter-system change to A/Gb mode, the MS and the network shall continue to use the key from the old key set until a new valid SECURITY MODE COMMAND indicating CS domain in Iu mode, or a new valid CIPHERING MODE COMMAND in A/Gb mode, is received during the RR connection. In case of inter-system change to Iu mode, the MS and the network shall continue to use the keys from the old key set until the second valid SECURITY MODE COMMAND indicating CS domain is received during the RR connection.\nNOTE 1:\tIf the MS received a valid SECURITY MODE COMMAND indicating CS domain in Iu mode or a valid CIPHERING MODE COMMAND in A/Gb mode before the inter-system change to Iu mode occurs, the first SECURITY MODE COMMAND message after the inter-system change, which indicates CS domain and includes only an Integrity protection mode IE, is initiated by the UTRAN without receipt of a corresponding RANAP security mode control procedure from the MSC/VLR. The only purpose of this SECURITY MODE COMMAND message is to activate the integrity protection, but not to load a new key set from the SIM/USIM (see 3GPP TS 25.331 [23c] and 3GPP TS 44.118 [111]).\nNOTE 2:\tIf the MS did not receive any valid SECURITY MODE COMMAND indicating CS domain in Iu mode or any valid CIPHERING MODE COMMAND in A/Gb mode before the inter-system change to Iu mode occurs, the first SECURITY MODE COMMAND message after the inter-system change, which indicates CS domain, is initiated by the UTRAN on receipt of a RANAP security mode control procedure from the MSC/VLR. The purpose of this SECURITY MODE COMMAND message is to load a key set from the SIM/USIM and to activate either integrity protection or ciphering and integrity protection (see 3GPP TS 25.331 [23c] and 3GPP TS 44.118 [111]).\nAt inter-system change from A/Gb mode to Iu mode, ciphering and integrity may be started (see 3GPP TS 25.331 [23c]) without any new authentication procedure. Deduction of the appropriate security keys for ciphering and integrity check in Iu mode, depends on the current GSM/UMTS security context stored in the MS and the network.\nThe ME shall handle the UMTS ciphering key and the UMTS integrity key according to table 4.3.2.8.1.\nTable 4.3.2.8.1/3GPP TS 24.008: Inter-system change from A/Gb mode to Iu mode\n\nNOTE:\tA USIM with UMTS security context, passes the UMTS ciphering key, the UMTS integrity key and the derived GSM ciphering key to the ME independent on the current radio access being UTRAN or GERAN.\nNOTE:\tThe keys CKSRVCC and IKSRVCC apply for both SRVCC and vSRVCC.\nAt PS to CS domain change from S1 mode due to SRVCC or vSRVCC handover of a PDN connection for which the \"null integrity protection algorithm\" EIA0 has not been used (see 3GPP TS 23.216 [126]), when the MS receives the command to perform handover, the MS shall derive a UMTS security context for the CS domain from the current EPS security context.\nThe MS shall set the CKSN of the derived UMTS security context to the value of the eKSI of the EPS security context and derive security keys CKSRVCC and IKSRVCC as specified in 3GPP TS 33.401 [123]. The ME shall also derive the security key GSM ciphering key Kc from CKSRVCC and IKSRVCC using the conversion function c3 as specified in 3GPP TS 33.102 [5a]. The MS shall apply these derived security keys, handle the STARTCS value as specified in 3GPP TS 25.331 [23c] and replace an already established UMTS security context for the CS domain, if any, in the USIM, when the SRVCC or vSRVCC handover from S1 mode has been completed successfully.\nNOTE:\tBecause of deriving a new UMTS security context for the CS domain, a new GSM ciphering key needs also to be derived from the new derived UMTS security keys for the CS domain (i.e. CKSRVCC and IKSRVCC). Note that the new GSM ciphering key is also part of the new UMTS security context for the CS domain as well, as any old GSM ciphering key stored in the USIM and in the ME, belongs to an old UMTS security context for the CS domain and can no longer be used.\nThe network shall replace an already established UMTS security context for the CS domain, if any, when the SRVCC or vSRVCC handover from S1 mode has been completed successfully.\n\nIf the SRVCC or vSRVCC handover from S1mode has not been completed successfully, the MS and the network shall delete the new derived GSM or UMTS security context for the CS domain. Additionally, the network shall delete the already established GSM or UMTS security context for the CS domain, if the CKSN of the already established GSM or UMTS security context is equal to the CKSN of the new derived GSM or UMTS security context for the CS domain.\nAt PS to CS domain change from S1 mode due to SRVCC handover of a PDN connection for emergency bearer services for which the \"null integrity protection algorithm\" EIA0 has been used while in S1 mode, the MS and the network shall not perform key derivation.\nAt PS to CS domain change from Iu mode to Iu mode due to SRVCC handover of a PDN connection for which integrity protection has been activated, ciphering and integrity may be started (see 3GPP TS 25.331 [23c]) without any new authentication procedure. Deduction of the appropriate security keys for ciphering and integrity check in Iu mode, depends on the current GSM or UMTS security context for the PS domain stored in the MS and the network.\nThe ME shall handle the UMTS ciphering key and the UMTS integrity key according to table 4.3.2.11.1.\nTable 4.3.2.11.1/3GPP TS 24.008: SRVCC handover from Iu mode to Iu mode\n\nNOTE 1:\tFor the case of an established UMTS security context for the PS domain, because of deriving a new UMTS security context for the CS domain, a new GSM ciphering key needs to be derived from the new derived UMTS security keys (i.e. CK' and IK'). Note that the new GSM ciphering key is also part of the new UMTS security context for the CS domain, and therefore any old GSM ciphering key stored in the USIM and in the ME belongs to an old UMTS security context for the CS domain and can no longer be taken into use.\nThe network shall replace an already established GSM or UMTS security context for the CS domain, if any, when the SRVCC handover from Iu mode to Iu mode has been completed successfully.\nIf the SRVCC handover from Iu mode to Iu mode has not been completed successfully, the MS and the network shall delete the new derived GSM or UMTS security context for the CS domain. Additionally, the network shall delete the already established GSM or UMTS security context for the CS domain, if the CKSN of the already established GSM or UMTS security context is equal to the CKSN of the new derived GSM or UMTS security context for the CS domain.\nAt PS to CS domain change from Iu mode to Iu mode due to SRVCC handover of a PDN connection for emergency bearer services for which integrity protection has not been activated before the SRVCC handover, the MS and the network shall not perform key derivation.\nAt PS to CS domain change from Iu mode to A/Gb mode due to SRVCC handover of a PDN connection for which integrity protection has been activated, ciphering may be started (see 3GPP TS 44.018 [84]) without any new authentication procedure. Deduction of the appropriate security key for ciphering in A/Gb mode, depends on the current GSM or UMTS security context for the PS domain stored in the MS and the network.\nThe ME shall handle the GSM ciphering key according to table 4.3.2.12.1.\nTable 4.3.2.12.1/3GPP TS 24.008: SRVCC handover from Iu mode to A/Gb mode\n\nThe network shall replace an already established GSM or UMTS security context for the CS domain, if any, when the SRVCC handover from Iu mode to A/Gb mode has been completed successfully.\nIf the SRVCC handover from Iu mode to A/Gb mode has not been completed successfully, the MS and the network shall delete the new derived GSM or UMTS security context for the CS domain. Additionally, the network shall delete the already established GSM or UMTS security context for the CS domain, if the CKSN of the already established GSM or UMTS security context is equal to the CKSN of the new derived GSM or UMTS security context for the CS domain.\nAt PS to CS domain change from Iu mode to A/Gb mode due to SRVCC handover of a PDN connection for emergency bearer services for which integrity protection has not been activated while in Iu mode, the MS and the network shall not perform key derivation.\nAt change from A/Gb mode to Iu mode due to CS to PS SRVCC handover (see 3GPP TS 23.216 [126]), the MS shall derive a UMTS security context for the PS domain from the current GSM or UMTS security context for the CS domain.\nAt change from A/Gb mode to Iu mode due to CS to PS SRVCC handover, ciphering may be started and integrity protection shall be started (see 3GPP TS 25.331 [23c]) without any new authentication procedure. Derivation of the appropriate security keys for ciphering and integrity protection for the PS domain in Iu mode depends on the current GSM or UMTS security context for the CS domain stored in the MS and the network.\nThe ME shall handle the PS UMTS ciphering key and the PS UMTS integrity key according to table 4.3.2.13.1.\nTable 4.3.2.13.1/3GPP TS 24.008: CS to PS SRVCC handover from A/Gb mode to Iu mode\n\nThe network shall replace an already established GSM or UMTS security context for the PS domain, if any, when the CS to PS SRVCC handover from A/Gb mode to Iu mode has been completed successfully.\nIf the CS to PS SRVCC handover from A/Gb mode to Iu mode has not been completed successfully, the MS and the network shall delete the new derived GSM or UMTS security context for the PS domain. Additionally, the network shall delete the already established GSM or UMTS security context for the PS domain, if the GPRS CKSN of the already established GSM or UMTS security context is equal to the GPRS CKSN of the new derived GSM or UMTS security context for the PS domain.\nAt 5G-SRVCC from NG-RAN to UTRAN handover of a PDU session for which the \"null integrity protection algorithm\" 5G-IA0 has not been used (see 3GPP TS 23.216 [126]), when the MS receives the command to perform handover, the MS shall derive a new KASME_SRVCC from KAMF as specified in 3GPP TS 33.501 [170].\nThe MS shall set the CKSN of the derived UMTS security context to the value of the eKSI associated with the new KASME_SRVCC and derive security keys CKSRVCC and IKSRVCC from the new KASME_SRVCC as specified in 3GPP TS 33.401 [123]. The MS shall apply these derived security keys, handle the STARTCS value as specified in 3GPP TS 25.331 [23c] and replace an already established UMTS security context for the CS domain, if any, in the USIM, when the 5G-SRVCC handover from NG-RAN to UTRAN has been completed successfully.\nThe network shall replace an already established UMTS security context for the CS domain, if any, when the 5G-SRVCC handover from NG-RAN to UTRAN has been completed successfully.\nIf the 5G-SRVCC handover from NG-RAN to UTRAN has not been completed successfully, the MS and the network shall delete the new derived UMTS security context for the CS domain. Additionally, the network shall delete the already established UMTS security context for the CS domain, if the CKSN of the already established UMTS security context is equal to the CKSN of the new derived UMTS security context for the CS domain.\nAt the 5G-SRVCC from NG-RAN to UTRAN handover of an emergency PDU connection for which the \"null integrity protection algorithm\" 5G-IA0 has been used while in N1 mode, the MS and the network shall not perform key derivation.\n",
                            "figures_meta_data": [],
                            "tables": [
                                {
                                    "description": "Table 4.3.2.7.1/3GPP TS 24.008: Inter-system change from Iu mode to A/Gb mode",
                                    "table number": 2,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 4.3.2.8.1/3GPP TS 24.008: Inter-system change from A/Gb mode to Iu mode",
                                    "table number": 3,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 4.3.2.11.1/3GPP TS 24.008: SRVCC handover from Iu mode to Iu mode",
                                    "table number": 4,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 4.3.2.12.1/3GPP TS 24.008: SRVCC handover from Iu mode to A/Gb mode",
                                    "table number": 5,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 4.3.2.13.1/3GPP TS 24.008: CS to PS SRVCC handover from A/Gb mode to Iu mode",
                                    "table number": 6,
                                    "summary": "",
                                    "name": ""
                                }
                            ]
                        },
                        {
                            "title": "4.3.3\tIdentification procedure",
                            "text_content": "The identification procedure is used by the network to request a mobile station to provide specific identification parameters to the network e.g. International Mobile Subscriber Identity (IMSI), International Mobile Equipment Identity (IMEI). IMEI and IMSI definition and structure are specified in  3GPP TS 23.003 [10].\nThe network initiates the identification procedure by sending an IDENTITY REQUEST message to the mobile station and starting the timer T3270 (see figure 4.3). The IDENTITY REQUEST message specifies the requested identification parameters in the Identity type information element.\nThe mobile station shall be ready to respond to an IDENTITY REQUEST message at any time whilst a RR connection exists.\nUpon receipt of the IDENTITY REQUEST message the mobile station shall send an IDENTITY RESPONSE message. The IDENTITY RESPONSE message shall contain the identification parameters as requested by the network.\nUpon receipt of the IDENTITY REQUEST message with the Identity type IE indicating that P-TMSI, RAI and P-TMSI signature are being requested, an MS that supports S1 mode shall handle the IDENTITY RESPONSE message as follows:\n-\tIf the TIN indicates \"GUTI\" and the MS holds a valid GUTI allocated by an MME, the MS shall map the GUTI into a P-TMSI, P-TMSI signature and RAI as specified in 3GPP TS 23.003 [10]. The MS shall indicate the P-TMSI in the Mobile identity IE. In addition, the MS shall include the mapped RAI in the Routing area identification IE and the mapped P-TMSI signature in the P-TMSI signature IE. In addition, the MS shall include the P-TMSI type IE with P-TMSI type set to \"mapped P-TMSI\".\n-\tIf the TIN indicates \"P-TMSI\" or \"RAT-related TMSI\" and the MS holds a valid P-TMSI and RAI, the MS shall indicate the P-TMSI in the Mobile identity IE and shall indicate the RAI in the Routing area identification IE. In addition, the MS shall include the P-TMSI type IE with P-TMSI type set to \"native P-TMSI\". If the MS holds a valid P-TMSI signature, it shall include it in the P-TMSI signature IE.\nIf the MS does not support S1 mode, it shall handle the IDENTITY RESPONSE message as follows:\n-\tIf the MS holds a valid P-TMSI and RAI, the MS shall indicate the P-TMSI in the Mobile identity IE and shall indicate the RAI in the Routing area identification IE. In addition, the MS shall include the P-TMSI type IE with P-TMSI type set to \"native P-TMSI\". If the MS holds a valid P-TMSI signature, it shall include it in the P-TMSI signature IE.\nUpon receipt of the IDENTITY RESPONSE message, the network shall stop timer T3270.\nThe following abnormal case can be identified:\na)\tRequested identity is not available\nIf the MS cannot encode the requested identity in the IDENTITY RESPONSE message, e.g. because no valid SIM is available, then it shall encode the identity type as \"no identity\".\nThe following abnormal cases can be identified:\na)\tRR connection failure:\nUpon detection of a RR connection failure before the IDENTITY RESPONSE message is received, the network shall release all MM connections (if any) and abort any ongoing MM specific procedure.\nb)\tExpiry of timer T3270:\nThe identification procedure is supervised by the network by the timer T3270. At expiry of the timer T3270 the network may release the RR connection. In this case, the network shall abort the identification procedure and any ongoing MM specific procedure, release all MM connections if any, and initiate the RR connection release procedure as described in 3GPP TS 44.018 [84] subclause 3.5, 3GPP TS 25.331 [23c] (UTRAN Iu mode only), or in 3GPP TS 44.118 [111] (GERAN Iu mode only).\nThe figure depicts the identification sequence used in 3GPP TS 24.008, which is a crucial component of the 3GPP standard for mobile network signaling. The sequence is used to identify the network's physical layer, ensuring that the correct signaling is transmitted. The figure includes various symbols and notations, such as the 3GPP symbol, the 3GPP symbol, and the 3GPP symbol, which are used to represent different network layers and layers. The figure also includes a legend that explains the different symbols and their meanings, making it easier to understand the sequence. Overall, the figure provides a clear and concise representation of the identification sequence used in 3GPP TS 24.008.\nFigure 4.3/3GPP TS 24.008: Identification sequence\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "4.3.4\tIMSI detach procedure",
                            "text_content": "The IMSI detach procedure may be invoked by a mobile station if the mobile station is deactivated or if the Subscriber Identity Module (see 3GPP TS 42.017 [7] and 3GPP TS 31.102 [112]) is detached from the mobile station or as part of the eCall inactivity procedure defined in subclause 4.4.7.\nIn A/Gb mode and GERAN Iu mode, the network indicates whether the IMSI detach/attach procedures are required by using the ATT flag which is broadcast in the L3-RR SYSTEM INFORMATION TYPE 3 message on the BCCH (see 3GPP TS 44.018 [84] subclause 10.5.2.11). The mobile station shall use the value of the ATT flag that was broadcast when the mobile station was in the MM IDLE state.\nIn UTRAN Iu mode, the network indicates whether the IMSI detach/attach procedures are required by using the ATT flag which is included in the CS domain specific system information element (see subclause 10.5.1.12.2). The mobile station shall use the latest received value of the ATT flag.\nIf a RR connection exists and the ATT flag indicates that the IMSI detach/attach procedures are not required, the MM sublayer will release locally any ongoing MM connections before releasing the RR connection. If an MM specific procedure is active, the release of the RR connection may be delayed until the MM specific procedure is complete.\nThe IMSI detach procedure causes the mobile station to be indicated as inactive in the network.\nThe mobile station is allowed to initiate the IMSI detach procedure even if the timer T3246 is running.\nThe network proceeds with the IMSI detach procedure even if NAS level mobility management congestion control is active.\nThe IMSI detach procedure consists only of the IMSI DETACH INDICATION message sent from the mobile station to the network. The mobile station then starts timer T3220 and enters the MM sublayer state IMSI DETACH INITIATED.\nIf no RR connection exists, the MM sublayer within the mobile station will request the RR sublayer to establish a RR connection. If establishment of the RR connection is not possible because a suitable cell is not (or not yet) available then, the mobile station shall try for a period of at least 5 seconds and for not more than a period of 20 seconds to find a suitable cell. If a suitable cell is found during this time then, the mobile station shall request the RR sublayer to establish an RR connection, otherwise the IMSI detach is aborted. For:\n-\ta shared GERAN in A/Gb mode, if the MS is a GERAN network sharing supporting MS, the chosen PLMN identity shall be indicated to the GERAN in the IMSI DETACH INDICATION message using the Skip Indicator IE as specified in subclause 10.3.1 and;\n-\ta shared UTRAN, the chosen PLMN identity shall be indicated to the UTRAN in the RRC INITIAL DIRECT TRANSFER message (see 3GPP TS 25.331 [23c]).\nIf a RR connection exists, the MM sublayer will release locally any ongoing MM connections before the IMSI DETACH INDICATION message is sent.\nThe IMSI detach procedure may not be started if a MM specific procedure is active. If possible, the IMSI detach procedure is then delayed until the MM specific procedure is finished, else the IMSI detach is omitted.\nWhen receiving an IMSI DETACH INDICATION message, the network may set an inactive indication for the IMSI. No response is returned to the mobile station. After reception of the IMSI DETACH INDICATION message the network shall release locally any ongoing MM connections, and start the normal RR connection release procedure (see 3GPP TS 44.018 [84] subclause 3.5 (A/Gb mode only), 3GPP TS 25.331 [23c] (UTRAN Iu mode only), or in 3GPP TS 44.118 [111] (GERAN Iu mode only)).\nOnly applicable for a network supporting VGCS: If an IMSI DETACH INDICATION message is received from the talking mobile station in a group call while the network is in service state MM CONNECTION ACTIVE (GROUP TRANSMIT MODE), the network shall release locally the ongoing MM connection and then go to the service state GROUP CALL ACTIVE.\nTimer T3220 is stopped when the RR connection is released. The mobile station should, if possible, delay the local release of the channel to allow a normal release from the network side until T3220 timeout. If this is not possible (e.g. detach at power down) the RR sublayer on the mobile station side should be aborted.\nThe following abnormal cases can be identified:\na)\tLower layer failure\nIf the establishment of an RR connection is unsuccessful, or the RR connection is lost, the IMSI detach is aborted by the mobile station.\nb)\tAccess barred because of access class control or EAB\nThe signalling procedure for IMSI detach shall not be started. The MS starts the signalling procedure as soon as possible and if still necessary, i.e. when the barred state is removed or because of a cell change, or performs a local detach immediately or after an implementation dependent time.\nThe figure depicts a sequence of IMSI detach operations in 3GPP TS 24.008, illustrating the process of deactivating an IMSI (International Mobile Subscriber Identity) in a mobile network. The sequence is depicted in a flowchart format, with each step represented by a box and a corresponding action. The figure provides a clear visual representation of the steps involved in the IMSI detach process, allowing for easy understanding and comparison with other similar processes.\nFigure 4.4/3GPP TS 24.008: IMSI detach sequence\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "4.3.5\tAbort procedure",
                            "text_content": "The abort procedure may be invoked by the network to abort any on-going MM connection establishment or already established MM connection. The mobile station shall treat ABORT message as compatible with current protocol state only if it is received when at least one MM connection exists or an MM connection is being established.\nThe abort procedure consists only of the ABORT message sent from the network to the mobile station. Before the sending of the ABORT message the network shall locally release any ongoing MM connection. After the sending the network may start the normal RR connection release procedure.\nThe Cause information element indicates the reason for the abortion. The following cause values may apply:\n# 6:\tIllegal ME\n#17:\tNetwork failure\nAt the receipt of the ABORT message the mobile station shall abort any MM connection establishment or call re-establishment procedure and release all MM connections (if any). If cause value #6 is received the mobile station shall delete any TMSI, LAI and ciphering key sequence number stored in the SIM/USIM, set the update status to ROAMING NOT ALLOWED (and store it in the SIM/USIM according to subclause 4.1.2.2) and consider the SIM/USIM invalid until switch off or the SIM/USIM is removed. If the message has been successfully integrity checked by the lower layers and the MS maintains a counter for \"SIM/USIM considered invalid for non-GPRS services\", then the MS shall set this counter to MS implementation-specific maximum value. As a consequence the mobile station enters state MM IDLE, substate NO IMSI after the release of the RR connection.\nThe mobile station shall then wait for the network to release the RR connection - see subclause 4.5.3.1.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "4.3.6\tMM information procedure",
                            "text_content": "The MM information message support is optional in the network.\nThe MM information procedure may be invoked by the network at any time during an RR connection.\nThe MM information procedure consists only of the MM INFORMATION message sent from the network to the mobile station. During an RR connection, the network shall send none, one, or more MM INFORMATION messages to the mobile station. If more than one MM INFORMATION message is sent, the messages need not have the same content.\nNOTE:\tThe network may be able to select particular instants where it can send the MM INFORMATION message without adding delay to, or interrupting, any CM layer transaction, e.g. immediately after the AUTHENTICATION REQUEST message.\nWhen the mobile station (supporting the MM information message) receives an MM INFORMATION message, it shall accept the message and optionally use the contents to update appropriate information stored within the mobile station.\nIf the mobile station does not support the MM information message the mobile station shall ignore the contents of the message and return an MM STATUS message with cause #97.\n",
                            "figures_meta_data": [],
                            "tables": []
                        }
                    ]
                },
                {
                    "title": "4.4\tMM specific procedures",
                    "description": "",
                    "summary": "",
                    "text_content": "A MM specific procedure can only be started if no other MM specific procedure is running or no MM connection exists between the network and the mobile station. The end of the running MM specific procedure or the release of all MM connections have to be awaited before a new MM specific procedure can be started.\nDuring the lifetime of a MM specific procedure, if a MM connection establishment is requested by a CM entity, this request will either be rejected or be delayed until the running MM specific procedure is terminated (this depends on the implementation).\nAny MM common procedure (except IMSI detach) may be initiated during a MM specific procedure.\nUnless it has specific permission from the network (follow-on proceed) the mobile station side should await the release of the RR connection used for a MM specific procedure before a new MM specific procedure or MM connection establishment is started.\nNOTE:\tThe network side may use the same RR connection for MM connection management.\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": [
                        {
                            "title": "4.4.1\tLocation updating procedure",
                            "text_content": "The location updating procedure is a general procedure which is used for the following purposes:\n-\tnormal location updating (described in this subclause);\n-\tperiodic updating (see subclause 4.4.2); or\n-\tIMSI attach (see subclause 4.4.3).\nThe normal location updating procedure is used to update the registration of the actual Location Area of a mobile station in the network. The location updating type information element in the LOCATION UPDATING REQUEST message shall indicate normal location updating. The conditions under which the normal location updating procedure is used by a mobile station in the MM IDLE state are defined for each service state in subclause 4.2.2.\nOnly applicable for mobile stations supporting VGCS listening or VBS listening: A mobile station in RR group receive mode is in the MM IDLE state, substate RECEIVING GROUP CALL (NORMAL SERVICE) or RECEIVING GROUP CALL (LIMITED SERVICE). To perform a location updating, the MS in RR group receive mode shall leave the group receive mode, establish an independent dedicated RR connection to perform the location updating as described above and return to the RR group receive mode afterwards.\nThe MS shall also start the normal location updating procedure:\na)\tif the network indicates that the mobile station is unknown in the VLR as a response to MM connection establishment request;\nb)\tvoid\nc)\twhen the MS, configured to use CS fallback and SMS over SGs, or SMS over SGs only, enters a GERAN or UTRAN cell in network operation mode II and timer T3423 has expired or is in the GERAN or UTRAN cell in network operation mode II when timer T3423 expires;\nNOTE 1:\tTimer T3423 is specified in 3GPP TS 24.301 [120].\nd)\twhen the MS, configured to use CS fallback and SMS over SGs, or SMS over SGs only, enters a GERAN or UTRAN cell after intersystem change from S1 mode to Iu or A/Gb mode, if timer T3346 is running, and the location area of the current cell is the same as the stored location area;\nNOTE 2:\tIf inter-system change is due to a mobile originating CS call, the location updating procedure can be performed after the RR connection is released unless the MS moves back to E-UTRAN.\ne)\twhen the MS is both IMSI attached for GPRS and non-GPRS services and enters a new routing area where the network operates in network operation mode I and timer T3346 is running.\nf)\twhen the network is operating in network operation mode I, timer T3346 is running, timer T3246 is not running, and due to manual CSG selection the MS has selected a CSG cell whose CSG identity and associated PLMN identity are not included in the Allowed CSG list or in the Operator CSG list of the MS;\ng)\twhen due to a manual CSG selection the MS has selected a CSG cell whose CSG identity and associated PLMN identity are not included in the MS's Allowed CSG list or in the MS's Operator CSG list;\nh)\twhen the network is operating in network operation mode I, T3346 is running, update status is not U1 UPDATED and the user manually selects the current PLMN; or\ni)\twhen the MS is configured to use CS fallback and SMS over SGs, or SMS over SGs only, and the TIN indicates \"GUTI\", enters a GERAN or UTRAN cell after intersystem change from S1 mode to Iu or A/Gb mode in NMO II and timer T3412 is not running.\nIf the MS, configured to use CS fallback and SMS over SGs, enters a GERAN or UTRAN cell, after intersystem change from S1 mode to Iu or A/Gb mode due to CS fallback, and the location area of the current cell is not available, the MS may initiate the location updating procedure.\nWhen the MS supporting N1 mode in MS operation modes A or B moves from NG-RAN coverage to GERAN coverage, or from NG-RAN coverage to UTRAN coverage, and the network operates in network operation mode II, the MS may intiate the normal location updating procedure.\nTo limit the number of consecutive unsuccessful location updating attempts made, an attempt counter is used. The detailed handling of the attempt counter is described in subclauses 4.4.4.5 to 4.4.4.9.\nThe mobile equipment shall contain a list of \"forbidden location areas for roaming\", as well as a list of \"forbidden location areas for regional provision of service\". These lists shall be erased when the MS is switched off or when the SIM/USIM is removed, and periodically (with period in the range 12 to 24 hours). When the lists are erased, the MS performs a cell selection according to 3GPP TS 43.022 [82] and 3GPP TS 25.304 [98]. The location area identification received on the BCCH that triggered the location updating request shall be added to the suitable list whenever a LOCATION AREA UPDATING REJECT message is received with the cause \"Roaming not allowed in this location area\", \"Location Area not allowed\", or \"No suitable cells in Location Area\". The lists shall accommodate each 10 or more location area identifications. When the list is full and a new entry has to be inserted, the oldest entry shall be deleted.\nIn a shared network, the MS shall choose one of the PLMN identities as specified in 3GPP TS 23.122 [14]. The MS shall construct the Location Area Identification of the cell from this chosen PLMN identity and the LAC received on the BCCH. If the constructed LAI is different from the stored LAI, the MS shall initiate the location updating procedure. For:\n-\ta shared GERAN, in A/Gb mode, the chosen PLMN identity shall be indicated to the GERAN in the LOCATION UPDATING REQUEST message using the Skip Indicator IE as specified in subclause 10.3.1.\n-\ta shared UTRAN, the chosen PLMN identity shall be indicated to the UTRAN in the RRC INITIAL DIRECT TRANSFER message (see 3GPP TS 25.331 [23c]).\nFor GERAN Iu mode, network sharing is not supported.\nWhenever a LOCATION UPDATING REJECT message with the cause \"PLMN not allowed\" is received by the MS, the PLMN identity used to construct the LAI which triggered the location updating procedure shall be stored in the \"forbidden PLMN list\" and if the MS is configured to use timer T3245 (see 3GPP TS 24.368 [135] or 3GPP TS 31.102 [112]) then the MS shall start timer T3245 and proceed as described in subclause 4.1.1.6. Whenever a LOCATION UPDATING REJECT message is received by the MS with the cause \"Roaming not allowed in this location area\", \"Location Area not allowed\", or \"No suitable cells in Location Area\", the constructed LAI which triggered the location updating procedure shall be stored in the suitable list.\nThe cell selection processes in the different states are described in 3GPP TS 43.022 [82] and 3GPP TS 45.008 [34].\nThe location updating procedure is always initiated by the mobile station.\nIn the case that the mobile station is initiating an emergency call but, due to cell re-selection or redirection by the network, it moves to a different LAI then the mobile station may delay the location updating procedure in the new LA until after the emergency call is completed.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "4.4.2\tPeriodic updating",
                            "text_content": "Periodic updating may be used to notify periodically the availability of the mobile station to the network. Periodic updating is performed by using the location updating procedure. The location updating type information element in the LOCATION UPDATING REQUEST message shall indicate periodic updating.\nThe procedure is controlled by the timer T3212 in the mobile station. The MS indicates in the MS network feature support IE whether it supports the extended value for timer T3212. If the MS receives the Per MS T3212 IE in the LOCATION UPDATING ACCEPT message, the MS shall use this IE to determine the value of T3212 instead of the value of T3212 that is broadcast. If the MS does not receive the Per MS T3212 IE in the LOCATION UPDATING ACCEPT message, the MS shall use the value of T3212 that is broadcast . If the timer is not already started, the timer is started each time the mobile station enters the MM IDLE substate NORMAL SERVICE or ATTEMPTing TO UPDATE. When the MS leaves the MM Idle State the timer T3212 shall continue running until explicitly stopped.\nThe timer is stopped (shall be set to its initial value for the next start) when:\n-\ta LOCATION UPDATING ACCEPT or LOCATION UPDATING REJECT message is received;\n-\tan AUTHENTICATION REJECT message is received;\n-\tthe first MM message is received, or security mode setting is completed in the case of MM connection establishment, except when the most recent service state is LIMITED SERVICE;\n-\tthe mobile station has responded to paging and thereafter has received the first correct layer 3 message except RR message;\n-\tthe mobile station is deactivated (i.e. equipment powered down or SIM/USIM removed).\nWhen the timer T3212 expires, the location updating procedure is started and the timer shall be set to its initial value for the next start. If the mobile station is in other state than MM Idle when the timer expires the location updating procedure is delayed until the MM Idle State is entered.\nThe conditions under which the periodic location updating procedure is used by a mobile station in the MM IDLE state are defined for each service state in subclause 4.2.2.\nIf the mobile station is in service state NO CELL AVAILABLE, LIMITED SERVICE, PLMN SEARCH or PLMN SEARCH-NORMAL SERVICE when the timer expires the location updating procedure is delayed until this service state is left.\nIn A/Gb mode and GERAN Iu mode, the (periodic) location updating procedure is not started if the BCCH information at the time the procedure is triggered indicates that periodic location shall not be used. The timeout value is broadcasted in the L3-RR SYSTEM INFORMATION TYPE 3 message on the BCCH, in the Control channel description IE, see 3GPP TS 44.018 [84] subclause 10.5.2.11.\nIn UTRAN Iu mode, the (periodic) location updating procedure is not started if the information on BCCH or in the last received dedicated system information at the time the procedure is triggered indicates that periodic location shall not be used. The timeout value is included in the CS domain specific system information element.\nThe T3212 timeout value shall not be changed in the NO CELL AVAILABLE, LIMITED SERVICE, PLMN SEARCH and PLMN SEARCH-NORMAL SERVICE states.\nIf the MS, configured to use CS fallback and SMS over SGs, or SMS over SGs only, enters a GERAN or UTRAN cell after intersystem change from S1 mode to Iu or A/Gb mode in NMO II, the TIN indicates \"GUTI\", and the location area of the current cell is the same as the stored location area, the MS shall start timer T3212, with a value set to the shorter of the values of the remaining value of timer T3412, and the broadcast T3212 timeout value.\nWhen the MS supporting N1 mode in MS operation modes A or B moves from NG-RAN coverage to GERAN coverage, or from NG-RAN coverage to UTRAN coverage, the network operates in network operation mode II, the location area of the current cell is the same as the stored location area, the broadcast value of T3212 does not indicate \"deactivated\" and the T3212 has expired, the MS may intiate the periodic location updating procedure.\nWhen a change of the broadcast T3212 timeout value has to be taken into account and the timer is running (at change of the serving cell or, change of the broadcast value of T3212), the MS shall behave as follows: let t1 be the new T3212 timeout value and let t be the current timer value at the moment of the change to the new T3212 timeout value; then the timer shall be restarted with the value t modulo t1.\nWhen the mobile station is activated, or when a change of the broadcast T3212 timeout value has to be taken into account and the timer is not running, the mobile station shall behave as follows: let t1 be the new T3212 timeout value, the new timer shall be started at a value randomly, uniformly drawn between 0 and t1.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "4.4.3\tIMSI attach procedure",
                            "text_content": "The IMSI attach procedure is the complement of the IMSI detach procedure (see subclause 4.3.4). It is used to indicate the IMSI as active in the network.\nIn A/Gb mode and GERAN Iu mode, the network indicates whether the IMSI attach/detach procedures are required by using the ATT flag  which is broadcast in the L3-RR SYSTEM INFORMATION TYPE 3 message (see 3GPP TS 44.018 [84] subclause 10.5.2.11).\nIn UTRAN Iu mode, the network indicates whether the IMSI attach/detach procedures are required by using the ATT flag  which is included in the CS domain specific system information element (see subclause 10.5.1.12.2).\nThe IMSI attach procedure is invoked if the ATT flag indicates that the IMSI detach/attach procedures are required and an IMSI is activated in a mobile station (i.e. activation of a mobile station with plug-in SIM/USIM, insertion of a card in a card-operated mobile station etc.) within coverage area from the network or a mobile station with an IMSI activated outside the coverage area enters the coverage area. The IMSI attach procedure is used only if the update status is U1 UPDATED and if the stored location area identification is the same as the one which is actually broadcasted on the BCCH of the current serving cell.\nIn a shared network, the MS shall choose one of the PLMN identities as specified in 3GPP TS 23.122 [14]. The MS shall use the IMSI attach procedure only if the update status is U1 UPDATED and the stored location area identification is equal to the combination of the chosen PLMN identity and the LAC received on the BCCH. Otherwise a normal location updating procedure (see subclause 4.4.1) is invoked independently of the ATT flag indication.\nThe IMSI attach procedure is performed by using the location updating procedure (see subclause 4.4.1). The location updating type information element in the LOCATION UPDATING REQUEST message shall in this case indicate IMSI attach.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "4.4.4\tGeneric Location Updating procedure",
                            "text_content": "Any timer used for triggering the location updating procedure (e.g. T3211, T3212) is stopped if running.\nAs no RR connection exists at the time when the location updating procedure has to be started, the MM sublayer within the mobile station will request the RR sublayer to establish a RR connection and enter state WAIT FOR RR CONNECTION (LOCATION UPDATE). The procedure for establishing an RR connection is described in 3GPP TS 44.018 [84] subclause 3.3 and 3GPP TS 25.331 [23c].\nThe mobile station initiates the location updating procedure by sending a LOCATION UPDATING REQUEST message to the network, starts the timer T3210 and enters state LOCATION UPDATING INITIATED. The location updating type information element shall indicate what kind of updating is requested.\nIf the MS is configured for \"AttachWithIMSI\" as specified in 3GPP TS 24.368 [135] or 3GPP TS 31.102 [112] and the selected PLMN is neither the registered PLMN nor in the list of equivalent PLMNs, the MS shall include the IMSI in the Mobile identity IE in the LOCATION UPDATING REQUEST message.\nIf the mobile station is configured to use CS fallback and SMS over SGs, or SMS over SGs only, and TIN indicates \"RAT-related TMSI\" the mobile station shall set the TIN to \"P-TMSI\" unless the mobile station had already received the EMM cause #18 during a combined attach procedure (see subclause 5.5.1.3.4.3 of 3GPP TS 24.301 [120]) or a combined tracking area updating procedure (see subclause 5.5.3.3.4.3 of 3GPP TS 24.301 [120]) on the same PLMN, but not disabled the E-UTRAN capability.\nIn A/Gb mode, the network may initiate the classmark interrogation procedure, for example, to obtain further information on the mobile station's encryption capabilities.\nThe network may initiate the identification procedure, e.g. if the network is unable to get the IMSI based on the TMSI and LAI used as identification by the mobile station (see subclause 4.3.3).\nThe authentication procedure (see subclause 4.3.2) may be initiated by the network upon receipt of the LOCATION UPDATING REQUEST message from the mobile station. (See the cases defined in 3GPP TS 42.009 [5]).\nIn A/Gb mode, the security mode setting procedure (see 3GPP TS 44.018 [84] subclause 3.4.7) may be initiated by the network, e.g., if a new TMSI has to be allocated.\nIn Iu mode, the security mode control procedure (see 3GPP TS 25.331 [23c] and 3GPP TS 44.118 [111]) may be initiated by the network, e.g., if a new TMSI has to be allocated.\nTo limit the number of consecutive unsuccessful location updating attempts, an location update attempt counter is used. The location update attempt counter counts the number of consecutive unsuccessful location updating attempts.\nThe location update attempt counter shall be incremented as specified in subclause 4.4.4.9.\nThe location update attempt counter shall be reset when:\n-\tthe mobile station is powered on;\n-\ta SIM/USIM is inserted;\n-\ta location updating procedure is successfully completed;\n-\ta location updating procedure is rejected with cause:\na)\t#11, #12, #13, #15 or #25 (see subclause 4.4.4.7);\nb)\t#22 and T3346 value IE indicating neither zero nor deactivated (see subclause 4.4.4.7);\n-\ta normal or periodic routing area updating procedure or combined routing updating is not accepted by the network with cause #11, #12, #13, #15 or #25 (see subclause 4.7.5.1.4 and 4.7.5.2.4);\n-\tGPRS attach or combined GPRS attach procedure is not accepted by the network with cause #11, #12, #13, or #15 (see subclause 4.7.3.1.4 and 4.7.3.2.4);\n-\tservice request procedure is not accepted by the network with cause #12, #13, or #15 (see subclause 4.7.13.4);\n-\tnetwork initiated GPRS detach procedure is completed with cause  #12, #13, or #15 (see subclause 4.7.4.2.2);\n-\tcombined GPRS attach or combined routing area updating procedure is successful for GPRS and non-GPRS services; or\n-\ta new PLMN is selected.\nand additionally when the mobile station is in the state MM IDLE sub-state ATTEMPTING to UPDATE:\n-\ta new location area is entered;\n-\texpiry of timer T3212;\n-\ta location updating procedure is triggered upon entering MM IDLE after the release of the last MM connection, as defined in subclause 4.5.3.1;\n-\ta location updating procedure is triggered by CM sublayer requests; or\n-\ttimer T3246 is started.\nThe location update attempt counter shall be used when deciding whether to re-attempt a location updating procedure after expiry of timer T3211 as specified in subclause 4.4.4.9.\nIf the location updating is accepted by the network a LOCATION UPDATING ACCEPT message is transferred to the mobile station.\nIn case the identity confidentiality service is active (see subclauses 4.3.1 and 4.4.4.4), the TMSI reallocation may be part of the location updating procedure. The TMSI allocated is then contained in the LOCATION UPDATING ACCEPT message together with the location area identifier LAI. The network shall in this case start the supervision timer T3250 as described in subclause 4.3.1.\nIn a shared network, if the MS is a network sharing supporting MS, the network shall indicate in the LAI the PLMN identity of the CN operator that has accepted the location updating; if the MS is a network sharing non-supporting MS, the network shall indicate the PLMN identity of the common PLMN (see 3GPP TS 23.251 [109]).\nIn a multi-operator core network (MOCN) with common GERAN, the network shall indicate in the LAI the common PLMN identity (see 3GPP TS 23.251 [109]).\nIf the network wishes to prolong the RR connection to allow the mobile station to initiate MM connection establishment (for example if the mobile station has indicated in the LOCATION UPDATING REQUEST that it has a follow-on request pending) the network shall send \"follow on proceed\" in the LOCATION UPDATING ACCEPT and start timer T3255.\nIf the mobile station has indicated \"CS fallback mobile terminating call\" in the LOCATION UPDATING REQUEST message, the network shall maintain the RR connection for an implementation dependent duration to allow for mobile terminating call establishment. If the mobile station has also indicated in the LOCATION UPDATING REQUEST message that it has a follow-on request pending, it is implementation dependent whether the network proceeds with the mobile terminating call establishment or allows for a mobile initiated MM connection establishment.\nThe mobile station receiving a LOCATION UPDATING ACCEPT message shall store the received location area identification LAI, stop timer T3210, reset the location update attempt counter and set the update status in the SIM/USIM to UPDATED. If the message contains an IMSI, the mobile station is not allocated any TMSI, and shall delete any TMSI in the SIM/USIM accordingly. If the message contains a TMSI, the mobile station is allocated this TMSI, and shall store this TMSI in the SIM/USIM and a TMSI REALLOCATION COMPLETE shall be returned to the network. If neither IMSI nor TMSI is received in the LOCATION UPDATING ACCEPT message, the old TMSI if any available shall be kept.\nIf the MS has initiated the location updating procedure due to manual CSG selection and receives a LOCATION UPDATING ACCEPT message, and the MS sent the LOCATION UPDATING REQUEST message in a CSG cell, the MS shall check if the CSG ID and associated PLMN identity of the cell are contained in the Allowed CSG list. If not, the MS shall add that CSG ID and associated PLMN identity to the Allowed CSG list and the MS may add the HNB Name (if provided by lower layers) to the Allowed CSG list if the HNB Name is present in neither the Operator CSG list nor the Allowed CSG list.\nIf the LAI or PLMN identity contained in the LOCATION UPDATING ACCEPT message is a member of the list of \"forbidden location areas for regional provision of service\", the list of \"forbidden location areas for roaming\" or the \"forbidden PLMN list\" then such entries shall be deleted.\nIf the MS receives the LOCATION UPDATING ACCEPT message from a PLMN for which a PLMN-specific attempt counter is maintained (see subclause 4.1.1.6A), then the MS shall reset this counter. If the MS maintains a counter for \"SIM/USIM considered invalid for non-GPRS services\", then the MS shall reset this counter.\nThe network may also send a list of \"equivalent PLMNs\" in the LOCATION UPDATING ACCEPT message. Each entry of the list contains a PLMN code (MCC+MNC). If the location updating procedure is initiated during a CS fallback procedure and the network is configured to support the return to the last registered E-UTRAN PLMN after CS fallback as specified in 3GPP TS 23.272 [133], and the PLMN identity which is provided as part of the RAI contained in the ROUTING AREA UPDATE ACCEPT message differs from the last registered E-UTRAN PLMN identity, the network shall include the last registered E-UTRAN PLMN identity in the list of \"equivalent PLMNs\" in the LOCATION UPDATING ACCEPT message.\nNOTE 1:\tThe network can determine a location updating procedure is initiated during a CS fallback procedure as specified in 3GPP TS 23.272 [133].\nNOTE 2:\tThe last registered E-UTRAN PLMN identity can be derived by the network as specified in 3GPP TS 23.272 [133].\nThe mobile station shall store the list, as provided by the network, except that any PLMN code that is already in the \"forbidden PLMN list\" shall be removed from the \"equivalent PLMNs\" list before it is stored by the mobile station. If the mobile station is supporting S1 mode, it shall also remove any PLMN code that is already in the list of \"forbidden PLMNs for GPRS service\" before storing the list. In addition the mobile station shall add to the stored list the PLMN code of the registered PLMN that sent the list. All PLMNs in the stored list shall be regarded as equivalent to each other for PLMN selection, cell selection/re-selection and handover. The stored list in the mobile station shall be replaced on each occurrence of the LOCATION UPDATING ACCEPT message. If no list is contained in the message, then the stored list in the mobile station shall be deleted. The list shall be stored in the mobile station while switched off so that it can be used for PLMN selection after switch on.\nAfter that, the mobile station shall act according to the presence of the \"Follow-on proceed\" information element in the LOCATION UPDATING ACCEPT; if this element is present and the mobile station has a CM application request pending, it shall send a CM SERVICE REQUEST to the network and proceed as in subclause 4.5.1.1. Otherwise, it shall start timer T3240 and enter state WAIT FOR NETWORK COMMAND.\nFurthermore, the network may grant authorisation for the mobile station to use GSM-Cordless Telephony System (CTS) in the Location Area and its immediate neighbourhood. The mobile should memorise this permission in non-volatile memory. If the \"CTS permission\" IE is not present in the message, the mobile is not authorised to use GSM-CTS, and shall accordingly delete any memorised permission.\nNOTE 3:\tThe interaction between CTS and GPRS procedures are not yet defined.\nThe network may also send a Local Emergency Numbers List with local emergency numbers in the LOCATION UPDATING ACCEPT, by including the Emergency Number List IE. The mobile equipment shall store the Local Emergency Numbers List, as provided by the network. The Local Emergency Numbers List stored in the mobile equipment shall be replaced on each receipt of the Emergency Number List IE. The received Local Emergency Numbers List shall be provided to the upper layers.\nThe emergency number(s) received in the Emergency Number List IE are valid only in networks in the same country as the cell on which this IE is received. If no list is contained in the LOCATION UPDATING ACCEPT message, then the stored Local Emergency Numbers List in the mobile equipment shall be kept, except if the mobile equipment has successfully registered to a PLMN in a country different from that of the PLMN that sent the Local Emergency Numbers List.\nThe mobile equipment shall use the stored Local Emergency Numbers Lt of emergency numbers received from the network in addition to the emergency numbers stored on the SIM/USIM or ME to detect that the number dialled is an emergency number.\nNOTE 4:\tThe mobile equipment may use the Local Emergency Numbers List to assist the end user in determining whether the dialled number is intended for an emergency service or for another destination, e.g. a local directory service. The possible interactions with the end user are implementation specific.\nNOTE 5:\tAn MS that supports procedures specified in 3GPP TS 24.302 [156], can get additional local emergency numbers through those procedures, which can be used based on operator policy (see 3GPP TS 24.302 [156]) to detect that the number dialled is an emergency number.\nThe Local Emergency Numbers List shall be deleted at switch off and removal of the SIM/USIM. The mobile equipment shall be able to store up to ten local emergency numbers received from the network.\nIf the location updating cannot be accepted, the network sends a LOCATION UPDATING REJECT message to the mobile station. The mobile station receiving a LOCATION UPDATING REJECT message containing a reject cause other than MM cause value #25 or the message is integrity protected, shall stop the timer T3210, store the reject cause, start the timer T3240, enter state LOCATION UPDATING REJECTED, await the release of the RR connection triggered by the network, and for all causes except #12, #15, #22 and #25 deletes the list of \"equivalent PLMNs\".\nIf the LOCATION UPDATING REJECT message containing the MM cause value #25 was received without integrity protection, then the MS shall discard the message.\nIf the location updating is rejected due to general NAS level mobility management congestion control, the network shall set the MM cause value to #22 \"congestion\" and assign a back-off timer T3246 (see 3GPP TS 23.012 [140]).\nUpon the release of the RR connection, the mobile station shall take the following actions depending on the stored reject cause:\n# 2:\t(IMSI unknown in HLR);\n# 3:\t(Illegal MS); or\n# 6:\t(Illegal ME).\nThe mobile station shall set the update status to ROAMING NOT ALLOWED (and store it in the SIM/USIM according to subclause 4.1.2.2), and delete any TMSI, stored LAI and ciphering key sequence number and shall consider the SIM/USIM as invalid for non-GPRS services until switch-off or the SIM/USIM is removed or the timer T3245 expires as described in subclause 4.1.1.6. If the message has been successfully integrity checked by the lower layers and the MS maintains a counter for \"SIM/USIM considered invalid for non-GPRS services\", then the MS shall set this counter to MS implementation-specific maximum value.\n# 11:\t(PLMN not allowed);\nThe mobile station shall delete any LAI, TMSI and ciphering key sequence number stored in the SIM/USIM, reset the location update attempt counter, and set the update status to ROAMING NOT ALLOWED (and store it in the SIM/USIM according to subclause 4.1.2.2). The mobile station shall store the PLMN identity in the \"forbidden PLMN list\" and if the MS is configured to use timer T3245 (see 3GPP TS 24.368 [135] or 3GPP TS 31.102 [112]) then the MS shall start timer T3245 and proceed as described in subclause 4.1.1.6. If the message has been successfully integrity checked by the lower layers and the MS maintains a PLMN-specific attempt counter for that PLMN, then the MS shall set this counter to the MS implementation-specific maximum value.\nThe MS shall perform a PLMN selection when back to the MM IDLE state according to 3GPP TS 23.122 [14].\nAn MS in GAN mode shall request a PLMN list in GAN (see 3GPP TS 44.318 [76b]) prior to performing a PLMN selection from this list according to 3GPP TS 23.122 [14].\n# 12:\t(Location Area not allowed);\nThe mobile station shall delete any LAI, TMSI and ciphering key sequence number stored in the SIM/USIM, reset the location update attempt counter, and set the update status to ROAMING NOT ALLOWED (and store it in the SIM/USIM according to subclause 4.1.2.2).\nThe mobile station shall store the LAI in the list of \"forbidden location areas for regional provision of service\".\nThe MS shall perform a cell selection when back to the MM IDLE state according to 3GPP TS 43.022 [82] and 3GPP TS 25.304 [98].\nNOTE 1:\tThe cell selection procedure is not applicable for an MS in GAN mode.\n# 13:\t(Roaming not allowed in this location area).\nThe mobile station shall reset the location update attempt counter, and set the update status to ROAMING NOT ALLOWED (and store it in the SIM/USIM according to subclause 4.1.2.2).\nThe mobile station shall store the LAI in the list of \"forbidden location areas for roaming\".\nThe mobile station shall perform a PLMN selection instead of a cell selection when back to the MM IDLE state according to 3GPP TS 23.122 [14].\nAn MS in GAN mode shall request a PLMN list in GAN (see 3GPP TS 44.318 [76b]) prior to performing a PLMN selection from this list according to 3GPP TS 23.122 [14].\n# 15:\t(No Suitable Cells In Location Area).\nThe mobile station shall reset the location update attempt counter, set the update status to ROAMING NOT ALLOWED (and store it in the SIM/USIM according to subclause 4.1.2.2).\nThe mobile station shall store the LAI in the list of \"forbidden location areas for roaming\".\nThe mobile station shall search for a suitable cell in another location area or a tracking area according to 3GPP TS 43.022 [82] and 3GPP TS 25.304 [98] or 3GPP TS 36.304 [121].\nNOTE 2:\tThe cell selection procedure is not applicable for an MS in GAN mode.\n# 22:\t(Congestion).\nIf the T3246 value IE is present in the LOCATION UPDATING REJECT message and the value indicates that this timer is neither zero nor deactivated, the mobile station shall proceed as described below, otherwise it shall be considered as an abnormal case and the behaviour of the MS for this case is specified in subclause 4.4.4.9.\nThe mobile station shall abort the location updating procedure, reset the location update attempt counter, set the MM update status to U2 NOT UPDATED and change to state MM IDLE sub-state ATTEMPTING TO UPDATE.\nThe MS shall stop timer T3246 if it is running.\nIf the LOCATION UPDATING REJECT message is integrity protected, the mobile station shall start timer T3246 with the value provided in the T3246 value IE.\nIf the LOCATION UPDATING REJECT message is not integrity protected, the mobile station shall start timer T3246 with a random value from the default range specified in table 11.1.\nThe mobile station stays in the current serving cell and applies the normal cell reselection process. The MM connection establishment is started, if still necessary, when timer T3246 expires or is stopped.\n# 25:\t(Not authorized for this CSG ).\nCause #25 is only applicable in UTRAN Iu mode and when received from a CSG cell. Other cases are considered as abnormal cases and the specification of the mobile station behaviour is given in subclause 4.4.4.9.\nThe MS shall reset the location update attempt counter, and set the update status to ROAMING NOT ALLOWED (and store it in the SIM/USIM according to subclause 4.1.2.2).\nIf the CSG ID and associated PLMN identity of the cell where the MS has sent the LOCATION UPDATING REQUEST message are contained in the Allowed CSG list stored in the MS, the MS shall remove the entry corresponding to this CSG ID and associated PLMN identity from the Allowed CSG list.\nIf the CSG ID and associated PLMN identity of the cell where the MS has sent the LOCATION UPDATING REQUEST message are contained in the Operator CSG list, the MS shall proceed as specified in 3GPP TS 23.122 [14] subclause 3.1A.\nThe MS shall search for a suitable cell according to 3GPP TS 43.022 [82] and 3GPP TS 25.304 [98].\nOther values are considered as abnormal cases and the specification of the mobile station behaviour in those cases is given in subclause 4.4.4.9.\nWhen the Location updating procedure is finished (see subclauses 4.4.4.6 and 4.4.4.7) the mobile station shall (except in the case where the mobile has a follow-on CM application request pending and has received the follow-on proceed indication, see subclause 4.4.4.6) set timer T3240 and enter the state WAIT FOR NETWORK COMMAND, expecting the release of the RR connection. The network may decide to keep the RR connection for network initiated establishment of a MM connection, or to allow for mobile initiated MM connection establishment.\nAny release of the RR connection shall be initiated by the network according to subclause 3.5 in 3GPP TS 44.018 [84], and 3GPP TS 25.331 [23c]. If the RR connection is not released within a given time controlled by the timer T3240, the mobile station shall abort the RR connection. In both cases, either after a RR connection release triggered from the network side or after a RR connection abort requested by the MS-side, the MS shall return to state MM IDLE.\nAt transition to state MM IDLE, substates NORMAL SERVICE or RECEIVING GROUP CALL (NORMAL SERVICE) or ATTEMPTING TO UPDATE either timer T3212 or timer T3211 is started as described in subclause 4.4.4.9, or, timer T3246 is started as described in subclauses 4.4.4.7, 4.4.4.9 and 4.5.1.1.\nIf the MS receives the \"Extended wait time\" for CS domain from the lower layers when no location updating or CM service request procedure is ongoing, the MS shall ignore the \"Extended wait time\".\nThe different abnormal cases that can be identified are the following:\na)\tAccess barred because of access class control or EAB\nThe location updating procedure is not started. The mobile station stays in the current serving cell and applies normal cell reselection process. The procedure is started as soon as possible and if still necessary (when the barred state is ended or because of a cell change).\nb)\tThe answer to random access is an IMMEDIATE ASSIGNMENT REJECT message (A/Gb mode only)\nThe location updating is not started. The mobile station stays in the chosen cell and applies normal cell selection process. The waiting timer T3122 is reset when a cell change occurs. The procedure is started as soon as possible after T3122 timeout if still necessary.\nc)\tRandom access failure (A/Gb mode only)\nTimer T3213 is started. When it expires the procedure is attempted again if still necessary.\nNOTE 1:\tAs specified in 3GPP TS 45.008 [34], a cell reselection then takes place, with return to the cell inhibited for 5 seconds if there is at least one other suitable cell. Typically the selection process will take the mobile station back to the cell where the random access failed after 5 seconds.\nIf at the expiry of timer T3213 a new cell has not been selected due to the lack of valid information (see 3GPP TS 45.008 [34]), the mobile station may as an option delay the repeated attempt for up to 8 seconds to allow cell re-selection to take place. In this case the procedure is attempted as soon as a new cell has been selected or the mobile station has concluded that no other cell can be selected.\nIf random access failure occurs for two successive random access attempts for location updating the mobile station proceeds as specified below.\nd)\tRR connection failure\nThe procedure is aborted and the mobile station proceeds as specified below.\ne)\tT3210 timeout\nThe procedure is aborted, the RR connection is aborted and the MS proceeds as specified below.\nf)\tRR release without \"Extended Wait Time\" received from lower layers before the normal end of procedure\nThe procedure is aborted and the mobile station proceeds as specified below, except in the following implementation option case f.1.\nf.1)\tRR release in Iu mode (i.e. RRC connection release) with, for example, cause \"Normal\", \"User inactivity\" or \"Directed signalling connection re-establishment\" (see 3GPP TS 25.331 [23c] and 3GPP TS 44.118 [111])\nThe location updating procedure shall be initiated again, if the following conditions apply:\ni)\tThe original location updating procedure was initiated over an existing RRC connection; and\nii)\tNo SECURITY MODE COMMAND message and no Non-Access Stratum (NAS) messages relating to the CS signalling connection (e.g. CS authentication procedures, see subclause 4.3.2), were received after the LOCATION UPDATING REQUEST message was transmitted.\nNOTE 2:\tThe RRC connection release cause that triggers the re-initiation of the location updating procedure is implementation specific.\ng)\tLocation updating reject, other causes than those treated in subclause 4.4.4.7, and cases of MM cause values #22 and #25, if considered as abnormal cases according to subclause 4.4.4.7\nUpon reception of the cause codes #22, # 95, # 96, # 97, # 99 and # 111 the MS should set the location update attempt counter to 4. The MS waits for release of the RR connection as specified in subclause 4.4.4.8.\nThe MS shall proceed as described below.\nh)\tRR connection establishment failure without \"Extended Wait Time\" received from lower layers (Iu mode only)\nThe procedure is aborted and the mobile station proceeds as specified below.\nNOTE 3:\tCase h) covers all cases when the signalling connection cannot be established, including random access failure and access reject. As the RRC protocol has error specific retransmission mechanisms (see 3GPP TS 25.331 [23c]), there is no need to distinguish between the different error cases within MM.\ni)\t\"Extended wait time\" for CS domain from the lower layers\nThe MS shall abort the location updating procedure and stop timer T3210 if still running.\nIf the LOCATION UPDATING REQUEST message contained the low priority indicator set to \"MS is configured for NAS signalling low priority\", the MS shall start timer T3246 with the \"Extended wait time\" value and reset the location update attempt counter.\nIn other cases the MS shall ignore the \"Extended wait time\".\nAdditionally, the MS shall set the MM update status to U2 NOT UPDATED and change to state MM IDLE sub-state ATTEMPTING TO UPDATE. The MS stays in the current serving cell and applies normal cell reselection process. The location updating procedure is started, if still necessary, when timer T3246 expires or is stopped, and the MS proceeds as specified below.\nj)\tTimer T3246 is running\nThe location updating procedure shall not be initiated unless the MS is establishing an emergency call or the MS is an MS configured to use AC11 – 15 in selected PLMN. The MS stays in the current serving cell and applies normal cell reselection process. The location updating procedure is started, if still necessary, when timer T3246 expires or is stopped.\nIn cases d) to i) (except in the case f.1 and except in the case i) when timer T3246 is started) above, and, for repeated failures as defined in c) above, the mobile station proceeds as follows. Timer T3210 is stopped if still running. The RR Connection is aborted in case of timer T3210 timeout. The location update attempt counter is incremented. The next actions depend on the Location Area Identities (stored and received from the BCCH of the current serving cell) and the value of the location update attempt counter.\n–\tthe update status is UPDATED, and the stored LAI is equal to the one received on the BCCH from the current serving cell and the location update attempt counter is smaller than 4:\nThe mobile station shall keep the update status to UPDATED, the MM IDLE sub-state after the RR connection release is NORMAL SERVICE. The mobile station shall memorize the location updating type used in the location updating procedure. It shall start timer T3211  when the RR connection is released. When timer T3211 or T3246 expires the location updating procedure is triggered again with the memorized location updating type;\n–\teither the update status is different from UPDATED, or the stored LAI is different from the one received on the BCCH from the current serving cell, or the location update attempt counter is greater or equal to 4:\nWhen the RR connection is released the mobile station shall delete any LAI, TMSI, ciphering key sequence number stored in the SIM/USIM, and set the update status to NOT UPDATED. A mobile station which is not a GPRS MS shall also delete the list of equivalent PLMNs. The mobile station shall enter the MM IDLE sub-state ATTEMPTING TO UPDATE (see subclause 4.2.2.2 for the subsequent actions) or optionally the MM IDLE sub-state PLMN SEARCH (see subclause 4.2.1.2) in order to perform a PLMN selection according to 3GPP TS 23.122 [14]. If the location update attempt counter is smaller than 4, the mobile station shall memorize that timer T3211  is to be started when the RR connection is released, otherwise it shall memorize that timer T3212  is to be started when the RR connection is released.\na)\tRR connection failure\nIf a RR connection failure occurs during a common procedure integrated with the location updating procedure, the behaviour of the network should be according to the description of that common procedure.\nIf a RR connection failure occurs when a common procedure does not exist, the location updating procedure towards the mobile station should be aborted.\nb)\tprotocol error\nIf the LOCATION UPDATING REQUEST message is received with a protocol error, the network should, if possible, return a LOCATION UPDATING REJECT message with one of the following Reject causes:\n#96:\tMandatory information element error\n#99:\tInformation element non-existent or not implemented\n#100:\tConditional IE error\n#111:\tProtocol error, unspecified\nHaving sent the response, the network should start the channel release procedure (see subclause 3.5).\nThe figure depicts a location updating sequence in 3GPP TS 24.008, illustrating the steps taken by the network to update the location of a device. The sequence includes the initial location update, the update of the location, and the final location update. The figure is used to demonstrate the process of location updating in a 3GPP network.\nFigure 4.5/3GPP TS 24.008: Location updating sequence\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "4.4.5\tVoid",
                            "text_content": "",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "4.4.6\tVoid",
                            "text_content": "",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "4.4.7\teCall inactivity procedure",
                            "text_content": "The eCall inactivity procedure is applicable only to an eCall only mobile station (as determined by information configured in USIM). The procedure shall be started when:\n-\tthe mobile station is in any MM Idle state except NO IMSI, NO CELL AVAILABLE or PLMN SEARCH;\n-\tthe mobile station is in GMM-NULL or GMM-DEREGISTERED state; and\n-\tone of the following conditions applies:\n-\ttimer T3242 expires or is found to have already expired and T3243 is not running;\n-\ttimer T3243 expires or is found to have already expired and T3242 is not running; or\n-\ttimer T3242 and timer T3243 expire or are found to have already expired.\nThe mobile station shall then stop other running timers (e.g. T3211, T3212, T3213) and shall perform the IMSI detach procedure if required by the serving network and if the update state is U1. The mobile station then enters MM Idle eCALL INACTIVE state and the mobile station shall delete any LAI, TMSI, ciphering key sequence number stored in the SIM/USIM and set the update state to U4 Updating Disabled.\nWhile in eCALL INACTIVE state, the mobile station maintains awareness of a potential serving cell in a potential serving network but initiates no MM signalling with the network and ignores any paging requests.\nThe mobile station shall leave eCALL INACTIVE state only when one of the following events occur:\n-\tif the SIM or USIM is removed, the mobile station enters the NO IMSI state;\n-\tif coverage is lost, the mobile station enters PLMN SEARCH state;\n-\tif the mobile station is deactivated (e.g. powered off) by the user: the mobile station enters the NULL state;\n-\tif there is a CM request for an emergency services call: the mobile station should follow the procedure for return to state MM-IDLE in subclause 4.2.3 and attempt a location update. The MS then uses the MM and CM procedures to establish the emergency call at the earliest opportunity; or\nNOTE 1:\tIf an eCall only device has not successfully completed a location update procedure, PSAP callback will not be possible due to its calling line identity being unavailable at the PSAP.\nNOTE 2:\tAn eCall only device uses the CS domain to originate an emergency services call when in A/Gb or Iu mode, even if the device is capable of eCall over IMS.\n-\tif there is a CM request for a call to an HPLMN designated non-emergency MSISDN for the purpose of accessing test and terminal reconfiguration services: the mobile station follows the procedure for return to state MM-IDLE in subclause 4.2.3 and attempts a normal location update. Once this is complete, further MM and CM procedures are used to establish the non-emergency call.\nNOTE 3:\tAn eCall only device uses the CS domain to originate a call to an HPLMN designated non-emergency MSISDN for the purpose of accessing test and terminal reconfiguration services when in A/Gb or Iu mode, even if the device is capable of eCall over IMS.\n",
                            "figures_meta_data": [],
                            "tables": []
                        }
                    ]
                },
                {
                    "title": "4.5\tConnection management sublayer service provision",
                    "description": "",
                    "summary": "",
                    "text_content": "The concept of MM connection is introduced in this subclause. This concept is mainly a descriptive tool: The establishment of an MM connection by the network can be local (i.e. it is achieved by the transmission of the first CM layer message and without the transmission of any MM layer messages) or can be achieved by the transmission of a CM SERVICE PROMPT message (eg. in the case of certain ring back services). The release of an MM connection by the network or by the mobile station is always local, i.e. these purposes can be achieved without sending any MM messages over the radio interface. (On the contrary, establishment of an MM connection by the mobile station requires the sending of MM messages over the radio interface. An exception is VGCS, where an MM connection will be established as result of an uplink access procedure (see subclause 3.7.2.1.1in 3GPP TS 44.018 [84]).)\nThe Mobility Management (MM) sublayer is providing connection management services to the different entities of the upper Connection management (CM) sublayer (see 3GPP TS 24.007 [20]). It offers to a CM entity the possibility to use an MM connection for the exchange of information with its peer entity. An MM connection is established and released on request from a CM entity. Different CM entities communicate with their peer entity using different MM connections. Several MM connections may be active at the same time.\nAn MM connection requires an RR connection. All simultaneous MM connections for a given mobile station use the same RR connection.\nIn the following subclauses, the procedures for establishing, re-establishing, maintaining, and releasing an MM connection are described, usually separately for the mobile station and the network side.\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": [
                        {
                            "title": "4.5.1\tMM connection establishment",
                            "text_content": "Upon request of a CM entity to establish an MM connection the MM sublayer first decides whether to accept, delay, or reject this request:\n-\tAn MM connection establishment may only be initiated by the mobile station when the following conditions are fulfilled:\n-\tIts update status is UPDATED.\n-\tThe MM sublayer is in one of the states MM IDLE, RR CONNECTION RELEASE NOT ALLOWED or MM connection active but not in MM connection active (Group call).\nAn exception from this general rule exists for emergency calls (see subclause 4.5.1.5). A further exception is defined in the following clause.\n-\tIf an MM specific procedure is running at the time the request from the CM sublayer is received, and the LOCATION UPDATING REQUEST message has been sent, the request will either be rejected or delayed, depending on implementation, until the MM specific procedure is finished and, provided that the network has not sent a \"follow-on proceed\" indication, the RR connection is released. If the LOCATION UPDATING REQUEST message has not been sent, the mobile station may include a \"follow-on request\" indicator in the message. The mobile station shall then delay the request until the MM specific procedure is completed, when it may be given the opportunity by the network to use the RR connection: see subclause 4.4.4.6.\nIn order to establish an MM connection, the mobile station proceeds as follows:\na)\tIf no RR connection exists, the MM sublayer requests the RR sublayer to establish an RR connection and enters MM sublayer state WAIT FOR RR CONNECTION (MM CONNECTION). This request contains an establishment cause and a CM SERVICE REQUEST message. When the establishment of an RR connection is indicated by the RR sublayer, the MM sublayer of the mobile station starts timer T3230, gives an indication to the CM entity that requested the MM connection establishment, and enters MM sublayer state WAIT FOR OUTGOING MM CONNECTION.\nb)\tIf an RR connection is available, the MM sublayer of the mobile station sends a CM SERVICE REQUEST message to the network, starts timer T3230, stops and resets timer T3241, gives an indication to the CM entity that requested the MM connection establishment, and enters:\n-\tMM sublayer state WAIT FOR OUTGOING MM CONNECTION, if no MM connection is active;\n-\tMM sublayer state WAIT FOR ADDITIONAL OUTGOING MM CONNECTION, if at least one MM connection is active;\n-\tIf an RR connection exists but the mobile station is in the state WAIT FOR NETWORK COMMAND then any requests from the CM layer that are received will either be rejected or delayed until this state is left.\nc)\tOnly applicable for mobile stations supporting VGCS talking:\nIf a mobile station which is in the MM sublayer state MM IDLE, service state RECEIVING GROUP CALL (NORMAL SERVICE), receives a request from the GCC sublayer to perform an uplink access, the MM sublayer requests the RR sublayer to perform an uplink access procedure and enters MM sublayer state WAIT FOR RR CONNECTION (GROUP TRANSMIT MODE).\nWhen a successful uplink access is indicated by the RR sublayer, the MM sublayer of the mobile station gives an indication to the GCC sublayer and enters MM sublayer state MM CONNECTION ACTIVE (GROUP TRANSMIT MODE).\nWhen an uplink access reject is indicated by the RR sublayer, the MM sublayer of the mobile station gives an indication to the GCC sublayer and enters the MM sublayer state MM IDLE, service state RECEIVING GROUP CALL (NORMAL SERVICE).\nIn the network, if an uplink access procedure is performed, the RR sublayer in the network provides an indication to the MM sublayer together with the mobile subscriber identity received in the TALKER INDICATION message. The network shall then enter the MM sublayer state MM CONNECTION ACTIVE (GROUP TRANSMIT MODE).\nd)\tWhen the MS is IMSI attached for CS services via EMM combined procedures, as described in 3GPP TS 24.301 [120], and the MS is camping on an E-UTRAN cell, and if T3246 is not running, the MM sublayer requests EMM to initiate a service request procedure for CS fallback. The MM connection establishment is delayed until the MS changes to a GERAN or UTRAN cell.\nIf the MS enters a GERAN or UTRAN cell, then the MS shall initiate the MM connection establishment and send a CM SERVICE REQUEST message. The MS shall include the Additional update parameters information element indicating \"CS fallback mobile originating call\". If the MS determines that it is in a different location area than the stored location area, the MS shall first initiate a normal location updating procedure regardless of Network Mode of Operation. If the location area of the current cell is not available, the MS may initiate a normal location updating procedure directly. The MM connection establishment is delayed until successful completion of the normal location updating procedure. Additionally the MS performs routing area updating as specified in subclause 4.7.5. If the normal location updating procedure is initiated, the MS shall indicate the \"follow-on request pending\", shall include the Additional update parameters information element indicating\"CS fallback mobile originating call\", and shall not include the MS network feature support information element in the LOCATION UPDATING REQUEST message.\nIn case a, b and d, the CM SERVICE REQUEST message contains the:\n-\tmobile identity according to subclause 10.5.1.4;\n-\tmobile station classmark 2;\n-\tciphering key sequence number; and\n-\tCM service type identifying the requested type of transaction (e.g. mobile originating call establishment, emergency call establishment, short message service, supplementary service activation, location services).\nA MS supporting eMLPP may optionally include a priority level in the CM SERVICE REQUEST message.\nFor MM connection establishment involving a shared GERAN network in A/Gb mode, if the MS is a GERAN network sharing supporting MS, the chosen PLMN identity shall be indicated to the GERAN in the CM SERVICE REQUEST message using the Skip Indicator IE as specified in subclause 10.3.1.\nA collision may occur when a CM layer message is received by the mobile station in MM sublayer state WAIT FOR OUTGOING MM CONNECTION or in WAIT FOR ADDITIONAL OUTGOING MM CONNECTION. In this case the MM sublayer in the MS shall establish a new MM connection for the incoming CM message as specified in subclause 4.5.1.3.\nUpon receiving a CM SERVICE REQUEST message, the network shall analyse its content. The type of semantic analysis may depend on other on going MM connection(s). Depending on the type of request and the current status of the RR connection, the network may start any of the MM common procedures and RR procedures.\nIn A/Gb mode, the network may initiate the classmark interrogation procedure, for example, to obtain further information on the mobile station's encryption capabilities.\nThe identification procedure (see subclause 4.3.3) may be invoked for instance if a TMSI provided by the mobile station is not recognized.\nThe network may invoke the authentication procedure (see subclause 4.3.2) depending on the CM service type.\nIn A/Gb mode, the network decides also if the ciphering mode setting procedure shall be invoked (see subclause 3.4.7 in 3GPP TS 44.018 [84]).\nIn Iu mode, the network decides also if the security mode control procedure shall be invoked (see 3GPP TS 25.331 [23c] and 3GPP TS 44.118 [111]).\nNOTE 1:\tIf the CM_SERVICE_REQUEST message contains a priority level the network may use this to perform queuing and pre-emption as defined in 3GPP TS 23.067 [88].\nIn A/Gb mode, the MS shall consider the MM connection establishment to be completed when:\n-\treceiving an indication from the RR sublayer that the ciphering mode setting procedure is completed; or\n-\treceiving a CM SERVICE ACCEPT message.\nIn Iu mode, the MS shall consider the MM connection establishment to be completed when\n-\treceiving an indication from the RR sublayer that the security mode control procedure is completed, except for the case when it is the first security mode control procedure after successful inter-system change received in MM sublayer state WAIT FOR ADDITIONAL OUTGOING MM CONNECTION; or\n-\treceiving a CM SERVICE ACCEPT message.\nThe procedures in subclause 4.1.1.1.1 shall always have precedence over this subclause.\nIn Iu mode, during a MM connection establishment for all services, except for emergency call (see subclause 4.1.1.1.1), the security mode control procedure with activation of integrity protection shall be invoked by the network unless integrity protection is already started (see subclause 4.1.1.1.1).\nThe MM connection establishment is completed, timer T3230 shall be stopped, the CM entity that requested the MM connection shall be informed, and MM sublayer state MM CONNECTION ACTIVE is entered. The MM connection is considered to be active.\nIf the service request cannot be accepted, the network returns a CM SERVICE REJECT message to the mobile station.\nThe reject cause information element (see subclause 10.5.3.6 and annex G) indicates the reason for rejection. The following cause values may apply:\n#4:\tIMSI unknown in VLR\n#6:\tIllegal ME\n#17:\tNetwork failure\n#22:\tCongestion\n#25\tNot authorized for this CSG\n#32:\tService option not supported\n#33:\tRequested service option not subscribed\n#34:\tService option temporarily out of order\nIf the service request is rejected due to general NAS level mobility management congestion control, the network shall set the MM cause value to #22 \"congestion\" and assign a back-off timer T3246 (see 3GPP TS 23.012 [140]).\nIf no other MM connection is active, the network may start the RR connection release (see subclause 3.5 of 3GPP TS 44.018 [84] (A/Gb mode only), 3GPP TS 25.331 [23c] (UTRAN Iu mode only), or in 3GPP TS 44.118 [111] (GERAN Iu mode only) when the CM SERVICE REJECT message is sent.\nIf a CM SERVICE REJECT message is received by the mobile station, timer T3230 shall be stopped, the requesting CM sublayer entity informed. Then the mobile station shall proceed as follows:\n-\tIf the cause value is not #4 or #6 or #25 received from a CSG cell and the MS is in UTRAN Iu mode, the MM sublayer returns to the previous state (the state where the request was received). Other MM connections shall not be affected by the CM SERVICE REJECT message.\n-\tIf cause value #4 is received, the mobile station aborts any MM connection, deletes any TMSI, LAI and ciphering key sequence number in the SIM/USIM, changes the update status to NOT UPDATED (and stores it in the SIM/USIM according to subclause 4.1.2.2), and enters the MM sublayer state WAIT FOR NETWORK COMMAND. If subsequently the RR connection is released or aborted, this will force the mobile station to initiate a normal location updating). Whether the CM request shall be memorized during the location updating procedure, is a choice of implementation.\n-\tIf cause value #6 is received, the mobile station aborts any MM connection, deletes any TMSI, LAI and ciphering key sequence number in the SIM/USIM, changes the update status to ROAMING NOT ALLOWED (and stores it in the SIM/USIM according to subclause 4.1.2.2), and enters the MM sublayer state WAIT FOR NETWORK COMMAND. The mobile station shall consider the SIM/USIM as invalid for non-GPRS services until switch-off or the SIM/USIM is removed. If the message has been successfully integrity checked by the lower layers and the MS maintains a counter for \"SIM/USIM considered invalid for non-GPRS services\", then the MS shall set this counter to MS implementation-specific maximum value.\n-\tIf cause value #22 is received, the T3246 value IE is present in the CM SERVICE REJECT message and the value indicates that this timer is neither zero nor deactivated, the MS shall check whether the CM SERVICE REJECT message with cause #22 is integrity protected and shall stop timer T3246 if it is running. If the message is integrity protected, the MS shall start timer T3246 with the value provided in the T3246 value IE. Otherwise, the MS shall start timer T3246 with a random value from the default range specified in table 11.1.The MS stays in the current serving cell and applies normal cell reselection process. The service request procedure may be started by CM layer, if it is still necessary, when timer T3246 expires or is stopped.\nIf cause value #22 is received, the T3246 value IE is not present in the CM SERVICE REJECT message or if the T3246 value IE the value indicates that this timer is zero or deactivated, the same actions as on timer expiry in subclause 4.5.1.2 shall be taken by the mobile station.\n-\tIf cause value #25 is received from a CSG cell and the MS is in UTRAN Iu mode, the MS shall check whether the CM SERVICE REJECT message with cause #25 is integrity protected. If the message is not integrity protected, the MS shall discard the message. Otherwise, the MS shall abort any MM connection, remove the entry corresponding to the CSG ID and associated PLMN identity of the cell where the MS has sent the CM SERVICE REQUEST message from the Allowed CSG list if the CSG ID and associated PLMN identity are contained in the Allowed CSG list, and enter the MM sublayer state WAIT FOR NETWORK COMMAND. If the CSG ID and associated PLMN identity of the cell where the MS has sent the CM SERVICE REQUEST message is contained in the Operator CSG list, the MS shall proceed as specified in 3GPP TS 23.122 [14] subclause 3.1A. Subsequently, after the RR connection is released or aborted, the MS applies normal cell reselection process.\nIf cause value #25 is received and the cell is not a CSG cell or the MS is not in UTRAN Iu mode, the MS shall discard the CM SERVICE REJECT message.\nMobile station side:\na)\tRR connection failure without \"Extended Wait Time\" received from lower layers or IMSI deactivation\nIf an RR connection failure occurs, except in the following implementation option case a.1, or the IMSI is deactivated during the establishment of an MM connection, the MM connection establishment is aborted, timers T3230 is stopped, and an indication is given to the CM entity that requested the MM connection establishment. This shall be treated as a rejection for establishment of the new MM connection, and the MM sublayer shall release all active MM connections.\na.1)\tRR connection failure in Iu mode (i.e. RRC connection release) with, for example, cause \"Normal\", \"User inactivity\" or \"Directed signalling connection re-establishment\" (see 3GPP TS 25.331 [23c] and 3GPP TS 44.118 [111])\nThe MM connection establishment procedure shall be initiated again, if the following conditions apply:\ni)\tThe original MM connection establishment was initiated over an existing RRC connection; and\nii)\tNo SECURITY MODE COMMAND message and no Non-Access Stratum (NAS) messages relating to the CS signalling connection (e.g. CS authentication procedures, see subclause 4.3.2), were received after the CM SERVICE REQUEST message was transmitted.\nNOTE 1:\tThe RRC connection release cause that triggers the re-initiation of the MM connection establishment procedure is implementation specific.\nb)\tT3230 expiry\nIf T3230 expires (i.e. no response is given but a RR connection is available) the MM connection establishment is aborted and the requesting CM sublayer is informed. If no other MM connection exists then the mobile station shall proceed as described in subclause 4.5.3.1 for release of the RR connection. Otherwise the mobile station shall return to the MM sublayer state where the request of an MM connection was received, i.e. to MM sublayer state MM connection active. Other ongoing MM connections (if any) shall not be affected.\nc)\tReject cause values #95, #96, #97, #99, #100, #111 received\nThe same actions as on timer expiry shall be taken by the mobile station.\nd)\tRandom access failure or RR connection establishment failure without \"Extended Wait Time\" received from lower layers\nIf the mobile station detects a random access failure or RR connection establishment failure during the establishment of an MM connection, it aborts the MM connection establishment and gives an indication to the CM entity that requested the MM connection establishment.\nNOTE 2:\tFurther actions of the mobile station depend on the RR procedures and MM specific procedures during which the abnormal situation has occurred and are described together with those procedures.\ne)\tAccess barred because of access class control or EAB\nThe MM connection establishment shall not be initiated. The MS stays in the current serving cell and applies normal cell reselection process. The MM connection establishment may be initiated by CM layer if it is still necessary, i.e. when access is granted or because of a cell change.\nf)\tIndication that a CS fallback to GERAN or UTRAN has failed\nIf EMM indicates that the CS fallback to GERAN or UTRAN failed, the MM sublayer shall abort the MM connection establishment and inform the requesting CM sublayer.\ng)\t\"Extended wait time\" for CS domain from the lower layers\nThe MS shall abort the MM connection establishment and stop timer T3230 if still running.\nIf the CM SERVICE REQUEST message contained the low priority indicator set to \"MS is configured for NAS signalling low priority\", the MS shall start timer T3246 with the \"Extended wait time\" value.\nIn other cases the MS shall ignore the \"Extended wait time\".\nThe MM connection establishment is started, if still necessary, when timer T3246 expires or is stopped.\nh)\tTimer T3246 is running\nThe MM connection establishment shall not be initiated unless the MS is establishing an emergency call or the MS is an MS configured to use AC11 – 15 in selected PLMN. The MS stays in the current serving cell and applies normal cell reselection process. The MM connection establishment is started, if still necessary, when timer T3246 expires or is stopped.\nNetwork side:\na)\tRR connection failure\nThe actions to be taken upon RR connection failure within a MM common procedure are described together with that procedure. A RR connection failure occurring outside such MM common procedures, shall trigger the release of all active MM connections if any.\nb)\tInvalid message or message content\nUpon reception of an invalid initial message or a CM SERVICE REQUEST message with invalid content, a CM SERVICE REJECT message shall be returned with one of the following appropriate Reject cause indications:\n#  95:\tSemantically incorrect message\n#  96:\tMandatory information element error\n#  97:\tMessage type non-existent or not implemented\n#  99:\tInformation element non-existent or not implemented\n# 100:\tConditional IE error\n# 111:\tProtocol error, unspecified\nWhen the CM SERVICE REJECT message has been sent, the network may start RR connection release if no other MM connections exist or if the abnormal condition also has influence on the other MM connections.\nWhen a CM sublayer entity in the network requests the MM sublayer to establish a MM connection, the MM sublayer will request the establishment of an RR connection to the RR sublayer if no RR connection to the desired mobile station exists. The MM sublayer is informed when the paging procedure is finished (see 3GPP TS 44.018 [84] subclause 3.3.2 and 3GPP TS 25.331 [23c]) and the mobile station shall enter the MM state WAIT FOR NETWORK COMMAND and stop the timer T3246 if running.\nIn A/Gb mode, when an RR connection is established (or if it already exists at the time the request is received), the MM sublayer may initiate any of the MM common procedures (except IMSI detach); it may request the RR sublayer to perform the RR classmark interrogation procedure, and/or the security mode setting procedure.\nIn Iu mode, when an RR connection is established (or if it already exists at the time the request is received), the MM sublayer may initiate any of the MM common procedures (except IMSI detach); it may request the RR sublayer to perform the security mode control procedure.\nWhen all MM and RR procedures are successfully completed which the network considers necessary, the MM sublayer will inform the requesting mobile terminating CM sublayer entity on the success of the MM connection establishment.\nIf an RR connection already exists and no MM specific procedure is running, the network may also establish a new mobile terminating MM connection by sending a CM message with a new PD/TI combination.\nIf the MS receives the first CM message in the MM states WAIT FOR NETWORK COMMAND or RR CONNECTION RELEASE NOT ALLOWED, the MS shall stop and reset the timers T3240 and T3241 and shall enter the MM state MM CONNECTION ACTIVE.\nIn A/Gb mode, if the establishment of an RR connection is unsuccessful, or if any of the MM common procedures or the security mode setting fail, this is indicated to the CM layer with an appropriate error cause.\nIn Iu mode, if the establishment of an RR connection is unsuccessful, or if any of the MM common procedures or the security mode control fail, this is indicated to the CM layer with an appropriate error cause.\nIf an RR connection used for a MM specific procedure exists to the mobile station, the CM request may be rejected or delayed depending on implementation. When the MM specific procedure has been completed, the network may use the same RR connection for the delayed CM request.\nOnly applicable in case of VGCS talking:\nIn the MM CONNECTION ACTIVE (GROUP TRANSMIT MODE) the mobile station is in RR Group transmit mode. There shall be only one MM connection active.\nWhen in MM CONNECTION ACTIVE (GROUP TRANSMIT MODE) state, the MM sublayer in the network shall reject the request for the establishment of another MM connection by any CM layer.\nIf the RR sublayer in the network indicates a request to perform a transfer of the mobile station from RR connected mode to RR Group transmit mode which will result in a transition from MM CONNECTION ACTIVE state to MM CONNECTION ACTIVE (GROUP TRANSMIT MODE) state in the MM sublayer, the MM sublayer shall not allow the transition if more than one MM connection is active with the mobile station.\nWhen a CM sublayer entity in the network requests the MM sublayer to establish a MM connection, the MM sublayer will request the establishment of an RR connection to the RR sublayer if no RR connection to the desired mobile station exists. The MM sublayer is informed when the paging procedure is finished (see 3GPP TS 44.018 [84] subclause 3.3.2 and 3GPP TS 25.331 [23c]) and the mobile station shall enter the MM state WAIT FOR NETWORK COMMAND.\nIn A/Gb mode, when an RR connection is established (or if it already exists at the time the request is received), the MM sublayer may initiate any of the MM common procedures (except IMSI detach), it may request the RR sublayer to perform the RR classmark interrogation procedure and/or the security mode setting procedure.\nIn Iu mode, when an RR connection is established (or if it already exists at the time the request is received), the MM sublayer may initiate any of the MM common procedures (except IMSI detach), it may request the RR sublayer to perform the security mode control procedure.\nThe network should use the information contained in the Mobile Station Classmark Type 2 IE on the mobile station's support for \"Network Initiated MO CM Connection Request\" to determine whether to:\nnot start this procedure (eg if an RR connection already exists), or,\nto continue this procedure, or,\nto release the newly established RR connection.\nIn the case of a \"Network Initiated MO CM Connection Request\" the network shall use the established RR connection to send a CM SERVICE PROMPT message to the mobile station.\nIf the mobile station supports \"Network Initiated MO CM Connection Request\", the MM sublayer of the MS gives an indication to the CM entity identified by the CM SERVICE PROMPT message and enters the MM sublayer state PROCESS CM SERVICE PROMPT. In the state PROCESS CM SERVICE PROMPT the MM sublayer waits for either the rejection or confirmation of the recall by the identified CM entity. Any other requests from the CM entities shall either be rejected or delayed until this state is left.\nWhen the identified CM entity informs the MM sublayer, that it has send the first CM message in order to start the CM recall procedure the MM sublayer enters the state MM CONNECTION ACTIVE.\nIf the identified CM entity indicates that it will not perform the CM recall procedure and all MM connections are released by their CM entities the MS shall proceed according to subclause 4.5.3.1.\nIf the CM SERVICE PROMPT message is received by the MS in MM sublayer states WAIT FOR OUTGOING MM CONNECTION or in WAIT FOR ADDITIONAL OUTGOING MM CONNECTION then the mobile station shall send an MM STATUS message with cause \" Message not compatible with protocol state\".\nA mobile that does not support \"Network Initiated MO CM Connection Request\" shall return an MM STATUS message with cause #97 \"message type non-existent or not implemented\" to the network.\nIf the mobile station supports \"Network Initiated MO CM Connection Request\" but the identified CM entity in the mobile station does not provide the associated support, then the mobile station shall send an MM STATUS message with cause \"Service option not supported\". In the case of a temporary CM problem (eg lack of transaction identifiers) then the mobile station shall send an MM STATUS message with cause \"Service option temporarily out of order\".\nIf an RR connection already exists and no MM specific procedure is running, the network may use it to send the CM SERVICE PROMPT message.\nIn A/Gb mode, if the establishment of an RR connection is unsuccessful, or if any of the MM common procedures or the security mode setting fail, this is indicated to the CM layer in the network with an appropriate error cause.\nIn Iu mode, if the establishment of an RR connection is unsuccessful, or if any of the MM common procedures or the security mode control fail, this is indicated to the CM layer in the network with an appropriate error cause.\nIf an RR connection used for a MM specific procedure exists to the mobile station, the \"Network Initiated MO CM Connection Request\" may be rejected or delayed depending on implementation. When the MM specific procedure has been completed, the network may use the same RR connection for the delayed \"Network Initiated MO CM Connection Request\".\nThe network may initiate the paging procedure for CS services when the MS is IMSI attached for CS services. To initiate the procedure, the MM entity requests the RR sublayer to initiate paging (see 3GPP TS 25.331 [23c], 3GPP TS 25.413 [19c] and 3GPP TS 44.118 [111]) for CS services.\nAt reception of a paging message, the RR sublayer in the MS shall deliver a paging indication to the MM sublayer if the paging was initiated by the MM entity in the network (see 3GPP TS 25.331 [23c] and 3GPP TS 44.118 [111]) and the MS shall stop the timer T3246, if running. The MS shall respond with the PAGING RESPONSE message defined in 3GPP TS 44.018 [84], subclause 9.1.25. For reasons of backward compatibility the paging response shall use the RR protocol discriminator.\nIf the MS receives a paging request for CS services during an ongoing MM procedure, and the MS has already requested the establishment of a radio connection, the MS shall ignore the paging request and the MS and the network shall continue the MM procedure.\nThe network may initiate the paging procedure for CS services when the MS is IMSI attached for CS services via EMM combined procedures, as described in 3GPP TS 24.301 [120].\nAt reception of an indication of paging for CS services from EMM, the MS shall stop timer T3246, if it is running. The MM sublayer in the MS requests EMM to perform the service request procedure for CS fallback.\nAfter the MS changes to a GERAN or UTRAN cell, the MS shall:\n-\tIn A/Gb mode: ask for the establishment of an RR connection and proceed as if a paging has been received in the lower layers;\n-\tIn Iu mode: ask for the establishment of an RRC connection and respond with the PAGING RESPONSE message defined in 3GPP TS 44.018 [84], subclause 9.1.25. For reasons of backward compatibility the paging response shall use the RR protocol discriminator.\nIf the MS determines, before sending the response to paging, that it is in a different location area than the stored location area, the MS shall initiate a normal location updating procedure first, regardless of Network Mode of Operation. Additionally the MS performs routing area updating as specified in subclause 4.7.5. If the location area of the current cell is not available, the MS may initiate a normal location updating procedure directly.\nWhen initiating the location updating procedure, the MS shall indicate \"CS fallback mobile terminating call\" in the Additional update parameters IE and the MS shall not include the MS network feature support IE. The MM connection establishment is delayed until successful completion of the normal location updating procedure. After the completion of the normal location updating procedure, the MS shall not send the PAGING RESPONSE message.\nNOTE:\tFor the race condition when the mobile station has a CM application request pending, the mobile station also indicates that it has a follow-on request pending.\nThe behaviour upon abnormal events is described together with the relevant RR procedure or MM common procedure.\nIn addition, the following abnormal events can be identified:\na)\tIndication that a CS fallback to GERAN or UTRAN has failed\nIf EMM indicates that the CS fallback to GERAN or UTRAN failed, the MM sublayer shall abort the paging response procedure.\nb)\tPaging message for an MS which is IMSI attached for GPRS and for non-GPRS services in order to obtain GPRS services and \"SMS-only service\"\nAn MS that received the GPRS-SMS indicator set to \"0\" at the last combined GPRS attach or combined routing area updating procedure may ignore the paging for CS services.\nAn MS that requested \"SMS-only service\" in the combined GPRS attach procedure or combined routing area updating procedure may ignore the paging for CS services.\nNOTE:\tA network that is compliant with the earlier versions of the protocol will implicitly indicate to the MS that the delivery of SMS via GPRS is always supported, i.e. as GPRS-SMS indicator set to \"0\", even if it does not provide this support to the MS. The MS can  learn  whether SMS over GPRS is provided by using the mechanism defined in 3GPP TS 24.011 [22], subclause 2.6. If the MS learns that SMS over GPRS is provided, the MS can ignore paging for CS services.\nA MM connection for an emergency call may be established in all states of the mobility management sublayer which allow MM connection establishment for a normal originating call. In addition, establishment may be attempted in all service states where a cell is selected (see subclause 4.2.2) but not in the MM CONNECTION ACTIVE state (GROUP TRANSMIT MODE) state. However, as a network dependent option, a MM connection establishment for emergency call may be rejected in some of the states.\nWhen a user requests an emergency call establishment the mobile station will send a CM SERVICE REQUEST message to the network with a CM service type information element indicating emergency call establishment. If the network does not accept the emergency call request, e.g., because IMEI was used as identification and this capability is not supported by the network, the network will reject the request by returning a CM SERVICE REJECT message to the mobile station.\nThe reject cause information element indicates the reason for rejection. The following cause values may apply:\n#3\t\t\"Illegal MS\"\n#4\t\t\"IMSI unknown in VLR\"\n#5\t\t\"IMEI not accepted\"\n#6\t\"\tIllegal ME\"\n#17\t\"Network failure\"\n#22\t\"Congestion\"\n#25\t\"Not authorized for this CSG\"\n#32\t\"Service option not supported\"\n#34\t\"Service option temporarily out of order\"\nWith the above defined exceptions, the procedures described for MM connection establishment in subclauses 4.5.1.1 and 4.5.1.2 shall be followed.\nNOTE:\tNormally, the mobile station will be identified by an IMSI or a TMSI. However, if none of these identifiers is available in the mobile station, then the mobile station shall use the IMEI for identification purposes. The network may in that case reject the request by returning a CM SERVICE REJECT message with reject cause: #5\t\"IMEI not accepted\".\nWhen the MS is in NO CELL AVAILABLE state, camped on an E-UTRAN cell, and IMSI attached for CS services via EMM combined procedures, as described in 3GPP TS 24.301 [120], the MM sublayer requests EMM to initiate a service request procedure for mobile originating CS fallback emergency call, irrespective of whether timer T3246 is running. The MM connection establishment is delayed until the mobile station changes to a GERAN or UTRAN cell. After this point, the behaviour specified in subclause 4.5.1.5 applies.\nWhen the MS is not IMSI attached for CS services via EMM combined procedures, as described in 3GPP TS 24.301 [120], and the MS is camping on an E-UTRAN cell, the MS shall perform any cell selection to GERAN or UTRAN (see 3GPP TS 43.022 [82] and 3GPP TS 25.304 [98]). The MM connection establishment is delayed until the MS changes to a GERAN or UTRAN cell. After this point, the behaviour specified in subclause 4.5.1.5 applies.\nThe re-establishment procedure allows a MS to resume a connection in progress after a radio link failure, possibly in a new cell and possibly in a new location area. The conditions in which to attempt call re-establishment or not depend on the call control state, see subclause 5.5.4 and, whether or not a cell allowing call re-establishment has been found (as described in 3GPP TS 45.008 [34]). MM connections are identified by their protocol discriminators and transaction identifiers: these shall not be changed during call re-establishment.\nThe re-establishment takes place when a lower layer failure occurs and at least one MM connection is active (i.e. the mobile station's MM sublayer is either in state 6 \"MM CONNECTION ACTIVE\" or state 20 \"WAIT FOR ADDITIONAL OUTGOING MM CONNECTION\").\nNOTE:\tDuring a re-establishment attempt the mobile station does not return to the MM IDLE state; thus no location updating is performed even if the mobile is not updated in the location area of the selected cell.\nNo call re-establishment shall be performed for voice group and broadcast calls.\nNOTE:\tThe network is unable to initiate call re-establishment.\nIf at least one request to re-establish an MM connection is received from a CM entity as a response to the indication that the MM connection is interrupted (see subclause 4.5.2.3.) the mobile station initiates the call re-establishment procedure. If several CM entities request re-establishment only one re-establishment procedure is initiated. If any CM entity requests re-establishment, then re-establishment of all transactions belonging to all Protocol Discriminators that permit Call Re-establishment shall be attempted.\nUpon request of a CM entity to re-establish an MM connection the MM sublayer requests the RR sublayer to establish an RR connection and enters MM sublayer state WAIT FOR REESTABLISH. This request contains an establishment cause and a CM RE-ESTABLISHMENT REQUEST message. When the establishment of an RR connection is indicated by the RR sublayer, the MM sublayer of the mobile station starts timer T3230, gives an indication to all CM entities that are being re-established, and remains in the MM sublayer state WAIT FOR REESTABLISH.\nThe CM RE-ESTABLISHMENT REQUEST message contains the\n-\tmobile identity according to subclause 10.5.1.4;\n-\tmobile station classmark 2;\n-\tciphering key sequence number.\nNOTE:\tWhether or not a CM entity can request re-establishment depends upon the Protocol Discriminator. The specifications for Short Message Service (3GPP TS 24.011 [22]), Call Independent Supplementary Services (3GPP TS 24.010 [21]) and Location Services (3GPP TS 44.071 [23a]) do not currently specify any re-establishment procedures.\nFor a shared GERAN in A/Gb mode, if the MS is a GERAN network sharing supporting MS, the chosen PLMN identity shall be indicated to the GERAN in the CM RE-ESTABLISHMENT REQUEST message using the Skip Indicator IE as specified in subclause 10.3.1.\nUpon receiving a CM RE-ESTABLISHMENT REQUEST message, the network shall analyse its content. Depending on the type of request, the network may start any of the MM common procedures and RR procedures.\nThe network may initiate the classmark interrogation procedure, for example, to obtain further information on the mobile station's encryption capabilities.\nThe identification procedure (see subclause 4.3.3) may be invoked.\nThe network may invoke the authentication procedure (see subclause 4.3.2).\nIn A/Gb mode, the network decides if the security mode setting procedure shall be invoked (see 3GPP TS 44.018 [84] subclause 3.4.7).\nAn indication from the RR sublayer that the security mode setting procedure is completed, or reception of a CM SERVICE ACCEPT message, shall be treated as a service acceptance indication by the mobile station.\nIn Iu mode, the network decides if the security mode control procedure shall be invoked (see 3GPP TS 25.331 [23c] and 3GPP TS 44.118 [111]). An indication from the RR sublayer that the security mode control procedure is completed, or reception of a CM SERVICE ACCEPT message, shall be treated as a service acceptance indication by the mobile station.\nThe MM connection re-establishment is completed, timer T3230 shall be stopped, all CM entities associated with the re-establishment shall be informed, and MM sublayer state MM CONNECTION ACTIVE is re-entered. All the MM connections are considered to be active.\nIf the network cannot associate the re-establishment request with any existing call for that mobile station, a CM SERVICE REJECT message is returned with the reject cause:\n#38\t\"call cannot be identified\"\nIf call re-establishment cannot be performed for other reasons, a CM SERVICE REJECT is returned, the appropriate reject cause may be any of the following (see annex G):\n# 4\t\t\t\"IMSI unknown in VLR\";\n# 6\t\t\t\"illegal ME\";\n#17\t\"network failure\";\n#22\t\"congestion\";\n#25\t\"not authorized for this CSG\";\n#32\t\"service option not supported\";\n#34\t\"service option temporarily out of order\".\nIf the service request is rejected due to general NAS level mobility management congestion control, the network shall set the MM cause value to #22 \"congestion\" and assign a back-off timer T3246 (see 3GPP TS 23.012 [140]).\nWhatever the reject cause a mobile station receiving a CM SERVICE REJECT as a response to the CM RE-ESTABLISHMENT REQUEST shall stop T3230, release all MM connections and proceed as described in subclause 4.5.3.1. In addition:\n-\tif cause value #4 is received, the mobile station deletes any TMSI, LAI and ciphering key sequence number in the SIM/USIM, changes the update status to NOT UPDATED (and stores it in the SIM/USIM according to subclause 4.1.2.2), and enters the MM sublayer state WAIT FOR NETWORK COMMAND. If subsequently the RR connection is released or aborted, this will force the mobile station to initiate a normal location updating. The CM re-establishment request shall not be memorized during the location updating procedure.\n-\tif cause value #6 is received, the mobile station deletes any TMSI, LAI and ciphering key sequence number in the SIM/USIM, changes the update status to ROAMING NOT ALLOWED (and stores it in the SIM/USIM according to subclause 4.1.2.2), and enters the MM sublayer state WAIT FOR NETWORK COMMAND. The MS shall consider the SIM/USIM as invalid for non-GPRS services until switch-off or the SIM/USIM is removed.\n-\tIf cause value # 22 is received, the T3246 value IE is present in the CM SERVICE REJECT message and the value indicates that this timer is neither zero nor deactivated, the MS shall abort the re-establishment, release any MM connections, and proceed as specified in subclause 4.5.3.1. The MS shall stop timer T3246 if it is running. If the CM SERVICE REJECT message is integrity protected, the MS shall start timer T3246 with the value provided in the T3246 value IE. If the CM SERVICE REJECT message is not integrity protected, the MS shall start timer T3246 with a random value from the default range specified in table 11.1. The MS stays in the current serving cell and applies the normal cell reselection process. The CM RE-ESTABLISHMENT REQUEST procedure should not be restarted when timer T3246 expires or is stopped.\nIf cause value #22 is received, the T3246 value IE is not present in the CM SERVICE REJECT message or if the value provided in the T3246 value IE indicates that this timer is zero or deactivated, the MS shall abort the re-establishment, release any MM connections, and proceed as specified in subclause 4.5.3.1.\n-\tif cause value #25 is received from a CSG cell and the mobile station is in UTRAN Iu mode, the MS shall check whether the CM SERVICE REJECT message with cause #25 is integrity protected. If the message is not integrity protected, the MS shall discard the message. Otherwise, the MS shall remove the entry corresponding to the CSG ID and associated PLMN identity of the cell where the MS has sent the CM SERVICE REQUEST message from the Allowed CSG list if the CSG ID and associated PLMN identity are contained in the Allowed CSG list, and enter the MM sublayer state WAIT FOR NETWORK COMMAND. If the CSG ID and associated PLMN identity of the cell where the MS has sent the CM SERVICE REQUEST message is contained in the Operator CSG list, the MS shall proceed as specified in 3GPP TS 23.122 [14] subclause 3.1A.\nIf cause value #25 is received and the cell is not a CSG cell or the MS is not in UTRAN Iu mode, the MS shall discard the CM SERVICE REJECT message.\nMobile station side:\na)\tRandom access failure or RR connection establishment failure\nIf the mobile station detects a random access failure or RR connection establishment failure during the re-establishment of an MM connection, the re-establishment is aborted and all MM connections are released.\nb)\tRR connection failure\nIf a RR connection failure occurs, timer T3230 is stopped, the re-establishment is aborted and all active MM connections are released.\nc)\tIMSI deactivation\nIf the IMSI deactivated during the re-establishment attempt then timer T3230 is stopped, the re-establishment is aborted and all MM connections are released.\nd)\tT3230 expires\nIf T3230 expires (i.e. no response is given but a RR connection is available) the re-establishment is aborted, all active MM connections are released and the mobile station proceeds as described in subclause 4.5.3.1.\ne)\tReject causes #96, #97, #99, #100, #111 received\nThe mobile station shall perform the same actions as if timer T3230 had expired.\nNetwork side:\na)\tRR connection failure\nIf a RR connection failure occurs after receipt of the CM RE-ESTABLISHMENT REQUEST the network shall release all MM connections.\nb)\tInvalid message content\nUpon reception an invalid initial of message or a CM RE-ESTABLISHMENT REQUEST message with invalid content, a CM SERVICE REJECT message shall be returned with one of the following appropriate Reject cause indications:\n#96:\tMandatory information element error\n#99:\tInformation element non-existent or not implemented\n#100:\tConditional IE error\n#111:\tProtocol error, unspecified\nWhen the CM SERVICE REJECT message has been sent, the network shall release the RR connection.\nIf the mobile station's CM layer initiated the MM connection establishment but the CM layer wishes to abort the establishment prior to the completion of the establishment phase, the mobile station shall send a CM SERVICE ABORT message any time after the completion of the RR connection and not after the first CM message (e.g. SETUP) is sent.\nIf the first CM message has already been sent, the normal release procedure defined by the appropriate CM protocol applies and the CM SERVICE ABORT shall not be sent.\nSending of the CM SERVICE ABORT message is only allowed during the establishment of the first MM connection, where no other MM connection exists in parallel. If parallel MM connections exist already, a new connection establishment cannot be aborted and normal MM connection release according to subclause 4.5.3 applies after MM connection establishment.\nUpon transmission of the CM SERVICE ABORT message the mobile station shall stop timer T3230 and shall follow the procedures specified in subclause 4.5.3.1.\nUpon receipt of the CM SERVICE ABORT message the network shall abort ongoing processes, release the appropriate resources, and unless another MM connection establishment is pending or an RRLP procedure (see 3GPP TS 44.031 [23b]) or LCS procedure over RRC (see 3GPP TS 25.331 [23c]) is ongoing, initiate a normal release of the RR connection.\nAn MM connection can be established locally in the MS due to an SRVCC or vSRVCC handover (see 3GPP TS 23.216 [126]), i.e. without dedicated MM signalling. That is the case when the MS has:\n-\ta voice media stream carried over the PS domain that is handed over to the CS domain in A/Gb mode or Iu mode via SRVCC;\n-\ta voice media stream and a video media stream of a single session carried over the PS domain in S1 mode that is handed over to the CS domain in Iu mode via vSRVCC;\n-\ta voice media stream and a video media stream of a single session carried over the PS domain in S1 mode but only the voice media stream is handed over to the CS domain in A/Gb mode via SRVCC; or\n-\ta voice media stream carried over the PS domain in N1 mode that is handed over to the CS domain in Iu mode via 5G-SRVCC handover from NG-RAN to UTRAN.\nAn MS in MM state MM IDLE shall establish the MM connection locally when it receives an indication from lower layers that either a voice only SRVCC handover or a voice and video SRVCC handover was completed successfully.\nAfter completing MM connection establishment, the MM layer shall indicate \"MM connection establishment due to SRVCC handover\" or \"MM connection establishment due to vSRVCC handover\" to the upper layer and shall enter state MM CONNECTION ACTIVE.\nThe MM Connection establishment procedures for a dual radio voice call continuity (DRVCC) access transfer follow the procedures described in subclause 4.5.1.1 with the following additions:\nUpon request from the upper layers to set up a DRVCC call, the MS shall initiate the MM connection establishment and send a CM SERVICE REQUEST message. The MS shall include the Additional update parameters information element indicating \"DRVCC call\". If the MS determines that it is in a different location area than the stored location area, the MS shall first initiate a normal location updating procedure regardless of Network Mode of Operation. The MS shall indicate \"follow-on request pending\", shall include the Additional update parameters information element indicating \"DRVCC call\", and shall not include the MS network feature support information element in the LOCATION UPDATING REQUEST message.\nThe network may use the \"DRVCC call\" indication to decide whether to initiate any of the MM common procedures.\nIf the MS and the network have an established GSM security context or UMTS security context, the MS and the network may take the key(s) of the established security context into use as specified in subclause 4.3.2.7a.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "4.5.2\tMM connection information transfer phase",
                            "text_content": "After the MM connection has been established, it can be used by the CM sublayer entity for information transfer. According to the protocol architecture described in 3GPP TS 24.007 [20], each CM entity will have its own MM connection. These different MM connections are identified by the protocol discriminator PD and, additionally, by the transaction identifier TI.\nAll MM common procedures may be initiated at any time while MM connections are active. Except for Short Message Control which uses a separate layer 2 low priority data link, no priority mechanism is defined between the CM, MM and RR sublayer messages.\nA CM sublayer entity, after having been advised that a MM connection has been established, can request the transfer of CM messages. The CM messages passed to the MM sublayer are then sent to the other side of the interface with the PD and TI set according to the source entity.\nUpon receiving a CM message, the MM sublayer will distribute it to the relevant CM entity according to the PD value and TI value. However, if the received CM message is the first for the MM connection (identified by PD and TI), the MM sublayer will in addition indicate to the CM entity that a new MM connection has been established.\nRR connection failure:\nIf the RR connection failure occurs during a RR or MM common procedure, the consequent actions are described together with that procedure.\nIn other cases, the following applies:\n-\tMobile station:\nThe MM sublayer shall indicate to all CM entities associated with active MM connections that the MM connection is interrupted, the subsequent action of the MM sublayer (call re-establishment, see 4.5.1.6, or local release) will then depend on the decisions by the CM entities.\n-\tNetwork:\nThe MM sublayer shall locally release all active MM connections. As an option the network may delay the release of all or some of the MM connections to allow the mobile station to initiate call re-establishment.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "4.5.3\tMM connection release",
                            "text_content": "An established MM connection can be released by the local CM entity. The release of the CM connection will then be done locally in the MM sublayer, i.e. no MM message are sent over the radio interface for this purpose.\nIf all MM connections are released by their CM entities, and no RRLP procedure (see 3GPP TS 44.031 [23b]) and no LCS procedure over RRC (see 3GPP TS 25.331 [23c]) is ongoing, the mobile station shall set timer T3240 and enter the state WAIT FOR NETWORK COMMAND, expecting the release of the RR connection.\nIf all MM connections are released by their CM entities and an RRLP procedure or LCS procedure over RRC is ongoing, the MS shall start the timer T3241 and enter the state RR CONNECTION RELEASE NOT ALLOWED.\nIf the MS is expecting the release of the RR connection in MM state WAIT FOR NETWORK COMMAND and an RRLP procedure or LCS procedure over RRC is started, the MS shall stop the timer T3240, start the timer T3241 and enter the state RR CONNECTION RELEASE NOT ALLOWED.\nIf the MS is in MM state RR CONNECTION RELEASE NOT ALLOWED and the ongoing RRLP procedure or LCS procedure over RRC is finished, the MS shall stop the timer T3241, reset and start the timer T3240 and shall enter the state WAIT FOR NETWORK COMMAND.\nIf the MS receives the \"Extended wait time\" for CS domain from the lower layers when no location updating or CM service request procedure is ongoing, the MS shall ignore the \"Extended wait time\".\nIn the network, if the last MM connection is released by its user, the MM sublayer may decide to release the RR connection. The RR connection may be maintained by the network, e.g. in order to establish another MM connection.\nIf the RR connection is not released within a given time controlled by the timer T3240 or T3241, the mobile station shall abort the RR connection. In both cases, either after a RR connection release triggered from the network side or after a RR connection abort requested by the MS-side, the MS shall return to MM IDLE state; the service state depending upon the current update status as specified in subclause 4.2.3. If the UE determines a service state in which a Location Update procedure is required, the UE shall reset the location update attempt counter and immediately start the Location Updating procedure as specified in subclause 4.4.4.\n(Only applicable for mobile stations supporting VGCS talking:)\nIf a mobile station which is in the MM sublayer state MM CONNECTION ACTIVE (GROUP TRANSMIT MODE) receives a request from the GCC sublayer to perform an uplink release, the MM sublayer requests the RR sublayer to perform an uplink release procedure and enters the MM sublayer state RECEIVING GROUP CALL (NORMAL SERVICE).\n",
                            "figures_meta_data": [],
                            "tables": []
                        }
                    ]
                },
                {
                    "title": "4.6\tReceiving a MM STATUS message by a MM entity.",
                    "description": "",
                    "summary": "",
                    "text_content": "If the MM entity of the mobile station receives a MM STATUS message no state transition and no specific action shall be taken as seen from the radio interface, i.e. local actions are possible.\nWith the exceptions described for the responses to the CM SERVICE PROMPT message, the actions to be taken on receiving a MM STATUS message in the network are an implementation dependent option.\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "4.7\tElementary mobility management procedures for GPRS services",
                    "description": "",
                    "summary": "",
                    "text_content": "",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": [
                        {
                            "title": "4.7.1\tGeneral",
                            "text_content": "This subclause describes the basic functions offered by the mobility management (GMM) sublayer at the radio interface (reference point Um/UU). The functionality is described in terms of timers and procedures. During GMM procedures, procedures of CM layer services via the PS domain, e.g. SM, SMS, and SS, are suspended.\nThe lower layers shall indicate a logical link failure or an RR sublayer failure or an RRC sublayer failure to the GMM sublayer. The failure indicates an error that cannot be corrected by the lower layers.\nIf ciphering is to be applied on a GMM context, all GMM messages shall be ciphered except the following messages:\n--\tATTACH REQUEST;\n--\tATTACH REJECT;\n--\tAUTHENTICATION AND CIPHERING REQUEST;\n--\tAUTHENTICATION AND CIPHERING RESPONSE;\n--\tAUTHENTICATION AND CIPHERING FAILURE;\n--\tAUTHENTICATION AND CIPHERING REJECT;\n--\tIDENTITY REQUEST;\n--\tIDENTITY RESPONSE;\n--\tROUTING AREA UPDATE REQUEST; and\n--\tROUTING AREA UPDATE REJECT.\nThe requirements in subclause 4.7.1.2a are only applicable for MSs and networks supporting EC-GSM-IoT (see 3GPP TS 43.064 [159]).\nFor the MS, integrity protected signalling is mandatory for the GMM messages and SM messagres once a valid UMTS security context exists and has been taken into use. For the network, integrity protected signalling is mandatory for the GMM messages and SM messages once authentication and ciphering procedure is initiated by the network. Integrity protection of all GMM signalling messages and SM messages is the responsibility of the LLC layer. In addition, the GMM layer protects the AUTHENTICATION AND CIPHERING REQUEST message and the AUTHENTICATION AND CIPHERING RESPONSE message by a message authentication code (MAC) calculated at the GMM layer when an authentication takes place in the Authentication and Ciphering procedure. This message authentication code is included in the AUTHENTICATION AND CIPHERING REQUEST message and the AUTHENTICATION AND CIPHERING RESPONSE message. The GMM layer is always using the new UMTS security context derived from the AKA taking place in the Authentication and Ciphering procedure when calculating the message authentication code (MAC) at GMM layer.\nThe GMM layer activates integrity protection in the LLC layer by providing an indication when integrity protection shall be started.\nIntegrity protection is initiated in the MS upon request from the network. This is done using the authentication and ciphering procedure at the GMM layer (3GPP TS 43.020 [13] and 3GPP TS 44.064 [78a]).\nDetails of the integrity protection and verification of GMM signalling messages are specified in 3GPP TS 43.020 [13].\nExcept the messages listed below, no GMM signalling messages shall be processed by the receiving GMM entity in the MS or forwarded to the SM entity, unless the use of integrity protection has been successfully negotiated:\n-\tGMM messages:\n-\tIDENTITY REQUEST (only if the requested identification parameter is IMSI)\n-\tATTACH REJECT (if the cause is not #25)\n-\tAUTHENTICATION AND CIPHERING REJECT\n-\tROUTING AREA UPDATE REJECT (if the cause is not #25)\n-\tDETACH ACCEPT (for non power-off)\nNOTE:\tThese messages are accepted by the MS without integrity protection, as in certain situations they are sent by the network before integrity protection can be activated.\nAll SM messages shall be integrity protected.\nOnce the integrity protection has been successfully negotiated, the receiving GMM or SM entity in the MS shall not process any GMM signalling messages unless they have been successfully integrity checked by the LLC layer. If GMM signalling messages, having not successfully passed the integrity check, are received, then the LLC layer in the MS discards that message. The processing of the AUTHENTICATION AND CIPHERING REQUEST message, at authentication, that has not successfully passed the integrity check at GMM layer is specified in subclause 4.7.7.2. If any GMM or SM signalling message is received without integrity protection even though integrity protection has been successfully negotiated, then the GMM layer shall discard this message.\nExcept the messages listed below, no GMM signalling messages shall be processed by the receiving GMM entity in the network or forwarded to the SM entity, unless integrity protection has been successfully negotiated:\n-\tGMM messages:\n-\tATTACH REQUEST;\n-\tIDENTITY RESPONSE (if requested identification parameter is IMSI);\n-\tAUTHENTICATION AND CIPHERING FAILURE;\n-\tDETACH REQUEST;\n-\tDETACH ACCEPT.\nAll SM messages are integrity protected.\nOnce a valid UMTS security context exists, until integrity protection has been successfully negotiated, the receiving GMM entity in the network shall process the following GMM signalling messages, even if the MAC included in the LLC frame carrying the GMM message fails the integrity check or cannot be verified in the LLC layer, as the UMTS security context is not available in the network:\n-\tATTACH REQUEST;\n-\tIDENTITY RESPONSE (if requested identification parameter is IMSI);\n-\tAUTHENTICATION AND CIPHERING FAILURE;\n-\tDETACH REQUEST (if sent before integrity protection has been activated);\n-\tDETACH ACCEPT;\n-\tROUTING AREA UPDATE REQUEST;\nNOTE:\tThese messages are processed by the GMM layer even when the MAC fails the integrity check or cannot be verified, as in certain situations they can be sent by the MS protected with an UMTS security context that is no longer available in the network.\nIf an ATTACH REQUEST message fails the integrity check, the network shall authenticate the subscriber before processing the attach request any further.\nIf a ROUTING AREA UPDATE REQUEST message fails the integrity check, the network shall initiate an re-authentication of the subscriber by initiating an authentication and ciphering procedure.\nOnce integrity protection has been successfully negotiated, the receiving GMM or SM entity in the network shall not process any GMM or SM signalling messages unless they have been successfully integrity checked by the LLC layer. If any GMM or SM signalling message, having not successfully passed the integrity check, is received, then the LLC layer in the network discards that message. The processing of the AUTHENTICATION AND CIPHERING RESPONSE message when authentication is taking place, that has not successfully passed the integrity check at GMM layer is specified in subclause 4.7.7.3. If any GMM or SM signalling message is received, as not integrity protected even though integrity protection has been successfully negotiated, then the GMM layer shall discard this message.\nEstablishment of integrity protection of layer 3 signalling messages and optionally user plane data is done during the attach procedure. The MS shall indicate support for integrity protection in the MS network capability IE included in the ATTACH REQUEST message and the ROUTING AREA UPDATE REQUEST message to the network.\nWhen an MS sends an ATTACH REQUEST message or a ROUTING AREA UPDATE REQUEST message, then if the MS has no UMTS security context, it shall send the ATTACH REQUEST or the ROUTING AREA UPDATE REQUEST message without integrity protection to the network. If the network supports integrity protection, then the network activates integrity protection by initiating an authentication and ciphering procedure. The network selects an integrity algorithm among the supported integrity algorithms indicated by the MS in the MS network capability IE. After successful completion of the authentication and ciphering procedure, all layer 3 signalling messages sent between the MS and network are integrity protected in the LLC layer using the new UMTS security context.\nWhen an MS sends an ATTACH REQUEST message or a ROUTING AREA UPDATE REQUEST message, then if the MS has a UMTS security context, it shall send the ATTACH REQUEST or the ROUTING AREA UPDATE REQUEST message integrity protected with the current UMTS security context to the network. The MS shall include the CKSN indicating the current UMTS security context value in the initial ATTACH REQUEST message or a ROUTING AREA UPDATE REQUEST message. The MS shall use the integrity algorithm identified by the stored integrity algorithm identifier. The network shall check whether the CKSN included in the initial ATTACH REQUEST message or the ROUTING AREA UPDATE REQUEST message belongs to an UMTS security context available in the network, and if yes, then the network re-establishes integrity protection of layer 3 signalling messages in the LLC layer:\n-\tby replying with a GMM message (ATTACH ACCEPT or ROUTING AREA UPDATE ACCEPT) that is integrity protected in LLC layer by using the current UMTS security context. From this time onward, all layer 3 signalling messages exchanged between the MS and the network are sent integrity protected, except for the messages specified in subclause 4.7.1.2a; or\n-\tby initiating an authentication and ciphering procedure. This procedure can be used by the network to select a new integrity algorithm different from the one currently used by the MS.\nNOTE:\tEven if the message authentication code protecting the ATTACH REQUEST or the ROUTING AREA UPDATE message in the LLC layer cannot be verified in the network due to the integrity key and the integrity algorithm in the LLC layer at the network not having been configured yet for this MS, the network progresses the attach procedure and the routing atra updating procedure at the GMM layer anyway without having to run a new authentication and ciphering procedure if the network decides to re-use the same encryption- and integrity keys and the same ciphering and integrity algorithms and not run a re-authentication.\nIf an MS supports integrity protection of user plane data, then the MS shall indicate in the MS network capability IE to the network that it supports integrity protection of user plane data when it sends an ATTACH REQUEST message or a ROUTING AREA UPDATE REQUEST message. If the network supports integrity protection of the user plane data, then the network shall indicate in the ATTACH ACCEPT message or the ROUTING AREA UPDATE ACCEPT message to the MS that integrity protection of user plane data shall be used.\nWhen the network initiates a re-authentication to create a new UMTS security context, the AUTHENTICATION AND CIPHERING REQUEST message and AUTHENTICATION AND CIPHERING RESPONSE message exchanged during the authentication and ciphering procedure are integrity protected with the new UMTS security context at GMM layer by including a MAC. The AUTHENTICATION AND CIPHERING REQUEST message and AUTHENTICATION AND CIPHERING RESPONSE message may be also integrity protected at the LLC layer using the current UMTS security context, if any. Both UE and network shall continue to use the current UMTS security context, until the network initiates a re-authentication in the authentication and ciphering procedure. The AUTHENTICATION AND CIPHERING REQUEST message sent by the network includes the CKSN of the new UMTS security context to be used. The SGSN shall send the AUTHENTICATION AND CIPHERING REQUEST message integrity protected with the new UMTS security context at GMM layer by including a MAC, but unciphered. When the UE responds with an AUTHENTICATION AND CIPHERING RESPONSE message, it shall send the message integrity protected with the new UMTS security context at GMM layer by including a MAC, but unciphered.\nThe UE shall take the new UMTS security context and the indicated integrity algorithm and encryption algorithm received in the AUTHENTICATION AND CIPHERING REQUEST message, into use in the LLC layer after sending the AUTHENTICATION AND CIPHERING RESPONSE message. The network shall take the new UMTS security context and the indicated integrity algorithm and encryption algorithm sent in the AUTHENTICATION AND CIPHERING REQUEST message, into use in the LLC layer in the network after receiving the AUTHENTICATION AND CIPHERING RESPONSE message and a successful check of the RES.\nThe network may assign a P-TMSI signature to an MS in an attach, routing area update, or P-TMSI reallocation procedure. Only in combination with a valid P-TMSI, this P-TMSI signature is used by the MS for authentication and identification purposes in the subsequent attach, routing area update or detach procedure. If the MS has no valid P-TMSI it shall not use the P-TMSI signature in the subsequent attach, routing area update or detach procedure. Upon successful completion of the subsequent attach or routing area update procedure, the used P-TMSI signature shall be deleted. Upon completion of an MS initiated detach procedure, the used P-TMSI signature shall be deleted. Upon completion of a network initiated detach procedure the P-TMSI signature shall be kept, unless explicitly specified otherwise in subclause 4.7.4.2.2.\nIn A/Gb mode, while a packet TMSI (P-TMSI) is used in the GMM sublayer for identification of an MS, a temporary logical link identity (TLLI) is used for addressing purposes at the RR sublayer.\nIn Iu mode a Radio Network Temporary Identity (RNTI) identifies a user between the MS and the UTRAN or GERAN. The relationship between RNTI and IMSI is known only in the MS and in the UTRAN, see 3GPP TS 25.301 [128].\nThis subclause describes how the RR addressing is managed by GMM. For the detailed coding of the different TLLI types and how a TLLI can be derived from a P-TMSI, see 3GPP TS 23.003 [10].\nIf the MS is configured for \"AttachWithIMSI\" as specified in 3GPP TS 24.368 [135] or 3GPP TS 31.102 [112] and is entering a new PLMN which is neither the registered PLMN nor in the list of equivalent PLMNs, the MS should proceed as specified for case ii) below and use a randomly selected random TLLI for the transmission of the ATTACH REQUEST message.\nFor all other cases, the MS shall determine the TLLI as follows:\nFor an MS not supporting S1 mode, two cases can be distinguished:\n-\ta valid P-TMSI is available in the MS; or\n-\tno valid P-TMSI is available in the MS.\ni)\tvalid P-TMSI available\nIf the MS has stored a valid P-TMSI, the MS shall derive a foreign TLLI from that P-TMSI and shall use it for transmission of the:\n-\tATTACH REQUEST message of any GPRS combined/non-combined attach procedure; other GMM messages sent during this procedure shall be transmitted using the same foreign TLLI until the ATTACH ACCEPT message or the ATTACH REJECT message is received; and\n-\tROUTING AREA UPDATE REQUEST message of a combined/non-combined RAU procedure if the MS has entered a new routing area, or if the GPRS update status is not equal to GU1 UPDATED. Other GMM messages sent during this procedure shall be transmitted using the same foreign TLLI, until the ROUTING AREA UPDATE ACCEPT message or the ROUTING AREA UPDATE REJECT message is received.\nAfter a successful GPRS attach or routing area update procedure, independent of whether a new P-TMSI is assigned, if the MS has stored a valid P-TMSI then the MS shall derive a local TLLI from the stored P-TMSI and shall use it for addressing at lower layers.\nNOTE 1:\tAlthough the MS derives a local TLLI for addressing at lower layers, the network should not assume that it will receive only LLC frames using a local TLLI. Immediately after the successful GPRS attach or routing area update procedure, the network must be prepared to continue accepting LLC frames from the MS still using the foreign TLLI.\nii)\tno valid P-TMSI available\nWhen the MS has not stored a valid P-TMSI, i.e. the MS is not attached to GPRS, the MS shall use a randomly selected random TLLI for transmission of the:\n-\tATTACH REQUEST message of any combined/non-combined GPRS attach procedure.\nThe same randomly selected random TLLI value shall be used for all message retransmission attempts and for the cell updates within one attach attempt.\nUpon receipt of an ATTACH REQUEST message, the network shall assign a P-TMSI to the MS. The network derives a local TLLI from the assigned P-TMSI, and transmits the assigned P-TMSI to the MS.\nUpon receipt of the assigned P-TMSI, the MS shall derive the local TLLI from this P-TMSI and shall use it for addressing at lower layers.\nNOTE 2:\tAlthough the MS derives a local TLLI for addressing at lower layers, the network should not assume that it will receive only LLC frames using a local TLLI. Immediately after the successful GPRS attach, the network must be prepared to continue accepting LLC frames from the MS still using the random TLLI.\nIn both cases the MS shall acknowledge the reception of the assigned P-TMSI to the network. After receipt of the acknowledgement, the network shall use the local TLLI for addressing at lower layers.\nFor an MS supporting S1 mode, the following five cases can be distinguished:\na)\tthe TIN indicates \"P-TMSI\" or \"RAT-related TMSI\" and the MS holds a valid P-TMSI and a RAI;\nb)\tthe TIN indicates \"GUTI\" and the MS holds a valid GUTI allocated by an MME;\nc)\tthe TIN is deleted and the MS holds a valid P-TMSI and RAI;\nd)\tthe TIN is deleted and the MS holds a valid GUTI allocated by an MME, but no valid P-TMSI and RAI; or\ne)\tnone of the previous cases is fulfilled.\nIn case a) the MS shall derive a foreign TLLI from the P-TMSI and proceed as specified for case i) above.\nIn case b), the MS shall derive a P-TMSI from the GUTI and then a foreign TLLI from this P-TMSI and proceed as specified for case i) above.\nNOTE 3:\tThe mapping of the GUTI to the P-TMSI is specified in 3GPP TS 23.003 [10].\nIn case c) the MS shall derive a foreign TLLI from the P-TMSI and proceed as specified for case i) above.\nIn case d) the MS shall derive a P-TMSI from the GUTI and then a foreign TLLI from this P-TMSI and proceed as specified for case i) above.\nIn case e) the MS shall proceed as as specified for case ii) above.\nFor transmission of an ATTACH REQUEST message, or a ROUTING AREA UPDATE REQUEST message after a routing area change, the MS also provides the lower layers with the DCN-ID according to the following rules:\na)\tif a DCN-ID for the PLMN code of the selected PLMN is available in the MS, the MS shall provide this DCN-ID to the lower layers; or\nb)\tif no DCN-ID for the PLMN code of the selected PLMN is available but a Default_DCN_ID value is available in the MS, as specified in 3GPP TS 24.368 [135] or in USIM file NASCONFIG as specified in 3GPP TS 31.102 [112], the MS shall provide the Default_DCN_ID value to the lower layers.\nIf a new P-TMSI is assigned by the network the MS and the network shall handle the old and the new P-TMSI as follows:\nUpon receipt of a GMM message containing a new P-TMSI the MS shall consider the new P-TMSI and new RAI and also the old P-TMSI and old RAI as valid in order to react to paging requests and downlink transmission of LLC frames. For uplink transmission of LLC frames the new P-TMSI shall be used.\nNOTE:\tFor the case of multiple consecutive P-TMSI REALLOCATION COMMAND messages, the old P-TMSI is the latest P-TMSI included by the network in a previous message different from the multiple consecutive P-TMSI REALLOCATION COMMAND messages.\nThe MS shall consider the old P-TMSI and old RAI as invalid as soon as an LLC frame is received with the local TLLI derived from the new P-TMSI.\nUpon the transmission of a GMM message containing a new P-TMSI the network shall consider the new P-TMSI and new RAI and also the old P-TMSI and old RAI as valid in order to be able to receive LLC frames from the MS.\nThe network shall consider the old P-TMSI and old RAI as invalid as soon as an LLC frame is received with the local TLLI derived from the new P-TMSI.\nIf a new P-TMSI is assigned by the network the MS and the network shall handle the old and the new P-TMSI as follows:\nUpon receipt of a GMM message containing a new P-TMSI the MS shall consider the new P-TMSI and new RAI as valid. Old P-TMSI and old RAI are regarded as invalid.\nThe network shall consider the old P-TMSI and old RAI as invalid as soon as an acknowledge message (e.g. ATTACH COMPLETE, ROUTING AREA UPDATE COMPLETE and P-TMSI REALLOCATION COMPLETE) is received.\nIn the following tables below the abbreviations 'A/Gb mode I' and 'A/Gb mode II' are used for network operation mode I and II in A/Gb mode.\nIn the following tables below the abbreviations 'Iu mode I' and 'Iu mode II' are used for network operation modes I and II in Iu mode.\nWhenever an MS moves to a new RA, the procedures executed by the MS depend on the network mode of operation in the old and new routing area.\nIn case the MS is in state GMM REGISTERED or GMM ROUTING AREA UPDATING INITIATED and is in operation mode A or B, the MS shall execute according to table 4.7.1.6.1-1:\nTable 4.7.1.6.1-1/3GPP TS 24.008: Mode A or B\n\n\n(*)\tIntended to remove the Gs association in the MSC/VLR.\n(**)\tIntended to establish the Gs association in the MSC/VLR.\n(***)\tIf the MS that needs only GPRS services and \"SMS-only service\" moves to a new routing area, see subclause 4.1.1.2.2.\nFurther details are implementation issues.\nWhenever an MS moves to a new RA, the procedures executed by the MS depend on the network mode of operation in the old and new routing area.\nIn case the MS is in state GMM-REGISTERED or GMM-ROUTING-AREA-UPDATING-INITIATED and is in operation mode A, the MS shall execute:\nTable 4.7.1.6.4/3GPP TS 24.008: Mode A\n\n(*)\tIntended to remove the Gs association in the MSC/VLR.\n(**)\tIntended to establish the Gs association in the MSC/VLR.\n(***)\tIf the MS that needs only GPRS services and \"SMS-only service\" moves to a new routing area, see subclause 4.1.1.2.2.\nFurther details are implementation issues.\nWhenever an MS moves to a new RA supporting the A/Gb mode radio interface, the procedures executed by the MS depend on the network mode of operation in the old and new routing area.\nIn case the MS is in state GMM-REGISTERED or GMM-ROUTING-AREA-UPDATING-INITIATED and is in operation mode:\na)\tA in Iu mode, an MS that changes to GPRS operation mode A or B in A/Gb mode shall execute:\nTable 4.7.1.6.5/3GPP TS 24.008: Mode A in Iu mode changing to GPRS mode A or B in A/Gb mode\n\nb)\tC in Iu mode, the MS shall change to GPRS operation mode C in A/Gb mode and shall execute the normal Routing Area Update procedure.\nc)\tCS in Iu mode, the MS shall execute the normal Location Update procedure.\n(*)\tIntended to remove the Gs association in the MSC/VLR.\n(**)\tIntended to establish the Gs association in the MSC/VLR.\n(***)\tIf the MS that needs only GPRS services and \"SMS-only service\" moves to a new routing area, see subclause 4.1.1.2.2.\nFurther details are implementation issues.\nWhenever an MS moves to a new RA supporting the Iu mode radio interface, the procedures executed by the MS depend on the network mode of operation in the old and new routing area.\nIn case the MS is in state GMM-REGISTERED or GMM-ROUTING-AREA-UPDATING-INITIATED and is in operation mode:\na)\tA or B in A/Gb mode, the MS shall change to operation mode A in Iu mode and shall execute:\nTable 4.7.1.6.8/3GPP TS 24.008: Mode A or B in A/Gb mode changing to mode A in Iu mode\n\nb)\tC in A/Gb mode, an MS that changes to operation mode C in Iu mode shall execute a Normal Routing Area Update.\n\n(*)\tIntended to remove the Gs association in the MSC/VLR.\n(**)\tIntended to establish the Gs association in the MSC/VLR.\n(***)\tIf the MS that needs only GPRS services and \"SMS-only service\" moves to a new routing area, see subclause 4.1.1.2.2.\nFurther details are implementation issues.\nFor the Iu mode to A/Gb mode and A/Gb mode to Iu mode intersystem change the following cases can be distinguished:\na)\tIntersystem change between cells belonging to different RA's:\nThe procedures executed by the MS depends on the network mode of operation in the old and new RA. If a change of the network operation mode has occurred in the new RA, then the MS shall behave as specified in subclause 4.7.1.6. If no change of the network operation mode has occurred in the new RA, then the MS shall initiate the normal or combined routing area updating procedure depending on the network operation mode in the current RA.\nb)\tIntersystem change between cells belonging to the same RA:\n1)\tIf the READY timer is running in the MS in A/Gb mode before or after the inter-system change occurs,or the MS is in PMM-CONNECTED mode in Iu mode, before the inter-system change occurs then the MS shall perform a normal or combined routing area updating procedure depending on the network mode of operation in the current RA.\n2)\tIf the READY timer is not running in the MS in A/Gb mode before the inter-system change occurs, or the MS is in PMM-IDLE mode in Iu mode before the inter-system change and the READY timer is not running in the MS in A/Gb mode after the intersystem change, then, unless a routing area updating procedure is required according to case c) or case b) 3) below or according to subclause 4.7.5.1 and 4.7.5.2.1, the MS shall not perform a routing area updating procedure until uplink user data or signalling information needs to be sent from the MS to the network.\n-\tIf the MS is in the same access network(i.e. A/Gb mode or Iu mode), as when it last sent user data or signalling messages, the procedures defined for that access system shall be followed. This shall be sending of an LLC PDU in an A/Gb mode cell or initiating the service request procedure in an Iu mode cell.\n-\tIf the MS is in a different access network (i.e. A/Gb mode or Iu mode), as when it last sent user data or signalling messages, the normal or combined routing area updating procedure shall be performed depending on the network operation mode in the current RA, before the sending of user data or signalling messages. If the signalling message is a DETACH REQUEST indicating \"power off\", the routing area updating procedure need not to be performed.\n-\tIf the periodic routing area update timer expires the MS shall initiate the periodic routing area updating procedure.\n3)\tIf the READY timer is not running in the MS in A/Gb mode or the MS is in PMM-IDLE mode in Iu mode, then the MS shall perform a normal or combined routing area updating procedure depending on the network mode of operation in the current RA if the MS is required to perform routing area updating for IMS voice termination as specified in annex P.3.\n4)\tIf the READY timer is not running in the network in A/Gb mode or the network is in PMM-IDLE mode in Iu mode, then the network shall page the MS if downlink user data or signalling information needs to be sent from the network to the MS. This shall include both A/Gb mode and Iu mode cells.\n-\tIf the MS receives the paging indication in the same access network (i.e. A/Gb mode or Iu mode), as when it last sent user data or signalling information, the MS shall send any LLC PDU in a A/Gb mode cell or shall initiate the service request procedure indicating service type \"paging response\" in an Iu mode cell.\n-\tIf the MS receives the paging indication in a different access network (i.e. A/Gb mode or Iu mode), as when it last sent user data or signalling information, the MS shall perform a normal or combined routing area updating procedure depending on the network operation mode in the current RA.\nc)\tIntersystem handover from A/Gb mode to Iu mode during a CS connection:\nAfter the successful completion of the handover from an A/Gb mode cell to an Iu mode cell, an MS which has performed the GPRS suspension procedure in Gb mode (see 3GPP TS 44.018 [84]) (i.e. an MS in MS operation mode B or an DTM MS in a A/Gb mode cell that does not support DTM) shall perform a normal routing area updating procedure in the Iu mode cell in order to resume the GPRS services in the network, before sending any other signalling messages or user data.\nIf ISR is activated and the MS returns from S1 mode to a cell belonging to a RA which is different from the RA where the MS is registered, the MS initiates a normal or combined routing area updating procedure depending on the network operation mode in the current RA.\nIf ISR is activated and the MS returns from S1 mode to a cell belonging to the RA where the MS is registered, the following cases can be distinguished:\na)\tInter-system change due to PS handover:\nIf the PS handover is to A/Gb mode, the MS initiates a normal or combined routing area updating procedure depending on the network operation mode in the current RA.\nb)\tInter-system change not due to PS handover:\n1)\tIf the READY timer is running in the MS after the inters-ystem change occurs, then the MS shall perform a normal or combined routing area updating procedure depending on the network mode of operation in the current RA.\n2)\tIf the READY timer is not running in the MS in A/Gb mode or the MS is in PMM-IDLE mode in Iu mode after the intersystem change occurs, unless a routing area updating procedure is required according to subclause 4.7.5.1 and 4.7.5.2.1, the MS shall not perform a routing area updating procedure until uplink user data or signalling information needs to be sent from the MS to the network.\n-\tIf the MS is in the same access network, (i.e. A/Gb mode or Iu mode), as when it last sent user data or signalling messages in a cell belonging to the RA where the MS is registered, the procedures defined for that access system shall be followed. This shall be sending of an LLC PDU in a A/Gb mode cell or initiating the SERVICE REQUEST procedure in an Iu mode cell.\n-\tIf the MS is in a different access network (i.e. A/Gb mode or Iu mode), as when it last sent user data or signalling messages in a cell belonging to the RA where the MS is registered, the normal or combined RA update procedure shall be performed depending on the network operation mode in the current RA, before the sending of user data or signalling messages. If the signalling message is a DETACH REQUEST indicating \"power off\", the routing area updating procedure need not be performed.\n-\tIf the periodic routing area update timer expires the MS shall initiate the periodic RA update procedure.\n3)\tIf the READY timer is not running in the network in A/Gb mode or the network is in PMM-IDLE mode in Iu mode, then the network shall page the MS if downlink user data or signalling information needs to be sent from the network to the MS. This shall include both A/Gb mode and Iu mode cells.\n-\tIf the MS receives the paging indication in the same access network (i.e. A/Gb mode or Iu mode), as when it last sent user data or signalling information in a cell belonging to the RA where the MS is registered, the MS shall send any LLC PDU in a A/Gb mode cell or shall initiate the service request procedure indicating service type \"paging response\" in an Iu mode cell.\n-\tIf the MS receives the paging indication in a different access network (i.e. A/Gb mode or Iu mode), as when it last sent user data or signalling information in a cell belonging to the RA where the MS is registered, the MS shall perform normal or combined routing area updating procedure shall be performed depending on the network operation mode in the current RA.\nIf an eCall only MS (as determined by information configured in USIM) capable of eCall over IMS returns from S1 mode to A/Gb or Iu mode, the MS shall:\na)\tif timer T3444 is running, start timer T3242 with the time left on timer T3444, and stop timer T3444;\nb)\tif timer T3445 is running, start timer T3243 with the time left on timer T3445, and stop timer T3445;\nc)\tif the MS is attached for GPRS services only and timer T3444 or timer T3445 is running:\n-\tperform a combined routing area updating procedure with IMSI attach if the network operates in network operation mode I; and\n-\tperform a routing area updating procedure and a location area updating procedure if the network operates in network operation mode II; and\nd)\tif the MS is attached for both GPRS services and non-GPRS services and timer T3444 or timer T3445 is running:\n-\tperform a combined routing area updating procedure if the network operates in network operation mode I; and\n-\tperform a routing area updating procedure and a location are updating procedure if the network operates in network operation mode II.\nNOTE:\tTimers T3444 and T3445 are specified in 3GPP TS 24.301 [120].\nIf an eCall only MS (as determined by information configured in USIM) capable of eCall over IMS returns to packet idle mode following the release of a call to an HPLMN designated non-emergency MSISDN or URI for test or terminal reconfiguration service which was handed over from S1 mode and timer T3243 is not running, the MS shall start timer T3243.\nThe Mobile Equipment shall contain a list of \"forbidden PLMNs for GPRS service\". This lists shall be erased when the MS is switched off or when the SIM/USIM is removed or upon the expiry of the timer T3245 as described in subclause 4.1.1.6. The PLMN identification received on the BCCH shall be added to the list whenever a GPRS attach or routing area update is rejected by the network with the cause \"GPRS services not allowed in this PLMN\" or whenever a GPRS detach is initiated by the network with the cause \"GPRS services not allowed in this PLMN\".\nIn a shared network, the MS shall choose one of the PLMN identities as specified in 3GPP TS 23.122 [14]. The PLMN identity selected for a GPRS attach procedure, or the PLMN identity used to construct the RAI that triggered the routing area updating procedure shall be added to the list of \"forbidden PLMNs for GPRS service\" whenever such a procedure is rejected by the network with the cause \"GPRS services not allowed in this PLMN\". Whenever a GPRS detach is initiated by the network with the cause \"GPRS services not allowed in this PLMN\", the PLMN identity that was selected for GPRS attach procedure or routing area update procedure shall be added to the list of \"forbidden PLMNs for GPRS service\".\nThe maximum number of possible entries in this list is implementation dependent, but must be at least one entry. When the list is full and a new entry has to be inserted, the oldest entry shall be deleted.\nIn order to route the NAS message to an appropriate SGSN, the MS NAS provides the lower layers with the routing parameter according to the following rules:\na)\tif the TIN indicates \"P-TMSI\" or \"RAT-related TMSI\", and the MS holds a valid P-TMSI, the MS NAS shall provide the lower layers with the P-TMSI;\nb)\tif the TIN indicates \"GUTI\" and the MS holds a valid GUTI allocated by an MME, the MS NAS shall provide the lower layers with the P-TMSI mapped from the GUTI (see 3GPP TS 23.003 [10]);\nc)\tif the TIN is not available and the MS holds a valid P-TMSI, the MS NAS shall provide the lower layers with the P-TMSI; or\nd)\tif the TIN is not available and the MS holds a valid GUTI allocated by an MME, but no valid P-TMSI, the MS NAS shall provide the lower layers with the P-TMSI mapped from the GUTI (see 3GPP TS 23.003 [10]).\nWhen an ATTACH REQUEST message, or a ROUTING AREA UPDATE REQUEST message after a routing area change, is sent to establish a PS signalling connection, the MS NAS also provides the lower layers with the DCN-ID according to the following rules:\na)\tif a DCN-ID for the PLMN code of the selected PLMN is available in the MS, this DCN-ID the MS NAS shall provide this DCN-ID to the lower layers; or\nb)\tif no DCN-ID for the PLMN code of the selected PLMN is available but a Default_DCN_ID value is available in the MS, as specified in 3GPP TS 24.368 [135] or in USIM file NASCONFIG as specified in 3GPP TS 31.102 [112], the Default_DCN_ID value MS NAS shall provide the Default_DCN_ID value to the lower layers.\nIn Iu mode, to allow the network to release the PS signalling connection (see 3GPP TS 25.331 [23c] and 3GPP TS 44.118 [111]) the MS:\na)\tshall start the timer T3340 if the MS receives any of the reject cause values #11, #12, #13, #15 or #25;\nb)\tshall start the timer T3340 if the network indicates \"no follow-on proceed\" in the ROUTING AREA UPDATE ACCEPT or ATTACH ACCEPT message and user plane radio access bearers have not been setup;\nc)\tshall start the timer T3340 if the MS receives a DETACH ACCEPT message and the MS has set the detach type to \"IMSI detach\" in the DETACH REQUEST message and user plane radio access bearers have not been set up; or\nd)\tmay start the timer T3340 if the MS receives any of the reject cause values #3, #6, #7 or #8 or if it receives an  AUTHENTICATION AND CIPHERING REJECT message.\nUpon expiry of T3340, the MS shall release the established PS signalling connection (see 3GPP TS 25.331 [23c] and 3GPP TS 44.118 [111]).\nUpon release of the established PS signalling connection, if timer T3243 is not running, the MS shall start timer T3243 when:\n-\tthe MS is an eCall only MS (as determined by information configured in USIM);\n-\tthe MS is capable of eCall over IMS; and\n-\tthe PS signalling connection that was released had been established for a call to an HPLMN designated non-emergency MSISDN or URI for test or terminal reconfiguration service which was handed over from S1 mode.\nIn case b, if the MS has signalling pending, then it shall request a new PS signalling connection for further signalling.\nIn case b and c,\n-\tupon an indication from the lower layers that radio accesss bearer(s) is set up, the MS shall stop timer T3340 and may send uplink signalling via the existing PS signalling connection or user data via radio access bearer(s). If the MS is establishing a PDN connection for emergency bearer services or the MS is initiating a service request procedure to send user data for emergency bearer services, the MS shall send the uplink signalling via the existing PS signalling connection;\n-\tupon receipt of a REQUEST PDP CONTEXT ACTIVATION message, MODIFY PDP CONTEXT REQUEST message, DEACTIVATE PDP CONTEXT REQUEST message, REQUEST SECONDARY PDP CONTEXT ACTIVATION message or REQUEST MBMS CONTEXT ACTIVATION message, the MS shall stop timer T3340 and may send uplink signalling via the existing PS signalling connection. If the MS is establishing a PDN connection for emergency bearer services or the MS is initiating a service request procedure to send user data for emergency bearer services, the MS shall send the uplink signalling via the existing PS signalling connection; or\n-\tupon receipt of a DETACH REQUEST message, the MS shall stop timer T3340 and respond to the network initiated GPRS detach as specified in subclause 4.7.4.2.\nIf the MS receives the \"Extended wait time\" for PS domain from the lower layers when no attach, routing area updating or service request procedure is ongoing, the MS shall ignore the \"Extended wait time\".\nIf the MS needs to perform PLMN selection, the MS may release the established PS signalling connection (see 3GPP TS 25.331 [23c] and 3GPP TS 44.118 [111]).\nAn MS, which supports 3GPP PS data off (see 3GPP TS 23.060 [74]), can be configured with up to two lists of 3GPP PS data off exempt services as specified in 3GPP TS 24.368 [135] or in the EF3GPPPSDATAOFF USIM file as specified in 3GPP TS 31.102 [112]:\n-\ta list of 3GPP PS data off exempt services to be used in the HPLMN or EHPLMN (if the EHPLMN list is present); and\n-\ta list of 3GPP PS data off exempt services to be used in the VPLMN.\nIf only the list of 3GPP PS data off exempt services to be used in the HPLMN or EHPLMN (if the EHPLMN list is present) is configured at the MS, this list shall be also used in the VPLMN.\nIf the MS supports 3GPP PS data off, the MS shall provide the 3GPP PS data off UE status in the protocol configuration options IE during PDP context activation procedure (see subclause 6.1.3.1).\nThe network informs the MS about the support of 3GPP PS data off during PDP context activation procedure as specified in subclause 6.1.3.1. If 3GPP data off support is not indicated in the protocol configuration options IE in the ACTIVATE PDP CONTEXT ACCEPT message, the MS shall not indicate any change of 3GPP PS data off UE status for the PDN connection established by the PDP context activation procedure; otherwise the MS shall indicate change of the 3GPP PS data off UE status for the PDN connection by using the PDP context modification procedure as specified in subclause 6.1.3.3. If the network does not provide indication of support of 3GPP PS data off during PDP context activation procedure, the MS behaviour for non-exempt service requests from the network is implementation dependent.\nWhen the 3GPP PS data off UE status is \"activated\":\na)\tthe MS does not send uplink IP packets except:\n-\tfor those services indicated in the list of 3GPP PS data off exempt services to be used in the HPLMN or EHPLMN (if the EHPLMN list is present) as specified in 3GPP TS 24.368 [135] when the MS is in its HPLMN or EHPLMN (if the EHPLMN list is present);\n-\tfor those services indicated in the list of 3GPP PS data off exempt services to be used in the HPLMN or EHPLMN (if the EHPLMN list is present) when the MS is in the VPLMN, if only the list of 3GPP PS data off exempt services to be used in the HPLMN or EHPLMN (if the EHPLMN list is present) is configured to the MS as specified in 3GPP TS 24.368 [135];\n-\tfor those services indicated in the list of 3GPP PS data off exempt services to be used in the VPLMN when the MS is in the VPLMN, if the list of 3GPP PS data off exempt services to be used in the VPLMN is configured to the MS as specified in 3GPP TS 24.368 [135];\n-\tfor those services indicated in the EF3GPPPSDATAOFF USIM file as specified in 3GPP TS 31.102 [112]; and\n-\tany uplink traffic due to procedures specified in 3GPP TS 24.229 [13D]; and\nb)\tthe MS does not send uplink non-IP user data packets.\nOtherwise the MS sends uplink user data packets without restriction.\nNOTE:\tIf the MS supports 3GPP PS data off, uplink IP packets are filtered as specified in 3GPP TS 24.229 [13D] in subclause B.3.1.5.\n",
                            "figures_meta_data": [],
                            "tables": [
                                {
                                    "description": "",
                                    "table number": 7,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 4.7.1.6.4/3GPP TS 24.008: Mode A",
                                    "table number": 8,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 4.7.1.6.5/3GPP TS 24.008: Mode A in Iu mode changing to GPRS mode A or B in A/Gb mode",
                                    "table number": 9,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 4.7.1.6.8/3GPP TS 24.008: Mode A or B in A/Gb mode changing to mode A in Iu mode",
                                    "table number": 10,
                                    "summary": "",
                                    "name": ""
                                }
                            ]
                        },
                        {
                            "title": "4.7.2\tGPRS Mobility management timers and UMTS PS signalling connection control",
                            "text_content": "The READY timer, T3314 is used in the MS and in the network per each assigned P-TMSI to control the cell updating procedure.\nWhen the READY timer is running or has been deactivated the MS shall perform cell update each time a new cell is selected (see 3GPP TS 43.022 [82]). If a routing area border is crossed, a routing area updating procedure shall be performed instead of a cell update.\nWhen the READY timer has expired:\n-\tthe MS shall perform the routing area updating procedure when a routing area border is crossed;\n-\tthe MS shall not perform a cell update when a new cell is selected.\n-\tthe network shall page the MS if down-link user data or signalling information needs to be sent to the MS.\nAll other GMM procedures are not affected by the READY timer.\nThe READY timer is started:\n-\tin the MS when the GMM entity receives an indication from lower layers that an LLC frame other than LLC NULL frame has been transmitted on the radio interface; and\n-\tin the network when the GMM entity receives an indication from lower layers that an LLC frame other than LLC NULL frame has been successfully received by the network.\nWithin GMM signalling procedures the network includes a \"force to standby\" information element, in order to indicate whether or not the READY timer shall be stopped when returning to the GMM-REGISTERED state. If the \"force to standby\" information element is received within more than one message during a ongoing GMM specific procedure, the last one received shall apply. If the READY timer is deactivated and the network indicates \"force to standby\" with the \"force to standby\" information element, this shall not cause a modification of the READY timer.\nThe READY timer is not affected by state transitions to and from the GMM-REGISTERED.SUSPENDED sub-state.\nThe value of the READY timer may be negotiated between the MS and the network using the GPRS attach or GPRS routing area updating procedure.\n-\tIf the MS wishes to indicate its preference for a READY timer value it shall include the preferred values into the ATTACH REQUEST and/or ROUTING AREA UPDATE REQUEST messages. The preferred values may be smaller, equal to or greater than the default values or may be equal to the value requesting the READY Timer function to be deactivated.\n-\tRegardless of whether or not a timer value has been received by the network in the ATTACH REQUEST or ROUTING AREA UPDATE REQUEST messages, the network may include a timer value for the READY timer (different or not from the default value) into the ATTACH ACCEPT or ROUTING AREA UPDATE ACCEPT messages, respectively. If the READY Timer value was included, it shall be applied for the GMM context by the network and by the MS.\n-\tWhen the MS proposes a READY Timer value and the Network does not include any READY Timer Value in its answer, then the value proposed by the MS shall be applied for the GMM context by the Network and by the MS.\n-\tWhen neither the MS nor the Network proposes a READY Timer value into the ATTACH REQUEST/ATTACH ACCEPT or ROUTING AREA UPDATE REQUEST/ROUTING AREA UPDATE ACCEPT message, then the default value shall be used.\nIf the negotiated READY timer value indicates that the ready timer function is deactivated, the READY timer shall always run without expiry. If the negotiated READY timer value indicates that the ready timer function is deactivated, and within the same procedure the network indicates \"force to standby\" with the \"force to standby\" information element, the READY timer shall always run without expiry. If the negotiated READY timer value is set to zero, the READY timer shall be stopped immediately.\nTo account for the LLC frame uplink transmission delay, the READY timer value should be slightly shorter in the network than in the MS. This is a network implementation issue.\nIf a new READY timer value is negotiated, the MS shall upon the reception of the ATTACH ACCEPT or ROUTING AREA UPDATE ACCEPT message perform an initial cell update (either by transmitting a LLC frame or, if required, a ATTACH COMPLETE or ROUTING AREA UPDATE COMPLETE message), in order to apply the new READY timer value immediately. If both the network and the MS support the Cell Notification, the initial cell update shall use any LLC frame except the LLC NULL frame. If the new READY timer value is set to zero or if the network indicates \"force to standby\" with the \"force to standby\" IE, the initial cell update should not be done.\nThe READY timer is not applicable for Iu mode in S1 mode.\nUpon completion of a successful GPRS attach or routing area updating procedure in Iu mode, the MS shall stop the READY timer, if running.\nUpon completion of a successful EPS attach or tracking area updating procedure, the MS shall stop the READY timer, if running.\nIn Iu mode, an MS may indicate a READY timer value to the network in the ATTACH REQUEST and the ROUTING AREA UPDATE REQUEST messages.\nIf a READY timer value is received by an MS capable of both Iu mode and A/Gb mode in the ATTACH ACCEPT or the ROUTING AREA UPDATE ACCEPT message, then the MS shall store the received value in order to use it at an intersystem change from Iu mode to A/Gb mode.\nThe READY timer is not applicable for Iu mode in S1 mode.\nUpon completion of a successful GPRS attach or routing area updating procedure, the network shall stop the READY timer, if running.\nWhen the SGSN is informed by the HLR/HSS that the MS performed an EPS attach or by the MME that the UE is performing a tracking area updating procedure, the SGSN shall stop the READY timer, if running.\nThe periodic routing area updating procedure is used to periodically notify the availability of the MS to the network. The procedure is controlled in the MS by timer T3312. The value of timer T3312 is sent by the network to the MS in the messages ATTACH ACCEPT and ROUTING AREA UPDATE ACCEPT. The value of timer T3312 shall be unique within a RA.\nIf the value of timer T3312 received by the MS in A/Gb mode or received in Iu mode in a message with integrity protection contains an indication that the timer is deactivated or the timer value is zero, then timer T3312 is deactivated and the MS shall not perform the periodic routing area updating procedure.\nIn Iu mode, if the value of timer T3312 is received in a message without integrity protection and the indicated value is larger than the last received value, or the indicated value is \"deactivated\" or zero, the MS shall use the last received value. If there is no last received value, then the MS shall use the default value.\nIn A/Gb mode, the timer T3312 is reset and started with its initial value, when the READY timer is stopped or expires. Timer T3312 is stopped and shall be set to its initial value for the next start when the READY timer is started. If after a READY timer negotiation the READY timer value is set to zero, timer T3312 is reset and started with its initial value. If the initial READY timer value is zero, the timer T3312 is reset and started with its initial value, when the ROUTING AREA UPDATE REQUEST message is transmitted.\nIn Iu mode, timer T3312 is reset and started with its initial value, when the MS changes from PMM-CONNECTED to PMM-IDLE mode. Timer T3312 is stopped when the MS enters PMM-CONNECTED mode.\nIf the MS is attached for emergency bearer services, when timer T3312 expires, the MS shall not initiate a periodic routing area updating procedure, but shall locally detach from the network. When the MS is camping on a suitable cell, it may re-attach to regain normal service.\nIf the MS is not attached for emergency bearer services, when timer T3312 expires, the periodic routing area updating procedure shall be started and timer T3312 shall be set to its initial value for the next start.\nIf the MS is in a state other than GMM-REGISTERED.NORMAL-SERVICE when timer T3312 expires, the periodic routing area updating procedure is delayed until the MS returns to GMM-REGISTERED.NORMAL-SERVICE.\nIn A/Gb mode, if the MS in MS operation mode B is in the state GMM-REGISTERED.SUSPENDED when timer T3312 expires the periodic routing area updating procedure is delayed until the state is left.\nIf ISR is activated, the MS shall keep both timer T3412 and timer T3312. The two separate timers run in the MS for updating the MME and the SGSN independently. The MS shall start timer T3323 if timer T3312 expires, and timer T3346 is running or the MS is in one of the following states:\n-\tGMM-REGISTERED.NO-CELL-AVAILABLE;\n-\tGMM-REGISTERED.PLMN-SEARCH;\n-\tGMM-REGISTERED.UPDATE-NEEDED; or\n-\tGMM-REGISTERED.LIMITED-SERVICE.\nThe MS shall initiate the routing area updating procedure and stop timer T3323 when the MS enters the state GMM-REGISTERED.NORMAL-SERVICE before timer T3323 expires. After expiry of timer T3323 the MS shall deactivate ISR by setting its TIN to \"GUTI\".\nIf timer T3323 expires, the MS shall memorize that it has to initiate a routing area updating procedure when it returns to state GMM-REGISTERED.NORMAL-SERVICE.\nThe network supervises the periodic routing area updating procedure by means of the mobile reachable timer.\nIf the MS is not attached for emergency bearer services, the mobile reachable timer shall be longer than timer T3312. In this case, by default, the mobile reachable timer is 4 minutes greater than timer T3312.\nNOTE 1:\tAccording to subclause 4.7.5.1.5, if a periodic routing area updating procedure fails repeatedly, it can take more than 7 minutes before the MS starts using MM specific procedures.\nThe network may include timer T3312 extended value IE in the ATTACH ACCEPT message or ROUTING AREA UPDATE ACCEPT message only if the MS indicates support of the timer T3312 extended value in the MS network feature support IE.\nIf the network includes the timer T3312 extended value IE in the ATTACH ACCEPT message or ROUTING AREA UPDATE ACCEPT message, the network shall use the timer T3312 extended value IE as the value of timer T3312.\nIf ISR is not activated, when the mobile reachable timer expires, typically the network stops sending paging messages to the mobile and may take other appropriate actions.\nIf the MS is attached for emergency bearer services, the SGSN shall set the mobile reachable timer with a value equal to timer T3312. When the mobile reachable timer expires, the SGSN shall locally detach the MS.\nIn A/Gb mode, the mobile reachable timer is reset and started with the value as indicated above, when the READY timer is stopped or expires. The mobile reachable timer is stopped when the READY timer is started.\nIn A/Gb mode, if after a READY timer negotiation the READY timer value is set to zero, the mobile reachable timer is reset and started with its initial value. If the initial READY timer value is zero, the mobile reachable timer is reset and started with its initial value, when the ROUTING AREA UPDATE REQUEST message is received.\nIn Iu mode, the mobile reachable timer is reset and started with the value as indicated above, when the MS changes from PMM-CONNECTED to PMM-IDLE mode. The mobile reachable timer is stopped when the MS enters PMM-CONNECTED mode.\nIf ISR is activated, upon expiry of the mobile reachable timer the network shall start the implicit detach timer. By default, the implicit detach timer is 4 minutes greater than timer T3323. If the implicit detach timer expires before the MS contacts the network, the network shall implicitly detach the MS and deactivate ISR.\nIf ISR is not activated, upon expiry of the mobile reachable timer the network may start the implicit detach timer. The value of the implicit detach timer is network dependent. If the implicit detach timer expires before the MS contacts the network, the network shall implicitly detach the MS.\nIf the network includes the T3324 value IE in the ATTACH ACCEPT message or ROUTING AREA UPDATE ACCEPT message and if the MS is not attached for emergency bearer services and has no PDN connection for emergency bearer services, the network shall set the active timer to a value equal to the value of timer T3324.\nIf the MS has established a PDN connection for emergency bearer services after receiving the timer T3324 value IE in the ATTACH ACCEPT message or ROUTING AREA UPDATE ACCEPT message, the active timer shall not be started.\nWhen the active timer expires, typically the network stops sending paging messages to the mobile and may take other appropriate actions.\nIn A/Gb mode, the active timer is reset and started with the value as indicated above, when the READY timer is stopped or expires. The active timer is stopped when the READY timer is started.\nIn Iu mode, the active timer is reset and started with the value as indicated above, when the MS changes from PMM-CONNECTED to PMM-IDLE mode. The active timer is stopped when the MS enters PMM-CONNECTED mode.\nNOTE 2:\tISR is not activated when the network includes the T3324 value IE in the ATTACH ACCEPT message or ROUTING AREA UPDATE ACCEPT message.\nIf the SGSN includes timer T the ROUTING AREA UPDATE REJECT message or the SERVICE REJECT message and timer T3346 is greater than timer T3312, the SGSN sets the mobile reachable timer and the implicit detach timer such that the sum of the timer values is greater than timer T3346.\nNOTE 3:\tAccording to subclause 4.7.5.1.5, if a periodic routing area updating procedure fails repeatedly, it can take more than 7 minutes before the MS starts using MM specific procedures.\nIf the MS is both IMSI attached for GPRS and non-GPRS services, and if the MS lost coverage of the registered PLMN and timer T3312 expires or timer T3323 expires, then:\na)\tif the MS returns to coverage in a cell that supports GPRS and that indicates that the network is in network operation mode I, then the MS shall either perform the combined routing area update procedure indicating \"combined RA/LA updating with IMSI attach\"; or\nb)\tif the MS returns to coverage in a cell in the same RA that supports GPRS and that indicates that the network is in network operation mode II, then the MS shall perform the periodic routing area updating procedure indicating \"Periodic updating\"; or\nc)\tif the MS was both IMSI attached for GPRS and non-GPRS services in network operation mode I and the MS returns to coverage in a cell in the same LA that does not support GPRS, then the MS shall perform the periodic location updating procedure. In addition, the MS shall perform a combined routing area update procedure indicating \"combined RA/LA updating with IMSI attach\" when the MS enters a cell that supports GPRS and that indicates that the network is in network operation mode I; or\nd)\tif the MS returns to coverage in a new RA, the description given in subclause 4.7.5 applies.\nIf this subclause specifies that the MS shall perform a periodic routing area updating procedure, but subclause 4.7.5 specifies the MS shall perform a normal or combined routing area updating procedure, the description in subclause 4.7.5 takes precedence.\nIf the MS is both IMSI attached for GPRS and non-GPRS services in a network that operates in network operation mode I, and if the MS has camped on a cell that does not support GPRS, and timer T3312 expires or timer T3323 expires, then the MS shall start an MM location updating procedure. In addition, the MS shall perform a combined routing area update procedure indicating \"combined RA/LA updating with IMSI attach\" when the MS enters a cell that supports GPRS and indicates that the network is in operation mode I.\nIf timer T3312 expires or timer T3323 expires during an ongoing CS connection, then a MS operating in MS operation mode B shall treat the expiry of T3312 when the MM state MM-IDLE is entered, analogous to the descriptions for the cases when the timer expires out of coverage or in a cell that does not support GPRS.\nIn A/Gb mode, timer T3312 and timer T3323 shall not be stopped when a GPRS MS enters state GMM-REGISTERED.SUSPENDED.\nAn MS shall enter PMM-CONNECTED mode when a PS signalling connection for packet switched domain is established between the MS and the network. The MS shall not perform periodic routing area update in PMM-CONNECTED mode.\nAn MS shall enter PMM-IDLE mode when the PS signalling connection for packet switched domain between the MS and the network has been released. The MS shall perform periodic routing area update in PMM-IDLE mode.\nForce to standby is not applicable for Iu mode.\nThe network shall always indicate Force to standby not indicated in the Force to standby information element.\nThe Force to standby information element shall be ignored by the MS.\nWhen the MS receives an indication from the lower layers that the RRC connection has been released with cause \"Directed signalling connection re-establishment\", see 3GPP TS 25.331 [23c] and 3GPP TS 44.118 [111], then the MS shall enter PMM-IDLE mode and initiate immediately a normal routing area update procedure (the use of normal or combined procedure depends on the network operation mode in the current serving cell) regardless whether the routing area has been changed since the last update or not. This routing area update procedure shall also be performed or continued if the MS has performed an inter-system change towards GSM, irrespective whether the READY timer is running or the MS is in PMM-IDLE or PMM-CONNECTED mode.\nA Cell Update may be requested by the low layers, see 3GPP TS 44.060 [76]. In this case the Cell Update shall be performed even if the READY timer is not running. If both the network and the MS support the Cell Notification, then the MS shall use the LLC NULL frame to perform the Cell Update.\nThe value of timer T3302 can be sent by the network to the MS in the ATTACH ACCEPT message, ROUTING AREA UPDATE ACCEPT message, ATTACH REJECT message, and ROUTING AREA UPDATE REJECT message. The MS shall apply this value, if the value is different from \"deactivated\" in the routing area registered by the MS, until a new value is received. The default value of this timer is used in the following cases:\n-\tATTACH ACCEPT message, ATTACH REJECT message, or ROUTING AREA UPDATE REJECT message is received without a value specified;\n-\tROUTING AREA UPDATE ACCEPT message is received without a value specified, and the update type in the ROUTING AREA UPDATE REQUEST message is not set to \"periodic updating\";\n-\tIn Iu mode, if the network provides a value in a non-integrity protected Iu mode GMM message and the MS is not attaching for emergency services or not attached for emergency services;\n-\tIn A/Gb mode and if the MS supports integrity protection, if the network provides a value in a non-integrity protected GMM message;\n-\tthe network indicates that the timer is \"deactivated\";\n-\tthe MS does not have a stored value for this timer;\n-\ta new PLMN which is not in the list of equivalent PLMNs has been entered, the routing area updating fails and the routing area updating attempt counter is equal to 5; or\n-\ta new PLMN which is not in the list of equivalent PLMNs has been entered, the attach procedure fails, and the attach attempt counter is equal to 5.\nAn MS supporting PSM may request the network to assign a value for T3324 by including a requested timer value in:\n-\tthe ATTACH REQUEST or ROUTING AREA UPDATE REQUEST message (in A/Gb mode and Iu mode ); or\n-\tthe ATTACH REQUEST or TRACKING AREA UPDATE REQUEST message (in S1 mode).\nThe value of timer T3324 can be sent by the network to the MS in:\n-\tthe ATTACH ACCEPT or ROUTING AREA UPDATE ACCEPT message (in A/Gb mode and Iu mode ); and\n-\tthe ATTACH ACCEPT or TRACKING AREA UPDATE ACCEPT message (in S1 mode).\nNOTE:\tBesides the value requested by the MS, the network can take local configuration into account when selecting a value for T3324 (see 3GPP TS 23.682 [133A], subclause 4.5.4).\nIn A/Gb mode and Iu mode, the MS shall apply the received T3324 value in the RA identified by the RAI contained in the ATTACH ACCEPT or ROUTING AREA UPDATE ACCEPT message, until a new value is received, T3324 is deactivated or a new PLMN is selected. The timer T3324 is deactivated if:\n-\tthe last attach or routing area updating attempt was not completed successfully;\n-\tthe network does not include a value for timer T3324 in the last ATTACH ACCEPT or ROUTING AREA UPDATE ACCEPT message received by the MS; or\n-\tthe indicated value of the timer is \"deactivated\".\nIn A/Gb mode and Iu mode, timer T3324 is reset and started with its initial value, when the MS changes from PMM-CONNECTED mode to PMM-IDLE mode (in Iu mode) or when the READY timer is stopped or expires (in A/Gb mode). Timer T3324 is stopped when the MS enters PMM-CONNECTED mode or GMM-DEREGISTERED state or the READY timer is started.\nIn S1 mode, the MS shall apply the received T3324 value in all tracking areas of the list of tracking areas assigned to the MS, until a new value is received, T3324 is deactivated or a new PLMN is selected. The timer T3324 is deactivated if:\n-\tthe last attach or tracking area updating attempt was not completed successfully;\n-\tthe network does not include a value for timer T3324 in the last ATTACH ACCEPT or TRACKING AREA UPDATE ACCEPT message received by the MS; or\n-\tthe indicated value of the timer is \"deactivated\".\nIn S1 mode, timer T3324 is reset and started with its initial value, when the MS changes from EMM-CONNECTED mode to EMM-IDLE mode. Timer T3324 is stopped when the MS enters EMM-CONNECTED mode or EMM-DEREGISTERED state.In A/Gb mode and Iu mode, when timer T3324 expires the MS may activate PSM as specified in subclause 4.7.2.9.\nIn S1 mode, when timer T3324 expires the MS may activate PSM as specified in 3GPP TS 24.301 [120], subclause 5.3.11.\nIn A/Gb mode and Iu mode, if timer T3324 expires during an ongoing CS connection, the MS shall take action on the expiry of timer T3324 as described in subclause 4.7.2.9 when the MM state MM-IDLE is entered.\nThe MS can request the use of power saving mode (PSM) during an attach or routing area updating procedures (see 3GPP TS 23.682 [133A] and 3GPP TS 23.060 [74]). The MS shall not request the use of PSM during:\n-\tan attach for emergency bearer services procedure;\n-\ta routing area updating procedure for initiating a PDN connection for emergency bearer services; or\n-\ta routing area updating procedure when the MS has a PDN connection established for emergency bearer services.\nThe network accepts the use of PSM by providing a specific value for timer T3324 when accepting the attach or routing area updating procedure. The MS may use PSM only if the network has provided the T3324 value IE during the last attach or routing area updating procedure with a value different from \"deactivated\".\nUpon expiry of the timer T3324 or if the T3324 value provided by the network is zero, the MS may deactivate the AS layer and activate PSM by entering the state GMM-REGISTERED.NO-CELL-AVAILABLE if:\na)\tthe MS is not attached for emergency bearer services;\nb)\tthe MS has no PDN connection for emergency bearer services;\nc)\tthe MS is in PMM-IDLE mode (in Iu mode) or the READY timer is not running (in A/Gb mode);\nd)\tthe MS is in the GMM-REGISTERED.NORMAL-SERVICE state; and\ne)\tno RR connection exists.\nIf conditions a, b, c and e are fulfilled, but the MS is in a state other than GMM-REGISTERED.NORMAL-SERVICE when timer T3324 expires, the MS may activate PSM when the MS returns to state GMM-REGISTERED.NORMAL-SERVICE.\nIf conditions a, b, c and d are fulfilled, but an RR connection exists, the MS may activate PSM when the RR connection has been released.\nAn MS that has already been allocated timer T3324 with a value different from \"deactivated\" and the timer T3324 has expired, may activate PSM if it receives an \"Extended wait time\" from lower layers.\nWhen PSM is activated all NAS timers are stopped and associated procedures aborted except for timers T3312, T3346, T3396, any backoff timers, and the timer T controlling the periodic search for HPLMN or EHPLMN (if the EHPLMN list is present) or higher prioritized PLMNs (see 3GPP TS 23.122 [14]).\nIf the MS is attached for emergency bearer services or has a PDN connection for emergency bearer services, the MS shall not activate PSM.\nThe MS may deactivate PSM at any time (e.g. for transfer of mobile originated signalling or user data, or to initiate a mobile originated circuit-switched transaction), by activating the AS layer before initiating the necessary GMM or MM procedures (if any).\nThe MS can request the use of extended idle mode DRX cycle (eDRX) during an attach or routing area updating procedure by including the extended DRX parameters IE (see 3GPP TS 23.682 [11A] and 3GPP TS 23.060 [74]). The MS shall not request the use of eDRX during:\n-\tan attach for emergency bearer services procedure; or\n-\ta routing area updating procedure for the MS attached for emergency bearer services.\nThe MS and the network may negotiate eDRX parameters during a routing area updating procedure when the MS has a PDP context for emergency bearer services.\nThe network accepts the request to use eDRX by providing the extended DRX parameters IE when accepting the attach or the routing area updating procedure. The MS shall use extended idle mode DRX cycle only if it received the extended DRX parameters IE during the last attach or routing area updating procedure and the MS does not have a PDP context for emergency bearer services.\nNOTE:\tIf the MS wants to keep using eDRX, the MS includes the extended DRX parameters IE in each attach or routing area updating procedure.\nIf the MS received the extended DRX parameters IE during the last attach or routing area updating procedure, upon the successful completion of the PDP context deactivation procedure for a PDP context for emergency bearer services, the MS shall resume eDRX.\nIf the network has provided the extended DRX parameters IE during the last attach or routing area updating procedure, upon the successful completion of the PDP context deactivation procedure for a PDP context for emergency bearer services, the network shall resume eDRX.\nIf the MS or the network locally deactivates the PDP context for emergency bearer service, the MS or the network shall not use eDRX until the MS receives eDRX parameters during a routing area updating procedure with PDP context synchronization or upon successful completion of a service request procedure.\nIf the MS did not receive the extended DRX parameters IE, or if the MS has a PDP context for emergency bearer services, the MS shall use the stored DRX parameters, if available.\nIf the network did not accept the request to use eDRX, or if the MS has a PDP context for emergency bearer services, the network shall use the stored DRX parameters, if available.\nThe MS can request the use of both PSM and eDRX during an attach or routing area update procedure but it is up to the network to decide to enable none, one of them or both (see 3GPP TS 23.682 [133A] and 3GPP TS 23.060 [74]).\nIf the network accepts the use of both PSM (see subclause 4.7.2.9) and eDRX (see subclause 4.7.2.10), the extended DRX parameters IE provided to the MS should allow for multiple paging occasions before the active timer expires.\nThe MS can support and use the extended coverage in GSM for IoT (EC-GSM-IoT) feature (see 3GPP TS 43.064 [159]). A GPRS MS using EC-GSM-IoT may operate in MS operation mode C only. If the MS uses one of the four coverage classes of EC-GSM-IoT as defined in 3GPP TS 43.064 [159], the MS shall calculate the value of the applicable NAS timers as indicated in tables 11.3, 11.3A and 11.2c using a multiplier of 3, unless the timer is deactivated. The NAS timer value obtained is used as described in the appropriate procedure subclause of this specification. The NAS timer value shall be calculated at start of a NAS procedure and shall not be re-calculated until the NAS procedure is completed, restarted or aborted.\nThe usage of one of the four coverage classes of EC-GSM-IoT by an MS is indicated to the SGSN by lower layers. When a SGSN that supports EC-GSM-IoT performs NAS signaling with an MS that is using EC-GSM-IoT, the SGSN shall calculate the value of the applicable NAS timers as indicated in tables 11.4, 11.4a and 11.2d using a multiplier of 3. The NAS timer value shall be calculated at start of a NAS procedure and shall not be re-calculated until the NAS procedure is completed, restarted or aborted.\nIn order to deal with use of extensive resources from the network, the operator may prevent specific subscribers from using enhanced coverage (see 3GPP TS 23.060 [74]). When in A/Gb mode, the MS supporting EC-GSM-IoT shall indicate support for restriction on use of enhanced coverage. The MS supporting restriction on use of enhanced coverage indicates \"Mobile station supports restriction on use of enhanced coverage\" in the MS network capability information element in the ATTACH REQUEST and ROUTING AREA UPDATE REQUEST message. If the MS supports restriction on use of enhanced coverage, the SGSN indicates whether the use of enhanced coverage is restricted or not in the ATTACH ACCEPT message and ROUTING AREA UPDATE ACCEPT message (see subclause 4.7.3.1 and subclause 4.7.5.1). If the use of enhanced coverage is restricted the MS shall not use enhanced coverage in the registered PLMN and in any PLMN which is in the list of equivalent PLMNs.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "4.7.3\tGPRS attach procedure",
                            "text_content": "The GPRS attach procedure is used for the following purposes:\n-\tnormal GPRS attach, performed by the MS to IMSI attach for GPRS services only. The normal GPRS attach procedure shall be used:\n-\tby GPRS MSs in MS operation mode C, independent of the network operation mode;\n-\tby GPRS MSs in MS operation modes A or B if the network operates in network operation mode II; and\n-\tby GPRS MSs in MS operation mode A, independent of the network operation mode, if a circuit-switched transaction is ongoing;\n-\tcombined GPRS attach procedure, used by GPRS MSs in MS operation modes A or B to attach the IMSI for GPRS and non-GPRS services provided that the network operates in network operation mode I.\n-\tGPRS attach for emergency bearer services, performed by the MS to IMSI or IMEI attach to emergency bearer services.\nThe lower layers indicate to NAS that the network does not support emergency bearer services for the MS in limited service state (see 3GPP TS 25.331 [23c]). This information is taken into account when deciding whether to initiate attach for emergency bearer services.\nWith a successful GPRS attach procedure a GMM context is established.\nWhen the timer T3346 is running, MS is allowed to initiate an attach procedure if:\n-\tthe MS is an MS configured to use AC11 – 15 in selected PLMN;\n-\tthe MS is attaching for emergency bearer services; or\n-\tthe MS has timer T3346 running because a request from an MS with the low priority indicator set to \"MS is configured for NAS signalling low priority\" was rejected, and the MS needs to attach without the low priority indicator, or with the low priority indicator set to \"MS is not configured for NAS signalling low priority\".\nAn eCall only mobile station that is not capable of eCall over IMS shall not perform a normal or combined GPRS attach procedure.\nAn eCall only mobile station that is capable of eCall over IMS may perform a normal or combined GPRS attach procedure only upon failure of a routing area updating procedure following intersystem change from S1 mode to A/Gb or Iu mode.\nWhen the MS moves from NG-RAN coverage to GERAN coverage, or from NG-RAN coverage to UTRAN coverage, the MS shall perform a normal or combined GPRS attach procedure, if the following applies:\n-\tthe MS initiated a registration procedure while in N1 mode; and\n-\tsince then the MS did not perform a successful EPS attach or tracking area updating procedure in S1 mode or GPRS attach or routing area updating procedure in A/Gb mode or Iu mode.\nSubclause 4.7.3.1 describes the GPRS attach procedure to attach the IMSI only for GPRS services. The combined GPRS attach procedure used to attach the IMSI for both GPRS and non-GPRS services is described in subclause 4.7.3.2. GPRS attach for emergency bearer services is described as part of subclause 4.7.3.1.\nIf an IMSI attach for non-GPRS services is requested and a GMM context exists, the routing area updating procedure shall be used as described in subclause 4.7.5.2.\nTo limit the number of consecutive rejected attach attempts, a GPRS attach attempt counter is introduced. The GPRS attach attempt counter shall be incremented as specified in subclause 4.7.3.1.5. Depending on the value of the GPRS attach attempt counter, specific actions shall be performed. The GPRS attach attempt counter shall be reset when:\n-\tthe MS is powered on;\n-\ta SIM/USIM is inserted;\n-\ta GPRS attach or combined GPRS attach procedure is successfully completed;\n-\tan attach or combined attach procedure is successfully completed in S1 mode;\n-\ta combined GPRS attach procedure is completed for GPRS services only with cause #2, #16, #17, #22 or #28;\n-\ta GPRS attach or combined GPRS attach procedure is rejected with cause #11, #12, #13, #14 ,#15 or #25;\n-\ta network initiated detach procedure is completed with cause #11, #12, #13, #14, #15 or #25; or\n-\ta new PLMN is selected;\nand additionally when the MS is in substate ATTEMPTING-TO-ATTACH:\n-\texpiry of timer T3302;\n-\ta new routing area is entered;\n-\tan attach is triggered by CM sublayer requests;\n-\ttimer T3346 is started.\nThe mobile equipment shall contain a list of \"forbidden location areas for roaming\", as well as a list of \"forbidden location areas for regional provision of service\". The handling of these lists is described in subclause 4.4.1; the same lists are used by GMM and MM procedures.\nIn a shared network, the MS shall choose one of the PLMN identities as specified in 3GPP TS 23.122 [14]. The MS shall construct the Routing Area Identification of the cell from this chosen PLMN identity, and the LAC and the RAC received on the BCCH. For:\n-\ta shared GERAN, in A/Gb mode, the chosen PLMN identity is indicated to the GERAN in the first RLC data block of an upper layer PDU (see 3GPP TS 44.060 [76]) when a foreign TLLI or a random TLLI is used by the network sharing supporting MS for the transmission.\n-\ta shared UTRAN, the chosen PLMN identity shall be indicated to the UTRAN in the RRC INITIAL DIRECT TRANSFER message (see 3GPP TS 25.331 [23c]).\nFor GERAN Iu mode, network sharing is not supported.\nWhenever an ATTACH REJECT message with the cause \"PLMN not allowed\" is received by the MS, the chosen PLMN indentity shall be stored in the \"forbidden PLMN list\" and if the MS is configured to use timer T3245 (see 3GPP TS 24.368 [135] or 3GPP TS 31.102 [112]) then the MS shall start timer T3245 and proceed as described in subclause 4.1.1.6. Whenever an ATTACH REJECT message is received by the MS with the cause \"Roaming not allowed in this location area\", \"Location Area not allowed\", or \"No suitable cells in Location Area\", the LAI that is part of the constructed RAI shall be stored in the suitable list.\nThe network informs the MS about the support of specific features, such as LCS-MOLR, MBMS, IMS voice over PS session, emergency bearer services in Iu mode in the Network feature supporti nformation element. The information is either explicitly given by sending the Network feature support IE or implicitly by not sending it. The handling in the network is described in subclause 9.4.2.9. The network can also use the Additional network feature support IE in order to inform the MS about the support of specific features such as the delivery of SMS via GPRS (GPRS-SMS) or implicitly by not sending it. The MS may use the support indications for LCS-MOLR, MBMS and GPRS-SMS to inform the user about the availability of the appropriate services. The MS shall not request the LCS-MOLR or MBMS services, if the service has not been indicated as available. The indication for MBMS is defined in subclause \"MBMS feature support indication\" in 3GPP TS 23.246 [106]. In an MS with IMS voice over PS capability, the IMS voice over PS session indicator and the emergency bearer services indicator shall be provided to the upper layers. The upper layers take the IMS voice over PS session indicator into account as specified in 3GPP TS 23.221 [131], subclause 7.2a and subclause 7.2b, when selecting the access domain for voice sessions or calls in Iu mode. When initiating an emergency call in Iu mode, the upper layers also take the emergency bearer services indicator into account for the access domain selection. The MS may use the GPRS-SMS indication in order to obtain SMS.\nThe GPRS attach procedure is a GMM procedure used by GPRS MSs to IMSI attach for GPRS services. The procedure is also used by GPRS MSs to IMSI or IMEI attach for emergency bearer services.\nThe attach type information element shall indicate \"GPRS attach\". For an MS attaching for emergency bearer services the attach type information element shall indicate \"Emergency attach\".\nIn state GMM-DEREGISTERED, the MS initiates the GPRS attach procedure by sending an ATTACH REQUEST message to the network, starts timer T3310 and enters state GMM-REGISTERED-INITIATED. If timer T3302 is currently running, the MS shall stop timer T3302. If timer T3311 is currently running, the MS shall stop timer T3311.\nIf the MS is configured for \"AttachWithIMSI\" as specified in 3GPP TS 24.368 [135] or 3GPP TS 31.102 [112] and the selected PLMN is neither the registered PLMN nor in the list of equivalent PLMNs, the MS shall include the IMSI in the Mobile identity IE in the ATTACH REQUEST message.\nFor all other cases:\nIf the MS does not support S1 mode:\n-\tthe MS capable of both Iu mode and A/Gb mode or only of A/Gb mode shall include a valid P-TMSI, if any is available, the P-TMSI signature associated with the P-TMSI and the routing area identity associated with the P-TMSI in the ATTACH REQUEST message. In addition, the MS shall include P-TMSI type IE with P-TMSI type set to \"native P-TMSI\". If there is no valid P-TMSI available, the IMSI shall be included instead of the P-TMSI and P-TMSI signature.\nIf the MS supports S1 mode:\n-\tif the TIN indicates \"GUTI\" and the MS holds a valid GUTI allocated by an MME, the MS shall map the GUTI into the Mobile identity IE, P-TMSI signature IE and Old routing area identification IE. The MS shall also include P-TMSI type IE with P-TMSI type set to \"mapped P-TMSI\". Additionally, if the MS holds a valid P-TMSI and RAI, the MS shall indicate the P-TMSI in the Additional mobile identity IE and the RAI in the Additional old routing area identification IE.\nNOTE:\tThe mapping of the GUTI to the P-TMSI, P-TMSI signature and RAI is specified in 3GPP TS 23.003 [10].\n-\tIf the TIN indicates \"P-TMSI\" or \"RAT-related TMSI\" and the MS holds a valid P-TMSI and a RAI, the MS shall indicate the P-TMSI in the Mobile identity IE and the RAI in the Old routing area identification IE. The MS shall also include P-TMSI type IE with P-TMSI type set to \"native P-TMSI\". If a P-TMSI signature is associated with the P-TMSI, the MS shall include it in the Old P-TMSI signature IE.\n-\tIf the TIN is deleted and\n-\tthe MS holds a valid P-TMSI and a RAI, the MS shall indicate the P-TMSI in the Mobile identity IE and the RAI in the Old routing area identification IE. The MS shall also include P-TMSI type IE with P-TMSI type set to \"native P-TMSI\". If a P-TMSI signature is associated with the P-TMSI, the MS shall include it in the Old P-TMSI signature IE; or\n-\tthe MS does not hold a valid P-TMSI and RAI, but holds a valid GUTI allocated by an MME, the MS shall map the GUTI into the Mobile identity IE, P-TMSI signature IE and Old routing area identification IE. The MS shall also include P-TMSI type IE with P-TMSI type set to \"mapped P-TMSI\"; or\n-\tthe MS does not hold a valid P-TMSI, RAI or GUTI, the MS shall include the IMSI in the Mobile identity IE.\n-\tOtherwise the MS shall include the  in the Mobile identity IE.\nIn the cases when the MS maps a GUTI into the Mobile identity IE, P-TMSI signature IE and Old routing area identification IE, then:\n-\tIf a current EPS security exists, the P-TMSI signature shall include a truncated NAS token as specified in 3GPP TS 33.401 [123]. In the GPRS ciphering key sequence number IE, the MS shall indicate the value of the eKSI associated with the current EPS security context. The MS shall derive CK' and IK' from the KASME and the NAS uplink COUNT value corresponding to the NAS token derived and handle the START value as specified in 3GPP TS 25.331 [23c]. Then, the MS shall store the mapped UMTS security context replacing the established UMTS security context for the PS domain.\n-\tIf a current EPS security does not exist, the MS shall set the truncated NAS token included in the P-TMSI signature to all zeros and the GPRS ciphering key sequence number to \"No key is available\".\nIf the MS is attaching for emergency bearer services and does not hold a valid GUTI, P-TMSI or IMSI as described above, the IMEI shall be included in the Mobile identity IE.\nThe MS shall also indicate within the DRX parameters whether it supports the split pg cycle option on CCCH. The optional support of the split pg cycle on CCCH by the network is indicated in SI13 or PSI1. Split pg cycle on CCCH is applied by both the network and the MS when the split pg cycle option is supported by both (see 3GPP TS 45.002 [32]).\nIf the MS supports eDRX and requests the use of eDRX, the MS shall include the extended DRX parameters IE in the ATTACH REQUEST message.\nIn Iu mode, if the MS wishes to prolong the established PS signalling connection after the GPRS attach procedure (for example, the MS has any CM application request pending), it may set a follow-on request pending indicator on (see subclause 4.7.13).\nAn MS attaching for emergency bearer services shall set the follow-on request pending indicator.\nIf the MS supports PSM and requests the use of PSM, then the MS shall include the T3324 value IE with a requested timer value in the ATTACH REQUEST message. When the MS includes the T3324 value IE and the MS indicates support for extended periodic timer value in the MS network feature support IE, it may also include the T3312 extended value IE to request a particular T3312 value to be allocated.\nIn A/Gb mode, if the MS supports the restriction on use of enhanced coverage, then the MS shall set the Restriction on use of enhanced coverage capability bit to \"Mobile station supports restriction of use of enhanced coverage\" in the MS network capability IE of the ATTACH REQUEST message.\nIf the MS supports dual connectivity of E-UTRA with New Radio (NR), then the MS shall set the Dual connectivity of E-UTRA with NR capability bit to \"Mobile station supports dual connectivity of E-UTRA with NR\" in the MS network capability IE of the ATTACH REQUEST message.\nIn A/Gb mode, if a UMTS security context is available and if the MS indicates support of integrity protection in the MS network capability IE included in the ATTACH REQUEST message, then the MS shall derive a GPRS GSM Kint key as described in subclause 4.7.7.3b and a GPRS GSM Kc128 key as described in subclause 4.7.7.3a. The MS shall then assign the GPRS GSM Kint key, the GPRS GSM Kc128 key, the GPRS GSM integrity algorithm and the GPRS GSM ciphering algorithm (identified by the information in the Ciphering Algorithm IE and Integrity Algorithm IE stored in the non-volatile ME memory) to the LLC layer, and indicate to the LLC layer that it shall start integrity protection. This shall be done so that the LLC layer can integrity protect, but not cipher, the ATTACH REQUEST message. The MS shall include the CKSN in the CKSN IE in the ATTACH REQUEST message. If the MS has no UMTS security context available, then the MS shall not integrity protect the ATTACH REQUEST message in the LLC layer. In this case the MS shall set the CKSN IE to the value \"no key is available\" and send the ATTACH REQUEST unprotected.\nIf the network receives an ATTACH REQUEST message containing the P-TMSI type IE and the Mobile identity IE with type of identity indicating \"TMSI/P-TMSI/M-TMSI\", and the network does not follow the use of the most significant bit of the LAC as specified in 3GPP TS 23.003 [10] subclause 2.8.2.2.2, the network shall use the P-TMSI type IE to determine whether the mobile identity included in the Mobile identity IE is a native P-TMSI or a mapped P-TMSI.\nThe network may initiate GMM common procedures, e.g. the GMM identification and GMM authentication and ciphering procedure, depending on the received information such as IMSI, CKSN, old RAI, P-TMSI and P-TMSI signature.\nDuring an attach for emergency bearer services, if not restricted by local regulations, the network shall not check for mobility and access restrictions, regional restrictions, subscription restrictions, or perform CSG access control when processing the ATTACH REQUEST message. The network shall not apply subscribed APN based congestion control during an attach procedure for emergency bearer services.\nIf the GPRS attach request is accepted by the network, an ATTACH ACCEPT message is sent to the MS.\nIn A/Gb mode, if the MS indicates support of integrity protection in the MS network capability IE in the ATTACH REQUEST message, and if the network supports integrity protection, then the network shall store all octets received from the MS in the MS network capability IE and in the MS Radio Access Capability IE, up to the maximum length defined for the respective information element.\nNOTE 1:\tThe network needs to store the MS network capability IE and the MS Radio Access Capability IE exactly as received from the MS and network is not allowed to ignore the \"higher\" octets sent by the MS even if the network does not support any features indicated in the higher octets. Otherwise the replay check of the MS network capability and the MS Radio Access Capability will fail in the MS.\nIn A/Gb mode, if a UMTS security context is available in the network and if the MS indicates support of integrity protection in the ATTACH REQUEST message and the network supports integrity protection, and if integrity protection of the ATTACH REQUEST message is successfully verified in the LLC layer in the network, then if the network decides to re-authenticate the MS or select a new integrity algorithm or ciphering algorithm, the network shall initiate an authentication and ciphering procedure.\nIn A/Gb mode, if a UMTS security context is available in the network and if the MS indicates support of integrity protection in the ATTACH REQUEST message and the network supports integrity protection if integrity protection of the ATTACH REQUEST message is successfully verified in the LLC layer in the network , the network may decide to continue using the stored: GPRS GSM Kint integrity key, the GPRS GSM Kc128 ciphering key, the GPRS GSM ciphering algorithm and the GPRS GSM integrity algorithm in the LLC layer without initiating an authentication and ciphering procedure. If the MS and network continue to use the same ciphering mode as when the MS was previously attached to the network, ciphering or no ciphering, the ciphering mode is re-established without the need to run an authentication and ciphering procedure. The network shall replay the MS network capability IE and the MS radio access capability IE received from the MS in the ATTACH REQUEST message, by including the MS network capability IE and the MS radio access capability IE in the ATTACH ACCEPT message to the MS. The GMM layer in the network shall assign the stored GPRS GSM Kint key, the GPRS GSM Kc128 key, the GPRS GSM integrity algorithm and the GPRS GSM ciphering algorithm to the LLC layer. The GMM layer in the network shall then indicate to the LLC layer that it shall start integrity protection and ciphering in the LLC layer before sending the ATTACH ACCEPT message to the MS. If the integrity protection of the ATTACH REQUEST message is not successfully verified in the LLC layer or if the ATTACH REQUEST message is received without integrity protection, then the network shall progress the ATTACH REQUEST message and initiate an authentication and ciphering procedure in order to authenticate the MS and activate integrity protection and ciphering in the MS.\nIn A/Gb mode, if a UMTS security context is available in the network and if the MS indicates support of integrity protection in the ATTACH REQUEST message and the network supports integrity protection, and if the network is not able to verify the message authentication code in the LLC layer protecting the ATTACH REQUEST message, due to the LLC layer at the network not having been configured yet with the integrity key and integrity algorithm for this MS, then the network shall progress the ATTACH REQUEST message at GMM layer anyway. If the CKSN included in the ATTACH REQUEST message belongs to an UMTS security context available in the network, then the network may re-establish integrity protection and ciphering of layer 3 signalling messages in the LLC layer without initiating an authentication and ciphering procedure.\nIn A/Gb mode, if the MS indicates support of integrity protection of user plane data in the MS network capability IE in the ATTACH REQUEST message, and if the network supports and accepts integrity protection of user plane data, then the network shall indicate integrity protection of user plane data to the MS in the ATTACH ACCEPT message. The MS shall indicate to the LLC layer to start integrity protection of user plane data after the reception of the ATTACH ACCEPT message. The same GPRS GSM Kint key and the same GPRS GSM integrity algorithm used for integrity protection of layer 3 signalling messages shall be used for integrity protection of user plane data in the LLC layer. The network shall indicate to the LLC layer to start integrity protection of user plane data after sending off the ATTACH ACCEPT message to the MS. If the network does not indicate to the MS in the ATTACH ACCEPT message that it accepts the use of integrity protection of user plane, and if the MS does not accept such a network, then the MS shall detach from the network.\nThe P-TMSI reallocation may be part of the GPRS attach procedure. When the ATTACH REQUEST includes the IMSI or IMEI, the SGSN shall allocate the P-TMSI. The P-TMSI that shall be allocated is then included in the ATTACH ACCEPT message together with the routing area identifier. The network shall, in this case, change to state GMM-COMMON-PROCEDURE-INITIATED and shall start timer T3350 as described in subclause 4.7.6. Furthermore, the network may assign a P-TMSI signature for the GMM context which is then also included in the ATTACH ACCEPT message. If the LAI or PLMN identity that has been transmitted in the ATTACH ACCEPT message is a member of any of the \"forbidden\" lists, any such entry shall be deleted. If the attach procedure is for emergency bearer services, the \"forbidden\" lists shall remain unchanged. Additionally, the network shall include the radio priority level to be used by the MS for mobile originated SMS transfer in the ATTACH ACCEPT message.\nIn a shared network, if the MS is a network sharing supporting MS, the network shall indicate the PLMN identity of the CN operator that has accepted the GPRS attach request in the RAI contained in the ATTACH ACCEPT message; if the MS is a network sharing non-supporting MS, the network shall indicate the PLMN identity of the common PLMN (see 3GPP TS 23.251 [109]). If the PLMN identity of the common PLMN included in the RAI does not identify the CN operator that has accepted the GPRS attach request, the network may include the PLMN identity of the CN operator that has accepted the GPRS attach request in the ATTACH ACCEPT message.\nIn a multi-operator core network (MOCN) with common GERAN, the network shall indicate in the RAI the common PLMN identity (see 3GPP TS 23.251 [109]).\nIf the common PLMN identity included in the RAI does not identify the CN operator that has accepted the GPRS attach request, the network may include the PLMN identity of the CN operator that has accepted the GPRS attach request in the ATTACH ACCEPT message.\nIf the MS has indicated in the ATTACH REQUEST message that it supports PS inter-RAT handover from GERAN to UTRAN Iu mode, the network may include in the ATTACH ACCEPT message a request to provide the Inter RAT information container.\nIf the MS has included the MS network capability IE or the UE network capability IE or both in the ATTACH REQUEST message, the network shall store all octets received from the MS, up to the maximum length defined for the respective information element.\nNOTE 2:\tThis information is forwarded to the new SGSN during inter-SGSN handover or to the new MME during intersystem handover to S1 mode.\nIf the DRX parameter was included in the DRX Parameter IE in the ATTACH REQUEST message, the network shall replace any stored DRX parameter with the received parameter and use it for the downlink transfer of signalling and user data.\nThe network shall include the extended DRX parameters IE in the ATTACH ACCEPT message only if the extended DRX parameters IE was included in the ATTACH REQUEST message, and the network supports and accepts the use of eDRX.\nIn A/Gb mode, the Cell Notification information element shall be included in the ATTACH ACCEPT message by the network which indicates that the Cell Notification is supported by the network.\nIn Iu mode, the network should prolong the PS signalling connection if the mobile station has indicated a follow-on request pending in ATTACH REQUEST. The network may also prolong the PS signalling connection without any indication from the mobile terminal.\nThe MS, receiving an ATTACH ACCEPT message, stores the received routing area identification, stops timer T3310, resets the GPRS attach attempt counter, resets the routing area updating attempt counter, resets the service request attempt counter, enters state GMM-REGISTERED and sets the GPRS update status to GU1 UPDATED.\nIf the message contains a P-TMSI, the MS shall use this P-TMSI as the new temporary identity for GPRS services. In this case, an ATTACH COMPLETE message is returned to the network. The MS shall delete its old P-TMSI and shall store the new one. If no P-TMSI has been included by the network in the ATTACH ACCEPT message, the old P-TMSI, if any available, shall be kept.\nIf the message contains a P-TMSI signature, the MS shall use this P-TMSI signature as the new temporary signature for the GMM context. The MS shall delete its old P-TMSI signature, if any is available, and shall store the new one. If the message contains no P-TMSI signature, the old P-TMSI signature, if available, shall be deleted.\nIf the network supports delivery of SMS via GPRS (3GPP TS 23.060 [74]) and this delivery is enabled (see 3GPP TS 29.272 [150]), then the network shall include the Additional network feature support IE in the ATTACH ACCEPT message and set the GPRS-SMS indicator.\nIf the network supports the extended protocol configuration options IE and the MS indicated support of the extended protocol configuration options IE, then the network shall include the Additional network feature support IE in the ATTACH ACCEPT message and set the ePCO IE indicator to \"extended protocol configuration options IE supported\".\nUpon receiving the ATTACH ACCEPT message an MS supporting S1 mode shall set the TIN to \"P-TMSI\".\nIf the network has requested the provision of Inter RAT handover information, the MS shall return an ATTACH COMPLETE message including the Inter RAT handover information IE to the network.\nThe network may also send a list of \"equivalent PLMNs\" in the ATTACH ACCEPT message. Each entry of the list contains a PLMN code (MCC+MNC). The mobile station shall store the list, as provided by the network, and if the GPRS attach procedure is not for emergency bearer services, any PLMN code that is already in the \"forbidden PLMN\" list shall be removed from the \"equivalent PLMNs\" list before it is stored by the mobile station. If the mobile station is operating in MS operation mode C or the mobile station is supporting S1 mode, it shall also remove any PLMN code that is already in the list of \"forbidden PLMNs for GPRS service\" before storing the list. In addition the mobile station shall add to the stored list the PLMN code of the registered PLMN that sent the list. All PLMNs in the stored list shall be regarded as equivalent to each other for PLMN selection, cell selection/re-selection and handover. The stored list in the mobile station shall be replaced on each occurrence of the ATTACH ACCEPT message. If no list is contained in the message, then the stored list in the mobile station shall be deleted. An MS attached for emergency bearer services shall delete the stored list when the MS enters the state GMM-DEREGISTERED. The list shall be stored in the mobile station while switched off so that it can be used for PLMN selection after switch on.\nThe network shall include the T3324 value IE in the ATTACH ACCEPT message only if the T3324 value IE was included in the ATTACH REQUEST message, and the network supports and accepts the use of PSM.\nIf the network supports and accepts the use of PSM, and the MS included the T3312 extended value IE in the ATTACH REQUEST message, then the network shall take into account the T3312 value requested when providing the Periodic RA update timer IE and the T3312 extended value IE in the ATTACH ACCEPT message.\nNOTE 3:\tBesides the value requested by the MS, the network can take local configuration into account when selecting a value for T3312 (see 3GPP TS 23.060 [74] subclause 5.3.13.54).\nIn A/Gb mode, if the MS indicates support for restriction on use of enhanced coverage in the ATTACH REQUEST message, and the network restricts enhanced coverage for the MS, then the network shall set the RestrictEC bit to \"Enhanced coverage restricted\" in the Additional network feature support IE of the ATTACH ACCEPT message.\nIn Iu mode, if the network wishes to prolong the PS signalling connection (for example, if the mobile station has indicated \"follow-on request pending\" in ATTACH REQUEST message) the network shall indicate the \"follow-on proceed\" in the ATTACH ACCEPT message. If the network wishes to release the PS signalling connection, the network shall indicate \"no follow-on proceed\" in the ATTACH ACCEPT message.\nAfter that in Iu mode, the mobile station shall act according to the follow-on proceed flag included in the Attach result information element in the ATTACH ACCEPT message (see subclause 4.7.13).\nIn A/Gb mode, if the ATTACH ACCEPT message contains the Cell Notification information element, then the MS shall start to use the LLC NULL frame to perform cell updates. The network receiving an ATTACH COMPLETE message stops timer T3350, changes to GMM-REGISTERED state and considers the P-TMSI sent in the ATTACH ACCEPT message as valid.\nIf the ATTACH ACCEPT message contains the T3312 extended value IE, then the MS shall use the value in T3312 extended value IE as periodic routing area update timer (T3312). If the ATTACH ACCEPT message does not contain T3312 extended value IE, then the MS shall use the value in the Periodic RA update timer IE as periodic routing area update timer (T3312).\nIf the ATTACH ACCEPT message contains the T3324 value IE, then the MS shall use the included timer value for T3324 as specified in subclause 4.7.2.8.\nIf the ATTACH ACCEPT message contains the DCN-ID IE, then the MS shall store the included DCN-ID value together with the PLMN code of the registered PLMN in a DCN-ID list in a non-volatile memory in the ME as described in 3GPP TS 24.301 [120], annex C.\nIn a shared network or in a multi-operator core network (MOCN) with common GERAN, if the ATTACH ACCEPT message contains the DCN-ID IE and the PLMN identity of the CN operator IE, the MS shall store the included DCN-ID value with the PLMN identity indicated in the PLMN identity of the CN operator IE, and the included DCN-ID value with the PLMN identity indicated in the RAI in a DCN-ID list in a non-volatile memory in the ME as described in 3GPP TS 24.301 [120], annex C.\nIf the MS receives the ATTACH ACCEPT message from a PLMN for which a PLMN-specific attempt counter or PLMN-specific PS-attempt counter is maintained (see subclause 4.1.1.6A), then the MS shall reset these counters. If the MS maintains a counter for \"SIM/USIM considered invalid for GPRS services\", then the MS shall reset this counter.\nThe network may also send a Local Emergency Numbers List with local emergency numbers in the ATTACH ACCEPT, by including the Emergency Number List IE. The mobile equipment shall store the Local Emergency Numbers List, as provided by the network. The Local Emergency Numbers List stored in the mobile equipment shall be replaced on each receipt of the Emergency Number List IE. The received Local Emergency Numbers List shall be provided to the upper layers.\nThe emergency number(s) received in the Emergency Number List IE are valid only in networks in the same country as the cell on which this IE is received. If no list is contained in the ATTACH ACCEPT message, then the stored Local Emergency Numbers List in the mobile equipment shall be kept, except if the mobile equipment has successfully registered to a PLMN in a country different from that of the PLMN that sent the Local Emergency Numbers List.\nThe mobile equipment shall use the stored Local Emergency Numbers List of emergency numbers received from the network in addition to the emergency numbers stored on the SIM/USIM or ME to detect that the number dialled is an emergency number.\nNOTE 4:\tThe mobile equipment may use the Local Emergency Numbers List to assist the end user in determining whether the dialled number is intended for an emergency service or for another destination, e.g. a local directory service. The possible interactions with the end user are implementation specific.\nNOTE 5:\tAn MS that supports procedures specified in 3GPP TS 24.302 [156], can get additional local emergency numbers through those procedures, which can be used based on operator policy (see 3GPP TS 24.302 [156]) to detect that the number dialled is an emergency number.\nThe Local Emergency Numbers List shall be deleted at switch off and removal of the SIM/USIM. The mobile equipment shall be able to store up to ten local emergency numbers received from the network.\nIf the MS has initiated the attach procedure due to manual CSG selection and receives an ATTACH ACCEPT message, and the MS sent the ATTACH REQUEST message in a CSG cell, the MS shall check if the CSG ID and associated PLMN identity of the cell are contained in the Allowed CSG list. If not, the MS shall add that CSG ID and associated PLMN identity to the Allowed CSG list and the MS may add the HNB Name (if provided by lower layers) to the Allowed CSG list if the HNB Name is present in neither the Operator CSG list nor the Allowed CSG list.\nIn A/Gb mode, if a UMTS security context is available, if the MS indicates support of integrity protection in the ATTACH REQUEST message and the network supports integrity protection, then if the MS receives replayed capabilities IE’s in ATTACH ACCEPT, then the MS shall check if the replayed MS network capability IE and replayed MS Radio Access Capability IE received in the ATTACH ACCEPT message has not been altered compared to the MS network capability IE and the MS Radio Access Capability IE that the MS sent to the network in ATTACH REQUEST message. If the replayed MS network capability IE and the replayed MS Radio Access Capability IE are not the same, then the MS shall ignore the ATTACH ACCEPT message.\nIf the attach request cannot be accepted by the network, an ATTACH REJECT message is transferred to the MS. The MS receiving the ATTACH REJECT message containing a reject cause other than GMM cause value #25 or the message is integrity protected, shall stop the timer T3310 and for all causes except #7, #12, #14, #15, #22 and #25 deletes the list of \"equivalent PLMNs\".\nIf the ATTACH REJECT message containing GMM cause value cause #25 was received without integrity protection, then the MS shall discard the message.\nIf the attach request is rejected due to NAS level mobility management congestion control, the network shall set the GMM cause value to #22 \"congestion\" and assign a back-off timer T3346.\nThe MS shall then take one of the following actions depending upon the reject cause:\n# 3\t\t(Illegal MS);\n# 6\t\t(Illegal ME);\nThe MS shall set the GPRS update status to GU3 ROAMING NOT ALLOWED (and shall store it according to subclause 4.1.3.2) and shall delete any P-TMSI, P-TMSI signature, RAI and GPRS ciphering key sequence number. The new GMM state is GMM-DEREGISTERED.NO-IMSI. The SIM/USIM shall be considered as invalid for GPRS services until switching off or the SIM/USIM is removed or the timer T3245 expires as described in subclause 4.1.1.6. If the message has been successfully integrity checked by the lower layers and the MS maintains a counter for \"SIM/USIM considered invalid for GPRS services\", then the MS shall set this counter to MS implementation-specific maximum value.\nIf the MS is IMSI attached, the MS shall in addition set the update status to U3 ROAMING NOT ALLOWED, shall delete any TMSI, LAI and ciphering key sequence number. If the MS is operating in MS operation mode A and an RR connection exists, the MS shall abort the RR connection, unless an emergency call is ongoing. The SIM/USIM shall be considered as invalid also for non-GPRS services until switching off or the SIM/USIM is removed. If the message has been successfully integrity checked by the lower layers and the MS maintains a counter for \"SIM/USIM considered invalid for non-GPRS services\", then the MS shall set this counter to MS implementation-specific maximum value.\nIf S1 mode is supported in the MS, the MS shall handle the EMM parameters EMM state, EPS update status, GUTI, last visited registered TAI, TAI list and KSI as specified in 3GPP TS 24.301 [120] for the case when the attach procedure is rejected with the EMM cause with the same value.\n# 7\t\t(GPRS services not allowed);\nThe MS shall set the GPRS update status to GU3 ROAMING NOT ALLOWED (and shall store it according to subclause 4.1.3.2) and shall delete any P-TMSI, P-TMSI signature, RAI and GPRS ciphering key sequence number. The SIM/USIM shall be considered as invalid for GPRS services until switching off or the SIM/USIM is removed. The new state is GMM-DEREGISTERED. If the message has been successfully integrity checked by the lower layers and the MS maintains a counter for \"SIM/USIM considered invalid for GPRS services\", then the MS shall set this counter to MS implementation-specific maximum value.\nNOTE 1:\tOptionally the MS starts the timer T3340 as described in subclause 4.7.1.9\nIf S1 mode is supported in the MS, the MS shall handle the EMM parameters EMM state, EPS update status, GUTI, last visited registered TAI, TAI list and KSI as specified in 3GPP TS 24.301 [120] for the case when the attach procedure is rejected with the EMM cause with the same value.\n# 8\t\t(GPRS services and non-GPRS services not allowed);\nThe MS shall set the GPRS update status to GU3 ROAMING NOT ALLOWED (and shall store it according to subclause 4.1.3.2) and shall delete any P-TMSI, P-TMSI signature, RAI and GPRS ciphering key sequence number. The new GMM state is GMM-DEREGISTERED.NO-IMSI.\nNOTE 2:\tOptionally the MS starts the timer T3340 as described in subclause 4.7.1.9.\nThe MS shall set the update status to U3 ROAMING NOT ALLOWED, shall delete any TMSI, LAI and ciphering key sequence number. If the MS is operating in MS operation mode A and an RR connection exists, the MS shall abort the RR connection, unless an emergency call is ongoing. The SIM/USIM shall be considered as invalid for GPRS and non-GPRS services until switching off or the SIM/USIM is removed. If the message has been successfully integrity checked by the lower layers and the MS maintains a counter for \"SIM/USIM considered invalid for GPRS services\", then the MS shall set this counter to MS implementation-specific maximum value. If the message has been successfully integrity checked by the lower layers and the MS maintains a counter for \"SIM/USIM considered invalid for non-GPRS services\", then the MS shall set this counter to MS implementation-specific maximum value.\nIf S1 mode is supported in the MS, the MS shall handle the EMM parameters EMM state, EPS update status, GUTI, last visited registered TAI, TAI list and KSI as specified in 3GPP TS 24.301 [120] for the case when the attach procedure is rejected with the EMM cause with the same value.\n# 11\t(PLMN not allowed);\nThe MS shall delete any RAI, P-TMSI, P-TMSI signature, and GPRS ciphering key sequence number stored, shall set the GPRS update status to GU3 ROAMING NOT ALLOWED (and shall store it according to subclause 4.1.3.2), shall reset the GPRS attach attempt counter and shall change to state GMM-DEREGISTERED.\nThe MS shall store the PLMN identity in the \"forbidden PLMN list\" and if the MS is configured to use timer T3245 (see 3GPP TS 24.368 [135] or 3GPP TS 31.102 [112]) then the MS shall start timer T3245 and proceed as described in subclause 4.1.1.6. If the message has been successfully integrity checked by the lower layers and the MS maintains a PLMN-specific attempt counter for that PLMN, then the MS shall set this counter to the MS implementation-specific maximum value.\nThe MS shall start timer T3340 as described in subclause 4.7.1.9.\nIf no RR connection exists, the MS shall perform the following additional actions immediately. If the MS is operating in MS operation mode A and an RR connection exists, the MS shall perform these actions when the RR connection is subsequently released:\n-\tIf the MS is IMSI attached, the MS shall set the update status to U3 ROAMING NOT ALLOWED, shall delete any TMSI, LAI and ciphering key sequence number and shall reset the location update attempt counter. The new MM state is MM IDLE.\n-\tThe MS shall perform a PLMN selection according to 3GPP TS 23.122 [14].\nAn MS in GAN mode shall request a PLMN list in GAN (see 3GPP TS 44.318 [76b]) prior to perform a PLMN selection from this list according to 3GPP TS 23.122 [14].\nIf S1 mode is supported in the MS, the MS shall handle the EMM parameters EMM state, EPS update status, GUTI, last visited registered TAI, TAI list, KSI and attach attempt counter as specified in 3GPP TS 24.301 [120] for the case when attach procedure is rejected with the EMM cause with the same value.\n# 12\t(Location area not allowed);\nThe MS shall delete any RAI, P-TMSI, P-TMSI signature and GPRS ciphering key sequence number, shall set the GPRS update status to GU3 ROAMING NOT ALLOWED (and shall store it according to clause 4.1.3.2) and shall reset the GPRS attach attempt counter. The state is changed to GMM-DEREGISTERED.LIMITED-SERVICE.\nThe mobile station shall store the LAI in the list of \"forbidden location areas for regional provision of service\".\nThe MS shall start timer T3340 as described in subclause 4.7.1.9.\nIf no RR connection exists, the MS shall perform the following additional actions immediately. If the MS is operating in MS operation mode A and an RR connection exists, the MS shall perform these actions when the RR connection is subsequently released:\n-\tIf the MS is IMSI attached, the MS shall set the update status to U3 ROAMING NOT ALLOWED, shall delete any TMSI, LAI and ciphering key sequence number and shall reset the location update attempt counter. The new MM state is MM IDLE.\n-\tThe MS shall perform a cell selection according to 3GPP TS 43.022 [82] and 3GPP TS 25.304 [98].\nNOTE 3:\tThe cell selection procedure is not applicable for an MS in GAN mode.\nIf S1 mode is supported in the MS, the MS shall handle the EMM parameters EMM state, EPS update status, GUTI, last visited registered TAI, TAI list, KSI and attach attempt counter as specified in 3GPP TS 24.301 [120] for the case when the attach procedure is rejected with the EMM cause with the same value.\n# 13\t(Roaming not allowed in this location area);\nThe MS shall delete any RAI, P-TMSI, P-TMSI signature and GPRS ciphering key sequence number, shall set the GPRS update status to GU3 ROAMING NOT ALLOWED (and shall store it according to clause 4.1.3.2) and shall reset the GPRS attach attempt counter. The state is changed to GMM-DEREGISTERED.LIMITED-SERVICE or optionally to GMM-DEREGISTERED.PLMN-SEARCH.\nThe MS shall store the LAI in the list of \"forbidden location areas for roaming\".\nThe MS shall start timer T3340 as described in subclause 4.7.1.9.\nIf no RR connection exists, the MS shall perform the following additional actions immediately. If the MS is operating in MS operation mode A and an RR connection exists, the MS shall perform these actions when the RR connection is subsequently released:\n-\tIf the MS is IMSI attached, the MS shall set the update status to U3 ROAMING NOT ALLOWED, shall delete any TMSI, LAI and ciphering key sequence number and shall reset the location update attempt counter. The new MM state is MM IDLE.\n-\tThe MS shall perform a PLMN selection according to 3GPP TS 23.122 [14].\nAn MS in GAN mode shall request a PLMN list in GAN (see 3GPP TS 44.318 [76b]) prior to perform a PLMN selection from this list according to 3GPP TS 23.122 [14].\nIf S1 mode is supported in the MS, the MS shall handle the EMM parameters EMM state, EPS update status, GUTI, last visited registered TAI, TAI list, KSI and attach attempt counter as specified in 3GPP TS 24.301 [120] for the case when the attach procedure is rejected with the EMM cause with the same value.\n# 14\t(GPRS services not allowed in this PLMN);\nThe MS shall delete any RAI, P-TMSI, P-TMSI signature, and GPRS ciphering key sequence number stored, shall set the GPRS update status to GU3 ROAMING NOT ALLOWED (and shall store it according to subclause 4.1.3.2) , shall reset the GPRS attach attempt counter and shall change to state GMM-DEREGISTERED.\nThe MS shall store the PLMN identity in the \"forbidden PLMNs for GPRS service\" list and if the MS is configured to use timer T3245 (see 3GPP TS 24.368 [135] or 3GPP TS 31.102 [112]) then the MS shall start timer T3245 and proceed as described in subclause 4.1.1.6. A GPRS MS operating in MS operation mode C shall perform a PLMN selection instead of a cell selection. If the message has been successfully integrity checked by the lower layers and the MS maintains a PLMN-specific PS-attempt counter for that PLMN, then the MS shall set this counter to the MS implementation-specific maximum value.\nA GPRS MS operating in MS operation mode A or B in network operation mode II, is still IMSI attached for CS services in the network.\nAs an implementation option, a GPRS MS operating in operation mode A or B may perform the following additional action. If no RR connection exists the MS may perform the action immediately. If the MS is operating in MS operation mode A and an RR connection exists, the MS may only perform the action when the RR connection is subsequently released:\n-\tThe MS may perform a PLMN selection according to 3GPP TS 23.122 [14].\nIf an MS in GAN mode performs a PLMN selection, it shall request a PLMN list in GAN (see 3GPP TS 44.318 [76b]) prior to perform a PLMN selection from this list according to 3GPP TS 23.122 [14].\nThe MS shall not perform the optional PLMN selection in the case where the PLMN providing this reject cause is:\n-\tOn the \"User Controlled PLMN Selector with Access Technology\" list;\n-\tOn the \"Operator Controlled PLMN Selector with Access Technology\" list;\n-\tOn the \"PLMN Selector\" list for an MS using a SIM/USIM without access technology information storage (i.e. the \"User Controlled PLMN Selector with Access Technology\" and the \"Operator Controlled PLMN Selector with Access Technology\" data files are not present); or\n-\tA PLMN identified as equivalent to any PLMN, within the same country, contained in the lists above.\nIf S1 mode is supported in the MS, the MS shall handle the EMM parameters EMM state, EPS update status, GUTI, last visited registered TAI, TAI list, KSI and attach attempt counter as specified in 3GPP TS 24.301 [120] for the case when the attach procedure is rejected with the EMM cause with the same value.\n# 15\t(No Suitable Cells In Location Area);\nThe MS shall delete any RAI, P-TMSI, P-TMSI signature and GPRS ciphering key sequence number, shall set the GPRS update status to GU3 ROAMING NOT ALLOWED(and shall store it according to clause 4.1.3.2) and shall reset the GPRS attach attempt counter. The state is changed to GMM-DEREGISTERED.LIMITED-SERVICE.\nThe MS shall store the LAI in the list of \"forbidden location areas for roaming\".\nThe MS shall start timer T3340 as described in subclause 4.7.1.9.\nIf no RR connection exists, the MS shall perform the following additional actions immediately. If the MS is operating in MS operation mode A and an RR connection exists, the MS shall perform these actions when the RR connection is subsequently released:\n-\tIf the MS is IMSI attached, the MS shall set the update status to U3 ROAMING NOT ALLOWED, shall delete any TMSI, LAI and ciphering key sequence number and shall reset the location update attempt counter. The new MM state is MM IDLE.\n-\tThe MS shall search for a suitable cell in another location area or a tracking area according to 3GPP TS 43.022 [82] and 3GPP TS 25.304 [98] or 3GPP TS 36.304 [121].\nNOTE 4:\tThe cell selection procedure is not applicable for an MS in GAN mode.\nIf S1 mode is supported in the MS, the MS shall handle the EMM parameters EMM state, EPS update status, GUTI, last visited registered TAI, TAI list, KSI and attach attempt counter as specified in 3GPP TS 24.301 [120] for the case when the attach procedure is rejected with the EMM cause with the same value.\n# 22\t(Congestion);\nIf the T3346 value IE is present in the ATTACH REJECT message and the value indicates that this timer is neither zero nor deactivated, the MS shall proceed as described below, otherwise it shall be considered as an abnormal case and the behaviour of the MS for this case is specified in subclause 4.7.3.1.5.\nThe MS shall abort the attach procedure, reset the GPRS attach attempt counter, set the GPRS update status to GU2 NOT UPDATED and enter state GMM-DEREGISTERED.ATTEMPTING-TO-ATTACH.\nThe MS shall stop timer T3346 if it is running.\nIf the ATTACH REJECT message is integrity protected, the MS shall start timer T3346 with the value provided in the T3346 value IE.\nIf the ATTACH REJECT message is not integrity protected, the MS shall start timer T3346 with a random value from the default range specified in table 11.3a.\nThe MS stays in the current serving cell and applies the normal cell reselection process. The attach procedure is started if still needed when timer T3346 expires or is stopped.\nIf S1 mode is supported in the MS, the MS shall handle the EMM parameters EMM state, EPS update status, and attach attempt counter as specified in 3GPP TS 24.301 [120] for the case when the attach procedure is rejected with the EMM cause with the same value.\n# 25\t(Not authorized for this CSG);\nCause #25 is only applicable in UTRAN Iu mode and when received from a CSG cell. Other cases are considered as abnormal cases and the specification of the mobile station behaviour is given in subclause 4.7.3.1.5.\nThe MS shall set the GPRS update status to GU3 ROAMING NOT ALLOWED (and shall store it according to subclause 4.1.3.2), reset the GPRS attach attempt counter and enter the state GMM-DEREGISTERED.LIMITED-SERVICE.\nIf the CSG ID and associated PLMN identity of the cell where the MS has sent the ATTACH REQUEST message are contained in the Allowed CSG list stored in the MS, the MS shall remove the entry corresponding to this CSG ID and associated PLMN identity from the Allowed CSG list.\nIf the CSG ID and associated PLMN identity of the cell where the MS has sent the ATTACH REQUEST message are contained in the Operator CSG list stored in the MS, the MS shall proceed as specified in 3GPP TS 23.122 [14] subclause 3.1A.\nThe MS shall start timer T3340 as described in subclause 4.7.1.9.\nThe MS shall search for a suitable cell according to 3GPP TS 43.022 [82] and 3GPP TS 25.304 [98].\nIf S1 mode is supported in the MS, the MS shall handle the EMM parameters EMM state, EPS update status, GUTI, last visited registered TAI, TAI list, KSI and attach attempt counter as specified in 3GPP TS 24.301 [120] for the case when the attach procedure is rejected with the EMM cause with the same value.\nOther values are considered as abnormal cases. The specification of the MS behaviour in those cases is specified in subclause 4.7.3.1.5.\nIf the attach request for emergency bearer services cannot be accepted by the network, an ATTACH REJECT message is transferred to the MS. The ATTACH REJECT message includes GMM cause #5 \"IMEI not accepted\" or one of the GMM cause values as described in subclause 4.7.3.1.4.\nNOTE 1:\tIf GMM cause #11 is sent to a MS of a roaming subscriber attaching for emergency bearer services and the MS is in automatic network selection mode, it cannot obtain normal service provided by this PLMN.\nUpon receiving the ATTACH REJECT message including GMM cause #5, the MS shall enter the state GMM-DEREGISTERED.NO-IMSI.\nUpon receiving the ATTACH REJECT message including one of the other GMM cause values, the MS shall perform the actions as described in subclause 4.7.3.1.4 with the following addition: the MS shall inform the upper layers of the failure of the procedure.\nNOTE 2:\tThis can result in the upper layers requesting establishment of a CS emergency call (if not already attempted in the CS domain), or other implementation specific mechanisms, e.g. procedures specified in 3GPP TS 24.229 [13D] can result in the emergency call being attempted to another IP-CAN.\nIf the attach request for emergency bearer services fails due to abnormal case a) in subclause 4.7.3.1.5, the MS shall perform the actions as described in subclause 4.7.3.1.5 and inform the upper layers of the failure to access the network.\nNOTE 3:\tThis can result in the upper layers requesting establishment of a CS emergency call (if not already attempted in the CS domain), or other implementation specific mechanisms, e.g. procedures specified in 3GPP TS 24.229 [13D] can result in the emergency call being attempted to another IP-CAN.\nIf the attach request for emergency bearer services fails due to abnormal cases b), c) or d) in subclause .1.5, the MS shall perform the actions as described in subclause 4.7.3.1.5 with the following addition: the MS shall inform the upper layers of the failure of the procedure.\nNOTE 4:\tThis can result in the upper layers requesting establishment of a CS emergency call (if not already attempted in the CS domain), or other implementation specific mechanisms, e.g. procedures specified in 3GPP TS 24.229 [13D] can result in the emergency call being attempted to another IP-CAN.\nIn a shared network, upon receiving the ATTACH REJECT message, the MS shall perform the actions as described in subclause 4.7.3.1.4, and shall:\na)\tinform the upper layers of the failure of the procedure; or\nNOTE 5:\tThis can result in the upper layers requesting establishment of a CS emergency call (if not already attempted in the CS domain), or other implementation specific mechanisms, e.g. procedures specified in 3GPP TS 24.229 [13D] can result in the emergency call being attempted to another IP-CAN.\nb)\tattempt the attach for emergency bearer services to another PLMN in the shared network.\nIn a shared network, if the attach request for emergency bearer services fails due to abnormal case a) in subclause 4.7.3.1.5, the MS shall perform the actions as described in subclause 4.7.3.1.5 and shall:\na)\tinform the upper layers of the failure to access the network; or\nNOTE 6:\tThis can result in the upper layers requesting establishment of a CS emergency call (if not already attempted in the CS domain), or other implementation specific mechanisms, e.g. procedures specified in 3GPP TS 24.229 [13D] can result in the emergency call being attempted to another IP-CAN.\nb)\tattempt the attach for emergency bearer services to another PLMN in the shared network.\nIn a shared network, if the attach request for emergency bearer services fails due to abnormal cases b), c) or d) in subclause .1.5, the MS shall perform the actions as described in subclause .1.5, and shall:\na)\tinform the upper layers of the failure of the procedure; or\nNOTE 7:\tThis can result in the upper layers requesting establishment of a CS emergency call (if not already attempted in the CS domain), or other implementation specific mechanisms, e.g. procedures specified in 3GPP TS 24.229 [13D] can result in the emergency call being attempted to another IP-CAN.\nb)\tattempt the attach for emergency bearer services to another PLMN in the shared network.\nIf the network cannot accept the attach request for initiating a PDN connection for emergency bearer services with attach type not set to \"emergency attach\", the MS shall perform the procedures as described in subclause 4.7.3.1.4. Then if the MS is in the same selected PLMN where the last attach request was attempted, the MS shall:\na)\tinform the upper layers of the failure of the procedure; or\nNOTE 1:\tThis can result in the upper layers requesting establishment of a CS emergency call (if not already attempted in the CS domain) or other implementation specific mechanisms, e.g. procedures specified in 3GPP TS 24.229 [95] that can result in the emergency call being attempted to another IP-CAN.\nb)\tattempt GPRS attach for emergency bearer services.\nIf the attach request for initiating a PDN connection for emergency bearer services with attach type not set to \"emergency attach\" fails due to abnormal case a) in subclause 4.7.3.1.5, the MS shall perform the procedures as described in subclause 4.7.3.1.5 and inform the upper layers of the failure to access the network.\nNOTE 2:\tThis can result in the MS attempting a CS emergency call (if not already attempted in the CS domain) or other implementation specific mechanisms, e.g. procedures specified in 3GPP TS 24.229 [95] that can result in the emergency call being attempted to another IP-CAN.\nIf the attach request for initiating a PDN connection for emergency bearer services with attach type not set to \"emergency attach\" fails due to abnormal cases b), c) or d) in subclause 4.7.3.1.5, the MS shall perform the procedures as described in subclause 4.7.3.1.5. Then if the MS is in the same selected PLMN where the last attach request was attempted, the MS shall:\na)\tinform the upper layers; or\nNOTE 3:\tThis can result in the MS attempting a CS emergency call (if not already attempted in the CS domain) or other implementation specific mechanisms, e.g. procedures specified in 3GPP TS 24.229 [95] that can result in the emergency call being attempted to another IP-CAN.\nb)\tattempt GPRS attach for emergency bearer services.\nThe following abnormal cases can be identified:\na)\tAccess barred because of access class control, EAB or ACDC\nThe GPRS attach procedure shall not be started. The MS stays in the current serving cell and applies normal cell reselection process. The GPRS attach procedure is started as soon as possible, i.e. when access is granted or because of a cell change.\nIf access is barred because of access class control, ACDC is applicable to the request from the upper layers and the MS supports ACDC, then the GPRS attach procedure shall be started.\nIf access is barred for a certain ACDC category, a request with a higher ACDC category is received from the upper layers and the MS supports ACDC, then the GPRS attach procedure shall be started.\nIf an access request for an uncategorized application is barred due to ACDC, a request with a certain ACDC category is received from the upper layers and the MS supports ACDC, then the GPRS attach procedure shall be started.\nb)\tLower layer failure without \"Extended Wait Time\" received from lower layers before the ATTACH ACCEPT or ATTACH REJECT message is received\nThe procedure shall be aborted and the MS shall proceed as described below, except in the following implementation option cases b.1 and b.2.\nb.1)\tRelease of PS signalling connection in Iu mode before the completion of the GPRS attach procedure\nIf the release of the PS signalling connection occurs before completion of the GPRS attach procedure, then the GPRS attach procedure shall be initiated again, if the following conditions apply:\ni)\tThe original GPRS attach procedure was initiated over an existing PS signalling connection; and\nii)\tThe GPRS attach procedure was not due to timer T3310 expiry; and\niii)\tNo SECURITY MODE COMMAND message and no Non-Access Startum (NAS) messages relating to the PS signalling connection (e.g. PS authentication procedure, see subclause 4.7.7) were received after the ATTACH REQUEST message was transmitted.\nb.2)\tRR release in Iu mode (i.e. RRC connection release) with, for example, cause \"Normal\", or \"User inactivity\" (see 3GPP TS 25.331 [23c] and 3GPP TS 44.118 [111])\nThe GPRS attach procedure shall be initiated again, if the following conditions apply:\ni)\tThe original GPRS attach procedure was initiated over an existing RRC connection; and\nii)\tThe GPRS attach procedure was not due to timer T3310 expiry; and\niii)\tNo SECURITY MODE COMMAND message and no Non-Access Stratum (NAS) messages relating to the PS signalling connection (e.g. PS authentication procedure, see subclause 4.7.7) were received after the ATTACH REQUEST message was transmitted.\nNOTE 1:\tThe RRC connection release cause that triggers the re-initiation of the GPRS attach procedure is implementation specific.\nc)\tT3310 time-out\nOn the first expiry of the timer, the MS shall reset and restart timer T3310 and shall retransmit the ATTACH REQUEST message. This retransmission is repeated four times, i.e. on the fifth expiry of timer T3310, the MS shall abort the GPRS attach procedure and, in Iu mode, release the PS signalling connection (see 3GPP TS 25.331 [23c]). The MS shall proceed as described below.\nd)\tATTACH REJECT, other causes than those treated in subclause 4.7.3.1.4, and cases of GMM cause values #22 and #25, if considered as abnormal cases according to subclause 4.7.3.1.4\nIf the attach request is neither for emergency bearer services nor for initiating a PDN connection for emergency bearer services with attach type not set to \"emergency attach\", upon reception of the cause codes # 95, # 96, # 97, # 99 and # 111 the MS should set the GPRS attach attempt counter to 5.\nThe MS shall proceed as described below.\ne)\tChange of cell within the same RA (A/Gb mode only)\nIf a cell change occurs within the same RA when the MS is in state GMM-REGISTERED-INITIATED, then the cell update procedure shall be performed before completion of the attach procedure.\nf)\tChange of cell into a new routing area\nIf a cell change into a new routing area occurs before an ATTACH ACCEPT or ATTACH REJECT message has been received, the GPRS attach procedure shall be aborted and re-initiated immediately. If a routing area border is crossed when the ATTACH ACCEPT message is received but before an ATTACH COMPLETE message is sent, the GPRS attach procedure shall be aborted and the routing area updating procedure shall be initiated. If a P-TMSI was allocated during the GPRS attach procedure, this P-TMSI shall be used in the routing area updating procedure. If a P-TMSI signature was allocated together with the P-TMSI during the GPRS attach procedure, this P-TMSI signature shall be used in the routing area updating procedure.\ng)\tMobile originated detach required\nIf the MS is in state GMM-REGISTERED-INITIATED, the GPRS attach procedure shall be aborted and the GPRS detach procedure shall be performed (see subclause 4.7.4.1).\nh)\tDetach procedure collision\nIf the MS receives a DETACH REQUEST message from the network in state GMM-REGISTERED-INITIATED with detach type \"re-attach not required\" and no cause code, or \"re-attach not required\"' and the cause code is not #2 \"IMSI unknown in HLR\", the GPRS detach procedure shall be progressed and the GPRS attach procedure shall be aborted. Otherwise the GPRS attach procedure shall be progressed and the DETACH REQUEST message shall be ignored.\ni)\t\"Extended wait time\" for PS domain from the lower layers\nIf the ATTACH REQUEST message contained the low priority indicator set to \"MS is configured for NAS signalling low priority\", the MS shall start timer T3346 with the \"Extended wait time\" value and reset the attach attempt counter.\nIn other cases the MS shall ignore the \"Extended wait time\".\nThe MS shall abort the attach procedure, stay in the current serving cell, change the state to GMM-DEREGISTERED.ATTEMPTING-TO-ATTACH and apply the normal cell reselection process.\nj)\tTimer T3346 is running\nThe MS shall not start the GPRS attach procedure unless the MS needs to attach for emergency bearer services or the MS is an MS configured to use AC11 – 15 in selected PLMN or the MS needs to attach without the NAS signalling low priority indication and if the timer T3346 was started due to rejection of a NAS request message (e.g. ATTACH REQUEST, ROUTING AREA UPDATE REQUEST or SERVICE REQUEST) which contained the  low priority indicator set to \"MS is configured for NAS signalling low priority\". The MS stays in the current serving cell and applies normal cell reselection process.\nNOTE 2:\tIt is considered an abnormal case if the MS needs to initiate an attach procedure while timer T3346 is running independent on whether timer T3346 was started due to an abnormal case or a non successful case.\nIn cases b, c, d, i and j, the MS shall proceed as follows:\n-\tTimer T3310 shall be stopped if still running.\n-\tFor the cases b, c, d, and i when the \"Extended wait time\" is ignored, if the attach request is neither for emergency bearer services nor for initiating a PDN connection for emergency bearer services with attach type not set to \"emergency attach\", the GPRS attach attempt counter shall be incremented.\n-\tIf the GPRS attach attempt counter is less than 5:\n-\tfor the cases i and j, the GPRS attach procedure is started, if still necessary, when timer T3346 expires or is stopped.\n-\tfor the cases b, c, d, and i when the \"Extended wait time\" is ignored, if the attach request is neither for emergency bearer services nor for initiating a PDN connection for emergency bearer services with attach type not set to \"emergency attach\", timer T3311 is started and the state is changed to GMM-DEREGISTERED.ATTEMPTING-TO-ATTACH.\n-\tIf the GPRS attach attempt counter is greater than or equal to 5:\n-\tthe MS shall delete any RAI, P-TMSI, P-TMSI signature, list of equivalent PLMNs, and GPRS ciphering key sequence number, shall set the GPRS update status to GU2 NOT UPDATED, shall start timer T3302. The state is changed to GMM-DEREGISTERED. ATTEMPTING-TO-ATTACH or optionally to GMM-DEREGISTERED.PLMN-SEARCH (see subclause 4.2.4.1.2) in order to perform a PLMN selection according to 3GPP TS 23.122 [14].\n-\tIf S1 mode is supported by the MS, the MS shall in addition handle the EMM parameters EMM state, EPS update status, GUTI, last visited registered TAI, TAI list and KSI as specified in 3GPP TS 24.301 [120] for the abnormal case when a normal attach procedure fails and the attach attempt counter is equal to 5.\nThe following abnormal cases can be identified:\na)\tLower layer failure\nIf a low layer failure occurs before the message ATTACH COMPLETE has been received from the MS and a new P-TMSI (or a new P-TMSI and a new P-TMSI signature) has been assigned, the network shall consider both the old and new P-TMSI each with its corresponding P-TMSI-signature as valid until the old P-TMSI can be considered as invalid by the network (see subclause 4.7.1.5) or the GMM context which has been marked as detached in the network is released, and shall not resent the message ATTACH ACCEPT. During this period the network may:\n-\tuse the identification procedure followed by a P-TMSI reallocation procedure if the old P-TMSI is used by the MS in a subsequent message.\nb)\tProtocol error\nIf the ATTACH REQUEST message is received with a protocol error, the network shall return an ATTACH REJECT message with one of the following reject causes:\n#96:\tMandatory information element error;\n#99:\tInformation element non-existent or not implemented;\n#100:\tConditional IE error;\n#111:\tProtocol error, unspecified.\nc)\tT3350 time-out\nOn the first expiry of the timer, the network shall retransmit the ATTACH ACCEPT message and shall reset and restart timer T3350.\nThis retransmission is repeated four times, i.e. on the fifth expiry of timer T3350, the GPRS attach procedure shall be aborted. If a new P-TMSI or a new P-TMSI together with a new P-TMSI signature were allocated in the ATTACH ACCEPT message, the network shall consider both the old and new P-TMSI each together with the corresponding P-TMSI signatures as valid until the old P-TMSI can be considered as invalid by the network (see subclause 4.7.1.5) or the GMM context which has been marked as detached in the network is released. During this period the network acts as specified for case a.\nd.1)\tATTACH REQUEST received after the ATTACH ACCEPT message has been sent and before the ATTACH COMPLETE message is received\n-\tIf one or more of the information elements in the ATTACH REQUEST message differ from the ones received within the previous ATTACH REQUEST message, the previously initiated GPRS attach procedure shall be aborted if the ATTACH COMPLETE message has not been received and the new GPRS attach procedure shall be progressed, or\n-\tIf the information elements do not differ, then the ATTACH ACCEPT message shall be resent and the timer T3350 shall be restarted if an ATTACH COMPLETE message is expected. In that case, the retransmission counter related to T3350 is not incremented.\nd.2)\tMore than one ATTACH REQUEST received and no ATTACH ACCEPT or ATTACH REJECT message has been sent\n-\tIf one or more of the information elements in the ATTACH REQUEST message differs from the ones received within the previous ATTACH REQUEST message, the previously initiated GPRS attach procedure shall be aborted and the new GPRS attach procedure shall be progressed;\n-\tIf the information elements do not differ, then the network shall continue with the previous attach procedure and shall not treat any further this ATTACH REQUEST message.\ne)\tATTACH REQUEST received in state GMM-REGISTERED\nIf an ATTACH REQUEST message is received in state GMM-REGISTERED the network may initiate the GMM common procedures; if it turned out that the ATTACH REQUEST message was send by an MS that has already been attached, the GMM context, PDP contexts and MBMS contexts, if any, are deleted and the new ATTACH REQUEST is progressed.\nf)\tROUTING AREA UPDATE REQUEST message received before ATTACH COMPLETE message.\nTimer T3350 shall be stopped. The allocated P-TMSI shall be considered as valid and the routing area updating procedure shall be progressed as described in subclause 4.7.5.\ng)\tDETACH REQUEST message received before ATTACH COMPLETE message.\nThe network shall abort the attach procedure and shall progress the detach procedure as described in subclause 4.7.4.1.\nThe figure depicts the GPRS attach procedure and combined GPRS attach procedure for 3GPP TS 24.008, which is a standard for the GPRS (General Packet Radio Service) protocol. The figure shows the steps involved in attaching a GPRS device to a network, including the use of a GPRS attach procedure and a combined GPRS attach procedure. The figure is important for understanding the technical aspects of the GPRS protocol and its implementation in a network.\nFigure 4.7.3/1 3GPP TS 24.008: GPRS attach procedure and combined GPRS attach procedure\nThe combined GPRS attach procedure is a GMM procedure used by a GPRS MS operating in MS operation modes A or B for IMSI attach for GPRS and non-GPRS services if the network operates in network operation mode I.\nIf a GPRS MS operating in MS operation modes A or B is already attached for non-GPRS services by use of the MM specific IMSI attach procedure, but additionally wishes to perform an IMSI attach for GPRS services, the combined GPRS attach procedure shall also be used.\nThe attach type information element shall indicate \"combined GPRS/IMSI attach\". In this case, the messages ATTACH ACCEPT, ATTACH COMPLETE, and ATTACH REJECT used by the combined GPRS attach procedure carry information for both the GPRS and the non-GPRS services.\nA GPRS MS in MS operation mode A shall perform the normal GPRS/IMSI attach procedure during an ongoing circuit-switched transaction.\nIf the MS is in GMM state GMM-DEREGISTERED and in MM state MM IDLE, the MS initiates the combined GPRS attach procedure by sending an ATTACH REQUEST message to the network, starts timer T3310 and enters state GMM-REGISTERED-INITIATED and MM LOCATION UPDATING PENDING. If timer T3302 is currently running, the MS shall stop timer T3302. If timer T3311 is currently running, the MS shall stop timer T3311.\nThe MS shall set the Mobile identity IE, old RAI and P-TMSI signature in the ATTACH REQUEST message as specified in subclause 4.7.3.1.1. Furthermore the MS shall include the TMSI status IE if no valid TMSI is available.\nIf the MS initiates a combined GPRS attach procedure for GPRS services and \"SMS-only service\", the MS shall indicate \"SMS only\" in the Additional update type IE.\nIf the MS has stored a valid LAI and the MS supports EMM combined procedures, the MS shall include it in the Old location area identification IE in the ATTACH REQUEST message.\nIf the MS has stored a valid TMSI, the MS shall include the TMSI based NRI container IE in the ATTACH REQUEST message.\nIn Iu mode, if the MS wishes to prolong the established PS signalling connection after the GPRS attach (for example, the MS has any CM application request pending), it may set a follow-on request pending indicator on (see subclause 4.7.13).\nThe network may initiate GMM common procedures, e.g. the GMM identification and GMM authentication and ciphering procedure, depending on the received information such as IMSI, CKSN, old RAI, P-TMSI and P-TMSI signature.\nDepending on the value of the attach result IE received in the ATTACH ACCEPT message, two different cases can be distinguished:\nCase 1)\tThe attach result IE value indicates \"combined GPRS attach\": IMSI attach for GPRS and non-GPRS services have been successful.\nCase 2)\tThe attach result IE value indicates \"GPRS only\": IMSI attach for GPRS services has been successful but IMSI attach for non-GPRS services has not been successful.\nIn Iu mode, if the network wishes to prolong the PS signalling connection (for example, if the mobile station has indicated \"follow-on request pending\" in ATTACH REQUEST message) the network shall indicate the \"follow-on proceed\" in the ATTACH ACCEPT message. If the network wishes to release the PS signalling connection, the network shall indicate \"no follow-on proceed\" in the ATTACH ACCEPT message.\nAfter that in Iu mode, the mobile station shall act according to the follow-on proceed flag included in the Attach result information element in the ATTACH ACCEPT message (see subclause 4.7.13).\n\n4.7.3.2.3.1\tCombined attach successful for GPRS and non-GPRS services\nThe description for IMSI attach for GPRS services as specified in subclause 4.7.3.1.3 shall be followed. In addition, the following description for IMSI attach for non-GPRS services applies.\nThe TMSI reallocation may be part of the combined GPRS attach procedure. The TMSI allocated is then included in the ATTACH ACCEPT message together with the location area identification (LAI). The network shall, in this case, change to state GMM-COMMON-PROCEDURE-INITIATED and shall start timer T3350 as described in subclause 4.7.6.\nThe MS, receiving an ATTACH ACCEPT message, stores the received location area identification, stops timer T3310, reset the location update attempt counter and sets the update status to U1 UPDATED. If the message contains an IMSI, the mobile station is not allocated any TMSI, and shall delete any TMSI accordingly. If the message contains a TMSI, the MS shall use this TMSI as the new temporary identity. The MS shall delete its old TMSI and shall store the new TMSI. In this case, an ATTACH COMPLETE message is returned to the network. If neither a TMSI nor an IMSI has been included by the network in the ATTACH ACCEPT message, the old TMSI, if any available, shall be kept. The new MM state is MM IDLE, the new GMM state is GMM-REGISTERED.\nIf the MS maintains a counter for \"SIM/USIM considered invalid for non-GPRS services\" events (see subclause 4.1.1.6A), then the MS shall reset this counter.\nIf the network has requested the provision of Inter RAT handover information, the MS shall return an ATTACH COMPLETE message including the Inter RAT handover information IE to the network.\nIf the MS is not configured for NAS signalling low priority then the MS may stop timer T3246 if running.\nAny timer used for triggering the location update procedure (e.g T3211, T3212) shall be stopped if running.\nThe network receiving an ATTACH COMPLETE message stops timer T3350, changes to state GMM-REGISTERED.\nNOTE:\tUpon receiving an ATTACH COMPLETE message, the SGSN sends a BSSAP+-TMSI-REALLOCATION-COMPLETE message as specified in 3GPP TS 29.018 [149].\n4.7.3.2.3.2\tCombined attach successful for GPRS services only\nApart from the actions on the routing area updating attempt counter, the description for IMSI attach for GPRS services as specified in subclause 4.7.3.1.3 shall be followed. In addition, the following description for IMSI attach for non-GPRS services applies.\nThe SGSN shall use GMM cause #28 \"SMS provided via GPRS in this routing area\" in the ATTACH ACCEPT message only if the MS requested \"SMS-only service\" by including the Additional update type IE in the ATTACH REQUEST message.\nThe MS receiving the ATTACH ACCEPT message takes one of the following actions depending on the GMM cause:\n# 2\t\t(IMSI unknown in HLR)\nThe MS shall stop timer T3310 if still running and shall reset the routing area updating attempt counter. The MS shall set the update status to U3 ROAMING NOT ALLOWED and shall delete any TMSI, LAI and ciphering key sequence number. The MS shall enter state GMM-REGISTERED.NORMAL-SERVICE. The new MM state is MM IDLE. The SIM/USIM shall be considered as invalid for non-GPRS services until switching off or the SIM/USIM is removed. If the message has been successfully integrity checked by the lower layers and the MS maintains a counter for \"SIM/USIM considered invalid for non-GPRS services\", then the MS shall set this counter to MS implementation-specific maximum value.\n# 16\t(MSC temporarily not reachable); or\n# 17\t(Network failure)\nThe MS shall stop timer T3310 if still running, and shall enter state MM-IDLE. The routing area updating attempt counter shall be incremented.\nIf the routing area updating attempt counter is less than 5, and the stored RAI is equal to the RAI of the current serving cell and the GMM update status is equal to GU1 UPDATED:\n-\tthe MS shall keep the GMM update status GU1 UPDATED and changes state to GMM-REGISTERED.ATTEMPTING-TO-UPDATE-MM. The MS shall start timer T3311. When timer T3311 expires the combined routing area update procedure indicating \"combined RA/LA updating with IMSI attach\" is triggered again.\nIf the routing area updating attempt counter is greater than or equal to 5:\n-\tthe MS shall start timer T3302 and shall change to state GMM-REGISTERED.ATTEMPTING-TO-UPDATE-MM;\n-\ta GPRS MS operating in MS operation mode A shall then proceed with appropriate MM specific procedure; a GPRS MS operating in MS operation mode B may then proceed with appropriate MM specific procedures. The MM sublayer shall act as in network operation mode II as long as the combined GMM procedures are not successful and no new RA is entered.\n# 22\t(Congestion)\nThe MS shall change to state GMM-REGISTERED.ATTEMPTING-TO-UPDATE-MM, shall stop timer T3310 if still running, and shall enter state MM-IDLE. The MS shall set the routing area updating attempt counter to 5 and shall start the timer T3302.\n\n# 28\t(SMS provided via GPRS in this routing area);\nThe MS shall stop timer T3310 if still running and shall reset the routing area updating attempt counter. The MS shall set the update status to U3 ROAMING NOT ALLOWED and shall delete any TMSI, LAI and ciphering key sequence number. The MS shall enter state GMM-REGISTERED.NORMAL-SERVICE. The new MM state is MM IDLE.\nThe MS stays in the current serving cell and applies the normal cell reselection process.\nOther GMM causevalues and the case that no GMM cause IE was received are considered as abnormal cases. The combined attach procedure shall be considered as failed for non-GPRS services. The behaviour of the MS in those cases is specified in subclause 4.7.3.2.5.\nIf the attach request can neither be accepted by the network for GPRS nor for non-GPRS services, an ATTACH REJECT message is transferred to the MS. The MS receiving the ATTACH REJECT message containing a reject cause other than GMM cause value #25 or the message is integrity protected, shall stop the timer T3310, and for all causes except #7, #12, #14, #15, #22 and #25 deletes the list of \"equivalent PLMNs\".\nIf the ATTACH REJECT message containing GMM cause value #25 was received without integrity protection, then the MS shall discard the message.\nIf the attach request is rejected due to NAS level mobility management congestion control, the network shall set the GMM cause value to #22 \"congestion\" and assign a back-off timer T3346.\nThe MS shall then take one of the following actions depending upon the reject cause:\n# 3\t\t(Illegal MS);\n# 6\t\t(Illegal ME), or\n# 8\t\t(GPRS services and non-GPRS services not allowed);\nThe MS shall set the GPRS update status to GU3 ROAMING NOT ALLOWED (shall store it according to subclause 4.1.3.2) and shall delete any P-TMSI, P-TMSI signature, RAI and GPRS ciphering key sequence number. The new GMM state is GMM-DEREGISTERED.NO-IMSI. The new MM state is MM IDLE.\nThe MS shall set the update status to U3 ROAMING NOT ALLOWED, shall delete any TMSI, LAI and ciphering key sequence number. The SIM/USIM shall be considered as invalid for GPRS and non-GPRS services until switching off or the SIM/USIM is removed or the timer T3245 expires as described in subclause 4.1.1.6.\nIf the message has been successfully integrity checked by the lower layers and the MS maintains a counter for \"SIM/USIM considered invalid for GPRS services\", then the MS shall set this counter to MS implementation-specific maximum value. If the message has been successfully integrity checked by the lower layers and the MS maintains a counter for \"SIM/USIM considered invalid for non-GPRS services\", then the MS shall set this counter to MS implementation-specific maximum value.\nNOTE 1:\tOptionally the MS starts the timer T3340 as described in subclause 4.7.1.9 for reject cause #8\nIf S1 mode is supported in the MS, the MS shall handle the EMM parameters EMM state, EPS update status, GUTI, last visited registered TAI, TAI list and KSI as specified in 3GPP TS 24.301 [120] for the case when the combined attach procedure is rejected with the EMM cause with the same value.\n# 7\t\t(GPRS services not allowed);\nThe MS shall set the GPRS update status to GU3 ROAMING NOT ALLOWED (and shall store it according to subclause 4.1.3.2) and shall delete any P-TMSI, P-TMSI signature, RAI and GPRS ciphering key sequence number. The SIM/USIM shall be considered as invalid for GPRS services until switching off or the SIM/USIM is removed. The new GMM state is GMM-DEREGISTERED; the MM state is MM IDLE.\nIf the message has been successfully integrity checked by the lower layers and the MS maintains a counter for \"SIM/USIM considered invalid for GPRS services\", then the MS shall set this counter to MS implementation-specific maximum value.\nNOTE 2:\tOptionally the MS starts the timer T3340 as described in subclause 4.7.1.9.\nA GPRS MS operating in MS operation mode A or B which is already IMSI attached for CS services in the network is still IMSI attached for CS services in the network.\nA GPRS MS operating in MS operation mode A or B shall proceed with the appropriate MM specific procedure according to the MM service state.\nIf S1 mode is supported in the MS, the MS shall handle the EMM parameters EMM state, EPS update status, GUTI, last visited registered TAI, TAI list and KSI as specified in 3GPP TS 24.301 [120] for the case when the combined attach procedure is rejected with the EMM cause with the same value.\n# 11\t(PLMN not allowed);\nThe MS shall delete any RAI, P-TMSI, P-TMSI signature and GPRS ciphering key sequence number stored, shall set the GPRS update status to GU3 ROAMING NOT ALLOWED (and shall store it according to subclause 4.1.3.2), shall reset the GPRS attach attempt counter and changes to state GMM-DEREGISTERED.\nThe MS shall set the update status to U3 ROAMING NOT ALLOWED, reset the location update attempt counter and shall delete any TMSI, LAI and ciphering key sequence number. The new MM state is MM IDLE.\nThe MS shall store the PLMN identity in the \"forbidden PLMN list\" and if the MS is configured to use timer T3245 (see 3GPP TS 24.368 [135] or 3GPP TS 31.102 [112]) then the MS shall start timer T3245 and proceed as described in subclause 4.1.1.6. If the message has been successfully integrity checked by the lower layers and the MS maintains a PLMN-specific attempt counter for that PLMN, then the MS shall set this counter to the MS implementation-specific maximum value.\nThe MS shall start timer T3340 as described in subclause 4.7.1.9.\nThe MS shall perform a PLMN selection according to 3GPP TS 23.122 [14].\nAn MS in GAN mode shall request a PLMN list in GAN (see 3GPP TS 44.318 [76b]) prior to perform a PLMN selection from this list according to 3GPP TS 23.122 [14].\nIf S1 mode is supported in the MS, the MS shall handle the EMM parameters EMM state, EPS update status, GUTI, last visited registered TAI, TAI list, KSI and attach attempt counter as specified in 3GPP TS 24.301 [120] for the case when the combined attach procedure is rejected with the EMM cause with the same value.\n# 12\t(Location area not allowed);\nThe MS shall delete any RAI, P-TMSI, P-TMSI signature GPRS ciphering key sequence number, shall set the GPRS update status to GU3 ROAMING NOT ALLOWED(and shall store it according to clause 4.1.3.2) and shall reset the GPRS attach attempt counter. The state is changed to GMM-DEREGISTERED.LIMITED-SERVICE.\nThe MS shall set the update status to U3 ROAMING NOT ALLOWED, reset the location update attempt counter and shall delete any TMSI, LAI and ciphering key sequence number. The new MM state is MM IDLE.\nThe MS shall store the LAI in the list of \"forbidden location areas for regional provision of service\".\nThe MS shall start timer T3340 as described in subclause 4.7.1.9.\nThe MS shall perform a cell selection according to 3GPP TS 43.022 [82] and 3GPP TS 25.304 [98].\nNOTE 3:\tThe cell selection procedure is not applicable for an MS in GAN mode.\nIf S1 mode is supported in the MS, the MS shall handle the EMM parameters EMM state, EPS update status, GUTI, last visited registered TAI, TAI list, KSI and attach attempt counter as specified in 3GPP TS 24.301 [120] for the case when the combined attach procedure is rejected with the EMM cause with the same value.\n# 13\t(Roaming not allowed in this location area);\nThe MS shall delete any RAI, P-TMSI, P-TMSI signature and GPRS ciphering key sequence number, shall set the GPRS update status to GU3 ROAMING NOT ALLOWED(and shall store it according to clause 4.1.3.2) and shall reset the GPRS attach attempt counter. The state is changed to GMM-DEREGISTERED.LIMITED-SERVICE or optionally to GMM-DEREGISTERED.PLMN-SEARCH.\nThe MS shall set the update status to U3 ROAMING NOT ALLOWED, reset the location update attempt counter and shall delete any TMSI, LAI and ciphering key sequence number. The new MM state is MM IDLE.\nThe mobile station shall store the LAI in the list of \"forbidden location areas for roaming\".\nThe MS shall start timer T3340 as described in subclause 4.7.1.9.\nThe MS shall perform a PLMN selection according to 3GPP TS 23.122 [14].\nAn MS in GAN mode shall request a PLMN list in GAN (see 3GPP TS 44.318 [76b]) prior to perform a PLMN selection from this list according to 3GPP TS 23.122 [14].\nIf S1 mode is supported in the MS, the MS shall handle the EMM parameters EMM state, EPS update status, GUTI, last visited registered TAI, TAI list, KSI and attach attempt counter as specified in 3GPP TS 24.301 [120] for the case when the combined attach procedure is rejected with the EMM cause with the same value.\n# 14\t(GPRS services not allowed in this PLMN);\nThe MS shall delete any RAI, P-TMSI, P-TMSI signature, and GPRS ciphering key sequence number stored, shall set the GPRS update status to GU3 ROAMING NOT ALLOWED (and shall store it according to subclause 4.1.3.2), shall reset the GPRS attach attempt counter and shall change to state GMM-DEREGISTERED.\nThe MS shall store the PLMN identity in the \"forbidden PLMNs for GPRS service\" list and if the MS is configured to use timer T3245 (see 3GPP TS 24.368 [135] or 3GPP TS 31.102 [112]) then the MS shall start timer T3245 and proceed as described in subclause 4.1.1.6. If the message has been successfully integrity checked by the lower layers and the MS maintains a PLMN-specific PS-attempt counter for that PLMN, then the MS shall set this counter to the MS implementation-specific maximum value.\nAs an implementation option, a GPRS MS operating in operation mode A or B may perform a PLMN selection according to 3GPP TS 23.122 [14].\nIf an MS in GAN mode performs a PLMN selection, it shall request a PLMN list in GAN (see 3GPP TS 44.318 [76b]) prior to perform a PLMN selection from this list according to 3GPP TS 23.122 [14].\nThe MS shall not perform the optional PLMN selection in the case where the PLMN providing this reject cause is:\n-\tOn the \"User Controlled PLMN Selector with Access Technology\";\n-\tOn the \"Operator Controlled PLMN Selector with Access Technology\" list;\n-\tOn the \"PLMN Selector\" list for an MS using a SIM/USIM without access technology information storage (i.e. the \"User Controlled PLMN Selector with Access Technology\" and the \"Operator Controlled PLMN Selector with Access Technology\" data files are not present); or\n-\tA PLMN identified as equivalent to any PLMN, within the same country, contained in the lists above.\nIf the MS does not perform a PLMN selection then a GPRS MS operating in MS operation mode A or B which is not yet IMSI attached for CS services in the network shall then perform an IMSI attach for non-GPRS services according to the conditions for the MM IMSI attach procedure (see subclause 4.4.3).\nA GPRS MS operating in MS operation mode A or B which is already IMSI attached for CS services in the network is still IMSI attached for CS services in the network.\nA GPRS MS operating in MS operation mode A or B shall proceed with the appropriate MM specific procedure according to the MM service state.\nIf S1 mode is supported in the MS, the MS shall handle the EMM parameters EMM state, EPS update status, GUTI, last visited registered TAI, TAI list, KSI and attach attempt counter as specified in 3GPP TS 24.301 [120] for the case when the combined attach procedure is rejected with the EMM cause with the same value.\n# 15\t(No Suitable Cells In Location Area);\nThe MS shall delete any RAI, P-TMSI, P-TMSI signature and GPRS ciphering key sequence number, shall set the GPRS update status to GU3 ROAMING NOT ALLOWED(and shall store it according to clause 4.1.3.2) and shall reset the GPRS attach attempt counter. The state is changed to GMM-DEREGISTERED.LIMITED-SERVICE.\nThe MS shall set the update status to U3 ROAMING NOT ALLOWED, reset the location update attempt counter and shall delete any TMSI, LAI and ciphering key sequence number. The new MM state is MM IDLE.\nThe MS shall store the LAI in the list of \"forbidden location areas for roaming\".\nThe MS shall start timer T3340 as described in subclause 4.7.1.9.\nThe MS shall search for a suitable cell in another location area or a tracking area according to 3GPP TS 43.022 [82] and 3GPP TS 25.304 [98] or 3GPP TS 36.304 [121].\nNOTE 4:\tThe cell selection procedure is not applicable for an MS in GAN mode.\nIf S1 mode is supported in the MS, the MS shall handle the EMM parameters EMM state, EPS update status, GUTI, last visited registered TAI, TAI list, KSI and attach attempt counter as specified in 3GPP TS 24.301 [120] for the case when the combined attach procedure is rejected with the EMM cause with the same value.\n# 22\t(Congestion);\nIf the T3346 value IE is present in the ATTACH REJECT message and the value indicates that this timer is neither zero nor deactivated, the MS shall proceed as described below, otherwise it shall be considered as an abnormal case and the behaviour of the MS for this case is specified in subclause 4.7.3.1.5.\nThe MS shall abort the attach procedure, reset the GPRS attach attempt counter, set the GPRS update status to GU2 NOT UPDATED and enter state GMM-DEREGISTERED.ATTEMPTING-TO-ATTACH.\nThe MS shall stop timer T3346 if it is running.\nIf the ATTACH REJECT message is integrity protected, the MS shall start timer T3346 with the value provided in the T3346 value IE.\nIf the ATTACH REJECT message is not integrity protected, the MS shall start timer T3346 with a random value from the default range specified in table 11.3a.\nThe MS stays in the current serving cell and applies the normal cell reselection process. The attach procedure is started, if still necessary, when timer T3346 expires or is stopped.\nA GPRS MS operating in MS operation mode A or B which is already IMSI attached for CS services in the network is still IMSI attached for CS services in the network.\nIf S1 mode is supported in the MS, the MS shall handle the EMM parameters EMM state, EPS update status, and attach attempt counter as specified in 3GPP TS 24.301 [120] for the case when the attach procedure is rejected with the EMM cause with the same value.\n# 25\t(Not authorized for this CSG)\nCause #25 is only applicable in UTRAN Iu mode and when received from a CSG cell. Other cases are considered as abnormal cases and the specification of the mobile station behaviour is given in subclause 4.7.3.2.5.\nThe MS shall set the GPRS update status to GU3 ROAMING NOT ALLOWED (and shall store it according to subclause 4.1.3.2) and shall reset the GPRS attach attempt counter. The state is changed to GMM-DEREGISTERED.LIMITED-SERVICE.\nIf the CSG ID and associated PLMN identity of the cell where the MS has sent the ATTACH REQUEST message are contained in the Allowed CSG list stored in the MS, the MS shall remove the entry corresponding to this CSG ID and associated PLMN identity from the Allowed CSG list.\nIf the CSG ID and associated PLMN identity of the cell where the MS has sent the ATTACH REQUEST message are contained in the Operator CSG list, the MS shall proceed as specified in 3GPP TS 23.122 [14] subclause 3.1A.\nThe MS shall start timer T3340 as described in subclause 4.7.1.9.\nIf the MS is IMSI attached for non-GPRS services, the MS shall set the update status to U3 ROAMING NOT ALLOWED and shall reset the location update attempt counter. The new MM state is MM IDLE.\nThe MS shall search for a suitable cell according to 3GPP TS 43.022 [82] and 3GPP TS 25.304 [98].\nIf S1 mode is supported in the MS, the MS shall handle the EMM parameters EMM state, EPS update status, GUTI, last visited registered TAI, TAI list, KSI and attach attempt counter as specified in 3GPP TS 24.301 [120] for the case when the combined attach procedure is rejected with the EMM cause with the same value.\nOther values are considered as abnormal cases. The specification of the MS behaviour in those cases is specified in subclause 4.7.3.2.5.\nThe MS shall proceed as follows:\n1)\tIf the combined attach was successful for GPRS services only and the ATTACH ACCEPT message contained a cause value not treated in subclause 4.7.3.2.3.2 or the GMM Cause IE is not included in the message, the MS shall proceed as follows:\na)\tThe MS shall stop timer T3310 if still running, and shall enter state MM IDLE. The routing area updating attempt counter shall be incremented;\nb)\tIf the routing area updating attempt counter is less than 5, and the stored RAI is equal to the RAI of the current serving cell and the GMM update status is equal to GU1 UPDATED:\n-\tthe MS shall keep the GMM update status GU1 UPDATED and changes state to GMM-REGISTERED.ATTEMPTING-TO-UPDATE-MM. The MS shall start timer T3311. When timer T3311 expires the combined routing area update procedure indicating \"combined RA/LA updating with IMSI attach\" is triggered again; and\nc)\tIf the routing area updating attempt counter is greater than or equal to 5:\n-\tthe MS shall start timer T3302 and shall change to state GMM-REGISTERED.ATTEMPTING-TO-UPDATE-MM; and\n-\ta GPRS MS operating in MS operation mode A shall then proceed with appropriate MM specific procedure; a GPRS MS operating in MS operation mode B may then proceed with appropriate MM specific procedures. The MM sublayer shall act as in network operation mode II as long as the combined GMM procedures are not successful and no new RA is entered; and\n2)\tOtherwise, the abnormal cases specified in subclause 4.7.3.1.5 apply with the following modification.\nIf the GPRS attach attempt counter is incremented according to subclause 4.7.3.1.5 the next actions depend on the Location Area Identities (stored on SIM/USIM and the one of the current serving cell) and the value of the attach attempt counter:\n-\tif the update status is U1 UPDATED, and the stored LAI is equal to the one of the current serving cell and the attach attempt counter is smaller than 5, then the mobile station shall keep the update status to U1 UPDATED, the new MM state is MM IDLE substate NORMAL SERVICE;\n-\tif the attach attempt counter is smaller than 5 and, additionally, the update status is different from U1 UPDATED or the stored LAI is different from the one of the current serving cell, then the mobile station shall delete any LAI, TMSI, ciphering key sequence number stored in the SIM/USIM and list of equivalent PLMNs and set the update status to U2 NOT UPDATED. The MM state remains MM LOCATION UPDATING PENDING; or\n-\tif the attach attempt counter is greater or equal to 5, then the mobile station shall delete any LAI, TMSI, ciphering key sequence number stored in the SIM/USIM and list of equivalent PLMNs and set the update status to U2 NOT UPDATED.\nA GPRS MS operating in MS operation mode A shall then proceed with appropriate MM specific procedure; a GPRS MS operating in MS operation mode B may then proceed with appropriate MM specific procedures. \nThe MM sublayer shall act as in network operation mode II as long as the combined GMM procedures are not successful and no new RA is entered. The new MM state is MM IDLE substate ATTEMPTING TO UPDATE or optionally MM IDLE substate PLMN SEARCH in order to perform a PLMN selection according to 3GPP TS 23.122 [14].\nThe abnormal cases specified in subclause 4.7.3.1.6 apply.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "4.7.4\tGPRS detach procedure",
                            "text_content": "The GPRS detach procedure is used:\n-\tto detach the IMSI for GPRS services only. Independent of the network operation mode, this procedure is used by all kind of GPRS MSs;\n-\tas a combined GPRS detach procedure used by GPRS MSs operating in MS operation mode A or B to detach the IMSI for GPRS and non-GPRS services or for non-GPRS services only, if the network operates in network operation mode I and no circuit-switched transaction is ongoing;\n-\tin the case of a network failure condition to indicate to the MS that a re-attach with successive activation of previously active PDP contexts shall be performed. In this case, the MS may also perform the procedures needed in order to activate any previously active multicast service(s); or\n-\tto detach the IMSI or IMEI for emergency bearer services.\nAfter completion of a GPRS detach procedure or combined GPRS detach procedure for GPRS and non-GPRS services the GMM context is released.\nAn eCall only mobile station that is not capable of eCall over IMS shall not perform any kind of GPRS detach procedure.\nThe GPRS detach procedure shall be invoked by the MS if the MS is switched off, the SIM/USIM card is removed from the MS or if the GPRS or non-GPRS capability of the MS is disabled. The procedure may be invoked by the network to detach the IMSI for GPRS services. The GPRS detach procedure causes the MS to be marked as inactive in the network for GPRS services, non-GPRS services or both services.\nIf the detach procedure is triggered due to SIM/USIM removal, the MS shall indicate \"switch off\" in the detach type IE.\nIf a detach is requested by the HLR for an MS that has a PDP context for emergency services, the SGSN shall not send a DETACH REQUEST message to the MS, and shall follow the procedure described in subclause 6.1.3.4.2 for an MS that has PDP contexts for emergency bearer services.\nWhen upper layers indicates that emergency bearer services are no longer required, the MS if still attached for emergency bearer services, may perform a detach followed by a re-attach to regain normal services, if the MS is in or moves to a suitable cell.\nIn A/Gb mode, if the GPRS detach procedure is performed, the PDP contexts and the MBMS contexts, if any, are deactivated locally without peer to peer signalling between the SM and LLC entities in the MS and the network.\nIn Iu mode, if the GPRS detach procedure is performed, the PDP contexts and the MBMS contexts, if any, are deactivated locally without peer to peer signalling between the SM entities in the MS and the network.\nIf the MS supports S1 mode, the MS shall store the TIN in the non-volatile memory in the ME, as described in 3GPP TS 24.301 [120], annex C, for a subsequent attach procedure.\nThe MS is allowed to initiate the GPRS detach procedure even if the timer T3346 is running.\nThe network proceeds with the GPRS detach procedure even if NAS level mobility management congestion control is active.\nThe GPRS detach procedure is initiated by the MS by sending a DETACH REQUEST message. The detach type information element may indicate \"GPRS detach with switching off\", \"GPRS detach without switching off\", \"IMSI detach\", \"GPRS/IMSI detach with switching off\" or \"GPRS/IMSI detach without switching off\".\nIf the MS has a valid P-TMSI, the MS shall include the P-TMSI in the DETACH REQUEST message. The MS shall also include a valid P-TMSI signature, if available.\nIf the MS is not switched off and the MS is in the state GMM_REGISTERED, timer T3321 shall be started after the DETACH REQUEST message has been sent. If the detach type information element value indicates \"IMSI Detach\" the MS shall enter GMM-REGISTERED.IMSI-DETACH_INITIATED, otherwise the MS shall enter the state GMM-DEREGISTERED-INITIATED. If the detach type information element value indicates \"IMSI Detach\" or \"GPRS/IMSI Detach\", state MM IMSI DETACH PENDING is entered. If the MS to be switched off is not a MS using any of the coverage classes of EC-GSM-IoT, the MS shall try for a period of 5 seconds to send the DETACH REQUEST message. If the MS to be switched off is a MS using any of the coverage classes of EC-GSM-IoT, that MS should try for at least a period of 10 seconds to send the DETACH REQUEST message. If the MS is able to send the DETACH REQUEST message during this time the MS may be switched off.\nIf the detach type information element value indicates \"GPRS detach without switching off \" and the MS is attached for GPRS and non-GPRS services and the network operates in network operation mode I, then if in the MS the timer T3212 is not already running, the timer T3212 shall be set to its initial value and restarted after the DETACH REQUEST message has been sent.\nWhen the DETACH REQUEST message is received by the network, the network shall send a DETACH ACCEPT message to the MS, if the detach type IE value indicates that the detach request has not been sent due to switching off. If switching off was indicated, the procedure is completed when the network receives the DETACH REQUEST message. The network and the MS shall deactivate the PDP contexts, the MBMS contexts and deactivate the logical link(s), if any.\nThe MS is marked as inactive in the network for GPRS services; state GMM-DEREGISTERED is entered in the MS and the network.\nIn Iu mode, if the detach has been sent due to switching off, then the network shall release the resources in the lower layers for this MS (see 3GPP TS 25.331 [23c]).\nNOTE:\tWhen the DETACH REQUEST message is received by the network, and if the detach type IE value indicates that the detach is not due to power off, the authentication and ciphering procedure as well as the identification procedure may be performed.\nIf the MS supports S1 mode and operates in MS operation mode A or B , the MS shall disable the E-UTRA capability (see 3GPP TS 24.301 [120]).\nWhen the DETACH REQUEST message is received by the network, a DETACH ACCEPT message shall be sent to the MS, if the detach type IE value indicates that the detach request has not been sent due to switching off. Depending on the value of the detach type IE the following applies:\nGPRS/IMSI detach:\nThe MS is marked as inactive in the network for GPRS and for non-GPRS services. The network and the MS shall deactivate the PDP contexts, the MBMS contexts and deactivate the logical link(s), if any. The States GMM-DEREGISTERED and MM NULL are entered in both the MS and the network.\nIn Iu mode, if the detach has been sent due to switching off, then the network shall release the resources in the lower layers for this MS (see 3GPP TS 25.331 [23c]).\nIMSI detach:\nThe MS is marked as inactive in the network for non-GPRS services. State MM NULL is entered in the MS and the network.\nThe following abnormal cases can be identified:\na)\tT3321 time-out\nOn the first expiry of the timer, the MS shall retransmit the DETACH REQUEST message and shall reset and restart timer T3321. This retransmission is repeated four times, i.e. on the fifth expiry of timer T3321, the GPRS detach procedure shall be aborted, the MS shall change to state:\n-\tMM-NULL if \"IMSI detach\" was requested;\n-\tGMM-REGISTERED.NORMAL-SERVICE if \"IMSI Detach\" was requested;\n-\tGMM-DEREGISTERED if \"GPRS detach\" was requested;\n-\tGMM-DEREGISTERED and MM-NULL if \"GPRS/IMSI\" detach was requested.\nb)\tLower layer failure before reception of DETACH ACCEPT message\nThe detach procedure is aborted and the MS shall change to one of the following states, except in the following implementation option cases b.1, b.2 and b3:\n-\tMM-NULL if \"IMSI detach\" was requested;\n-\tGMM-REGISTERED.NORMAL-SERVICE if \"IMSI Detach\" was requested;\n-\tGMM-DEREGISTERED if \"GPRS detach\" was requested;\n-\tGMM-DEREGISTERED and MM-NULL if \"IMSI/GPRS\" detach was requested.\nb.1)\tRelease of PS signalling connection before the completion of the GPRS detach procedure\nThe release of the PS signalling connection before completion of the GPRS detach procedure shall result in the GPRS detach procedure being initiated again, if the following conditions apply:\ni)\tThe original GPRS detach procedure was initiated over an existing PS signalling connection; and\nii)\tNo SECURITY MODE COMMAND message and no Non-Access Stratum (NAS) messages relating to the PS signalling connection (e.g. PS authentication procedure, see subclause 4.7.7) were received after the DETACH REQUEST message was transmitted.\nb.2)\tRR release in Iu mode (i.e. RRC connection release) with cause different than \"Directed signalling connection re-establishment\", for example, \"Normal\", or\"User inactivity\" (see 3GPP TS 25.331 [23c] and 3GPP TS 44.118 [111])\nThe GPRS detach procedure shall be initiated again, if the following conditions apply:\ni)\tThe original GPRS detach procedure was initiated over an exisiting RRC connection; and\nii)\tNo SECURITY MODE COMMAND message and no Non-Access Stratum (NAS) messages relating to the PS signalling connection (e.g. PS authentication procedure, see subclause 4.7.7) were received after the DETACH REQUEST message was transmitted.\nNOTE:\tThe RRC connection release cause different than \"Directed signalling connection re-establishment\" that triggers the re-initiation of the GPRS detach procedure is implementation specific.\nb.3)\tRR release in Iu mode (i.e. RRC connection release) with cause \"Directed signalling connection re-establishment\" (see 3GPP TS 25.331 [23c] and 3GPP TS 44.118 [111])\nThe routing area updating procedure shall be initiated followed by completion of the GPRS detach procedure if the following conditions apply:\ni)\tThe original GPRS detach procedure was not due to SIM removal; and\nii)\tThe original GPRS detach procedure was not due to a rerun of the procedure due to \"Directed signalling connection reestablishment\".\nc)\tDetach procedure collision\nGPRS detach containing cause \"power off\":\n-\tIf the MS receives a DETACH REQUEST message before the MS initiated GPRS detach procedure has been completed, this message shall be ignored and the MS initiated GPRS detach procedure shall continue.\nGPRS detach containing other causes than \"power off\":\n-\tIf the MS receives a DETACH REQUEST message before the MS initiated GPRS detach procedure has been completed, the MS shall treat the message as specified in subclause 4.7.4.2.2 with the following modifications:\n-\tIf the DETACH REQUEST message received by the MS contains detach type \"re-attach required\", and the MS initiated detach procedure is with detach type \"GPRS detach\" or \"Combined GPRS/IMSI detach\", the MS need not initiate the GPRS attach or combined GPRS attach procedure.\n-\tIf the DETACH REQUEST message received by the MS contains detach type \"IMSI detach\", and the MS initiated detach procedure is with detach type \"IMSI detach\", the MS in operation mode A or B in network operation mode I need not re-attach to non-GPRS services.\n-\tIf the DETACH REQUEST message received by the MS contains detach type \"IMSI detach\", and the MS initiated detach procedure is with detach type \"GPRS detach\" or \"combined GPRS/IMSI detach\", the MS shall progress both procedures. The MS in operation mode A or B in network operation mode I need not re-attach to non-GPRS services.\nd)\tDetach and GMM common procedure collision\nGPRS detach containing cause \"power off\":\n-\tIf the MS receives a message used in a GMM common procedure before the GPRS detach procedure has been completed, this message shall be ignored and the GPRS detach procedure shall continue.\nGPRS detach containing other causes than \"power off\" and containing detach type \"IMSI detach\":\n-\tIf the MS receives a message used in a GMM common procedure before the GPRS detach procedure has been completed, both the GMM common procedure and the GPRS detach procedure shall continue.\nGPRS detach containing other causes than \"power off\" and containing other detach types than \"IMSI detach\":\n-\tIf the MS receives a P-TMSI REALLOCATION COMMAND, a GMM STATUS, or a GMM INFORMATION message before the GPRS detach procedure has been completed, this message shall be ignored and the GPRS detach procedure shall continue.\n-\tIf the MS receives an AUTHENTICATION AND CIPHERING REQUEST or IDENTITY REQUEST message, before the GPRS detach procedure has been completed, the MS shall respond to it as described in subclauses 4.7.7 and 4.7.8 respectively.\ne)\tChange of cell within the same RA (A/Gb mode only)\nIf a cell change occurs within the same RA before a DETACH ACCEPT message has been received, then the cell update procedure shall be performed before completion of the detach procedure.\nf)\tChange of cell into a new routing area\nIf a cell change into a new routing area occurs before a DETACH ACCEPT message has been received, the GPRS detach procedure shall be aborted and re-initiated after successfully performing a routing area updating procedure. If the detach procedure is performed due to the removal of the SIM/USIM or the MS is to be switched off, the MS shall abort the detach procedure and enter the state GMM-DEREGISTERED.\ng)\tAccess barred because of access class control or EAB\nThe signalling procedure for GPRS detach shall not be started. The MS starts the signalling procedure as soon as possible and if still necessary, i.e. when the barred state is removed or because of a cell change, or performs a local detach immediately or after an implementation dependent time.\nh)\tDetach and paging for non-GRPS services procedure collision\nIf the MS receives a paging for non-GPRS services before the MS initiated combined GPRS detach procedure with detach type \"IMSI detach\" or \"GPRS/IMSI detach\" has been completed, then the paging for non-GPRS services shall be ignored and the MS initiated combined GPRS detach procedure shall continue.\nThe figure depicts a 3GPP TS 24.008 MS initiated GPRS detach procedure, illustrating the steps involved in initiating a GPRS detach. The figure shows the MS initiating the detach, the GPRS network, and the network's response to the detach. The figure is a visual representation of the technical details of the GPRS detach procedure, providing a clear and concise summary of the process.\nFigure 4.7.4/1 3GPP TS 24.008: MS initiated GPRS detach procedure\nFor the cases b and f:\n-\tTimer T3321 shall be stopped if still running.\nThe following abnormal cases can be identified:\na)\tDetach request received in a CSG cell for which the MS has no valid CSG subscription\nIf the MS initiates a detach procedure in a CSG cell the CSG ID of which is not valid for the MS and the detach procedure is not due to \"switch off\", the network shall proceed as follows:\n-\tif the detach type is \"IMSI detach\" and the MS has a PDN connection for emergency bearer services active, the SGSN shall send a DETACH ACCEPT message and deactivate all non-emergency PDP contexts, if any, by initiating a PDP context deactivation procedure;\n-\totherwise, the network shall initiate the detach procedure. The network shall send a DETACH REQUEST message including the GMM cause value #25 \"not authorized for this CSG\".\nThe network initiates the GPRS detach procedure by sending a DETACH REQUEST message to the MS. The DETACH REQUEST message shall include a detach type IE. In addition, the network may include a cause IE to specify the reason for the detach request. The network shall start timer T3322. If the detach type IE indicates \"re-attach required\", or \"re-attach not required\" and the cause code is not #2 \"IMSI unknown in HLR\", the network shall deactivate the PDP contexts, the MBMS contexts and deactivate the logical link(s), if any, and shall change to state GMM-DEREGISTERED-INITIATED.\nWhen receiving the DETACH REQUEST message and the detach type indicates \"re-attach required\", the MS shall deactivate the PDP context(s), the MBMS context(s) and deactivate the logical link(s), if any. The MS shall stop the timer T3346, if it is running. The MS shall also stop timer(s) T3396, if it is running. The MS shall send a DETACH ACCEPT message to the network and shall enter the state GMM-DEREGISTERED. The MS shall, after the completion of the GPRS detach procedure, initiate a GPRS attach procedure. The MS should also activate PDP context(s) that were originally activated by the MS to replace any previously MS activated PDP context(s). The MS should also perform the procedures needed in order to activate any previously active multicast service(s).\nNOTE 1:\tWhen the detach type indicates \"re-attach required\", user interaction is necessary in some cases when the MS cannot re-activate the PDP/MBMS context(s) automatically.\nA GPRS MS operating in MS operation mode A or B in network operation mode I, which receives an DETACH REQUEST message with detach type indicating \"re-attach required\" or \"re-attach not required\" and no cause code, is only detached for GPRS services in the network.\nWhen receiving the DETACH REQUEST message and the detach type IE indicates \"IMSI detach\", the MS shall not deactivate the PDP/MBMS contexts. The MS shall set the MM update status to U2 NOT UPDATED. An MS in operation mode A or B in network operation mode I may send a DETACH ACCEPT message to the network, and shall re-attach to non-GPRS service by performing the combined routing area updating procedure according to subclause 4.7.5.2, sending a ROUTING AREA UPDATE REQUEST message with Update type IE indicating \"combined RA/LA updating with IMSI attach\". An MS in operation mode A that is in an ongoing circuit-switched transaction shall initiate the combined routing area updating after the circuit-switched transaction has been released. An MS in operation mode C, or in MS operation mode A or B in network operation mode II, shall send a DETACH ACCEPT message to the network.\nIf the detach type IE indicates \"IMSI detach\", or \"re-attach required\" then the MS shall ignore the cause code if received.\nIf the MS is attached for GPRS and non-GPRS services and the network operates in network operation mode I, then if in the MS the timer T3212 is not already running, the timer T3212 shall be set to its initial value and restarted if:\n-\tthe detach type IE indicates \"re-attach required\"; or\n-\tthe detach type IE indicates \"re-attach not required\" and no cause code is included.\nWhen receiving the DETACH REQUEST message and the detach type IE indicates \"re-attach not required\" and no cause code, or \"re-attach not required\" and the cause code is not #2 \"IMSI unknown in HLR\", the MS shall deactivate the PDP contexts, the MBMS contexts and deactivate the logical link(s), if any. The MS shall then send a DETACH ACCEPT message to the network and shall change state to GMM-DEREGISTERED.\nIf the detach type IE indicates \"re-attach not required\" and no cause code is included,\n-\tthe MS shall set the GPRS update status to GU2 NOT UPDATED, delete the GMM parameters P-TMSI, P-TMSI signature, RAI, and GPRS ciphering key sequence number, and start timer T3302. If the MS is operating in MS operation mode C, it may enter the state GMM-DEREGISTERED.PLMN-SEARCH in order to perform a PLMN selection according to 3GPP TS 23.122 [6]; otherwise the MS shall enter the state GMM-DEREGISTERED.ATTEMPTING-TO-ATTACH; and\n-\tif S1 mode is supported in the MS, the MS shall handle the EMM parameters EMM state, EPS update status, GUTI, last visited registered TAI, TAI list and KSI, as specified in 3GPP TS 24.301 [120] for the case when a DETACH REQUEST is received with the no EMM cause included and with detach type set to \"re-attach not required\".\nIf the detach type IE indicates \"re-attach not required\" and a cause code is included, then, depending on the received cause code, the MS shall act as follows:\n# 2\t\t(IMSI unknown in HLR);\nThe MS shall set the update status to U3 ROAMING NOT ALLOWED and shall delete any TMSI, LAI and ciphering key sequence number. The new MM state is MM IDLE. The SIM/USIM shall be considered as invalid for non-GPRS services until switching off or the SIM/USIM is removed. If the message has been successfully integrity checked by the lower layers and the MS maintains a counter for \"SIM/USIM considered invalid for non-GPRS services\", then the MS shall set this counter to MS implementation-specific maximum value.\nA GPRS MS operating in MS operation mode A or B in network operation mode I, is still IMSI attached for GPRS services in the network.\n# 3\t\t(Illegal MS);\n# 6\t\t(Illegal ME);\nThe MS shall set the GPRS update status to GU3 ROAMING NOT ALLOWED (and shall store it according to subclause 4.1.3.2) and shall delete any P-TMSI, P-TMSI signature, RAI and GPRS ciphering key sequence number. The MS shall delete the list of equivalent PLMNs. The new GMM state is GMM-DEREGISTERED.NO-IMSI. The SIM/USIM shall be considered as invalid for GPRS services until switching off or the SIM/USIM is removed. If the message has been successfully integrity checked by the lower layers and the MS maintains a counter for \"SIM/USIM considered invalid for GPRS services\", then the MS shall set this counter to MS implementation-specific maximum value.\nA GPRS MS operating in MS operation mode A or B shall in addition set the update status to U3 ROAMING NOT ALLOWED, shall delete any TMSI, LAI and ciphering key sequence number. If the MS is operating in MS operation mode A and an RR connection exists, the MS shall abort the RR connection, unless an emergency call is ongoing. The SIM/USIM shall be considered as invalid also for non-GPRS services until switching off or the SIM/USIM is removed. If the message has been successfully integrity checked by the lower layers and the MS maintains a counter for \"SIM/USIM considered invalid for non-GPRS services\", then the MS shall set this counter to MS implementation-specific maximum value.\nIf S1 mode is supported in the MS, the MS shall handle the EMM parameters EMM state, EPS update status, GUTI, last visited registered TAI, TAI list and KSI as specified in 3GPP TS 24.301 [120] for the case when a DETACH REQUEST is received with the EMM cause with the same value and with detach type set to \"re-attach not required\".\nNOTE 2:\tThe possibility to configure an MS so that the radio transceiver for a specific radio access technology is not active, although it is implemented in the MS, is out of scope of the present specification.\n# 7\t\t(GPRS services not allowed);\nThe MS shall set the GPRS update status to GU3 ROAMING NOT ALLOWED (and shall store it according to subclause 4.1.3.2) and shall delete any P-TMSI, P-TMSI signature, RAI and GPRS ciphering key sequence number. The SIM/USIM shall be considered as invalid for GPRS services until switching off or the SIM/USIM is removed. The new state is GMM-DEREGISTERED. If the message has been successfully integrity checked by the lower layers and the MS maintains a counter for \"SIM/USIM considered invalid for GPRS services\", then the MS shall set this counter to MS implementation-specific maximum value.\nA GPRS MS operating in MS operation mode A or B which is already IMSI attached for CS services is still IMSI attached for CS services in the network.\nA GPRS MS operating in MS operation mode A or B in network operation mode I shall then proceed with the appropriate MM specific procedure.\nNOTE 3:\tOptionally the MS starts the timer T3340 as described in subclause 4.7.1.9.\nIf S1 mode is supported in the MS, the MS shall handle the EMM parameters EMM state, EPS update status, GUTI, last visited registered TAI, TAI list and KSI as specified in 3GPP TS 24.301 [120] for the case when a DETACH REQUEST is received with the EMM cause with the same value and with detach type set to \"re-attach not required\".\n# 8\t\t(GPRS services and non-GPRS services not allowed);\nThe MS shall set the GPRS update status to GU3 ROAMING NOT ALLOWED (and shall store it according to subclause 4.1.3.2) and shall delete any P-TMSI, P-TMSI signature, RAI and GPRS ciphering key sequence number. The MS shall delete the list of equivalent PLMNs. The new GMM state is GMM-DEREGISTERED.NO-IMSI.\nThe MS shall set the update status to U3 ROAMING NOT ALLOWED, shall delete any TMSI, LAI and ciphering key sequence number. If the MS is operating in MS operation mode A and an RR connection exists, the MS shall abort the RR connection, unless an emergency call is ongoing. The SIM/USIM shall be considered as invalid for GPRS and non-GPRS services until switching off or the SIM/USIM is removed. If the message has been successfully integrity checked by the lower layers and the MS maintains a counter for \"SIM/USIM considered invalid for GPRS services\", then the MS shall set this counter to MS implementation-specific maximum value. If the message has been successfully integrity checked by the lower layers and the MS maintains a counter for \"SIM/USIM considered invalid for non-GPRS services\", then the MS shall set this counter to MS implementation-specific maximum value.\nNOTE 4:\tOptionally the MS starts the timer T3340 as described in subclause 4.7.1.9.\nIf S1 mode is supported in the MS, the MS shall handle the EMM parameters EMM state, EPS update status, GUTI, last visited registered TAI, TAI list and KSI as specified in 3GPP TS 24.301 [120] for the case when a DETACH REQUEST is received with the EMM cause with the same value and with detach type set to \"re-attach not required\".\n# 11\t(PLMN not allowed);\nThe MS shall delete any RAI or LAI, P-TMSI, P-TMSI signature and GPRS ciphering key sequence number, shall set the GPRS update status to GU3 ROAMING NOT ALLOWED (and shall store it according to subclause 4.1.3.2) and shall reset the GPRS attach attempt counter. The MS shall delete the list of equivalent PLMNs. The new GMM state is GMM-DEREGISTERED.\nThe MS shall store the PLMN identity in the \"forbidden PLMN list\" and if the MS is configured to use timer T3245 (see 3GPP TS 24.368 [135] or 3GPP TS 31.102 [112]) then the MS shall start timer T3245 and proceed as described in subclause 4.1.1.6. If the message has been successfully integrity checked by the lower layers and the MS maintains a PLMN-specific attempt counter for that PLMN, then the MS shall set this counter to the MS implementation-specific maximum value.\nThe MS shall start timer T3340 as described in subclause 4.7.1.9.\nIf no RR connection exists, the MS shall perform the following additional actions immediately. If the MS is operating in MS operation mode A and an RR connection exists, the MS shall perform these actions when the RR connection is subsequently released:\n-\tA GPRS MS operating in MS operation mode A or B shall set the update status to U3 ROAMING NOT ALLOWED and shall delete any TMSI, LAI and ciphering key sequence number. The new MM state is MM IDLE.\n-\tThe MS shall perform a PLMN selection according to 3GPP TS 23.122 [14].\nAn MS in GAN mode shall request a PLMN list in GAN (see 3GPP TS 44.318 [76b]) prior to perform a PLMN selection from this list according to 3GPP TS 23.122 [14].\nIf S1 mode is supported in the MS, the MS shall handle the EMM parameters EMM state, EPS update status, GUTI, last visited registered TAI, TAI list, KSI and attach attempt counter as specified in 3GPP TS 24.301 [120] for the case when a DETACH REQUEST is received with the EMM cause with the same value and with detach type set to \"re-attach not required\".\n# 12\t(Location area not allowed);\nThe MS shall delete any RAI, P-TMSI, P-TMSI signature GPRS ciphering key sequence number, shall set the GPRS update status to GU3 ROAMING NOT ALLOWED(and shall store it according to clause 4.1.3.2) and shall reset the GPRS attach attempt counter. The state is changed to GMM-DEREGISTERED.LIMITED-SERVICE.\nThe MS shall store the LAI in the list of \"forbidden location areas for regional provision of service\".\nThe MS shall start timer T3340 as described in subclause 4.7.1.9.\nIf no RR connection exists, the MS shall perform the following additional actions immediately. If the MS is operating in MS operation mode A and an RR connection exists, the MS shall perform these actions when the RR connection is subsequently released:\n-\tIf the MS is IMSI attached, the MS shall set the update status to U3 ROAMING NOT ALLOWED, shall delete any TMSI, LAI and ciphering key sequence number and shall reset the location update attempt counter. The new MM state is MM IDLE.\n-\tThe MS shall perform a cell selection according to 3GPP TS 43.022 [82] and 3GPP TS 25.304 [98].\nNOTE 5:\tThe cell selection procedure is not applicable for an MS in GAN mode.\nIf S1 mode is supported in the MS, the MS shall handle the EMM parameters EMM state, EPS update status, GUTI, last visited registered TAI, TAI list, KSI and attach attempt counter as specified in 3GPP TS 24.301 [120] for the case when a DETACH REQUEST is received with the EMM cause with the same value and with detach type set to \"re-attach not required\".\n# 13\t(Roaming not allowed in this location area);\nThe MS shall delete any RAI, P-TMSI, P-TMSI signature and GPRS ciphering key sequence number, shall set the GPRS update status to GU3 ROAMING NOT ALLOWED (and shall store it according to clause 4.1.3.2) and shall reset the GPRS attach attempt counter. The MS shall delete the list of equivalent PLMNs. The state is changed to GMM-DEREGISTERED.LIMITED-SERVICE or optionally to GMM-DEREGISTERED.PLMN-SEARCH.\nThe MS shall store the LAI in the list of \"forbidden location areas for roaming\".\nThe MS shall start timer T3340 as described in subclause 4.7.1.9.\nIf no RR connection exists, the MS shall perform the following additional actions immediately. If the MS is operating in MS operation mode A and an RR connection exists, the MS shall perform these actions when the RR connection is subsequently released:\n-\tIf the MS is IMSI attached, the MS shall set the update status to U3 ROAMING NOT ALLOWED, shall delete any TMSI, LAI and ciphering key sequence number and shall reset the location update attempt counter. The new MM state is MM IDLE.\n-\tThe MS shall perform a PLMN selection according to 3GPP TS 23.122 [14].\nAn MS in GAN mode shall request a PLMN list in GAN (see 3GPP TS 44.318 [76b]) prior to perform a PLMN selection from this list according to 3GPP TS 23.122 [14].\nIf S1 mode is supported in the MS, the MS shall handle the EMM parameters EMM state, EPS update status, GUTI, last visited registered TAI, TAI list, KSI and attach attempt counter as specified in 3GPP TS 24.301 [120] for the case when a DETACH REQUEST is received with the EMM cause with the same value and with detach type set to \"re-attach not required\".\n# 14\t(GPRS services not allowed in this PLMN);\nThe MS shall delete any RAI, P-TMSI, P-TMSI signature, and GPRS ciphering key sequence number stored, shall set the GPRS update status to GU3 ROAMING NOT ALLOWED (and shall store it according to subclause 4.1.3.2), shall reset the GPRS attach attempt counter and shall change to state GMM-DEREGISTERED.\nThe MS shall store the PLMN identity in the \"forbidden PLMNs for GPRS service\" list and if the MS is configured to use timer T3245 (see 3GPP TS 24.368 [135] or 3GPP TS 31.102 [112]) then the MS shall start timer T3245 and proceed as described in subclause 4.1.1.6. If the message has been successfully integrity checked by the lower layers and the MS maintains a PLMN-specific PS-attempt counter for that PLMN, then the MS shall set this counter to the MS implementation-specific maximum value.\nA GPRS MS operating in MS operation mode C shall delete the list of equivalent PLMNs and perform a PLMN selection according to 3GPP TS 23.122 [14].\nA GPRS MS operating in MS operation mode A or B which is already IMSI attached for CS services is still IMSI attached for CS services in the network.\nA GPRS MS operating in MS operation mode A or B in network operation mode I shall then proceed with the appropriate MM specific procedure.\nIf S1 mode is supported in the MS, the MS shall handle the EMM parameters EMM state, EPS update status, GUTI, last visited registered TAI, TAI list, KSI and attach attempt counter as specified in 3GPP TS 24.301 [120] for the case when a DETACH REQUEST is received with the EMM cause with the same value and with detach type set to \"re-attach not required\".\n# 15\t(No Suitable Cells In Location Area);\nThe MS shall delete any RAI, P-TMSI, P-TMSI signature and GPRS ciphering key sequence number, shall set the GPRS update status to GU3 ROAMING NOT ALLOWED(and shall store it according to clause 4.1.3.2) and shall reset the GPRS attach attempt counter. The state is changed to GMM-DEREGISTERED.LIMITED-SERVICE.\nThe MS shall store the LAI in the list of \"forbidden location areas for roaming\".\nThe MS shall start timer T3340 as described in subclause 4.7.1.9.\nIf no RR connection exists, the MS shall perform the following additional actions immediately. If the MS is operating in MS operation mode A and an RR connection exists, the MS shall perform these actions when the RR connection is subsequently released:\n-\tIf the MS is IMSI attached, the MS shall set the update status to U3 ROAMING NOT ALLOWED, shall delete any TMSI, LAI and ciphering key sequence number and shall reset the location update attempt counter. The new MM state is MM IDLE.\n-\tThe MS shall search for a suitable cell in another location area or a tracking area according to 3GPP TS 43.022 [82] and 3GPP TS 25.304 [98] or 3GPP TS 36.304 [121].\nNOTE 6:\tThe cell selection procedure is not applicable for an MS in GAN mode.\nIf S1 mode is supported in the MS, the MS shall handle the EMM parameters EMM state and EPS update status, GUTI, last visited registered TAI, TAI list, KSI and attach attempt counter as specified in 3GPP TS 24.301 [120] for the case when a DETACH REQUEST is received with the EMM cause with the same value and with detach type set to \"re-attach not required\".\n# 25\t(Not authorized for this CSG)\nThe MS shall set the GPRS update status to GU3 ROAMING NOT ALLOWED (and store it according to subclause 4.1.3.2) and shall reset the GPRS attach attempt counter. The state is changed to GMM-DEREGISTERED.LIMITED-SERVICE.\nIf the cell where the MS has received the DETACH REQUEST message is a CSG cell and the CSG ID and associated PLMN identity of the cell are contained in the Allowed CSG list stored in the MS, the MS shall remove the CSG ID and associated PLMN identity from the Allowed CSG list.\nIf the cell where the MS has received the DETACH REQUEST message is a CSG cell and the CSG ID and associated PLMN identity of the cell are contained in the Operator CSG list, the MS shall proceed as specified in 3GPP TS 23.122 [14] subclause 3.1A.\nThe MS shall start timer T3340 as described in subclause 4.7.1.9.\nIf the MS is IMSI attached for non-GPRS services, the MS shall set the update status to U3 ROAMING NOT ALLOWED and shall reset the location update attempt counter. The new MM state is MM IDLE.\nThe MS shall search for a suitable cell according to 3GPP TS 43.022 [82] and 3GPP TS 25.304 [98].\nIf S1 mode is supported in the MS, the MS shall handle the EMM parameters EMM state and EPS update status, GUTI, last visited registered TAI, TAI list, KSI and attach attempt counter as specified in 3GPP TS 24.301 [120] for the case when a DETACH REQUEST is received with the EMM cause with the same value and with detach type set to \"re-attach not required\".\nNOTE 7:\tCSG is applicable only for UMTS.\nOther cause values shall not impact the update status. Further actions of the MS are implementation dependent.\nThe network shall, upon receipt of the DETACH ACCEPT message, stop timer T3322. If the detach type IE included in the DETACH REQUEST message indicates \"IMSI detach\", or \"re-attach not required\" and the cause code is #2 \"IMSI unknown in HLR\", the network shall not change the current GMM state; otherwise the network shall change state to GMM-DEREGISTERED.\nThe following abnormal cases can be identified:\na)\tT3322 time-out\nOn the first expiry of the timer, the network shall retransmit the DETACH REQUEST message and shall start timer T3322. This retransmission is repeated four times, i.e. on the fifth expiry of timer T3322, the GPRS detach procedure shall be aborted. If the detach type indicates \"IMSI detach\", or \"re-attach not required\" and the cause code is #2 \"IMSI unknown in HLR\", the network shall not change the current GMM state; otherwise the network shall change state to GMM-DEREGISTERED.\nb)\tLow layer failure\nThe GPRS detach procedure is aborted. If the detach type indicates \"IMSI detach\", or \"re-attach not required\" and the cause code is #2 \"IMSI unknown in HLR\", the network shall not change the current GMM state; otherwise the network shall change state to GMM-DEREGISTERED.\nc)\tGPRS detach procedure collision\nIf the network receives a DETACH REQUEST message with \"switching off\" indicated, before the network initiated GPRS detach procedure has been completed, both procedures shall be considered completed.\nIf the network receives a DETACH REQUEST message without \"switching off\" indicated, before the network initiated GPRS detach procedure has been completed, the network shall send a DETACH ACCEPT message to the MS.\nd)\tGPRS detach and GPRS attach procedure collision\nIf the network receives an ATTACH REQUEST message before the network initiated GPRS detach procedure with type of detach 're-attach not required' has been completed, the network shall ignore the ATTACH REQUEST message. If the detach type IE value, sent in the DETACH REQUEST message, indicates \"re-attach required\" the detach procedure is aborted and the GPRS attach procedure shall be progressed after the PDP contexts and MBMS contexts, if any, have been deleted. If the detach type IE value, sent in the DETACH REQUEST message, indicates \"IMSI detach\" the detach procedure is aborted and the GPRS attach procedure shall be progressed.\ne)\tGPRS detach and routing area updating procedure collision\nGPRS detach containing detach type \"re-attach required\" or \"re-attach not required\":\nIf the network receives a ROUTING AREA UPDATE REQUEST message before the network initiated GPRS detach procedure has been completed, the detach procedure shall be progressed, i.e. the ROUTING AREA UPDATE REQUEST message shall be ignored. If the DETACH REQUEST message contains detach type \"re-attach not required\" and GMM cause #2 \"IMSI unknown in HLR\", the network will follow the procedure as described below for the detach type \"IMSI detach\".\nGPRS detach containing detach type \"IMSI detach\":\nIf the network receives a ROUTING AREA UPDATE REQUEST message before the network initiated GPRS detach procedure has been completed, the network shall abort the detach procedure, shall stop T3322 and shall progress the routing area update procedure.\nf)\tGPRS detach and service request procedure collision\nGPRS detach containing detach type \"re-attach required\" or \"re-attach not required\":\nIf the network receives a SERVICE REQUEST message before the network initiated GPRS detach procedure has been completed, the network shall progress the detach procedure. If the GPRS Detach Request message contains detach type \"re-attach not required\" and GMM cause #2 \"IMSI unknown in HLR\", the network will follow the procedure as described below for the detach type \"IMSI detach\".\nGPRS detach containing detach type \"IMSI detach\":\nIf the network receives a SERVICE REQUEST message before the network initiated GPRS detach procedure has been completed, the network shall progress both procedures.\nThe figure depicts a network initiated GPRS detach procedure, which is a crucial step in the network management process. It shows the steps taken by the network to initiate a GPRS detach, including the initiation of the detach request, the initiation of the detach request, and the initiation of the detach request. The figure also includes a diagram of the network, showing the various components and their connections.\nFigure 4.7.4/2 3GPP TS 24.008: Network initiated GPRS detach procedure\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "4.7.5\tRouting area updating procedure",
                            "text_content": "This procedure is used for:\n-\tnormal routing area updating to update the registration of the actual routing area of an MS in the network. This procedure is used by GPRS MSs in MS operation mode C and by GPRS MSs in MS operation modes A or B that are IMSI attached for GPRS and non-GPRS services if the network operates in network operation mode II;\n-\tcombined routing area updating to update the registration of the actual routing and location area of an MS in the network. This procedure is used by GPRS MSs in MS operation modes A or B that are IMSI attached for GPRS and non-GPRS services provided that the network operates in network operation mode I;\n-\tperiodic routing area updating. This procedure is used by GPRS MSs in MS operation mode C and by GPRS MSs in MS operation modes A or B that are IMSI attached for GPRS or for GPRS and non-GPRS services independent of the network operation mode;\n-\tIMSI attach for non-GPRS services when the MS is IMSI attached for GPRS services. This procedure is used by GPRS MSs in MS operation modes A or B, if the network operates in network operation mode I;\n-\tin A/Gb mode, resuming GPRS services when the RR sublayer indicated a resumption failure after dedicated mode was left, see 3GPP TS 44.018 [84];\n-\tin A/Gb mode, updating the network with the new MS Radio Access Capability IE when the content of the IE has changed;\n-\tupdating the network with the new DRX parameter IE when the content of the IE has changed;\nNOTE 1:\tSuch changes can be used e.g. when the MS activates a PDP context with service requirements that cannot be met with the current DRX parameter. As PDP context(s) are activated and deactivated, the GMM context will be updated with an appropriate DRX parameter;\n-\tre-negotiation of the READY timer value;\n-\tIu mode to A/Gb mode and for A/Gb mode to Iu mode intersystem change, see subclause 4.7.1.7;\n-\tin Iu mode, re-synchronizing the PMM mode of MS and network after RRC connection release with cause \"Directed signalling connection re-establishment\", see subclause 4.7.2.5;\n-\tin Iu mode and A/Gb mode after intersystem change from S1 mode, and the GMM receives an indication of \"RRC connection failure\" from lower layers due to lower layer failure while in S1 mode;\n-\tS1 mode to Iu mode or S1 mode to A/Gb mode intersystem change and ISR is not activated;\n-\tS1 mode to Iu mode or S1 mode to A/Gb mode intersystem change and ISR is activated, but the MS changes to a routeing area it has not previously registered with the network;\n-\tindicating to the network that due to a manual CSG selection the MS has selected a CSG cell whose CSG identity and associated PLMN identity are not included in the MS's Allowed CSG list or in the MS's Operator CSG list;\n-\tindicating to the network that the mobile station classmark 2, mobile station classmark 3 or the supported codecs have changed for a MS supporting SRVCC; or\n-\tindicating the current radio access technology to the network for the support of terminating access domain selection for voice calls or voice sessions (for details see subclause 4.7.5.1 and subclause 4.7.5.2.1).\nWhile an MS has a PDN connection for emergency bearer services, the MS shall not perform manual CSG selection.\nThe routing area updating procedure shall also be used by a MS which is attached for GPRS services if a new PLMN is entered (see 3GPP TS 23.122 [14]), unless the MS is configured for \"AttachWithIMSI\" as specified in 3GPP TS 24.368 [135] or 3GPP TS 31.102 [112] and the new PLMN is neither the registered PLMN nor in the list of equivalent PLMNs.\nAn eCall only mobile station that is not capable of eCall over IMS shall not perform a normal or combined routing area updating procedure.\nSubclause 4.7.5.1 describes the routing area updating procedures for updating the routing area only. The combined routing area updating procedure used to update both the routing and location area is described in subclause 4.7.5.2.\nThe routing area updating procedure is always initiated by the MS. It is only invoked in state GMM-REGISTERED.\nTo limit the number of consecutive rejected routing area update attempts, a routing area updating attempt counter is introduced. The routing area updating attempt counter shall be incremented as specified in subclause 4.7.5.1.5. Depending on the value of the routing area updating attempt counter, specific actions shall be performed. The routing area updating attempt counter shall be reset when:\n-\ta GPRS attach or combined GPRS attach procedure is successfully completed;\n-\ta normal or periodic routing area updating or combined routing area updating procedure is successfully completed;\n-\ta combined GPRS attach procedure or a combined routing area updating procedure is completed for GPRS services only with cause #2 or #28;\n-\ta normal or periodic routing area updating or combined routing updating procedure is rejected with cause #11, #12, #13, #14, #15 or #25;\n-\ta new PLMN is selected.\nand additionally when the MS is in substate ATTEMPTING-TO-UPDATE:\n-\ta new routing area is entered;\n-\texpiry of timer T3302;\n-\tat request from registration function; or\n-\ttimer T3346 is started.\nThe mobile equipment shall contain a list of \"forbidden location areas for roaming\", as well as a list of \"forbidden location areas for regional provision of service\". The handling of these lists is described in subclause 4.4.1.\nIn a shared network, the MS shall choose one of the PLMN identities as specified in 3GPP TS 23.122 [14]. The MS shall construct the Routing Area Identification of the cell from this chosen PLMN identity, and the LAC and the RAC received on the BCCH. If the constructed RAI is different from the stored RAI, the MS shall initiate the routing area updating procedure. For:\n-\ta shared GERAN, in A/Gb mode, the chosen PLMN identity is indicated to the GERAN in the first RLC data block of an upper layer PDU (see 3GPP TS 44.060 [76]) when a foreign TLLI is used by the network sharing supporting MS for the transmission.\n-\ta shared UTRAN, the chosen PLMN identity shall be indicated to the UTRAN in the RRC INITIAL DIRECT TRANSFER message (see 3GPP TS 25.331 [23c]).\nFor GERAN Iu mode, network sharing is not supported.\nWhenever a ROUTING AREA UPDATE REJECT message with the cause \"PLMN not allowed\" is received by the MS, the chosen PLMN identity shall be stored in the \"forbidden PLMN list\" and if the MS is configured to use timer T3245 (see 3GPP TS 24.368 [135] or 3GPP TS 31.102 [112]) then the MS shall start timer T3245 and proceed as described in subclause 4.1.1.6. Whenever a ROUTING AREA UPDATE REJECT message is received by the MS with the cause \"Roaming not allowed in this location area\", \"Location Area not allowed\", or \"No suitable cells in Location Area\", the LAI that is part of the constructed RAI which triggered the routing area updating procedure shall be stored in the suitable list.\nIn A/Gb mode, user data transmission in the MS shall be suspended during the routing area updating procedure, except if the routing area updating procedure is triggered by a PS handover procedure as described in 3GPP TS 43.129 [113]; user data reception shall be possible. User data transmission in the network may be suspended during the routing area updating procedure.\nIn Iu mode, user data transmission and reception in the MS shall not be suspended during the routing area updating procedure. User data transmission in the network shall not be suspended during the routing area updating procedure.\nIn Iu mode, when a ROUTING AREA UPDATE REQUEST is received by the SGSN over a new PS signalling connection while there is an ongoing PS signalling connection (network is already in mode PMM-CONNECTED) for this MS, the network shall progress the routing area updating procedure as normal and release the previous PS signalling connection when the routing area updating procedure has been accepted by the network.\nNOTE 2:\tThe re-establishment of the radio bearers of active PDP contexts is done as described in subclause \"Service Request procedure\".\nThe network informs the MS about the support of specific features, such as LCS-MOLR, MBMS, IMS voice over PS session, emergency bearer services in Iu mode in the Network feature support information element. The information is either explicitly given by sending the Network feature support IE or implicitly by not sending it. The handling in the network is described in subclause 9.4.15.11The network can also use the Additional network feature support IE in order to inform the MS about the support of specific features such as the delivery of SMS via GPRS (GPRS-SMS) or implicitly by not sending it. The MS may use the support indications for LCS-MOLR, MBMS and GPRS-SMS to inform the user about the availability of the appropriate services. The MS shall not request the LCS-MOLR or MBMSservices, if the service has not been indicated as available. The indication for MBMS is defined in subclause \"MBMS feature support indication\" in 3GPP TS 23.246 [106]. In an MS with IMS voice over PS capability, the IMS voice over PS session indicator and the emergency bearer services indicator shall be provided to the upper layers. The upper layers take the IMS voice over PS session indicator into account as specified in 3GPP TS 23.221 [131], subclause 7.2a and subclause 7.2b, when selecting the access domain for voice sessions or calls in Iu mode. When initiating an emergency call in Iu mode, the upper layers also take the emergency bearer services indicator into account for the access domain selection. The MS may use the GPRS-SMS indication in order to obtain SMS.\nPeriodic routing area updating is used to periodically notify the availability of the MS to the network. The value of the update type IE in the ROUTING AREA UPDATE REQUEST message shall indicate \"periodic updating\". The procedure is controlled in the MS by timer T3312. When timer T3312 expires, the periodic routing area updating procedure is started. Start and reset of timer T3312 is described in subclause 4.7.2.2.\nThe normal routing area updating procedure is initiated:\n-\twhen the MS detects a change of the routing area in state GMM-REGISTERED;\n-\twhen the MS determines that GPRS resumption shall be performed;\n-\twhen the MS needs to update the network with the new MS Radio Access Capability IE;\n-\twhen the MS needs to update the network with the new DRX parameter IE;\n-\tin Iu mode, to re-synchronize the PMM mode of MS and network after RRC connection release with cause \"Directed signalling connection re-establishment\", see subclause 4.7.2.5;\n-\tin Iu mode, to re-synchronize the PMM mode of MS and network after inter-system change not due to PS handover from PMM-CONNECTED mode in Iu mode to A/Gb mode or S1 mode, if the MS performs an inter - system change back to Iu mode without sending a ROUTING AREA UPDATE REQUEST message while in A/Gb mode or a TRACKING AREA UPDATE REQUEST message while in S1 mode;\n-\tin Iu mode and A/Gb mode, after intersystem change from S1 mode, and the GMM receives an indication of \"RRC connection failure\" from lower layers due to lower layer failure while in S1 mode. In this case, if the TIN indicates \"RAT-related TMSI\", the MS shall set the TIN to \"GUTI\" before initiating the routing area updating procedure;\n-\tin A/Gb mode, after intersystem change from S1 mode if the TIN indicates \"RAT-related TMSI\", but the MS is required to perform routing area updating for IMS voice termination as specified in annex P.4;\n-\twhen the MS enters GMM-REGISTERED.NORMAL-SERVICE and the TIN indicates \"GUTI\";\n-\twhen the MS has selected a CSG cell whose CSG identity and associated PLMN identity are not included in the Allowed CSG list;or in the Operator CSG list;\n-\twhen the MS supports SRVCC and changes the mobile station classmark 2, mobile station classmark 3 or the supported codecs;\n-\twhen the MS changes the MS network capability information;\n-\twhen the UE's usage setting or the voice domain preference for E-UTRAN change in the MS;\n-\twhen the MS activates mobility management for IMS voice termination as specified in annex P.2 and the TIN indicates \"RAT-related TMSI\";\n-\tupon reception of a paging indication, using P-TMSI, if the timer T3346 is running and the MS is in state GMM-REGISTERED.ATTEMPTING-TO-UPDATE and the RAI of the current cell is same as the stored RAI;\n-\tin A/Gb mode, after intersystem change from S1 mode via cell change order procedure not due to CS fallback, if the TIN indicates \"RAT-related TMSI\"; in this case the MS shall set the TIN to \"GUTI\" before initiating the routing area updating procedure;\n-\tin A/Gb or Iu mode in NMO I, after intersystem change from S1 mode due to CS fallback, if the TIN indicates \"GUTI\" or if the routing area the MS is in is different from the registered routing area;\n-\tin A/Gb mode, after Inter RAT handover from S1 mode or Iu mode;\n-\twhen the MS needs to request the use of PSM or needs to stop the use of PSM;\n-\twhen the MS needs to request the use of eDRX or needs to stop the use of eDRX;\n-\twhen a change in the PSM usage conditions at the MS requires a different timer T3312 value or different timer T3324 value;\n-\twhen a change in the eDRX usage conditions at the MS requires different extended DRX parameters; or\nNOTE 1:\tA change in the PSM or eDRX usage conditions at the MS can include e.g. a change in the MS configuration, a change in requirements from upper layers or the battery running low at the MS.\n-\twhen the Default_DCN_ID value changes, as specified in 3GPP TS 24.368 [135] or in USIM file NASCONFIG as specified in 3GPP TS 31.102 [112].\nNOTE 2:\tThe routing area updating procedure is initiated after deleting the DCN-ID list as specified in 3GPP TS 24.301 [120], annex C.\nThe ROUTING AREA UPDATE REQUEST message shall always be the first data sent by the MS when a routing area border is crossed. The routing area identification is broadcast on the broadcast channel(s).\nA normal routing area updating shall abort any ongoing GMM procedure. Aborted GMM procedures may be repeated after the normal routing area updating procedure has been successfully performed. The value of the update type IE included in the message shall indicate \"RA updating\".\nIf the normal routing area updating procedure is initiated due to the reception of the paging indication while timer T3346 is running, the \"follow-on request pending\" indication shall be set to 1.\nTo initiate the normal routing area updating procedure, the MS sends the message ROUTING AREA UPDATE REQUEST to the network, starts timer T3330 and changes to state GMM-ROUTING-AREA-UPDATING-INITIATED. If timer T3302 is currently running, the MS shall stop timer T3302. If timer T3311 is currently running, the MS shall stop timer T3311.\nIf the MS supports S1 mode, the MS shall handle the P-TMSI IE as follows:\n-\tIf the TIN indicates \"GUTI\" and the MS holds a valid GUTI allocated by an MME, the MS shall map the GUTI into a P-TMSI, P-TMSI signature and RAI as specified in 3GPP TS 23.003 [10]. The MS shall include the mapped RAI in the Old routing area identification IE and the mapped P-TMSI signature in the P-TMSI signature IE. In addition, the MS shall include the P-TMSI type IE with P-TMSI type set to \"mapped P-TMSI\". When the routing area updating procedure is initiated in Iu mode, the MS shall also include the mapped P-TMSI in the P-TMSI IE. Additionally, in Iu mode and A/Gb mode, if the MS holds a valid P-TMSI and RAI, the MS shall indicate the P-TMSI in the Additional mobile identity IE and the RAI in the Additional old routing area identification IE.\n-\tIf the TIN indicates \"P-TMSI\" or \"RAT-related TMSI\" and the MS holds a valid P-TMSI and RAI, the MS shall indicate the RAI in the Old routing area identification IE. In addition, the MS shall include the P-TMSI type IE with P-TMSI type set to \"native P-TMSI\". When the routing area updating procedure is initiated in Iu mode, the MS shall also include the P-TMSI in the P-TMSI IE.\nIf the MS does not support S1 mode, the MS shall include the P-TMSI type IE with P-TMSI type set to \"native P-TMSI\".\nIf the MS supports PSM and requests the use of PSM, the MS shall include the T3324 value IE with a requested timer value in the ROUTING AREA UPDATE REQUEST message. When the MS includes the T3324 value IE and the MS indicates support for extended periodic timer value in the MS network feature support IE, it may also include the T3312 extended value IE to request a particular T3312 value to be allocated.\nIf the routing area updating procedure is not initiated by the MS due to an S1 mode to Iu mode or S1 mode to A/Gb mode intersystem change, or if it is initiated due to such an intersystem change and the TIN indicates \"RAT-related TMSI\", the MS shall use the existing UMTS security context for the PS domain. The ROUTING AREA UPDATE REQUEST message shall contain the P-TMSI signature when received in a previous ATTACH ACCEPT or ROUTING AREA UPDATE ACCEPT message. If the MS has a valid UMTS security context, the MS shall indicate it in the GPRS ciphering key sequence number IE.\nIf the routing area updating procedure is initiated by the MS due to an S1 mode to Iu mode or S1 mode to A/Gb mode inter-system change in idle mode, or if it is initiated by the MS due to PS  to CS domain change from S1 mode due to SRVCC or vSRVCC handover, and the TIN indicates \"GUTI\", the MS shall derive a UMTS security context for the PS domain from the current EPS security context as described in the subclause 4.7.7.10. The ROUTING AREA UPDATE REQUEST message shall include a P-TMSI signature filled with a NAS token as specified in 3GPP TS 33.401 [123]. Furthermore, the MS shall indicate the eKSI value, which is associated with the derived UMTS security keys, in the CKSN field of the GPRS GSM ciphering key sequence number IE in the ROUTING AREA UPDATE REQUEST message.\nNOTE:\tWhen the MS includes a P-TMSI signature filled with a NAS token, 8 bits of the NAS token will be filled with bits from the M-TMSI (see 3GPP TS 23.003 [10]).\nIf the routing area updating procedure is initiated by the MS due to the S1 mode to Iu mode or S1 mode to A/Gb mode inter-system change in connected mode, the MS shall derive a UMTS security context for the PS domain from the current EPS security context as described in the subclause 4.7.7.10. Furthermore, the MS shall indicate the eKSI value, which is associated with the derived UMTS security keys, in the CKSN field of the GPRS GSM ciphering key sequence number IE in the ROUTING AREA UPDATE REQUEST message.\nIn Iu mode, if the MS wishes to prolong the established PS signalling connection after the normal routing area updating procedure (for example, the MS has any CM application request pending), it may set a follow-on request pending indicator on (see subclause 4.7.13).\nIn order to indicate the new DRX parameter while in GERAN or UTRAN coverage, the MS shall send the ROUTING AREA UPDATE REQUEST message containing the DRX parameter in the DRX parameter IE to the network, with the exception of the case if the MS had indicated its MS specific DRX parameter (3GPP TS 24.301 [120]) to the network while in E-UTRAN coverage. In this case, when the MS enters GERAN or UTRAN coverage and initiates a routing area updating procedure, the MS shall not include the DRX parameter in the DRX parameter IE in the ROUTING AREA UPDATE REQUEST message.\nIf the MS supports eDRX and  requests the use of eDRX, the MS shall include the extended DRX parameters IE in the ROUTING AREA UPDATE REQUEST message.\nIn A/Gb mode, if the MS supports the restriction on use of enhanced coverage, then the MS shall set the Restriction on use of enhanced coverage capability bit to \"Mobile station supports restriction on use of enhanced coverage\" in the MS network capability IE of the ROUTING AREA UPDATE REQUEST message\nIf the MS supports dual connectivity of E-UTRA with NR, then the MS shall set the Dual connectivity of E-UTRA with NR capability bit to \"Mobile station supports dual connectivity of E-UTRA with NR\" in the MS network capability IE of the ROUTING AREA UPDATE REQUEST message.\nIn A/Gb mode, if a UMTS security context is available and if the MS indicates support of integrity protection in the MS network capability IE included in the ROUTING AREA UPDATE REQUEST message, then the MS shall use the current GPRS GSM Kint key and the current GPRS GSM integrity algorithm to integrity protect the ROUTING AREA UPDATE REQUEST message in the LLC layer. If LLC layer has not yet been configured, then the GMM layer in the MS shall assign the GPRS GSM Kint key, the GPRS GSM Kc128 key, the GPRS GSM integrity algorithm and the GPRS GSM ciphering algorithm to the LLC layer, and indicates to the LLC layer that it shall start integrity protection. This shall be done so that the LLC layer can integrity protect, but not cipher, the ROUTING AREA UPDATE REQUEST message. The MS shall include the CKSN in the CKSN IE in the ROUTING AREA UPDATE REQUEST message. If the MS has no UMTS security context available, then the MS shall not integrity protect the ROUTING AREA UPDATE REQUEST message in the LLC layer. The MS shall in this case set the CKSN IE to the value \"no key is available\" and send the ROUTING AREA UPDATE REQUEST message unprotected.\nIf the network receives a ROUTING AREA UPDATE REQUEST message containing the P-TMSI type IE, and the network does not follow the use of the most significant bit of the <LAC> to distinguish the node type as specified in 3GPP TS 23.003 [10] subclause 2.8.2.2.2, the network shall use the P-TMSI type IE to determine whether the mobile identity included in the P-TMSI IE, if any, or the mobile identity used by the MS to derive a foreign TLLI (see subclause 4.7.1.4.1) is a native P-TMSI or a mapped P-TMSI.\nThe network may initiate GMM common procedures, e.g. the GMM authentication and ciphering procedure.\nIf the routing area updating request has been accepted by the network, a ROUTING AREA UPDATE ACCEPT message shall be sent to the MS. The network may assign a new P-TMSI and/or a new P-TMSI signature for the MS. If a new P-TMSI and/or P-TMSI signature have been assigned to the MS, it/they shall be included in the ROUTING AREA UPDATE ACCEPT message together with the routing area identification.\nIn a shared network, if the MS is a network sharing supporting MS, the network shall indicate the PLMN identity of the CN operator that has accepted the routing area updating request in the RAI contained in the ROUTING AREA UPDATE ACCEPT message; if the MS is a network sharing non-supporting MS, the network shall indicate the PLMN identity of the common PLMN (see 3GPP TS 23.251 [109]). If the PLMN identity of the common PLMN included in the RAI does not identify the CN operator that has accepted the routing area updating request, the network may include the PLMN identity of the CN operator that has accepted the routing area updating request in the ROUTING AREA UPDATE ACCEPT message.\nIn a multi-operator core network (MOCN) with common GERAN, the network shall indicate in the RAI the common PLMN identity (see 3GPP TS 23.251 [109]). If the common PLMN identity included in the RAI does not identify the CN operator that has accepted the routing area updating request, the network may include the PLMN identity of the CN operator that has accepted the routing area updating request in the ROUTING AREA UPDATE ACCEPT message.\nIn A/Gb mode, if the MS indicates support of integrity protection in the MS network capability IE in the ROUTING AREA UPDATE REQUEST message, and if the network supports integrity protection, then the network shall store all octets received from the MS in the MS network capability IE and in the MS Radio Access Capability IE, up to the maximum length defined for the respective information element.\nNOTE 1:\tThe network needs to store the MS network capability and MS Radio Access Capability exactly as received from the MS and network is not allowed to ignore the \"higher\" octets sent by the MS even if the network does not support any features indicated in the higher octetst. Otherwise the replay check of the MS network capability and MS Radio Access Capability will fail in the MS.\nIn A/Gb mode, if a UMTS security context is available in the network and if the MS indicates support of integrity protection in the ROUTING AREA UPDATE REQUEST message and the network supports integrity protection, and if integrity protection of the ROUTING AREA UPDATE REQUEST message is successfully verified in the LLC layer in the network, then if the network decides to re-authenticate the MS or select a new integrity algorithm or ciphering algorithm, the network shall initiate an authentication and ciphering procedure.\nIn A/Gb mode, if a UMTS security context is available in the network and if the MS indicates support of integrity protection in the ROUTING AREA UPDATE REQUEST message and the network supports integrity protection if integrity protection of the ROUTING AREA UPDATE REQUEST message is successfully verified in the LLC layer in the network, the network may decide to continue using the stored GPRS GSM Kint integrity key, GPRS GSM Kc128 encryption key, GPRS GSM ciphering algorithm and GPRS GSM integrity algorithm in the LLC layer without initiating an authentication and ciphering procedure. If the MS and network continue to use the same ciphering mode, ciphering or no ciphering, the ciphering mode is re-established without the need to run an authentication and ciphering procedure. The network shall replay the MS network capability IE and the MS radio access capability IE received from the MS in the ROUTING AREA UPDATE REQUEST message, by including the MS network capability IE and the MS radio access capability IE in the ROUTING AREA UPDATE ACCEPT message to the MS. The GMM layer in the network shall assign the stored GPRS GSM Kint key, the GPRS GSM Kc128 key, the GPRS GSM integrity algorithm and the GPRS GSM ciphering algorithm to the LLC layer. The MS shall then indicate to the LLC layer that it shall start integrity protection and ciphering in the LLC layer before sending the ROUTING AREA UPDATE ACCEPT message to the MS. If the integrity protection of the ROUTING AREA UPDATE REQUEST message is not successfully verified in the LLC layer or if the ROUTING AREA UPDATE REQUEST message is received without integrity protection, then the network shall progress the routing area updating procedure and initiate an authentication and ciphering procedure to authenticate the MS and activate integrity protection and ciphering in the MS.\nIn A/Gb mode, if a UMTS security context is available in the network and if the MS indicates support of integrity protection in the ROUTING AREA UPDATE REQUEST message and the network supports integrity protection, and if the network is not able to verify the message authentication code in the LLC layer protecting the ROUTING AREA UPDATE REQUEST message, due to the LLC layer at the network not having been configured yet with the integrity key and integrity algorithm for this MS, then the network shall progress the ROUTING AREA UPDATE REQUEST message at GMM layer anyway. If the CKSN included in the ROUTING AREA UPDATE REQUEST message belongs to an UMTS security context available in the network, then the network may re-establish integrity protection and ciphering of layer 3 signalling messages in the LLC layer without initiating an authentication and ciphering procedure.\nIn A/Gb mode, if the MS indicates support of integrity protection of user plane data in the MS network capability IE in the ROUTING AREA UPDATE REQUEST message, and if the network supports and accepts integrity protection of user plane data, then the network shall indicate integrity protection of user plane data to the MS in the ROUTING AREA UPDATE ACCEPT message. The MS shall indicate to the LLC layer to start integrity protection of user plane data after the reception of the ROUTING AREA UPDATE ACCEPT message, if indicated. The same GPRS GSM Kint key and the same GPRS GSM integrity algorithm used for integrity protection of layer 3 signalling messages shall be used for integrity protection of user plane data in the LLC layer. The network shall indicate to the LLC layer to start integrity protection of user plane data after sending the ROUTING AREA UPDATE ACCEPT message to the MS. If the network does not indicate to the MS in the ROUTING AREA UPDATE ACCEPT message that it accepts the use of integrity protection of user plane data, and if the MS does not accept such a network, then the MS shall detach from the network.\nIf a new DRX parameter was included in the ROUTING AREA UPDATE REQUEST message, the network shall store the new DRX parameter and use it for the downlink transfer of signalling and user data.\nThe network shall include the extended DRX parameters IE in the ROUTING AREA UPDATE ACCEPT message only if the extended DRX parameters IE was included in the ROUTING AREA UPDATE REQUEST message, and the network supports and accepts the use of eDRX.\nIf the MS has indicated in the ROUTING AREA UPDATE REQUEST message that it supports PS inter-RAT handover from GERAN to UTRAN Iu mode, the network may include in the ROUTING AREA UPDATE ACCEPT message a request to provide the Inter RAT information container.\nIf the MS has included the MS network capability IE or the UE network capability IE or both in the ROUTING AREA UPDATE REQUEST message, the network shall store all octets received from the MS, up to the maximum length defined for the respective information element. In case the UE network capability IE indicated new information to the network, the MS shall set the TIN to \"P-TMSI\".\nNOTE 2:\tThis information is forwarded to the new SGSN during inter-SGSN handover or to the new MME during intersystem handover to S1 mode.\nIn A/Gb mode the Cell Notification information element shall be included in the ROUTING AREA UPDATE ACCEPT message in order to indicate the ability of the network to support the Cell Notification.\nThe network shall change to state GMM-COMMON-PROCEDURE-INITIATED and shall start the supervision timer T3350 as described in subclause 4.7.6.\nIf the LAI or PLMN identity contained in the ROUTING AREA UPDATE ACCEPT message is a member of any of the \"forbidden\" lists and the MS is not attached for emergency bearer services, then any such entry shall be deleted.\nIn Iu mode, the network should prolong the PS signalling connection if the mobile station has indicated a follow-on request pending in ROUTING AREA UPDATE REQUEST. The network may also prolong the PS signalling connection without any indication from the mobile terminal (for example, if user plane radio access bearers have been established for the MS).\nIf the PDP context status information element is included in ROUTING AREA UPDATE REQUEST message, then the network shall deactivate all those PDP contexts locally (without peer to peer signalling between the MS and the network), which are not in SM state PDP-INACTIVE on network side but are indicated by the MS as being in state PDP-INACTIVE.\nIf the MBMS context status information element is included in the ROUTING AREA UPDATE REQUEST message, then the network shall deactivate all those MBMS contexts locally (without peer to peer signalling between the MS and network) which are not in SM state PDP-INACTIVE on the network side, but are indicated by the MS as being in state PDP-INACTIVE. If no MBMS context status information element is included, then the network shall deactivate all MBMS contexts locally which are not in SM state PDP-INACTIVE on the network side.\nIf a ROUTING AREA UPDATE REQUEST message is received from an MS with a LIPA PDN connection, and if:\n-\ta L-GW Transport Layer Address is provided by the lower layer together with the ROUTING AREA UPDATE REQUEST message, and the GGSN address associated with the PDP context of the LIPA PDN connection is different from the provided L-GW Transport Layer Address (see 3GPP TS 25.413 [19c]); or\n-\tno L-GW Transport Layer Address is provided together with the ROUTING AREA UPDATE REQUEST message by the lower layer,\nthen the SGSN locally deactivates all PDP contexts associated with the LIPA PDN connection. If the ROUTING AREA UPDATE REQUEST request message is accepted, the SGSN informs the MS via the PDP context status IE in the ROUTING AREA UPDATE ACCEPT message that PDP contexts were locally deactivated.\nIf a ROUTING AREA UPDATE REQUEST message is received from an MS with a SIPTO at the local network PDN connection, the following different cases can be distinguished:\n1)\tIf the PDN connection is a SIPTO at the local network PDN connection with collocated L-GW and if:\n-\ta SIPTO L-GW Transport Layer Address is provided by the lower layer together with the ROUTING AREA UPDATE REQUEST message, and the GGSN address associated with the PDP context of the SIPTO at the local network PDN connection is different from the provided SIPTO L-GW Transport Layer Address (see 3GPP TS 25.413 [19c]); or\n-\tno SIPTO L-GW Transport Layer Address is provided together with the ROUTING AREA UPDATE REQUEST message by the lower layer,\n2)\tIf the PDN connection is a SIPTO at the local network PDN connection with stand-alone GW and if:\n-\ta LHN-ID value is provided by the lower layer together with the ROUTING AREA UPDATE REQUEST message, and the LHN-ID stored in the PDP context of the SIPTO at the local network PDN connection is different from the provided LHN-ID value (see 3GPP TS 25.413 [19c]); or\n-\tno LHN-ID value is provided together with the ROUTING AREA UPDATE REQUEST message by the lower layer,\nthen the SGSN locally deactivates all PDP contexts associated with the SIPTO at the local network PDN connection. If the ROUTING AREA UPDATE REQUEST request message is accepted, the SGSN informs the MS via the PDP context status IE in the ROUTING AREA UPDATE ACCEPT message that PDP contexts were locally deactivated.\nFor a SIPTO at the local network PDN connection with stand-alone GW, the conditions to deactivate ISR are specified in 3GPP TS 23.401 [122], subclause 4.3.5.6.\nIf due to regional subscription restrictions or access restrictions the MS is not allowed to access the routing area, but the MS has a PDN connection for emergency bearer services established, the network may accept the ROUTING AREA UPDATE REQUEST message and deactivate all non-emergency PDP contexts by initiating an PDP context deactivation procedure when the routing area updating procedure is initiated in PMM-CONNECTED mode. When the routing area updating procedure is initiated in PMM-IDLE mode, the network locally deactivates all non-emergency PDP contexts and informs the MS via the PDP context status IE in the ROUTING AREA UPDATE ACCEPT message. The network shall not deactivate the PDP contexts for emergency bearer services. The network shall consider the MS to be attached for emergency bearer services only.\nIf the network supports delivery of SMS via GPRS (see 3GPP TS 23.060 [74]) and this delivery is enabled (see 3GPP TS 29.272 [150]), then the network shall include the Additional network feature support IE in the ROUTING AREA UPDATE ACCEPT message and set the GPRS-SMS indicator.\nIf the network supports the extended protocol configuration options IE and the MS indicated support of the extended protocol configuration options IE, then the network shall include the Additional network feature support IE in the ROUTING AREA UPDATE ACCEPT message and set the ePCO IE indicator to \"extended protocol configuration options IE supported\".\nThe network shall indicate \"combined RA/LA updated\" or \"combined RA/LA updated and ISR activated\" in the update result IE in the ROUTING AREA UPDATE ACCEPT message, if the following conditions apply:\n-\tthe update type IE included in the ROUTING AREA UPDATE REQUEST message indicates \"periodic updating\" and the MS was previously successfully attached for GPRS and non-GPRS services; and\n-\tlocation area updating for non-GPRS services as specified in 3GPP TS 29.018 [149] is successful.\nThe network shall include the T3324 value IE in the ROUTING AREA UPDATE ACCEPT message only if the T3324 value IE was included in the ROUTING AREA UPDATE REQUEST message, and the network supports and accepts the use of PSM.\nIf the network supports and accepts the use of PSM, and the MS included the T3312 extended value IE in the ROUTING AREA UPDATE REQUEST message, then the network shall take into account the T3312 value requested when providing the Periodic RA update timer IE and the T3312 extended value IE in the ROUTING AREA UPDATE ACCEPT message.\nNOTE 3:\tBesides the value requested by the MS, the network can take local configuration into account when selecting a value for T3312 (see 3GPP TS 23.060 [74] subclause 5.3.13.54).\nIn A/Gb mode, if the MS indicates support for restriction on use of enhanced coverage in the ROUTING AREA UPDATE REQUEST message, and the network restricts enhanced coverage for the MS, then the network shall set the RestrictEC bit to \"Enhanced coverage restricted\" in the Additional network feature support IE of the ROUTING AREA UPDATE ACCEPT message.\nIf the network includes the T3324 value IE indicating a value other than deactivated in the ROUTING AREA UPDATE ACCEPT message, the network shall indicate in the Update result IE in the ROUTING AREA UPDATE ACCEPT message that ISR is not activated.\nUpon receipt of a ROUTING AREA UPDATE ACCEPT message, the MS shall store the received routing area identification, stops timer T3330, reset the routing area updating attempt counter, reset the service request attempt counter and set the GPRS update status to GU1 UPDATED. If the message contains a P-TMSI, the MS shall use this P-TMSI as new temporary identity for GPRS services and shall store the new P-TMSI. If no P-TMSI was included by the network in the ROUTING AREA UPDATE ACCEPT message, the old P-TMSI shall be kept. Furthermore, the MS shall store the P-TMSI signature if received in the ROUTING AREA UPDATE ACCEPT message. If no P-TMSI signature was included in the message, the old P-TMSI signature, if available, shall be deleted.\nUpon receipt of a ROUTING AREA UPDATE ACCEPT message with update result IE indicating \"combined RA/LA updated\" or \"combined RA/LA updated and ISR activated\" during the periodic routing area updating procedure, the MS shall behave as follows:\n-\tif the ROUTING AREA UPDATE ACCEPT message contains an IMSI, the MS is not allocated any TMSI. The MS shall delete any old TMSI accordingly;\n-\tif the ROUTING AREA UPDATE ACCEPT message contains a TMSI, the MS shall use this TMSI as new temporary identity. The MS shall delete its old TMSI and shall store the new TMSI. In this case, a ROUTING AREA UPDATE COMPLETE message is returned to the network to confirm the received TMSI; or\n-\tif neither a TMSI nor an IMSI has been included by the network in the ROUTING AREA UPDATE ACCEPT message, the old TMSI, if any is available, shall be kept.\nUpon receiving a ROUTING AREA UPDATE COMPLETE message, the SGSN shall stop timer T3350 and change to state GMM-REGISTERED. The P-TMSI, if sent in the ROUTING AREA UPDATE ACCEPT message, shall be considered as valid.\nNOTE 4:\tUpon receiving a ROUTING AREA UPDATE COMPLETE message, if a new TMSI is included in the ROUTING AREA UPDATE ACCEPT message, the SGSN sends a BSSAP+-TMSI-REALLOCATION-COMPLETE message as specified in 3GPP TS 29.018 [149].\nIf the PDP context status information element is included in ROUTING AREA UPDATE ACCEPT message, then the MS shall deactivate all those PDP contexts locally (without peer to peer signalling between the MS and network), which are not in SM state PDP-INACTIVE in the MS but are indicated by the network as being in state PDP-INACTIVE. If there is a default PDP context among the PDP contexts to be deactivated, an MS supporting S1 mode shall locally deactivate all PDP contexts associated to the same PDP address and APN as the default PDP context without peer-to-peer SM signalling to the network; an MS not supporting S1 mode may apply the same behaviour. If only the PDN connection for emergency bearer services remains established, the MS shall consider itself attached for emergency bearer services only.\nIf the MBMS context status information element is included in the ROUTING AREA UPDATE ACCEPT message, then the MS shall deactivate all those MBMS contexts locally (without peer to peer signalling between the MS and network) which are not in SM state PDP-INACTIVE in the MS, but are indicated by the network as being in state PDP-INACTIVE. If no MBMS context status information element is included, then the MS shall deactivate all those MBMS contexts locally which are not in SM state PDP-INACTIVE in the MS.\nIf the ROUTING AREA UPDATE ACCEPT message contains the T3312 extended value IE, then the MS shall use the T3312 extended value IE as periodic routing area update timer (T3312). If the ROUTING AREA UPDATE ACCEPT message does not contain the T3312 extended value IE, then the MS shall use value in the Periodic RA update timer IE as periodic routing area update timer (T3312).\nIf the MS receives the ROUTING AREA UPDATE ACCEPT message from a PLMN for which a PLMN-specific attempt counter or PLMN-specific PS-attempt counter is maintained (see subclause 4.1.1.6A), then the MS shall reset these counters. If the MS maintains a counter for \"SIM/USIM considered invalid for GPRS services\", then the MS shall reset this counter.\nIf the ROUTING AREA UPDATE ACCEPT message contains the T3324 value IE, then the MS shall use the timer value for T3324 as specified in subclause 4.7.2.8.\nIf the ROUTING AREA UPDATE ACCEPT message contains the DCN-ID IE, then the MS shall store the included DCN-ID value together with the PLMN code of the registered PLMN in a DCN-ID list in a non-volatile memory in the ME as described in 3GPP TS 24.301 [120], annex C.\nIn a shared network or in a multi-operator core network (MOCN) with common GERAN, if the ROUTING AREA UPDATE ACCEPT message contains the DCN-ID IE and the PLMN identity of the CN operator IE, the MS shall store the included DCN-ID value with the PLMN identity indicated in the PLMN identity of the CN operator IE, and the included DCN-ID value with the PLMN identity indicated in the RAI in a DCN-ID list in a non-volatile memory in the ME as described in 3GPP TS 24.301 [120], annex C.\nIn A/Gb mode, if the ROUTING AREA UPDATE ACCEPT message contains the Cell Notification information element, then the MS shall start to use the LLC NULL frame to perform cell updates.\nIf the MS has initiated the routing area updating procedure due to manual CSG selection and receives a ROUTING AREA UPDATE ACCEPT message, and the MS sent the ROUTING AREA UPDATE REQUEST message in a CSG cell, the MS shall check if the CSG ID and associated PLMN identity of the cell are contained in the Allowed CSG list. If not, the MS shall add that CSG ID and associated PLMN identity to the Allowed CSG list and the MS may add the HNB Name (if provided by lower layers) to the Allowed CSG list if the HNB Name is present in neither the Operator CSG list nor the Allowed CSG list.\nThe network may also send a list of \"equivalent PLMNs\" in the ROUTING AREA UPDATE ACCEPT message. Each entry of the list contains a PLMN code (MCC+MNC). If the routing area updating procedure is initiated during a CS fallback procedure and the network is configured to support the return to the last registered E-UTRAN PLMN after CS fallback as specified in 3GPP TS 23.272 [133], and the PLMN identity which is provided as part of the RAI contained in the ROUTING AREA UPDATE ACCEPT message differs from the last registered E-UTRAN PLMN identity, the network shall include the last registered E-UTRAN PLMN identity in the list of \"equivalent PLMNs\" in the ROUTING AREA UPDATE ACCEPT message.\nNOTE 5:\tThe network can determine a routing area updating procedure is initiated during a CS fallback procedure as specified in 3GPP TS 23.272 [133].\nNOTE 6:\tThe last registered E-UTRAN PLMN identity can be derived by the network as specified in 3GPP TS 23.272 [133].\nThe mobile station shall store the list, as provided by the network, and further handle the list as follows:\n-\tif there is no PDN connection for emergency bearers established, the mobile station shall remove from the list of \"equivalent PLMNs\" any PLMN code that is already in the \"forbidden PLMN\" list. If the mobile station is operating in MS operation mode C or the mobile station is supporting S1 mode, it shall also remove any PLMN code that is already in the list of \"forbidden PLMNs for GPRS service\";\n-\tif the MS is not attached for emergency bearer services and there is a PDN connection for emergency bearer services established, the MS shall remove from the list of \"equivalent PLMNs\" any PLMN code present in the \"forbidden PLMN\" list when the PDN connection for emergency bearer services is released. If the mobile station is operating in MS operation mode C or the mobile station is supporting S1 mode, it shall also remove any PLMN code present in the list of \"forbidden PLMNs for GPRS service\" when the PDN connection for emergency bearer services is released; and\n-\tin addition, for all cases the mobile station shall add to the stored list the PLMN code of the registered PLMN that sent the list.\nAll PLMNs in the stored list shall be regarded as equivalent to each other for PLMN selection, cell selection/re-selection and handover. The stored list in the mobile station shall be replaced on each occurrence of the ROUTING AREA UPDATE ACCEPT message. If no list is contained in the message, then the stored list in the mobile station shall be deleted. An MS attached for emergency bearer services only shall delete the stored list when the MS enters the state GMM-DEREGISTERED. The list shall be stored in the mobile station while switched off so that it can be used for PLMN selection after switch on.\nA ROUTING AREA UPDATE COMPLETE message shall be returned to the network if the ROUTING AREA UPDATE ACCEPT message contained any of:\n-\ta P-TMSI;\n-\ta TMSI;\n-\treceive N-PDU Numbers (see 3GPP TS 44.065 [78] and 3GPP TS 25.322 [19b]); or\n-\ta request for the provision of Inter RAT handover information.\nIf Receive N-PDU Numbers were included, the Receive N-PDU Numbers values valid in the MS, shall be included in the ROUTING AREA UPDATE COMPLETE message.\nIf the network has requested the provision of Inter RAT handover information, the MS shall return a ROUTING AREA UPDATE COMPLETE message including the Inter RAT handover information IE to the network.\nNOTE 7:\tIn Iu mode, after a routing area updating procedure, the mobile station can initiate Service Request procedure to request the resource reservation for the active PDP contexts if the resources have been released by the network or send upper layer message (e.g. ACTIVATE PDP CONTEXT REQUEST) to the network via the existing PS signalling connection.\nIn Iu mode, if the network wishes to prolong the PS signalling connection (for example, if the mobile station has indicated \"follow-on request pending\" in ROUTING AREA UPDATE REQUEST message or if user plane radio access bearers have been established for the MS) the network shall indicate the \"follow-on proceed\" in the ROUTING AREA UPDATE ACCEPT message. If the network wishes to release the PS signalling connection, the network shall indicate \"no follow-on proceed\" in the ROUTING AREA UPDATE ACCEPT message.\nAfter that in Iu mode, the mobile station shall act according to the follow-on proceed flag included in the Update result information element in the ROUTING AREA UPDATE ACCEPT message (see subclause 4.7.13).\nThe network may also send a Local Emergency Numbers List with local emergency numbers in the ROUTING AREA UPDATE ACCEPT, by including the Emergency Number List IE. The mobile equipment shall store the Local Emergency Numbers List, as provided by the network. The Local Emergency Numbers List stored in the mobile equipment shall be replaced on each receipt of the Emergency Number List IE. The received Local Emergency Numbers List shall be provided to the upper layers.\nThe emergency number(s) received in the Emergency Number List IE are valid only in networks in the same country as the cell on which this IE is received. If no list is contained in the ROUTING AREA UPDATE ACCEPT message, then the stored Local Emergency Numbers List in the mobile equipment shall be kept, except if the mobile equipment has successfully registered to a PLMN in a country different from that of the PLMN that sent the Local Emergency Numbers List.\nThe mobile equipment shall use the stored Local Emergency Numbers List of emergency numbers received from the network in addition to the emergency numbers stored on the SIM/USIM or ME to detect that the number dialled is an emergency number.\nNOTE 8:\tThe mobile equipment may use the Local Emergency Numbers List to assist the end user in determining whether the dialled number is intended for an emergency service or for another destination, e.g. a local directory service. The possible interactions with the end user are implementation specific.\nNOTE 9:\tAn MS that supports procedures specified in 3GPP TS 24.302 [156], can get additional local emergency numbers through those procedures, which can be used based on operator policy (see 3GPP TS 24.302 [156]) to detect that the number dialled is an emergency number.\nThe Local Emergency Numbers List shall be deleted at switch off and removal of the SIM/USIM. The mobile equipment shall be able to store up to ten local emergency numbers received from the network.\nIn order to indicate to the MS that the GUTI and TAI list assigned to the MS remain registered with the network and are valid in the MS, the network shall indicate in the Update result IE in the ROUTING AREA UPDATE ACCEPT message that ISR is activated.\nIf the MS is attached for emergency bearer services or if the network has deactivated all non-emergency PDP contexts, the network shall indicate in the update result IE in the ROUTING AREA UPDATE ACCEPT message that ISR is not activated.\nIf the ROUTING AREA UPDATE ACCEPT message contains:\ni)\tno indication that ISR is activated, an MS supporting S1 mode shall set the TIN to \"P-TMSI\" and shall stop the periodic tracking area update timer T3412 or T3423, if running; or\nii)\tan indication that ISR is activated, then:\n-\tif the MS is required to perform tracking area updating for IMS voice termination as specified in annex P.5, the MS shall set the TIN to \"P-TMSI\" and shall stop the periodic tracking area update timer T3412 or T3423, if running;\n-\tif the MS had initiated the routing area updating procedure due to a change in DRX parameters, the MS shall set the TIN to \"P-TMSI\" and shall stop the periodic tracking area update timer T3412 or T3423 if running;\n-\tif the MS had initiated the routing area updating procedure due to a change in the UE's usage setting or the voice domain preference for E-UTRAN, the MS shall set the TIN to \"P-TMSI\" and shall stop the periodic tracking area update timer T3412 or T3423, if running; or\n-\tthe MS shall regard the available GUTI and TAI list as valid and registered with the network. If the TIN currently indicates \"GUTI\" and the periodic tracking area update timer T3412 is running or is deactivated, the MS shall set the TIN to \"RAT-related TMSI\". If the TIN currently indicates \"GUTI\" and the periodic tracking area update timer T3412 has already expired, the MS shall set the TIN to \"P-TMSI\".\nIn A/Gb mode, if a UMTS security context is available, if the MS indicates support of integrity protection in the ROUTING AREA UPDATE REQUEST message and the network supports integrity protection, then if the MS receives replayed capability IE’s in ROUTING AREA UPDATE ACCEPT message, then the MS shall check if the replayed MS network capability IE and the replayed MS Radio Access Capability IE received in the ROUTING AREA UPDATE ACCEPT message has not been altered compared to the MS network capability IE and the MS Radio Access Capability IE that the MS sent to the network in ROUTING AREA UPDATE REQUEST message. If the replayed MS network capability IE and the replayed MS Radio Access Capability IE are not the same, then the MS shall ignore the ROUTING AREA UPDATE ACCEPT message.\nIf the routing area updating cannot be accepted, the network sends a ROUTING AREA UPDATE REJECT message to the MS. An MS, which receives a ROUTING AREA UPDATE REJECT message with a reject cause other than GMM cause value #25 or the message is integrity protected, shall stop the timer T3330. If a ROUTING AREA UPDATE REJECT message containing a reject cause other than GMM cause value #25 is received or the message is integrity protected, the MS shall stop any ongoing transmission of user data.\nIf the ROUTING AREA UPDATE REJECT message containing GMM cause value cause #25 was received without integrity protection, then the MS shall discard the message.\nIf the routing area update request is rejected due to general NAS level mobility management congestion control, the network shall set the GMM cause value to #22 \"congestion\" and assign a back-off timer T3346.\nThe MS shall then take different actions depending on the received reject cause value:\n# 3\t\t(Illegal MS);\n# 6\t\t(Illegal ME);\nThe MS shall set the GPRS update status to GU3 ROAMING NOT ALLOWED (and shall store it according to subclause 4.1.3.2) and shall delete any P-TMSI, P-TMSI signature, RAI and GPRS ciphering key sequence number. The MS shall consider the SIM/USIM as invalid for GPRS services until switching off or the SIM/USIM is removed. If the message has been successfully integrity checked by the lower layers and the MS maintains a counter for \"SIM/USIM considered invalid for GPRS services\", then the MS shall set this counter to MS implementation-specific maximum value. The MS shall delete the list of equivalent PLMNs, and shall enter the state GMM-DEREGISTERED.NO-IMSI.\nIf the MS is IMSI attached, the MS shall in addition set the update status to U3 ROAMING NOT ALLOWED, shall delete any TMSI, LAI and ciphering key sequence number. If the MS is operating in MS operation mode A and an RR connection exists, the MS shall abort the RR connection, unless an emergency call is ongoing. The SIM/USIM shall be considered as invalid also for non-GPRS services until switching off or the SIM/USIM is removed or the timer T3245 expires as described in subclause 4.1.1.6. If the MS maintains a counter for \"SIM/USIM considered invalid for non-GPRS services\", then the MS shall set this counter to MS implementation-specific maximum value.\nIf S1 mode is supported in the MS, the MS shall handle the EMM parameters EMM state, EPS update status, GUTI, last visited registered TAI, TAI list and KSI as specified in 3GPP TS 24.301 [120] for the case when the tracking area update procedure is rejected with the EMM cause with the same value.\nNOTE 1:\tThe possibility to configure a MS so that the radio transceiver for a specific radio access technology is not active, although it is implemented in the MS, is out of scope of the present specification.\n# 7\t\t(GPRS services not allowed);\nThe MS shall set the GPRS update status to GU3 ROAMING NOT ALLOWED (and shall store it according to subclause 4.1.3.2.9) and shall delete any P-TMSI, P-TMSI signature, RAI and GPRS ciphering key sequence number. The SIM/USIM shall be considered as invalid for GPRS services until switching off or the SIM/USIM is removed. The MS shall enter the state GMM-DEREGISTERED. If the message has been successfully integrity checked by the lower layers and the MS maintains a counter for \"SIM/USIM considered invalid for GPRS services\", then the MS shall set this counter to MS implementation-specific maximum value.\nA GPRS MS operating in MS operation mode A or B which is already IMSI attached for CS services in the network is still IMSI attached for CS services in the network.\nIf the update type is \"periodic updating\", a GPRS MS operating in MS operation mode A or B in network operation mode I shall then proceed with the appropriate MM specific procedure.\nNOTE 2:\tOptionally the MS starts the timer T3340 as described in subclause 4.7.1.9.\nIf S1 mode is supported in the MS, the MS shall handle the EMM parameters EMM state, EPS update status, GUTI, last visited registered TAI, TAI list and KSI as specified in 3GPP TS 24.301 [120] for the case when the tracking area update procedure is rejected with the EMM cause with the same value.\n# 8\t\t(GPRS services and non-GPRS services not allowed);\nThe MS shall set the GPRS update status to GU3 ROAMING NOT ALLOWED (and shall store it according to subclause .2) and shall delete any P-TMSI, P-TMSI signature, RAI and GPRS ciphering key sequence number. The MS shall delete the list of equivalent PLMNs, and shall enter the GMM state GMM-DEREGISTERED.NO-IMSI.\nThe MS shall set the update status to U3 ROAMING NOT ALLOWED, shall delete any TMSI, LAI and ciphering key sequence number. If the MS is operating in MS operation mode A and an RR connection exists, the MS shall abort the RR connection, unless an emergency call is ongoing. The SIM/USIM shall be considered as invalid for GPRS and non-GPRS services until switching off or the SIM/USIM is removed. If the message has been successfully integrity checked by the lower layers and the MS maintains a counter for \"SIM/USIM considered invalid for GPRS services\", then the MS shall set this counter to MS implementation-specific maximum value. If the message has been successfully integrity checked by the lower layers and the MS maintains a counter for \"SIM/USIM considered invalid for non-GPRS services\", then the MS shall set this counter to MS implementation-specific maximum value.\nNOTE 3:\tOptionally the MS starts the timer T3340 as described in subclause 4.7.1.9.\nIf S1 mode is supported in the MS, the MS shall handle the EMM parameters EMM state, EPS update status, GUTI, last visited registered TAI, TAI list and KSI as specified in 3GPP TS 24.301 [120] for the case when the tracking area procedure is rejected with the EMM cause with the same value.\n# 9\t\t(MS identity cannot be derived by the network);\nThe MS shall set the GPRS update status to GU2 NOT UPDATED (and shall store it according to subclause 4.1.3.2), enter the state GMM-DEREGISTERED.NORMAL-SERVICE, and shall delete any P-TMSI, P-TMSI signature, RAI and GPRS ciphering key sequence number.\nA GPRS MS operating in MS operation mode A or B which is already IMSI attached for CS services in the network is still IMSI attached for CS services in the network.\nIf the rejected request was not for initiating a PDN connection for emergency bearer services, then\n-\ta GPRS MS operating in MS operation mode A in network operation mode I shall proceed with appropriate MM specific procedures. Additionally, the MS shall initiate a normal or combined GPRS attach procedure depending on whether it is in an ongoing circuit-switched transaction. If the MS is in an ongoing circuit-switched transaction, it shall initiate the appropriate MM specific procedure after the circuit-switched transaction has been released. The MM sublayer shall act as in network operation mode II as long as the combined GMM procedures are not successful and no new RA is entered;\n-\tif the update type is \"periodic updating\", a GPRS MS operating in MS operation mode B in network operation mode I shall proceed with appropriate MM specific procedures. Additionally, the MS shall initiate a combined GPRS attach procedure. The MM sublayer shall act as in network operation mode II as long as the combined GMM procedures are not successful and no new RA is entered;\n-\ta GPRS MS operating in MS operation mode A or B in network operation mode II which is configured to use CS fallback and SMS over SGs, or SMS over SGs only, and which did not perform a successful generic location updating procedure since the last intersystem change from S1 mode to A/Gb or Iu mode shall proceed with appropriate MM specific procedures. Additionally, a GPRS MS operating in MS operation mode A or B in network operation mode II shall initiate a GPRS attach procedure; and\n-\ta GPRS MS operating in MS operation mode A or B in network operation mode II which is not configured to use CS fallback and SMS over SGs, or SMS over SGs only, and a GPRS MS operating in MS operation mode C may subsequently, automatically initiate the GPRS attach procedure.\nIf S1 mode is supported in the MS, the MS shall handle the EMM parameters EMM state, EPS update status, GUTI, last visited registered TAI, TAI list and KSI as specified in 3GPP TS 24.301 [120] for the case when the tracking area update procedure is rejected with the EMM cause with the same value.\n# 10\t(Implicitly detached);\nIf the update type is \"periodic updating\", a GPRS MS operating in MS operation mode B in network operation mode I, is IMSI detached for both GPRS and CS services in the network.\nA GPRS MS operating in MS operation mode A in network operation mode I is detached for GPRS services. If no RR connection exists then the MS is also IMSI detached for the CS services.\nThe MS shall enter the state GMM-DEREGISTERED.NORMAL-SERVICE. If the rejected request was not for initiating a PDN connection for emergency bearer services, then\n-\ta GPRS MS operating in MS operation mode A or B in network operation mode II which is configured to use CS fallback and SMS over SGs, or SMS over SGs only, and which did not perform a successful generic location updating procedure since the last intersystem change from S1 mode to A/Gb or Iu mode shall proceed with appropriate MM specific procedures;\n-\tregardless of the MS operation mode and the network operation mode, the MS shall then perform a new attach procedure. The MS should also activate PDP context(s) that were originally activated by the MS to replace any previously MS activated PDP context(s). The MS should also perform the procedures needed in order to activate any previously active multicast service(s); and\n-\tadditionally, a GPRS MS operating in MS operation mode A in network operation mode I which is configured to use CS fallback and SMS over SGs, or SMS over SGs only, and which is in an ongoing circuit-switched transaction shall initiate the appropriate MM specific procedure after the circuit-switched transaction has been released. The MM sublayer shall act as in network operation mode II as long as the combined GMM procedures are not successful and no new RA is entered.\nIf S1 mode is supported in the MS, the MS shall handle the EMM state as specified in 3GPP TS 24.301 [120] for the case when the tracking area update procedure is rejected with the EMM cause with the same value.\nNOTE 4:\tIn some cases, user interaction may be required and then the MS cannot activate the PDP and MBMS context(s) automatically.\n# 11\t(PLMN not allowed);\nThe MS shall delete any RAI, P-TMSI, P-TMSI signature and GPRS ciphering key sequence number, shall set the GPRS update status to GU3 ROAMING NOT ALLOWED (and shall store it according to subclause 4.1.3.2), shall reset the routing area updating attempt counter, shall delete the list of equivalent PLMNs, and enter the state GMM-DEREGISTERED.\nThe MS shall store the PLMN identity in the \"forbidden PLMN list\" and if the MS is configured to use timer T3245 (see 3GPP TS 24.368 [135] or 3GPP TS 31.102 [112]) then the MS shall start timer T3245 and proceed as described in subclause 4.1.1.6. If the message has been successfully integrity checked by the lower layers and the MS maintains a PLMN-specific attempt counter for that PLMN, then the MS shall set this counter to the MS implementation-specific maximum value.\nThe MS shall start timer T3340 as described in subclause 4.7.1.9.\nIf no RR connection exists, the MS shall perform the following additional actions immediately. If the MS is operating in MS operation mode A and an RR connection exists, the MS shall perform these actions when the RR connection is subsequently released:\n-\tIf the MS is IMSI attached, the MS shall set the update status to U3 ROAMING NOT ALLOWED and shall delete any TMSI, LAI and ciphering key sequence number and shall reset the location update attempt counter. The new MM state is MM IDLE.\n-\tThe MS shall perform a PLMN selection according to 3GPP TS 23.122 [14].\nAn MS in GAN mode shall request a PLMN list in GAN (see 3GPP TS 44.318 [76b]) prior to perform a PLMN selection from this list according to 3GPP TS 23.122 [14].\nIf S1 mode is supported in the MS, the MS shall handle the EMM parameters EMM state, EPS update status, GUTI, last visited registered TAI, TAI list, KSI and tracking area updating attempt counter as specified in 3GPP TS 24.301 [120] for the case when the tracking area update procedure is rejected with the EMM cause with the same value.\n# 12\t(Location area not allowed);\nThe MS shall delete any RAI, P-TMSI, P-TMSI signature and GPRS ciphering key sequence number, shall set the GPRS update status to GU3 ROAMING NOT ALLOWED (and shall store it according to clause 4.1.3.2), shall reset the routing area updating attempt counter and shall change to state GMM-DEREGISTERED.LIMITED-SERVICE.\nThe mobile station shall store the LAI in the list of \"forbidden location areas for regional provision of service\".\nThe MS shall start timer T3340 as described in subclause 4.7.1.9.\nIf no RR connection exists, the MS shall perform the following additional actions immediately. If the MS is operating in MS operation mode A and an RR connection exists, the MS shall perform these actions when the RR connection is subsequently released:\n-\tIf the MS is IMSI attached, the MS shall set the update status to U3 ROAMING NOT ALLOWED, shall delete any TMSI, LAI and ciphering key sequence number and shall reset the location update attempt counter. The new MM state is MM IDLE.\n-\tThe MS shall perform a cell selection according to 3GPP TS 43.022 [82] and 3GPP TS 25.304 [98].\nNOTE 5:\tThe cell selection procedure is not applicable for an MS in GAN mode.\nIf S1 mode is supported in the MS, the MS shall handle the EMM parameters EMM state, EPS update status, GUTI, last visited registered TAI, TAI list, KSI and tracking area updating attempt counter as specified in 3GPP TS 24.301 [120] for the case when the tracking area update procedure is rejected with the EMM cause with the same value.\n# 13\t(Roaming not allowed in this location area);\nThe MS shall set the GPRS update status to GU3 ROAMING NOT ALLOWED (and shall store it according to clause 4.1.3.2) and shall delete the list of equivalent PLMNs. The MS shall reset the routing area updating attempt counter, and shall enter the state GMM-REGISTERED.LIMITED-SERVICE.\nThe MS shall store the LAI in the list of \"forbidden location areas for roaming\".\nThe MS shall start timer T3340 as described in subclause 4.7.1.9.\nIf no RR connection exists, the MS shall perform the following additional actions immediately. If the MS is operating in MS operation mode A and an RR connection exists, the MS shall perform these actions when the RR connection is subsequently released:\n-\tIf the MS is IMSI attached, the MS shall set the update status to U3 ROAMING NOT ALLOWED and shall reset the location update attempt counter. The new MM state is MM IDLE.\n-\tThe MS shall perform a PLMN selection according to 3GPP TS 23.122 [14].\nAn MS in GAN mode shall request a PLMN list in GAN (see 3GPP TS 44.318 [76b]) prior to perform a PLMN selection from this list according to 3GPP TS 23.122 [14].\nIf S1 mode is supported in the MS, the MS shall handle the EMM parameters EMM state, EPS update status and tracking area updating attempt counter as specified in 3GPP TS 24.301 [120] for the case when the tracking area update procedure is rejected with the EMM cause with the same value.\n# 14\t(GPRS services not allowed in this PLMN);\nThe MS shall delete any RAI, P-TMSI, P-TMSI signature, and GPRS ciphering key sequence number stored, shall set the GPRS update status to GU3 ROAMING NOT ALLOWED (and shall store it according to subclause 4.1.3.2), shall reset the routing area updating attempt counter and shall change to state GMM-DEREGISTERED.\nThe MS shall store the PLMN identity in the \"forbidden PLMNs for GPRS service\" list and if the MS is configured to use timer T3245 (see 3GPP TS 24.368 [135] or 3GPP TS 31.102 [112]) then the MS shall start timer T3245 and proceed as described in subclause 4.1.1.6. A GPRS MS operating in MS operation mode C shall perform a PLMN selection instead of a cell selection. If the message has been successfully integrity checked by the lower layers and the MS maintains a PLMN-specific PS-attempt counter for that PLMN, then the MS shall set this counter to the MS implementation-specific maximum value.\nA GPRS MS operating in MS operation mode A or B which is already IMSI attached for CS services in the network is still IMSI attached for CS services in the network.\nIf the update type is \"periodic updating\" a GPRS MS operating in MS operation mode A or B in network operation mode I shall then proceed with the appropriate MM specific procedure.\nAs an implementation option, a GPRS MS operating in operation mode A or B may perform the following additional action. If no RR connection exists the MS may perform the action immediately. If the MS is operating in MS operation mode A and an RR connection exists, the MS may only perform the action when the RR connection is subsequently released:\n-\tThe MS may perform a PLMN selection according to 3GPP TS 23.122 [14].\nIf an MS in GAN mode performs a PLMN selection, it shall request a PLMN list in GAN (see 3GPP TS 44.318 [76b]) prior to perform a PLMN selection from this list according to 3GPP TS 23.122 [14].\nThe MS shall not perform the optional PLMN selection in the case where the PLMN providing this reject cause is:\n-\tOn the \"User Controlled PLMN Selector with Access Technology \" or,\n-\tOn the \"Operator Controlled PLMN Selector with Access Technology \" list or,\n-\tA PLMN identified as equivalent to any PLMN, within the same country, contained in the lists above.\nIf S1 mode is supported in the MS, the MS shall handle the EMM parameters EMM state, EPS update status, GUTI, last visited registered TAI, TAI list, KSI and tracking area updating attempt counter as specified in 3GPP TS 24.301 [120] for the case when the tracking area update procedure is rejected with the EMM cause with the same value.\n# 15\t(No Suitable Cells In Location Area);\nThe MS shall set the GPRS update status to GU3 ROAMING NOT ALLOWED (and shall store it according to subclause 4.1.3.2) shall reset the routing area updating attempt counter and shall change to state GMM-REGISTERED.LIMITED-SERVICE.\nThe MS shall store the LAI in the list of \"forbidden location areas for roaming\".\nThe MS shall start timer T3340 as described in subclause 4.7.1.9.\nIf no RR connection exists, the MS shall perform the following additional actions immediately. If the MS is operating in MS operation mode A and an RR connection exists, the MS shall perform these actions when the RR connection is subsequently released:\n-\tIf the MS is IMSI attached, the MS shall set the update status to U3 ROAMING NOT ALLOWED and shall reset the location update attempt counter. The new MM state is MM IDLE.\n-\tThe MS shall search for a suitable cell in another location area or a tracking area according to 3GPP TS 43.022 [82] and 3GPP TS 25.304 [98] or 3GPP TS 36.304 [121].\nNOTE 6:\tThe cell selection procedure is not applicable for an MS in GAN mode.\nIf S1 mode is supported in the MS, the MS shall handle the EMM parameters EMM state, EPS update status and tracking area updating attempt counter as specified in 3GPP TS 24.301 [120] for the case when the tracking area update procedure is rejected with the EMM cause with the same value.\n#22\t(Congestion);\nIf the T3346 value IE is present in the ROUTING AREA UPDATE REJECT message and the value indicates that this timer is neither zero nor deactivated, the MS shall proceed as described below, otherwise it shall be considered as an abnormal case and the behaviour of the MS for this case is specified in subclause 4.7.5.1.5.\nThe MS shall abort the routing area updating procedure, reset the routing area updating attempt counter and set the GPRS update status to GU2 NOT UPDATED. If the rejected request was not for initiating a PDN connection for emergency bearer services, the MS shall change to state GMM-REGISTERED.ATTEMPTING-TO-UPDATE.\nThe MS shall stop timer T3346 if it is running.\nIf the ROUTING AREA UPDATE REJECT message is integrity protected, the MS shall start timer T3346 with the value provided in the T3346 value IE.\nIf the ROUTING AREA UPDATE REJECT message is not integrity protected, the MS shall start timer T3346 with a random value from the default range specified in table 11.3a.\nThe MS stays in the current serving cell and applies the normal cell reselection process. The routing area updating procedure is started, if still necessary, when timer T3346 expires or is stopped.\nA GPRS MS operating in MS operation mode A or B which is already IMSI attached for CS services in the network is still IMSI attached for CS services in the network.\nIf S1 mode is supported in the MS, the MS shall handle the EMM parameters EMM state, EPS update status, and tracking area updating attempt counter as specified in 3GPP TS 24.301 [120] for the case when the tracking area update procedure is rejected with the EMM cause with the same value.\nA GPRS MS operating in MS operation mode A or B in network operation mode II which is configured to use CS fallback and SMS over SGs, or SMS over SGs only, and which did not perform a successful generic location updating procedure since the last intersystem change from S1 mode to A/Gb or Iu mode shall proceed with appropriate MM specific procedures.\n# 25\t(Not authorized for this CSG)\nCause #25 is only applicable in UTRAN Iu mode and when received from a CSG cell. Other cases are considered as abnormal cases and the specification of the mobile station behaviour is given in subclause 4.7.5.1.5.\nThe MS shall set the GPRS update status to GU3 ROAMING NOT ALLOWED (and store it according to subclause 4.1.3.2) and shall reset the routing area updating attempt counter. The state is changed to GMM-REGISTERED.LIMITED-SERVICE.\nIf the CSG ID and associated PLMN identity of the cell where the MS has sent the ROUTING AREA UPDATE REQUEST message are contained in the Allowed CSG list stored in the MS, the MS shall remove the entry corresponding to this CSG ID and associated PLMN identity from the Allowed CSG list.\nIf the CSG ID and associated PLMN identity of the cell where the MS has sent the ROUTING AREA UPDATE REQUEST message are contained in the Operator CSG list, the MS shall proceed as specified in 3GPP TS 23.122 [14] subclause 3.1A.\nThe MS shall start timer T3340 as described in subclause 4.7.1.9.\nIf no RR connection exists, the MS shall perform the following additional actions immediately. If the MS is operating in MS operation mode A and an RR connection exists, the MS shall perform these actions when the RR connection is subsequently released:\n-\tIf the MS is IMSI attached, the MS shall set the update status to U3 ROAMING NOT ALLOWED and shall reset the location update attempt counter. The new MM state is MM IDLE.\n-\tThe MS shall search for a suitable cell according to 3GPP TS 43.022 [82] and 3GPP TS 25.304 [98].\nIf S1 mode is supported in the MS, the MS shall handle the EMM parameters EMM state, EPS update status and tracking area updating attempt counter as specified in 3GPP TS 24.301 [120] for the case when the tracking area update procedure is rejected with the EMM cause with the same value.\nOther values are considered as abnormal cases. The specification of the MS behaviour in those cases is described in subclause 4.7.5.1.5.\nIf the routing area updating request for initiating a PDN connection for emergency bearer services cannot be accepted by the network, the MS shall perform the procedures as described in subclause 4.7.5.1.4. Then if the MS is in the same selected PLMN where the last routing area updating was attempted, the MS shall:\na)\tinform the upper layers of the failure of the procedure; or\nNOTE 1:\tThis can result in the upper layers requesting establishment of a CS emergency call (if not already attempted in the CS domain) or other implementation specific mechanisms, e.g. procedures specified in 3GPP TS 24.229 [95] that can result in the emergency call being attempted to another IP-CAN.\nb)\tdetach locally, if not detached already, attempt GPRS attach for emergency bearer services.\nIf the routing area updating request for initiating a PDN connection for emergency bearer services fails due to abnormal case a) in subclause 4.7.5.1.5, the MS shall perform the procedures as described in subclause 4.7.5.1.5 and inform the upper layers of the failure to access the network.\nNOTE 2:\tThis can result in the upper layers requesting establishment of a CS emergency call (if not already attempted in the CS domain) or other implementation specific mechanisms, e.g. procedures specified in 3GPP TS 24.229 [95] that can result in the emergency call being attempted to another IP-CAN.\nIf the routing area updating request for initiating a PDN connection for emergency bearer services fails due to abnormal cases b), c) or d) in subclause 4.7.5.1.5, the MS shall perform the procedures as described in subclause 4.7.5.1.5. Then if the MS is in the same selected PLMN where the last routing area updating was attempted, the MS shall:\na)\tinform the upper layers of the failure of the procedure; or\nNOTE 3:\tThis can result in the upper layers requesting  establishment of a CS emergency call (if not already attempted in the CS domain) or other implementation specific mechanisms, e.g. procedures specified in 3GPP TS 24.229 [95] that can result in the emergency call being attempted to another IP-CAN.\nb)\tdetach locally, if not detached already, attempt GPRS attach for emergency bearer services.\nThe following abnormal cases can be identified:\na)\tAccess barred because of access class control, EAB or ACDC\nIf the routing area updating procedure is started in response to a paging request from the network, access class barring, EAB or ACDC is not applicable.\nThe routing area updating procedure shall not be started. The MS stays in the current serving cell and applies the normal cell reselection process. The procedure is started as soon as possible and if still necessary, i.e. when the barred state is removed or because of a cell change.\nIf access is barred because of access class control, the upper layers request PS signalling connection, ACDC is applicable to the request and the MS supports ACDC, then the routing area updating procedure shall be started according to subclause 4.7.5.1.1.\nIf access is barred for a certain ACDC category, and if the upper layers request PS signalling connection for a higher ACDC category and the MS supports ACDC, then the routing area updating procedure shall be started according to subclause 4.7.5.1.1.\nIf an access request for an uncategorized application is barred due to ACDC , and if the upper layers request PS signalling connection for a certain ACDC category and the MS supports ACDC, then the routing area updating procedure shall be started according to subclause 4.7.5.1.1.\nb)\tLower layer failure without \"Extended Wait Time\" received from lower layers before the ROUTING AREA UPDATE ACCEPT or ROUTING AREA UPDATE REJECT message is received\nThe procedure shall be aborted and the MS shall proceed as described below, except in the following implementation option cases b.1 and b.2.\nb.1)\tRelease of PS signalling connection before the completion of the routing area updating procedure\nThe routing area updating procedure shall be initiated again, if the following conditions apply:\ni)\tThe original routing area update procedure was initiated over an existing PS signalling connection; and\nii)\tThe routing area update procedure was not due to timer T3330 expiry; and\niii)\tNo SECURITY MODE COMMAND message and no Non-Access Stratum (NAS) messages relating to the PS signalling connection were (e.g. PS authentication procedure, see subclause 4.7.7) received after the ROUTING AREA UPDATE REQUEST message was transmitted.\nb.2)\tRR release in Iu mode (i.e. RRC connection release) with, for example, cause \"Normal\", or \"User inactivity\" or \"Direct signalling connection re-establishment\" (see 3GPP TS 25.331 [23c] and 3GPP TS 44.118 [111])\nThe routing area updating procedure shall be initiated again, if the following conditions apply:\ni)\tThe original routing area update procedure was initiated over an existing RRC connection; and\nii)\tThe routing area update procedure was not due to timer T3330 expiry; and\niii)\tNo SECURITY MODE COMMAND message and no Non-Access Stratum (NAS) messages relating to the PS signalling connection (e.g. PS authentication procedure, see subclause 4.7.7) were received after the ROUTING AREA UPDATE REQUEST message was transmitted.\nNOTE 1:\tThe RRC connection release cause that triggers the re-initiation of the routing area update procedure is implementation specific.\nc)\tT3330 time-out\nThe procedure is restarted four times, i.e. on the fifth expiry of timer T3330, the MS shall abort the procedure and, in Iu mode, release the PS signalling connection (see 3GPP TS 25.331 [23c]). The MS shall proceed as described below.\nd)\tROUTING AREA UPDATE REJECT, other causes than those treated in subclause 4.7.5.1.4, and cases of GMM cause values #22 and #25, if considered as abnormal cases according to subclause 4.7.5.1.4\nIf the routing area updating request is not for initiating a PDN connection for emergency bearer services, upon reception of the cause codes # 95, # 96, # 97, # 99 and # 111 the MS should set the routing area updating attempt counter to 5.\nThe MS shall proceed as described below.\ne)\tIf a routing area border is crossed, when the MS is in state GMM-ROUTING-AREA-UPDATE-INITIATED, the routing area updating procedure shall be aborted and re-initiated immediately. The MS shall set the GPRS update status to GU2 NOT UPDATED.\nf)\tIn A/Gb mode, if a cell change occurs within the same RA, when the MS is in state GMM-ROUTING-AREA-UPDATE-INITIATED, the cell update procedure is performed, before completion of the routing area updating procedure.\ng)\tRouting area updating and detach procedure collision\nGPRS detach containing detach type \"re-attach required\" or \"re-attach not required\":\nIf the MS receives a DETACH REQUEST message before the routing area updating procedure has been completed, the routing area updating procedure shall be aborted and the GPRS detach procedure shall be progressed. If the DETACH REQUEST message contains detach type \"re-attach not required\" and GMM cause #2 \"IMSI unknown in HLR\", the MS will follow the procedure as described below for the detach type \"IMSI detach\".\nGPRS detach containing detach type \"IMSI detach\":\nIf the MS receives a DETACH REQUEST message before the routing area updating procedure has been completed, the routing area updating procedure shall be progressed, i.e. the DETACH REQUEST message shall be ignored.\nThe MS shall proceed as described below.\nh)\tRouting area updating and P-TMSI reallocation procedure collision\nIf the MS receives a P-TMSI REALLOCATION C0MMAND message before the routing area updating procedure has been completed, the P-TMSI reallocation procedure shall be aborted and the routing area updating procedure shall be progressed.\ni)\t\"Extended wait time\" for PS domain from the lower layers\nIf the ROUTING AREA UPDATE REQUEST message contained the low priority indicator set to \"MS is configured for NAS signalling low priority\", the MS shall start timer T3346 with the \"Extended wait time\" value and reset the routing area updating attempt counter.\nIn other cases the MS shall ignore the \"Extended wait time\".\nThe MS shall abort the routing area updating procedure, stay in the current serving cell, set the GPRS update status to GU2 NOT UPDATED, change the state to GMM-REGISTERED.ATTEMPTING-TO-UPDATE and apply the normal cell reselection process.\nIf the MS had used eDRX before initiating routing area updating procedure, then the MS shall continue to use the eDRX with the extended DRX parameters IE received during the last attach or routing area updating procedure.\nThe MS shall proceed as described below.\nj)\tTimer T3346 is running\nThe MS shall not start the routing area updating procedure unless:\n-\tthe MS is an MS configured to use AC11 – 15 in selected PLMN;\n-\tthe MS is in PMM-CONNECTED mode (Iu mode);\n-\tthe MS receives a paging;\n-\tthe MS has a PDN connection for emergency bearer services established;\n-\tthe MS is establishing a PDN connection for emergency bearer services; or\n-\tthe MS has a PDN connection established without the NAS signalling low priority indication or is establishing a PDN connection without the NAS signalling low priority indication and if the timer T3346 was started due to rejection of a NAS request message (e.g. ATTACH REQUEST, ROUTING AREA UPDATE REQUEST or SERVICE REQUEST) which contained the low priority indicator set to \"MS is configured for NAS signalling low priority\".\nThe MS stays in the current serving cell and applies the normal cell reselection process.\nNOTE 2:\tIt is considered an abnormal case if the MS needs to initiate an routing area updating procedure while timer T3346 is running independent on whether timer T3346 was started due to an abnormal case or a non successful case.\nIf the stored RAI is different to the RAI of the current serving cell or the TIN indicates \"GUTI\", the MS shall set the GPRS update status to GU2 NOT UPDATED and change to state GMM-REGISTERED.ATTEMPTING-TO-UPDATE.\nThe MS shall proceed as described below.\nk)\tMobile originated detach required\nGPRS detach due to removal of the USIM or due to switch off:\nIf the MS is in the state GMM-ROUTING-AREA-UPDATE-INITIATED, the routing area updating procedure shall be aborted and the GPRS detach procedure shall be performed (see subclause 4.7.4.1).\nGPRS detach not due to removal of the USIM and not due to switch off:\nThe MS shall initiate the MS initiated detach procedure after successful completion of the routing area updating procedure.\nl)\tRouting area updating and paging for non-GPRS services procedure collision\nIf a GPRS MS in MS operation mode B receives a paging for non-GPRS services before the normal or periodic routing area updating procedure has been completed, the MS shall progress the routing area updating procedure and respond to the paging for non-GPRS services when it has completed the routing area updating procedure or aborted the procedure for other reasons.\nIn cases b, c, d, e, g with detach type \"re-attach required\" or \"re-attach not required\" with GMM cause other than #2 \"IMSI unknown in HLR\", and i, the MS shall stop any ongoing transmission of user data.\nIn cases b, c, d, i and j the MS shall proceed as follows:\nTimer T3330 shall be stopped if still running.\nFor the cases b, c, d, and i when the \"Extended wait time\" is ignored, if the routing area updating request is not for initiating a PDN connection for emergency bearer services, the routing area updating attempt counter shall be incremented.\nIf the routing area updating attempt counter is less than 5, and the stored RAI is equal to the RAI of the current serving cell and the GPRS update status is equal to GU1 UPDATED and the TIN does not indicate \"GUTI\":\n-\tthe MS shall keep the GPRS update status to GU1 UPDATED and changes state to GMM-REGISTERED.NORMAL-SERVICE. The MS shall start timer T3311.\n-\tIf in addition the ROUTING AREA UPDATE REQUEST message indicated \"periodic updating\", none of the other reasons for initiating the routing area updating procedure listed in subclause 4.7.5.1 was applicable, and the ROUTING AREA UPDATE REQUEST message did not include a Requested READY timer value IE, T3324 value IE, T3312 extended value IE or Extended DRX parameters IE,\n-\tin Iu mode, the timer T3311 may be stopped when the MS enters PMM-CONNECTED mode;\n-\tin A/Gb mode, the timer T3311 may be stopped when the READY timer is started.\n-\tIf timer T3311 expires the routing area updating procedure is triggered again.\nIf the routing area updating attempt counter is less than 5, and the stored RAI is different to the RAI of the current serving cell or the GPRS update status is different to GU1 UPDATED or the TIN indicates \"GUTI\":\n-\tfor the cases i and j, the routing area updating procedure is started, if still necessary, when timer T3346 expires or is stopped.\n-\tfor the cases b, c, d, and i when the \"Extended wait time\" is ignored, if the routing area updating request is not for initiating a PDN connection for emergency bearer services, the MS shall start timer T3311, shall set the GPRS update status to GU2 NOT UPDATED and changes state to GMM-REGISTERED.ATTEMPTING-TO-UPDATE.\n-\tIf S1 mode is supported by the MS, the MS shall in addition handle the EPS update status as specified in 3GPP TS 24.301 [120] for the abnormal case when a normal or periodic tracking area updating procedure fails and the tracking area updating attempt counter is less than 5 and the EPS update status is different from EU1 UPDATED.\nIf the routing area updating attempt counter is greater than or equal to 5:\n-\tthe MS shall start timer T3302, and shall set the GPRS update status to GU2 NOT UPDATED. An MS which is a GPRS MS in MS operation modes C shall also delete the list of equivalent PLMNs. The MS shall also enter the state GMM-REGISTERED.ATTEMPTING-TO-UPDATE or optionally the GMM-REGISTERED.PLMN-SEARCH state (see subclause 4.2.5.1.8) in order to perform a PLMN selection according to 3GPP TS 23.122 [14].\n-\t\tIf S1 mode is supported by the MS, the MS shall in addition handle the EPS update status as specified in 3GPP TS 24.301 [120] for the abnormal case when a normal or periodic tracking area updating procedure fails and the tracking area updating attempt counter is equal to 5.\n-\tIf the MS does not enter the state GMM-REGISTERED.PLMN-SEARCH, then\n-\ta GPRS MS operating in MS operation mode A in network operation mode I shall proceed with appropriate MM specific procedures. If the MS operating in MS operation mode A is in an ongoing circuit-switched transaction, it shall initiate the appropriate MM specific procedure after the circuit-switched transaction has been released. The MM sublayer of the MS operating in MS operation mode A shall act as in network operation mode II as long as the combined GMM procedures are not successful and no new RA is entered;\n-\tif the update type is \"periodic updating\", a GPRS MS operating in MS operation mode B in network operation mode I shall proceed with appropriate MM specific procedures. The MM sublayer shall act as in network operation mode II as long as the combined GMM procedures are not successful and no new RA is entered; and\n-\ta GPRS MS operating in MS operation mode A or B in network operation mode II which is configured to use CS fallback and SMS over SGs, or SMS over SGs only, and which did not perform a successful generic location updating procedure since the last intersystem change from S1 mode to A/Gb or Iu mode shall proceed with appropriate MM specific procedures.\nThe following abnormal cases can be identified:\na)\tIf a lower layer failure occurs before the message ROUTING AREA UPDATE COMPLETE has been received from the MS and a P-TMSI and/or PTMSI signature has been assigned, the network shall abort the procedure and shall consider both, the old and new P-TMSI and the corresponding P-TMSI signatures as valid until the old P-TMSI can be considered as invalid by the network (see subclause 4.7.1.5). During this period the network may use the identification procedure followed by a P-TMSI reallocation procedure if the old P-TMSI is used by the MS in a subsequent message.\nNOTE 1:\tOptionally, paging with IMSI may be used if paging with old and new P-TMSI fails. Paging with IMSI causes the MS to re-attach as described in subclause 4.7.9.1.\nb)\tProtocol error\nIf the ROUTING AREA UPDATE REQUEST message has been received with a protocol error, the network shall return a ROUTING AREA UPDATE REJECT message with one of the following reject causes:\n#96:\tMandatory information element error;\n#99:\tInformation element non-existent or not implemented;\n#100:\tConditional IE error;\n#111:\tProtocol error, unspecified.\nc)\tT3350 time-out\nOn the first expiry of the timer, the network shall retransmit the ROUTING AREA UPDATE ACCEPT message and shall reset and restart timer T3350. The retransmission is performed four times, i.e. on the fifth expiry of timer T3350, the routing area updating procedure is aborted. Both, the old and the new P-TMSI and the corresponding P-TMSI signatures shall be considered as valid until the old P-TMSI can be considered as invalid by the network(see subclause 4.7.1.5). During this period the network acts as described for case a above.\nThe figure depicts a 3GPP TS 24.008: Routing and combined routing area updating procedure, illustrating the process of updating the routing area and combining the updates from multiple paths. The figure includes various components such as the base station (gNB), user equipment (UE), and scatterers, which are essential for the efficient transmission of signals. The diagram highlights the importance of beamforming techniques to mitigate interference and ensure reliable communication.\nFigure 4.7.5/1 3GPP TS 24.008: Routing and combined routing area updating procedure\nd.1)\tROUTING AREA UPDATE REQUEST received after the ROUTING AREA UPDATE ACCEPT message has been sent and before the ROUTING AREA UPDATE COMPLETE message is received\n-\tIf one or more of the information elements in the ROUTING AREA UPDATE REQUEST message differ from the ones received within the previous ROUTING AREA UPDATE REQUEST message, the previously initiated routing area updating procedure shall be aborted if the ROUTING AREA UPDATE COMPLETE message has not been received and the new routing area updating procedure shall be progressed, or\n-\tIf the information elements do not differ, then the ROUTING AREA UPDATE ACCEPT message shall be resent and the timer T3350 shall be restarted if an ROUTING AREA UPDATE COMPLETE message is expected. In that case, the retransmission counter related to T3350 is not incremented.\nd.2)\tMore than one ROUTING AREA UPDATE REQUEST received and no ROUTING AREA UPDATE ACCEPT or ROUTING AREA UPDATE REJECT message has been sent\n-\tIf one or more of the information elements in the ROUTING AREA UPDATE REQUEST message differs from the ones received within the previous ROUTING AREA UPDATE REQUEST message, the previously initiated routing area updating procedure shall be aborted and the new routing area updating procedure shall be progressed;\n-\tIf the information elements do not differ, then the network shall continue with the previous routing area updating procedure and shall not treat any further this ROUTING AREA UPDATE REQUEST message.\ne)\tDETACH REQUEST message received before the ROUTING AREA UPDATE ACCEPT message is sent or before the ROUTING AREA UPDATE COMPLETE message (in case of P-TMSI and/or TMSI was allocated) is received.\nGPRS detach containing cause \"power off\":\nThe network shall abort the signalling for the routing area updating procedure towards the MS and shall progress the detach procedure as described in subclause 4.7.4.1.\nNOTE 2:\tInternally in the network, before processing the detach request, the SGSN can perform the necessary signalling procedures for the routing area updating procedure before progressing the detach procedure.\nGPRS detach containing other causes than \"power off\":\nThe network shall proceed with the routing area updating procedure and shall progress the detach procedure after successful completion of the routing area updating procedure.\nf)\tROUTING AREA UPDATE REQUEST message with update type IE indicating \"periodic updating\" is received by the network, the network does not have the GMM context data related to the subscription, and the network operates in network operation mode I.\nThe network may send the ROUTING AREA UPDATE REJECT message with GMM cause value #10 \"Implicitly detached\".\nWithin a combined routing area updating procedure the messages ROUTING AREA UPDATE ACCEPT and ROUTING AREA UPDATE COMPLETE carry information for the routing area updating and the location area updating.\nThe combined routing area updating procedure is initiated only by a GPRS MS operating in MS operation modes A or B, if the MS is in state GMM-REGISTERED and MM-IDLE, and if the network operates in network operation mode I:\n-\twhen a GPRS MS that is IMSI attached for GPRS and non-GPRS services detects a change of the routing area in state GMM-REGISTERED and MM-IDLE, unless the MS is configured for \"AttachWithIMSI\" as specified in 3GPP TS 24.368 [135] or 3GPP TS 31.102 [112] and is entering a routing area in a new PLMN that is neither the registered PLMN nor in the list of equivalent PLMNs;\n-\twhen a GPRS MS that is IMSI attached for GPRS services wants to perform an IMSI attach for non-GPRS services;\n-\tafter termination of a non-GPRS service via non-GPRS channels to update the association if the MS has changed the RA during that non-GPRS service transaction;\n-\tafter termination of a non-GPRS service via non-GPRS channels to update the association if GPRS services were suspended during the non-GPRS service but no resume is received. See 3GPP TS 23.060 [74] subclause 16.2.1;\n-\tafter termination of a non-GPRS service via non-GPRS channels to update the association, if the GPRS MS in MS operation mode A performed a normal GPRS attach or a normal routing area updating procedure during the circuit-switched transaction;\n-\tafter a CM SERVICE REJECT message with cause value #4 is received by the mobile station (see subclause 4.5.1.1); in this case the update type IE shall be set to \"Combined RA/LA updating with IMSI attach\";\n-\twhen a GPRS MS needs to update the network with the new MS Radio Access Capability IE;\n-\twhen a GPRS MS needs to update the network with a new DRX parameter IE;\n-\tin Iu mode, to re-synchronize the PMM mode of MS and network after RRC connection release with cause \"Directed signalling connection re-establishment\", see subclause 4.7.2.5;\n-\tin Iu mode, to re-synchronize the PMM mode of MS and network after inter-system change not due to PS handover from PMM-CONNECTED mode in Iu mode to A/Gb mode or S1 mode, if the MS performed an inter - system change back to Iu mode without sending a ROUTING AREA UPDATE REQUEST message while in A/Gb mode or a TRACKING AREA UPDATE REQUEST message while in S1 mode;\n-\tin Iu mode and A/Gb mode, after intersystem change from S1 mode, and the GMM receives an indication of \"RRC connection failure\" from lower layers due to lower layer failure while in S1 mode. In this case, if the TIN indicates \"RAT-related TMSI\", the MS shall set the TIN to \"GUTI\" before initiating the routing area updating procedure;\n-\tin A/Gb mode, after intersystem change from S1 mode if the TIN indicates \"RAT-related TMSI\", but the MS is required to perform routing area updating for IMS voice termination as specified in annex P.4;\n-\twhen the MS enters GMM-REGISTERED.NORMAL-SERVICE and the TIN indicates \"GUTI\";\n-\twhen the MS supports SRVCC and changes the mobile station classmark 2, mobile station classmark 3 or the supported codecs;\n-\twhen the MS which is configured to use CS fallback and SMS over SGs, or SMS over SGs only, enters a GERAN or UTRAN cell and timer T3423 has expired, or is in the GERAN or UTRAN cell when timer T3423 expires;\n-\twhen due to a manual CSG selection the GPRS MS has selected a CSG cell whose CSG identity and associated PLMN identity are not included in the MS's Allowed CSG list or in the MS's Operator CSG list;\n-\twhen the MS changes the MS network capability information;\n-\twhen the UE's usage setting or the voice domain preference for E-UTRAN change in the MS;\n-\twhen the MS activates mobility management for IMS voice termination as specified in annex P.2 and the TIN indicates \"RAT-related TMSI\";\n-\tupon reception of a paging indication using P-TMSI, if the timer T3346 is running and the MS is in state GMM-REGISTERED.ATTEMPTING-TO-UPDATE and the RAI of the current cell is same as the stored RAI;\n-\twhen the MS which is configured to use CS fallback and SMS over SGs, or SMS over SGs only, enters a GERAN or UTRAN cell, after intersystem change from S1 mode to Iu or A/Gb mode not due to CS fallback, and the location area of the current cell is different from the location area stored in the MS;\n-\tin A/Gb mode, after intersystem change from S1 mode via cell change order procedure not due to CS fallback, if the TIN indicates \"RAT-related TMSI\"; in this case the MS shall set the TIN to \"GUTI\" before initiating the combined routing area updating procedure;\n-\tin A/Gb mode, after Inter RAT handover from S1 mode or Iu mode;\n-\twhen the MS needs to request the use of PSM or needs to stop the use of PSM;\n-\twhen the MS needs to request the use of eDRX or needs to stop the use of eDRX;\n-\twhen a change in the eDRX usage conditions at the MS requires different extended DRX parameters;\n-\twhen a change in the PSM usage conditions at the MS requires a different timer T3312 value or different timer T3324 value; or\nNOTE 1:\tA change in the PSM or eDRX usage conditions at the MS can include e.g. a change in the MS configuration, a change in requirements from upper layers or the battery running low at the MS.\n-\twhen the Default_DCN_ID value changes, as specified in 3GPP TS 24.368 [135] or in USIM file NASCONFIG as specified in 3GPP TS 31.102 [112].\nNOTE 2:\tThe routing area updating procedure is initiated after deleting the DCN-ID list as specified in 3GPP TS 24.301 [120], annex C.\nIn A/Gb mode, the routing and location area identification are broadcast on the broadcast channel(s). A combined routing area updating procedure shall abort any ongoing GMM procedure. Aborted GMM procedures shall be repeated after the combined routing area updating procedure has been successfully performed. The ROUTING AREA UPDATE REQUEST message shall always be the first message sent from the MS in the new routing area after routing area change.\nIn Iu mode, the routing and location area identification are broadcast on the broadcast channel(s) or sent to the MS via the PS signalling connection. A combined routing area updating procedure shall abort any ongoing GMM procedure. Aborted GMM procedures may be repeated after the combined routing area updating procedure has been successfully performed. The ROUTING AREA UPDATE REQUEST message shall always be the first GMM message sent from the MS in the new routing area after routing area change.\nTo initiate a combined routing area updating procedure the MS sends the message ROUTING AREA UPDATE REQUEST to the network, starts timer T3330 and changes to state GMM-ROUTING-UPDATING-INITIATED and MM LOCATION UPDATING PENDING. The value of the Update type IE in the message shall indicate \"combined RA/LA updating\" unless explicitly specified otherwise. If for the last attempt to update the registration of the location area a MM specific procedure was performed, the value of the Update type IE in the ROUTING AREA UPDATE REQUEST message shall indicate \"combined RA/LA updating with IMSI attach\". Furthermore the MS shall include the TMSI status IE if no valid TMSI is available. If the MS has stored a valid LAI and the MS supports EMM combined procedures, the MS shall include it in the Old location area identification IE in the ROUTING AREA UPDATE REQUEST message. If timer T3302 is currently running, the MS shall stop timer T3302. If timer T3311 is currently running, the MS shall stop timer T3311.\nIf the MS has stored a valid TMSI, the MS shall include the TMSI based NRI container IE in the ROUTING AREA UPDATE REQUEST message.\nA GPRS MS in MS operation modes B that is in an ongoing circuit-switched transaction, shall initiate the combined routing area updating procedure after the circuit-switched transaction has been released, if the MS has changed the RA during the circuit-switched transaction and if the network operates in network operation mode I.\nA GPRS MS in MS operation mode A shall initiate the combined routing area updating procedure with IMSI attach after the circuit-switched transaction has been released, if a normal GPRS attach or a normal routing area updating procedure was performed during the circuit-switched transaction and provided that the network operates in network operation mode I.\nA GPRS MS in MS operation mode A shall perform the normal routing area update procedure during an ongoing circuit-switched transaction.\nIf the MS initiates the combined routing area updating procedure for GPRS services and \"SMS-only service\", the MS shall indicate \"SMS only\" in the Additional update type IE.\nIn Iu mode, if the MS wishes to prolong the established PS signalling connection after the normal routing area updating procedure (for example, the MS has any CM application request pending), it may set a follow-on request pending indicator on (see subclause 4.7.13).\nIn Iu mode, when a ROUTING AREA UPDATE REQUEST is received by the SGSN over a new PS signalling connection while there is an ongoing PS signalling connection (network is already in mode PMM-CONNECTED) for this MS, the network shall progress the routing area update procedure as normal and release the previous PS signalling connection when the routing area update procedure has been accepted by the network.\nNOTE 3:\tThe re-establishment of the radio bearers of active PDP contexts is done as described in subclause \"Service Request procedure\".\nIf the combined routing area updating procedure is initiated due to the reception of the paging indication while T3346 is running, the \"follow-on request pending\" indication shall be set to 1.\nThe network may initiate GMM common procedures, e.g. the GMM authentication and ciphering procedure.\nDepending on the value of the update result IE received in the ROUTING AREA UPDATE ACCEPT message, two different cases can be distinguished:\nCase 1)\tThe update result IE value indicates \"combined RA/LA\": Routing and location area\tupdating is successful;\nCase 2)\tThe update result IE value indicates \"RA only\": Routing area updating is successful, but location area updating is not successful.\nA ROUTING AREA UPDATE COMPLETE message shall be returned to the network if the ROUTING AREA UPDATE ACCEPT message containsany of:\n-\ta P-TMSI and/or a TMSI;\n-\tReceive N-PDU Numbers (see 3GPP TS 44.065 [78] and 3GPP TS 25.322 [19b]); or\n-\ta request for the provision of Inter RAT handover information.\nIf Receive N-PDU Numbers were included, the Receive N-PDU Numbers that are valid in the MS shall be included in the ROUTING AREA UPDATE COMPLETE message.\nIf the network has requested the provision of Inter RAT handover information the MS shall return a ROUTING AREA UPDATE COMPLETE message including the Inter RAT handover information IE, as applicable, to the network.\nIn Iu mode, if the network wishes to prolong the PS signalling connection (for example, if the mobile station has indicated \"follow-on request pending\" in ROUTING AREA UPDATE REQUEST message) the network shall indicate the \"follow-on proceed\" in the ROUTING AREA UPDATE ACCEPT message. If the network wishes to release the PS signalling connection, the network shall indicate \"no follow-on proceed\" in the ROUTING AREA UPDATE ACCEPT message.\nAfter that in Iu mode, the mobile station shall act according to the follow-on proceed flag included in the Update result information element in the ROUTING AREA UPDATE ACCEPT message (see subclause 4.7.13).\nIf the network supports CS Fallback, and the mobile station has indicated support of EMM combined procedures in MS network capability, the network shall indicate in the Update result IE in the ROUTING AREA UPDATE ACCEPT message that ISR is not activated.\n4.7.5.2.3.1\tCombined routing area updating successful\nThe description for normal routing area update as specified in subclause 4.7.5.1.3 shall be followed. In addition, the following description for location area updating applies.\nThe handling at the receipt of the ROUTING AREA UPDATE ACCEPT depends on the value received in the update result IE as specified below.\nThe TMSI reallocation may be part of the combined routing area updating procedure. The TMSI allocated is then included in the ROUTING AREA UPDATE ACCEPT message together with the location area identification (LAI). The network shall, in this case, change to state GMM-COMMON-PROCEDURE-INITIATED and shall start the timer T3350 as described in subclause 4.7.6.\nThe MS, receiving a ROUTING AREA UPDATE ACCEPT message, stores the received location area identification, stops timer T3330, enters state MM IDLE, reset the location update attempt counter and sets the update status to U1 UPDATED. If the ROUTING AREA UPDATE ACCEPT message contains an IMSI, the mobile station is not allocated any TMSI, and shall delete any TMSI accordingly. If the ROUTING AREA UPDATE ACCEPT message contains a TMSI, the MS shall use this TMSI as new temporary identity. The MS shall delete its old TMSI and shall store the new TMSI. In this case, an ROUTING AREA UPDATE COMPLETE message is returned to the network. If neither a TMSI nor an IMSI has been included by the network in the ROUTING AREA UPDATE ACCEPT message, the old TMSI, if any is available, shall be kept.\nIf the MS maintains a counter for \"SIM/USIM considered invalid for non-GPRS services\" events (see subclause 4.1.1.6A), then the MS shall reset this counter.\nIf the MS is not configured for NAS signalling low priority, and any of the following conditions is fulfilled:\n-\tthe MS initiated the combined routing area updating procedure due to a change of the registered location area;\n-\tthe value of the Update type IE in the ROUTING AREA UPDATE REQUEST message indicated \"combined RA/LA updating with IMSI attach\"; or\n-\tthe MS indicated support of EMM combined procedures in the MS network capability;\nthen the MS may stop timer T3246 if running.\nAny timer used for triggering the location updating procedure (e.g. T3211, T3212) shall be stopped if running.\nThe network receiving a ROUTING AREA UPDATE COMPLETE message stops timer T3350, changes to GMM-REGISTERED state\nNOTE:\tUpon receiving a ROUTING AREA UPDATE COMPLETE message, the SGSN sends a BSSAP+-TMSI-REALLOCATION-COMPLETE message as specified in 3GPP TS 29.018 [149].\n4.7.5.2.3.2\tCombined routing area updating successful for GPRS services only\nApart from the actions on the routing area updating attempt counter, the description for normal routing area update as specified in subclause 4.7.5.1.3 shall be followed. In addition, the following description for location area updating applies.\nThe SGSN shall use GMM cause #28 \"SMS provided via GPRS in this routing area\" in the ROUTING AREA UPDATE ACCEPT message only if the MS requested \"SMS-only service\" by including the Additional update type IE in the ROUTING AREA UPDATE REQUEST message. The SGSN may indicate in the Update result IE in the ROUTING AREA UPDATE ACCEPT message that ISR is activated.\nThe MS receiving the ROUTING AREA UPDATE ACCEPT message takes one of the following actions depending on the GMM cause:\n#2\t\t\t(IMSI unknown in HLR);\nThe MS shall stop timer T3330 if still running and shall reset the routing area updating attempt counter. The MS shall set the update status to U3 ROAMING NOT ALLOWED and shall delete any TMSI, LAI and ciphering key sequence number. The MS shall enter state GMM-REGISTERED.NORMAL-SERVICE. The new MM state is MM IDLE. The SIM/USIM shall be considered as invalid for non-GPRS services until switching off or the SIM/USIM is removed. If the message has been successfully integrity checked by the lower layers and the MS maintains a counter for \"SIM/USIM considered invalid for non-GPRS services\", then the MS shall set this counter to MS implementation-specific maximum value.\n#16\t(MSC temporarily not reachable); or\n#17\t(Network failure)\nThe MS shall stop timer T3330 if still running, and shall enter state MM-IDLE. The routing area updating attempt counter shall be incremented.\nIf the routing area updating attempt counter is less than 5, and the stored RAI is equal to the RAI of the current serving cell and the GMM update status is equal to GU1 UPDATED:\n-\tthe MS shall keep the GMM update status GU1 UPDATED and changes state to GMM-REGISTERED.ATTEMPTING-TO-UPDATE-MM. The MS shall start timer T3311. When timer T3311 expires the combined routing area update procedure indicating \"combined RA/LA updating with IMSI attach\" is triggered again.\nIf the routing area updating attempt counter is greater than or equal to 5:\n-\tthe MS shall start timer T3302 and shall change to state GMM-REGISTERED.ATTEMPTING-TO-UPDATE-MM;\n-\ta GPRS MS operating in MS operation mode A shall then proceed with appropriate MM specific procedure; a GPRS MS operating in MS operation mode B may then proceed with appropriate MM specific procedures. \nThe MM sublayer shall act as in network operation mode II as long as the combined GMM procedures are not successful and no new RA is entered.\n# 22\t(Congestion);\nThe MS shall change to state GMM-REGISTERED.ATTEMPTING-TO-UPDATE-MM, shall stop timer T3330 if still running, and shall enter state MM-IDLE. The MS shall set the routing area updating attempt counter to 5 and shall start timer T3302.\n# 28\t(SMS provided via GPRS in this routing area);\nThe MS shall stop timer T3330 if still running and shall reset the routing area updating attempt counter. The MS shall set the update status to U3 ROAMING NOT ALLOWED and shall delete any TMSI, LAI and ciphering key sequence number. The MS shall enter state GMM-REGISTERED.NORMAL-SERVICE. The new MM state is MM IDLE.\nThe MS stays in the current serving cell and applies the normal cell reselection process.\nOther GMM causevalues and the case that no GMM cause IE was received are considered as abnormal cases. The combined routing area updating shall be considered as failed for non-GPRS services. The specification of the MS behaviour in those cases is specified in subclause 4.7.5.2.5.\nIf the combined routing area updating cannot be accepted, the network sends a ROUTING AREA UPDATE REJECT message to the MS. An MS that receives a ROUTING AREA UPDATE REJECT message containing a reject cause other than GMM cause value #25 or the message is integrity protected, shall stop the timer T3330, and shall enter the state MM IDLE. If a ROUTING AREA UPDATE REJECT message containing a reject cause other than GMM cause value #25 is received or the message is integrity protected, the MS shall stop any ongoing transmission of user data.\nIf the ROUTING AREA UPDATE REJECT message containing GMM cause value #25 was received without integrity protection, then the MS shall discard the message.\nIf the routing area update request is rejected due to general NAS level mobility management congestion control, the network shall set the GMM cause value to #22 \"congestion\" and assign a back-off timer T3346.\nThe MS shall then take different actions depending on the received reject cause:\n# 3\t\t\t(Illegal MS);\n# 6\t\t\t(Illegal ME), or\n# 8\t\t\t(GPRS services and non GPRS services not allowed);\nThe MS shall set the GPRS update status to GU3 ROAMING NOT ALLOWED and the update status to U3 ROAMING NOT ALLOWED (and shall store it according to subclause 4.1.3.2) and shall delete any P-TMSI, P-TMSI signature, TMSI, RAI, LAI, ciphering key sequence number and GPRS ciphering key sequence number. The MS shall consider the SIM/USIM as invalid for GPRS and non GPRS services until switching off or the SIM/USIM is removed or the timer T3245 expires as described in subclause 4.1.1.6. The MS shall delete the list of equivalent PLMNs, and shall enter the state GMM-DEREGISTERED.NO-IMSI.\nIf the message has been successfully integrity checked by the lower layers and the MS maintains a counter for \"SIM/USIM considered invalid for GPRS services\", then the MS shall set this counter to MS implementation-specific maximum value. If the message has been successfully integrity checked by the lower layers and the MS maintains a counter for \"SIM/USIM considered invalid for non-GPRS services\", then the MS shall set this counter to MS implementation-specific maximum value.\nNOTE 1:\tOptionally the MS starts the timer T3340 as described in subclause 4.7.1.9 for reject cause #8.\nIf S1 mode is supported in the MS, the MS shall handle the EMM parameters EMM state, EPS update status, GUTI, last visited registered TAI, TAI list and KSI as specified in 3GPP TS 24.301 [120] for the case when the combined tracking area update procedure is rejected with the EMM cause with the same value.\n# 7\t\t\t(GPRS services not allowed);\nThe MS shall set the GPRS update status to GU3 ROAMING NOT ALLOWED (and shall store it according to subclause 4.1.3.2) and shall delete any P-TMSI, P-TMSI signature, RAI and GPRS ciphering key sequence number. The SIM/USIM shall be considered as invalid for GPRS services until switching off or the SIM/USIM is removed. The MS shall enter the state GMM-DEREGISTERED.\nIf the message has been successfully integrity checked by the lower layers and the MS maintains a counter for \"SIM/USIM considered invalid for GPRS services\", then the MS shall set this counter to MS implementation-specific maximum value.\nA GPRS MS operating in MS operation mode A or B which is already IMSI attached for CS services is still IMSI attached for CS services in the network.\nA GPRS MS operating in MS operation mode A or B in network operation mode I shall then proceed with the appropriate MM specific procedure.\nNOTE 2:\tOptionally the MS starts the timer T3340 as described in subclause 4.7.1.9.\nIf S1 mode is supported in the MS, the MS shall handle the EMM parameters EMM state, EPS update status, GUTI, last visited registered TAI, TAI list and KSI as specified in 3GPP TS 24.301 [120] for the case when the combined tracking area update procedure is rejected with the EMM cause with the same value.\n# 9\t\t\t(MS identity cannot be derived by the network);\nThe MS shall set the GPRS update status to GU2 NOT UPDATED (and shall store it according to subclause 4.1.3.2), enter the state GMM-DEREGISTERED.NORMAL-SERVICE, and shall delete any P-TMSI, P-TMSI signature, RAI and GPRS ciphering key sequence number.\nA GPRS MS operating in MS operation mode A or B in network operation mode I which is already IMSI attached for CS services in the network, is still IMSI attached for CS services in the network.\nIf the rejected request was not for initiating a PDN connection for emergency bearer services, then\n-\ta GPRS MS operating in MS operation mode A or B shall proceed with appropriate MM specific procedures. The MM sublayer shall act as in network operation mode II as long as the combined GMM procedures are not successful and no new RA is entered; and\n-\tthe MS may subsequently, automatically initiate the GPRS attach procedure.\nIf S1 mode is supported in the MS, the MS shall handle the EMM parameters EMM state, EPS update status, GUTI, last visited registered TAI, TAI list and KSI as specified in 3GPP TS 24.301 [120] for the case when the combined tracking area update procedure is rejected with the EMM cause with the same value.\n# 10\t(Implicitly detached);\nA GPRS MS operating in MS operation mode A or B in network operation mode I, is IMSI detached for both GPRS and CS services in the network.\nThe MS shall enter the state GMM-DEREGISTERED.NORMAL-SERVICE. If the rejected request was not for initiating a PDN connection for emergency bearer services, the MS shall then perform a new attach procedure. The MS should also activate PDP context(s) that were originally activated by the MS to replace any previously MS activated PDP context(s). The MS should also perform the procedures needed in order to activate any previously active multicast service(s).\nIf S1 mode is supported in the MS, the MS shall handle the EMM state as specified in 3GPP TS 24.301 [120] for the case when the combined tracking area update procedure is rejected with the EMM cause with the same value.\nNOTE 3:\tIn some cases, user interaction may be required and then the MS cannot activate the PDP/MBMS context(s) automatically.\n# 11\t(PLMN not allowed);\nThe MS shall set the GPRS update status to GU3 ROAMING NOT ALLOWED and the update status to U3 ROAMING NOT ALLOWED (and shall store it according to subclause 4.1.3.2) and enter the state GMM-DEREGISTERED. Furthermore, the MS shall delete any P-TMSI, P-TMSI signature, TMSI, RAI, LAI, ciphering key sequence number GPRS ciphering key sequence number, shall delete the list of equivalent PLMNs, and shall reset the routing area updating attempt counter and the location update attempt counter.\nThe MS shall store the PLMN identity in the \"forbidden PLMN list\" and if the MS is configured to use timer T3245 (see 3GPP TS 24.368 [135] or 3GPP TS 31.102 [112]) then the MS shall start timer T3245 and proceed as described in subclause 4.1.1.6. If the message has been successfully integrity checked by the lower layers and the MS maintains a PLMN-specific attempt counter for that PLMN, then the MS shall set this counter to the MS implementation-specific maximum value.\nThe MS shall start timer T3340 as described in subclause 4.7.1.9.\nThe MS shall then perform a PLMN selection according to 3GPP TS 23.122 [14].\nAn MS in GAN mode shall request a PLMN list in GAN (see 3GPP TS 44.318 [76b]) prior to perform a PLMN selection from this list according to 3GPP TS 23.122 [14].\nIf S1 mode is supported in the MS, the MS shall handle the EMM parameters EMM state, EPS update status, GUTI, last visited registered TAI, TAI list, KSI and tracking area updating attempt counter as specified in 3GPP TS 24.301 [120] for the case when the combined tracking area update procedure is rejected with the EMM cause with the same value.\n# 12\t(Location area not allowed);\nThe MS shall delete any RAI, P-TMSI, P-TMSI signature and GPRS ciphering key sequence number, shall set the GPRS update status to GU3 ROAMING NOT ALLOWED (and shall store it according to subclause 4.1.3.2), shall reset the routing area updating attempt counter and shall change to state GMM-DEREGISTERED.LIMITED-SERVICE.\nThe MS shall in addition set the update status to U3 ROAMING NOT ALLOWED, shall delete any TMSI, LAI and ciphering key sequence number and shall reset the location update attempt counter. The new MM state is MM IDLE.\nThe mobile station shall store the LAI in the list of \"forbidden location areas for regional provision of service\".\nThe MS shall start timer T3340 as described in subclause 4.7.1.9.\nThe MS shall perform a cell selection according to 3GPP TS 43.022 [82] and 3GPP TS 25.304 [98].\nNOTE 4:\tThe cell selection procedure is not applicable for an MS in GAN mode.\nIf S1 mode is supported in the MS, the MS shall handle the EMM parameters EMM state, EPS update status, GUTI, last visited registered TAI, TAI list, KSI and tracking area updating attempt counter as specified in 3GPP TS 24.301 [120] for the case when the combined tracking area update procedure is rejected with the EMM cause with the same value.\n# 13\t(Roaming not allowed in this location area);\nThe MS shall set the GPRS update status to GU3 ROAMING NOT ALLOWED (and shall store it according to clause 4.1.3.2), and shall delete the list of equivalent PLMNs. The MS shall reset the routing area updating attempt counter, and shall enter the state GMM-REGISTERED.LIMITED-SERVICE.\nThe MS shall in addition set the update status to U3 ROAMING NOT ALLOWED and shall reset the location update attempt counter. The new MM state is MM IDLE.\nThe MS shall store the LAI in the list of \"forbidden location areas for roaming\".\nThe MS shall start timer T3340 as described in subclause 4.7.1.9.\nThe MS shall perform a PLMN selection according to 3GPP TS 23.122 [14].\nThe MS shall indicate the Update type IE \"combined RA/LA updating with IMSI attach\" when performing the routing area updating procedure following the PLMN selection.\nAn MS in GAN mode shall request a PLMN list in GAN (see 3GPP TS 44.318 [76b]) prior to perform a PLMN selection from this list according to 3GPP TS 23.122 [14].\nIf S1 mode is supported in the MS, the MS shall handle the EMM parameters EMM state, EPS update status and tracking area updating attempt counter as specified in 3GPP TS 24.301 [120] for the case when the combined tracking area update procedure is rejected with the EMM cause with the same value.\n# 14\t(GPRS services not allowed in this PLMN);\nThe MS shall delete any RAI, P-TMSI, P-TMSI signature, and GPRS ciphering key sequence number stored, shall set the GPRS update status to GU3 ROAMING NOT ALLOWED (and shall store it according to subclause 4.1.3.2), shall reset the routing area updating attempt counter and shall change to state GMM-DEREGISTERED.\nThe MS shall store the PLMN identity in the \"forbidden PLMNs for GPRS service\" list and if the MS is configured to use timer T3245 (see 3GPP TS 24.368 [135] or 3GPP TS 31.102 [112]) then the MS shall start timer T3245 and proceed as described subclause 4.1.1.6. If the message has been successfully integrity checked by the lower layers and the MS maintains a PLMN-specific PS-attempt counter for that PLMN, then the MS shall set this counter to the MS implementation-specific maximum value.\nA GPRS MS operating in MS operation mode A or B which is already IMSI attached for CS services is still IMSI attached for CS services in the network.\nA GPRS MS operating in MS operation mode A or B in network operation mode I shall then proceed with the appropriate MM specific procedure.\nAs an implementation option, a GPRS MS operating in operation mode A or B may perform a PLMN selection according to 3GPP TS 23.122 [14].\nIf an MS in GAN mode performs a PLMN selection, it shall request a PLMN list in GAN (see 3GPP TS 44.318 [76b]) prior to perform a PLMN selection from this list according to 3GPP TS 23.122 [14].\nThe MS shall not perform the optional PLMN selection in the case where the PLMN providing this reject cause is:\n-\tOn the \"User Controlled PLMN Selector with Access Technology \" or,\n-\tOn the \"Operator Controlled PLMN Selector with Access Technology \" list or,\n-\tA PLMN identified as equivalent to any PLMN, within the same country, contained in the lists above.\nIf S1 mode is supported in the MS, the MS shall handle the EMM parameters EMM state, EPS update status, GUTI, last visited registered TAI, TAI list, KSI and tracking area updating attempt counter as specified in 3GPP TS 24.301 [120] for the case when the combined tracking area update procedure is rejected with the EMM cause with the same value.\n# 15\t(No Suitable Cells In Location Area);\nThe MS shall set the GPRS update status to GU3 ROAMING NOT ALLOWED (and shall store it according to clause 4.1.3.2), shall reset the routing area updating attempt counter and shall change to state GMM-REGISTERED.LIMITED-SERVICE.\nThe MS shall in addition set the update status to U3 ROAMING NOT ALLOWED and shall reset the location update attempt counter. The new MM state is MM IDLE.\nThe MS shall store the LAI in the list of \"forbidden location areas for roaming\".\nThe MS shall start timer T3340 as described in subclause 4.7.1.9.\nThe MS shall search for a suitable cell in another location area according to 3GPP TS 43.022 [82] and 3GPP TS 25.304 [98].\nNOTE 5:\tThe cell selection procedure is not applicable for an MS in GAN mode.\nThe MS shall indicate the Update type IE \"combined RA/LA updating with IMSI attach\" when performing the routing area updating procedure.\nIf S1 mode is supported in the MS, the MS shall handle the EMM parameters EMM state, EPS update status and tracking area updating attempt counter as specified in 3GPP TS 24.301 [120] for the case when the combined tracking area update procedure is rejected with the EMM cause with the same value.\n#22\t(Congestion);\nIf the T3346 value IE is present in the ROUTING AREA UPDATE REJECT message and the value indicates that this timer is neither zero nor deactivated, the MS shall proceed as described below, otherwise it shall be considered as an abnormal case and the behaviour of the MS for this case is specified in subclause 4.7.5.2.5.\nThe MS shall abort the routing area updating procedure, reset the routing area updating attempt counter and set the GPRS update status to GU2 NOT UPDATED. If the rejected request was not for initiating a PDN connection for emergency bearer services, the MS shall change to state GMM-REGISTERED.ATTEMPTING-TO-UPDATE.\nThe MS shall stop timer T3346 if it is running.\nIf the ROUTING AREA UPDATE REJECT message is integrity protected, the MS shall start timer with the value provided in the T3346 value IE.\nIf the ROUTING AREA UPDATE REJECT message is not integrity protected, the ME shall start timer T3346 with a random value from the default range specified in table 11.3a.\nThe MS stays in the current serving cell and applies the normal cell reselection process. The routing area updating procedure is started, if still necessary, when timer T3346 expires or is stopped.\nIf S1 mode is supported in the MS, the MS shall handle the EMM parameters EMM state, EPS update status, and tracking area updating attempt counter as specified in 3GPP TS 24.301 [120] for the case when the tracking area update procedure is rejected with the EMM cause with the same value.\n#25\t(Not authorized for this CSG)\nCause #25 is only applicable in UTRAN Iu mode and when received from a CSG cell. Other cases are considered as abnormal cases and the specification of the mobile station behaviour is given in subclause 4.7.5.2.5.\nThe MS shall set the GPRS update status to GU3 ROAMING NOT ALLOWED (and store it according to subclause 4.1.3.2) and shall reset the routing area updating attempt counter. The state is changed to GMM-REGISTERED.LIMITED-SERVICE.\nIf the CSG ID and associated PLMN identity of the cell where the MS has sent the ROUTING AREA UPDATE REQUEST message are contained in the Allowed CSG list stored in the MS, the MS shall remove the entry corresponding to this CSG ID and associated PLMN identity from the Allowed CSG list.\nIf the CSG ID and associated PLMN identity of the cell where the MS has sent the ROUTING AREA UPDATE REQUEST message are contained in the Operator CSG list, the MS shall proceed as specified in 3GPP TS 23.122 [14] subclause 3.1A.\nThe MS shall start timer T3340 as described in subclause 4.7.1.9.\nIf the MS is IMSI attached, the MS shall set the update status to U3 ROAMING NOT ALLOWED and shall reset the location update attempt counter. The new MM state is MM IDLE.\nThe MS shall search for a suitable cell according to 3GPP TS 43.022 [82] and 3GPP TS 25.304 [98].\nIf S1 mode is supported in the MS, the MS shall handle the EMM parameters EMM state, EPS update status and tracking area updating attempt counter as specified in 3GPP TS 24.301 [120] for the case when the combined tracking area update procedure is rejected with the EMM cause with the same value.\nOther values are considered as abnormal cases. The specification of the MS behaviour in those cases is described in subclause 4.7.5.2.5.\nThe MS shall proceed as follows:\n1)\tIf the combined routing area update was successful for GPRS services only and the ROUTING AREA UPDATE ACCEPT message contained a cause value not treated in subclause 4.7.5.2.3.2 or the GMM Cause IE is not included in the message, the MS shall proceed as follows:\na)\tThe MS shall stop timer T3330 if still running, and shall enter state MM IDLE. The routing area updating attempt counter shall be incremented;\nb)\tIf the routing area updating attempt counter is less than 5, and the stored RAI is equal to the RAI of the current serving cell and the GMM update status is equal to GU1 UPDATED:\n-\tthe MS shall keep the GMM update status GU1 UPDATED and changes state to GMM-REGISTERED.ATTEMPTING-TO-UPDATE-MM. The MS shall start timer T3311. When timer T3311 expires the combined routing area update procedure indicating \"combined RA/LA updating with IMSI attach\" is triggered again; and\nc)\tIf the routing area updating attempt counter is greater than or equal to 5:\n-\tthe MS shall start timer T3302 and shall change to state GMM-REGISTERED.ATTEMPTING-TO-UPDATE-MM; and\n-\ta GPRS MS operating in MS operation mode A shall then proceed with appropriate MM specific procedure; a GPRS MS operating in MS operation mode B may then proceed with appropriate MM specific procedures. The MM sublayer shall act as in network operation mode II or as long as the combined GMM procedures are not successful and no new RA is entered;\n2)\tCombined routing area updating and paging for non-GPRS services procedure collision\nIf the MS receives a paging for non-GPRS services before the routing area updating procedure has been completed, the MS shall progress the routing area updating procedure and respond to the paging for non-GPRS services when the MS has completed the routing area updating procedure or aborted the procedure for other reasons. The MS shall return to MM state MM IDLE and proceed with the appropriate MM specific procedures to respond to the paging for non-GPRS services; and\n3)\totherwise, the abnormal cases specified in subclause 4.7.5.1.5 apply with the following modification.\nIf the GPRS routing area updating attempt counter is incremented according to subclause 4.7.5.1.5 the next actions depend on the Location Area Identities (stored on SIM/USIM and the one of the current serving cell) and the value of the routing area updating attempt counter.\n-\tif the update status is U1 UPDATED, and the stored LAI is equal to the one of the current serving cell and the routing area updating attempt counter is smaller than 5, then the mobile station shall keep the update status to U1 UPDATED, the new MM state is MM IDLE substate NORMAL SERVICE;\n-\tif the routing area updating attempt counter is smaller than 5 and, additionally, the update status is different from U1 UPDATED or the stored LAI is different from the one of the current serving cell, the mobile station shall delete any LAI, TMSI, ciphering key sequence number stored in the SIM/USIM and list of equivalent PLMNs and set the update status to U2 NOT UPDATED. The MM state remains MM LOCATION UPDATING PENDING; or\n-\tif the routing area updating attempt counter is greater or equal to 5, the mobile station shall delete any LAI, TMSI, ciphering key sequence number stored in the SIM/USIM and the list of equivalent PLMNs, and shall set the update status to U2 NOT UPDATED.\nA GPRS MS operating in MS operation mode A shall then proceed with appropriate MM specific procedure; a GPRS MS operating in MS operation mode B may then proceed with appropriate MM specific procedures. \nThe MM sublayer shall act as in network operation mode II as long as the combined GMM procedures are not successful and no new RA is entered. The new MM state is MM IDLE substate ATTEMPTING TO UPDATE or optionally MM IDLE substate PLMN SEARCH in order to perform a PLMN selection according to 3GPP TS 23.122 [14].\nThe abnormal cases specified in subclause 4.7.5.1.6 apply.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "4.7.6\tP-TMSI reallocation procedure",
                            "text_content": "A temporary mobile station identity for GPRS services, the Packet-TMSI (P-TMSI), is used for identification within the radio interface signalling procedures. The structure of the P-TMSI is specified in 3GPP TS 23.003 [10]. The P-TMSI has significance only within a routing area. Outside the routing area the P-TMSI has to be combined with the routing area identification (RAI) to provide for an unambiguous identity.\nThe purpose of the P-TMSI reallocation procedure is to provide identity confidentiality, i.e. to protect a user against being identified and located by an intruder (see 3GPP TS 43.020 [13], 3GPP TS 23.060 [74] and 3GPP TS 33.102 [5a]).\nUsually, P-TMSI reallocation is performed at least at each change of a routing area (Such choices are left to the network operator).\nThe reallocation of a P-TMSI is performed by the unique procedure defined in subclause 4.7.6. This procedure can only be initiated by the network in state GMM-REGISTERED.\nP-TMSI can also be implicitly reallocated in the attach or routing area updating procedures (see subclauses .1 and 4.7.5). The implicit reallocation of a P-TMSI is described in the corresponding subclauses.\nNOTE:\tNormally, the P-TMSI reallocation will take place in conjunction with another GMM procedure, e.g. at routing area updating (see 3GPP TS 29.002 [37]).\nThe network shall initiate the P-TMSI reallocation procedure by sending a P-TMSI REALLOCATION COMMAND message to the MS and shall start the timer T3350.\nThe P-TMSI REALLOCATION COMMAND message shall contain a new combination of P-TMSI, RAI and optionally a P-TMSI signature or a DCN-ID or both allocated by the network.\nThe network may suspend the transmission of user data during the P-TMSI reallocation procedure.\nUpon receipt of the P-TMSI REALLOCATION COMMAND message, the MS shall store the routing area identifier (RAI) and the P-TMSI. Furthermore, the MS shall send a P-TMSI REALLOCATION COMPLETE message to the network.\nIf a P-TMSI signature is present in the P-TMSI REALLOCATION COMMAND message, the MS shall store the new P-TMSI signature and shall if available delete the old P-TMSI signature. If no P-TMSI signature is present in the P-TMSI REALLOCATION COMMAND message, the old P-TMSI signature, if available, shall be kept.\nIf the P-TMSI REALLOCATION COMMAND message contains the DCN-ID IE, then the MS shall store the included DCN-ID value together with the PLMN code of the registered PLMN in a DCN-ID list in a non-volatile memory in the ME as described in 3GPP TS 24.301 [120], annex C.\nUpon receipt of the P-TMSI REALLOCATION COMPLETE message, the network shall stop the timer T3350 and shall consider both the old and the new P-TMSI and the corresponding P-TMSI signatures as valid until the old P-TMSI can be considered as invalid by the network (see subclause 4.7.1.5).\nIn A/Gb mode, the GMM layer shall notify the LLC layer that the P-TMSI has been changed (see 3GPP TS 44.064 [78a]).\nThe following abnormal cases can be identified:\nIf different new P-TMSIs are included in subsequent P-TMSI REALLOCATION COMMAND messages due to an aborted or repeated P-TMSI reallocation procedure, the MS shall behave as described in subclause 4.7.6.2. Furthermore, the MS shall take action on the P-TMSI as described in subclause 4.7.1.5.\nThe following abnormal cases can be identified:\na)\tLower layer failure\nIf a lower layer failure is detected before the P-TMSI REALLOCATION COMPLETE message is received, the network shall consider both the old and the new P-TMSI as occupied until the old P-TMSI can be considered as invalid (see subclause 4.7.1.5).\nDuring this period the network:\n-\tmay first use the old P-TMSI for paging for an implementation dependent number of paging attempts in the case of network-originated transactions. Upon response from the MS, the network may re-initiate the P-TMSI reallocation procedure. If no response is received to the paging attempts, the network may use the new P-TMSI for paging for an implementation dependent number of paging attempts. Upon response from the MS, the network shall consider the new P-TMSI as valid and the old P-TMSI as invalid. If no response is received to the paging attempts, the network may use the IMSI for paging for an implementation dependent number of paging attempts;\nNOTE:\tPaging with IMSI causes the MS to re-attach as described in subclause 4.7.9.1.\n-\tshall consider the new P-TMSI as valid if it is used by the MS (see subclause 4.7.1.5); or\n-\tmay use the identification procedure followed by a new P-TMSI reallocation, if the MS uses the old P-TMSI.\nb)\tExpiry of timer T3350\nThe P-TMSI reallocation procedure is supervised by the timer T3350 (see example in figure 4.7.6/1). On the first expiry of timer T3350, the network shall reset and restart timer T3350 and shall retransmit the P-TMSI REALLOCATION COMMAND message. This retransmission is repeated four times, i.e. on the fifth expiry of timer T3350, the network shall abort the P-TMSI reallocation procedure and shall follow the rules for case a as described above.\nc)\tP-TMSI reallocation and GPRS attach procedure collision\nIf the network receives an ATTACH REQUEST message before the ongoing P-TMSI reallocation procedure has been completed, the network shall proceed with the GPRS attach procedure after deletion of the GMM context.\nd)\tP-TMSI reallocation and an MS initiated GPRS detach procedure collision\nIf the network receives a DETACH REQUEST message before the ongoing P-TMSI reallocation procedure has been completed, the network shall abort the P-TMSI reallocation procedure and shall progress the GPRS detach procedure.\ne)\tP-TMSI reallocation and a routing area updating procedure collision\nIf the network receives a ROUTING AREA UPDATE REQUEST message before the ongoing P-TMSI reallocation procedure has been completed, the network shall abort the P-TMSI reallocation procedure and shall progress the routing area updating procedure. The network may then perform a new P-TMSI reallocation.\nf)\tP-TMSI reallocation and a service request procedure collision\nIf the network receives a SERVICE REQUEST message before the ongoing P-TMSI reallocation procedure procedure has been completed, the network shall progress both procedures.\nThe figure depicts a 3GPP TS 24.008 document titled \"P-TMSI reallocation procedure,\" which outlines the process for reallocating P-TMSI identifiers in a 3GPP network. The figure includes various components such as the P-TMSI identifier, the reallocation procedure, and the steps involved in the reallocation process. The document is crucial for understanding the technical aspects of 3GPP TS 24.008 and its implementation in a 3GPP network.\nFigure 4.7.6/1 3GPP TS 24.008: P-TMSI reallocation procedure\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "4.7.7\tAuthentication and ciphering procedure",
                            "text_content": "The purpose of the authentication and ciphering procedure is fivefold (see 3GPP TS 33.102 [5a] and 3GPP TS 43.020 [13]):\n-\tto permit the network to check whether the identity provided by the MS is acceptable or not;\n-\tto provide parameters enabling the MS to calculate a new GPRS UMTS ciphering key and a new GPRS UMTS integrity key;\n-\tto let the network set the GSM ciphering mode (ciphering /no ciphering) and GSM ciphering algorithm;\n-\tto permit the mobile station to authenticate the network; and\n-\tto let the network set GSM integrity protection and GSM integrity algorithm (for control plane and optionally for user plane).\nIn Iu mode, and in the case of a UMTS authentication challenge, the authentication and ciphering procedure can be used for authentication only.\nThe cases in which the authentication and ciphering procedure shall be used are defined in 3GPP TS 33.102 [5a], 3GPP TS 43.020 [13] and 3GPP TS 42.009 [5].\nThe authentication and ciphering procedure is always initiated and controlled by the network. However, in the case of a UMTS authentication challenge, there is the possibility for the MS to reject the network.\nThe MS shall support the UMTS authentication challenge, if a USIM is inserted.\nThe authentication and ciphering procedure can be used for any combination of the following:\n-\tauthentication;\n-\tsetting of the GSM ciphering mode and the GSM ciphering algorithm; and\n-\tsetting of GSM integrity protection and the GSM integrity algorithm (for control plane and optionally for user plane).\nNOTE:\tSetting of GSM integrity protection and the GSM integrity algorithm in the authentication and ciphering procedure is only applicable for an MS and a network supporting integrity protection in A/Gb mode.\nIn A/Gb mode, the network should not send any user data during the authentication and ciphering procedure.\nA UMTS security context is established in the MS and the network when a UMTS authentication challenge is performed in A/Gb mode or in Iu mode. After a successful UMTS authentication, the GPRS UMTS ciphering key, the GPRS UMTS integrity key, the GPRS GSM ciphering key and the GPRS ciphering key sequence number, are stored both in the network and the MS. Furthermore, in A/Gb mode both the ME and the network may derive and store a GPRS GSM Kc128 as part of the UMTS security context as described in the subclause 4.7.7.3a. Furthermore, in A/Gb mode, if integrity protection is used, both the MS and the network shall derive and store a GPRS GSM Kint as part of the UMTS security context as described in the subclause 4.7.7.3b.\nThe purpose of the authentication and ciphering procedure is threefold (see 3GPP TS 43.020 [13]):\n-\tto permit the network to check whether the identity provided by the MS is acceptable or not;\n-\tto provide parameters enabling the MS to calculate a new GPRS GSM ciphering key; and\n-\tto let the network set the GSM ciphering mode (ciphering/no ciphering) and GSM ciphering algorithm.\nThe authentication and ciphering procedure can be used for either:\n-\tauthentication only;\n-\tsetting of the GSM ciphering mode and the GSM ciphering algorithm only; or\n-\tauthentication and the setting of the GSM ciphering mode and the GSM ciphering algorithm.\nThe cases in which the authentication and ciphering procedure shall be used are defined in 3GPP TS 42.009 [5].\nIn A/Gb mode, the authentication and ciphering procedure is always initiated and controlled by the network. It shall be performed in a non ciphered mode because of the following reasons:\n-\tthe network cannot decipher a ciphered AUTHENTICATION_AND_CIPHERING RESPONSE from an unauthorised MS and put it on the prohibited list; and\n-\tto be able to define a specific point in time from which on a new GPRS GSM ciphering key should be used instead of the old one.\nGSM authentication challenge shall be supported by a ME supporting GERAN or UTRAN.\nIn A/Gb mode, the network should not send any user data during the authentication and ciphering procedure.\nA GSM security context is established in the MS and the network when a GSM authentication challenge is performed in A/Gb mode or in Iu mode. However, in Iu mode the MS shall not accept a GSM authentication challenge, if a USIM is inserted. After a successful GSM authentication challenge, the GPRS GSM ciphering key and the GPRS ciphering key sequence number, are stored both in the network and the MS.\nFor PS handover to A/Gb mode (see subclause 10.5.1.14 and 3GPP TS 44.060 [76]) the network shall either assign a GSM ciphering algorithm to be used in the target cell or deactivate ciphering in the target cell. The MS shall start to use the new GSM ciphering algorithm or deactivate ciphering upon an indication from the lower layers that the PS handover procedure has been successfully completed (see 3GPP TS 44.060 [76])\nAfter PS handover to Iu mode (see 3GPP TS 25.331 [23c] and 3GPP TS 44.118 [111]) the network shall activate integrity protection and shall either assign a ciphering algorithm to be used in the target cell or deactivate ciphering in the target cell, using the security mode control procedure (3GPP TS 25.331 [23c] and 3GPP TS 44.118 [111]).\nIf the GSM ciphering algorithm is changed at PS handover and the routing area updating procedure triggered by the PS handover procedure is not accepted by the network, the MS shall delete any GPRS ciphering key sequence number and proceed as specified in subclauses 4.7.5.1.4 and 4.7.5.2.4. If the routing area updating procedure fails, because the radio resources assigned in the new cell are released before the MS receives a ROUTING AREA UPDATE ACCEPT message, the MS shall delete any GPRS ciphering key sequence number and proceed as specified in subclauses 4.7.5.1.5 item b and 4.7.5.2.5, respectively.\nThe network initiates the authentication and ciphering procedure by transferring an AUTHENTICATION_AND_CIPHERING REQUEST message across the radio interface and starts timer T3360. The AUTHENTICATION_AND_CIPHERING REQUEST message shall contain all parameters necessary to calculate the response parameters when authentication is performed (see 3GPP TS 43.020 [13] and 3GPP TS 33.102 [5a]).\nIf authentication is requested, then the AUTHENTICATION_AND_CIPHERING REQUEST message shall contain either:\n-\tIn a GSM authentication challenge, the GPRS ciphering key sequence number and the RAND, or\n-\tIn a UMTS authentication challenge, the GPRS ciphering key sequence number, the RAND and the AUTN.\nIn A/Gb mode, if authentication is not requested, then the AUTHENTICATION_AND_CIPHERING REQUEST message shall not contain neither the GPRS ciphering key sequence number, the RAND nor the AUTN.\nIn A/Gb mode, if ciphering is requested, in a GSM authentication challenge or in a UMTS authentication challenge, then the AUTHENTICATION_AND_CIPHERING REQUEST message shall indicate the GPRS GSM ciphering algorithm.\nIn A/Gb mode, an MS supporting integrity protection shall ignore a GSM authentication challenge from the network.\nIn A/Gb mode, in a UMTS authentication challenge, if the MS has indicated support for integrity protection in MS network capability IE included in the ATTACH REQUEST or ROUTING AREA UPDATE REQUEST message to the network, then if the network supports integrity protection then the network shall activate integrity protection in the MS (see subclause 4.7.3.1.3 and subclause 4.7.5.1.3). If the network does not activate integrity protection in the MS, then the MS shall detach from the network.\nIn A/Gb mode, if no UMTS security context is available in the network or if no common UMTS security context is available in the MS and the network, and if the MS has indicated support for integrity protection in MS network capability IE to the network, then an authentication and activation of integrity protection and setting of ciphering mode (enabled or disabled), shall take place in the same authentication and ciphering procedure. The network shall replay the MS network capability IE and the MS radio access capability IE received from the MS in the latest ATTACH REQUEST message or the latest ROUTING AREA UPDATE REQUEST message, by including the MS network capability IE and the MS radio access capability IE in the AUTHENTICATION AND CIPHERING REQUEST message to the MS. The network shall select one of the GPRS GSM integrity algorithms indicated in the MS network capability IE received from the MS in the latest ATTACH REQUEST message or ROUTING AREA UPDATE REQUEST message. The selected GPRS GSM integrity algorithm shall be included in the AUTHENTICATION AND CIPHERING REQUEST message. The network shall enable or disable ciphering and include the selected GPRS GSM ciphering algorithm if ciphering is enabled. If ciphering is enabled, then the network shall select one of the GPRS GSM ciphering algorithm indicated in the MS network capability IE received from the MS in the latest ATTACH REQUEST message or ROUTING AREA UPDATE REQUEST message.The network shall calculate a message authentication code for the AUTHENTICATION AND CIPHERING REQUEST message at the GMM layer with the new integrity key, GPRS GSM Kint key, indicated by the GPRS ciphering key sequence number included in the AUTHENTICATION AND CIPHERING REQUEST message. The new GPRS GSM Kint shall be calculated from the new UMTS security context established in the same procedure as described in the subclause 4.7.7.3b. The AUTHENTICATION AND CIPHERING REQUEST message shall include the calculated message authentication code for integrity protection.\nIn A/Gb mode, if an established UMTS security context is available in the network and if the MS has indicated support for integrity protection in the MS network capability IE, when authentication takes place in the authentication and ciphering procedure (regardless whether a change of the integrity algorithm, ciphering algorithm or a change of ciphering mode takes place in the same procedure), then the network shall replay the MS network capability IE and the MS Radio Access Capability IE received from the MS in the latest ATTACH REQUEST message or the latest ROUTING AREA UPDATE REQUEST message, by including the MS network capability IE and the MS Radio Access Capability IE into the AUTHENTICATION AND CIPHERING REQUEST message to the MS. If a change of the GPRS GSM integrity algorithm takes place in the same procedure, then the network shall select one of the GPRS GSMintegrity algorithms indicated in the MS network capability IE received from the MS in the latest ATTACH REQUEST message or ROUTING AREA UPDATE REQUEST message. The selected GPRS GSM integrity algorithm shall be included into the AUTHENTICATION AND CIPHERING REQUEST message. If the network decides to change the ciphering mode or the ciphering algorithm or both, then if ciphering is enabled the network shall select one of the GPRS GSM ciphering algorithms indicated in the MS network capability IE received from the MS in the latest ATTACH REQUEST message or ROUTING AREA UPDATE REQUEST message. The network shall also include the ciphering mode or the selected GPRS GSM ciphering algorithm or both, if ciphering is enabled (Ciphering algorithm IE) in the AUTHENTICATION AND CIPHERING REQUEST message. The network calculates a message authentication code over the parameters included in the AUTHENTICATION AND CIPHERING REQUEST message at the GMM layer with the new integrity key GPRS GSM Kint indicated by the GPRS ciphering key sequence number included by the AUTHENTICATION AND CIPHERING REQUEST message. The new GPRS GSM Kint shall be calculated from the new UMTS security context established in the same procedure as described in the subclause 4.7.7.3b. The AUTHENTICATION AND CIPHERING REQUEST message shall include the calculated message authentication code for integrity protection.\nIn A/Gb mode, if an established UMTS security context context is available in the network and if the MS has indicated support for integrity protection in the MS network capability IE to the network, and if integrity protection is in use, then if only a change of the integrity algorithm or ciphering algorithm or both, or a change of the ciphering mode, is requested in the authentication and ciphering procedure, then the AUTHENTICATION AND CIPHERING REQUEST message shall include the new GPRS GSM integrity algorithm or the new setting of the ciphering mode and the new GPRS GSM ciphering algorithm; that shall be taken into use.\nNOTE:\tThe AUTHENTICATION AND CIPHERING REQUEST message is protected by a message authentication code in the LLC layer when no authentication takes place in the authentication and ciphering procedure.Therefore, no message authentication code shall be calculated and included by the GMM layer into this message when only an algorithm change takes place. In addition, there is no need to replay the MS network capability IE and the MS Radio Access Capability IE in the AUTHENTICATION AND CIPHERING REQUEST message when no authentication takes place as a valid UMTS security context is already established between the MS and network.\nThe network includes the A&C reference number information element in the AUTHENTICATION AND CIPHERING REQUEST message. Its value is chosen in order to link an AUTHENTICATION AND CIPHERING REQUEST in a RA with its RESPONSE. The A&C reference number value might be based on the RA Colour Code value.\nAdditionally, the network may request the MS to include its IMEISV in the AUTHENTICATION AND CIPHERING RESPONSE message.\nIn A/Gb mode, an MS shall be ready to respond upon an AUTHENTICATION_AND_CIPHERING REQUEST message at any time.\nIn UMTS, an MS shall be ready to respond upon an AUTHENTICATION_AND_CIPHERING REQUEST message at any time whilst a PS signalling connection exists.\nIf a SIM is inserted in the MS, the MS shall ignore the Authentication Parameter AUTN IE if included in the AUTHENTICATION_AND_CIPHERING REQUEST message and perform the GSM authentication challenge. It shall not perform the authentication of the network described in subclause 4.7.7.5.1.\nIn a GSM authentication challenge, if the AUTHENTICATION_AND_CIPHERING REQUEST message includes the authentication parameters RAND and GPRS CKSN, then upon receipt of the message, the MS processes the challenge information and sends an AUTHENTICATION_AND_CIPHERING RESPONSE message to the network. The value of the received A&C reference number information element shall be copied into the A&C reference number information element in the AUTHENTICATION_AND_CIPHERING RESPONSE message. A GSM authentication challenge will result in the SIM/USIM passing a SRES and a GPRS GSM ciphering key to the ME. The new GPRS GSM ciphering key calculated from the challenge information shall overwrite the previous one and any previously stored GPRS UMTS ciphering and GPRS UMTS integrity keys shall be deleted. The calculated GSM ciphering key shall be stored on the SIM/USIM together with the GPRS ciphering key sequence number before the AUTHENTICATION_AND_CIPHERING RESPONSE message is transmitted.\nIn a UMTS authentication challenge, if the AUTHENTICATION_AND_CIPHERING REQUEST message includes the UMTS authentication parameters GPRS CKSN, RAND and AUTN, then upon receipt of the message, the MS verifies the AUTN parameter and if this is accepted, the MS processes the challenge information and sends an AUTHENTICATION_AND_CIPHERING RESPONSE message to the network. The value of the received A&C reference number information element shall be copied into the A&C reference number information element in the AUTHENTICATION_AND_CIPHERING RESPONSE message. A UMTS authentication challenge will result in the USIM passing a RES, a GPRS UMTS ciphering key, a GPRS UMTS integrity key and a GPRS GSM ciphering key to the ME. The new GPRS UMTS ciphering key, GPRS UMTS integrity key and GPRS GSM ciphering key calculated from the challenge information shall overwrite the previous ones. The new GPRS UMTS ciphering key, GPRS UMTS integrity key and GPRS GSM ciphering key shall be stored on the USIM together with the GPRS ciphering key sequence number before the AUTHENTICATION_AND_CIPHERING RESPONSE message is transmitted. Furthermore, in A/Gb mode if a GEA ciphering algorithm that requires a 128-bit ciphering key is taken into use, then a new GPRS GSM Kc128 shall also be calculated as described in the subclause 4.7.7.3a.\nIn A/Gb mode, in a UMTS authentication challenge, if the MS supports integrity protection, then the MS shall ignore the GPRS GSM ciphering key received from the USIM and not store the GPRS GSM ciphering key in the ME or on the USIM.\nIn addition, in A/Gb mode, in a UMTS authentication challenge, if the MS has indicated support of integrity protection in the MS network capability IE to the network, and if an authentication takes place in the authentication and ciphering procedure, then a new GPRS GSM Kint shall also be calculated by the MS from the new UMTS security context derived from AKA as described in the subclause 4.7.7.3b. The new GPRS GSM Kint shall be used by the MS to check and verify the message authentication code recived in the AUTHENTICATION AND CIPHERING REQUEST message as described in Annex H in 3GPP TS 43.020 [13]. If the integrity is successfully verified in the MS, then the MS shall check if the replayed MS network capability IE and replayed MS Radio Access Capability IE received in the AUTHENTICATION AND CIPHERING REQUEST message has not been altered compared to the latest MS network capability IE and the latest MS Radio Access Capability IE that the MS sent to the network. If the replayed MS network capability IE and the replayed MS Radio Access Capability IE received in the AUTHENTICATION AND CIPHERING REQUEST message are not the same as the latest MS network capability IE and the MS Radio Access Capability IE that the MS sent to the network, then the MS shall ignore the authentication and ciphering procedure. The network may in addition indicate a GPRS GSM integrity algorithm and a new setting of the ciphering mode and GPRS GSM ciphering algorithm, to be taken into use by the MS. If the integrity of the AUTHENTICATION AND CIPHERING REQUEST message is not successfully verified in the GMM layer, then the MS shall ignore the AUTHENTICATION AND CIPHERING REQUEST message.\nIn A/Gb mode, in a UMTS authentication challenge if the MS has no available UMTS security context and, if the MS has indicated support for integrity protection in MS network capability IE to the network, then if the network does not activate integrity protection by indicating a GPRS GSMintegrity algorithm or does not include a message authentication code to the MS in AUTHENTICATION AND CIPHERING REQUEST message, then the MS shall ignore the AUTHENTICATION AND CIPHERING REQUEST message.\nIn A/Gb mode, in a UMTS authentication challenge, if the MS has indicated support for integrity protection to the network and if the integrity of the AUTHENTICATION AND CIPHERING REQUEST message is successfully verified in the MS and the MS decides to reply by sending an AUTHENTICATION AND CIPHERING RESPONSE message to the network, then the MS shall integrity protect the AUTHENTICATION AND CIPHERING RESPONSE message by calculating an message authentication code at the GMM layer using the new integrity key GPRS GSM Kint calculated by the MS from the new UMTS security context derived from AKA as described in the subclause 4.7.7.3b and as described in Annex H in 3GPP TS 43.020 [13] and include the new message authentication code into the AUTHENTICATION AND CIPHERING RESPONSE message. When a successful authentication takes place on the USIM the GMM layer in the MS shall request the LLC layer to reset the IOV_updates counter to the value zero before sending the AUTHENTICATION AND CIPHERING RESPONSE message to the network.\nIn Iu mode, an MS not capable of A/Gb mode shall ignore the Ciphering Algorithm IE in the AUTHENTICATION_AND_CIPHERING REQUEST message. An MS capable of both Iu mode and A/Gb mode shall store the received value in the Ciphering Algorithm IE in the AUTHENTICATION_AND_CIPHERING REQUEST message until entering state GMM-DEREGISTERED, in order to use it at an inter system change to A/Gb mode. In A/Gb mode, an MS supporting integrity protection shall store the received value in the Ciphering Algorithm IE when entering GMM-DEREGISTERED and at MS power off as described in subclause 4.7.7.3a.\nIf the AUTHENTICATION_AND_CIPHERING REQUEST message does not include neither the GSM authentication parameters (RAND and GPRS CKSN) nor the UMTS authentication parameters (RAND, AUTN and GPRS CKSN), then upon receipt of the message, the MS replies by sending an AUTHENTICATION_AND_CIPHERING RESPONSE message to the network.\nIn A/Gb mode, in the case of an established UMTS security context, if the MS has indicated support for integrity protection to the network, the network may only indicate a GPRS GSM integrity algorithm or a GPRS GSM ciphering algorithm or a change of ciphering mode setting in the AUTHENTICATION AND CIPHERING REQUEST message without re-authentication to the MS. The AUTHENTICATION AND CIPHERING REQUEST message shall include the new GPRS GSM integrity algorithm or the new GPRS GSM ciphering algorithm; or both, that shall be taken into use. When the MS receives this AUTHENTICATION AND CIPHERING REQUEST message without requiring a new authentication, then a new GPRS GSM Kint shall be calculated using the GPRS UMTS ciphering key and the GPRS UMTS integrity key from the already established UMTS security context stored in the ME as described in the subclause 4.7.7.3b and a new GPRS GSM Kc128 shall be calculated using the GPRS UMTS ciphering key and the GPRS UMTS integrity key from the already established UMTS security context stored in the ME as described in the subclause 4.7.7.3a and the MS replies by sending an AUTHENTICATION AND CIPHERING RESPONSE message to the network.\nNOTE:\tIf only a change of GPRS GSM integrity algorithm or GPRS GSM encryption algorithm or a change of both algorithms is included in the AUTHENTICATION AND CIPHERING RESPONSE message without authentication, then the MS shall not integrity protect the AUTHENTICATION AND CIPHERING RESPONSE message at GMM layer. The MS does therefore not calculate and include a message authentication code into the AUTHENTICATION AND CIPHERING RESPONSE message at GMM layer. These GMM messages are instead integrity protected at the LLC layer with current UMTS security context.\nIn A/Gb mode, the GMM layer shall notify the LLC layer if ciphering shall be used or not and if yes which GSM ciphering algorithm and GPRS GSM ciphering key that shall be used (see 3GPP TS 44.064 [78a]).\nIn A/Gb mode, if an established UMTS security context context is available in the network, if the MS has indicated support of integrity protection to the network, then the GMM layer in the MS shall assign the GPRS GSM integrity algorithm and the GPRS GSM Kint integrity key to the LLC layer after it has sent off the AUTHENTICATION AND CIPHERING RESPONSE message to the network (see 3GPP TS 43.020 [13] and 3GPP TS 44.064 [78a]).\nA ME supporting UMTS authentication challenge shall support the following procedure:\nIn order to avoid a synchronisation failure, when the mobile station receives an AUTHENTICATION AND CIPHERING REQUEST message, the mobile station shall store the received RAND together with the RES returned from the USIM in the volatile memory and associate it with the PS domain. When the MS receives a subsequent AUTHENTICATION AND CIPHERING REQUEST message, if the stored RAND value for the PS domain is equal to the new received value in the AUTHENTICATION AND CIPHERING REQUEST message, then the mobile station shall not pass the RAND to the USIM, but shall immediately send the AUTHENTICATION AND CIPHERING RESPONSE message with the stored RES for the PS domain. If, for the PS domain, there is no valid stored RAND in the mobile station or the stored RAND is different from the new received value in the AUTHENTICATION AND CIPHERING REQUEST message, the mobile station shall pass the RAND to the USIM, shall override any previously stored RAND and RES with the new ones and start, or reset and restart timer T3316.\nThe RAND and RES values stored in the mobile station shall be deleted and timer T3316, if running, shall be stopped:\n-\tupon receipt of a SECURITY MODE COMMAND (Iu mode only),\n\tSERVICE ACCEPT (Iu mode only),\n\tSERVICE REJECT (Iu mode only),\n\tROUTING AREA UPDATE_ACCEPT\n\tor AUTHENTICATION AND CIPHERING REJECT message;\n-\tupon expiry of timer T3316;\n-\tif the mobile station enters the GMM states GMM-DEREGISTERED or GMM-NULL; or\n-\tif the mobile station enters PMM-IDLE mode (Iu mode only).\nUpon receipt of the AUTHENTICATION AND CIPHERING RESPONSE message, the network stops the timer T3360 and checks the validity of the response (see 3GPP TS 43.020 [13] and 3GPP TS 33.102 [5a]). For this, it may use the A&C reference number information element within the AUTHENTICATION AND CIPHERING RESPONSE message to determine whether the response is correlating to the last request that was sent.\nIn A/Gb mode, in a UMTS authentication challenge if the MS has indicated support of integrity protection to the network and if the AUTHENTICATION AND CIPHERING REQUEST message authentication, then the network shall check and verify the message authentication code received in the AUTHENTICATION AND CIPHERING RESPONSE message from the MS by using the new integrity key GPRS GSM Kint derived from the new UMTS security context as described in subclause 4.7.7.3b and annex H in 3GPP TS 43.020 [13]. When a successful authentication takes place after a successful verification of the RES and the message authentication code received in the AUTHENTICATION AND CIPHERING RESPONSE message from the MS, the GMM layer in the network shall indicate this successful authentication to the LLC layer. If the check and verification of the message authentication code included in the AUTHENTICATION AND CIPHERING RESPONSE message fails in the network, then the network shall ignore the GMM message. If the AUTHENTICATION AND CIPHERING RESPONSE message is received in the network without a message authentication code then the network shall silently discard the GMM message.\nIn A/Gb mode, in the case of an established GSM security context, the GMM layer shall notify the LLC sublayer if ciphering shall be used or not. Furthermore, if ciphering shall be used, then the GMM layer shall also notify the LLC sublayer which GEA algorithm and GPRS GSM ciphering key that shall be used (see 3GPP TS 44.064 [78a]).\nIn A/Gb mode, in the case of an established UMTS security context, the GMM layer shall notify the LLC sublayer if ciphering shall be used or not. Furthermore, if ciphering shall be used, then the GMM layer shall also notify the LLC sublayer which GEA algorithm and which ciphering key (i.e. GPRS GSM ciphering key or GPRS GSM Kc128) that shall be used (see 3GPP TS 44.064 [78a]). If the network has selected a GEA ciphering algorithm that requires a 128-bit ciphering key, then the ME shall derive a GPRS GSM Kc128 as described in the subclause 4.7.7.3a.\nIn A/Gb mode, if an established UMTS security context context is available in the network, if the MS has indicated support of integrity protection to the network, the GMM layer in the network shall assign the GPRS GSM integrity algorithm and the GPRS GSM Kint integrity key to the LLC layer, after it has received the AUTHENTICATION AND CIPHERING RESPONSE message from the MS (see 3GPP TS 43.020 [13] and 3GPP TS 44.064[78a]).\nUpon receipt of the AUTHENTICATION AND CIPHERING FAILURE message, the network stops the timer T3360. In Synch failure case, the core network may renegotiate with the HLR/AuC and provide the MS with new authentication parameters.\nThe ME and the network may derive and store a 128-bit packet-switched GSM key or GPRS GSM Kc128 from an established UMTS security context. If the GPRS GSM Kc128 exits, then it is also part of the UMTS security context.\nThe ME with a USIM in use shall compute a new GPRS GSM Kc128 using the GPRS UMTS ciphering key and the GPRS UMTS integrity key from an established UMTS security context as specified in 3GPP TS 33.102 [5a]. The new GPRS GSM Kc128 shall be stored only in the ME. The ME shall overwrite the existing GPRS GSM Kc128 with the new GPRS GSM Kc128. The ME shall delete the GPRS GSM Kc128 at switch off, when the USIM is disabled as well as under the conditions identified in the subclause 4.1.3.2 and 4.7.7.4. The ME with a USIM in use shall apply the GPRS GSM Kc128 when in A/Gb mode a GEA ciphering algorithm that requires a 128-bit ciphering key is taken into use.\nThe network shall compute the GPRS GSM Kc128 using the GPRS UMTS integrity key and the GPRS UMTS ciphering key from an established UMTS security context as specified in 3GPP TS 33.102 [5a] only when in A/Gb mode a GEA ciphering algorithm that requires a 128-bit ciphering key is to be used.\nIn A/Gb mode, if the MS supports integrity protection, the information in the Ciphering Algorithm IE together with the IMSI from the USIM shall be stored in a non-volatile memory in the ME at MS power off. The information stored in the Ciphering Algorithm IE can only be used if the IMSI from the USIM matches the IMSI stored in the ME non-volatile memory at MS power on; otherwise the MS shall delete the Ciphering Algorithm IE.\nThe ME and the network may derive and store a 128-bit packet-switched GPRS GSM Kint from an established UMTS security context. If the GPRS GSM Kint exits, then it is also part of the UMTS security context.\nThe ME with a USIM in use shall compute a new GPRS GSM Kint using the GPRS UMTS ciphering key and the GPRS UMTS integrity key from an established UMTS security context as specified in 3GPP TS 43.020 [13]. The new GPRS GSM Kint shall be stored only in the ME. The ME shall overwrite the existing GPRS GSM Kint with the new GPRS GSM Kint. The ME shall delete the GPRS GSM Kint at MS switch off, when the USIM is disabled as well as under the conditions identified in the subclause 4.1.3.2 and 4.7.7.4. The ME with a USIM in use shall apply the GPRS GSM Kint when in A/Gb mode a GIA integrityg algorithm that requires a 128-bit integrity key is taken into use.\nThe network shall compute the GPRS GSM Kint using the GPRS UMTS integrity key and the GPRS UMTS ciphering key from an established UMTS security context as specified in 3GPP TS 43.020 [13]only when in A/Gb mode a GIA integrity algorithm that requires a 128-bit integrity key is to be used.\nAt MS power off, the information in the Integrity Algorithm IE shall be stored in a non-volatile memory in the ME together with the IMSI from the USIM. The information stored in the Integrity Algorithm IE can only be used if the IMSI from the USIM matches the IMSI stored in the ME non-volatile memory at MS power on; otherwise the MS shall delete the Integrity Algorithm IE.\nThe security parameters for authentication and ciphering are tied together in sets.\nIn a GSM authentication challenge, from a challenge parameter RAND both the authentication response parameter SRES and the GPRS GSM ciphering key can be computed given the secret key associated to the IMSI.\nIn a UMTS authentication challenge, from a challenge parameter RAND, the authentication response parameter RES and the GPRS UMTS ciphering key and the GPRS UMTS integrity key can be computed given the secret key associated to the IMSI. Furthermore, in the USIM a GPRS GSM ciphering key can be computed from the GPRS UMTS integrity key and the GPRS UMTS ciphering key by means of an unkeyed conversion function. Furthermore, in A/Gb mode if a GEA ciphering algorithm that requires a 128-bit ciphering key is taken into use, then a GPRS GSM Kc128 shall also be calculated as described in the subclause 4.7.7.3a. Furthermore, in A/Gb mode, if the MS and the network support integrity protection, when a GIA integrity algorithm that requires a 128-bit integrity key is taken into use, then a GPRS GSM Kint shall also be calculated as described in the subclause 4.7.7.3b.\nIn order to allow start of ciphering on a logical link without authentication, GPRS ciphering key sequence numbers are introduced.\nThe GPRS ciphering key sequence number is managed by the network such that the AUTHENTICATION AND CIPHERING REQUEST message contains the GPRS ciphering key sequence number allocated to the GPRS GSM ciphering key (in case of a GSM authentication challenge) or the GPRS UMTS ciphering key and the GPRS UMTS integrity key (in case of a UMTS authentication challenge) which may be computed from the RAND parameter carried in that message.\nIf an authentication and ciphering procedure has been completed successfully and a GPRS ciphering key sequence number is stored in the network, the network shall include a different GPRS ciphering key sequence number in the AUTHENTICATION AND CIPHERING REQUEST message when it intiates a new authentication and ciphering procedure.\nIf a GPRS ciphering key sequence number is contained in the first message during a GMM procedure, the network shall include a different GPRS ciphering key sequence number in the AUTHENTICATION_AND_CIPHERING REQUEST message when it initiates an authentication and ciphering procedure.\nThe MS stores the GPRS ciphering key sequence number with the GPRS GSM ciphering key (in case of a GSM authentication challenge) and the GPRS UMTS ciphering key and the GPRS UMTS integrity key (in case of a UMTS authentication challenge), and includes the corresponding GPRS ciphering key sequence number in the ROUTING AREA UPDATE REQUEST, SERVICE REQUEST and ATTACH REQUEST messages.\nIf the GPRS ciphering key sequence number is deleted, the associated GPRS GSM ciphering key, GPRS UMTS ciphering key, GPRS UMTS integrity key, GPRS GSM Kc128 and GPRS GSM Kint shall be deleted if any (i.e. the established GSM security context or the UMTS security context is no longer valid).\nIn Iu mode, the network may choose to start ciphering and integrity checking with the stored GPRS UMTS ciphering key and the stored GPRS UMTS integrity key (under the restrictions given in 3GPP TS 42.009 [5] and 3GPP TS 33.102 [5a]) if the stored GPRS ciphering key sequence number and the one given from the MS are equal.\nIn A/Gb mode, the network may choose to start ciphering with the stored GPRS GSM ciphering key or GPRS GSM Kc128 (under the restrictions given in 3GPP TS 42.009 [5]) if the stored GPRS ciphering key sequence number and the one given from the MS are equal and the previously negotiated ciphering algorithm is known and supported in the network. When ciphering is requested at GPRS attach, the authentication and ciphering procedure shall be performed since the MS does not store the ciphering algorithm after entering state GMM-DEREGISTERED.\nNOTE 1:\tThe decision of starting ciphering with the GPRS GSM ciphering key or the GPRS GSM Kc128 depends on whether the network indicates in the AUTHENTICATION AND CIPHERING REQUEST message a GEA ciphering algorithm which requires a 64 or 128-bit ciphering key as specified in 3GPP TS 33.102 [5a].\nIn A/Gb mode, if MS indicates support of integrity protection in the MS network capability IE to the network, if the ME has a Integrity Algorithm IE and a Ciphering Algorithm IE stored in the ME non-volatile memory at MS power on, then the GMM layer shall calculate a GPRS GSM Kint key as described in subclause 4.7.7.3b and a GPRS GSM Kc128 key as described in subclause 4.7.7.3a and indicate to the LLC layer before sending the ATTACH REQUEST message that LLC layer shall start integrity protection with the indicated GPRS GSM Kint key and the integrity algorithm (indicated in the stored Integrity Algorithm IE). The GMM layer shall also assign the GPRS GSM Kc128 key and the ciphering algorithm (indicated in the stored Ciphering Algorithm IE) to the LLC layer. The network shall start integrity protection in the LLC layer after reception of the ATTACH REQUEST message with the stored GPRS GSM Kint and the integrity algorithm identified by the stored GPRS GSMintegrity algorithm used when UE was previously attached if the GPRS GSMintegrity algorithm is known and supported in the network, and if the stored GPRS ciphering key sequence number and the one given from the MS are equal.\nUpon GPRS attach, if ciphering is to be used, an AUTHENTICATION AND CIPHERING REQUEST message shall be sent to the MS to start ciphering. In A/Gb mode, upon GPRS attach, if the MS and network supports integrity protection, then the network may choose to start ciphering with the stored GPRS GSM ciphering key or GPRS GSM Kc128 (under the restrictions given in 3GPP TS 42.009 [5]) if the stored GPRS ciphering key sequence number and the one given from the MS in the ATTACH REQUEST message or ROUTING AREA UPDATE REQUEST message are equal and the previously negotiated ciphering algorithm is known and supported in the network, without initiating a authentication and ciphering procedure.\nIf the GPRS ciphering key sequence number stored in the network does not match the GPRS ciphering key sequence number received from the MS in the ATTACH REQUEST message, then the network should authenticate the MS.\nIn A/Gb mode, the MS starts ciphering after sending the AUTHENTICATION AND CIPHERING RESPONSE message. The network starts ciphering when a valid AUTHENTICATION AND CIPHERING RESPONSE is received from the MS.\nIn Iu mode, the MS starts ciphering and integrity checking according to the conditions specified in specification 3GPP TS 25.331 [23c].\nIn A/Gb mode, as an option, the network may decide to continue ciphering without sending an AUTHENTICATION AND CIPHERING REQUEST message after receiving a ROUTING AREA UPDATE REQUEST message with a valid GPRS ciphering key sequence number. Both the MS and the network shall use the latest ciphering parameters. The network starts ciphering when sending the ciphered ROUTING AREA UPDATE ACCEPT message to the MS. The MS starts ciphering after receiving a valid ciphered ROUTING AREA UPDATE ACCEPT message from the network.\nNOTE 2:\tIn some specifications the term KSI (Key Set Identifier) is used instead of the term GPRS ciphering key sequence number.\nIf the authentication response (RES or SRES) is not valid, the network response depends upon the type of identity used by the MS in the first message:\n-\tIf the P-TMSI has been used, the network may decide to initiate the identification procedure. If the IMSI given by the MS differs from the one the network had associated with the P-TMSI, the authentication should be restarted with the correct parameters. If the IMSI provided by the MS is the expected one (i.e. authentication has really failed), the network should send an AUTHENTICATION AND CIPHERING REJECT message to the mobile station.\n-\tIf the IMSI has been used, or the network decides not to try the identification procedure, an AUTHENTICATION AND CIPHERING REJECT message should be transferred to the MS.\nUpon receipt of an AUTHENTICATION AND CIPHERING REJECT message,\na)\tif the message has been successfully integrity checked by the lower layers, the MS shall set the GPRS update status to GU3 ROAMING NOT ALLOWED and shall delete the P-TMSI, P-TMSI signature, RAI and GPRS ciphering key sequence number stored. If available, also the TMSI, LAI and ciphering key sequence number shall be deleted and the update status shall be set to U3 ROAMING NOT ALLOWED. The SIM/USIM shall be considered as invalid until switching off or the SIM/USIM is removed. If the MS maintains a counter for \"SIM/USIM considered invalid for GPRS services\", then the MS shall set this counter to MS implementation-specific maximum value. If the MS maintains a counter for \"SIM/USIM considered invalid for non-GPRS services\", then the MS shall set this counter to MS implementation-specific maximum value.\nIf S1 mode is supported by the MS, the MS shall in addition handle the EMM parameters EMM state, EPS update status, last visited registered TAI, TAI list, GUTI and KSIASME as specified in 3GPP TS 24.301 [120] for the case when an EPS authentication is not accepted by the network.\nb)\tif the message is received without integrity protection, then the MS shall start timer T3247 with a random value uniformly drawn from the range between 30 minutes and 60 minutes, if the timer is not running (see subclause 4.1.1.6A). Additionally, the MS shall:\n-\tif the MS maintains a counter for \"SIM/USIM considered invalid for GPRS services\" events and the counter has a value less than an MS implementation-specific maximum value, proceed as specified in subclause 4.1.1.6A, list item 6.a) for the case an ATTACH REJECT or ROUTING AREA UPDATE REJECT message is received without integrity protection; and\n-\totherwise proceed as specified under list item a) above for the case that the message has been successfully checked by the lower layers.\nList item b) above is also applicable, if the message is received in A/Gb mode.\nIf the AUTHENTICATION AND CIPHERING REJECT message is received, the MS shall abort any GMM procedure, shall stop any of the retransmission timers that are running (e.g. T3310, T3317, T3330, T3321, T3318 or T3320 and shall enter state GMM-DEREGISTERED.\nIn UTRAN Iu mode, depending on local regulations or operator preference for emergency bearer services, if the MS has a PDN connection for emergency bearer services established or is establishing a PDN connection for emergency bearer services, the SGSN need not follow the procedures specified for the authentication failure in the present subclause, the SGSN can continue with the ongoing GMM specific procedure or Session Management procedure. Upon completion of the GMM procedure or Session management procedure, the SGSN shall deactivate all non-emergency PDP contexts, if any, by initiating a PDP context deactivation procedure. The network shall consider the MS to be attached for emergency bearer services only.\nIn a UMTS authentication challenge, the authentication procedure is extended to allow the MS to check the authenticity of the core network. Thus allowing, for instance, detection of false base station.\nFollowing a UMTS authentication challenge, the MS may reject the core network, on the grounds of an incorrect AUTN parameter (see 3GPP TS 33.102 [5a]). This parameter contains two possible causes for authentication failure:\na)\tMAC code failure\nIf the MS considers the MAC code (supplied by the core network in the AUTN parameter) to be invalid, it shall send a AUTHENTICATION AND CIPHERING FAILURE message to the network, with the GMM cause 'MAC failure'. The MS shall then follow the procedure described in subclause 4.7.7.6 (f).\nb)\tSQN failure\nIf the MS considers the SQN (supplied by the core network in the AUTN parameter) to be out of range, it shall send a AUTHENTICATION AND CIPHERING FAILURE message to the network, with the GMM cause 'Synch failure' and the re-synchronization token AUTS provided by the USIM (see 3GPP TS 33.102 [5a]). The MS shall then follow the procedure described in subclause 4.7.7.6 (g).\nIn Iu mode, an MSwith a USIM inserted shall reject the authentication challenge if no Authentication Parameter AUTN IE was present in the AUTHENTICATION REQUEST message (i.e. a GSM authentication challenge has been received when the MS expects a UMTS authentication challenge). In such a case, the MS shall send the AUTHENTICATION AND CIPHERING FAILURE message to the network, with the GMM cause 'GSM authentication unacceptable’. The MS shall then follow the procedure described in subclause 4.7.7.6 (f).\nIf the MS returns an AUTHENTICATION_AND_CIPHERING_FAILURE message to the network, the MS shall delete any previously stored RAND and RES and shall stop timer T3316, if running.\nIf the MS has a PDN connection for emergency bearer services established or is establishing such a PDN connection, additional MS requirements are specified in subclause 4.7.7.6, under \"for items f and g\".\nThe following abnormal cases can be identified:\na)\tLower layer failure\nUpon detection of a lower layer failure before the AUTHENTICATION AND CIPHERING RESPONSE message is received, the network shall abort the procedure.\nb)\tExpiry of timer T3360\nThe network shall, on the first expiry of the timer T3360, retransmit the AUTHENTICATION AND CIPHERING REQUEST message and shall reset and start timer T3360. This retransmission is repeated four times, i.e. on the fifth expiry of timer T3360, the procedure shall be aborted.\nc)\tCollision of an authentication and ciphering procedure with a GPRS attach procedure\nIf the network receives an ATTACH REQUEST message before the ongoing authentication procedure has been completed and no GPRS attach procedure is pending on the network (i.e. no ATTACH ACCEPT/REJECT message has to be sent as an answer to an ATTACH REQUEST message), the network shall abort the authentication and ciphering procedure and proceed with the new GPRS attach procedure.\nd)\tCollision of an authentication and ciphering procedure with a GPRS attach procedure when the authentication and ciphering procedure has been caused by a previous GPRS attach procedure\nIf the network receives an ATTACH REQUEST message before the ongoing authentication procedure has been completed and a GPRS attach procedure is pending (i.e. an ATTACH ACCEPT/REJECT message has still to be sent as an answer to an earlier ATTACH REQUEST message), then:\n-\tIf one or more of the information elements in the ATTACH REQUEST message differs from the ones received within the previous ATTACH REQUEST message, the network shall not treat the authentication any further and proceed with the GPRS attach procedure; or\n-\tIf the information elements do not differ, then the network shall not treat any further this new ATTACH REQUEST message.\nd1)\tCollision of an authentication and ciphering procedure with a GPRS detach procedure\nGPRS detach containing cause \"power off\":\nIf the network receives a DETACH REQUEST message before the ongoing authentication and ciphering procedure has been completed, the network shall abort the authentication and ciphering procedure and shall progress the GPRS detach procedure.\nGPRS detach containing other causes than \"power off\":\nIf the network receives a DETACH REQUEST message before the ongoing authentication and ciphering procedure has been completed, the network shall complete the authentication and ciphering procedure and shall respond to the GPRS detach procedure as described in subclause 4.7.4.\ne)\tCollision of an authentication and ciphering procedure with a routing area updating procedure\nIf the network receives a ROUTING AREA UPDATE REQUEST message before the ongoing authentication procedure has been completed, the network shall progress both procedures.\nThe figure depicts the authentication and ciphering procedure for 3GPP TS 24.008, which is a standard for 3GPP mobile networks. It shows the steps involved in verifying the identity of a user and encrypting their data. The figure includes various components such as the user's identity, the authentication protocol, and the encryption algorithm. The figure is important for ensuring the security of mobile networks and is used in the design and implementation of 3GPP TS 24.008.\nFigure 4.7.7/1 3GPP TS 24.008: Authentication and ciphering procedure\n(f)\tAuthentication failure (GMM cause #18 \"MAC failure\" or #21 \"GSM authentication unacceptable\")\nThe MS shall send an AUTHENTICATION AND CIPHERING FAILURE message, with GMM cause 'MAC failure’ or 'GSM authentication unacceptable’ according to subclause 4.7.7.5.1, to the network and start timer T3318. Furthermore, the MS shall stop any of the retransmission timers that are running (e.g. T3310, T3321, T3330 or T3317). Upon the first receipt of an AUTHENTICATION AND CIPHERING FAILURE message from the MS with GMM cause 'MAC failure’ or 'GSM authentication unacceptable’ the network may initiate the identification procedure described in subclause 4.7.8. This is to allow the network to obtain the IMSI from the MS. The network may then check that the P-TMSI originally used in the authentication challenge corresponded to the correct IMSI. Upon receipt of the IDENTITY REQUEST message from the network, the MS shall send the IDENTITY RESPONSE message.\nNOTE:\tUpon receipt of an AUTHENTICATION AND CIPHERING FAILURE message from the MS with reject cause \"MAC failure\" or \"GSM authentication unacceptable\", the network may also terminate the authentication procedure (see subclause 4.7.7.5).\nIf the P-TMSI/IMSI mapping in the network was incorrect, the network should respond by sending a new AUTHENTICATION AND CIPHERING REQUEST message to the MS. Upon receiving the new AUTHENTICATION AND CIPHERING REQUEST message from the network, the MS shall stop timer T3318, if running, and then process the challenge information as normal. If the P-TMSI/IMSI mapping in the network was correct, the network should terminate the authentication and ciphering procedure by sending an AUTHENTICATION AND CIPHERING REJECT message.\nIf the network is validated successfully (an AUTHENTICATION AND CIPHERING REQUEST message that contains a valid SQN and MAC is received), the MS shall send the AUTHENTICATION AND CIPHERING RESPONSE message to the network and shall start any retransmission timers (e.g. T3310, T3321, T3330 or T3317), if they were running and stopped when the MS received the first failed AUTHENTICATION AND CIPHERING REQUEST message.\nIf the MS receives the second AUTHENTICATION AND CIPHERING REQUEST message while T3318 is running and\n-\tthe MAC value cannot be resolved; or\n-\tthe message was received in UMTS and contains a GSM authentication challenge,\nthe MS shall follow the procedure specified in this subclause (f), starting again from the beginning. If the SQN is invalid, the MS shall proceed as specified in (g).\nIt can be assumed that the source of the authentication challenge is not genuine (authentication not accepted by the MS) if any of the following occurs:\n-\tthe timer T3318 expires;\n-\tthe MS detects any combination of the authentication failures: \"MAC failure\", \"invalid SQN\", and \"GSM authentication unacceptable\", during three consecutive authentication challenges. The authentication challenges shall be considered as consecutive only, if the authentication challenges causing the second and third authentication failure are received by the MS, while the timer T3318 or T3320 started after the previous authentication failure is running.\nThe MS shall stop timer T3318, if the timer is running and the MS detects a lower layer failure, the network releases the PS signalling connection, the MS performs inter-system change to S1 mode, or the MS initiates a GPRS suspension procedure (see 3GPP TS 44.018 [84]).\nWhen it has been deemed by the MS that the source of the authentication challenge is not genuine (authentication not accepted by the MS), the MS shall behave as described in subclause 4.7.7.6.1.\n\nThe figure depicts a 3GPP TS 24.008 document, specifically Figure 4.7.7a/1, which illustrates the cause of authentication failure in GSM networks. The document outlines the potential causes of authentication failure, including \"MAC failure\" and \"GSM authentication unacceptable,\" and provides a detailed explanation of the steps to troubleshoot and resolve these issues.\nFigure 4.7.7a/1 3GPP TS 24.008: Authentication failure cause \"MAC failure\" or \"GSM authentication unacceptable\"\n(g)\tAuthentication failure (GMM cause #19 \"Synch failure\"):\nThe MS shall send an AUTHENTICATION AND CIPHERING FAILURE message, with the GMM cause \"Synch failure\", to the network and start the timer T3320. Furthermore, the MS shall stop any of the retransmission timers that are running (e.g. T3310, T3321, T3330 or T3317). Upon the first receipt of an AUTHENTICATION AND CIPHERING message from the MS with the GMM cause \"synch failure\", the network shall use the returned AUTS parameter from the authentication & ciphering failure parameter IE in the AUTHENTICATION AND CIPHERING FAILURE message, to re-synchronise. The re-synchronisation procedure requires the SGSN to delete all unused authentication vectors for that IMSI and obtain new vectors from the HLR. When re-synchronisation is complete, the network shall initiate the authentication & ciphering procedure. Upon receipt of the AUTHENTICATION AND CIPHERING REQUEST message, the MS shall stop timer T3320, if running.\nNOTE:\tUpon receipt of two consecutive AUTHENTICATION AND CIPHERING FAILURE messages from the MS with reject cause \"synch failure\", the network may terminate the authentication procedure by sending an AUTHENTICATION AND CIPHERING REJECT message.\nIf the network is validated successfully (a new AUTHENTICATION AND CIPHERING REQUEST message is received which contains a valid SQN and MAC) while T3320 is running, the MS shall send the AUTHENTICATION AND CIPHERING RESPONSE message to the network and shall start any retransmission timers (i.e. T3310, T3321, T3330 or T3317), if they were running and stopped when the MS received the first failed AUTHENTICATION AND CIPHERING REQUEST message.\nIf the MS receives the second AUTHENTICATION AND CIPHERING REQUEST message while T3320 is running and\n-\tthe MAC value cannot be resolved; or\n-\tthe message was received in Iu mode and contains a GSM authentication challenge,\nthe MS shall proceed as specified in (f). If the SQN is invalid, the MS shall follow the procedure specified in this subclause (g), starting again from the beginning.\nThe MS shall deem that the network has failed the authentication check and behave as described in subclause 4.7.7.6.1, if any of the following occurs:\n-\tthe timer T3320 expires;\n-\tthe MS detects any combination of the authentication failures: \"MAC failure\", \"invalid SQN\", and \"GSM authentication unacceptable\", during three consecutive authentication challenges. The authentication challenges shall be considered as consecutive only, if the authentication challenges causing the second and third authentication failure are received by the MS, while the timer T3318 or T3320 started after the previous authentication failure is running.\nThe MS shall stop timer T3320, if the timer is running and the MS detects a lower layer failure, the network releases the PS signalling connection, the MS performs inter-system change to S1 mode, or the MS initiates a GPRS suspension procedure (see 3GPP TS 44.018 [84]).\nWhen it has been deemed by the MS that the source of the authentication challenge is not genuine (authentication not accepted by the MS), the MS shall behave as described in subclause 4.7.7.6.1.\nThe figure depicts a 3GPP TS 24.008 document titled \"Authentication failure cause 'Synch failure'\". It illustrates the cause of a synchronization failure in a 3GPP network, specifically in the context of authentication. The figure includes a diagram of the network, with various components such as the authentication server (AS), authentication server (AS), and authentication server (AS). The diagram also shows the synchronization mechanism, which is a key component in ensuring the integrity of the network. The figure provides a visual representation of the authentication process, highlighting the importance of synchronization in ensuring network reliability and security.\nFigure 4.7.7b/1 3GPP TS 24.008: Authentication failure cause 'Synch failure’\nUpon receipt of an AUTHENTICATION AND CIPHERING REJECT message, the UE shall perform the actions as specified in subclause 4.7.7.5.\nFor items f and g:\nDepending on local requirements or operator preference for emergency bearer services, if the MS has a PDN connection for emergency bearer services established or is establishing such a PDN connection, the SGSN need not follow the procedures specified for the authentication failure specified in the present subclause and shall continue using the current security context, if any. The SGSN shall deactivate all non-emergency PDP contexts, if any, by initiating a PDP context deactivation procedure. If there is an ongoing session management procedure, the SGSN shall deactivate all non-emergency PDP contexts upon completion of the session management procedure. The network shall consider the MS to be attached for emergency bearer services only.\nIf an MS has a PDN connection for emergency bearer services established or is establishing such a PDN connection when timer T3318 or T3320 expires, the MS shall not deem that the network has failed the authentication check and not behave as described in subclause 4.7.7.6.1. Instead the MS shall continue using the current security context, if any. The MS shall deactivate all non-emergency PDP contexts, if any, by initiating a PDP context deactivation procedure. If there is an ongoing session management procedure, the MS shall deactivate all non-emergency PDP contexts upon completion of the session management procedure. The MS shall start any retransmission timers (e.g. T3310, T3317, T3321 or T3330) if:\n-\tthey were running and stopped when the MS received the AUTHENTICATION AND CIPHERING REJECT message and detected an authentication failure; and\n-\tthe procedures associated with these timers have not yet been completed.\nThe MS shall consider itself to be attached for emergency bearer services only.\nIf the MS deems that the network has failed the authentication check, then it shall request RR or RRC to release the RR connection and the PS signalling connection, if any, and bar the active cell or cells (see 3GPP TS 25.331 [23c] and 3GPP TS 44.018 [84]). The MS shall start any retransmission timers (i.e. T3310, T3321, T3330 or T3317), if they were running and stopped when the MS received the first AUTHENTICATION AND CIPHERING REQUEST message containing an invalid MAC or invalid SQN, or no AUTN when a UMTS authentication challenge was expected.\nIn A/Gb mode, in the case of an established GSM security context, the GPRS GSM ciphering key shall be taken into use by the MS before the AUTHENTICATION AND CIPHERING RESPONSE message is transmitted.\nIn A/Gb mode, in the case of an established UMTS security context, and if the network indicates in the AUTHENTICATION AND CIPHERING REQUEST message to the MS that a GEA ciphering algorithm that requires a 64-bit ciphering key shall be taken into use, then the GPRS GSM ciphering key shall be taken into use by the MS before the AUTHENTICATION AND CIPHERING RESPONSE message is transmitted. The network shall derive a GPRS GSM ciphering key from the GPRS UMTS ciphering key and the GPRS UMTS integrity key, by using the conversion function named \"c3\" defined in 3GPP TS 33.102 [5a].\nIn A/Gb mode, in the case of an established UMTS security context, and if the network indicates in the AUTHENTICATION AND CIPHERING REQUEST message to the MS that a GEA ciphering algorithm that requires a 128-bit ciphering key shall be taken into use, then the MS shall take the following actions:\n-\tif authentication is not requested and a GEA ciphering algorithm that requires 64-bit ciphering key is in use, the MS shall take into use the GPRS GSM Kc128 derived by the ME from the GPRS UMTS ciphering key and GPRS UMTS integrity key of the established UMTS security context in use (see 3GPP TS 33.102 [5a]) before the AUTHENTICATION AND CIPHERING RESPONSE message is transmitted;.\n-\tif authentication is not requested and a GEA ciphering algorithm that requires 128-bit ciphering key is in use, the GPRS GSM Kc128 of the established UMTS security context in use still applies;\notherwise, the MS shall take into use the GPRS GSM Kc128 derived by the ME from the GPRS UMTS ciphering key and the GPRS UMTS integrity key provided by the USIM during the latest successful authentication procedure (see subclause 4.7.7.3a) before the AUTHENTICATION AND CIPHERING RESPONSE message is transmitted.\nIn A/Gb mode, in the case of an established UMTS security context, and if the network indicates in the AUTHENTICATION AND CIPHERING REQUEST message to the MS that a GEA ciphering algorithm that requires a 128-bit ciphering key shall be taken into use, then the network shall derive a GPRS GSM Kc128 (see subclause 4.7.7.3a).\nIn A/Gb mode, if an established UMTS security context context is available in the network, if the MS indicates support of integrity protection to the network and the network supports integrity protection, if the network indicates in the AUTHENTICATION AND CIPHERING REQUEST message to the MS that a new GPRS GSM integrity algorithm shall be taken into use but no authentication is requested, then the GPRS GSM Kint of the established UMTS security context in use still applies in the MS and network.\nIn A/Gb mode, in the case of an established UMTS security context, and if the network indicates in the AUTHENTICATION AND CIPHERING REQUEST message to the MS that a GIA integrity protection algorithm that requires a 128-bit integrity key shall be taken into use but no authentication is requested, then the GPRS GSM Kint of the established UMTS security context in use still applies in the MS.\nIn A/Gb mode, if during an ongoing, already ciphering protected RR connection, the network initiates a new Authentication and ciphering procedure, the new GPRS GSM ciphering key or GPRS GSM Kc128 shall be taken into use by the MS before the AUTHENTICATION AND CIPHERING RESPONSE message is transmitted. In case of inter-system change to Iu mode after receipt of the AUTHENTICATION AND CIPHERING REQUEST message, the MS and the network shall take the new keys into use immediately after the inter-system change.\nIn Iu mode, in the case of an established GSM security context, the ME shall derive a GPRS UMTS ciphering key and a GPRS UMTS integrity key from the GPRS GSM ciphering key by using the conversion functions named \"c4\" and \"c5\" defined in 3GPP TS 33.102 [5a]. The derived GPRS UMTS ciphering key and GPRS UMTS integrity key shall be taken into use by the MS when a valid SECURITY MODE COMMAND message indicating PS domain is received during an RR connection (the definition of a valid SECURITY MODE COMMAND message is given in 3GPP TS 25.331 [23c]). The network shall derive a GPRS UMTS ciphering key and a GPRS UMTS integrity key from the GPRS GSM ciphering key by using the conversion functions named \"c4\" and \"c5\" defined in 3GPP TS 33.102 [5a].\nIn Iu mode, in the case of an established UMTS security context, the GPRS UMTS ciphering key and the GPRS UMTS integrity key shall be taken into use by the MS when a valid SECURITY MODE COMMAND message indicating PS domain is received during a PS signalling connection (the definition of a valid SECURITY MODE COMMAND message is given in 3GPP TS 25.331 [23c]).\nIn Iu mode, if the MS received a valid SECURITY MODE COMMAND message indicating PS domain in Iu mode or a valid AUTHENTICATION AND CIPHERING REQUEST message in A/Gb mode before the network initiates a new authentication and ciphering procedure and establishes a new GSM/UMTS security context, the new GPRS UMTS ciphering key and GPRS UMTS integrity key are taken into use by the MS, when a new valid SECURITY MODE COMMAND message indicating PS domain is received during the PS signalling connection. In case of inter-system change to A/Gb mode, the MS and the network shall take the new keys into use immediately after the inter-system change.\nAt an inter-system change from Iu mode to A/Gb mode, ciphering may be started (see 3GPP TS 44.064 [78a]) without any new authentication and ciphering procedure. Deduction of the appropriate security key for ciphering in A/Gb mode, depends on the current GSM/UMTS security context stored in the MS and the network.\nThe ME shall handle the GPRS GSM ciphering key and a potential GPRS GSM Kc128 according to table 4.7.7.8.1.\nIn the case of an established GSM security context, before any initial GMM message is sent in the new cell in A/Gb mode, the GMM layer in the MS shall notify the LLC layer if ciphering shall be used or not. If ciphering shall be used, then the GPRS GSM ciphering key and the applicable GEA ciphering algorithm according to the stored Ciphering Algorithm IE in the MS shall also be indicated to the LLC layer (see 3GPP TS 44.064 [78a]).\nIn the case of an established UMTS security context, before any initial GMM message is sent in the new cell in A/Gb mode, the GMM layer in the MS shall notify the LLC layer if ciphering shall be used or not. If ciphering shall be used, then the GPRS GSM ciphering key or GPRS GSM Kc128 and the applicable GEA ciphering algorithm according to the stored Ciphering Algorithm IE in the MS shall also be indicated to the LLC layer (see 3GPP TS 44.064 [78a]). If the network has selected a GEA-algorithm that requires a 128-bit ciphering key, then the ME shall apply a GPRS GSM Kc128 derived from the GPRS UMTS ciphering key and the GPRS UMTS integrity key of the established UTMS security context as specified in 3GPP TS 33.102 [5a].\nTable 4.7.7.8.1/3GPP TS 24.008: Inter-system change from Iu mode to A/Gb mode\n\nNOTE:\tA USIM with UMTS security context, passes the GPRS UMTS ciphering key, the GPRS UMTS integrity key and the derived GPRS GSM ciphering key to the ME independent on the current radio access being UTRAN or GERAN.\nAt an inter-system change from A/Gb mode to Iu mode, ciphering and integrity may be started (see 3GPP TS 25.331 [23c]) without any new authentication and ciphering procedure. Deduction of the appropriate security keys for ciphering and integrity check in Iu mode, depends on the current GSM/UMTS security context stored in the MS and the network.\nThe ME shall handle the GPRS UMTS ciphering key and the GPRS UMTS integrity key according to table 4.7.7.9.1.\nTable 4.7.7.9.1/3GPP TS 24.008: Inter-system change from A/Gb mode to Iu mode\n\nNOTE:\tA USIM with UMTS security context, passes the GPRS UMTS ciphering key, the GPRS UMTS integrity key and the derived GPRS GSM ciphering key to the ME independent on the current radio access being UTRAN or GERAN.\nAt an inter-system change from S1 mode to Iu mode, ciphering and integrity may be started (see 3GPP TS 25.331 [23c]) without any new authentication and ciphering procedure. At an inter-system change from S1 mode to A/Gb mode, ciphering may be started (see 3GPP TS 44.064 [78a]) without any new authentication and ciphering procedure. Deduction of the appropriate security keys for ciphering and integrity check in Iu mode or for ciphering in A/Gb mode, depends on the current EPS security context or the UMTS security context for the PS domain stored in the MS and the network.\nThe ME shall handle the GPRS UMTS ciphering key, the GPRS UMTS integrity key, the GPRS GSM ciphering key and a potential GPRS GSM Kc128 according to table 4.7.7.10.1, table 4.7.7.10.2 and table 4.7.7.10.3.\nTable 4.7.7.10.1/3GPP TS 24.008: Inter-system change from S1 mode to Iu mode or A/Gb mode in connected mode.\n\nNOTE 1:\tFor the case in table 4.7.7.10.1, because of deriving a new UMTS security context for the PS domain, a new GPRS GSM ciphering key needs to be derived from the new derived UMTS security keys (i.e. CK' and IK'). Note that the new GPRS GSM ciphering key is also part of the new UMTS security context for the PS domain, and therefore any old GPRS GSM ciphering key stored in the USIM and in the ME belongs to an old UMTS security context for the PS domain and can no longer be taken into use.\nTable 4.7.7.10.2/3GPP TS 24.008: Inter-system change from S1 mode to Iu mode or A/Gb mode in idle mode when the TIN indicates \"GUTI\".\n\nNOTE 2:\tFor the case in table 4.7.7.10.2, because of deriving a new UMTS security context for the PS domain, a new GPRS GSM ciphering key needs to be derived from the new derived UMTS security keys (i.e. CK' and IK'). The new GPRS GSM ciphering key is also part of the new UMTS security context for the PS domain, and therefore any old GPRS GSM ciphering key stored in the USIM and in the ME belongs to an old UMTS security context for the PS domain and can no longer be taken into use.\nTable 4.7.7.10.3/3GPP TS 24.008: Inter-system change from S1 mode to Iu mode or A/Gb mode in idle mode when the TIN indicates \"RAT-related TMSI\"\n\nThe network shall replace an already established UMTS security context for the PS domain, if any, when a handover from S1mode to Iu mode or from S1mode to A/Gb mode has been completed successfully.\nIf the handover from S1mode to Iu mode or S1mode to A/Gb mode has not been completed successfully, the ME and the network shall delete the new derived UMTS security context for the PS domain. Additionally, the network shall delete the already established UMTS security context for the PS domain, if the CKSN of the already established UMTS security context is equal to the CKSN of the new derived security context for the PS domain.\n",
                            "figures_meta_data": [],
                            "tables": [
                                {
                                    "description": "Table 4.7.7.8.1/3GPP TS 24.008: Inter-system change from Iu mode to A/Gb mode",
                                    "table number": 11,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 4.7.7.9.1/3GPP TS 24.008: Inter-system change from A/Gb mode to Iu mode",
                                    "table number": 12,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 4.7.7.10.1/3GPP TS 24.008: Inter-system change from S1 mode to Iu mode or A/Gb mode in connected mode.",
                                    "table number": 13,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 4.7.7.10.2/3GPP TS 24.008: Inter-system change from S1 mode to Iu mode or A/Gb mode in idle mode when the TIN indicates \"GUTI\".",
                                    "table number": 14,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 4.7.7.10.3/3GPP TS 24.008: Inter-system change from S1 mode to Iu mode or A/Gb mode in idle mode when the TIN indicates \"RAT-related TMSI\"",
                                    "table number": 15,
                                    "summary": "",
                                    "name": ""
                                }
                            ]
                        },
                        {
                            "title": "4.7.8\tIdentification procedure",
                            "text_content": "The identification procedure is used by the network to request an MS to provide specific identification parameters to the network e.g. International Mobile Subscriber Identity, International Mobile Equipment Identity (see 3GPP TS 23.003 [10]). For the presentation of the IMEI, the requirements of 3GPP TS 42.009 [5] apply.\nThe network initiates the identification procedure by transferring an IDENTITY REQUEST message to the MS and starts the timer T3370. The IDENTITY REQUEST message specifies the requested identification parameters in the identity type information element.\nAn MS shall be ready to respond to an IDENTITY REQUEST message at any time.\nUpon receipt of the IDENTITY REQUEST message the MS sends back an IDENTITY RESPONSE message. The IDENTITY RESPONSE message shall contain the identification parameters as requested by the network.\nUpon receipt of the IDENTITY RESPONSE the network shall stop timer T3370.\n(a)\tRequested identity is not available:\nIf the MS cannot encode the requested identity in the IDENTITY RESPONSE message, e.g. because no valid SIM is available, then it shall encode the identity type as \"No identity\".\nThe following abnormal cases can be identified:\na)\tLower layer failure\nUpon detection of a lower layer failure before the IDENTITY RESPONSE is received, the network shall abort any ongoing GMM procedure.\nb)\tExpiry of timer T3370\nThe identification procedure is supervised by the network by the timer T3370. The network shall, on the first expiry of the timer T3370, retransmit the IDENTITY REQUEST message and reset and restart the timer T3370. This retransmission is repeated four times, i.e. on the fifth expiry of timer T3370, the network shall abort the identification procedure and any ongoing GMM procedure.\nc)\tCollision of an identification procedure with a GPRS attach procedure\nIf the network receives an ATTACH REQUEST message before the ongoing identification procedure has been completed and no GPRS attach procedure is pending on the network (i.e. no ATTACH ACCEPT/REJECT message has still to be sent as an answer to an ATTACH REQUEST message), the network shall proceed with the GPRS attach procedure.\nd)\tCollision of an identification procedure with a GPRS attach procedure when the identification procedure has been caused by a GPRS attach procedure\nIf the network receives an ATTACH REQUEST message before the ongoing identification procedure has been completed and a GPRS attach procedure is pending (i.e. an ATTACH ACCEPT/REJECT message has to be sent as an answer to an earlier ATTACH REQUEST message), then:\n-\tIf one or more of the information elements in the ATTACH REQUEST message differs from the ones received within the previous ATTACH REQUEST message, the network shall proceed with the GPRS attach procedure; or\n-\tIf the information elements do not differ, then the network shall not treat any further this new ATTACH REQUEST.\nd1)\tCollision of an identification procedure with an MS initiated GPRS detach procedure\nGPRS detach containing cause \"power off\":\nIf the network receives a DETACH REQUEST message before the ongoing identification procedure has been completed, the network shall abort the identification procedure and shall progress the GPRS detach procedure.\nGPRS detach containing other causes than \"power off\":\nIf the network receives a DETACH REQUEST message before the ongoing identification procedure has been completed, the network shall complete the identification procedure and shall respond to the GPRS detach procedure as described in subclause 4.7.4.\ne)\tCollision of an identification procedure with a routing area updating procedure\nIf the network receives a ROUTING AREA UPDATE REQUEST message before the ongoing identification procedure has been completed, the network shall progress both procedures.\nf)\tCollision of an identification procedure with a service request procedure\nIf the network receives a SERVICE REQUEST message before the ongoing identification procedure has been completed, the network shall progress both procedures.\nThe figure depicts a 3GPP TS 24.008 identification procedure, which is a crucial step in the 3GPP standard for network identification. It shows the steps involved in identifying a network, including the use of a 3GPP TS 24.008 identifier, the use of a 3GPP TS 24.008 identifier, and the use of a 3GPP TS 24.008 identifier. The figure also includes a 3GPP TS 24.008 identifier, a 3GPP TS 24.008 identifier, and a 3GPP TS 24.008 identifier. The figure also includes a 3GPP TS 24.008 identifier, a 3GPP TS 24.008 identifier, and a 3GPP TS 24.008 identifier. The figure also includes a 3GPP TS 24.008 identifier, a 3GPP TS 24.008 identifier, and a 3GPP TS 24.008 identifier. The figure also includes a\nFigure 4.7.8/1 3GPP TS 24.008: Identification procedure\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "4.7.9\tPaging procedure",
                            "text_content": "In A/Gb mode, paging is used by the network to identify the cell the MS has currently selected, or to prompt the mobile to re-attach if necessary as a result of network failure. If the MS is not GPRS attached when it receives a paging for GPRS services, the MS shall ignore the paging.\nIn Iu mode, paging is used by the network to request the establishment of PS signalling connection or to prompt the mobile to re-attach if necessary as a result of network failure. If the MS is not GPRS attached when it receives a paging for GPRS services, the MS shall ignore the paging.\nThe network shall initiate the paging procedure for GPRS services using P-TMSI when GMM signalling messages or user data is pending to be sent to the MS while the mobile reachable timer is running. The network may page only GPRS MSs which are GMM-REGISTERED and identified by a local P-TMSI.\nIn Iu mode, for the MS using eDRX, the network initiates the paging procedure when the paging trigger is received within the paging time window. If the paging trigger is received outside the paging time window, the network initiates the paging procedure at T time ahead of the beginning of the next paging time window.\nNOTE:\tT time is a short time period based on implementation. The operator can take possible imperfections in the synchronization between the CN and the MS into account when choosing T time.\nIn Iu mode, to initiate the procedure the GMM entity in the network requests the lower layer to start paging (see 3GPP TS 25.331 [23c] and 3GPP TS 25.413 [19c]) and shall start the timer:\n-\tT3315 for this paging procedure, if the network accepted to use eDRX for the MS.\n-\tOtherwise T3313 for this paging procedure.\nIn Iu mode, if the network starts the timer T3315, the network shall set the timer T3315 to a value smaller than the value of timer T3-RESPONSE (see 3GPP TS 29.274 [16D] for further details on timer T3-RESPONSE).\nIn Iu mode, the GMM entity in the network may provide the lower layer with a list of CSG IDs, including the CSG IDs of both the expired and the unexpired subscriptions. If there is a PDN connection for emergency bearer services established, the GMM entity in the network shall not provide the list of CSG IDs to the lower layer.\nUpon reception of a paging indication, the MS shall stop the timer T3346, if running, and:\n-\tinitiate a service request procedure to respond to the paging, the MS shall set the service type to \"paging response\" in the SERVICE REQUEST message (see 3GPP TS 24.007 [20], 3GPP TS 23.060 [74], 3GPP TS 25.331 [23c] and 3GPP TS 25.413 [19c]); or\n-\tinitiate a routing area update procedure as specified in subclauses 4.7.5.1 and 4.7.5.2.1.\nIf the paging request for GPRS services was received during an ongoing MS initiated GMM specific procedure, then the MS shall progress the GMM specific procedure, and the network shall proceed with the GMM specific procedure.\nIn A/Gb mode, to initiate the procedure the GMM entity requests the RR sublayer to start paging (see 3GPP TS 44.018 [84], 3GPP TS 44.060 [76]), and shall start the timer:\n-\tT3315 for this paging procedure, if the network accepted to use eDRX for the MS.\n-\tOtherwise T3313 for this paging procedure.\nIn A/Gb mode, if the network starts the timer T3315, the network shall set the timer T3315 to a value smaller than the value of timer T3-RESPONSE (see 3GPP TS 29.274 [16D] for further details on timer T3-RESPONSE).\nIn A/Gb mode, upon reception of a paging indication, the MS shall respond to the paging with any LLC frame (see 3GPP TS 44.064 [78a], 3GPP TS 24.007 [20], 3GPP TS 23.060 [74]).\nAt intersystem change, an MS not having the READY timer running in A/Gb mode or an MS in PMM-IDLE mode in Iu mode, being paged in a different access network as when it last sent user data or signalling message, uses the ROUTING AREA UPDATE REQUEST message as paging response, i.e. the routing area updating procedure shall be performed instead according to the selective routing area updating procedure.\nThe network shall stop the timer for the paging procedure (i.e. either timer T3313 or timer T3315) when a response is received from the MS.\nUpon expiry ofthe timer T3313, the network may re-initiate paging.\nUpon expiry of the timer T3315, the network shall abort the paging procedure and shall proceed as specified in 3GPP TS 23.060 [74].\nIn Iu mode, when a response is received from the MS, the network shall change from PMM-IDLE mode to PMM-CONNECTED mode.\nIn A/Gb mode, when a response different from an LLC NULL frame is received from the MS, the network shall start the READY timer.\nPaging for GPRS services using IMSI is an abnormal procedure used for error recovery in the network.\nThe network may initiate paging using IMSI if the P-TMSI is not available due to a network failure.\nIn Iu mode, to initiate the procedure the GMM entity in the network requests the lower layer to start paging (see 3GPP TS 25.331 [23c] and 3GPP TS 25.413 [19c]).\nIn A/Gb mode, to initiate the procedure the GMM entity in the network requests the RR sublayer to start paging (see 3GPP TS 44.018 [84], 3GPP TS 44.060 [76]).\nUpon reception of a paging indication for GPRS services using IMSI, the MS shall stop the timer T3346, if it is running, locally deactivate any active PDP context(s), MBMS context(s) and locally detach from GPRS. The local detach includes deleting any RAI, P-TMSI, P-TMSI signature and GPRS ciphering key sequence number stored, setting the GPRS update status to GU2 NOT UPDATED and changing state to GMM-DEREGISTERED. The MS shall stop all timers T3396 that are running.\nIf S1 mode is supported by the MS, the MS shall in addition handle the EMM parameters EMM state, EPS update status, last visited registered TAI, TAI list, GUTI and KSIASME as specified in 3GPP TS 24.301 [120] for the case when a paging for EPS services using IMSI is received.\nIn Iu mode, when an MS receives a paging request for GPRS services using the IMSI from the network before an MS initiated GMM specific procedure has been completed, then the MS shall abort the GMM specific procedure, and the MS shall proceed according to the description in this clause.\nAfter performing the local detach, the MS shall then perform a GPRS attach or combined GPRS attach procedure.\nAfter performing the attach, the MS should activate PDP context(s) to replace any previously active PDP context(s). The MS should also perform the procedures needed in order to activate any previously active multicast service(s).\nNOTE 1:\tIn some cases, user interaction may be required and then the MS cannot activate the PDP and MBMS context(s) automatically.\nNOTE 2:\tThe MS does not respond to the paging except with the Attach Request. Hence timers T3313 and T3315 in the network are not used when paging with IMSI.\nNOTE 3:\tPaging without DRX parameters may require a considerable extension of the paging duration.\nNOTE 4:\tPaging without using eDRX parameters may result in the paging with IMSI not to be received by the MS for which eDRX has been negotiated or may require a considerable extension of the paging duration.\nThe network may initiate the paging procedure for non-GPRS services when the MS is IMSI attached for non-GPRS services.\nIn Iu mode, to initiate the procedure the GMM entity requests the lower layer to start paging (see 3GPP TS 25.331 [23c] and 3GPP TS 25.413 [19c]) for non-GPRS services.\nIn A/Gb mode, to initiate the procedure the GMM entity requests the RR sublayer to start paging (see 3GPP TS 44.018 [84] and 3GPP TS 44.060 [76] for non-GPRS services).\nThe MS identity used for paging shall be the allocated TMSI if acknowledged by the MS, otherwise the IMSI.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "4.7.10\tReceiving a GMM STATUS message by a GMM entity",
                            "text_content": "If the MS receives a GMM STATUS message no state transition and no specific action shall be taken as seen from the radio interface, i.e. local actions are possible. The actions to be taken on receiving a GMM STATUS message in the network are an implementation dependent option.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "4.7.11\tVoid",
                            "text_content": "",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "4.7.12\tGMM Information procedure",
                            "text_content": "The GMM information message support is optional in the network. The MM information procedure may be invoked by the network at any time during an established GMM context.\nThe GMM information procedure consists only of the GMM INFORMATION message sent from the network to the mobile station. During an established GMM context, the network may send none, one, or more GMM INFORMATION messages to the mobile station. If more than one GMM INFORMATION message is sent, the messages need not have the same content.\nWhen the mobile station (supporting the GMM information message) receives an GMM INFORMATION message, it shall accept the message and optionally use the contents to update appropriate information stored within the mobile station.\nIf the mobile station does not support the GMM information message the mobile station shall ignore the contents of the message and return an GMM STATUS message with cause #97.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "4.7.13\tService Request procedure (Iu mode only)",
                            "text_content": "The purpose of this procedure is to transfer the PMM mode from PMM-IDLE to PMM-CONNECTED mode, and/or to assign radio access bearer in case of PDP contexts are activated without radio access bearer assigned. In latter case, the PMM mode may be PMM-IDLE mode or may alternatively be the PMM-CONNECTED mode if the MS requires radio access bearer re-establishment. This procedure is used for;\n-\tthe initiation of CM layer service (e.g. SM or SMS) procedure from the MS in PMM-IDLE mode,\n-\tthe network to transfer down link signalling,\n-\tuplink (in PMM-IDLE or PMM CONNECTED) and downlink (only in PMM-IDLE) user data,\n-\tcounting the number of mobile stations in a cell which are interested in a specific MBMS service.\n-\trequesting the establishment of a point-to-point Radio Bearer for receiving a MBMS service.\nFor downlink transfer of signalling or user data in PMM-IDLE mode, the trigger is given from the network by the paging request procedure, which is out of scope of the present document.\nFor pending downlink user data in PMM-CONNECTED mode, the re-establishment of radio access bearers for all active PDP contexts is done without paging.\nFor counting the number of mobile stations in PMM-IDLE mode interested in a specific MBMS service, the trigger is given from the network by the MBMS notification procedure (see 3GPP TS 25.331 [23c]).\nFor establishing a point-to-point radio bearer to allow MBMS service, the trigger is given from the RRC determining this need from the MBMS control parameters broadcasted by the network (see 3GPP TS 25.331 [23c]).\nService type can take either of the following values; \"signalling\", \"data\", \"paging response\", \"MBMS multicast service reception\" or \"MBMS broadcast service reception\". Each of the values shall be selected according to the criteria to initiate the Service request procedure.\nIf the MS is triggered to send a Service Request message for both MBMS multicast service and MBMS broadcast service simultaneously, the MS shall include a Service Type indicating \"MBMS multicast service reception\".\nThe criteria to invoke the Service request procedure are when:\na)\tthe MS has any signalling messages except GMM messages (e.g. for SM or SMS) to be sent to the network in PMM-IDLE mode (i.e., no secure PS signalling connection has been established). In this case, the service type shall be set to \"signalling\".\nb)\tthe MS, either in PMM-IDLE or PMM-CONNECTED mode, has pending user data to be sent, no radio access bearer is established for the corresponding PDP context, and timer T3319 (see subclause 4.7.13.3) is not running or, optionally, if timer T3319 is running and the flag in the Uplink data status IE for this PDP context has not been set in the last Service Request. The procedure is initiated by an indication from the lower layers (see 3GPP TS 24.007 [20]). In this case, the service type shall be set to \"data\".\nc)\tthe MS receives a paging request using P-TMSI for PS domain from the network in PMM-IDLE mode. In this case, the service type shall be set to \"paging response\".\nd)\tthe MS is in PMM-IDLE mode or PMM-CONNECTED, receives an MBMS notification for an MBMS multicast service for which the MS has activated an MBMS context or for an MBMS broadcast service which has been selected for reception locally by upper layers in the MS, and is prompted by the contents of the notification to establish a PS signalling connection (see 3GPP TS 25.346 [110]). In this case, the service type shall be set to \"MBMS multicast service reception\" or \"MBMS broadcast service reception\", respectively.\ne)\tthe MS in PMM-IDLE mode or PMM-CONNECTED, determines from the broadcast MBMS control parameters that there is a need to establish a point-to-point Radio Bearer to enable MBMS reception (see 3GPP TS 25.346 [110]). In this case, the service type shall be set to \"MBMS multicast service reception\" or \"MBMS broadcast service reception\", respectively.\nIf one of the above criteria to invoke the Service request procedure is fulfilled, then the Service request procedure may only be initiated by the MS when the following conditions are fulfilled:\n-\tits GPRS update status is GU1 UPDATED and the stored RAI is equal to the RAI of the current serving cell; and\n-\tno GMM specific procedure is ongoing (see subclause 4.1.1.1).\nIf a GMM specific procedure is ongoing at the time a request from CM sublayer, the RRC or the RABM (see 3GPP TS 24.007 [20]) is received and the ATTACH REQUEST or ROUTING AREA UPDATE REQUEST message has been sent, then, depending on implementation, the MS shall abort the received request or delay it until the GMM specific procedure is completed. If the ATTACH REQUEST or ROUTING AREA UPDATE REQUEST message has not been sent, the MS may indicate \"follow-on request pending\" in the message (i.e. the MS wishes to prolong the established PS signalling connection after the GMM specific procedure). Then, the MS shall delay the Service request procedure until the GMM specific procedure is completed.\nIf the network indicates \"follow-on proceed\" in the ATTACH ACCEPT or ROUTING AREA UPDATE ACCEPT message and the MS has a service request pending, the MS shall react depending on the service type. If the service type is:\n-\t\"signalling\": the MS shall abort the Service request procedure and send the pending signalling messages immediately;\n-\t\"data\": the MS shall immediately perform the pending Service request procedure using the current PS signalling connection;\n-\t\"paging response\": the MS shall abort the Service request procedure. No further specific action is required from the MS.\nIf the network indicates \"follow-on proceed\" and the MS has no service request pending, then no specific action is required from the MS. As an implementation option, the MS may start timer T3340 as described in subclause 4.7.1.9 if no user plane radio access bearers are set up.\nIf the network indicates \"no follow-on proceed\" in the ATTACH ACCEPT or ROUTING AREA UPDATE ACCEPT message, the MS shall not initiate the pending Service request procedure until the current PS signalling connection is released.\nNOTE:\tThe \"follow-on proceed\" indication was not defined in earlier versions of the protocol. A network that is compliant with the earlier versions of the protocol will always encode the respective bit as zero, i.e. as \"follow-on proceed\", even if it does not prolong the PS signalling connection.\nAfter completion of a Service request procedure but before re-establishment of radio access bearer, if the PDP and MBMS context status information elements are included, then the network shall deactivate all those PDP and MBMS contexts locally (without peer to peer signalling between the MS and the network), which are not in SM state PDP-INACTIVE on network side but are indicated by the MS as being in state PDP-INACTIVE.\nAfter completion of a Service request procedure, the pending service is resumed and uses then the connection established by the procedure. If the service type is indicating \"data\", then the radio access bearers for all activated PDP contexts are re-established by the network, except for those activated PDP contexts having maximum bit rate value set to 0 kbit/s for both uplink and downlink and as an option those which have no pending user data. The re-establishment of radio access bearers for those PDP contexts is specified in subclause 6.1.3.3.\nA service request attempt counter is used to limit the number of service request attempts and no response from the network. The service request attempt counter shall be incremented as specified in subclause 4.7.13.5.\nThe service request attempt counter shall be reset when:\n-\tan attach or combined attach procedure is successfully completed;\n-\ta normal or periodic routing area updating or a combined routing area updating procedure is successfully completed;\n-\ta service request procedure is successfully completed ; or\n-\tthe UE moves to GMM-DEREGISTERED state.\nThe MS initiates the Service request procedure by sending a SERVICE REQUEST message. The timer T3317 shall be started after the SERVICE REQUEST message has been sent and state GMM-SERVICE-REQUEST-INITIATED is entered. The message SERVICE REQUEST shall contain the P-TMSI and the Service type shall indicate either \"data\", \"signalling\", \"paging response\", \"MBMS multicast service reception\" or \"MBMS broadcast service reception\". The MS shall not issue another Service request when the MS is in state GMM-SERVICE-REQUEST-INITIATED\nIf the PDP context status information element is included in the SERVICE REQUEST message, then the network shall deactivate all those PDP contexts locally (without peer to peer signalling between the MS and the network) which are not in SM state PDP-INACTIVE on the network side, but are indicated by the MS as being in state PDP-INACTIVE.\nIf the MBMS context status information element is included in the SERVICE REQUEST message, then the network shall deactivate all those MBMS contexts locally (without peer to peer signalling between the MS and network) which are not in SM state PDP-INACTIVE on the network side, but are indicated by the MS as being in state PDP-INACTIVE. If no MBMS context status information element is included, then the network shall deactivate all MBMS contexts locally which are not in SM state PDP-INACTIVE on the network side.\nFor a Service Request of type \"data\", the MS may include the Uplink data status information element in the SERVICE REQUEST message. The Uplink data status information indicates which preserved PDP contexts have pending uplink data to be sent. If the Uplink data status information element is included in the SERVICE REQUEST message with service type \"data\", the network may use this information to determine which of the RABs for the preserved PDP contexts to re-establish.\nThe network may initiate GMM common procedures, e.g. the GMM identification or the GMM authentication and ciphering procedure, depending on the received information such as GPRS ciphering key sequence number and P-TMSI.\nIf the SERVICE REQUEST message was sent in PMM-IDLE mode, the indication from the lower layers that the security mode control procedure is completed shall be treated as a successful completion of the procedure. The service request attempt counter shall be reset, timer T3317 shall be stopped, and the MS enters GMM-REGISTERED state and PMM-CONNECTED mode.\nIf the SERVICE REQUEST message was sent in PMM-CONNECTED mode, then the reception of the SERVICE ACCEPT message shall be treated as a successful completion of the procedure. The timer T3317 shall be stopped and the MS remains in PMM-CONNECTED mode.\nUpon reception of the SERVICE REQUEST message, if the EMM Combined UE Waiting Flag is 'true', the SGSN shall complete the procedure and perform a detach procedure for non-GPRS services only as described in subclause 4.7.4.2.\nIf the SERVICE REQUEST message was sent in a CSG cell and the CSG subscription has expired or was removed for a MS, but the MS has a PDN connection for emergency bearer services established, the network shall accept the SERVICE REQUEST message and deactivate all non-emergency PDP contexts by initiating PDP context deactivation procedure. The PDP contexts for emergency services shall not be deactivated.\nAt successful completion of a service request procedure with Service type \"data\", the MS shall start timer T3319. The timer T3319 shall be stopped when the MS returns to PMM-IDLE mode or when the network releases the radio access bearer of any active PDP context. The MS shall not issue another Service Request with service type \"data\" while timer T3319 is running unless the Service request is being generated from a PDP context for which the flag in the Uplink data status IE has not been set in the last Service Request.\nThe network may indicate a value for timer T3319 in the ATTACH ACCEPT or ROUTING AREA UPDATE ACCEPT messages. The last provided value of T3319 shall be used by the MS. If the information element T3319 value is not included in the ATTACH ACCEPT or ROUTING AREA UPDATE ACCEPT messages, the default value shall be used. If the T3319 value received by the MS contains an indication that the timer is deactivated or the timer value is zero, then the MS shall use the default value.\nIf the PDP context status information element is included in the Service Accept, then the MS shall deactivate locally (without peer to peer signalling between the MS and the network) all that PDP contexts which are not in SM state PDP-INACTIVE on MS side but are indicated by the Network as being in state PDP-INACTIVE. If there is a default PDP context among the PDP contexts to be deactivated, an MS supporting S1 mode shall locally deactivate all PDP contexts associated to the same PDP address and APN as the default PDP context without peer-to-peer SM signalling to the network; an MS not supporting S1 mode may apply the same behaviour.\nIf the MBMS context status information element is included in the SERVICE ACCEPT message, then the MS shall deactivate all those MBMS contexts locally (without peer to peer signalling between the MS and network) which are not in SM state PDP-INACTIVE in the MS, but are indicated by the network as being in state PDP-INACTIVE. If no MBMS context status information element is included, then the MS shall deactivate all those MBMS contexts locally which are not in SM state PDP-INACTIVE in the MS.\nIf a service request is received from an MS with a LIPA PDN connection, and if:\n-\ta L-GW Transport Layer Address is provided by the lower layer together with the service request, and the GGSN address associated with the PDP context of the LIPA PDN connection is different from the provided L-GW Transport Layer Address (see 3GPP TS 25.413 [19c]); or\n-\tno L-GW Transport Layer Address is provided together with the service request by the lower layer,\nthen the SGSN explicitly deactivates all PDP contexts associated with the LIPA PDN connection by initiating the PDP context deactivation procedure (see subclause 6.1.3.4.2).\nIf a service request is received from an MS with a SIPTO at the local network PDN connection, the following different cases can be distinguished:\n1)\tif the PDN connection is a SIPTO at the local network PDN connection with collocated L-GW and if:\n-\ta SIPTO L-GW Transport Layer Address is provided by the lower layer together with the service request, and the GGSN address associated with the PDP context of the SIPTO at the local network PDN connection is different from the provided SIPTO L-GW Transport Layer Address (see 3GPP TS 25.413 [19c]); or\n-\tno SIPTO L-GW Transport Layer Address is provided together with the service request by the lower layer,\n2)\tif the PDN connection is a SIPTO at the local network PDN connection with stand-alone GW and if:\n-\ta LHN-ID value is provided by the lower layer together with the service request, and the LHN-ID stored in the PDP context of the SIPTO at the local network PDN connection is different from the provided LHN-ID value (see 3GPP TS 25.413 [19c]); or\n-\tno LHN-ID value is provided together with the service request by the lower layer,\nthen the SGSN explicitly deactivates all PDP contexts associated with the SIPTO at the local network PDN connection by initiating the PDP context deactivation procedure (see subclause 6.1.3.4.2).\nIf the Service request cannot be accepted, the network returns a SERVICE REJECT message to the mobile station.\nBased on local policies or configurations in the network, if the network determines to change the periodic routing area update timer (T3312), or if the network determines to change the PSM usage or the value of the timer T3324 in the MS for which PSM is allowed by the network, the network may return a SERVICE REJECT with the cause #10 \"implicitly detached\" to the MS.\nIf the service request for mobile originated services is rejected due to general NAS level mobility management congestion control, the network shall set the GMM cause value to #22 \"congestion\" and assign a back-off timer T3346.\nAn MS that receives a SERVICE REJECT message containing a reject cause other than GMM cause value #25 or the message is integrity protected, shall reset the service request attempt counter, shall stop the timer T3317.\nIf the SERVICE REJECT message containing GMM cause value #25 was received without integrity protection, then the MS shall discard the message.\nThe MS shall then take different actions depending on the received reject cause value:\n# 3\t\t\t(Illegal MS); or\n# 6\t\t\t(Illegal ME);\n-\tThe MS shall set the GPRS update status to GU3 ROAMING NOT ALLOWED (and shall store it according to subclause 4.1.3.2), shall delete the list of equivalent PLMNs and enter the state GMM-DEREGISTERED.NO-IMSI. Furthermore, it shall delete any P-TMSI, P-TMSI signature, RAI and GPRS ciphering key sequence number and shall consider the SIM/USIM as invalid for GPRS services until switching off or the SIM/USIM is removed. If the message has been successfully integrity checked by the lower layers and the MS maintains a counter for \"SIM/USIM considered invalid for GPRS services\", then the MS shall set this counter to MS implementation-specific maximum value.\n-\tA GPRS MS operating in MS operation mode A or B shall in addition set the update status to U3 ROAMING NOT ALLOWED, shall delete any TMSI, LAI and ciphering key sequence number. If the MS is operating in MS operation mode A and an RR connection exists, the MS shall abort the RR connection, unless an emergency call is ongoing. The SIM/USIM shall be considered as invalid also for non-GPRS services until switching off or the SIM/USIM is removed or the timer T3245 expires as described in subclause 4.1.1.6. If the message has been successfully integrity checked by the lower layers and the MS maintains a counter for \"SIM/USIM considered invalid for non-GPRS services\", then the MS shall set this counter to MS implementation-specific maximum value.\nIf S1 mode is supported in the MS, the MS shall handle the EMM parameters EMM state, EPS update status, GUTI, last visited registered TAI, TAI list and KSI as specified in 3GPP TS 24.301 [120] for the case when the service request procedure is rejected with the EMM cause with the same value.\n# 7\t\t\t(GPRS services not allowed);\n-\tThe MS shall set the GPRS update status to GU3 ROAMING NOT ALLOWED (and shall store it according to subclause 4.1.3.2.9) and shall delete any P-TMSI, P-TMSI signature, RAI and GPRS ciphering key sequence number. The SIM/USIM shall be considered as invalid for GPRS services until switching off or the SIM/USIM is removed. The new state is GMM-DEREGISTERED. If the message has been successfully integrity checked by the lower layers and the MS maintains a counter for \"SIM/USIM considered invalid for GPRS services\", then the MS shall set this counter to MS implementation-specific maximum value.\nA GPRS MS operating in MS operation mode A or B which is already IMSI attached for CS services is still IMSI attached for CS services in the network.\nA GPRS MS operating in MS operation mode A or B in network operation mode I shall then proceed with the appropriate MM specific procedure.\nNOTE 1:\tOptionally the MS starts the timer T3340 as described in subclause 4.7.1.9.\nIf S1 mode is supported in the MS, the MS shall handle the EMM parameters EMM state, EPS update status, GUTI, last visited registered TAI, TAI list and KSI as specified in 3GPP TS 24.301 [120] for the case when the service request procedure is rejected with the EMM cause with the same value.\n# 8\t\t(GPRS services and non-GPRS services not allowed);\nThe MS shall set the GPRS update status to GU3 ROAMING NOT ALLOWED (and shall store it according to subclause .2) and shall delete any P-TMSI, P-TMSI signature, RAI and GPRS ciphering key sequence number. The new GMM state is GMM-DEREGISTERED.NO-IMSI.\nThe MS shall set the update status to U3 ROAMING NOT ALLOWED, shall delete any TMSI, LAI and ciphering key sequence number. The MS shall delete the list of equivalent PLMNs. If the MS is operating in MS operation mode A and an RR connection exists, the MS shall abort the RR connection, unless an emergency call is ongoing. The SIM/USIM shall be considered as invalid for GPRS and non-GPRS services until switching off or the SIM/USIM is removed. If the message has been successfully integrity checked by the lower layers and the MS maintains a counter for \"SIM/USIM considered invalid for GPRS services\", then the MS shall set this counter to MS implementation-specific maximum value. If the message has been successfully integrity checked by the lower layers and the MS maintains a counter for \"SIM/USIM considered invalid for non-GPRS services\", then the MS shall set this counter to MS implementation-specific maximum value.\nNOTE 2:\tOptionally the MS starts the timer T3340 as described in subclause 4.7.1.9.\nIf S1 mode is supported in the MS, the MS shall handle the EMM parameters EMM state, EPS update status, GUTI, last visited registered TAI, TAI list and KSI as specified in 3GPP TS 24.301 [120] for the case when the service request procedure is rejected with the EMM cause with the same value.\n# 9\t\t\t(MS identity cannot be derived by the network);\n-\tThe MS shall set the GPRS update status to GU2 NOT UPDATED (and shall store it according to subclause 4.1.3.2), enter the state GMM-DEREGISTERED.NORMAL-SERVICE, and shall delete any P-TMSI, P-TMSI signature, RAI and GPRS ciphering key sequence number. If the rejected request was not for initiating a PDN connection for emergency bearer services, the MS may subsequently, automatically initiate the GPRS attach procedure.\nIf S1 mode is supported in the MS, the MS shall handle the EMM parameters EMM state, EPS update status, GUTI, last visited registered TAI, TAI list and KSI as specified in 3GPP TS 24.301 [120] for the case when the service request procedure is rejected with the EMM cause with the same value.\n# 10\t(Implicitly detached);\n-\tA GPRS MS operating in MS operation mode B in network operation mode I is IMSI detached for both GPRS and CS services.\nA GPRS MS operating in MS operation mode A in network operation mode I is detached for GPRS services. If no RR connection exists then the MS is also IMSI detached for the CS services.\n-\tThe MS shall change to state GMM-DEREGISTERED.NORMAL-SERVICE. If the rejected request was not for initiating a PDN connection for emergency bearer services, the MS shall then perform a new attach procedure. The MS should also activate PDP context(s) that were originally activated by the MS to replace any previously MS activated PDP context(s). The MS should also perform the procedures needed in order to activate any previously active multicast service(s).\nIf S1 mode is supported in the MS, the MS shall handle the EMM state as specified in 3GPP TS 24.301 [120] for the case when the service request procedure is rejected with the EMM cause with the same value.\nNOTE 3:\tIn some cases, user interaction may be required and then the MS cannot activate the PDP and MBMS context(s) automatically.\n# 11\t(PLMN not allowed);\n-\tThe MS shall delete any RAI, P-TMSI, P-TMSI signature and GPRS ciphering key sequence number, shall set the GPRS update status to GU3 ROAMING NOT ALLOWED (and shall store it according to subclause 4.1.3.2) and enter the state GMM-DEREGISTERED. The MS shall delete the list of equivalent PLMNs.\n-\tThe MS shall store the PLMN identity in the \"forbidden PLMN list\" and if the MS is configured to use timer T3245 (see 3GPP TS 24.368 [135] or 3GPP TS 31.102 [112]) then the MS shall start timer T3245 and proceed as described in subclause 4.1.1.6. If the message has been successfully integrity checked by the lower layers and the MS maintains a PLMN-specific attempt counter for that PLMN, then the MS shall set this counter to the MS implementation-specific maximum value.\nThe MS shall start timer T3340 as described in subclause 4.7.1.9.\n-\tIf no RR connection exists, the MS shall perform the following additional actions immediately. If the MS is operating in MS operation mode A and an RR connection exists, the MS shall perform these actions when the RR connection is subsequently released:\n-\tA GPRS MS operating in MS operation mode A shall set the update status to U3 ROAMING NOT ALLOWED and shall delete any TMSI, LAI and ciphering key sequence number. The new MM state is MM IDLE.\n-\tThe MS shall perform a PLMN selection according to 3GPP TS 23.122 [14].\nAn MS in GAN mode shall request a PLMN list in GAN (see 3GPP TS 44.318 [76b]) prior to perform a PLMN selection from this list according to 3GPP TS 23.122 [14].\nIf S1 mode is supported in the MS, the MS shall handle the EMM parameters EMM state, EPS update status, GUTI, last visited registered TAI, TAI list and KSI as specified in 3GPP TS 24.301 [120] for the case when the service request procedure is rejected with the EMM cause with the same value.\n# 12\t(Location area not allowed);\n-\tThe MS shall delete any RAI, P-TMSI, P-TMSI signature and GPRS ciphering key sequence number, shall set the GPRS update status to GU3 ROAMING NOT ALLOWED (and shall store it according to subclause 4.1.3.2) and shall change to state GMM-DEREGISTERED.LIMITED-SERVICE.\n-\tThe mobile station shall store the LAI in the list of \"forbidden location areas for regional provision of service\".\nThe MS shall start timer T3340 as described in subclause 4.7.1.9.\n-\tIf no RR connection exists, the MS shall perform the following additional actions immediately. If the MS is operating in MS operation mode A and an RR connection exists, the MS shall perform these actions when the RR connection is subsequently released:\n-\tIf the MS is IMSI attached, the MS shall set the update status to U3 ROAMING NOT ALLOWED, shall delete any TMSI, LAI and ciphering key sequence number and shall reset the location update attempt counter. The new MM state is MM IDLE.\n-\tThe MS shall perform a cell selection according to 3GPP TS 43.022 [82] and 3GPP TS 25.304 [98].\nNOTE 4:\tThe cell selection procedure is not applicable for an MS in GAN mode.\nIf S1 mode is supported in the MS, the MS shall handle the EMM parameters EMM state, EPS update status, GUTI, last visited registered TAI, TAI list and KSI as specified in 3GPP TS 24.301 [120] for the case when the service request procedure is rejected with the EMM cause with the same value.\n# 13\t(Roaming not allowed in this location area);\n-\tThe MS shall set the GPRS update status to GU3 ROAMING NOT ALLOWED (and shall store it according to subclause 4.1.3.2) and shall change to state GMM-REGISTERED.LIMITED-SERVICE.\n-\tThe MS shall store the LAI in the list of \"forbidden location areas for roaming\".\nThe MS shall start timer T3340 as described in subclause 4.7.1.9.\n-\tIf no RR connection exists, the MS shall perform the following additional actions immediately. If the MS is operating in MS operation mode A and an RR connection exists, the MS shall perform these actions when the RR connection is subsequently released:\n-\tIf the MS is IMSI attached, the MS shall set the update status to U3 ROAMING NOT ALLOWED and shall reset the location update attempt counter. The new MM state is MM IDLE.\n-\tThe MS shall perform a PLMN selection according to 3GPP TS 23.122 [14].\nAn MS in GAN mode shall request a PLMN list in GAN (see 3GPP TS 44.318 [76b]) prior to perform a PLMN selection from this list according to 3GPP TS 23.122 [14].\nIf S1 mode is supported in the MS, the MS shall handle the EMM parameters EMM state and EPS update status as specified in 3GPP TS 24.301 [120] for the case when the service request procedure is rejected with the EMM cause with the same value.\n# 15\t(No Suitable Cells In Location Area);\n-\tThe MS shall set the GPRS update status to GU3 ROAMING NOT ALLOWED (and shall store it according to subclause 4.1.3.2) and shall change to state GMM-REGISTERED.LIMITED-SERVICE.\n-\tThe MS shall store the LAI in the list of \"forbidden location areas for roaming\".\nThe MS shall start timer T3340 as described in subclause 4.7.1.9.\n-\tIf no RR connection exists, the MS shall perform the following additional actions immediately. If the MS is operating in MS operation mode A and an RR connection exists, the MS shall perform these actions when the RR connection is subsequently released:\n-\tIf the MS is IMSI attached, the MS shall set the update status to U3 ROAMING NOT ALLOWED and shall reset the location update attempt counter. The new MM state is MM IDLE.\n-\tThe MS shall search for a suitable cell in another location area or a tracking area according to 3GPP TS 43.022 [82] and 3GPP TS 25.304 [98] or 3GPP TS 36.304 [121].\nNOTE 5:\tThe cell selection procedure is not applicable for an MS in GAN mode.\nIf S1 mode is supported in the MS, the MS shall handle the EMM parameters EMM state and EPS update status as specified in 3GPP TS 24.301 [120] for the case when the service request procedure is rejected with the EMM cause with the same value.\n#22\t(Congestion);\nIf the T3346 value IE is present in the SERVICE REJECT message and the value indicates that this timer is neither zero nor deactivated, the MS shall proceed as described below, otherwise it shall be considered as an abnormal case and the behaviour of the MS for this case is specified in subclause 4.7.13.5.\nIf the rejected request was not for initiating a PDN connection for emergency bearer services, the MS shall abort the service request procedure and enter state GMM-REGISTERED, and stop timer T3317 if still running.\nThe MS shall stop timer T3346 if it is running.\nIf the SERVICE REJECT message is integrity protected, the MS shall start timer T3346 with the value provided in the T3346 value IE.\nIf the SERVICE REJECT message is not integrity protected, the MS shall start timer T3346 with a random value from the default range specified in table 11.3a.\nThe MS stays in the current serving cell and applies normal cell reselection process. The service request procedure may be started by CM layer, if it is still necessary, when timer T3346 expires or is stopped.\nA GPRS MS operating in MS operation mode A or B which is already IMSI attached for CS services in the network is still IMSI attached for CS services in the network.\nIf S1 mode is supported in the MS, the MS shall handle the EMM parameters EMM state and EPS update status as specified in 3GPP TS 24.301 [120] for the case when the service request procedure is rejected with the EMM cause with the same value.\n# 25\t(Not authorized for this CSG)\n-\tCause #25 is only applicable in UTRAN Iu mode and when received from a CSG cell. Other cases are considered as abnormal cases and the specification of the mobile station behaviour is given in subclause 4.7.13.5.\n-\tThe MS shall set the GPRS update status to GU3 ROAMING NOT ALLOWED (and shall store it according to subclause 4.1.3.2) and shall change to state GMM-REGISTERED.LIMITED-SERVICE.\n-\tIf the CSG ID and associated PLMN identity of the cell where the MS has sent the SERVICE REQUEST message are contained in the Allowed CSG list stored in the MS, the MS shall remove the entry corresponding to this CSG ID and associated PLMN identity from the Allowed CSG list.\n-\tIf the CSG ID and associated PLMN identity of the cell where the MS has sent the SERVICE REQUEST message are contained in the Operator CSG list, the MS shall proceed as specified in 3GPP TS 23.122 [14] subclause 3.1A.\nThe MS shall start timer T3340 as described in subclause 4.7.1.9.\nIf the MS is IMSI attached for non-GPRS services, the MS shall set the update status to U3 ROAMING NOT ALLOWED and shall reset the location update attempt counter. The new MM state is MM IDLE.\n-\tThe MS shall search for a suitable cell according to 3GPP TS 43.022 [82] and 3GPP TS 25.304 [98].\n-\tIf S1 mode is supported in the MS, the MS shall handle the EMM parameters EMM state and EPS update status as specified in 3GPP TS 24.301 [120] for the case when the service request procedure is rejected with the EMM cause with the same value.\n# 40\t(No PDP context activated)\n-\tThe MS shall deactivate locally all active PDP and MBMS contexts and the MS shall enter the state GMM-REGISTERED.NORMAL-SERVICE. If the rejected request was not for initiating a PDN connection for emergency bearer services, the MS may also activate PDP context(s) that were originally activated by the MS to replace any previously MS activated PDP context(s). The MS may also perform the procedures needed in order to activate any previously active multicast service(s).\nNOTE 6:\tIn some cases, user interaction may be required and then the MS cannot activate the PDP and MBMS context(s) automatically.\nOther values are considered as abnormal cases. The specification of the MS behaviour in those cases is described in subclause 4.7.13.5.\nIf the service request for initiating a PDN connection for emergency bearer services cannot be accepted by the network, the MS shall perform the procedures as described in subclause 4.7.13.4. Then if the MS is in the same selected PLMN where the last service request was attempted, the MS shall:\na)\tinform the upper layers of the failure of the procedure; or\nNOTE 1:\tThis can result in the upper layers requesting establishment of a CS emergency call (if not already attempted in the CS domain) or other implementation specific mechanisms, e.g. procedures specified in 3GPP TS 24.229 [95] that can result in the emergency call being attempted to another IP-CAN.\nb)\tdetach locally, if not detached already, attempt GPRS attach for emergency bearer services.\nIf the service request for initiating a PDN connection for emergency bearer services fails due to abnormal case a) in subclause 4.7.13.5, the MS shall perform the procedures as described in subclause 4.7.13.5 and inform the upper layers of the failure to access the network.\nNOTE 2:\tThis can result in the upper layers establishment of a CS emergency call (if not already attempted in the CS domain) or other implementation specific mechanisms, e.g. procedures specified in 3GPP TS 24.229 [95] that can result in the emergency call being attempted to another IP-CAN.\nIf the service request for initiating a PDN connection for emergency bearer services fails due to abnormal cases b), c) or d) in subclause 4.7.13.5, the MS shall perform the procedures as described in subclause 4.7.13.5. Then if the MS is in the same selected PLMN where the last service request was attempted, the MS shall:\na)\tinform the upper layers of the failure of the procedure; or\nNOTE 3:\tThis can result in the upper layers establishment of a CS emergency call (if not already attempted in the CS domain) or other implementation specific mechanisms, e.g. procedures specified in 3GPP TS 24.229 [95] that can result in the emergency call being attempted to another IP-CAN.\nb)\tdetach locally, if not detached already, attempt GPRS attach for emergency bearer services.\nThe following abnormal cases can be identified:\na)\tAccess barred because of access class control, EAB or ACDC\nIf the service request procedure is started in response to a paging request from the network, access class barring, EAB or ACDC is not applicable.\nThe service request procedure shall not be started. The MS stays in the current serving cell and applies normal cell reselection process. The service request procedure may be started by CM layer if it is still necessary, i.e. when access is granted or because of a cell change.\nIf access is barred because of access class control, the service request is initiated due to a request from upper layers for PS signalling connection, ACDC is applicable to the request and the MS supports ACDC, then the service request procedure shall be started.\nIf access is barred for a certain ACDC category, and if the service request is initiated due to a request from upper layers for PS signalling connection for a higher ACDC category and the MS supports ACDC, then the service request procedure shall be started.\nIf an access request for an uncategorized application is barred due to ACDC , and if the service request is initiated due to a request from upper layers for PS signalling connection for a certain ACDC category and the MS supports ACDC, then the service request procedure shall be started.\nb)\tLower layer failure without \"Extended Wait Time\" received from lower layers before the security mode control procedure is completed, SERVICE ACCEPT or SERVICE REJECT message is received\nThe procedure shall be aborted except in the following implementation option cases b.1, b.2 and b.3.\nb.1)\tRelease of PS signalling connection in Iu mode (i.e. RRC connection release) before the completion of the service request procedure\nThe service request procedure shall be initiated again, if the following conditions apply:\ni)\tThe original service request procedure was initiated over an existing PS signalling connection; and\nii)\tNo SECURITY MODE COMMAND message and no Non-Access Stratum (NAS) messages relating to the PS signalling connection were received after the SERVICE REQUEST message was transmitted.\nb.2)\tRR release in Iu mode (i.e. RRC connection release) with cause different than \"Directed signalling connection re-establishment\", for example, \"Normal\", or \"User inactivity\" (see 3GPP TS 25.331 [23c] and 3GPP TS 44.118 [111])\nThe service request procedure shall be initiated again, if the following conditions apply:\ni)\tThe original service request procedure was initiated over an existing RRC connection and,\nii)\tNo SECURITY MODE COMMAND message and no Non-Access Stratum (NAS) messages relating to the PS signalling connection were received after the SERVICE REQUEST messge was transmitted.\nNOTE:\tThe RRC connection release cause different than \"Directed signalling connection re-establishment\" that triggers the re-initiation of the service request procedure is implementation specific.\nb.3)\tRR release in Iu mode (i.e. RRC connection release) with cause \"Directed signalling connection re-establishment\" (see 3GPP TS 25.331 [23c] and 3GPP TS 44.118 [111])\nThe routing area updating procedure shall be initiated followed by a rerun of the service request procedure if the following condition applies:\ni)\tThe service request procedure was not due to a rerun of the procedure due to \"Directed signalling connection re-establishment\".\nc)\tT3317 expired\nThe MS shall enter GMM-REGISTERED state.\nIf the MS is in PMM-IDLE mode then the MS shall increment the service request attempt counter, abort the procedure and release locally any resources allocated for the service request procedure. If the service request procedure is initiated to establish a PDN connection for emergency bearer services or the MS has a PDN connection for emergency bearer services established or the MS is an MS configured to use AC11 – 15 in selected PLMN, the service request counter shall not be incremented. If the service request attempt counter is greater than or equal to 5, the MS shall start timer T3325. The MS shall not attempt service request until expiry of timer T3325 unless:\n-\tthe service request is in response to paging from the network;\n-\tthe MS is an MS configured to use AC11 – 15 in selected PLMN;\n-\tthe service request is initiated to establish a PDN connection for emergency bearer services;\n-\tthe MS has a PDN connection for emergency bearer services established; or\n-\tthe MS is registered in a new PLMN.\nIf the MS is in PMM-CONNECTED mode, then the procedure shall be aborted.\nd)\tSERVICE REJECT received, other causes than those treated in subclause 4.7.13.4, and cases of GMM cause values #22 and #25, if considered as abnormal cases according to subclause 4.7.13.4\nThe procedure shall be aborted.\ne)\tRouting area update procedure is triggered\nIf a cell change into a new routing area occurs and the necessity of routing area update procedure is determined before the security mode control procedure is completed, a SERVICE ACCEPT or SERVICE REJECT message has been received, the Service request procedure shall be aborted and the routing area updating procedure is started immediately. Follow-on request pending may be indicated in the ROUTING AREA UPDATE REQUEST for the service, which was the trigger of the aborted Service request procedure, to restart the pending service itself or the Service request procedure after the completion of the routing area updating procedure. If the Service type of the aborted SERVICE REQUEST was indicating \"data\", then the routing area update procedure may be followed by a re-initiated Service request procedure indicating \"data\", if it is still necessary. If the Service type was indicating \"MBMS multicast service reception\", or \"MBMS broadcast service reception\" the Service request procedure shall be aborted.\nf)\tPower off\nIf the MS is in state GMM-SERVICE-REQUEST-INITIATED at power off, the GPRS detach procedure shall be performed.\ng)\tDetach procedure collision\nGPRS detach containing detach type \"re-attach required\" or \"re-attach not required\":\nIf the MS receives a DETACH REQUEST message from the network in state GMM-SERVICE-REQUEST-INITIATED, the GPRS detach procedure shall be progressed and the Service request procedure shall be aborted. If the GMM cause IE, in the DETACH REQUEST message, indicated a \"re-attach required\", the GPRS attach procedure shall be performed. If the DETACH REQUEST message contains detach type \"re-attach not required\" and GMM cause #2 \"IMSI unknown in HLR\", the MS will follow the procedure as described below for the detach type \"IMSI detach\".\nGPRS detach containing detach type \"IMSI detach\":\nIf the MS receives a DETACH REQUEST message from the network in state GMM-SERVICE-REQUEST-INITIATED, the network and the MS shall progress both procedures.\nh)\t\"Extended wait time\" for PS domain from the lower layers\nThe MS shall abort the service request procedure, enter state GMM-REGISTERED, and stop timer T3317 if still running.\nIf the SERVICE REQUEST message contained the low priority indicator set to \"MS is configured for NAS signalling low priority\", the MS shall start timer T3346 with the \"Extended wait time\" value.\nIn other cases the MS shall ignore the \"Extended wait time\".\nThe MS stays in the current serving cell and applies normal cell reselection process. The service request procedure is started, if still necessary, when timer T3346 expires or is stopped.\nm)\tTimer T3346 is running\nThe MS shall not start the service request procedure unless:\n-\tthe MS receives a paging; or\n-\tthe MS is an MS configured to use AC11 – 15 in selected PLMN; or\n-\tthe MS has a PDN connection for emergency bearer services established; or\n-\tthe MS is establishing a PDN connection for emergency bearer services; or\n-\tthe MS has a PDN connection established without the NAS signalling low priority indication or is establishing a PDN connection without the NAS signalling low priority indication, the timer T3302 and the timer T3311 are not running and the timer T3346 was started due to rejection of a NAS request message (e.g. ATTACH REQUEST, ROUTING AREA UPDATE REQUEST or SERVICE REQUEST) which contained the low priority indicator set to \"MS is configured for NAS signalling low priority\".\nThe MS stays in the current serving cell and applies normal cell reselection process. The service request procedure is started, if still necessary, when timer T3346 expires or is stopped.\nThe following abnormal cases can be identified:\na)\tLower layer failure\nIf a low layer failure occurs before the security mode control procedure is completed, a SERVICE ACCEPT or SERVICE REJECT message has been sent to the MS, the network enters/stays in PMM-IDLE.\nb)\tProtocol error\nIf the SERVICE REQUEST message is received with a protocol error, the network shall return a SERVICE REJECT message with one of the following reject causes:\n#96:\tMandatory information element error;\n#99:\tInformation element non-existent or not implemented;\n#100:\tConditional IE error;\n#111:\tProtocol error, unspecified.\nThe network stays in PMM-IDLE mode.\nc)\tMore than one SERVICE REQUEST received and the procedure has not been completed (i.e., the security mode control procedure has not been completed or SERVICE ACCEPT, SERVICE REJECT message has not been sent)\n-\tIf one or more of the information elements in the SERVICE REQUEST message differs from the ones received within the previous SERVICE REQUEST message, the previously initiated Service request procedure shall be aborted and the new Service request procedure shall be progressed;\n-\tIf the information elements do not differ, then the network shall continue with the previous Service request procedure and shall not treat any further this SERVICE REQUEST message.\nd)\tATTACH REQUEST received before the security mode control procedure has been completed or an SERVICE ACCEPT or an SERVICE REJECT message has been sent\nIf an ATTACH REQUEST message is received and the security mode control procedure has not been completed or an SERVICE ACCEPT or an SERVICE REJECT message has not been sent, the network may initiate the GMM common procedures, e.g. the GMM authentication and ciphering procedure. The network may e.g. after a succesful GMM authentication and ciphering procedure execution, abort the Service request procedure, the GMM context, PDP contexts and MBMS contexts, if any, are deleted and the new ATTACH REQUEST is progressed.\ne)\tROUTING AREA UPDATE REQUEST message received before the security mode control procedure has been completed or an SERVICE ACCEPT or an SERVICE REJECT message has been sent\nIf an ROUTING AREA UPDATE REQUEST message is received and the security mode control procedure has not been completed or an SERVICE ACCEPT or an SERVICE REJECT message has not been sent, the network may initiate the GMM common procedures, e.g. the GMM authentication and ciphering procedure. The network may e.g. after a successful GMM authentication and ciphering procedure execution, abort the Service request procedure and progress the routing area update procedure.\nf)\tIf the Service Type indicates 'data’ and the network fails to re-establish some or all RAB(s) then the SGSN may determine if PDP Context Modification or PDP Context Deactivation should be initiated.\nThe appropriate action is an operator choice and depends on the QoS profile of the PDP Context, and the Uplink data status.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "4.7.14\tVoid",
                            "text_content": "",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "4.7.15\tGMM eCall inactivity procedure",
                            "text_content": "The GMM eCall inactivity procedure is applicable only to an eCall only mobile station (as determined by information configured in USIM) that is capable of eCall over IMS and attached for GPRS services. The procedure shall be started when:\n-\tthe mobile station is in PMM-IDLE mode (Iu mode) or packet idle mode;\n-\tthe mobile station is in MM IDLE state;\n-\tthe mobile station is in any GMM-REGISTERED substate except GMM-REGISTERED.NO-CELL-AVAILABLE or GMM-REGISTERED.PLMN-SEARCH; and\n-\tone of the following conditions applies:\n-\ttimer T3242 expires or is found to have already expired and timer T3243 is not running;\n-\ttimer T3243 expires or is found to have already expired and timer T3242 is not running; or\n-\ttimers T3242 and T3243 expire or have found to have already expired.\nThe mobile station shall then stop other running timers (e.g. T3311, T3312) and shall:\n-\tif the mobile station is also attached for non-GPRS services and the network operates in network operation mode I, perform a combined GPRS detach procedure for GPRS and non-GPRS services;\n-\tif the mobile station is also attached for non-GPRS services and the network operates in network operation mode II, perform a GPRS detach procedure for GPRS services and an IMSI detach procedure; and\n-\tif the mobile station is not attached for non-GPRS services, perform a GPRS detach procedure for GPRS services.\nThe mobile station shall then enter MM Idle eCALL INACTIVE state, delete any LAI, TMSI, ciphering key sequence number stored in the SIM/USIM, delete any RAI, P-TMSI, P-TMSI signature and GPRS ciphering key sequence number stored, delete any GUTI, TAI list, last visited registered TAI, list of equivalent PLMNs, KSI and set the update state to U4 Updating Disabled.\nWhile in eCALL INACTIVE state, the mobile station shall behave as specified in subclause 4.4.7.\n",
                            "figures_meta_data": [],
                            "tables": []
                        }
                    ]
                }
            ]
        },
        {
            "title": "5\tElementary procedures for circuit-switched Call Control",
            "description": "",
            "summary": "",
            "tables": [],
            "figures_meta_data": [],
            "subsections": [
                {
                    "title": "5.1\tOverview",
                    "description": "",
                    "summary": "",
                    "text_content": "",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": [
                        {
                            "title": "5.1.1\tGeneral",
                            "text_content": "This subclause describes the call control (CC) protocol, which is one of the protocols of the Connection Management (CM) sublayer (see 3GPP TS 24.007 [20]).\nEvery mobile station must support the call control protocol. If a mobile station does not support any bearer capability at all then it shall respond to a SETUP message with a RELEASE COMPLETE message as specified in subclause 5.2.2.2.\nIn Iu mode only, integrity protected signalling (see subclause 4.1.1.1.1 of the present document and in general, see 3GPP TS 33.102 [5a]) is mandatory. In Iu mode only, all protocols shall use integrity protected signalling. Integrity protection of all CC signalling messages is the responsibility of lower layers. It is the network which activates integrity protection. This is done using the security mode control procedure (3GPP TS 25.331 [23c] and 3GPP TS 44.118 [111]).\nIn the call control protocol, more than one CC entity are defined. Each CC entity is independent from each other and shall communicate with the correspondent peer entity using its own MM connection. Different CC entities use different transaction identifiers.\nWith a few exceptions the present document describes the call control protocol only with regard to two peer entities. The call control entities are described as communicating finite state machines which exchange messages across the radio interface and communicate internally with other protocol (sub)layers. This description is only normative as far as the consequential externally observable behaviour is concerned.\nCertain sequences of actions of the two peer entities compose \"elementary procedures\" which are used as a basis for the description in this subclause. These elementary procedures may be grouped into the following classes:\n-\tcall establishment procedures;\n-\tcall clearing procedures;\n-\tcall information phase procedures;\n-\tmiscellaneous procedures.\nThe terms \"mobile originating\" or \"mobile originated\" (MO) are used to describe a call initiated by the mobile station. The terms \"mobile terminating\" or \"mobile terminated\" (MT) are used to describe a call initiated by the network.\nFigure 5.1a/3GPP TS 24.008 gives an overview of the main states and transitions on the mobile station side.\nThe MS side extension figure 5.1a.1/3GPP TS 24.008 shows how for the Network Initiated MO call the MS reaches state U1.0 from state U0 $(CCBS)$.\nFigure 5.1a.2/3GPP TS 24.008 illustrates the additional state transitions possible in the MS due to SRVCC handovers from PS to CS or 5G-SRVCC handover from NG-RAN to UTRAN.\nFigure 5.1a.3/3GPP TS 24.008 illustrates the additional state transitions possible in the MS due to SRVCC handovers from CS to PS.\nFigure 5.1b/3GPP TS 24.008 gives an overview of the main states and transitions on the network side.\nThe Network side extension figure 5.1b.1/3GPP TS 24.008 shows for Network Initiated MO Calls the Network reaches state N1.0 from state N0 $(CCBS)$.Figure 5.1b.2/3GPP TS 24.008 illustrates the additional state transitions possible in the network due to SRVCC handovers from PS to CS or 5G-SRVCC handover from NG-RAN to UTRAN.\nFigure 5.1b.3/3GPP TS 24.008 illustrates the additional state transitions possible in the network due to SRVCC handovers from CS to PS.\n\nFigure 5.1a/3GPP TS 24.008: Overview call control protocol/MS side depicts the call control protocol (CCP) and the Multilevel Service (MS) side of the 3GPP TS 24.008 standard. The figure illustrates the CCP, which is responsible for managing the call control process, and the MS side, which is responsible for managing the Multilevel Service (MS) functions. The diagram includes various components such as the call control protocol (CCP), the Multilevel Service (MS) side, and the call control interface (CCI). The figure also includes a call control protocol (CCP) flow diagram, a Multilevel Service (MS) flow diagram, and a call control interface (CCI) flow diagram.\nFigure 5.1a/3GPP TS 24.008: Overview call control protocol/MS side\n\n\n\nFigure 5.1a.1/3GPP TS 24.008: Overview call control protocol/MS side, extension\n\nThe figure depicts a simplified overview of the call control protocol (CCP) and the Multi-Service Voice Control Channel (MS-SRVCC) in 3GPP TS 24.008, which is a key component of the 5G-SRVCC handover from the Next Generation RAN (NG-RAN) to the Universal Terrestrial Radio Access Network (UTRAN). The figure illustrates the flow of control messages between the CCP and MS-SRVCC, as well as the signaling between the CCP and the RAN. The figure also includes a diagram of the call control protocol, which is a key part of the 5G-SRVCC handover process.\nFigure 5.1a.2/3GPP TS 24.008: Overview call control protocol/MS side, extension for SRVCC from PS to CS or 5G-SRVCC handover from NG-RAN to UTRAN\nThe figure depicts a simplified overview of the call control protocol (CCP) and the Service Request for Voice Control (SRVCC) in the 3GPP TS 24.008 standard. It illustrates the transition from the Call Control Protocol (CCP) to the Service Request for Voice Control (SRVCC) in the context of a call control session. The figure includes a diagram of the call control protocol, the Service Request for Voice Control (SRVCC), and the call control session. The diagram shows the flow of calls from the call control session to the Service Request for Voice Control (SRVCC) and the call control session. The figure also includes a diagram of the call control protocol, the Service Request for Voice Control (SRVCC), and the call control session. The figure also includes a diagram of the call control protocol, the Service Request for Voice Control (SRVCC), and the call control session. The figure also includes a diagram of the call control protocol, the Service Request for Voice Control (SRVCC), and the call control session. The figure also includes a diagram of the call control protocol, the Service Request for Voice Control (SRVCC), and the call control session. The figure also includes a\nFigure 5.1a.3/3GPP TS 24.008: Overview call control protocol/MS side, extension for SRVCC from CS to PS\n\n\nFigure 5.1b/3GPP TS 24.008 Overview call control protocol/Network side depicts the call control protocol and network side of the 3GPP TS 24.008 standard. It illustrates the call control process, including call setup, call control, and call termination. The diagram includes call setup, call control, and call termination elements, as well as call control messages and signaling. The network side of the diagram shows the network interface, signaling, and call control elements.\nFigure 5.1b/3GPP TS 24.008 Overview call control protocol/Network side\n\nThe figure depicts a simplified overview of the call control protocol and Network side of the 3GPP TS 24.008 standard, focusing on the call control protocol and network side. It includes a diagram of the call control protocol, which is a crucial component of the network, and a network side diagram, which shows the network side of the call control protocol. The figure also includes a section labeled \"Network side, extension,\" which provides a detailed view of the network side of the call control protocol.\nFigure 5.1b.1/3GPP TS 24.008 Overview call control protocol/Network side, extension\n\nThe figure depicts a detailed overview of the call control protocol and network side of the 3GPP TS 24.008 standard, specifically focusing on the transition from PS to CS and the extension of SRVCC from PS to CS or 5G-SRVCC handover from NG-RAN to UTRAN. The figure provides a comprehensive view of the network architecture, including the role of the call control protocol, network side, and extension of SRVCC.\nFigure 5.1b.2/3GPP TS 24.008: Overview call control protocol/Network side, extension for SRVCC from PS to CS or 5G-SRVCC handover from NG-RAN to UTRAN\nThe figure depicts a detailed overview of the call control protocol (CCP) and Network Side, specifically focusing on the extension for the Service Request to Call Control (SRVCC) from the Call Control Service (CCS) to the Public Switching Center (PS). This protocol is crucial for managing call control and signaling in the 3GPP TS 24.008 standard. The figure provides a comprehensive view of the network side, including the call control protocol, the Service Request to Call Control (SRVCC), and the Public Switching Center (PS). It highlights the importance of this protocol in ensuring efficient and reliable call control in the 3GPP TS 24.008 standard.\nFigure 5.1b.3/3GPP TS 24.008: Overview call control protocol/Network side, extension for SRVCC from CS to PS\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "5.1.2\tCall Control States",
                            "text_content": "The states which may exist on the mobile station side of the radio interface are defined in this subclause.\nNOTE:\tStates U0.1, U0.2, U0.3, U0.4, U0.5, U0.6, U26, and U27 are 3GPP specific. All other states are ITU-T defined.\nNo call exists.\nThis state exists for a mobile originating call, when the mobile station requests the establishment of a MM connection.\nThis state exists for a mobile originating call when the network has prompted the mobile station to establish a CC connection but the mobile station has not yet responded.\nNOTE:\tThis state is transient.\nThis state exists for a mobile originating call when the mobile station has responded to the prompt from the network to establish a CC connection and the mobile station is waiting for further information from the network.\nThis state exists for a mobile originating call when the mobile station has received a CC-establishment request but has not yet responded.\nNOTE:\tThis state is transient.\nThis state exists for a mobile originating call when the mobile station has sent the acknowledgement that the mobile station has received all the CC information that is needed.\nThis state exists for a mobile originating call when the mobile station has received a recall request but has not yet responded.\nNOTE:\tThis state is transient.\nThis state exists for a mobile originating call, when the MS requests call establishment from the network.\nThis state exists for a mobile originating call when the mobile station has received acknowledgement that the network has received all call information necessary to effect call establishment.\nThis state exists for a mobile originating call, when the calling mobile station has received an indication that remote user alerting has been initiated.\nThis state exists for a mobile terminating call when the mobile station has received a call establishment request but has not yet responded.\nThis state exists for a mobile terminating call when the mobile station has indicated alerting but has not yet answered.\nThis state exists for a mobile terminating call, when the mobile station has answered the call and is waiting to be awarded the call.\nThis state exists for a mobile terminating call when the mobile station has sent acknowledgement that the mobile station has received all call information necessary to effect call establishment.\nThis state exists for a mobile terminating call when the MS has answered the call. This state exists for a mobile originating call when the MS has received an indication that the remote user has answered the call.\nThis state exists when the mobile station has requested the network to clear the end-to-end connection (if any) and is waiting for a response.\nThis state exists when the mobile station has received an invitation to disconnect because the network has disconnected the end-to-end connection (if any).\nThis state exists when the MS has requested the network to release and is waiting for a response.\nThis state exists when the mobile station has sent a request to the network for a new mode but has not yet received an answer.\nThis state exists when the mobile station has received a request from the network for a new mode and has not yet sent a response to this request.\nNOTE:\tStates N0.1, N0.2, N0.3, N0.4, N0.5, N0.6, N26, N27, N28, N3a, N4,a, N7a, and N9a are 3GPP specific. All other states are ITU-T defined.\nThe call states that may exist on the network side of the radio interface are defined in this subclause.\nNo call exists.\nThis state exists for a mobile terminating call, when the network requests the establishment of a MM connection.\nThis state exists for a mobile originating call when the network has requested the mobile station to establish a CC connection.\nThis state exists for a mobile originating call when the mobile station has established a CC connection upon the request of the network, but the network has not yet informed the mobile station of the reason for the network's action.\nThis state exists for a mobile originating call when the network has sent a CC establishment request but has not yet received a satisfactory response.\nThis state exists for a mobile originating call when the network has received acknowledgement that the mobile station has received all call information necessary to effect call establishment.\nThis state exists for a mobile originating call when the network has sent a recall request but has not yet received a satisfactory response.\nThis state exists for a mobile originating call when the network has received a call establishment request but has not yet responded.\nThis state exists for a mobile originating call when the network has sent acknowledgement that the network has received all call information necessary to effect call establishment.\nThis state exists for a mobile originating call when the network has indicated that remote user alerting has been initiated.\nThis state exists for a mobile terminating call when the network has sent a call establishment request but has not yet received a satisfactory response.\nThis state exists for a mobile terminating call when the network has received an indication that the mobile station is alerting but has not yet received an answer.\nThis state exists for a mobile terminating call when the network has received an answer but the network has not yet awarded the call.\nThis state exists for a mobile terminating call when the network has received acknowledgement that the mobile station has received all call information necessary to effect call establishment.\nThis state exists for a mobile terminating call when the network has awarded the call to the called mobile station. This state exists for a mobile originating call when the network has indicated that the remote user has answered the call.\nThis state exists when the network has disconnected the end- to-end connection (if any) and has sent an invitation to disconnect the mobile station to network connection.\nThis state exists when the network has requested the MS to release and is waiting for a response.\nThis state exists when the network has received a request from the mobile station for a new mode but has not yet sent a response.\nThis state exists when the network has sent a request to the mobile station for a new mode but has not yet received an answer.\nThis state exists for a mobile originating call when the network has indicated that the remote user has answered the call and the network is waiting for acknowledgement by the mobile station.\n",
                            "figures_meta_data": [],
                            "tables": []
                        }
                    ]
                },
                {
                    "title": "5.2\tCall establishment procedures",
                    "description": "",
                    "summary": "",
                    "text_content": "Establishment of a call is initiated by request of upper layer in either the mobile station or the network; it consists of:\n-\tthe establishment of a CC connection between the mobile station and the network;\n-\tthe activation of the codec or interworking function.\nWhenever it is specified in the present document clause 5 that the mobile station shall attach the user connection, this means that the mobile station shall activate the codec or interworking function as soon as an appropriate channel is available. The mobile station shall de-activate the codec or interworking function whenever an appropriate channel is no longer available. As soon as an appropriate channel is (again) available, the codec or interworking function shall be re-activated. If a new order to attach the user connection is received, the new order shall supersede the previous one.\nA channel shall be considered as appropriate if it is consistent with the possibly negotiated bearer capability applicable for the actual phase of the call. The mobile station shall not consider a channel as not appropriate because the type of the channel (full rate/half rate) is not the preferred one. If:\n-\tthe user connection has to be attached but no appropriate channel is available for a contiguous time of 30 seconds; or if\n-\tthe codec or interworking function is de-activated for a contiguous time of 30 seconds;\nthen the mobile station may initiate call clearing.\nUpon request of upper layers to establish a call, restricting conditions for the establishment of the call are examined. These restricting conditions concern the states of parallel CC entities and are defined elsewhere. If these restricting conditions are fulfilled, the call establishment is rejected. Otherwise a CC entity in state U0, \"null\", is selected to establish the call. It initiates the establishment by requesting the MM sublayer to establish an MM connection.\nIn Iu mode, if the lower layers indicate the release of a radio access bearer, whereas the corresponding call is still active, the MS shall not automatically initiate the release of that call.\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": [
                        {
                            "title": "5.2.1\tMobile originating call establishment",
                            "text_content": "The call control entity of the mobile station initiates establishment of a CC connection by requesting the MM sublayer to establish a mobile originating MM connection and entering the \"MM connection pending\" state. There are two kinds of a mobile originating call: basic call and emergency call. The request to establish an MM connection shall contain a parameter to specify whether the call is a basic or an emergency call. This information may lead to specific qualities of services to be provided by the MM sublayers. Timer T303 is started when the CM SERVICE REQUEST message is sent.\nFor mobile stations supporting eMLPP basic calls may optionally have an associated priority level as defined in 3GPP TS 23.067 [88]. This information may also lead to specified qualities of service to be provided by the MM sublayers.\nWhile being in the \"MM connection pending\" state, the call entity of the mobile station may cancel the call prior to sending the first call control message according to the rules given in subclause 4.5.1.7.\nThe mobile station supporting multicall that is initiating an emergency call shall release one or more existing call to ensure the emergency call can be established if the multicall supported information stored in the mobile station described in subclauses 5.2.1.2 and 5.2.2.1 indicates the network does not support multicall and some ongoing calls exists.\nHaving entered the \"MM connection pending\" state, upon MM connection establishment, the call control entity of the mobile station sends a setup message to its peer entity. This setup message is:\n-\ta SETUP message, if the call to be established is a basic call, and\n-\tan EMERGENCY SETUP message, if the call to be established is an emergency call.\nNOTE 1:\tThe Extended Local Emergency Numbers List (see 3GPP TS 24.301 [120]) does not apply in this specification.\nThe mobile station then enters the \"call initiated\" state. Timer T303 is not stopped.\nThe setup message shall contain all the information required by the network to process the call. In particular, the:\n-\tSETUP message shall contain the called party address information;\n-\tEMERGENCY SETUP message shall contain the emergency category, if the emergency category is available at the MS.\nIf the mobile station supports multicall, it shall include the Stream Identifier (SI) information element. For the first call i.e. when there are no other ongoing calls the SI value shall be 1.\nFor speech calls the mobile station shall indicate all codecs that it supports for UTRAN in the Supported Codec List information element. Codecs for GERAN shall be indicated in the Bearer Capability information element, if this information element is included. Additionally, if the mobile station supports codecs for GERAN and UTRAN, it shall indicate the codecs for GERAN also in the Supported Codec List information element.\nIf the call is a redial attempt to switch from speech to multimedia or vice-versa, the SETUP message shall include the Redial information element.\nNOTE 2: Redial attempt is defined in 3GPP TR 23.903: \"Redial solution for voice-video switching\"[115].\nIf the MS supports the enhanced network-initiated in-call modification procedure as specified in subclause 5.3.4.3, the MS shall indicate this in the Call Control Capabilities IE in the SETUP message.\nIf timer T303 elapses in the \"MM connection pending\" state, the MM connection in progress shall be aborted and the user shall be informed about the rejection of the call.\nThe \"call initiated\" state is supervised by timer T303.For normal MO calls, this timer will have already been started after entering the \"MM connection pending\" state. For network-initiated MO calls this timer will be started in the recall present state as defined in subclause 5.2.3.4\nWhen the call control entity of the mobile station is in the \"call initiated\" state and if it receives:\ni)\ta CALL PROCEEDING message, it shall proceed as described in subclause 5.2.1.3;\nii)\tan ALERTING message, it shall proceed as described in subclause 5.2.1.5;\niii)\ta CONNECT message, it shall proceed as described in subclause 5.2.1.6;\niv)\ta RELEASE COMPLETE message it shall proceed as described in subclause 5.2.1.2.\nAbnormal case:\n-\tIf timer T303 elapses in the \"call initiated\" state before any of the CALL PROCEEDING, ALERTING, CONNECT or RELEASE COMPLETE messages has been received, the clearing procedure described in subclause 5.4 is performed.\nIn the \"null\" or \"recall present\" states, upon receipt of a setup message (a SETUP message or an EMERGENCY SETUP message, see subclause 5.2.1.1), the call control entity of the network enters the \"call initiated\" state. It shall then analyse the call information contained in the setup message.\nIn Iu mode, network shall include the SI received in the SETUP message into the RABid and send it back to the mobile station. For RABid see 3GPP TS 25.413 [19c] and 3GPP TS 44.118 [111]. If the network receives the SETUP message with no SI, the network shall set the SI value to 1.\ni)\tIf, following the receipt of the setup message, the call control entity of the network determines that the call information received from the mobile station is invalid (e.g. invalid number), then the network shall initiate call clearing as defined in subclause 5.4 with one of the following cause values:\n# 1\t\t\t\"unassigned (unallocated) number\",\n# 3\t\t\t\"no route to destination\",\n# 22\t\"number changed\",\n# 28\t\"invalid number format (incomplete number)\".\nii)\tIf, following the receipt of the setup message, the call control entity of the network determines that a requested service is not authorized or is not available, it shall initiate call clearing in accordance with subclause 5.4.2 with one of the following cause values:\n# 8\t\t\t\"operator determined barring\",\n# 57\t\"bearer capability not authorized\",\n# 58\t\"bearer capability not presently available\",\n# 63\t\"service or option not available, unspecified\", or\n# 65\t\"bearer service not implemented\".\niii)\tOtherwise, the call control entity of the network shall either:\n-\tsend a CALL PROCEEDING message to its peer entity to indicate that the call is being processed; and enter the \"mobile originating call proceeding\" state;\n-\tor: send an ALERTING message to its peer entity to indicate that alerting has been started at the called user side; and enter the \"call received\" state;\n-\tor: send a CONNECT message to its peer entity to indicate that the call has been accepted at the called user side; and enter the \"connect request\" state.\nThe call control entity of the network may insert bearer capability information element(s) in the CALL PROCEEDING message to select options presented by the mobile station in the Bearer Capability information element(s) of the SETUP message. The bearer capability information element(s) shall contain the same parameters as received in the SETUP except those presenting a choice. Where choices were offered, appropriate parameters indicating the results of those choices shall be included.\nThe CALL_PROCEEDING message shall also contain the priority of the call in the case where the network supports eMLPP. Mobile stations supporting eMLPP shall indicate this priority level to higher sublayers and store this information for the duration of the call for further action. Mobile stations not supporting eMLPP shall ignore this information element if provided in a CALL PROCEEDING message.\nNOTE:\tIf the network supports only R98 or older versions of this protocol and the priority is not included in the CALL PROCEEDING message, this does not imply that the network does not support eMLPP.\n-\tThe CALL_PROCEEDING message shall contain the multicall supported information in the network call control capabilities in the case where the network supports multicall and there are no other ongoing calls to the MS. Mobile stations supporting multicall shall store this information until the call control state for all calls returns to null. Mobile stations not supporting multicall shall ignore this information if provided in a CALL PROCEEDING message. If the multicall supported information is not sent in the CALL_PROCEEDING message, the mobile station supporting multicall shall regard that the network doesn't support multicall.\nThe call control entity of the network having entered the \"mobile originating call proceeding\" state, the network may initiate the assignment of a traffic channel according to subclause 5.2.1.9 (early assignment).\nFor speech calls, if the SETUP message or EMERGENCY SETUP message contains a Supported Codec List information element, the network shall use this list to select the codec for UTRAN. If no Supported Codec List information element is received, then for UTRAN the network shall select the default UMTS speech codec according to subclause 5.2.1.11.\nCodecs for GERAN shall be selected from the codecs indicated in the Supported Codec List information element or in the Bearer Capability information element. If neither a Supported Codec List information element nor a Bearer Capability information element is received, then for GERAN the network shall select GSM full rate speech version 1.\nCodec information that does not apply to the currently serving radio access shall be used by the network if an inter-system change occurs.\nThe figure depicts the initiation and possible subsequent responses of mobile-originated calls in the 3GPP TS 24.008 standard. It illustrates the signaling process, including the initiation of a call, the initiation of a call to a mobile network, and the possible subsequent responses from the mobile network. The figure shows the signaling process in a simplified manner, highlighting the key components and their interactions.\nFigure 5.2/3GPP TS 24.008 Mobile originated call initiation and possible subsequent responses.\nHaving entered the \"call initiated\" state, when the call control entity of the mobile station receives a CALL PROCEEDING message, it shall stop timer T303; start timer T310 unless\n-\tthe CALL PROCEEDING message contains a progress indicator IE specifying progress description #1, #2, or #64; or\n-\tit has received a PROGRESS message containing a progress indicator IE specifying progress description #1, #2, or #64 prior to the CALL PROCEEDING message\nand enter the \"mobile originating call proceeding\" state.\nAbnormal case:\nIf timer T310 elapses before any of the ALERTING, CONNECT or DISCONNECT messages has been received, the mobile station shall perform the clearing procedure described in subclause 5.4.\nThe figure depicts the call proceeding sequence at the mobile originating call establishment in 3GPP TS 24.008, illustrating the steps taken by the call setup process. It includes the call setup, call setup, call setup, call setup, call setup, call setup, call setup, call setup, call setup, call setup, call setup, call setup, call setup, call setup, call setup, call setup, call setup, call setup, call setup, call setup, call setup, call setup, call setup, call setup, call setup, call setup, call setup, call setup, call setup, call setup, call setup, call setup, call setup, call setup, call setup, call setup, call setup, call setup, call setup, call setup, call setup, call setup, call setup, call setup, call setup, call setup, call setup, call setup, call setup, call setup, call setup, call setup, call setup, call setup, call setup, call setup, call setup, call setup, call setup, call setup, call setup, call setup, call setup, call setup, call setup, call setup, call setup, call setup, call setup, call setup, call setup, call setup,\nFigure 5.3/3GPP TS 24.008 Call proceeding sequence at mobile originating call establishment\nIn this subclause, the term \"interworking\" is used only in the meaning of interworking with a network other than PLMN or ISDN, not as interworking between PLMN and ISDN since this is the normal case. In this sense, PLMN and ISDN are seen within the same environment, called the PLMN/ISDN environment.\nDuring call establishment, the call may leave a PLMN/ISDN environment; e.g., because of interworking with another network, with a non-PLMN/ISDN user, or with non-PLMN/ISDN equipment within the called user's premises; the call may also return to a PLMN/ISDN environment. When such situations occur, the network may send a progress indicator information element to the calling mobile station either:\na)\tin an appropriate call control message, if a state change is required (e.g. ALERTING or CONNECT); or,\nb)\tin the PROGRESS message, if no state change is appropriate.\nThis progress indicator information element shall contain one of the following progress description values:\na)\t#1 \"call is not end-to-end PLMN/ISDN; further call progress information may be available in-band\".\nb)\t#2 \"destination address is non-PLMN/ISDN\".\nc)\t#4 \"call has returned to PLMN/ISDN.\nSee also subclauses 5.5.1 and 5.5.6 for further reactions of the mobile station.\nIn order to inform the mobile station that the call is progressing in the PLMN/ISDN environment the network may send a progress indicator information element to the calling mobile station either:\na)\tin an appropriate call control message, if a state change is required (e.g., ALERTING or CONNECT); or\nb)\tin the PROGRESS message, if no state change is appropriate.\nThis progress indicator information element shall contain progress description value #32 \"Call is end-to-end ISDN/PLMN\". See also subclause 5.5.6 for further reactions of the mobile station.\nHaving entered the \"mobile originating call proceeding\" state, upon receiving an indication that user alerting has been initiated at the called address, the call control entity of the network shall: send an ALERTING message to its peer entity at the calling mobile station and enter the \"call delivered\" state.\nWhen the call control entity of the mobile station in the \"call initiated\" state or \"mobile originating call proceeding\" state receives an ALERTING message then, the call control entity of the mobile station shall stop timer T303 and T310 (if running) and shall enter the \"call delivered\" state. In this state:\n-\tfor speech calls: an alerting indication should be given to the user. If the mobile station has not attached the user connection then the mobile station shall internally generate an alerting indication. If the mobile station has attached the user connection then the network is responsible for generating the alerting indication and the mobile station need not generate one; and\n-\tfor multimedia calls: if the mobile station has not attached the user connection then the mobile station may internally generate an alerting indication. If the mobile station supports multimedia CAT during the alerting phase of a mobile originated multimedia call establishment, the network may request the mobile station to attach the user connection and setup a H.324 call and generate multimedia CAT as specified in subclause 5.3.6.4, in which case the mobile station need not generatean alerting tone.\nAbnormal cases:\nOn the mobile station side, if timer T303 or T310 expires, the call control entity of the mobile station shall initiate call clearing as described in subclause 5.4.\nThe figure depicts a call confirmation process in 3GPP TS 24.008, showing the signaling and call setup at the mobile originating call establishment. It illustrates the use of signaling protocols, such as G.711, G.729, and G.726, to establish the call and confirm the call setup. The figure also includes visual elements like call setup symbols, signaling symbols, and call confirmation symbols, providing a clear understanding of the process.\nFigure 5.4/3GPP TS 24.008 Call confirmation at mobile originating call establishment\nUpon receiving an indication that the call has been accepted, the call control entity of the network shall: through connect the traffic channel (including the connection of an interworking function, if required) and send a CONNECT message to its peer entity at the calling mobile station; start timer T313 and enter the \"connect indication\" state.\nThis message indicates to the call control entity of the calling mobile station that a connection has been established through the network.\nThe call control entity of the mobile station in the \"call initiated\" state, in the \"mobile originating call proceeding\" state or in the \"call delivered\" state, shall, upon receipt of a CONNECT message:\n-\tattach the user connection;\n-\treturn a CONNECT ACKNOWLEDGE message;\n-\tstop any locally generated alerting indication (if applied);\n-\tclear any H.324 call established to receive multimedia CAT during the alerting phase (if applied) , as specified in subclause 5.3.6.4\n-\tstop timer T303 and T310 (if running);\n-\tenter the \"active\" state.\nAbnormal cases:\nOn the mobile station side, if timer T303 or T310 expires, the call control entity of the mobile station shall initiate call clearing as described in subclause 5.4.\nNOTE:\tThe mobile station may have applied an additional internal alerting supervision which causes initiation of call clearing prior to the expiry of T303 or T310.\nThe call control of the network in the \"connect indication\" state, shall, upon receipt of a CONNECT ACKNOWLEDGE message:\n-\tstop timer T313 and enter the \"active\" state.\nAbnormal cases:\nOn the network side, if timer T313 elapses before a CONNECT ACKNOWLEDGE message has been received, the network shall perform the clearing procedure as described in subclause 5.4.\nThe figure depicts the call acceptance sequence at the mobile originating call establishment in 3GPP TS 24.008, illustrating the steps taken by the mobile network to accept incoming calls. The sequence includes the initiation of the call, the establishment of the call, and the completion of the call. The figure provides a visual representation of the process, allowing for a better understanding of the steps involved in the call setup.\nFigure 5.5/3GPP TS 24.008 Call acceptance sequence at mobile originating call establishment\nUpon receiving an indication that the network or the called user is unable to accept the call, the network shall initiate call clearing at the radio interface to the mobile which originated the call, as described in subclause 5.4 using the cause provided by the terminating network or the called user.\nNOTE:\tFor further study.\nThe mobile station supporting multicall includes the Stream Identifier (SI) in the SETUP message. The multicall supporting network shall interprets the SI value as follows:\na)\tMobile station generates a new SI value at the initiation of an originating call, then a new traffic channel shall be assigned to the mobile originating call.\nb)\tMobile station indicates an existing SI value, then the indicated traffic channel shall be used for the mobile originating call.\nMobile station supporting multicall shall never send an additional SETUP with indication that a new traffic channel is requested to a network that does not support multicall.\nIt is a network dependent decision when to initiate the assignment of an appropriate traffic channel during the mobile originating call establishment phase. Initiation of a suitable RR procedure to assign an appropriate traffic channel does neither change the state of a call control entity nor affect any call control timer.\nNOTE:\tDuring certain phases of such an RR procedure, transmission of CC and MM messages may be suspended, see 3GPP TS 44.018 [84], clause 3 and 3GPP TS 48.008 [85].\nThe assignment procedure does not affect any call control timer.\nIf an idle traffic channel is not available at the assignment instant, the network may place the traffic channel request in a queue. Calls arriving when all positions in the queue are occupied shall be cleared by the network using the cause #34 \"no circuit/channel available\".\nThe maximum queuing interval is supervised by the network. The limit is a network dependent choice. In case the network is not able to allocate a traffic channel within the queuing limit, the network will release the call using cause #34 \"no circuit/channel available\".\nOptionally, e.g. if eMLPP is used, the network may decide to pre-empt existing calls or to place the traffic channel request at some preferential position within the queue.\nSpecific indications provided in the network to the remote user are a network dependent choice.\nFor speech calls, a mobile station implementing this version of the protocol shall indicate all codecs that it supports for UTRAN in the Supported Codec List information element. Codecs for GERAN shall be indicated in the Bearer Capability information element, if this information element is included. Additionally, if the mobile station supports codecs for GERAN and UTRAN, it shall indicate the codecs for GERAN also in the Supported Codec List information element.\nIf the network does not receive a Supported Codec List information element then for speech calls in UTRAN it shall select the default UMTS speech codec.\nFor speech calls in GERAN, if the network does not receive a Supported Codec List information element nor a Bearer Capability information element, the network shall select GSM full rate speech version 1.\nThe network shall determine the default UMTS speech codec by the following:\ni)\tIf no GSM Speech Version codepoints are received in the Supported Codec List IE or in octet 3a etc. of the Bearer Capabilities IE then a \"UMTS only\" terminal is assumed and the default UMTS speech codec shall be UMTS_AMR.\nii)\tIf at least one GSM Speech Version codepoint is received in the Supported Codec List IE or in octet 3a etc. of the Bearer Capabilities IE then the ME supports GSM and UMTS and the default UMTS speech codec shall be UMTS_AMR_2.\nNOTE 1:\tIn case (ii), if the call is set up in A/Gb or GERAN Iu mode by a R99 ME, call control in the core network may treat the ME as a \"GSM only\" ME. The default UMTS speech codec will only become relevant when an intersystem handover to UTRAN Iu mode is initiated by the radio access network, and can be determined when this procedure is started.\nIf the Supported Codec List IE is received, then the network shall use this list to select the codec for Iu mode and indicate the selected codec to the ME via RANAP and RRC protocol in the NAS Synchronisation Indicator IE. See 3GPP TS 25.413 [19c], 3GPP TS 25.331 [23c] and 3GPP TS 44.118 [111].\nThe NAS Synchronisation Indicator IE shall be coded as the 4 least significant bits of the selected codec type (CoID) defined in 3GPP TS 26.103 [83], subclause 6.3.\nThe network shall determine the preference for the selected codec type; codec type prioritisation is not provided by the ME.\nThe ME shall activate the codec type received in the NAS Synchronisation Indicator IE.\nIf the mobile station does not receive the NAS Synchronisation Indicator IE (RRC protocol)\n-\tduring setup of a speech call;\n-\tduring inter-system handover of a speech call from A/Gb or GERAN Iu mode to UTRAN Iu mode;\n-\tduring an in-call modification from data to speech;\n-\tduring a SRVCC handover to UTRAN Iu mode; or\n-\tduring a 5G-SRVCC handover from NG-RAN to UTRAN Iu mode,\nthen it shall select the UMTS_AMR_2 speech codec.\nNOTE 2:\tIf the network does not support UMTS_AMR_2, it may activate the UMTS_AMR codec and indicate to the mobile station that it shall select UMTS_AMR_2. According to 3GPP TS 26.103 [83], subclause 5.4, no interworking problem will occur in this case.\nIf the mobile station has selected a speech codec for UTRAN Iu mode, it shall keep this codec until\n-\ta new codec is requested by the network by sending a NAS Synchronisation Indicator IE (RRC protocol);\n-\ta new codec is requested by the network during inter-system handover from UTRAN Iu mode to A/Gb or GERAN Iu mode; or\n-\tan in-call modification from speech to data is performed.\nFor adaptive multirate codec types no indication of subsets of modes is supported in this protocol, from the mobile station or to the mobile station. It is a pre-condition that the support of such codec types by the mobile station implicitly includes all modes defined for that codec type.\nThe mobile station can send a CTM support indication in the Bearer Capability IE in call establishment messages to inform the network of the use of CTM text in the call.\nWhen the mobile station indicates speech and support of CTM text telephony, the network shall select a speech codec and additionally CTM text telephony detection/conversion functions as specified in 3GPP TS 23.226 [92] and 3GPP TS 26.226 [93], if such functions are available.\nNOTE:\tIf CTM support is indicated by the mobile station, then it supports CTM text telephony together with any supported speech codec and for any supported radio access.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "5.2.2\tMobile terminating call establishment",
                            "text_content": "Before call establishment can be initiated in the mobile station, the MM connection must be established by the network.\nAfter the arrival of a call from a remote user, the corresponding call control entity in the network shall: initiate the MM connection establishment according to clause 4 and enter the \"MM connection pending\" state. The request to establish the MM connection is passed from the CM sublayer to the MM sublayer. It contains the necessary routing information derived from the SETUP message.\nUpon completion of the MM connection, the call control entity of the network shall: send the SETUP message to its peer entity at the mobile station, start timer T303 and enter the \"call present\" state.\nThe SETUP message shall contain the multicall supported information in the network call control capabilities in the case where the network supports multicall and there are no other ongoing calls to the MS. Mobile stations supporting multicall shall store this information until the call control state for all calls returns to null. Mobile stations not supporting multicall shall ignore this information if provided in a SETUP message. If the multicall supported information is not sent in the SETUP message, the mobile station supporting multicall shall regard that the network does not support multicall.\nUpon receipt of a SETUP message, the mobile station shall perform compatibility checking as described in subclause 5.2.2.2. If the result of the compatibility checking was compatibility, the call control entity of the mobile station shall enter the \"call present\" state. An incompatible mobile station shall respond with a RELEASE COMPLETE message in accordance with subclause 5.2.2.3.4.\nIf there are no bearer capability IEs in the SETUP message, the network may provide information about the requested service in the backup bearer capability IE.\nIf no response to the SETUP message is received by the call control entity of the network before the expiry of timer T303, the procedures described in subclause 5.2.2.3.3 shall apply.\nThe figure depicts a mobile terminating call initiation and possible subsequent responses in the context of 3GPP TS 24.008. It illustrates the signaling process, including call initiation, signaling, and possible responses. The figure includes key elements such as the call initiation signal, signaling, and possible responses, highlighting the importance of proper signaling in mobile communication systems.\nFigure 5.6/3GPP TS 24.008 Mobile terminating call initiation and possible subsequent responses.\nThe mobile station receiving a SETUP message shall perform compatibility checking before responding to that SETUP message. Annex B defines compatibility checking to be performed by the mobile station upon receiving a SETUP message. For a backup bearer capability IE received with a SETUP message the mobile station shall not perform compatibility checking as described in annex B.\nHaving entered the \"call present state\" the call control entity of the mobile station shall - with the exception of the cases described below - acknowledge the SETUP message by a CALL CONFIRMED message, and enter the \"mobile terminating call confirmed\" state.\nIf the mobile station supports multicall, it shall include the Stream Identifier (SI) information element in the CALL CONFIRMED message.\nIf the mobile station is located in the network supporting multicall, it shall never include the SI that is in use and shall include with either of the following two values:\n-\tSI=\"no bearer\";\n-\tSI=new value (not used by any of the existing bearers).\nIf the mobile station supporting multicall is located in the network not supporting multicall, it shall include the SI with value 1.\nThe call control entity of the mobile station may include in the CALL CONFIRMED message to the network one or two bearer capability information elements to the network, either preselected in the mobile station or corresponding to a service dependent directory number (see 3GPP TS 29.007 [38]). The mobile station may also use the backup bearer capability IE, if provided by the network, to deduce the requested service (see 3GPP TS 27.001 [36], subclause 8.3.3.1). The mobile station may also include one or two bearer capabilities in the CALL CONFIRMED message to define the radio channel requirements. In any case the rules specified in subclause 9.3.2.2 shall be followed.\nNOTE:\tThe possibility of alternative responses (e.g., in connection with supplementary services) is for further study.\nFor speech calls the mobile station shall indicate all codecs that it supports for UTRAN in the Supported Codec List information element. Codecs for GERAN shall be indicated in the Bearer Capability information element, if this information element is included. Additionally, if the mobile station supports codecs for GERAN and UTRAN, it shall indicate the codecs for GERAN also in the Supported Codec List information element.\nIf the MS supports the enhanced network-initiated in-call modification procedure as specified in subclause 5.3.4.3, the MS shall indicate this in the Call Control Capabilities IE in the CALL CONFIRMED message.\nA busy MS which satisfies the compatibility requirements indicated in the SETUP message shall respond either with a CALL CONFIRMED message if the call setup is allowed to continue or a RELEASE COMPLETE message if the call setup is not allowed to continue, both with cause #17 \"user busy\".\nIf the mobile user wishes to refuse the call, a RELEASE COMPLETE message shall be sent with the cause #21 \"call rejected\".\nIn the cases where the mobile station responds to a SETUP message with RELEASE COMPLETE message the mobile station shall release the MM connection and enter the \"null\" state after sending the RELEASE COMPLETE message.\nThe network shall process the RELEASE COMPLETE message in accordance with subclause 5.4.\nThe call control entity of the network in the \"call present\" state, shall, upon receipt of a CALL CONFIRMED message: stop timer T303, start timer T310 and enter the \"mobile terminating call confirmed\" state.\nIn Iu mode, network shall include the SI received in the CALL CONFIRMED message into the RABid and send it back to the mobile station. For RABid see 3GPP TS 25.413 [19c] and 3GPP TS 44.118 [111]. If the network receives the CALL CONFIRMED message with no SI, the network shall set the SI value to 1.\nFor speech calls, if the CALL CONFIRMED message contains a Supported Codec List information element, the network shall use this list to select the codec for UTRAN. If no Supported Codec List information element is received, then for UTRAN the network shall select the default UMTS speech codec according to subclause 5.2.1.11.\nCodecs for GERAN shall be selected from the codecs indicated in the Supported Codec List information element or in the Bearer Capability information element. If neither a Supported Codec List information element nor a Bearer Capability information element is received, then for GERAN the network shall select GSM full rate speech version 1.\nCodec information that does not apply to the currently serving radio access shall be used by the network if an inter-system change occurs.\nThe call control entity of the mobile station having entered the \"mobile terminating call confirmed\" state, if the call is accepted at the called user side, the mobile station proceeds as described in subclause 5.2.2.5. Otherwise, if the signal information element was present in the SETUP message user alerting is initiated at the mobile station side; if the signal information element was not present in the SETUP message, user alerting is initiated when an appropriate channel is available.\nHere, initiation of user alerting means:\n-\tthe generation of an appropriate tone or indication at the mobile station; and\n-\tsending of an ALERTING message by the call control entity of the MS to its peer entity in the network and entering the \"call received\" state.\nThe call control entity of the network in the \"mobile terminated call confirmed\" state shall, upon receipt of an ALERTING message: send a corresponding ALERTING indication to the calling user; stop timer T310; start timer T301, and enter the \"call received\" state.\nIn the \"mobile terminating call confirmed\" state or the \"call received\" state, if the user of a mobile station is User Determined User Busy then a DISCONNECT message shall be sent with cause #17 \"user busy\". In the \"mobile terminating call confirmed\" state, if the user of a mobile station wishes to reject the call then a DISCONNECT message shall be sent with cause #21 \"call rejected\".\nIn case of abnormal behaviour the following call failure procedures apply:\ni.\tIf the network does not receive any response to the SETUP message prior to the expiration of timer T303, then the network shall: initiate clearing procedures towards the calling user with cause #18 \"no user responding\"; and initiate clearing procedures towards the called mobile station in accordance with subclause 5.4.4 using cause #102 \"recovery on timer expiry\".\nii.\tIf the network has received a CALL CONFIRMED message, but does not receive an ALERTING, CONNECT or DISCONNECT message prior to the expiration of timer T310, then the network shall:\n-\tinitiate clearing procedures towards the calling user with cause #18 \"no user responding\"; and\n-\tinitiate clearing procedures towards the called MS in accordance with subclause 5.4.4 using cause #102 \"recovery on timer expiry\".\niii.\tIf the network has received an ALERTING message, but does not receive a CONNECT or DISCONNECT message prior to the expiry of timer T301 (or a corresponding internal alerting supervision timing function), then the network shall: initiate clearing procedures towards the calling user with cause #19 \"user alerting, no answer\"; and initiate clearing procedures towards the called mobile station in accordance with subclause 5.4.4, using cause #102 \"recovery on timer expiry\" or using cause #31 \"normal, unspecified\".\nNOTE:\tThe choice between cause #31 and cause #102 may have consequences on indications generated by the mobile station, see 3GPP TS 22.001 [8a].\nSee subclause 5.4.2.\nIn this subclause, the term \"interworking\" is used only in the meaning of interworking with a network other than PLMN or ISDN, not as interworking between PLMN and ISDN since this is the normal case. In this sense, PLMN and ISDN are seen within the same environment, called the PLMN/ISDN environment.\nDuring call establishment the call may enter an PLMN/ISDN environment, e.g., because of interworking with another network, with a non-PLMN/ISDN user, or with non-PLMN/ISDN equipment within the calling or called user's premises. When this occurs, the network may include a progress indicator information element to be included in the SETUP message to be sent to the called mobile station specifying progress description value:\na)\t#1 \"call is not end-to-end PLMN/ISDN; further call progress information may be available in-band\" or\nb)\t#3 \"origination address is non-PLMN/ISDN\".\nSee also subclause 5.5.1 for further reactions of the mobile station.\nIn the \"mobile terminating call confirmed\" state or the \"call received\" state, the call control entity in the mobile station indicates acceptance of a mobile terminating call by:\n-\tsending a CONNECT message to its peer entity in the network;\n-\tstarting Timer T313; and\n-\tentering the \"connect request\" state.\nIf the call control entity of the mobile station has indicated \"No Bearer\" as the SI value in the CALL CONFIRMED message, it shall assign the SI value and include the SI information element in the CONNECT message. Otherwise the SI information element shall not be included in the CONNECT message.\nIn the \"mobile terminated call confirmed\" state or in the \"call received\" state, the call control entity of the network shall, upon receipt of a CONNECT message: through connect the traffic channel (including the connection of an interworking function, if required), stop timers T310, T303 or T301 (if running); send a CONNECT ACKNOWLEDGE message to its peer entity at the mobile station of the called user; initiate procedures to send a CONNECT message towards the calling user and enter the \"active\" state.\nIn the \"connect request\" state, the call control entity of the mobile station shall, upon receipt of a CONNECT ACKNOWLEDGE message: stop timer T313 and enter the \"active\" state.\nWhen timer T313 expires prior to the receipt of a CONNECT ACKNOWLEDGE message, the mobile station shall initiate clearing in accordance with subclause 5.4.3.\nThe figure depicts the call acceptance and active indication at the mobile terminating call establishment in 3GPP TS 24.008. It illustrates the signaling process, including call setup, call establishment, and call termination. The figure shows the signaling path, including the mobile terminal (MT), the mobile base station (MBB), and the mobile network (MN). The figure also includes the signaling path for the mobile network, including the mobile base station (MBB), the mobile terminal (MT), and the mobile network (MN). The figure also includes the signaling path for the mobile network, including the mobile base station (MBB), the mobile terminal (MT), and the mobile network (MN). The figure also includes the signaling path for the mobile network, including the mobile base station (MBB), the mobile terminal (MT), and the mobile network (MN). The figure also includes the signaling path for the mobile network, including the mobile base station (MBB), the mobile terminal (MT), and the mobile network (MN). The figure also includes the signaling path for the mobile network, including the mobile base station (MBB), the mobile terminal (MT), and the mobile network (MN). The figure also includes the signaling path for the mobile network\nFigure 5.7/3GPP TS 24.008 Call acceptance and active indication at mobile terminating call establishment\nAfter receiving the SETUP message, the mobile station supporting multicall may either require a new traffic channel or reuse an existing traffic channel.\nIf a mobile station in the network supporting multicall requires a new traffic channel, it shall:\n-\tsend a CALL CONFIRMED message including the SI indicating a new value, not used by any of the existing traffic channels.\nIf a mobile station in the network supporting multicall does not require a new traffic channel, it shall:\n-\tsend a CALL CONFIRMED message including the SI equal to \"no bearer\".\nAfter the mobile station has send the CALL CONFIRMED with SI=\"no bearer\", the SI value in the CONNECT message will tell to the network if a user requests a new traffic channel or one of the existing ones will be re-uesd.\nIf a new traffic channel is requested by the user, the mobile station in the network supporting multicall shall:\n-\tsend a CONNECT message containing the SI with a new value, not used by any existing traffic channel.\nIf the user decides that an existing traffic channel will be reused, the mobile station in the network supporting multicall shall:\n-\tsend a CONNECT message with an SI indicating an existing value used by an existing traffic channel.\nIt is a network dependent decision when to initiate the assignment of a traffic channel during the mobile terminating call establishment phase.\nInitiation of the assignment phase does not directly change the state of a CC entity nor affect any call control timer, but may have some secondary effects (see e.g. subclause 5.2.2.3.2).\nThe principles described in subclause 5.2.1.10 apply accordingly.\nNOTE:\tThe interworking to the fixed network has to fulfil the network specific requirements.\nFor speech calls:\nThe mobile station shall attach the user connection at latest when sending the connect message.\nFor data calls:\nThe mobile station shall attach the user connection when receiving the CONNECT ACKNOWLEDGE message from the network.\nThe principles described in subclause 5.2.1.11 apply accordingly.\nThe principles described in subclause 5.2.1.12 apply accordingly.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "5.2.3\tNetwork initiated MO call $(CCBS)$",
                            "text_content": "The procedures of subclause 5.2.3 are mandatory for mobile stations supporting \"Network initiated MO call\".\nNOTE:\tThe behaviour of a mobile station that does not support \"Network initiated MO call\" is described in clause 4.\nBefore call establishment can be initiated in the mobile station, the MM connection shall be established by the network.\nAfter the arrival of an appropriate stimulus (for example a Remote User Free Indication), the corresponding call control entity in the network shall initiate the MM connection establishment according to clause 4, enter the \"CC connection pending\" state and start timer T331. The request to establish the MM connection is passed from the CM sublayer to the MM sublayer. It contains the necessary routing information derived from the received stimulus.\nUpon completion of the MM connection, the call control entity of the mobile station shall send a START CC message to its peer entity in the network. The mobile station shall then enter the \"Wait for network information\" state and start timer T332.\nIf the network receives a START CC message while in the \"CC connection pending\" state, the network stops T331, sends the CC-ESTABLISHMENT message, starts timer T333 and enters the \"CC-establishment present\" state.\nThe MM connection establishment may be unsuccessful for a variety of reasons, in which case the MM sublayer in the network will inform the CC entity in the network with an indication of the reason for the failure. The CC entity shall then stop all running timers, enter the \"Null\" state and inform all appropriate entities within the network.\nIf timer T331 expires, the network shall abort the MM connection establishment attempt, stop all running CC timers, enter the \"Null\" state and inform all appropriate entities within the network.\nIn the \"CC establishment present\" state, the mobile station, upon receipt of the CC-ESTABLISHMENT message, shall stop timer T332.\nThe CC-ESTABLISHMENT message contains information which the mobile station shall use for the subsequent SETUP message (if any) related to this CC-ESTABLISHMENT.\nThe CC-ESTABLISHMENT message shall contain the Setup Container IE.\nIf no CC-ESTABLISHMENT message is received by the call control entity of the mobile station before the expiry of timer T332, then the mobile station shall initiate clearing procedures towards the network using a RELEASE COMPLETE message with cause #102 \"recovery on timer expiry\" and proceed in accordance with subclause 5.4.2.\nUpon receipt of a CC-ESTABLISHMENT message the mobile station shall perform checks on the Setup Container IE in order to align the contained information with the mobile's present capabilities and configuration. The \"recall alignment procedure\" is defined later on in this subclause.\nIf the recall alignment procedure has succeeded, the call control entity of the Mobile Station shall:\n-\tform and store the SETUP message for sending later in the \"Recall present\" state,\n-\tacknowledge the CC-ESTABLISHMENT message with a CC-ESTABLISHMENT CONFIRMED message,\n-\tstart timer T335, and\n-\tenter the \"CC-establishment confirmed\" state.\nException:\nA busy mobile station which has successfully performed the recall alignment procedure shall respond with a CC-ESTABLISHMENT CONFIRMED message with cause #17 \"user busy\", and proceed as stated above.\nFor speech calls the mobile station shall indicate all codecs that it supports for UTRAN in the Supported Codec List information element of the CC-ESTABLISHMENT CONFIRMED message. Codecs for GERAN shall be indicated in the Bearer Capability information element. Additionally, if the mobile station supports codecs for GERAN and UTRAN, it shall indicate the codecs for GERAN also in the Supported Codec List information element.\nA mobile station, for which the recall alignment procedure failed, shall respond with a RELEASE COMPLETE message in accordance with subclause 5.4.2 with the appropriate cause code as indicated in the description of the recall alignment procedure.\nThe SETUP message is constructed from the Setup Container IE received in the CC ESTABLISHMENT MESSAGE. The mobile station shall assume that the Setup Container IE contains an entire SETUP message with the exception of the Protocol Discriminator, Transaction ID and Message Type elements. The mobile station may assume that the contents of the Setup Container IE are the same as were sent from the subscriber in a previous SETUP message of the mobile originating call establishment attempt. The mobile station shall copy the Setup Container to the SETUP message and not modify the contents except as defined in the recall alignment procedure and as defined in exceptions below. The mobile station shall not add other Information Elements to the end of the SETUP message.\nExceptions:\nBearer Capability IE(s), HLC IE(s) and LLC IE(s) (including Repeat Indicator(s), if there are 2 bearer capabilities), and the Supported Codec List IE require handling as described in the recall alignment procedure below.\nIf the CC Capabilities in the Setup Container IE is different to that supported by the mobile station, the mobile station shall modify the CC Capabilities in the SETUP message to indicate the true capabilities of the mobile station.\nFacility IE(s) and SS Version IE(s) require handling as described in the recall alignment procedure.\nStream Identifier IE requires handling as described in the recall alignment procedure.\nIf no response to the CC-ESTABLISHMENT message is received by the call control entity of the network before the expiry of timer T333, then the network shall initiate clearing procedures towards the called mobile station using a RELEASE COMPLETE message with cause #102 \"recovery on timer expiry\" and inform all appropriate entities within the network, proceeding in accordance with subclause 5.4.2.\nFigure 5.7a illustrates the call initiation and possible subsequent responses in 3GPP TS 24.008, highlighting the importance of call setup and signaling in 3GPP networks.\nFigure 5.7a/3GPP TS 24.008 Call initiation and possible subsequent responses.\nThe recall alignment procedure consists of three parts:\n-\tbasic service group alignment,\n-\tfacility alignment, and\n-\tstream identifier alignment.\nBasic service group alignment:\nThe mobile station shall check that the Bearer Capability, HLC and LLC and Repeat Indicator fields, which are embedded in the Setup Container IE, match a basic service group supported by the mobile station.\nIf this check fails, then the recall alignment procedure has failed. The mobile station shall use the cause #88 \"incompatible destination\" afterwards.\nOtherwise, the mobile station is allowed to alter the content within the Bearer Capability, HLC and LLC Information Elements (e.g. the speech codec version(s), the data rate, the radio channel requirement) provided that the basic service group is not changed. Furthermore, for speech calls the mobile station is allowed to add or remove the Supported Codec List Information Element, or to alter the contents of this information element dependent on the codecs supported by the mobile station. The result shall be that the mobile station has derived Bearer Capability, HLC, LLC, and Supported Codec List Information Elements, which it can use for a later call setup according to its configuration and capabilities.\nFacility alignment:\nThis only applies if the Setup Container contains 1 or more Facility IEs. Each Facility IE within the Setup Container will be associated with the common SS Version IE, if present. The handling for each Facility IE is defined below. The mobile station shall align each facility IE contained in the Setup Container. The rules defined in 3GPP TS 24.010 [21] also apply.\nThe Facility IE is encoded as 'simple recall alignment', 'advanced recall alignment' or 'recall alignment not essential' (see 3GPP TS 24.010 [21]). If the encoding indicates, that\n-\ta simple recall alignment is required, the mobile station shall copy the Facility IE and the common SS version IE from the Setup Container to the SETUP message without modifying the content.\n-\tan advanced recall alignment is required, the mobile station must recognise and support the operation defined in the facility. If the mobile station does not recognise or support the operation, then the recall alignment procedure has failed and the mobile station shall use the cause #29 \"facility rejected\" in the subsequent rejection of the CC establishment request.\n-\tthe recall alignment is not essential, then the facility operation is not an essential part of the SETUP. If the MS does not recognise the operation then the SS Version IE and Facility IE are discarded, and NOT copied into the SETUP message.\nNOTE:\tA mobile station may include a Facility IE without an associated SS Version IE. This would indicate that the SS operation is encoded using Phase 1 protocols.\nFurther details on Facility handling are given in 3GPP TS 24.010 [21].\nStream identifier alignment:\nThe mobile station shall check whether the Stream Identifier field is contained in the Setup Container or not.\nIf the Stream Identifier is contained in the Setup Container, the mobile station shall behave as one of the following.\n-\tthe mobile station re-assign the Stream Identifier value, and modify the Stream Identifier field.\n-\tthe mobile station remove the Stream Identifier field.\nIf the Stream Identifier is not contained in the Setup Container, the mobile station may behave as follows.\n-\tthe mobile station assign the Stream Identifier value, and add the Stream Identifier IE to the end of the SETUP message.\nThe call control entity of the network in the \"CC-establishment present\" state, shall, upon receipt of a CC-ESTABLISHMENT CONFIRMED message, stop timer T333 and enter the \"CC-establishment confirmed\" state.\nFor speech calls, if the ESTABLISHMENT CONFIRMED message contains a Supported Codec List information element, the network shall use this list to select the codec for UMTS. If no Supported Codec List information element is received, then for UMTS the network shall select the default UMTS speech codec according to subclause 5.2.1.11.\nCodecs for GERAN shall be selected from the codecs indicated in the Supported Codec List information element or in the Bearer Capability information element. If neither a Supported Codec List information element nor a Bearer Capability information element is received, then for GERAN the network shall select GSM full rate speech version 1.\nCodec information that does not apply to the currently serving radio access shall be used by the network if an inter-system change occurs.\nIn the \"CC-establishment confirmed\" state, the network sends a RECALL message. This message initiates user alerting and also shall include the Facility IE (providing additional information to be presented to the user for notification). The network starts timer T334 and enters the 'recall present' state.\nUpon reception of the RECALL message the Mobile station stops T335 and enters the \"recall present\" state.\n\nThe figure depicts a 3GPP TS 24.008 Recall, which is a crucial document in the field of telecommunications. It outlines the technical specifications and requirements for the 3GPP Release 13 (R13) TS 24.008, which is a standard for 3GPP Release 13 (R13) 3GPP TS 24.008. The figure includes various elements such as the 3GPP TS 24.008 Recall, the 3GPP TS 24.008 Recall, the 3GPP TS 24.008 Recall, the 3GPP TS 24.008 Recall, the 3GPP TS 24.008 Recall, the 3GPP TS 24.008 Recall, the 3GPP TS 24.008 Recall, the 3GPP TS 24.008 Recall, the 3GPP TS 24.008 Recall, the 3GPP TS 24.008 Recall, the 3GPP TS 2\nFigure 5.7b/3GPP TS 24.008 Recall\nIn the \"recall present\" state, the call control entity in the mobile station waits for acceptance of the Recall by the user. Once confirmation is received, the mobile station indicates acceptance of a recall by\n-\tsending a SETUP message to its peer entity in the network;\n-\tstarting Timer T303; and\n-\tentering the \"call initiated\" state and proceeding as described in subclause 5.2.1.1.\nThe MS shall ensure that the contents of the Bearer Capability IE(s) and Supported Codec List IE sent in the SETUP message are the same as the Bearer Capability IE(s) and Supported Codec List IE in the previous CC-ESTABLISHMENT CONFIRMED message related to this Network Initiated MO Call.\nIn the \"recall-present\" state, if the user of a mobile station is User Determined User Busy then a RELEASE COMPLETE message shall be sent with cause #17 \"user busy\" In the \"recall-present\" state. If the user of a mobile station wishes to reject the recall then a RELEASE COMPLETE message shall be sent with cause #21 \"call rejected\".\nIn either case, the mobile shall release the connection in accordance with subclause 5.4.2\nOn receipt of the SETUP message in the \"recall present\" state, the network shall stop timer T334 and proceed as specified in subclause 5.2.1.2.\nIf the call control entity of the network does not receive a SETUP message before the expiry of timer T334, then the network shall send a RELEASE COMPLETE message to the mobile using cause #102 \"recovery on timer expiry\", release the MM connection, enter the \"null\" state and shall inform all appropriate entities within the network.\nThe figure depicts a recall acceptance or rejection process in 3GPP TS 24.008, which is a standard for mobile network technologies. The figure shows a user interface with a recall button, a reject button, and a recall/reject button. The recall button is used to recall the last 10 seconds of a call, while the reject button is used to reject the call. The recall/reject button is used to recall the last 10 seconds of a call and reject it. The figure also includes a recall/reject button for the last 10 seconds of a call.\nFigure 5.7b/3GPP TS 24.008 Recall acceptance or rejection by user\nIt is a network dependent decision whether or not to initiate the assignment of a traffic channel during the \"CC-establishment confirmed\" state.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "5.2.4\tCall establishment for SRVCC or vSRVCC",
                            "text_content": "Before call establishment for SRVCC or vSRVCC can be initiated in the mobile station, the MM connection must be established by the network.\nAt PS to CS domain change from S1 mode or Iu mode due to SRVCC handover or vSRVCC handover (see 3GPP TS 23.216 [126]), the RR sublayer in the MS indicates to the MM layer if a voice only SRVCC handover or a voice and video SRVCC handover was completed successfully. At reception of this indication, the MS that supports SRVCC or vSRVCC shall establish an MM connection as specified in subclause 4.5.1.8 and either proceeds with subclause 5.2.4.2 if the indication is that voice only SRVCC was completed successfully or proceeds with subclause 5.2.4.2a if the indication is that voice and video SRVCC was completed successfully.\nAt 5G-SRVCC handover from NG-RAN to UTRAN (see 3GPP TS 23.216 [126]), the RR sublayer in the MS indicates to the MM layer if 5G-SRVCC handover from NG-RAN to UTRAN was completed successfully. At reception of this indication, the MS that supports 5G-SRVCC handover from NG-RAN to UTRAN shall establish an MM connection as specified in subclause 4.5.1.8 and proceeds with subclause 5.2.4.2 if the indication is that 5G-SRVCC handover from NG-RAN to UTRAN was completed successfully.\nIf the MS\n-\tsupports SRVCC and the MS has a voice media stream previously carried over the PS domain that is handed over to the CS domain via SRVCC;\n-\tsupports SRVCC or vSRVCC and the MS has a voice media stream and a video media stream of a single session previously in S1 mode carried over the PS domain and only the voice media stream is handed over to the CS domain via SRVCC; or\n-\tsupports 5G-SRVCC handover from NG-RAN to UTRAN and the MS has a voice media stream previously in the N1 mode that is handed over to the CS domain via 5G-SRVCC handover from NG-RAN to UTRAN\nand the session is in the \"confirmed\" state (defined in IETF RFC 3261 [137]), and the call control entity in \"null\" state receives indication \"MM connection establishment due to SRVCC handover\", the call control entity of the MS shall enter the \"active\" state, set the auxiliary state (defined in 3GPP TS 24.083 [27]) to \"idle\", set the multi party auxiliary state (defined in 3GPP TS 24.084 [28]) to \"idle\" and indicate the call establishment to upper layers. The MS and the network shall locally set the TI value of the call to \"000\" and the TI flag value as in mobile terminated call. If a single voice media stream is handed over and:\n-\tif the session is on hold, the setting of the auxiliary state (as defined in 3GPP TS 24.083 [27]) is described in 3GPP TS 24.237 [136]; and\n-\tif the session is a conferencing session, the setting of the multi party auxiliary state (as defined in 3GPP TS 24.084 [28]) is described in 3GPP TS 24.237 [136].\nIf the MS supports single radio PS to CS access transfer for calls in alerting state as specified in 3GPP TS 24.237 [136] subclause 12.2.3B, and the MS has a single voice media stream over the PS domain that is handed over to the CS domain via SRVCC, and the call control entity of the MS in the \"null\" state receives an indication \"MM connection establishment due to SRVCC handover\" then:\n-\tthe call control entity shall indicate to the upper layers that call establishment is due to SRVCC handover;\n-\tif the upper layers indicate that the media stream(s) is/are associated with a mobile originated session in the \"early\" state (defined in IETF RFC 3261 [137]) according to the conditions specified in 3GPP TS 24.237 [136] subclause 12.2.3B.3.2, the call control entity of the MS shall enter the \"call delivered\" state for this transaction. The MS and the network shall locally set the TI value of the call to \"000\" and the TI flag value as in mobile terminated call; and\n-\tif the upper layers indicate that the media stream(s) is/are associated with a mobile terminating session in the \"early\" state (defined in IETF RFC 3261 [137]) according to the conditions specified in 3GPP TS 24.237 [136] subclause 12.2.3B.3.1, the call control entity of the MS shall enter the \"call received\" state for this transaction. The MS and the network shall locally set the TI value of the call to \"000\" and the TI flag value as in mobile terminated call.\nIf the MS supports single radio PS to CS SRVCC for originating calls in pre-alerting phase as specified in 3GPP TS 24.237 [136] subclause 12.2.3B, and the MS has a single voice media stream over the PS domain that is handed over to the CS domain via SRVCC, and the call control entity of the MS in the \"null\" state receives an indication \"MM connection establishment due to SRVCC handover\" then:\n-\tthe call control entity shall indicate to the upper layers that call establishment is due to SRVCC handover; and\n-\tif the upper layers indicate that the media stream(s) is/are associated with a mobile originated session in the \"early\" state (defined in IETF RFC 3261 [137]) according to the conditions specified in 3GPP TS 24.237 [136] subclause 12.2.3B.3.3, the call control entity of the MS shall enter the \"mobile originating call proceeding\" state for this transaction. The MS and the network shall locally set the TI value of the call to \"000\" and the TI flag value as in mobile terminated call.\nIf the MS supports single radio PS to CS SRVCC for terminating calls in pre-alerting phase as specified in 3GPP TS 24.237 [136] subclause 12.2.3B, and the MS has a single voice media stream over the PS domain that is handed over to the CS domain via SRVCC, and the call control entity of the MS in the \"null\" state receives an indication \"MM connection establishment due to SRVCC handover\" then:\n-\tthe call control entity shall indicate to the upper layers that call establishment is due to SRVCC handover; and\n-\tif the upper layers indicate that the media stream(s) is/are associated with a mobile terminated session in the \"early\" state (defined in IETF RFC 3261 [137]) according to the conditions specified in 3GPP TS 24.237 [136] subclause 12.2.3B.3.2, the call control entity of the MS shall enter the \"call present\" state for this transaction. The MS and the network shall locally set the TI value of the call to \"000\" and the TI flag value as in mobile terminated call.\nNOTE:\tAs the MS is entering \"call present\" state, it must send a CALL CONFIRMED message to the network, even even the call context (including codecs) is already available at the MSC in order to enter \"mobile terminating call confirmed\" state.\nIf the MS has additional voice media streams carried over the PS domain that are handed over to the CS domain via SRVCC, the call states for the transactions and the setting of the TI value and TI flag for these additional media streams are described in 3GPP TS 24.237 [136].\nIf the MS supports multicall, the MS shall locally set SI value to \"1\" and the MS shall assume that the network does not support multicall. The network shall also locally set SI value to \"1\".\nIf the MS has a mobile originating session in the \"early\" state (as defined in IETF RFC 3261 [137]) and is providing an internally generated alerting indication to the user prior to the SRVCC handover, then after transitioning from the PS domain, the MS shall continue to provide the internal alerting indication to the user. The alerting indication is stopped when the user connection is attached.\nIf the MS has a mobile originated session established upon a request from the upper layers to establish an eCall over IMS, then after transitioning from the PS domain, the MS shall support inband transfer of the updated MSD according to 3GPP TS 26.267 [161].\nIf the MS supports vSRVCC, the MS has a voice media stream and a video media stream of a single session previously in S1 mode carried over the PS domain that are handed over to the CS domain via vSRVCC, the session associated with these media streams is in the \"confirmed\" state (defined in IETF RFC 3261 [137]), and the call control entity in \"null\" state receives indication \"MM connection establishment due to vSRVCC handover\", then the call control entity of the MS shall enter the \"active\" state, set the auxiliary state (defined in 3GPP TS 24.083 [27]) to \"idle\", set the multi party auxiliary state (defined in 3GPP TS 24.084 [28]) to \"idle\" and indicate the call establishment is due to vSRVCC handover to the upper layers. The MS and the network shall locally set the TI value of the call to \"000\" and the TI flag value as in mobile terminated call.\nIf the MS supports single radio PS to CS access transfer for calls in alerting state as specified in 3GPP TS 24.237 [136] subclause 12.2.3B, and the MS has a single voice media stream and a single video media stream carried over the PS domain that is handed over to the CS domain via vSRVCC, and the call control entity of the MS in the \"null\" state receives indication \"MM connection establishment due to vSRVCC handover\" then:\n-\tthe call control entity shall indicate to the upper layers that call establishment is due to vSRVCC handover;\n-\tif the upper layers indicate that the media stream(s) is/are associated with a mobile originated session in the \"early\" state (defined in IETF RFC 3261 [137]) according to the conditions specified in 3GPP TS 24.237 [136] subclause 12.2.3B.3.2, the call control entity of the MS shall enter the \"call delivered\" state for this transaction. The MS and the network shall locally set the TI value of the call to \"000\" and the TI flag value as in mobile terminated call; and\n-\tif the upper layers indicate that the media stream(s) is/are associated with a mobile terminating session in the \"early\" state (defined in IETF RFC 3261 [137]) according to the conditions specified in 3GPP TS 24.237 [136] subclause 12.2.3B.3.1, the call control entity of the MS shall enter the \"call received\" state for this transaction. The MS and the network shall locally set the TI value of the call to \"000\" and the TI flag value as in mobile terminated call.\nIf the MS supports single radio PS to CS SRVCC for originating calls in pre-alerting phase as specified in 3GPP TS 24.237 [136] subclause 12.2.3B, and the MS has a single voice media stream and a single video media stream carried over the PS domain that is handed over to the CS domain via vSRVCC, and the call control entity of the MS in the \"null\" state receives indication \"MM connection establishment due to vSRVCC handover\" then:\n-\tthe call control entity shall indicate to the upper layers that call establishment is due to vSRVCC handover; and\n-\tif the upper layers indicate that the media stream(s) is/are associated with a mobile originated session in the \"early\" state (defined in IETF RFC 3261 [137]) according to the conditions specified in 3GPP TS 24.237 [136] subclause 12.2.3B.3.3, the call control entity of the MS shall enter the \"mobile originating call proceeding\" state for this transaction. The MS and the network shall locally set the TI value of the call to \"000\" and the TI flag value as in mobile terminated call.\nIf the MS supports single radio PS to CS SRVCC for terminating calls in pre-alerting phase as specified in 3GPP TS 24.237 [136] subclause 12.2.3B, and the MS has a single voice media stream and a single video media stream carried over the PS domain that is handed over to the CS domain via vSRVCC, and the call control entity of the MS in the \"null\" state receives indication \"MM connection establishment due to vSRVCC handover\" then:\n-\tthe call control entity shall indicate to the upper layers that call establishment is due to vSRVCC handover; and\n-\tif the upper layers indicate that the media stream(s) is/are associated with a mobile originated session in the \"early\" state (defined in IETF RFC 3261 [137]) according to the conditions specified in 3GPP TS 24.237 [136] subclause 12.2.3B.3.2, the call control entity of the MS shall enter the \"call present\" state for this transaction. The MS and the network shall locally set the TI value of the call to \"000\" and the TI flag value as in mobile terminated call.\nNOTE:\tAs the MS is entering \"call present\" state, it must send a CALL CONFIRMED message to the network, even even the call context (including codecs) is already available at the MSC in order to enter \"mobile terminating call confirmed\" state.\nIf the MS supports multicall, the MS shall locally set SI value to \"1\" and the MS shall assume that the network does not support multicall. The network shall also locally set SI value to \"1\".If the MS has a mobile originating session in the \"early\" state (as defined in IETF RFC 3261 [137]) and is providing an internally generated alerting indication to the user prior to the vSRVCC handover, then after transitioning from the PS domain, the MS shall continue to provide the internal alerting indication to the user. The alerting indication is stopped when the user connection is attached.\nIf the MS has a mobile originating session in the \"early\" state (as defined in IETF RFC 3261 [137]) and is receiving multimedia CAT over the PS domain prior to the vSRVCC handover, then after transitioning from the PS domain, the MS stops providing the early media to the user and may internally generate an alerting indication. The alerting indication is stopped when the user connection is attached.\nAn appropriate traffic channel for the call is assigned in SRVCC handover, vSRVCC handover or 5G-SRVCC handover from NG-RAN to UTRAN.\nFor SRVCC handover or 5G-SRVCC handover from NG-RAN to UTRAN, the mobile station shall attach the user connection:\n-\twhen the call control entity enters the \"active\" state or the \"call received\" state;\n-\twhen the call control entity enters the \"call delivered\" state, if prior to SRVCC the MS in the PS domain was receiving media for the session subjected to SRVCC handover or 5G-SRVCC handover from NG-RAN to UTRAN; and\n-\twhen the call control entity enters the \"mobile originating call proceeding\" state, if prior to SRVCC the MS in the PS domain was receiving media for the session subjected to SRVCC handover5G-SRVCC handover from NG-RAN to UTRAN.\nNOTE:\tThe attachment of the user connection prior to entering the \"active\" state allows the network to provide in-band tones and announcements to the UE.\nFor vSRVCC handover, the mobile station shall attach the user connection when the call control entity enters the \"active\" state.\nFor SRVCC or vSRVCC handover to a speech call, the principles of speech codec selection are described in subclause 5.2.1.11.\nFor vSRVCC handover to a circuit-switched multimedia call, further requirements are specified in subclause 5.3.6.6.\nThe network may check the call and auxiliary states of its peer entity as specified in subclause 5.5.3.1 when the PS to CS access transfer is complete.\n",
                            "figures_meta_data": [],
                            "tables": []
                        }
                    ]
                },
                {
                    "title": "5.3\tSignalling procedures during the \"active\" state",
                    "description": "",
                    "summary": "",
                    "text_content": "",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": [
                        {
                            "title": "5.3.1\tUser notification procedure",
                            "text_content": "The mobile terminating user notification procedure allows the network to notify a mobile station of any appropriate call-related event during the \"active\" state of a call. The procedure consists in the network sending a NOTIFY message to the mobile station. No state change occurs at any of the interface sides following the sending or the receipt of this message (but an appropriate indication may optionally be generated in the mobile station).\nThe mobile originating notification procedure allows the mobile station to notify the remote user of any appropriate call-related event during the \"active\" state of a call by sending a NOTIFY message containing a notification indicator to the network; upon receipt of this message, the network sends a NOTIFY message containing the same notify indicator to the other user involved in the call. No state change occurs at any of the interface sides following the sending or the receipt of this message.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "5.3.2\tCall rearrangements",
                            "text_content": "Call rearrangements on the radio interface are not supported by explicit messages (e.g. SUSPEND and RESUME messages as defined in ETSI ETS 300 102-1 [70]). However if a remote non-PLMN user initiates call rearrangements, the network shall inform the mobile station by means of a NOTIFY message. In a similar way the mobile station can inform the network about rearrangements by sending a NOTIFY message (e.g. change of user equipment connected to the mobile station).\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "5.3.3\tCodec Change Procedure",
                            "text_content": "During a speech call in UMTS, if a mobile station supports more than one UMTS codec, the network can change the UMTS codec via RRC procedures. In order to request the mobile station to change the codec, the network shall send the new selected codec type in the NAS Synchronisation Indicator IE (RRC protocol), see subclause 5.2.1.11.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "5.3.4\tSupport of Dual Services",
                            "text_content": "The behaviour described in this subclause is used to realize the following required services throughout subclause 5.3.4. The mobile station is not obliged to support the network originated in-call modification procedure. In that case, the mobile station shall, when receiving a MODIFY message, treat the message as unknown and react as described in subclause 8.4. If the mobile station is already prepared to support the procedure in both directions, it shall act as described in this subclause.\nAlternate Speech/Group 3 fax (Teleservice 61 according to 3GPP TS 22.003 [4]).\nThis circuit switched service allows the two users on a point-to-point connection to use the connection between them for different information transfer during the same call, but not at the same time.\nIf the negotiation during call establishment leads to the recognition of the above mentioned services, the in-call modification procedure is allowed to be executed within the current call by changing from one call mode to the other.\nIn some cases the in-call modification procedure makes it necessary to change the channel configuration by allocating a new channel and in other cases to change channel configuration parameters while keeping the previously allocated channel. This change is determined by the network, which initiates either the channel assignment procedure, handover procedure or channel mode modify procedure (see clause 3).\nThe capability and the initial mode desired must be identified by the mobile station by identifying each mode of operation with a separate information element during call establishment. Further the type of change between the modes must be identified by means of the repeat indicator:\nmode 1 \"alternate\" mode 2.\nFor both mobile originating and mobile terminating calls, the normal call establishment procedures apply.\nThe service is requested by the originating mobile station by transferring a SETUP message to the network containing the BC repeat indicator IE, the bearer capability 1 information element, and the bearer capability 2 information element. The first mode of operation (\"call mode\") shall be indicated by the bearer capability 1 information element and the second call mode by the bearer capability 2 information element.\nA low layer compatibility may optionally be specified for each call mode in a low layer compatibility I and low layer compatibility II information element. In that case:\n-\tthe SETUP message shall contain the LLC repeat indicator IE and both low layer compatibility I and low layer compatibility II information elements. The low layer compatibility I information element then corresponds to the bearer capability 1 information element and the low layer compatibility II information element to the bearer capability 2 information element;\n-\tif no low layer compatibility specification applies for one of the two call modes, the corresponding low layer compatibility IE (low layer compatibility I or low layer compatibility II) shall indicate \"not applicable\";\n-\tthe LLC repeat indicator shall specify the same repeat indication as the BC repeat indicator IE.\nSimilarly, a high layer compatibility may optionally be specified for each call mode in a high layer compatibility i and high layer compatibility ii information element. In that case:\n-\tthe SETUP message shall contain the HLC repeat indicator IE and both high layer compatibility i and high layer compatibility ii information elements. The high layer compatibility i information element then corresponds to the bearer capability 1 information element and the high layer compatibility ii information element to the bearer capability 2 information element;\n-\tif no high layer compatibility specification applies for one of the two call modes, the corresponding high layer compatibility IE (high layer compatibility i or high layer compatibility ii) shall indicate \"not applicable\";\n-\tthe HLC repeat indicator shall specify the same repeat indication as the BC repeat indicator IE.\nThe receiving entity shall ignore whether the LLC repeat indicator IE or HLC repeat indicator are contained in the message or not; it shall also ignore the repeat indication of an LLC repeat indicator IE or HLC repeat indicator IE. If the low layer compatibility II IE is not contained in the message and the low layer compatibility I IE is contained in the message, the receiving entity shall relate it to a call mode indicated in the message that does not specify speech (if any). If the high layer compatibility ii IE is not contained in the message and the high layer compatibility i IE is contained in the message, the receiving entity shall relate it to a call mode indicated in the message that does not specify speech (if any).\nThe specific part of the network which is sensitive to the call mode shall examine each mode described in the bearer capabilities included in the SETUP message by performing compatibility checking as defined in Annex B. If as a result of this compatibility checking the network decides to reject the call, then the network shall initiate call clearing as specified in subclause 5.4 with the following causes:\na)\t#57 \"bearer capability not authorized\";\nb)\t#58 \"bearer capability not presently available\";\nc)\t#65 \"bearer service not implemented\";\nd)\t#70 \"only restricted digital information bearer capability is available\".\nThe service is indicated to the called mobile station by a SETUP message coded in the same manner as in the mobile originating call establishment. As specified for normal terminating call establishment, the service may be indicated by the called mobile station in the CALL CONFIRMED message.\nThe destination mobile station shall perform the compatibility checking as defined in Annex B for both required modes if indicated in the SETUP message. If as a result of compatibility checking the mobile station decides to reject the call, the mobile station shall initiate call clearing according to the procedures of subclause 5.4 with one of the following causes:\na)\t#57 \"bearer capability not authorized\";\nb)\t#58 \"bearer capability not presently available\";\nc)\t#65 \"bearer service not implemented\";\nd)\t#88 \"incompatible destination\".\nThe mobile station may accept the call if the first mode indicated is free irrespective of whether the other mode is free or busy.\nIn order to change the call mode, the following in-call modification procedures shall be used.\nEither side of the radio interface may act as the requesting user to invoke the in-call modification.\nUpon each successful completion of the in-call modification procedure, the call changes to the next mode negotiated and agreed during the establishment phase of the call.\nThe in-call modification procedures are completely symmetrical at the radio interface.\nThe procedure is initiated by the requesting originating side in the \"active\" state of the call. It shall send a MODIFY message including the new mode to be changed to. The requesting originating side shall also start timer T323 and enter the \"mobile originating modify\" state (mobile station side) or the \"mobile terminating modify\" state (network side). The new mode given in the MODIFY message shall be one of those already negotiated and agreed during the establishment phase of the call. If the data call direction is different from the direction of the call setup a reverse call setup direction IE shall be included in the MODIFY message; otherwise this IE shall not be included.\nIf the in-call modification is originated by the mobile station, the mobile station shall reserve any internal resources necessary to support the next call mode, stop sending Bm-channel information; and stop interpreting received Bm-channel information according to the old call mode.\nIf the in-call modification is originated by the network, the network may reserve any internal resources necessary to support the next call mode. The network shall stop sending Bm-channel information and stop interpreting received Bm-channel information according to the old call mode at the latest when it changes the channel configuration.\nUpon receipt of the MODIFY message, the destination side shall check to ensure that the requested call mode can still be supported and if so, it shall initiate the reservation of any resources necessary to support the next call mode; start T324 (mobile station side only) if the in-call modification procedure is triggered as a result of a service change from speech to UDI/RDI multimedia modes; and enter the \"mobile originating modify\" (network side) or \"mobile terminating modify\" state (mobile station side).\nIf the destination network/mobile station receives a MODIFY message with a new mode which is already the actual one of the call the network/mobile station shall remain in the \"active\" state; send a MODIFY COMPLETE message with the actual mode; and shall not initiate anything else.\nIf the requested mode is speech and if during call establishment the network received a Supported Codec List IE, the network shall use this list to select the codec for UTRAN. If no Supported Codec List information element is received, then for UTRAN the network shall select the default UMTS speech codec according to subclause 5.2.1.11.\nCodecs for GERAN shall be selected from the codecs indicated in the Supported Codec List information element or in the Bearer Capability information element. If neither a Supported Codec List information element nor a Bearer Capability information element is received, then for GERAN the network shall select GSM full rate speech version 1.\nIf the Supported Codec List IE is received, then the network shall indicate the codec selected for Iu mode to the mobile station via RANAP and RRC protocol in the NAS Synchronisation Indicator IE (see subclause 5.2.1.11).\nIf the in-call modification was originated by the mobile station, the mobile station and the network shall proceed as follows:\nIf the requested mode is not the actual one and can be supported by the network it shall change the channel configuration, if required, and step on to any internal resources necessary to support the next call mode. If the requested mode is a data or facsimile mode, it shall also perform the appropriate means to take the direction of the data call into account. After successful change of the channel configuration it shall start sending user information according to the next call mode and start interpreting received user channel information according to the next call mode; send a MODIFY COMPLETE message with the new call mode included and enter the \"active\" state (network side). If the MODIFY message had contained a reverse call setup direction IE, the same IE shall be included in the MODIFY COMPLETE message.\nUpon receipt of the MODIFY COMPLETE message the mobile station shall: initiate the alternation to those resources necessary to support the next call mode; stop timer T323; and enter the \"active\" state (mobile station side).\nIf the in-call modification was originated by the network, the mobile station and the network shall proceed as follows:\nIf the requested mode is not the actual one and can be supported by the mobile station it shall reserve any internal resources necessary to support the next call mode.\nNOTE:\tFor a change from speech to a different call mode, user interaction may be required, before the mobile decides that the requested mode can be supported.\nIf the requested mode is a data or facsimile mode, it shall also perform the appropriate means to take the direction of the data call into account. The mobile station shall send a MODIFY COMPLETE message with the new call mode included, stop timer T324 and enter the \"active\" state (mobile station side). If the MODIFY message had contained a reverse call setup direction IE, the same IE shall be included in the MODIFY COMPLETE message. If the old call mode is speech, the mobile station shall continue sending Bm-channel information and interpreting received Bm-channel information for speech until the network modifies its channel configuration.\nAfter receipt of the MODIFY COMPLETE message the network shall: reserve any internal resources necessary to support the next call mode, stop sending Bm-channel information, and stop interpreting received Bm-channel information according to the old call mode, unless these actions were already performed earlier. Furthermore, the network shall change the channel configuration, if required; after successful change of the channel configuration initiate the alternation to those resources necessary to support the next call mode; stop timer T323; and enter the \"active\" state (network side).\nThe mobile station shall start sending user information according to the next call mode and start interpreting received user channel information according to the next call mode as soon as a suitable channel for the new mode is available.\nIn both cases:\nFor an alternate speech/facsimile group 3 service (refer to subclause 5.3.4) the old resources may still be kept reserved.\nThe reaction of the originating side if it had included a reverse call setup direction IE in the MODIFY message, but the destination side did not include the IE in the MODIFY COMPLETE message is implementation dependent.\nIn case the requested bearer capability cannot be supported by the current channel configuration the network shall initiate the assignment procedure and change the channel configuration accordingly.\n5.3.4.3.4.1\tNetwork rejection of in-call modification\nIf the network cannot support the change to the requested call mode or if the change of the channel configuration fails the network shall: release the resources which had been reserved for the alternation: send a MODIFY REJECT message with the old bearer capability and with cause # 58 \"bearer capability not presently available\" to the initiating mobile station; and enter the \"active\" state. If the change of the channel configuration fails, the network shall return to the internal resources required for the old call mode.\nUpon receipt of the MODIFY REJECT message with the old bearer capability the initiating mobile station shall: stop timer T323; release any resources which had been reserved for the alternation; resume sending user channel information according to the present call mode; resume interpreting received user channel information according to the present call mode; and enter the \"active\" state.\n5.3.4.3.4.2\tMobile station rejection of in-call modification\nIf the mobile station cannot support the change to the requested call mode, the mobile station shall: stop timer T324; release any resources which had been reserved for the alternation; send a MODIFY REJECT message with the old bearer capability and cause # 58 \"bearer capability not presently available\", and enter the \"active\" state.\nUpon receipt of the MODIFY REJECT message the network shall: stop timer T323, release any resources which had been reserved for the alternation.\n5.3.4.3.4.3\tTime-out recovery\nUpon expiration of T323 in either the mobile station or the network the procedures for call clearing shall be initiated (see subclause 5.4) with cause # 102 \"recovery on timer expiry\".\nUpon expiration of T324 the mobile station shall: release any resources which had been reserved for the alternation; send a MODIFY REJECT message with the old bearer capability and cause #58 \"bearer capability not presently available\"; and enter the \"active\" state.\nIf a MODIFY, MODIFY COMPLETE or MODIFY REJECT message is received in the \"disconnect indication\", \"disconnect request\" (mobile station side only) or \"release request\" state then the received message shall be discarded and no action shall be taken.\nIf a MODIFY COMPLETE message indicating a call mode which does not correspond to the requested one is received or if a MODIFY REJECT message indicating a call mode which does not correspond to the actual one is received then the received message shall be discarded and no action shall be taken.\nIf a MODIFY message indicating a call mode which does not belong to those negotiated and agreed during the establishment phase of the call, is received, then a MODIFY REJECT message with the actual call mode and with cause # 57 \"bearer capability not authorized\" shall be sent back.\nThe figure depicts the in-call modification sequence initiated by the Mobile Station (MS) in the 3GPP TS 24.008 standard. It illustrates the sequence of events that occur when a call is initiated by the MS, including the initiation of the call, the initiation of the call session, and the initiation of the call setup. The figure also shows the sequence of events that occur when the call is terminated, including the termination of the call session, the termination of the call setup, and the termination of the call. The figure is important for understanding the flow of calls in a 3GPP TS 24.008 network and for designing and implementing call management systems.\nFigure 5.10a/3GPP TS 24.008 In-call modification sequence initiated by MS\nThe figure depicts the in-call modification sequence initiated by the network in 3GPP TS 24.008, illustrating the steps taken to modify the call in a 3GPP network. The sequence includes the initiation of the call, the initiation of the call, the initiation of the call, and the initiation of the call.\nFigure 5.10b/3GPP TS 24.008 In-call modification sequence initiated by network\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "5.3.5\tUser initiated service level up- and downgrading (A/Gb mode and GERAN Iu mode only)",
                            "text_content": "The user initiated service level up- and downgrading is applicable for non-transparent multislot data services, only. By means of this procedure the user can request a change of the \"maximum number of traffic channels\" and/or \"wanted air interface user rate\" parameters, to be assigned by the network.\nThe procedure is initiated by the mobile station in the \"active\" state of the call. It shall:\n-\tsend a MODIFY message including the wanted value of the \"maximum number of traffic channels\" and/or the \"wanted air interface user rate\" parameters;\n-\tnot change any of the other, possibly negotiated, parameters of the bearer capability information element;\n-\tstart timer T323; and\n-\tenter the \"mobile originating modify\" state.\nAny internal resources necessary to support the next service parameters shall be reserved. If a dual service was negotiated at call setup, the mobile station shall initiate the service level up- or down-grading only during the data phase of the dual service.\nUpon receipt of the MODIFY message, the network shall check if the indicated maximum number of traffic channels can be supported and enter the \"mobile originating modify\" state.\nThe network may upon reception of the MODIFY message initiate a change of the channel configuration assigned to the mobile station.\nAs a response to the MODIFY message the network sends a MODIFY COMPLETE message including the bearer capability negotiated at call setup and enters the \"active\" state.\nUpon receipt of the MODIFY COMPLETE message the mobile station shall stop timer T323 and enter the \"active\" state.\nIf a change of bearer service is requested together with a change of the \"maximum number of traffic channels\" and/or the \"wanted air interface user rate\", or if the current used service is not a data service where up- and downgrading is applicable, or if the receiver chooses not to grant the request, the network shall:\n-\tsend a MODIFY REJECT message with bearer capability negotiated at call setup and with cause #58 \"bearer capability not presently available\";\n-\tenter the \"active\" state.\nUpon receipt of the MODIFY REJECT message with the bearer capability negotiated at call setup, the mobile station shall: stop timer T323 and enter the \"active\" state.\nUpon expiration of T323 in the mobile station the procedures for call clearing shall be initiated with cause #102 \"recovery on timer expiry\".\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "5.3.6\tSupport of multimedia calls",
                            "text_content": "The 3GPP circuit-switched multimedia call is based on the 3G-324M (see 3GPP TS 26.111 [80]), which is a 3GPP-variant of the ITU-T Recommendation H.324 [146]. CS Multimedia telephony is a Bearer Service, which utilizes the Synchronous Transparent Data service (BS30), see 3GPP TS 22.002 [3].\nAt the multimedia call setup the required call type, 3G-324M, is indicated, for the network to be able to invoke appropriate interworking functionality. In the peer end the H.324 information is used to invoke the terminal application. In addition to H.324 indication the terminal must select Information Transfer Capability (ITC) for the multimedia call. The 'correct' ITC depends on the peer end and the transporting networks; an all-ISDN call is a UDI/RDI call, and a call, which involves PSTN, is an analog \"3.1 kHz audio\" call.\nFor the case when the setup of a multimedia call is not successful, fallback to speech is specified.\nUsers may also request a service change between UDI/RDI multimedia and speech modes during a call (see 3GPP TS 23.172 [97]).\nFor both mobile originating and mobile terminating calls, the normal call establishment procedures apply, with the exceptions specified in the following subclauses.\nFor further description of the function of MSC/IWF in the following clauses, see 3GPP TS 29.007 [38].\nAt call setup the required call type, 3G-324M, is indicated by the originating MS in the SETUP message, with the bearer capability IE parameter Other Rate Adaption set to \"H.223 and H.245\".\nFor analogue multimedia, the support of a fallback to speech is requested by including two bearer capability IEs, multimedia first and speech as the second BC in the SETUP message. The MS shall indicate fallback to speech by these two BC IEs and the associated Repeat Indicator set to \"support of fallback\".\nFor UDI/RDI multimedia, the support of a fallback and service change is requested by including two bearer capability IEs, with the first BC as the preferred service in the SETUP message. The MS shall indicate service change and fallback by these two BC IEs and the associated Repeat Indicator set to \"support of service change and fallback\".\nIf the bearer capability IE is received from the MS either in A/Gb or GERAN Iu mode and indicates no A/Gb mode support for the requested bearer service, the network shall consider it as a request to perform an inter-system handover to UTRAN Iu mode, as described in 3GPP TS 23.009 [114] subclause 14.2.\nThe bearer compatibility checking in the network is according to subclause 5.3.4.2.1.\nIf the MS requested for an analogue multimedia call with fallback to speech, or for a UDI/RDI multimedia call with fallback and service change, and the network accepts the call, the network has the following options for the inclusion of bearer capability IEs in the CALL PROCEEDING message:\n-\tif the network accepts the requested analogue multimedia call and supports fallback to speech, both multimedia and speech bearer capability IEs shall be included;\n-\tif the network accepts the requested UDI/RDI multimedia call and supports fallback and service change, both multimedia and speech bearer capability IEs shall be included. The order of the bearer capability IEs determines the preferred service, and the network may reverse the order of these IEs (see 3GPP TS 23.172 [97], subclause 4.2.1);\n-\tif the network accepts a multimedia (only) call, a multimedia bearer capability IE shall be included;\n-\tif the network accepts a speech (only) call, a speech bearer capability IE shall be included;\n-\tfor a UDI/RDI multimedia call, if the network accepts the requested speech call and supports service change, both multimedia and speech bearer capability IEs shall be included. The order of the bearer capability IEs determines the preferred service, and the network may reverse the order of these IEs (see 3GPP TS 23.172 [97], subclause 4.2.1);\n-\tif the network received a UDI/RDI multimedia bearer capability IE with FNUR equal to 32kbit/s and a speech bearer capability IE in the SETUP message, the network shall not release the call, but shall reply with one bearer capability IE only, as specified in 3GPP TS 23.172 [97].\nNOTE:\tService change and fallback for UDI/RDI multimedia calls is not supported with Fixed Network User Rate set to 32 kbit/s (see 3GPP TS 23.172 [97]).\nIf the MS requested for a multimedia call only, and the network accepts the call, the network shall always include a single multimedia bearer capability IE in the CALL PROCEEDING message.\nThe originating user shall determine (possibly by pre-configuration of the terminal) whether a digital connection is required or if the call will be an analog modem call. If the call is expected to be digital the multimedia bearer capability IE parameter ITC is set to UDI/RDI. In an analog call the multimedia bearer capability IE parameter ITC is set to \"3,1 kHz audio ex PLMN\". Additionally required modem type is indicated (Other Modem Type = V.34).\n5.3.6.2.1.1\tFallback\nIf the network, during the setup of an H.324-call, detects that the transit network or the called end does not support an H.324 call (e.g. because of a failure in the modem handshaking in case of an analogue multimedia call), then the network initiates the in-call modification procedure (see subclause 5.3.4.3) towards the MS to modify the call mode to speech, if the MS had included a speech bearer capability IE in the SETUP message.\nIn case of a UDI/RDI multimedia call with service change and fallback, if the network detects that the called end does not support speech, then it initiates an in-call modification procedure towards the MS to modify the call mode to multimedia, if the first bearer capability IE was for a speech call.\nAt call setup the required call type, 3G-324M, is indicated by the network in the SETUP message, with the bearer capability IE parameter. Other Rate Adaption set to 'H.223 and H.245'. ITC is either '3,1 kHz audio ex PLMN' or 'UDI/RDI'.\nFor analogue multimedia, if the network supports fallback to speech and the subscriber has subscription to speech, two bearer capability IEs, multimedia first and speech as the second BC are included in the SETUP message. The network shall indicate fallback to speech by these two BC IEs and the associated Repeat Indicator set to \"support of fallback\".\nFor UDI/RDI multimedia, if the network supports fallback and service change, and the subscriber has subscription to speech, two bearer capability IEs, with the first BC as the preferred service are included in the SETUP message. The network shall indicate service change and fallback by these two BC IEs and the associated Repeat Indicator set to \"service change and fallback\".\nIf the bearer capability IE is received from the MS either in A/Gb or GERAN Iu mode and indicates no A/Gb mode support for the requested bearer service, the network shall consider it as a request to perform an inter-system handover to UTRAN Iu mode, as described in 3GPP TS 23.009 [114] subclause 14.2.\nThe bearer capability IE(s) may (in the case of the single numbering scheme) be missing from the SETUP message.\nThe bearer compatibility checking in the MS is according to subclause 5.3.4.2.2.\nThe MS shall indicate the supported call type(s) in the CALL CONFIRMED message, which is the acknowledgement to SETUP. If the network offered an analogue multimedia call with fallback to speech, or a UDI/RDI multimedia call with fallback and service change, the MS has the following options for the inclusion of bearer capability IEs in the CALL CONFIRMED message:\n-\tif the MS/user accepts the offered analogue multimedia call and supports fallback to speech, both multimedia and speech bearer capability IEs shall be included;\n-\tif the MS/user accepts the offered UDI/RDI multimedia call, and supports fallback and service change, both multimedia and speech bearer capability IEs shall be included. The order of the BC IEs determines the preferred service, and the MS/user may reverse the order of these IEs;\n-\tif the MS/user accepts the offered multimedia call, but does not support fallback or service change, only a multimedia bearer capability IE shall be included;\n-\tif the MS/user wishes a speech (only) call a speech bearer capability IE is included;\n-\tfor a UDI/RDI multimedia call, if the MS/user accepts the offered speech call and supports service change, both speech and multimedia bearer capability IEs shall be included. The order of the BC IEs determines the preferred service, and the MS/user may reverse the order of these IEs.\nIf the network offered a multimedia call only, and the MS/user accepts the call, the MS shall always include a single multimedia bearer capability IE in the CALL CONFIRMED message.\nIf the SETUP contained no bearer capability IE the network shall perform compatibility checking of the CALL CONFIRMED message in the same way as the compatibility checking of the SETUP message in the mobile originating call case, described in subclause 5.3.6.2.1.\nIf modem handshaking fails (in a modem call), the call mode will be modified to speech if a speech bearer capability IE was included. The modem signalling is inband, so the call must have reached the active state, when these conclusions about the presence of modems can be done. The call modifications are realized through the in-call modification procedure, by which the network requests the MS to modify the call mode (see subclause 5.3.4.3).\nNOTE:\tFallback from digital (UDI) H.324-call to speech after call setup is not a valid case at the terminating side.\nThe in-call modification procedure as described in subclause 5.3.4.3 shall be used to:\n-\ttrigger a service change between speech and UDI/RDI multimedia modes, when service change has been agreed at call setup;\n-\ttrigger a network-initiated service upgrade from speech to UDI/RDI multimedia modes (see 3GPP TS 23.172 [97]). The network shall initiate this procedure only if the mobile station indicated support of the enhanced network-initiated in-call modification procedure in the Call Control Capabilities IE at call establishment. In this case, the MODIFY message shall include the Network-initiated Service Upgrade indicator IE; or\n-\tmodify the multimedia bearer capability for an analogue multimedia call (restricted to the network initiated in-call modification only). In this case, the network shall send a MODIFY message including the new Bearer Capability to be changed to. The following bearer capability parameters can be modified with the procedure (see 3GPP TS 29.007 [38]):\n-\tFixed Network User Rate (analogue multimedia calls only).\n5.3.6.3.3.1\tVoid\n5.3.6.3.3.2\tVoid\nA mobile station supporting multimedia CAT during the alerting phase of a mobile originated multimedia call establishment shall indicate support of this capability to the network in the Call Control Capabilities information element in the SETUP message.\nThe network may generate a multimedia CAT to such a mobile station before it has reached the \"active\" state of a call. To do so, the network shall through connect the traffic channel towards the source of the multimedia CAT and send a progress indicator IE indicating user attachment with progress description #9 \"In-band multimedia CAT available\" in either an ALERTING message or a PROGRESS message that is sent to the mobile station during call establishment.\nOn reception of an ALERTING or a PROGRESS message the mobile station shall proceed as specified elsewhere in clause 5; if the progress indicator IE indicated user attachment with progress description #9 \"In-band multimedia CAT available\", the mobile station shall:\n-\tattach the user connection for multimedia as soon as an appropriate channel in multimedia mode is available; and\n-\tset up an H.324 call.\nIt is up to the network to ensure that no undesired end-to-end through connection with the called party takes place during the establishment of a mobile terminated call.\nThe mobile station shall not abort the call if an error or H.324 call clearing occurs during the setup or the lifetime of the H.324 call during the alerting phase; the call control entity of the calling mobile station shall remain in its current state.\nUpon reception of a new request from the network to attach the user connection with progress description #9 \"In-band multimedia CAT available\", the mobile station shall release any on-going H.324 call, and set up a new H.324 call.\nNOTE:\tThe network can request the mobile station to restart a new H.324 call during the alerting phase of the call e.g. during call forwarding scenarios to transmit to the calling party the multimedia CAT of the forwarded-to party.\nThe network may initiate the in-call modification procedure (see subclause 5.3.4.3) towards the MS in the \"call delivered\" state to modify the call mode to speech, if service change has been agreed at call setup.\nUpon receiving an indication that the call has been accepted, the call control entity of the network shall send a CONNECT message to its peer entity at the calling mobile station; start timer T313 and enter the \"connect indication\" state. This message indicates to the call control entity of the calling mobile station that a connection has been established through the network.\nOn reception of a CONNECT message, the mobile station shall proceed as specified elsewhere in clause 5; the mobile station shall release any on-going H.324 call and set up a new H.324 call towards the called party.\nMobile stations supporting multimedia CAT during the alerting phase of a mobile originated multimedia call establishment should also support the Media Oriented Negotiation Acceleration procedures specified in ITU-T Recommendation H.324 Amendment 1 [117] and ITU-T Recommendation H.324 Amendment 2 [118].\nA mobile station supporting multimedia CAT during the alerting phase of a mobile originated multimedia call establishment should support transmission of DTMFs during a H.324 call using the H.245 UserInputIndication message (see ITU-T H.245 [119]) if it has attached the user connection for multimedia and an appropriate channel is available.\nNOTE:\tDTMF can be used to convey to the network the end user request to stop or copy an on-going multimedia CAT.\nUpon vSRVCC handover to a traffic channel suitable for a data call, the MS shall use a single bearer capability IE for multimedia with ITC set to \"UDI\" and FNUR set to 64 kbit/s for the call.\nNOTE:\tAfter the MS has attached the user connection (see subclause 5.2.4.3), the MS initially uses predefined codecs for voice and video as specified in 3GPP TS 26.111 [80]. Additionally, the MS can perform in-band codec re-negotiation using H.245 signalling according to the procedures defined in 3GPP TS 26.111 [80].\n",
                            "figures_meta_data": [],
                            "tables": []
                        }
                    ]
                },
                {
                    "title": "5.4\tCall clearing",
                    "description": "",
                    "summary": "",
                    "text_content": "",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": [
                        {
                            "title": "5.4.1\tTerminology",
                            "text_content": "The following terms are used in the present document in the description of clearing procedures:\n-\tA traffic channel (see 3GPP TS 44.003 [16]) is \"connected\" when the channel is part of a circuit-switched connection established according to the present document.\n-\tA traffic channel is \"disconnected\" when the channel is no longer part of a circuit-switched connection, but is not yet available for use in a new connection.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "5.4.2\tException conditions",
                            "text_content": "Under normal conditions, the call control entity of the mobile station or of the network initiates call clearing by sending a DISCONNECT message to its peer entity; then both entities follow the procedures defined in subclauses 5.4.3 and 5.4.4 respectively.\nAs an exception to the above rule, the call control entity of the mobile station or of the network, in response to a SETUP or START CC or CC-ESTABLISHMENT CC-ESTABLISHMENT CONFIRMED or RECALL message, can reject a call by stopping all running call control timers, responding with a RELEASE COMPLETE message, releasing the MM connection, and returning to the \"null\" state, provided no other response has previously been sent.\nAs a further exception, the call control entity of the network may initiate call clearing by stopping all running call control timers, sending a RELEASE message, starting timer T308, and entering the \"release request\" state.\nNOTE:\tThis way to initiate call clearing by sending a RELEASE message should not be used by the network:\n-\tif in-band tones/announcements are provided and the network decides to use the procedure described in subclause 5.4.4.1.1.1 or 5.4.4.2.1;\n-\tif the network wants to have the opportunity to respond to information sent by the mobile station during call clearing, e.g. when the network indicates that \"CCBS activation is possible\".\nA call control entity shall accept an incoming RELEASE COMPLETE message used to initiate the call clearing even though the cause information element is not included.\nA control entity shall accept an incoming RELEASE message used to initiate the call clearing even though the cause information element is not included.\nFurthermore, a call control entity shall regard an incoming RELEASE COMPLETE message as consistent with any of its states; a call control entity shall regard an incoming RELEASE message as consistent with any of its states except the null state: a call control entity of the mobile station shall regard an incoming DISCONNECT message as consistent with any of its call control states except the \"null\" state, the \"release request\" state, and the \"disconnect indication\" state; a call control entity of the network shall regard an incoming DISCONNECT message as consistent with any of its call control states except the \"null\" state and the \"release request\" state.\nNOTE:\tThis allows the introduction of shorter call clearing procedures in the future.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "5.4.3\tClearing initiated by the mobile station",
                            "text_content": "Apart from the exceptions identified in subclause 5.4.2, the call control entity of the mobile station shall initiate clearing by: stopping all running call control timers, sending a DISCONNECT message; starting timer T305; and entering the \"disconnect request\" state.\nThe call control entity in the network in any state except the \"null\" state and the \"release request\" state shall, upon receipt of a DISCONNECT message:\n-\tStop all running call control timers;\n-\tinitiate procedures to clear the network connection and the call to the remote user;\n-\tsend a RELEASE message to its peer entity;\n-\tstart timer T308; and\n-\tenter the \"release request\" state.\nNOTE:\tThe RELEASE message has only local significance and does not imply an acknowledgement of clearing from the remote user.\nThe call control entity of the mobile station in any state except the \"null\" state and the \"release request\" state, shall, upon receipt of a RELEASE message: stop all running call control timers; send a RELEASE COMPLETE message; release the MM connection; and return to the \"null\" state.\nA call control entity of the network in any call control state shall, upon receipt of a RELEASE COMPLETE message from its peer entity in the mobile station: stop all running call control timers; release the MM connection; and return to the \"null\" state.\nThe call control entity of the mobile station in the \"disconnect request\" state, shall upon expiry of timer T305: send a RELEASE message to the network with the cause number originally contained in the DISCONNECT message and optionally, a second cause information element with cause #102 \"recovery on timer expiry\", start timer T308, and enter the \"release request\" state.\nThe call control entity of the network in the \"release request\" state, shall, at first expiry of timer T308, retransmit the RELEASE message, start timer T308, and stay in the \"release request\" state. At second expiry of timer T308, the call control entity of the network shall: release the MM connection; and return to the \"null\" state.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "5.4.4\tClearing initiated by the network",
                            "text_content": "Apart from the exception conditions identified in subclause 5.4.2, the call control entity of the network shall initiate clearing by: sending a DISCONNECT message; and entering the \"disconnect indication\" state. The DISCONNECT message is a local invitation to clear the call.\nNOTE:\tWhen the network initiates clearing by sending a RELEASE message, the procedures described in subclauses 5.4.3., 5.4.3.4 and 5.4.3.5 are followed.\nA mobile station that does not support the \"Prolonged Clearing Procedure\" shall comply with the requirements of subclause 5.4.4.1 and shall ignore subclause 5.4.4.2. A mobile station that supports the \"Prolonged Clearing Procedure\" shall comply with the requirements of subclauses 5.4.4.2 and shall ignore subclause 5.4.4.1.\nSublause 5.4.4.1 only applies to mobile stations that do not support the \"Prolonged Clearing Procedure\" option.\nWhen in-band tones/announcements are provided (see subclause 5.5.1), the call control entity of the network may initiate clearing by sending a DISCONNECT message containing progress indicator #8 \"in-band information or appropriate pattern now available\", starting timer T306, and entering the \"disconnect indication\" state.\n5.4.4.1.1.1\tReceipt of a DISCONNECT message with progress indicator #8 from the network\nThe call control entity of the MS in any state except the \"null\" state, the \"disconnect indication\" state, and the \"release request\" state, shall, upon receipt of a DISCONNECT message with progress indicator #8:\ni)\tif an appropriate speech traffic channel is not connected, continue clearing as defined in subclause 5.4.4.1.2.1 without connecting to the in-band tone/announcement;\nii)\tif an appropriate speech traffic channel is connected, attach the user connection for speech if it is not yet attached and enter the \"disconnect indication\" state. In that state, if upper layers request the clearing of the call, the call control entity of the MS shall proceed as defined in subclause 5.4.4.1.2.1.\n5.4.4.1.1.2\tExpiry of timer T306\nThe call control entity of the network, having entered the \"disconnect indication\" state after sending a disconnect message with the progress indicator #8, shall, upon expiry of timer T306, continue clearing by sending a RELEASE message with the cause number originally contained in the DISCONNECT message; starting timer T308; and entering the \"release request\" state.\nWhen in-band tones and announcements are not provided, the call control entity of the network shall initiate call clearing by stopping all running call control timers, sending a DISCONNECT message without progress indicator, starting timer T305 and entering the \"disconnect indication\" state.\n5.4.4.1.2.1\tReceipt of a DISCONNECT message without progress indicator or with progress indicator different from #8 from the network\nThe call control entity of the mobile station in any state except the \"null\" state, the \"disconnect indication\" state, and the \"release request\" state, shall, upon the receipt of a DISCONNECT message without progress indicator information element or with progress indicator different from #8:\n-\tstop all running call control timers;\n-\tsend a RELEASE message;\n-\tstart timer T308; and\n-\tenter the \"release request\" state.\n5.4.4.1.2.2\tReceipt of a RELEASE message from the mobile station\nThe call control entity of the network in any state except the \"null\" state and the \"release request\" state, shall, upon receipt of a RELEASE message: stop all running call control timers; send a RELEASE COMPLETE message; release the MM connection; and return to the \"null\" state.\n5.4.4.1.2.3\tAbnormal cases\nThe call control entity of the network, having entered the \"disconnect indication\" state after sending a DISCONNECT message without progress indicator or with progress indicator different from #8, shall upon expiry of timer T305: send a RELEASE message to the mobile station with the cause number originally contained in the DISCONNECT message; start timer T308; and enter the \"release request\" state. In addition to the original clearing cause, the RELEASE message may contain a second cause information element with cause #102 \"recovery on timer expiry\".\nA call control entity of the mobile station in any call control state shall, upon receipt of a RELEASE COMPLETE message from its peer entity in the network: stop all running call control timers; release the MM connection; and return to the \"null\" state.\n5.4.4.1.3.1\tAbnormal cases\nThe call control entity of the mobile station in the \"release request\" state shall at first expiry of timer T308 retransmit the RELEASE message and restart timer T308. At second expiry of timer T308, the call control entity of the mobile station shall: release the MM connection; and return to the \"null\" state.\nSublause 5.4.4.2 only applies to mobile stations that support the \"Prolonged Clearing Procedure\" option.\nWhen in-band tones/announcements are provided (see subclause 5.5.1) and CCBS is not applicable, the call control entity of the network may initiate clearing by sending a DISCONNECT message containing progress indicator #8 \"in-band information or appropriate pattern now available\", either not containing an Allowed Actions IE or containing an Allowed Actions IE indicating \"CCBS activation is not possible\", starting timer T306, and entering the \"disconnect indication\" state.\n5.4.4.2.1.1\tReceipt of a DISCONNECT message\nThe call control entity of the MS in any state except the \"null\" state, the \"disconnect indication\" state, and the \"release request\" state, shall, upon receipt of a DISCONNECT message with progress indicator #8 and, either not containing an Allowed Actions IE or containing an Allowed Actions IE indicating \"CCBS activation is not possible\":\ni)\tif an appropriate speech traffic channel is not connected,\n-\tstop all running call control timers;\n-\tsend a RELEASE message;\n-\tstart timer T308;\n-\tenter the \"release request\" state; and\n-\tnot connect to the in-band tone/announcement.\nii)\tif an appropriate speech traffic channel is connected, attach the user connection for speech if it is not yet attached and enter the \"disconnect indication\" state. In that state, if upper layers request the clearing of the call, the call control entity of the MS shall:\n-\tstop all running call control timers;\n-\tsend a RELEASE message;\n-\tstart timer T308; and\n-\tenter the \"release request\" state.\n5.4.4.2.1.2\tExpiry of timer T306\nThe call control entity of the network, having entered the \"disconnect indication, shall, upon expiry of timer T306, continue clearing by sending a RELEASE message with the cause number originally contained in the DISCONNECT message; starting timer T308; and entering the \"release request\" state.\nWhen Activation of CCBS is possible, the call control entity of the network may initiate clearing by sending a DISCONNECT message containing the Allowed Actions IE with an indication that \"Activation of CCBS is possible\" and starting T338. Optionally, progress indicator #8 \"in-band information or appropriate pattern now available\" may also be contained in the DISCONNECT message (in which case, T338 shall not be greater than T306).\n5.4.4.2.2.1\tReceipt of a DISCONNECT\nRelative to the current state the following procedures apply:\n-\tThe call control entity of the MS in the \"null\" state, the \"disconnect indication\" state and the \"release request\" state, shall, upon receipt of a DISCONNECT message react as described in clause 8.\n-\tThe call control entity of the MS in the \"disconnect request\" state, shall, upon receipt of a DISCONNECT message:\n-\tstop all running call control timers;\n-\tsend a RELEASE message;\n-\tstart timer T308; and\n-\tenter the \"release request\" state.\n-\tThe call control entity of the MS in any other states, shall, upon receipt of a DISCONNECT message with an Allowed Actions IE indicating \"Activation of CCBS is possible\" pass the \"Activation of CCBS is possible\" indication to the upper layer, enter the \"disconnect indication\" state, stop all running call control timers and await a response from the upper layers.\nIf the DISCONNECT message contained the progress indicator #8 \"in-band information or appropriate pattern now available\" and an appropriate speech traffic channel is connected, then the MS shall attach the user connection for speech if it is not yet attached. If the DISCONNECT message did not contain the progress indicator #8 \"in-band information or appropriate pattern now available\" any connected speech traffic channel shall be disconnected.\nResponse from the upper layers:\ni)\tIf the upper layers request the clearing of the call, the call control entity of the MS shall:\n-\tstop all running call control timers;\n-\tsend a RELEASE message;\n-\tstart timer T308; and\n-\tenter the \"release request\" state.\nii)\tIf the upper layers request that the \"CCBS activation is to be attempted\" then the MS shall\n-\tsend a RELEASE message containing a Facility IE including an\n-\tInvoke=CCBSRequest to the network;\n-\tstop all running call control timers;\n-\tstart timer T308; and\n-\tenter the \"release request\" state.\nIf an appropriate speech traffic channel is connected, transmission of this RELEASE message shall not cause it to be disconnected.\n5.4.4.2.2.2\tExpiry of timer T338\nThe call control entity of the network, having entered the \"disconnect indication\" state after sending a DISCONNECT message with an Allowed Actions IE indicating \"Activation of CCBS is possible\" shall, upon expiry of timer T338, continue clearing by sending a RELEASE message with the cause number originally contained in the DISCONNECT message; starting timer T308; and entering the \"release request\" state.\nWhen in-band tones and announcements are not provided, and, the network does not wish to indicate in the Allowed Actions IE that \"CCBS is possible\", the call control entity of the network shall initiate call clearing by stopping all running call control timers, sending a DISCONNECT message without progress indicator, either without the Allowed Actions IE or with the Allowed Actions IE indicating that \"CCBS is not possible\", starting timer T305 and entering the \"disconnect indication\" state.\n5.4.4.2.3.1\tReceipt of a DISCONNECT message\nThe call control entity of the mobile station in any state except the \"null\" state, the \"disconnect indication\" state, and the \"release request\" state, shall, upon the receipt of a DISCONNECT message either without progress indicator information element or with progress indicator different from #8, and, either without the Allowed Actions IE or with the Allowed Actions IE indicating that \"CCBS is not possible\":\n-\tstop all running call control timers;\n-\tsend a RELEASE message;\n-\tstart timer T308; and\n-\tenter the \"release request\" state.\n5.4.4.2.3.2\tAbnormal cases\nThe call control entity of the network, having entered the \"disconnect indication\", shall upon expiry of timer T305: send a RELEASE message to the mobile station with the cause number originally contained in the DISCONNECT message; start timer T308; and enter the \"release request\" state.\n5.4.4.2.4.1\tRelease, CCBS not requested\nFor a network that does not support the \"CCBS activation\" option:\nThe call control entity of the network in any state except the \"null\" state and the \"release request\" state, shall, upon receipt of a RELEASE message: stop all running call control timers; send a RELEASE COMPLETE message; release the MM connection; and return to the \"null\" state.\nFor a network that does support the \"CCBS activation\" option:\nThe call control entity of the network in any state except the \"null\" state and the \"release request\" state, shall, upon receipt of a RELEASE message without a Facility IE including an Invoke=CCBSRequest: stop all running call control timers; send a RELEASE COMPLETE message; release the MM connection; and return to the \"null\" state.\n5.4.4.2.4.2\tRelease, CCBS Requested\nFor a network that does not support the \"CCBS activation\" option:\nThe call control entity of the network in any state except the \"null\" state and the \"release request\" state, shall, upon receipt of a RELEASE message: stop all running call control timers; send a RELEASE COMPLETE message; release the MM connection; and return to the \"null\" state.\nFor a network that does support the \"CCBS activation\" option:\nThe call control entity of the network in any state except the \"null\" state and the \"release request\" state, shall, upon receipt of a RELEASE message containing a Facility IE including an Invoke=CCBSRequest: stop all running call control timers; then attempt to activate the recall; then send a RELEASE COMPLETE message indicating the success or failure of the recall activation attempt; release the MM connection; and return to the \"null\" state.\nA call control entity of the mobile station in any call control state shall, upon receipt of a RELEASE COMPLETE message from its peer entity in the network: stop all running call control timers; release the MM connection; and return to the \"null\" state.\n5.4.4.2.5.1\tAbnormal cases\nThe call control entity of the mobile station in the \"release request\" state shall at first expiry of timer T308 retransmit the RELEASE message and restart timer T308. At second expiry of timer T308, the call control entity of the mobile station shall: release the MM connection; and return to the \"null\" state.\nThe retransmitted RELEASE message need not contain the Facility IE including an Invoke=CCBSRequest, even if the original RELEASE message did contain this IE.5.4.5\tClear collision\nClear collision occurs when both the mobile station and the network simultaneously transfer DISCONNECT messages specifying the same call.\nThe behaviour of the network call control entity receiving a DISCONNECT message whilst in the \"disconnect indication\" state is specified in subclause 5.4.3. The behaviour of the MS call control entity receiving a DISCONNECT message whilst in the \"disconnect request\" state is defined in subclause 5.4.4.\nClear collision can also occur when both sides simultaneously transfer RELEASE messages related to the same call. The entity receiving such a RELEASE message whilst within the \"release request\" state shall: stop timer T308; release the MM connection; and enter the \"null\" state (without sending a RELEASE COMPLETE message).\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "5.4.5\tCall clearing for SRVCC from CS to PS",
                            "text_content": "If the MS receives the request from upper layers to release the call locally, the call control entity of the MS shall detach the user connection, if connected, and enter the NULL state.\n",
                            "figures_meta_data": [],
                            "tables": []
                        }
                    ]
                },
                {
                    "title": "5.5\tMiscellaneous procedures",
                    "description": "",
                    "summary": "",
                    "text_content": "",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": [
                        {
                            "title": "5.5.1\tIn-band tones and announcements",
                            "text_content": "When the network wants to make the mobile station attach the user connection (e.g. in order to provide in-band tones/announcement) before the mobile station has reached the \"active\" state of a call, the network may include a progress indicator IE indicating user attachment in a suitable CC message:\n-\tEither it includes the IE in a SETUP, CALL PROCEEDING, ALERTING, or CONNECT message that is send during call establishment\n-\tit sends a PROGRESS message containing the IE.\nA progress indicator IE indicates user attachment if it specifies a progress description in the set {1, 2, 3} or in the set {6, 7, 8, ..., 20}.\nOn reception of a SETUP, CALL PROCEEDING, ALERTING, CONNECT, or PROGRESS message the mobile station shall proceed as specified elsewhere in clause 5; if the progress indicator IE indicated user attachment and a speech mode traffic channel is appropriate for the call the mobile station shall in addition: attach the user connection for speech as soon as an appropriate channel in speech mode is available. (If a new order to attach the user connection is received before the attachment has been performed, the new order shall supersede the previous one.)\nUnder certain conditions the MS will have to attach the user connection before the CONNECT message. It is up to the network to ensure that no undesired end-to-end through connection takes place during the establishment of a MT call.\nNOTE:\tThis allows the use of progress indicator IEs independently from the channel modes appropriate for the call.\nThe network may generate multimedia CAT to a mobile station supporting multimedia CAT during the alerting phase of a mobile originated multimedia call establishment as specified in subclause 5.3.6.4.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "5.5.2\tCall collisions",
                            "text_content": "Call collisions as such cannot occur at the network. Any simultaneous mobile originating or mobile terminating calls are dealt with separately assigned and different transaction identifiers.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "5.5.3\tStatus procedures",
                            "text_content": "Whenever a call control entity wishes to check the call state of its peer entity, it may initiate the status enquiry procedure.\nNOTE:\tThis may, in particular, apply to procedural error conditions described in clause 8.\nA call control entity initiates the status enquiry procedure by sending the STATUS ENQUIRY message and starting timer T322. The value of T322 is implementation dependent in the MS and set in the network by the network operator. While timer T322 is running, the call control entity shall not send further STATUS ENQUIRY messages.\nUpon receipt of a STATUS ENQUIRY message, the receiver shall respond with a STATUS message, reporting the current call state and cause value #30 \"response to STATUS ENQUIRY\". Receipt of the STATUS ENQUIRY shall not result in a state change relating to any protocol and connection of the receiver.\nIf a STATUS message is received that contains cause value #30 \"response to status enquiry\", timer T322 shall be stopped and further appropriate actions taken, based on the information in that STATUS message, relative to the current state of the receiver of the STATUS message. These further \"appropriate actions\" are implementation dependent. However, the actions prescribed in subclause 5.5.3.2 shall apply.\nIf a clearing message is received while timer T322 is running, timer T322 shall be stopped, and call clearing shall continue.\nIf timer T322 expires, the STATUS ENQUIRY message may be retransmitted maximally once. If T322 expires after the STATUS ENQUIRY has been transmitted the maximum number of times, clearing of the call shall be initiated with cause value #41, \"temporary failure\", in the first call clearing message.\nOn receipt of a STATUS message reporting an incompatible call control state, the receiving entity shall clear the call by sending a RELEASE COMPLETE message with cause # 101 \"message not compatible with protocol state\". The reported call control state is incompatible if the combination of call control states at the sender and receiver side cannot occur, do not match or cannot be aligned by actions of the receiver; the exact definition is implementation dependent.\nA STATUS message may be received indicating a compatible call state but containing one of the following causes:\n#  95\t\"semantically incorrect message\"; or\n#  96\t\"invalid mandatory information\"; or\n#  97\t\"message type non-existent or not implemented\"; or\n#  98\t\"message type not compatible with protocol state\"; or\n#  99\t\"information element non-existent or not implemented\"; or\n# 100\t\"conditional IE error\".\nThis indicates that the transmitter of the STATUS message was unable to accept some information sent by the recipient of the STATUS message. This allow the recipient to retransmit some or all of the information. Other actions are possible and are implementation dependent; they may include releasing the call.\nIn the case the MS receives a STATUS message with the cause #100 due to the presence of a Repeat Indicator with the value \"service change and fallback\" in a SETUP message, it may then resend a new SETUP message with a single BC-IE (no Repeat Indicator is included). The actual behaviour is dependent on the implementation.\nIn the case the network receives a STATUS message with the cause #100 due to the presence of a Repeat Indicator with the value \"service change and fallback\" in a SETUP message, it shall then resend a new SETUP message, with either the BC-IE of the preferred service or the speech BC-IE (fallback to speech) as the only BC (no Repeat Indicator is included). The preferred behaviour is decided by configuration.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "5.5.4\tCall re-establishment, mobile station side",
                            "text_content": "This subclause describes the internal handling in the mobile station as far as call control is concerned.\nWhen a MM connection is active, an indication may be given by the MM sublayer to the call control entity to announce that the current MM connection has been interrupted but might be re-established on request of call control.\nDepending whether call re-establishment is allowed or not and on its actual state, call control shall decide to either request re-establishment or to release the MM connection.\na)\tRe-establishment not required\nIf the call is in the call establishment or call clearing phase, i.e. any state other than the \"active\" state or the \"mobile originating modify\" state, call control shall release the MM connection\nb)\tRe-establishment required\nIf the call is in the \"active\" state or \"mobile originating modify\" state, the indication from MM that re-establishment is possible shall cause call control to request re-establishment from the MM connection, suspend any further message to be sent and await the completion of the re-establishment procedure.\nCall Control is notified when the MM connection is re-established and shall then resume the transmission of possibly suspended messages and resume user data exchange when an appropriate channel is available.\nIf the attempt to re-establish the connection was unsuccessful, the MM connection will be released and a release indication will be given to call control, see subclause 4.5.1.6.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "5.5.5\tCall re-establishment, network side",
                            "text_content": "This subclause describes the handling in the network as far as call control is concerned.\nAfter a successful call re-establishment it is a network responsibility to identify (e.g. by using the status enquiry procedure, if needed, and resolve, if possible, any call state or auxiliary state mismatch between the network and the mobile station.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "5.5.6\tProgress",
                            "text_content": "At any time during the establishment or release of a call and during an active call the network may send a PROGRESS message to the mobile station.\nOn receipt of a PROGRESS message during the establishment or release of a call the mobile station shall stop all call control timers related to that call.\nNOTE:\tIf the PROGRESS has been received before the receipt of a CALL PROCEEDING message, the mobile station will not start timer T310 on receipt of a CALL PROCEEDING message, see subclause 5.2.1.1.3.\nFigure 5.11/3GPP TS 24.008 Progress illustrates the progress of the 3GPP TS 24.008 standard, which is a key document in the 3GPP (3rd Generation Partnership Project) standardization process. The figure shows the current status of the standard, including the number of active working groups, the number of draft documents, and the number of active documents. It also provides a visual representation of the timeline for the standard's development, highlighting the timeline for the next major release.\nFigure 5.11/3GPP TS 24.008 Progress\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "5.5.7\tDTMF protocol control procedure",
                            "text_content": "Dual Tone Multi Frequency (DTMF) is an inband one out of four plus one out of four signalling system primarily used from terminal instruments in telecommunication networks. The support of DTMF in the network is described in 3GPP TS 23.014 [12].\nThe mobile station shall be capable of transmitting DTMF messages as specified in this subclause if and only if the mobile station has the user connection for speech attached and an appropriate channel is available.\nThe transaction identifier used by the DTMF messages shall be that of the attached speech call.\nNOTE 1:\tThe present document means that DTMF messages can generally be sent in the active state of a call in speech transmission mode or when a traffic channel is available during setup or release and the progress indicator IE has been received.\nNOTE 2:\tSince the DTMF protocol messages are sent in a store and forward mode on the signalling channels the control of the device at the far end may be delayed dependent on the load or quality of the channels.\nNOTE 3:\tThe procedures described in this paragraph support DTMF only in the direction mobile station to network.\nA mobile station supporting multimedia CAT during the alerting phase of a mobile originated multimedia call establishment should also be capable of transmitting DTMFs during a multimedia call as specified in subclause 5.3.6.5.\nA user may cause a DTMF tone to be generated e.g. by depression of a key in the mobile station. The relevant action is interpreted by the mobile station as a requirement for a DTMF digit to be sent in a START DTMF message on an established FACCH. This message contains the value of the digit to be transmitted (0, 1, ..., 9, A, B, C, D, *, #).\nOnly a single digit will be transferred in each START DTMF message.\nOn sending a START DTMF message the MS shall start timer T336.\nWhere a previous START DTMF message has been sent, another START DTMF message shall only be sent by the MS following receipt of its STOP DTMF ACKNOWLEDGE message (see subclause 5.5.7.4) or a START DTMF REJECT message from the network (see subclause 5.5.7.2) or following the expiry of timers T336 and T337.\nIf timer T336 expires, the MS shall terminate the ongoing DTMF procedure without any retransmissions, and is free to begin another DTMF procedure (e.g. another START DTMF message).\nUpon receiving the START DTMF message the network shall either:\n-\tconvert the received digit into a DTMF tone which is applied toward the remote user, or\n-\tsend the DTMF digit as an out-of-band message (see 3GPP TS 23.205 [96])\nand return a START DTMF ACKNOWLEDGE message to the mobile station. This acknowledgement may be used in the mobile station to generate an indication as a feedback for a successful transmission.\nIf the network cannot accept the START DTMF message a START DTMF REJECT message will be sent to the mobile station. Upon receipt of a START DTMF ACK message or a START DTMF REJECT message, the MS shall stop timer T336.\nWhen the user indicates that the DTMF sending should cease e.g. by releasing the key the mobile station will send a STOP DTMF message to the network.\nOn sending a STOP DTMF message the MS shall start timer T337.\nThe MS shall only send a STOP DTMF message if a START DTMF ACKNOWLEDGE message has been received from the network (see subclause 5.5.7.2).\nIf timer T337 expires, the MS shall terminate the ongoing DTMF procedure without any retransmissions, and is free to begin another DTMF procedure. (e.g. another START DTMF message).\nUpon receiving the STOP DTMF message the network shall either:\n-\tstop sending the DTMF tone if applied by the network, or\n-\tinitiate a suitable out-of-band message (see 3GPP TS 23.205 [96])\nand return a STOP DTMF ACKNOWLEDGE message to the mobile station. Upon receipt of a STOP DTMF ACKNOWLEDGE message, the MS shall stop timer T337.\nIf the network is generating DTMF tones it shall ensure that the minimum length of tone and the minimum gap between two subsequent tones (according to ETSI ES 201 235-2 [12a]) is achieved.\nNOTE 1:\tIn ETSI ES 201 235-2 [12a] the minimum duration of a DTMF tone is 65ms.\nNOTE 2:\tIn ETSI ES 201 235-2 [12a] the minimum gap between DTMF tones is 65ms.\nThere is no defined maximum length to the tone, which will normally cease when a STOP DTMF message is received from the MS. However, the operator may choose to put a pre-defined time limit on the duration of tones sent.\nThe appropriate sequencing of DTMF control messages is shown in figures 5.8 and 5.9.\nNOTE 3:\tThe network may implement the time limit option where the DTMF tone duration is controlled by the network irrespective of the receipt of a STOP DTMF message from the mobile station.\nThe figure depicts a single DTMF transmission in 3GPP TS 24.008, illustrating the use of a single-tone signal for voice communication. The figure shows the transmission path, including the transmitter, receiver, and the single-tone signal. The figure is used to understand the transmission process and the role of the DTMF signal in voice communication.\nFigure 5.8/3GPP TS 24.008 Single DTMF transmission\nThe figure depicts a 3GPP TS 24.008 Multiple DTMF transmission, illustrating the various DTMF signals and their respective modulation schemes. The figure shows the transmission of DTMF signals over a 3GPP 24.008 network, with different modulation schemes such as 16-QAM and 64-QAM. The figure also includes the DTMF signal, the modulation scheme, and the corresponding modulation index. The figure is a crucial visual aid in understanding the transmission of DTMF signals in 3GPP TS 24.008 networks.\nFigure 5.9/3GPP TS 24.008 Multiple DTMF transmission\n",
                            "figures_meta_data": [],
                            "tables": []
                        }
                    ]
                }
            ]
        },
        {
            "title": "6\tSupport for packet services",
            "description": "This chapter contains the description of the procedures for the session management of GPRS point-to-point data services and MBMS point-to-point and point-to-multipoint data services at the radio interface (Reference point Uu and Um).\n",
            "summary": "",
            "tables": [],
            "figures_meta_data": [],
            "subsections": [
                {
                    "title": "6.1\tGPRS Session management",
                    "description": "",
                    "summary": "",
                    "text_content": "",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": [
                        {
                            "title": "6.1.1\tGeneral",
                            "text_content": "The main function of the session management (SM) is to support PDP context handling of the user terminal. Furthermore, the SM supports the MBMS context handling within the MS and the network, which allows the MS to receive data from a specific MBMS source.\nThe SM comprises procedures for\n-\tidentified PDP context activation, deactivation and modification; and\n-\tidentified MBMS context activation and deactivation.\nSM procedures for identified access can only be performed if a GMM context has been established between the MS and the network. If no GMM context has been established, the MM sublayer has to initiate the establishment of a GMM context by use of the GMM procedures as described in chapter 4. After GMM context establishment, SM uses services offered by GMM (see 3GPP TS 24.007 [20]). Ongoing SM procedures are suspended during GMM procedure execution.\nThe SM procedures for identified MBMS context activation and deactivation can only be performed, if in addition to the GMM context the MS has a PDP context activated.\nIn Iu mode only, integrity protected signalling (see subclause 4.1.1.1.1 of the present document and in general, see 3GPP TS 33.102 [5a]) is mandatory. In Iu mode only, all protocols shall use integrity protected signalling. Integrity protection of all SM signalling messages is the responsibility of lower layers. It is the network which activates integrity protection. This is done using the security mode control procedure (3GPP TS 25.331 [23c] and 3GPP TS 44.118 [111]).\nFor the session management protocol, the extended TI mechanism may be used (see 3GPP TS 24.007 [20]).\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "6.1.2\tSession management states",
                            "text_content": "In this subclause, the SM states are described for one SM entity (see 3GPP TS 24.007 [20]). Each SM entity is associated with one PDP context or MBMS context. Subclause 6.1.2.1 describes the SM states in the MS and subclause 6.1.2.2 describes the SM states on the network side.\nIn this subclause, the possible states of an SM entity in the mobile station are described. As illustrated in figure 6.1/3GPP TS 24.008 and 6.1a/3GPP TS 24.008 there are seven SM states in the MS.\nThis state indicates that neither PDP context nor MBMS context exist.\nThis state exists when PDP context activation was requested by the MS.\nThis state exists when deactivation of the PDP contexts was requested by the MS.\nThis state indicates that the PDP context is active.\nThis state exists when modification of the PDP context was requested by the MS.\nThis state exists when the MS has requested the network to activate an MBMS context.\nThis state indicates that the MBMS context is active.\n\n\n\nFigure 6.1/3GPP TS 24.008: Session management states for PDP context handling in the MS (overview)\nIt shall be noted, that Figure 6.1/3GPP TS 24.008 applies to both the PDP context activation procedure and the secondary PDP context activation procedure, though the distinction in messages regarding the activation of PDP contexts is not shown here for simplicity.\nThe figure depicts the session management states for MBMS context handling in the MS (Overview) context, illustrating the various states that can be activated to manage session management in the mobile broadband system.\nFigure 6.1a/3GPP TS 24.008: Session management states for MBMS context handling in the MS (overview)\nIn this subclause, the possible states of an SM entity on the network side are described. As illustrated in figures 6.2/3GPP TS 24.008 and 6.2a/3GPP TS 24.008 there are eight SM states on the network side.\nThis state indicates that the PDP context or MBMS context is not active.\nThis state exists when the PDP context activation was initiated by the network.\nThis state exists when deactivation of the PDP context was requested by the network.\nThis state indicates that the PDP context is active.\nThis state exists when modification of the PDP context was requested by the network.\nThis state exists when the network has initiated MBMS context activation.\nThis state exists when the network has requested the MS to deactivate an MBMS context.\nThis state indicates that the MBMS context is active.\n\nThe figure depicts the session management states for PDP context handling on the network side, as outlined in TS 24.008. It illustrates the various states and their corresponding actions, such as session initiation, session maintenance, and session termination. The figure provides a comprehensive overview of the session management process, enabling network operators to understand the intricacies of session management in 3GPP TS 24.008.\nFigure 6.2/3GPP TS 24.008: Session management states for PDP context handling on the network side (overview)\nIt shall be noted, that figure 6.2/3GPP TS 24.008 applies to both the PDP context activation procedure and the secondary PDP context activation procedure, though the distinction in messages regarding the activation of PDP contexts is not shown here for simplicity.\nThe figure depicts the session management states for MBMS context handling on the network side, as outlined in TS 24.008. It illustrates the various states that MBMS can be in, such as active, idle, and idle-inactive, and their corresponding actions. The figure also includes a flow diagram to illustrate the communication between the MBMS and the network, highlighting the flow of data and control.\nFigure 6.2a/3GPP TS 24.008: Session management states for MBMS context handling on the network side (overview)\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "6.1.2A\tPDP address allocation",
                            "text_content": "PDP addresses are handled differently for PDN interworking of type PPP and IP (IPv4 or IPv6).\nDuring PDP context activation (see subclause 6.1.3.1), the MS can configure an IPv4 address, or obtain an IPv6 interface identifier to be used during the IETF-based IP address allocation after PDP context establishment.\nThe MS can obtain an IPv4 address or an IPv6 prefix via an IETF-based IP address allocation mechanism once the PDP context is established.\nThe following IETF-based IP address/prefix allocation methods are specified for GPRS (the corresponding procedures are specified in 3GPP TS 29.061 [130]):\na)\t/64 IPv6 default prefix allocation via IPv6 stateless address autoconfiguration. Optionally, allocation of additional IPv6 prefix(es) with length /64 or shorter via stateful DHCPv6 Prefix Delegation (see IETF RFC 3633 [139]);\nb)\tIPv4 address allocation and IPv4 parameter configuration via DHCPv4;\nUpon deactivation of a default PDP context, the MS shall locally release any IPv4 address or IPv6 prefix allocated to the MS for the corresponding PDN connection.\nDuring PDP context activation no PDP address is configured. Instead, such information is negotiated and configured during the NCP phase of PPP.\nThe MS shall set the PDP type in the PDP address IE in the ACTIVATE PDP CONTEXT REQUEST message when requesting establishment of a default PDP context; the detailed rules with regards to IP version for MS and network side are defined in subclause 6.1.3.1.\nIf the MS wants to use DHCPv4 for IPv4 address assignment, it shall indicate that to the network within the Protocol Configuration Options IE in the ACTIVATE PDP CONTEXT REQUEST.\nIf the MS requests allocation of an IPv6 address, the network constructs it of two parts: a /64 IPv6 prefix and an interface identifier of 64 bits length. The IPv6 prefix part is not used immediately by the MS; however, the network shall use the same IPv6 prefix in subsequent procedures for IETF-based IP address allocation. The interface identifier is only used for building a unique link-local IPv6 address.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "6.1.3\tSession Management procedures",
                            "text_content": "The MS's maximum number of active PDP contexts in a PLMN is determined by the lowest of the maximum number of Network Service Access Point Identifiers (NSAPIs) allowed by the protocol (as specified in subclause 10.5.6.2), the PLMN's maximum number of PDP contexts in Iu or A/Gb mode and the MS's implementation-specific maximum number of PDP contexts.\nNOTE:\tSubclauses 6.1.3.1.3 and 6.1.3.2.2 specify how the MS determines the PLMN's maximum number of PDP contexts in Iu or A/Gb mode.\nThe purpose of this procedure is to establish a PDP context between the MS and the network for a specific QoS on a specific NSAPI. The PDP context activation may be initiated by the MS or the initiation may be requested by the network.\nAn MS attached for emergency bearer services shall only request a PDP context with request type set to \"emergency\". If there already is a PDN connection for emergency bearer services established, the MS shall not request an additional PDN connection for emergency bearer services. The MS shall not request emergency bearer services in A/Gb mode or in GERAN Iu mode.\nIf the MS has reached the maximum number of active PDP contexts (see subclause 6.1.3.0) and the upper layers of the MS request activation of additional PDP context, then the MS shall not send an ACTIVATE PDP CONTEXT REQUEST message or an ACTIVATE SECONDARY PDP CONTEXT REQUEST message to activate the additional PDP context. If the additional PDP context is a PDP context with type set to \"emergency\", then it may skip explicit deactivation to free PDP context resources and instead re-activate the necessary context(s) relying on network handling of abnormal cases as specified in subclause 6.1.3.1.5 case c). In either case it is an MS implementation option which PDP context(s) to re-use for emergency.\nEach PDP address may be described by one or more PDP contexts in the MS or the network. The PDP Context Activation procedure is used to activate the default PDP context for a given PDP address and APN, i.e. a PDN connection, whereas all additional contexts associated to the same PDP address and APN are activated with the secondary PDP context activation procedure. An MS supporting S1 mode shall keep the default PDP context activated during the lifetime of the PDN connection. An MS not supporting S1 mode should apply the same behaviour (see 3GPP TS 23.060 [74]). When more than one PDP context is associated to a PDP address, there shall be a Traffic Flow Template (TFT), including one or more packet filters, for each or all but one context. The downlink and uplink packet filters are considered separately. If present, the TFT shall be sent transparently either from the MS via the SGSN to the GGSN to enable packet classification and policing for downlink data transfer in the GGSN or from the GGSN via the SGSN to the MS to be used in a network requested secondary PDP context activation procedure (see subclause 6.1.3.2) and enable packet classification and policing for uplink data transfer in the MS (see 3GPP TS 23.060 [74]).\nFor the purpose of requesting non-IP connectivity, the MS shall set the PDP type number in the Requested PDP address information element in the ACTIVATE PDP CONTEXT REQUEST message to \"non IP\". The MS supporting non-IP connectivity shall also support the extended protocol configuration options IE.\nFor the purpose of requesting IP address allocation the MS shall set the PDP type number in the Requested PDP address information element in the ACTIVATE PDP CONTEXT REQUEST message based on its IP stack configuration (e.g. the per APN settings specified in 3GPP TS 23.060 [74]) as follows:\na)\tAn MS, which is IPv6 and IPv4 capable, and\n-\thas not been allocated an IP address for this APN, shall set the PDP type number to \"IPv4v6 address\";\n-\thas been allocated an IPv4 address for this APN and received the SM cause #52, \"single address bearers only allowed\", and is requesting an IPv6 address, shall set the PDP type number to \"IPv6 address\";\n-\thas been allocated an IPv6 address for this APN and received the SM cause #52, \"single address bearers only allowed\", and is requesting an IPv4 address, shall set the PDP type number to \"IPv4 address\".\nb)\tAn MS, which is only IPv4 capable, shall set the PDP type number to \"IPv4 address\".\nc)\tAn MS, which is only IPv6 capable, shall set the PDP type number to \"IPv6 address\".\nd)\tWhen the IP version capability of the MS is unknown in the MS (as in the case when the MT and TE are separated and the capability of the TE is not known in the MT), the MS shall set the PDP type number to \"IPv4v6 address\".\nOn receipt of the ACTIVATE PDP CONTEXT REQUEST message sent by the MS, the network when allocating an IP address shall take into account the PDP type number, the operator policies of the home and visited network, and the user's subscription data.\n-\tIf the MS requests PDP type IPv4v6, but the network configuration dictates the use of IPv4 addressing only or IPv6 addressing only for this APN, the network shall override the PDP type requested by the MS to a single address PDP type (IPv4 or IPv6). In the ACTIVATE PDP CONTEXT ACCEPT message sent to the MS, the network sets the PDP type number to either \"IPv4 address\" or \"IPv6 address\" and the SM cause to #50 \"PDP type IPv4 only allowed\", or #51 \"PDP type IPv6 only allowed\", respectively (see subclause 6.1.3.1.1).\n-\tIf the MS requests PDP type IPv4v6, but the operator uses single addressing per PDP context due to interworking with nodes of earlier releases, the network shall override the PDP type requested by setting the PDP type in the ACTIVATE PDP CONTEXT ACCEPT message sent to the MS to a single address PDP type. In the ACTIVATE PDP CONTEXT ACCEPT message sent to the MS, the network sets the PDP type number to either \"IPv4 address\" or \"IPv6 address\" and the SM cause to #52, \"single address bearers only allowed\" (see subclause 6.1.3.1.1).\nThe MS, in a pre release 8 network not supporting IPv4/v6, could encounter other network reactions:\n-\tIf the MS requests PDP type IPv4v6, and the PDP type is changed to PDP type IPv4 and no SM cause is included, the MS should request another PDP context for PDP type IPv6 to the same APN.\nNOTE:\tSome networks can respond with ACTIVATE PDP CONTEXT REJECT with SM cause #28 \"unknown PDP address or PDP type\". In that instance, the MS can attempt to establish dual-stack connectivity by performing two PDP context activation request procedures to activate an IPv4 PDP context and an IPv6 PDP context, both to the same APN.\nIn order to request a PDP context activation, the MS sends an ACTIVATE PDP CONTEXT REQUEST message to the network, enters the state PDP-ACTIVE-PENDING and starts timer T3380. The message contains the selected NSAPI, PDP type number and requested QoS. The MS shall ensure that the selected NSAPI is not currently being used by another Session Management entity in the MS. The MS may indicate the support of Network Requested Bearer Control procedures, the support of local IP address in TFTs or the 3GPP PS data off UE status in the protocol configuration options information element. The MS supporting S1 mode shall indicate subscribed, interactive or background traffic class in the QoS requested. The MS not supporting S1 mode should indicate subscribed, interactive or background traffic class in the QoS requested. If there is a subscribed QoS profile available for the MS, the network may ignore the requested QoS and apply the subscribed QoS profile (see 3GPP TS 23.060 [74]).\nThe MS shall set the request type to \"initial request\" when the MS is establishing connectivity to an additional PDN for the first time, i.e. when it is an initial attach to that PDN. The MS shall set the request type to \"handover\" when the connectivity to a PDN is established upon handover from a non-3GPP access network and the MS was connected to that PDN before the handover to the 3GPP access network. If the MS is establishing connectivity for emergency bearer services it shall set the request type to \"emergency\" and not include an APN in the ACTIVATE PDP CONTEXT REQUEST message.\nUpon receipt of the ACTIVATE PDP CONTEXT REQUEST message with request type set to \"emergency\" the network shall use the APN or the GGSN/PDN GW configured for emergency bearer services.\nUpon receipt of an ACTIVATE PDP CONTEXT REQUEST message with a PDP type number \"IPv4v6 address\" in the Requested PDP address information element, the network shall on sending the ACTIVATE PDP CONTEXT ACCEPT message:\n-\tinclude the SM cause information element with cause #50 \"PDP type IPv4 only allowed\", if the requested PDN connectivity is accepted with the restriction that only PDP type IPv4 is allowed; or\n-\tinclude the SM cause information element with cause #51 \"PDP type IPv6 only allowed\", if the requested PDN connectivity is accepted with the restriction that only PDP type IPv6 is allowed; or\n-\tinclude the SM cause information element with cause #52 \"single address bearers only allowed\", if the requested PDN connectivity is accepted with the restriction that only single IP version bearers are allowed.\nIf the MS receives the SM cause value #50 \"PDP type IPv4 only allowed\" or #51 \"PDP type IPv6 only allowed\" in the ACTIVATE PDP CONTEXT ACCEPT message, the MS shall not subsequently request another PDP context to get a PDP Type different from the one allowed by the network, until:\n-\tall PDP contexts to the given APN are deactivated either explicitly between the MS and the network, i.e. PDP context deactivation procedure, or implicitly (without peer to peer signalling between the MS and the network) as a result of:\ni)\tPDP context synchronization during routing area updating or service request procedure;\nii)\tPDP context deactivation initiated by the network,\niii)\tdetach from GPRS services; or;\niv)\ta service request procedure is rejected with a cause which results in the MS entering state GMM-DEREGISTERED; or\n-\tthe PDP type which is used to access to the APN is changed.\nNOTE 1:\tRequest to send another ACTIVATE PDP CONTEXT REQUEST message with a specific PDP type comes from upper layers.\nIf the MS receives the SM cause value #52 \"single address bearers only allowed\" in the ACTIVATE PDP CONTEXT ACCEPT message, the MS should subsequently request another PDP context for the other PDP type to the same APN with a single address PDP type (IPv4 or IPv6) other than the one already activated.\nNOTE 2:\tIf the MT and TE are separated, the MS might not be able to use SM cause #52 \"single address bearers only allowed\" as a trigger for activating a second single-IP-stack PDP context.\nUpon receipt of an ACTIVATE PDP CONTEXT REQUEST message, the network selects a radio priority level based on the QoS negotiated and may reply with an ACTIVATE PDP CONTEXT ACCEPT message.\nIf the ACTIVATE PDP CONTEXT REQUEST message included a low priority indicator set to \"MS is configured for NAS signalling low priority\", the network shall store the NAS signalling low priority indication within the default PDP context.\nIf the network receives an ACTIVATE PDP CONTEXT REQUEST message with the same combination of APN and PDP type as an already existing PDN connection, and multiple PDN connections for a given APN are allowed, the network may retain the existing PDP contexts and proceed with the requested PDP context activation procedure.\nUpon receipt of the message ACTIVATE PDP CONTEXT ACCEPT the MS shall stop timer T3380, shall enter the state PDP-ACTIVE. If the protocol configuration options information element is present, the network may indicate the Bearer Control Mode that shall be used, the network support of local IP address in TFTs, or the 3GPP PS data off support indication. If the protocol configuration options information element is not present or the Selected Bearer Control Mode parameter is not present in the protocol configuration options information element, the MS shall apply Bearer Control Mode 'MS only' for all active PDP contexts sharing the same PDP Address and APN. If the 3GPP PS data off UE status is \"activated\", the MS behaves as described in subclause 4.7.1.10. If the offered QoS parameters received from the network differ from the QoS requested by the MS, the MS shall either accept the negotiated QoS or initiate the PDP context deactivation procedure. If the Request type information element is not present, the network shall assume that the request type is \"initial request\".\nNOTE 3:\tIf the MS requested a value for a QoS parameter that is not within the range specified by 3GPP TS 23.107 [81], the network should negotiate the parameter to a value that lies within the specified range.\nIf the lower layers provide a L-GW Transport Layer Address value together with the ACTIVATE PDP CONTEXT REQUEST message and a PDN connection is established as a LIPA PDN connection due to the ACTIVATE PDP CONTEXT REQUEST message, then the SGSN shall store the L-GW Transport Layer Address value as the GGSN address in the PDP context of the LIPA PDN connection. If connectivity with the requested APN is accepted and the network considers this PDN connection a LIPA PDN connection, then subject to operator policy the SGSN shall include in the ACTIVATE PDP CONTEXT ACCEPT message the Connectivity type IE indicating \"the PDN connection is considered a LIPA PDN connection\".\nIf the lower layers provide a SIPTO L-GW Transport Layer Address value identifying a L-GW together with the ACTIVATE PDP CONTEXT REQUEST message and a PDN connection is established as a SIPTO at the local network PDN connection due to the ACTIVATE PDP CONTEXT REQUEST message, then the SGSN shall store the SIPTO L-GW Transport Layer Address value as the P-GW address in the PDP context of the SIPTO at the local network PDN connection.\nIf the lower layers provide a LHN-ID value together with the ACTIVATE PDP CONTEXT REQUEST message and a PDN connection is established as a SIPTO at the local network PDN connection due to the ACTIVATE PDP CONTEXT REQUEST message, then the SGSN shall store the LHN-ID value in the PDP context of the SIPTO at the local network PDN connection.\nNOTE 4:\tThe receipt of a LHN-ID value during the establishment of the PDN connection, during routing area updating procedure or during inter-SGSN handover can be used as an indication by the SGSN that the SIPTO at the local network PDN connection is established to a stand-alone GW (see 3GPP TS 23.060 [74]).\nIn A/Gb mode, the MS shall initiate establishment of the logical link for the LLC SAPI indicated by the network with the offered QoS and selected radio priority level if no logical link has been already established for that SAPI. If the offered QoS parameters received from the network differ from the QoS requested by the MS, the MS shall either accept the negotiated QoS or initiate the PDP context deactivation procedure. If the LLC SAPI indicated by the network can not be supported by the MS, the MS shall initiate the PDP context deactivation procedure.\nIn Iu mode, both the network and the MS shall store the LLC SAPI and the radio priority in the PDP context. If a Iu mode to A/Gb mode system change is performed, the new SGSN shall initiate establishment of the logical link using the negotiated QoS profile, the negotiated LLC SAPI, and selected radio priority level stored in the PDP context as in a A/Gb mode to A/Gb mode Routing Area Update.\nAn MS, which is capable of operating in A/Gb mode, shall use a valid LLC SAPI, while an MS which is not capable of operating in A/Gb mode shall indicate the LLC SAPI value as \"LLC SAPI not assigned\" in order to avoid unnecessary value range checking and any other possible confusion in the network. When the MS uses a valid LLC SAPI, the network shall return a valid LLC SAPI. The network shall return the \"LLC SAPI not assigned\" value only when the MS uses the \"LLC SAPI not assigned\" value.\nNOTE 5:\tThe radio priority level and the LLC SAPI parameters, though not used in Iu mode, shall be included in the messages, in order to support handover between Iu mode and A/Gb mode networks.\nIf a WLAN offload indication information element is included in the ACTIVATE PDP CONTEXT ACCEPT message, the MS shall store the WLAN offload acceptability values for this PDN connection and use the UTRAN offload acceptability value to determine whether this PDN connection is offloadable to WLAN or not.\nAt inter-system change from Iu mode to A/Gb mode, SM shall locally deactivate the active PDP context(s) if SM does not have the following parameters:\n-\tLLC SAPI; and\n-\tradio priority.\nUpon receipt of the ACTIVATE PDP CONTEXT ACCEPT message with the Connectivity type IE indicating \"the PDN connection is considered a LIPA PDN connection\", the MS provides an indication to the upper layers that the connectivity is provided by a LIPA PDN connection.\nIn order to request a PDP context activation, the network sends a REQUEST PDP CONTEXT ACTIVATION message to the MS and starts timer T3385. The message contains an offered PDP address. If available, the APN shall be included in the REQUEST PDP CONTEXT ACTIVATION message.\nUpon receipt of a REQUEST PDP CONTEXT ACTIVATION message if an APN is indicated in the message and the timer T3396 is running for the APN, the MS shall stop the timer T3396, and then either initiate the PDP context activation procedure as described in the previous subclause or reject the activation request by sending a REQUEST PDP CONTEXT ACTIVATION REJECT message as described in subclause 6.1.3.1.4. If the REQUEST PDP CONTEXT ACTIVATION message did not contain an APN, then the MS shall stop the timer T3396 associated with no APN. The value of the reject cause IE of the REQUEST PDP CONTEXT ACTIVATION REJECT message shall indicate the reason for rejection, e.g. \"insufficient resources to activate another context\".\nThe ACTIVATE PDP CONTEXT REQUEST message sent by the MS in order to initiate the PDP context activation procedure shall contain the PDP address, PDP Type and APN requested by the network in the REQUEST PDP CONTEXT ACTIVATION message.\nUpon receipt of the ACTIVATE PDP CONTEXT REQUEST message, the network shall stop timer T3385.\nThe same procedures then apply as described for MS initiated PDP context activation.\nUpon receipt of an ACTIVATE PDP CONTEXT REQUEST message the network may reject the MS initiated PDP context activation by sending an ACTIVATE PDP CONTEXT REJECT message to the MS. The message shall contain a cause code that typically indicates one of the following causes:\n# 8:\tOperator Determined Barring;\n# 26:\tinsufficient resources;\n# 27:\tmissing or unknown APN;\n# 28:\tunknown PDP address or PDP type;\n# 29:\tuser authentication failed;\n# 30:\tactivation rejected by GGSN, Serving GW or PDN GW;\n# 31:\tactivation rejected, unspecified;\n# 32:\tservice option not supported;\n# 33:\trequested service option not subscribed;\n# 34:\tservice option temporarily out of order;\n# 35: NSAPI already used. The network shall not send this cause code (see note 1);\n# 50:\tPDP type IPv4 only allowed;\n# 51:\tPDP type IPv6 only allowed;\n# 57:\tPDP type IPv4v6 only allowed;\n# 58:\tPDP type non IP only allowed;\n# 65:\tmaximum number of PDP contexts reached;\n# 66:\trequested APN not supported in current RAT and PLMN combination;\n# 95 - 111:\tprotocol errors;\n#112:\tAPN restriction value incompatible with active PDP context; or\n#113:\tMultiple accesses to a PDN connection not allowed.\nNOTE 1:\tPre-R99 network may send this cause code.\nThe network may include a Back-off timer value IE in the ACTIVATE PDP CONTEXT REJECT message. If the SM cause value is #26 \"insufficient resources\" and if the request type in the ACTIVATE PDP CONTEXT REQUEST was set to \"emergency\", the network shall not include a Back-off timer value IE.\nIf the Back-off timer value IE is included and the SM cause value is different from #26 \"insufficient resources\", #50 \"PDP type IPv4 only allowed\", #51 \"PDP type IPv6 only allowed\", #57 \"PDP type IPv4v6 only allowed\", #58 \"PDP type non IP only allowed\" and #65 \"maximum number of PDP contexts reached\", the network may include the Re-attempt indicator IE to indicate whether the MS is allowed to attempt a PDN connectivity procedure in the PLMN for the same  in S1 mode, and whether another attempt in A/Gb and Iu mode or in S1 mode is allowed in an equivalent PLMN.\nIf the SM cause value is #50 \"PDP type IPv4 only allowed\", #51 \"PDP type IPv6 only allowed\", #57 \"PDP type IPv4v6 only allowed\" or #58 \"PDP type non IP only allowed\", the network may include the Re-attempt indicator IE without Back-off timer value IE to indicate whether the MS is allowed to attempt a PDP context activation procedure in an equivalent PLMN for the same APN in A/Gb or Iu mode using the same PDP type.\nIf the SM cause value is #66 \"requested APN not supported in current RAT and PLMN combination\", the network may include the Re-attempt indicator IE without Back-off timer value IE to indicate whether the MS is allowed to attempt a PDP context activation procedure in an equivalent PLMN for the same APN in A/Gb or Iu mode.\nUpon receipt of an ACTIVATE PDP CONTEXT REJECT message, the MS shall stop timer T3380 and enter/remain in state PDP-INACTIVE.\nIf the ACTIVATE PDP CONTEXT REQUEST message was sent with request type set to \"emergency\" and the MS receives an ACTIVATE PDP CONTEXT REJECT message, then the MS may inform the upper layers of the failure to establish the emergency bearer.\nNOTE 2:\tThis can result in the upper layers requesting establishment of a CS emergency call (if not already attempted in the CS domain) or initiating other implementation specific mechanisms, e.g. procedures specified in 3GPP TS 24.229 [95] can result in the emergency call being attempted to another IP-CAN.\nIf the SM cause value is #26 \"insufficient resources\" and the Back-off timer value IE is included, the MS shall ignore the Re-attempt indicator IE provided by the network, if any, and take different actions depending on the timer value received for timer T3396 in the Back-off timer value IE (if the MS is configured for dual priority, exceptions are specified in subclause 6.1.3.12; if the MS is an MS configured to use AC11 – 15 in selected PLMN, exceptions are specified in subclause 6.1.3.11):\ni)\tif the timer value indicates neither zero nor deactivated and an APN was included in the ACTIVATE PDP CONTEXT REQUEST message, the MS shall stop timer T3396 associated with the corresponding APN, if it is running. If the timer value indicates neither zero nor deactivated, the request type was different from \"emergency\", and no APN was included in the ACTIVATE PDP CONTEXT REQUEST message, the MS shall stop timer T3396 associated with no APN if it is running. The MS shall then start timer T3396 with the value provided in the Back-off timer value IE and:\n-\tshall not send another ACTIVATE PDP CONTEXT REQUEST, ACTIVATE SECONDARY PDP CONTEXT REQUEST or MODIFY PDP CONTEXT REQUEST message with exception of those identified in subclause 6.1.3.3, for the same APN that was sent by the MS, until timer T3396 expires or timer T3396 is stopped; and\n-\tshall not send another ACTIVATE PDP CONTEXT REQUEST message without an APN and with request type different from \"emergency\", or another ACTIVATE SECONDARY PDP CONTEXT REQUEST or MODIFY PDP CONTEXT REQUEST message with exception of those identified in subclause 6.1.3.3, for a non-emergency PDN connection established without an APN sent by the MS, if the APN was not included in the ACTIVATE PDP CONTEXT REQUEST message and the request type was different from \"emergency\", until timer T3396 expires or timer T3396 is stopped.\nThe MS shall not stop timer T3396 upon a PLMN change or inter-system change;\nii)\tif the timer value indicates that this timer is deactivated, the MS:\n-\tshall not send another ACTIVATE PDP CONTEXT REQUEST, ACTIVATE SECONDARY PDP CONTEXT REQUEST or MODIFY PDP CONTEXT REQUEST message with exception of those identified in subclause 6.1.3.3, for the same APN that was sent by the MS, until the MS is switched off or the SIM/USIM is removed or the MS receives a REQUEST PDP CONTEXT ACTIVATION, REQUEST SECONDARY PDP CONTEXT ACTIVATION or MODIFY PDP CONTEXT REQUEST message with the same APN from the network or a DEACTIVATE PDP CONTEXT REQUEST message including SM cause #39 \"reactivation requested\" for a PDP context which was activated by the MS for the same APN from the network; and\n-\tshall not send another ACTIVATE PDP CONTEXT REQUEST message without an APN and with request type different from \"emergency\", or another ACTIVATE SECONDARY PDP CONTEXT REQUEST or MODIFY PDP CONTEXT REQUEST message with exception of those identified in subclause 6.1.3.3, for a non-emergency PDN connection established without an APN sent by the MS, if the APN was not included in the ACTIVATE PDP CONTEXT REQUEST message and the request type was different from \"emergency\", until the MS is switched off or the SIM/USIM is removed or the MS receives for a non-emergency PDP context which was activated by the MS any of the following messages: a REQUEST PDP CONTEXT ACTIVATION without an APN, a REQUEST SECONDARY PDP CONTEXT ACTIVATION or MODIFY PDP CONTEXT REQUEST message for a non-emergency PDN connection established without an APN sent by the MS, or a DEACTIVATE PDP CONTEXT REQUEST message including SM cause #39 \"reactivation requested\" for a non-emergency PDN connection which was established without an APN sent by the MS.\nThe timer T3396 remains deactivated upon a PLMN change or inter-system change; and\niii)\tif the timer value indicates that this timer is zero, the MS:\n-\tshall stop timer T3396 associated with the corresponding APN, if running, and may send an ACTIVATE PDP CONTEXT REQUEST, ACTIVATE SECONDARY PDP CONTEXT REQUEST or MODIFY PDP CONTEXT REQUEST message for the same APN; and\n-\tif the APN was not included in the ACTIVATE PDP CONTEXT REQUEST message and the request type was different from \"emergency\", the MS shall stop timer T3396 associated with no APN, if running, and may send an ACTIVATE PDP CONTEXT REQUEST message without an APN, or another ACTIVATE SECONDARY PDP CONTEXT REQUEST or MODIFY PDP CONTEXT REQUEST message for a non-emergency PDN connection established without an APN sent by the MS.\nIf the Back-off timer value IE is not included, then the MS may send another ACTIVATE PDP CONTEXT REQUEST, ACTIVATE SECONDARY PDP CONTEXT REQUEST or MODIFY PDP CONTEXT REQUEST message for the same APN.\nThe MS may initiate a PDP context activation procedure for emergency bearer services even if the timer T3396 is running.\nIf the timer T3396 is running when the MS enters state GMM-DEREGISTERED, the MS remains switched on, and the SIM/USIM in the MS remains the same, then timer T3396 is kept running until it expires or it is stopped.\nIf the MS is switched off when the timer T3396 is running, and if the SIM/USIM in the MS remains the same when the MS is switched on, the MS shall behave as follows:\n-\tlet t1 be the time remaining for T3396 timeout at switch off and let t be the time elapsed between switch off and switch on. If t1 is greater than t, then the timer shall be restarted with the value t1 – t. If t1 is equal to or less than t, then the timer need not be restarted. If the MS is not capable of determining t, then the MS shall restart the timer with the value t1; and\n-\tif prior to switch off, timer T3396 was running because an ACTIVATE PDP CONTEXT REQUEST, ACTIVATE SECONDARY PDP CONTEXT REQUEST, MODIFY PDP CONTEXT REQUEST or ACTIVATE MBMS CONTEXT REQUEST message containing the low priority indicator set to \"MS is configured for NAS signalling low priority\" was rejected with a timer value for timer T3396, and if timer T3396 is restarted at switch on, then the MS configured for dual priority shall handle session management requests as indicated in subclause 6.1.3.12.\nIf the SM cause value is different from #26 \"insufficient resources\", #50 \"PDP type IPv4 only allowed\", #51 \"PDP type IPv6 only allowed\", #57 \"PDP type IPv4v6 only allowed\", #58 \"PDP type non IP only allowed\", #65 \"maximum number of PDP contexts reached\", and #66 \"requested APN not supported in current RAT and PLMN combination\", and the Back-off timer value IE is included, the MS shall take different actions depending on the timer value received in the Back-off timer value IE (if the MS is an MS configured to use AC11 – 15 in selected PLMN, exceptions are specified in subclause 6.1.3.13):\ni)\tif the timer value indicates neither zero nor deactivated, the MS shall start the back-off timer with the value provided in the Back-off timer value IE for the PDP context activation procedure and PLMN and  combination and:\n-\tshall not send another ACTIVATE PDP CONTEXT REQUEST message in the PLMN for the same APN that was sent by the MS, until the back-off timer expires, the MS is switched off or the SIM/USIM is removed; and\n-\tshall not send another ACTIVATE PDP CONTEXT REQUEST message in the PLMN without an APN if the APN was not included in the ACTIVATE PDP CONTEXT REQUEST message, until the back-off timer expires, the MS is switched off or the SIM/USIM is removed;\nii)\tif the timer value indicates that this timer is deactivated, the MS:\n-\tshall not send another ACTIVATE PDP CONTEXT REQUEST message in the PLMN for the same APN that was sent by the MS, until the MS is switched off or the SIM/USIM is removed; and\n-\tshall not send another ACTIVATE PDP CONTEXT REQUEST message in the PLMN without an APN if the APN was not included in the ACTIVATE PDP CONTEXT REQUEST message, until the MS is switched off or the SIM/USIM is removed; and\niii)\tif the timer value indicates that this timer is zero, the MS:\n-\tmay send an ACTIVATE PDP CONTEXT REQUEST message in the PLMN for the same APN; and\n-\tmay send an ACTIVATE PDP CONTEXT REQUEST message in the PLMN without an APN if the APN was not included in the ACTIVATE PDP CONTEXT REQUEST message.\nIf the Back-off timer value IE is not included, then the MS shall ignore the Re-attempt indicator IE provided by the network, if any.\ni)\tAdditionally, if the SM cause value is #8 \"operator determined barring\", #27 \"missing or unknown APN\", #32 \"service option not supported\", or #33 \"requested service option not subscribed\", the MS shall proceed as follows:\n-\tif the MS is registered in its HPLMN or in a PLMN that is within the EHPLMN list (if the EHPLMN list is present), the MS shall behave as described above in the present subclause, using the configured SM_RetryWaitTime value as specified in 3GPP TS 24.368 [135] or in USIM file NASCONFIG as specified in 3GPP TS 31.102 [112], if available, as back-off timer value; and\n-\totherwise, if the MS is not registered in its HPLMN or in a PLMN that is within the EHPLMN list (if the EHPLMN list is present), or if the SM_RetryWaitTime value is not configured, the MS shall behave as described above in the present subclause using the default value of 12 minutes for the back-off timer.\nii)\tFor SM cause values different from #8 \"operator determined barring\", #27 \"missing or unknown APN\", #32 \"service option not supported\", or #33 \"requested service option not subscribed\", the MS behaviour regarding the start of a back-off timer is unspecified.\nThe MS shall not stop any back-off timer upon a PLMN change or inter-system change. If the network indicates that a back-off timer for the PDP context activation procedure and PLMN and APN combination is deactivated, then it remains deactivated upon a PLMN change or inter-system change.\nNOTE 1:\tThis means the back-off timer can still be running or be deactivated for the given SM procedure and PLMN and APN combination when the MS returns to the PLMN or when it performs inter-system change back from S1 mode to A/Gb or Iu mode. Thus the MS can still be prevented from sending another ACTIVATE PDP CONTEXT REQUEST message in the PLMN for the same APN.\nIf the back-off timer is started upon receipt of an ACTIVATE PDP CONTEXT REJECT message (i.e. the timer value was provided by the network, a configured value is available or the default value is used as explained above) or the back-off timer is deactivated, the MS behaves as follows:\ni)\tafter a PLMN change the MS may send an ACTIVATE PDP CONTEXT REQUEST message for the same  in the new PLMN, if the back-off timer is not running and is not deactivated for the PDP context activation procedure and the combination of new PLMN and APN;\nFurthermore as an implementation option, for the SM cause values #8 \"operator determined barring\", #27 \"missing or unknown APN\", #32 \"service option not supported\" or #33 \"requested service option not subscribed\", if the network does not include a Re-attempt indicator IE, the MS may decide not to automatically send another ACTIVATE PDP CONTEXT REQUEST message for the same APN, if the MS registered to a new PLMN which is in the list of equivalent PLMNs.\nii)\tif the network does not include the Re-attempt indicator IE to indicate whether re-attempt in S1 mode is allowed, or the MS ignores the Re-attempt indicator IE, e.g. because the Back-off timer value IE is not included, then:\n-\tif the MS is registered in its HPLMN or in a PLMN that is within the EHPLMN list (if the EHPLMN list is present), the MS shall apply the configured SM_RetryAtRATChange value as specified in 3GPP TS 24.368 [135] or in USIM file NASCONFIG as specified in 3GPP TS 31.102 [112], if available, to determine whether the MS may attempt a PDN connectivity procedure for the same PLMN and APN combination in S1 mode; and\n-\tif the MS is not registered in its HPLMN or in a PLMN that is within the EHPLMN list (if the EHPLMN list is present), or if the NAS configuration MO as specified in 3GPP TS 24.368 [135] is not available and the value for inter-system change is not configured in the USIM file NASCONFIG, then the MS behaviour regarding a PDN connectivity procedure for the same PLMN and APN combination in S1 mode is unspecified; and\niii)\tif the network includes the Re-attempt indicator IE indicating that re-attempt in an equivalent PLMN is not allowed, then depending on the timer value received in the Back-off timer value IE, for each combination of a PLMN from the equivalent PLMN list and the APN the MS shall start a back-off timer for the PDP context activation procedure with the value provided by the network, or deactivate the respective back-off timer as follows:\n-\tIf the Re-attempt indicator IE additionally indicates that re-attempt in S1 mode is allowed, the MS shall start or deactivate the back-off timer for A/Gb and Iu mode only; and\n-\totherwise the MS shall start or deactivate the back-off timer for A/Gb, Iu, and S1 mode.\nIf the back-off timer for a PLMN and APN combination was started or deactivated in S1 mode upon receipt of a PDN CONNECTIVITY REJECT message (see 3GPP TS 24.301 [120]) and the network indicated that re-attempt in A/Gb or Iu mode is allowed, then this back-off timer does not prevent the MS from sending an ACTIVATE PDP CONTEXT REQUEST message in this PLMN for the same APN in A/Gb or Iu mode. If the network indicated that re-attempt in A/Gb or Iu mode is not allowed, the MS shall not send any ACTIVATE PDP CONTEXT REQUEST message in this PLMN for the same APN in A/Gb or Iu mode until the back-off timer expires, the MS is switched off or the USIM is removed.\nNOTE 2:\tThe back-off timer is used to describe a logical model of the required MS behaviour. This model does not imply any specific implementation, e.g. as a timer or timestamp.\nNOTE 3:\tReference to back-off timer in this section can either refer to use of timer T3396 or to use of a different packet system specific timer within the MS. Whether the MS uses T3396 as a back-off timer or it uses different packet system specific timers as back-off timers is left up to MS implementation. This back-off timer is stopped when the MS is switched off or the SIM/USIM is removed.\nThe MS may initiate a PDP context activation procedure for emergency bearer services even if the back-off timer is running.\nIf the SM cause value is #50 \"PDP type IPv4 only allowed\", #51 \"PDP type IPv6 only allowed\", #57 \"PDP type IPv4v6 only allowed\" or #58 \"PDP type non IP only allowed\", the MS shall ignore the Back-off timer value IE provided by the network, if any. The MS shall not automatically send another ACTIVATE PDP CONTEXT REQUEST message for the same APN that was sent by the MS using the same PDP type, until any of the following conditions is fulfilled:\n-\tthe MS is registered to a new PLMN, and either the network did not include a Re-attempt indicator IE in the ACTIVATE PDP CONTEXT REJECT message or the Re-attempt indicator IE included in the message indicated that re-attempt in an equivalent PLMN is allowed;\n-\tthe MS is registered to a new PLMN which was not in the list of equivalent PLMNs at the time when the ACTIVATE PDP CONTEXT REJECT message was received;\n-\tthe PDP type which is used to access to the APN is changed;\n-\tthe MS is switched off; or\n-\tthe SIM/USIM is removed.\nFor the SM cause values #50 \"PDP type IPv4 only allowed\", #51 \"PDP type IPv6 only allowed\", #57 \"PDP type IPv4v6 only allowed\" and #58 \"PDP type non IP only allowed\", the MS shall ignore the value of the RATC bit in the Re-attempt indicator IE provided by the network, if any.\nNOTE 4:\tFor the SM cause values #50 \"PDP type IPv4 only allowed\", #51 \"PDP type IPv6 only allowed\", #57 \"PDP type IPv4v6 only allowed\" and #58 \"PDP type non IP only allowed\", re-attempt in S1 mode for the same APN (or no APN, if no APN was indicated by the MS) using the same PDP type is not allowed.\nFurthermore as an implementation option, for the SM cause values #50 \"PDP type IPv4 only allowed\", #51 \"PDP type IPv6 only allowed\", #57 \"PDP type IPv4v6 only allowed\" and #58 \"PDP type non IP only allowed\", if the network does not include a Re-attempt indicator IE the MS may decide not to automatically send another ACTIVATE PDP CONTEXT REQUEST message for the same APN that was sent by the MS using the same PDP type, if the MS registered to a new PLMN which is in the list of equivalent PLMNs.\nNOTE 5:\tRequest to send another ACTIVATE PDP CONTEXT REQUEST message with a specific PDP type has to come from upper layers.\nIf the SM cause value is #65 \"maximum number of PDP contexts reached\", the MS shall determine the PLMN's maximum number of PDP contexts in A/Gb or Iu mode (see subclause 6.1.3.0) as the number of active PDP contexts it has. The MS shall ignore the Back-off timer value IE and Re-attempt indicator IE provided by the network, if any.\nNOTE 6:\tIn some situations, when attempting to establish multiple PDP contexts, the number of active PDP contexts that the MS has when SM cause #65 is received is not equal to the maximum number of PDP contexts reached in the network.\nNOTE 7:\tWhen the network supports emergency bearer services, it is not expected that SM cause #65 is returned by the network when the MS requests a PDP context for emergency bearer services.\nThe PLMN's maximum number of PDP contexts in A/Gb or Iu mode applies to the PLMN in which the SM cause #65 \"maximum number of PDP contexts reached\" is received. When the MS is switched off or when the USIM is removed, the MS shall clear all previous determinations representing any PLMN's maximum number of PDP contexts in A/Gb or Iu mode (see subclause 6.1.3.0). Upon successful registration with a new PLMN, the MS may clear previous determinations representing any PLMN's maximum number of PDP contexts in A/Gb or Iu mode.\nIf the SM cause value is #66 \"requested APN not supported in current RAT and PLMN combination\", the MS shall take different actions depending on the Back-off timer value IE and the Re-attempt indicator IE optionally included:\ni)\tIf the Back-off timer value IE is not included, and either the Re-attempt indicator IE is not included or the Re-attempt indicator IE is included indicating that re-attempt in an equivalent PLMN is allowed, the MS shall not send an ACTIVATE PDP CONTEXT REQUEST message for the same APN in the current PLMN in A/Gb or Iu mode until the MS is switched off or the SIM/USIM is removed;\nii)\tif the Back-off timer value IE is not included, and the Re-attempt indicator IE is included and indicates that re-attempt in an equivalent PLMN is not allowed, the MS shall not send an ACTIVATE PDP CONTEXT REQUEST message for the same APN in any PLMN in the list of equivalent PLMNs in A/Gb or Iu mode until the MS is switched off or the SIM/USIM is removed; and\niii)\tif the Back-off timer value IE is included, the MS shall take different actions depending on the timer value received in the Back-off timer value IE:\na)\tif the timer value indicates neither zero nor deactivated, the MS shall start the back-off timer with the value provided in the Back-off timer value IE for the PLMN and APN combination and shall not send another ACTIVATE PDP CONTEXT REQUEST for the same  in the current PLMN in A/Gb or Iu mode until the back-off timer expires, the MS is switched off or the /USIM is removed;\nb)\tif the timer value indicates that this timer is deactivated, the MS shall not send another ACTIVATE PDP CONTEXT REQUEST message for the same APN in the current PLMN in A/Gb or Iu mode until the MS is switched off or the SIM/USIM is removed; and\nc)\tif the timer value indicates that this timer is zero, the MS may send an ACTIVATE PDP CONTEXT REQUEST message in the PLMN for the same APN.\nIf the network includes the Re-attempt indicator IE indicating that re-attempt in an equivalent PLMN is not allowed, then\n-\tfor case a) the MS shall additionally start a back-off timer with the value provided in the Back-off timer value IE for the PDP context activation procedure for each combination of a PLMN from the equivalent PLMN list and the APN; and\n-\tfor case b) the MS shall deactivate the respective back-off timers for the PDP context activation procedure for each combination of a PLMN from the equivalent PLMN list and the APN.\nFor the SM cause value #66 \"requested APN not supported in current RAT and PLMN combination\" the MS shall ignore the value of the RATC bit in the Re-attempt indicator IE provided by the network, if any.\nAs an implementation option, for cases i), iii.a) and iii.b), if the Re-attempt indicator IE is not included, the MS may decide not to automatically send another ACTIVATE PDP CONTEXT REQUEST message for the same APN in a PLMN which is in the list of equivalent PLMNs.\nUpon receipt of the REQUEST PDP CONTEXT ACTIVATION message, the MS may reject the network requested PDP context activation by sending the REQUEST PDP CONTEXT ACTIVATION REJECT message to the network. The message contains the same TI as included in the REQUEST PDP CONTEXT ACTIVATION and an additional cause code that typically indicates one of the following causes:\n# 26: insufficient resources;\n# 31: activation rejected, unspecified;\n# 40: feature not supported; or\n# 95 - 111: protocol errors.\nThe network shall stop timer T3385 and enter state PDP-INACTIVE.\nThe following abnormal cases can be identified:\na)\tExpiry of timers\nIn the mobile station:\nOn the first expiry of the timer T3380, the MS shall resend the ACTIVATE PDP CONTEXT REQUEST and shall reset and restart timer T3380. This retransmission is repeated four times, i.e. on the fifth expiry of timer T3380, the MS shall release all resources possibly allocated for this invocation and shall abort the procedure; no automatic PDP context activation re-attempt shall be performed; and\n-\tif the ACTIVATE PDP CONTEXT REQUEST message was sent with request type set to \"emergency\", then the MS may inform the upper layers of the failure to establish the emergency bearer.\nNOTE:\tThis can result in the upper layers requesting establishment of a CS emergency call (if not already attempted in the CS domain) or initiating other implementation specific mechanisms, e.g. procedures specified in 3GPP TS 24.229 [95] can result in the emergency call being attempted to another IP-CAN.\nOn the network side:\nOn the first expiry of the timer T3385, the network shall resend the message REQUEST PDP CONTEXT ACTIVATION and shall reset and restart timer T3385. This retransmission is repeated four times, i.e. on the fifth expiry of timer T3385, the network shall release possibly allocated resources for this activation and shall abort the procedure.\nb)\tCollision of MS initiated and network requested PDP context activation\nIf the MS uses dynamic PDP addressing that turns out to collide with the network requested PDP address, then there is no detection of collision specified but left for network implementation.\nc)\tMS initiated PDP context activation request for an already activated PDP context (on the network side)\ni)\tIf the network receives a ACTIVATE PDP CONTEXT REQUEST message with the same combination of APN, PDP type and PDP address as an already activated PDP context, the network shall deactivate the existing PDP context and, if any, all the linked PDP contexts (matching the combination of APN, PDP type and PDP address), locally without notification to the MS and proceed with the requested PDP context activation.\nii)\tAlternatively (different combination of APN, PDP type and PDP address), if the NSAPI matches that of an already activated PDP context, then the network shall deactivate only the existing PDP context locally without notification to the MS and proceed with the requested PDP context activation.\nIt is an implementation option if the parameters used for comparison described in clause i) and ii) are the parameters provided in the (current and previous) ACTIVATE PDP CONTEXT REQUESTs or the parameters which are the result of the application of the selection rules defined in 3GPP TS 23.060 [74] Annex A.2.\nThe parameter provided in the current ACTIVATE PDP CONTEXT REQUEST can not be compared to the actually used parameters (result of application of selection rules defined in 3GPP TS 23.060 [74] Annex A.2) of the previously activated PDP contexts.\nIf the network receives an ACTIVATE PDP CONTEXT REQUEST message with request type \"emergency\" and there already is a PDN connection for emergency bearer services existing, the network shall reject the request with cause code #31 \"activation rejected, unspecified\".\nd)\tNetwork initiated PDP context activation request for an already activated PDP context (on the mobile station side)\nIf the MS receives a REQUEST PDP CONTEXT ACTIVATION message with the same combination of APN, PDP type and PDP address as an already activated PDP context, the MS shall deactivate the existing PDP context and, if any, all the linked PDP contexts (matching the combination of APN, PDP type and PDP address) locally without notification to the network and proceed with the requested PDP context activation.\ne)\tAdditional MS initiated PDP context activation request received from an MS that is attached for emergency bearer services:\nIf the MS is attached for emergency bearer services the network shall only accept the PDP context activation request for emergency services. The network shall reject any other PDP context activation request with cause code #31 \"activation rejected, unspecified\".\nf)\tReception of the ACTIVATE PDP CONTEXT ACCEPT message and Bearer Control Mode violation\nIf the Selected Bearer Control Mode indicates other value than 'MS only' in the ACTIVATE PDP CONTEXT ACCEPT message although the protocol configuration options information element was not present or the MS Support of Network Requested Bearer Control indicator was not present in the protocol configuration options information element of the corresponding ACTIVATE PDP CONTEXT REQUEST message, the MS shall ignore the Selected Bearer Control Mode parameter received from the network and apply Bearer Control Mode 'MS only' for all active PDP contexts sharing the same PDP Address and APN.\nThe figure depicts the context activation procedure for MS initiated PDP (Multimedia Services Protocol) in 3GPP TS 24.008, which is a crucial protocol for multimedia services in 3G and 4G networks. The figure illustrates the steps involved in initiating the PDP context, including the initiation of the PDP context, the initiation of the PDP context, and the initiation of the PDP context. The figure also shows the initiation of the PDP context in the context of a multimedia service, with the initiation of the PDP context being a critical step in the context activation procedure.\nFigure 6.3/3GPP TS 24.008: MS initiated PDP context activation procedure\nThe figure depicts the context activation procedure for network initiated PDP (Network Initiated PDP) in 3GPP TS 24.008, which is a standard for mobile network signaling. The figure shows the steps involved in initiating a PDP context, including the initiation of the PDP, the initiation of the PDP, and the initiation of the PDP. The figure also includes a diagram of the signaling path, which shows the path that the PDP context will take to reach the destination. The figure is important for understanding the signaling process in mobile networks and for implementing PDP context activation procedures.\nFigure 6.4/3GPP TS 24.008: Network initiated PDP context activation procedure\nIf a PDP context exists that was created due to a request including a low priority indicator set to \"MS is configured for NAS signalling low priority\" and the upper layers of the MS request to activate a PDP context with the same APN and the low priority indicator set to \"MS is not configured for NAS signalling low priority\", when initiating the PDP context activation procedure, the MS shall:\n-\tsend an ACTIVATE PDP CONTEXT REQUEST message with the same combination of APN, PDP type and PDP address as the existing PDP context to activate a PDP context;\nNOTE 1:\tThis option relies on the network handling of abnormal cases as specified in subclause .1.5 case c).\n-\tsend an ACTIVATE PDP CONTEXT REQUEST message with the same combination of APN and PDP type as the existing PDP context but with a different PDP address, or without PDP address, to activate a PDP context; or\n-\tsend an ACTIVATE PDP CONTEXT REQUEST message with the same APN after the successful deactivation of the existing PDP context.\nNOTE 2:\tThe above list of options also apply for the case when the existing PDP context was created due to a request including a low priority indicator set to \"MS is not configured for NAS signalling low priority\" and the new request to activate a PDP context with the same APN contains a low priority indicator set to \"MS is configured for NAS signalling low priority\".\nAs an alternative the upper layers of the MS can request to activate a PDP context with a different APN.\nThe purpose of this procedure is to establish an additional PDP context between the MS and the network for a specific Traffic Flow Template (TFT) and QoS profile on a specific NSAPI, when one or more PDP contexts has/have already been established for the particular PDP address and APN. The MS shall include a request for a TFT comprising at least one packet filter applicable for the uplink direction. Depending on the selected Bearer Control Mode being 'MS only' or 'MS/NW', the secondary PDP context activation procedure may either be initiated by the MS or by either the MS or the network, respectively. However, the network and the MS shall not initiate a secondary PDP context activation procedure for established PDP context of \"non IP\" PDP type.\nThe network shall allocate packet filter identifiers and manage packet filter evaluation precedence for the packet filters added by the network. The MS shall allocate packet filter identifiers and manage packet filter evaluation precedence for the packet filters added by the MS.\nIf there is a PDN connection for emergency bearer services established, the MS shall not initiate a secondary PDP context activation procedure for this connection unless triggered by the network.\nNOTE:\t3GPP TS 23.060 [74] subclause 9.3 specifies that a packet filter applicable for the downlink direction is not mandatory in a TFT.\nIn order to request a PDP context activation with the same PDP address and APN as an already active PDP context, the MS shall send an ACTIVATE SECONDARY PDP CONTEXT REQUEST message to the network, enter the state PDP-ACTIVE-PENDING and start timer T3380. The message shall contain the selected NSAPI. The MS shall ensure that the selected NSAPI is not currently being used by another Session Management entity in the MS. The message shall also include a QoS profile, a requested LLC SAPI and the Linked TI. The QoS profile is the requested QoS. If present, the TFT shall be sent transparently through the SGSN to the GGSN to enable packet classification and policing for downlink data transfer. If the selected Bearer Control Mode is 'MS/NW' and a TFT IE is included in the ACTIVATE SECONDARY PDP CONTEXT REQUEST message, the MS shall set the packet filter direction parameter of each packet filter in the TFT to a value different from \"00\". The MS shall allocate packet filter identifiers for all packet filters included in the TFT.\nUpon receipt of an ACTIVATE SECONDARY PDP CONTEXT REQUEST, the network shall validate the message by verifying the TI given in the Linked TI IE to be any of the active PDP context(s). The same GGSN address shall be used by the SGSN as for the already established PDP context(s) for that PDP address. The network shall select a radio priority level based on the QoS negotiated and shall reply with an ACTIVATE SECONDARY PDP CONTEXT ACCEPT message, if the request can be accepted.\nNOTE 1:\tIf the MS requested a value for a QoS parameter that is not within the range specified by 3GPP TS 23.107 [81], the network should negotiate the parameter to a value that lies within the specified range.\nUpon receipt of the message ACTIVATE SECONDARY PDP CONTEXT ACCEPT, the MS shall stop timer T3380 and enter the state PDP-ACTIVE. If the offered QoS parameters received from the network differ from the QoS requested by the MS, the MS shall either accept the negotiated QoS or initiate the PDP context deactivation procedure.\nIn A/Gb mode the MS shall initiate establishment of the logical link for the LLC SAPI indicated by the network with the offered QoS and selected radio priority level if no logical link has been already established for that SAPI. If the LLC SAPI indicated by the network can not be supported by the MS, the MS shall initiate the PDP context deactivation procedure.\nIn Iu mode, both SGSN and MS shall store the LLC SAPI and the radio priority in the PDP context. If an Iu mode to A/Gb mode Routing Area Update is performed, the new SGSN shall initiate establishment of the logical link using the negotiated LLC SAPI, the negotiated QoS profile and selected radio priority level stored in the PDP context as in an A/Gb mode to A/Gb mode Routing Area Update.\nAn MS, which is capable of operating in A/Gb mode, shall use a valid LLC SAPI, while an MS which is not capable of operating in A/Gb mode shall indicate the LLC SAPI value as \"LLC SAPI not assigned\" in order to avoid unnecessary value range checking and any other possible confusion in the network. When the MS uses a valid LLC SAPI, the network shall return a valid LLC SAPI. The network shall return the \"LLC SAPI not assigned\" value only when the MS uses the \"LLC SAPI not assigned\" value.\nNOTE 2:\tThe radio priority level and the LLC SAPI parameters, though not used in Iu mode, shall be included in the messages, in order to support handover between Iu mode and A/Gb mode networks.\nAt inter-system change from Iu mode to A/Gb mode, SM shall locally deactivate the active PDP context(s) if SM does not have the following parameters:\n-\tLLC SAPI; and\n-\tradio priority.\nIn order to request a PDP context activation with the same PDP address and APN as an already active PDP context, the network shall send a REQUEST SECONDARY PDP CONTEXT ACTIVATION message to the MS and start timer T3385. The message contains the required QoS, Linked TI, and optionally protocol configuration options and a TFT. The network shall always include a TFT in the REQUEST SECONDARY PDP CONTEXT ACTIVATION message. If present, the TFT shall be sent transparently through the SGSN to the MS to enable packet classification and policing for uplink and downlink data transfer. The network shall allocate packet filter identifiers for all packet filters included in the TFT.\nNOTE:\tA network implementing an earlier release of this specification can send a REQUEST SECONDARY PDP CONTEXT ACTIVATION message without any TFT.\nUpon receipt of a REQUEST SECONDARY PDP CONTEXT ACTIVATION message, if the MS sent an APN for the establishment of the PDN connection, the MS shall stop the timer T3396 if it is running for the APN sent by the MS. If the MS did not send an APN for the establishment of the PDN connection and the request type was different from \"emergency\", the MS shall stop the timer T3396 associated with no APN if it is running. If the REQUEST SECONDARY PDP CONTEXT ACTIVATION message was received for an emergency PDN connection, the UE shall not stop the timer T3396 associated with no APN if it is running. For any case, the MS shall then either initiate the secondary PDP context activation procedure as described in the subclause 6.1.3.2.1 or shall reject the activation request by sending a REQUEST SECONDARY PDP CONTEXT ACTIVATION REJECT message as described in subclause 6.1.3.2.2a. The value of the reject cause IE of the REQUEST SECONDARY PDP CONTEXT ACTIVATION REJECT message shall indicate the reason for rejection, e.g. \"insufficient resources to activate another context\".\nThe MS shall maintain the previously negotiated Bearer Control Mode (BCM) for all active PDP contexts sharing the same PDP Address and APN and ignore any BCM parameter, if included in the REQUEST SECONDARY PDP CONTEXT ACTIVATION message. If the previously negotiated BCM is 'MS only', the MS should reject the PDP context activation (see subclause 6.1.3.2.2a).\nThe ACTIVATE SECONDARY PDP CONTEXT REQUEST message sent by the MS in order to initiate the secondary PDP context activation procedure shall contain the QoS and Linked TI required in the REQUEST SECONDARY PDP CONTEXT ACTIVATION message. The MS shall also include a TFT with packet filters as specified in the REQUEST SECONDARY PDP CONTEXT ACTIVATION message.\nUpon receipt of the ACTIVATE SECONDARY PDP CONTEXT REQUEST message, the network shall stop timer T3385.\nThe same procedures then apply as described for MS initiated secondary PDP context activation.\nUpon receipt of an ACTIVATE SECONDARY PDP CONTEXT REQUEST message, the network may reject the MS initiated PDP context activation by sending an ACTIVATE SECONDARY PDP CONTEXT REJECT message to the MS. The message shall contain a cause code that typically indicates one of the following:\n# 26:\tinsufficient resources;\n# 30:\tactivation rejected by GGSN, Serving GW or PDN GW;\n# 31:\tactivation rejected, unspecified;\n# 32:\tservice option not supported;\n# 33:\trequested service option not subscribed;\n# 34:\tservice option temporarily out of order;\n# 41:\tsemantic error in the TFT operation;\n# 42:\tsyntactical error in the TFT operation;\n# 43:\tunknown PDP context;\n# 44:\tsemantic errors in packet filter(s);\n# 45:\tsyntactical errors in packet filter(s);\n# 46:\tPDP context without TFT already activated;\n# 48:\trequest rejected, Bearer Control Mode violation;\n# 56:\tcollision with network initiated request;\n# 60:\tbearer handling not supported;\n# 65:\tmaximum number of PDP contexts reached; or\n# 95 -\t111:\tprotocol errors.\nThe network may include a Back-off timer value IE in the ACTIVATE SECONDARY PDP CONTEXT REJECT message.\nIf the Back-off timer value IE is included and the SM cause value is different from #26 \"insufficient resources\" and #65 \"maximum number of PDP contexts reached\", the network may include the Re-attempt indicator IE to indicate whether the MS is allowed to attempt a bearer resource allocation procedure in the PLMN for the same  in S1 mode, and whether another attempt in A/Gb and Iu mode or in S1 mode is allowed in an equivalent PLMN.\nIf the ACTIVATE SECONDARY PDP CONTEXT REQUEST message is related to an already active LIPA PDN connection or SIPTO at the local network PDN connection, then the network shall reply with an ACTIVATE SECONDARY PDP CONTEXT REJECT message with cause code #60 \"bearer handling not supported\".\nIf a PDP context for the TI given in the Linked TI IE exists, then the TFT in the ACTIVATE SECONDARY PDP CONTEXT REQUEST message is checked by the network for different types of TFT IE errors as specified in subclause 6.1.3.2.3.\nUpon receipt of an ACTIVATE SECONDARY PDP CONTEXT REJECT message, the MS shall stop timer T3380 and enter the state PDP-INACTIVE.\nIf the SM cause value is #26 \"insufficient resources\" and the Back-off timer value IE is included, the MS shall ignore the Re-attempt indicator IE provided by the network, if any, and take different actions depending on the timer value received for timer T3396 in the Back-off timer value IE (if the MS is configured for dual priority, exceptions are specified in subclause 6.1.3.12; if the MS is an MS configured to use AC11 – 15 in selected PLMN, exceptions are specified in subclause 6.1.3.11):\ni)\tif the timer value indicates neither zero nor deactivated, the MS shall stop timer T3396 associated with the corresponding APN, if it is running. The MS shall then start timer T3396 with the value provided in the Back-off timer value IE and not send another ACTIVATE PDP CONTEXT REQUEST, ACTIVATE SECONDARY PDP CONTEXT REQUEST or MODIFY PDP CONTEXT REQUEST message with exception of those identified in subclause 6.1.3.3, for the same APN until timer T3396 expires or timer T3396 is stopped. If the MS did not send an APN for the establishment of the PDN connection and the request type was different from \"emergency\", the MS shall stop timer T3396 associated with no APN, if it is running. The MS shall then start timer T3396 with the value provided in the Back-off timer value IE and not send another ACTIVATE PDP CONTEXT REQUEST without an APN and with request type different from \"emergency\", or another ACTIVATE SECONDARY PDP CONTEXT REQUEST or MODIFY PDP CONTEXT REQUEST message with exception of those identified in subclause 6.1.3.3, for a non-emergency PDN connection established without an APN sent by the MS, until timer T3396 expires or timer T3396 is stopped. The MS shall not stop timer T3396 upon a PLMN change or inter-system change;\nii)\tif the timer value indicates that this timer is deactivated, the MS shall not send another ACTIVATE PDP CONTEXT REQUEST, ACTIVATE SECONDARY PDP CONTEXT REQUEST or MODIFY PDP CONTEXT REQUEST message with exception of those identified in subclause 6.1.3.3, for the same APN until the MS is switched off or the SIM/USIM is removed or the MS receives a REQUEST PDP CONTEXT ACTIVATION, REQUEST SECONDARY PDP CONTEXT ACTIVATION or MODIFY PDP CONTEXT REQUEST message for the same APN or a DEACTIVATE PDP CONTEXT REQUEST message including SM cause #39 \"reactivation requested\" for a PDP context which was activated by the MS for the same APN from the network. If the MS did not send an APN for the establishment of the PDN connection and the request type was different from \"emergency\", the MS shall not send another ACTIVATE PDP CONTEXT REQUEST without an APN and with request type different from \"emergency\", or another ACTIVATE SECONDARY PDP CONTEXT REQUEST or MODIFY PDP CONTEXT REQUEST with exception of those identified in subclause 6.1.3.3, for a non-emergency PDN connection established without an APN sent by the MS, until the MS is switched off or the SIM/USIM is removed or the MS receives any of the following messages: a REQUEST PDP CONTEXT ACTIVATION without an APN, a REQUEST SECONDARY PDP CONTEXT ACTIVATION or MODIFY PDP CONTEXT REQUEST message for a non-emergency PDN connection established without an APN sent by the MS, or a DEACTIVATE PDP CONTEXT REQUEST message including SM cause #39 \"reactivation requested\" for a PDP context which was activated by the MS for a non-emergency PDN connection established without an APN sent by the MS. The timer T3396 remains deactivated upon a PLMN change or inter-system change; or\niii)\tif the timer value indicates that this timer is zero, the MS:\n-\tshall stop timer T3396 associated with the corresponding APN, if running, and may send an ACTIVATE PDP CONTEXT REQUEST, ACTIVATE SECONDARY PDP CONTEXT REQUEST or MODIFY PDP CONTEXT REQUEST message for the same APN; and\n-\tif the MS did not send an APN for the establishment of the PDN connection and the request type was different from \"emergency\", the MS shall stop timer T3396 associated with no APN, if running, and may send an ACTIVATE PDP CONTEXT REQUEST message without an APN, or another ACTIVATE SECONDARY PDP CONTEXT REQUEST or MODIFY PDP CONTEXT REQUEST message for a non-emergency PDN connection established without an APN sent by the MS.\nIf the Back-off timer value IE is not included, the MS may send an ACTIVATE PDP CONTEXT REQUEST, ACTIVATE SECONDARY PDP CONTEXT REQUEST or MODIFY PDP CONTEXT REQUEST message for the same APN.\nIf the timer T3396 is running when the MS enters state GMM-DEREGISTERED, the MS remains switched on, and the SIM/USIM in the MS remains the same, then timer T3396 is kept running until it expires or it is stopped.\nIf the MS is switched off when the timer T3396 is running, and if the SIM/USIM in the MS remains the same when the MS is switched on, the MS behaves as follows:\n-\tlet t1 be the time remaining for T3396 timeout at switch off and let t be the time elapsed between switch off and switch on. If t1 is greater than t, then the timer shall be restarted with the value t1 – t. If t1 is equal to or less than t, then the timer need not be restarted. If the MS is not capable of determining t, then the MS shall restart the timer with the value t1; and\n-\tif prior to switch off, timer T3396 was running because an ACTIVATE PDP CONTEXT REQUEST, ACTIVATE SECONDARY PDP CONTEXT REQUEST, MODIFY PDP CONTEXT REQUEST or ACTIVATE MBMS CONTEXT REQUEST message containing the low priority indicator set to \"MS is configured for NAS signalling low priority\" was rejected with a timer value for timer T3396, and if timer T3396 is restarted at switch on, then the MS configured for dual priority shall handle session management requests as indicated in subclause 6.1.3.12.\nIf the SM cause value is different from #26 \"insufficient resources\" and #65 \"maximum number of PDP contexts reached\", and the Back-off timer value IE is included, the MS takes different actions depending on the timer value received in the Back-off timer value IE (if the MS is an MS configured to use AC11 – 15 in selected PLMN, exceptions are specified in subclause 6.1.3.13):\ni)\tif the timer value indicates neither zero nor deactivated, the MS shall start the back-off timer with the value provided in the Back-off timer value IE for the secondary PDP context activation procedure and PLMN and  combination and not send another ACTIVATE SECONDARY PDP CONTEXT REQUEST message in the PLMN for the same  until the back-off timer expires, the MS is switched off or the /USIM is removed;\nii)\tif the timer value indicates that this timer is deactivated, the MS shall not send another ACTIVATE SECONDARY PDP CONTEXT REQUEST message in the PLMN for the same  until the MS is switched off or the /USIM is removed; and\niii)\tif the timer value indicates that this timer is zero, the MS may send an ACTIVATE SECONDARY PDP CONTEXT REQUEST message in the PLMN for the same .\nIf the Back-off timer value IE is not included, then the MS shall ignore the Re-attempt indicator IE provided by the network, if any.\ni)\tAdditionally, if the SM cause value is #32 \"service option not supported\", or #33 \"requested service option not subscribed\", the MS shall proceed as follows:\n-\tif the MS is registered in its HPLMN or in a PLMN that is within the EHPLMN list (if the EHPLMN list is present), the MS shall behave as described above in the present subclause, using the configured SM_RetryWaitTime value as specified in 3GPP TS 24.368 [135] or in USIM file NASCONFIG as specified in 3GPP TS 31.102 [112], if available, as back-off timer value; and\n-\totherwise, if the MS is not registered in its HPLMN or in a PLMN that is within the EHPLMN list (if the EHPLMN list is present), or if the SM_RetryWaitTime value is not configured, the MS shall behave as described above in the present subclause using the default value of 12 minutes for the back-off timer.\nii)\tFor SM cause values different from #32 \"service option not supported\", or #33 \"requested service option not subscribed\", the MS behaviour regarding the start of a back-off timer is unspecified.\nThe MS shall not stop any back-off timer upon a PLMN change or inter-system change. If the network indicates that a back-off timer for the secondary PDP context activation procedure and PLMN and APN combination is deactivated, then it remains deactivated upon a PLMN change or inter-system change.\nNOTE 1:\tThis means the back-off timer can still be running or be deactivated for the given SM procedure and PLMN and APN combination when the MS returns to the PLMN or when it performs inter-system change back from S1 mode to A/Gb or Iu mode. Thus the MS can still be prevented from sending another ACTIVATE SECONDARY PDP CONTEXT REQUEST message in the PLMN for the same APN.\nIf the back-off timer is started upon receipt of an ACTIVATE SECONDARY PDP CONTEXT REJECT message (i.e. the timer value was provided by the network, a configured value is available or the default value is used as explained above) or the back-off timer is deactivated, the MS behaves as follows:\ni)\tafter a PLMN change the MS may send an ACTIVATE SECONDARY PDP CONTEXT REQUEST message for the same  in the new PLMN, if the back-off timer is not running and is not deactivated for the secondary PDP context activation procedure and the combination of new PLMN and APN;\nFurthermore as an implementation option, for the SM cause values #32 \"service option not supported\" or #33 \"requested service option not subscribed\", if the network does not include a Re-attempt indicator IE, the MS may decide not to automatically send another ACTIVATE SECONDARY PDP CONTEXT REQUEST message for the same APN, if the MS registered to a new PLMN which is in the list of equivalent PLMNs.\nii)\tif the network does not include the Re-attempt indicator IE to indicate whether re-attempt in S1 mode is allowed, or the MS ignores the Re-attempt indicator IE, e.g. because the Back-off timer value IE is not included, then:\n-\tif the MS is registered in its HPLMN or in a PLMN that is within the EHPLMN list (if the EHPLMN list is present), the MS shall apply the configured SM_RetryAtRATChange value as specified in 3GPP TS 24.368 [135] or in USIM file NASCONFIG as specified in 3GPP TS 31.102 [112], if available, to determine whether the MS may attempt a bearer resource allocation procedure for the same PLMN and APN combination in S1 mode; and\n-\tif the MS is not registered in its HPLMN or in a PLMN that is within the EHPLMN list (if the EHPLMN list is present), or if the NAS configuration MO as specified in 3GPP TS 24.368 [135] is not available and the value for inter-system change is not configured in the USIM file NASCONFIG, then the MS behaviour regarding a bearer resource allocation procedure for the same PLMN and APN combination in S1 mode is unspecified; and\niii)\tif the network includes the Re-attempt indicator IE indicating that re-attempt in an equivalent PLMN is not allowed, then depending on the timer value received in the Back-off timer value IE, for each combination of a PLMN from the equivalent PLMN list and the APN the MS shall start a back-off timer for the secondary PDP context activation procedure with the value provided by the network, or deactivate the respective back-off timer as follows:\n-\tIf the Re-attempt indicator IE additionally indicates that re-attempt in S1 mode is allowed, the MS shall start or deactivate the back-off timer for A/Gb and Iu mode only; and\n-\totherwise the MS shall start or deactivate the back-off timer for A/Gb, Iu, and S1 mode.\nIf the back-off timer for a PLMN and APN combination was started or deactivated in S1 mode upon receipt of a BEARER RESOURCE ALLOCATION REJECT message (see 3GPP TS 24.301 [120]) and the network indicated that re-attempt in A/Gb or Iu mode is allowed, then this back-off timer does not prevent the MS from sending an ACTIVATE SECONDARY PDP CONTEXT REQUEST message in this PLMN for the same APN in A/Gb or Iu mode. If the network indicated that re-attempt in A/Gb or Iu mode is not allowed, the MS shall not send any ACTIVATE SECONDARY PDP CONTEXT REQUEST message in this PLMN for the same APN in A/Gb or Iu mode, until the timer expires, the MS is switched off or the USIM is removed.\nNOTE 2:\tThe back-off timer is used to describe a logical model of the required MS behaviour. This model does not imply any specific implementation, e.g. as a timer or timestamp.\nNOTE 3:\tReference to back-off timer in this section can either refer to use of timer T3396 or to use of a different packet system specific timer within the MS. Whether the MS uses T3396 as a back-off timer or it uses different packet system specific timers as back-off timers is left up to MS implementation. This back-off timer is stopped when the MS is switched off or the SIM/USIM is removed.\nIf the SM cause value is #65 \"maximum number of PDP contexts reached\", the MS shall determine the PLMN's maximum number of PDP contexts in A/Gb or Iu mode (see subclause 6.1.3.0) as the number of active PDP contexts it has. The MS shall ignore the Back-off timer value IE and Re-attempt indicator IE provided by the network, if any.\nNOTE 4:\tIn some situations, when attempting to establish multiple PDP contexts, the number of active PDP contexts that the MS has when cause #65 is received is not equal to the maximum number of PDP contexts reached in the network.\nThe PLMN's maximum number of PDP context in A/Gb or Iu mode applies to the PLMN in which the SM cause #65 \"maximum number of PDP contexts reached\" is received. When the MS is switched off or when the USIM is removed, the MS shall clear all previous determinations representing any PLMN's maximum number of PDP contexts in A/Gb or Iu mode (see subclause 6.1.3.0). Upon successful registration with a new PLMN, the MS may clear previous determinations representing any PLMN's maximum number of PDP contexts in A/Gb or Iu mode.\nUpon receipt of the REQUEST SECONDARY PDP CONTEXT ACTIVATION message, the MS may reject the network requested secondary PDP context activation by sending the REQUEST SECONDARY PDP CONTEXT ACTIVATION REJECT message to the network. The message contains the same TI as included in the REQUEST SECONDARY PDP CONTEXT ACTIVATION and an additional cause code that typically indicates one of the following causes:\n# 26:\tinsufficient resources;\n# 31:\tactivation rejected, unspecified;\n# 40:\tfeature not supported;\n# 41:\tsemantic error in the TFT operation;\n# 42:\tsyntactical error in the TFT operation;\n# 43:\tunknown PDP context;\n# 44:\tsemantic errors in packet filter(s);\n# 45:\tsyntactical errors in packet filter(s);\n# 46:\tPDP context without TFT already activated;\n# 48:\trequest rejected, Bearer Control Mode violation; or\n# 95 - 111: protocol errors.\nThe MS should reply with the REQUEST SECONDARY PDP CONTEXT ACTIVATION REJECT message with cause #48 \"request rejected, Bearer Control Mode violation\" if the previously negotiated Bearer Control Mode is 'MS-only'.\nIf a PDP context for the TI given in the Linked TI IE exists, then the TFT in the REQUEST SECONDARY PDP CONTEXT ACTIVATION message is checked by the MS for different types of TFT IE errors as specified in subclause 6.1.3.2.3.\nUpon receipt of a REQUEST SECONDARY PDP CONTEXT ACTIVATION REJECT message, the network shall stop timer T3385 and enter state PDP-INACTIVE.\nThe following abnormal cases can be identified:\na)\tExpiry of timers\nIn the mobile station:\nOn the first expiry of the timer T3380, the MS shall resend the ACTIVATE SECONDARY PDP CONTEXT REQUEST and shall reset and restart timer T3380. This retransmission is repeated four times, i.e. on the fifth expiry of timer T3380, the MS shall release all resources possibly allocated for this invocation and shall abort the procedure; no automatic PDP context activation re-attempt shall be performed.\nOn the network side:\nOn the first expiry of the timer T3385, the network shall resend the message REQUEST SECONDARY PDP CONTEXT ACTIVATION and shall reset and restart timer T3385. This retransmission is repeated four times, i.e. on the fifth expiry of timer T3385, the network shall release possibly allocated resources for this activation and shall abort the procedure.\nb)\tMS initiated secondary PDP context activation procedure for an already activated PDP context (On the network side)\nIf the NSAPI matches that of an already activated PDP context, the network shall deactivate the existing PDP context locally without notification to the MS and proceed with the requested PDP context activation. The case of a TI match is described in subclause 8.3.2.\nc)\tno PDP context with linked TI activated (on the network side)\nThe network shall then check whether there is an activated PDP context for the TI given in the Linked TI IE in the ACTIVATE SECONDARY PDP CONTEXT REQUEST message. If there is no active PDP context for the specified TI, the network shall reply with an ACTIVATE SECONDARY PDP CONTEXT REJECT message, cause code indicating \"unknown PDP context\".\nd)\tno PDP context with Linked TI activated (on the mobile station side)\nThe MS shall check whether there is an activated PDP context for the TI given in the Linked TI IE in the REQUEST SECONDARY PDP CONTEXT ACTIVATION message. If there is no active PDP context for the specified TI, the MS shall reply with a REQUEST SECONDARY PDP CONTEXT ACTIVATION REJECT message, cause code indicating \"unknown PDP context\".\ne)\tMS initiated secondary PDP context activation procedure for a PDN connection established for emergency bearer services (on the network side)\nIf the MS initiated secondary PDP context activation procedure is for a PDN connection established for emergency bearer services the network shall reply with an ACTIVATE SECONDARY PDP CONTEXT REJECT message, cause code indicating \"activation rejected, unspecified\".\nf)\tno TFT IE is received in the REQUEST SECONDARY PDP CONTEXT ACTIVATION message (on the mobile station side)\nThe MS shall either:\nA)\treply with a REQUEST SECONDARY PDP CONTEXT ACTIVATION REJECT message, cause code indicating \"semantic error in the TFT operation\"; or\nB)\toptionally, to support networks compliant with earlier versions of the protocol, accept the network requested secondary PDP context activation and proceed as specified in subclause 6.1.3.2.1a. If another PDP context with the same PDP address and APN without a TFT exists, the MS shall deactivate this old PDP context without a TFT by explicit peer-to-peer signalling between the MS and the network.\nIf during a previous inter-system change from S1 mode to A/Gb or Iu mode the default PDP context linked to the new PDP context was mapped from an EPS bearer context, the MS shall follow option A.\nNOTE 1:\tA network implementing this version of the protocol will always include a request for a TFT when requesting the activation of a non-default PDP context.\nIf a PDP context for the TI given in the Linked TI IE exists, then the TFT in the ACTIVATE SECONDARY PDP CONTEXT REQUEST or the REQUEST SECONDARY PDP CONTEXT ACTIVATION message is checked for different types of TFT IE errors as follows:\na)\tSemantic errors in TFT operations:\n1)\tWhen the TFT operation is an operation other than \"Create a new TFT\".\nThe network shall reject the activation request with cause \"semantic error in the TFT operation\".\nThe MS shall reject the activation request with cause \"semantic error in the TFT operation\".\nb)\tSyntactical errors in TFT operations:\n1)\tWhen the TFT operation is \"Create a new TFT\" and the packet filter list in the TFT IE is empty.\n2)\tVoid.\n3)\tWhen there are other types of syntactical errors in the coding of the TFT IE, such as a mismatch between the number of packet filters subfield, and the number of packet filters in the packet filter list.\nThe network shall reject the activation request with cause \"syntactical error in the TFT operation\".\nThe MS shall reject the activation request with cause \"syntactical error in the TFT operation\".\nc)\tSemantic errors in packet filters:\n1)\tWhen a packet filter consists of conflicting packet filter components which would render the packet filter ineffective, i.e. no IP packet will ever fit this packet filter. How the network determines a semantic error in a packet filter is outside the scope of the present document.\n2)\tWhen the resulting TFT does not contain any packet filter applicable for the uplink direction.\nNOTE 2:\tWhen BCM='MS only', the MS is allowed to include a TFT with packet filters without any explicit direction information, i.e. with value \"00\", and such packet filters are applicable for both uplink and downlink directions.\nThe network shall reject the activation request with cause \"semantic errors in packet filter(s)\".\nThe MS shall reject the activation request with cause \"semantic errors in packet filter(s)\".\nd)\tSyntactical errors in packet filters:\n1)\tWhen the TFT operation is \"Create a new TFT\" and two or more packet filters in the resultant TFT would have identical packet filter identifiers.\n2)\tWhen the TFT operation is \"Create a new TFT\" and two or more packet filters in all TFTs associated with this PDP address and APN would have identical packet filter precedence values.\n3)\tWhen there are other types of syntactical errors in the coding of packet filters, such as the use of a reserved value for a packet filter component identifier.\nIn case 2) the network shall not diagnose an error, further process the new activation request and, if it was processed successfully, delete the old packet filters which have identical filter precedence values. Furthermore, by means of explicit peer-to-peer signalling between the MS and the network, the network shall deactivate the PDP context(s) for which it has deleted the packet filters.\nIn cases 1) and 3) the network shall reject the activation request with cause \"syntactical errors in packet filter(s)\".\nIn case 2) the MS shall not diagnose an error, further process the new activation request and, if it was processed successfully, delete the old packet filters which have identical filter precedence values. Furthermore, by means of explicit peer-to-peer signalling between the network and the MS, the MS shall deactivate the PDP context(s) for which it has deleted the packet filters.\nIn cases 1) and 3) the MS shall reject the activation request with cause \"syntactical errors in packet filter(s)\".\nOtherwise, the network shall accept the activation request by replying to the MS with an ACTIVATE SECONDARY PDP CONTEXT ACCEPT message. In case of network requested secondary PDP context activation procedure the MS shall accept the activation request by replying to the network with an ACTIVATE SECONDARY PDP CONTEXT REQUEST message.\nThe figure depicts the context activation procedure for secondary PDP (Primary Data Plane) in the 3GPP TS 24.008 standard. It illustrates the initiation of a secondary PDP context, which is a crucial step in the process of data plane activation. The figure shows the various components involved, such as the primary PDP, the secondary PDP context, and the initiator. The diagram highlights the importance of this step in ensuring the proper functioning of the network.\nFigure 6.5/3GPP TS 24.008: MS initiated secondary PDP context activation procedure\nThe figure depicts a network request for secondary PDP context activation procedure, which is a crucial step in the 3GPP TS 24.008 standard. The figure shows the network structure, including the primary PDP (Primary Data Plane) and secondary PDP (Secondary Data Plane), as well as the context activation procedure. The figure is crucial for understanding the network's architecture and the steps involved in activating secondary PDP context.\nFigure 6.5a/3GPP TS 24.008: Network requested secondary PDP context activation procedure\n\nThe PDP context modification procedure is invoked by the network or by the MS, in order to:\n-\tinform about the change of the 3GPP PS data off UE status for a PDN connection;\n-\tchange the QoS negotiated;\n-\tchange the Radio priority level; or\n-\tchange the TFT,\nnegotiated during the PDP context activation procedure, the secondary PDP context activation procedure or at previously performed PDP context modification procedures. Depending on the selected Bearer Control Mode being 'MS only' or 'MS/NW', the MS or the network respectively may also create and delete a TFT of an active default PDP context. The PDP context modification procedure can be initiated by the network or the MS at any time when a PDP context is active. The network and the MS shall manage packet filter identifiers for the packet filters each modifies or deletes. The network and the MS shall manage packet filter evaluation precedence for the packet filters each modifies.If the MS changes a TFT, which is not assigned to a default PDP context, the MS shall ensure that at least one packet filter applicable for the uplink direction remains among the packet filters created by the MS in that TFT, or no own packet filters . If the network changes a TFT, which is not ass igned to a default PDP context, the network shall ensure that at least one packet filter applicable for the uplink direction remains among the TFT packet filters created by the network in that TFT, or no own packet filters. The MS supporting S1 mode shall not modify the QoS of the first PDP context that was established within the PDN connection. The MS not supporting S1 mode should not modify the QoS of the first PDP context that was established within the PDN connection (see 3GPP TS 23.060 [74]).\nTo indicate a change of 3GPP PS data off UE status for a PDN connection, the MS shall include the protocol configuration options IE in the MODIFY PDP CONTEXT REQUEST message and set the 3GPP PS data off UE status only if the network included the 3GPP PS data off support indication for the PDN connection established by the PDP context activation procedure. The MS behaves as described in subclause 4.7.1.10.\nWhen the PDP context modification procedure is used to indicate a change of 3GPP PS data off UE status for a PDN connection (see subclause 4.7.1.10), the UE shall initiate the PDP context modification procedure even if the timer T3396 or the back-off timer is running or is deactivated.\nThe PDP context modification procedure may also be invoked by the MS, in order to upgrade the maximum bit rate and to trigger the re-establishment of the radio access bearer for an activated PDP context which is preserved in the MS with maximum bit rate values of 0kbit/s for both uplink and downlink (see 3GPP TS 23.060 [74]).\nNOTE 1:\tAs described in 3GPP TS 23.060 [74], the MS only preserves PDP contexts with a TFT including packet filter(s) set by the MS.\nIf\n-\tthe PDP Context Modification request is accepted by the network but the radio access bearer is not established; or\n-\tthe PDP Context Modification request is rejected with cause \"insufficient resources\" (see subclause 6.1.3.3.3),\nthen the MS is not required to start a new PDP Context Modification procedure or to start a Service Request procedure in order to trigger the re-establishment of the radio access bearer.\nIf there is a PDN connection for emergency bearer services established, the MS shall not request a modification of bearer resources for this PDN connection.\nThe network requested PDP context modification procedure may also be used to update the PDP address when external PDP address allocation is performed, in which case the MS receives the PDP address in the MODIFY PDP CONTEXT REQUEST (Network to MS direction) message.\nNOTE 2:\tThe procedure may be initiated by the network due to an inter-SGSN Routing Area Updating when a PDP context is active.\nThe network requested PDP context modification procedure may also be used to update the WLAN offload indication, in which case the MS receives the updated WLAN offload indication in the MODIFY PDP CONTEXT REQUEST (Network to MS direction) message.\nIn order to initiate the procedure, the network sends the MODIFY PDP CONTEXT REQUEST message to the MS and starts timer T3386. The message shall contain the new QoS and the radio priority level and LLC SAPI that shall be used by the MS in A/Gb mode at the lower layers for the transmission of data related to the PDP context. The MODIFY PDP CONTEXT REQUEST message may also contain packet filters in the TFT information element. If the selected Bearer Control Mode is 'MS/NW' and the TFT information element is included in the MODIFY PDP CONTEXT REQUEST message, the network shall include packet filter(s), or if no packet filters are proposed to be either added, replaced or deleted, it shall set TFT operation code to \"No TFT operation\" and include packet filter identifier(s) in the Packet filter identifier parameter in the parameters list to indicate which packet filter(s) in the TFT is associated with the QoS change. If the TFT information element is included in the MODIFY PDP CONTEXT REQUEST message and packet filter(s) is proposed to be added, the network shall allocate packet filter identifier(s) for all packet filters to be added to the TFT. The network shall allocate packet filter identifier value s which are currently not allocated to any existing packet filter of the same TFT.\nThe network informs the MS about the Bearer Control Mode to be applied for all active PDP contexts sharing the same PDP Address and APN by including the selected Bearer Control Mode parameter in the protocol configuration options information element. This information is either explicitly given in the MODIFY PDP CONTEXT REQUEST message or implicitly given by not being present. The MS shall act according to the presence of the protocol configuration options information element and the value of the selected Bearer Control Mode parameter in the MODIFY PDP CONTEXT REQUEST message:\n-\tif the protocol configuration options information element is not present, the MS shall apply Bearer Control Mode 'MS only' for all active PDP contexts sharing the same PDP Address and APN.\n-\tif the selected Bearer Control Mode parameter is not present in the protocol configuration options information element, the MS shall apply Bearer Control Mode 'MS only' for all active PDP contexts sharing the same PDP Address and APN.\n-\tif the selected Bearer Control Mode parameter is present in the protocol configuration options information element, the MS shall apply Bearer Control Mode according to the value of this parameter for all active PDP contexts sharing the same PDP Address and APN.\nIf a WLAN offload indication information element is included in the MODIFY PDP CONTEXT REQUEST message, the MS shall replace stored WLAN offload acceptability values for this PDN connection with the newly received offload indications and use the UTRAN offload acceptability value to determine whether this PDN connection is offloadable to WLAN or not.\nUpon receipt of the MODIFY PDP CONTEXT REQUEST message, if the MS sent an APN for the establishment of the PDN connection, the MS shall stop the timer T3396 if it is running for the APN sent by the MS.If the MS did not send an APN for the establishment of the PDN connection and the request type was different from \"emergency\", the MS shall stop the timer T3396 associated with no APN if it is running. If the MODIFY PDP CONTEXT REQUEST message was received for an emergency PDN connection, the MS shall not stop the timer T3396 associated with no APN if it is running. For any case, the MS shall then reply with the MODIFY PDP CONTEXT ACCEPT message, if the MS accepts the new QoS and the indicated LLC SAPI.\nThe network shall upon receipt of the MODIFY PDP CONTEXT ACCEPT message stop timer T3386.\nIn A/Gb mode, the network shall establish, reconfigure or continue using the logical link with the new QoS for the LLC SAPI indicated in the MODIFY PDP CONTEXT REQUEST message.\nIn Iu mode, if the Radio Access Bearer supporting the PDP context is active, then the network shall reconfigure and continue using the Radio Access Bearer with the new QoS indicated in the MODIFY PDP CONTEXT REQUEST message; if the PDP context is preserved, then the network may re-establish a Radio Access Bearer with the new QoS indicated in the MODIFY PDP CONTEXT REQUEST message.\nIn order to initiate the procedure, the MS sends the MODIFY PDP CONTEXT REQUEST message to the network, enters the state PDP-MODIFY-PENDING and starts timer T3381. The message may contain the requested new QoS and/or the TFT and the requested LLC SAPI (used in A/Gb mode). If the selected Bearer Control Mode is 'MS/NW' and the MS wants to modify the QoS, it shall include a TFT with packet filter(s), or if no packet filters are proposed to be either added, replaced or deleted, it shall set TFT operation code to \"No TFT operation\" and include packet filter identifier(s) in the Packet filter identifier parameter in the parameters list to indicate which packet filter(s) in the TFT is associated with the QoS change. If the TFT information element is included in the MODIFY PDP CONTEXT REQUEST message and packet filters are proposed to be added, the MS shall allocate packet filter identifier(s) for all packet filters to be added to the TFT. The MS shall allocate packet filter identifier value s which are currently not allocated to any existing packet filter of the TFT. If a PDP context is associated with a TFT containing packet filters established by both the MS and the network, the only parameters in the QoS profile of that PDP context the MS is allowed to modify are the bitrate parameters.\nUpon receipt of the MODIFY PDP CONTEXT REQUEST message, the network may reply with the MODIFY PDP CONTEXT ACCEPT message in order to accept the context modification. The reply message may contain the negotiated QoS and the radio priority level based on the new QoS profile and the negotiated LLC SAPI that shall be used in A/Gb mode by the logical link.\nUpon receipt of the MODIFY PDP CONTEXT ACCEPT message, the MS shall stop the timer T3381. If the offered QoS parameters received from the network differs from the QoS requested by the MS, the MS shall either accept the negotiated QoS or initiate the PDP context deactivation procedure.\nIf a modification of QoS is requested by the MS, which the network can not accept, being unable to provide the requested QoS, it should maintain the QoS negotiated as previously negotiated or propose a new QoS. That means that the network should not reject the MS initiated PDP context modification request due to the unavailability of the QoS. If the MS requested a value for a QoS parameter that is not within the range specified by 3GPP TS 23.107[81], the network should negotiate the parameter to a value that lies within the specified range.\nUpon receipt of a MODIFY PDP CONTEXT REQUEST message, the network may reject the MS initiated PDP context modification request by sending a MODIFY PDP CONTEXT REJECT message to the MS. The message shall contain a cause code that typically indicates one of the following:\n# 26:\tinsufficient resources;\n# 30:\tactivation rejected by GGSN, Serving GW or PDN GW;\n# 32:\tService option not supported;\n# 37:\tQoS not accepted;\n# 41:\tsemantic error in the TFT operation;\n# 42:\tsyntactical error in the TFT operation;\n# 44:\tsemantic errors in packet filter(s);\n# 45:\tsyntactical errors in packet filter(s);\n# 48:\trequest rejected, Bearer Control Mode violation;\n# 60:\tbearer handling not supported; or\n# 95 - 111:\tprotocol errors.\nIf upon the reception of a MODIFY PDP CONTEXT REQUEST message the network fails to re-establish the radio access bearer for a PDP context whose maximum bit rate in uplink and downlink is set to 0kbit/s, the network shall reply with a MODIFY PDP CONTEXT REJECT message with cause #26 \"insufficient resources\".\nIf a TFT modification was requested and the requested TFT is not available, then the MODIFY PDP CONTEXT REJECT message shall be sent.\nThe network shall reply with a MODIFY PDP CONTEXT REJECT message with cause #48 \"request rejected, Bearer Control Mode violation\", if\n-\tthe selected Bearer Control Mode is 'MS/NW' and the MS requests to create a TFT for a PDP context that was established without TFT;\n-\tthe selected Bearer Control Mode is 'MS/NW' and the MS requests to upgrade the QoS of a PDP context without downlink packet filters, unless uplink packet filters already exist for the PDP context and the MS requests with the same MODIFY PDP CONTEXT REQUEST message to create downlink packet filters ;\n-\tthe selected Bearer Control Mode is 'MS/NW' and the MS requests to modify the QoS, but does not include a TFT with at least apacket filter identifiers to indicate which packet filters in the TFT that is associated with the QoS change; or\n-\tthe selected Bearer Control Mode is 'MS/NW' and the MS requests to modify the QoS for a PDP context associated with a TFT containing packet filters established by both the MS and the network and the MS tries to modify other parameters than the bitrate parameters in the QoS profile of that PDP context.\nIf a TFT modification was requested and the MS requests to modify or delete packet filters which were added by the network, then the MODIFY PDP CONTEXT REJECT message shall be sent.\nIf the MS has requested to modify the QoS of a default PDP context, the network shall reply with a MODIFY PDP CONTEXT REJECT message with cause code \"QoS not accepted\".\nIf the MS has requested to modify the PDP context of a LIPA PDN connection or SIPTO at the local network PDN connection, then the network shall reply with a MODIFY PDP CONTEXT REJECT message with cause code \"bearer handling not supported\".\nThe TFT in the request message is checked by the network for different types of TFT IE errors as specified in subclause 6.1.3.3.4.\nThe network may include a Back-off timer value IE in the MODIFY PDP CONTEXT REJECT message.\nThe network shall not include the SM cause value #26 \"insufficient resources\" in the MODIFY PDP CONTEXT REJECT message due to APN based congestion control being active.\nIf the Back-off timer value IE is included and the SM cause value is not #26 \"insufficient resources\", the network may include the Re-attempt indicator IE to indicate whether the MS is allowed to attempt a bearer resource modification procedure in the PLMN for the same  in S1 mode, and whether another attempt in A/Gb and Iu mode or in S1 mode is allowed in an equivalent PLMN.\nUpon receipt of a MODIFY PDP CONTEXT REJECT message, the MS shall stop timer T3381 and enter the state PDP-ACTIVE.\nIf the SM cause value is #26 and the Back-off timer value IE is included, the MS shall ignore the Re-attempt indicator IE provided by the network, if any, and take different actions depending on the timer value received for timer T3396 in the Back-off timer value IE (if the MS is configured for dual priority, exceptions are specified in subclause 6.1.3.12; if the MS is an MS configured to use AC11 – 15 in selected PLMN, exceptions are specified in subclause 6.1.3.11):\ni)\tif the timer value indicates neither zero nor deactivated, the MS shall stop timer T3396 associated with the corresponding APN, if it is running. The MS shall then start timer T3396 with the value provided in the Back-off timer value IE and not send another ACTIVATE PDP CONTEXT REQUEST, ACTIVATE SECONDARY PDP CONTEXT REQUEST or MODIFY PDP CONTEXT REQUEST message with exception of those identified in subclause 6.1.3.3, for the same APN until timer T3396 expires or timer T3396 is stopped. If the MS did not send an APN for the establishment of the PDN connection and the request type was different from \"emergency\", the MS shall stop timer T3396 associated with no APN, if it is running. The MS shall then start timer T3396 with the value provided in the Back-off timer value IE and not send another ACTIVATE PDP CONTEXT REQUEST without an APN and with request type different from \"emergency\", or another ACTIVATE SECONDARY PDP CONTEXT REQUEST or MODIFY PDP CONTEXT REQUEST message with exception of those identified in subclause 6.1.3.3, for a non-emergency PDN connection established without an APN sent by the MS, until timer T3396 expires or timer T3396 is stopped. The MS shall not stop timer T3396 upon a PLMN change or inter-system change;\nii)\tif the timer value indicates that this timer is deactivated, the MS shall not send another ACTIVATE PDP CONTEXT REQUEST, ACTIVATE SECONDARY PDP CONTEXT REQUEST or MODIFY PDP CONTEXT REQUEST message with exception of those identified in subclause 6.1.3.3, for the same APN until the MS is switched off or the SIM/USIM is removed or the MS receives REQUEST PDP CONTEXT ACTIVATION, REQUEST SECONDARY PDP CONTEXT ACTIVATION or MODIFY PDP CONTEXT REQUEST message for the same APN or a DEACTIVATE PDP CONTEXT REQUEST message including SM cause #39 \"reactivation requested\" for a PDP context which was activated by the MS for the same APN from the network. If the MS did not send an APN for the establishment of the PDN connection and the request type was different from \"emergency\", the MS shall not send another ACTIVATE PDP CONTEXT REQUEST without an APN and with request type different from \"emergency\", or another ACTIVATE SECONDARY PDP CONTEXT REQUEST or MODIFY PDP CONTEXT REQUEST with exception of those identified in subclause 6.1.3.3, for a non-emergency PDN connection established without APN sent by the MS, until the MS is switched off or the SIM/USIM is removed or the MS receives any of the following messages: a REQUEST PDP CONTEXT ACTIVATION without an APN, a REQUEST SECONDARY PDP CONTEXT ACTIVATION or MODIFY PDP CONTEXT REQUEST message for a non-emergency PDN connection established without an APN sent by the MS, or a DEACTIVATE PDP CONTEXT REQUEST message including SM cause #39 \"reactivation requested\" for a PDP context which was activated by the MS for a non-emergency PDN connection established without an APN sent by the MS. The timer T3396 remains deactivated upon a PLMN change or inter-system change; or\niii)\tif the timer value indicates that this timer is zero, the MS:\n-\tshall stop timer T3396 associated with the corresponding APN, if running, and may send an ACTIVATE PDP CONTEXT REQUEST, ACTIVATE SECONDARY PDP CONTEXT REQUEST or MODIFY PDP CONTEXT REQUEST message for the same APN; and\n-\tif the MS did not send an APN for the establishment of the PDN connection and the request type was different from \"emergency\", the MS shall stop timer T3396 associated with no APN, if running, and may send an ACTIVATE PDP CONTEXT REQUEST message without an APN, or another ACTIVATE SECONDARY PDP CONTEXT REQUEST or MODIFY PDP CONTEXT REQUEST message for a non-emergency PDN connection established without an APN sent by the MS.\nIf the Back-off timer value IE is not included, the MS may send an ACTIVATE PDP CONTEXT REQUEST, ACTIVATE SECONDARY PDP CONTEXT REQUEST or MODIFY PDP CONTEXT REQUEST message for the same APN.\nIf the timer T3396 is running when the MS enters state GMM-DEREGISTERED, the MS remains switched on, and the SIM/USIM in the MS remains the same, then timer T3396 is kept running until it expires or it is stopped.\nIf the MS is switched off when the timer T3396 is running, and if the SIM/USIM in the MS remains the same when the MS is switched on, the MS behaves as follows:\n-\tlet t1 be the time remaining for T3396 timeout at switch off and let t be the time elapsed between switch off and switch on. If t1 is greater than t, then the timer shall be restarted with the value t1 – t. If t1 is equal to or less than t, then the timer need not be restarted. If the MS is not capable of determining t, then the MS shall restart the timer with the value t1; and\n-\tif prior to switch off, timer T3396 was running because an ACTIVATE PDP CONTEXT REQUEST, ACTIVATE SECONDARY PDP CONTEXT REQUEST, MODIFY PDP CONTEXT REQUEST or ACTIVATE MBMS CONTEXT REQUEST message containing the low priority indicator set to \"MS is configured for NAS signalling low priority\" was rejected with a timer value for timer T3396, and if timer T3396 is restarted at switch on, then the MS configured for dual priority shall handle session management requests as indicated in subclause 6.1.3.12.\nIf the SM cause value is not #26 \"insufficient resources\" and the Back-off timer value IE is included, the MS takes different actions depending on the timer value received in the Back-off timer value IE (if the MS is an MS configured to use AC11 – 15 in selected PLMN, exceptions are specified in subclause 6.1.3.13):\ni)\tif the timer value indicates neither zero nor deactivated, the MS shall start the back-off timer with the value provided in the Back-off timer value IE for the PDP context modification procedure and PLMN and  combination and not send another MODIFY PDP CONTEXT REQUEST message with exception of those identified in subclause 6.1.3.3, in the PLMN for the same  until the back-off timer expires, the MS is switched off or the /USIM is removed;\nii)\tif the timer value indicates that this timer is deactivated, the MS shall not send another MODIFY PDP CONTEXT REQUEST message with exception of those identified in subclause 6.1.3.3, in the PLMN for the same  until the MS is switched off or the /USIM is removed; or\niii)\tif the timer value indicates that this timer is zero, the MS may send an MODIFY PDP CONTEXT REQUEST message in the PLMN for the same .\nIf the Back-off timer value IE is not included, then the MS shall ignore the Re-attempt indicator IE provided by the network, if any.\ni)\tAdditionally, if the SM cause value is #32 \"service option not supported\", or #33 \"requested service option not subscribed\", the MS shall proceed as follows:\n-\tif the MS is registered in its HPLMN or in a PLMN that is within the EHPLMN list (if the EHPLMN list is present), the MS shall behave as described above in the present subclause, using the configured SM_RetryWaitTime value as specified in 3GPP TS 24.368 [135] or in USIM file NASCONFIG as specified in 3GPP TS 31.102 [112], if available, as back-off timer value; and\n-\totherwise, if the MS is not registered in its HPLMN or in a PLMN that is within the EHPLMN list (if the EHPLMN list is present), or if the SM_RetryWaitTime value is not configured, the MS shall behave as described above in the present subclause, using the default value of 12 minutes for the back-off timer.\nii)\tFor SM cause values different from #32 \"service option not supported\", or #33 \"requested service option not subscribed\", the MS behaviour regarding the start of a back-off timer is unspecified.\nThe MS shall not stop any back-off timer upon a PLMN change or inter-system change. If the network indicates that a back-off timer for the PDP context modification procedure and PLMN and APN combination is deactivated, then it remains deactivated upon a PLMN change or inter-system change.\nNOTE 1:\tThis means the back-off timer can still be running or be deactivated for the given SM procedure and PLMN and APN combination when the MS returns to the PLMN or when it performs inter-system change back from S1 mode to A/Gb or Iu mode. Thus the MS can still be prevented from sending another MODIFY PDP CONTEXT REQUEST message with exception of those identified in subclause 6.1.3.3, in the PLMN for the same APN.\nIf the back-off timer is started upon receipt of a MODIFY PDP CONTEXT REQUEST message (i.e. the timer value was provided by the network, a configured value is available or the default value is used as explained above) or the back-off timer is deactivated, the MS behaves as follows:\ni)\tafter a PLMN change the MS may send a MODIFY PDP CONTEXT REQUEST message for the same  in the new PLMN, if the back-off timer is not running and is not deactivated for the PDP context modification procedure and the combination of new PLMN and APN;\nFurthermore as an implementation option, for the SM cause values #32 \"service option not supported\" or #33 \"requested service option not subscribed\", if the network does not include a Re-attempt indicator IE, the MS may decide not to automatically send another MODIFY PDP CONTEXT REQUEST message for the same APN, if the MS registered to a new PLMN which is in the list of equivalent PLMNs.\nii)\tif the network does not include the Re-attempt indicator IE to indicate whether re-attempt in S1 mode is allowed, or the MS ignores the Re-attempt indicator IE, e.g. because the Back-off timer value IE is not included, then:\n-\tif the MS is registered in its HPLMN or in a PLMN that is within the EHPLMN list (if the EHPLMN list is present), the MS shall apply the configured SM_RetryAtRATChange value as specified in 3GPP TS 24.368 [135] or in USIM file NASCONFIG as specified in 3GPP TS 31.102 [112], if available, to determine whether the MS may attempt a bearer resource modification procedure for the same PLMN and APN combination in S1 mode; and\n-\tif the MS is not registered in its HPLMN or in a PLMN that is within the EHPLMN list (if the EHPLMN list is present), or if the NAS configuration MO as specified in 3GPP TS 24.368 [135] is not available and the value for inter-system change is not configured in the USIM file NASCONFIG, then the MS behaviour regarding a bearer resource modification procedure for the same PLMN and APN combination in S1 mode is unspecified; and\niii)\tif the network includes the Re-attempt indicator IE indicating that re-attempt in an equivalent PLMN is not allowed, then depending on the timer value received in the Back-off timer value IE, for each combination of a PLMN from the equivalent PLMN list and the APN the MS shall start a back-off timer for the PDP context modification procedure with the value provided by the network, or deactivate the respective back-off timer as follows:\n-\tIf the Re-attempt indicator IE additionally indicates that re-attempt in S1 mode is allowed, the MS shall start or deactivate the back-off timer for A/Gb and Iu mode only; and\n-\totherwise the MS shall start or deactivate the back-off timer for A/Gb, Iu, and S1 mode.\nIf the back-off timer for a PLMN and APN combination was started or deactivated in S1 mode upon receipt of a BEARER RESOURCE MODIFICATION REJECT message (see 3GPP TS 24.301 [120]) and the network indicated that re-attempt in A/Gb or Iu mode is allowed, then this back-off timer does not prevent the MS from sending a MODIFY PDP CONTEXT REQUEST message in this PLMN for the same APN in A/Gb or Iu mode. If the network indicated that re-attempt in A/Gb or Iu mode is not allowed, the MS shall not send any MODIFY PDP CONTEXT REQUEST message in this PLMN for the same APN in A/Gb or Iu mode until the timer expires, the MS is switched off or the USIM is removed.\nNOTE 2:\tThe back-off timer is used to describe a logical model of the required MS behaviour. This model does not imply any specific implementation, e.g. as a timer or timestamp.\nNOTE 3:\tReference to back-off timer in this section can either refer to use of timer T3396 or to use of a different packet system specific timer within the MS. Whether the MS uses T3396 as a back-off timer or it uses different packet system specific timers as back-off timers is left up to MS implementation. This back-off timer is stopped when the MS is switched off or the SIM/USIM is removed.\nUpon receipt of a MODIFY PDP CONTEXT REQUEST message, if the MS does not accept the new QoS due to resource reasons or the indicated LLC SAPI, the MS shall initiate the PDP context deactivation procedure for the PDP context - the reject cause IE value of the DEACTIVATE PDP CONTEXT REQUEST message shall indicate \"QoS not accepted\".\nThe MS may reject the network initiated PDP context modification request by sending a MODIFY PDP CONTEXT REJECT message to the network. The message shall contain a cause code that typically indicates one of the following:\n# 41:\tsemantic error in the TFT operation;\n# 42:\tsyntactical error in the TFT operation;\n# 44:\tsemantic errors in packet filter(s);\n# 45:\tsyntactical errors in packet filter(s);\n# 48:\trequest rejected, Bearer Control Mode violation; or\n# 95 - 111:\tprotocol errors.\nThe MS shall reply with a MODIFY PDP CONTEXT REJECT message with cause \"request rejected, Bearer Control Mode violation\", if the selected Bearer Control Mode is 'MS only' and the network requests to modify or delete a TFT\nIf a TFT modification was requested and the network requests to modify or delete packet filters which were added by the MS, then the MODIFY PDP CONTEXT REJECT message shall be sent.\nThe TFT in the request message is checked by the MS for different types of TFT IE errors as specified in subclause 6.1.3.3.4.\nUpon receipt of a MODIFY PDP CONTEXT REJECT message, the network shall stop timer T3386 and enter the state PDP-ACTIVE.\na)\tExpiry of timers\nOn the network side:\nOn the first expiry of timer T3386, the network shall resend the MODIFY PDP CONTEXT REQUEST message reset and restart timer T3386. This retransmission is repeated four times, i.e. on the fifth expiry of timer T3386, the network may continue to use the previously negotiated QoS and TFT, or it may initiate the PDP context deactivation procedure.\nIn the MS:\nOn the first expiry of timer T3381, the MS shall resend the MODIFY PDP CONTEXT REQUEST message reset and restart timer T3381. This retransmission is repeated four times, i.e. on the fifth expiry of timer T3381, the MS may continue to use the previously negotiated QoS and TFT, or it may initiate the PDP context deactivation procedure.\nb)\tCollision of MS and Network initiated PDP Context Modification Procedures\nA collision of a MS and network initiated PDP context modification procedures is identified by the MS if a MODIFY PDP CONTEXT REQUEST message is received from the network after the MS has sent a MODIFY PDP CONTEXT REQUEST message itself, and both messages contain the same TI and the MS has not yet received a MODIFY PDP CONTEXT ACCEPT message from the network.\nA collision is detected by the network in case a MODIFY PDP CONTEXT REQUEST message is received from the MS with the same TI as the MODIFY PDP CONTEXT REQUEST message sent to the MS.\nIn the case of such a collision, the network initiated PDP context modification shall take precedence over the MS initiated PDP context modification. The MS shall terminate internally the MS initiated PDP context modification procedure, enter the state PDP-Active and proceed with the network initiated PDP context modification procedure by sending a MODIFY PDP CONTEXT ACCEPT message. The network shall ignore the MODIFY PDP CONTEXT REQUEST message received in the state PDP-MODIFY-PENDING. The network shall proceed with the network initiated PDP context modification procedure as if no MODIFY PDP CONTEXT REQUEST message was received from the MS.\nc) Collision of MS initiated PDP Context Modification Procedures and Network initiated Deactivate PDP Context Request Procedures\nA collision of a MS initiated PDP context modification procedures and a network initiated PDP context deactivation procedures is identified by the MS if a DEACTIVATE PDP CONTEXT REQUEST message is received from the network after the MS has sent a MODIFY PDP CONTEXT REQUEST message, and the MS has not yet received a MODIFY PDP CONTEXT ACCEPT message from the network.\nIn the case of such a collision, the network initiated PDP context deactivation shall take precedence over the MS initiated PDP context modification. The MS shall terminate internally the MS initiated PDP context modification procedure, and proceed with the network initiated PDP context deactivation procedure by sending a DEACTIVATE PDP CONTEXT ACCEPT, enter the state PDP-INACTIVE. The network shall ignore the MODIFY PDP CONTEXT REQUEST message received in the state PDP-INACTIVE-PENDING. The network shall proceed with the network initiated PDP context deactivation procedure as if no MODIFY PDP CONTEXT REQUEST message was received from the MS.\nd)\tMS initiated PDP context modification procedure for a PDN connection established for emergency bearer services.\nThe network shall reply with a MODIFY PDP CONTEXT REJECT message with a cause code indicating \"activation rejected by GGSN, Serving GW or PDN GW\".\nThe TFT in the MODIFY PDP CONTEXT REQUEST message is checked for different types of TFT IE errors as follows:\na)\tSemantic errors in TFT operations:\n1)\tWhen the TFT operation is \"Create a new TFT\" and there is already an existing TFT for the PDP context.\n2)\tWhen the TFT operation is an operation other than \"Create a new TFT\" and there is no TFT for the PDP context.\n3)\tWhen the TFT operation is \"Delete existing TFT\" and the TFT includes packet filters created by the receiver of the request.\n4)\tWhen the TFT operation is \"Delete existing TFT\" and there is already another PDP context with the same PDP address and APN without a TFT.\n5)\tWhen the TFT operation is \"Delete existing TFT\" and the PDP context is not the default PDP context.\n6)\tWhen the TFT operation is \"Delete packet filters from existing TFT\" or \"Replace packet filters in existing TFT\" and at least one of the packet filters to be deleted or replaced was created by the receiver of the request.\n7)\tWhen the TFT operation is \"Delete packet filters from existing TFT\" and this operation would render the TFT empty.\nIn the above cases the network shall perform the following actions:\nIn case 1) the network shall further process the new activation request and, if it was processed successfully, delete the old TFT.\nIn case 2) the network shall:\n-\tfurther process the new request and, if no error according to list items b), c), and d) was detected, consider the TFT as successfully deleted, if the TFT operation is \"Delete existing TFT\" or \"Delete packet filters from existing TFT\"; and\n-\tprocess the new request as an activation request, if the TFT operation is \"Add packet filters in existing TFT\" or \"Replace packet filters in existing TFT\".\nIn case 3) the network shall reject the modification request with cause \"semantic error in the TFT operation\".\nIn case 4) the network shall either:\n-\treject the modification request with cause \"semantic error in the TFT operation\"; or\n-\toptionally, if the BCM is \"MS only\" and the packet filters in the TFT do not have any explicit direction information, i.e. the packet filter direction parameter is set to \"00\", process the new deletion request and, after successful deletion of the TFT, deactivate the old PDP context with the same PDP address and APN without a TFT by explicit peer-to-peer signalling between the MS and the network.\n-\tIn case 5) the network shall either:\n-\treject the modification request with cause \"semantic error in the TFT operation\"; or\n-\toptionally, if the BCM is \"MS only\" and the packet filters in the TFT do not have any explicit direction information, i.e. the packet filter direction parameter is set to \"00\", process the new deletion request.\nIn case 6) the network shall reject the modification request with cause \"semantic error in the TFT operation\".\nIn case 7) the network shall:\ni)\tif the PDP context is the default PDP context, further process the new request and, if no error according to list items b), c), and d) was detected, delete the existing TFT. After successful deletion of the TFT, if there was already another PDP context with the same PDP address and APN without a TFT, the network shall deactivate this old PDP context without a TFT by explicit peer-to-peer signalling between the MS and the network; and\nii)\tif the PDP context is not the default PDP context, further process the new request and, if no error according to list items b), c), and d) was detected, delete the existing TFT. After successful deletion of the TFT, the network shall deactivate the modified PDP context by explicit peer-to-peer signalling between the MS and the network. The network need not respond with a Modify PDP Context Accept message.\nIn the above cases the MS shall perform the following actions:\nIn case 1) the MS shall further process the new activation request and, if it was processed successfully, delete the old TFT.\nIn case 2) the MS shall:\n-\tfurther process the new request and, if no error according to list items b), c), and d) was detected, consider the TFT as successfully deleted, if the TFT operation is \"Delete existing TFT\" or \"Delete packet filters from existing TFT\"; and\n-\tprocess the new request as an activation request, if the TFT operation is \"Add packet filters in existing TFT\" or \"Replace packet filters in existing TFT\".\nIn case 3) the MS shall reject the modification request with cause \"semantic error in the TFT operation\".\nIn case 4) the MS shall either:\nA)\treject the modification request with cause \"semantic error in the TFT operation\"; or\nB)\toptionally, to support networks compliant with earlier versions of the protocol, process the new deletion request and, after successful deletion of the TFT, deactivate the old PDP context with the same PDP address and APN without a TFT by explicit peer-to-peer signalling between the MS and the network.\nNOTE 1:\tThis case is not expected to occur for a network implementing this version of the protocol, because at least one of the two PDP contexts without TFT will be a non-default PDP context. But for Bearer Control Mode 'MS/NW' such a network does not support an initial configuration where the old PDP context without TFT is a non-default PDP context, and the network will not attempt to delete the TFT of a non-default PDP context.\nIf during a previous inter-system change from S1 mode to A/Gb or Iu mode the default PDP context linked to the PDP context to be modified was mapped from an EPS bearer context, the MS shall follow option A.\nIn case 5) the MS shall either:\nA)\treject the modification request with cause \"semantic error in the TFT operation\"; or\nB)\toptionally, to support networks compliant with earlier versions of the protocol, process the new deletion request.\nNOTE 2:\tA network implementing this version of the protocol will not attempt to delete the TFT of a non-default PDP context.\nIf during a previous inter-system change from S1 mode to A/Gb or Iu mode the default PDP context linked to the PDP context to be modified was mapped from an EPS bearer context, the MS shall follow option A.\nIn case 6) the MS shall reject the modification request with cause \"semantic error in the TFT operation\".\nIn case 7) the MS shall:\ni)\tif the PDP context is the default PDP context, further process the new request and, if no error according to list items b), c), and d) was detected, delete the existing TFT. After successful deletion of the TFT, if there was already another PDP context with the same PDP address and APN without a TFT, the MS shall deactivate this old PDP context without a TFT by explicit peer-to-peer signalling between the MS and the network; and\nii)\tif the PDP context is not the default PDP context, either\n-\tfurther process the new request and, if no error according to list items b), c), and d) was detected, delete the existing TFT. After successful deletion of the TFT, the MS shall deactivate the modified PDP context by explicit peer-to-peer signalling between the MS and the network. The MS need not send a Modify PDP Context Accept message; or\n-\treject the modification request with cause \"semantic error in the TFT operation\".\nb)\tSyntactical errors in TFT operations:\n1)\tWhen the TFT operation is an operation other than \"Delete existing TFT\" or \"No TFT operation\" and the packet filter list in the TFT IE is empty.\n2)\tWhen the TFT operation is \"Delete existing TFT\" or \"No TFT operation\" with a non-empty packet filter list in the TFT IE.\n3)\tWhen the TFT operation is \"Replace packet filters in existing TFT\" and the packet filter to be replaced does not exist in the original TFT.\n4)\tWhen the TFT operation is \"Delete packet filters from existing TFT\" and the packet filter to be deleted does not exist in the original TFT.\n5)\tVoid.\n6)\tWhen there are other types of syntactical errors in the coding of the TFT IE, such as a mismatch between the number of packet filters subfield, and the number of packet filters in the packet filter list.\n7)\tWhen the TFT operation is \"No TFT operation\" with an empty parameters list.\nIn case 3) the network shall not diagnose an error, further process the replace request and, if no error according to list items c) and d) was detected, include the packet filters received to the existing TFT.\nIn case 4) the network shall not diagnose an error, further process the deletion request and, if no error according to list items c) and d) was detected, consider the respective packet filter as successfully deleted.\nOtherwise the network shall reject the modification request with cause \"syntactical error in the TFT operation\".\nIn case 3) the MS shall not diagnose an error, further process the replace request and, if no error according to list items c) and d) was detected, include the packet filters received to the existing TFT.\nIn case 4) the MS shall not diagnose an error, further process the deletion request and, if no error according to list items c) and d) was detected, consider the respective packet filter as successfully deleted.\nOtherwise the MS shall reject the modification request with cause \"syntactical error in the TFT operation\".\nNOTE 2a:\tAn implementation that strictly follows packet filter list as defined in subclause 10.5.6.12 might not detect case 2).\nc)\tSemantic errors in packet filters:\n1)\tWhen a packet filter consists of conflicting packet filter components which would render the packet filter ineffective, i.e. no IP packet will ever fit this packet filter. How the receiver determines a semantic error in a packet filter is outside the scope of the present document.\n2)\tWhen the resulting TFT, which is not assigned to the default PDP context, does not contain any packet filter applicable for the uplink direction.\nNOTE 3:\tWhen BCM is 'MS only', the MS is allowed to include a TFT with packet filters without any explicit direction information, i.e. with value \"00\", and such packet filters are applicable for both uplink and downlink directions.\nThe network shall reject the modification request with cause \"semantic errors in packet filter(s)\".\nThe MS shall reject the modification request with cause \"semantic errors in packet filter(s)\".\nd)\tSyntactical errors in packet filters:\n1)\tWhen the TFT operation is \"Create a new TFT\" or \"Add packet filters to existing TFT\" and two or more packet filters in the resultant TFT would have identical packet filter identifiers.\n2)\tWhen the TFT operation is \"Create a new TFT\" or \"Add packet filters to existing TFT\" or \"Replace packet filters in existing TFT\" and two or more packet filters in all TFTs associated with this PDP address and APN would have identical packet filter precedence values.\n3)\tWhen there are other types of syntactical errors in the coding of packet filters, such as the use of a reserved value for a packet filter component identifier.\nIn case 1), if two or more packet filters with identical packet filter identifiers are contained in the new request, the network shall reject the modification request with cause \"syntactical errors in packet filter(s)\". Otherwise, the network shall not diagnose an error, further process the new request and, if it was processed successfully, delete the old packet filters which have the identical packet filter identifiers.\nIn case 2) the network shall not diagnose an error, further process the new request and, if it was processed successfully, delete the old packet filters which have identical filter precedence values. Furthermore, by means of explicit peer-to-peer signalling between the MS and the network, the network shall deactivate the PDP context(s) for which it has deleted the packet filters.\nOtherwise the network shall reject the modification request with cause \"syntactical errors in packet filter(s)\".\nIn case 1), if two or more packet filters with identical packet filter identifiers are contained in the new request, the MS shall reject the modification request with cause \"syntactical errors in packet filter(s)\". Otherwise, the MS shall not diagnose an error, further process the new request and, if it was processed successfully, delete the old packet filters which have the identical packet filter identifiers.\nIn case 2) the MS shall not diagnose an error, further process the new request and, if it was processed successfully, delete the old packet filters which have identical filter precedence values. Furthermore, the MS shall deactivate the PDP context(s) for which it has deleted the packet filters by means of explicit peer-to-peer signalling between the MS and the network,.\nOtherwise, the MS shall reject the modification request with cause \"syntactical errors in packet filter(s)\".\nThe figure depicts a network initiated PDP context modification procedure, which is a crucial step in the 3GPP TS 24.008 standard for network management. It illustrates the process of modifying the context of a PDP (Policy Data Protocol) to reflect changes in the network state. The figure includes various elements such as the network interface controller (NICA), network management system (NMS), and the network management protocol (NMP). The diagram highlights the importance of this procedure in ensuring the smooth operation of the network.\nFigure 6.6/3GPP TS 24.008: Network initiated PDP context modification procedure\nThe figure depicts the context modification procedure for MS initiated PDP (Multimedia Services Protocol) in 3GPP TS 24.008, which is a crucial protocol for multimedia services in 3G and 4G networks. The figure illustrates the steps involved in modifying the context of a PDP, including the initiation of the procedure, the selection of the context, and the execution of the procedure. The figure is crucial for understanding the process of modifying context in multimedia services, which is an essential aspect of network management and control.\nFigure 6.7/3GPP TS 24.008: MS initiated PDP context modification procedure\nThe purpose of this procedure is to deactivate an existing PDP context between the MS and the network. The PDP context deactivation may be initiated by the MS or by the network. The tear down indicator information element may be included in the DEACTIVATE PDP CONTEXT REQUEST message in order to indicate whether only the PDP context associated with this specific TI or all active PDP contexts sharing the same PDP address and APN as the PDP context associated with this specific TI shall be deactivated. If the tear down is requested, all other active PDP contexts sharing the same PDP address and APN as the PDP context associated with this specific TI shall be deactivated locally without peer-to-peer signalling. In this case, the network should not include WLAN offload indication in the DEACTIVATE PDP CONTEXT REQUEST message, and if the UE receives the WLAN offload indication, the UE shall ignore the indication. If the tear down indicator information element is not included in the DEACTIVATE PDP CONTEXT REQUEST message, only the PDP context associated with this specific TI shall be deactivated. For an exception when the PDP context is a default PDP context and there are other active PDP contexts sharing the same PDP address and APN, see subclause 6.1.3.4.3.\nAn MS supporting S1 mode shall always include the tear down indicator when deactivating the default PDP context. An MS not supporting S1 mode should apply the same behavior (see 3GPP TS 23.060 [74]).\nLocal deactivation of a NBIFOM multi-access PDN connection can be triggered by an NBIFOM procedure (see 3GPP TS 24.161 [158]). If such a trigger is received then the associated PDP contexts mentioned in this specification shall be deactivated locally without peer-to-peer signalling.\nAfter successful PDP context deactivation, the associated NSAPI and TI values are released and can be reassigned to another PDP context.\nIf one or more MBMS contexts are linked to a PDP context that has been deactivated, the MS shall deactivate all those MBMS contexts locally (without peer to peer signalling between the MS and the network).\nThe MS is allowed to initiate the PDP context deactivation procedure even if the timer T3396 is running.\nIn order to deactivate a PDP context, the MS sends a DEACTIVATE PDP CONTEXT REQUEST message to the network, enters the state PDP-INACTIVE-PENDING and starts timer T3390. The message contains the transaction identifier (TI) in use for the PDP context to be deactivated and a cause code that typically indicates one of the following causes:\n# 25:\tLLC or SNDCP failure (A/Gb mode only);\n# 26:\tinsufficient resources;\n# 36:\tregular deactivation; or\n# 37:\tQoS not accepted.\nThe network shall reply with the DEACTIVATE PDP CONTEXT ACCEPT message. Upon receipt of the DEACTIVATE PDP CONTEXT ACCEPT message, the MS shall stop timer T3390.\nIn A/Gb mode, both the MS and the network shall initiate local release of the logical link if it is not used by another PDP context.\nIn Iu mode, the network shall initiate the release of Radio Access Bearer associated with this PDP context.\nIf the selected Bearer Control Mode is 'MS/NW' the MS should not deactivate a PDP context, if it is the only PDP context without TFT within a group of active PDP contexts sharing the same PDP address and APN.\nNOTE 1:\tA configuration with more than one PDP context without TFT within a group of active PDP contexts sharing the same PDP address and APN can occur during a network initiated PDP context modification due to asynchronous TFT states in the MS and in the network (see e.g. subclause 6.1.3.3.4 bullet a.3 in the description of the TFT checks).\nNOTE 2:\tIf the MS deactivates the last remaining PDP context without TFT within a group of active PDP contexts sharing the same PDP address and APN, a network implementing this version of the protocol will deactivate all other active PDP contexts sharing the same PDP address and APN by explicit peer-to-peer signalling; a network compliant with earlier versions of the protocol can initiate the re-establishment of this PDP context using the network requested secondary PDP context activation procedure.\n\nIn order to deactivate a PDP context, the network sends a DEACTIVATE PDP CONTEXT REQUEST message to the MS and starts timer T3395. The message contains the transaction identifier in use for the PDP context to be deactivated and a cause code that typically indicates one of the following causes:\n# 8:\tOperator Determined Barring;\n# 25:\tLLC or SNDCP failure (A/Gb mode only);\n# 26:\tinsufficient resources;\n# 36:\tregular deactivation;\n# 38:\tnetwork failure;\n# 39:\treactivation requested.\n#112:\tAPN restriction value incompatible with active PDP context; or\n#113:\tMultiple accesses to a PDN connection not allowed.\nThe MS shall, upon receipt of this message, reply with a DEACTIVATE PDP CONTEXT ACCEPT message. Upon receipt of the DEACTIVATE PDP CONTEXT ACCEPT message, the network shall stop the timer T3395.\nIf the DEACTIVATE PDP CONTEXT REQUEST message includes the cause #39 \"reactivation requested\", the PDP context was activated by the MS, and the MS sent an APN for the establishment of the PDN connection, the MS shall stop timer T3396 if it is running for the APN sent by the MS. The MS should then re-activate the PDP context. If the MS did not send an APN for the establishment of the PDN connection and the request type was different from \"emergency\", the MS shall stop the timer T3396 associated with no APN if it is running, and should re-activate the PDP context without including an APN. Additionally, the MS should re-activate the PDP contexts that were originally activated by the MS and released by the network as a result of this PDP context deactivation procedure. If the DEACTIVATE PDP CONTEXT REQUEST message was received for an emergency PDN connection, the MS shall not stop the timer T3396 associated with no APN if it is running. The MS should then re-initiate the PDP context activation procedure for the emergency PDN connection.\nNOTE:\tUser interaction is necessary in some cases when the MS cannot re-activate the PDP context(s) automatically.\nIf a detach is requested by the HLR for an MS that has PDP contexts for emergency services, the SGSN shall send a DEACTIVATE PDP CONTEXT REQUEST message to the MS for all the PDP contexts that are not PDP contexts for emergency services.\nIf the network operates in network operation mode I, ISR is activated and the MS has indicated support of EMM combined procedures in MS network capability, when the SGSN receives the request from the Serving GW for deactivating the last remaining PDP context, then the SGSN shall perform a detach procedure for non-GPRS services only as described in subclause .2.\nIn A/Gb mode, both the MS and the network shall initiate local release of the logical link if it is not used by another PDP context.\nIn Iu mode, the network shall initiate the release of Radio Access Bearer associated with this PDP context.\nIf the SM cause value is #26 \"insufficient resources\", the network may include a value for timer T3396 in the DEACTIVATE PDP CONTEXT REQUEST message.\nIf the SM cause value is #26 \"insufficient resources\" and T3396 value IE is included:\n-\tthe MS shall take different actions depending on the timer value received for timer T3396 (if the MS is configured for dual priority, exceptions are specified in subclause 6.1.3.12; if the MS is an MS configured to use AC11 – 15 in selected PLMN, exceptions are specified in subclause 6.1.3.11):\ni)\tif the timer value indicates neither zero nor deactivated, the MS shall stop the timer T3396 associated with the corresponding APN, if it is running. The MS shall start timer T3396 with received value and not send another ACTIVATE PDP CONTEXT REQUEST, ACTIVATE SECONDARY PDP CONTEXT REQUEST or MODIFY PDP CONTEXT REQUEST message with exception of those identified in subclause 6.1.3.3, for the same APN until timer T3396 expires or the timer T3396 is stopped. If the MS did not send an APN for the establishment of the PDN connection and the request type was different from \"emergency\", the MS shall stop timer T3396 associated with no APN, if it is running. The MS shall then start timer T3396 with the value provided in the Back-off timer value IE and not send another ACTIVATE PDP CONTEXT REQUEST without an APN and with request type different from \"emergency\", or another ACTIVATE SECONDARY PDP CONTEXT REQUEST or MODIFY PDP CONTEXT REQUEST message with exception of those identified in subclause 6.1.3.3, for a non-emergency PDN connection established without an APN sent by the MS, until timer T3396 expires or timer T3396 is stopped. The MS shall not stop timer T3396 upon a PLMN change or inter-system change;\nii)\tif the timer value indicates that this timer is deactivated, the MS shall not send another ACTIVATE PDP CONTEXT REQUEST, ACTIVATE SECONDARY PDP CONTEXT REQUEST or MODIFY PDP CONTEXT REQUEST message with exception of those identified in subclause 6.1.3.3, for the same APN until the MS is switched off or the SIM/USIM is removed or the MS receives a REQUEST PDP CONTEXT ACTIVATION, REQUEST SECONDARY PDP CONTEXT ACTIVATION or MODIFY PDP CONTEXT REQUEST message with exception of those identified in subclause 6.1.3.3, for the same APN from the network or a DEACTIVATE PDP CONTEXT REQUEST message including SM cause #39 \"reactivation requested\" for a PDP context which was activated by the MS for the same APN from the network. If the MS did not send an APN for the establishment of the PDN connection and the request type was different from \"emergency\", the MS shall not send another ACTIVATE PDP CONTEXT REQUEST without an APN and with request type different from \"emergency\", or another ACTIVATE SECONDARY PDP CONTEXT REQUEST or MODIFY PDP CONTEXT REQUEST with exception of those identified in subclause 6.1.3.3, for a non-emergency PDN connection established without an APN sent by the MS, until the MS is switched off or the SIM/USIM is removed or the MS receives any of the following messages: a REQUEST PDP CONTEXT ACTIVATION without an APN, a REQUEST SECONDARY PDP CONTEXT ACTIVATION or MODIFY PDP CONTEXT REQUEST message for a non-emergency PDN connection established without an APN sent by the MS, or a DEACTIVATE PDP CONTEXT REQUEST message including SM cause #39 \"reactivation requested\" for a PDP context which was activated by the MS for a non-emergency PDN connection established without APN sent by the MS. The timer T3396 remains deactivated upon a PLMN change or inter-system change; and\niii)\tif the timer value indicates that this timer is zero, the MS:\n-\tshall stop timer T3396 associated with the corresponding APN, if running, and may send another ACTIVATE PDP CONTEXT REQUEST, ACTIVATE SECONDARY PDP CONTEXT REQUEST or MODIFY PDP CONTEXT REQUEST message for the same APN; and\n-\tif the MS did not send an APN for the establishment of the PDN connection and the request type was different from \"emergency\", the MS shall stop timer T3396 associated with no APN, if running, and may send an ACTIVATE PDP CONTEXT REQUEST message without an APN, or another ACTIVATE SECONDARY PDP CONTEXT REQUEST or MODIFY PDP CONTEXT REQUEST message for a non-emergency PDN connection established without an APN sent by the MS.\n-\tIf the timer T3396 is running when the MS enters state GMM-DEREGISTERED, the MS remains switched on, and the SIM/USIM in the MS remains the same, then timer T3396 is kept running until it expires or it is stopped.\n-\tif the MS is switched off when the timer T3396 is running, the MS shall behave as follows when the MS is switched on and the SIM/USIM in the MS remains the same:\n-\tlet t1 be the time remaining for T3396 timeout at switch off and let t be the time elapsed between switch off and switch on. If t1 is greater than t, then the timer shall be restarted with the value t1 – t. If t1 is equal to or less than t, then the timer need not be restarted. If the MS is not capable of determining t, then the MS shall restart the timer with the value t1; and\n-\tif prior to switch off, timer T3396 was running because an ACTIVATE PDP CONTEXT REQUEST, ACTIVATE SECONDARY PDP CONTEXT REQUEST or MODIFY PDP CONTEXT REQUEST message containing the low priority indicator set to \"MS is configured for NAS signalling low priority\" was rejected with timer T3396, and if timer T3396 is restarted at switch on, then the MS configured for dual priority shall handle session management requests as indicated in subclause 6.1.3.12.\nIf the T3396 value IE is not included, the MS shall proceed with deactivation procedure and then send DEACTIVATE PDP CONTEXT ACCEPT message.\nThe following abnormal cases can be identified:\na)\tExpiry of timers\nIn the mobile station:\nOn the first expiry of timer T3390, the MS shall resent the message DEACTIVATE PDP CONTEXT REQUEST and shall reset and restart the timer T3390. This retransmission is repeated four times, i.e. on the fifth expiry of timer T3390, the MS shall release all resources allocated and shall erase the PDP context related data.\nOn the network side:\nOn the first expiry of timer T3395, the network shall resent the message DEACTIVATE PDP CONTEXT REQUEST and shall reset and restart timer T3395. This retransmission is repeated four times, i.e. on the fifth expiry of timer T3395, the network shall erase the PDP context related data for that MS.\nb)\tCollision of MS and network initiated PDP context deactivation requests\nIf the MS and the network initiated PDP context deactivation requests collide, the MS and the network shall each reply with the messages DEACTIVATE PDP CONTEXT ACCEPT and shall stop timer T3390 and T3395, respectively.\nc)\tNetwork initiated PDP context deactivation request without tear down indicator information element for a default PDP context\nIf an MS supporting S1 mode receives a DEACTIVATE PDP CONTEXT REQUEST message without tear down indicator information element, and the PDP context associated with the specific TI is a default PDP context, the MS shall deactivate the default PDP context as specified in subclause 6.1.3.4.2. Additionally the MS shall deactivate all other active PDP contexts sharing the same PDP address and APN as the default PDP context locally without peer-to-peer signalling.\nAn MS not supporting S1 mode may apply the same behaviour.\nThe figure depicts the context deactivation procedure for MS initiated PDPs in 3GPP TS 24.008, which is a crucial step in ensuring the proper functioning of the network. The figure illustrates the steps involved in deactivating the context of a PDP, which is a mechanism used to control the flow of data in a network. The figure shows the various components involved, such as the PDP, the context, and the deactivation process, which is essential for maintaining network stability and performance.\nFigure 6.8/3GPP TS 24.008: MS initiated PDP context deactivation procedure\nThe figure depicts the context deactivation procedure for network initiated PDPs in 3GPP TS 24.008, which is a crucial step in network management. The figure shows the steps involved in deactivating the context of a PDP, which is a protocol used for network management and control. The figure includes a flow diagram, a sequence of steps, and a legend to help understand the process.\nFigure 6.9/3GPP TS 24.008: Network initiated PDP context deactivation procedure\nThe network can use the notification procedure to inform the MS about events which are relevant for the upper layer which is using a PDP context or has requested a session management procedure.\nIf the MS has indicated that it supports the notification procedure, the network may initiate the procedure at any time while a PDP context is activated or another session management procedure is ongoing.\nThe network initiates the notification procedure by sending a NOTIFICATION message to the MS (see example in figure 6.9a/3GPP TS 24.008).\n\n\nFigure 6.9a/3GPP TS 24.008: Notification procedure\nWhen the MS receives a NOTIFICATION message, the SM protocol entity in the MS shall provide the notification indicator to the upper layer.\nThe notification indicator can have the following value:\n#1:\t\tSRVCC handover cancelled, IMS session re-establishment required.\nIf the SM entity of the MS receives an SM STATUS message the MS shall take different actions depending on the received SM cause value:\n#81\tInvalid transaction identifier value\nThe MS shall abort any ongoing SM procedure related to the received transaction identifier value, stop any related timer, and deactivate the corresponding PDP or MBMS context locally (without peer to peer signalling between the MS and the network).\nIf one or more MBMS contexts are linked to a PDP context that has been deactivated, the MS shall deactivate all those MBMS Contexts locally (without peer to peer signalling between the MS and the network).\n#97\tMessage type non-existent or not implemented\nThe MS shall abort any ongoing SM procedure related to the received transaction identifier value and stop any related timer.\nIf the SM entity of the MS receives a SM STATUS message with any other SM cause value no state transition and no specific action shall be taken as seen from the radio interface, i.e. local actions are possible.\nIf the SM entity of the network receives an SM STATUS message the network shall take different actions depending on the received SM cause value:\n#81\tInvalid transaction identifier value\nThe network shall abort any ongoing SM procedure related to the received transaction identifier value, stop any related timer, and deactivate the corresponding PDP or MBMS context locally (without peer to peer signalling between the MS and the network).\nIf one or more MBMS contexts are linked to a PDP context that has been deactivated, the MS shall deactivate all those MBMS Contexts locally (without peer to peer signalling between the MS and the network).\n#97\tMessage type non-existent or not implemented\nThe network shall abort any ongoing SM procedure related to the received transaction identifier value and stop any related timer.\nThe actions to be taken in the network on receiving a SM STATUS message with any other SM cause value are an implementation dependent option.\nThe MS and the GGSN may communicate parameters by means of the protocol configuration options information element or extended protocol configuration options information element when activating, modifying or deactivating a PDP context. Such parameters can e.g. be used to convey information from external protocols between the MS and the GGSN. An overview of how the protocol configuration options information element is used is specified in 3GPP TS 27.060 [36a].\nThe protocol configuration options information element and the extended protocol configuration options information element is transparent to the SGSN.\nNOTE 1:\tThe MS and the network negotiate support of the extended protocol configuration options IE end-to-end for each PDN connection, as the information element can only be used if it is supported also by the GGSN/PDN GW.\nIf supported by the network and the MS end-to-end for a PDN connection, protocol configuration options shall be exchanged via the extended protocol configuration options IE. Otherwise the protocol configuration options IE is used.\nFor the MS, the extended protocol configuration options is supported by the network and the MS end-to-end for a PDN connection if the network has indicated support of the extended protocol configuration options IE in the last ATTACH ACCEPT or ROUTING AREA UPDATING ACCEPT message, and\n-\tthe PDP Type requested for the default PDP context is non-IP; or\n-\tthe network has included the extended protocol configuration options IE in at least one session management message received by the MS for this PDN connection.\nFor the SGSN, the extended protocol configuration options is supported by the network and the MS end-to-end for a PDN connection if the MS has indicated support of the extended protocol configuration options IE in the last ATTACH REQUEST or ROUTING AREA UPDATING REQUEST message, and\n-\tthe PDP Type requested for the default PDP context is non-IP; or\n-\tthe SGSN has received the extended protocol configuration options IE in at least one message sent by the GGSN or PDN GW towards the MS for this PDN connection (for details see 3GPP TS 29.274 [16D]).\nNOTE 2:\tFor the GGSN or PDN GW, the extended protocol configuration options is supported by the network and the MS end-to-end for a PDN connection if:\n-\tthe GGSN initiates a network requested PDP context activation with offered PDP Type non-IP; or\n-\tthe last support indication received from the SGSN or S-GW indicates that extended protocol configuration options is supported for this PDN connection (for details see 3GPP TS 29.274 [16D]).\nThe purpose of this procedure is to establish an MBMS context in the MS and in the network for a specific IP Multicast Address using a specific NSAPI for MBMS user plane transmission. The MS shall only initiate the MBMS context activation when requested by the network. However, the trigger for the activation request by the network is initiated by the MS at the application layer (see 3GPP TS 23.246 [106]).\nIn order to request an MBMS context activation, the network sends a REQUEST MBMS CONTEXT ACTIVATION message to the MS, enters the state MBMS-ACTIVE-PENDING and starts timer T3385. The message shall contain the IP multicast address, the APN and the Linked NSAPI.\nUpon receipt of a REQUEST MBMS CONTEXT ACTIVATION message, the MS shall validate the message by verifying the NSAPI given in the Linked NSAPI IE to be one of the active PDP context(s), stop the timer T3396 if it is running for the APN indicated in the message and send an ACTIVATE MBMS CONTEXT REQUEST, enter state MBMS-ACTIVE-PENDING and start timer T3380. The message shall contain an IP multicast address and an APN, which shall be the same as the IP multicast address and the APN requested by the network in the REQUEST MBMS CONTEXT ACTIVATION message. Furthermore, the MS shall include the Supported MBMS bearer capabilities, i.e. the maximum downlink bit rate the MS can handle.\nUpon receipt of the ACTIVATE MBMS CONTEXT REQUEST message, the network shall stop timer T3385. If the network accepts the request, it shall reply with an ACTIVATE MBMS CONTEXT ACCEPT message.\nUpon receipt of the message ACTIVATE MBMS CONTEXT ACCEPT the MS shall stop timer T3380 and shall enter the state MBMS-ACTIVE.\nUpon receipt of an ACTIVATE MBMS CONTEXT REQUEST message the network may reject the MS initiated MBMS context activation by sending an ACTIVATE MBMS CONTEXT REJECT message to the MS. The sender of the message shall include the same TI as included in the ACTIVATE MBMS CONTEX REQUEST and an additional cause code that typically indicates one of the following causes:\n# 8:\tOperator Determined Barring;\n# 24:\tMBMS bearer capabilities insufficient for the service;\n# 26:\tinsufficient resources;\n# 27:\tmissing or unknown APN;\n# 29:\tuser authentication failed;\n# 30:\tactivation rejected by GGSN, Serving GW or PDN GW;\n# 31:\tactivation rejected, unspecified;\n# 32:\tservice option not supported;\n# 33:\trequested service option not subscribed;\n# 34:\tservice option temporarily out of order; or\n# 95 - # 111:\tprotocol errors.\nThe network may include a Back-off timer value IE in the ACTIVATE MBMS CONTEXT REJECT message.\nIf the Back-off timer value IE is included and the SM cause value is different from #26 \"insufficient resources\", the network may include the Re-attempt indicator IE to indicate whether the MS is allowed to attempt an MBMS context activation procedure in an equivalent PLMN.\nUpon receipt of an ACTIVATE MBMS CONTEXT REJECT message, the MS shall stop timer T3380 and enter/remain in state PDP-INACTIVE.\nIf the SM cause value is #26 \"insufficient resources\" and the Back-off timer value IE is included, the MS shall ignore the Re-attempt indicator IE provided by the network, if any, and take different actions depending on the timer value received for timer T3396 in the Back-off timer value IE (if the MS is configured for dual priority, exceptions are specified in subclause 6.1.3.12):\ni)\tif the timer value indicates neither zero nor deactivated, the MS shall stop timer T3396 associated with the corresponding APN, if it is running. The MS shall then start timer T3396 with the value provided in the Back-off timer value IE and shall not send another ACTIVATE MBMS CONTEXT REQUEST message for the same APN that was sent by the MS until timer T3396 expires or timer T3396 is stopped. The MS shall not stop timer T3396 upon a PLMN change or inter-system change;\nii)\tif the timer value indicates that this timer is deactivated, the MS shall not send another ACTIVATE MBMS CONTEXT REQUEST message for the same APN that was sent by the MS, until the MS is switched off or the SIM/USIM is removed or the MS receives REQUEST MBMS CONTEXT ACTIVATION message for the same APN from the network. The timer T3396 remains deactivated upon a PLMN change or inter-system change; and\niii)\tif the timer value indicates that this timer is zero, the MS may send another ACTIVATE MBMS CONTEXT REQUEST message for the same APN.\nIf the Back-off timer value IE is not included, then the MS may send another ACTIVATE MBMS CONTEXT REQUEST message for the same APN.\nIf the MS is switched off when the timer T3396 is running, the MS shall behave as follows when the MS is switched on and the SIM/USIM in the MS remains the same:\n-\tlet t1 be the time remaining for T3396 timeout at switch off and let t be the time elapsed between switch off and switch on. If t1 is greater than t, then the timer shall be restarted with the value t1 – t. If t1 is equal to or less than t, then the timer need not be restarted. If the MS is not capable of determining t, then the MS shall restart the timer with the value t1; and\n-\tif prior to switch off, timer T3396 was running because an ACTIVATE PDP CONTEXT REQUEST, ACTIVATE SECONDARY PDP CONTEXT REQUEST, MODIFY PDP CONTEXT REQUEST or ACTIVATE MBMS CONTEXT REQUEST message containing the low priority indicator set to \"MS is configured for NAS signalling low priority\" was rejected with timer T3396, and if timer T3396 is restarted at switch on, then the MS configured for dual priority shall handle session management requests as indicated in subclause 6.1.3.12.\nIf the SM cause value is different from #26 \"insufficient resources\", and the Back-off timer value IE is included, the MS shall take different actions depending on the timer value received in the Back-off timer value IE:\ni)\tif the timer value indicates neither zero nor deactivated, the MS shall start the back-off timer with the value provided in the Back-off timer value IE for the MBMS context activation procedure and PLMN and APN combination. The MS shall not send another ACTIVATE MBMS CONTEXT REQUEST message in the PLMN for the same APN that was sent by the MS until the back-off timer expires, the MS is switched off or the SIM/USIM is removed;\nii)\tif the timer value indicates that this timer is deactivated, the MS shall not send another ACTIVATE MBMS CONTEXT REQUEST message in the PLMN for the same APN that was sent by the MS until the MS is switched off or the SIM/USIM is removed; and\niii)\tif the timer value indicates that this timer is zero, the MS may send an ACTIVATE MBMS CONTEXT REQUEST message in the PLMN for the same APN.\nIf the Back-off timer value IE is not included, then the MS shall ignore the Re-attempt indicator IE provided by the network, if any.\ni)\tAdditionally, if the SM cause value is #8 \"operator determined barring\", #27 \"missing or unknown APN\", #32 \"service option not supported\", or #33 \"requested service option not subscribed\", the MS shall proceed as follows:\n-\tif the MS is registered in its HPLMN or in a PLMN that is within the EHPLMN list (if the EHPLMN list is present), the MS shall behave as described above in the present subclause, using the configured SM_RetryWaitTime value as specified in 3GPP TS 24.368 [135] or in USIM file NASCONFIG as specified in 3GPP TS 31.102 [112], if available, as back-off timer value; and\n-\totherwise, if the MS is not registered in its HPLMN or in a PLMN that is within the EHPLMN list (if the EHPLMN list is present), or if the SM_RetryWaitTime value is not configured, the MS shall behave as described above in the present subclause using the default value of 12 minutes for the back-off timer.\nii)\tFor SM cause values different from #8 \"operator determined barring\", #27 \"missing or unknown APN\", #32 \"service option not supported\", or #33 \"requested service option not subscribed\", the MS behaviour regarding the start of a back-off timer is unspecified.\nThe MS shall not stop any back-off timer upon a PLMN change or inter-system change. If the network indicates that a back-off timer for the MBMS context activation procedure and PLMN and APN combination is deactivated, then it remains deactivated upon a PLMN change or inter-system change.\nNOTE 1:\tThis means the back-off timer can still be running or be deactivated for the given SM procedure and PLMN and APN combination when the MS returns to the PLMN or when it performs inter-system change back from S1 mode to A/Gb or Iu mode. Thus the MS can still be prevented from sending another ACTIVATE MBMS CONTEXT REQUEST message in the PLMN for the same APN.\nIf the back-off timer is started upon receipt of an ACTIVATE MBMS CONTEXT REJECT message (i.e. the timer value was provided by the network, a configured value is available or the default value is used as explained above) or the back-off timer is deactivated, the MS behaves as follows:\ni)\tafter a PLMN change the MS may send an ACTIVATE MBMS CONTEXT REQUEST message for the same APN in the new PLMN, if the back-off timer is not running and is not deactivated for the MBMS context activation procedure and the combination of new PLMN and APN;\nFurthermore as an implementation option, for the SM cause values #8 \"operator determined barring\", #27 \"missing or unknown APN\", #32 \"service option not supported\" or #33 \"requested service option not subscribed\", if the network does not include a Re-attempt indicator IE, the MS may decide not to automatically send another ACTIVATE MBMS CONTEXT REQUEST message for the same APN, if the MS registered to a new PLMN which is in the list of equivalent PLMNs.\nii)\tif the network includes the Re-attempt indicator IE, the MS shall ignore any indication provided in the IE regarding whether re-attempt in S1 mode is allowed. If the Re-attempt indicator IE indicates that re-attempt in an equivalent PLMN is not allowed, then depending on the timer value received in the Back-off timer value IE, for each combination of a PLMN from the equivalent PLMN list and the APN the MS shall start a back-off timer for the MBMS context activation procedure with the value provided by the network, or deactivate the respective back-off timer.\nNOTE 2:\tThe back-off timer is used to describe a logical model of the required MS behaviour. This model does not imply any specific implementation, e.g. as a timer or timestamp.\nNOTE 3:\tReference to back-off timer in this section can either refer to use of timer T3396 or to use of a different packet system specific timer within the MS. Whether the MS uses T3396 as a back-off timer or it uses different packet system specific timers as back-off timers is left up to MS implementation. This back-off timer is stopped when the MS is switched off or the SIM/USIM is removed.\nUpon receipt of the REQUEST MBMS CONTEXT ACTIVATION message, the MS may reject the network requested MBMS context activation by sending the REQUEST MBMS CONTEXT ACTIVATION REJECT message to the network. The sender of the message shall include the same TI as included in the REQUEST MBMS CONTEXT ACTIVATION and an additional cause code that typically indicates one of the following causes:\n# 26:\tinsufficient resources;\n# 31:\tactivation rejected, unspecified;\n# 40:\tfeature not supported; or\n# 95 - # 111:\tprotocol errors.\nThe network shall stop timer T3385 and enter in state PDP-INACTIVE.\nThe following abnormal cases can be identified:\na)\tExpiry of timers in the mobile station:\tOn the first expiry of the timer T3380, the MS shall resend the ACTIVATE MBMS CONTEXT REQUEST and shall reset and restart timer T3380. This retransmission is repeated four times, i.e. on the fifth expiry of timer T3380, the MS shall release all resources possibly allocated for this invocation and shall abort the procedure; no automatic MBMS context activation re-attempt shall be performed.\nb)\tExpiry of timers on the network side: On the first expiry of the timer T3385, the network shall resend the message REQUEST MBMS CONTEXT ACTIVATION and shall reset and restart timer T3385. This retransmission is repeated four times, i.e. on the fifth expiry of timer T3385, the network shall release possibly allocated resources for this activation and shall abort the procedure.\nc)\tMBMS context activation request for an already activated MBMS context (on the mobile station side): If the MS receives a REQUEST MBMS CONTEXT ACTIVATION message with the same combination of APN and IP multicast address (i.e. PDP type and PDP address) as an already activated MBMS context, the MS shall deactivate the existing MBMS context locally without notification to the network and proceed with the requested MBMS context activation.\nd)\tMBMS context activation request for an already activated MBMS context (on the network side): If the network receives an ACTIVATE MBMS CONTEXT REQUEST message with the same combination of APN and IP multicast address (i.e. PDP type and PDP address) as an already activated MBMS context, the network shall deactivate the existing MBMS context locally without notification to the MS and proceed with the requested MBMS context activation.\nThe figure depicts the context activation procedure for MBMS (Mobile Broadband Multimedia Services) in 3GPP TS 24.008, which is a standard for mobile broadband services. The figure shows the steps involved in activating the context for MBMS, including the selection of the appropriate service, the establishment of the context, and the activation of the service. The figure is important for understanding the technical aspects of MBMS and its implementation in mobile networks.\nFigure 6.10/3GPP TS 24.008: MBMS context activation procedure\nThe purpose of this procedure is to deactivate an existing MBMS context in the MS and the network. The MS shall only initiate the MBMS context deactivation when requested by the network, however the trigger for the deactivation request by the network may be initiated by the MS at application layer or by the network, see 3GPP TS 23.246 [106].\nAfter a successful MBMS context deactivation, the associated MBMS NSAPI and TI values shall be released in both the MS and the network and can be reassigned to another MBMS context.\nThe MBMS context deactivation procedure makes use of the messaging and signalling of the PDP context deactivation procedure as described in the subclauses 6.1.3.9.1 and 6.1.3.9.2.\nIn order to request an MBMS context deactivation, the network sends a DEACTIVATE PDP CONTEXT REQUEST message to the MS, enters the state MBMS-INACTIVE-PENDING and starts timer T3395. The message contains the transaction identifier (TI) in use for the MBMS context to be deactivated and a cause code that typically indicates one of the following causes:\n# 36:\tregular deactivation;\n# 38:\tnetwork failure;\n# 47:\tmulticast group membership time-out.\nThe MS shall reply with a DEACTIVATE PDP CONTEXT ACCEPT message and enter the state PDP-INACTIVE. Upon receipt of the DEACTIVATE PDP CONTEXT ACCEPT message, the network shall stop the timer T3395 and enter the state PDP-INACTIVE.\nThe following abnormal cases can be identified:\na)\tExpiry of timers:\nOn the first expiry of the timer T3395, the network shall resend the message DEACTIVATE PDP CONTEXT REQUEST and shall reset and restart the timer T3395. This retransmission is repeated, i.e. on the fifth expiry of the timer T3395, the network shall erase the MBMS context related data for that MS.\nThe figure depicts the context deactivation procedure for MBMS (Mobile Broadband Multimedia Services) in 3GPP TS 24.008, which is a crucial step in ensuring the proper functioning of the mobile broadband service. The figure illustrates the steps involved in deactivating the context, including the identification of the context, the initiation of the deactivation process, and the completion of the deactivation. The figure is crucial for ensuring the smooth operation of the MBMS service and maintaining the quality of service for mobile users.\nFigure 6.11/3GPP TS 24.008: MBMS context deactivation procedure\n\nThe MS and the GGSN may communicate parameters related to the MBMS bearer by means of the MBMS protocol configuration options information element when activating or deactivating an MBMS context. For example, such parameters can be used to convey information between the MS and the GGSN.\nThe MBMS protocol configuration options information element is transparent to the SGSN.\nThe network may detect and start performing the APN based congestion control when one or more APN congestion criteria as specified in 3GPP TS 23.060 [74] are met. The network may store an APN congestion back-off time on a per MS and congested APN basis. If the MS does not provide an APN for the PDP context activation, then the SGSN uses the APN which is used in GGSN/PDN GW selection procedure as congested APN. When APN based congestion control is active, the network may reject session management requests except the modify PDP context requests from UEs or deactivate existing PDP contexts with SM cause value #26 \"insufficient resources\".\nIn the MS, session management timers T3396 for APN based congestion control are started and stopped on a per APN basis. The APN associated with T3396 is the APN sent by the MS when the PDN connection is established. If no APN is included in the ACTIVATE PDP CONTEXT REQUEST message, then T3396 is associated with no APN. For this purpose the MS shall memorize the APN provided to the network during the PDP context activation. The timer T3396 associated with no APN will never be started due to any SM procedure related to an emergency PDN connection. If the timer T3396 associated with no APN is running, it does not affect the ability of the MS to request an emergency PDN connection.\nIf timer T3396 is running or is deactivated, and the MS is an MS configured to use AC11 – 15 in selected PLMN, then the MS is allowed to initiate any session management procedure for the respective APN.\nThe network may detect and start performing the group specific session management congestion control when one or more group congestion criteria as specified in 3GPP TS 23.060 [74] are met. When group specific session management congestion control is active, the mechanism for APN based congestion control as specified in subclause 6.1.3.11 shall be followed.\nIf timer T3396 is running for a specific APN due to one of the following reasons:\n-\tan ACTIVATE PDP CONTEXT REQUEST, ACTIVATE SECONDARY PDP CONTEXT REQUEST, MODIFY PDP CONTEXT REQUEST or ACTIVATE MBMS CONTEXT REQUEST message containing the low priority indicator set to \"MS is configured for NAS signalling low priority\" was rejected with a timer value for timer T3396 and SM cause value #26 \"insufficient resources\";\n-\ta DEACTIVATE PDP CONTEXT REQUEST message was received with a timer value for timer T3396 and SM cause value #26 \"insufficient resources\" for a PDP context established with the low priority indicator set to \"MS is configured for NAS signalling low priority\", or\n-\tbecause the MS received a DEACTIVATE PDP CONTEXT REQUEST message containing a timer value for timer T3396 and SM cause value #26 \"insufficient resources\" for a PDP context established with the low priority indicator set to \"MS is configured for NAS signalling low priority\";\nupon request of the upper layers the MS can:\n-\tsend an ACTIVATE PDP CONTEXT REQUEST or ACTIVATE MBMS CONTEXT REQUEST message to the same APN, with low priority indicator set to \"MS is not configured for NAS signalling low priority\"; or,\n-\tsend an ACTIVATE SECONDARY PDP CONTEXT REQUEST or MODIFY PDP CONTEXT REQUEST message, with low priority indicator set to \"MS is not configured for NAS signalling low priority\", for an active PDP context established with low priority indicator set to \"MS is not configured for NAS signalling low priority\" exists.\nIf timer T3396 is running, because any of the following messages containing the low priority indicator set to \"MS is configured for NAS signalling low priority\" was rejected with a timer value for timer T3396 and SM cause value #26 \"insufficient resources\":\n-\tan ACTIVATE PDP CONTEXT REQUEST without an APN and with request type different from \"emergency\"; or\n-\tan ACTIVATE SECONDARY PDP CONTEXT REQUEST or MODIFY PDP CONTEXT REQUEST message for a non-emergency PDN connection established without APN sent by the MS,\nor because the MS received a DEACTIVATE PDP CONTEXT REQUEST message containing a timer value for timer T3396 and SM cause value #26 \"insufficient resources\" for a non-emergency PDN connection established without an APN and established with the low priority indicator set to \"MS is configured for NAS signalling low priority\", then upon request of the upper layers the MS can:\n-\tsend an ACTIVATE PDP CONTEXT REQUEST message without an APN and with low priority indicator set to \"MS is not configured for NAS signalling low priority\" for establishment an non-emergency PDN connection; or\n-\tsend an ACTIVATE SECONDARY PDP CONTEXT REQUEST or MODIFY PDP CONTEXT REQUEST message, with low priority indicator set to \"MS is not configured for NAS signalling low priority\", for an active non-emergency PDP context established without an APN and with low priority indicator set to \"MS is not configured for NAS signalling low priority\".\nFor requests with low priority indicator set to \"MS is configured for NAS signalling low priority\", the MS shall follow the procedures specified in subclause 6.1.3.1.3.\nThe network may include a back-off timer value in a session management reject message to regulate the time interval at which the MS may retry the same procedure. For SM cause values other than #26 \"insufficient resources\", the network may also include the re-attempt indicator to indicate whether the MS is allowed to re-attempt the corresponding EPS session management procedure for the same  in S1 mode after inter-system change.\nNOTE 1:\tIf the network includes this back-off timer value, then the MS is blocked from sending another SM request for the same procedure for the same PLMN and  combination for the specified duration. Therefore, the operator needs to exercise caution in determining the use of this timer value.\nNOTE 2:\tIf the re-attempt indicator is not provided by the network, an MS registered in its HPLMN or in an EHPLMN (if the EHPLMN list is present) can use the configured SM_RetryAtRATChange value specified in the NAS configuration MO or in the USIM NASCONFIG file to derive the re-attempt indicator as specified in subclauses 6.1.3.1.3.3, 6.1.3.2.2.3, and 6.1.3.3.3.3.\nIf re-attempt in S1 mode is allowed, the MS shall consider the back-off timer to be applicable only to the GPRS session management in A/Gb and Iu mode for the rejected session management procedure and the given PLMN and  combination. If re-attempt in S1 mode is not allowed, the MS shall consider the back-off timer to be applicable to both NAS protocols, i.e. applicable to the GPRS session management in A/Gb and Iu mode for the rejected session management procedure and to the EPS session management in S1 mode for the corresponding EPS session management procedure and the given PLMN and  combination.\nThe APN of the PLMN and APN combination associated with the back-off timer is the APN sent by the MS when the PDN connection is established. If no APN is included in the ACTIVATE PDP CONTEXT REQUEST message, then the back-off timer is associated with the combination of the PLMN and no APN. For this purpose the MS shall memorize the APN provided to the network during the PDP context activation. The back-off timer associated with the combination of a PLMN with no APN will never be started due to any SM procedure related to an emergency PDN connection. If the back-off timer associated with the combination of a PLMN with no APN is running, it does not affect the ability of the MS to request an emergency PDN connection.\nThe network may additionally indicate in the re-attempt indicator that a command to back-off is applicable not only for the PLMN in which the MS received the session management reject message, but for each PLMN included in the equivalent PLMN list at the time when the session management reject message was received.\nIf the back-off timer is running or is deactivated for a given PLMN and APN combination, and the MS is an MS configured to use AC11 – 15 in selected PLMN, then the MS is allowed to initiate any GPRS session management procedure for this PLMN and APN combination.\nIn networks that support offloading of traffic to WLAN, as specified in 3GPP TS 25.331 [23c], a permission to offload is determined for the MS and the PDP context in accordance with 3GPP TS 23.060 [74] subclause 5.3.21.\n",
                            "figures_meta_data": [],
                            "tables": []
                        }
                    ]
                },
                {
                    "title": "6.2\tvoid",
                    "description": "",
                    "summary": "",
                    "text_content": "",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "6.3\tCoordination between SM and GMM for supporting ISR",
                    "description": "",
                    "summary": "",
                    "text_content": "The MS with its TIN set as \"RAT-related TMSI\" for which ISR is activated shall change its TIN to \"P-TMSI\" to locally deactivate ISR and stop the periodic tracking area update timer T3412 or T3423, if running:\n-\tupon modification of any PDP context which was activated before the ISR is activated in the MS;\n-\tupon deactivation of the last remaining PDP context in the MS;\n-\tat the time when the MS performs intersystem change from A/Gb mode to S1 mode or from Iu mode to S1 mode if any PDP context activated after the ISR was activated in the MS exists, and the MS is in EMM-IDLE mode on completion of intersystem change; or\n-\tupon deactivation of last non-emergency PDP context in the MS, if the MS has only a PDN connection for emergency bearer services remaining.\nISR remains activated on the network side in the above cases.\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "6.4\tMSISDN notification procedure",
                    "description": "",
                    "summary": "",
                    "text_content": "The MSISDN notification procedure allows the MS to query the network for its MSISDN for the purpose of user information. In order to request the MSISDN, the MS shall encode the protocol configuration options information element (subclause 10.5.6.3) in the MS to network direction to indicate MSISDN query. The network shall then provide the MSISDN, if available, in the protocol configuration options information element in the network to MS direction. Querying the network and handling of the provided MSISDN by the MS is implementation dependent, in a similar way to the USSD notification or application mode defined in 3GPP TS 23.090 [132].\nNOTE:\tThe MS might store the provided MSISDN in the corresponding USIM file (see 3GPP TS 31.102 [112] subclause 4.2.26) and such an MS could check this USIM file to determine whether to query the network.\nThe network shall provide only one MSISDN. As a result, a provided MSISDN shall supercede any MSISDN that was previously provided in the protocol configuration options information element. The MSISDN provided is for user information only, and the MS shall not use the MSISDN in any NAS signalling procedure. If the MSISDN is stored in the ME, the ME shall retain the MSISDN at power off. The MSISDN stored in the ME, if any, can only be used if the IMSI from the USIM matches the IMSI stored in non-volatile memory, else the MS shall delete the MSISDN.\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                }
            ]
        },
        {
            "title": "7\tExamples of structured procedures",
            "description": "See 3GPP TS 23.108 [9a].\n",
            "summary": "",
            "tables": [],
            "figures_meta_data": [],
            "subsections": []
        },
        {
            "title": "8\tHandling of unknown, unforeseen, and erroneous protocol data",
            "description": "",
            "summary": "",
            "tables": [],
            "figures_meta_data": [],
            "subsections": [
                {
                    "title": "8.1\tGeneral",
                    "description": "",
                    "summary": "",
                    "text_content": "The procedures specified in 3GPP TS 24.008 and call-related supplementary service handling in 3GPP TS 24.010 [21] apply to those messages which pass the checks described in this subclause.\nThis subclause also specifies procedures for the handling of unknown, unforeseen, and erroneous protocol data by the receiving entity. These procedures are called \"error handling procedures\", but in addition to providing recovery mechanisms for error situations they define a compatibility mechanism for future extensions of the protocols.\nError handling concerning the value part of the Facility IE and of the SS Version Indicator IE are not in the scope of the present document. It is defined in 3GPP TS 24.010 [21] and the 3GPP TS 24.08x series.\nSub subclauses 8.1 to 8.8 shall be applied in order of precedence.\nMost error handling procedures are mandatory for the mobile station.\nDetailed error handling procedures in the network are implementation dependent and may vary from PLMN to PLMN. However, when extensions of this protocol are developed, networks will be assumed to have the error handling that is indicated in this subclause as mandatory (\"shall\") and that is indicated as strongly recommended (\"should\"). Subclauses 8.2, 8.3, 8.4, 8.5 and 8.7.2 do not apply to the error handling in the network applied to the receipt of initial layer 3 message: If the network diagnoses an error described in one of these subclauses in the initial layer 3 message received from the mobile station, it shall either:\n-\ttry to recognize the classmark and then take further implementation dependent actions; or\n-\trelease the RR-connection.\nAlso, the error handling of the network is only considered as mandatory or strongly recommended when certain thresholds for errors are not reached during a dedicated connection.\nFor definition of semantical and syntactical errors see 3GPP TS 24.007 [20], subclause 11.4.2.\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "8.2\tMessage too short",
                    "description": "",
                    "summary": "",
                    "text_content": "When a message is received that is too short to contain a complete message type information element, that message shall be ignored, cf. 3GPP TS 24.007 [20].\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "8.3\tUnknown or unforeseen transaction identifier",
                    "description": "",
                    "summary": "",
                    "text_content": "",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": [
                        {
                            "title": "8.3.1\tCall Control",
                            "text_content": "The mobile station and the network shall ignore a Call Control message received with TI EXT bit = 0. Otherwise, if the TI EXT bit =1 or no extension is used, the behaviour described below shall be followed.\nThe mobile station and network shall reject a SETUP, EMERGENCY SETUP or START CC message received with octet 1 part of the TI value coded as \"111\" by sending RELEASE COMPLETE with cause #81 \"Invalid transaction identifier value\" The TI value in RELEASE COMPLETE shall be the complete TI value including the extension octet from the message that caused the rejection.\nAny message other than SETUP, EMERGENCY SETUP or START CC received with octet 1 part of the TI value coded as \"111\" shall be ignored.\nFor a call control message received with octet 1 part of the TI value not coded as \"111\", the following procedures shall apply:\na)\tFor a network that does not support the \"Network initiated MO call\" option and for all mobile stations:\nWhenever any call control message except EMERGENCY SETUP, SETUP or RELEASE COMPLETE is received specifying a transaction identifier which is not recognized as relating to an active call or to a call in progress, the receiving entity shall send a RELEASE COMPLETE message with cause #81 \"invalid transaction identifier value\" using the received transaction identifier value and remain in the Null state.\nFor a network that does support the \"Network initiated MO call\" option $(CCBS)$:\nWhenever any call control message except EMERGENCY SETUP, SETUP, START CC or RELEASE COMPLETE is received specifying a transaction identifier which is not recognized as relating to an active call or to a call in progress, the receiving entity shall send a RELEASE COMPLETE message with cause #81 \"invalid transaction identifier value\" using the received transaction identifier value and remain in the Null state.\nb)\tWhen a RELEASE COMPLETE message is received specifying a transaction identifier which is not recognized as relating to an active call or to a call in progress, the MM connection associated with that transaction identifier shall be released.\nc)\tFor a network that does not support the \"Network initiated MO call\" option and for all mobile stations:\nWhen an EMERGENCY SETUP or, a SETUP message is received specifying a transaction identifier which is not recognized as relating to an active call or to a call in progress, and with a transaction identifier flag incorrectly set to \"1\", this message shall be ignored.\nFor a network that does support the \"Network initiated MO call\" option $(CCBS)$:\nWhen an EMERGENCY SETUP, a START CC or, a SETUP message is received specifying a transaction identifier which is not recognised as relating to an active call or to a call in progress, and with a transaction identifier flag incorrectly set to \"1\", this message shall be ignored.\nd)\tWhen a SETUP message is received by the mobile station specifying a transaction identifier which is recognized as relating to an active call or to a call in progress, this SETUP message shall be ignored.\ne)\tFor a network that does not support the \"Network initiated MO call\" option:\nWhen an EMERGENCY SETUP message or a SETUP message is received by the network specifying a transaction identifier which is recognized as relating to an active call or to a call in progress, this message need not be treated and the network may perform other actions.\nFor a network that does support the \"Network initiated MO call\" option $(CCBS)$:\nWhen an EMERGENCY SETUP message or a START CC message is received by the network specifying a transaction identifier which is recognised as relating to an active call or to a call in progress, this message need not be treated and the network may perform other actions.\nThe same applies to a SETUP message unless the transaction has been established by a START_CC message and the network is in the \"recall present\" state (N0.6).\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "8.3.2\tSession Management",
                            "text_content": "The mobile station and network shall ignore a session management message with TI EXT bit = 0. Otherwise, the following procedures shall apply:\na)\tWhenever any session management message except ACTIVATE PDP CONTEXT REQUEST, ACTIVATE SECONDARY PDP CONTEXT REQUEST, or SM-STATUS is received by the network specifying a transaction identifier which is not recognized as relating to an active PDP context or MBMS context,or to a PDP context or MBMS context that is in the process of activation or deactivation, the network shall send a SM-STATUS message with cause #81 \"invalid transaction identifier value\" using the received transaction identifier value including the extension octet and remain in the PDP-INACTIVE state.\nb)\tWhenever any session management message except REQUEST PDP CONTEXT ACTIVATION, REQUEST SECONDARY PDP CONTEXT ACTIVATION, REQUEST MBMS CONTEXT ACTIVATION, or SM-STATUS is received by the MS specifying a transaction identifier which is not recognized as relating to an active context or to a context that is in the process of activation or deactivation, the MS shall send a SM-STATUS message with cause #81 \"invalid transaction identifier value\" using the received transaction identifier value including the extension octet and remain in the PDP-INACTIVE state.\nc)\tWhen a REQUEST PDP CONTEXT ACTIVATION message, REQUEST SECONDARY PDP CONTEXT ACTIVATION message or REQUEST MBMS CONTEXT ACTIVATION message is received by the MS with a transaction identifier flag set to \"1\", this message shall be ignored.\nd)\tWhen an ACTIVATE PDP CONTEXT REQUEST message is received by the network specifying a transaction identifier which is not recognized as relating to a PDP context that is in the process of activation, and with a transaction identifier flag set to \"1\", this message shall be ignored.\ne)\tWhenever an ACTIVATE PDP CONTEXT REQUEST or ACTIVATE SECONDARY PDP CONTEXT REQUEST message is received by the network specifying a transaction identifier relating to a PDP context or MBMS context not in state PDP-INACTIVE, the network shall deactivate the old PDP context or MBMS context relating to the received transaction identifier without notifying the MS. Furthermore, the network shall continue with the activation procedure of a new PDP context as indicated in the received message.\tWhenever an ACTIVATE MBMS CONTEXT REQUEST message is received by the network specifying a transaction identifier relating to an MBMS context not in state PDP-INACTIVE, the network shall deactivate the old MBMS context relating to the received transaction identifier without notifying the MS. Furthermore, the network shall continue with the activation procedure of a new MBMS context as indicated in the received message.\nf)\tWhenever a REQUEST PDP CONTEXT ACTIVATION message or REQUEST SECONDARY PDP CONTEXT ACTIVATION message is received by the MS specifying a transaction identifier relating to a PDP context or MBMS context not in state PDP-INACTIVE, the MS shall locally deactivate the old PDP context or MBMS context relating to the received transaction identifier. Furthermore, the MS shall continue with the activation procedure of a new PDP context as indicated in the received message.\nWhenever a REQUEST MBMS CONTEXT ACTIVATION message is received by the MS specifying a transaction identifier relating to a PDP context or MBMS context not in state PDP-INACTIVE, the MS shall locally deactivate the old PDP context or MBMS context relating to the received transaction identifier. Furthermore, the MS shall continue with the activation procedure of a new MBMS context as indicated in the received message.\ng)\tWhen an ACTIVATE SECONDARY PDP CONTEXT REQUEST message is received by the network specifying a transaction identifier which is not recognized as relating to a PDP context that is in the process of activation and with a transaction identifier flag set to \"1\", this message shall be ignored.\n",
                            "figures_meta_data": [],
                            "tables": []
                        }
                    ]
                },
                {
                    "title": "8.4\tUnknown or unforeseen message type",
                    "description": "",
                    "summary": "",
                    "text_content": "If a mobile station receives an RR, MM or CC message with message type not defined for the PD or not implemented by the receiver in unacknowledged mode, it shall ignore the message.\nIf a mobile station receives an RR, MM or CC message with message type not defined for the PD or not implemented by the receiver in acknowledged mode, it shall return a status message (STATUS, MM STATUS depending on the protocol discriminator) with cause # 97 \"message type non-existent or not implemented\".\nIf a mobile station receives a GMM message or SM message with message type not defined for the PD or not implemented by the receiver, it shall return a status message (GMM STATUS or SM STATUS depending on the protocol discriminator) with cause # 97 \"message type non-existent or not implemented\".\nIf the network receives an MM message with message type not defined for the PD or not implemented by the receiver in a protocol state where reception of an unsolicited message with the given PD from the mobile station is not foreseen in the protocol, the network actions are implementation dependent. Otherwise, if the network receives a message with message type not defined for the PD or not implemented by the receiver, it shall ignore the message except that it should return a status message (STATUS, MM STATUS, GMM STATUS or SM STATUS depending on the protocol discriminator) with cause #97 \"message type non-existent or not implemented\".\nNOTE:\tA message type not defined for the PD in the given direction is regarded by the receiver as a message type not defined for the PD, see 3GPP TS 24.007 [20].\nIf the mobile station receives a message not compatible with the protocol state, the mobile station shall ignore the message except for the fact that, if an RR connection exists, it returns a status message (STATUS, MM STATUS depending on the protocol discriminator) with cause #98 \"Message type not compatible with protocol state\". When the message was a GMM message the GMM-STATUS message with cause #98 \"Message type not compatible with protocol state\" shall be returned. When the message was a SM message the SM-STATUS message with cause #98 \"Message type not compatible with protocol state\" shall be returned.\nIf the network receives a message not compatible with the protocol state, the network actions are implementation dependent.\nNOTE:\tThe use by GMM and SM of unacknowledged LLC may lead to messages \"not compatible with the protocol state\".\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "8.5\tNon-semantical mandatory information element errors",
                    "description": "",
                    "summary": "",
                    "text_content": "When on receipt of a message,\n-\tan \"imperative message part\" error; or\n-\ta \"missing mandatory IE\" error;\nis diagnosed or when a message containing:\n-\ta syntactically incorrect mandatory IE; or\n-\tan IE unknown in the message, but encoded as \"comprehension required\" (see 3GPP TS 24.007 [20]); or\n-\tan out of sequence IE encoded as \"comprehension required\" (see 3GPP TS 24.007 [20]) is received,\nthe mobile station shall proceed as follows:\nIf the message is not one of the messages listed in subclauses 8.5.1, 8.5.2, 8.5.3, 8.5.4 and 8.5.5 a), b) , f) or h), the mobile station shall ignore the message except for the fact that, if an RR connection exists, it shall return a status message (STATUS, MM STATUS depending on the protocol discriminator) with cause # 96 \"Invalid mandatory information\". If the message was a GMM message the GMM-STATUS message with cause #96 \" Invalid mandatory information\" shall be returned. If the message was an SM message the SM-STATUS message with cause # 96 \"invalid mandatory information\" shall be returned.\n-\tthe network shall proceed as follows:\nWhen the message is not one of the messages listed in subclause 8.5.3 b), c), d) or e) and 8.5.5 a), c), d), e) or g), the network shall either:\n-\ttry to treat the message (the exact further actions are implementation dependent), or\n-\tignore the message except that it should return a status message (STATUS, or MM STATUS (depending on the protocol discriminator), GMM STATUS, or SM STATUS) with cause # 96 \"Invalid mandatory information\".\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": [
                        {
                            "title": "8.5.1\tRadio resource management",
                            "text_content": "See 3GPP TS 44.018 [84].\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "8.5.2\tMobility management",
                            "text_content": "No exceptional cases are described for mobility management messages.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "8.5.3\tCall control",
                            "text_content": "a)\tIf the message is a SETUP message, a RELEASE COMPLETE message with cause # 96 \"invalid mandatory information\" shall be returned.\nb)\tIf the message is a DISCONNECT message, a RELEASE message shall be returned with cause value # 96 \"invalid mandatory information\" and subclause 5.4. \"call clearing\" applies as normal.\nc)\tIf the message is a RELEASE message, a RELEASE COMPLETE message shall be returned with cause value # 96 \"invalid mandatory information\".\nd)\tIf the message is a RELEASE COMPLETE message, it shall be treated as a normal RELEASE COMPLETE message.\ne)\tIf the message is a HOLD REJECT or RETRIEVE REJECT message, it shall be treated as a normal HOLD REJECT or RETRIEVE REJECT message.\nf)\tIf the message is a STATUS message and received by the network, a RELEASE COMPLETE message may be returned with cause value # 96 \"invalid mandatory information\".\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "8.5.4\tGMM mobility management",
                            "text_content": "No exceptional cases are described for mobility management messages.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "8.5.5\tSession management",
                            "text_content": "a)\tIf the message is a DEACTIVATE PDP CONTEXT REQUEST, a DEACTIVATE PDP CONTEXT ACCEPT message shall be returned. All resources allocated for that context shall be released.\nb)\tIf the message is a REQUEST PDP CONTEXT ACTIVATION, a REQUEST PDP CONTEXT ACTIVATION REJECT message with cause # 96 \"Invalid mandatory information\" shall be returned.\nc)\tIf the message is an ACTIVATE PDP CONTEXT REQUEST, an ACTIVATE PDP CONTEXT REJECT message with cause # 96 \"Invalid mandatory information\" shall be returned.\nd)\tIf the message is an ACTIVATE SECONDARY PDP CONTEXT REQUEST, an ACTIVATE SECONDARY PDP CONTEXT REJECT message with cause # 96 \"Invalid mandatory information\" shall be returned.\ne)\tIf the message is a MODIFY PDP CONTEXT REQUEST, a MODIFY PDP CONTEXT REJECT message with cause # 96 \"Invalid mandatory information\" shall be returned.\nf)\tIf the message is a REQUEST MBMS CONTEXT ACTIVATION, a REQUEST MBMS CONTEXT ACTIVATION REJECT message with cause # 96 \"Invalid mandatory information\" shall be returned.\ng)\tIf the message is an ACTIVATE MBMS CONTEXT REQUEST, an ACTIVATE MBMS CONTEXT REJECT message with cause # 96 \"Invalid mandatory information\" shall be returned.\nh)\tIf the message is a REQUEST SECONDARY PDP CONTEXT ACTIVATION, a REQUEST SECONDARY PDP CONTEXT ACTIVATION REJECT message with cause # 96 \"Invalid mandatory information\" shall be returned.\n",
                            "figures_meta_data": [],
                            "tables": []
                        }
                    ]
                },
                {
                    "title": "8.6\tUnknown and unforeseen IEs in the non-imperative message part",
                    "description": "",
                    "summary": "",
                    "text_content": "",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": [
                        {
                            "title": "8.6.1\tIEIs unknown in the message",
                            "text_content": "The MS shall ignore all IEs unknown in a message which are not encoded as \"comprehension required\" (see 3GPP TS 24.007 [20]).\nThe network shall take the same approach.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "8.6.2\tOut of sequence IEs",
                            "text_content": "The MS shall ignore all out of sequence IEs in a message which are not encoded as \"comprehension required\" (see 3GPP TS 24.007 [20]).\nThe network should take the same approach.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "8.6.3\tRepeated IEs",
                            "text_content": "If an information element with format T, TV, or TLV is repeated in a message in which repetition of the information element is not specified in clause 9 of the present document, only the contents of the information element appearing first shall be handled and all subsequent repetitions of the information element shall be ignored. When repetition of information elements is specified, only the contents of specified repeated information elements shall be handled. If the limit on repetition of information elements is exceeded, the contents of information elements appearing first up to the limit of repetitions shall be handled and all subsequent repetitions of the information element shall be ignored.\nThe network should follow the same procedures.\n",
                            "figures_meta_data": [],
                            "tables": []
                        }
                    ]
                },
                {
                    "title": "8.7\tNon-imperative message part errors",
                    "description": "",
                    "summary": "",
                    "text_content": "This category includes:\n-\tsyntactically incorrect optional IEs;\n-\tconditional IE errors.\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": [
                        {
                            "title": "8.7.1\tSyntactically incorrect optional IEs",
                            "text_content": "The MS shall treat all optional IEs that are syntactically incorrect in a message as not present in the message.\nThe network shall take the same approach.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "8.7.2\tConditional IE errors",
                            "text_content": "When the MS upon receipt of an RR, MM or CC message diagnoses a \"missing conditional IE\" error or an \"unexpected conditional IE\" error or when it receives an RR, MM or CC message containing at least one syntactically incorrect conditional IE, it shall ignore the message except for the fact that, if an RR connection exists, it shall return a status message (STATUS, or MM STATUS depending on the PD) with cause value # 100 \"conditional IE error\".\nWhen the MS upon receipt of a GMM or SM message diagnoses a \"missing conditional IE\" error or an \"unexpected conditional IE\" error or when it receives a GMM or SM message containing at least one syntactically incorrect conditional IE, it shall ignore the message and it shall return a status message (GMM STATUS or SM STATUS depending on the PD) with cause value # 100 \"conditional IE error\".\nWhen the network receives a message and diagnose a \"missing conditional IE\" error or an \"unexpected conditional IE\" error or when it receives a message containing at least one syntactically incorrect conditional IE, the network shall either\n-\ttry to treat the message (the exact further actions are implementation dependent), or\n-\tignore the message except that it should return a status message (STATUS, MM STATUS, GMM STATUS or SM STATUS depending on the protocol discriminator) with cause # 100 \"conditional IE error\".\n",
                            "figures_meta_data": [],
                            "tables": []
                        }
                    ]
                },
                {
                    "title": "8.8\tMessages with semantically incorrect contents",
                    "description": "",
                    "summary": "",
                    "text_content": "When a message with semantically incorrect contents is received, the foreseen reactions of the procedural part of 3GPP TS 24.008 (i.e. of clauses 3, 4, 5, 6) are performed. If however no such reactions are specified, the MS shall ignore the message except for the fact that, if an RR connection exists, it returns a status message (STATUS, or MM STATUS depending on the PD) with cause value # 95 \"semantically incorrect message\". If the message was a GMM message the GMM-STATUS message with cause #95 \"semantically incorrect message\" shall be returned. If the message was an SM message the SM-STATUS message with cause # 95 \"semantically incorrect message\" shall be returned.\nThe network should follow the same procedure except that a status message is not normally transmitted.\nSemantic checking of the Facility information element value part (defined in 3GPP TS 24.080 [24]) is the subject of the technical specifications 3GPP TS 24.010 [21] and the 3GPP TS 24.08x series.\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                }
            ]
        },
        {
            "title": "9\tMessage functional definitions and contents",
            "description": "This clause defines the structure of the messages of those layer 3 protocols defined in 3GPP TS 24.008. These are standard L3 messages as defined in 3GPP TS 24.007 [20].\nEach definition given in the present clause includes:\na)\ta brief description of the message direction and use, including whether the message has:\n1.\tLocal significance, i.e. relevant only on the originating or terminating access;\n2.\tAccess significance, i.e. relevant in the originating and terminating access, but not in the network;\n3.\tDual significance, i.e. relevant in either the originating or terminating access and in the network; or\n4.\tGlobal significance, i.e. relevant in the originating and terminating access and in the network.\nb)\ta table listing the information elements known in the message and their order of their appearance in the message. In messages for circuit-switched call control also a shift information element shall be considered as known even if not included in the table. All information elements that may be repeated are explicitly indicated. (V and LV formatted IEs, which compose the imperative part of the message, occur before T, TV, and TLV formatted IEs which compose the non-imperative part of the message, cf. 3GPP TS 24.007 [20].) In a (maximal) sequence of consecutive information elements with half octet length, the first information element with half octet length occupies bits 1 to 4 of octet N, the second bits 5 to 8 of octet N, the third bits 1 to 4 of octet N+1 etc. Such a sequence always has an even number of elements.\nFor each information element the table indicates:\n1.\tthe information element identifier, in hexadecimal notation, if the IE has format T, TV, or TLV. Usually, there is a default IEI for an information element type; default IEIs of different IE types of the same protocol are different. If the IEI has half octet length, it is specified by a notation representing the IEI as a hexadecimal digit followed by a \"-\" (example: B-).\nNOTE 1:\tThe same IEI may be used for different information element types in different messages of the same protocol.\nNOTE 2:\tIn the CC protocol the IEI of the locking shift and non-locking shift information elements is the same in all messages and is not used for any other information elements.\n2.\tthe name of the information element (which may give an idea of the semantics of the element). The name of the information element (usually written in italics) followed by \"IE\" or \"information element\" is used in 3GPP TS 24.008 as reference to the information element within a message.\n3.\tthe name of the type of the information element (which indicates the coding of the value part of the IE), and generally, the referenced subclause of clause 10 of 3GPP TS 24.008 describing the value part of the information element.\n4.\tthe presence requirement indication (M, C, or O) for the IE as defined in 3GPP TS 24.007 [20].\n5.\tThe format of the information element (T, V, TV, LV, TLV) as defined in 3GPP TS 24.007 [20].\n6.\tThe length of the information element (or permissible range of lengths), in octets, in the message, where \"?\" means that the maximum length of the IE is only constrained by link layer protocol, and in the case of the Facility IE by possible further conditions specified in 3GPP TS 24.010 [21]. This indication is non-normative.\nc.)\tsubclauses specifying, where appropriate, conditions for IEs with presence requirement C or O in the relevant message which together with other conditions specified in 3GPP TS 24.008 define when the information elements shall be included or not, what non-presence of such IEs means, and - for IEs with presence requirement C - the static conditions for presence and/or non-presence of the IEs (see 3GPP TS 24.007 [20]).\n",
            "summary": "",
            "tables": [],
            "figures_meta_data": [],
            "subsections": [
                {
                    "title": "9.1\tMessages for Radio Resources management",
                    "description": "",
                    "summary": "",
                    "text_content": "See 3GPP TS 44.018 [84].\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "9.2\tMessages for mobility management",
                    "description": "",
                    "summary": "",
                    "text_content": "Table 9.2.1/3GPP TS 24.008 summarizes the messages for mobility management.\nTable 9.2.1/3GPP TS 24.008: Messages for mobility management\n\n",
                    "tables": [
                        {
                            "description": "Table 9.2.1/3GPP TS 24.008: Messages for mobility management",
                            "table number": 16,
                            "summary": "",
                            "name": ""
                        }
                    ],
                    "figures_meta_data": [],
                    "subsubsections": [
                        {
                            "title": "9.2.1\tAuthentication reject",
                            "text_content": "This message is sent by the network to the mobile station to indicate that authentication has failed (and that the receiving mobile station shall abort all activities). See table 9.2.2/3GPP TS 24.008.\nMessage type:\tAUTHENTICATION REJECT\nSignificance:\t\tdual\nDirection:\t\t\tnetwork to mobile station\nTable 9.2.2/3GPP TS 24.008: AUTHENTICATION REJECT message content\n\n",
                            "figures_meta_data": [],
                            "tables": [
                                {
                                    "description": "Table 9.2.2/3GPP TS 24.008: AUTHENTICATION REJECT message content",
                                    "table number": 17,
                                    "summary": "",
                                    "name": ""
                                }
                            ]
                        },
                        {
                            "title": "9.2.2\tAuthentication request",
                            "text_content": "This message is sent by the network to the mobile station to initiate authentication of the mobile station identity. See table 9.2.3/3GPP TS 24.008.\nMessage type:\tAUTHENTICATION REQUEST\nSignificance:\t\tdual\nDirection:\t\t\tnetwork to mobile station\nTable 9.2.3/3GPP TS 24.008: AUTHENTICATION REQUEST message content\n\nThis IE shall be present if and only if the authentication challenge is a UMTS authentication challenge.The presence or absence of this IE defines- in the case of its absence- a GSM authentication challenge or- in the case of its presence- a UMTS authentication challenge.\nThe MS shall ignore the IE if a SIM is inserted in the MS.\nIn UMTS, the MS shall reject the AUTHENTICATION REQUEST message as specified in subclause 4.3.2.5.1 if this IE is not present and a USIM is inserted in the MS.\n",
                            "figures_meta_data": [],
                            "tables": [
                                {
                                    "description": "Table 9.2.3/3GPP TS 24.008: AUTHENTICATION REQUEST message content",
                                    "table number": 18,
                                    "summary": "",
                                    "name": ""
                                }
                            ]
                        },
                        {
                            "title": "9.2.3\tAuthentication response",
                            "text_content": "This message is sent by the mobile station to the network to deliver a calculated response to the network. See table 9.2.4/3GPP TS 24.008.\nMessage type:\tAUTHENTICATION RESPONSE\nSignificance:\t\tdual\nDirection:\t\t\tmobile station to network\nTable 9.2.4/3GPP TS 24.008: AUTHENTICATION RESPONSE message content\n\nThis IE contains the SRES, if it was a GSM authentication challenge, or the RES (all or just the 4 most significant octets of) if it was a UMTS authentication challenge (see also subclause 9.2.3.2).\nThis IE shall be included if and only if the authentication challenge was a UMTS authentication challenge and the RES parameter is greater than 4 octets in length. It shall contain the least significant remaining bits of the RES (the four most significant octets shall be sent in the Authentication Response Parameter IE (see subclause 9.2.3.1))\nThis IE shall not be included if a SIM is inserted in the MS.\n",
                            "figures_meta_data": [],
                            "tables": [
                                {
                                    "description": "Table 9.2.4/3GPP TS 24.008: AUTHENTICATION RESPONSE message content",
                                    "table number": 19,
                                    "summary": "",
                                    "name": ""
                                }
                            ]
                        },
                        {
                            "title": "9.2.3a\tAuthentication Failure",
                            "text_content": "This message is sent by the mobile station to the network to indicate that authentication of the network has failed. See table 9.2.4a/3GPP TS 24.008.\nMessage type:\tAUTHENTICATION FAILURE\nSignificance:\t\tdual\nDirection:\t\t\tmobile station to network\nTable 9.2.4a/3GPP TS 24.008: AUTHENTICATION FAILURE message content\n\nThis IE shall be sent if and only if the reject cause was \"Synch failure\". It shall include the response to the authentication challenge from the USIM, which is made up of the AUTS parameter (see 3GPP TS 33.102 [5a]).\n",
                            "figures_meta_data": [],
                            "tables": [
                                {
                                    "description": "Table 9.2.4a/3GPP TS 24.008: AUTHENTICATION FAILURE message content",
                                    "table number": 20,
                                    "summary": "",
                                    "name": ""
                                }
                            ]
                        },
                        {
                            "title": "9.2.4\tCM Re-establishment request",
                            "text_content": "This message is sent by the mobile station to the network to request re-establishment of a connection if the previous one has failed. See table 9.2.5/3GPP TS 24.008.\nMessage type:\tCM RE-ESTABLISHMENT REQUEST\nSignificance:\t\tdual\nDirection:\t\t\tmobile station to network\nTable 9.2.5/3GPP TS 24.008: CM RE-ESTABLISHMENT REQUEST message content\n\nNOTE:\tIn A/Gb mode, the maximum number of octets that can be transferred is 20.\nThe location area identification information element shall appear when a TMSI is used as mobile identity, to render that mobile identity non-ambiguous. This is the LAI stored in the SIM/USIM.\nThis IE shall include for multiband mobile station the Classmark 2 corresponding to the frequency band in use.\nThis IE shall be included if the MS is configured for NAS signalling low priority.\n",
                            "figures_meta_data": [],
                            "tables": [
                                {
                                    "description": "Table 9.2.5/3GPP TS 24.008: CM RE-ESTABLISHMENT REQUEST message content",
                                    "table number": 21,
                                    "summary": "",
                                    "name": ""
                                }
                            ]
                        },
                        {
                            "title": "9.2.5\tCM service accept",
                            "text_content": "This message is sent by the network to the mobile station to indicate that the requested service has been accepted. See table 9.2.6/3GPP TS 24.008.\nMessage type:\tCM SERVICE ACCEPT\nSignificance:\t\tdual\nDirection:\t\t\tnetwork to mobile station\nTable 9.2.6/3GPP TS 24.008: CM SERVICE ACCEPT message content\n\n",
                            "figures_meta_data": [],
                            "tables": [
                                {
                                    "description": "Table 9.2.6/3GPP TS 24.008: CM SERVICE ACCEPT message content",
                                    "table number": 22,
                                    "summary": "",
                                    "name": ""
                                }
                            ]
                        },
                        {
                            "title": "9.2.5a\tCM service prompt $(CCBS)$",
                            "text_content": "A mobile station that does not support the \"Network initiated MO call\" option shall treat this message as a message with message type not defined for the PD.\nThis message is sent by the network to the mobile station to request the mobile to establish a service for the specified CM protocol using the specified SAPI, e.g. circuit switched connection establishment on SAPI 0, supplementary services activation on SAPI 0, or short message transfer on SAPI 3. See Table 9.2.7/3GPP TS 24.008.\nMessage type:\tCM SERVICE PROMPT\nSignificance:\t\tdual\nDirection:\t\t\tnetwork to mobile station\nTable 9.2.7/3GPP TS 24.008: CM SERVICE PROMPT message content\n\n",
                            "figures_meta_data": [],
                            "tables": [
                                {
                                    "description": "Table 9.2.7/3GPP TS 24.008: CM SERVICE PROMPT message content",
                                    "table number": 23,
                                    "summary": "",
                                    "name": ""
                                }
                            ]
                        },
                        {
                            "title": "9.2.6\tCM service reject",
                            "text_content": "This message is sent by the network to the mobile station to indicate that the requested service cannot be provided. See table 9.2.8/3GPP TS 24.008.\nMessage type:\tCM SERVICE REJECT\nSignificance:\t\tdual\nDirection:\t\t\tnetwork to mobile station\nTable 9.2.8/3GPP TS 24.008: CM SERVICE REJECT message content\n\nThis IE may be included when the CS domain NAS level mobility management congestion control is active.\n",
                            "figures_meta_data": [],
                            "tables": [
                                {
                                    "description": "Table 9.2.8/3GPP TS 24.008: CM SERVICE REJECT message content",
                                    "table number": 24,
                                    "summary": "",
                                    "name": ""
                                }
                            ]
                        },
                        {
                            "title": "9.2.7\tCM service abort",
                            "text_content": "This message is sent by the mobile station to the network to request the abortion of the first MM connection establishment in progress and the release of the RR connection. See table 9.2.9/3GPP TS 24.008.\nMessage type:\tCM SERVICE ABORT\nSignificance:\t\tdual\nDirection:\t\tmobile station to network\nTable 9.2.9/3GPP TS 24.008: CM SERVICE ABORT message content\n\n",
                            "figures_meta_data": [],
                            "tables": [
                                {
                                    "description": "Table 9.2.9/3GPP TS 24.008: CM SERVICE ABORT message content",
                                    "table number": 25,
                                    "summary": "",
                                    "name": ""
                                }
                            ]
                        },
                        {
                            "title": "9.2.8\tAbort",
                            "text_content": "This message is sent by the network to the mobile station to initiate the abortion of all MM connections and to indicate the reason for the abortion. See table 9.2.10/3GPP TS 24.008.\nMessage type:\tABORT\nSignificance:\t\tdual\nDirection:\t\t\tnetwork to mobile station\nTable 9.2.10/3GPP TS 24.008: ABORT message content\n\n",
                            "figures_meta_data": [],
                            "tables": [
                                {
                                    "description": "Table 9.2.10/3GPP TS 24.008: ABORT message content",
                                    "table number": 26,
                                    "summary": "",
                                    "name": ""
                                }
                            ]
                        },
                        {
                            "title": "9.2.9\tCM service request",
                            "text_content": "This message is sent by the mobile station to the network to request a service for the connection management sublayer entities, e.g. circuit switched connection establishment, supplementary services activation, short message transfer, location services. See table 9.2.11/3GPP TS 24.008.\nMessage type:\tCM SERVICE REQUEST\nSignificance:\t\tdual\nDirection:\t\t\tmobile station to network\nTable 9.2.11/3GPP TS 24.008: CM SERVICE REQUEST message content\n\nThis IE shall include for multiband mobile station the Classmark 2 corresponding to the frequency band in use.\nMay be included by mobile station supporting eMLPP to indicate the priority requested.\nThis information element is only meaningful when the CM service type is:\nMobile originating call establishment;\nEmergency call establishment;\nVoice group call establishment;\nVoice broadcast call establishment.\nThe MS shall include this IE during CS fallback for a mobile originating call or if the MS is requested by the upper layers to set up a mobile originating \"DRVCC call\" (see subclause 4.5.1.1).\nThis IE shall be included if the MS is configured for NAS signalling low priority.\n",
                            "figures_meta_data": [],
                            "tables": [
                                {
                                    "description": "Table 9.2.11/3GPP TS 24.008: CM SERVICE REQUEST message content",
                                    "table number": 27,
                                    "summary": "",
                                    "name": ""
                                }
                            ]
                        },
                        {
                            "title": "9.2.10\tIdentity request",
                            "text_content": "This message is sent by the network to the mobile station to request a mobile station to submit the specified identity to the network. See table 9.2.12/3GPP TS 24.008.\nMessage type:\tIDENTITY REQUEST\nSignificance:\t\tdual\nDirection:\t\t\tnetwork to mobile station\nTable 9.2.12/3GPP TS 24.008: IDENTITY REQUEST message content\n\n",
                            "figures_meta_data": [],
                            "tables": [
                                {
                                    "description": "Table 9.2.12/3GPP TS 24.008: IDENTITY REQUEST message content",
                                    "table number": 28,
                                    "summary": "",
                                    "name": ""
                                }
                            ]
                        },
                        {
                            "title": "9.2.11\tIdentity response",
                            "text_content": "This message is sent by the mobile station to the network in response to an IDENTITY REQUEST message providing the requested identity. See table 9.2.13/3GPP TS 24.008.\nMessage type:\tIDENTITY RESPONSE\nSignificance:\t\tdual\nDirection:\t\t\tmobile station to network\nTable 9.2.13/3GPP TS 24.008: IDENTITY RESPONSE message content\n\n",
                            "figures_meta_data": [],
                            "tables": [
                                {
                                    "description": "Table 9.2.13/3GPP TS 24.008: IDENTITY RESPONSE message content",
                                    "table number": 29,
                                    "summary": "",
                                    "name": ""
                                }
                            ]
                        },
                        {
                            "title": "9.2.12\tIMSI detach indication",
                            "text_content": "This message is sent by the mobile station to the network to set a deactivation indication in the network. See table 9.2.14/3GPP TS 24.008.\nMessage type:\tIMSI DETACH INDICATION\nSignificance:\t\tdual\nDirection:\t\tmobile station to network\nTable 9.2.14/3GPP TS 24.008: IMSI DETACH INDICATION message content\n\nThis IE shall include for multiband mobile station the Classmark 1 corresponding to the frequency band in use.\n",
                            "figures_meta_data": [],
                            "tables": [
                                {
                                    "description": "Table 9.2.14/3GPP TS 24.008: IMSI DETACH INDICATION message content",
                                    "table number": 30,
                                    "summary": "",
                                    "name": ""
                                }
                            ]
                        },
                        {
                            "title": "9.2.13\tLocation updating accept",
                            "text_content": "This message is sent by the network to the mobile station to indicate that updating or IMSI attach in the network has been completed. See table 9.2.15/3GPP TS 24.008.\nMessage type:\tLOCATION UPDATING ACCEPT\nSignificance:\t\tdual\nDirection:\t\t\tnetwork to mobile station\nTable 9.2.15/3GPP TS 24.008: LOCATION UPDATING ACCEPT message content\n\nThe follow on proceed information element appears if the network wishes to indicate that the mobile station may attempt an MM connection establishment using the same RR connection.\nThe CTS permission information element appears if the network wishes to allow the mobile station to use GSM-Cordless Telephony System in the Location Area.\nThe Equivalent PLMNs information element is included if the network wants to inform the mobile station of equivalent PLMNs.\nThis IE may be sent by the network. If this IE is sent, the contents of this IE indicates a list of emergency numbers valid within the same country as the PLMN from which this IE is received.\nThis IE may be sent by the network to provide the MS with a periodic LAU timer that may be different to the broadcast value, e.g. to lengthen the timer.\nThis IE is included if the network needs to indicate whether emergency numbers provided via non-3GPP access can be used to initiate MS detected emergency calls (see 3GPP TS 24.302 [156]). If this IE is not included then the MS shall interpret this as a receipt of an information element with all bits of the value part coded as zero.\n",
                            "figures_meta_data": [],
                            "tables": [
                                {
                                    "description": "Table 9.2.15/3GPP TS 24.008: LOCATION UPDATING ACCEPT message content",
                                    "table number": 31,
                                    "summary": "",
                                    "name": ""
                                }
                            ]
                        },
                        {
                            "title": "9.2.14\tLocation updating reject",
                            "text_content": "This message is sent by the network to the mobile station to indicate that updating or IMSI attach has failed. See table 9.2.16/3GPP TS 24.008.\nMessage type:\tLOCATION UPDATING REJECT\nSignificance:\t\tdual\nDirection:\t\t\tnetwork to mobile station\nTable 9.2.16/3GPP TS 24.008: LOCATION UPDATING REJECT message content\n\nThis IE may be included when the CS domain NAS level mobility management congestion control is active.\n",
                            "figures_meta_data": [],
                            "tables": [
                                {
                                    "description": "Table 9.2.16/3GPP TS 24.008: LOCATION UPDATING REJECT message content",
                                    "table number": 32,
                                    "summary": "",
                                    "name": ""
                                }
                            ]
                        },
                        {
                            "title": "9.2.15\tLocation updating request",
                            "text_content": "This message is sent by the mobile station to the network either to request update of its location file (normal updating or periodic updating) or to request IMSI attach. See table 9.2.17/3GPP TS 24.008.\nMessage type:\tLOCATION UPDATING REQUEST\nSignificance:\t\tdual\nDirection:\t\t\tmobile station to network\nTable 9.2.17/3GPP TS 24.008: LOCATION UPDATING REQUEST message content\n\nNOTE:\tIn A/Gb mode, the maximum number of octets that can be transferred is 20.\nThe location area identification stored in the SIM/USIM is used.\nThis IE shall include for multiband MS the Classmark 1 corresponding to the frequency band in use.\nThis IE shall be included when the mobile station is in Iu mode network. The IE shall not be included when the mobile station is in A/Gb mode network.\nThe MS shall include this IE if, during CS fallback for a CS call, or upon request from the upper layers to set up a mobile originating \"DRVCC call\", the MS determines that it has to perform location updating when it enters a GERAN or UTRAN cell (see subclauses 4.5.1.1 and 4.5.1.3.4).\nThis IE shall be included if the MS is configured for NAS signalling low priority.\nThis IE shall be included if the MS supports extended periodic timer T3212 and the Additional update parameters IE is not included.\n",
                            "figures_meta_data": [],
                            "tables": [
                                {
                                    "description": "Table 9.2.17/3GPP TS 24.008: LOCATION UPDATING REQUEST message content",
                                    "table number": 33,
                                    "summary": "",
                                    "name": ""
                                }
                            ]
                        },
                        {
                            "title": "9.2.15a\tMM information",
                            "text_content": "This message is sent by the network to the mobile station to provide the mobile station with subscriber specific information. See table 9.2.18/3GPP TS 24.008.\nMessage type:\tMM INFORMATION\nSignificance:\t\tdual\nDirection:\t\t\tnetwork to mobile station\nTable 9.2.18/3GPP TS 24.008 MM INFORMATION message content\n\nThis IE may be sent by the network. If this IE is sent, the contents of this IE indicate the \"full length name of the network\" that the network wishes the mobile station to associate with the MCC and MNC contained in the Location Area Identification of the cell to which the mobile station sent its Channel Request message.\nThis IE may be sent by the network. If this IE is sent, the contents of this IE indicate the \"abbreviated name of the network\" that the network wishes the mobile station to associate with the MCC and MNC contained in the Location Area Identification of the cell to which the mobile station sent its Channel Request message.\nThis IE may be sent by the network. The mobile station should assume that this time zone applies to the Location Area of the cell to which the Channel Request message was sent.\nIf the local time zone has been adjusted for Daylight Saving Time, the network shall indicate this by including the IE Network Daylight Saving Time.\nThis IE may be sent by the network. The mobile station should assume that this time zone applies to the Location Area of the cell to which the Channel Request message was sent. The mobile station shall not assume that the time information is accurate.\nIf the local time zone has been adjusted for Daylight Saving Time, the network shall indicate this by including the IE Network Daylight Saving Time.\nThis IE may be sent by the network. The contents of this IE indicate the LSA identity of the serving cell.\nThis IE may be sent by the network. If this IE is sent, the contents of this IE indicates the value that has been used to adjust the local time zone.\n",
                            "figures_meta_data": [],
                            "tables": [
                                {
                                    "description": "Table 9.2.18/3GPP TS 24.008 MM INFORMATION message content",
                                    "table number": 34,
                                    "summary": "",
                                    "name": ""
                                }
                            ]
                        },
                        {
                            "title": "9.2.16\tMM Status",
                            "text_content": "This message is sent by the mobile station or the network at any time to report certain error conditions listed in clause 8. See table 9.2.19/3GPP TS 24.008.\nMessage type:\tMM STATUS\nSignificance:\t\tlocal\nDirection:\t\t\tboth\nTable 9.2.19/3GPP TS 24.008: MM STATUS message content\n\n",
                            "figures_meta_data": [],
                            "tables": [
                                {
                                    "description": "Table 9.2.19/3GPP TS 24.008: MM STATUS message content",
                                    "table number": 35,
                                    "summary": "",
                                    "name": ""
                                }
                            ]
                        },
                        {
                            "title": "9.2.17\tTMSI reallocation command",
                            "text_content": "This message is sent by the network to the mobile station to reallocate or delete a TMSI. See table 9.2.20/3GPP TS 24.008.\nMessage type:\tTMSI REALLOCATION COMMAND\nSignificance:\t\tdual\nDirection:\t\t\tnetwork to mobile station\nTable 9.2.20/3GPP TS 24.008: TMSI REALLOCATION COMMAND message content\n\n",
                            "figures_meta_data": [],
                            "tables": [
                                {
                                    "description": "Table 9.2.20/3GPP TS 24.008: TMSI REALLOCATION COMMAND message content",
                                    "table number": 36,
                                    "summary": "",
                                    "name": ""
                                }
                            ]
                        },
                        {
                            "title": "9.2.18\tTMSI reallocation complete",
                            "text_content": "This message is sent by the mobile station to the network to indicate that reallocation or deletion of a TMSI has taken place. See table 9.2.21/3GPP TS 24.008.\nMessage type:\tTMSI REALLOCATION COMPLETE\nSignificance:\t\tdual\nDirection:\t\t\tmobile station to network\nTable 9.2.21/3GPP TS 24.008: TMSI REALLOCATION COMPLETE message content\n\n",
                            "figures_meta_data": [],
                            "tables": [
                                {
                                    "description": "Table 9.2.21/3GPP TS 24.008: TMSI REALLOCATION COMPLETE message content",
                                    "table number": 37,
                                    "summary": "",
                                    "name": ""
                                }
                            ]
                        },
                        {
                            "title": "9.2.19\tMM Null",
                            "text_content": "This message is sent in mobile to network direction.\nThis message is not used on the radio interface. When received by the network it shall be ignored.\nThe introduction of this message solves interworking issues.\nMessage type:\tMM NULL\nTable 9.2.22/3GPP TS 24.008 MM NULL message content\n\n",
                            "figures_meta_data": [],
                            "tables": [
                                {
                                    "description": "Table 9.2.22/3GPP TS 24.008 MM NULL message content",
                                    "table number": 38,
                                    "summary": "",
                                    "name": ""
                                }
                            ]
                        }
                    ]
                },
                {
                    "title": "9.3\tMessages for circuit-switched call control",
                    "description": "",
                    "summary": "",
                    "text_content": "Table 9.54/3GPP TS 24.008 summarizes the messages for circuit-switched call control.\nTable 9.54/3GPP TS 24.008: Messages for circuit-mode connections call control.\n\nNOTE:\tNot supported by Blue Book ITU-T Recommendation Q.931 [53].\n",
                    "tables": [
                        {
                            "description": "Table 9.54/3GPP TS 24.008: Messages for circuit-mode connections call control.",
                            "table number": 39,
                            "summary": "",
                            "name": ""
                        }
                    ],
                    "figures_meta_data": [],
                    "subsubsections": [
                        {
                            "title": "9.3.1\tAlerting",
                            "text_content": "This message is sent by the network to the calling mobile station to indicate that the called user alerting has been initiated.\nSee table 9.55/3GPP TS 24.008.\nMessage type:\tALERTING\nSignificance:\t\tglobal\nDirection:\t\t\tnetwork to mobile station\nTable 9.55/3GPP TS 24.008: ALERTING message content (network to mobile station direction)\n\nThis information element may be used for functional operation of supplementary services.\nThis information element may be included by the network:\n-\tin order to pass information about the call in progress, e.g., in the event of interworking;\n-\tto make the mobile station attach the user connection for speech; and/or\n-\tto make a mobile station supporting multimedia CAT during the alerting phase of a mobile originated multimedia call establishment attach the user connection and setup an H.324 call.\nThis information element may be included by the network if the called remote user included a user-user information element in the ALERTING message.\nThis message is sent by the called mobile station to the network, to indicate that the called user alerting has been initiated.\nSee table 9.55a/3GPP TS 24.008.\nMessage type:\tALERTING\nSignificance:\t\tglobal\nDirection:\t\t\tmobile station to network\nTable 9.55a/3GPP TS 24.008: ALERTING message content (mobile station to network direction)\n\nThis information element may be used for functional operation of supplementary services.\nThis information element may be included when the called mobile station wants to return information to the calling remote user.\nThis information element shall not be included if the facility information element is not present in this message.\nThis information element shall be included or excluded as defined in 3GPP TS 24.010 [21]. This information element should not be transmitted unless explicitly required by 3GPP TS 24.010 [21].\n",
                            "figures_meta_data": [],
                            "tables": [
                                {
                                    "description": "Table 9.55/3GPP TS 24.008: ALERTING message content (network to mobile station direction)",
                                    "table number": 40,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 9.55a/3GPP TS 24.008: ALERTING message content (mobile station to network direction)",
                                    "table number": 41,
                                    "summary": "",
                                    "name": ""
                                }
                            ]
                        },
                        {
                            "title": "9.3.2\tCall confirmed",
                            "text_content": "This message is sent by the called mobile station to confirm an incoming call request.\nSee table 9.56/3GPP TS 24.008.\nMessage type:\tCALL CONFIRMED\nSignificance:\t\tlocal\nDirection:\t\tmobile station to network\nTable 9.56/3GPP TS 24.008: CALL CONFIRMED message content\n\nThe repeat indicator information element shall be included if bearer capability 1 information element and bearer capability 2 IE are both included in the message.\nThe bearer capability 1 information element shall be included if and only if at least one of the following six cases holds:\n-\tthe mobile station wishes another bearer capability than that given by the bearer capability 1 information element of the incoming SETUP message;\n-\tthe bearer capability 1 information element is missing or not fully specified in the SETUP message;\n-\tthe bearer capability 1 information element received in the SETUP message is accepted and the \"radio channel requirement\" of the mobile station is other than \"full rate support only mobile station\";\n-\tthe bearer capability 1 information element received in the SETUP message indicates speech and is accepted and the mobile station supports CTM text telephony;\n-\tthe bearer capability 1 information element received in the SETUP message indicates speech and is accepted and the mobile station supports other codecs for GERAN than GSM speech version 1;\n-\tthe bearer capability 1 information element received in the SETUP message included the \"fixed network user rate\" parameter.\nWhen the bearer capability 1 information element is followed by the bearer capability 2 IE in the SETUP, the above rules apply to both bearer capability 1 IE and bearer capability 2 IE. Except those cases identified in 3GPP TS 27.001 [36], if either bearer capability needs to be included, both shall be included.\nFurthermore, both bearer capability information elements may be present if the mobile station wishes to reverse the order of occurrence of the bearer capability information elements (which is referred to in the repeat indicator information element, see subclause 10.5.4.22) in cases identified in 3GPP TS 27.001 [36].\nIf the mobile station wishes to indicate capability for an alternative call mode, which can be entered during the call through in-call modification, this is indicated by adding a bearer capability information element (bearer capability 2 information element, see subclause 5.3.6).\nThis information element is included if the mobile station is compatible but the user is busy.\nThis information element may be included by the mobile station to indicate its call control capabilities.\nThis information element shall be included by the mobile station supporting multicall.\nThis information element shall be included for speech calls, if the mobile station supports UMTS radio access.\n",
                            "figures_meta_data": [],
                            "tables": [
                                {
                                    "description": "Table 9.56/3GPP TS 24.008: CALL CONFIRMED message content",
                                    "table number": 42,
                                    "summary": "",
                                    "name": ""
                                }
                            ]
                        },
                        {
                            "title": "9.3.3\tCall proceeding",
                            "text_content": "This message is sent by the network to the calling mobile station to indicate that the requested call establishment information has been received, and no more call establishment information will be accepted.\nSee table 9.57/3GPP TS 24.008.\nMessage type:\tCALL PROCEEDING\nSignificance:\t\tlocal\nDirection:\t\t\tnetwork to mobile station\nTable 9.57/3GPP TS 24.008: CALL PROCEEDING message content\n\nThis information element is included if and only if bearer capability 1 IE and bearer capability 2 IE are both contained in the message.\nThe bearer capability 1 information element shall be included if the network has to specify at least one of the negotiable parameters described in 3GPP TS 27.001 [36], or if the bearer capability 1 information element received in the SETUP message included the \"fixed network user rate\" parameter.\nWhen the bearer capability 1 information element is followed by the bearer capability 2 IE in the SETUP, the above rule applies to both bearer capability 1 IE and bearer capability 2 IE. Except those cases identified in 3GPP TS 27.001 [36], if either bearer capability needs to be included, both shall be included.\nThis information element may be used for functional operation of supplementary services.\nThis information element may be included:\n-\tin order to pass information about the call in progress e.g. in the event of interworking; and/or\n-\tto make the MS attach the user connection for speech.\nThe priority field is provided by the network in the case that eMLPP is supported.\nThis information shall be included by the network to indicate its call control capabilities if the network supports multicall.and there are no other ongoing calls to the MS.\n",
                            "figures_meta_data": [],
                            "tables": [
                                {
                                    "description": "Table 9.57/3GPP TS 24.008: CALL PROCEEDING message content",
                                    "table number": 43,
                                    "summary": "",
                                    "name": ""
                                }
                            ]
                        },
                        {
                            "title": "9.3.4\tCongestion control",
                            "text_content": "This message is sent by the network to indicate the establishment or termination of flow control on the transmission of USER INFORMATION messages.\nSee table 9.58/3GPP TS 24.008.\nMessage type:\tCONGESTION CONTROL\nSignificance:\t\tlocal (note)\nDirection:\t\t\tnetwork to mobile station\nTable 9.58/3GPP TS 24.008: CONGESTION CONTROL message content\n\nNOTE:\tThis message has local significance, but may carry information of global significance.\nThis information element is included if the user to user information has been discarded as a result of the congestion situation.\n",
                            "figures_meta_data": [],
                            "tables": [
                                {
                                    "description": "Table 9.58/3GPP TS 24.008: CONGESTION CONTROL message content",
                                    "table number": 44,
                                    "summary": "",
                                    "name": ""
                                }
                            ]
                        },
                        {
                            "title": "9.3.5\tConnect",
                            "text_content": "This message is sent by the network to the calling mobile station to indicate call acceptance by the called user.\nSee table 9.59/3GPP TS 24.008.\nMessage type:\tCONNECT\nSignificance:\t\tglobal\nDirection:\t\t\tnetwork to mobile station\nTable 9.59/3GPP TS 24.008: CONNECT message content(network to mobile station direction)\n\nThis information element may be used for functional operation of supplementary services.\nThis information element may be included by the network:\n-\tin order to pass information about the call in progress e.g. in the event of interworking; and/or\n-\tto make the MS attach the user connection for speech.\nThis information element may be included by the network if the remote user awarded the call included a user- user information element in the CONNECT message.\nThis message is sent by the called mobile station to the network to indicate call acceptance by the called user.\nSee table 9.59a/3GPP TS 24.008.\nMessage type:\tCONNECT\nSignificance:\t\tglobal\nDirection:\t\tmobile station to network\nTable 9.59a/3GPP TS 24.008: CONNECT message content (mobile station to network direction)\n\nThis information element may be used for functional operation of supplementary services.\nThis information element is included when the answering mobile station wants to return user information to the calling remote user.\nThis information element shall not be included if the facility information element is not present in this message.\nThis information element shall be included or excluded as defined in 3GPP TS 24.010 [21]. This information element should not be transmitted unless explicitly required by 3GPP TS 24.010 [21].\nThis information element shall be included by a mobile station that supports multicall when a mobile station has indicated \"No Bearer\" as the SI value in the CALL CONFIRMED message.\n",
                            "figures_meta_data": [],
                            "tables": [
                                {
                                    "description": "Table 9.59/3GPP TS 24.008: CONNECT message content(network to mobile station direction)",
                                    "table number": 45,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 9.59a/3GPP TS 24.008: CONNECT message content (mobile station to network direction)",
                                    "table number": 46,
                                    "summary": "",
                                    "name": ""
                                }
                            ]
                        },
                        {
                            "title": "9.3.6\tConnect acknowledge",
                            "text_content": "This message is sent by the network to the called mobile station to indicate that the mobile station has been awarded the call. It shall also be sent by the calling mobile station to the network to acknowledge the offered connection.\nSee table 9.60/3GPP TS 24.008.\nMessage type:\tCONNECT ACKNOWLEDGE\nSignificance:\t\tlocal\nDirection:\t\t\tboth\nTable 9.60/3GPP TS 24.008: CONNECT ACKNOWLEDGE message content\n\n",
                            "figures_meta_data": [],
                            "tables": [
                                {
                                    "description": "Table 9.60/3GPP TS 24.008: CONNECT ACKNOWLEDGE message content",
                                    "table number": 47,
                                    "summary": "",
                                    "name": ""
                                }
                            ]
                        },
                        {
                            "title": "9.3.7\tDisconnect",
                            "text_content": "This message is sent by the network to indicate that the end-to-end connection is cleared.\nSee table 9.61/3GPP TS 24.008.\nMessage type:\tDISCONNECT\nSignificance:\t\tglobal\nDirection:\t\t\tnetwork to mobile station\nTable 9.61/3GPP TS 24.008: DISCONNECT message content (network to mobile station direction)\n\nThis information element may be used for functional operation of supplementary services, such as the user-user service.\nThis information element is included by the network to make the MS attach the user connection for speech and react in a specific way during call clearing (see subclause 5.4.4).\nThis information element may be included by the network when the remote user initiates call clearing and included a user-user information element in the DISCONNECT message.\nThis information element may be included by the network to inform the MS about further possible reactions.\nThis message is sent by the mobile station to request the network to clear an end-to-end connection.\nSee table 9.61a/3GPP TS 24.008.\nMessage type:\tDISCONNECT\nSignificance:\t\tglobal\nDirection:\t\tmobile station to network\nTable 9.61a/3GPP TS 24.008: DISCONNECT message content (mobile station to network direction)\n\nThis information element may be used for functional operation of supplementary services, such as the user-user service.\nThis information element is included when the mobile station initiates call clearing and wants to pass user information to the remote user at call clearing time.\nThis information element shall not be included if the facility information element is not present in this message.\nThis information element shall be included or excluded as defined in 3GPP TS 24.010 [21]. This information element should not be transmitted unless explicitly required by 3GPP TS 24.010 [21].\n",
                            "figures_meta_data": [],
                            "tables": [
                                {
                                    "description": "Table 9.61/3GPP TS 24.008: DISCONNECT message content (network to mobile station direction)",
                                    "table number": 48,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 9.61a/3GPP TS 24.008: DISCONNECT message content (mobile station to network direction)",
                                    "table number": 49,
                                    "summary": "",
                                    "name": ""
                                }
                            ]
                        },
                        {
                            "title": "9.3.8\tEmergency setup",
                            "text_content": "This message is sent from the mobile station to initiate emergency call establishment.\nSee table 9.62/3GPP TS 24.008.\nMessage type:\tEMERGENCY SETUP\nSignificance:\t\tglobal\nDirection:\t\tmobile station to network\nTable 9.62/3GPP TS 24.008: EMERGENCY SETUP message content\n\nIf the element is not included, the network shall by default assume speech and select the speech codec according to subclauses 5.2.1.2 and 5.2.1.11. If this information element is included, it shall indicate speech, the appropriate speech version(s) and have the appropriate value of radio channel requirement field.\nThis information element shall be included by an ME supporting CTM text telephony or supporting at least one speech version for GERAN other than GSM FR speech version 1.\nThis information element shall be included by the mobile station supporting multicall.\nThis information element shall be included if the mobile station supports UMTS radio access.\nThis information element shall be included if the emergency category is available from the SIM/USIM or the mobile station.\nIf this information element is included, it shall indicate the selected emergency call category.\nIf the element is not included, the network shall by default assume a non-specific emergency call.\n",
                            "figures_meta_data": [],
                            "tables": [
                                {
                                    "description": "Table 9.62/3GPP TS 24.008: EMERGENCY SETUP message content",
                                    "table number": 50,
                                    "summary": "",
                                    "name": ""
                                }
                            ]
                        },
                        {
                            "title": "9.3.9\tFacility",
                            "text_content": "This message is sent by the network to the mobile station to request or acknowledge a supplementary service. The supplementary service to be invoked and its associated parameters are specified in the facility information element.\nSee table 9.62a/3GPP TS 24.008.\nMessage type:\tFACILITY\nSignificance:\t\tlocal (NOTE 1)\nDirection:\t\t\tnetwork to mobile station\nTable 9.62a/3GPP TS 24.008: FACILITY message content (network to mobile station direction)\n\nNOTE 1:\tThis message has local significance; however, it may carry information of global significance.\nNOTE 2:\tThe facility information element has no upper length limit except that given by the maximum number of octets in a L3 message, see 3GPP TS 44.006 [19].\nThis message is sent by the mobile station to the network to request or acknowledge a supplementary service. The supplementary service to be invoked and its associated parameters are specified in the facility information element.\nSee table 9.62b/3GPP TS 24.008.\nMessage type:\tFACILITY\nSignificance:\t\tlocal (note 1)\nDirection:\t\tmobile station to network\nTable 9.62b/3GPP TS 24.008: FACILITY message content (mobile station to network direction)\n\nNOTE 1:\tThis message has local significance; however, it may carry information of global significance.\nNOTE 2:\tThe facility information element has no upper length limit except that given by the maximum number of octets in a L3 message, see 3GPP TS 44.006 [19].\nThis information element shall be included or excluded as defined in 3GPP TS 24.010 [21]. This information element should not be transmitted unless explicitly required by 3GPP TS 24.010 [21].\n",
                            "figures_meta_data": [],
                            "tables": [
                                {
                                    "description": "Table 9.62a/3GPP TS 24.008: FACILITY message content (network to mobile station direction)",
                                    "table number": 51,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 9.62b/3GPP TS 24.008: FACILITY message content (mobile station to network direction)",
                                    "table number": 52,
                                    "summary": "",
                                    "name": ""
                                }
                            ]
                        },
                        {
                            "title": "9.3.10\tHold",
                            "text_content": "This message is sent by the mobile user to request the hold function for an existing call.\nSee table 9.62c/3GPP TS 24.008 for the content of the HOLD message.\nFor the use of this message, see 3GPP TS 24.010 [21].\nMessage type:\tHOLD\nSignificance:\t\tlocal\nDirection:\t\t\tmobile station to network\nTable 9.62c/3GPP TS 24.008: HOLD message content\n\n",
                            "figures_meta_data": [],
                            "tables": [
                                {
                                    "description": "Table 9.62c/3GPP TS 24.008: HOLD message content",
                                    "table number": 53,
                                    "summary": "",
                                    "name": ""
                                }
                            ]
                        },
                        {
                            "title": "9.3.11\tHold Acknowledge",
                            "text_content": "This message is sent by the network to indicate that the hold function has been successfully performed.\nSee table 9.62d/3GPP TS 24.008 for the content of the HOLD ACKNOWLEDGE message.\nFor the use of this message, see 3GPP TS 24.010 [21].\nMessage type:\tHOLD ACKNOWLEDGE\nSignificance:\t\tlocal\nDirection:\t\t\tnetwork to mobile station\nTable 9.62d/3GPP TS 24.008: HOLD ACKNOWLEDGE message content\n\n",
                            "figures_meta_data": [],
                            "tables": [
                                {
                                    "description": "Table 9.62d/3GPP TS 24.008: HOLD ACKNOWLEDGE message content",
                                    "table number": 54,
                                    "summary": "",
                                    "name": ""
                                }
                            ]
                        },
                        {
                            "title": "9.3.12\tHold Reject",
                            "text_content": "This message is sent by the network to indicate the denial of a request to hold a call.\nSee table 9.62e/3GPP TS 24.008 for the content of the HOLD REJECT message.\nFor the use of this message, see 3GPP TS 24.010 [21].\nMessage type:\tHOLD REJECT\nSignificance:\t\tlocal\nDirection:\t\t\tnetwork to mobile station\nTable 9.62e/3GPP TS 24.008: HOLD REJECT message content\n\n",
                            "figures_meta_data": [],
                            "tables": [
                                {
                                    "description": "Table 9.62e/3GPP TS 24.008: HOLD REJECT message content",
                                    "table number": 55,
                                    "summary": "",
                                    "name": ""
                                }
                            ]
                        },
                        {
                            "title": "9.3.13\tModify",
                            "text_content": "This message is sent by the mobile station to the network or by the network to the mobile station to request a change in bearer capability for a call.\nSee table 9.63/3GPP TS 24.008.\nMessage type:\tMODIFY\nSignificance:\t\tglobal\nDirection:\t\t\tboth\nTable 9.63/3GPP TS 24.008: MODIFY message content\n\nThis information element shall be included if it was included in the initial SETUP message.\nThis information element shall be included if it was included in the initial SETUP message.\nThis information element is included or omitted in the mobile to network direction according to the rules defined in subclause 5.3.4.3.1.\nThis information element shall be included only if the MODIFY message was sent by the network to switch from speech to UDI/RDI multimedia due to a network-initiated service upgrade.\n",
                            "figures_meta_data": [],
                            "tables": [
                                {
                                    "description": "Table 9.63/3GPP TS 24.008: MODIFY message content",
                                    "table number": 56,
                                    "summary": "",
                                    "name": ""
                                }
                            ]
                        },
                        {
                            "title": "9.3.14\tModify complete",
                            "text_content": "This message is sent by the mobile station to the network or by the network to the mobile station to indicate completion of a request to change bearer capability for a call.\nSee table 9.64/3GPP TS 24.008.\nMessage type:\tMODIFY COMPLETE\nSignificance:\t\tglobal\nDirection:\t\t\tboth\nTable 9.64/3GPP TS 24.008: MODIFY COMPLETE message content\n\nThis information element shall be included if it was included in the initial SETUP message.\nThis information element shall be included if it was included in the initial SETUP message.\nThis information element is included or omitted according to the rules defined in subclause 5.3.4.3.2.\n",
                            "figures_meta_data": [],
                            "tables": [
                                {
                                    "description": "Table 9.64/3GPP TS 24.008: MODIFY COMPLETE message content",
                                    "table number": 57,
                                    "summary": "",
                                    "name": ""
                                }
                            ]
                        },
                        {
                            "title": "9.3.15\tModify reject",
                            "text_content": "This message is sent by the mobile station to the network or by the network to the mobile station to indicate failure of a request to change the bearer capability for a call.\nSee table 9.65/3GPP TS 24.008.\nMessage type:\tMODIFY REJECT\nSignificance:\t\tglobal\nDirection:\t\t\tboth\nTable 9.65/3GPP TS 24.008: MODIFY REJECT message content\n\nThis information element shall be included if it was included in the initial SETUP message.\nThis information element shall be included if it was included in the initial SETUP message.\n",
                            "figures_meta_data": [],
                            "tables": [
                                {
                                    "description": "Table 9.65/3GPP TS 24.008: MODIFY REJECT message content",
                                    "table number": 58,
                                    "summary": "",
                                    "name": ""
                                }
                            ]
                        },
                        {
                            "title": "9.3.16\tNotify",
                            "text_content": "This message is sent either from the mobile station or from the network to indicate information pertaining to a call, such as user suspended.\nSee table 9.66/3GPP TS 24.008.\nMessage type:\tNOTIFY\nSignificance:\t\taccess\nDirection:\t\t\tboth\nTable 9.66/3GPP TS 24.008: NOTIFY message content\n\n",
                            "figures_meta_data": [],
                            "tables": [
                                {
                                    "description": "Table 9.66/3GPP TS 24.008: NOTIFY message content",
                                    "table number": 59,
                                    "summary": "",
                                    "name": ""
                                }
                            ]
                        },
                        {
                            "title": "9.3.17\tProgress",
                            "text_content": "This message is sent from the network to the mobile station to indicate the progress of a call in the event of interworking or in connection with the provision of in-band information/patterns.\nSee table 9.67/3GPP TS 24.008.\nMessage type:\tPROGRESS\nSignificance:\t\tglobal\nDirection:\t\t\tnetwork to mobile station\nTable 9.67/3GPP TS 24.008: PROGRESS message content\n\nThis information element is included when the PROGRESS message is sent by the network when the call has been cleared by the remote user before it reached the active state to indicate that the remote user wants to pass user information at call clearing time.\nThis information element may be included by the network:\n-\tin order to pass information about the call in progress, e.g., in the event of interworking;\n-\tto make the mobile station attach the user connection for speech; and/or\n-\tto make a mobile station supporting multimedia CAT during the alerting phase of a mobile originated multimedia call establishment attach the user connection and setup an H.324 call.\n",
                            "figures_meta_data": [],
                            "tables": [
                                {
                                    "description": "Table 9.67/3GPP TS 24.008: PROGRESS message content",
                                    "table number": 60,
                                    "summary": "",
                                    "name": ""
                                }
                            ]
                        },
                        {
                            "title": "9.3.17a\tCC-Establishment $(CCBS)$",
                            "text_content": "A mobile station that does not support the \"Network initiated MO call\" option shall treat this message as a message with message type not defined for the PD.\nThis message is sent from the network to the mobile station to provide information on the call that the mobile station should attempt to establish.\nSee Table 9.67a/3GPP TS 24.008.\nMessage type:\tCC-ESTABLISHMENT\nSignificance:\t\tlocal\nDirection:\t\t\tnetwork to mobile station\nTable 9.67a/3GPP TS 24.008: CC-Establishment message content\n\nThis information element contains the contents of a SETUP message (Mobile Station to Network).\n",
                            "figures_meta_data": [],
                            "tables": [
                                {
                                    "description": "Table 9.67a/3GPP TS 24.008: CC-Establishment message content",
                                    "table number": 61,
                                    "summary": "",
                                    "name": ""
                                }
                            ]
                        },
                        {
                            "title": "9.3.17b\tCC-Establishment confirmed $(CCBS)$",
                            "text_content": "A Network that does not support the \"Network initiated MO call\" option shall treat this message as a message with message type not defined for the PD.\nThis message is sent by the mobile station to the network to indicate the requested channel characteristics for the call which may be initiated by the mobile station.\nSee Table 9.67b/3GPP TS 24.008.\nMessage type:\tCC-ESTABLISHMENT CONFIRMED\nSignificance:\t\tlocal\nDirection:\t\t\tmobile station to network\nTable 9.67b/3GPP TS 24.008: CC-ESTABLISHMENT CONFIRMED message content\n\nThe repeat indicator information element shall be included if bearer capability 1 information element and bearer capability 2 IE are both included in the message.\nIf, in any subsequent SETUP message to be sent on this transaction the bearer capability 1 information element is to be followed by the bearer capability 2 IE, then the bearer capability 2 IE shall be included in this message.\nThis information element is included if the mobile station is compatible but the user is busy.\nThis information element shall be included for speech calls, if the mobile station supports UMTS radio access.\n",
                            "figures_meta_data": [],
                            "tables": [
                                {
                                    "description": "Table 9.67b/3GPP TS 24.008: CC-ESTABLISHMENT CONFIRMED message content",
                                    "table number": 62,
                                    "summary": "",
                                    "name": ""
                                }
                            ]
                        },
                        {
                            "title": "9.3.18\tRelease",
                            "text_content": "This message is sent, from the network to the mobile station to indicate that the network intends to release the transaction identifier, and that the receiving equipment shall release the transaction identifier after sending RELEASE COMPLETE.\nSee table 9.68/3GPP TS 24.008.\nMessage type:\tRELEASE\nSignificance:\t\tlocal (note)\nDirection:\t\t\tnetwork to mobile station\nTable 9.68/3GPP TS 24.008: RELEASE message content (network to mobile station direction)\nNOTE:\tThis message has local significance; however, it may carry information of global significance when used as the first call clearing message.\nThis information element shall be included if this message is used to initiate call clearing.\nThis information element may be included under the conditions described in subclause 5.4.4.1.2.3 \"Abnormal cases\" (Clearing initiated by the network).\nThis information element may be included for functional operation of supplementary services.\nThis information element may be included in the network to mobile station direction, when the RELEASE message is used to initiate call clearing, in order to transport user-user information from the remote user.\nThis message is sent from the mobile station to the network to indicate that the mobile station intends to release the transaction identifier, and that the receiving equipment shall release the transaction identifier after sending RELEASE COMPLETE.\nSee table 9.68a/3GPP TS 24.008.\nMessage type:\tRELEASE\nSignificance:\t\tlocal (note)\nDirection:\t\tmobile station to network direction\nTable 9.68a/3GPP TS 24.008: RELEASE message content (mobile station to network direction)\n\nNOTE:\tThis message has local significance; however, it may carry information of global significance when used as the first call clearing message.\nThis information element shall be included if this message is used to initiate call clearing.\nThis information element may be included under the conditions described in subclause 5.4.3.5 \"Abnormal cases\" (Clearing initiated by the mobile station).\nThis information element may be included for functional operation of supplementary services.\nThis information element is included when the RELEASE message is used to initiate call clearing and the mobile station wants to pass user information to the remote user at call clearing time.\nThis information element shall not be included if the facility information element is not present in this message.\nThis information element shall be included or excluded as defined in 3GPP TS 24.010 [21]. This information element should not be transmitted unless explicitly required by 3GPP TS 24.010 [21].\n",
                            "figures_meta_data": [],
                            "tables": [
                                {
                                    "description": "Table 9.68/3GPP TS 24.008: RELEASE message content (network to mobile station direction)",
                                    "table number": 63,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 9.68a/3GPP TS 24.008: RELEASE message content (mobile station to network direction)",
                                    "table number": 64,
                                    "summary": "",
                                    "name": ""
                                }
                            ]
                        },
                        {
                            "title": "9.3.18a\tRecall $(CCBS)$",
                            "text_content": "A mobile station that does not support the \"Network initiated MO call\" option shall treat this message as a message with message type not defined for the PD.\nThis message is sent from the network to the mobile station to initiate the sending of the SETUP message. In addition it provides information for user notification.\nSee Table 9.68b/3GPP TS 24.008.\nMessage type:\tRECALL\nSignificance:\t\tlocal\nDirection:\t\t\tnetwork to mobile station\nTable 9.68b/3GPP TS 24.008: Recall message content\n\nThe purpose of the recall type information element is to describe the reason for the recall.\nThe information element shall be included for functional operation of supplementary services.\n",
                            "figures_meta_data": [],
                            "tables": [
                                {
                                    "description": "Table 9.68b/3GPP TS 24.008: Recall message content",
                                    "table number": 65,
                                    "summary": "",
                                    "name": ""
                                }
                            ]
                        },
                        {
                            "title": "9.3.19\tRelease complete",
                            "text_content": "This message is sent from the network to the mobile station to indicate that the network has released the transaction identifier and that the mobile station shall release the transaction identifier.\nSee table 9.69/3GPP TS 24.008.\nMessage type:\tRELEASE COMPLETE\nSignificance:\t\tlocal (note)\nDirection:\t\t\tnetwork to mobile station direction\nTable 9.69/3GPP TS 24.008: RELEASE COMPLETE message content (network to mobile station direction)\n\nNOTE:\tThis message has local significance; however, it may carry information of global significance when used as the first call clearing message.\nThis information element shall be included if the message is used to initiate call clearing.\nThis information element may be included for functional operation of supplementary services.\nThis information element is included in the network to mobile station direction, when the RELEASE COMPLETE message is used to initiate call clearing, in order to transport user-user information from the remote user.\nThis message is sent from the mobile station to the network to indicate that the mobile station has released the transaction identifier and that the network shall release the transaction identifier.\nSee table 9.69a/3GPP TS 24.008.\nMessage type:\tRELEASE COMPLETE\nSignificance:\t\tlocal (note)\nDirection:\t\t\tmobile station to network direction\nTable 9.69a/3GPP TS 24.008: RELEASE COMPLETE message content (mobile station to network direction)\n\nNOTE:\tThis message has local significance; however, it may carry information of global significance when used as the first call clearing message.\nThis information element shall be included if the message is used to initiate call clearing.\nThis information element may be included for functional operation of supplementary services.\nThis information element is included in the mobile station to network direction when the RELEASE COMPLETE message is used to initiate call clearing and the mobile station wants to pass user information to the remote user at call clearing time.\nThis information element shall not be included if the facility information element is not present in this message.\nThis information element shall be included or excluded as defined in 3GPP TS 24.010 [21]. This information element should not be transmitted unless explicitly required by 3GPP TS 24.010 [21].\n",
                            "figures_meta_data": [],
                            "tables": [
                                {
                                    "description": "Table 9.69/3GPP TS 24.008: RELEASE COMPLETE message content (network to mobile station direction)",
                                    "table number": 66,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 9.69a/3GPP TS 24.008: RELEASE COMPLETE message content (mobile station to network direction)",
                                    "table number": 67,
                                    "summary": "",
                                    "name": ""
                                }
                            ]
                        },
                        {
                            "title": "9.3.20\tRetrieve",
                            "text_content": "This message is sent by the mobile user to request the retrieval of a held call.\nSee table 9.69b/3GPP TS 24.008 for the content of the RETRIEVE message.\nFor the use of this message, see 3GPP TS 24.010 [21].\nMessage type:\tRETRIEVE\nSignificance:\t\tlocal\nDirection:\t\t\tmobile station to network\nTable 9.69b/3GPP TS 24.008: RETRIEVE message content\n\n",
                            "figures_meta_data": [],
                            "tables": [
                                {
                                    "description": "Table 9.69b/3GPP TS 24.008: RETRIEVE message content",
                                    "table number": 68,
                                    "summary": "",
                                    "name": ""
                                }
                            ]
                        },
                        {
                            "title": "9.3.21\tRetrieve Acknowledge",
                            "text_content": "This message is sent by the network to indicate that the retrieve function has been successfully performed.\nSee table 9.69c/3GPP TS 24.008 for the content of the RETRIEVE ACKNOWLEDGE message.\nFor the use of this message, see 3GPP TS 24.010 [21].\nMessage type:\tRETRIEVE ACKNOWLEDGE\nSignificance:\t\tlocal\nDirection:\t\t\tnetwork to mobile station\nTable 9.69c/3GPP TS 24.008: RETRIEVE ACKNOWLEDGE message content\n\n",
                            "figures_meta_data": [],
                            "tables": [
                                {
                                    "description": "Table 9.69c/3GPP TS 24.008: RETRIEVE ACKNOWLEDGE message content",
                                    "table number": 69,
                                    "summary": "",
                                    "name": ""
                                }
                            ]
                        },
                        {
                            "title": "9.3.22\tRetrieve Reject",
                            "text_content": "This message is sent by the network to indicate the inability to perform the requested retrieve function.\nSee table 9.69d/3GPP TS 24.008 for the content of the RETRIEVE REJECT message.\nFor the use of this message, see 3GPP TS 24.010 [21].\nMessage type:\tRETRIEVE REJECT\nSignificance:\t\tlocal\nDirection:\t\t\tnetwork to mobile station\nTable 9.69d/3GPP TS 24.008: RETRIEVE REJECT message content\n\n",
                            "figures_meta_data": [],
                            "tables": [
                                {
                                    "description": "Table 9.69d/3GPP TS 24.008: RETRIEVE REJECT message content",
                                    "table number": 70,
                                    "summary": "",
                                    "name": ""
                                }
                            ]
                        },
                        {
                            "title": "9.3.23\tSetup",
                            "text_content": "This message is sent by the network to the mobile station to initiate a mobile terminated call establishment.\nSee table 9.70/3GPP TS 24.008.\nMessage type:\tSETUP\nSignificance:\t\tglobal\nDirection:\t\t\tnetwork to mobile station\n\n\nThe BC repeat indicator information element is included if and only if bearer capability 1 information element and bearer capability 2 IE are both present in the message.\nThe bearer capability 1 information element may be omitted in the case where the mobile subscriber is allocated only one directory number for all services (ref.: 3GPP TS 29.007 [38]). The bearer capability 2 IE is missing at least if the bearer capability 1 IE is missing.\nIf the MSC wishes to indicate capability for an altenative call mode, which can be entered through fallback, this is indicated by adding a bearer capability information element (bearer capability) 2 element (see subclause 5.3.6).\nThis information element may be included for functional operation of supplementary services.\nThis information element is included by the network\n-\tin order to pass information about the call in progress e.g. in the event of interworking and/or\n-\tto make the MS attach the user connection for speech.\nFor all bands except for PCS1900, the maximum length of this IE sent by the network shall be 13 octets\nIncluded in the Network-to-mobile station direction if the calling user includes a called party subaddress information element in the SETUP message.\nThe LLC repeat indicator information element is included if and only if both following conditions hold:\n-\tThe BC repeat indicator IE is contained in the message.\n-\tThe low layer compatibility I IE is contained in the message.\nIf included, the LLC repeat indicator shall specify the same repeat indication as the BC repeat indicator IE.\nIncluded in the network-to-mobile station direction if the calling user specified a low layer compatibility.\nIncluded if and only if the LLC repeat indicator information element is contained in the message.\nThe HLC repeat indicator information element is included if and only both following conditions hold:\n-\tThe BC repeat indicator IE is contained in the message.\n-\tThe high layer compatibility i IE is contained in the message.\nIf included, the HLC repeat indicator shall specify the same repeat indication as the BC repeat indicator IE.\nIncluded in the network-to-mobile station direction if the calling user specified a high layer compatibility.\nIncluded if and only if the HLC repeat indicator information element is contained in the message.\nMay be included in the network to called mobile station direction when the calling remote user included a user-user information element in the SETUP message.\nMay be included in the network to called mobile station direction when the call has been redirected.\nMay be included in the network to called mobile station direction when the calling remote user included a called party subaddress in the SETUP message and the call has been redirected\nMay be included by the network to indicate the priority of the incoming call if eMLPP is used.\nMay be included by the network to give some indication about alerting (category or level). If supported in the MS, this optional indication is to be used by the MS as specified in 3GPP TS 22.101 [8].\nThis information shall be included by the network to indicate its call control capabilities if the network supports multicall.and there are no other ongoing calls to the MS.\nThis IE may be included by the network as defined by 3GPP TS 24.081 [25].\nWhen both Calling Party BCD number IE and Cause of No CLI IE are included in SETUP message then the Cause of No CLI IE provides additional information on why the number digits are not present.\nThe backup bearer capability IE may be included by the network only if there are no bearer capability IEs contained in the message.\nNOTE:\tThe MSC may use the backup bearer capability IE if it is not able to provide a complete bearer capability IE.\nThis message is sent from the mobile station to the network to initiate a mobile originating call establishment.\nSee table 9.70a/3GPP TS 24.008.\nMessage type:\tSETUP\nSignificance:\t\tglobal\nDirection:\t\t\tmobile station to network\n\n\nThe BC repeat indicator information element is included if and only if bearer capability 1 IE and bearer capability 2 IE are both present in the message.\nThe information element may be included for functional operation of supplementary services.\nThree different codings of this IE exist, for further details see 3GPP TS 24.010 [21].\nThe LLC repeat indicator information element is included if and only if both following conditions hold:\n-\tThe BC repeat indicator IE is contained in the message.\n-\tThe low layer compatibility I IE is contained in the message.\nIf included, the LLC repeat indicator shall specify the same repeat indication as the BC repeat indicator IE.\nThe information element is included in the MS-to-network direction when the calling MS wants to pass low layer compatibility information to the called user.\nIncluded if and only if the LLC repeat indicator information element is contained in the message.\nThe HLC repeat indicator information element is included if and only if both following conditions hold:\n-\tThe BC repeat indicator IE is contained in the message.\n-\tThe high layer compatibility i IE is contained in the message.\nIf included, the HLC repeat indicator shall specify the same repeat indication as the BC repeat indicator IE.\nThe information element is included when the calling MS wants to pass high layer compatibility information to the called user.\nIncluded if and only if the HLC repeat indicator information element is contained in the message.\nThe information element is included in the calling mobile station to network direction when the calling mobile station wants to pass user information to the called remote user.\nThis information element shall not be included if the facility information element is not present in this message.\nThis information element shall be included or excluded as defined in 3GPP TS 24.010 [21]. This information element should not be transmitted unless explicitly required by 3GPP TS 24.010 [21].\nThe information element may be included by the MS (see 3GPP TS 24.081 [25]). If this information element is included the CLIR invocation IE shall not be included.\nThe information element may be included by the MS (see 3GPP TS 24.081 [25]). If this information element is included the CLIR suppression IE shall not be included.\nThis information element may be included by the mobile station to indicate its call control capabilities.\nThis information element shall be included by the mobile station supporting multicall.\nIf the mobile station wishes to indicate capability for an altenative call mode, which can be entered throughfallback, this is indicated by adding a bearer capability information element (bearer capability) 2 element (see subclause 5.3.6).\nThis information element shall be included for speech calls, if the mobile station supports UMTS radio access.\nThis information element shall be included if the mobile station is attempting to set up a call to switch from speech to multimedia or vice-versa.\n",
                            "figures_meta_data": [],
                            "tables": [
                                {
                                    "description": "",
                                    "table number": 71,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "",
                                    "table number": 72,
                                    "summary": "",
                                    "name": ""
                                }
                            ]
                        },
                        {
                            "title": "9.3.23a\tStart CC $(CCBS)$",
                            "text_content": "A Network that does not support the \"Network initiated MO call\" option shall treat this message as a message with message type not defined for the PD.\nThis message is sent by the mobile station to the network to open a Call Control transaction which the network has requested the mobile station to open.\nSee Table 9.70b/3GPP TS 24.008.\nMessage type:\tSTART CC\nSignificance:\t\tlocal\nDirection:\t\t\tmobile station to network\nTable 9.70b/3GPP TS 24.008: START CC message content\n\nThis information element may be included by the mobile station to indicate its call control capabilities\n",
                            "figures_meta_data": [],
                            "tables": [
                                {
                                    "description": "Table 9.70b/3GPP TS 24.008: START CC message content",
                                    "table number": 73,
                                    "summary": "",
                                    "name": ""
                                }
                            ]
                        },
                        {
                            "title": "9.3.24\tStart DTMF",
                            "text_content": "This message is sent by the mobile station to the network and contains the digit the network should reconvert back into a DTMF tone which is then applied towards the remote user.\nSee table 9.71/3GPP TS 24.008.\nMessage type:\tSTART DTMF\nSignificance:\t\tlocal\nDirection:\t\t\tmobile station to network\nTable 9.71/3GPP TS 24.008: START DTMF message content\n\n",
                            "figures_meta_data": [],
                            "tables": [
                                {
                                    "description": "Table 9.71/3GPP TS 24.008: START DTMF message content",
                                    "table number": 74,
                                    "summary": "",
                                    "name": ""
                                }
                            ]
                        },
                        {
                            "title": "9.3.25\tStart DTMF Acknowledge",
                            "text_content": "This message is sent by the network to the mobile station to indicate the successful initiation of the action requested by the START DTMF message (conversion of the digit contained in this message into a DTMF tone).\nSee table 9.72/3GPP TS 24.008.\nMessage type:\tSTART DTMF ACKNOWLEDGE\nSignificance:\t\tlocal\nDirection:\t\t\tnetwork to mobile station\nTable 9.72/3GPP TS 24.008: START DTMF ACKNOWLEDGE message content\n\nThis information element contains the digit corresponding to the DTMF tone that the network applies towards the remote user.\n",
                            "figures_meta_data": [],
                            "tables": [
                                {
                                    "description": "Table 9.72/3GPP TS 24.008: START DTMF ACKNOWLEDGE message content",
                                    "table number": 75,
                                    "summary": "",
                                    "name": ""
                                }
                            ]
                        },
                        {
                            "title": "9.3.26\tStart DTMF reject",
                            "text_content": "This message is sent by the network to the mobile station, if the network can not accept the START DTMF message.\nSee table 9.73/3GPP TS 24.008.\nMessage type:\tSTART DTMF REJECT\nSignificance:\t\tlocal\nDirection:\t\t\tnetwork to mobile station\nTable 9.73/3GPP TS 24.008: START DTMF REJECT message content\n\n",
                            "figures_meta_data": [],
                            "tables": [
                                {
                                    "description": "Table 9.73/3GPP TS 24.008: START DTMF REJECT message content",
                                    "table number": 76,
                                    "summary": "",
                                    "name": ""
                                }
                            ]
                        },
                        {
                            "title": "9.3.27\tStatus",
                            "text_content": "This message is sent by the mobile station or the network at any time during a call to report certain error conditions listed in clause 8. It shall also be sent in response to a STATUS ENQUIRY message.\nSee table 9.74/3GPP TS 24.008.\nMessage type:\tSTATUS\nSignificance:\t\tlocal\nDirection:\t\t\tboth\nTable 9.74/3GPP TS 24.008: STATUS message content\n\nThe information element is included if and only if the call state is \"active\" or \"mobile originating modify\" and any auxiliary state is different from \"idle\". For the definition of the auxiliary states see 3GPP TS 24.083 [27] and 3GPP TS 24.084 [28]\n",
                            "figures_meta_data": [],
                            "tables": [
                                {
                                    "description": "Table 9.74/3GPP TS 24.008: STATUS message content",
                                    "table number": 77,
                                    "summary": "",
                                    "name": ""
                                }
                            ]
                        },
                        {
                            "title": "9.3.28\tStatus enquiry",
                            "text_content": "This message is sent by the mobile station or the network at any time to solicit a STATUS message from the peer layer 3 entity. Sending of STATUS message in response to a STATUS ENQUIRY message is mandatory.\nSee table 9.75/3GPP TS 24.008.\nMessage type:\tSTATUS ENQUIRY\nSignificance:\t\tlocal\nDirection:\t\t\tboth\nTable 9.75/3GPP TS 24.008: STATUS ENQUIRY message content\n\n",
                            "figures_meta_data": [],
                            "tables": [
                                {
                                    "description": "Table 9.75/3GPP TS 24.008: STATUS ENQUIRY message content",
                                    "table number": 78,
                                    "summary": "",
                                    "name": ""
                                }
                            ]
                        },
                        {
                            "title": "9.3.29\tStop DTMF",
                            "text_content": "This message is sent by a mobile station to the network and is used to stop the DTMF tone sent towards the remote user.\nSee table 9.76/3GPP TS 24.008.\nMessage type:\tSTOP DTMF\nSignificance:\t\tlocal\nDirection:\t\tmobile station to network\nTable 9.76/3GPP TS 24.008: STOP DTMF message content\n\n",
                            "figures_meta_data": [],
                            "tables": [
                                {
                                    "description": "Table 9.76/3GPP TS 24.008: STOP DTMF message content",
                                    "table number": 79,
                                    "summary": "",
                                    "name": ""
                                }
                            ]
                        },
                        {
                            "title": "9.3.30\tStop DTMF acknowledge",
                            "text_content": "This message is sent by the network to the mobile station to indicate that the sending of the DTMF tone has been stopped.\nSee table 9.77/3GPP TS 24.008.\nMessage type:\tSTOP DTMF ACKNOWLEDGE\nSignificance:\t\tlocal\nDirection:\t\t\tnetwork to mobile station\nTable 9.77/3GPP TS 24.008: STOP DTMF ACKNOWLEDGE message content\n\n",
                            "figures_meta_data": [],
                            "tables": [
                                {
                                    "description": "Table 9.77/3GPP TS 24.008: STOP DTMF ACKNOWLEDGE message content",
                                    "table number": 80,
                                    "summary": "",
                                    "name": ""
                                }
                            ]
                        },
                        {
                            "title": "9.3.31\tUser information",
                            "text_content": "This message is sent by the mobile station to the network to transfer information to the remote user. This message is also sent by the network to the mobile station to deliver information transferred from the remote user. This message is used if the user-to-user transfer is part of an allowed information transfer as defined in 3GPP TS 24.010 [21].\nSee table 9.78/3GPP TS 24.008.\nMessage type:\tUSER INFORMATION\nSignificance:\t\taccess\nDirection:\t\t\tboth\nTable 9.78/3GPP TS 24.008: USER INFORMATION message content\n\nSome networks may only support a maximum length of 35 octets. Procedures for interworking are not currently defined and are for further study.\nR98 and earlier versions of this protocol specified a minimum length of 3 octets for this information element (not counting the IEI). To avoid interworking problems with mobile stations supporting only R98 or earlier versions of the protocol, the network shall deliver the User information message to these mobile stations only if the length of the User-user IE is greater or equal to 3 octets (not counting the IEI).\nThe information element is included by the sending user to indicate that another USER INFORMATION message pertaining to the same message block will follow.\n",
                            "figures_meta_data": [],
                            "tables": [
                                {
                                    "description": "Table 9.78/3GPP TS 24.008: USER INFORMATION message content",
                                    "table number": 81,
                                    "summary": "",
                                    "name": ""
                                }
                            ]
                        }
                    ]
                },
                {
                    "title": "9.4\tGPRS Mobility Management Messages",
                    "description": "",
                    "summary": "",
                    "text_content": "",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": [
                        {
                            "title": "9.4.1\tAttach request",
                            "text_content": "This message is sent by the MS to the network in order to perform a GPRS or combined GPRS attach. See table 9.4.1/3GPP TS 24.008.\nMessage type:\tATTACH REQUEST\nSignificance:\t\tdual\nDirection:\t\t\tMS to network\nTable 9.4.1/3GPP TS 24.008: ATTACH REQUEST message content\n\nThe MS shall include this IE, if the MS holds a valid P-TMSI, P-TMSI signature and RAI, or if the TIN indicates \"GUTI\" and the MS holds a valid GUTI, or if the TIN is deleted and the MS holds a valid GUTI, but no valid P-TMSI and RAI. If the MS is configured for \"AttachWithIMSI\" as specified in 3GPP TS 24.368 [135] or 3GPP TS 31.102 [112] and is attaching in a new PLMN which is neither the registered PLMN nor in the list of equivalent PLMNs, the MS shall not include this IE.\nThis IE may be included if the MS wants to indicate a preferred value for the READY timer.\nThis IE shall be included if the MS performs a combined GPRS attach and no valid TMSI is available.\nThis IE shall be included if the MS supports at least one positioning method for the provision of location services (LCS) via the PS domain in Gb-mode.\nAn MS supporting S1 mode shall include this IE to indicate its capabilities to the network.\nThis IE shall be included if the MS supports SRVCC to GERAN or UTRAN.\nThis IE shall be included if the MS supports SRVCC to GERAN.\nThis IE shall be included if the MS supports SRVCC to GERAN or UTRAN to indicate its supported speech codecs for CS speech calls.\nThe MS shall include this IE, if the TIN indicates \"GUTI\" and the MS holds a valid GUTI, P-TMSI and RAI. If the MS is configured for \"AttachWithIMSI\" as specified in 3GPP TS 24.368 [135] or 3GPP TS 31.102 [112] and is attaching in a new PLMN which is neither the registered PLMN nor in the list of equivalent PLMNs, the MS shall not include this IE.\nThe MS shall include this IE, if the TIN indicates \"GUTI\" and the MS holds a valid GUTI, P-TMSI and RAI.\nThis IE shall be included if:\n-\tthe MS supports CS fallback and SMS over SGs, or the MS is configured to support IMS voice, or both; and\n-\tthe MS supports WB-S1 mode.\nThis IE shall be included if the MS is configured for NAS signalling low priority.\nThe MS shall include this IE if the type of identity in the Mobile identity IE is set to \"TMSI/P-TMSI/M-TMSI\".\nThis IE shall be included if the MS supports extended periodic timer T3312.\nThe MS shall include this IE during a combined attach procedure, if the MS holds a valid LAI and the MS supports EMM combined procedures.\nThe MS shall include this IE if the MS initiates a combined GPRS attach procedure for GPRS services and \"SMS-only service\".\nThe MS shall include this IE during a combined attach procedure if it has a valid TMSI.\nThe MS may include this IE to request the use of PSM.\nThe MS may include this IE to request a particular T3312 value if the T3324 value IE is included.\nThe MS may include this IE to request the use of eDRX.\n",
                            "figures_meta_data": [],
                            "tables": [
                                {
                                    "description": "Table 9.4.1/3GPP TS 24.008: ATTACH REQUEST message content",
                                    "table number": 82,
                                    "summary": "",
                                    "name": ""
                                }
                            ]
                        },
                        {
                            "title": "9.4.2\tAttach accept",
                            "text_content": "This message is sent by the network to the MS to indicate that the corresponding attach request has been accepted. See table 9.4.2/3GPP TS 24.008.\nMessage type:\tATTACH ACCEPT\nSignificance:\t\tdual\nDirection:\t\t\tnetwork to MS\nTable 9.4.2/3GPP TS 24.008: ATTACH ACCEPT message content\n\nThis IE may be included to assign an identity to the MS's GMM context.\nThis IE may be included to indicate a value for the READY timer.\nThis IE may be included to assign a P-TMSI to an MS in case of a GPRS or combined GPRS attach.\nThis IE may be included to assign or unassign a TMSI to an MS in case of a combined GPRS attach.\nThis IE shall be included when IMSI attach for non-GPRS services was not successful during a combined GPRS attach procedure.\nThis IE may be included to indicate a value for the T3302 timer.\nIn A/Gb mode, this IE shall be included by the SGSN in order to indicate the ability to support the Cell Notification.\nThe Equivalent PLMNs information element is included if the network wants to inform the mobile station of equivalent PLMNs.\nThis IE may be included to inform the MS of the support of certain features. If this IE is not included then the respective features are not supported.\nThis IE may be sent by the network. If this IE is sent, the contents of this IE indicates a list of emergency numbers valid within the same country as the PLMN from which this IE is received.\nThis IE may be sent by the network to request the MS to provide feature-related information.\nThis IE may be included to indicate a value for timer T3319.\nThe network may include this IE to indicate a value for timer T3323.\nIf the IE is not included, the MS shall use the default value.\nThe network may include this IE to provide the MS with a longer periodic routing area update timer.\nThe network may include this IE to inform the MS of the support of certain features. If this IE is not included then the MS shall interpret this as a receipt of an information element with all bits of the value part coded as zero.\nThe network shall include the T3324 value IE if:\n-\tthe MS included the T3324 value IE in the ATTACH REQUEST message; and\n-\tthe network supports PSM and accepts the use of PSM.\nThe network shall include the Extended DRX parameters IE if:\n-\tthe MS included the Extended DRX parameters IE in the ATTACH REQUEST message; and\n-\tthe network supports eDRX and accepts the use of eDRX.\nThe network shall include the User Plane integrity indicator IE if the MS shall enable integrity protection of user plane data in LLC layer.\nThe network may include this IE if integrity protection and replay protection of GMM messages is to be used.\nThe network may include this IE if integrity protection and replay protection of GMM messages is to be used.\nThis IE is included in the message when the network wishes to provide a DCN-ID to the MS.\nThis IE is included in the message when the common PLMN identity included in the RAI does not identify the CN operator that has accepted the GPRS attach request in a shared network or in a multi-operator core network (MOCN) with common GERAN.\nThis IE is included if the network needs to indicate whether emergency numbers provided via non-3GPP access can be used to initiate MS detected emergency calls (see 3GPP TS 24.302 [156]). If this IE is not included then the MS shall interpret this as a receipt of an information element with all bits of the value part coded as zero.\n",
                            "figures_meta_data": [],
                            "tables": [
                                {
                                    "description": "Table 9.4.2/3GPP TS 24.008: ATTACH ACCEPT message content",
                                    "table number": 83,
                                    "summary": "",
                                    "name": ""
                                }
                            ]
                        },
                        {
                            "title": "9.4.3\tAttach complete",
                            "text_content": "This message is sent by the MS to the network if at least one of the following conditions is fulfilled:\n-\ta P-TMSI and/or a TMSI was included within the attach accept message; or\n-\tthe network has requested the MS to provide feature-related information.\nSee table 9.4.3/3GPP TS 24.008.\nMessage type:\tATTACH COMPLETE\nSignificance:\t\tdual\nDirection:\t\t\tMS to network\nTable 9.4.3/3GPP TS 24.008: ATTACH COMPLETE message content\n\nThis IE shall be included if the network has requested this information in the attach accept message.\nThis IE shall be included if the network has requested this information in the attach accept message.\n",
                            "figures_meta_data": [],
                            "tables": [
                                {
                                    "description": "Table 9.4.3/3GPP TS 24.008: ATTACH COMPLETE message content",
                                    "table number": 84,
                                    "summary": "",
                                    "name": ""
                                }
                            ]
                        },
                        {
                            "title": "9.4.4\tAttach reject",
                            "text_content": "This message is sent by the network to the MS to indicate that the corresponding attach request has been rejected. See table 9.4.4/3GPP TS 24.008.\nMessage type:\tATTACH REJECT\nSignificance:\tdual\nDirection:\tnetwork to MS\nTable 9.4.4/3GPP TS 24.008: ATTACH REJECT message content\n\nThis IE may be included to indicate a value for the T3302 timer.\nIn Iu mode, if the MS is not attaching for emergency services, the network shall not include this IE if this message is to be sent non-integrity protected. If the MS is attaching for emergency bearer services, the network may include this IE if this message is to be sent non-integrity protected.\nIn Iu mode, if the MS is not attaching for emergency services, the MS shall ignore the contents of this IE if this message is received without integrity protection. If the MS is attaching for emergency bearer services, the MS shall use the received contents of this IE if this message is received without integrity protection.\nIf this IE is not included or if in Iu mode the message is not integrity protected, the MS shall use the default value.\nThis IE may be included when the NAS level mobility management congestion control is active.\n",
                            "figures_meta_data": [],
                            "tables": [
                                {
                                    "description": "Table 9.4.4/3GPP TS 24.008: ATTACH REJECT message content",
                                    "table number": 85,
                                    "summary": "",
                                    "name": ""
                                }
                            ]
                        },
                        {
                            "title": "9.4.5\tDetach request",
                            "text_content": "This message is sent by the network to request the release of a GMM context. See table 9.4.5.1/3GPP TS 24.008.\nMessage type:\tDETACH REQUEST\nSignificance:\t\tdual\nDirection:\t\t\tnetwork to MS\nTable 9.4.5.1/3GPP TS 24.008:DETACH REQUEST message content\n\nThis IE shall be included in case the detach reason has to be indicated to the MS, e.g. due to a failed IMEI check.\nThis message is sent by the MS to request the release of a GMM context. See table 9.4.5.2/3GPP TS 24.008.\nMessage type:\tDETACH REQUEST\nSignificance:\t\tdual\nDirection:\t\t\tMS to network\nTable 9.4.5.2/3GPP TS 24.008:DETACH REQUEST message content\n\nThis IE shall be included by the MS, if the P-TMSI is available.\nThis IE shall be included if the MS has a valid P-TMSI signature.\n",
                            "figures_meta_data": [],
                            "tables": [
                                {
                                    "description": "Table 9.4.5.1/3GPP TS 24.008:DETACH REQUEST message content",
                                    "table number": 86,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 9.4.5.2/3GPP TS 24.008:DETACH REQUEST message content",
                                    "table number": 87,
                                    "summary": "",
                                    "name": ""
                                }
                            ]
                        },
                        {
                            "title": "9.4.6\tDetach accept",
                            "text_content": "This message is sent by the MS to indicate that the detach procedure has been completed. See table 9.4.6.1/3GPP TS 24.008.\nMessage type:\tDETACH ACCEPT\nSignificance:\t\tdual\nDirection:\t\t\tMS to network\nTable 9.4.6.1/3GPP TS 24.008:Detach ACCEPT message content\n\nThis message is sent by the network to indicate that the detach procedure has been completed. See table 9.4.6.2/3GPP TS 24.008.\nMessage type:\tDETACH ACCEPT\nSignificance:\t\tdual\nDirection:\t\t\tnetwork to MS\nTable 9.4.6.2/3GPP TS 24.008:Detach ACCEPT message content\n\n",
                            "figures_meta_data": [],
                            "tables": [
                                {
                                    "description": "Table 9.4.6.1/3GPP TS 24.008:Detach ACCEPT message content",
                                    "table number": 88,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 9.4.6.2/3GPP TS 24.008:Detach ACCEPT message content",
                                    "table number": 89,
                                    "summary": "",
                                    "name": ""
                                }
                            ]
                        },
                        {
                            "title": "9.4.7\tP-TMSI reallocation command",
                            "text_content": "This message is sent by the network to the MS to reallocate a P-TMSI and optionally assign a DCN-ID. See table 9.4.7/3GPP TS 24.008.\nMessage type:\tP-TMSI REALLOCATION COMMAND\nSignificance:\t\tdual\nDirection:\t\t\tnetwork to MS\nTable 9.4.7/3GPP TS 24.008: P-TMSI REALLOCATION COMMAND message content\n\nThis IE may be included to assign an identity to the MS's GMM context.\nThis IE may be included to assign a new DCN-ID to the MS.\n",
                            "figures_meta_data": [],
                            "tables": [
                                {
                                    "description": "Table 9.4.7/3GPP TS 24.008: P-TMSI REALLOCATION COMMAND message content",
                                    "table number": 90,
                                    "summary": "",
                                    "name": ""
                                }
                            ]
                        },
                        {
                            "title": "9.4.8\tP-TMSI reallocation complete",
                            "text_content": "This message is sent by the MS to the network to indicate that reallocation of a P-TMSI has taken place. See table 9.4.8/3GPP TS 24.008.\nMessage type:\tP-TMSI REALLOCATION COMPLETE\nSignificance:\t\tdual\nDirection:\t\t\tMS to network\nTable 9.4.8/3GPP TS 24.008: P-TMSI REALLOCATION COMPLETE message content\n\n",
                            "figures_meta_data": [],
                            "tables": [
                                {
                                    "description": "Table 9.4.8/3GPP TS 24.008: P-TMSI REALLOCATION COMPLETE message content",
                                    "table number": 91,
                                    "summary": "",
                                    "name": ""
                                }
                            ]
                        },
                        {
                            "title": "9.4.9\tAuthentication and ciphering request",
                            "text_content": "This message is sent by the network to the MS to initiate authentication of the MS identity. Additionally, the ciphering mode is set, indicating whether ciphering will be performed or not. See table 9.4.9/3GPP TS 24.008.\nMessage type:\tAUTHENTICATION AND CIPHERING REQUEST\nSignificance:\t\tdual\nDirection:\t\t\tnetwork to MS\nTable 9.4.9/TS 24.008: AUTHENTICATION AND CIPHERING REQUEST message content\n\nThis IE shall only be included if authentication shall be performed.\nThis IE is included if and only if the Authentication parameter RAND is contained in the message.\nThis IE shall be present if and only if the authentication challenge is a UMTS authentication challenge.The presence or absence of this IE defines- in the case of its absence- a GSM authentication challenge or- in the case of its presence- a UMTS authentication challenge.\nThe MS shall ignore the IE if a SIM is inserted in the MS.\nIn UMTS, the MS shall reject the AUTHENTICATION & CIPHERING REQUEST message as specified in subclause 4.7.7.5.1 if this IE is not present and a USIM is inserted in the MS.\nThis IE is included if integrity protection and replay protection of GMM messages is to be used.\nThis IE is included if integrity protection and replay protection of GMM messages is to be used.\nThis IE is included if integrity protection of AUTHENTICATION AND CIPHERING REQUEST message and AUTHENTICATION AND CIPHERING RESPONSEmessages is to be used.\nThis IE is included if integrity protection and replay protection of GMM messages is to be used.\n",
                            "figures_meta_data": [],
                            "tables": [
                                {
                                    "description": "Table 9.4.9/TS 24.008: AUTHENTICATION AND CIPHERING REQUEST message content",
                                    "table number": 92,
                                    "summary": "",
                                    "name": ""
                                }
                            ]
                        },
                        {
                            "title": "9.4.10\tAuthentication and ciphering response",
                            "text_content": "This message is sent by the MS to the network in response to an Authentication and ciphering request message. See table 9.4.10/3GPP TS 24.008.\nMessage type:\tAUTHENTICATION AND CIPHERING RESPONSE\nSignificance:\t\tdual\nDirection:\t\t\tMS to network\nTable 9.4.10/3GPP TS 24.008: AUTHENTICATION AND CIPHERING RESPONSE message content\n\nThis IE is included if authentication was requested within the corresponding authentication and ciphering request message. This IE contains the SRES, if the authentication challenge was for GSM or the RES (all or just the 4 most significant octets of) if it is a UMTS authentication challenge (see also subclause 9.4.10.2)\nThis IE is included if requested within the corresponding authentication and ciphering request message.\nThis IE shall be included if and only if the authentication challenge was a UMTS authentication challenge and the RES parameter is greater than 4 octets in length. It shall contain the least significant remaining bits of the RES (the four most significant octets shall be sent in the Authentication Response Parameter IE (see subclause 9.2.3.1))\nThis IE shall not be included if a SIM is inserted in the MS.\nThis IE is included if integrity protection and replay protection of GMM messages is to be used.\n",
                            "figures_meta_data": [],
                            "tables": [
                                {
                                    "description": "Table 9.4.10/3GPP TS 24.008: AUTHENTICATION AND CIPHERING RESPONSE message content",
                                    "table number": 93,
                                    "summary": "",
                                    "name": ""
                                }
                            ]
                        },
                        {
                            "title": "9.4.10a\tAuthentication and Ciphering Failure",
                            "text_content": "This message is sent by the mobile station to the network to indicate that authentication of the network has failed. See table 9.4.10a/3GPP TS 24.008.\nMessage type:\tAUTHENTICATION AND CIPHERING FAILURE\nSignificance:\t\tdual\nDirection:\t\t\tmobile station to network\nTable 9.4.10a/3GPP TS 24.008: AUTHENTICATION AND CIPHERING FAILURE message content\n\nThis IE shall be sent if and only if the GMM cause was \"Synch failure\". It shall include the response to the authentication challenge from the USIM, which is made up of the AUTS parameter (see 3GPP TS 33.102 [5a]).\n",
                            "figures_meta_data": [],
                            "tables": [
                                {
                                    "description": "Table 9.4.10a/3GPP TS 24.008: AUTHENTICATION AND CIPHERING FAILURE message content",
                                    "table number": 94,
                                    "summary": "",
                                    "name": ""
                                }
                            ]
                        },
                        {
                            "title": "9.4.11\tAuthentication and ciphering reject",
                            "text_content": "This message is sent by the network to the MS to indicate that authentication has failed (and that the receiving MS shall abort all activities). See table 9.4.11/3GPP TS 24.008.\nMessage type:\tAUTHENTICATION AND CIPHERING REJECT\nSignificance:\t\tdual\nDirection:\t\t\tnetwork to MS\nTable 9.4.11/3GPP TS 24.008: AUTHENTICATION AND CIPHERING REJECT message content\n\n",
                            "figures_meta_data": [],
                            "tables": [
                                {
                                    "description": "Table 9.4.11/3GPP TS 24.008: AUTHENTICATION AND CIPHERING REJECT message content",
                                    "table number": 95,
                                    "summary": "",
                                    "name": ""
                                }
                            ]
                        },
                        {
                            "title": "9.4.12\tIdentity request",
                            "text_content": "This message is sent by the network to the MS to request submission of the MS identity according to the specified identity type. See table 9.4.12/3GPP TS 24.008.\nMessage type:\tIDENTITY REQUEST\nSignificance:\t\tdual\nDirection:\t\t\tnetwork to MS\nTable 9.4.12/3GPP TS 24.008: IDENTITY REQUEST message content\n\n",
                            "figures_meta_data": [],
                            "tables": [
                                {
                                    "description": "Table 9.4.12/3GPP TS 24.008: IDENTITY REQUEST message content",
                                    "table number": 96,
                                    "summary": "",
                                    "name": ""
                                }
                            ]
                        },
                        {
                            "title": "9.4.13\tIdentity response",
                            "text_content": "This message is sent by the MS to the network in response to an identity request message providing the requested identity. See table 9.4.13/3GPP TS 24.008.\nMessage type:\tIDENTITY RESPONSE\nSignificance:\t\tdual\nDirection:\t\t\tMS to network\nTable 9.4.13/3GPP TS 24.008: IDENTITY RESPONSE message content\n\n",
                            "figures_meta_data": [],
                            "tables": [
                                {
                                    "description": "Table 9.4.13/3GPP TS 24.008: IDENTITY RESPONSE message content",
                                    "table number": 97,
                                    "summary": "",
                                    "name": ""
                                }
                            ]
                        },
                        {
                            "title": "9.4.14\tRouting area update request",
                            "text_content": "This message is sent by the MS to the network either to request an update of its location file or to request an IMSI attach for non-GPRS services. See table 9.4.14/3GPP TS 24.008.\nMessage type:\tROUTING AREA UPDATE REQUEST\nSignificance:\t\tdual\nDirection:\t\t\tMS to network\nTable 9.4.14/3GPP TS 24.008: ROUTING AREA UPDATE REQUEST message content\n\nThe MS shall include this IE, if the MS received the IE from the network in an ATTACH ACCEPT or ROUTING AREA UPDATE ACCEPT message, or if the TIN indicates \"GUTI\" and the MS holds a valid GUTI.\nThis IE may be included if the MS wants to indicate a preferred value for the READY timer.\nThis IE shall be included if the MS changes the access network from GSM to UMTS, or the MS wants to indicate new DRX parameters to the network.\nThis IE shall be included if the MS performs a combined routing area update and no valid TMSI is available.\nThis IE shall be included by the MS.\nThis IE shall be included by the MS to indicate its capabilities to the network.\nThis IE shall be included by the MS.\nThis IE shall be included if the MS supports at least one positioning method for the provision of location services (LCS) via the PS domain in Gb-mode.\nThis IE shall be included by the MS, if it has MBMS contexts with an SM state different from PDP-INACTIVE.\nThis IE shall be included by the MS, if the TIN indicates \"GUTI\" and the MS holds a valid GUTI and P-TMSI and RAI.\nThis IE shall be included by the MS, if the TIN indicates \"GUTI\" and the MS holds a valid GUTI and P-TMSI and RAI.\nAn MS supporting S1 mode shall include this IE, unless the update type indicates \"periodic update\".\nThis IE shall be included if the MS supports SRVCC to GERAN or UTRAN.\nThis IE shall be included if the MS supports SRVCC to GERAN.\nThis IE shall be included if the MS supports SRVCC to GERAN or UTRAN to indicate its supported speech codecs for CS speech calls.\nThis IE shall be included if and only if:\n-\tthe MS supports CS fallback and SMS over SGs, or the MS is configured to support IMS voice, or both, and\n-\tthe MS supports WB-S1 mode.\nThe MS shall include this IE.\nThis IE shall be included if the MS is configured for NAS signalling low priority.\nThis IE shall be included if the MS supports extended periodic timer T3312.\nThe MS shall include this IE during a combined routing area updating procedure, if the MS holds a valid LAI and the MS supports EMM combined procedures.\nThe MS shall include this IE if the MS initiates a combined routing area updating procedure for GPRS services and \"SMS-only service\".\nThe MS shall include this IE if it has a valid TMSI.\nThe MS may include this IE to request the use of PSM.\nThe MS may include this IE to request a particular T3312 value if T3324 value IE is included.\nThe MS may include this IE to request the use of eDRX.\n",
                            "figures_meta_data": [],
                            "tables": [
                                {
                                    "description": "Table 9.4.14/3GPP TS 24.008: ROUTING AREA UPDATE REQUEST message content",
                                    "table number": 98,
                                    "summary": "",
                                    "name": ""
                                }
                            ]
                        },
                        {
                            "title": "9.4.15\tRouting area update accept",
                            "text_content": "This message is sent by the network to the MS to provide the MS with GPRS mobility management related data in response to a routing area update request message. See table 9.4.15/3GPP TS 24.008.\nMessage type:\trouting area update accept\nSignificance:\t\tdual\nDirection:\t\t\tnetwork to MS\nTable 9.4.15/3GPP TS 24.008: ROUTING AREA UPDATE ACCEPT message content\n\nThis IE may be included to assign an identity to the MS's GMM context.\nThis IE may be included to assign a P-TMSI to an MS in case of a GPRS or combined routing area updating procedure.\nThis IE may be included to assign or unassign a TMSI to a MS in case of a combined routing area updating procedure.\nThis IE shall be included in case of an inter SGSN routing area updating from A/Gb mode to A/Gb mode, or inter SGSN routing area updating from Iu mode to A/Gb mode, or intra SGSN routing area updating from Iu mode to A/Gb mode, if there are PDP contexts that have been activated in LLC acknowledged transfer mode.\nThis IE may be included to indicate a value for the READY timer.\nThis IE shall be included if the combined GPRS routing area updating procedure was successful for GPRS services only.\nThis IE may be included to indicate a value for the T3302 timer.\nIn Iu mode, if the MS is not attached for emergency bearer services, the network shall not include this IE if this message is to be sent non-integrity protected. If the MS is attached for emergency bearer services, the network may include this IE if this message is to be sent non-integrity protected.\nIn Iu mode, if this message is received without integrity protection the MS not attached for emergency bearer services shall ignore the contents of this IE and use the default value. If the MS is attached for emergency bearer services, the MS shall use the received contents of this IE if this message is received without integrity protection.\nIf this IE is not included in the message in A/Gb mode or if in Iu mode this IE is not included in an integrity protected message, the MS shall use the default value.\nIn A/Gb mode, this IE shall be included if by the SGSN in order to indicate the ability to support the Cell Notification.\nThe Equivalent PLMNs information element is included if the network wants to inform the mobile station of equivalent PLMNs.\nThis IE shall be included by the NW.\nThis IE may be included to inform the MS of the support of certain features. If this IE is not included then the respective features are not supported.\nThis IE may be sent by the network. If this IE is sent, the contents of this IE indicates a list of emergency numbers valid within the same MCC as in the cell on which this IE is received.\nThis IE shall be included by the network, if it has MBMS contexts for the MS with an SM state different from PDP-INACTIVE.\nThis IE may be sent by the network to request the MS to provide feature-related information.\nThis IE may be included to indicate a value for timer T3319.\nThe network may include this IE to indicate a value for timer T3323.\nIf the IE is not included, the MS shall use the default value.\nThe network may include this IE to provide the MS with a longer periodic routing area update timer.\nThe network may include this IE to inform the MS of the support of certain features. If this IE is not included then the MS shall interpret this as a receipt of an information element with all bits of the value part coded as zero.\nThe network shall include the T3324 value IE if:\n-\tthe MS included the T3324 value IE in the ROUTING AREA UPDATE REQUEST message; and\n-\tthe network supports PSM and accepts the use of PSM.\nThe network shall include the Extended DRX parameters IE if:\n-\tthe MS included the Extended DRX parameters IE in the ROUTING AREA UPDATE REQUEST message; and\n-\tthe network supports eDRX and accepts the use of eDRX.\nThe network shall include the User Plane integrity indicator IE if the MS shall enable integrity protection of user plane data in LLC layer.\nThe network may include this IE if integrity protection and replay protection of GMM messages is to be used.\nThe network may include this IE if integrity protection and replay protection of GMM messages is to be used.\nThis IE is included in the message when the network wishes to provide a DCN-ID to the MS.\nThis IE is included in the message when the common PLMN identity included in the RAI does not identify the CN operator that has accepted the routing area update request in a shared network or in a multi-operator core network (MOCN) with common GERAN.\nThis IE is included if the network needs to indicate whether emergency numbers provided via non-3GPP access can be used to initiate UE detected emergency calls (see 3GPP TS 24.302 [156]). If this IE is not included then the UE shall interpret this as a receipt of an information element with all bits of the value part coded as zero.\n",
                            "figures_meta_data": [],
                            "tables": [
                                {
                                    "description": "Table 9.4.15/3GPP TS 24.008: ROUTING AREA UPDATE ACCEPT message content",
                                    "table number": 99,
                                    "summary": "",
                                    "name": ""
                                }
                            ]
                        },
                        {
                            "title": "9.4.16\tRouting area update complete",
                            "text_content": "This message shall be sent by the MS to the network in response to a routing area update accept message if at least one of the following conditions is fulfilled:\n-\ta P-TMSI and/or a TMSI has been assigned;\n-\tthere are established LLC connections; or\n-\tthe network has requested the MS to provide feature-related information.\nSee table 9.4.16/3GPP TS 24.008.\nMessage type:\trouting area update complete\nSignificance:\t\tdual\nDirection:\t\t\tMS to network\nTable 9.4.16/3GPP TS 24.008: ROUTING AREA UPDATE COMPLETE message content\n\nThis IE shall be included if the routing area update accept message contained this IE.\nThis IE shall be included if the network has requested this information in the routing area update accept message.\nThis IE shall be included if the network has requested this information in the routing area update accept message.\n",
                            "figures_meta_data": [],
                            "tables": [
                                {
                                    "description": "Table 9.4.16/3GPP TS 24.008: ROUTING AREA UPDATE COMPLETE message content",
                                    "table number": 100,
                                    "summary": "",
                                    "name": ""
                                }
                            ]
                        },
                        {
                            "title": "9.4.17\tRouting area update reject",
                            "text_content": "This message is sent by the network to the MS in order to reject the routing area update procedure. See table 9.4.17/3GPP TS 24.008.\nMessage type:\trouting area update reject\nSignificance:\t\tdual\nDirection:\t\t\tnetwork to MS\nTable 9.4.17/3GPP TS 24.008: ROUTING AREA UPDATE REJECT message content\n\nThis IE may be included to indicate a value for the T3302 timer.\nIn Iu mode, if the MS is not attached for emergency bearer services, the network shall not include this IE if this message is to be sent non-integrity protected. If the MS is attached for emergency bearer services, the network may include this IE if this message is to be sent non-integrity protected.\nIn Iu mode, the MS not attached for emergency bearer services shall ignore the contents of this IE if this message is received without integrity protection. If the MS is attached for emergency bearer services, the MS shall use the received contents of this IE if this message is received without integrity protection.\nIf this IE is not included or if in Iu mode the message is not integrity protected, the MS shall use the default value.\nThis IE may be included when the general NAS level mobility management congestion control is active.\n",
                            "figures_meta_data": [],
                            "tables": [
                                {
                                    "description": "Table 9.4.17/3GPP TS 24.008: ROUTING AREA UPDATE REJECT message content",
                                    "table number": 101,
                                    "summary": "",
                                    "name": ""
                                }
                            ]
                        },
                        {
                            "title": "9.4.18\tGMM Status",
                            "text_content": "This message is sent by the MS or by the network at any time to report certain error conditions listed in clause 8. See table 9.4.18/3GPP TS 24.008.\nMessage type:\tGMM STATUS\nSignificance:\t\tlocal\nDirection:\t\t\tboth\nTable 9.4.18/3GPP TS 24.008: GMM STATUS message content\n\n",
                            "figures_meta_data": [],
                            "tables": [
                                {
                                    "description": "Table 9.4.18/3GPP TS 24.008: GMM STATUS message content",
                                    "table number": 102,
                                    "summary": "",
                                    "name": ""
                                }
                            ]
                        },
                        {
                            "title": "9.4.19\tGMM Information",
                            "text_content": "This message is sent by the network at any time to sent certain information to the MS.\nSee table 9.4.19/3GPP TS 24.008.\nMessage type:\tGMM INFORMATION\nSignificance:\t\tlocal\nDirection:\t\t\tnetwork to MS\nTable 9.4.19/3GPP TS 24.008: GMM INFORMATION message content\n\nThis IE may be sent by the network. If this IE is sent, the contents of this IE indicate the \"full length name of the network\" that the network wishes the mobile station to associate with the MCC and MNC contained in the routing area identification of the current cell.\nThis IE may be sent by the network. If this IE is sent, the contents of this IE indicate the \"abbreviated name of the network\" that the network wishes the mobile station to associate with the MCC and MNC contained in the routing area identification of the cell the MS is currently in.\nThis IE may be sent by the network. The mobile station should assume that this time zone applies to the routing area of the cell the MS is currently in.\nIf the local time zone has been adjusted for Daylight Saving Time, the network shall indicate this by including the IE Network Daylight Saving Time.\nThis IE may be sent by the network. The mobile station should assume that this time zone applies to the routing area the MS is currently in. The mobile station shall not assume that the time information is accurate.\nIf the local time zone has been adjusted for Daylight Saving Time, the network shall indicate this by including the IE Network Daylight Saving Time.\nThis IE may be sent by the network. The contents of this IE indicate the LSA identity of the serving cell.\nThis IE may be sent by the network. If this IE is sent, the contents of this IE indicates the value that has been used to adjust the local time zone.\n",
                            "figures_meta_data": [],
                            "tables": [
                                {
                                    "description": "Table 9.4.19/3GPP TS 24.008: GMM INFORMATION message content",
                                    "table number": 103,
                                    "summary": "",
                                    "name": ""
                                }
                            ]
                        },
                        {
                            "title": "9.4.20\tService Request (Iu mode only)",
                            "text_content": "This message is sent by the MS to transfer to establish logical association between the MS and the network. See table 9.4.20/3GPP TS 24.008.\nMessage type:\tService Request\nSignificance:\t\tdual\nDirection:\t\t\tMS to network\nTable 9.4.20/3GPP TS 24.008: Contents of Service Request message content\n\nThis IE shall be included by the MS.\nThis IE shall be included by the MS, if it has MBMS contexts with an SM state different from PDP-INACTIVE.\nThis IE may be included by the MS when the Service Type is set to \"data\".\nThis IE shall be included if the MS is configured for NAS signalling low priority.\n",
                            "figures_meta_data": [],
                            "tables": [
                                {
                                    "description": "Table 9.4.20/3GPP TS 24.008: Contents of Service Request message content",
                                    "table number": 104,
                                    "summary": "",
                                    "name": ""
                                }
                            ]
                        },
                        {
                            "title": "9.4.21\tService Accept (Iu mode only)",
                            "text_content": "This message is sent by the network in response to a Service Request message. See table 9.4.21/3GPP TS 24.008.\nMessage type:\tService Accept\nSignificance:\t\tdual\nDirection:\t\t\tnetwork to MS\nTable 9.4.21/3GPP TS 24.008: Contents of Service Accept message content\n\nThis IE shall be included by the NW.\nThis IE shall be included by the network, if it has MBMS contexts for the MS with an SM state different from PDP-INACTIVE.\n",
                            "figures_meta_data": [],
                            "tables": [
                                {
                                    "description": "Table 9.4.21/3GPP TS 24.008: Contents of Service Accept message content",
                                    "table number": 105,
                                    "summary": "",
                                    "name": ""
                                }
                            ]
                        },
                        {
                            "title": "9.4.22\tService Reject (Iu mode only)",
                            "text_content": "This message is sent by the network to the MS in order to reject the Service request procedure. See table 9.4.22/3GPP TS 24.008.\nMessage type:\tService Reject\nSignificance:\t\tdual\nDirection:\t\t\tnetwork to MS\nTable 9.4.22/3GPP TS 24.008: Contents of Service Reject message content\n\nThis IE may be included when the general NAS level mobility management congestion control is active.\n",
                            "figures_meta_data": [],
                            "tables": [
                                {
                                    "description": "Table 9.4.22/3GPP TS 24.008: Contents of Service Reject message content",
                                    "table number": 106,
                                    "summary": "",
                                    "name": ""
                                }
                            ]
                        }
                    ]
                },
                {
                    "title": "9.5\tGPRS Session Management Messages",
                    "description": "",
                    "summary": "",
                    "text_content": "",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": [
                        {
                            "title": "9.5.1\tActivate PDP context request",
                            "text_content": "This message is sent by the MS to the network to request activation of a PDP context.\t\nSee table 9.5.1/3GPP TS 24.008.\nMessage type:\tactivate PDP context request\nSignificance:\t\tglobal\nDirection:\t\t\tMS to network\nTable 9.5.1/3GPP TS 24.008: Activate PDP context request message content\n\nThis IE is included in the message when the MS selects a specific external network to be connected to.\nThis IE is included in the message when the MS wishes to transmit (protocol) data (e.g. configuration parameters, error codes or messages/events) to the network and the extended protocol configuration options IE is not supported by the MS or the network or both end-to-end for the PDN connection (see subclause 6.1.3.7).\nThis IE shall be included if the MS supports Network Requested Bearer Control procedures or Local IP address in TFTs and the PDP Type requested is different from non-IP.\nThis IE is included in the message to indicate whether the PDP context request is for a handover from a non-3GPP access network or to activate a PDP context for emergency bearer services.\nThis IE shall be included if the MS is configured for NAS signalling low priority.\nThis information element is used to transfer information associated with network-based IP flow mobility, see 3GPP TS 24.161 [158].\nThis IE is included in the message when the MS wishes to transmit (protocol) data (e.g. configuration parameters, error codes or messages/events) to the network and the extended protocol configuration options IE is supported by the network and the MS end-to-end for the PDN connection (see subclause 6.1.3.7).\nThis IE is included in the message when the MS wishes to transmit the maximum and guaranteed bit rate values to the network and at least one of the values to be transmitted exceeds the maximum bit rate value as specified in the quality of service information element in subclause 10.5.6.5.\n",
                            "figures_meta_data": [],
                            "tables": [
                                {
                                    "description": "Table 9.5.1/3GPP TS 24.008: Activate PDP context request message content",
                                    "table number": 107,
                                    "summary": "",
                                    "name": ""
                                }
                            ]
                        },
                        {
                            "title": "9.5.2\tActivate PDP context accept",
                            "text_content": "This message is sent by the network to the MS to acknowledge activation of a PDP context.\t\nSee table 9.5.2/3GPP TS 24.008.\nMessage type:\tactivate PDP context accept\nSignificance:\t\tglobal\nDirection:\t\t\tnetwork to MS\nTable 9.5.2/3GPP TS 24.008: Activate PDP context Accept message content\n\nThis IE shall be included by the network if the MS has requested the activation of a PDP context with the PDP type IPv4 or IPv6 or IPv4v6 and dynamic addressing.\nThis IE is included in the message when the network wishes to transmit (protocol) data (e.g. configuration parameters, error codes or messages/events) to the MS and the extended protocol configuration options IE is not supported by the MS or the network or both end-to-end for the PDN connection (see subclause 6.1.3.7).\nThis IE is also included to indicate the selected Bearer Control Mode to be applied as well as the network support for Local IP address in TFTs for all active PDP contexts sharing the same PDP Address and APN, if the PDN type is different from Non-IP, and the extended protocol configuration options IE is not supported by the MS or the network or both end-to-end for the PDN connection (see subclause 6.1.3.7).\nThis IE may be included if the network wants to indicate the Packet Flow Identifier associated to the PDP context. The network shall not include this IE if the MS has not indicated PFC procedure support in PFC feature mode field of MS Network Capability IE.\nIf the MS has not indicated PFC procedure support, then it shall ignore this IE, if received.\nThis IE shall be included if the network accepts the requested PDN connectivity with restrictions.\nThe network shall include the connectivity type IE if:\n-\tthe network is configured to indicate when a PDN connection is a LIPA PDN connection; and\n-\tthe present PDN connection is a LIPA PDN connection.\nThis IE shall be included in the message when the network wishes to indicate if the UE is allowed to offload the traffic of the associated PDN connection to WLAN(s), as specified in subclause 10.5.6.20.\nThis information element is used to transfer information associated with network-based IP flow mobility, see 3GPP TS 24.161 [158].\nThis IE is included in the message when the network wishes to transmit (protocol) data (e.g. configuration parameters, error codes or messages/events) to the MS and the extended protocol configuration options IE is supported by both the MS and the network end-to-end for the PDN connection (see subclause 6.1.3.7).\nThis IE is also included to indicate the selected Bearer Control Mode to be applied as well as the network support for Local IP address in TFTs for all active PDP contexts sharing the same PDP Address and APN, if the PDN type is different from Non-IP, and the extended protocol configuration options IE is supported by both the MS and the network end-to-end for the PDN connection (see subclause 6.1.3.7).\nThis IE is included in the message when the network wishes to transmit the maximum and guaranteed bit rate values to the MS and at least one of the values to be transmitted exceeds the maximum bit rate value as specified in the quality of service information element in subclause 10.5.6.5.\n",
                            "figures_meta_data": [],
                            "tables": [
                                {
                                    "description": "Table 9.5.2/3GPP TS 24.008: Activate PDP context Accept message content",
                                    "table number": 108,
                                    "summary": "",
                                    "name": ""
                                }
                            ]
                        },
                        {
                            "title": "9.5.3\tActivate PDP context reject",
                            "text_content": "This message is sent by the network to the MS to reject activation of a PDP context.\t\nSee table 9.5.3/3GPP TS 24.008.\nMessage type:\tactivate PDP context reject\nSignificance:\t\tglobal\nDirection:\t\t\tnetwork to MS\nTable 9.5.3/3GPP TS 24.008: Activate PDP context reject message content\n\nThis IE is included in the message when the network wishes to transmit (protocol) data (e.g. configuration parameters, error codes or messages/events) to the MS and the extended protocol configuration options IE is not supported by the MS or the network or both end-to-end for the PDN connection (see subclause 6.1.3.7).\nThe network may include this IE if the SM cause is not #50 \"PDP type IPv4 only allowed\", #51 \"PDP type IPv6 only allowed\", #57 \"PDP type IPv4v6 only allowed\", #58 \"PDP type non IP only allowed\", nor #65 \"maximum number of PDP contexts reached\", to request a minimum time interval before procedure retry is allowed.\nThe network may include this IE only if the SM cause value is #50 \"PDP type IPv4 only allowed\", #51 \"PDP type IPv6 only allowed\", #57 \"PDP type IPv4v6 only allowed\", #58 \"PDP type non IP only allowed\", or #66 \"requested APN not supported in current RAT and PLMN combination\", or if the network includes the Back-off timer value IE and the SM cause value is not #26 \"insufficient resources\".\nThis information element is used to transfer information associated with network-based IP flow mobility, see 3GPP TS 24.161 [158].\nThis IE is included in the message when the network wishes to transmit (protocol) data (e.g. configuration parameters, error codes or messages/events) to the MS and the extended protocol configuration options IE is supported by both the MS and the network end-to-end for the PDN connection (see subclause 6.1.3.7).\n",
                            "figures_meta_data": [],
                            "tables": [
                                {
                                    "description": "Table 9.5.3/3GPP TS 24.008: Activate PDP context reject message content",
                                    "table number": 109,
                                    "summary": "",
                                    "name": ""
                                }
                            ]
                        },
                        {
                            "title": "9.5.4\tActivate Secondary PDP Context Request",
                            "text_content": "This message is sent by the MS to the network to request activation of an additional PDP context associated with the same PDP address and APN as an already active PDP context. See Table 9.5.4/3GPP TS 24.008.\nMessage type:\t\tactivate SECONDARY PDP context REQUEST\nSignificance:\t\tglobal\nDirection:\t\t\tMS to network\nTable 9.5.4/3GPP TS 24.008: ACTIVATE SECONDARY PDP CONTEXT REQUEST message content\n\nThis IE shall be included if a linked PDP context without TFT has already been activated.\nThis IE is included in the message when the MS wishes to transmit (protocol) data (e.g. configuration parameters, error codes or messages/events) to the network and the extended protocol configuration options IE is not supported by the MS or the network or both end-to-end for the PDN connection (see subclause 6.1.3.7).\nThis IE shall be included if the MS is configured for NAS signalling low priority.\nThis information element is used to transfer information associated with network-based IP flow mobility, see 3GPP TS 24.161 [158].\nThis IE is included in the message when the MS wishes to transmit (protocol) data (e.g. configuration parameters, error codes or messages/events) to the network and the extended protocol configuration options IE is supported by both the MS and the network end-to-end for the PDN connection (see subclause 6.1.3.7).\nThis IE is included in the message when the MS wishes to transmit the maximum and guaranteed bit rate values to the network and at least one of the values to be transmitted exceeds the maximum bit rate value as specified in the quality of service information element in subclause 10.5.6.5.\n",
                            "figures_meta_data": [],
                            "tables": [
                                {
                                    "description": "Table 9.5.4/3GPP TS 24.008: ACTIVATE SECONDARY PDP CONTEXT REQUEST message content",
                                    "table number": 110,
                                    "summary": "",
                                    "name": ""
                                }
                            ]
                        },
                        {
                            "title": "9.5.5\tActivate Secondary PDP Context Accept",
                            "text_content": "This message is sent by the network to the MS to acknowledge activation of an additional PDP context associated with the same PDP address and APN as an already active PDP context. See Table 9.5.5/3GPP TS 24.008.\nMessage type:\t\tactivate SECONDARY PDP context accept\nSignificance:\t\tglobal\nDirection:\t\t\tnetwork to MS\nTable 9.5.5/3GPP TS 24.008: Activate secondary PDP context Accept message content\n\nThis IE may be included if the network wants to indicate the Packet Flow Identifier associated to the PDP context. The network shall not include this IE if the MS has not indicated PFC procedure support in PFC feature mode field of MS Network Capability IE.\nIf the MS has not indicated PFC procedure support, then it shall ignore this IE, if received.\nThis IE is included in the message when the network wishes to transmit (protocol) data (e.g. configuration parameters, error codes or messages/events) to the MS and the extended protocol configuration options IE is not supported by the MS or the network or both end-to-end for the PDN connection (see subclause 6.1.3.7).\nThis IE shall be included in the message when the network wishes to indicate if the UE is allowed to offload the traffic of the associated PDN connection to WLAN(s), as specified in subclause 10.5.6.20.\nThis information element is used to transfer information associated with network-based IP flow mobility, see 3GPP TS 24.161 [158].\nThis IE is included in the message when the network wishes to transmit (protocol) data (e.g. configuration parameters, error codes or messages/events) to the MS and the extended protocol configuration options IE is supported by both the MS and the network end-to-end for the PDN connection (see subclause 6.1.3.7).\nThis IE is included in the message when the network wishes to transmit the maximum and guaranteed bit rate values to the MS and at least one of the values to be transmitted exceeds the maximum bit rate value as specified in the quality of service information element in subclause 10.5.6.5.\n",
                            "figures_meta_data": [],
                            "tables": [
                                {
                                    "description": "Table 9.5.5/3GPP TS 24.008: Activate secondary PDP context Accept message content",
                                    "table number": 111,
                                    "summary": "",
                                    "name": ""
                                }
                            ]
                        },
                        {
                            "title": "9.5.6\tActivate Secondary PDP Context Reject",
                            "text_content": "This message is sent by the network to the MS to reject activation of an additional PDP context associated with the same PDP address and APN as an already active PDP context. See Table 9.5.6/3GPP TS 24.008.\nMessage type:\tactivate SECONDARY PDP context reject\nSignificance:\t\tglobal\nDirection:\t\t\tnetwork to MS\nTable 9.5.6/3GPP TS 24.008: Activate SECONDARY PDP context reject message content\n\nThis IE is included in the message when the network wishes to transmit (protocol) data (e.g. configuration parameters, error codes or messages/events) to the MS and the extended protocol configuration options IE is not supported by the MS or the network or both end-to-end for the PDN connection (see subclause 6.1.3.7).\nThe network may include this IE if the SM cause is not #65 \"maximum number of PDP contexts reached\", to request a minimum time interval before procedure retry is allowed.\nThe network may include this IE only if it includes the Back-off timer value IE and the SM cause value is not #26 \"insufficient resources\".\nThis information element is used to transfer information associated with network-based IP flow mobility, see 3GPP TS 24.161 [158].\nThis IE is included in the message when the network wishes to transmit (protocol) data (e.g. configuration parameters, error codes or messages/events) to the MS and the extended protocol configuration options IE is supported by both the MS and the network end-to-end for the PDN connection (see subclause 6.1.3.7).\n",
                            "figures_meta_data": [],
                            "tables": [
                                {
                                    "description": "Table 9.5.6/3GPP TS 24.008: Activate SECONDARY PDP context reject message content",
                                    "table number": 112,
                                    "summary": "",
                                    "name": ""
                                }
                            ]
                        },
                        {
                            "title": "9.5.7\tRequest PDP context activation",
                            "text_content": "This message is sent by the network to the MS to initiate activation of a PDP context.\t\nSee table 9.5.7/3GPP TS 24.008.\nMessage type:\trequest PDP context activation\nSignificance:\t\tglobal\nDirection:\t\t\tnetwork to MS\nTable 9.5.7/3GPP TS 24.008: request PDP context activation message content\n\nThis IE is included in the message when the network wishes to transmit (protocol) data (e.g. configuration parameters, error codes or messages/events) to the MS and the extended protocol configuration options IE is not supported by the MS or the network or both end-to-end for the PDN connection (see subclause 6.1.3.7).\nThis information element is used to transfer information associated with network-based IP flow mobility, see 3GPP TS 24.161 [158].\nThis IE is included in the message when the network wishes to transmit (protocol) data (e.g. configuration parameters, error codes or messages/events) to the MS and the extended protocol configuration options IE is supported by both the MS and the network end-to-end for the PDN connection (see subclause 6.1.3.7).\n",
                            "figures_meta_data": [],
                            "tables": [
                                {
                                    "description": "Table 9.5.7/3GPP TS 24.008: request PDP context activation message content",
                                    "table number": 113,
                                    "summary": "",
                                    "name": ""
                                }
                            ]
                        },
                        {
                            "title": "9.5.8\tRequest PDP context activation reject",
                            "text_content": "This message is sent by the MS to the network to reject initiation of a PDP context activation.\t\nSee table 9.5.8/3GPP TS 24.008.\nMessage type:\trequest PDP context ACTIVATION reject\nSignificance:\t\tglobal\nDirection:\t\t\tMS to network\nTable 9.5.8/3GPP TS 24.008: request PDP context ACTIVATION reject message content\n\nThis IE is included in the message when the MS wishes to transmit (protocol) data (e.g. configuration parameters, error codes or messages/events) to the network and the extended protocol configuration options IE is not supported by the MS or the network or both end-to-end for the PDN connection (see subclause 6.1.3.7).\nThis information element is used to transfer information associated with network-based IP flow mobility, see 3GPP TS 24.161 [158].\nThis IE is included in the message when the MS wishes to transmit (protocol) data (e.g. configuration parameters, error codes or messages/events) to the network and the extended protocol configuration options IE is supported by both the MS and the network end-to-end for the PDN connection (see subclause 6.1.3.7).\n",
                            "figures_meta_data": [],
                            "tables": [
                                {
                                    "description": "Table 9.5.8/3GPP TS 24.008: request PDP context ACTIVATION reject message content",
                                    "table number": 114,
                                    "summary": "",
                                    "name": ""
                                }
                            ]
                        },
                        {
                            "title": "9.5.9\tModify PDP context request (Network to MS direction)",
                            "text_content": "This message is sent by the network to the MS to request modification of an active PDP context. See table 9.5.9/3GPP TS 24.008.\nMessage type:\tmodify PDP context request (NETWORK to MS Direction)\nSignificance:\t\tglobal\nDirection:\t\t\tnetwork to MS\nTable 9.5.9/3GPP TS 24.008: modify PDP context request (Network to MS direction) message content\n\nIf the MS requested external PDP address allocation at PDP context activation via an APN and this was confirmed by the network in the ACTIVATE PDP CONTEXT ACCEPT message, then the network shall include the PDP address IE in the MODIFY PDP CONTEXT REQUEST message once the address has been actually allocated, in order to update the PDP context in the MS.\nThis IE may be included if the network wants to indicate the Packet Flow Identifier associated to the PDP context. The network shall not include this IE if the MS has not indicated PFC procedure support in PFC feature mode field of MS Network Capability IE.\nIf this IE is not included, the MS shall keep the old Packet Flow Identifier value. If the MS has not indicated PFC procedure support, then it shall ignore this IE, if received.\nThis IE is included in the message when the network wishes to transmit (protocol) data (e.g. configuration parameters, error codes or messages/events) to the MS and the extended protocol configuration options IE is not supported by both the MS and the network end-to-end for the PDN connection (see subclause 6.1.3.7). This IE is also included to indicate the selected Bearer Control Mode to be applied when the extended protocol configuration options IE is not supported by the MS or the network or both end-to-end for the PDN connection (see subclause 6.1.3.7).\nThis IE is included in the message to provide the MS with uplink and downlink packet filters when the protocol configuration options information element indicates the selected Bearer Control Mode 'MS/NW'.\nThis IE shall be included in the message when the network wishes to indicate if the UE is allowed to offload the traffic of the associated PDN connection to WLAN(s), as specified in subclause 10.5.6.20.\nThis information element is used to transfer information associated with network-based IP flow mobility, see 3GPP TS 24.161 [158].\nThis IE is included in the message when the network wishes to transmit (protocol) data (e.g. configuration parameters, error codes or messages/events) to the MS and the extended protocol configuration options IE is supported by both the MS and the network end-to-end for the PDN connection (see subclause 6.1.3.7). This IE is also included to indicate the selected Bearer Control Mode to be applied when the extended protocol configuration options IE is supported by both the MS and the network end-to-end for the PDN connection (see subclause 6.1.3.7).\nThis IE is included in the message when the network wishes to transmit the maximum and guaranteed bit rate values to the MS and at least one of the values to be transmitted exceeds the maximum bit rate value as specified in the quality of service information element in subclause 10.5.6.5.\n",
                            "figures_meta_data": [],
                            "tables": [
                                {
                                    "description": "Table 9.5.9/3GPP TS 24.008: modify PDP context request (Network to MS direction) message content",
                                    "table number": 115,
                                    "summary": "",
                                    "name": ""
                                }
                            ]
                        },
                        {
                            "title": "9.5.10\tModify PDP context request (MS to network direction)",
                            "text_content": "This message is sent by the MS to the network to request modification of an active PDP context. See table 9.5.10/3GPP TS 24.008.\nMessage type:\tmodify PDP context request (MS TO network direction)\nSignificance:\t\tglobal\nDirection:\t\t\tMS to network\nTable 9.5.10/3GPP TS 24.008: modify PDP context request (MS to network direction) message content\n\nThis IE may be included in the message to request a new LLC SAPI if a new QoS is requested.\nThis IE may be included in the message to request a modification of the QoS.\nThis IE may be included in the message to request a new TFT or modification of an existing TFT or transfer extra parameters to the network (e.g. the Authorization Token; see 3GPP TS 24.229 [95]).\nThis IE is included in the message when the MS wishes to transmit (protocol) data (e.g. configuration parameters, error codes or messages/events) to the network and the extended protocol configuration options IE is not supported by the MS or the network or both end-to-end for the PDN connection (see subclause 6.1.3.7).\nThis IE shall be included if the MS is configured for NAS signalling low priority.\nThis information element is used to transfer information associated with network-based IP flow mobility, see 3GPP TS 24.161 [158].\nThis IE is included in the message when the MS wishes to transmit (protocol) data (e.g. configuration parameters, error codes or messages/events) to the network and the extended protocol configuration options IE is supported by both the MS and the network end-to-end for the PDN connection (see subclause 6.1.3.7).\nThis IE is included in the message when the MS wishes to transmit the maximum and guaranteed bit rate values to the network and at least one of the values to be transmitted exceeds the maximum bit rate value as specified in the quality of service information element in subclause 10.5.6.5.\n",
                            "figures_meta_data": [],
                            "tables": [
                                {
                                    "description": "Table 9.5.10/3GPP TS 24.008: modify PDP context request (MS to network direction) message content",
                                    "table number": 116,
                                    "summary": "",
                                    "name": ""
                                }
                            ]
                        },
                        {
                            "title": "9.5.11\tModify PDP context accept (MS to network direction)",
                            "text_content": "This message is sent by the MS to the network to acknowledge the modification of an active PDP context. See table 9.5.11/3GPP TS 24.008.\nMessage type:\tmodify PDP context accept (MS to network direction)\nSignificance:\t\tglobal\nDirection:\t\t\tMS to network\nTable 9.5.11/3GPP TS 24.008: modify PDP context accept (MS to network direction) message content\n\nThis IE is included in the message when the MS wishes to transmit (protocol) data (e.g. configuration parameters, error codes or messages/events) to the network and the extended protocol configuration options IE is not supported by the MS or the network or both end-to-end for the PDN connection (see subclause 6.1.3.7).\nThis information element is used to transfer information associated with network-based IP flow mobility, see 3GPP TS 24.161 [158].\nThis IE is included in the message when the MS wishes to transmit (protocol) data (e.g. configuration parameters, error codes or messages/events) to the network and the extended protocol configuration options IE is supported by both the MS and the network end-to-end for the PDN connection (see subclause 6.1.3.7).\n",
                            "figures_meta_data": [],
                            "tables": [
                                {
                                    "description": "Table 9.5.11/3GPP TS 24.008: modify PDP context accept (MS to network direction) message content",
                                    "table number": 117,
                                    "summary": "",
                                    "name": ""
                                }
                            ]
                        },
                        {
                            "title": "9.5.12\tModify PDP context accept (Network to MS direction)",
                            "text_content": "This message is sent by the network to the MS to acknowledge the modification of an active PDP context. See table 9.5.12/3GPP TS 24.008.\nMessage type:\tmodify PDP context accept (NeTWORK to ms direction)\nSignificance:\t\tglobal\nDirection:\t\t\tNetwork to MS\nTable 9.5.12/3GPP TS 24.008: modify PDP context ACCEPT (NETWORK to MS direction) message content\n\nThis IE is included in the message if the network assigns a new QoS.\nThis IE is included in the message if the network assigns a new LLC SAPI.\nThis IE is included in the message only if the network modifies the radio priority.\nThis IE may be included if the network wants to indicate the Packet Flow Identifier associated to the PDP context. The network shall not include this IE if the MS has not indicated PFC procedure support in PFC feature mode field of MS Network Capability IE.\nIf this IE is not included, the MS shall keep the old Packet Flow Identifier value.If the MS has not indicated PFC procedure support, then it shall ignore this IE, if received.\nThis IE is included in the message when the network wishes to transmit (protocol) data (e.g. configuration parameters, error codes or messages/events) to the MS and the extended protocol configuration options IE is not supported by the MS or the network or both end-to-end for the PDN connection (see subclause 6.1.3.7).\nThis IE shall be included in the message when the network wishes to indicate if the UE is allowed to offload the traffic of the associated PDN connection to WLAN(s), as specified in subclause 10.5.6.20.\nThis information element is used to transfer information associated with network-based IP flow mobility, see 3GPP TS 24.161 [158].\nThis IE is included in the message when the network wishes to transmit (protocol) data (e.g. configuration parameters, error codes or messages/events) to the MS and the extended protocol configuration options IE is supported by both the MS and the network end-to-end for the PDN connection (see subclause 6.1.3.7).\nThis IE is included in the message when the network wishes to transmit the maximum and guaranteed bit rate values to the MS and at least one of the values to be transmitted exceeds the maximum bit rate value as specified in the quality of service information element in subclause 10.5.6.5.\n",
                            "figures_meta_data": [],
                            "tables": [
                                {
                                    "description": "Table 9.5.12/3GPP TS 24.008: modify PDP context ACCEPT (NETWORK to MS direction) message content",
                                    "table number": 118,
                                    "summary": "",
                                    "name": ""
                                }
                            ]
                        },
                        {
                            "title": "9.5.13\tModify PDP Context Reject",
                            "text_content": "This message is sent by the network or the MS to reject a modification of an active PDP context. See Table 9.5.13/3GPP TS 24.008.\nMessage type:\tMODIFY PDP context reject\nSignificance:\t\tglobal\nDirection:\t\t\tboth\nTable 9.5.13/3GPP TS 24.008: MODIFY PDP context reject message content\n\nThis IE is included in the message when the network wishes to transmit (protocol) data (e.g. configuration parameters, error codes or messages/events) to the MS and the extended protocol configuration options IE is not supported by the MS or the network or both end-to-end for the PDN connection (see subclause 6.1.3.7).\nThe network may include this IE to request a minimum time interval before procedure retry is allowed.\nThe network may include this IE only if it includes the Back-off timer value IE and the SM cause value is not #26 \"insufficient resources\".\nThis information element is used to transfer information associated with network-based IP flow mobility, see 3GPP TS 24.161 [158].\nThis IE is included in the message when the network wishes to transmit (protocol) data (e.g. configuration parameters, error codes or messages/events) to the MS and the extended protocol configuration options IE is supported by both the MS and the network end-to-end for the PDN connection (see subclause 6.1.3.7).\n",
                            "figures_meta_data": [],
                            "tables": [
                                {
                                    "description": "Table 9.5.13/3GPP TS 24.008: MODIFY PDP context reject message content",
                                    "table number": 119,
                                    "summary": "",
                                    "name": ""
                                }
                            ]
                        },
                        {
                            "title": "9.5.14\tDeactivate PDP context request",
                            "text_content": "This message is sent to request deactivation of an active PDP context or an active MBMS context. See table 9.5.14/3GPP TS 24.008.\nMessage type:\tdeactivate PDP context request\nSignificance:\t\tglobal\nDirection:\t\t\tboth\nTable 9.5.14/3GPP TS 24.008: deactivate PDP context request message content\n\nThis IE is included in the message in order to indicate whether only the PDP context associated with this specific TI or all active PDP contexts sharing the same PDP address and APN as the PDP context associated with this specific TI shall be deactivated.\nIf this IE is received for an MBMS context, it shall be ignored by the receiver.\nThis IE is included in the message when the MS or the network wishes to transmit (protocol) data (e.g. configuration parameters, error codes or messages/events) to the peer entity and the extended protocol configuration options IE is not supported by the MS or the network or both end-to-end for the PDN connection (see subclause 6.1.3.7).\nIf this IE is received for an MBMS context, it shall be ignored by the receiver.\nThis IE is included in the message when the MS or the network wishes to transmit MBMS bearer related (protocol) data (e.g. configuration parameters, error codes or messages/events) to the peer entity for an MBMS context.\nIf the IE is received for a PDP context, it shall be ignored by the receiver.\nThe network may include this IE if the ESM cause is #26 \"insufficient resources\".\nThis IE shall be included in the message when the network wishes to indicate if the UE is allowed to offload the traffic of the associated PDN connection to WLAN(s), as specified in subclause 10.5.6.20. If the SGSN wishes to deactivate all PDP contexts of a PDN connection, SGSN shall not include this IE.\nThis IE is included in the message when the MS or the network wishes to transmit (protocol) data (e.g. configuration parameters, error codes or messages/events) to the peer entity and the extended protocol configuration options IE is supported by the MS or the network or both end-to-end for the PDN connection (see subclause 6.1.3.7).\nIf this IE is received for an MBMS context, it shall be ignored by the receiver.\n",
                            "figures_meta_data": [],
                            "tables": [
                                {
                                    "description": "Table 9.5.14/3GPP TS 24.008: deactivate PDP context request message content",
                                    "table number": 120,
                                    "summary": "",
                                    "name": ""
                                }
                            ]
                        },
                        {
                            "title": "9.5.15\tDeactivate PDP context accept",
                            "text_content": "This message is sent to acknowledge deactivation of the PDP context requested in the corresponding Deactivate PDP context request message. See table 9.5.15/3GPP TS 24.008.\nMessage type:\tdeactivate PDP context accept\nSignificance:\t\tglobal\nDirection:\t\t\tboth\nTable 9.5.15/3GPP TS 24.008: deactivate PDP context accept message content\n\nThis IE is included in the message when the MS or the network wishes to transmit (protocol) data (e.g. configuration parameters, error codes or messages/events) to the peer entity and the extended protocol configuration options IE is not supported by the MS or the network or both end-to-end for the PDN connection (see subclause 6.1.3.7).\nIf this IE is received for an MBMS context, it shall be ignored by the receiver.\nThis IE is included in the message when the MS or the network wishes to transmit MBMS bearer related (protocol) data (e.g. configuration parameters, error codes or messages/events) to the peer entity for an MBMS context.\nIf the IE is received for a PDP context, it shall be ignored by the receiver.\nThis IE is included in the message when the MS or the network wishes to transmit (protocol) data (e.g. configuration parameters, error codes or messages/events) to the peer entity and the extended protocol configuration options IE is supported by both the MS and the network end-to-end for the PDN connection (see subclause 6.1.3.7).\nIf this IE is received for an MBMS context, it shall be ignored by the receiver.\n",
                            "figures_meta_data": [],
                            "tables": [
                                {
                                    "description": "Table 9.5.15/3GPP TS 24.008: deactivate PDP context accept message content",
                                    "table number": 121,
                                    "summary": "",
                                    "name": ""
                                }
                            ]
                        },
                        {
                            "title": "9.5.15a\tRequest Secondary PDP Context Activation",
                            "text_content": "This message is sent by the network to the MS to request activation of a secondary PDP context.\t\nSee table 9.5.15a/3GPP TS 24.008.\nMessage type:\trequest SECONDARY PDP context activation\nSignificance:\t\tglobal\nDirection:\t\t\tnetwork to MS\nTable 9.5.15a/3GPP TS 24.008: request SeCONDARY PDP context activation message content\n\nThe network shall include this IE. This IE provides the MS with uplink and downlink packet filters.\nThis IE is included in the message when the network wishes to transmit (protocol) data (e.g. configuration parameters, error codes or messages/events) to the MS end-to-end for the PDN connection (see subclause 6.1.3.7).\nThis IE shall be included in the message when the network wishes to indicate if the UE is allowed to offload the traffic of the associated PDN connection to WLAN(s), as specified in subclause 10.5.6.20.\nThis information element is used to transfer information associated with network-based IP flow mobility, see 3GPP TS 24.161 [158].\nThis IE is included in the message when the network wishes to transmit (protocol) data (e.g. configuration parameters, error codes or messages/events) to the MS and the extended protocol configuration options IE is supported by both the MS and the network end-to-end for the PDN connection (see subclause 6.1.3.7).\nThis IE is included in the message when the network wishes to transmit the maximum and guaranteed bit rate values to the MS and at least one of the values to be transmitted exceeds the maximum bit rate value as specified in the quality of service information element in subclause 10.5.6.5.\n",
                            "figures_meta_data": [],
                            "tables": [
                                {
                                    "description": "Table 9.5.15a/3GPP TS 24.008: request SeCONDARY PDP context activation message content",
                                    "table number": 122,
                                    "summary": "",
                                    "name": ""
                                }
                            ]
                        },
                        {
                            "title": "9.5.15b\tRequest Secondary PDP Context Activation Reject",
                            "text_content": "This message is sent by the MS to the network to reject the request of a secondary PDP context activation.\t\nSee table 9.5.15b/3GPP TS 24.008.\nMessage type:\trequest SECONDARY PDP context ACTIVATION reject\nSignificance:\t\tglobal\nDirection:\t\t\tMS to network\nTable 9.5.15b/3GPP TS 24.008: request SECONDARY PDP context ACTIVATION reject message content\n\nThis IE is included in the message when the MS wishes to transmit (protocol) data (e.g. configuration parameters, error codes or messages/events) to the network end-to-end for the PDN connection (see subclause 6.1.3.7).\nThis information element is used to transfer information associated with network-based IP flow mobility, see 3GPP TS 24.161 [158].\nThis IE is included in the message when the MS wishes to transmit (protocol) data (e.g. configuration parameters, error codes or messages/events) to the network and the extended protocol configuration options IE is supported by both the MS and the network end-to-end for the PDN connection (see subclause 6.1.3.7).\n",
                            "figures_meta_data": [],
                            "tables": [
                                {
                                    "description": "Table 9.5.15b/3GPP TS 24.008: request SECONDARY PDP context ACTIVATION reject message content",
                                    "table number": 123,
                                    "summary": "",
                                    "name": ""
                                }
                            ]
                        },
                        {
                            "title": "9.5.16\tVoid",
                            "text_content": "",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "9.5.16a\tNotification",
                            "text_content": "This message is sent by the network to inform the MS about events which are relevant for the upper layer using the PDP context or having requested a session management procedure. See table 9.5.16a/3GPP TS 24.008.\nMessage type:\tNOTIFICATION\nSignificance:\t\tlocal\nDirection:\t\t\tnetwork to MS\nTable 9.5.16a/3GPP TS 24.008: NOTIFICATION message content\n\n",
                            "figures_meta_data": [],
                            "tables": [
                                {
                                    "description": "Table 9.5.16a/3GPP TS 24.008: NOTIFICATION message content",
                                    "table number": 124,
                                    "summary": "",
                                    "name": ""
                                }
                            ]
                        },
                        {
                            "title": "9.5.17\tVoid",
                            "text_content": "",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "9.5.18\tVoid",
                            "text_content": "",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "9.5.19\tVoid",
                            "text_content": "",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "9.5.20\tVoid",
                            "text_content": "",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "9.5.21\tSM Status",
                            "text_content": "This message is sent by the network or the MS to pass information on the status of the indicated context and report certain error conditions (eg. as listed in clause 8). See table 9.5.21/3GPP TS 24.008.\nMessage type:\tSM Status\nSignificance:\t\tlocal\nDirection:\t\t\tboth\nTable 9.5.21/3GPP TS 24.008: SM STATUS message content\n\n",
                            "figures_meta_data": [],
                            "tables": [
                                {
                                    "description": "Table 9.5.21/3GPP TS 24.008: SM STATUS message content",
                                    "table number": 125,
                                    "summary": "",
                                    "name": ""
                                }
                            ]
                        },
                        {
                            "title": "9.5.22\tActivate MBMS Context Request",
                            "text_content": "This message is sent by the MS to the network as an explicit response to a Request MBMS Context Activation message\nSee table 9.5.22/3GPP TS 24.008.\nMessage type:\tactivate MBMS context REQUEST\nSignificance:\t\tglobal\nDirection:\t\t\tMS to network\nTable 9.5.22 : Activate MBMS context request message content\n\nNOTE:\tThe MBMS NSAPI will be used in Iu mode when the network chooses a point-to-point MBMS bearer for the transfer of MBMS data in the user plane.\nThis IE is included in the message when the MS wishes to transmit MBMS bearer related (protocol) data (e.g. configuration parameters, error codes or messages/events) to the peer entity for an MBMS context.\nThis IE shall be included if the MS is configured for NAS signalling low priority.\n",
                            "figures_meta_data": [],
                            "tables": [
                                {
                                    "description": "Table 9.5.22 : Activate MBMS context request message content",
                                    "table number": 126,
                                    "summary": "",
                                    "name": ""
                                }
                            ]
                        },
                        {
                            "title": "9.5.23\tActivate MBMS Context Accept",
                            "text_content": "This message is sent by the network to the MS to acknowledge activation of an MBMS context.\nSee table 9.5.23/3GPP TS 24.008.\nMessage type:\tactivate MBMS context ACCEPT\nSignificance:\t\tglobal\nDirection:\t\t\tnetwork to MS\nTable 9.5.23 : Activate MBMS context Accept message content\n\nThis IE is included in the message when the network wishes to transmit MBMS bearer related (protocol) data (e.g. configuration parameters, error codes or messages/events) to the peer entity for an MBMS context.\n",
                            "figures_meta_data": [],
                            "tables": [
                                {
                                    "description": "Table 9.5.23 : Activate MBMS context Accept message content",
                                    "table number": 127,
                                    "summary": "",
                                    "name": ""
                                }
                            ]
                        },
                        {
                            "title": "9.5.24\tActivate MBMS Context Reject",
                            "text_content": "This message is sent by the network to the MS to reject activation of a MBMS context.\nSee table 9.5.24/3GPP TS 24.008.\nMessage type:\tactivate MBMS context reject\nSignificance:\t\tglobal\nDirection:\t\t\tnetwork to MS\nTable 9.5.24 : Activate MBMS context reject message content\n\nThis IE is included in the message when the network wishes to transmit MBMS bearer related (protocol) data (e.g. configuration parameters, error codes or messages/events) to the peer entity for an MBMS context.\nThe network may include this IE to request a minimum time interval before procedure retry is allowed.\nThe network may include this IE only if the network includes the Back-off timer value IE and the SM cause value is not #26 \"insufficient resources\".\n",
                            "figures_meta_data": [],
                            "tables": [
                                {
                                    "description": "Table 9.5.24 : Activate MBMS context reject message content",
                                    "table number": 128,
                                    "summary": "",
                                    "name": ""
                                }
                            ]
                        },
                        {
                            "title": "9.5.25\tRequest MBMS Context Activation",
                            "text_content": "This message is sent by the network to the MS to initiate activation of an MBMS context.\nSee table 9.5.25/3GPP TS 24.008.\nMessage type:\trequest MBMS context activation\nSignificance:\t\tglobal\nDirection:\t\t\tnetwork to MS\nTable 9.5.25 : request MBMS context activation message content\n\nThis IE is included in the message to allow the MS to associate the MBMS context with the PDP context over which the IGMP/MLD join message was sent.\nThis IE is included in the message when the network wishes to transmit MBMS bearer related (protocol) data (e.g. configuration parameters, error codes or messages/events) to the peer entity for an MBMS context.\n",
                            "figures_meta_data": [],
                            "tables": [
                                {
                                    "description": "Table 9.5.25 : request MBMS context activation message content",
                                    "table number": 129,
                                    "summary": "",
                                    "name": ""
                                }
                            ]
                        },
                        {
                            "title": "9.5.26\tRequest MBMS Context Activation Reject",
                            "text_content": "This message is sent by the MS to the network to reject initiation of an MBMS context activation.\nSee table 9.5.26/3GPP TS 24.008.\nMessage type:\trequest MBMS context ACTIVATION reject\nSignificance:\t\tglobal\nDirection:\t\t\tMS to network\nTable 9.5.26 : request MBMS context ACTIVATION reject message content\n\nThis IE is included in the message when the MS wishes to transmit MBMS bearer related (protocol) data (e.g. configuration parameters, error codes or messages/events) to the peer entity for an MBMS context.\n\n",
                            "figures_meta_data": [],
                            "tables": [
                                {
                                    "description": "Table 9.5.26 : request MBMS context ACTIVATION reject message content",
                                    "table number": 130,
                                    "summary": "",
                                    "name": ""
                                }
                            ]
                        }
                    ]
                }
            ]
        },
        {
            "title": "10\tGeneral message format and information elements coding",
            "description": "The figures and text in this clause describe the Information Elements contents.\n",
            "summary": "",
            "tables": [],
            "figures_meta_data": [],
            "subsections": [
                {
                    "title": "10.1\tOverview",
                    "description": "",
                    "summary": "",
                    "text_content": "Within the Layer 3 protocols defined in 3GPP TS 24.008, every message is a standard L3 message as defined in 3GPP TS 24.007 [20]. This means that the message consists of the following parts:\na)\tprotocol discriminator;\nb)\ttransaction identifier;\nc)\tmessage type;\nd)\tother information elements, as required.\nThis organization is illustrated in the example shown in figure 10.1/3GPP TS 24.008.\n\nThe figure depicts a general message organization example for 3GPP TS 24.008, illustrating the message structure and its components.\nFigure 10.1/3GPP TS 24.008 General message organization example\nUnless specified otherwise in the message descriptions of clause 9, a particular information element shall not be present more than once in a given message.\nThe term \"default\" implies that the value defined shall be used in the absence of any assignment, or that this value allows negotiation of alternative values in between the two peer entities.\nWhen a field extends over more than one octet, the order of bit values progressively decreases as the octet number increases. The least significant bit of the field is represented by the lowest numbered bit of the highest numbered octet of the field.\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "10.2\tProtocol Discriminator",
                    "description": "",
                    "summary": "",
                    "text_content": "The Protocol Discriminator (PD) and its use are defined in 3GPP TS 24.007 [20].\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "10.3\tSkip indicator and transaction identifier",
                    "description": "",
                    "summary": "",
                    "text_content": "",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": [
                        {
                            "title": "10.3.1\tSkip indicator",
                            "text_content": "Bits 5 to 8 of the first octet of every Mobility Management message and GPRS MobilityManagement message contains the skip indicator.\nWith the exception of the following cases for a shared GERAN network in A/Gb mode,\n-\twhen the MS is sending a LOCATION UPDATING REQUEST, CM SERVICE REQUEST, IMSI DETACH INDICATION or CM RE-ESTABLISHMENT REQUEST message; or\n-\twhen the network is receiving a LOCATION UPDATING REQUEST, PAGING RESPONSE, CM SERVICE REQUEST, IMSI DETACH INDICATION or CM RE-ESTABLISHMENT REQUEST message,\nthe skip indicator field shall be handled as follows:\na)\tA message received with skip indicator different from 0000 shall be ignored. A message received with skip indicator encoded as 0000 shall not be considered an error that causes the message to be ignored.\nb)\tA protocol entity sending a Mobility Management message or a GPRS Mobility Management message shall encode the skip indicator as 0000.\nIn a shared GERAN network in A/Gb mode:\na)\tWhen the MS is sending a LOCATION UPDATING REQUEST, CM SERVICE REQUEST, IMSI DETACH INDICATION or CM RE-ESTABLISHMENT REQUEST message,\n-\tif the MS is a GERAN network sharing supporting MS, the MS shall encode the skip indicator IE to indicate the chosen PLMN identity from the PLMN identities in the broadcast system information (see 3GPP TS 44.018 [84]) according to table 10.3.1;\n-\totherwise, the MS shall encode the skip indicator as 0000.\nb)\tWhen the network is receiving a LOCATION UPDATING REQUEST, PAGING RESPONSE, CM SERVICE REQUEST, IMSI DETACH INDICATION or CM RE-ESTABLISHMENT REQUEST message,\n-\tif the skip indicator is encoded as 0000, the message shall not be considered an error that causes the message to be ignored;\n-\tif the skip indicator is different from 0000, the message shall not be considered an error and shall be processed by the receiving MM entity. The MS shall be considered as GERAN network sharing supporting MS.\nNOTE:\tThe skip indicator handling of PAGING RESPONSE message on the MS and the BSS is specified in 3GPP TS 44.018 [84].\n\nFigure 10.3.1: Skip indicator\nTable 10.3.1/3GPP TS 24.008: Skip indicator\n\n",
                            "figures_meta_data": [],
                            "tables": [
                                {
                                    "description": "NOTE:\tThe skip indicator handling of PAGING RESPONSE message on the MS and the BSS is specified in 3GPP TS 44.018 [84].",
                                    "table number": 131,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 10.3.1/3GPP TS 24.008: Skip indicator",
                                    "table number": 132,
                                    "summary": "",
                                    "name": ""
                                }
                            ]
                        },
                        {
                            "title": "10.3.2\tTransaction identifier",
                            "text_content": "Bits 5 to 8 of the first octet of every message belonging to the protocols \"Call Control; call related SS messages\" and \"Session Management\"contain the transaction identifier (TI). The transaction identifier and its use are defined in 3GPP TS 24.007 [20].\nFor the session management protocol, the extended TI mechanism may be used (see 3GPP TS 24.007 [20]).\nFor the call control protocol, the extended TI mechanism shall be supported for the purpose of protocol error handling as specified in subclause 8.3.1\n",
                            "figures_meta_data": [],
                            "tables": []
                        }
                    ]
                },
                {
                    "title": "10.4\tMessage Type",
                    "description": "",
                    "summary": "",
                    "text_content": "The message type IE and its use are defined in 3GPP TS 24.007 [20]. Tables 10.3/3GPP TS 24.008, 10.4/3GPP TS 24.008, and 10.4a/3GPP TS 24.008 define the value part of the message type IE used in the Mobility Management protocol, the Call Control protocol, and Session management protocol.\nTable 10.2/3GPP TS 24.008: Message types for Mobility Management\n\nNOTE:\tThis value was allocated but never used in earlier phases of the protocol.\nWhen the radio connection started with a core network node of earlier than R99, bit 8 shall be set to 0 and bit 7 is reserved for the send sequence number in messages sent from the mobile station. In messages sent from the network, bits 7 and 8 are coded with a \"0\". See 3GPP TS 24.007 [20].\nWhen the radio connection started with a core network node of R'99 or later, bits 7 and 8 are reserved for the send sequence number in messages sent from the mobile station. In messages sent from the network, bits 7 and 8 are coded with a \"0\". See 3GPP TS 24.007 [20].\nTable 10.3/3GPP TS 24.008: Message types for Call Control and call related SS messages\n\n1):\tWhen used, the message type is defined in the following octet(s), according to the national specification.\n\nWhen the radio connection started with a core network node of earlier than R99, bit 8 shall be set to 0 and bit 7 is reserved for the send sequence number in messages sent from the mobile station. In messages sent from the network, bits 7 and 8 are coded with a \"0\". See 3GPP TS 24.007 [20].\nWhen the radio connection started with a core network node of R'99 or later, bits 7 and 8 are reserved for the send sequence number in messages sent from the mobile station. In messages sent from the network, bits 7 and 8 are coded with a \"0\". See 3GPP TS 24.007 [20].\nTable 10.4/3GPP TS 24.008: Message types for GPRS mobility management\n\nTable 10.4a/3GPP TS 24.008: Message types for GPRS session management\n\n",
                    "tables": [
                        {
                            "description": "Table 10.2/3GPP TS 24.008: Message types for Mobility Management",
                            "table number": 133,
                            "summary": "",
                            "name": ""
                        },
                        {
                            "description": "Table 10.3/3GPP TS 24.008: Message types for Call Control and call related SS messages",
                            "table number": 134,
                            "summary": "",
                            "name": ""
                        },
                        {
                            "description": "Table 10.4/3GPP TS 24.008: Message types for GPRS mobility management",
                            "table number": 135,
                            "summary": "",
                            "name": ""
                        },
                        {
                            "description": "Table 10.4a/3GPP TS 24.008: Message types for GPRS session management",
                            "table number": 136,
                            "summary": "",
                            "name": ""
                        }
                    ],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "10.5\tOther information elements",
                    "description": "",
                    "summary": "",
                    "text_content": "The different formats (V, LV, T, TV, TLV) and the five categories of information elements (type 1, 2, 3, 4, and 6) are defined in 3GPP TS 24.007 [20].\nThe first octet of an information element in the non-imperative part contains the IEI of the information element. If this octet does not correspond to an IEI known in the message, the receiver shall determine whether this IE is of type 1 or 2 (i.e. it is an information element of one octet length), an IE of type 4 (i.e. that the next octet is the length indicator indicating the length of the remaining of the information element) or an IE of type 6 (i.e. that the next 2 octets are the length indicator indicating the length of the remaining of the information element (see 3GPP TS 24.007 [20]).\nThis allows the receiver to jump over unknown information elements and to analyse any following information elements.\nThe information elements which are common for at least two of the three protocols Radio Resources management, Mobility Management and Call Control, are listed in subclause 10.5.1.\nThe information elements for the protocols Mobility Management and Call Control are listed in subclauses 10.5.3 and 10.5.4 respectively. Default information element identifiers are listed in annex K.\nNOTE:\tDifferent information elements may have the same default information element identifier if they belong to different protocols.\nThe descriptions of the information element types in subclauses 10.5.1, 10.5.3, and 10.5.4 are organized in alphabetical order of the IE types. Each IE type is described in one subclause.\nThe subclause may have an introduction:\n-\tpossibly explaining the purpose of the IE;\n-\tpossibly describing whether the IE belongs to type 1, 2, 3, 4 or 5;\n-\tpossibly indicating the length that the information element has if it is either type 5 or if it is used in format TV (type 1 and 3) or TLV (type 4).\nA figure of the subclause defines the structure of the IE indicating:\n-\tpossibly the position and length of the IEI. (However it depends on the message in which the IE occurs whether the IE contains an IEI.);\n-\tthe fields the IE value part is composed of;\n-\tpossibly the position and length of the length indicator. (However it depends on the IE type whether the IE contains a length indicator or not.);\n-\tpossibly octet numbers of the octets that compose the IE (see clause a) below).\nFinally, the subclause contains tables defining the structure and value range of the fields that compose the IE value part. The order of appearance for information elements in a message is defined in clause 9.\nThe order of the information elements within the imperative part of messages has been chosen so that information elements with 1/2 octet of content (type 1) go together in succession. The first type 1 information element occupies bits 1 to 4 of octet N, the second bits 5 to 8 of octet N, the third bits 1 to 4 of octet N + 1 etc. If the number of type 1 information elements is odd then bits 5 to 8 of the last octet occupied by these information elements contains a spare half octet IE in format V.\nWhere the description of information elements in the present document contains bits defined to be \"spare bits\", these bits shall set to the indicated value (0 or 1) by the sending side, and their value shall be ignored by the receiving side. With few exceptions, spare bits are indicated as being set to \"0\" in 3GPP TS 24.008.\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": [
                        {
                            "title": "10.5.1\tCommon information elements.",
                            "text_content": "The purpose of the Cell Identity information element is to identify a cell within a location area.\nThe Cell Identity information element is coded as shown in figure 10.5.1/3GPP TS 24.008 and table 10.5.1/3GPP TS 24.008.\nThe Cell Identity is a type 3 information element with 3 octets length.\n\n\nFigure 10.5.1/3GPP TS 24.008 Cell Identity information element\nTable 10.5.1/3GPP TS 24.008: Cell Identity information element\n\nIn a GSM authentication challenge, the purpose of the Ciphering Key Sequence Number information element is to make it possible for the network to identify the ciphering key Kc which is stored in the mobile station without invoking the authentication procedure.\nThe ciphering key sequence number is allocated by the network and sent with the AUTHENTICATION REQUEST or AUTHENTICATION AND CIPHERING REQUEST message to the mobile station where it is stored together with the calculated keys, e.g. Kc, CK, IK, Kc128, Kint.\nThe Ciphering Key Sequence Number information element is coded as shown in figure 10.5.2/3GPP TS 24.008 and table 10.5.2/3GPP TS 24.008.\nIn a UMTS authentication challenge, the purpose of the Ciphering Key Sequence Number information element is to make it possible for the network to identify the ciphering key CK and integrity key IK which are stored in the MS without invoking the authentication procedure. CK and IK form a Key Set Identifier (KSI) (see 3GPP TS 33.102 [5a]) which is encoded the same as the CKSN and is therefore included in the CKSN field.\nThe ciphering key sequence number is a type 1 information element.\n\n\nFigure 10.5.2/3GPP TS 24.008 Ciphering Key Sequence Number information element\nTable 10.5.2/3GPP TS 24.008: Ciphering Key Sequence Number information element\n\nThe purpose of the Location Area Identification information element is to provide an unambiguous identification of location areas within the area covered by the 3GPP system.\nThe Location Area Identification information element is coded as shown in figure 10.5.3/3GPP TS 24.008 and table 10.5.3/3GPP TS 24.008.\nThe Location Area Identification is a type 3 information element with 6 octets length.\n\n\nFigure 10.5.3/3GPP TS 24.008 Location Area Identification information element\nTable 10.5.3/3GPP TS 24.008: Location Area Identification information element\n\nThe purpose of the Mobile Identity information element is to provide either the international mobile subscriber identity, IMSI, the temporary mobile subscriber identity, TMSI/P-TMSI/M-TMSI, the international mobile equipment identity, IMEI, the international mobile equipment identity together with the software version number, IMEISV, or the temporary mobile group identity (TMGI), associated with the optional MBMS Session Identity.\nThe IMSI shall not exceed 15 digits, the TMSI/P-TMSI/M-TMSI is 4 octets long, and the IMEI is composed of 15 digits, the IMEISV is 16 digits (see 3GPP TS 23.003 [10]). The TMGI is at maximum 6 octets long and is defined in subclause 10.5.6.13. The MBMS Session Identity, if included, is 1 octet long (see 3GPP TS 48.018 [86]).\nFor packet paging the network shall select the mobile identity type with the following priority:\n1-\tP-TMSI: The P-TMSI shall be used if it is available.\n2-\tIMSI: The IMSI shall be used in cases where no P-TMSI is available.\nFor MBMS (pre-)notification (see 3GPP TS 44.018 [84] and 3GPP TS 44.060 [76]) the network shall select the mobile identity type \"TMGI and optional MBMS Session Identity\".\nNOTE 1:\tThe type of identity \"TMGI and optional MBMS Session Identity\" is only used by the MBMS (pre-)notification procedure in of A/Gb mode.\nFor all other transactions with the following exceptions:\n-\temergency call establishment, emergency call re-establishment, mobile terminated call establishment, the identification procedure, the GMM identification procedure, the GMM authentication, GPRS attach, routing area updating, and ciphering procedure and the ciphering mode setting procedure; and\n-\tlocation updating when the MS is configured for \"AttachWithIMSI\" as specified in 3GPP TS 24.368 [135] or 3GPP TS 31.102 [112] and the selected PLMN is neither the registered PLMN nor in the list of equivalent PLMNs;\nthe mobile station and the network shall select the mobile identity type with the following priority:\n1-\tTMSI: The TMSI shall be used if it is available.\n2-\tIMSI: The IMSI shall be used in cases where no TMSI is available.\nFor mobile terminated call establishment the mobile station shall select the same mobile identity type as received from the network in the PAGING REQUEST message. In case of enhanced DTM CS establishment (see 3GPP TS 44.018 [84]) the mobile station shall select the mobile identity type with the following priority in the PAGING RESPONSE message:\n1-\tTMSI: The TMSI shall be used if it is available.\n2-\tIMSI: The IMSI shall be used in cases where no TMSI is available.\nFor the PAGING RESPONSE message sent as a response to a paging for CS fallback, the MS shall:\n-\tselect the TMSI as mobile identity type if the network has, in E-UTRAN,\n-\tpaged the MS for CS fallback using the S-TMSI; or\n-\tindicated TMSI in the CS SERVICE NOTIFICATION message (see 3GPP TS 24.301 [120]);\n-\tselect the IMSI as mobile identity type if the network has, in E-UTRAN,\n-\tpaged the MS for CS fallback using the IMSI; or\n-\tindicated IMSI in the CS SERVICE NOTIFICATION message (see 3GPP TS 24.301 [120]).\nFor emergency call establishment and re-establishment the mobile station shall select the mobile identity type with the following priority:\n1-\tTMSI: The TMSI shall be used if it is available and if the location update status is UPDATED, and the stored LAI is equal to the one received on the BCCH from the current serving cell.\n2-\tIMSI: The IMSI shall be used in cases where no TMSI is available or TMSI is available but either the update status is different from UPDATED, or the stored LAI is different from the one received on the BCCH from the current serving cell.\n3-\tIMEI: The IMEI shall be used in cases where no SIM/USIM is available or the SIM/USIM is considered as not valid by the mobile station or no IMSI or TMSI is available.\nIn the identification procedure and in the GMM identification procedure the mobile station shall select the mobile identity type which was requested by the network, if available. If the requested identity is not available, then the mobile station shall indicate the identity type \"No Identity\".\nIn the ciphering mode setting procedure and in the GMM authentication and ciphering procedure the mobile shall select the IMEISV.\nThe Mobile Identity information element is coded as shown in figure 10.5.4/3GPP TS 24.008 and table 10.5.4/3GPP TS 24.008.\nThe Mobile Identity is a type 4 information element with a minimum length of 3 octet and 11 octets length maximal. Further restriction on the length may be applied, e.g. number plans.\n\n\nFigure 10.5.4/3GPP TS 24.008 Mobile Identity information element\n\n\nFigure 10.5.4a/3GPP TS 24.008: Mobile Identity information element for type of identity \"TMGI and optional MBMS Session Identity\"\n\nTable 10.5.4/3GPP TS 24.008: Mobile Identity information element\n\nThe purpose of the Mobile Station Classmark 1 information element is to provide the network with information concerning aspects of high priority of the mobile station equipment. This affects the manner in which the network handles the operation of the mobile station. The Mobile Station Classmark information indicates general mobile station characteristics and it shall therefore, except for fields explicitly indicated, be independent of the frequency band of the channel it is sent on.\nThe Mobile Station Classmark 1 information element is coded as shown in figure 10.5.5/3GPP TS 24.008 and table 10.5.5/3GPP TS 24.008.\nThe Mobile Station Classmark 1 is a type 3 information element with 2 octets length.\n\n\nFigure 10.5.5/3GPP TS 24.008 Mobile Station Classmark 1 information element\n\nTable 10.5.5/3GPP TS 24.008: Mobile Station Classmark 1 information element\n\nThe purpose of the Mobile Station Classmark 2 information element is to provide the network with information concerning aspects of both high and low priority of the mobile station equipment. This affects the manner in which the network handles the operation of the mobile station. The Mobile Station Classmark information indicates general mobile station characteristics and it shall therefore, except for fields explicitly indicated, be independent of the frequency band of the channel it is sent on.\nThe Mobile Station Classmark 2 information element is coded as shown in figure 10.5.6/3GPP TS 24.008, table 10.5.6a/3GPP TS 24.008 and table 10.5.6b/3GPP TS 24.008.\nThe Mobile Station Classmark 2 is a type 4 information element with 5 octets length.\n\n\nNOTE 1:\tOwing to backward compatibility problems, bit 8 of octet 4 should not be used unless it is also checked that the bits 8, 7 and 6 of octet 3 are not \"0 0 0\".\n\nFigure 10.5.6/3GPP TS 24.008 Mobile Station Classmark 2 information element\n\n\nNOTE 2:\tAdditional mobile station capability information might be obtained by invoking the classmark interrogation procedure when GSM is used.\nThe purpose of the Mobile Station Classmark 3 information element is to provide the network with information concerning aspects of the mobile station. The contents might affect the manner in which the network handles the operation of the mobile station. The Mobile Station Classmark information indicates general mobile station characteristics and it shall therefore, except for fields explicitly indicated, be independent of the frequency band of the channel it is sent on.\nThe Mobile Station Classmark 3 is a type 4 information element with a maximum of 34 octets length.\nThe value part of a Mobile Station Classmark 3 information element is coded as shown in figure 10.5.1.7/3GPP TS 24.008 and table 10.5.1.7/3GPP TS 24.008.\nNOTE:\tThe 34 octet limit is so that the CLASSMARK CHANGE message will fit in up to two layer 2 frames.\nSEMANTIC RULE: a multiband mobile station shall provide information about all frequency bands it can support. A single band mobile station shall not indicate the band it supports in the Multiband Supported, GSM 400 Bands Supported, GSM 710 Associated Radio Capability, GSM 750 Associated Radio Capability, T-GSM 810 Associated Radio Capability, GSM 850 Associated Radio Capability or GSM 1900 Associated Radio Capability fields in the Mobile Station Classmark 3. Due to shared radio frequency channel numbers between GSM 1800 and GSM 1900, the mobile should indicate support for either GSM 1800 band OR GSM 1900 band.\nSEMANTIC RULE: a mobile station shall include the MS Measurement Capability field if the Multi Slot Class field contains a value of 19 or greater (see 3GPP TS 45.002 [32]).\nTypically, the number of spare bits at the end is the minimum to reach an octet boundary. The receiver may add any number of bits set to \"0\" at the end of the received string if needed for correct decoding.\n\n\nFigure 10.5.1.7/3GPP TS 24.008 Mobile Station Classmark 3 information element\nTable 10.5.1.7/3GPP TS 24.008: Mobile Station Classmark 3 information element\n(continued...)\nTable 10.5.1.7/3GPP TS 24.008 (continued): Mobile Station Classmark 3 information element\n\nTable 10.5.1.7/3GPP TS 24.008 (continued): Mobile Station Classmark 3 information element\n\nTable 10.5.1.7/3GPP TS 24.008 (continued): Mobile Station Classmark 3 information element\n\nTable 10.5.1.7/3GPP TS 24.008 (continued): Mobile Station Classmark 3 information element\n\nThis element is used in the description of messages in clause 9 when an odd number of half octet type 1 information elements are used. This element is filled with spare bits set to zero and is placed in bits 5 to 8 of the octet unless otherwise specified.\nThe purpose of the Descriptive Group or Broadcast Call Reference is to provide information describing a voice group or broadcast call. The IE of the Descriptive Group or Broadcast Call Reference is composed of the group or broadcast call reference together with a service flag, an acknowledgement flag, the call priority and the group cipher key number.\nThe Descriptive Group or Broadcast Call Reference information element is coded as shown in figure 10.5.8/3GPP TS 24.008 and Table10.5.8/3GPP TS 24.008\nThe Descriptive Group or Broadcast Call Reference is a type 3 information element with 6 octets length.\n\n\nFigure 10.5.8/3GPP TS 24.008 Descriptive Group or Broadcast Call Reference\nTable 10.5.8/3GPP TS 24.008 Descriptive Group or Broadcast Call Reference\n\nThe purpose of the Group Cipher Key Number is to provide information on the group cipher key to be used for ciphering and deciphering by the mobile station.\nThe Group Cipher Key Number information element is coded as shown in figure 10.5.9/3GPP TS 24.008 and Table10.5.9/3GPP TS 24.008\nThe Group Cipher Key Number is a type 1 information element with 1 octet length.\n\n\nFigure 10.5.9/3GPP TS 24.008 Group Cipher Key Number\nTable 10.5.9/3GPP TS 24.008 Group Cipher Key Number\n\nThe purpose of the PD and SAPI information element is to provide information concerning Protocol Discriminators and Service Access Point Identifiers.\nThe PD and SAPI information element is coded as shown in figure 10.5.10/3GPP TS 24.008 and table 10.5.10/3GPP TS 24.008.\nThe PD and SAPI is a type 3 information element with 2 octets length.\n\n\nFigure10.5.10/3GPP TS 24.008\nPD and SAPI information element\nTable 10.5.1.10/3GPP TS 24.008: PD and SAPI information element\n\nThe purpose of the Priority Level is to provide information defining the priority level requested or applied. The Priority Level IE may be included in CM_SERVICE_REQUEST, CALL_PROCEEDING and SETUP messages.\nThe Priority Level information element is coded as shown in figure 10.5.11/3GPP TS 24.008 and table 10.5.11/3GPP TS 24.008.\nThe Priority Level is a type 1 information element with 1 octet length.\n\n\nFigure 10.5.11/3GPP TS 24.008 Priority Level\nTable 10.5.11/3GPP TS 24.008 Priority Level\n\nThe purpose of the Core Network System Information is to provide the MS with actual parameter settings of system information parameters controlling MM and GMM functionality. The Core Network system information is included in specific information elements within some RRC messages sent to MS, see 3GPP TS 25.331 [23c].\nNOTE:\tThese IEs do not have an IEI or a length indicator, because these IEs are never present in any layer 3 messages, Hence these IEs do not conform to the general IE rules defined in 3GPP TS 24.007 [20].\nThe purpose of the CN Common GSM-MAP NAS system information element is to provide the MS with actual parameter settings of parameters relevant for both MM and GMM functionality. The coding of the information element identifier and length information is defined in the 3GPP TS 25.331 [23c]. Only the coding of the content is in the scope of the present document.\nThe content of the CN common GSM-MAP NAS system information element is coded as shown in figure 10.5.1.12.1/3GPP TS 24.008 and table 10.5.1.12.1/3GPP TS 24.008.\nThe length of this element content is two octets. The MS shall ignore any additional octets received.\n\n\nFigure 10.5.1.12.1/3GPP TS 24.008 Common system information element\nTable 10.5.1.12.1/3GPP TS 24.008: Common system information element\n\nThe purpose of the CN domain specific GSM-MAP NAS system information element, when used for the CS domain, is to provide the MS with actual parameter settings of parameters relevant only for MM functionality. The coding of the information element identifier and length information is defined in the 3GPP TS 25.331 [23c]. Only the coding of the content is in the scope of the present document.\nFor CS domain, the content of the CN domain specific GSM-MAP NAS system information element is coded as shown in figure 10.5.1.12.2/3GPP TS 24.008 and table 10.5.1.12.2/3GPP TS 24.008. The length of this element content is two octets. The MS shall ignore any additional octets received.\n\n\nFigure 10.5.1.12.2/3GPP TS 24.008 CS domain specific system information element\nTable 10.5.1.12.2/3GPP TS 24.008: CS domain specific system information element\n\nThe purpose of the CN domain specific GSM-MAP NAS system information element, when used for the PS domain, is to provide the MS with actual parameter settings of parameters relevant only for GMM functionality. The coding of the information element identifier and length information is defined in the 3GPP TS 25.331 [23c]. Only the coding of the content is in the scope of the present document.\nFor PS domain, the content of the CN domain specific GSM-MAP NAS system information element is coded as shown in figure 10.5.1.12.3/3GPP TS 24.008 and table 10.5.1.12.3/3GPP TS 24.008. The length of this element content is two octets. The MS shall ignore any additional octets received.\n\n\n\nFigure 10.5.1.12.3/3GPP TS 24.008 PS domain specific system information element\nTable 10.5.1.12.3/3GPP TS 24.008: PS domain specific system information element\n\nThe purpose of the PLMN List information element is to provide a list of PLMN codes to the mobile station.\nThe PLMN List information element is coded as shown in figure 10.5.13/3GPP TS 24.008 and table 10.5.13/3GPP TS 24.008.\nThe PLMN List is a type 4 information element with a minimum length of 5 octets and a maximum length of 47 octets.\n\n\nFigure 10.5.13/3GPP TS 24.008 PLMN List information element\nTable 10.5.13/3GPP TS 24.008: PLMN List information element\n\nThe purpose of the NAS container for PS HO information element is to indicate the NAS specific information for the PS handover to A/Gb mode. The NAS container for PS HO information element is included in the PS HO command message, see 3GPP TS 44.060 [76]. The coding of the information element identifier and length information is defined in 3GPP TS 44.060 [76].\nThe content of the NAS container for PS HO information element is coded as shown in figure 10.5.1.14/3GPP TS 24.008 and table 10.5.1.14/3GPP TS 24.008. The length of this information element is 5 octets. The MS shall ignore any additional octets received.\n\n\nFigure 10.5.1.14/3GPP TS 24.008 NAS container for PS HO information element\nTable 10.5.1.14/3GPP TS 24.008: NAS container for PS HO information element\n\nThe purpose of the MS network feature support information element is to indicate support of mobility management parameters during the tracking area updating, location updating, routing area updating, IMSI attach, GPRS attach, and EPS attach procedures.\nThe MS network feature support information element is coded as shown in figure 10.5.1.15/3GPP TS 24.008 and table 10.5.1.15/3GPP TS 24.008.\nThe MS network feature support information element is a type 1 information element.\n\n\nFigure 10.5.1.15/3GPP TS 24.008: MS network feature support information element\nTable 10.5.1.15/3GPP TS 24.008: MS network feature support information element\n\n",
                            "figures_meta_data": [],
                            "tables": [
                                {
                                    "description": "",
                                    "table number": 137,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 10.5.1/3GPP TS 24.008: Cell Identity information element",
                                    "table number": 138,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "",
                                    "table number": 139,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 10.5.2/3GPP TS 24.008: Ciphering Key Sequence Number information element",
                                    "table number": 140,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "",
                                    "table number": 141,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 10.5.3/3GPP TS 24.008: Location Area Identification information element",
                                    "table number": 142,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "",
                                    "table number": 143,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "",
                                    "table number": 144,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 10.5.4/3GPP TS 24.008: Mobile Identity information element",
                                    "table number": 145,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "",
                                    "table number": 146,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 10.5.5/3GPP TS 24.008: Mobile Station Classmark 1 information element",
                                    "table number": 147,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "",
                                    "table number": 148,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "",
                                    "table number": 149,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "",
                                    "table number": 150,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 10.5.1.7/3GPP TS 24.008: Mobile Station Classmark 3 information element",
                                    "table number": 151,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 10.5.1.7/3GPP TS 24.008 (continued): Mobile Station Classmark 3 information element",
                                    "table number": 152,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 10.5.1.7/3GPP TS 24.008 (continued): Mobile Station Classmark 3 information element",
                                    "table number": 153,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 10.5.1.7/3GPP TS 24.008 (continued): Mobile Station Classmark 3 information element",
                                    "table number": 154,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 10.5.1.7/3GPP TS 24.008 (continued): Mobile Station Classmark 3 information element",
                                    "table number": 155,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "",
                                    "table number": 156,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 10.5.8/3GPP TS 24.008 Descriptive Group or Broadcast Call Reference",
                                    "table number": 157,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "",
                                    "table number": 158,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 10.5.9/3GPP TS 24.008 Group Cipher Key Number",
                                    "table number": 159,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "",
                                    "table number": 160,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 10.5.1.10/3GPP TS 24.008: PD and SAPI information element",
                                    "table number": 161,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "",
                                    "table number": 162,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 10.5.11/3GPP TS 24.008 Priority Level",
                                    "table number": 163,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "",
                                    "table number": 164,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 10.5.1.12.1/3GPP TS 24.008: Common system information element",
                                    "table number": 165,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "",
                                    "table number": 166,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 10.5.1.12.2/3GPP TS 24.008: CS domain specific system information element",
                                    "table number": 167,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "",
                                    "table number": 168,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 10.5.1.12.3/3GPP TS 24.008: PS domain specific system information element",
                                    "table number": 169,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "",
                                    "table number": 170,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 10.5.13/3GPP TS 24.008: PLMN List information element",
                                    "table number": 171,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "",
                                    "table number": 172,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 10.5.1.14/3GPP TS 24.008: NAS container for PS HO information element",
                                    "table number": 173,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "",
                                    "table number": 174,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 10.5.1.15/3GPP TS 24.008: MS network feature support information element",
                                    "table number": 175,
                                    "summary": "",
                                    "name": ""
                                }
                            ]
                        },
                        {
                            "title": "10.5.2\tRadio Resource management information elements.",
                            "text_content": "See 3GPP TS 44.018 [84].\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "10.5.3\tMobility management information elements.",
                            "text_content": "The purpose of the Authentication Parameter RAND information element is to provide the mobile station with a non-predictable number to be used to calculate the authentication response signature SRES and the ciphering key Kc (for a GSM authentication challenge), or the response RES and both the ciphering key CK and integrity key IK (for a UMTS authentication challenge).\nThe Authentication Parameter RAND information element is coded as shown in figure 10.5.75/3GPP TS 24.008 and table 10.5.89/3GPP TS 24.008.\nThe Authentication Parameter RAND is a type 3 information element with 17 octets length.\n\n\nFigure 10.5.75/3GPP TS 24.008 Authentication Parameter RAND information element\nTable 10.5.89/3GPP TS 24.008: Authentication Parameter RAND information element\n\nThe purpose of the Authentication Parameter AUTN information element is to provide the MS with a means of authenticating the network.\nThe Authentication Parameter AUTN information element is coded as shown in figure 10.5.75.1/3GPP TS 24.008 and table 10.5.89.1/3GPP TS 24.008.\nThe Authentication Parameter AUTN is a type 4 information element with a length of 18 octets.\n\n\nFigure 10.5.75.1/3GPP TS 24.008 Authentication Parameter AUTN information element (UMTS and EPS authentication challenge)\nTable 10.5.89.1/3GPP TS 24.008 Authentication Parameter AUTN information element (UMTS and EPS authentication challenge)\n\nThe purpose of the authentication response parameter information element is to provide the network with the authentication response calculated in the SIM/USIM.\nThe Authentication Parameter SRES information element is coded as shown in figure 10.5.76/3GPP TS 24.008 and tables 10.5.90 a & b /3GPP TS 24.008.\nThe Authentication Response Parameter is a type 3 information element with 5 octets length. In a GSM authentication challenge, the response calculated in the SIM/USIM (SRES) is 4 bytes in length, and is placed in the Authentication Response Parameter information element.\nIn a UMTS authentication challenge, the response calculated in the USIM (RES) may be up to 16 octets in length. The 4 most significant octets shall be included in the Authentication Response Parameter information element. The remaining part of the RES shall be included in the Authentication Response Parameter (extension) IE (see subclause 10.5.3.2.1)\n\n\nFigure 10.5.76/3GPP TS 24.008 Authentication Response Parameter information element\nTable 10.5.90a/3GPP TS 24.008: Authentication Response Parameter information element\n(SRES) (GSM authentication challenge only)\n\nTable 10.5.90b/3GPP TS 24.008: Authentication Response Parameter information element (RES) (UMTS authentication challenge only)\n\nThis IE is included if the authentication response parameter RES is longer than 4 octets (UMTS only) and therefore does not fit in the Authentication Response Parameter field (see 10.5.3.2).\nThe Authentication Response parameter (extension) IE is coded as shown in figure 10.5.76.1/3GPP TS 24.008 and table 10.5.90.1/3GPP TS 24.008.\nThe Authentication Response parameter (extension) IE is a type 4 information element with a minimum length of 3 octets and a maximum length of 14 octets.\n\n\nFigure 10.5.76.1/3GPP TS 24.008 Authentication Response Parameter (extension) information element (UMTS authentication challenge only)\nTable 10.5.90.1/3GPP TS 24.008: Authentication Response Parameter (extension) information element (RES)\n\nThe purpose of the Authentication Failure parameter information element is to provide the network with the necessary information to begin a re-authentication procedure (see 3GPP TS 33.102 [5a]) in the case of a 'Synch failure', following a UMTS or EPS authentication challenge.\nThe Authentication Failure parameter IE is coded as shown in figure 10.5.76.2/3GPP TS 24.008 and table 10.5.90.2/3GPP TS 24.008.\nThe Authentication Failure parameter IE is a type 4 information element with a length of 16 octets.\n\n\nFigure 10.5.76.2/3GPP TS 24.008 Authentication Failure parameter information element (UMTS and EPS authentication challenge)\nTable 10.5.90.2/3GPP TS 24.008: Authentication Failure parameter information element\n\nThe purpose of the CM Service Type information element is to specify which service is requested from the network.\nThe CM Service Type information element is coded as shown in figure 10.5.77/3GPP TS 24.008 and table 10.5.91/3GPP TS 24.008.\nThe CM Service Type is a type 1 information element.\n\n\nFigure 10.5.77/3GPP TS 24.008 CM Service Type information element\nTable 10.5.91/3GPP TS 24.008: CM Service Type information element\n\nThe purpose of the Identity Type information element is to specify which identity is requested.\nThe Identity Type information element is coded as shown in figure 10.5.78/3GPP TS 24.008 and table 10.5.92/3GPP TS 24.008.\nThe Identity Type is a type 1 information element.\n\n\nFigure 10.5.78/3GPP TS 24.008 Identity Type information element\nTable 10.5.92/3GPP TS 24.008: Identity Type information element\n\nThe purpose of the Location Updating Type information element is to indicate whether a normal updating, a periodic updating or an IMSI attach is wanted. It may also indicate that a follow-on request has been received from the mobile station CM layer.\nThe Location Updating Type information element is coded as shown in figure 10.5.79/3GPP TS 24.008 and table 10.5.93/3GPP TS 24.008.\nThe Location Updating Type is a type 1 information element.\n\n\nFigure 10.5.79/3GPP TS 24.008 Location Updating Type information element\nTable 10.5.93/3GPP TS 24.008: Location Updating Type information element\n\nThe purpose of this information element is to pass a text string to the mobile station.\nThe Network Name information element is coded as shown in figure 10.5.80/3GPP TS 24.008 and table 10.5.94/3GPP TS 24.008.\nIf the coding scheme UCS2 is used and Chinese-Japanese-Korean-Vietnamese (CJKV) ideographs as defined in ISO/IEC 10646 [72] are received in the text string, the MS shall use the MCC of the PLMN from which it received the network name information element to determine the language for those CJKV ideographs as specified in table 10.5.93a/3GPP TS 24.008:\nTable 10.5.93a/3GPP TS 24.008: MCC to CJKV ideograph language mapping table\n\nNOTE:\tThis is due to CJKV ideograph language ambiguity in UCS2, in the sense that the same hexadecimal code can be mapped to different character displays dependent on the used language. The coding of CJKV ideographs itself does not allow to discriminate the CJKV ideograph language.\nThe Network Name is a type 4 information element with a minimum length of 3 octets. No upper length limit is specified except for that given by the maximum number of octets in a L3 message (see 3GPP TS 44.006 [19]).\n\n\nFigure 10.5.80/3GPP TS 24.008 Network Name information element\nTable 10.5.94/3GPP TS 24.008 Network Name information element\n\nThe purpose of the Reject Cause information element is to indicate the reason why a request from the mobile station is rejected by the network.\nThe Reject Cause information element is coded as shown in figure 10.5.81/3GPP TS 24.008 and table 10.5.95/3GPP TS 24.008.\nThe Reject Cause is a type 3 information element with 2 octets length.\n\n\nFigure 10.5.81/3GPP TS 24.008 Reject Cause information element\nTable 10.5.95/3GPP TS 24.008: Reject Cause information element\n\nThe purpose of the Follow-on Proceed information element is to indicate that an MM connection may be established on an existing RR connection.\nThe Follow-on Proceed information element is coded as shown in figure 10.5.82/3GPP TS 24.008.\nThe Follow-on Proceed is a type 2 information element.\n\n\nFigure 10.5.82/3GPP TS 24.008 Follow-on Proceed information element\nThe purpose of this information element is to encode the offset between universal time and local timein steps of 15 minutes.\nThe Time Zone information element is coded as shown in figure 10.5.83/3GPP TS 24.008 and table 10.5.96/3GPP TS 24.008.\nThe Time Zone is a type 3 information element with a length of 2 octets.\n\n\nFigure 10.5.83/3GPP TS 24.008 Time Zone information element\nTable 10.5.96/3GPP TS 24.008 Time Zone information element\n\nThe purpose of the timezone part of this information element is to encode the offset between universal time and local time in steps of 15 minutes.\nThe purpose of the time part of this information element is to encode the universal time at which this information element may have been sent by the network.\nThe Time Zone and Time information element is coded as shown in figure 10.5.84/3GPP TS 24.008 and table 10.5.97/3GPP TS 24.008.\nThe Time Zone and Time is a type 3 information element with a length of 8 octets.\n\n\nFigure 10.5.84/3GPP TS 24.008 Time Zone and Time information element\nTable 10.5.97/3GPP TS 24.008 Timezone and Time information element\n\nNOTE:\tDue to ambiguities in earlier versions of the protocol specifications, some mobile stations may interpret the received NITZ time as local time. This may result in incorrect time settings in the mobile.\nThe purpose of the CTS permission information element is to indicate that the mobile station is allowed to use GSM-Cordless Telephony System in the Location Area. The CTS permission information element is coded as shown in figure 10.5.84a/3GPP TS 24.008.\nThe CTS permission is a type 2 information element.\n\n\nFigure 10.5.84a/3GPP TS 24.008 CTS permission information element\nThis element uniquely identifies a LSA.\nThe LSA Identifier information element is coded as shown in figure 10.68c/3GPP TS 24.008.\nThe LSA Identifier is a type 4 information element with a length of 2 or 5 octets.\n\n\nFigure 10.68c/3GPP TS 24.008 LSA Identifier information element\nIf the Length = 0, then no LSA ID is included. This is used to indicate that the MS has moved to an area where there is no LSA available for that MS.\nOctets 3-5 are coded as specified in 3GPP TS 23.003 [10], 'Identification of Localised Service Area'. Bit 8 of octet 3 is the most significant bit.\nThe purpose of this information element is to encode the Daylight Saving Time in steps of 1 hour.\nThe Daylight Saving Time information element is coded as shown in figure 10.5.84b/3GPP TS 24.008 and table 10.5.97a/3GPP TS 24.008.\nThe Daylight Saving Time is a type 4 information element with a length of 3 octets.\n\n\nFigure 10.5.84b/3GPP TS 24.008 Daylight Saving Time information element\nTable 10.5.97a/3GPP TS 24.008: Daylight Saving Time information element\n\nThe purpose of this information element is to encode emergency number(s) for use within the country where the IE is received.\nThe Emergency Number List information element is coded as shown in figure 10.5.84c/3GPP TS 24.008.\nThe Emergency Number List IE is a type 4 information element with a minimum length of 5 octets and a maximum length of 50 octets.\n\n\nNOTE 1:\tThe length contains the number of octets used to encode the Emergency Service Category Value and the Number digits.\nNOTE 2:\tThe number digit(s) in octet 5 precedes the digit(s) in octet 6 etc. The number digit, which would be entered first, is located in octet 5, bits 1 to 4. The contents of the number digits are coded as shown in table 10.5.118/3GPP TS 24.008.\nNOTE 3:\tIf the emergeny number contains an odd number of digits, bits 5 to 8 of the last octet of the respective emergency number shall be filled with an end mark coded as \"1111\".\n\nFigure 10.5.84c/3GPP TS 24.008 Emergency Number List information element\nTable 10.5.97aa/3GPP TS 24.008: Emergency Number List information element\n\nThe purpose of the Additional update parameters information element is to provide additional information during the location updating procedure and during MM connection establishment.\nThe Additional update parameters information element is coded as shown in figure 10.5.84d/3GPP TS 24.008 and table 10.5.97b/3GPP TS 24.008.\nThe Additional update parameters information element is a type 1 information element.\n\n\nFigure 10.5.84d/3GPP TS 24.008: Additional update parameters information element\nTable 10.5.97b/3GPP TS 24.008: Additional update parameters information element\n\nThe purpose of the MM timer information element is to specify MM specific timer values, e.g. for the timer T3246.\nThe MM timer is a type 4 information element with 3 octets length.\nThe MM timer information element is coded as shown in figure 10.5.3.16-1/3GPP TS 24.008 and table 10.5.3.16-1/3GPP TS 24.008.\n\n\nFigure 10.5.3.16-1/3GPP TS 24.008: MM Timer information element\nTable 10.5.3.16-1/3GPP TS 24.008: MM Timer information element\n\n",
                            "figures_meta_data": [],
                            "tables": [
                                {
                                    "description": "",
                                    "table number": 176,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 10.5.89/3GPP TS 24.008: Authentication Parameter RAND information element",
                                    "table number": 177,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "",
                                    "table number": 178,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 10.5.89.1/3GPP TS 24.008 Authentication Parameter AUTN information element (UMTS and EPS authentication challenge)",
                                    "table number": 179,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "",
                                    "table number": 180,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 10.5.90a/3GPP TS 24.008: Authentication Response Parameter information element\n(SRES) (GSM authentication challenge only)",
                                    "table number": 181,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 10.5.90b/3GPP TS 24.008: Authentication Response Parameter information element (RES) (UMTS authentication challenge only)",
                                    "table number": 182,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "",
                                    "table number": 183,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 10.5.90.1/3GPP TS 24.008: Authentication Response Parameter (extension) information element (RES)",
                                    "table number": 184,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "",
                                    "table number": 185,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 10.5.90.2/3GPP TS 24.008: Authentication Failure parameter information element",
                                    "table number": 186,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "",
                                    "table number": 187,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 10.5.91/3GPP TS 24.008: CM Service Type information element",
                                    "table number": 188,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "",
                                    "table number": 189,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 10.5.92/3GPP TS 24.008: Identity Type information element",
                                    "table number": 190,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "",
                                    "table number": 191,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 10.5.93/3GPP TS 24.008: Location Updating Type information element",
                                    "table number": 192,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 10.5.93a/3GPP TS 24.008: MCC to CJKV ideograph language mapping table",
                                    "table number": 193,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "",
                                    "table number": 194,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 10.5.94/3GPP TS 24.008 Network Name information element",
                                    "table number": 195,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "",
                                    "table number": 196,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 10.5.95/3GPP TS 24.008: Reject Cause information element",
                                    "table number": 197,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "",
                                    "table number": 198,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "",
                                    "table number": 199,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 10.5.96/3GPP TS 24.008 Time Zone information element",
                                    "table number": 200,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "",
                                    "table number": 201,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 10.5.97/3GPP TS 24.008 Timezone and Time information element",
                                    "table number": 202,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "",
                                    "table number": 203,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "",
                                    "table number": 204,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "",
                                    "table number": 205,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 10.5.97a/3GPP TS 24.008: Daylight Saving Time information element",
                                    "table number": 206,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "",
                                    "table number": 207,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 10.5.97aa/3GPP TS 24.008: Emergency Number List information element",
                                    "table number": 208,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "",
                                    "table number": 209,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 10.5.97b/3GPP TS 24.008: Additional update parameters information element",
                                    "table number": 210,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "",
                                    "table number": 211,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 10.5.3.16-1/3GPP TS 24.008: MM Timer information element",
                                    "table number": 212,
                                    "summary": "",
                                    "name": ""
                                }
                            ]
                        },
                        {
                            "title": "10.5.4\tCall control information elements",
                            "text_content": "There is a certain number of possible information element identifier values using the formatting rules described in subclause 10.5: 128 from the type 3 & 4 information element format and at least 8 from the type 1 & 2 information element format.\nOne value in the type 1 format is specified for shift operations described below. One other value in both the type 3 & 4 and type 1 format is reserved. This leaves 133 information element identifier values available for assignment.\nIt is possible to expand this structure to eight codesets of 133 information element identifier values each. One common value in the type 1 format is employed in each codeset to facilitate shifting from one codeset to another. The contents of this shift information element identifies the codeset to be used for the next information element or elements. The codeset in use at any given time is referred to as the \"active codeset\". By convention, codeset 0 is the initially active codeset.\nTwo codeset shifting procedures are supported: locking shift and non-locking shift.\nCodeset 5 is reserved for information elements reserved for national use.\nCodeset 6 is reserved for information elements specific to the local network (either public or private).\nCodeset 7 is reserved for user-specific information elements.\nThe coding rules specified in subclause 10.5 shall apply for information elements belonging to any active codeset.\nThe mobile station and the network shall not apply the \"comprehension required\" scheme (see 3GPP TS 24.007 [20]) to information elements belonging to codesets different from codeset 0.\nIEIs with bits 5, 6, 7 and 8 all set to zero should not be allocated for new optional information elements in codesets different from codeset 0, because there are legacy mobile stations that apply the \"comprehension required\" scheme also to these information elements, e.g. if such a mobile station receives a SETUP message containing an unknown information element from codeset 5 with an IEI with bits 5, 6, 7 and 8 all set to zero, then the mobile station will release the call.\nTransitions from one active codeset to another (i.e. by means of the locking shift procedure) may only be made to a codeset with a higher numerical value than the codeset being left.\nAn information element belonging to codeset 5, 6 or 7 may appear together with information elements belonging to codeset 0, by using the non-locking shift procedure (see subclause 10.5.4.3).\nA user or network equipment shall have the capability to recognize a shift information element and to determine the length of the following information element, although the equipment need not be able to interpret and act on the content of the information element. This enables the equipment to determine the start of the subsequent information element.\nThe locking shift procedure employs an information element to indicate the new active codeset. The specified codeset remains active until another locking shift information element is encountered which specifies the use of another codeset. For example, codeset 0 is active at the start of message content analysis. If a locking shift to codeset 5 is encountered, the next information elements will be interpreted according to the information element identifiers assigned in codeset 5, until another shift information element is encountered. This procedure is used only to shift to a higher order codeset than the one being left.\nThe locking shift is valid only within that message which contains the locking shift information element. At the start of every message content analysis, the active codeset is codeset 0.\nThe locking shift information element uses the type 1 information element format and coding shown in figure 10.5.85/3GPP TS 24.008 and table 10.5.98/3GPP TS 24.008.\n\n\nFigure 10.5.85/3GPP TS 24.008 Locking shift element\nTable 10.5.98/3GPP TS 24.008: Locking shift element\n\nThe non-locking shift procedure provides a temporary shift to the specified lower or higher codeset. The non-locking shift procedure uses a type 1 information element to indicate the codeset to be used to interpret the next information element. After the interpretation of the next information element, the active codeset is again used for interpreting any following information elements. For example, codeset 0 is active at the beginning of message content analysis. If a non-locking shift to codeset 6 is encountered, only the next information element is interpreted according to the information element identifiers assigned in codeset 6. After this information element is interpreted, codeset 0 will again be used to interpret the following information elements. A non-locking shift information element indicating the current codeset shall not be regarded as an error.\nA locking shift information element shall not follow directly a non-locking shift information element. If this combination is received, it shall be interpreted as though a locking shift information element had been received.\nThe non-locking shift information element uses the type 1 information format and coding shown in figure 10.5.86/3GPP TS 24.008 and table 10.5.99/3GPP TS 24.008.\n\n\nFigure 10.5.86/3GPP TS 24.008 Non-locking shift element\nTable 10.5.99/3GPP TS 24.008: Non-locking shift element\n\nThe purpose of the auxiliary states information element is to describe the current status of the auxiliary states of a call in the call control states \"active\" and \"mobile originating modify\" (see 3GPP TS 24.083 [27] and 3GPP TS 24.084 [28]).\nThe auxiliary states information element is coded as shown in figure 10.5.87/3GPP TS 24.008, table 10.5.100/3GPP TS 24.008 and table 10.5.101/3GPP TS 24.008.\nThe auxiliary states is a type 4 information element with 3 octets length.\n\n\nFigure 10.5.87/3GPP TS 24.008 Auxiliary states information element\nTable 10.5.100/3GPP TS 24.008: Auxiliary states information element\n\nTable 10.5.101/3GPP TS 24.008: Auxiliary states information element\n\nThe purpose of the backup bearer capability IE is to indicate a requested service to a MS in case a complete description of the bearer service by a bearer capability IE is not available. The backup bearer capability information element is not subject to compatibility checking as described in annex B.\nThe backup bearer capability IE is coded as shown in figure 10.5.87a/3GPP TS 24.008 and tables 10.5.101a/3GPP TS 24.008 to 10.5.101m/3GPP TS 24.008.\nThe backup bearer capability is a type 4 information element with a minimum length of 3 octets and a maximum length of 15 octets.\n\n\nFigure 10.5.87a/3GPP TS 24.008 Backup bearer capability information element\nNOTE:\tThe coding of the octets of the backup bearer capability IE is not conforming to the coding of the bearer capability IE in ITU-T Recommendation Q.931 [53].\nTable 10.5.101a/3GPP TS 24.008: Backup bearer capability information element\n\nTable 10.5.101b/3GPP TS 24.008: Backup bearer capability information element\n\nTable 10.5.101c/3GPP TS 24.008: Backup bearer capability information element\n\nTable 10.5.101d/3GPP TS 24.008: Backup bearer capability information element\n\nTable 10.5.101e/3GPP TS 24.008: Backup bearer capability information element\n\nTable 10.5.101f/3GPP TS 24.008: Backup bearer capability information element\n\nTable 10.5.101g/3GPP TS 24.008: Backup bearer capability information element\n\nTable 10.5.101h/3GPP TS 24.008: Backup bearer capability information element\n\nTable 10.5.101i/3GPP TS 24.008: Backup bearer capability information element\n\nTable 10.5.101j/3GPP TS 24.008: Backup bearer capability information element\n\nTable 10.5.101k/3GPP TS 24.008: Backup bearer capability information element\n\nTable 10.5.101l/3GPP TS 24.008: Backup bearer capability information element\n\nTable 10.5.101m/3GPP TS 24.008: Backup bearer capability information element\n\nIf the information transfer capability field (octet 3) indicates \"speech\", octets 4, 5, 5a, 5b, 6, 6a, 6b, 6c, 6d, 6e, 6f, 6g and 7 shall not be included.\nIf the information transfer capability field (octet 3) indicates a value different from \"speech\", octets 4 and 5shall be included, octets 6, 6a, 6b, 6c, 6d, 6e, 6f and 6g are optional. In case octet 6 is included, octets 6a, 6b, and 6c shall also be included. In case octet 6d is included, octets 6e, 6f and 6g may be included. If the information transfer capability field (octet 3) indicates \"facsimile group 3\" and octet 6c is included, the modem type field (octet 6c) shall indicate \"none\".\nIf the information transfer capability field (octet 3) indicates \"other ITC\" or the rate adaption field (octet 5) indicates \"other rate adaption\", octet 5a shall be included.\nThe modem type field (octet 6c) shall not indicate \"autobauding type 1\" unless the connection element field (octet 6c) indicates \"non transparent\".\nThe purpose of the bearer capability information element is to describe a bearer service. The use of the bearer capability information element in relation to compatibility checking is described in annex B.\nThe bearer capability information element is coded as shown in figure 10.5.88/3GPP TS 24.008 and tables 10.5.102/3GPP TS 24.008 to 10.5.115/3GPP TS 24.008.\nThe bearer capability is a type 4 information element with a minimum length of 3 octets and a maximum length of 16 octets.\n\n\nFigure 10.5.88/3GPP TS 24.008 Bearer capability information element\nNOTE 1:\tThe coding of the octets of the bearer capability information element is not conforming to ITU Recommendation Q.931 [53].\nAn MS shall encode the Bearer Capability infomation element according to A/Gb mode call control requirements also if it is requesting for a service in Iu mode, with the following exceptions:\n1.\tA mobile station not supporting A/Gb mode and GERAN Iu mode for the requested bearer service shall set the following parameters to the value \"0\":\n-\tMaximum number of traffic channels (octet 6e, bits 1-3)\n-\tAcceptable Channel coding(s) (octet 6e, bits 4, 5 and 7)\n2.\tFurthermore, a mobile station not supporting A/Gb mode and GERAN Iu mode for the requested bearer service shall also set the following parameters to the value \"0\", if the respective octets have to be included in the bearer capability information element according to subclause 10.5.4.5.1 and 3GPP TS 27.001 [36]:\n-\tUIMI, User initiated modification indication (octet 6f, bits 5-7)\n-\tAcceptable Channel Codings extended (octet 6g, bits 5-7)\nFor UTRAN Iu mode the following parameters are irrelevant for specifying the radio access bearer, because multiple traffic channels (multislot) are not deployed, see 3GPP TS 23.034 [104]. However, the parameters if received, shall be stored in the MSC, and used for handover to A/Gb or GERAN Iu mode:\n-\tMaximum number of traffic channels (octet 6e, bits 1-3)\n-\tAcceptable Channel coding(s) (octet 6e, bits 4, 5 and 7)\n-\tUIMI, User initiated modification indication (octet 6f, bits 5-7)\n-\tAcceptable Channel Codings extended (octet 6g, bits 5-7)\nNOTE 2:\tThe following parameters are relevant in UTRAN Iu mode for non transparent data calls for deciding which RLP version to negotiate in order to avoid renegotiation of RLP version in case of inter-system handover from UTRAN Iu mode to A/Gb or GERAN Iu mode, see 3GPP TS 24.022 [141]:\n-\tMaximum number of traffic channels (octet 6e, bits 1-3)\n-\tWanted air interface user rate (octet 6f, bits 1- 4)\n-\tUIMI, User initiated modification indication (octet 6f, bits 5-7).\nTable 10.5.102/3GPP TS 24.008: Bearer capability information element\n(continued...)\nTable 10.5.102/3GPP TS 24.008: Bearer capability information element (continued)\n\nTable 10.5.103/3GPP TS 24.008 Bearer capability information element\n\nTable 10.5.104/3GPP TS 24.008: Bearer capability information element\n\nTable 10.5.105/3GPP TS 24.008: Bearer capability information element\n\nTable 10.5.106/3GPP TS 24.008: Bearer capability information element\n\nTable 10.5.107/3GPP TS 24.008: Bearer capability information element\n\nTable 10.5.108/3GPP TS 24.008: Bearer capability information element\n\nTable 10.5.109/3GPP TS 24.008: Bearer capability information element\n\nTable 10.5.110/3GPP TS 24.008: Bearer capability information element\n\nTable 10.5.111/3GPP TS 24.008: Bearer capability information element\n\nTable 10.5.112/3GPP TS 24.008: Bearer capability information element\n\nTable 10.5.113/3GPP TS 24.008: Bearer capability information element\n\nTable 10.5.114/3GPP TS 24.008: Bearer capability information element\n\nTable 10.5.115/3GPP TS 24.008: Bearer capability information element\nTable 10.5.115a/3GPP TS 24.008: Bearer capability information element\n\nIf the information transfer capability field (octet 3) indicates \"speech\", octets 4, 5, 5a, 5b, 6, 6a, 6b, 6c, 6d, 6e, 6f, 6g and 7 shall not be included.\nIf the information transfer capability field (octet 3) indicates \"speech\", octet 3a etc. shall be included only if the mobile station supports CTM text telephony or if it supports at least one speech version for GERAN other than:\n-\tGSM full rate speech version 1; or\n-\tGSM half rate speech version 1.\nIf the information transfer capability field (octet 3) indicates a value different from \"speech\", octets 4, 5, 6, 6a, 6b, and 6c shall be included, octets 6d, 6e, 6f and 6g are optional. In the network to MS direction in case octet 6d is included, octets 6e, 6f and 6g may be included. In the MS to network direction in case octet 6d is included octet 6e shall also be included and 6f and 6g may be included.\nIf the information transfer capability field (octet 3) indicates \"facsimile group 3\", the modem type field (octet 6c) shall indicate \"none\".\nIf the information transfer capability field (octet 3) indicates \"other ITC\" or the rate adaption field (octet 5) indicates \"other rate adaption\", octet 5a shall be included.\nIf the rate adaption field (octet 5) indicates \"other rate adaption\" and the other rate adaption field (octet 5a) indicates \"V.120\", octet 5b shall be included.\nThe modem type field (octet 6c) shall not indicate \"autobauding type 1\" unless the connection element field (octet 6c) indicates \"non transparent\".\nThe purpose of the Call Control Capabilities information element is to identify the call control capabilities of the mobile station.\nThe Call Control Capabilities information element is coded as shown in figure 10.5.89/3GPP TS 24.008 and table 10.5.116/3GPP TS 24.008.\nThe Call Control Capabilities is a type 4 information element with a length of 4 octets.\n\n\nFigure 10.5.89/3GPP TS 24.008 Call Control Capabilities information element\nTable 10.5.116/3GPP TS 24.008: Call Control Capabilities\n\nThe purpose of the call state information element is to describe the current status of a call, (see subclause 5.1).\nThe call state information element is coded as shown in figure 10.5.90/3GPP TS 24.008 and table 10.5.117/3GPP TS 24.008.\nThe call state is a type 3 information element with 2 octets length.\n\n\nFigure 10.5.90/3GPP TS 24.008 Call state information element\nTable 10.5.117/3GPP TS 24.008: Call state information element\n\nThe purpose of the called party BCD number information element is to identify the called party.\nThe called party BCD number information element is coded as shown in figure 10.5.91/3GPP TS 24.008 and table 10.5.118/3GPP TS 24.008.\nThe called party BCD number is a type 4 information element with a minimum length of 3 octets and a maximum length of 43 octets. For PCS 1900 the maximum length is 19 octets.\n\n\nFigure 10.5.91/3GPP TS 24.008 Called party BCD number information element\nNOTE 1:\tThe number digit(s) in octet 4 precedes the digit(s) in octet 5 etc. The number digit which would be entered first is located in octet 4, bits 1 to 4.\nNOTE 2:\tIf the called party BCD number contains an odd number of digits, bits 5 to 8 of the last octet shall be filled with an end mark coded as \"1111\".\nSince the information element must contain the complete called party BCD number there is no need for an additional complete indication.\nTable 10.5.118/3GPP TS 24.008: Called party BCD number\n\nNOTE 1:\tFor the definition of \"number\" see ITU-T Recommendation I.330 [48] and 3GPP TS 23.003 [10].\nNOTE 2:\tThe type of number \"unknown\" is used when the user or the network has no knowledge of the type of number, e.g. international number, national number, etc. In this case the number digits field is organized according to the network dialling plan, e.g. prefix or escape digits might be present.\nNOTE 3:\tPrefix or escape digits shall not be included.\nNOTE 4:\tThe type of number \"network specific number\" is used to indicate administration/service number specific to the serving network, e.g. used to access an operator.\nNOTE 5:\tThe international format shall be accepted by the MSC when the call is destined to a destination in the same country as the MSC.\nTable 10.5.118/3GPP TS 24.008: Called party BCD number (continued)\n\n-\tWhen an MS is the recipient of number information from the network, any incompatibility between the number digits and the number plan identification shall be ignored and a STATUS message shall not be sent to the network.\n-\tIn the case of numbering plan \"unknown\", the number digits field is organized according to the network dialling plan; e.g. prefix or escape digits might be present.\nTable 10.5.118/3GPP TS 24.008: Called party BCD number (continued)\n\nThe purpose of the Called party subaddress is to identify the subaddress of the called party of a call. For the definition of a subaddress see ITU-T Rec. I.330 [48].\nThe Called party subaddress information element is coded as shown in figure 10.5.92/3GPP TS 24.008 and Table 10.5.119/3GPP TS 24.008.\nThe called party subaddress is a type 4 information element with a minimum length of 2 octets and a maximum length of 23 octets.\n\n\nFigure 10.5.92/3GPP TS 24.008 Called party subaddress\nTable 10.5.119/3GPP TS 24.008: Called party subaddress\n\nThe purpose of the calling party BCD number information element is to identify the origin of a call.\nThe calling party BCD number information element is coded as shown in figure 10.5.93/3GPP TS 24.008 and table 10.5.120/3GPP TS 24.008.\nThe calling party BCD number is a type 4 information element. In the network to mobile station direction it has a minimum length of 3 octets and a maximum length of 14 octets. (This information element is not used in the mobile station to network direction.).\n\n\nFigure 10.5.93/3GPP TS 24.008 Calling party BCD number information element\nThe contents of octets 3, 4, etc. are coded as shown in table 10.5.118. The coding of octet 3a is defined in table 10.5.120 below.\nIf the calling party BCD number contains an odd number of digits, bits 5 to 8 of the last octet shall be filled with an end mark coded as \"1111\".\nTable 10.5.120/3GPP TS 24.008: Calling party BCD number\n\nThe purpose of the Calling party subaddress is to identify a subaddress associated with the origin of a call. For the definition of a subaddress see ITU-T Rec. I.330 [48].\nThe Calling party subaddress information element is coded as shown in figure 10.5.94/3GPP TS 24.008 and table 10.5.121/3GPP TS 24.008.\nThe calling party subaddress is a type 4 information element with a minimum length of 2 octets and a maximum length of 23 octets.\n\n\nFigure 10.5.94/3GPP TS 24.008 Calling party subaddress\nTable 10.5.121/3GPP TS 24.008: Calling party subaddress\n\nThe purpose of the cause information element is to describe the reason for generating certain messages, to provide diagnostic information in the event of procedural errors and to indicate the location of the cause originator.\nThe cause information element is coded as shown in figure 10.5.95/3GPP TS 24.008 and tables 10.5.122 and 10.5.123/3GPP TS 24.008.\nThe cause is a type 4 information element with a minimum length of 4 octets and a maximum length of 32 octets.\nThe cause information element may be repeated in a message.\n\n\nFigure 10.5.95/3GPP TS 24.008 Cause information element\nIf the default value applies for the recommendation field, octet 3a shall be omitted.\nTable 10.5.122/3GPP TS 24.008: Cause information element\n\nTable 10.5.122/3GPP TS 24.008: Cause information element (continued)\n\nTable 10.5.123/3GPP TS 24.008: Cause information element values\n\nTable 10.5.123/3GPP TS 24.008 (concluded): Cause information element values\n\nAll other values in the range 0 to 31 shall be treated as cause 31.\nAll other values in the range 32 to 47 shall be treated as cause 47.\nAll other values in the range 48 to 63 shall be treated as cause 63.\nAll other values in the range 64 to 79 shall be treated as cause 79.\nAll other values in the range 80 to 95 shall be treated as cause 95.\nAll other values in the range 96 to 111 shall be treated as cause 111.\nAll other values in the range 112 to 127 shall be treated as cause 127.\nNOTE 1:\tDiagnostics for supplementary services are handled as follows:\noctet 5, bit 8:\nThis is an extension bit as defined in the preliminary part of subclause 10.5. In this version of this protocol, this bit shall be set to 1. If it is set to zero, the contents of the following octets shall be ignored.\noctet 5, bit 7-1:\n0000001 - Outgoing calls barred within CUG\n0000010 - No CUG selected\n0000011 - Unknown CUG index\n0000100 - CUG index incompatible with requested basic service\n0000101 - CUG call failure, unspecified\n0000110 - CLIR not subscribed\n0000111 - CCBS possible\n0001000 - CCBS not possible\nAll other values shall be ignored.\nNOTE 2:\tThe incompatible parameter is composed of the incompatible information element identifier.\nNOTE 3:\tThe format of the diagnostic field for cause numbers 57, 58 and 65 is as shown in figure 10.5.88/3GPP TS 24.008 and tables 10.5.102/3GPP TS 24.008 to 10.5.115/3GPP TS 24.008.\nNOTE 4:\tThe user supplied diagnostics field is encoded according to the user specification, subject to the maximum length of the cause information element. The coding of user supplied diagnostics should be made in such a way that it does not conflict with the coding described in note 9 below.\nNOTE 5:\tThe new destination is formatted as the called party BCD number information element, including information element identifier.\nNOTE 6:\tLocking and non-locking shift procedures described in subclause 10.5.4.2 and clause 3 are applied. In principle, information element identifiers are ordered in the same order as the information elements in the received message.\nNOTE 7:\tWhen only the locking shift information element is included and no information element identifier follows, it means that the codeset in the locking shift itself is not implemented.\nNOTE 8:\tThe timer number is coded in IA5 characters, e.g., T308 is coded as \"3\" \"0\" \"8\". The following coding is used in each octet:\nbit 8: spare \"0\"\nbits 7-1: IA5 character\nOctet 5 carries \"3\", octet 5a carries \"0\", etc.\nNOTE 9:\tThe following coding is used for octet 5:\nbit 8     : 1\nbits 7-3: 00000\nbits 2-1: condition as follows:\n00 - unknown\n01 - permanent\n10 - transient\nThe CLIR suppression information element may be sent by the mobile station to the network in the SETUP message. The use is defined in 3GPP TS 24.081 [25].\nThe CLIR suppression information element is coded as shown in figure 10.5.96/3GPP TS 24.008.\nThe CLIR suppression is a type 2 information element.\n\n\nFigure 10.5.96/3GPP TS 24.008 CLIR suppression information element\nThe CLIR invocation information element may be sent by the mobile station to the network in the SETUP message. The use is defined in 3GPP TS 24.081 [25].\nThe CLIR invocation information element is coded as shown in figure 10.5.97/3GPP TS 24.008.\nThe CLIR invocation is a type 2 information element.\n\n\nFigure 10.5.97/3GPP TS 24.008 CLIR invocation information element\nThe purpose of the congestion level information element is to describe the congestion status of the call.\nThe congestion level information element is coded as shown in figure 10.5.98/3GPP TS 24.008 and table 10.5.124/3GPP TS 24.008.\nThe congestion level is a type 1 information element.\n\n\nFigure 10.5.98/3GPP TS 24.008 Congestion level information element\nTable 10.5.124/3GPP TS 24.008: Congestion level information element\n\nThe purpose of the connected number information element is to identify the connected party of a call.\nThe connected number information element is coded as shown in figure 10.5.99/3GPP TS 24.008.\nThe connected number is a type 4 information element with a minimum length of 3 octets and a maximum length of 14 octets.\n\n\nFigure 10.5.99/3GPP TS 24.008\nNOTE 1:\tThe contents of octets 3,4,5, etc. ... are coded as shown in table 10.5.118/3GPP TS 24.008. The coding of octet 3a is defined in table 10.5.120/3GPP TS 24.008.\nNOTE 2:\tIf the connected number contains an odd number of digits, bits 5 to 8 of the last octet shall be filled with the end mark coded as \"1111\".\nThe purpose of the connected subaddress information element is to identify a subaddress associated with the connected party of a call.\nThe connected subaddress information element is coded as shown in figure 10.5.100/3GPP TS 24.008.\nThe connected subaddress is a type 4 information element with a minimum length of 2 octets and a maximum length of 23 octets.\n\n\nFigure 10.5.100/3GPP TS 24.008\nThe coding for Type of subaddress, odd/even indicator, and subaddress information is in table 10.5.119/3GPP TS 24.008.\nThe purpose of the facility information element is to transport supplementary service related information. Within the scope of 3GPP TS 24.008 the content of the Facility information field is an array of octets. The usage of this transportation mechanism is defined in 3GPP TS 24.080 [24].\nThe facility information element is coded as shown in figure 10.5.101/3GPP TS 24.008.\nThe facility is a type 4 information element with a minimum length of 2 octets. No upper length limit is specified except for that given by the maximum number of octets in a L3 message (see 3GPP TS 44.006 [19]).\n\n\nFigure 10.5.101/3GPP TS 24.008\nThe purpose of the high layer compatibility information element is to provide a means which should be used by the remote user for compatibility checking. See annex B.\nThe high layer compatibility information element is coded as shown in figure 10.5.102/3GPP TS 24.008 and table 10.5.125/3GPP TS 24.008.\nThe high layer compatibility is a type 4 information element with a minimum length of 2 octets and a maximum length of 5 octets.\nNOTE:\tThe high layer compatibility information element is transported transparently by a PLMN between a call originating entity (e.g. a calling user) and the addressed entity (e.g. a remote user or a high layer function network node addressed by the call originating entity). However, if explicitly requested by the user (at subscription time), a network which provides some capabilities to realize teleservices may interpret this information to provide a particular service.\n\n\nFigure 10.5.102/3GPP TS 24.008 High layer compatibility information element\nIf the value part of the IE is empty, the IE indicates \"not applicable\".\nNOTE:\tOctet 4a may be present e.g. when octet 4 indicates Maintenance or Management, or audio visual.\nTable 10.5.125/3GPP TS 24.008: High layer compatibility information element\n\nEither the value part of the IE is empty, or it contains at least octet 3 and 4.\nThe purpose of the keypad facility information element is to convey IA5 characters, e.g. entered by means of a terminal keypad (see note).\nThe keypad facility information element is coded as shown in figure 10.5.103/3GPP TS 24.008.\nThe keypad facility is a type 3 information element with 2 octets length.\n\n\nFigure 10.5.103/3GPP TS 24.008 Keypad facility information element\nNOTE:\tIn the 3GPP system this information element is only used to transfer one DTMF digit (0, 1, ... , 9, A, B, C, D, *, #) as one IA5 character.\nThe purpose of the low layer compatibility information element is to provide a means which should be used for compatibility checking by an addressed entity (e.g., a remote user or an interworking unit or a high layer function network node addressed by the calling user). The low layer compatibility information element is transferred transparently by a PLMN between the call originating entity (e.g. the calling user) and the addressed entity.\nExcept for the information element identifier, the low layer compatibility information element is coded as in ITU recommendation Q.931.\nFor backward compatibility reasons coding of the modem type field according to ETS 300 102-1 (12-90) shall also be supported.\nThe low layer compatibility is a type 4 information element with a minimum length of 2 octets and a maximum length of 18 octets.\n\n\nFigure 10.5.104/3GPP TS 24.008 Low layer compatibility information element\nIf the value part of the IE is empty, the IE indicates \"not applicable\".\nThe more data information element is sent by the mobile station to the network or to the network to the mobile station in a USER INFORMATION message. The presence of the more data information element indicates to the destination remote user/mobile station that another USER INFORMATION message will follow containing information belonging to the same block.\nThe use of the more data information element is not supervised by the network.\nThe more data information element is coded as shown in figure 10.5.105/3GPP TS 24.008.\nThe more data is a type 2 information element.\n\n\nFigure 10.5.105/3GPP TS 24.008 More data information element\nThe purpose of the notification indicator information element is to indicate information pertaining to a call.\nThe notification indicator element is coded as shown in figure 10.5.106/3GPP TS 24.008 and table 10.5.126/ 3GPP TS 24.008.\nThe notification indicator is a type 3 information element with 2 octets length.\n\n\nFigure 10.5.106/3GPP TS 24.008 Notification indicator information element\nTable 10.5.126/3GPP TS 24.008: Notification indicator information element\n\nThe purpose of the progress indicator information element is to describe an event which has occurred during the life of a call.\nThe progress indicator information element is coded as shown in figure 10.5.107/3GPP TS 24.008 and table 10.5.127/3GPP TS 24.008.\nThe progress indicator is a type 4 information element with a length of 4 octets.\n\n\nFigure 10.5.107/3GPP TS 24.008 Progress indicator information element\nTable 10.5.127/3GPP TS 24.008: Progress indicator information element\n\nThe purpose of the recall type information element is to describe the reason for the recall.\nThe recall type information element is coded as shown in Figure 10.5.108/3GPP TS 24.008 and Table 10.5.128/3GPP TS 24.008.\nThe recall type is a type 3 information element with 2 octets length.\n\n\nFigure 10.5.108/3GPP TS 24.008 Recall type information element\nTable 10.5.128/3GPP TS 24.008: Recall type information element\n\nThe purpose of the redirecting party BCD number information element is to identify the redirecting party.\nThe redirecting party BCD number information element is coded as shown in figure 10.5.108a/3GPP TS 24.008.\nThe redirecting party BCD number is a type 4 information element. In the network to mobile station direction it has a minimum length of 3 octets and a maximum length of 19 octets.\n\n\nFigure 10.5.108a/3GPP TS 24.008\nRedirecting party BCD number information element\nNOTE 1:\tThe contents of octets 3, 4, etc. are coded as shown in table 10.5.118/3GPP TS 24.008. The coding of octet 3a is defined in table 10.5.120/3GPP TS 24.008.\nNOTE 2:\tIf the redirecting party BCD number contains an odd number of digits, bits 5 to 8 of the last octet shall be filled with an end mark coded as \"1111\".\nThe purpose of the Redirecting party subaddress is to identify a subaddress associated with the redirecting party. For the definition of a subaddress see Rec. ITU-T I.330.\nThe Redirecting party subaddress information element is coded as shown in figure 10.5.108b/3GPP TS 24.008 and table 10.5.121/3GPP TS 24.008.\nThe Redirecting party subaddress is a type 4 information element with a minimum length of 2 octets and a maximum length of 23 octets.\n\n\nFigure 10.5.108b/3GPP TS 24.008\nRedirecting party subaddress information element\nThe purpose of the repeat indicator information element is to indicate how the associated repeated information elements shall be interpreted, when included in a message. The repeat indicator information element is included immediately before the first occurrence of the associated information element which will be repeated in a message. \"Mode 1\" refers to the first occurrence of that information element, \"mode 2\" refers to the second occurrence of that information element in the same message.\nThe repeat indicator information element is coded as shown in figure 10.5.109/3GPP TS 24.008 and table 10.5.129/3GPP TS 24.008.\nThe repeat indicator is a type 1 information element.\n\n\nFigure 10.5.109/3GPP TS 24.008 Repeat indicator information element\nTable 10.5.129/3GPP TS 24.008: Repeat indicator information element\n\nThis information element may be included in a MODIFY and MODIFY COMPLETE message to indicate that the direction of the data call to which the MODIFY message relates is opposite to the call setup direction.\nThe reverse call setup direction information element is coded as shown in figure 10.5.110/3GPP TS 24.008.\nThe reverse call setup direction is a type 2 information element\n\n\nFigure 10.5.110/3GPP TS 24.008 Reverse call setup direction information element\nThis information element contains the contents of a SETUP message (Mobile Station to Network). This means that the Call Control protocol discriminator IE, the Transaction Identifier IE and the Setup message type IE are not included.\nThe SETUP Container information element is coded as shown in figure 10.5.111/3GPP TS 24.008.\nThe SETUP Container is a type 4 information. No upper length limit is specified except for that given by the maximum number of octets in a L3 message (see 3GPP TS 44.006 [19]).\n\n\nFigure 10.5.111/3GPP TS 24.008 Octet j (j = 3, 4 ... n) is the unchanged octet j of the SETUP message.\nThe purpose of the signal information element is to allow the network to convey information to a user regarding tones and alerting signals (see subclauses 5.2.2.3.2 and 7.3.3.).\nThe signal information element is coded as shown in figure 10.5.112/3GPP TS 24.008 and table 10.5.130/3GPP TS 24.008.\nThe signal is a type 3 information element with 2 octets length.\n\n\nFigure 10.5.112/3GPP TS 24.008 Signal information element\nTable 10.5.130/3GPP TS 24.008: Signal information element\n\nThe purpose of the SS version indicator information element is to aid the decoding of the Facility information element as described in 3GPP TS 24.010 [21]. Within the scope of 3GPP TS 24.008 the contents of the SS Version information field is an array of one or more octets. The usage of the SS version information field is defined in 3GPP TS 24.080 [24].\nThe SS version indicator information element is coded as shown in figure 10.5.113/3GPP TS 24.008.\nThe SS version indicator is a type 4 information element with a minimum length of 2 octets. No upper length limit is specified except for that given by the maximum number of octets in a L3 message (see 3GPP TS 44.006 [19]).\n\n\nFigure 10.5.113/3GPP TS 24.008\nNOTE:\tUsually, this information element has only one octet of content.\nThe purpose of the user-user information element is to convey information between the mobile station and the remote ISDN user.\nThe user-user information element is coded as shown in figure 10.5.114/3GPP TS 24.008 and table 10.5.131/ 3GPP TS 24.008. There are no restrictions on the content of the user-user information field.\nThe user-user is a type 4 information element with a minimum length of 3 octets and a maximum length of either 35 or 131 octets. In the SETUP message the user-user information element has a maximum size of 35 octets in a GSM PLMN. In the USER INFORMATION, ALERTING, CONNECT, DISCONNECT, PROGRESS, RELEASE and RELEASE COMPLETE messages the user-user information element has a maximum size of 131 octets in a GSM PLMN.\nIn other networks than GSM PLMNs the maximum size of the user-user information element is 35 or 131 octets in the messages mentioned above. The evolution to a single maximum value is the long term objective; the exact maximum value is the subject of further study.\nNOTE:\tThe user-user information element is transported transparently through a GSM PLMN.\n\n\nFigure 10.5.114/3GPP TS 24.008 User-user information element\n\nTable 10.5.131/3GPP TS 24.008: User-user information element\n\nThe purpose of the Alerting Pattern information element is to allow the network to convey information related to the alert to be used by the MS (see 3GPP TS 22.101 [8]).\nThe Alerting Pattern information element is coded as shown in figure 10.5.115/3GPP TS 24.008 and table 10.5.132/3GPP TS 24.008.\nThe Alerting Pattern IE is a type 4 information element with 3 octet length.\n\n\nFigure 10.5.115/3GPP TS 24.008 Alerting Pattern information element\nTable 10.5.132/3GPP TS 24.008: Alerting Pattern information element\n\nAlerting pattern 1, 2 and 3 indicate alerting levels 0, 1 and 2.\nAlerting pattern 5 to 9 indicate alerting categories 1 to 5\nThe purpose of the Allowed actions information element is to provide the mobile station with information about further allowed procedures.\nThe Allowed actions information element is coded as shown in figure 10.5.116/3GPP TS 24.008 and table 10.5.133/3GPP TS 24.008.\nThe Allowed actions is a type 4 information element with 3 octets length.\n\n\nFigure 10.5.116/3GPP TS 24.008 Allowed actions information element\nTable 10.5.133/3GPP TS 24.008: Allowed actions information element\n\nThe purpose of the stream identifier (SI) information element is to associate a particular call with a Radio Access Bearer (RAB), and to identify whether a new traffic channel shall be assigned within the interface controlled by these signalling procedures. The SI value indicated in the CC protocol shall be sent in the RAB setup message. And mobile station is informed the relationship between the call and the RAB.\nThe Stream identifier information element is coded as shown in figure 10.5.117/3GPP TS 24.008 and table 10.5.134/3GPP TS 24.008.\nThe Stream Identifier is a type 4 information element with 3 octets length.\n\n\nFigure 10.5.117/3GPP TS 24.008: Stream Identifier information element\nTable 10.5.134/3GPP TS 24.008: Stream Identifier information element\n\nThe purpose of the Network Call Control Capabilities information element is to identify the call control capabilities of the network. The contents might affect the manner in which the mobile station handles the call.\nThe Network Call Control Capabilities information element is coded as shown in figure 10.5.118/3GPP TS 24.008 and table 10.5.135/3GPP TS 24.008.\nThe Network Call Control Capabilities is a type 4 information element with a length of 3 octets.\n\n\nFigure 10.5.118/3GPP TS 24.008 Network Call Control Capabilities information element\nTable 10.5.135/3GPP TS 24.008: Network Call Control Capabilities\n\nCause of No CLI information element provides the mobile station the detailed reason why Calling party BCD number is not notified (see 3GPP TS 24.081 [25]).\nThe Cause of No CLI information element is coded as shown in figure 10.5.118a/3GPP TS 24.008 and table 10.5.135a/3GPP TS 24.008.\nThe Cause of No CLI is a type 4 information element with the length of 3 octets.\n\n\nFigure 10.5.118a/3GPP TS 24.008 Cause of No CLI information element\nTable 10.5.135a/3GPP TS 24.008: Cause of No CLI information element\n\nThe purpose of the Supported Codec List information element is to provide the network with information about the speech codecs supported by the mobile.\nThe Supported Codec List information element is coded as shown in figure 10.5.118c/3GPP TS 24.008.\nThe Supported Codec List information element is a type 4 information element with a minimum length of 5 octets and a maximum length of m+3 octets.\nSpeech codec information belonging to GERAN and UTRAN shall be conveyed by this information element.\n\n\nFigure 10.5.118c/3GPP TS 24.008 Supported codec list information element\nTable 10.5.4.135c/3GPP TS 24.008: Supported Codec List information element\n\nThe purpose of the Service category information element is to provide the network with information about services invoked by the user equipment.\nThe Service category information element is coded as shown in figure 10.5.118d/3GPP TS 24.008 and table 10.5.135d/3GPP TS 24.008\nThe Service category is a type 4 information element with a minimum length of 3 octets.\n\n\nFigure 10.5.118d/3GPP TS 24.008 Service Category information element\nTable 10.5.135d/3GPP TS 24.008: Service Category information element\nEmergency Service Category Value (octet 3)\nThe meaning of the Emergency Category Value is derived from the following settings (see 3GPP TS 22.101 [8] clause 10):\nBit 1\tPolice\nBit 2\tAmbulance\nBit 3\tFire Brigade\nBit 4\tMarine Guard\nBit 5\tMountain Rescue\nBit 6\tmanually initiated eCall\nBit 7\tautomatically initiated eCall\nBit 8\tis spare and set to \"0\"\n\n\nA mobile station not initiating an eCall shall set bit 6 and bit 7 to \"0\" and may set one or more of bit 1, bit 2, bit 3, bit 4 or bit 5 to \"1\". If more than one of these bits is set to \"1\", routing to a combined emergency centre (e.g. ambulance and fire brigade in Japan) is required.\n\nA mobile station initiating an eCall shall set either bit 6 or bit 7 to \"1\" and shall set all other bits to \"0\". A MSC supporting eCall shall use the information indicated in bit 6 and bit 7 to route the manually or automatically initiated eCall to an operator defined emergency call centre.\n\nIf the MSC can not match the received service category to any of the emergency centres, or if no bit is set to \"1\", the MSC shall route the emergency call to an operator defined default emergency centre.\n\n\nThe purpose of the Redial information element is to indicate to the network that a call is the result of a redial attempt to switch from speech to multimedia or vice-versa.\nThe Redial information element is coded as shown in figure 10.5.118e/3GPP TS 24.008\nThe Redial is a type 2 information element with a length of 1 octet.\n\n\nFigure 10.5.118e/3GPP TS 24.008 Redial information element\n\nThe purpose of the Network-initiated Service Upgrade indicator information element is to indicate to the mobile station that the in-call modification procedure is due to a network-initiated upgrade from speech to UDI/RDI multimedia  (see 3GPP TS 23.172 [97]).\nThe Network- initiated Service Upgrade indicator information element is coded as shown in figure 10.5.118f/3GPP TS 24.008.\nThe Network-initiated Service Upgrade indicator is a type 2 information element with a length of 1 octet.\n\n\nFigure 10.5.118f/3GPP TS 24.008 Network-initiated Service Upgrade indicator information element\n\n",
                            "figures_meta_data": [],
                            "tables": [
                                {
                                    "description": "",
                                    "table number": 213,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 10.5.98/3GPP TS 24.008: Locking shift element",
                                    "table number": 214,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "",
                                    "table number": 215,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 10.5.99/3GPP TS 24.008: Non-locking shift element",
                                    "table number": 216,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "",
                                    "table number": 217,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 10.5.100/3GPP TS 24.008: Auxiliary states information element",
                                    "table number": 218,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 10.5.101/3GPP TS 24.008: Auxiliary states information element",
                                    "table number": 219,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "",
                                    "table number": 220,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 10.5.101a/3GPP TS 24.008: Backup bearer capability information element",
                                    "table number": 221,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 10.5.101b/3GPP TS 24.008: Backup bearer capability information element",
                                    "table number": 222,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 10.5.101c/3GPP TS 24.008: Backup bearer capability information element",
                                    "table number": 223,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 10.5.101d/3GPP TS 24.008: Backup bearer capability information element",
                                    "table number": 224,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 10.5.101e/3GPP TS 24.008: Backup bearer capability information element",
                                    "table number": 225,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 10.5.101f/3GPP TS 24.008: Backup bearer capability information element",
                                    "table number": 226,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 10.5.101g/3GPP TS 24.008: Backup bearer capability information element",
                                    "table number": 227,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 10.5.101h/3GPP TS 24.008: Backup bearer capability information element",
                                    "table number": 228,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 10.5.101i/3GPP TS 24.008: Backup bearer capability information element",
                                    "table number": 229,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 10.5.101j/3GPP TS 24.008: Backup bearer capability information element",
                                    "table number": 230,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 10.5.101k/3GPP TS 24.008: Backup bearer capability information element",
                                    "table number": 231,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 10.5.101l/3GPP TS 24.008: Backup bearer capability information element",
                                    "table number": 232,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 10.5.101m/3GPP TS 24.008: Backup bearer capability information element",
                                    "table number": 233,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "",
                                    "table number": 234,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 10.5.102/3GPP TS 24.008: Bearer capability information element",
                                    "table number": 235,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 10.5.102/3GPP TS 24.008: Bearer capability information element (continued)",
                                    "table number": 236,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 10.5.103/3GPP TS 24.008 Bearer capability information element",
                                    "table number": 237,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 10.5.104/3GPP TS 24.008: Bearer capability information element",
                                    "table number": 238,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 10.5.105/3GPP TS 24.008: Bearer capability information element",
                                    "table number": 239,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 10.5.106/3GPP TS 24.008: Bearer capability information element",
                                    "table number": 240,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 10.5.107/3GPP TS 24.008: Bearer capability information element",
                                    "table number": 241,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 10.5.108/3GPP TS 24.008: Bearer capability information element",
                                    "table number": 242,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 10.5.109/3GPP TS 24.008: Bearer capability information element",
                                    "table number": 243,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 10.5.110/3GPP TS 24.008: Bearer capability information element",
                                    "table number": 244,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 10.5.111/3GPP TS 24.008: Bearer capability information element",
                                    "table number": 245,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 10.5.112/3GPP TS 24.008: Bearer capability information element",
                                    "table number": 246,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 10.5.113/3GPP TS 24.008: Bearer capability information element",
                                    "table number": 247,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 10.5.114/3GPP TS 24.008: Bearer capability information element",
                                    "table number": 248,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 10.5.115/3GPP TS 24.008: Bearer capability information element",
                                    "table number": 249,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 10.5.115a/3GPP TS 24.008: Bearer capability information element",
                                    "table number": 250,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "",
                                    "table number": 251,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 10.5.116/3GPP TS 24.008: Call Control Capabilities",
                                    "table number": 252,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "",
                                    "table number": 253,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 10.5.117/3GPP TS 24.008: Call state information element",
                                    "table number": 254,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "",
                                    "table number": 255,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 10.5.118/3GPP TS 24.008: Called party BCD number",
                                    "table number": 256,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 10.5.118/3GPP TS 24.008: Called party BCD number (continued)",
                                    "table number": 257,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 10.5.118/3GPP TS 24.008: Called party BCD number (continued)",
                                    "table number": 258,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "",
                                    "table number": 259,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 10.5.119/3GPP TS 24.008: Called party subaddress",
                                    "table number": 260,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "",
                                    "table number": 261,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 10.5.120/3GPP TS 24.008: Calling party BCD number",
                                    "table number": 262,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "",
                                    "table number": 263,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 10.5.121/3GPP TS 24.008: Calling party subaddress",
                                    "table number": 264,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "",
                                    "table number": 265,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 10.5.122/3GPP TS 24.008: Cause information element",
                                    "table number": 266,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 10.5.122/3GPP TS 24.008: Cause information element (continued)",
                                    "table number": 267,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 10.5.123/3GPP TS 24.008: Cause information element values",
                                    "table number": 268,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 10.5.123/3GPP TS 24.008 (concluded): Cause information element values",
                                    "table number": 269,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "",
                                    "table number": 270,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "",
                                    "table number": 271,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "",
                                    "table number": 272,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 10.5.124/3GPP TS 24.008: Congestion level information element",
                                    "table number": 273,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "",
                                    "table number": 274,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "",
                                    "table number": 275,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "",
                                    "table number": 276,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "",
                                    "table number": 277,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 10.5.125/3GPP TS 24.008: High layer compatibility information element",
                                    "table number": 278,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "",
                                    "table number": 279,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "",
                                    "table number": 280,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "",
                                    "table number": 281,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "",
                                    "table number": 282,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 10.5.126/3GPP TS 24.008: Notification indicator information element",
                                    "table number": 283,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "",
                                    "table number": 284,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 10.5.127/3GPP TS 24.008: Progress indicator information element",
                                    "table number": 285,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "",
                                    "table number": 286,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 10.5.128/3GPP TS 24.008: Recall type information element",
                                    "table number": 287,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "",
                                    "table number": 288,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "",
                                    "table number": 289,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "",
                                    "table number": 290,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 10.5.129/3GPP TS 24.008: Repeat indicator information element",
                                    "table number": 291,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "",
                                    "table number": 292,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "",
                                    "table number": 293,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "",
                                    "table number": 294,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 10.5.130/3GPP TS 24.008: Signal information element",
                                    "table number": 295,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "",
                                    "table number": 296,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "",
                                    "table number": 297,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 10.5.131/3GPP TS 24.008: User-user information element",
                                    "table number": 298,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "",
                                    "table number": 299,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 10.5.132/3GPP TS 24.008: Alerting Pattern information element",
                                    "table number": 300,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "",
                                    "table number": 301,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 10.5.133/3GPP TS 24.008: Allowed actions information element",
                                    "table number": 302,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "",
                                    "table number": 303,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 10.5.134/3GPP TS 24.008: Stream Identifier information element",
                                    "table number": 304,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "",
                                    "table number": 305,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 10.5.135/3GPP TS 24.008: Network Call Control Capabilities",
                                    "table number": 306,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "",
                                    "table number": 307,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 10.5.135a/3GPP TS 24.008: Cause of No CLI information element",
                                    "table number": 308,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "",
                                    "table number": 309,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 10.5.4.135c/3GPP TS 24.008: Supported Codec List information element",
                                    "table number": 310,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "",
                                    "table number": 311,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "",
                                    "table number": 312,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "",
                                    "table number": 313,
                                    "summary": "",
                                    "name": ""
                                }
                            ]
                        },
                        {
                            "title": "10.5.5\tGPRS mobility management information elements",
                            "text_content": "See subclause 9.9.3.0B in 3GPP TS 24.301 [120].\nThe purpose of the attach result information element is to specify the result of a GPRS attach procedure.\nThe attach result is a type 1 information element.\nThe attach result information element is coded as shown in figure 10.5.117a/3GPP TS 24.008 and table 10.5.134a/3GPP TS 24.008.\n\n\nFigure 10.5.117a/3GPP TS 24.008: Attach result information element\nTable 10.5.134a/3GPP TS 24.008: Attach result information element\n\nThe purpose of the attach type information element is to indicate the type of the requested attach, i.e. whether the MS wants to perform a GPRS or combined GPRS attach.\nThe attach type is a type 1 information element.\nThe attach type information element is coded as shown in figure 10.5.117b/3GPP TS 24.008 and table 10.5.135b/3GPP TS 24.008.\n\n\nFigure 10.5.117b/3GPP TS 24.008: Attach type information element\nTable 10.5.135b/3GPP TS 24.008: Attach type information element\n\nThe purpose of the ciphering algorithm information element is to specify which ciphering algorithm shall be used.\nThe ciphering algorithm is a type 1 information element.\nThe ciphering algorithm information element is coded as shown in figure 10.5.119/3GPP TS 24.008 and table 10.5.136/3GPP TS 24.008.\n\n\nFigure 10.5.119/3GPP TS 24.008: Ciphering algorithm information element\nTable 10.5.136/3GPP TS 24.008: Ciphering algorithm information element\n\nThe purpose of the integrity algorithm information element is to specify which integrity algorithm shall be used.\nThe integrity algorithm is a type 1 information element.\nThe integrity algorithm information element is coded as shown in figure 10.5.5.3a-1/3GPP TS 24.008 and table 10.5.5.3a-1/3GPP TS 24.008.\n\n\nFigure 10.5.5.3a-1/3GPP TS 24.008: Integrity algorithm information element\nTable 10.5.5.3a-1/3GPP TS 24.008: Integrity algorithm information element\n\nThe purpose of the TMSI status information element is to indicate whether a valid TMSI is available in the MS or not.\nThe TMSI status is a type 1 information element.\nThe TMSI status information element is coded as shown in figure 10.5.120/3GPP TS 24.008 and table 10.5.137/3GPP TS 24.008.\n\n\nFigure 10.5.120/3GPP TS 24.008: TMSI status information element\nTable 10.5.137/3GPP TS 24.008: TMSI status information element\n\nThe purpose of the detach type information element is to indicate which type of detach is requested by the MS. In the network to MS direction the detach type information element is used to indicate the reason why a detach request is sent.\nThe detach type is a type 1 information element.\nThe detach type information element is coded as shown in figure 10.5.121/3GPP TS 24.008 and table 10.5.138/3GPP TS 24.008.\n\n\nFigure 10.5.121/3GPP TS 24.008: Detach type information element\nTable 10.5.138/3GPP TS 24.008: Detach type information element\n\nThe purpose of the DRX parameter information element is to indicate whether the MS uses DRX mode or not.\nThe DRX parameter is a type 3 information element with a length of 3 octets.\nThe value part of a DRX parameter information element is coded as shown in table 10.5.139/3GPP TS 24.008.\n\n\nFigure 10.5.122/3GPP TS 24.008: DRX parameter information element\nTable 10.5.139/3GPP TS 24.008: DRX parameter information element\n\nThe purpose of the force to standby information element is to force the MS to stop the READY timer in order to prevent the MS to perform cell updates.\nIn Iu mode, the network shall always indicate force to standby not indicated in the force to standby information element.\nThe force to standby is a type 1 information element.\nThe force to standby information element is coded as shown in figure 10.5.123/3GPP TS 24.008 and table 10.5.140/3GPP TS 24.008.\n\n\nFigure 10.5.123/3GPP TS 24.008: Force to standby information element\nTable 10.5.140/3GPP TS 24.008: Force to standby information element\n\nThe purpose of the P-TMSI signature information element is to identify a GMM context of an MS.\nThe P-TMSI signature is a type 3 information element with 4 octets length.\nThe P-TMSI signature information element is coded as shown in figure 10.5.124/3GPP TS 24.008 and table 10.5.141/3GPP TS 24.008.\n\n\nFigure 10.5.124/3GPP TS 24.008: P-TMSI signature information element\nTable 10.5.141/3GPP TS 24.008: P-TMSI signature information element\n\nThe purpose of the P-TMSI signature 2 information element is to identify a GMM context of an MS.\nThe P-TMSI signature 2 is a type 4 information element with 5 octets length.\nThe P-TMSI signature 2 information element is coded as shown in figure 10.5.124a/3GPP TS 24.008 and table 10.5.141a/3GPP TS 24.008.\n\n\nFigure 10.5.124a/3GPP TS 24.008: P-TMSI signature 2 information element\nTable 10.5.141a/3GPP TS 24.008: P-TMSI signature 2 information element\n\nThe purpose of the identity type 2 information element is to specify which identity is requested.\nThe identity type 2 is a type 1 information element.\nThe identity type 2 information element is coded as shown in figure 10.5.125/3GPP TS 24.008 and table 10.5.142/3GPP TS 24.008.\n\n\nFigure 10.5.125/3GPP TS 24.008: Identity type 2 information element\nTable 10.5.142/3GPP TS 24.008: Identity type 2 information element\n\nThe purpose of the IMEISV request information element is to indicate that the IMEISV shall be included by the MS in the authentication and ciphering response message.\nThe IMEISV request is a type 1 information element.\nThe IMEISV request information element is coded as shown in figure 10.5.126/3GPP TS 24.008 and table 10.5.143/3GPP TS 24.008.\n\n\nFigure 10.5.126/3GPP TS 24.008: IMEISV request information element\nTable 10.5.143/3GPP TS 24.008: IMEISV request information element\n\nThe purpose of the Receive N-PDU Numbers list information element is to specify the current SNDCP Receive N-PDU Number values.\nThe Receive N-PDU Number list is a type 4 information element with a length of 4 to 19 octets.\nThe value part of a Receive N-PDU Number list information element is coded as shown in figure 10.5.127/3GPP TS 24.008 and table 10.5.144/3GPP TS 24.008.\n\n\nFigure 10.5.127/3GPP TS 24.008: Receive N-PDU Number list information element\nTable 10.5.144/3GPP TS 24.008: Receive N-PDU Number list information element\n\nThe purpose of the MS network capability information element is to provide the network with information concerning aspects of the mobile station related to GPRS. The contents might affect the manner in which the network handles the operation of the mobile station. The MS network capability information indicates general mobile station characteristics and it shall therefore, except for fields explicitly indicated, be independent of the frequency band of the channel it is sent on.\nThe MS network capability is a type 4 information element with a maximum of 10 octets length.\nThe value part of a MS network capabilityinformation element is coded as shown in figure 10.5.128/3GPP TS 24.008 and table 10.5.145/3GPP TS 24.008.\nNOTE:\tThe requirements for the support of the GEA algorithms in the MS are specified in 3GPP TS 43.020 [13].\n\n\nFigure 10.5.128/3GPP TS 24.008 MS network capability information element\nTable 10.5.145/3GPP TS 24.008 MS network capability information element\n\nThe purpose of the MS Radio Access capability information element is to provide the radio part of the network with information concerning radio aspects of the mobile station. The contents might affect the manner in which the network handles the operation of the mobile station.\nThe MS Radio Access capability is a type 4 information element, with a maximum length of 52 octets.\nThe MS Radio Access capability information element is coded as shown in figure 10.5.128a/3GPP TS 24.008 and table 10.5.146/3GPP TS 24.008.\nFor the indication of the radio access capabilities the following conditions shall apply:\n-\tAmong the three Access Type Technologies GSM 900-P, GSM 900-E and GSM 900-R only one shall be present.\n-\tDue to shared radio frequency channel numbers between GSM 1800 and GSM 1900, the mobile station should provide the relevant radio access capability for either GSM 1800 band OR GSM 1900 band, not both.\n-\tThe MS shall indicate its supported Access Technology Types during a single MM procedure.\n-\tIf the alternative coding by using the Additional access technologies struct is chosen by the mobile station, the mobile station shall indicate its radio access capability for the serving BCCH frequency band in the first included Access capabilities struct, if this information element is not sent in response to an Access Technologies Request from the network or if none of the requested Access Technology Types is supported by the MS. Otherwise, the mobile station shall include the radio access capabilities for the frequency bands it supports in the order of priority requested by the network (see 3GPP TS 44.060 [76]).\n-\tThe first Access Technology Type shall not be set to \"1111\".\nFor error handling the following shall apply:\n\tIf a received Access Technology Type is unknown to the receiver, it shall ignore all the corresponding fields.\n\tIf within a known Access Technology Type a receiver recognizes an unknown field it shall ignore it.\n\tFor more details about error handling of MS radio access capability see 3GPP TS 48.018 [86].\nNOTE:\tThe requirements for the support of the A5 algorithms in the MS are specified in 3GPP TS 43.020 [13].\n\n\nFigure 10.5.128a/3GPP TS 24.008 MS Radio Access Capability information element\nTable 10.5.146/3GPP TS 24.008: MS Radio Access Capability Information Element\n< MS RA capability value part > ::=\n< MS RA capability value part struct >\n<spare bits>**; -- may be used for future enhancements\n\n<MS RA capability value part struct >::=  --recursive structure allows any number of Access technologies\n{\t{\t< Access Technology Type: bit (4) > exclude 1111\n< Access capabilities : <Access capabilities struct> > }\n\n|\t{\t< Access Technology Type: bit (4) == 1111 >\t-- structure adding Access technologies with same capabilities\n< Length : bit (7) >\t\t-- length in bits of list of Additional access technologies and spare bits\n< bit (val (Length))\n& {\n{ 1 < Additional access technologies: < Additional access technologies struct > > } ** 0\n<spare bits>**\n} >\n}\n}\n\n{ 0 | 1 <MS RA capability  value part struct> } ;\n\n< Additional access technologies struct > ::=\n< Access Technology Type : bit (4) >\n< GMSK Power Class : bit (3) >\n< 8PSK Power Class : bit (2) > ;\n\n< Access capabilities struct > ::=\n< Length : bit (7) > -- length in bits of Content and spare bits\n< bit (val (Length))\n& {\n<Access capabilities : <Content>>\n<spare bits>**\n} > ; -- expands to the indicated length\n\n< Content > ::=\n< RF Power Capability : bit (3) >\n\t{ 0 | 1 <A5 bits : <A5 bits> > }\t-- zero means that the same values apply for parameters as in the immediately preceding Access capabilities field within this IE\n\t< ES IND : bit >\n< PS : bit >\n< VGCS : bit >\n< VBS : bit >\n{ 0 | 1 < Multislot capability : Multislot capability struct > } -- zero means that the same values for multislot parameters as given in an earlier Access capabilities field within this IE apply also here\n-- Additions in release 99\n{ 0 | 1 < 8PSK Power Capability : bit(2) >}\n< COMPACT Interference Measurement Capability : bit >\n< Revision Level Indicator : bit >\n< UMTS FDD Radio Access Technology Capability : bit >\t\t\t\t-- 3G RAT\n< UMTS 3.84 Mcps TDD Radio Access Technology Capability : bit >\t-- 3G RAT\n< CDMA 2000 Radio Access Technology Capability : bit >\t\t\t\t-- 3G RAT\n-- Additions in release 4\n< UMTS 1.28 Mcps TDD Radio Access Technology Capability: bit >\t-- 3G RAT\n< GERAN Feature Package 1 : bit >\n{ 0 | 1 < Extended DTM GPRS Multi Slot Class : bit(2) >\n< Extended DTM EGPRS Multi Slot Class : bit(2) > }\n< Modulation based multislot class support : bit >\n-- Additions in release 5\n{ 0 | 1 < High Multislot Capability : bit(2) > }\n0\t-- The value '1' was allocated in an earlier version of the protocol and shall not be used.\n< GMSK Multislot Power Profile : bit (2) >\n< 8-PSK Multislot Power Profile : bit (2) >\n-- Additions in release 6\n< Multiple TBF Capability : bit >\n< Downlink Advanced Receiver Performance : bit(2) >\n< Extended RLC/MAC Control Message Segmentation Capability : bit >\n< DTM Enhancements Capability : bit >\n\t{ 0 | 1\t< DTM GPRS High Multi Slot Class : bit(3) >\n{ 0 | 1 < DTM EGPRS High Multi Slot Class : bit(3) > } }\n< PS Handover Capability : bit >\n-- Additions in release 7\n< DTM Handover Capability : bit >\n{ 0 | 1 < Multislot Capability Reduction for Downlink Dual Carrier: bit (3) >\n< Downlink Dual Carrier for DTM Capability : bit> }\n< Flexible Timeslot Assignment : bit >\n< GAN PS Handover Capability : bit >\n< RLC Non-persistent Mode : bit >\n< Reduced Latency Capability : bit >\n< Uplink EGPRS2 : bit(2) >\n< Downlink EGPRS2 : bit(2) >\n-- Additions in release 8\n< E-UTRA FDD support : bit >\n< E-UTRA TDD support : bit >\n< GERAN to E-UTRA support in GERAN packet transfer mode: bit(2) >\n< Priority-based reselection support : bit >\n-- Additions in release 9\n< Enhanced Flexible Timeslot Assignment : Enhanced Flexible Timeslot Assignment struct>\n< Indication of Upper Layer PDU Start Capability for RLC UM : bit >\n< EMST Capability : bit >\n< MTTI Capability : bit >\n< UTRA CSG Cells Reporting : bit >\n< E-UTRA CSG Cells Reporting : bit >\n-- Additions in release 10\n< DTR Capability : bit >\n< EMSR Capability : bit >\n< Fast Downlink Frequency Switching Capability : bit >\n< TIGHTER Capability : bit(2) >\n-- Additions in release 11\n< FANR Capability : bit >\n< IPA Capability : bit>\n< GERAN Network Sharing support : bit>\n< E-UTRA Wideband RSRQ measurements support : bit>\n-- Additions in release 12\n\t< UTRA Multiple Frequency Band Indicators support : bit >\n< E-UTRA Multiple Frequency Band Indicators support : bit >\n{ 0\t\t\t-- DLMC not supported\n| 1 < DLMC Capability : DLMC Capability struct > }\n< Extended TSC Set Capability support : bit >\n-- Late addition of a release 11 feature\n< Extended EARFCN value range: bit>\n-- Additions in release 13\n< (EC-)PCH monitoring support: bit(2)>\n-- Additions in release 14\n{ 0\t\t\t-- Default requirement as specified in TS 45.010 applies\n| 1 < MS Sync Accuracy: bit (4) > }\n< EC uplink coverage enhancement support : bit (1)>\n-- Additions in release 15\n< MTA Access Security support: bit(1) >\n< EC paging indication channel monitoring support: bit(1) >;\n-- error: struct too short, assume features do not exist\n-- error: struct too long, ignore data and jump to next Access technology\n\nTable 10.5.146/3GPP TS 24.008 (continued): MS Radio Access Capability IE\n\nTable 10.5.146/3GPP TS 24.008 (concluded): MS Radio Access Capability IE\n\n\n\nThis is intentionally left spare.\nThe purpose of the GMM cause information element is to indicate the reason why a GMM request from the mobile station is rejected by the network.\nThe GMM cause information element is coded as shown in figure 10.5.129/3GPP TS 24.008 and table 10.5.147/3GPP TS 24.008.\nThe GMM cause is a type 3 information element with 2 octets length.\n\n\nFigure 10.5.129/3GPP TS 24.008: GMM cause information element\nTable 10.5.147/3GPP TS 24.008: GMM cause information element\n\nThe purpose of the routing area identification information element is to provide an unambiguous identification of routing areas within the GPRS coverage area.\nThe routing area identification is a type 3 information element with 7 octets length.\nThe routing area identification information element is coded as shown in figure 10.5.130/3GPP TS 24.008 and table 10.5.148/3GPP TS 24.008.\n\n\nFigure 10.5.130/3GPP TS 24.008: Routing area identification information element\nTable 10.5.148/3GPP TS 24.008: Routing area identification information element\n\nThe purpose of the Routing area identification 2 information element is to provide an unambiguous identification of routing areas within the GPRS coverage area.\nThe Routing area identification 2 is a type 4 information element with a length of 8 octets.\nThe Routing area identification 2 information element is coded as shown in figure 10.5.130a/3GPP TS 24.008 and table 10.5.148a/3GPP TS 24.008.\n\n\nFigure 10.5.130a/3GPP TS 24.008: Routing area identification 2 information element\nTable 10.5.148a/3GPP TS 24.008: Routing area identification 2 information element\n\nThis is intentionally left spare.\nThe purpose of the update result information element is to specify the result of the associated updating procedure.\nThe update result is a type 1 information element.\nThe update result information element is coded as shown in figure 10.5.131/3GPP TS 24.008 and table 10.5.149/3GPP TS 24.008.\n\n\nFigure 10.5.131/3GPP TS 24.008: Update result information element\nTable 10.5.149/3GPP TS 24.008: Update result information element\n\nThe purpose of the update type information element is to specify the area the updating procedure is associated with.\nThe update type is a type 1 information element.\nThe update type information element is coded as shown in figure 10.5.132/3GPP TS 24.008 and table 10.5.150/3GPP TS 24.008.\n\n\nFigure 10.5.132/3GPP TS 24.008: Update type information element\nTable 10.5.150/3GPP TS 24.008: Update type information element\n\nThe purpose of the A&C reference number information element is to indicate to the network in the AUTHENTICATION AND CIPHERING RESPONSE message which AUTHENTICATION AND CIPHERING REQUEST message the MS is replying to.\nThe A&C reference number is a type 1 information element.\nThe A&C reference number information element is coded as shown in figure 10.5.134/3GPP TS 24.008 and table 10.5.152/3GPP TS 24.008.\n\n\nFigure 10.5.134/3GPP TS 24.008: A&C reference number information element\nTable 10.5.152/3GPP TS 24.008: A&C reference number information element\n\nThe purpose of the service type information element is to specify the purpose of the Service request procedure.\nThe service type is a type 1 information element.\nThe service type information element is coded as shown in figure 10.5.135/3GPP TS 24.008 and table 10.5.153a/3GPP TS 24.008.\n\n\nFigure 10.5.135/3GPP TS 24.008: Service type information element\nTable 10.5.153a/3GPP TS 24.008: Service type information element\n\nThe purpose of the Cell Notification information element is to indicate that the Cell Notification is supported by the network and shall be then used by MS.\nThe Cell Notification information element is coded as shown in figure 10.5.135a/3GPP TS 24.008.\nThe Cell Notification is a type 2 information element.\n\n\nFigure 10.5.135a/3GPP TS 24.008: Cell Notification information element\n\nThe purpose of the PS LCS Capability element is to indicate the positioning methods and additional positioning capabilities supported by the MS for the provision of location services (LCS) via the PS domain in Gb-mode.\nThe PS LCS Capability is a type 4 information element with a length of 4 octets.\nThe PS LCS Capability element is coded as shown in figure 10.5.135b/3GPP TS 24.008 and table 10.5.153b/3GPP TS 24.008.\n\n\nFigure 10.5.135b/3GPP TS 24.008: PS LCS Capability information element\nTable 10.5.153b/3GPP TS 24.008 PS LCS Capability information element\n\nThe purpose of the network feature support information element is to indicate whether certain features are supported by the network. If this IE is not included then the respective features are not supported.\nThe network feature support is a type 1 information element.\nThe network feature support information element is coded as shown in figure 10.5.135c/3GPP TS 24.008 and table 10.5.153c/3GPP TS 24.008.\n\n\nFigure 10.5.135c/3GPP TS 24.008: Network feature support information element\nTable 10.5.153c/3GPP TS 24.008: Network feature support information element\n\nThe purpose of the Additional network feature support information element is to indicate whether certain features are supported by the network.\nThe Additional network feature support is a type 4 information element with a length of 3 octets.\nThe Additional network feature support information element is coded as shown in figure 10.5.5.23A/3GPP TS 24.008 and table 10.5.5.23A/3GPP TS 24.008.\n\nFigure 10.5.5.23A: Additional network feature support information element\nTable 10.5.5.23A: Additional network feature support information element\n\nThe purpose of the Inter RAT information container information element is to supply the network with Iu mode related information that needs to be transferred at PS inter-system handover to Iu mode (see 3GPP TS 43.129 [113]).\nThe Inter RAT information container information element is coded as shown in figure 10.5.150/3GPP TS 24.008.\nThe Inter RAT information container information element is a type 4 information element with a minimum length of 3 octets and a maximum length of 250 octets.\nThe Inter RAT information container contains:\n-\tpredefined configuration status information;\n-\tmobile station security information to be used after handover to Iu mode, which includes the START-PS value that is stored by the MS at handover from Iu mode to A/Gb mode (see 3GPP TS 33.102 [5a]); and/or\n-\tthe specific Iu mode radio capabilities of the mobile station, i.e. UE RAC (see 3GPP TS 25.331 [23c]).\n\n\nFigure 10.5.150/3GPP TS 24.008: Inter RAT information container information element\nThe value part of the Inter RAT information container information element is the INTER RAT HANDOVER INFO as defined in 3GPP TS 25.331 [23c]. If this field includes padding bits, they are defined in 3GPP TS 25.331 [23c].\nThe purpose of the Requested MS information information element is to indicate whether certain feature-related information is requested from the MS by the network. If this IE is not included then no information is requested.\nThe Requested MS information information element is coded as shown in figure 10.5.151/3GPP TS 24.008 and table 10.5.166/3GPP TS 24.008.\nThe Requested MS information is a type 1 information element.\n\n\nFigure 10.5.151/3GPP TS 24.008: Requested MS information information element\nTable 10.5.166/3GPP TS 24.008: Requested MS information information element\n\nSee subclause 9.9.3.34 in 3GPP TS 24.301 [120].\nThe purpose of the E-UTRAN inter RAT information container information element is to supply the network with E-UTRAN related information that needs to be transferred at Inter-RAT PS handover to E-UTRAN (see 3GPP TS 23.401 [122]).\nThe E-UTRAN inter RAT information container information element is coded as shown in figure 10.5.151/3GPP TS 24.008.\nThe E-UTRAN inter RAT information container information element is a type 4 information element with a minimum length of 3 octets and an upper length limit of 257 octets.\n\n\nFigure 10.5.151/3GPP TS 24.008: E-UTRAN inter RAT information container information element\nThe value part of the E-UTRAN inter RAT information container information element is formatted and coded according to the UE-EUTRA-Capability IE defined in 3GPP TS 36.331 [129].\nThe purpose of the Voice domain preference and UE's usage setting information element is to provide the network with the UE's usage setting and the voice domain preference for WB-S1 mode. The network uses the UE's usage setting and the voice domain preference for E-UTRAN (see 3GPP TS 24.167 [13B]) to select the RFSP index.\nThe UE's usage setting bit indicates the value configured on the ME as defined in 3GPP TS 23.221 [131].\nThe voice domain preference for E-UTRAN bit indicates the value configured on the ME of the Voice domain preference for E-UTRAN as defined in 3GPP TS 24.167 [134].\nThe Voice domain preference and UE's usage setting information element is coded as shown in figure 10.5.151A/3GPP TS 24.008 and table 10.5.166A/3GPP TS 24.008.\n\n\nFigure 10.5.151A/3GPP TS 24.008: Voice domain preference and UE's usage setting information element\nTable 10.5.166A/3GPP TS 24.008: Voice domain preference and UE's usage setting information element\n\nThe purpose of the P-TMSI type information element is to indicate whether the P-TMSI included in the same message in an information element of type mobile identity, or the P-TMSI used by the MS to derive a foreign TLLI (see subclause 4.7.1.4.1) represents a native P-TMSI or a mapped P-TMSI.\nThe P-TMSI type information element information element is coded as shown in figure 10.5.5.29.1 and table 10.5.5.29.1.\nThe P-TMSI type is a type 1 information element.\n\n\nFigure 10.5.5.29.1: P-TMSI type information element\nTable 10.5.5.29.1: P-TMSI type information element\n\nThe purpose of the Location Area Identification 2 information element is to provide an unambiguous identification of location areas within the area covered by the 3GPP system.\nThe Location Area Identification 2 information element is coded as shown in figure 10.5.5.30/3GPP TS 24.008 and table 10.5.5.30/3GPP TS 24.008.\nThe Location Area Identification 2 is a type 4 information element with 7 octets length.\n\nFigure 10.5.5.30/3GPP TS 24.008: Location Area Identification 2 information element\nTable 10.5.5.30/3GPP TS 24.008: Location Area Identification 2 information element\n\nThe purpose of the Network resource identifier container information element is to provide a part of the allocated TMSI that the network will use to determine the actual NRI.\nThe Network resource identifier container is a type 4 information element with a length of 4 octets.\nThe Network resource identifier container information element is coded as shown in figure 10.5.5.31/3GPP TS 24.008 and table 10.5.5.31/3GPP TS 24.008.\n\n\nFigure 10.5.5.31/3GPP TS 24.008 Network resource identifier container information element\nTable 10.5.5.31/3GPP TS 24.008: Network resource identifier container information element\n\nThe purpose of the Extended DRX parameters information element is to indicate that the MS wants to use eDRX and for the network to indicate the Paging Time Window length value and the extended DRX cycle value to be used for eDRX.\nThe Extended DRX parameters is a type 4 information element with a minimum length of 3 octets and a maximum length of 4 octets.\nThe Extended DRX parameters information element is coded as shown in figure 10.5.5.32/3GPP TS 24.008 and table 10.5.5.32/3GPP TS 24.008.\n\nFigure 10.5.5.32/3GPP TS 24.008: Extended DRX parameters information element\n\nTable 10.5.5.32/3GPP TS 24.008: Extended DRX parameters information element\n\nThe purpose of the Message authentication code information element is to protect the integrity of a NAS message.\nThe Message authentication code is a type 3 information element with 6 octets length.\nThe Message authentication code information element is coded as shown in figure 10.5.5.33-1/3GPP TS 24.008 and table 10.5.5.33-1/3GPP TS 24.008.\n\n\nFigure 10.5.5.33-1/3GPP TS 24.008: Message authentication code information element\nTable 10.5.5.33-1/3GPP TS 24.008: Message authentication code information element\n\nThe purpose of the User Plane integrity indicator information element is to indicate to the MS that it shall integrity protect user plane data in LLC layer.\nThe User Plane integrity indicator is allocated by the network and sent with the ATTACH ACCEPT message or ROUTING AREA UPDATE ACCEPT message to the mobile station.\nThe User Plane integrity indicator information element is coded as shown in figure 10.5.5.34-1/3GPP TS 24.008 and table 10.5.5.34-1/3GPP TS 24.008.\nIn A/Gb mode, in the case when a UMTS security context is established and if the MS supports integrity protection, , the purpose of the User Plane integrity indicator information element is to request the MS to start integrity protection of user plane data in LLC layer.\nThe User Plane integrity indicator is a type 1 information element.\n\n\nFigure 10.5.5.34-1/3GPP TS 24.008 User Plane integrity indicator information element\nTable 10.5.5.34-1/3GPP TS 24.008: User Plane integrity indicator information element\n\nThe purpose of the DCN-ID information element is to provide a DCN-ID for the registered PLMN to the MS.\nThe DCN-ID is a type 4 information element with 4 octets length.\nThe DCN-ID information element is coded as shown in figure 10.5.5.35-1/3GPP TS 24.008 and table 10.5.5.35-1/3GPP TS 24.008.\n\n\nFigure 10.5.5.35-1/3GPP TS 24.008: DCN-ID information element\nTable 10.5.5.35-1/3GPP TS 24.008: DCN-ID information element\n\nThe purpose of the PLMN identity of the CN operator information element is to indicate the PLMN identity of the CN operator that has accepted the GPRS attach request or routing area update request in a shared network or in a multi-operator core network (MOCN) with common GERAN.\nThe PLMN identity of the CN operator is a type 4 information element with 5 octets length.\nThe PLMN identity of the CN operator information element is coded as shown in figure 10.5.5.36-1/3GPP TS 24.008 and table 10.5.5.36-1/3GPP TS 24.008.\n\nFigure 10.5.5.36-1/3GPP TS 24.008 PLMN identity of the CN operator information element\nTable 10.5.5.36-1/3GPP TS 24.008: PLMN identity of the CN operator information element\n\nThe purpose of the Non-3GPP NW provided policies information element is to indicate to the MS whether emergency numbers provided via non-3GPP access (see 3GPP TS 24.302 [156]) can be used to initiate UE detected emergency calls.\nThe Non-3GPP NW provided policies is indicated by the network and sent with the ATTACH ACCEPT message or ROUTING AREA UPDATE ACCEPT message to the mobile station.\nThe Non-3GPP NW provided policies information element is coded as shown in figure 10.5.5.37-1/3GPP TS 24.008 and table 10.5.5.37-1/3GPP TS 24.008.\nThe Non-3GPP NW provided policies is a type 1 information element.\n\n\nFigure 10.5.5.37-1/3GPP TS 24.008 Non-3GPP NW provided policies IE\nTable 10.5.5.37-1/3GPP TS 24.008: Non-3GPP NW provided policies IE\n\n",
                            "figures_meta_data": [],
                            "tables": [
                                {
                                    "description": "",
                                    "table number": 314,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 10.5.134a/3GPP TS 24.008: Attach result information element",
                                    "table number": 315,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "",
                                    "table number": 316,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 10.5.135b/3GPP TS 24.008: Attach type information element",
                                    "table number": 317,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "",
                                    "table number": 318,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 10.5.136/3GPP TS 24.008: Ciphering algorithm information element",
                                    "table number": 319,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "",
                                    "table number": 320,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 10.5.5.3a-1/3GPP TS 24.008: Integrity algorithm information element",
                                    "table number": 321,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "",
                                    "table number": 322,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 10.5.137/3GPP TS 24.008: TMSI status information element",
                                    "table number": 323,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "",
                                    "table number": 324,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 10.5.138/3GPP TS 24.008: Detach type information element",
                                    "table number": 325,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "",
                                    "table number": 326,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 10.5.139/3GPP TS 24.008: DRX parameter information element",
                                    "table number": 327,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "",
                                    "table number": 328,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 10.5.140/3GPP TS 24.008: Force to standby information element",
                                    "table number": 329,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "",
                                    "table number": 330,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 10.5.141/3GPP TS 24.008: P-TMSI signature information element",
                                    "table number": 331,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "",
                                    "table number": 332,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 10.5.141a/3GPP TS 24.008: P-TMSI signature 2 information element",
                                    "table number": 333,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "",
                                    "table number": 334,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 10.5.142/3GPP TS 24.008: Identity type 2 information element",
                                    "table number": 335,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "",
                                    "table number": 336,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 10.5.143/3GPP TS 24.008: IMEISV request information element",
                                    "table number": 337,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "",
                                    "table number": 338,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 10.5.144/3GPP TS 24.008: Receive N-PDU Number list information element",
                                    "table number": 339,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "",
                                    "table number": 340,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 10.5.145/3GPP TS 24.008 MS network capability information element",
                                    "table number": 341,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "",
                                    "table number": 342,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 10.5.146/3GPP TS 24.008 (continued): MS Radio Access Capability IE",
                                    "table number": 343,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 10.5.146/3GPP TS 24.008 (concluded): MS Radio Access Capability IE",
                                    "table number": 344,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "",
                                    "table number": 345,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "",
                                    "table number": 346,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 10.5.147/3GPP TS 24.008: GMM cause information element",
                                    "table number": 347,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "",
                                    "table number": 348,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 10.5.148/3GPP TS 24.008: Routing area identification information element",
                                    "table number": 349,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "",
                                    "table number": 350,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 10.5.148a/3GPP TS 24.008: Routing area identification 2 information element",
                                    "table number": 351,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "",
                                    "table number": 352,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 10.5.149/3GPP TS 24.008: Update result information element",
                                    "table number": 353,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "",
                                    "table number": 354,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 10.5.150/3GPP TS 24.008: Update type information element",
                                    "table number": 355,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "",
                                    "table number": 356,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 10.5.152/3GPP TS 24.008: A&C reference number information element",
                                    "table number": 357,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "",
                                    "table number": 358,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 10.5.153a/3GPP TS 24.008: Service type information element",
                                    "table number": 359,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "",
                                    "table number": 360,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "",
                                    "table number": 361,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 10.5.153b/3GPP TS 24.008 PS LCS Capability information element",
                                    "table number": 362,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "",
                                    "table number": 363,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 10.5.153c/3GPP TS 24.008: Network feature support information element",
                                    "table number": 364,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "The Additional network feature support information element is coded as shown in figure 10.5.5.23A/3GPP TS 24.008 and table 10.5.5.23A/3GPP TS 24.008.",
                                    "table number": 365,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 10.5.5.23A: Additional network feature support information element",
                                    "table number": 366,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "",
                                    "table number": 367,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "",
                                    "table number": 368,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 10.5.166/3GPP TS 24.008: Requested MS information information element",
                                    "table number": 369,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "",
                                    "table number": 370,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "",
                                    "table number": 371,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 10.5.166A/3GPP TS 24.008: Voice domain preference and UE's usage setting information element",
                                    "table number": 372,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "",
                                    "table number": 373,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 10.5.5.29.1: P-TMSI type information element",
                                    "table number": 374,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "The Location Area Identification 2 is a type 4 information element with 7 octets length.",
                                    "table number": 375,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 10.5.5.30/3GPP TS 24.008: Location Area Identification 2 information element",
                                    "table number": 376,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "",
                                    "table number": 377,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 10.5.5.31/3GPP TS 24.008: Network resource identifier container information element",
                                    "table number": 378,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "The Extended DRX parameters information element is coded as shown in figure 10.5.5.32/3GPP TS 24.008 and table 10.5.5.32/3GPP TS 24.008.",
                                    "table number": 379,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 10.5.5.32/3GPP TS 24.008: Extended DRX parameters information element",
                                    "table number": 380,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "",
                                    "table number": 381,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 10.5.5.33-1/3GPP TS 24.008: Message authentication code information element",
                                    "table number": 382,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "",
                                    "table number": 383,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 10.5.5.34-1/3GPP TS 24.008: User Plane integrity indicator information element",
                                    "table number": 384,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "",
                                    "table number": 385,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 10.5.5.35-1/3GPP TS 24.008: DCN-ID information element",
                                    "table number": 386,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "The PLMN identity of the CN operator information element is coded as shown in figure 10.5.5.36-1/3GPP TS 24.008 and table 10.5.5.36-1/3GPP TS 24.008.",
                                    "table number": 387,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 10.5.5.36-1/3GPP TS 24.008: PLMN identity of the CN operator information element",
                                    "table number": 388,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "",
                                    "table number": 389,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 10.5.5.37-1/3GPP TS 24.008: Non-3GPP NW provided policies IE",
                                    "table number": 390,
                                    "summary": "",
                                    "name": ""
                                }
                            ]
                        },
                        {
                            "title": "10.5.6\tSession management information elements",
                            "text_content": "The purpose of the Access point name information element is to identify the packet data network to which the GPRS user wishes to connect and to notify the access point of the packet data network that wishes to connect to the MS.\nThe Access point name is a label or a fully qualified domain name according to DNS naming conventions (see 3GPP TS 23.003 [10]).\nThe Access point name is a type 4 information element with a minimum length of 3 octets and a maximum length of 102 octets.\nThe Access point name information element is coded as shown in figure 10.5.152/3GPP TS 24.008.\n\n\nFigure 10.5.152/3GPP TS 24.008: Access point name information element\nThe value part is defined in 3GPP TS 23.003 [10].\nThe purpose of the Network service access point identifier information element is to identify the service access point that is used for the GPRS data transfer at layer 3.\nThe Network service access point identifier is a type 3 information element with a length of 2 octets.\nThe value part of a Network service access point identifier information element is coded as shown in figure 10.5.153/3GPP TS 24.008 and table 10.5.167/3GPP TS 24.008.\n\n\nFigure 10.5.153/3GPP TS 24.008: Network service access point identifier information element\nTable 10.5.167/3GPP TS 24.008: Network service access point identifier information element\n\nThe purpose of the protocol configuration options information element is to:\n-\ttransfer external network protocol options associated with a PDP context activation, and\n-\ttransfer additional (protocol) data (e.g. configuration parameters, error codes or messages/events) associated with an external protocol or an application.\nThe protocol configuration options is a type 4 information element with a minimum length of 3 octets and a maximum length of 253 octets.\nThe protocol configuration options information element is coded as shown in figure 10.5.136/3GPP TS 24.008 and table 10.5.154/3GPP TS 24.008.\n\n\nFigure 10.5.136/3GPP TS 24.008: Protocol configuration options information element\n\nTable 10.5.154/3GPP TS 24.008: Protocol configuration options information element\n\n\n\n\n\n\nThe purpose of the APN rate control parameters container contents is to indicate the APN rate control parameters.\nThe APN rate control parameters container contents are coded as shown in figure 10.5.136A/3GPP TS 24.008 and table 10.5.154A/3GPP TS 24.008.\nThe APN rate control parameters container contents can be 1 octet long or 4 octets long. If the APN rate control parameters container contents is longer than 4 octets, the 5th octet and later octets are ignored.\n\nFigure 10.5.136A/3GPP TS 24.008: APN rate control parameters\nTable 10.5.154A/3GPP TS 24.008: APN rate control parameters\n\nThe purpose of the Additional APN rate control parameters for exception data container contents is to indicate the additional APN rate control parameters for exception data.\nThe Additional APN rate control parameters for exception data container contents are coded as shown in figure 10.5.6.3.3-1/3GPP TS 24.008 and table 10.5.6.3.3-1/3GPP TS 24.008.\nThe Additional APN rate control parameters for exception data container contents can be 1 octet long or 3 octets long. If the Additional APN rate control parameters for exception data container contents is longer than 3 octets, the 4th octet and later octets are ignored.\n\nFigure 10.5.6.3.3-1/3GPP TS 24.008: Additional APN rate control parameters for exception data\nTable 10.5.6.3.3-1/3GPP TS 24.008: Additional APN rate control parameters for exception data\n\nSee subclause 10.5.6.3.2 in current specification.\nSee subclause 10.5.6.3.3 in current specification.\nThe purpose of the Initial small data rate control parameters container contents is to indicate the Initial small data rate control parameters.\nThe Initial small data rate control parameters container contents are coded as shown in figure 10.5.6.3.6-1/3GPP TS 24.008 and table 10.5.6.3.6-1/3GPP TS 24.008.\nThe Initial small data rate control parameters container contents is 7 octets long. If the Initial small data rate control parameters container contents is longer than 7 octets, the 8th octet and later octets are ignored.\n\nFigure 10.5.6.3.6-1/3GPP TS 24.008: Initial small data rate control parameters\nTable 10.5.6.3.6-1/3GPP TS 24.008: Initial small data rate control parameters\n\nSee subclause 10.5.6.3.6 in current specification.\nSee subclause 10.5.6.3.6 in current specification.\nSee subclause 10.5.6.3.6 in current specification.\nThe purpose of the PVS IPv4 Address container contents is to indicate the PVS IPv4 Address and, optionally, the related DNN and S-NSSAI.\nThe PVS IPv4 Address container contents are coded as shown in figure 10.5.6.3.10-1/3GPP TS 24.008 and table 10.5.6.3.10-1/3GPP TS 24.008.\nFigure 10.5.6.3.10-1/3GPP TS 24.008: PVS IPv4 Address\nTable 10.5.6.3.10-1/3GPP TS 24.008: PVS IPv4 Address\n\nThe purpose of the PVS IPv6 Address container contents is to indicate the PVS IPv6 Address and, optionally, the related DNN and S-NSSAI.\nThe PVS IPv6 Address container contents are coded as shown in figure 10.5.6.3.11-1/3GPP TS 24.008 and table 10.5.6.3.11-1/3GPP TS 24.008.\nFigure 10.5.6.3.11-1/3GPP TS 24.008: PVS IPv6 Address\nTable 10.5.6.3.11-1/3GPP TS 24.008: PVS IPv6 Address\n\nThe purpose of the PVS name container contents is to indicate the fully qualified domain name information and, optionally, the related DNN and S-NSSAI.\nThe PVS name container contents are coded as shown in figure 10.5.6.3.12-1/3GPP TS 24.008 and table 10.5.6.3.Z-1/3GPP TS 24.008.\nFigure 10.5.6.3.12-1/3GPP TS 24.008: PVS name\nTable 10.5.6.3.12-1/3GPP TS 24.008: PVS name\n\nThe purpose of the extended protocol configuration options information element is to:\n-\ttransfer external network protocol options associated with a PDP context activation, and\n-\ttransfer additional (protocol) data (e.g. configuration parameters, error codes or messages/events) associated with an external protocol or an application.\nThe extended protocol configuration options is a type 6 information element with a minimum length of 4 octets and a maximum length of 65538 octets.\nThe extended protocol configuration options information element is coded as shown in figure 10.5.6.3A.1 and table 10.5.6.3A.1.\n\n\nFigure 10.5.6.3A.1: Extended protocol configuration options information element\nTable 10.5.6.3A.1: Extended protocol configuration options information element\n\nThe purpose of the packet data protocol address information element is to identify an address associated with a PDP.\nThe packet data protocol address is a type 4 information element with minimum length of 4 octets and a maximum length of 24 octets.\nThe packet data protocol address information element is coded as shown in figure 10.5.137/3GPP TS 24.008 and table 10.5.155/3GPP TS 24.008.\n\n\nFigure 10.5.137/3GPP TS 24.008: Packet data protocol address information element\nTable 10.5.155/3GPP TS 24.008: Packet data protocol address information element\n\nIf PDP type number indicates IPv4, the Address information in octet 5 to octet 8 contains the IPv4 address. Bit 8 of octet 5 represents the most significant bit of the IP address and bit 1 of octet 8 the least significant bit.\nIf PDP type number indicates IPv6, the Address information in octet 5 to octet 20 contains the IPv6 address. Bit 8 of octet 5 represents the most significant bit of the IP address and bit 1 of octet 20 the least significant bit.\nIf PDP type number indicates IPv4v6:\nThe Address information in octet 5 to octet 8 contains the IPv4 address. Bit 8 of octet 5 represents the most significant bit of the IP address and bit 1 of octet 8 the least significant bit.\nThe Address information in octet 9 to octet 24 contains the IPv6 address. Bit 8 of octet 9 represents the most significant bit of the IP address and bit 1 of octet 24 the least significant bit.\nIf PDP type number indicates IPv4 or IPv4v6 and DHCPv4 is to be used to allocate the IPv4 address, the IPv4 address shall be coded as 0.0.0.0.\nThe purpose of the quality of service information element is to specify the QoS parameters for a PDP context.\nThe QoS IE is defined to allow backward compatibility to earlier version of Session Management Protocol.\nThe quality of service is a type 4 information element with a minimum length of 14 octets and a maximum length of 22 octets. The QoS requested by the MS shall be encoded both in the QoS attributes specified in octets 3-5 and in the QoS attributes specified in octets 6-14.\nIn the MS to network direction and in the network to MS direction the following applies:\n-\tOctets 15-22 are optional. If octet 15 is included, then octet 16 shall also be included, and octets 17-22may be included.\n-\tIf octet 17 is included, then octet 18 shall also be included and octets 19-22 may be included.\n-\tIf octet 19 is included, then octet 20 shall also be included, and octets 21 and 22 may be included.\n-\tIf octet 21 is included, then octet 22 shall also be included.\n-\tA QoS IE received without octets 6-22, without octets 14-22, without octets 15-22, without octets 17-22, without octets 19-22 or without octets 21-22 shall be accepted by the receiving entity.\nNOTE:\tThis behavior is required for interworking with entities supporting an earlier version of the protocol, or when the Maximum bit rate for downlink or for downlink and uplink is negotiated to a value lower than 8700 kbps.\nThe quality of service information element is coded as shown in figure 10.5.138/3GPP TS 24.008 and table 10.5.156/3GPP TS 24.008.\n\n\nFigure 10.5.138/3GPP TS 24.008: Quality of service information element\nTable 10.5.156/3GPP TS 24.008: Quality of service information element\nReliability class, octet 3 (see 3GPP TS 23.107 [81])\nBits\n3 2 1\nIn MS to network direction:\n0 0 0\tSubscribed reliability class\nIn network to MS direction:\n0 0 0\tReserved\nIn MS to network direction and in network to MS direction:\n0 0 1\tUnused. If received, it shall be interpreted as '010' (Note)\n0 1 0\tUnacknowledged GTP; Acknowledged LLC and RLC, Protected data\n0 1 1\tUnacknowledged GTP and LLC; Acknowledged RLC, Protected data\n1 0 0\tUnacknowledged GTP, LLC, and RLC, Protected data\n1 0 1\tUnacknowledged GTP, LLC, and RLC, Unprotected data\n1 1 1\tReserved\n\nAll other values are interpreted as Unacknowledged GTP and LLC; Acknowledged RLC, Protected data in this version of the protocol.\n\nIf network supports EPS, then it should not assign Reliability class value '010’.\n\nNOTE: this value was allocated in earlier versions of the protocol.\n\nDelay class, octet 3 (see 3GPP TS 22.060 [73] and 3GPP TS 23.107 [81])\nBits\n6 5 4\nIn MS to network direction:\n0 0 0\tSubscribed delay class \nIn network to MS direction:\n0 0 0\tReserved\nIn MS to network direction and in network to MS direction:\n0 0 1\tDelay class 1\n0 1 0\tDelay class 2\n0 1 1\tDelay class 3\n1 0 0\tDelay class 4 (best effort)\n1 1 1\tReserved\n\n\nAll other values are interpreted as Delay class 4 (best effort) in this version \nof the protocol.\nBit 7 and 8 of octet 3 are spare and shall be coded all 0.\nPrecedence class, octet 4 (see 3GPP TS 23.107 [81])\nBits\n3 2 1\nIn MS to network direction:\n0 0 0\tSubscribed precedence\nIn network to MS direction:\n0 0 0\tReserved\nIn MS to network direction and in network to MS direction:\n0 0 1\tHigh priority\n0 1 0\tNormal priority\n0 1 1\tLow priority\n1 1 1\tReserved\n\n\nAll other values are interpreted as Normal priority in this version of the protocol.\n\nBit 4 of octet 4 is spare and shall be coded as 0.\n\nPeak throughput, octet 4 (see 3GPP TS 23.107 [81])\nThis field is the binary representation of the Peak Throughput Class (1 to 9). The corresponding peak throughput to each peak throughput class is indicated.\nBits\n8 7 6 5\nIn MS to network direction:\n0 0 0 0\t\tSubscribed peak throughput\nIn network to MS direction:\n0 0 0 0\t\tReserved\nIn MS to network direction and in network to MS direction:\n0 0 0 1\t\tUp to 1 000 octet/s\n0 0 1 0\t\tUp to 2 000 octet/s\n0 0 1 1\t\tUp to 4 000 octet/s\n0 1 0 0\t\tUp to 8 000 octet/s\n0 1 0 1\t\tUp to 16 000 octet/s\n0 1 1 0\t\tUp to 32 000 octet/s\n0 1 1 1\t\tUp to 64 000 octet/s\n1 0 0 0\t\tUp to 128 000 octet/s\n1 0 0 1\t\tUp to 256 000 octet/s\n1 1 1 1\t\tReserved\n\nAll other values are interpreted as Up to 1 000 octet/s in this \nversion of the protocol.\nMean throughput, octet 5 (see 3GPP TS 23.107 [81])\nThis field is the binary representation of the Mean Throughput Class (1 to 18; mean throughput class 30 is reserved and 31 is best effort). The corresponding mean throughput to each mean throughput class is indicated.\nBits\n5 4 3 2 1\n\nIn MS to network direction:\n0 0 0 0 0\t\tSubscribed mean throughput\nIn network to MS direction:\n0 0 0 0 0\t\tReserved\nIn MS to network direction and in network to MS direction:\n0 0 0 0 1\t\t100 octet/h\n0 0 0 1 0\t\t200 octet/h\n0 0 0 1 1\t\t500 octet/h\n0 0 1 0 0\t\t1 000 octet/h\n0 0 1 0 1\t\t2 000 octet/h\n0 0 1 1 0\t\t5 000 octet/h\n0 0 1 1 1\t\t10 000 octet/h\n0 1 0 0 0\t\t20 000 octet/h\n0 1 0 0 1\t\t50 000 octet/h\n0 1 0 1 0\t\t100 000 octet/h\n0 1 0 1 1\t\t200 000 octet/h\n0 1 1 0 0\t\t500 000 octet/h\n0 1 1 0 1\t\t1 000 000 octet/h\n0 1 1 1 0\t\t2 000 000 octet/h\n0 1 1 1 1\t\t5 000 000 octet/h\n1 0 0 0 0\t\t10 000 000 octet/h\n1 0 0 0 1\t\t20 000 000 octet/h\n1 0 0 1 0\t\t50 000 000 octet/h\n1 1 1 1 0\t\tReserved\n1 1 1 1 1\t\tBest effort\nThe value Best effort indicates that throughput shall be made available to the MS on a per need and availability basis.\nAll other values are interpreted as Best effort in this \nversion of the protocol.\n\nBits 8 to 6 of octet 5 are spare and shall be coded all 0.\n\n\nDelivery of erroneous SDUs, octet 6 (see 3GPP TS 23.107 [81])\nBits\n3 2 1\nIn MS to network direction:\n0 0 0\t\tSubscribed delivery of erroneous SDUs\nIn network to MS direction:\n0 0 0\t\tReserved\nIn MS to network direction and in network to MS direction:\n0 0 1\t\tNo detect ('-')\n0 1 0\t\tErroneous SDUs are delivered ('yes')\n0 1 1\t\tErroneous SDUs are not delivered ('no')\n1 1 1\t\tReserved\nThe network shall map all other values not explicitly defined onto one of the values defined in this version of the protocol. The network shall return a negotiated value which is explicitly defined in this version of this protocol.\n\nThe MS shall consider all other values as reserved.\n\nDelivery order, octet 6 (see 3GPP TS 23.107 [81])\nBits\n5 4 3\nIn MS to network direction:\n0 0\t\tSubscribed delivery order\nIn network to MS direction:\n0 0\t\tReserved\nIn MS to network direction and in network to MS direction:\n0 1\t\tWith delivery order ('yes')\n1 0\t\tWithout delivery order ('no')\n1 1\t\tReserved\n\n\nTraffic class, octet 6 (see 3GPP TS 23.107 [81])\nBits\n8 7 6\nIn MS to network direction:\n0 0 0\t\tSubscribed traffic class\nIn network to MS direction:\n0 0 0\t\tReserved\nIn MS to network direction and in network to MS direction:\n0 0 1\t\tConversational class\n0 1 0\t\tStreaming class\n0 1 1\t\tInteractive class\n1 0 0\t\tBackground class\n1 1 1\t\tReserved\n\nThe network shall map all other values not explicitly defined onto one of the values defined in this version of the protocol. The network shall return a negotiated value which is explicitly defined in this version of this protocol.\n\n\nThe MS shall consider all other values as reserved.\n\nMaximum SDU size, octet 7 (see 3GPP TS 23.107 [81])\nIn MS to network direction:\n0 0 0 0 0 0 0 0\t\tSubscribed maximum SDU size\n1 1 1 1 1 1 1 1\t\tReserved\nIn network to MS direction:\n0 0 0 0 0 0 0 0\t\tReserved\n1 1 1 1 1 1 1 1\t\tReserved\nIn MS to network direction and in network to MS direction:\n\nFor values in the range 00000001 to 10010110 the Maximum SDU size value is binary coded in 8 bits, using a granularity of 10 octets, giving a range of values from 10 octets to 1500 octets.\nValues above 10010110 are as below:\n1 0 0 1 0 1 1 1\t\t1502 octets\n1 0 0 1 1 0 0 0\t\t1510 octets\n1 0 0 1 1 0 0 1\t\t1520 octets\n\n\nThe network shall map all other values not explicitly defined onto one of the values defined in this version of the protocol. The network shall return a negotiated value which is explicitly defined in this version of this protocol.\n\nThe MS shall consider all other values as reserved.\n\n\nMaximum bit rate for uplink, octet 8\nBits\n8 7 6 5 4 3 2 1\nIn MS to network direction:\n0 0 0 0 0 0 0 0\tSubscribed maximum bit rate for uplink\nIn network to MS direction:\n0 0 0 0 0 0 0 0\tReserved\nIn MS to network direction and in network to MS direction:\n0 0 0 0 0 0 0 1\tThe maximum bit rate is binary coded in 8 bits, using a granularity of 1 kbps\n0 0 1 1 1 1 1 1\tgiving a range of values from 1 kbps to 63 kbps in 1 kbps increments.\n\n0 1 0 0 0 0 0 0\tThe maximum bit rate is 64 kbps + ((the binary coded value in 8 bits –01000000) * 8 kbps)\n0 1 1 1 1 1 1 1\tgiving a range of values from 64 kbps to 568 kbps in 8 kbps increments.\n\n1 0 0 0 0 0 0 0\tThe maximum bit rate is 576 kbps + ((the binary coded value in 8 bits –10000000) * 64 kbps)\n1 1 1 1 1 1 1 0\tgiving a range of values from 576 kbps to 8640 kbps in 64 kbps increments.\n\n1 1 1 1 1 1 1 1\t0kbps\n\nIf the sending entity wants to indicate a Maximum bit rate for uplink higher than 8640 kbps, it shall set octet 8 to \"11111110\", i.e. 8640 kbps, and shall encode the value for the Maximum bit rate in octet 17.\n\n\nThe network shall map all other values not explicitly defined onto one of the values defined in this version of the protocol. The network shall return a negotiated value which is explicitly defined in this version of the protocol.\n\nMaximum bit rate for downlink, octet 9 (see 3GPP TS 23.107 [81])\nCoding is identical to that of Maximum bit rate for uplink.\n\nIf the sending entity wants to indicate a Maximum bit rate for downlink higher than 8640 kbps, it shall set octet 9 to \"11111110\", i.e. 8640 kbps, and shall encode the value for the Maximum bit rate in octet 15.\n\nThe network shall map all other values not explicitly defined onto one of the values defined in this version of the protocol. The network shall return a negotiated value which is explicitly defined in this version of the protocol.\n\nIn this version of the protocol, for messages specified in the present document, the sending entity shall not request 0 kbps for both the Maximum bitrate for downlink and the Maximum bitrate for uplink at the same time. Any entity receiving a request for 0 kbps in both the Maximum bitrate for downlink and the Maximum bitrate for uplink shall consider that as a syntactical error (see clause 8).\n\n\n\nResidual Bit Error Rate (BER), octet 10 (see 3GPP TS 23.107 [81])\nBits\n8 7 6 5 \nIn MS to network direction:\n0 0 0 0\t\tSubscribed residual BER\nIn network to MS direction:\n0 0 0 0\t\tReserved\nIn MS to network direction and in network to MS direction:\nThe Residual BER value consists of 4 bits. The range is from 5*10-2 to 6*10-8. \n0 0 0 1\t\t5*10-2 \n0 0 1 0\t\t1*10-2 \n0 0 1 1\t\t5*10-3\n0 1 0 0\t\t4*10-3 \n0 1 0 1\t\t1*10-3 \n0 1 1 0\t\t1*10-4 \n0 1 1 1\t\t1*10-5 \n1 0 0 0\t\t1*10-6 \n1 0 0 1\t\t6*10-8 \n1 1 1 1\t\tReserved\n\nThe network shall map all other values not explicitly defined onto one of the values defined in this version of the protocol. The network shall return a negotiated value which is explicitly defined in this version of the protocol.\n\nThe MS shall consider all other values as reserved.\n\nSDU error ratio, octet 10 (see 3GPP TS 23.107 [81])\nBits\n4 3 2 1\nIn MS to network direction:\n0 0 0 0\t\tSubscribed SDU error ratio\nIn network to MS direction:\n0 0 0 0\t\tReserved\nIn MS to network direction and in network to MS direction:\nThe SDU error ratio value consists of 4 bits. The range is is from 1*10-1 to 1*10-6. \n0 0 0 1\t\t1*10-2 \n0 0 1 0\t\t7*10-3\n0 0 1 1\t\t1*10-3 \n0 1 0 0\t\t1*10-4 \n0 1 0 1\t\t1*10-5 \n0 1 1 0\t\t1*10-6\n0 1 1 1\t\t1*10-1\n1 1 1 1\t\tReserved\n\nThe network shall map all other values not explicitly defined onto one of the values defined in this version of the protocol. The network shall return a negotiated value which is explicitly defined in this version of the protocol.\n\nThe MS shall consider all other values as reserved.\n\nTraffic handling priority, octet 11 (see 3GPP TS 23.107 [81])\nBits\n2 1\nIn MS to network direction:\n0 0\t\tSubscribed traffic handling priority\nIn network to MS direction:\n0 0\t\tReserved\nIn MS to network direction and in network to MS direction:\n0 1\t\tPriority level 1\n1 0\t\tPriority level 2\n1 1\t\tPriority level 3\n\nThe Traffic handling priority value is ignored if the Traffic Class is Conversational class, Streaming class or Background class.\n\nTransfer delay, octet 11 (See 3GPP TS 23.107 [81])\nBits\n8 7 6 5 4 3\n\n\nIn MS to network direction:\n0 0 0 0 0 0\t\tSubscribed transfer delay\nIn network to MS direction:\n0 0 0 0 0 0\t\tReserved\nIn MS to network direction and in network to MS direction:\n\n\n0 0 0 0 0 1\tThe Transfer delay is binary coded in 6 bits, using a granularity of 10 ms\n0 0 1 1 1 1\t\tgiving a range of values from 10 ms to 150 ms in 10 ms increments\n0 1 0 0 0 0\tThe transfer delay is 200 ms + ((the binary coded value in 6 bits – 010000) * 50 ms)\n0 1 1 1 1 1\t\tgiving a range of values from 200 ms to 950 ms in 50ms increments\n\n1 0 0 0 0 0\tThe transfer delay is 1000 ms + ((the binary coded value in 6 bits – 100000) * 100 ms)\n1 1 1 1 1 0\t\tgiving a range of values from 1000 ms to 4000 ms in 100ms increments\n\n1 1 1 1 1 1\t\tReserved\nThe Transfer delay value is ignored if the Traffic Class is Interactive class or Background class.\n\nGuaranteed bit rate for uplink, octet 12 (See 3GPP TS 23.107 [81])\nCoding is identical to that of Maximum bit rate for uplink.\n\nIf the sending entity wants to indicate a Guaranteed bit rate for uplink higher than 8640 kbps, it shall set octet 12 to \"11111110\", i.e. 8640 kbps, and shall encode the value for the Guaranteed bit rate in octet 18.\n\nThe network shall map all other values not explicitly defined onto one of the values defined in this version of the protocol. The network shall return a negotiated value which is explicitly defined in this version of the protocol.\n\nThe Guaranteed bit rate for uplink value is ignored if the Traffic Class is Interactive class or Background class, or Maximum bit rate for uplink is set to 0 kbps.\n\nGuaranteed bit rate for downlink, octet 13(See 3GPP TS 23.107 [81])\nCoding is identical to that of Maximum bit rate for uplink.\n\nIf the sending entity wants to indicate a Guaranteed bit rate for downlink higher than 8640 kbps, it shall set octet 13 to \"11111110\", i.e. 8640 kbps, and shall encode the value for the Guaranteed bit rate in octet 16.\n\nThe network shall map all other values not explicitly defined onto one of the values defined in this version of the protocol. The network shall return a negotiated value which is explicitly defined in this version of the protocol.\n\nThe Guaranteed bit rate for downlink value is ignored if the Traffic Class is Interactive class or Background class, or Maximum bit rate for downlink is set to 0 kbps.\n\nSource Statistics Descriptor, octet 14 (see 3GPP TS 23.107 [81])\nBits\n4 3 2 1\nIn MS to network direction\n0 0 0 0\tunknown\n0 0 0 1\t\tspeech\nThe network shall consider all other values as unknown.\n\nIn network to MS direction\nBits 4 to 1 of octet 14 are spare and shall be coded all 0.\n\nThe Source Statistics Descriptor value is ignored if the Traffic Class is Interactive class or Background class.\n\nSignalling Indication, octet 14 (see 3GPP TS 23.107 [81])\nBit\n5\nIn MS to network direction and in network to MS direction:\n0\t\tNot optimised for signalling traffic\n1\t\tOptimised for signalling traffic\nIf set to '1' the QoS of the PDP context is optimised for signalling\n\nThe Signalling Indication value is ignored if the Traffic Class is Conversational class, Streaming class or Background class.\n\nBits 8 to 6 of octet 14 are spare and shall be coded all 0.\n\nMaximum bit rate for downlink (extended), octet 15\nBits\n8 7 6 5 4 3 2 1\nIn MS to network direction and in network to MS direction:\n0 0 0 0 0 0 0 0\tUse the value indicated by the Maximum bit rate for downlink in octet 9.\n\n\t\t\t\t\tFor all other values: Ignore the value indicated by the Maximum bit rate for downlink in octet 9\n\t\t\t\t\tand use the following value:\n0 0 0 0 0 0 0 1\tThe maximum bit rate is 8600 kbps + ((the binary coded value in 8 bits) * 100 kbps),\n0 1 0 0 1 0 1 0\tgiving a range of values from 8700 kbps \nto 16000 kbps in 100 kbps increments.\n0 1 0 0 1 0 1 1\tThe maximum bit rate is 16 Mbps + ((the binary coded value in 8 bits - 01001010) * 1 Mbps),\n1 0 1 1 1 0 1 0\tgiving a range of values from 17 Mbps to 128 Mbps in 1 Mbps increments.\n1 0 1 1 1 0 1 1\tThe maximum bit rate is 128 Mbps + ((the binary coded value in 8 bits - 10111010) * 2 Mbps),\n1 1 1 1 1 0 1 0\tgiving a range of values from 130 Mbps to 256 Mbps in 2 Mbps increments.\n\nIf the sending entity wants to indicate a Maximum bit rate for downlink higher than 256 Mbps, it shall set octet 15 to \"11111010\", i.e. 256 Mbps, and shall encode the value for the maximum bit rate in octet 19.\n\nThe network shall map all other values not explicitly defined onto one of the values defined in this version of the protocol. The network shall return a negotiated value which is explicitly defined in this version of the protocol.\n\nGuaranteed bit rate for downlink (extended), octet 16\nBits\n8 7 6 5 4 3 2 1\nIn MS to network direction and in network to MS direction:\n0 0 0 0 0 0 0 0\tUse the value indicated by the Guaranteed bit rate for downlink in octet 13.\n\n\t\t\t\t\tFor all other values: Ignore the value indicated by the Guaranteed bit rate for downlink in octet 9\n\t\t\t\t\tand use the following value:\n0 0 0 0 0 0 0 1\tThe guaranteed bit rate is 8600 kbps + ((the binary coded value in 8 bits) * 100 kbps),\n0 1 0 0 1 0 1 0\tgiving a range of values from 8700 kbps to 16000 kbps in 100 kbps increments.\n0 1 0 0 1 0 1 1\tThe guaranteed bit rate is 16 Mbps + ((the binary coded value in 8 bits - 01001010) * 1 Mbps),\n1 0 1 1 1 0 1 0\tgiving a range of values from 17 Mbps to 128 Mbps in 1 Mbps increments.\n1 0 1 1 1 0 1 1\tThe guaranteed bit rate is 128 Mbps + ((the binary coded value in 8 bits - 10111010) * 2 Mbps),\n1 1 1 1 1 0 1 0\tgiving a range of values from 130 Mbps to 256 Mbps in 2 Mbps increments.\n\nIf the sending entity wants to indicate a Guaranteed bit rate for downlink higher than 256 Mbps, it shall set octet 16 to \"11111010\", i.e. 256 Mbps, and shall encode the value for the guaranteed bit rate in octet 20.\n\nThe network shall map all other values not explicitly defined onto one of the values defined in this version of the protocol. The network shall return a negotiated value which is explicitly defined in this version of the protocol.\n\nMaximum bit rate for uplink (extended), octet 17\nThis field is an extension of the Maximum bit rate for uplink in octet 8. The coding is identical to that of the Maximum bit rate for downlink (extended).\n\nIf the sending entity wants to indicate a Maximum bit rate for uplink higher than 256 Mbps, it shall set octet 17 to \"11111010\", i.e. 256 Mbps, and shall encode the value for the maximum bit rate in octet 21.\n\nThe network shall map all other values not explicitly defined onto one of the values defined in this version of the protocol. The network shall return a negotiated value which is explicitly defined in this version of the protocol.\n\nGuaranteed bit rate for uplink (extended), octet 18\n\nThis field is an extension of the Guaranteed bit rate for uplink in octet 12. The coding is identical to that of the Guaranteed bit rate for downlink (extended).\n\nIf the sending entity wants to indicate a Guaranteed bit rate for uplink higher than 256 Mbps, it shall set octet 18 to \"11111010\", i.e. 256 Mbps, and shall encode the value for the guaranteed bit rate in octet 22.\n\nThe network shall map all other values not explicitly defined onto one of the values defined in this version of the protocol. The network shall return a negotiated value which is explicitly defined in this version of the protocol.\n\nMaximum bit rate for downlink (extended-2), octet 19\nBits\n8 7 6 5 4 3 2 1\nIn MS to network direction and in network to MS direction:\n0 0 0 0 0 0 0 0\tUse the value indicated by the Maximum bit rate for downlink in octet 9 and octet 15.\n\n\t\t\t\t\tFor all other values: Ignore the value indicated by the Maximum bit rate for downlink in octet 9 and\n\t\t\t\t\toctet 15 and use the following value:\n0 0 0 0 0 0 0 1\tThe maximum bit rate is 256 Mbps + ((the binary coded value in 8 bits) * 4 Mbps),\n0 0 1 1 1 1 0 1\tgiving a range of values from 260 Mbps to 500 Mbps in 4 Mbps increments.\n0 0 1 1 1 1 1 0\tThe maximum bit rate is 500 Mbps + ((the binary coded value in 8 bits - 00111101) * 10 Mbps),\n1 0 1 0 0 0 0 1\tgiving a range of values from 510 Mbps to 1500 Mbps in 10 Mbps increments.\n1 0 1 0 0 0 1 0\tThe maximum bit rate is 1500 Mbps + ((the binary coded value in 8 bits - 10100001) * 100 Mbps),\n1 1 1 1 0 1 1 0\tgiving a range of values from 1600 Mbps to 10 Gbps in 100 Mbps increments.\n\nIf the sending entity wants to indicate a Maximum bit rate for downlink higher than 10 Gbps, it shall set octet 19 to \"11110110\", i.e. 10 Gbps, and shall encode the value for the maximum bit rate in the extended quality of service information element specified in subclause 10.5.6.5B.\n\nThe network shall map all other values not explicitly defined onto one of the values defined in this version of the protocol. The network shall return a negotiated value which is explicitly defined in this version of the protocol.\n\nThe MS shall map all other values not explicitly defined onto the maximum value defined in this version of the protocol.\n\nGuaranteed bit rate for downlink (extended-2), octet 20\nBits\n8 7 6 5 4 3 2 1\nIn MS to network direction and in network to MS direction:\n0 0 0 0 0 0 0 0\tUse the value indicated by the Maximum bit rate for downlink in octet 13 and octet 16.\n\n\t\t\t\t\tFor all other values: Ignore the value indicated by the Maximum bit rate for downlink in octet 13 and\n\t\t\t\t\toctet 16 and use the following value:\n0 0 0 0 0 0 0 1\tThe guaranteed bit rate is 256 Mbps + ((the binary coded value in 8 bits) * 4 Mbps),\n0 0 1 1 1 1 0 1\tgiving a range of values from 260 Mbps \nto 500 Mbps in 4 Mbps increments.\n0 0 1 1 1 1 1 0\tThe guaranteed bit rate is 500 Mbps + ((the binary coded value in 8 bits - 00111101) * 10 Mbps),\n1 0 1 0 0 0 0 1\tgiving a range of values from 510 Mbps to 1500 Mbps in 10 Mbps increments.\n1 0 1 0 0 0 1 0\tThe guaranteed bit rate is 1500 Mbps + ((the binary coded value in 8 bits - 10100001) * 100 Mbps),\n1 1 1 1 0 1 1 0\tgiving a range of values from 1600 Mbps to 10 Gbps in 100 Mbps increments.\n\nIf the sending entity wants to indicate a Guaranteed bit rate for downlink higher than 10 Gbps, it shall set octet 20 to \"11110110\", i.e. 10 Gbps, and shall encode the value for the guaranteed bit rate in the extended quality of service information element specified in subclause 10.5.6.5B.\n\nThe network shall map all other values not explicitly defined onto one of the values defined in this version of the protocol. The network shall return a negotiated value which is explicitly defined in this version of the protocol.\n\nThe MS shall map all other values not explicitly defined onto the maximum value defined in this version of the protocol.\n\nMaximum bit rate for uplink (extended-2), octet 21\nThis field is an extension of the Maximum bit rate for uplink in octet 17. The coding is identical to that of the Maximum bit rate for downlink (extended 2).\n\nIf the sending entity wants to indicate a Maximum bit rate for uplink higher than 10 Gbps, it shall set octet 21 to \"11110110\", i.e. 10 Gbps, and shall encode the value for the maximum bit rate in the extended quality of service information element specified in subclause 10.5.6.5B.\n\n\nThe network shall map all other values not explicitly defined onto one of the values defined in this version of the protocol. The network shall return a negotiated value which is explicitly defined in this version of the protocol.\n\nThe MS shall map all other values not explicitly defined onto the maximum value defined in this version of the protocol.\n\nGuaranteed bit rate for uplink (extended-2), octet 22\n\nThis field is an extension of the Guaranteed bit rate for uplink in octet 18. The coding is identical to that of the Guaranteed bit rate for downlink (extended-2).\n\nIf the sending entity wants to indicate a Guaranteed bit rate for uplink higher than 10 Gbps, it shall set octet 22 to \"11110110\", i.e. 10 Gbps, and shall encode the value for the guaranteed bit rate in the extended quality of service information element specified in subclause 10.5.6.5B.\n\nThe network shall map all other values not explicitly defined onto one of the values defined in this version of the protocol. The network shall return a negotiated value which is explicitly defined in this version of the protocol.\n\nThe MS shall map all other values not explicitly defined onto the maximum value defined in this version of the protocol.\n\n\nThe purpose of the Re-attempt indicator information element is to indicate a condition under which the MS is allowed, in the current PLMN for the same APN, to re-attempt an EPS session management procedure (see 3GPP TS 24.301 [120]) corresponding to the session management procedure which was rejected by the network.\nThe Re-attempt indicator information element is coded as shown in figure 10.5.6.5A and table 10.5.6.5A.\n\nFigure 10.5.6.5A: Re-attempt indicator information element\nTable 10.5.6.5A: Re-attempt indicator information element\n\n\nSee subclause 9.9.4.30 in 3GPP TS 24.301 [120].\nNOTE:\tThis IE has been added for protocol alignment with EPS in this version of the specification. This IE is used only to indicate bit rates higher than 10 Gbps and such bit rates are currently not supported.\nThe purpose of the SM cause information element is to indicate the reason why a session management request is rejected.\nThe SM cause is a type 3 information element with 2 octets length.\nThe SM cause information element is coded as shown in figure 10.5.139/3GPP TS 24.008 and table 10.5.157/3GPP TS 24.008.\n\n\nFigure 10.5.139/3GPP TS 24.008: SM cause information element\nTable 10.5.157/3GPP TS 24.008: SM cause information element\n\nThe purpose of the SM cause 2 information element is to provide further information when PDP context activation initiated by the mobile station is successful.\nThe SM cause 2 is a type 4 information element with 3 octets length.\nThe SM cause 2 information element is coded as shown in figure 10.5.139a/3GPP TS 24.008 and table 10.5.157a/3GPP TS 24.008.\n\nFigure 10.5.139a/3GPP TS 24.008: SM cause 2 information element\nTable 10.5.157a/3GPP TS 24.008: SM cause 2 information element\n\nThe purpose of the Linked TI information element is to specify the active PDP context from which the PDP address for the new PDP context could be derived by the network.\nThe Linked TI is a type 4 information element with a minimum length of 3 octets and a maximum length of 4 octets.\nThe Linked TI information element is coded as shown in figure 10.5.140/3GPP TS 24.008.\n\n\nFigure 10.5.140/3GPP TS 24.008: Linked TI information element\nThe coding of the TI flag, the TI value and the EXT bit is defined in 3GPP TS 24.007[20].\nThe purpose of the LLC service access point identifier information element is to identify the service access point that is used for the GPRS data transfer at LLC layer.\nThe LLC service access point identifier is a type 3 information element with a length of 2 octets.\nThe value part of a LLC service access point identifier information element is coded as shown in figure 10.5.141/3GPP TS 24.008 and table 10.5.159/3GPP TS 24.008.\n\n\nFigure 10.5.141/3GPP TS 24.008: LLC service access point identifier information element\nTable 10.5.159/3GPP TS 24.008: LLC service access point identifier information element\n\nThe purpose of the tear down indicator information element is to indicate whether only the PDP context associated with this specific TI or all active PDP contexts sharing the same PDP address and APN as the PDP context associated with this specific TI shall be deactivated.\nThe tear down indicator is a type 1 information element.\nThe tear down indicator information element is coded as shown in figure 10.5.142/3GPP TS 24.008 and table 10.5.160/3GPP TS 24.008.\n\n\nFigure 10.5.142/3GPP TS 24.008: Tear down indicator information element\nTable 10.5.160/3GPP TS 24.008: Tear down indicator information element\n\nThe Packet Flow Identifier (PFI) information element indicates the Packet Flow Identifier for a Packet Flow Context.\nThe Packet Flow Identifier is a a type 4 information element with 3 octets length.\nThe Packet Flow Identifier information element is coded as shown in figure 10.5.143/3GPP TS 24.008 and table 10.5.161/3GPP TS 24.008.\n\n\nFigure 10.5.143/3GPP TS 24.008: Packet Flow Identifier information element\nTable 10.5.161/3GPP TS 24.008: Packet Flow Identifier information element\n\nThe purpose of the traffic flow template information element is to specify the TFT parameters and operations for a PDP context. In addition, this information element may be used to transfer extra parameters to the network (e.g. the Authorization Token; see 3GPP TS 24.229 [95]). The TFT may contain packet filters for the downlink direction, the uplink direction or packet filters that are applicable to both directions. The packet filters determine the traffic mapping to PDP contexts. The downlink packet filters shall be used by the network and the uplink packet filters shall be used by the MS. A packet filter that is applicable to both directions shall be used by the network as a downlink packet filter and by the MS as an uplink packet filter.\nThe traffic flow template is a type 4 information element with a minimum length of 3 octets. The maximum length for the IE is 257 octets.\nNOTE 1:\tThe IE length restriction is due to the maximum length that can be encoded in a single length octet.\nNOTE 2:\tA maximum size IPv4 packet filter can be 36 bytes. Therefore, 7 maximum size IPv4 type packet filters can fit into one TFT IE, i.e. if needed not all packet filter components can be defined into one message. A maximum size IPv6 packet filter can be 54 bytes. Therefore, only 4 maximum size IPv6 packet filters, plus the last packet filter which can contain max 38 octets can fit into one TFT IE. However, using \"Add packet filters to existing TFT\", it's possible to create a TFT data structure including 16 maximum size IPv4 or IPv6 filters.\nThe traffic flow template information element is coded as shown in figure 10.5.144/3GPP TS 24.008 and table 10.5.162/3GPP TS 24.008.\nNOTE 3:\tThe 3GPP TS 24.301 [120] reuses the traffic flow template information element for the purpose of the traffic flow aggregate description, where the use of individual TFT parameters, e.g. the packet filter identifier in the parameter list, can differ from this specification.\n\n\nFigure 10.5.144/3GPP TS 24.008: Traffic flow template information element\n\n\nFigure 10.5.144a/3GPP TS 24.008: Packet filter list when the TFT operation is \"delete packet filters from existing TFT\" (z=N+3)\n\n\nFigure 10.5.144b/3GPP TS 24.008: Packet filter list when the TFT operation is \"create new TFT\", or \"add packet filters to existing TFT\" or \"replace packet filters in existing TFT\"\n\n\nFigure 10.5.144c/3GPP TS 24.008: Parameters list\nTable 10.5.162/3GPP TS 24.008: Traffic flow template information element\n\nThe purpose of the TMGI element is for group paging in MBMS.\nThe TMGI information element is a type 4 information element with a minimum length of 5 octets and a maximum length of 8 octets. If octet 6 is included, then octets 7 and 8 shall also be included.\nThe content of the TMGI element is shown in Figure 10.5.154/3GPP TS 24.008 and table 10.5.168/3GPP TS 24.008.\n\n\nFigure 10.5.154/3GPP TS 24.008: TMGI information element\nTable 10.5.168/3GPP TS 24.008: TMGI information element\n\nThe purpose of the MBMS bearer capabilities information element is to indicate the maximum bit rate for downlink supported by the MS for an MBMS context.\nNOTE:\tThe information element indicates the static physical capabilities of the MS, independent of the radio access (UTRAN or GERAN), the radio conditions, or other CS or PS services possibly activated by the MS.\nThe MBMS bearer capabilities is a type 4 information element with a maximum length of 4 octets.\nThe MBMS bearer capabilities information element is coded as shown in figure 10.5.155/3GPP TS 24.008 and table 10.5.169/3GPP TS 24.008.\n\n\nFigure 10.5.155/3GPP TS 24.008: MBMS bearer capabilities information element\nTable 10.5.169/3GPP TR 24.008: MBMS bearer capabilities information element\n\nMaximum bit rate for downlink, octet 3 (see 3GPP TS 23.107 [81])\nThe coding is identical to that of the maximum bit rate for downlink, octet 9, in the Quality of service information element (see subclause 10.5.6.5).\n\nIf the sending entity wants to indicate a maximum bit rate for downlink higher than 8640 kbps, it shall set octet 3 to \"11111110\", i.e. 8640 kbps, and shall encode the value for the maximum bit rate in octet 4.\n\nMaximum bit rate for downlink (extended), octet 4\nThe coding is identical to that of the maximum bit rate for downlink (extended), octet 15, in the Quality of service information element (see subclause 10.5.6.5).\n\nThe purpose of the MBMS protocol configuration options information element is to:\n-\ttransfer protocol options associated with the bearer level of an MBMS context activation, and\n-\ttransfer additional MBMS bearer related (protocol) data (e.g. configuration parameters, error codes or messages/events).\nThe MBMS protocol configuration options is a type 4 information element with a minimum length of 3 octets and a maximum length of 253 octets.\nThe MBMS protocol configuration options information element is coded as shown in figure 10.5.156/3GPP TS 24.008 and table 10.5.170/3GPP TS 24.008.\n\n\nFigure 10.5.156/3GPP TS 24.008: MBMS protocol configuration options information element\nTable 10.5.170/3GPP TR 24.008: MBMS protocol configuration options information element\n\nThe purpose of the Enhanced network service access point identifier information element is to identify the service access point that is used at layer 3.\nThe Enhanced network service access point identifier is a type 3 information element with a length of 2 octets.\nThe value part of an Enhanced network service access point identifier information element is coded as shown in figure 10.5.157/3GPP TS 24.008 and table 10.5.171/3GPP TS 24.008.\n\n\nFigure 10.5.157/3GPP TS 24.008: Enhanced network service access point identifier information element\nTable 10.5.171/3GPP TS 24.008: Enhanced network service access point identifier information element\n\nThe purpose of the Request type information element is to indicate whether the MS requests to establish a new connectivity to a PDN or keep the connection(s) to which it has connected via non-3GPP access, or to keep the PDU session to which it has connected via 3GPP access or non-3GPP access.\nThe Request type information element is also used to indicate that the MS is requesting connectivity to a PDN that provides emergency bearer services, or DN that provides emergency services or keep the connection that provides emergency services to which it has connected via non-3GPP access, or to keep the PDU session to which it has connected via 3GPP access or non-3GPP access.\nThe Request type information element is coded as shown in figure 10.5.158/3GPP TS 24.008 and table 10.5.173/3GPP TS 24.008.\nThe Request type is a type 1 information element.\n\n\nFigure 10.5.158/3GPP TS 24.008: Request type information element\nTable 10.5.173/3GPP TS 24.008: Request type information element\n\nThe purpose of the Notification indicator information element is to inform the MS about an event which is relevant for the upper layer using a PDP context or having requested a session management procedure.\nThe Notification indicator information element is coded as shown in figure 10.5.159/3GPP TS 24.008 and table 10.5.174/3GPP TS 24.008.\nThe Notification indicator is a type 4 information element with 3 octets length.\n\n\nFigure 10.5.159/3GPP TS 24.008: Notification indicator information element\nTable 10.5.174/3GPP TS 24.008: Notification indicator information element\n\nThe purpose of the Connectivity type information element is to specify the type of connectivity selected by the network for the PDN connection.\nThe Connectivity type information element is coded as shown in figure 10.5.6.19-1/3GPP TS 24.008 and table 10.5.6.19-1/3GPP TS 24.008.\nThe Connectivity type is a type 1 information element.\n\n\nFigure 10.5.6.19-1/3GPP TS 24.008: Connectivity type information element\nTable 10.5.6.19-1/3GPP TS 24.008: Connectivity type information element\n\nThe purpose of the WLAN offload acceptability information element is to indicate whether traffic can be offloaded using a PDN connection via a WLAN, or not.\nThe values \"offloading the traffic of the PDN connection via a WLAN when in S1 mode is acceptable\" and \"offloading the traffic of the PDN connection via a WLAN when in Iu mode is acceptable\" map to \"indication that the PDP context is offloadable\" as defined in 3GPP TS 23.060 [74] and 3GPP TS 23.401 [122]. The value \"offloading the traffic of the PDN connection via a WLAN when in S1 mode is not acceptable\" and \"offloading the traffic of the PDN connection via a WLAN when in Iu mode is not acceptable\" map to \"indication that the PDP context is not offloadable\" as defined in 3GPP TS 23.060 [74] and 3GPP TS 23.401 [122]. The procedures in 3GPP TS 23.060 [74] when the MS receives the UTRAN offload acceptability value in A/Gb mode or Iu mode apply. The procedures in 3GPP TS 23.401 [122] when the MS receives the E-UTRAN offload acceptability value in S1 mode apply.\nThe WLAN offload acceptability information element is coded as shown in figure 10.5.6.20-1/3GPP TS 24.008 and table 10.5.6.20-1/3GPP TS 24.008.\nThe WLAN offload acceptability is a type 1 information element.\n\n\nFigure 10.5.6.20-1/3GPP TS 24.008: WLAN offload acceptability information element\nTable 10.5.6.20-1/3GPP TS 24.008: WLAN offload acceptability information element\n\nThe purpose of the NBIFOM container information element is to transfer parameters associated with the network-based IP flow mobility (NBIFOM).\nThe NBIFOM container is a type 4 information element with a minimum length of 3 octets and a maximum length of 257 octets.\nThe NBIFOM container information element is coded as shown in figure 10.5.6.21-1/3GPP TS 24.008 and table 10.5.6.21-1/3GPP TS 24.008.\n\nFigure 10.5.6.21-1/3GPP TS 24.008: NBIFOM container information element\nTable 10.5.6.21-1/3GPP TS 24.008: NBIFOM container information element\n\n",
                            "figures_meta_data": [],
                            "tables": [
                                {
                                    "description": "",
                                    "table number": 391,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "",
                                    "table number": 392,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 10.5.167/3GPP TS 24.008: Network service access point identifier information element",
                                    "table number": 393,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "",
                                    "table number": 394,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 10.5.154/3GPP TS 24.008: Protocol configuration options information element",
                                    "table number": 395,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "",
                                    "table number": 396,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "",
                                    "table number": 397,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "",
                                    "table number": 398,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 10.5.154A/3GPP TS 24.008: APN rate control parameters",
                                    "table number": 399,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "",
                                    "table number": 400,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 10.5.6.3.3-1/3GPP TS 24.008: Additional APN rate control parameters for exception data",
                                    "table number": 401,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "",
                                    "table number": 402,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 10.5.6.3.6-1/3GPP TS 24.008: Initial small data rate control parameters",
                                    "table number": 403,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "The PVS IPv4 Address container contents are coded as shown in figure 10.5.6.3.10-1/3GPP TS 24.008 and table 10.5.6.3.10-1/3GPP TS 24.008.",
                                    "table number": 404,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 10.5.6.3.10-1/3GPP TS 24.008: PVS IPv4 Address",
                                    "table number": 405,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "The PVS IPv6 Address container contents are coded as shown in figure 10.5.6.3.11-1/3GPP TS 24.008 and table 10.5.6.3.11-1/3GPP TS 24.008.",
                                    "table number": 406,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 10.5.6.3.11-1/3GPP TS 24.008: PVS IPv6 Address",
                                    "table number": 407,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "The PVS name container contents are coded as shown in figure 10.5.6.3.12-1/3GPP TS 24.008 and table 10.5.6.3.Z-1/3GPP TS 24.008.",
                                    "table number": 408,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 10.5.6.3.12-1/3GPP TS 24.008: PVS name",
                                    "table number": 409,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "",
                                    "table number": 410,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 10.5.6.3A.1: Extended protocol configuration options information element",
                                    "table number": 411,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "",
                                    "table number": 412,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 10.5.155/3GPP TS 24.008: Packet data protocol address information element",
                                    "table number": 413,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "",
                                    "table number": 414,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "The Re-attempt indicator information element is coded as shown in figure 10.5.6.5A and table 10.5.6.5A.",
                                    "table number": 415,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "",
                                    "table number": 416,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "",
                                    "table number": 417,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 10.5.157/3GPP TS 24.008: SM cause information element",
                                    "table number": 418,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "The SM cause 2 information element is coded as shown in figure 10.5.139a/3GPP TS 24.008 and table 10.5.157a/3GPP TS 24.008.",
                                    "table number": 419,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 10.5.157a/3GPP TS 24.008: SM cause 2 information element",
                                    "table number": 420,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "",
                                    "table number": 421,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "",
                                    "table number": 422,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 10.5.159/3GPP TS 24.008: LLC service access point identifier information element",
                                    "table number": 423,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "",
                                    "table number": 424,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 10.5.160/3GPP TS 24.008: Tear down indicator information element",
                                    "table number": 425,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "",
                                    "table number": 426,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 10.5.161/3GPP TS 24.008: Packet Flow Identifier information element",
                                    "table number": 427,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "",
                                    "table number": 428,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "",
                                    "table number": 429,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "",
                                    "table number": 430,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "",
                                    "table number": 431,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 10.5.162/3GPP TS 24.008: Traffic flow template information element",
                                    "table number": 432,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "",
                                    "table number": 433,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 10.5.168/3GPP TS 24.008: TMGI information element",
                                    "table number": 434,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "",
                                    "table number": 435,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "",
                                    "table number": 436,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 10.5.170/3GPP TR 24.008: MBMS protocol configuration options information element",
                                    "table number": 437,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "",
                                    "table number": 438,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 10.5.171/3GPP TS 24.008: Enhanced network service access point identifier information element",
                                    "table number": 439,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "",
                                    "table number": 440,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 10.5.173/3GPP TS 24.008: Request type information element",
                                    "table number": 441,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "",
                                    "table number": 442,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 10.5.174/3GPP TS 24.008: Notification indicator information element",
                                    "table number": 443,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "",
                                    "table number": 444,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 10.5.6.19-1/3GPP TS 24.008: Connectivity type information element",
                                    "table number": 445,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "",
                                    "table number": 446,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 10.5.6.20-1/3GPP TS 24.008: WLAN offload acceptability information element",
                                    "table number": 447,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "The NBIFOM container information element is coded as shown in figure 10.5.6.21-1/3GPP TS 24.008 and table 10.5.6.21-1/3GPP TS 24.008.",
                                    "table number": 448,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 10.5.6.21-1/3GPP TS 24.008: NBIFOM container information element",
                                    "table number": 449,
                                    "summary": "",
                                    "name": ""
                                }
                            ]
                        },
                        {
                            "title": "10.5.7\tGPRS Common information elements",
                            "text_content": "The purpose of the PDP context status information element is to indicate the state of each PDP context which can be identified by NSAPI.\nThe PDP context status information element is a type 4 information element with 4 octets length.\nThe PDP context status information element is coded as shown in figure 10.5.148/3GPP TS 24.008 and table 10.5.164/3GPP TS 24.008.\n\n\nFigure 10.5.148/3GPP TS 24.008 PDP context status information element\nTable 10.5.164/3GPP TS 24.008: PDP context status information element\n\nThe purpose of the radio priority information element is to specify the priority level that the MS shall use at the lower layers for transmission of data related to a PDP context or for mobile originated SMS transmission.\nThe radio priority information element is coded as shown in figure 10.5.145/3GPP TS 24.008 and table 10.5.161/3GPP TS 24.008.\nThe radio priority is a type 1 information element.\n\n\nFigure 10.5.145/3GPP TS 24.008: Radio priority information element\nTable 10.5.161/3GPP TS 24.008: Radio priority information element\n\nThe purpose of the GPRS timer information element is to specify GPRS specific timer values, e.g. for the READY timer.\nThe GPRS timer is a type 3 information element with 2 octets length.\nThe GPRS timer information element is coded as shown in figure 10.5.146/3GPP TS 24.008 and table 10.5.172/3GPP TS 24.008.\n\n\nFigure 10.5.146/3GPP TS 24.008: GPRS Timer information element\nTable 10.5.172/3GPP TS 24.008: GPRS Timer information element\n\nThe purpose of the GPRS timer 2 information element is to specify GPRS specific timer values, e.g. for the timer T3302 or timer T3319.\nThe GPRS timer 2 is a type 4 information element with 3 octets length.\nThe GPRS timer 2 information element is coded as shown in figure 10.5.147/3GPP TS 24.008 and table 10.5.163/3GPP TS 24.008.\n\n\nFigure 10.5.147/3GPP TS 24.008: GPRS Timer 2 information element\nTable 10.5.163/3GPP TS 24.008: GPRS Timer 2 information element\n\nThe purpose of the GPRS timer 3 information element is to specify GPRS specific timer values, e.g. for the timer T3396.\nThe GPRS timer 3 is a type 4 information element with 3 octets length.\nThe GPRS timer 3 information element is coded as shown in figure 10.5.147a/3GPP TS 24.008 and table 10.5.163a/3GPP TS 24.008.\n\n\nFigure 10.5.147a/3GPP TS 24.008: GPRS Timer 3 information element\nTable 10.5.163a/3GPP TS 24.008: GPRS Timer 3 information element\n\nThe purpose of the radio priority 2 information element is to specify the priority level that the MS shall use at the lower layers for transmission of mobile originated TOM8 transmission.\n\nThe radio priority 2 information element is coded as shown in figure 10.5.7.5-1/3GPP TS 24.008 and table 10.5.7.5-1/3GPP TS 24.008.\nThe radio priority is a type 1 information element.\n\n\nFigure 10.5. 7.5-1/3GPP TS 24.008: Radio priority 2 information element\nTable 10.5. 7.5-1/3GPP TS 24.008: Radio priority 2 information element\n\n\nThe purpose of the MBMS context status information element is to indicate the state of each MBMS context which can be identified by an NSAPI.\nThe MBMS context status information element is a type 4 information element with a minimum length of 2 octets and a maximum length of 18 octets.\nThe MBMS context status information element is coded as shown in figure 10.5.149/3GPP TS 24.008 and table 10.5.165/3GPP TS 24.008.\n\n\nFigure 10.5.149/3GPP TS 24.008 MBMS context status information element\nTable 10.5.165/3GPP TS 24.008: MBMS context status information element\n\nThe purpose of the Uplink data status information element is to indicate to the network which preserved PDP contexts have uplink data pending.\nThe Uplink data status information element is a type 4 information element with 4 octets length.\nThe Uplink data status information element is coded as shown in figure 10.5.149/3GPP TS 24.008 and table 10.5.166/3GPP TS 24.008.\n\n\nFigure 10.5.149A/3GPP TS 24.008 Uplink data status information element\nTable 10.5.166/3GPP TS 24.008: Uplink data status information element\nNSAPI uplink status (octet 3 and 4)\n\nOctet 3, bits 1 to 5 are all spare and shall be encoded as 0\n\nNSAPI(5) – NSAPI(15) (octets 3 – 4):\n0\tno uplink data are pending for the preserved PDP context or the PDP context is PDP-INACTIVE or is PDP-ACTIVE with a RAB already established.\n1\tuplink data are pending for the preserved PDP context.\n\n\nThe purpose of the Device properties information element is to indicate if the MS is configured for NAS signalling low priority. The network uses the Device properties information element for core-network congestion handling and for charging purposes.\nThe Device properties information element is coded as shown in figure 10.5.7.8.1/3GPP TS 24.008 and table 10.5.7.8.1/3GPP TS 24.008.\nThe Device properties is a type 1 information element.\n\n\nFigure 10.5.7.8.1/3GPP TS 24.008: Device properties information element\nTable 10.5.7.8.1/3GPP TS 24.008: Device properties information element\n\n",
                            "figures_meta_data": [],
                            "tables": [
                                {
                                    "description": "",
                                    "table number": 450,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 10.5.164/3GPP TS 24.008: PDP context status information element",
                                    "table number": 451,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "",
                                    "table number": 452,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 10.5.161/3GPP TS 24.008: Radio priority information element",
                                    "table number": 453,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "",
                                    "table number": 454,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 10.5.172/3GPP TS 24.008: GPRS Timer information element",
                                    "table number": 455,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "",
                                    "table number": 456,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 10.5.163/3GPP TS 24.008: GPRS Timer 2 information element",
                                    "table number": 457,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "",
                                    "table number": 458,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 10.5.163a/3GPP TS 24.008: GPRS Timer 3 information element",
                                    "table number": 459,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "",
                                    "table number": 460,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "",
                                    "table number": 461,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "",
                                    "table number": 462,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 10.5.165/3GPP TS 24.008: MBMS context status information element",
                                    "table number": 463,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "",
                                    "table number": 464,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "",
                                    "table number": 465,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 10.5.7.8.1/3GPP TS 24.008: Device properties information element",
                                    "table number": 466,
                                    "summary": "",
                                    "name": ""
                                }
                            ]
                        }
                    ]
                }
            ]
        },
        {
            "title": "11\tList of system parameters",
            "description": "The description of timers in the following table should be considered a brief summary. The precise details are found in clauses 3 to 6, which should be considered the definitive descriptions.\n",
            "summary": "",
            "tables": [],
            "figures_meta_data": [],
            "subsections": [
                {
                    "title": "11.1\tTimers and counters for radio resource management",
                    "description": "",
                    "summary": "",
                    "text_content": "See 3GPP TS 44.018 [84].\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "11.2\tTimers of mobility management",
                    "description": "",
                    "summary": "",
                    "text_content": "Table 11.1/3GPP TS 24.008: Mobility management timers - MS-side\n\nTable 11.2/3GPP TS 24.008: Mobility management timers - network-side\n\nNOTE 2:\tThe value of this timer is not specified by this recommendation.\n",
                    "tables": [
                        {
                            "description": "Table 11.1/3GPP TS 24.008: Mobility management timers - MS-side",
                            "table number": 467,
                            "summary": "",
                            "name": ""
                        },
                        {
                            "description": "Table 11.2/3GPP TS 24.008: Mobility management timers - network-side",
                            "table number": 468,
                            "summary": "",
                            "name": ""
                        }
                    ],
                    "figures_meta_data": [],
                    "subsubsections": [
                        {
                            "title": "11.2.1\tTimer T3240 and Timer T3241",
                            "text_content": "Timer T3240 is started in the mobile station when:\n-\tthe mobile station receives a LOCATION UPDATING ACCEPT message completing a location updating procedure in the cases specified in subclauses 4.4.4.6 and 4.4.4.8;\n-\tthe mobile station receives a LOCATION UPDATING REJECT message in the cases specified in subclause 4.4.4.7;\n-\tthe mobile station has sent a CM SERVICE ABORT message as specified in subclause 4.5.1.7;\n-\tthe mobile station has released or aborted all MM connections in the cases specified in 4.3.2.5, 4.3.5.2, 4.5.1.1, and 4.5.3.1;\n-\tthe mobile station receives the paging message from network and enter the MM state 9 (WAIT FOR NETWORK COMMAND).\nTimer T3240 is stopped, reset, and started again at receipt of an MM message.\nTimer T3240 is stopped and reset (but not started) at receipt of a CM message that initiates establishment of an CM connection (an appropriate SETUP, REGISTER, or CP-DATA message as defined in 3GPP TS 24.008, 3GPP TS 24.010 [21] or 3GPP TS 24.011 [22]).\nIf timer T3240 expires, the MS shall abort the RR connection and enter the MM state MM IDLE.\nTimer T3241 is started in the mobile station when entering MM state RR CONNECTION RELEASE NOT ALLOWED.\nTimer T3241 is stopped and reset (but not started) when the MM state RR CONNECTION RELEASE NOT ALLOWED is left.\nIf timer T3241 expires, the MS shall abort the RR connection and enter the MM state MM IDLE.\n\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "11.2.2\tTimers of GPRS mobility management",
                            "text_content": "Table 11.3/3GPP TS 24.008: GPRS Mobility management timers - MS side\n\nTable 11.3a/3GPP TS 24.008: GPRS Mobility management timers – MS side\n\nTable 11.4/3GPP TS 24.008: GPRS Mobility management timers - network side\n\nTable 11.4a/3GPP TS 24.008: GPRS Mobility management timers - network side\n\n",
                            "figures_meta_data": [],
                            "tables": [
                                {
                                    "description": "Table 11.3/3GPP TS 24.008: GPRS Mobility management timers - MS side",
                                    "table number": 469,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 11.3a/3GPP TS 24.008: GPRS Mobility management timers – MS side",
                                    "table number": 470,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 11.4/3GPP TS 24.008: GPRS Mobility management timers - network side",
                                    "table number": 471,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 11.4a/3GPP TS 24.008: GPRS Mobility management timers - network side",
                                    "table number": 472,
                                    "summary": "",
                                    "name": ""
                                }
                            ]
                        },
                        {
                            "title": "11.2.3\tTimers of GPRS session management",
                            "text_content": "Table 11.2c/3GPP TS 24.008: GPRS session management timers - MS side\n\nNOTE 1:\tTypically, the procedures are aborted on the fifth expiry of the relevant timer. Exceptions are described in the corresponding procedure description.\nNOTE 2:\tThe back-off timer is used to describe a logical model of the required MS behaviour. This model does not imply any specific implementation, e.g. as a timer or timestamp.\nNOTE 3:\tReference to back-off timer in this section can either refer to use of timer T3396 or to use of a different packet system specific timer within the MS. Whether the MS uses T3396 as a back-off timer or it uses different packet system specific timers as back-off timers is left up to MS implementation.\nTable 11.2d/3GPP TS 24.008: GPRS session management timers - network side\n\nNOTE 4:\tTypically, the procedures are aborted on the fifth expiry of the relevant timer. Exceptions are described in the corresponding procedure description.\n\n",
                            "figures_meta_data": [],
                            "tables": [
                                {
                                    "description": "Table 11.2c/3GPP TS 24.008: GPRS session management timers - MS side",
                                    "table number": 473,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 11.2d/3GPP TS 24.008: GPRS session management timers - network side",
                                    "table number": 474,
                                    "summary": "",
                                    "name": ""
                                }
                            ]
                        }
                    ]
                },
                {
                    "title": "11.3\tTimers of circuit-switched call control",
                    "description": "",
                    "summary": "",
                    "text_content": "Table 11.3/3GPP TS 24.008: Call control timers - MS side\n\nNOTE 1:\tT310 is not started if progress indicator #1, #2, or #64 has been delivered in the CALL PROCEEDING message or in a previous PROGRESS message.\nNOTE 2:\tThe value of this timer is implementation dependent.\n\nTable 11.4/3GPP TS 24.008: Call control timers - network side\n\nNOTE 1:\tThe network may already have applied an internal alerting supervision function; e.g. incorporated within call control. If such a function is known to be operating on the call, then timer T301 is not used.\nNOTE 2:\tThese time values are set by the network operator.\nNOTE 3:\tWhen applied to the supplementary service CCBS, the timer T334 can either represent the recall timer T4 or the notification timer T10 (see 3GPP TS 23.093 [88a]). Thus the timer T334 can take two different values. 3GPP TS 23.093 [88a] defines the range of these values.\nThis annex gives an example of how the Called Party Subaddress IE is encoded to carry subaddress digits that use IA5 characters. This example is also applicable to the Calling Party Subaddress IE.\n\n\nNOTE 1:\tThe value of this bit has no significance when the type of subaddress is \"NSAP\".\nNOTE 2:\tThese bits are spare.\nNOTE 3:\tThe Authority and Format Identifier code 50 (in BCD) indicates that the subaddress consists of IA5 characters (see ISO standard 8348 AD2).\nNOTE 4:\tIA5 character as defined in ITU-T Recommendation T.50 [52]/ISO 646 and then encoded into two semi-octets according to the \"preferred binary encoding\" defined in X.213 [144]/ISO 8348 AD2. (Each character is converted into a number in the range 32 to 127 using the ISO 646 encoding with zero parity and the parity bit in the most significant position. This number is then reduced by 32 to give a new number in the range 0 to 95. The new number is then treated as a pair of decimal digits with the value of each digit being encoded in a semi-octet.)\nNOTE 5:\tthe number of IA5 characters in the subaddress may vary, subject to an upper limit of 19 IA5 characters.\n",
                    "tables": [
                        {
                            "description": "Table 11.3/3GPP TS 24.008: Call control timers - MS side",
                            "table number": 475,
                            "summary": "",
                            "name": ""
                        },
                        {
                            "description": "Table 11.4/3GPP TS 24.008: Call control timers - network side",
                            "table number": 476,
                            "summary": "",
                            "name": ""
                        },
                        {
                            "description": "",
                            "table number": 477,
                            "summary": "",
                            "name": ""
                        }
                    ],
                    "figures_meta_data": [],
                    "subsubsections": []
                }
            ]
        },
        {
            "title": "B.1\tIntroduction",
            "description": "This annex describes the various compatibility checks which shall be carried out to ensure that the best matched MS and network capabilities are achieved on a call between a PLMN and the ISDN.\nThree different processes of compatibility checking shall be performed:\ni)\tat the user-to-network interface on the calling side (see B.2);\nii)\tat the network-user interface on the called side (see B.3.2);\niii)\tuser-to-user (see B 3.3).\nNOTE:\tIn this context and throughout this annex the term \"called user\" is the end point entity which is explicitly addressed.\nFor details on the coding of the information required for compatibility checking, see annex C.\n",
            "summary": "",
            "tables": [],
            "figures_meta_data": [],
            "subsections": []
        },
        {
            "title": "B.2\tCalling side compatibility checking",
            "description": "",
            "summary": "",
            "tables": [],
            "figures_meta_data": [],
            "subsections": [
                {
                    "title": "B.2.1\tCompatibility checking of the CM SERVICE REQUEST message",
                    "description": "",
                    "summary": "",
                    "text_content": "The network shall check if the service requested in the CM SERVICE REQUEST message is permitted for that subscriber.\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "B.2.2\tCompatibility/Subscription checking of the SETUP message",
                    "description": "",
                    "summary": "",
                    "text_content": "At the calling side the network shall check that the basic service(s) requested by the calling MS in the Bearer Capability information element(s) match(es) with the basic services provided to that subscriber by the PLMN. If for at least one bearer capability information element contained in the SETUP message a mismatch is detected, then the network shall proceed as follows:\n-\tif the SETUP message contained two bearer capability information elements for only one of which a mismatch is detected, the network shall either:\n-\tunder the conditions specified in 3GPP TS 27.001 [36] (e.g. TS 61 and TS 62), accept the SETUP message with a CALL PROCEEDING message containing the, possibly negotiated, bearer capability information element for which no mismatch is detected, or\n-\treject the call using one of the causes listed in annex H.\n-\totherwise the network shall reject the call using one of the causes listed in annex H.\nNetwork services are described in 3GPP TS 22.002 [3] and 3GPP TS 22.003 [4] as bearer services and teleservices, respectively.\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                }
            ]
        },
        {
            "title": "B.3\tCalled side compatibility checking",
            "description": "In this clause, the word \"check\" means that the MS examines the contents of the specified information element.\n",
            "summary": "",
            "tables": [],
            "figures_meta_data": [],
            "subsections": [
                {
                    "title": "B.3.1\tCompatibility checking with addressing information",
                    "description": "",
                    "summary": "",
                    "text_content": "If an incoming SETUP message is offered to the MS with addressing information (i.e. sub-address or called party number) the following shall occur:\na)\tif the MS has a DDI number or a sub-address, then the information in any Called Party BCD Number or any Called Party subaddress information elements of the incoming SETUP message shall be checked by the MS against the corresponding part of the number assigned to the user (e.g. for DDI) or the user's own sub-address.\nIn the cases of a mismatch, the MS shall release the call. In the case of a match, the compatibility checking described in B.3.2 and B.3.3 shall be performed.\nb)\tif the MS has no DDI number and no sub-address, then the Called Party BCD Number and Called Party Sub-address information element shall be ignored for the purposes of compatibility checking. The compatibility checking described in B.3.2 and B.3.3 shall be performed.\nNOTE:\tAccording to the user's requirements, compatibility checking can be performed in various ways from the viewpoint of execution order and information to be checked, e.g. first DDI number/sub-address and then bearer capability or vice versa.\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "B.3.2\tNetwork-to-MS compatibility checking",
                    "description": "",
                    "summary": "",
                    "text_content": "When the network is providing a basic service at the called side, the MS shall check that the basic service(s) offered by the network in the Bearer Capability information element(s) match(es) the basic services that the MS is able to support. If a mismatch is detected, then the MS shall proceed as follows:\n-\tif the SETUP message contained two bearer capability information elements for only one of which a mismatch is detected, the MS shall either:\n-\tunder the conditions specified in 3GPP TS 27.001 [36] (e.g. TS 61 and TS 62), accept the SETUP message with a CALL CONFIRMED message containing the, possibly negotiated, bearer capability information element for which no mismatch is detected, or\n-\treject the call using cause No. 88 \"incompatible destination\".\n-\totherwise the MS shall reject the offered call using a RELEASE COMPLETE message with cause No. 88 \"incompatible destination\".\nNOTE:\tThe backup bearer capability IE is not subject to compatibility checking.\nWhen interworking with existing networks, limitations in network or distant user signalling (e.g. in the case of an incoming call from a PSTN or a call from an analogue terminal) may restrict the information available to the called MS in the incoming SETUP message (e.g. missing Bearer Capability Information Element or missing High Layer Compatibility Information Element). For compatibility checking, and handling of such calls see 3GPP TS 27.001 [36].\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "B.3.3\tUser-to-User compatibility checking",
                    "description": "",
                    "summary": "",
                    "text_content": "See 3GPP TS 27.001 [36].\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                }
            ]
        },
        {
            "title": "B.4\tHigh layer compatibility checking",
            "description": "See 3GPP TS 27.001 [36].\n",
            "summary": "",
            "tables": [],
            "figures_meta_data": [],
            "subsections": []
        },
        {
            "title": "C.1\tPurpose",
            "description": "This annex describes principles that shall be used when the calling MS specifies information during call setup regarding low layer capabilities required in the network and by the destination terminal. Refer also to 3GPP TS 27.001 [36].\nNOTE:\tIn this context and throughout this annex the term \"called user\" is the end point entity which is explicitly addressed. This may also be an explicitly addressed interworking unit (IWU) (see ITU-T I.500-Series Recommendations and ITU-T Recommendation X.31 case a).\n",
            "summary": "",
            "tables": [],
            "figures_meta_data": [],
            "subsections": []
        },
        {
            "title": "C.2\tPrinciples",
            "description": "",
            "summary": "",
            "tables": [],
            "figures_meta_data": [],
            "subsections": [
                {
                    "title": "C.2.1\tDefinition of types of information",
                    "description": "",
                    "summary": "",
                    "text_content": "There are three different types of information that the calling PLMN user may specify during call setup to identify low layer capabilities needed in the network and in the destination terminal:\na)\ttype I information is information about the calling terminal which is only used at the destination end to allow a decision regarding terminal compatibility. An example would be the user information layer 3 protocol. Type I information is encoded in octets 5 to 7 of the low layer compatibility information element;\nb)\ttype II information is only used by the network (PLMN) to which the calling user is connected for selection of PLMN specific network resources, e.g. channel type or specific functionality within the interworking function (IWF, see 3GPP TS 23.093 [88a]). This type of information is always present. An example is the connection element. Type II information is coded in:\ni)\toctet 3 of the bearer capability information element when the information transfer capability required by the calling user is speech ;\nii)\toctets 3, 4, 5, and optionally octet 7 of the bearer capability information element when the information transfer capability required by the calling user is not speech;\nc)\ttype III information is required for selection of a basic service from the choice of basic services offered by the network and together with type II information for selection of an appropriate interworking function (IWF, see 3GPP TS 29.007 [38]), as well as for terminal compatibility checking at the destination terminal. An example is the information transfer capability. Type III information is always present and is encoded in:\ni)\toctet 3 of the bearer capability information element when the information transfer capability required by the calling user is speech ;\nii)\toctets 3, 5, 6, 6a, 6b and 6c of the bearer capability information element when the information transfer capability required by the calling user is not speech;\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "C.2.2\tExamination by network",
                    "description": "",
                    "summary": "",
                    "text_content": "Type I information is user-to-user (i.e. at the calling side not examined by network) while type II and III information should be available for examination by the destination user and the network.\nNOTE:\tIn the case of a mobile terminated call, if the type II and type III information is not sufficient for the selection of an appropriate interworking function, the type I information will also examined by the network.\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "C.2.3\tLocation of type I information",
                    "description": "",
                    "summary": "",
                    "text_content": "Type I information (i.e. terminal information only significant to the called user) shall, when used, be included in the low layer compatibility information element.\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "C.2.4\tLocation of types II and III information",
                    "description": "",
                    "summary": "",
                    "text_content": "Type II information is included in the bearer capability information element. Type III information is also included in the bearer capability information element. The network may use and modify type III information (e.g. to provide interworking).\nIn any case a modification of the bearer capability information element has to be performed when interworking to the fixed network (e.g. ISDN) is required, where the signalling of the radio interface has to be mapped to fixed network signalling (e.g. mapping of GSM BCIE to ISDN BCIE, see 3GPP TS 29.007 [38]).\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "C.2.5\tRelationship between bearer capability and low layer compatibility information elements",
                    "description": "",
                    "summary": "",
                    "text_content": "There shall be no contradiction of information between the low layer compatibility and the bearer capability at the originating side. However, as some bearer capability code points may be modified during the transport of the call (e.g. by the interworking function), this principle implies that there should be minimal duplication of information between the bearer capability information element and the low layer compatibility information element.\nNOTE:\tIf as a result of duplication, a contradiction occurs at the terminating side between the bearer capability information element and the low layer compatibility information element at the terminating side, the receiving entity shall ignore the conflicting information in the low layer compatibility information element.\nThis annex gives examples of the coding of bearer capability information elements for various telecommunication services. This annex is included for information purposes only. In the case of any inconsistency between this annex and 3GPP TS 27.001 [36], then 3GPP TS 27.001 [36] shall take precedence over this annex.\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                }
            ]
        },
        {
            "title": "D.1\tCoding for speech for a full rate support only mobile station",
            "description": "",
            "summary": "",
            "tables": [],
            "figures_meta_data": [],
            "subsections": [
                {
                    "title": "D.1.1\tMobile station to network direction",
                    "description": "",
                    "summary": "",
                    "text_content": "\n\n",
                    "tables": [
                        {
                            "description": "",
                            "table number": 478,
                            "summary": "",
                            "name": ""
                        }
                    ],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "D.1.2\tNetwork to mobile station direction",
                    "description": "",
                    "summary": "",
                    "text_content": "\n\n",
                    "tables": [
                        {
                            "description": "",
                            "table number": 479,
                            "summary": "",
                            "name": ""
                        }
                    ],
                    "figures_meta_data": [],
                    "subsubsections": []
                }
            ]
        },
        {
            "title": "D.2\tAn example of a coding for modem access with V22-bis, 2,4 kbit/s, 8 bit no parity",
            "description": "",
            "summary": "",
            "tables": [],
            "figures_meta_data": [],
            "subsections": [
                {
                    "title": "D.2.1\tMobile station to network direction, data compression allowed",
                    "description": "",
                    "summary": "",
                    "text_content": "\n\n",
                    "tables": [
                        {
                            "description": "",
                            "table number": 480,
                            "summary": "",
                            "name": ""
                        }
                    ],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "D.2.2\tNetwork to mobile station direction, data compression possible",
                    "description": "",
                    "summary": "",
                    "text_content": "\n\n",
                    "tables": [
                        {
                            "description": "",
                            "table number": 481,
                            "summary": "",
                            "name": ""
                        }
                    ],
                    "figures_meta_data": [],
                    "subsubsections": []
                }
            ]
        },
        {
            "title": "D.3\tAn example of a coding for group 3 facsimile (9,6 kbit/s, transparent)",
            "description": "",
            "summary": "",
            "tables": [],
            "figures_meta_data": [],
            "subsections": [
                {
                    "title": "D.3.1\tMobile station to network direction",
                    "description": "",
                    "summary": "",
                    "text_content": "\n\n",
                    "tables": [
                        {
                            "description": "",
                            "table number": 482,
                            "summary": "",
                            "name": ""
                        }
                    ],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "D.3.2\tNetwork to mobile station direction",
                    "description": "",
                    "summary": "",
                    "text_content": "\n\nThis annex summarizes a comparison of the procedures for call control as specified in ITU-T Recommendation Q.931 (blue book) and 3GPP TS 24.008.\nIf no comment is given, it means that the procedures specified in ITU-T Recommendation Q.931 and 3GPP TS 24.008 are similar. However, it should be noted that even in such cases the procedures may be described in slightly different ways in the two documents.\nTable E.1/3GPP TS 24.008: Circuit-switched call control procedures\n\nTable E.1/3GPP TS 24.008: Circuit-switched call control procedures (continued)\n\nTable E.1/3GPP TS 24.008: Circuit-switched call control procedures (continued)\n\nTable E.1/3GPP TS 24.008: Circuit-switched call control procedures (continued)\n\nSee 3GPP TS 44.018 [84].\nThis annex describes the cause values for the mobility management procedures for non-GPRS services (MM) and GPRS services (GMM). Clauses G1 to G5 are valid for both MM and GMM. However, the following codes are applicable for non-GPRS services only:\n#38 Call cannot be identified\nClause G.6 applies only for GMM procedures.\n",
                    "tables": [
                        {
                            "description": "",
                            "table number": 483,
                            "summary": "",
                            "name": ""
                        },
                        {
                            "description": "Table E.1/3GPP TS 24.008: Circuit-switched call control procedures",
                            "table number": 484,
                            "summary": "",
                            "name": ""
                        },
                        {
                            "description": "Table E.1/3GPP TS 24.008: Circuit-switched call control procedures (continued)",
                            "table number": 485,
                            "summary": "",
                            "name": ""
                        },
                        {
                            "description": "Table E.1/3GPP TS 24.008: Circuit-switched call control procedures (continued)",
                            "table number": 486,
                            "summary": "",
                            "name": ""
                        },
                        {
                            "description": "Table E.1/3GPP TS 24.008: Circuit-switched call control procedures (continued)",
                            "table number": 487,
                            "summary": "",
                            "name": ""
                        }
                    ],
                    "figures_meta_data": [],
                    "subsubsections": []
                }
            ]
        },
        {
            "title": "G.1\tCauses related to MS identification",
            "description": "Cause value = 2 IMSI unknown in HLR\nThis cause is sent to the MS if the MS is not known (registered) in the HLR, or if the MS has packet only subscription (see 3GPP TS 29.272 [150]). This cause code does not affect operation of the GPRS service, although is may be used by a GMM procedure.\nCause value = 3 Illegal MS\nThis cause is sent to the MS when the network refuses service to the MS either because an identity of the MS is not acceptable to the network or because the MS does not pass the authentication check, i.e. the SRES received from the MS is different from that generated by the network. When used by an MM procedure, except the authentication procedure, this cause does not affect operation of the GPRS service.\nCause value = 4 IMSI unknown in VLR\nThis cause is sent to the MS when the given IMSI is not known at the VLR.\nCause value = 5 IMEI not accepted\nThis cause is sent to the MS if the network does not accept emergency call establishment using an IMEI or not accept attach procedure for emergency services using an IMEI.\nCause value = 6 Illegal ME\nThis cause is sent to the MS if the ME used is not acceptable to the network, e.g. prohibit listed When used by an MM procedure, this cause does not affect operation of the GPRS service.\n",
            "summary": "",
            "tables": [],
            "figures_meta_data": [],
            "subsections": []
        },
        {
            "title": "G.2\tCause related to subscription options",
            "description": "Cause value = 11 PLMN not allowed\nThis cause is sent to the MS if it requests service, or if the network initiates a detach request, in a PLMN where the MS, by subscription or due to operator determined barring is not allowed to operate.\nCause value = 12 Location Area not allowed\nThis cause is sent to the MS if it requests service, or if the network initiates a detach request, in a location area where the HPLMN determines that the MS, by subscription, is not allowed to operate.\nNOTE 1:\tIf cause #12 is sent to a roaming subscriber the subscriber is denied service even if other PLMNs are available on which registration was possible.\nCause value = 13 Roaming not allowed in this location area\nThis cause is sent to an MS which requests service, or if the network initiates a detach request, in a location area of a PLMN which by subscription offers roaming to that MS but not  in that location area.\nCause value = 15 No Suitable Cells In Location Area\nThis cause is sent to the MS if it requests service, or if the network initiates a detach request, in a location area where the MS, by subscription, is not allowed to operate, but when it should find another allowed location area or tracking area in the same PLMN or an equivalent PLMN.\nNOTE 2:\tCause #15 and cause #12 differ in the fact that cause #12 does not trigger the MS to search for another allowed location area on the same PLMN.\nCause value = 25 Not authorized for this CSG\nThis cause is sent to the MS if it requests access, or if the network initiates a detach request, in a CSG cell where the MS either has no subscription to operate or the MS's subscription has expired and it should find another cell in the same PLMN or an equivalent PLMN.\nNOTE 3:\tThe MS not supporting CSG will not receive cause# 25, as such a MS is not supposed to try to access a CSG cell.\n",
            "summary": "",
            "tables": [],
            "figures_meta_data": [],
            "subsections": []
        },
        {
            "title": "G.3\tCauses related to PLMN specific network failures and congestion/Authentication Failures",
            "description": "Cause value = 20 MAC failure\nThis cause is sent to the network if the USIM detects that the MAC in the AUTHENTICATION REQUEST or AUTHENTICATION_AND_CIPHERING REQUEST message is not fresh (see 3GPP TS 33.102 [5a]).\nCause value = 21 Synch failure\nThis cause is sent to the network if the USIM detects that the SQN in the AUTHENTICATION REQUEST or AUTHENTICATION_AND_CIPHERING REQUEST message is out of range (see 3GPP TS 33.102 [5a]).\nCause value = 17 Network failure\nThis cause is sent to the MS if the MSC cannot service an MS generated request because of PLMN failures, e.g. problems in MAP.\nCause value = 22 Congestion\nThis cause is sent to the MS if the network cannot serve a request from the MS  because of congestion (e.g. congestion of the MSC or SGSN or GGSN or PDN Gateway; no channel; facility busy/congested etc.).\nCause value = 23 GSM authentication unacceptable\nThis cause is sent to the network in Iu mode if a USIM is inserted in the MS and there is no Authentication Parameter AUTN IE present in the AUTHENTICATION REQUEST or AUTHENTICATION_AND_CIPHERING REQUEST message.\n",
            "summary": "",
            "tables": [],
            "figures_meta_data": [],
            "subsections": []
        },
        {
            "title": "G.4\tCauses related to nature of request",
            "description": "Cause value = 32 Service option not supported\nThis cause is sent when the MS requests a service/facility in the CM SERVICE REQUEST message which is not supported by the PLMN.\nCause value = 33 Requested service option not subscribed\nThis cause is sent when the MS requests a service option for which it has no subscription.\nCause value = 34 Service option temporarily out of order\nThis cause is sent when the MSC cannot service the request because of temporary outage of one or more functions required for supporting the service.\nCause value = 38 Call cannot be identified\nThis cause is sent when the network cannot identify the call associated with a call re-establishment request.\n",
            "summary": "",
            "tables": [],
            "figures_meta_data": [],
            "subsections": []
        },
        {
            "title": "G.5\tCauses related to invalid messages",
            "description": "Cause value = 95 Semantically incorrect message.\nSee annex H, subclause H.5.10.\nCause value = 96 Invalid mandatory information.\nSee annex H, subclause H.6.1.\nCause value = 97 Message type non-existent or not implemented.\nSee annex H, subclause H.6.2.\nCause value = 98 Message type not compatible with protocol state.\nSee annex H, subclause H.6.3.\nCause value = 99 Information element non-existent or not implemented.\nSee annex H, subclause H.6.4.\nCause value = 100 Conditional IE error.\nSee annex H, subclause H.6.5.\nCause value = 101 Message not compatible with protocol state.\nSee annex H, subclause H.6.6.\nCause value = 111 Protocol error, unspecified.\nSee annex H, subclause H.6.8.\n",
            "summary": "",
            "tables": [],
            "figures_meta_data": [],
            "subsections": []
        },
        {
            "title": "G.6\tAdditional cause codes for GMM",
            "description": "Cause value = 7 GPRS services not allowed\nThis cause is sent to the MS when it is not allowed to operate GPRS services.\nCause value = 8 GPRS services and non-GPRS services not allowed\nThis cause is sent to the MS when it is not allowed to operate either GPRS or non-GPRS services.\nCause value = 9 MS identity cannot be derived by the network\nThis cause is sent to the MS when the network cannot derive the MS's identity from the P-TMSI/GUTI, e.g. because no matching identity/context can be found in the network.\nCause value = 10 Implicitly detached\nThis cause is sent to the MS either if the network has implicitly detached the MS, e.g. some while after the mobile reachable timer has expired, or if the GMM context data related to the subscription dose not exist in the SGSN e.g. because of a SGSN restart, or because of a periodic routing area update request routed to a new SGSN.\nCause value = 14 GPRS services not allowed in this PLMN\nThis cause is sent to the MS which requests GPRS service, or if the network initiates a detach request in a PLMN which does not offer roaming for GPRS services to that MS.\nCause value = 16 MSC temporarily not reachable\nThis cause is sent to the MS if it requests a combined GPRS attach or routing are updating in a PLMN where the MSC is temporarily not reachable via the GPRS part of the network.\nCause value = 28 SMS provided via GPRS in this routing area\nThis cause is sent to the MS if the SGSN decides not to establish a Gs association since the MS is supposed to send and receive short messages via GPRS.\nCause value = 40 No PDP context activated\nThis cause is sent to the MS if the MS requests an establishment of the radio access bearers for all active PDP contexts by sending a SERVICE REQUEST message indicating \"data\" to the network, but the SGSN does not have any active PDP context(s).\n",
            "summary": "",
            "tables": [],
            "figures_meta_data": [],
            "subsections": []
        },
        {
            "title": "H.1\tNormal class",
            "description": "",
            "summary": "",
            "tables": [],
            "figures_meta_data": [],
            "subsections": [
                {
                    "title": "H.1.1\tCause No. 1 \"unassigned (unallocated) number\"",
                    "description": "",
                    "summary": "",
                    "text_content": "This cause indicates that the destination requested by the mobile station cannot be reached because, although the number is in a valid format, it is not currently assigned (allocated).\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "H.1.2\tCause No. 3 \"no route to destination\"",
                    "description": "",
                    "summary": "",
                    "text_content": "This cause indicates that the called user cannot be reached because the network through which the call has been routed does not serve the destination desired.\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "H.1.3\tCause No. 6 \"channel unacceptable\"",
                    "description": "",
                    "summary": "",
                    "text_content": "This cause indicates the channel most recently identified is not acceptable to the sending entity for use in this call.\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "H.1.4\tCause No. 8 \"operator determined barring\"",
                    "description": "",
                    "summary": "",
                    "text_content": "This cause indicates that the MS has tried to access a service that the MS's network operator or service provider is not prepared to allow.\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "H.1.4a\tCause No. 13 \"call completed elsewhere\"",
                    "description": "",
                    "summary": "",
                    "text_content": "This cause indicates that the call is being cleared by the network towards the present device because the called user has responded to the call on another device. This cause only applies when the MSC/VLR is an MSC server enhanced for ICS as specified in 3GPP TS 24.292 [163] and performs interworking with SIP as specified in 3GPP TS 29.292 [164].\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "H.1.5\tCause No.16 \"normal call clearing\"",
                    "description": "",
                    "summary": "",
                    "text_content": "This cause indicates that the call is being cleared because one of the users involved in the call has requested that the call be cleared.\nUnder normal situations, the source of this cause is not the network.\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "H.1.6\tCause No.17 \"user busy\"",
                    "description": "",
                    "summary": "",
                    "text_content": "This cause is used when the called user has indicated the inability to accept another call.\nIt is noted that the user equipment is compatible with the call.\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "H.1.7\tCause No. 18 \"no user responding\"",
                    "description": "",
                    "summary": "",
                    "text_content": "This cause is used when a user does not respond to a call establishment message with either an alerting or connect indication within the prescribed period of time allocated (defined by the expiry of either timer T303 or T310).\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "H.1.8\tCause No. 19 \"user alerting, no answer\"",
                    "description": "",
                    "summary": "",
                    "text_content": "This cause is used when a user has provided an alerting indication but has not provided a connect indication within a prescribed period of time.\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "H.1.9\tCause No. 21 \"call rejected\"",
                    "description": "",
                    "summary": "",
                    "text_content": "This cause indicates that the equipment sending this cause does not wish to accept this call, although it could have accepted the call because the equipment sending this cause is neither busy nor incompatible.\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "H.1.10\tCause No. 22 \"number changed\"",
                    "description": "",
                    "summary": "",
                    "text_content": "This cause is returned to a calling mobile station when the called party number indicated by the calling mobile station is no longer assigned. The new called party number may optionally be included in the diagnostic field. If a network does not support this capability, cause No. 1 \"unassigned (unallocated) number\" shall be used.\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "H.1.10a\t\t\tCause No. 24 \"call rejected due to feature at the destination\"",
                    "description": "",
                    "summary": "",
                    "text_content": "This cause is returned when the call is rejected due to a feature at the destination, e.g. Anonymous Call Rejection. This cause is only generated by the network. This cause is not generated by the MS.\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "H.1.11\tCause No. 25 \"pre-emption\"",
                    "description": "",
                    "summary": "",
                    "text_content": "This cause is returned to the network when a mobile station clears an active call which is being pre-empted by another call with higher precedence.\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "H.1.12\tCause No. 26 \"non-selected user clearing\"",
                    "description": "",
                    "summary": "",
                    "text_content": "Not supported. Treated as cause no. 31.\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "H.1.13\tCause No. 27 \"destination out of order\"",
                    "description": "",
                    "summary": "",
                    "text_content": "This cause indicates that the destination indicated by the mobile station cannot be reached because the interface to the destination is not functioning correctly. The term \"not functioning correctly\" indicates that a signalling message was unable to be delivered to the remote user; e.g., a physical layer or data link layer failure at the remote user, user equipment off-line, etc.\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "H.1.14\tCause No. 28 \"invalid number format (incomplete number)\"",
                    "description": "",
                    "summary": "",
                    "text_content": "This cause indicates that the called user cannot be reached because the called party number is not a valid format or is not complete.\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "H.1.15\tCause No. 29 \"facility rejected\"",
                    "description": "",
                    "summary": "",
                    "text_content": "This cause is returned when a facility requested by user can not be provided by the network.\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "H.1.16\tCause No. 30 \"response to STATUS ENQUIRY\"",
                    "description": "",
                    "summary": "",
                    "text_content": "This cause is included in STATUS messages if the message is sent in response to a STATUS ENQUIRY message. See also subclause 5.5.3.\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "H.1.17\tCause No. 31 \"normal, unspecified\"",
                    "description": "",
                    "summary": "",
                    "text_content": "This cause is used to report a normal event only when no other cause in the normal class applies.\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                }
            ]
        },
        {
            "title": "H.2\tResource unavailable class",
            "description": "",
            "summary": "",
            "tables": [],
            "figures_meta_data": [],
            "subsections": [
                {
                    "title": "H.2.1\tCause No. 34 \"no circuit/channel available\"",
                    "description": "",
                    "summary": "",
                    "text_content": "This cause indicates that there is no appropriate circuit/channel presently available to handle the call.\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "H.2.2\tCause No. 38 \"network out of order\"",
                    "description": "",
                    "summary": "",
                    "text_content": "This cause indicates that the network is not functioning correctly and that the condition is likely to last a relatively long period of time; e.g., immediately re-attempting the call is not likely to be successful.\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "H.2.3\tCause No. 41 \"temporary failure\"",
                    "description": "",
                    "summary": "",
                    "text_content": "This cause indicates that the network is not functioning correctly and that the condition is not likely to last a long period of time; e.g., the mobile station may wish to try another call attempt almost immediately.\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "H.2.4\tCause No. 42 \"switching equipment congestion\"",
                    "description": "",
                    "summary": "",
                    "text_content": "This cause indicates that the switching equipment generating this cause is experiencing a period of high traffic.\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "H.2.5\tCause No. 43 \"access information discarded\"",
                    "description": "",
                    "summary": "",
                    "text_content": "This cause indicates that the network could not deliver access information to the remote user as requested; i.e., a user-to-user information, low layer compatibility, high layer compatibility, or sub-address as indicated in the diagnostic.\nIt is noted that the particular type of access information discarded is optionally included in the diagnostic.\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "H.2.6\tCause No. 44 \"requested circuit/channel not available\"",
                    "description": "",
                    "summary": "",
                    "text_content": "This cause is returned when the circuit or channel indicated by the requesting entity cannot be provided by the other side of the interface.\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "H.2.7\tCause No. 47 \"resource unavailable, unspecified\"",
                    "description": "",
                    "summary": "",
                    "text_content": "This cause is used to report a resource unavailable event only when no other cause in the resource unavailable class applies.\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                }
            ]
        },
        {
            "title": "H.3\tService or option not available class",
            "description": "",
            "summary": "",
            "tables": [],
            "figures_meta_data": [],
            "subsections": [
                {
                    "title": "H.3.1\tCause No. 49 \"quality of service unavailable\"",
                    "description": "",
                    "summary": "",
                    "text_content": "This cause indicates to the mobile station that the requested quality of service, as defined in ITU-T Recommendation X.213 [144], cannot be provided.\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "H.3.2\tCause No. 50 \"Requested facility not subscribed\"",
                    "description": "",
                    "summary": "",
                    "text_content": "This cause indicates that the requested supplementary service could not be provided by the network because the user has no completed the necessary administrative arrangements with its supporting networks.\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "H.3.3\tCause No. 55 \"Incoming calls barred within the CUG\"",
                    "description": "",
                    "summary": "",
                    "text_content": "This cause indicates that although the called party is a member of the CUG for the incoming CUG call, incoming calls are not allowed within this CUG.\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "H.3.4\tCause No. 57 \"bearer capability not authorized\"",
                    "description": "",
                    "summary": "",
                    "text_content": "This cause indicates that the mobile station has requested a bearer capability which is implemented by the equipment which generated this cause but the mobile station is not authorized to use.\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "H.3.5\tCause No. 58 \"bearer capability not presently available\"",
                    "description": "",
                    "summary": "",
                    "text_content": "This cause indicates that the mobile station has requested a bearer capability which is implemented by the equipment which generated this cause but which is not available at this time.\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "H.3.6\tCause No. 63 \"service or option not available, unspecified\"",
                    "description": "",
                    "summary": "",
                    "text_content": "This cause is used to report a service or option not available event only when no other cause in the service or option not available class applies.\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "H.3.7\tCause No. 68 \"ACM equal to or greater than ACMmax\"",
                    "description": "",
                    "summary": "",
                    "text_content": "This cause is used by the mobile to indicate that call clearing is due to ACM being greater than or equal to ACMmax.\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                }
            ]
        },
        {
            "title": "H.4\tService or option not implemented class",
            "description": "",
            "summary": "",
            "tables": [],
            "figures_meta_data": [],
            "subsections": [
                {
                    "title": "H.4.1\tCause No. 65 \"bearer service not implemented\"",
                    "description": "",
                    "summary": "",
                    "text_content": "This cause indicates that the equipment sending this cause does not support the bearer capability requested.\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "H.4.2\tCause No. 69 \"Requested facility not implemented\"",
                    "description": "",
                    "summary": "",
                    "text_content": "This cause indicates that the equipment sending this cause does not support the requested supplementary service.\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "H.4.3\tCause No. 70 \"only restricted digital information bearer capability is available\"",
                    "description": "",
                    "summary": "",
                    "text_content": "This cause indicates that one equipment has requested an unrestricted bearer service, but that the equipment sending this cause only supports the restricted version of the requested bearer capability.\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "H.4.4\tCause No. 79 \"service or option not implemented, unspecified\"",
                    "description": "",
                    "summary": "",
                    "text_content": "This cause is used to report a service or option not implemented event only when no other cause in the service or option not implemented class applies.\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                }
            ]
        },
        {
            "title": "H.5\tInvalid message (e.g., parameter out of range) class",
            "description": "",
            "summary": "",
            "tables": [],
            "figures_meta_data": [],
            "subsections": [
                {
                    "title": "H.5.1\tCause No. 81 \"invalid transaction identifier value\"",
                    "description": "",
                    "summary": "",
                    "text_content": "This cause indicates that the equipment sending this cause has received a message with a transaction identifier which is not currently in use on the MS-network interface.\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "H.5.2\tCause No. 87 \"user not member of CUG\"",
                    "description": "",
                    "summary": "",
                    "text_content": "This cause indicates that the called user for the incoming CUG call is not a member of the specified CUG.\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "H.5.3\tCause No. 88 \"incompatible destination\"",
                    "description": "",
                    "summary": "",
                    "text_content": "This cause indicates that the equipment sending this cause has received a request to establish a call which has low layer compatibility, high layer compatibility, or other compatibility attributes (e.g., data rate) which cannot be accommodated.\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "H.5.4\tCause No. 91 \"invalid transit network selection\"",
                    "description": "",
                    "summary": "",
                    "text_content": "For further study. Treated as cause no. 95.\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "H.5.5\tCause No. 95 \"semantically incorrect message\"",
                    "description": "",
                    "summary": "",
                    "text_content": "This cause is used to report receipt of a message with semantically incorrect contents (see subclause 8.8).\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                }
            ]
        },
        {
            "title": "H.6\tProtocol error (e.g., unknown message) class",
            "description": "",
            "summary": "",
            "tables": [],
            "figures_meta_data": [],
            "subsections": [
                {
                    "title": "H.6.1\tCause No. 96 \"invalid mandatory information\"",
                    "description": "",
                    "summary": "",
                    "text_content": "This cause indicates that the equipment sending this cause has received a message with a non-semantical mandatory IE error (see subclause 8.5).\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "H.6.2\tCause No. 97 \"message type non-existent or not implemented\"",
                    "description": "",
                    "summary": "",
                    "text_content": "This cause indicates that the equipment sending this cause has received a message with a message type it does not recognize either because this is a message not defined, or defined but not implemented by the equipment sending this cause.\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "H.6.3\tCause No. 98 \"message type not compatible with protocol state\"",
                    "description": "",
                    "summary": "",
                    "text_content": "This cause indicates that the equipment sending this cause has received a message not compatible with the protocol state (subclause 8.4).\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "H.6.4\tCause No. 99 \"information element non-existent or not implemented\"",
                    "description": "",
                    "summary": "",
                    "text_content": "This cause indicates that the equipment sending this cause has received a message which includes information elements not recognized because the information element identifier is not defined or it is defined but not implemented by the equipment sending the cause. However, the information element is not required to be present in the message in order for the equipment sending the cause to process the message.\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "H.6.5\tCause No. 100 \"conditional IE error\"",
                    "description": "",
                    "summary": "",
                    "text_content": "This cause indicates that the equipment sending this cause has received a message with conditional IE errors (see subclause 8.7.2).\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "H.6.6\tCause No. 101 \"message not compatible with protocol state\"",
                    "description": "",
                    "summary": "",
                    "text_content": "This cause indicates that a message has been received which is incompatible with the protocol state or that a STATUS message has been received indicating an incompatible call state.\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "H.6.7\tCause No. 102 \"recovery on timer expiry\"",
                    "description": "",
                    "summary": "",
                    "text_content": "This cause indicates that a procedure has been initiated by the expiry of a timer in association with 3GPP TS 24.008 error handling procedures.\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "H.6.8\tCause No. 111 \"protocol error, unspecified\"",
                    "description": "",
                    "summary": "",
                    "text_content": "This cause is used to report a protocol error event only when no other cause in the protocol error class applies.\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                }
            ]
        },
        {
            "title": "H.7\tInterworking class",
            "description": "",
            "summary": "",
            "tables": [],
            "figures_meta_data": [],
            "subsections": [
                {
                    "title": "H.7.1\tCause No. 127 \"interworking, unspecified\"",
                    "description": "",
                    "summary": "",
                    "text_content": "This cause indicates that there has been interworking with a network which does not provide causes for actions it takes; thus, the precise cause for a message which is being sent cannot be ascertained.\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                }
            ]
        },
        {
            "title": "I.1\tCauses related to nature of request",
            "description": "Cause value = 8 Operator Determined Barring\nThis cause code is used by the network to indicate that the requested service was rejected by the SGSN due to Operator Determined Barring.\nCause value = 24 MBMS bearer capabilities insufficient for the service\nThis cause code is used by the network to indicate that an MBMS context activation request was rejected by the network, because the MBMS bearer capabilities are insufficient for the MBMS service.\nCause value = 25 LLC or SNDCP failure (A/Gb mode only)\nThis cause code is used by the MS indicate that a PDP context is deactivated because of a LLC or SNDCP failure (e.g. if the SM receives a SNSM-STATUS.request message with cause \"DM received \" or \" invalid XID response \", see 3GPP TS 44.065 [78])\nCause value = 26 Insufficient resources\nThis cause code is used by the MS or by the network to indicate that a PDP context activation request, secondary PDP context activation request, PDP context modification request, or MBMS context activation request cannot be accepted due to insufficient resources.\nCause value = 27 Missing or unknown APN\nThis cause code is used by the network to indicate that the requested service was rejected by the external packet data network because the access point name was not included although required, or if the access point name could not be resolved.\nCause value = 28 Unknown PDP address or PDP type\nThis cause code is used by the network to indicate that the requested service was rejected by the external packet data network because the PDP address or type could not be recognised.\nCause value = 29 User authentication failed\nThis cause code is used by the network to indicate that the requested service was rejected by the external packet data network due to a failed user authentication.\nCause value = 30 Activation rejected by GGSN, Serving GW or PDN GW\nThis cause code is used by the network to indicate that the requested service was rejected by the GGSN, Serving GW or PDN GW.\nCause value = 31 Activation rejected, unspecified\nThis cause code is used by the network or by the MS to indicate that the requested service was rejected due to unspecified reasons.\nCause value = 32 Service option not supported\nThis cause code is used by the network when the MS requests a service which is not supported by the PLMN.\nCause value = 33 Requested service option not subscribed\nSee Annex G, clause 4.\nCause value = 34 Service option temporarily out of order\nSee Annex G, clause 4.\nCause value = 35 NSAPI already used\nThis cause code may be used by a network to indicate that the NSAPI requested by the MS in the PDP context activation request is already used by another active PDP context of this MS.\nNever to be sent, but can be received from a R97/R98 network at PDP context activation\nCause value = 36 Regular deactivation\nThis cause code is used to indicate a regular MS or network initiated PDP context deactivation or a regular network initiated MBMS context deactivation.\nCause value = 37 QoS not accepted\nThis cause code is used by the MS if the new QoS cannot be accepted that were indicated by the network in the PDP Context Modification procedure.\nCause value = 38 Network failure\nThis cause code is used by the network to indicate that the requested service is rejected due to an error situation in the network.\nCause value = 39 Reactivation requested\nThis cause code is used by the network to request a PDP context reactivation (e.g. after a GGSN restart or after selection of a different GGSN by the network for Selected IP Traffic Offload).\nCause value = 40 Feature not supported\nThis cause code is used by the MS to indicate that the PDP context activation or the MBMS context activation initiated by the network is not supported by the MS.\nCause value = 41 semantic error in the TFT operation.\nThis cause code is used by the network or the MS to indicate that there is a semantic error in the TFT operation included in a secondary PDP context activation request or an MS-initiated PDP context modification or a network requested secondary PDP context activation.\nCause value = 42 syntactical error in the TFT operation.\nThis cause code is used by the network or the MS to indicate that there is a syntactical error in the TFT operation included in a secondary PDP context activation request or an MS-initiated PDP context modification or a network requested secondary PDP context activation.\nCause value = 43 unknown PDP context\nThis cause code is used by the network or the MS to indicate that the PDP context identified by the Linked TI IE in the secondary PDP context activation request or a network requested secondary PDP context activation is not active.\nCause value = 44 semantic errors in packet filter(s)\nThis cause code is used by the network or the MS to indicate that there is one or more semantic errors in packet filter(s) of the TFT included in a secondary PDP context activation request or an MS-initiated PDP context modification or a network requested secondary PDP context activation.\nCause value = 45 syntactical error in packet filter(s)\nThis cause code is used by the network or the MS to indicate that there is one or more syntactical errors in packet filter(s) of the TFT included in a secondary PDP context activation request or an MS-initiated PDP context modification or a network requested secondary PDP context activation.\nCause value = 46 PDP context without TFT already activated\nThis cause code is used by the network or the MS to indicate that it has already activated a PDP context without TFT.\nCause value = 47 Multicast group membership time-out\nThis cause code is used by the network to indicate that the MBMS context is deactivated because the timer supervising the IGMP group membership interval (see RFC 3376 [107], subclause 8.4) or the MLD multicast listener interval (see RFC 2710 [108], subclause 7.4, and RFC 3810 [148], subclause 9.4) expired.\nCause value = 48 Request rejected, Bearer Control Mode violation\nThis cause code is used by the network or the MS to indicate that the requested service was rejected because of Bearer Control Mode violation.\nCause value = 50 PDP type IPv4 only allowed\nThis cause code is used by the network to indicate that only PDP type IPv4 is allowed for the requested PDN connectivity.\nCause value = 51 PDP type IPv6 only allowed\nThis cause code is used by the network to indicate that only PDP type IPv6 is allowed for the requested PDN connectivity.\nCause value = 52 single address bearers only allowed\nThis cause code is used by the network to indicate that the requested PDN connectivity is accepted with the restriction that only single IP version bearers are allowed.\nCause value = 56 Collision with network initiated request.\nThis cause code is used by the network to indicate that the MS-initiated request was rejected since the network has requested a secondary PDP context activation for the same service using a network-initiated procedure.\nCause value = 57 PDP type IPv4v6 only allowed\nThis cause code is used by the network to indicate that only PDP types IPv4, IPv6 or IPv4v6 are allowed for the requested PDN connectivity.\nCause value = 58 PDP type non IP only allowed\nThis cause code is used by the network to indicate that only PDP type non IP is allowed for the requested PDN connectivity.\nCause value = 60 Bearer handling not supported\nThis cause code is used by the network to indicate that the procedure requested by the MS was rejected because the bearer handling is not supported.\nCause value = 65 Maximum number of PDP contexts reached\nThis cause code is used by the network to indicate that the procedure requested by the MS was rejected as the network has reached the maximum number of simultaneously active PDP contexts for the MS.\nCause value = 66 Requested APN not supported in current RAT and PLMN combination\nThis cause code is used by the network to indicate that the procedure requested by the MS was rejected because the requested APN is not supported in the current RAT and PLMN.\nCause value = 112 APN restriction value incompatible with active PDP context.\nThis cause code is used by the network to indicate that the PDP context(s) or MBMS context(s) have an APN restriction value that is not allowed in combination with a currently active PDP context. Restriction values are defined in 3GPP TS 23.060 [74], subclause 15.4.\nCause value = 113 Multiple accesses to a PDN connection not allowed\nThis ESM cause is used by the network to indicate that multiple accesses to a PDN connection for NBIFOM is not allowed.\n",
            "summary": "",
            "tables": [],
            "figures_meta_data": [],
            "subsections": []
        },
        {
            "title": "I.2\tCauses related to invalid messages",
            "description": "Cause value = 81 Invalid transaction identifier value.\nSee annex H, subclause H.5.1.\nCause value = 95 Semantically incorrect message.\nSee annex H, subclause H.5.5.\nCause value = 96 Invalid mandatory information.\nSee annex H, subclause H.6.1.\nCause value = 97 Message type non-existent or not implemented.\nSee annex H, subclause H.6.2.\nCause value = 98 Message type not compatible with protocol state.\nSee annex H, subclause H.6.3.\nCause value = 99 Information element non-existent or not implemented.\nSee annex H, subclause H.6.4.\nCause value = 100 Conditional IE error.\nSee annex H, subclause H.6.5.\nCause value = 101 Message not compatible with protocol state.\nSee annex H, subclause H.6.6.\nCause value = 111 Protocol error, unspecified.\nSee annex H, subclause H.6.8.\n",
            "summary": "",
            "tables": [],
            "figures_meta_data": [],
            "subsections": []
        },
        {
            "title": "I.3\tVoid",
            "description": "See 3GPP TS 44.018 [84].\nThe information in this annex does NOT define the value of any IEI for any particular message. This annex exists to aid the design of new messages, in particular with regard to backward compatibility with phase 1 mobile stations.\n",
            "summary": "",
            "tables": [],
            "figures_meta_data": [],
            "subsections": []
        },
        {
            "title": "K.1\tCommon information elements.",
            "description": "For the common information elements types listed below, the default coding of information element identifier bits is summarized in table K.1/3GPP TS 24.008.\nTable K.1/3GPP TS 24.008: Default information element identifier coding \nfor common information elements\n\nNOTE 1:\tThese values were allocated but never used in earlier phases of the protocol.\nNOTE 2:\tFor GPRS common information elements no default values are defined:\n",
            "summary": "",
            "tables": [
                {
                    "description": "Table K.1/3GPP TS 24.008: Default information element identifier coding \nfor common information elements",
                    "table number": 488,
                    "summary": "",
                    "name": ""
                }
            ],
            "figures_meta_data": [],
            "subsections": []
        },
        {
            "title": "K.2\tRadio Resource management information elements.",
            "description": "See 3GPP TS 44.018 [84], annex K.\n",
            "summary": "",
            "tables": [],
            "figures_meta_data": [],
            "subsections": []
        },
        {
            "title": "K.3\tMobility management information elements.",
            "description": "For the mobility management information elements listed below, the default coding of the information element identifier bits is summarized in table K.3/3GPP TS 24.008.\nTable K.3/3GPP TS 24.008: Default information element identifier coding for mobility management information elements\n\nNOTE:\tThese values were allocated but never used in earlier versions of the protocol\n",
            "summary": "",
            "tables": [
                {
                    "description": "Table K.3/3GPP TS 24.008: Default information element identifier coding for mobility management information elements",
                    "table number": 489,
                    "summary": "",
                    "name": ""
                }
            ],
            "figures_meta_data": [],
            "subsections": []
        },
        {
            "title": "K.4\tCall control information elements.",
            "description": "For the call control information elements listed below, the default coding of the information element identifiers is defined in table K.4/3GPP TS 24.008.\nTable K.4/3GPP TS 24.008: Default information element identifier coding for call control information elements\n\nNOTE:\tThese values were allocated but never used in earlier phases of the protocol.\n",
            "summary": "",
            "tables": [
                {
                    "description": "Table K.4/3GPP TS 24.008: Default information element identifier coding for call control information elements",
                    "table number": 490,
                    "summary": "",
                    "name": ""
                }
            ],
            "figures_meta_data": [],
            "subsections": []
        },
        {
            "title": "L.1\tMapping of NAS procedure to RRC establishment cause(Iu mode only)",
            "description": "When MM requests the establishment of an RR connection, the RRC establishment cause used by the MS shall be selected according to the CS NAS procedure as specified in table L.1.1.\nTable L.1.1/3GPP TS 24.008: Mapping of CS NAS procedure to establishment cause\n\nWhen MM requests the establishment of an RR connection, if the MS is configured for EAB (see the \"ExtendedAccessBarring\" leaf of the NAS configuration MO in 3GPP TS 24.368 [135] or 3GPP TS 31.102 [112]), the MS is not an MS configured to use AC11 – 15 in selected PLMN, the MS is not answering to paging and the RRC Establishment cause is not set to \"Emergency call\", then the MM shall indicate to the lower layer for the purpose of access control that EAB applies for this request.\nNOTE 1:\tvoid.\nNOTE 2:\tEAB override is not supported in the CS domain.\nWhen GMM requests the establishment of a PS signalling connection, the RRC establishment cause used by the MS shall be selected according to the PS NAS procedure as specified in Table L.1.2.\nTable L.1.2/3GPP TS 24.008: Mapping of PS NAS procedure to establishment cause\n\nNOTE 3:\tThe RRC establishment cause can be used by the network to prioritise the connection establishment request from the MS at high load situations in the network.\nWhen GMM requests the establishment of a PS signalling connection, if the MS is configured for EAB (see the \"ExtendedAccessBarring\" leaf of the NAS configuration MO as specified in 3GPP TS 24.368 [135] or 3GPP TS 31.102 [112]), the GMM shall indicate to the lower layer for the purpose of access control that EAB applies for this request except for the following cases:\n-\tthe MS is an MS configured to use AC11 – 15 in selected PLMN;\n-\tthe MS is answering to paging or a \"call-pull-initiated\" indication is received from the upper layer (see 3GPP TS 24.174 [185]);\n-\tthe RRC Establishment cause is set to \"Emergency call\";\n-\tthe MS is configured to allow overriding EAB (see the \"Override_ExtendedAccessBarring\" leaf of the NAS configuration MO as specified in 3GPP TS 24.368 [135] or 3GPP TS 31.102 [112]) and receives an indication from the upper layers to override EAB; or\n-\tthe MS is configured to allow overriding EAB (see the \"Override_ExtendedAccessBarring\" leaf of the NAS configuration MO as specified in 3GPP TS 24.368 [135] or 3GPP TS 31.102 [112]) and already has a PDN connection that was established with EAB override.\nNOTE 4:\tvoid.\nThis annex provides additional requirements to support network mechanisms for backward compatibility with PCS 1900 for NA revision 0 mobile equipments (applicable until July 1, 1998).\nPCS 1900 for NA revision 0 mobile equipments are defined to understand Mobile Network Codes made of up to 2 digits. However federal regulation mandates that a 3-digit MNC shall be allocated by each administration to network operators. Therefore each network operator is identified by a 3-digit Mobile Country Code and a 3-digit Mobile Network Code. An operator whose network code complies to the allocation principle specified for PCS 1900 for NA and wants to achieve for a transition period of time the backward compatibility with PCS 1900 for NA revision 0 mobile equipments shall apply the following:\n-\tThe network shall send over the air interface the 3-digit Mobile Country Code and only the two most significant digits of the Mobile Network Code (the value of the \"digit\" sent instead of the 3rd digit is specified in 3GPP TS 24.008, subclause 10.5.1.3) (see note).\nWhen a PCS 1900 for NA (revision greater than 0) mobile equipment recognizes over the air the Mobile Country Code and the two most significant digits of the Mobile Network Code as being the HPLMN codes of the current IMSI, the mobile equipment shall take into account the value of the sixth IMSI digit read from the SIM/USIM. If this value matches to a value contained in the limited set of values for the least significant MNC digit assigned by the number administration bodies for PCS 1900 for NA then the following applies for the mobile equipment:\n-\tThe value sent over the air instead of the 3rd MNC digit in the Location Area Identification (for coding see 3GPP TS 24.008, subclause 10.5.1.3) shall be interpreted as the value of the sixth IMSI digit read from the SIM/USIM.\nNOTE:\tIt is still a network operator option to apply this requirement after July 1, 1998. However, in this case the following shall be considered:\n1.\tNetwork selection considerations for overlapping networks:\n-\tNetworks overlapping to the HPLMN, identified over the radio interface by an identical combination MCC1 MCC2 MCC3 MNC1 MNC2 (possible after July 1, 1998) may be selectable by PCS 1900 for NA mobile equipments revision 0 with the same priority as the HPLMN or presented to the user as the HPLMN.\n2\tRoaming considerations:\n-\tRoamers (SIM/USIM) from networks identified by an identical combination MCC1 MCC2 MCC3 MNC1 MNC2 (possible after July 1, 1998) when roaming into the operator network with PCS 1900 for NA mobile equipments revision 0, may cause these equipments to exhibit an unpredictable behaviour (e.g. looping in the HPLMN selection and registration procedures).\n-\tHome subscribers (SIM/USIM) roaming with PCS 1900 for NA mobile equipments revision 0 into networks identified by an identical combination MCC1 MCC2 MCC3 MNC1 MNC2 (possible after July 1, 1998), may consider being attached to the HPLMN.\nThis annex describes how the reject cause is determined:\n-\tfor a network sharing non-supporting MS in a shared network with multi-operator core network (MOCN) configuration; or\n-\tfor any MS in a multi-operator core network (MOCN) with common GERAN,\nwhen a location registration request from the MS is redirected among CN operators via the shared RAN (see 3GPP TS 23.251 [109]) and is rejected by all core networks. In the following, the term 'location registration' is used for location area updating, GPRS attach, combined GPRS attach, routing area updating, and combined routing area updating.\ni)\tIf the location registration request was either:\n1)\taccepted;\n2)\trejected with a reject cause different from #11, #12, #13, #14, #15, #17, and #25; or\n3)\trejected with a reject cause #17 when the MSC or the SGSN received an error not indicating \"system failure\", \"data missing\" or \"unexpected data value\" from the HLR (see 3GPP TS 29.002 [37] and 3GPP TS 29.010 [152]),\nthen one of the following actions is taken:\n-\tin UTRAN Iu mode, the MSC or SGSN shall include  the redirection completed information element in the RANAP DIRECT TRANSFER message transmitting the location registration accept message or location registration reject message to the RNC. According to 3GPP TS 25.413 [19c], the RNC will then forward the location registration accept message or the location registration reject message to the MS.\n-\tin A/Gb mode, the  shall use DTAP message and SGSN shall use BSSGP DL-UNIDATA message to carry the location registration accept message or location registration reject message to the . According to 3GPP TS 48.008 [85] and 3GPP TS 48.018 [86], the  will then forward the location registration accept message or location registration reject message to the MS.\nii)\tIf the location registration request was either:\n1)\trejected with one of the reject causes #11, #12, #13, #14, #15, and #25; or\n2)\trejected with a reject cause #17 when the MSC or the SGSN received an error indicating \"system failure\", \"data missing\" or \"unexpected data value\" from the HLR (see 3GPP TS 29.002 [37] and 3GPP TS 29.010 [152]),\nthen one of the following actions is taken:\n-\tin UTRAN Iu mode, the MSC or SGSN shall include a redirection indication in the RANAP DIRECT TRANSFER message transmitting the location registration reject message to the RNC. According to 3GPP TS 25.413 [19c], the RNC will then initiate the redirection procedure towards the next CN operator and treat the response from the core network according to (i) and (ii).\n-\tin A/Gb mode, the  shall use BSSMAP Reroute Command message and SGSN shall use BSSGP DL-UNIDATA message to transmit the location registration reject message to the  with a redirection indication. According to 3GPP TS 48.008 [85] and 3GPP TS 48.018 [86], the  will then initiate the redirection procedure towards the next CN operator and treat the response from the core network according to (i), (ii) and (iii).\niii)\tIf the location registration request was rejected including a redirection indication and with one of the reject causes #11, #12, #13, #14, #15, #17, and #25 by all CN operators taking part in a shared network, the RNC for UTRAN Iu mode or the  for A/Gb mode shall determine the reject cause with the highest rank from the received reject causes and send a location registration reject message containing this reject cause to the MS.\nThe ranking of the reject causes, from the lowest rank to the highest rank, is given by:\n#11 < #12 < #13 < #14 < #15 < #25 < #17.\niv)\tIf the location registration request was rejected with one of the reject causes #11, #12, #13, #14, and #15 by all CN operators taking part in a shared network in a specific location area, but there is at least one additional CN operator taking part in a shared network in another location area of the shared network defined by the same common PLMN identity, the RNC for UTRAN Iu mode or the  for A/Gb mode shall send a location registration reject message with the reject cause #15 to the MS.\n\n",
            "summary": "",
            "tables": [
                {
                    "description": "Table L.1.1/3GPP TS 24.008: Mapping of CS NAS procedure to establishment cause",
                    "table number": 491,
                    "summary": "",
                    "name": ""
                },
                {
                    "description": "Table L.1.2/3GPP TS 24.008: Mapping of PS NAS procedure to establishment cause",
                    "table number": 492,
                    "summary": "",
                    "name": ""
                }
            ],
            "figures_meta_data": [],
            "subsections": []
        },
        {
            "title": "O.1\tScope",
            "description": "This annex specifies the protocol data units used by the 3GPP capability exchange protocol and procedures for the handling of unknown, unforeseen, and erroneous protocol data by the receiving MS.\nThe 3GPP capability exchange protocol provides services for the end-to-end exchange of capabilities between MSs. It is a separate protocol which uses the user-to-user signalling service 1 of the layer 3 call control protocol as a means of transport.\nFunctional procedures which use the 3GPP capability exchange protocol in the context of CSI are specified in 3GPP TS 24.279 [116].\n",
            "summary": "",
            "tables": [],
            "figures_meta_data": [],
            "subsections": []
        },
        {
            "title": "O.2\tUser-user protocol contents",
            "description": "The user-user protocol contents is included in the user-user information element described in subclause 10.5.4.25.\nThe user-user protocol contents is structured like the non-imperative part of a standard L3 message (see 3GPP TS 24.007 [20], subclause 11.2) and is composed of a variable number of information elements of type 1, 2, 3 and 4. The different formats (TV, TLV) and the categories of information elements (type 1, 2, 3 and 4) are defined in 3GPP TS 24.007 [20].\nWithin the user-user protocol contents the information elements may occur in an arbitrary order.\nAll information elements shall be included only once.\n\n\nFigure O.1/3GPP TS 24.008 User-user information when the user-user protocol indicator is set to \"3GPP capability exchange protocol\"\n",
            "summary": "",
            "tables": [
                {
                    "description": "",
                    "table number": 493,
                    "summary": "",
                    "name": ""
                }
            ],
            "figures_meta_data": [],
            "subsections": []
        },
        {
            "title": "O.3\tInformation element identifier",
            "description": "The information element identifier and its use are defined in 3GPP TS 24.007 [20].\nFor the information elements defined in subclause O.4, the coding of the information element identifier bits is defined in table O.2/3GPP TS 24.008.\nFor a method to determine from the information element identifier whether an unknown information element is of type 1 or 2 (i.e. it is an information element of one octet length) or type 4 (i.e. the next octet is the length indicator indicating the length of the remaining of the information element) see 3GPP TS 24.007 [20], subclause 11.2.4.\nTable O.1/3GPP TS 24.008: Information element identifier coding for user-user protocol information elements\n\n",
            "summary": "",
            "tables": [
                {
                    "description": "Table O.1/3GPP TS 24.008: Information element identifier coding for user-user protocol information elements",
                    "table number": 494,
                    "summary": "",
                    "name": ""
                }
            ],
            "figures_meta_data": [],
            "subsections": []
        },
        {
            "title": "O.4\tInformation elements",
            "description": "",
            "summary": "",
            "tables": [],
            "figures_meta_data": [],
            "subsections": [
                {
                    "title": "O.4.1\tPersonal ME identifier",
                    "description": "",
                    "summary": "",
                    "text_content": "The purpose of the personal ME identifier is to discriminate between MEs used by the same user (see TS 24.279 [116], subclause 4.2).\nNOTE:\tAs  the personal ME identifier is generated randomly, it is not guaranteed that it uniquely identifies a specific ME used by the same user.\nThe personal ME identifier has the form PMI-XXXX, where XXXX is a 4-digit hexadecimal number. Only the hexadecimal number XXXX is coded in the personal ME identifier information element.\nThe personal ME identifier information element is coded as shown in figure O.2/3GPP TS 24.008 and table O.2/3GPP TS 24.008.\nThe personal ME identifier is a type 3 information element with 3 octets length.\n\n\nFigure O.2/3GPP TS 24.008 Personal ME identifier\nTable O.2/3GPP TS 24.008: Personal ME identifier\n\n",
                    "tables": [
                        {
                            "description": "",
                            "table number": 495,
                            "summary": "",
                            "name": ""
                        },
                        {
                            "description": "Table O.2/3GPP TS 24.008: Personal ME identifier",
                            "table number": 496,
                            "summary": "",
                            "name": ""
                        }
                    ],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "O.4.2\tRadio environment capability",
                    "description": "",
                    "summary": "",
                    "text_content": "The purpose of the radio environment capability is to provide information about the current radio environment of the MS.\nThe radio environment capability information element is coded as shown in figure O.3/3GPP TS 24.008 and table O.3/3GPP TS 24.008.\nThe radio environment capability is a type 1 information element with 1 octet length.\n\n\nFigure O.3/3GPP TS 24.008 Radio environment capability contents\nTable O.3/3GPP TS 24.008: Radio environment capability contents\n\n",
                    "tables": [
                        {
                            "description": "",
                            "table number": 497,
                            "summary": "",
                            "name": ""
                        },
                        {
                            "description": "Table O.3/3GPP TS 24.008: Radio environment capability contents",
                            "table number": 498,
                            "summary": "",
                            "name": ""
                        }
                    ],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "O.4.3\tUE capability version",
                    "description": "",
                    "summary": "",
                    "text_content": "The purpose of the UE capability version  is to inform the receiving MS that the capability of the sending MS has changed since the last UE capability exchange (see 3GPP TS 24.279 [116]).\nThe UE capability version information element is coded as shown in figure O.4/3GPP TS 24.008 and table O.4/3GPP TS 24.008.\nThe UE capability version  has the form UCV-XX, where XX is a 2-digit hexadecimal number. Only the hexadecimal number XX is coded in the UE capability version information element.\nThe UE capability version information element is coded as shown in figure O.4/3GPP TS 24.008 and table O.4/3GPP TS 24.008.\nThe UE capability version is a type 3 information element with 2 octets length.\n\n\nFigure O.4/3GPP TS 24.008: UE capability version\nTable O.4/3GPP TS 24.008: UE capability version\n\n",
                    "tables": [
                        {
                            "description": "",
                            "table number": 499,
                            "summary": "",
                            "name": ""
                        },
                        {
                            "description": "Table O.4/3GPP TS 24.008: UE capability version",
                            "table number": 500,
                            "summary": "",
                            "name": ""
                        }
                    ],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "O.4.4\tIM Status",
                    "description": "",
                    "summary": "",
                    "text_content": "The purpose of the IM Status is to provide information about the IMS capability and registration state of a specific public user identity and it MS.\nNOTE:\tThe definition of what is a public user identity can be found in 3GPP TS 23.003 [10].\nThe IM Status information element is coded as shown in figure O.5/3GPP TS 24.008 and table O.5/3GPP TS 24.008.\nThe IM Status is a type 1 information element with 1 octet length.\n\n\nFigure O.5/3GPP TS 24.008 IM Status contents\nTable O.5/3GPP TS 24.008: IM Status contents\n\n",
                    "tables": [
                        {
                            "description": "",
                            "table number": 501,
                            "summary": "",
                            "name": ""
                        },
                        {
                            "description": "Table O.5/3GPP TS 24.008: IM Status contents",
                            "table number": 502,
                            "summary": "",
                            "name": ""
                        }
                    ],
                    "figures_meta_data": [],
                    "subsubsections": []
                }
            ]
        },
        {
            "title": "O.5\tHandling of unknown, unforeseen, and erroneous protocol data",
            "description": "",
            "summary": "",
            "tables": [],
            "figures_meta_data": [],
            "subsections": [
                {
                    "title": "O.5.1\tGeneral",
                    "description": "",
                    "summary": "",
                    "text_content": "The following subclauses specifies procedures for the handling of unknown, unforeseen, and erroneous protocol data by the receiving MS. These procedures are called \"error handling procedures\", but in addition to providing recovery mechanisms for error situations they define a compatibility mechanism for future extensions of the protocols.\nSubclauses O.5.2 to O.5.5 shall be applied in order of precedence.\nFor the definition of semantical and syntactical errors see 3GPP TS 24.007 [20], subclause 11.4.2.\nWhere the description of information elements in the present document contains bits defined to be \"spare bits\", these bits shall set to the indicated value (usually 0) by the sending side, and their value shall be ignored by the receiving side.\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "O.5.2\tNot supported IEs, unknown IEIs",
                    "description": "",
                    "summary": "",
                    "text_content": "The MS shall ignore all information elements which are not supported and all information elements with unknown IEI.\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "O.5.3\tRepeated IEs",
                    "description": "",
                    "summary": "",
                    "text_content": "If an information element, for which repetition is not specified in subclause O.2, is repeated in the user-user protocol contents, only the contents of the information element appearing first shall be handled and all subsequent repetitions of the information element shall be ignored. When repetition of information elements is specified, only the contents of specified repeated information elements shall be handled. If the limit on repetition of information elements is exceeded, the contents of information elements appearing first up to the limit of repetitions shall be handled and all subsequent repetitions of the information element shall be ignored.\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "O.5.4\tSyntactically incorrect IEs",
                    "description": "",
                    "summary": "",
                    "text_content": "The MS shall treat all IEs that are syntactically incorrect as not present in the user-user protocol contents.\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "O.5.5\tSemantically incorrect IEs",
                    "description": "",
                    "summary": "",
                    "text_content": "When an IE with semantically incorrect contents is received, the foreseen reactions specified for the respective procedure are performed (e.g. in the context of CSI see 3GPP TS 24.279 [116], clauses 5, 6). If however no such reactions are specified, the MS shall ignore the IE.\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                }
            ]
        },
        {
            "title": "P.1\tIntroduction",
            "description": "The present annex specifies additional requirements for GMM and EMM in the MS for the support of terminating access domain selection for voice calls or voice sessions by the network.\nSupport of these mobility management procedures can be configured in the MS by a setting. Whether the mobility management for IMS voice termination setting is stored in the IMS management object as defined in 3GPP TS 24.167 [134] (see the \"Mobility Management for IMS Voice Termination\" leaf) or in an alternative way in the ME is an implementation option. If this setting is missing, then mobility management for IMS voice termination is disabled.\n",
            "summary": "",
            "tables": [],
            "figures_meta_data": [],
            "subsections": []
        },
        {
            "title": "P.2\tActivation of mobility management for IMS voice termination",
            "description": "An MS activates mobility management for IMS voice termination when:\n1)\tthe MS's availability for voice calls in the IMS (see 3GPP TS 24.301 [120], subclause 3.1) changes from \"not available\" to \"available\";\n2)\tthe MS is enabled for mobility management for IMS voice termination;\n3)\tthe IMS voice over PS session indicator received for Iu mode has the value\n-\t\"IMS voice over PS session supported in Iu mode, but not supported in A/Gb mode\", or\nthe IMS voice over PS session indicator received for S1 mode has the value\n-\t\"IMS voice over PS session in S1 mode supported\"; and\n4)\tat least one of the two parameters voice domain preference for UTRAN and voice domain preference for E-UTRAN as defined in 3GPP TS 24.167 [134] is not \"CS voice only\".\nThe MS deactivates mobility management for IMS voice termination when the MS's availability for voice calls in the IMS (see 3GPP TS 24.301 [120], subclause 3.1) changes from \"available\" to \"not available\".\n",
            "summary": "",
            "tables": [],
            "figures_meta_data": [],
            "subsections": []
        },
        {
            "title": "P.3\tInter-system change between A/Gb mode and Iu mode",
            "description": "An MS is required to perform routing area updating for IMS voice termination if:\n1)\tthe upper layers have indicated that the MS is available for voice calls in the IMS (see 3GPP TS 24.301 [120], subclause 3.1);\n2)\tthe MS is enabled for mobility management for IMS voice termination;\n3)\tthe \"IMS voice over PS session indicator\" received for Iu mode has the value \"IMS voice over PS session supported in Iu mode, but not supported in A/Gb mode\"; and\n4)\tthe voice domain preference for UTRAN as defined in 3GPP TS 24.167 [134] is not \"CS voice only\".\n",
            "summary": "",
            "tables": [],
            "figures_meta_data": [],
            "subsections": []
        },
        {
            "title": "P.4\tInter-system change between A/Gb mode and S1 mode",
            "description": "An MS is required to perform routing area updating for IMS voice termination at inter-system change from S1 mode to A/Gb mode and tracking area updating for IMS voice termination at inter-system change from A/Gb mode to S1 mode if:\n1)\tconditions 1 and 2 of annex P.3 are fulfilled;\n2)\tthe \"IMS voice over PS session indicator\" received for S1 mode has the value \"IMS voice over PS session in S1 mode supported\"; and\n3)\tthe voice domain preference for E-UTRAN as defined in 3GPP TS 24.167 [134] is not \"CS voice only\".\n",
            "summary": "",
            "tables": [],
            "figures_meta_data": [],
            "subsections": []
        },
        {
            "title": "P.5\tInter-system change between Iu mode and S1 mode",
            "description": "An MS is required to perform routing area updating for IMS voice termination at inter-system change from S1 mode to Iu mode and tracking area updating for IMS voice termination at inter-system change from Iu mode to S1 mode if:\n1)\tconditions 1 and 2 of annex P.3 are fulfilled; and\n2)\tany of the following conditions a, b and c is fulfilled:\na)\tthe IMS voice over PS session indicators received for Iu mode and S1 mode have the values\n-\t\"IMS voice over PS session supported in Iu mode, but not supported in A/Gb mode\" and\n-\t\"IMS voice over PS session in S1 mode not supported\", and\nthe voice domain preference for UTRAN as defined in 3GPP TS 24.167 [134] is not \"CS voice only\";\nb)\tthe IMS voice over PS session indicators received for Iu mode and S1 mode have the values\n-\t\"IMS voice over PS session in Iu mode and A/G mode not supported\" and\n-\t\"IMS voice over PS session in S1 mode supported\", and\nthe voice domain preference for E-UTRAN as defined in 3GPP TS 24.167 [134] is not \"CS voice only\"; or\nc)\tthe IMS voice over PS session indicators received for Iu mode and S1 mode have the values\n-\t\t\"IMS voice over PS session supported in Iu mode, but not supported in A/Gb mode\" and\n-\t\t\"IMS voice over PS session in S1 mode supported\", and\nexactly one of the voice domain preferences for UTRAN and E-UTRAN as defined in 3GPP TS 24.167 [134] is \"CS voice only\".\nThe MS may support the procedures in this annex.\nWhen GMM requests the establishment of a PS signalling connection, if the MS supports ACDC, the GMM layer shall determine the ACDC category applicable to the request based on the application identifier received from the upper layers and the configuration information in the \"ACDCConf\" leaf of ACDC MO as specified in 3GPP TS 24.105 [154] or in the USIM EFACDC as specified in 3GPP TS 31.102 [112].\nNOTE 1:\tAs an implementation option, the upper layers can determine the ACDC category and send it to the GMM layer. Then the GMM layer need not read the ACDC MO or USIM to determine the ACDC category.\nThe GMM sublayer shall indicate to the lower layers, for the purpose of access control:\n-\tthe ACDC category that applies to this request if only one ACDC category is applicable;\n-\tthe highest ranked ACDC category among the ACDC categories that applies to this request if multiple ACDC categories are applicable; or\n-\tthis request is for an uncategorized application if an application identifier received from the upper layers is not mapped to any ACDC category,\nexcept for the following cases:\n-\tthe MS is a MS configured to use AC11 – 15 in selected PLMN;\n-\tthe MS is answering to paging;\n-\tthe RRC Establishment cause is set to \"Emergency call\";\n-\tif conditions MO MMTEL voice call is started or MO MMTEL video call is started or MO SMSoIP is started, is satisfied; or\n-\tif a \"call-pull-initiated\" indication is received from the upper layer (see 3GPP TS 24.174 [185]).\nNOTE 2:\tThe request from the GMM sublayer refers to either a request to establish an initial NAS signalling connection or a request to re-establish a NAS signalling connection.\nIf the MS supports ACDC and access is barred because of ACDC, the GMM layer shall keep track of the ACDC category for which access is barred and it shall not send a request for the same ACDC category or a lower ACDC category until access is granted.\nIf the MS supports ACDC and access is barred because of ACDC, the GMM layer shall not send a request for any uncategorized application until access is granted.\nRelease 4 for 3GPP TS 24.008 v4.0.0 is based on 3GPP TS 24.008 version 3.5.0.\n\n\n\n\n\n\n",
            "summary": "",
            "tables": [
                {
                    "description": "",
                    "table number": 503,
                    "summary": "",
                    "name": ""
                },
                {
                    "description": "",
                    "table number": 504,
                    "summary": "",
                    "name": ""
                },
                {
                    "description": "",
                    "table number": 505,
                    "summary": "",
                    "name": ""
                }
            ],
            "figures_meta_data": [],
            "subsections": []
        }
    ]
}