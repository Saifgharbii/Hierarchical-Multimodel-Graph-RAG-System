{
    "document_name": "23700-78-i10.docx",
    "content": [
        {
            "title": "Foreword",
            "description": "This Technical Report has been produced by the 3rd Generation Partnership Project (3GPP).\nThe contents of the present document are subject to continuing work within the TSG and may change following formal TSG approval. Should the TSG modify the contents of the present document, it will be re-released by the TSG with an identifying change of release date and an increase in version number as follows:\nVersion x.y.z\nwhere:\nx\tthe first digit:\n1\tpresented to TSG for information;\n2\tpresented to TSG for approval;\n3\tor greater indicates TSG approved document under change control.\ny\tthe second digit is incremented for all changes of substance, i.e. technical enhancements, corrections, updates, etc.\nz\tthe third digit is incremented when editorial only changes have been incorporated in the document.\nIn the present document, modal verbs have the following meanings:\nshall\t\tindicates a mandatory requirement to do something\nshall not\tindicates an interdiction (prohibition) to do something\nThe constructions \"shall\" and \"shall not\" are confined to the context of normative provisions, and do not appear in Technical Reports.\nThe constructions \"must\" and \"must not\" are not used as substitutes for \"shall\" and \"shall not\". Their use is avoided insofar as possible, and they are not used in a normative context except in a direct citation from an external, referenced, non-3GPP document, or so as to maintain continuity of style when extending or modifying the provisions of such a referenced document.\nshould\t\tindicates a recommendation to do something\nshould not\tindicates a recommendation not to do something\nmay\t\tindicates permission to do something\nneed not\tindicates permission not to do something\nThe construction \"may not\" is ambiguous and is not used in normative elements. The unambiguous constructions \"might not\" or \"shall not\" are used instead, depending upon the meaning intended.\ncan\t\tindicates that something is possible\ncannot\t\tindicates that something is impossible\nThe constructions \"can\" and \"cannot\" are not substitutes for \"may\" and \"need not\".\nwill\t\tindicates that something is certain or expected to happen as a result of action taken by an agency the behaviour of which is outside the scope of the present document\nwill not\t\tindicates that something is certain or expected not to happen as a result of action taken by an agency the behaviour of which is outside the scope of the present document\nmight\tindicates a likelihood that something will happen as a result of action taken by some agency the behaviour of which is outside the scope of the present document\nmight not\tindicates a likelihood that something will not happen as a result of action taken by some agency the behaviour of which is outside the scope of the present document\nIn addition:\nis\t(or any other verb in the indicative mood) indicates a statement of fact\nis not\t(or any other negative verb in the indicative mood) indicates a statement of fact\nThe constructions \"is\" and \"is not\" do not indicate requirements.\n",
            "summary": "",
            "tables": [],
            "figures_meta_data": [],
            "subsections": []
        },
        {
            "title": "Introduction",
            "description": "Personal IoT Networks (PIN) is based on the greatly increasing number of consumers IoT devices. These devices can either be wearable devices or can be IoT devices in the home. Users create Personal IoT Networks out of all these Personal IoT devices mainly in their homes or around their body. This technical report identifies the key issues and corresponding application architecture and related solutions with recommendations for the normative work based on 3GPP TS 22.261 [2] and 3GPP TR 22.859 [3]. 3GPP TS 22.261 [2] also refer to requirements in 3GPP TS 22.101 [5] clause 26a that apply to Personal IoT Networks.\n",
            "summary": "",
            "tables": [],
            "figures_meta_data": [],
            "subsections": []
        },
        {
            "title": "1\tScope",
            "description": "The present document is a technical report capturing the study on application layer support for Personal IoT networks (PIN). The aspects of the study include analyzing application layer architecture requirements of PIN, identifying key issues and supporting PIN application layer functional model. The study also includes information and support from 3GPP network to PIN, service or applications discovery within a PIN or by the UE outside of a PIN via 3GPP network.\nThe study takes into consideration the work done for PIN in 3GPP TS 23.700-88 [4] and other related work in 3GPP.\n",
            "summary": "",
            "tables": [],
            "figures_meta_data": [],
            "subsections": []
        },
        {
            "title": "2\tReferences",
            "description": "The following documents contain provisions which, through reference in this text, constitute provisions of the present document.\n-\tReferences are either specific (identified by date of publication, edition number, version number, etc.) or non-specific.\n-\tFor a specific reference, subsequent revisions do not apply.\n-\tFor a non-specific reference, the latest version applies. In the case of a reference to a 3GPP document (including a GSM document), a non-specific reference implicitly refers to the latest version of that document in the same Release as the present document.\n[1]\t3GPP TR 21.905: \"Vocabulary for 3GPP Specifications\".\n[2]\t3GPP TS 22.261: \"Service requirements for the 5G system\".\n[3]\t3GPP TR 22.859: \"Study on Personal Internet of Things (PIoT) networks\".\n[4]\t3GPP TR 23.700-88: \"Study on architecture enhancements for Personal IoT Network (PIN)\".\n[5]\t3GPP TS 22.101: \"Service Principles\".\n\n",
            "summary": "",
            "tables": [],
            "figures_meta_data": [],
            "subsections": []
        },
        {
            "title": "3\tDefinitions of terms, symbols and abbreviations",
            "description": "",
            "summary": "",
            "tables": [],
            "figures_meta_data": [],
            "subsections": [
                {
                    "title": "3.1\tTerms",
                    "description": "",
                    "summary": "",
                    "text_content": "For the purposes of the present document, the terms given in 3GPP TR 21.905 [1] and the following apply. A term defined in the present document takes precedence over the definition of the same term, if any, in 3GPP TR 21.905 [1].\nAccess Control Information: A set of information that assists the authorized PINE in a PIN to access 5GS network via PEGC, for example, the username or password.\nPIN enabler: Refers to the overall functionality provided by the entities such as PIN Client, PIN Gateway Client, PIN Management Client, and PIN server in support of applications as per the architecture defined in solution 7.2.\nPIN management: Refers to the set of operations related to creation, modification, maintenance and removal of PIN.\nPIN Profile: A set of data and information about the PIN and PIN elements resides in the PIN. Service Switch: A mechanism to switch the service traffic flow between Application server and PINE to application server and other PINE.\nNOTE:\t3GPP TS 22.101 [5] clause 26a lists information that can be included in a PINE profile.\nFor the purposes of the present document, the following terms given in 3GPP TS 22.261 [2] apply:\nPersonal IoT Network\nPIN direct connection\nPIN Element\nPIN Element with Gateway Capability\nPIN Element with Management Capability\n\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "3.2\tSymbols",
                    "description": "",
                    "summary": "",
                    "text_content": "For the purposes of the present document, the following symbols apply:\n<symbol>\t<Explanation>\n\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "3.3\tAbbreviations",
                    "description": "",
                    "summary": "",
                    "text_content": "For the purposes of the present document, the abbreviations given in 3GPP TR 21.905 [1] and the following apply. An abbreviation defined in the present document takes precedence over the definition of the same abbreviation, if any, in 3GPP TR 21.905 [1].\nPIN\tPersonal IoT Network\nPINAPP\tPersonal IoT Network Application\nPEMC\tPIN Element with Management Capability\nPEGC\tPIN Element Gateway Capability\nPINE\tPIN Element\n\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                }
            ]
        },
        {
            "title": "4\tKey issues",
            "description": "",
            "summary": "",
            "tables": [],
            "figures_meta_data": [],
            "subsections": [
                {
                    "title": "4.1\tKey issue #1: PIN Management",
                    "description": "",
                    "summary": "",
                    "text_content": "As indicated in clause 6.38 of TS 22.261[2], the following requirements will be studied in this TR phase and reflect in this key issues:\n-\tThe 5G system shall support mechanisms to identify a PIN, a PIN Element.\n-\tThe 5G system shall be able to support PINs with PIN Elements subscribed to more than one network operator (e.g., a PIN Element that is a MUSIM UE and subscribes to different operators respectively, one PIN Element subscribed to network operator A and another PIN Element subscribed to network operator B).\nIn order to avail PIN management, for example, PIN creating/modifying/deleting UE or PINAPP should be able to trigger PIN management request to MNO. What is critical is whether and how the UE or PINAPP triggers PIN managment request.\nAfter creating a PIN, in order to avail PIN service to other PIN elements (e.g.: IoT device), the PIN elements should be able to newly added into a PIN. So for the management of PIN, add or remove the PIN elements into a PIN is nessasary. Also, one of the most important features of PIN is PEGC that enables PIN elements to communicate with 5G network and some of the PIN elements interact directly to other PIN elements within PIN. How to manage the specific permissions, for example, communicate with UE outside of PIN or connect to 5G network are important.\nIt is required to study the following:\n-\tWho can manage (create/modify/delete) a PIN?\n-\tWhether and how to trigger a PIN network management request, for example, PIN creation/modification/deletion. What parameters are required in PIN network management request?\n-\tHow to add/remove PIN elements into a PIN after PIN establishment? What parameters or information are needed during adding/removing PIN elements into a PIN? How to configure newly added PIN element?\n-\tDetermine the certain PIN services in PIN.\n-\tWhat information about the PIN and PIN elements needs to be maintained at the PIN server, PEMC and PEGC for the management of PIN and its elements and whether and how they are notified about the changes to this information.\n-\tWhat set of events occurring in the PIN (e.g., PIN element added, PIN element removed etc.,) need to trigger the updates to the information maintained at the PIN server, PEMC and PEGC.\n-\tWhat information can be created or modified or deleted by the authorized user.\nNOTE:\tPIN management services defined by SA2 will be reused and under consideration in PINAPP.\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "4.2\tKey issue #2: PINAPP accesses 5G network by application mechanism",
                    "description": "",
                    "summary": "",
                    "text_content": "As indicated in clause 6.38 of TS 22.261[2], the following requirements will be studied in this TR phase and reflect in this key issues:\n-\tThe 5G system shall enable the network operator to provide any 5G services to any UE via a PEGC.\n-\tThe 5G system shall support applications on an Application Server connected to a PIN.\nAs a feature, PINAPP within a PIN can communicate with other devices, services and applications within the same PIN. Furthermore, PINAPP can connect with the 5G Network via a PEGC. Also, as a feature, some of the PINAPP in PIN has the permissions that they can communicate with other UE or application outside of PIN with the help of 5GC.\nFrom the aspects of PINAPP accesses 5G network by application mechanism, it is required to study the following:\n-\tHow to realize that PINAPP access 5G network by application mechanism?\nNOTE:\tHow to derive the route control information for PINAPP to access 5GS is in the scope of SA2, and not discussed in SA6.\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "4.3\tKey issue #3: Service switch in PIN",
                    "description": "",
                    "summary": "",
                    "text_content": "As indicated in clause 6.38 of TS 22.261[2], the following requirements will be studied in this TR phase and reflect in this key issues:\n-\tThe 5G system shall support mechanisms to aggregate, switch or split the service between non-3GPP RAT and PIN direct connections using licensed spectrum.\n-\tThe 5G system shall support applications on an Application Server connected to a CPN or PIN.\nWhen UE is located outside of PIN, the UE has the direct connection to application server via 5GS. When UE moves into the coverage of PIN, some of the PIN application in PIN has the capability, for example, to terminate the application traffic from application server. These PIN applications have better experience than the UE, in screen or sound.\nIt is required to study the following:\n-\tHow to support application mechanism for service switching in a PIN between different PIN applications for achieving better service experience?\nNOTE:\tThe coordination with SA2 about the support for switching application traffic between RATs is needed.\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "4.4\tKey issue #4: PIN Application Server Discovery",
                    "description": "",
                    "summary": "",
                    "text_content": "As indicated in 3GPP TS 22.261 [2], clause 6.38.2.1, the following requirement will be studied in this TR:\n-\tThe 5G system shall support applications on an Application Server connected to a PIN.\nSupporting Application Servers connected to a PIN can involve service or applications discovery by PIN Elements or by a UE outside of a PIN via 3GPP network.\nApplication clients can be running on PIN elements in a PIN and may want to discover and connect to an Application Server connected to the PIN. At the same time UEs running Application Clients outside of a PIN may try to discover and connect to an Application Server connected to the PIN.\nIt is required to study the following:\n-\tHow to enable discovery of Application Server, connected to a PIN, by Application Clients running in the same PIN?\n-\tHow to enable discovery of Application Server, connected to a PIN, by Application Clients running in a different PIN?\n-\tHow to enable discovery of Application Server, connected to a PIN, by Application Clients running in a UE outside of the PIN over 3gpp network?\n-\tHow to manage Application Server discovery by MNOs or third-party application service providers?\n-\tEvaluate the applicability of Edge Enabler Layer and CAPIF for PIN application service discovery.\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "4.5\tKey issue #5: Service continuity",
                    "description": "",
                    "summary": "",
                    "text_content": "As indicated in clause 6.38 of TS 22.261[2], the following requirements that describes the service continuity will be studied in this TR phase and reflect in this key issues:\n-\tThe 5G system shall be able to minimize service disruption when a PIN Element changes the communication path from one PIN Element (e.g. PIN Element with Gateway Capability) to another PIN Element or operator provided mobile access. The communication path between PIN Elements may include licensed and unlicensed spectrum as well as 3GPP and non-3GPP access.\nThe PIN application is the application deployed on PIN elements (for example, the UE) in PIN. One of the PIN application features is, the PIN application in UE can have a direct communication with other PIN application into a PIN, without have any routing from 5GS.\nBut, there are the situations that may have a service disruption or relocation:\n-\tWhen UE moves out of a PIN or the terminal PIN application is in the status of moving, the original direct communication between two PIN applications may be influenced and changed (for example, the direct communication between two PIN applications may be routed via PEGC);\n-\tUsually if a PIN application on a UE is consuming service from an application server and due to UE mobility, the PIN application on the UE should continue to receive services from the application server.\nIt is required to study the following:\n-\tHow to the support the service continuity when the UE hosting PIN application is in the status of moving?\n-\tHow to the support the service continuity when UE moves out of a PIN and keep the communication towards the PIN application?\nNOTE:\tSome of the service continuity work has relationship to SA2 work and depends on the SA2's feedback later.\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "4.6\tKey issue #6: PEMC/PEGC replacement in PIN",
                    "description": "",
                    "summary": "",
                    "text_content": "For the management of PIN and to enable PIN elements communicate with 5GC, each active PIN will have atleast one PEMC and PEGC PIN elements sucessfully configured and registered. The PEMC or PEGC PIN elements may cease to perform their role because of any of the following reasons :\n1.\tPower drain of PIN elements acting as PEMC or PEGC\n2.\tTheir validity duration allowed to perform the role of PEMC or PEGC is expiring\n3.\tPEMC or PEGC PIN elements moving out of coverage of cellular network\nHence there is a need for other existing PIN elements to take the role of PEMC or PEGC inorder to succesfully manage the PIN and to avoid service disruption.\nIt is required to study the following:\n-\tWhether and how the need for PEMC or PEGC role change is determined?\n-\tHow another active PIN element take over the role or is assigned the role of PEMC or PEGC?\n-\tWhether and how the existing active PIN elements is notified about the role change?\n-\tWhether and how the required dynamic or context information of PIN is made available to the new element taking the role of PEMC or PEGC\n\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                }
            ]
        },
        {
            "title": "5\tArchitecture requirements",
            "description": "",
            "summary": "",
            "tables": [],
            "figures_meta_data": [],
            "subsections": [
                {
                    "title": "5.1\tGeneral",
                    "description": "",
                    "summary": "",
                    "text_content": "",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "5.2\tRequirements",
                    "description": "",
                    "summary": "",
                    "text_content": "",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": [
                        {
                            "title": "5.2.1\tGeneral requirements",
                            "text_content": "This clause specifies general requirements for the architecture.\n[AR-5.2.1.2-a]\tThe application layer architecture shall support deployment of personal IoT network.\n[AR-5.2.1.2-b]\tThe application layer architecture shall support different deployment models in conjunction with an operator's 3GPP network.\n[AR-5.2.1.2-c]\tThe application layer architecture shall be compatible with the 3GPP network system.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "5.2.2\tPIN Management",
                            "text_content": "This clause specifies PIN management requirements for the architecture.\n[AR-5.2.2.2-a]\tThe application layer architecture shall provide mechanisms to create PIN for UE or PIN elements.\n[AR-5.2.2.2-b]\tThe application layer architecture shall provide mechanisms to delete PIN, either triggered by PINEs or by PIN server.\n[AR-5.2.2.2-c]\tThe application layer architecture shall support the mechanisms of PIN modification procdure, for example, PEMC/PEGC relocation.\n[AR-5.2.2.2-d]\tThe application layer architecture shall support the deployment and mechanism of multiple PEMCs/PEGCs.\n[AR-5.2.2.2-e]\tThe application layer architecture shall support mechanisms to obtain PIN server endpoint address.\n[AR-5.2.2.2-f]\tThe application layer architecture shall support the mechanisms to perform PIN discovery, and enable the PINEs to join/leave the PIN.\n[AR-5.2.2.2-g]\tThe application layer architecture shall support the mechanisms of PINE registration to PIN server.\n[AR-5.2.2.2-h]\tThe application layer architecture shall support mechanisms to maintain, configure, update the PIN profile/PIN client profile.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "5.2.3\tPIN enable 5GS communication",
                            "text_content": "This clause specifies PIN communication requirements for the architecture.\n[AR-5.2.3.2-a]\tThe application layer architecture shall provide mechanisms to configure routing information in PEGC to enable the PINE to access the network provided by PEGC.\n[AR-5.2.3.2-b]\tThe application layer architecture shall provide mechanisms to support the PIN and the PINEs in PIN to consume the 5GS communication.\n[AR-5.2.3.2-c]\tThe application layer architecture shall provide mechanisms to support the PEMC/PEGC to request the 5GS resource for PIN.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "5.2.4\tService Switch",
                            "text_content": "This clause specifies service switch requirements for the architecture.\n[AR-5.2.4.2-a]\tThe application layer architecture shall provide mechanisms to support the service switching in a PIN between different PINE for achieving better service experience.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "5.2.5\tApplication server discovery",
                            "text_content": "This clause specifies application server discovery requirements for the architecture.\n[AR-5.2.5.2-a]\tThe application layer architecture shall provide mechanisms to support the application server discovery for PIN.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "5.2.6\tService continuity",
                            "text_content": "This clause specifies service continuity requirements for the architecture.\n[AR-5.2.6.2-a]\tThe application layer architecture shall provide mechanisms to support the PEGC relocation procedure to enable service continuity.\n[AR-5.2.6.2-b]\tThe application layer architecture shall provide mechanisms to change the communication from via PEGC to via 5GS, and enable the service continuity.\n",
                            "figures_meta_data": [],
                            "tables": []
                        }
                    ]
                }
            ]
        },
        {
            "title": "6\tArchitecture",
            "description": "",
            "summary": "",
            "tables": [],
            "figures_meta_data": [],
            "subsections": [
                {
                    "title": "6.1\tGeneral",
                    "description": "",
                    "summary": "",
                    "text_content": "This clause provides a general description of the architecture of PINAPP.\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                }
            ]
        },
        {
            "title": "7\tSolutions",
            "description": "",
            "summary": "",
            "tables": [],
            "figures_meta_data": [],
            "subsections": [
                {
                    "title": "7.1\tMapping of solutions to key issues",
                    "description": "",
                    "summary": "",
                    "text_content": "Table 7.2-1 Mapping of solutions to key issues\n\n",
                    "tables": [
                        {
                            "description": "Table 7.2-1 Mapping of solutions to key issues",
                            "table number": 3,
                            "summary": "",
                            "name": ""
                        }
                    ],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "7.2\tSolution #1: PINAPP architecture",
                    "description": "",
                    "summary": "",
                    "text_content": "",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": [
                        {
                            "title": "7.2.1\tArchitecture assumption",
                            "text_content": "\nThe Figure 7.2.1-1 shows the application architecture for enabling PINAPP.\nThe PINAPP architecture, depicted in Figure 7, is a comprehensive framework for managing and optimizing the performance of a network. It consists of three main components: the Application Programming Interface (API), the Platform Infrastructure (PIN), and the Platform Management Interface (PMI). The PINAPP architecture is designed to facilitate seamless integration of various network components, enabling efficient communication and data exchange between them. The PIN is responsible for managing the network infrastructure, ensuring that all components are functioning correctly and that the network is running smoothly. The PMI is responsible for managing the network management tasks, such as monitoring, troubleshooting, and optimizing the network performance. The PINAPP architecture is a key component of the SDN (Software-Defined Networking) approach, which aims to enable network operators to manage and optimize their networks more efficiently and effectively.\nFigure 7.2.1-1: PINAPP architecture\nThe UE or PIN elements have PIN client. The UE or PIN Element with gateway capability (PEGC) performs the role of an entity supporting gateway capability for PIN. The PEGC provides gateway functionality for the PIN elements. The UE or PIN Element with management capability (PEMC) performs the role of an entity supporting management capability for PIN. The PEMC provides management functionality for the PIN elements.\nThe interactions between PEMC and PIN client are supported over PIN-3. The interactions between PEMC and PEGC are supported over PIN-4. The interactions between PEGC and PIN client are supported over PIN-2. The interactions between PIN clients from different UEs or PIN elements are supported over PIN-5.\nNOTE 1:\tIt is possible that an application client on PIN elements can communicate with application server directly via 5GS or indirectly via PEGC.\nNOTE 2:\tIt is possible that an application client can communicate with other application client in the same PIN directly or via PEGC.\nNOTE 3:\tIt is possible that an application client can communicate with other application client in another PIN via PEGC.\nThe Figure 7.2.1.1-1 shows the application architecture updates to enable authorized user to access services provided by PIN element behind the PEGC. For simplicity, not all functional elements of Figure 7.2.1-1 are shown in below Figure 7.2.1.1-1.\nThe PINAPP architecture, depicted in Figure 7.1, is a comprehensive framework for managing and optimizing the performance of a network. It consists of three main components: the Application Programming Interface (API), the Platform Infrastructure (PI), and the Platform Management (PM). The PINAPP architecture is designed to facilitate seamless integration of various network components, ensuring efficient and reliable communication.\nFigure 7.2.1.1-1: PINAPP architecture\nThe interactions between PEGC and PIN client of the authorized user are supported over interface PIN-11. The interactions between PEMC and PIN client of the authorized user are supported over interface PIN-12. The authorized user uses PIN-12 to configure the policies in a PIN.\n\nNOTE: The authorized user is allowed to manage a PIN due to authorized user has PIN-12 interface to communicate with PEMC.7.2.1.2\tPIN Localization\nPersonal IoT Networks enable the communication needs of IoT devices within the constraints of a localized, private network. IoT devices using 3GPP or non-3GPP access may be members of a PIN. The PIN may consist of wearable IoT devices or IoT devices used in home automation. A PIN client that is authorized to access the PIN may access the PIN locally within the coverage area of the PIN or remotely over the 5G network. PIN localization refers to the main coverage area of the PIN and may be mobile if the PIN consists of wearable IoT devices and is being used by a user of the PIN who is mobile.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "7.2.2\tFunctional elements",
                            "text_content": "The functional entities of the application architecture for enabling PINAPP are described in this clause.\nPEMC: A PIN Element with Management Capability is a PIN Element that provides a means for an authorised administrator to configure and manage a PIN.\nIt provides following functionalities:\n-\tFor a network operator or authorized user to configure the policies of the PIN;\n-\tProvide life span information of the PIN to the authorized user or the PIN elements;\n-\tMaintain the UEs or PIN elements who joined the PIN. It includes maintaining available services, capability to act as a relay to other UEs or PIN elements; and\n-\tMaintain the PIN profile for each PIN and PINE in PIN;\n-\tTo configure and manage a PIN; including:\n-\tauthorizing the UEs or PIN elements requesting to join the PIN;\n-\tauthorizing the PEGC and configure the parameters in PEGC to support PINE communication (via 5GS or direct communication);\n-\tconfiguring UEs or PIN elements to enable service discovery of other UEs or PIN Elements;\n-\tadd new UEs or PIN elements to the PIN;\n-\tconfigure UEs and PIN elements to enable direct communications; and\n-\tconfigure UEs and PIN elements to communicate with each other when gateway device is unavailable.\n-\tsupport the PIN server endpoint address delivery to UEs or PIN elements;\n-\tsupport the credentials delivery to UEs or PIN elements;\nNOTE: When gateway device is unavailable, the configurations are required to enable direct communication.\nPIN server: Deployed by operator in network, and provisioning of configuration information to UE (PINAPP). Authorization of the Creation request of PIN, and arranges the PEGC information about access control to PIN.\n-\tMaintain the PIN profile for each PIN and PINE in PIN;\n-\tAuthorized the PIN create/PIN modification/PIN delete\n-\tDetermine the access control information of PEGC/PINE in PIN\n-\tAuthorized the PINE to be added/removed into/from the PIN\n-\tSupport PIN discovery and application server discovery\nPEGC: A PIN Element with Gateway Capability is a PIN Element that provide any 5G services to any UE or PINAPP.\n-\tMaintain the PIN profile for each PIN and PINE in PIN;\n-\tMaintain the access control information for each PIN and each PINE in PIN, and authorized whether the PINE can access the network provided by PIN;\n-\tSupport to trigger the PDU session modification towards 5GS to request the resource for PIN;\n-\tEnable the 5GS communication or direct communication;\n-\tSupport to PIN server address delivery;\n-\tSupport to deliver the credentials to PINE;\n-\tSupport PIN discovery function\nPIN client: The PIN enabler layer deployed in PIN elements to enable the management procedure to PEMC and routing control procedure to PEGC.\nIt provides the following functionalities for the application clients in the UE or PIN element:\n-\tRegistering the available service and capabilities;\n-\tPerform service discovery of other UEs or PIN elements;\n-\tCommunicate with PIN clients of other UEs or PIN elements;\n-\tAct as a relay for other UEs or PIN elements;\n-\tSelects relay for direct communication; and\n-\tIndicate whether the UE or PIN element, in which the PIN client resides, is discoverable or not.\n-\tMaintain the PIN profile;\n-\tSupport to do application server discovery;\n-\tPerform to join/leave a PIN;\n-\tSupport to discover the available PIN.\n-\tSupport to receive the information to access the network provided by PEGC;\n\nApplication client: AC is the application resident in the PIN elements performing the client function.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "7.2.3\tReference Points",
                            "text_content": "PIN - 1: The interactions related to enabling PINAPP, between the Application client and the PIN client.\nPIN - 2: This reference point exists between PIN client and PEGC which connects PIN client of UE to PEGC. The PIN client uses this interface to communicate with other PIN clients within PIN or to access 3GPP network..\nPIN - 3: This reference point exists between the PIN client and PEMC and following functionalities are supported over this reference point:\n-\tAuthorizing PIN clients to access PIN;\n-\tService discovery of other UEs or PIN elements;\n-\tDiscovery and selection of relay UEs or PIN elements;\n-\tNotifying the PIN information modification details (e.g. PEMC change, PEGC change, PIN capabilities change).\nPIN - 4: This reference point exists between between the PEGC and PEMC and following functionalities are supported over this reference point:\n-\tAuthorizing PEGC for PIN access;\n-\tNotification of PIN elements joining or leaving the PIN by PEMC to PEGC;\n-\tDelivery of PIN dynamic profile information by PEMC to PEGC whenever it changes;\nPIN - 5: This reference point exists between the one PIN client and another PIN client and it supports direct connection over 3GPP or non-3GPP RAT. It also connects to PIN client of a UE or PIN element to the PIN client of another UE or PIN element acting as a relay.\nPIN - 6: This reference point exists between the PEMC and PIN server and supports the following functionalities:\n-\tAuthorization of PEMC;\n-\tNotifying PIN server whenever a PIN element joins or leaves the PIN, whenever a PIN client updates its capabilities;\n-\tNotifying PIN server of PEGC replacement;\n-\tDelivery of PIN dynamic profile information;\nPIN - 7: The interactions related to enabling PINAPP, between the one PEGC and PIN server.\nPIN - 8: The interactions related to enabling PINAPP, between the one PIN server and 3GPP core network.\nPIN - 9: The interactions related to enabling PINAPP, between the application server and PIN server.\nPIN – 10: The interactions related to enabling PINAPP, between the PIN client in PIN element and PIN server.\nPIN – 11: The interactions related to enabling PINAPP, between the PEGC and PIN client from outside the PIN to access the services provided by PIN elements within the PIN.\nPIN – 12: The interactions related to enabling PINAPP, between the PEMC and PIN client for configuring and managing the PIN from outside the PIN.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "7.2.4\tFunctional Entity Cardinality",
                            "text_content": "The following cardinality rules apply for PEMC:\na)\tone or more PEMCs per PIN.\nThe following cardinality rules apply for PEGC:\na)\tone or more PEGCs per PIN.\nThe following cardinality rules apply for PIN server:\na)\tone PIN server per PIN.\nb)\tMultiple PINs per PIN server.\nNOTE:\tThere might be multiple PIN servers deployed in a PLMN.\nThe following cardinality rules apply for PIN client:\na)\tone or more PIN clients per PIN.\nb)\tone PIN client per PIN element.\nThe following cardinality rules apply for application client:\na)\tone or more application clients per PIN client.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "7.2.5\tIdentities",
                            "text_content": "The PIN ID is a unique value in PLMN that identifies the PIN.\nThe UE ID uniquely identifies a particular UE within a PLMN domain. Following identities are examples that can be used:\na)\tGPSI, as defined in 3GPP TS 23.501 [02].\nNOTE:\tTo protect privacy of the user, MSISDN can be used as GPSI only after obtaining user's consent.\nThe PIN client ID is a globally unique value that identifies the PIN client.\nThe ACID identifies the client side of a particular application, for e.g. SA6Video viewer, SA6MsgClient etc. For example, all SA6MsgClient clients will share the same ACID.\nIn case that the UE is running mobile OS, the ACID is a pair of OSId and OSAppId.\nThe PIN server ID is a unique value in PLMN domain that identifies the PIN server.\n",
                            "figures_meta_data": [],
                            "tables": []
                        }
                    ]
                },
                {
                    "title": "7.3\tSolution #2: PIN management",
                    "description": "",
                    "summary": "",
                    "text_content": "",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": [
                        {
                            "title": "7.3.1\tArchitecture enhancements",
                            "text_content": "The architecture of PIN is referred to the solution 1 in clause 7.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "7.3.2\tSolution description",
                            "text_content": "This solution addresses aspects of Key Issue #1.\nAfter the UE or PINAPP acquires the role of PEMC, the PINAPP can trigger a creation of PIN towards PIN server.\nWhen the PINAPP as a PEMC to trigger the creation of PIN, there may the two situations below:\n-\tThere is only one element in PIN, and the PEMC manages itself;\n-\tThere are already serveral PIN elements or PEMC. The other PIN elements or PEGC have communication links with PEMC via non-3GPP access and the PEMC can trigger creation of PIN with these PIN elements in group.\nAfter the creation of PIN is accepted by network, the PIN server response with the PIN ID, the PEGC information about access control configured in PEGC.\nAt the network side, a PIN server should be deployed. The PIN server (represent the operator) is responsible for the authorization of the Creation request of PIN, and arranges the PEGC information about access control to PIN.\nHow the PIN server receives or derives PEGC information about access control is in the scope of SA2.\nFor an established PIN, the PIN can be modified in the following situation:\n-\tChanges of PEMC. For example, the current PEMC may no longer be provide management of PIN and the role of PEMC will be changed to another PIN elements.\n-\tChanges of PEGC. For example, if the current PEGC has broken down or is switched off, or the PEGC moves out of the direct communication proximity of the PINE client(s). The current PEGC is no longer suitable and enforcing another PIN element as PEGC is needed.\n-\tUpdate of PIN service. If the service that a PINE (in a PIN) or PIN can provide is updated, the PEMC should trigger the modification of PIN towards PIN server to update the PIN service.\n-\tUpdate of PIN service remotely by authorised administrator after local PEMC failure. An authorised administrator is the owner of the PIN and needs to reconfigure the PIN after a communication failure with the local PEMC. The authorised administrator can access the PIN and the PIN server only through the 5G network.\nEditor's note: The access control information should be coordinated with SA2 and wait for further update.\n\nThis procedure presents a high-level overview of Solution #X.\nFigure 7.3.2.2.2.-1 illustrates PIN creation procedure based on request/response model.\nPre-conditions:\n1.\tThe UE (PINAPP) has been pre-configured or has discovered the address (e.g. IP address, FQDN, URI) of the PIN server;\n2.\tThe UE Identifier or PIN client Identifier is available;\n3.\tThe PINAPP has been authorized to communicate with the PIN server;\n4.\tThe PINE-1 has already received the role of PEMC from PIN server;\n\nFigure 7 depicts the creation of a PIN (Point-to-Point Interface) in a 3GPP network. The figure illustrates the process of creating a PIN, which is a crucial component in the network's signaling architecture. The creation of a PIN involves the following steps:\n\n1. **Selection of a Point:** The first step is to select a point within the network, which is typically a base station (gNB) or a user equipment (UE).\n\n2. **Selection of a Point-to-Point Interface (PPI):** The selected point is then connected to a point-to-point interface (PPI), which is a point-to-point link between the selected point and the network.\n\n3. **Creation of a PIN:** The selected point-to-point interface is then connected to a point-to-point interface (PPI), which is a point-to-point link between the selected point and the network.\n\n4. **Creation of a Point-to-Multipoint Interface (PMPI):** The selected point-to-point interface is then connected to a point-to-multipoint interface (PMPI), which is a point-to-multipoint link between\nFigure 7.3.2.2.2-1: Creation of PIN\n1.\tThe PEMC sends a PIN creation request to the PIN server in-order to create a PIN. The PIN creation request includes the security credentials of the UE or PINAPP received during PINAPP authorization procedure and may include the UE identifier such as GPSI, PIN client ID, UE location and PINAPP profile(s) information. The PEMC can also indicate the PIN service that the PIN can provide to PIN server.\nThe PEMC can request to create a PIN including the details of other PIN elements that has already communicated with it .The details of the PIN elements could be for example, UE identifier such as GPSI, PIN client ID, UE location and PINAPP profile(s) information.\nIf there are no other PIN elements in the request, the PEMC requests to create a PIN including itself.\nNOTE 1:\tIn order to save the procedure of several PEMCs to be involved into the certain PIN as individual PEMC, the PEMC can have the additional PEMC GPSIs in the PIN create request, to indicate additional PEMCs that are allowed to manage the PIN. This procedure doesn’t have conflict with that other PEMC requests to join the certain PIN and becomes PEMC separately.\nNOTE 2:\tFor a certain PIN, only one PEMC at a time can be assigned with primary role and other PEMCs if any are assigned with secondary role..\n2.\tUpon receiving the request, the PIN server performs an authorization check to verify whether the PINE-1 (PEMC) has authorization to perform the operation.\nEditor's Note:\tWhether and how the 5GC involved in the PIN creation is FFS.\n\n3.\tThe PIN server sends a successful response to PINE-1PEMC, which includes a newly assigned PIN ID to indicate the PIN. It also includes the list of PIN elements and their identifier which are authorized and made as member of the newly created PIN if the PIN creation request contains the list of PIN elements to be included in the PIN. If the PIN creation request fails, the PIN server should give the failure response indicating the cause of PIN creation request failure.\nIf there are no other PIN elements in the PIN creation request and the PIN creation is successful, the PEMC indicates the PINAPP (PEMC) to be the PEGC. The PINAPP who has already had the role of PEMC can also has the role of PEGC.\nIf the PEGC is indicated, the PIN server sends PIN client ID (that represents the PEGC), assigned IP address or port number in successful response to PEMC. And, the PIN Server also sends the PEGC information about access control in the response, including:\n-\tAccess control information includes: user name, account, SSID, BSSID. All the information is used by PIN elements in PIN to access 5G or access other application outside of PIN;\nThe PIN server or PEMC can decide the access control information in certain PEGC.\n-\tIf the access control information decided by PIN server, the PIN server sends the access control information to PEMC. And the PEMC delivers the access control information to PEGC.\n-\tIf the access control information decided by PEMC, the PEMC delivers the access control information to PEGC.\n4a-4c.\t[Optional] If the response of creation of PIN contains the list of PIN elements, the PINE-1 (PEMC) generates the PIN created notification request to individual PIN elements based on the list received in step 3. This notification request includes the PIN ID of the newly created PIN and also contains an indication that the PIN element is made the member of the newly created PIN.\n5a-5c. [Optional] The individual PIN elements sends the PIN created notification response to acknowledge the receipt of the notification. The PIN elements receiving the PIN creation notification request with joined indication shall not join the PIN by issuing the PIN join request since they are already made as the member of the PIN.\nAfter the procedure above, the PINAPP (PEMC) creates a PIN with PINAPP(PEGC) and other accepted PIN elements in PIN.\nThe following procedure defines how to provide PEGC information (for example, the access control information) to PINE over direct connection which enables the PINE to connect to PEGC.\nThe figure depicts a network diagram with various components, including a base station (gNB), user equipment (UE), and a network edge gateway (PEGC). The diagram illustrates the connection between the gNB and PEGC, with the PEGC acting as the central point of access for the network. The figure also includes a network edge gateway (PEGC) and a network edge router (NEC), which are essential components for delivering access-related information to PINE for connecting to PEGC.\nFigure 7.3.2.2.2-2: Deliver access related information to PINE for connecting to PEGC\n1.\tThe PEMC sends request ([Connection Info], [Authorization Info]) to the PINE. The Connection Info contains the access control information. The Auth Info may be included for authenticating/authorizing PINE connecting to PEGC.\n2.\tThe PINE responds to the PEMC.\nAfter receiving the access control information, the PINE can access into the network that PEGC provide and after the authorization/authentication with PEMC, the PINE can finally use the gateway service to communication.\nNOTE:\tThe access control information is per-PINE/per-PIN information. Each PINE uses this information to access the network provided by PEGC for a PIN. And the PEGC uses this access control information to authorize that whether the PINE can consume the network provided by PEGC in a PIN.\n\nIf the management of PIN should be changed to other PIN elements in UE, the original PEMC of a PIN should trigger the PIN modification procedure to PIN server.\nFigure 7.3.2.3.1-1 illustrates PIN modification procedure based on request/response model.\nPre-conditions:\n1.\tThe PEMC in a PIN has been pre-configured or has discovered the address (e.g. IP address, FQDN, URI) of the PIN server;\n2.\tThe PIN has already been created and a PIN ID is distributed by PIN server;\n3.\tThe PEMC has been authorized to communicate with the PIN server;\n4.\tA PIN client has already received the role of PEMC from PIN server;\n\nThe figure depicts a modification of a PIN triggered by a PEMC, illustrating the process of modifying a PIN in a 3GPP-compliant network. The figure shows the various components involved in the modification process, such as the PEMC, the PIN, and the network interface controller (NFC). The modification is performed by the PEMC, which sends a command to the NFC to change the PIN. The figure provides a clear and concise representation of the process, making it easy to understand the underlying technology.\nFigure 7.3.2.3.2-1: Modification of PIN triggered by PEMC\n1.\tThe PEMC sends a PIN modification request to the PIN server to request to change the role of PIN management. The PIN modification request includes the security credentials of the PIN client received during PIN client authorization procedure and may include the UE identifier such as GPSI, PIN client ID, UE location and PIN client profile(s) information and PIN ID. The PIN ID indicates the management of this PIN will be changed.\nThe PEMC can also include the potential PEMC in this PIN that represented by GPSI, PIN client ID. But this propose by PEMC is only for recommendation towards PIN server. If there are more than one potential PEMCs are included in PIN modification request, the original PEMC can label the priority of these potential PEMCs.\nAlso, if the PIN service in PIN has updated, for example, the service in PINE (in this PIN) is newly added or the service in PINE (in this PIN) is deactivated or disabled, the PEMC should trigger PIN modification request includes the updated PIN services.\n2.\tUpon receiving the request, the PIN server performs an authorization check to verify whether the PEMC has authorization to perform the operation. The PIN server also updates and stores the PIN service of this PIN as PIN profile.\n3.\tThe PIN server sends a successful response to original PEMC, which includes a stop of administrator permissions of PIN and the PIN client ID of the new PEMC. If the PIN modification request fails, the PIN server should give the failure response to indicates that indicates the cause of PIN modification request failure.\nThe PIN server can decide the new PEMC from the PIN elements in the PIN, and can also consider the potential PEMC that indicated by old PEMC.\nAfter the new PEMC is selected, the new PEMC can either be configured with the PIN Profile information by PIN server, or the PIN Profile information can be configured by the old PEMC. The PIN Profile information includes the PIN elements in PIN (for example, IP address or ID), access control information of each PIN elements.\n4.\tAfter receiving the successful of PIN modification response, the old PEMC stops the administrator permissions of a PIN which is represented by PIN ID. And the PIN server delivers the PIN Profile information to the new PEMC according to new PEMC IP address or ID indicated in successful PIN modification request.\n\nIf the current PEGC is broken down or switched off, or the PEGC moves out of the direct communication proximity of the PINE clients(s). It is not properly to keep this PEGC, and enforces another PIN element as PEGC is needed.\nFigure 7.3.2.3.2-1 illustrates PIN modification procedure triggered by event of PEGC.\nPre-conditions:\n1.\tThe PEGC in a PIN has been pre-configured or has discovered the address (e.g. IP address, FQDN, URI) of the PIN server;\n2.\tThe PIN has already been created and a PIN ID is distributed by PIN server;\n3.\tThe PEGC has been authorized to communicate with the PIN server;\nThe figure depicts a modification of a PIN triggered by a PEGC, illustrating the process of modifying a PIN to trigger a PEGC. The figure shows the PIN, PEGC, and the modification process, with arrows indicating the flow of information.\nFigure 7.3.2.3.2-1: Modification of PIN triggered by PEGC\n0.\tThe PIN server or PEMC can subscribe the mobility of PEGC that when the PEGC moves out of the area of interests (for example, leave home or office). Or the PIN server and PEMC can subscribe the status of PEGC that when the PEGC switches off and the PIN server can be notified by the PEGC.  After receiving the event notification, the PIN server can trigger the modification of PEGC.\n1.\tThe PIN server or PEMC is notified by PEGC of event notification.\n2.\tThe PIN server or PEMC decides to modify the PIN with changing PEGC.\n3.\tThe PIN server or PEMC sends a successful response to original PEGC, which includes a stop of access control information in PEGC. If the PIN modification request fails, the PIN server should give the failure response to indicates that indicates the cause of PIN modification request failure.\nThe PIN server or PEMC can decide the new PEGC from the PIN elements in the PIN.\n4.\tAfter receiving the successful of PIN modification response, the old PEGC stops the routing control of a PIN which is represented by PIN ID. And the PIN server delivers the access control information to the new PEGC.\nThe following solution corresponds to the key issue #6 on PEMC/PEGC replacement in PIN as specified in clause 4.6.\nIn some scenarios, like hardware failure, crash or power drain, the current PEMC may not be in a position to indicate to the PIN server or request the PIN server to assign the role of PEMC to another PIN element. In these cases, the PIN server on detecting the unavailability of the PIN element acting as PEMC, need to assign the role to another PINE and transfer the PIN dynamic profile information to the new PEMC.\nFigure 7.3.2.3.3-1 illustrates PEMC replacement procedure triggered by PIN server on detecting current PEMC is unavailable.\nPre-conditions:\n1.\tPEMC-2 PIN element has already indicated that it can act as PEMC during the registration process.\n2.\tDynamic profile information about the PIN is available at the PIN server\n\nThe figure depicts a PEMC (Power-Efficient Micro-Controller) replacement triggered by a PIN server, illustrating the process of replacing a micro-controller in a power-efficient manner. The figure shows the PEMC, the PIN server, and the power supply, with the PEMC being replaced by the PIN server, illustrating the process of replacing a micro-controller in a power-efficient manner.\nFigure 7.3.2.3.3-1: PEMC replacement triggered by PIN server\n1.\tPEMC-1, PEMC-2, PEGC, PINE-1 and PINE-2 are part of same PIN. PEMC-1 is currently the PEMC of the PIN.\n2.\tThe PIN server identifies that PEMC-1 is down or crash or its duration to act as PEMC is ending. How PIN server identifies that the current PINE acting as PEMC is crashed or down is not in the scope of this specification.\n3.\tThe PIN server looks into the PIN profile and PIN dynamic profile information to identify the new PINE which can take up the role of PEMC (here PEMC-2 PIN element) and requests PEMC-2 to take the role of PEMC.\n4.\tIf the PEMC-2 PINE decides to take up the role of PEMC it sends the success response to the PIN server.\n5.\tThe PIN server delivers the PIN dynamic profile information to the PEMC-2.\n6a,6b,6c.\tOnce the PEMC replacement process is success, the PEMC-2 signals all the PINEs in the PIN including the PEGC about the change in the PIN element acting as PEMC and its reachability information.\nThe following solution corresponds to the key issue #6 on PEMC/PEGC replacement in PIN as specified in clause 4.6.\nA PIN element could have been authorized to act as PEMC for a certain duration after which it is either removed from the PIN or de-authorized to act as PEMC. Another PIN element in the PIN takes over the role of PEMC.\nWhen the duration of its role as PEMC is expiring or for some other reasons (which could be implementation specific) the current PEMC requests another PINE to take the role of PEMC. Once the role assignment succeeds, the PIN server and other PIN elements including PEGC are notified of this role change.\nFigure 7.3.2.3.X-1 illustrates PEMC replacement procedure triggered internally within the PIN by current PEMC.\nPre-conditions:\n1.\tPEMC-2 PIN element has already indicated that it can act as PEMC during the registration process.\n2.\tDynamic profile information about the PIN is available at the current PEMC and PIN server\n\nThe figure depicts a PEMC (Power-Efficient Micro-Controller) replacement triggered internally within the PIN (Power-Efficient Micro-Controller). The figure shows the internal components and connections of the PEMC, highlighting its role in the power management of the system.\nFigure 7.3.2.3.4-1: PEMC replacement triggered internally within the PIN\n1.\tPEMC-1, PEMC-2, PEGC, PINE-1 and PINE-2 are part of same PIN. PEMC-1 is currently the PEMC of the PIN.\n2.\tPEMC-1 decides to relinquish its PEMC role and handover to another PIN element. It may decide if it detects that its UE power is draining or its role as PEMC is nearing expiry.\n3.\tThe PEMC-1 looks into the PIN dynamic profile information to identify the new PINE which can take up the role of PEMC (here PEMC-2 PIN element) and requests PEMC-2 to take the role of PEMC.\n4.\tIf the PEMC-2 PINE decides to take up the role of PEMC it sends the success response to the PEMC-1.\n5.\tThe PEMC-1 updates the PIN dynamic profile information with this role change details and delivers the PIN dynamic profile information to the PEMC-2.\n6.\tThe PEMC-1 signals all the PINEs in the PIN including the PEGC and PIN server about the change in the PIN element acting as PEMC and its reachability information. On receiving this notification PIN server and PEGC updates the PIN dynamic profile information with the details of PEMC-2.\nThe following solution corresponds to the key issue #6 on PEMC/PEGC replacement in PIN as specified in clause 4.6.\nIn some scenarios, like hardware failure, crash or power drain, the current PEGC may not be in a position to indicate to the PIN server or request the PIN server to assign the role of PEGC to another PIN element. In these cases, the PEMC on detecting the unavailability of the PIN element acting as PEGC, need to assign the role to another PINE and transfer the PIN information to the new PEGC.\nFigure 7.3.2.3.5-1 illustrates PEGC replacement procedure triggered by PEMC on detecting current PEGC is unavailable or PEGC role change is required.\nPre-conditions:\n1.\tPEGC-2 PIN element has already indicated that it can act as PEGC during the registration process.\n2.\tDynamic information about the PIN is available at the PEMC\n\nThe figure depicts a PEGC replacement triggered by PEMC, illustrating the process of replacing a PEGC (Physical Ethernet Gateway Controller) in a network. The figure shows the PEGC, PEMC, and the network interface cards (NICs) involved in the replacement process. The PEGC is replaced with a new PEGC, and the PEMC is removed, ensuring that the network remains functional.\nFigure 7.3.2.3.5-1: PEGC replacement triggered by PEMC\n1.\tPEMC, PEGC-1, PEGC-2, PINE-1 and PINE-2 are part of same PIN. PEGC-1 is currently the PEGC of the PIN.\n2.\tThe PEMC identifies that PEMC-1 is down or crash or its duration to act as PEGC is ending. How PEMC identifies that the current PINE acting as PEGC is crashed or down is not in the scope of this specification.\n3.\tThe PEMC looks into the PIN profile and PIN dynamic information to identify the new PINE which can take up the role of PEGC (here PEGC-2 PIN element) and requests PEGC-2 to take the role of PEGC.\n4.\tIf the PEGC-2 PINE decides to take up the role of PEGC it sends the success response to the PEMC.\n5.\tThe PEMC notifies the PIN server that PEGC-2 is the new PEGC of the PIN and it is releasing PEGC-1 from its role as PEGC\n6.\tThe PEMC and PIN server updates the PIN dynamic information with the relevant details of PEGC-2.\n7.\tThe PEMC delivers the PIN dynamic information to the PEGC-2.\n8a,8b.\tThe PEMC notifies all the PINEs in the PIN about the change in the PIN element acting as PEGC and its reachability information.\nNOTE:\tThe PINEs are considered to be implicitly subscribed for notifying about the changes in the PIN.\nThe current PEGC decides to relinquish the role of PEGC and requests the PIN server to assign the role to other PINE. The PIN server chooses a PINE and assigns the PEGC role to it.\nFigure 7.3.2.3.6-1 illustrates PIN modification procedure triggered by PIN server based on request from the current PEGC.\nPre-conditions:\n1.\tThe PEGC in a PIN has been pre-configured or has discovered the address (e.g. IP address, FQDN, URI) of the PIN server;\n2.\tThe PIN has already been created and a PIN ID is distributed by PIN server;\n3.\tThe PEGC has been authorized to communicate with the PIN server;\n\nThe figure depicts a modification of a PIN triggered by a PEGC, illustrating the process of modifying a PIN to trigger a PEGC. The figure shows the PIN, PEGC, and the modification process, with arrows indicating the flow of information.\nFigure 7.3.2.3.6-1: Modification of PIN triggered by PEGC\n1.\tThe PEGC (old) sends a PIN modification request to the PIN server to request to change the role of PEGC. The PIN modification request includes the security credentials of the PIN client received during PIN client authorization procedure and may include the UE identifier such as GPSI, PIN client ID, UE location and PIN ID.\n2.\tUpon receiving the request, the PIN server performs an authorization check to verify whether the PEGC has authorization to perform the operation.\n3.\tThe PIN server sends a successful response to original PEGC, which includes a stop of access control information in PEGC. If the PIN modification request fails, the PIN server should give the failure response to indicates that indicates the cause of PIN modification request failure. After receiving the successful of PIN modification response, the old PEGC stops the routing control of a PIN, which is represented by PIN ID.\n4. \tThe PIN server can identify the new PEGC by looking into the capabilities of the PIN elements from PIN dynamic profile information. PIN server requests the PEGC (new) to take the role of PEGC.\n5.\tPEGC (new) if it can take the role of PEGC, sends the success response to the PIN server.\n6.\tPIN server delivers the PIN dynamic profile information to the PEGC (new).\n7.\tPIN server notifies the PEMC and other PIN elements about the change in the PEGC role and its reachability information.\n8.\tPIN server and PEMC updates the PIN dynamic profile information with the details of PEGC (new).\nAn authorised administrator is the owner of a PIN and accesses PIN configuration using an application on a UE, which is one of the PEMC for the PIN. The authorised administrator leaves the local area of the PIN (e.g. in a home) and is able to access the PIN remotely through the 5G network. The authorised administrator is able to manage the PIN through the 5G network.\nPre-conditions:\n1.\tThe PIN server has authorised the creation of the PIN.\n2.\tThe authorised administrator is the owner of the PIN and has created the PIN.\n3.\tThe authorised administrator configures PEMC2 to provide PIN management for the PIN. PEMC2 becomes the active PEMC and UE/PEMC1 is an inactive PEMC.\n4.\tPEMC2, PEGC, PINE-1, PINE-2, and the UE/PEMC1 are members of the PIN. PINE-1 has PEMC capability.\nThe figure depicts a PIN modification process after a local PEMC failure, illustrating the steps involved in repairing the communication system.\nFigure 7.3.2.3.7-1: PIN Modification after local PEMC failure\n1.\t UE/PEMC1 receives a notification from PEGC that there is a communication failure with PEMC2.\n2.\tAn authorised administrator on UE/PEMC1 sends a PIN modification request to the PIN server through the 5G network. The modification request includes the security credentials of the authorised administrator, the UE ID, the PIN ID, PIN member ID, and a request that PINE-1 be assigned the new PEMC.\n3.\tThe PIN server processes the modification request and checks if the authorised administrator is allowed to modify the PIN.\n4. \tIf the authorised administrator is allowed to perform PIN modification, the PIN server sends a request to PINE-1 to assign PINE-1 as the new PEMC and provides PIN profile and dynamic profile information to PINE-1.\n5.\tPINE-1 returns an accept response to the PIN server.\n6.\tThe PIN server notifies the other members of the PIN that PINE-1 will be the new PEMC for the PIN.\n7.\tThe PIN server sends a response to the PIN modification request with updated information for the PIN profile and the dynamic profile information.\n8.\tPIN communications resume with PINE-1 serving as the new PEMC.\nThis solution targets KI#1 on PIN management and KI#6 on PEMC/PEGC replacement in PIN, and applies for PIN eployement with a large number of PIN members. In these cases, multiple PIN Elements may be assigned with Gateway Capability to distribute relaying PIN communications among the different PEGCs. The multiple PEGCs in a PIN also provide redundancy for PIN communication should one of the PEGC fails.\nPrecondition:\n1.\tA homeowner creates a PIN and assigns multiple PEGCs for relaying PIN communications.\nThe figure depicts a 5G network with multiple point-to-point (PEGC) configurations for a point-to-point (P2P) link. The diagram illustrates the various PEGC configurations, including the use of point-to-point (P2P) links, point-to-multipoint (P2MP) links, and point-to-multipoint (P2MP) links. The figure also shows the use of point-to-multipoint (P2MP) links for the 8-1 link, which is a key component of the 5G network. The figure highlights the importance of point-to-multipoint (P2MP) links in ensuring reliable and efficient communication in a 5G network.\nFigure 7.3.2.3.8-1: Multiple PEGC configuration for a PIN\n1.\tA PIN Element with Management Capability, PEMC, requests and is authorized by the PIN server to create a PIN.\n2.\tPEMC creates the PIN and configures PEGC-A and PEGC-B as PIN Element with Gateway Capability. The PIN owner plans to add a large number of devices to the PIN and wants to distribute PIN communications between PEGC-A and PEGC-B to avoid overloading one PEGC. In addition, PEGC-A and PEGC-B can offer redundancy in case either PEGC-A or PEGC-B fails. PEMC sends a PIN profile update to the PIN server of the configuration of PEGC-A and PEGC-B as PEGCs.\n3.\tPINE-1 sends a PIN join request to the PEMC. PIN Client Profile information (required KPIs, location and schedule) is included in the request which PEMC uses to determine the optimal default and backup PEGCs for PINE-1. PEMC assigns PEGC-A as the default PEGC for PINE-1 and PEGC-B as the backup PEGC for PINE-1. PINE-1 will use PEGC-A as the primary PEGC to relay PIN communications and will use PEGC-B to relay PIN communications only if PEGC-A is not available.\n4.\tThe PEMC notifies PEGC-A and PEGC-B of their PEGC roles: PEGC-A will serve as the default PEGC and PEGC-B will serve as the backup PEGC for PINE-1.\n5.\tPEMC returns a response to the join request and includes the PEGC configuration that PEGC-A will serve as the default PEGC and PEGC-B will serve as the backup PEGC.\n6.\tSteps 3 to 5 are repeated for PINE-2. PEMC configures that PEGC-B will serve as the default PEGC and PEGC-A will serve as the backup PEGC for PINE-2.\n7.\tPEMC sends a PIN profile update to the PIN server informing the PIN server of the PEGC configurations for PINE-1 and PINE-2.\nThis solution targets KI#1 on PIN management and applicable for PIN with a large number of PIN elements and including multiple PIN elements with management capabilities. In these cases, multiple PIN Elements may be assigned with PEMC role for ease and effective management by the PIN owner or PIN admin.\nPrecondition:\n1.\tA homeowner creates a PIN and configured multiple PEMCs.\n2.\tPEMC-S is assigned with the role of secondary PEMC and PEMC-P is assigned with the role of primary PEMC.\n2.\tPEMC-S has direct connection or PIN direct connection with the PEMC-P.\n\nThe figure depicts a PIN management system with multiple PEM Cs, illustrating the process of assigning and de-assigning PINs to different users. The system uses a hierarchical structure with multiple levels, including the central PEM Cs, sub-PEM Cs, and individual users. The figure also includes a flowchart to guide the process, with arrows indicating the sequence of actions.\nFigure 7.3.2.3.9-1: PIN management with multiple PEMCs\n1.\tThe PEMC-S may already have an application layer connection established with PEMC-P.\n2. \tPEMC-S rreceives a request from PIN owner/PIN admin to perform any of the PIN management operations. These operations could be PIN element removal, PIN element addition, PIN deletion, PIN configuration update etc.\n3. \tPEMC-S prepares the corresponding request including the required details for the requested operation and sends it to PEMC-P. These requests shall carry the PIN client ID of the PEMC-S mandatorily.\n4. \tPEMC-P on receiving the request checks whether the PEMC-S is authorized as secondary PEMC in-order to perform the operation.\n5. \tIf the authorization succeeds, PEMC-P proceeds with the requested operation.\n6. \tPEMC-P sends the response to PEMC-S containing the status/result of the requested operation.\nNOTE:\tOnly the operations that are required to be performed by the PIN owner/PIN admin can be performed through secondary PEMC and all other operations like PIN discovery, PIN service discovery, authorizing PIN elements to join PIN etc., cannot be handled by the secondary PEMC.\n\nThe procedure describes how a PEMC queries the PIN server to obtain the information of a PIN that pre-configured or dynamically created by the PEMC.\nPre-conditions:\n1.\tThe PEMC in a PIN has been pre-configured or has discovered the address (e.g. IP address, FQDN, URI) of the PIN server;\n2.\tThe PIN has already been created and a PIN ID is distributed by PIN server;\n3.\tThe PEMC has been authorized to communicate with the PIN server;\n4.\tA PIN client has already received the role of PEMC from PIN server;\nThe figure depicts a user interface for querying PIN information in a mobile application. The interface includes a search bar, a list of PINs, and a button to confirm the PIN. The figure is designed to be user-friendly and intuitive, making it easy for users to input and retrieve their PINs.\nFigure 7.3.2.4-1: Query PIN information\n1.\tThe PEMC sends PIN Profile Query requests (PEMC ID, PIN ID) to the PIN server. If the PEMC is behind a PEGC, the message is encapsulated in the user plane packet.\n2.\t[Optional] The PIN server determines whether the PEMC is one of the managers of the PIN. The PIN server can have the verification procedure with 5GS.\n3.\tThe PIN server responds to the PEMC with the PIN Profile, which includes for example, the PIN name, PIN description, List of Device Info (PINE), PIN duration, PEGC information or others. The device information is the information of PINE that in the PIN.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "7.3.3\tSolution evaluation",
                            "text_content": "This solution addresses KI#1 about \" Whether and how to triggers a PIN network management request, for example, PIN creating/modifying/deleting? What parameters are required in PIN network management request? \".\nThis solution firstly solves the problem that only the PEMC can trigger a PIN network management request. Before the creation of PIN, the PINAPP or UE should be a PEMC first. And, when the PEMC triggers the PIN creating towards PIN server, some of the parameters are needed in the request.\n",
                            "figures_meta_data": [],
                            "tables": []
                        }
                    ]
                },
                {
                    "title": "7.4\tSolution #3: Insertion and remove of PIN elements in a PIN",
                    "description": "",
                    "summary": "",
                    "text_content": "",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": [
                        {
                            "title": "7.4.1\tArchitecture enhancements",
                            "text_content": "The architecture of PIN is referred to the solution 1 in clause 7.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "7.4.2\tSolution description",
                            "text_content": "This solution addresses aspects of Key Issue #1.\nAfter the PIN is created by the PEMC, the other PIN elements can be added into the PIN. For the PIN elements that have already added into the PIN, they can be removed from a certain PIN by the PEMC.\nWhen a PIN element is added into a PIN, the PEMC should configure with the PIN elements with the necessary permission, for example, to be able to access to 5GS via the PEGC.\nBefore the PIN element to be added into a PIN, the PEMC should discover the PIN element first, or the PIN element receives the lists of PIN Profile first (for example, the list of PIN ID, PIN description information).\nWhen a PIN element is added into a PIN, the PINE can indicate the service it can provide. The service includes both the service that PIN client in PINE can provide and the service that application client on PINE can provide.\nPre-conditions:\n1.\tThe UE (PIN client) has been pre-configured or has discovered the address (e.g. IP address, FQDN, URI) of the PEMC;\n2.\tThe UE Identifier or PIN client Identifier is available;\n3.\tThe PIN client has been authorized to communicate with the PEMC;\n4.\tThe PIN client has already received the list of PIN ID, corresponding PEMC IP address;\nFor a certain PIN element, it can receive the PIN profile from PEMC. The configuration includes PIN ID, PIN description (Human-readable description of the PIN, for example, the company name, location or the type of service) and the PEMC IP address.\nAfter receiving the PIN profile from PEMC, the PIN client can decide to join the PIN.\n\nThe figure depicts a PIN element request to join a PIN towards PEMC, illustrating the process of requesting a PIN element to join a network.\nFigure 7.4.2.2.1-1: PIN element requests to join a PIN towards PEMC\n1.\tThe PIN element already has an application layer connection with a PEMC which manages the PIN.\nNOTE:\tIf the PIN client communicates with PEMC via WiFi or Bluetooth provided by PEMC, the PEMC can identify the PIN elements by the account number and password that PEMC distributed and the PIN client ID, UE GPSI if available.\nAnd the PEMC has already send the PIN profile to PIN elements. The configuration includes PIN ID, PIN description (Human-readable description of the PIN, for example, the company name, location or the type of service) and the PEMC IP address.\n2.\tThe PIN client sends the request to PEMC to join the PIN. The request includes the security credentials of the PIN client received during PINAPP authorization procedure and may include the UE identifier such as GPSI, PIN client ID, UE location, PIN ID and PIN client profile(s) information as shown in Table 7.7.2.2.1-1. The request also includes service that PINE can provide. In the request, both the service that PIN client in PINE can provide and the service that application client on PINE can provide.\nEditor's note: The authorization procedure between PIN client and PEMC should be captured in SA3 scope.\n3.\tUpon receiving the request, the PEMC performs an authorization check to verify whether the PIN client has authorization to join the PIN.\n4.\tThe PEMC sends a successful response to PIN client. Also, the access control information for the PIN client is also included, for example, user name, account, SSID, BSSID. All the information is used by PIN elements (PINAPP) in PIN to access 5G or access other application outside of PIN. The PEMC also provides lifetime of the PIN, identity, address of PEGC and may also provide unique PIN client ID to identify the PIN element within a PIN.\nEditor's note: The access control information should be coordinated with SA2 for further study.\n5.\tThe PEMC notifies the PIN server containing the details of the new PIN client that joined the PIN\n6.\tThe PEMC notifies the PEGC and other PIN elements containing the details of the new PIN client that joined the PIN. And the PEGC decides to enables the PINE to access 5GS.\n7.\tThe PEMC updates PIN profile with the details of the new PIN client that joined the PIN and the service that the PINE can provide.\n8.\tThe PEGC updates the PIN profile with the details of the new PIN client that joined the PIN and the service that the PINE can provide.\n9.\tThe PIN server updates the PIN profile with the details of the new PIN client that joined the PIN and the service that the PINE can provide.\nPre-conditions:\n1.\tThe PIN client has already been added into a PIN;\n2.\tThe UE Identifier or PIN client Identifier is available;\n3.\tThe PIN client has been authorized to communicate with the PEMC;\nThe PEMC can decide to remove a PIN client from a PIN, for example, the PIN client may not belong to the group.\n\nThe figure depicts a schematic of a PIN element, which is a crucial component in a PIN diode. It shows the structure of the PIN diode, including the PIN, the anode, the cathode, and the gate. The figure also includes a PEMC (Passive Emitter-Detector-Collector) to remove a PIN element by using a PEMC. This process is essential for maintaining the integrity of the PIN diode and ensuring its functionality.\nFigure 7.4.2.2.2-1: Remove a PIN element from a PIN by PEMC\n1.\tThe PIN element already has an application layer connection with a PEMC which manages the PIN.\n2.\tThe PEMC decides to remove a PIN client from a PIN which indicated by PIN client ID or UE GPSI.\n3.\tThe PEMC sends the notification to PIN client to notify that the PIN client is included in the PIN any more.\n4.\tThe PEMC notifies the PEGC containing the details of the PIN client that has been removed from the PIN.\n5.\tThe PEMC notifies the PIN server containing the details of the PIN client that has been removed from the PIN.\n6.\tThe PEMC updates the PIN profile to remove the details of the PIN client that has been removed from the PIN.\n7.\tThe PEGC updates the PIN profile to remove the details of the PIN client that has been removed from the PIN. The PEGC disable this PIN client to access 5GS.\n8.\tThe PIN server updates the PIN profile to remove the details of the PIN client that has been removed from the PIN.\nPre-conditions:\n1.\tThe PIN client has already been added into a PIN;\n2.\tThe UE Identifier or PIN client Identifier is available;\n3.\tThe PIN client has been authorized to communicate with the PEMC;\nThe PIN client can decide to leave a PIN, for example, the PIN client has long route to the PIN and is not received service from PIN.\n\nThe figure depicts a PIN client deciding to leave a PIN, illustrating the process of selecting a PIN and the subsequent decision to leave it. The figure shows the client's decision-making process, with the client first selecting a PIN and then leaving it. The figure is a visual representation of the PIN client's decision-making process, providing a clear and concise explanation of the process.\nFigure 7.4.2.2.3-1: PIN client decides to leave a PIN\n1.\tThe PIN element already has an application layer connection with a PEMC which manages the PIN.\n2.\tThe PIN client decides to leave a PIN, and sends the request to PEMC to leave the PIN. The request includes the security credentials of the UE or PIN client received during PINAPP authorization procedure and may include the UE identifier such as GPSI, PIN client ID, UE location and PIN ID.\nEditor's note: The authorization procedure between PIN client and PEMC should be captured in SA3 scope.\n3.\tThe PEMC authorizes the request, and decides to remove a PIN client from a PIN which indicated by PIN client ID or UE GPSI.\n4.\tThe PEMC sends the response to PIN client to notify that the PIN client may not be included in the PIN anymore.5.\tThe PEMC notifies the PEGC containing the details of the PIN client that requested to leave the PIN.\n5.\tThe PEMC notifies the PIN server containing the details of the PIN client that requested to leave the PIN.\n6.\tThe PEMC updates the PIN profile and remove the details of the PIN client that requested to leave the PIN.\n7.\tThe PEGC updates the PIN profile to remove the details of the PIN client that requested to leave the PIN. The PEGC disable this PIN client to access 5GS.\n8.\tThe PIN server updates the PIN profile to remove the details of the PIN client that requested to leave the PIN.\n",
                            "figures_meta_data": [],
                            "tables": []
                        }
                    ]
                },
                {
                    "title": "7.5\tSolution #4: PIN delete",
                    "description": "",
                    "summary": "",
                    "text_content": "",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": [
                        {
                            "title": "7.5.1\tArchitecture enhancements",
                            "text_content": "The architecture of PIN is referred to the solution 1 in clause 7.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "7.5.2\tSolution description",
                            "text_content": "This solution addresses aspects of Key Issue #1.\nFor an established PIN, the PIN can be deleted by the following situation:\n-\tDecided by PEMC. The PEMC of a PIN decides to delete the PIN and sends request to PIN server. The PIN server accepts the requests and deletes the PIN. The PIN elements in this PIN can’t access to 5GS via PEGC anymore.\n-\tDecided by PIN server. For each PIN, it has the life cycle that the PIN can exists. If the PIN has been in existence for longer than the life cycle, the PIN server can decide to delete the PIN and release the resource.\nAfter the delete of PIN, the PIN elements in PIN can’t access to other PIN elements or application server via PEGC by 5GS.\nDue to the PEMC can store the lifecycle of a PIN locally, and when the lifecycle of PIN comes to the end, the PEMC can directly delete the PIN locally and without authorized by PIN server. After the PIN is deleted by PEMC, the PEMC can update the status of PIN to PIN server.\nThe PEMC can trigger the PIN delete to PIN server that the PIN doesn’t need any more.\nFigure 7.5.2.2.1-1 illustrates PIN delete procedure based on request/response model.\nPre-conditions:\n1.\tThe PEMC in a PIN has been pre-configured or has discovered the address (e.g. IP address, FQDN, URI) of the PIN server;\n2.\tThe PIN has already been created and a PIN ID is distributed by PIN server;\n3.\tThe PEMC has been authorized to communicate with the PIN server;\n4.\tA PIN client has already received the role of PEMC from PIN server;\n\nThe figure depicts a 5G network scenario with a 5G signal path, illustrating the signal propagation in a 5G network. It highlights the multi-path signal propagation, with key components such as the base station (gNB), user equipment (UE), and scatterers. The diagram illustrates beamforming techniques to mitigate interference, and the fiber-optic backbone architecture with core switches, optical line terminals (OLTs), and distributed nodes. The layered design aligns with SDN principles.\nFigure 7.5.2.2.1-1: Delete of PIN triggered by PEMC\n1.\tThe PEMC sends a PIN delete request to the PIN server to request to delete the PIN. The PIN delete request includes the security credentials of the PIN client received during PIN client authorization procedure and PIN ID. The PIN ID indicates this PIN will be deleted.\nEditor's note: The security credentials design and the authorization procedure is in the scope of SA3.\n2.\tUpon receiving the request, the PIN server validates the PIN delete request and verifies the security credentials.\n3.\tUpon successful authorization, the PIN server sends a successful delete response.\nAfter the PIN is deleted which is indicated by PIN ID, the access control information in PEGC is also disabled and the PIN elements in this PIN can’t access to 5GS via PEGC anymore when the PIN is deleted. The PEGC may not be the gateway and for PIN element to access to 5GS for this PIN.\n4.\tBefore the PIN deleted, the PEMC notifies the PEGC of PIN delete that identified by PIN ID, and PEGC disables the 5GS connection permission and access control information for the PIN elements in this PIN.\n5.\tBefore the PIN deleted, the PEMC notifies the PIN elements in this PIN of PIN delete that identified by PIN ID. The PIN elements in this PIN can delete the information about this PIN, for example, the PIN profile.\nThe PIN server can trigger the PIN delete procedure, for example, when the life cycle of PIN is end or the PIN server decides to stop the PIN service in this PIN.\nFigure 7.5.2.2.2-1 illustrates PIN delete procedure based on request/response model.\nPre-conditions:\n1.\tThe PEMC in a PIN has been pre-configured or has discovered the address (e.g. IP address, FQDN, URI) of the PIN server;\n2.\tThe PIN has already been created and a PIN ID is distributed by PIN server;\n3.\tThe PEMC has been authorized to communicate with the PIN server;\n4.\tA PIN client has already received the role of PEMC from PIN server;\n5.\tIt is assumed that PIN server manages the PIN life cycle;\nThe figure depicts a 5G network scenario with a PIN server triggering a deletion of a PIN. The network consists of a base station (gNB), user equipment (UE), and scatterers. The diagram highlights the role of the gNB in managing the network, while the UE and scatterers are responsible for data transmission. The deletion of a PIN triggers a deletion of the corresponding PIN in the database, ensuring the integrity of the network.\nFigure 7.5.2.2.2-1: Delete of PIN triggered by PIN server\n1.\tAn event occurs at the PIN server that satisfies trigger conditions for notifying a subscribed PEMC of a PIN. If the life cycle of a PIN is end or the PIN server decides to not provide any PIN service in this PIN, the PIN server should trigger a PIN delete procedure to the PEMC which manages the PIN.\n2.\tThe PIN server sends PIN delete notification to the PEMC. The PIN server includes the PIN ID, security credentials in the notification.\nAfter the PIN is deleted which is indicated by PIN ID, the access control information in PEGC is also disabled and the PIN elements in this PIN can’t access to 5GS via PEGC anymore when the PIN is deleted. The PEGC may not be the gateway and for PIN element to access to 5GS for this PIN.\nEditor's note: The access control information in PEGC should be coordinated with SA2.\n3.\tBefore the PIN deleted, the PEMC notifies the PEGC of PIN delete that identified by PIN ID, and PEGC disables the 5GS connection permission and access control information for the PIN elements in this PIN.\n4.\tBefore the PIN deleted, the PEMC notifies the PIN elements in this PIN of PIN delete that identified by PIN ID. The PIN elements in this PIN can delete the information about this PIN, for example, the PIN profile.\nThe PEMC can directly trigger the PIN delete procedure, for example, when the life cycle of PIN is end, without authorization from PIN server. After the PIN is deleted successfully, the PEMC updates the PIN status to PIN server.\nFigure 7.5.2.2.3-1 illustrates PIN delete procedure based on request/response model.\nPre-conditions:\n1.\tThe PEMC in a PIN has been pre-configured or has discovered the address (e.g. IP address, FQDN, URI) of the PIN server;\n2.\tThe PIN has already been created and a PIN ID is distributed by PIN server;\n3.\tThe PEMC has been authorized to communicate with the PIN server;\n4.\tA PIN client has already received the role of PEMC from PIN server;\n5.\tIt is assumed that PEMC manages or stores the PIN life cycle;\nThe figure depicts a simplified representation of a PIN deletion process, with a PEMC (Physical Entity Management Controller) being the central element. The figure shows a PIN being deleted locally by the PEMC, which is a crucial step in the process of removing PINs from a device. The PEMC is responsible for managing the physical entities (like the PINs) in a device, ensuring that they are properly deleted when they are no longer needed. The figure provides a clear and concise visual representation of this process, making it easy to understand and follow.\nFigure 7.5.2.2.3-1: Delete of PIN locally by PEMC\n0.\tThe PEMC stores the lifecycle of PIN locally, and the lifecycle of PIN which indicated by PIN ID comes to the end.\n1.\tThe PEMC deletes the PIN which indicated by PIN ID locally, and the information in PIN profile related to this PIN is deleted too.\n2.\tThe PEMC indicates the PEGC to deactivate the access control information of this PIN. After the deactivation, the PINE in this PIN can’t access the 5GS any more.\n3.\tThe PEGC sends response to PEMC that the access control information has been deactivated successfully.\n4.\tThe PEMC sends requests to PINE in this PIN to delete the PIN profile related to this PIN that represented by PIN ID.\n5.\tThe PEMC sends a PIN status update notification to the PIN server to indicate the PIN has been deleted. In this notification, the PIN ID is included.\n6.\tThe PIN server responses to the notification.\n7.\tThe PIN server updates the PIN profile to remove the details of the PIN which represented by PIN ID.\n\n",
                            "figures_meta_data": [],
                            "tables": []
                        }
                    ]
                },
                {
                    "title": "7.6\tSolution #5: PIN discovery",
                    "description": "",
                    "summary": "",
                    "text_content": "",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": [
                        {
                            "title": "7.6.1\tArchitecture enhancements",
                            "text_content": "The architecture of PIN is referred to the solution 1 in clause 7.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "7.6.2\tSolution description",
                            "text_content": "This solution addresses aspects of Key Issue #1.\nFor a certain PIN element, the PIN should be discovered and the PIN element can decide whether to join in the PIN. There are three situations that the PIN elements can discover the PIN as following:\n-\tIf the PIN elements can have an application layer communication with the PEMC which manages a PIN, the PIN elements can receive the PIN ID,PIN description and the PIN service that a PIN can provide, and decides whether to join the PIN;\n-\tThe PEGC can be set as open access and the PIN element can communicate with PIN server to receive the PIN ID,PIN description and the PIN service that a PIN can provide from PIN server via the PEGC.\nPre-conditions:\n1.\tThe UE Identifier or PIN client Identifier is available;\n2.\tThe PIN client has been authorized to communicate with the PEMC;\n3.\tThe UE or PIN client has already received the role of PEMC from PIN server;\nIf the PIN element has already had a communication connection with the PEMC, which managements of a PIN, the PIN element can receive the PIN ID, PIN description information and IP address of PEMC and decides whether to join the PIN.\nThe figure depicts the procedures of PIN discovery based on PEMC, which is a method used to identify the presence of a physical entity (PIN) in a network. The figure shows a flowchart with various steps, such as checking for the existence of a PEMC, determining the type of PEMC, and then performing the discovery process. The steps are clearly labeled and visually represented, making it easy to understand the process.\nFigure 7.6.2.2.2-1: Procedures of PIN discovery based on PEMC\n1.\tThe PIN element has already had an application layer connection with a PEMC which manages a PIN.\nIf the PIN client communicates with PEMC via WiFi provided by PEMC, the PEMC can identify the PIN elements by the account number and password that PEMC distributed and the PIN client ID, UE GPSI if available.\nIf the PIN client communicates with PEMC via Bluetooth provided by PEMC, the PEMC can identify the PIN elements by the PIN client ID, UE GPSI if available.\nNOTE:\tThe RAT (e.g. wifi) between the PIN client and the PEGC/PEMC is out of scope of SA6\n2. \tThe PIN client sends the PIN discovery request to PEMC. The PIN discovery request includes the security credentials of the UE or PIN client and may include the UE identifier such as GPSI if available, PIN client ID, UE location, the service that PINE wants to consume and PIN client profile(s) information\n3.\tThe PEMC performs an authorization check to verify whether PINE is allowed to perform the operation.\nEditor's note: The authorization and authentication procedure should be defined in SA3 and wait for SA3 to reply.\n4.\tThe PEMC sends the PIN discovery response to PIN element including the configuration information of the PIN(s), which are offering the services requested by the PINE in the PIN discovery request. The configuration information includes PIN ID, PIN description (Human-readable description of the PIN, for example, the company name, location or the type of service) , services that each PIN can provide and the PEMC IP address.\nThe PIN client receives the configuration information and decides whether to join in the PIN.\nDue to for some of the PIN elements can have the application interaction towards the PEGC, for example, via WiFi or Bluetooth pairing, and the PIN element can have the communication with PIN server to receive the lists of PIN ID and corresponding PIN description information. And the PIN elements can decide whether to join in the PIN.\nFigure 7.6.2.2.2-1 illustrates PIN server discovery via PEGC based on request/response model.\nPre-conditions:\n1.\tThe PIN elements or PIN client has application layer connection with PEGC;\n2.\tThe UE Identifier or PIN client Identifier is available;\n3.\tThe PEGC has been authorized to communicate with the PIN server;\n\nFigure 7.6.2.2.2 -1: PIN discovery via PEGC\nFigure 7.6.2.2.2-1: PIN discovery via PEGC\n1.\t(optional) The PIN element or PIN clients has already had the application layer connection towards PEGC. For example, the PIN elements can communicate with PEGC via WiFi or Bluetooth.\nThe PIN client can communicate with the PIN server via PEGC.\nIf the PIN client communicates with PEGC via WiFi provided by PEGC, the PEGC can identify the PIN elements by the account number and password that PEGC distributed and the PIN client ID, UE GPSI if available.\nIf the PIN client communicates with PEGC via Bluetooth provided by PEGC, the PEGC can identify the PIN elements by the PIN client ID, UE GPSI if available.\nNOTE 1:\tThe RAT (e.g. wifi) between the PIN client and the PEGC/PEMC is out of scope of SA6\nNOTE 2:\tThe PEGC can serve the PIN client which triggers the PIN discovery via relay PEGC.\n2.\tThe PIN client sends the PIN discovery request to PIN server. The PIN discovery request includes the security credentials of the UE or PIN client and may include the UE identifier such as GPSI, PIN client ID, UE location, the service that PINE wants to consume and PIN client profile(s) information.\nThe PIN client can have the filter information in the PIN discovery request for example, the interesting area, the interesting type of PIN and etc.\n3.\tUpon receiving the request, the PIN server performs an authorization check to verify whether the PIN client has authorization to perform the operation.\n4.\tThe PIN server sends a successful response to PIN client, which includes the configuration information to PIN elements. The configuration includes PIN ID, PIN description (Human-readable description of the PIN, for example, the company name, location or the type of service) , services that each PIN can provide and the corresponding PEMC IP address.\n",
                            "figures_meta_data": [],
                            "tables": []
                        }
                    ]
                },
                {
                    "title": "7.7\tSolution #6: PIN Profile",
                    "description": "",
                    "summary": "",
                    "text_content": "",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": [
                        {
                            "title": "7.7.1\tArchitecture enhancements",
                            "text_content": "The architecture of PIN is referred to the solution 1 in clause 7.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "7.7.2\tSolution description",
                            "text_content": "This solution addresses aspects of Key Issue #1.\nFor an established PIN, the PIN should have the profile or configuration information in PIN server, PEMC and PEGC.\nAlso the PIN server, PEMC and PEGC shall maintain the dynamic profile information related to the PIN which needs to be updated based on the events (e.g. PIN element joining or leaving, PIN element capability is changed) occuring in the PIN.\n\nTable 7.7.2.2.1-1: PIN Profile in PIN server, PEMC, PEGC and PINE\n\nTable 7.7.2.3-1 describes the list of parameters that are classified as dynamic profile information and which are maintained at the PIN server, PEMC and PEGC. Dynamic profile information maintained at these entities are updated based on the following events occurring in the PIN:\n-\tPINE joins or leaves the PIN;\n-\tRole of PEMC or PEGC changes;\n-\tWhen the services offered by the PIN changes;\n-\tWhen a PINE updates the services it offers;\n-\tWhen a PINE joins or leaves the PIN;\n\nTable 7.7.2.3-1: Dynamic profile information of a PIN\n\n\nTable 7.7.2.4-1 describes the list of PIN element maintained by a PIN client. These parameters are exchanged between the PIN client and PEMC (e.g., when the PIN client is joining or registering to the PIN). Depending on the parameter, the PIN client or the PEMC may configure the value of the parameter during the PIN client and PEMC exchange.\nTable 7.7.2.4-1: PIN Client Profile\n\n",
                            "figures_meta_data": [],
                            "tables": [
                                {
                                    "description": "Table 7.7.2.2.1-1: PIN Profile in PIN server, PEMC, PEGC and PINE",
                                    "table number": 4,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 7.7.2.3-1: Dynamic profile information of a PIN",
                                    "table number": 5,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 7.7.2.4-1: PIN Client Profile",
                                    "table number": 6,
                                    "summary": "",
                                    "name": ""
                                }
                            ]
                        },
                        {
                            "title": "7.7.3\tSolution evaluation",
                            "text_content": "This solution captures the details of the information that needs to be maintained at the each entities that are part of the PIN. PIN profile and PIN dynamic profile information are maintained at the PIN server, PEMC and PEGC. PIN profile information is maintained till the life time of the PIN i.e., until it is deleted. PIN dynamic profile information is maintained till the PIN is in active state and it is updated based on the events occuing in the PIN. PIN elements sends the PIN client profile while joining or registering to the PIN.\n",
                            "figures_meta_data": [],
                            "tables": []
                        }
                    ]
                },
                {
                    "title": "7.8\tSolution #7: PIN server discovery",
                    "description": "",
                    "summary": "",
                    "text_content": "",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": [
                        {
                            "title": "7.8.1\tArchitecture enhancements",
                            "text_content": "The architecture of PIN is referred to the solution 1 in clause 7.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "7.8.2\tSolution description",
                            "text_content": "This solution addresses aspects of Key Issue #1.\nBefore the PEMC triggers the PIN establishment, or the PEMC triggers PIN modification or PIN delete, a certain PIN server should be discovered. The PIN server is responsible to perform the request of PIN create, PIN modification and PIN delete from PEMC of a PIN.\nDue to the PIN server in a PLMN can be multiple, so it is important to PIN elements to discover the appropriate PIN server to connect.\nThe aim of PIN server discovery procedure is to receive one or more endpoint information (e.g. URI(s), FQDN(s), IP address(es)) of PIN server. And the PEMC, PEGC, PIN elements are all able to receive the PIN server endpoint information.\nThe PIN server can be discovered by the following method:\n-\tpre-configured in the PIN elements or PIN clients;\n-\tconfigured by the user;\n-\tprovisioned by MNO through 5GC procedure; or\n-\tderived from HPLMN identifier for non-roaming scenario or from VPLMN identifier for roaming scenario.\nIt may be possible to provide the PIN server endpoint information to the PIN client or PIN elements from the 5GC. If the PIN server endpoint information is provided by 5GC and available at the PEMC, the PEMC shall use the information for the PIN management procedure (e.g.: PIN creation/modification/delete).\nOtherwise, the PEMC shall use pre-configured PIN server endpoint information for PIN management procedure if pre-configured PIN server endpoint information is available in PEMC.\nDue to for some of the PIN elements can have the application interaction towards the PEGC, for example, via WiFi or Bluetooth pairing, so the PEGC can provide the PIN server end point information to PIN elements.\nFor some of the PEGC, it has the open access capability to accept the application layer connection from the PIN elements.\nFigure 7.8.2.2.2.-1 illustrates PIN server discovery via PEGC based on request/response model.\nPre-conditions:\n1.\tThe PIN elements or PIN client has application layer connection with PEGC;\n2.\tThe UE Identifier or PIN client Identifier is available;\nThe figure depicts a PIN server discovery process using PEGC (Point-to-Point Energy-Guided Channel) in an 800MHz frequency band. The figure shows the steps involved in the discovery process, including the use of a PEGC channel to transmit the discovery request, the reception of the discovery response, and the subsequent processing of the response. The figure provides a clear and concise representation of the process, making it easy to understand and follow.\nFigure 7.8.2.2.2-1: PIN server discovery via PEGC\n1.\tThe PIN element or PIN clients has already had the application layer connection towards PEGC. For example, the PIN elements can communicate with PEGC via WiFi or Bluetooth. The PINE can also have the open access to PEGC that with no user name or password. For this situation, the PINE can’t consume the communication service that provided by PEGC, but can have communication with the PEMC behind the PEGC.\n2.\tThe PINE sends PIN server discovery request to PEGC. The requests include the GPSI, MAC address, if has, UE location.\n3.\tThe PEGC can directly deliver the PIN server end point information to PIN elements or PIN client. The end point information of PIN server includes URI(s), FQDN(s), IP address(es)) of PIN server.\n4.\tIf the PINE has open access to PEGC, that the PEGC should route the request to PEMC that behind the PEGC.\n5-6.\tThe PEMC delivers the PIN server end point information to PIN elements or PIN client via PEGC. The end point information of PIN server includes URI(s), FQDN(s), IP address(es)) of PIN server.\nDue to for some of the PIN elements can have the application interaction towards the PEMC, for example, via WiFi or Bluetooth pairing, so the PEMC can provide the PIN server end point information to PIN elements.\nFigure 7.8.2.2.3-1 illustrates PIN server discovery from PEMC based on request/response model.\nPre-conditions:\n1.\tThe PIN elements or PIN client has application layer connection with PEMC;\n2.\tThe UE Identifier or PIN client Identifier is available;\nThe figure depicts a PIN server discovery process using PEGC (Physical Ethernet Gateway Controller) in a 5G network. It illustrates the steps involved in identifying and configuring a PEGC for a specific network scenario. The figure includes various components such as the PEGC, network interface controller (NIC), and physical Ethernet gateway (PEG). The diagram highlights the importance of network segmentation and the use of PEGC to ensure efficient and reliable communication.\nFigure 7.8.2.2.3-1: PIN server discovery via PEGC\n1.\tThe PIN element or PIN clients has already had the application layer connection towards PEMC. For example, the PIN elements can communicate with PEMC via WiFi or Bluetooth.\n2.\tThe PINE sends PIN server discovery request to PEMC. The requests include the GPSI, MAC address, UE location.\n3.\tThe PEMC delivers the PIN server end point information to PIN elements or PIN client. The end point information of PIN server includes URI(s), FQDN(s), IP address(es)) of PIN server. 7.9\tSolution #8: Service switch in a PIN\n",
                            "figures_meta_data": [],
                            "tables": []
                        }
                    ]
                },
                {
                    "title": "7.9\tSolution #8: Service switch in a PIN",
                    "description": "",
                    "summary": "",
                    "text_content": "",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": [
                        {
                            "title": "7.9.1\tArchitecture enhancements",
                            "text_content": "The architecture of PIN is referred to the solution 1 in clause 7.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "7.9.2\tSolution description",
                            "text_content": "This solution addresses Key Issue #3. The principles of this solution are:\n-\tThe PIN Application Client in UE can discover or get notified about available PINs where an application service can be switched to.\n-\tOnce the PIN Application Client selects the PIN, it can request that the PIN Server trigger service switch procedure and obtain the necessary information for performing the service switch from the PIN Server.\n-\tThe PIN server can identify the PIN Applications in PINE, where the service can be split and terminated.\n-\tThe PIN Server instructs PIN Management Client to execute service switch procedure.\n-\tThe PIN Management client configures PIN Gateway client and PINEs for service switch.\n-\tThe PIN Gateway client uses the configuration information from the PIN Management Client to configure the PEGC which implements service switch function.\nThis procedure presents a high-level overview of Solution #1.\nPIN Application Client: A PINAPP function in UE, PINE, which initiates discovery, service switch, configuration.\nPIN Management Client: A PINAPP in PEMC, configures PEGC and PINE for service switch.\nPIN Gateway Client: A PINAPP in PEGC, obtains configuration from PEMC and executes service switch.\nPIN Server: Supports PIN Application Client by providing PIN information and executes service switch procedure when requested by PIN Application Client.\nFigure 7.9.2.2.2.-1 illustrates a discovery and service switch procedure based on request/response model.\nThe figure depicts a PIN Service S witch, which is a type of service that utilizes a PIN code to authenticate users. The figure shows a user entering a PIN to access the service.\nFigure 7.9.2.2.2-1: PIN Service Switch\nPre-conditions:\n-\tThe PIN Client in UE has been pre-configured or has discovered the address (e.g. IP address, FQDN, URI) of the PIN server;\n-\tThe PIN Client in UE has been authorized to communicate with the PIN server;\n-\tThe PIN Management Client supports functionality to execute the service switch procedure;\n-\tThe PIN Gateway Client supports functionality to execute the service switch procedure;\n-\tThe PIN Server has capability to communicate with Application server to identify application session and provide information about any changes to the end points of the session;\n-\tThere is an ongoing application session from AS to UE.\n1.\tA PIN Client in a UE, triggered by an Application Client, sends a discovery request to a PIN Server. The purpose of the discovery request is to discover a PIN that can support a certain application in a certain location. The discovery request includes Location information, Application requirements such as Display characteristics, Audio characteristics, etc. The PIN Client can also subscribe to be notified when a PIN is available in a location and can support the application requirements.\n2.\tThe PIN Server based on Location and application service requirement can send a notification to the PIN Client with the following information: discovered PIN ID, details of PINAPP capabilities and corresponding PE IDs, such as Device ID, IP address and Port number. PIN Client forwards the information to Application Client in UE.\n3.\tThe Application Client in UE initiates service switch with the PIN Client, which sends a \"Service switch request\" to the PIN Server with information about the service to be switched. The information about the service to be switched includes Application session ID, Destination PIN ID, and an IP 4 Tuple that describes the session. The IP 4 tuple may include the IP Address of the UE, the IP Address of the Server that provides the service, and the UE port numbers that are associated with the service, and the port numbers on the server that are associated with the service. The PIN Server accepts the request and informs the Application Client.\n4.\tPIN Server sends the \"Switch Application Session\" request to the PIN Management Client. The request includes information such as\n-\tThe Application Session Id,\n-\tThe, Destination PINE: PE IDs (1..N), can include IP address, Port number, URL etc.\n-\tIf the Application session needs to be split among multiple PINEs (i.e. split into sub-flows), it is indicated by setting the flag SPLIT == FALSE or TRUE. SPLIT can be set to TRUE only if the request includes multiple PINEs.\n-\tThe IP 4 Tuple\n-\tSecurity related information elements required to successfully transfer the session context.\nNOTE:\tSecurity related information elements are in the scope of SA WG3\n5.\tThe PIN Management Client starts configuring PEGC by sending \"Configure Service Switch\" to PIN Gateway Client, which includes:\n-\tThe Session ID\n-\tDestination PINE information, which is a list of PEID, IP address, Port number or URL, where the sub-flows will be terminated.\n-\tThe flag SPLIT is set to TRUE or FALSE, if the session needs to be split to multiple PINEs and more than one PINE information is included in the TerminatingPineList. It can also include information about PINE to sub-flow mapping.\n6.\tThe PIN Management Client also configures PINE to prepare for terminating application session. The configuration information is sent to the PIN Client and Application Client in PINE.\n7.\tThe PIN Management Client responds to PIN server to indicate that configuration of PEGC and PINE has happened successfully, with information such as\n-\tThe Terminating PEGC ID and\n-\tThe Terminating PEGC reachability information, such as IP address, port number, URL etc.\n-\tThe Terminating Destination PINE reachability information, such as IP address, port number, URL etc.\n8.\tPIN Server informs Application Server to switch the application session to a new destination IP address. PIN Server provides information such as:\n-\tApplication Session ID: identifies the application session to be switched to new end point\n-\tTerm IP Address: IP address of the PEGC where the application session will be terminated.\n9.\tPIN Gateway Client interacts with the AS, to get authorized by the AS for the service switch, by sending the information from Step 4. This authorization operation is in the scope of SA WG3. Once authorized, the TCP session up continues between the PEGC and the AS.\n10.\tThe PEGC may trigger a PDU Session Modification procedure in order to obtain QoS Rules for the new flow. PEGC can setup paths with one or more PINEs to split the main session flow into sub-flows. PEGC can also interact with PIN Server to maintain synchronization among the sub-flows.\n11.\tOnce the path from PINE Application Client to AS is available, Application Client can use application level mechanism to pull video stream, play and again pull.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "7.9.3\tSolution evaluation",
                            "text_content": "This solution addresses KI#3 about \"How to support application mechanism for service switching in a PIN between different PIN applications for achieving better service experience\".\nThe application-level mechanism described here allows the Application server, PEGC and PINEs to become aware of the new endpoints to execute service switch. Based on these information, PINE, PEGC, 5GS and Application Server executes session setup, modify procedures.\n",
                            "figures_meta_data": [],
                            "tables": []
                        }
                    ]
                },
                {
                    "title": "7.10\tSolution #9: PINAPP role change",
                    "description": "",
                    "summary": "",
                    "text_content": "",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": [
                        {
                            "title": "7.10.1\tArchitecture enhancements",
                            "text_content": "The architecture of PIN is referred to the solution 1 in clause 7.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "7.10.2\tSolution description",
                            "text_content": "This solution addresses Key Issue #6.\nA UE that is serving the role of a PEGC for a PIN leaves the coverage area of the PIN. The PEMC detects that the UE has left the coverage area of the PIN and makes a request to the PIN server to select a new PEGC.\nPre-conditions:\n1.\tThe PIN server has authorized the PEMC to create PINs.\n2.\tThe PEMC creates a local PIN with members: PEMC, UE serving as PEGC, PINE1, and PINE2.\n3.\tThe PEMC maintains a PIN profile with information of capabilities for each PIN member.\n4.\tPINE2 is a PIN member that also has gateway capability.\nThe figure depicts a PINAPP role change, showing the process of a user changing their role within the system. The figure includes various components such as the user interface, role selection, and the system's response. The user interface is shown in a simplified form, with the user selecting their desired role and the system providing a visual representation of the new role. The system's response is depicted as a series of steps, illustrating the process of changing the role.\nFigure 7.10.2.2-1: PINAPP Role Change\n1.\tThe UE leaves the local coverage area of the PIN.\n2.\tThe PEMC detects that the UE is no longer providing the PEGC service. For example, the PEMC may not be getting responses from the UE or either PINE1 or PINE2 has informed the PEMC that PIN routing via the UE is not available.\nNOTE:\tA corresponding event subscription/ notification is to be specified in the normative phase to enable this detection.\n3.\tThe PEMC sends a PIN role change request to the PIN server to select a new PEGC. The request includes the PIN ID, the PEMC ID, the UE ID or the PEGC ID for the UE, the ID of a PIN member that can serve as the new PEGC (e.g. PINE2), and a timestamp.\n4.\tThe PIN server considers which member of the PIN can serve as the new PEGC, including the PIN member the PEMC provided, and selects a PIN member to serve as the new PEGC. The PIN server sends a response to the PEMC with the status of the request, the ID of the new PEGC, and PIN traffic routing rules for the role change. The PIN server may also inform the PEMC to notify other PIN members of the PEGC role change.\n5.\tThe PIN server delivers management information to PINE2 to inform PINE2 to serve as the new PEGC. The management information includes PIN traffic routing rules that PINE2 would need to make routing decisions.\n6.\tThe PEMC notifies other members of the PIN that PINE2 will serve as the new PEGC. The PEMC includes the contact information of PINE2 and traffic routing rules that may be applicable to each member.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "7.10.3\tSolution evaluation",
                            "text_content": "This solution addresses KI #6 on PEMC/PEGC replacement in PIN. The PEGC of the PIN leaves the coverage area of the PIN and PEMC detects that PIN gateway functionality is not available. The PEMC makes a request to the PIN server to assign a new PEGC for the PIN. The PIN server assigns PINE 2 as the new PEGC and provides PINE 2 with management information to route traffic for the PIN. PEMC notifies the other members of the PIN that PINE 2 is the new PEGC.\nThe solution provides a procedure for role change of PEGC to ensure PIN routing is available for the PIN if the PEGC is not available.\n",
                            "figures_meta_data": [],
                            "tables": []
                        }
                    ]
                },
                {
                    "title": "7.11\tSolution #10: Service switch internal PIN",
                    "description": "",
                    "summary": "",
                    "text_content": "",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": [
                        {
                            "title": "7.11.1\tArchitecture assumptions",
                            "text_content": "The architecture assumptions of Solution #1 are also assumed in this solution.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "7.11.2\tSolution description",
                            "text_content": "\nThe figure depicts a 11.2.1 PIN Service S witch internal PIN, which is a key component of a PIN Service S (PS) system. The figure illustrates the internal PIN, which is a 11.2.1 PIN Service S, and the external PIN, which is a 11.2.1 PIN Service S. The figure also shows the internal and external PINs, as well as the 11.2.1 PIN Service S. The figure is important for understanding the structure and components of a PIN Service S system.\nFigure 7.11.2.1-1: PIN Service Switch internal PIN\nIn Figure 7.11.2.1-1, it describes the service switch scenario.\nThe PINE A has the application communication with application server. And when the PINE A decides to select other alternative PINE B to apply the traffic flow, the PINE A firstly should discover a PIN and join in. And then, in the PIN, there should exist the PINE that can be hosted with the same service type as PINE A, for example, the video flow, music flow or game flow.\nThe PINE A can send the request to PEMC to determine the PINE B to host the application traffic. After the determination, the PEMC sends the endpoint information to PINE A and the PINE A can offload the traffic either directly to PINE B or via PEGC.\nPre-conditions:\n1.\tThe UE Identifier or PIN client Identifier of PINE A or PINE B is available;\n2.\tThe PIN client in PINE A or PINE B has been authorized to communicate with the PEMC;\n3.\tThe PIN client in PINE B can provide the same PIN service as PINE A’s traffic flow.\nThe figure depicts a service switch procedure internal PIN, which is a crucial component in the network's control and management system. The diagram illustrates the steps involved in initiating a service switch, including the selection of a service switch, the initiation of the switch, and the completion of the switch. The figure also includes a visual representation of the internal PIN, which is a key element in the network's control and management system.\nFigure 7.11.2.2-1: Service switch procedure internal PIN\n0.\tThe PINE A has application layer communication with application server. And the PINE A decides to do the service switch to other PINEs. And the PINE A has already been in a PIN.\n1.\tThe PINE A trigger the PIN service discovery procedure towards PEMC. This request carries the list of services the PINE wants to consume.\n2.\tUpon receiving the request, the PEMC performs an authorization check to verify whether the PINE A has authorization to perform the operation.\nEditor's note: The authorization check needs SA3 for feedback.\n3.\tThe PEMC provides the list of PINE endpoint(s), application client endpoint(s) information that are offereing the requested services to PINE A. The PIN service can be represented by service type that PINE provides or the application client on PINE. If the request fails, the PEMC should give the failure response to indicates the cause of request failure.\n4.\tThe PINE A determines the PINE B for service switch as follow:\nOption A: The PINE A maintains the service towards AS and the service corresponds to a service type, for example, music or streaming media. The PINE A determines the potential PINE B for service switch according to whether this PINE has the capability to carry the service.\nOption B: The PINE A maintains the service towards AS by application client which represented by Application Client ID. The PINE A determines the potential PINE B for service switch according to whether this PINE has deployed the same application client as PINE A.\n5.\t(Use PINE B as example) The PINE A has two options to switch the service traffic to PINE B:\nOption A: Step 5a, the PINE A switches the traffic flow directly to PINE B via direct communication or via PEGC, just like the projection.\nOption B: Step 5b, the PINE A relocates the application context from application client in PINE A to application client in PINE B. After the context relocation, the application client in PINE A triggers the application relocation to PINE B. If the PIN client in PINE A or PIN client in PINE B can directly communicate with AS, the application client behaviour in step 5b is replaced by PINE A/B.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "7.11.3\tSolution evaluation",
                            "text_content": "This solution addresses KI#3 about \" How to support application mechanism for service switching in a PIN between different PIN applications for achieving better service experience \".\nThis solution relies on the PEMC to select the potential PINE for service switch according to the service type.\n",
                            "figures_meta_data": [],
                            "tables": []
                        }
                    ]
                },
                {
                    "title": "7.12\tSolution #11: Application Server Discovery in a PIN",
                    "description": "",
                    "summary": "",
                    "text_content": "",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": [
                        {
                            "title": "7.12.1\tArchitecture enhancements",
                            "text_content": "The architecture of PIN is referred to the solution 1 in clause 7. Additionally, this solution introduces a PIN-11 reference point.\nPIN – 11: The interactions related to enabling PINAPP, between an AS and PIN Management Client.\nAs shown in solution 1 in clause 7, the solution assumes a PIN-9 interface between the AS and PIN Server and a PIN-6 interface between the PIN Management Client and the PIN Server. The PIN-11 interface may be an extension so these interfaces (i.e. may re-use certain operations).\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "7.12.2\tSolution description",
                            "text_content": "This solution addresses aspects of Key Issue #4.\nOne or more PINAPP(s) (e.g. in a PEMC or in a PIN server) can maintain a registry to manage information about AS(s) that are available to the PIN. The AS(s) register their availability with the PINAPP.\nThe PINAPP(s) can update the PIN Server with information about the registry. The information about the registry can include the PIN ID, the PIN Location and an address (e.g. URL) of the PINAPP registry.\nThe PINAPPs provide information from the registry to other PINAPPs about available AS(s).\nApplication clients in a PINE can be provisioned with contact information for the PINAPP registry. Alternatively, Application clients can obtain contact information for the PINAPP registry by querying a PIN Server.\nApplication clients can query the PINAPP registry for information about an AS. If the query cannot be resolved, it can be forwarded to another PINAPP.\nThis procedure presents a high-level overview of Solution #11.\nPINAPP: A PIN function, which can maintain information about AS(s) available to a PIN. The AS information can include Location and address (e.g. URL).\nPIN Server: The PIN Server can maintain information about PINAPPs including PINAPPs, which maintain AS registry functionality.\nPIN Application Client: Application clients running in PINE.\nFigure 7.12.2.2.2.-1 illustrates an initial provisioning and AS discovery procedure based on request/response model.\nPre-conditions:\n-\tThe PINAPP with an AS registry has been pre-configured or has discovered the address (e.g. IP address, FQDN, URI) of the PIN Server.\n-\tThe PINAPP with an AS registry has been authorized to communicate with the PIN server.\n-\tThe PINAPP with an AS registry supports functionality to maintain a registry of AS(s). The PINAPP with an AS registry can be deployed in PEMC. When the AS Registry is in the PEMC, and AS interacts with the PIN Management Client via the PIN-11 reference point.\n-\tThe PIN Server also supports functionality to maintain a registry of AS(s).\n-\tThe PIN Server supports functionality to maintain information about PINAPPs which support an AS Registry (i.e. the PIN Server knows which PINAPPs support AS Registry Functionality).\n\nThe figure depicts a PIN AS discovery process in a 5G network, illustrating the steps involved in identifying and locating Point-to-Intermediate-Node (PIN) access points. The diagram shows the network topology, including the base station (gNB), user equipment (UE), and access points (APs). The figure highlights the use of radio frequency (RF) spectrum management techniques to ensure efficient use of the available resources.\nFigure 7.12.2.2.2-1: PIN AS Discovery\n1.\tA PIN has been successfully created. An AS registers with the PINAPP by sending information such as: AS name, InstanceID, and address (e.g. URL). The AS can be deployed anytime and can update its registration information in the PINAPP by sending a new Registration message. The PINAPP stores the AS information in its registry.\n2.\tThe PINAPP updates the PIN Server by sending the PIN Server information from its registry.\n3.\tIf the PIN Server’s registry has information from AS(s) that are not in the PINAPP’s registry, then the PIN Server can also update the PINAPP with information about AS(s) that are stored in the registry of the PIN Server. Furthermore, the PIN Server can configure the PINAPP with Usage Policies for the AS(s) that are in the PINAPP’s registry.  The Usage Policy can indicate what types of Application Clients may discover the AS, the identity of Application Client(s) that may discover the AS, and times of day when the AS is available.\n4.\tAn Application Client, which wants to discover an AS, requests information from the PIN Server about how to reach the registry functions.\n5.\tThe PIN Server sends the Application Client information about the registry function PINAPP (e.g. a URL).\n6.\tThe Application client sends a Query for the PINAPP in order to obtain contact information for an AS. The query includes the name of the AS that the application client wants to contact.\n7.\tIf the query can be resolved, PINAPP responds with an address of the AS (e.g. URL).\n8.\tIf the query cannot be resolved, PINAPP forwards the query to PIN Server.\n9.\tPIN server responds to Application Client with the details of the AS (e.g. URL).\nAfter the procedure above, Application Client in a PINE can start interacting with the AS.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "7.12.3\tSolution evaluation",
                            "text_content": "This solution addresses KI#4 about \" How to enable discovery of Application Server, connected to a PIN, by Application Clients running in the same PIN?\".\nA PINAPP, which maintains AS information, helps Application Clients discover AS(s). The PINAPP can be discovered by PIN Application clients. In certain situations, if an AS is not found in the PINAPP, information can be fetched from other PINAPP(s) (e.g. a PIN Server).\nThis solution allows flexibility in deploying AS(s) because new AS instances can store their information in registries so that they can be discovered.\n",
                            "figures_meta_data": [],
                            "tables": []
                        }
                    ]
                },
                {
                    "title": "7.13\tSolution #12: PEMC registration to PIN server",
                    "description": "",
                    "summary": "",
                    "text_content": "",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": [
                        {
                            "title": "7.13.1\tArchitecture enhancements",
                            "text_content": "The architecture of PIN is referred to the solution 1 in clause 7.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "7.13.2\tSolution description",
                            "text_content": "This solution addresses aspects of Key Issue #1.\nBefore the PEMC triggering the creation of PIN to network, the PEMC (for example, the UE) should receive the role of PEMC first from network. Only the PEMC can trigger creation of PIN.\nPEMC (PIN Element Management Control) is a PIN Element with Management Capability. A PIN Element with Management Capability is a PIN Element that provides a means for an authorised administrator to configure and manage a PIN. Only after the PINE becoming the PEMC, the PINE can trigger the PIN create request to network.\nAt the network side, a PIN server should be deployed. The PIN server is responsible for the authorization of the request of the role of PEMC from PINE. The PIN server has this verification procedure with 5GC, which the procedure is defined in SA2 specification.\nAnd the PINE/PEGC should also have the registration procedure to PIN server. For the PINE and PEGC registration, in order to reduce the signal interaction, it can be accomplished by the PEMC. The registration of PINE/PEGC includes the Device Metadata includes MAC address, vendor name, device description, PINE/PEGC Address.\nPre-conditions:\n1.\tThe PEMC has been pre-configured or has discovered the address (e.g. IP address, FQDN, URI) of the PIN server;\n2.\tThe UE Identifier or PIN client Identifier is available;\n3.\tThe PEMC has been authorized to communicate with the PIN server;\nFigure 7.13.2.2.2.-1 illustrates service provisioning procedure based on request/response model.\nThe figure depicts a PEMC (Point-to-Multipoint Communication) request to register on a PIN server, illustrating the communication process between the PEMC and the PIN server.\nFigure 7.13.2.2.2-1: PEMC requests to register on PIN server\n1.\tThe PEMC sends Registration Request (GPSI) to the PIN server. The service provisioning request includes the security credentials of the PEMC received during authorization procedure and may include the GPSI. The registration request carries the PIN ID of the PIN for which it is intending to register as PEMC and the PIN element may indicate whether it is to be assigned with primary or secondary PEMC role.\n2.\tThe PIN server interacts with the 5GS to check whether the UE identified by the GPSI has subscribed to be a PEMC. If subscribed, it checks the PIN profile whether the requesting PIN element can be assigned with primary or secondary role and authorize the PIN element accordingly. In case if the PIN has already been created, the requesting PIN element is assigned with the secondary PEMC role irrespective of the role requested by the PIN element.\nEditor's note: whether and how to 5GS check the UE identified by the GPSI has subscribed to be a PEMC is in SA2 scope.\n3.\tThe PIN server responds to the PEMC with allocated PEMC ID in successful response. If the registration procedure fails, the PIN server should give the failure response to indicates that indicates the cause of registration request failure.\nPre-conditions:\n1.\tThe PEMC has been pre-configured or has discovered the address (e.g. IP address, FQDN, URI) of the PIN server;\n2.\tThe UE Identifier or PIN client Identifier is available;\n3.\tThe PEMC has been authorized to communicate with the PIN server;\n4.\tThe PINE/PEGC has already received the IP address of PEMC.\nThe figure depicts a PINE/PEGC register on a PIN server, which is a crucial component in the PINE/PEGC protocol used in 5G networks. The register is used to store and manage the state of the PINE/PEGC protocol, ensuring efficient communication between the PINE/PEGC and the PIN server. The figure provides a clear visual representation of the register's structure and its role in the overall communication process.\nFigure 7.13.2.3-1: PINE/PEGC register on PIN server\n1.\tThe PINE/PEGC sends Registration Request (Device Metadata) to the PEMC. The Device Metadata includes the information that related to PINE/PEGC, including MAC address, vendor name, device description, PINE/PEGC Address.\n2.\tThe PEMC sends Registration Request (PEMC ID, Device Metadata) to the PIN server.\n3.\tThe PIN server responds to the PEMC with the allocated PINE/PEGC ID in successful response.\n4.\tThe PEMC sends Registration Response (PINE ID) to the PINE/PEGC.\n",
                            "figures_meta_data": [],
                            "tables": []
                        }
                    ]
                },
                {
                    "title": "7.14\tSolution #13: SEAL enabled PINAPP architecture and PIN management",
                    "description": "",
                    "summary": "",
                    "text_content": "",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": [
                        {
                            "title": "7.14.1\tArchitecture assumption",
                            "text_content": "The Figure 7.14.1-1 shows the SEAL based application architecture for enabling PINAPP.\nThe figure depicts a simplified architecture of a SEAL-based PINAPP (Point-to-Point Inverse Amplifier) system, which is a key component in 5G communication systems. The architecture is based on the SEAL (Single-Ended Amplifier) and PIN (Point-to-Point Inverter) principles, which are used to amplify and demodulate signals. The figure shows the various components and their connections, including the SEAL, PIN, and other necessary components. The architecture is designed to be compact and efficient, with a focus on reducing power consumption and improving signal quality.\nFigure 7.14.1-1: SEAL based PINAPP architecture\nThe following difference is applied compared with Sol#1.\n-\tThe UE also has a SEAL group management client, and the PIN client interact with the SEAL group management client via the GM-C to achieve PIN management;\n-\tThe PIN server interacts with the SEAL group management server via the GM-S reference point to accomplish PIN management;\n-\tThe SEAL group management client in the PEGC and PEMC interacts with the SEAL group management server via GM-UU;\n-\tThe SEAL group management client in the PIN element interacts with the SEAL group management client in the PEMC via the GM-X/GM-Y which is over the non-3GPP RAT.\n-\tThe PIN is the VAL group, and the PIN elements is the group member.\nEditor's Note: The relationship between GM-X/GM-Y and PC5 is FFS.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "7.14.2\tPIN creation",
                            "text_content": "The SEAL group management client at the PEMC, or the PIN server triggers the PIN creation (e.g., add PIN elements to the PIN or remove PIN elements from the PIN) as described in clause 10.3.3 of 3GPP TS 23.434. The SEAL group management client at the PEMC\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "7.14.3\tPIN update",
                            "text_content": "The SEAL group management client at the PEMC, or the PIN server triggers the PIN update as described in clause 10.3.5.2 of 3GPP TS 23.434.\nThe PIN elements initiates to join the PIN as described in the clause 10.3.8 of 3GPP TS 23.434.\nThe PIN elements initiates to leave the PIN as described in the clause 10.3.9 of 3GPP TS 23.434.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "7.14.4\tPIN deletion",
                            "text_content": "The SEAL group management client at the PEMC, or the PIN server triggers the PIN deletion as described in clause 10.3.13 of 3GPP TS 23.434.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "7.14.5\tPIN discovery and PIN element discovery",
                            "text_content": "The SEAL group management client at the PIN element discovers the PIN from the server as described in clause 10.3.8 (i.e., the group announcement in step 5) and clause 10.3.11 of 3GPP TS 23.434.\nThe SEAL group management client at the PIN element discovers the PIN element from the server as described in clause 10.3.4 of 3GPP TS 23.434.\n",
                            "figures_meta_data": [],
                            "tables": []
                        }
                    ]
                },
                {
                    "title": "7.15\tSolution #14: PIN communication via 5GS",
                    "description": "",
                    "summary": "",
                    "text_content": "",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": [
                        {
                            "title": "7.15.1\tArchitecture enhancements",
                            "text_content": "The architecture of PIN is referred to the solution 1 in clause 7.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "7.15.2\tSolution description",
                            "text_content": "This solution addresses aspects of Key Issue #2.\nFor a certain PINE, it has the subscription whether the PINE has the permission to use 5GS to communicate.\nAs a feature indicated in SA1 and KI#2, the PIN client within a PIN can communicate with other devices, services and applications within the same PIN. Furthermore, PIN client can connect the 5G Network via a PEGC. Also, as a feature, some of the PIN client in PIN has the permissions that they can communicate with other UE or application outside of PIN with the help of 5GC.\nIn this solution, the PINE establishes direct connection with PEGC first. The PINE connects to PEGC via the password or username which is used for PINE to initial connect.\nAnd then, the PINE sends the relay request to PEMC or PIN server, to relay the traffic to other PINE via PEGC by 5GS. If the request is related to internet services, the DN-specific ID may be included.\nThe PEMC requests to activate the relay request to PIN server and the PIN server can request the 5GS to establish the PDU session which is the procedure defined in SA2. The PIN server sends the parameters in relay request to 5GS to request to establish the PDU session.\nAnd according to the SA1 requirement of PIN, the TS 22.101 specifies that 5GS supports secure provisioning of credentials to a non-3GPP device via a gateway UE, whose User Identifier has been linked with the 3GPP subscription of the gateway UE, to enable the non-3GPP device to access the network and its services according to the linked 3GPP subscription when connected via non-3GPP access. So, the PIN server also supports to deliver the security credentials to PINE via application layer procedure with the support of 5GS network.\nAnother way to configure PIN of 5GS communication is, the PEMC commands a PEGC to configure the allowed/disallowed traffic flow and corresponding requested QoS if allowed. And the PEGC triggers the PDU session establishment or modification towards 5GS, which is the conclusion reflected in TR 23.700-88[4]. The information of PEMC commands PEGC is the same as the PIN server trigger QoS establishment procedure.\n\nThis procedure presents a high-level overview of Solution 1.\nFigure 7.15.2.2-1 illustrates PIN communication via 5GS procedure based on request/response model.\nPre-conditions:\n1.\tThe PINE is able to connected into PEGC via password and username;\n2.\tThe UE Identifier or PIN client Identifier is available for PINE;\n3.\tThe PIN client has been authorized to communicate with the PIN server and PEMC;\n4.\tThe PINE has the subscription that it can communicate via 5GS;\n5.\tThe PINE has already received the IP address of other PINE.\nNOTE:\tHow to PINE receive the other PINE IP address are related to the procedure in section 7.3.2.3.\n\nThe figure depicts a 15.2.2 -1 PIN communication scenario, illustrating the use of 5G signals for communication. The diagram shows the various components involved, including the 5G base station (gNB), user equipment (UE), and the 15.2.2 -1 PIN. The figure highlights the importance of proper communication protocols and network design to ensure reliable and efficient communication.\nFigure 7.15.2.2-1: PIN communication via 5GS\n0.\tThe PINE establishes direct connection with PEGC. The PINE connects to the PEGC by means of the password and username, as indicated in section 7.3.2.2 of solution 2.\n1.\tThe PINE sends PINE 5GS connection request (PIN ID, PINE ID, Packet filters, [DN-specific ID]) to the PEGC. If the request is related to internet services, the DN-specific ID may be included. The packet filters include the target PINEs IP address or FQDN that wants to communicate. The PINE should discover the other PINE’s IP address first.\n2.\tIf step 2 is performed, the PEGC sends the PINE 5GS connection request to the PEMC directly, or sends PEMC Notification (PEGC ID, PINE 5GS connection request) to PIN server and PIN server sends PEMC Event Notification (PEGC ID, PINE 5GS connection request) to the PEMC.\n3.\tThe PEMC sends PINE 5GS connection request (PIN ID, PEMC ID, PEGC ID, PINE ID, Packet filters) to the PIN server. The request will be sent to other PINE via 5GS.\n4.\tThe PIN server will check with the 5GS that whether this PINE has the subscription to communicate with other PINE via 5GS. And if the PINE has the subscription, the PIN server will interact with 5GS to create/update the QoS flow of PEGC for the PINE.\nEditor's note: How to the PIN server interacts with 5GS to establish PDU session for PINE is in SA2 scope.\n5.\t(Optional) If the IP address of the PEMC/PEGC is changed, the PEMC/PEGC sends Event Notification (PEMC/PEGC ID, old IP address, new IP address) to the PIN server.\n6.\tThe PIN server sends response to PEMC for successfully establish the PDU session.\n7.\tThe PEMC sends response to PINE.\nPre-conditions:\n1.\tThe PINE is able to connected into PEGC via password and username;\n2.\tThe UE Identifier or PIN client Identifier is available for PINE;\n3.\tThe PIN client has been authorized to communicate with the PIN server and PEMC;\n4.\tThe PINE has the subscription that it can communicate via 5GS;\nThe figure depicts a 5G network scenario with various components such as base stations (BSs), user equipment (UE), and scatterers. It illustrates the signal propagation in a 5G network, highlighting the importance of beamforming techniques to mitigate interference. The figure also shows the fiber-optic backbone architecture, which is crucial for ensuring network reliability and scalability.\nFigure 7.15.2.3-1: Credential Provisioning by 5GS\n0.\tThe PINE establishes direct connection with PEGC. The PINE connects to the PEGC by means of the password and username, as indicated in section 7.3.2.2 of solution 2.\n1.\tThe PINE sends Credential Provisioning Request (PIN ID, PINE ID, Duration) to the PEGC. The Duration indicates the lifetime of the path for the remote provisioning.\n2.\tThe PEGC sends the Credential Provisioning Request to the PEMC directly, or sends PEMC Notification (PEGC ID, Credential Provisioning Request) to PIN server and PIN server sends PEMC Event Notification (PEGC ID, Credential Provisioning Request) to the PEMC.\n3.\tThe PEMC sends Credential Provisioning Request (PIN ID, PEMC ID, PEGC ID, PINE ID, Duration) to the PIN server.\n4.\tThe PIN server interacts with 5GS and receives the credential from 5GS.\nEditor's note: How to the PIN server interacts with 5GS to receive credentials is in SA2 scope. And the definition and architecture of credentials for PINE is in SA3 scope.\n5.\tThe PIN server responds to the PEMC with the credentials, and the PEMC responses to PINE with credentials.\n7.15.2.4\tProcedures of PIN communication via 5GS triggered by PEGC\nThis procedure presents a high-level overview of Solution 1.\nFigure 7.15.2.4-1 illustrates PIN communication via 5GS procedure based on request/response model.\nPre-conditions:\n1.\tThe PINE is able to connected into PEGC via password and username;\n2.\tThe UE Identifier or PIN client Identifier is available for PINE;\n3.\tThe PIN client has been authorized to communicate with PEMC;\n4.\tThe PINE has the subscription that it can communicate via 5GS;\n5.\tThe PINE has already received the IP address of other PINE.\n6.\tThe communication between PEMC and PEGC is available.\nNOTE: How to PINE receive the other PINE IP address are related to the procedure in section 7.3.2.3.\nThe figure depicts a PIN communication configuration, which is a method of communication used in telecommunication networks. It shows the various components and their connections, including the transmitter, receiver, and the network infrastructure. The figure is labeled with the figure number and the section number, which helps to identify the specific configuration being discussed.\nFigure 7.15.2.4-1: PIN communication configuration\n1.\t[Optional] The PINE may send traffic to PEGC, triggered by the traffic, the PEGC sends PIN Communication Request (PIN ID, MAC address/IP address, Traffic descriptors) to the PEMC.\n2.\tThe PEMC sends Create/Update/Remove Communication Request (PIN ID, Packet filters, requested QoS) to the PEGC. The PEGC configures the local rule accordingly.\n3.\t[Optional] According to the Packet filters, the PEGC may initiate PDU Session Modification with the Packet filters and requested QoS towards 5G system in order to make 5GC configure the N4 rules for UPF(s).\nIf the PEGC has already got the information to trigger the PDU session, the interaction between PEMC and PEGC will be saved. If the PEGC doesn’t have the related information (PIN ID, Packet filters, requested QoS), the procedure needs the PEMC to send related information to PEGC.\nNOTE: How to the PEGC interacts with 5GS to initiate PDU Session Modification is in SA2 scope.\n",
                            "figures_meta_data": [],
                            "tables": []
                        }
                    ]
                },
                {
                    "title": "7.16\tSolution #15: Service continuity",
                    "description": "",
                    "summary": "",
                    "text_content": "",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": [
                        {
                            "title": "7.16.1\tArchitecture enhancements",
                            "text_content": "The architecture of PIN is referred to the solution 1 in clause 7.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "7.16.2\tSolution description",
                            "text_content": "This solution addresses aspects of Key Issue #5 and some of Key Issue #2.\nAs indicated in clause 6.38 of TS 22.261[2], the following requirements that describes the service continuity will be studied in this TR phase and reflect in this key issues 2:\n-\tThe 5G system shall be able to minimize service disruption when a PIN Element changes the communication path from one PIN Element (e.g. PIN Element with Gateway Capability) to another PIN Element or operator provided mobile access. The communication path between PIN Elements may include licensed and unlicensed spectrum as well as 3GPP and non-3GPP access.\nIn PIN architecture, there are four potential communication type for PINE/PEMC or other elements:\n-\tthe PINE has direct communication with other PINE via Bluetooth or Wi-Fi\n-\tthe PINE has communication with other PINE via PEGC (scenario 1)\n-\tthe PINE has communication with other PINE via PEGC and by means of the 5GS (scenario 2)\n-\tthe PINE has communication with other PINE via PEGC and by means of the PIN server (scenario 3)\nThe figure depicts a communication type for PINE, which stands for Point-to-In-Network-Edge. It illustrates the communication path from the source to the destination within the network, highlighting the use of point-to-point links and point-to-in-network-edge (PINE) connections.\nFigure 7.16.2.1-1: Communication type for PINE\nFor scenario 1, the PEMC communicates with the PINE via PEGC. And the PEMC and PEGC has the same private IP range and the PEGC can easily route the information to PINE under the same PEGC.\nFor scenario 2, the PEMC communicates with the PINE via two PEGCs. The PINE and PEMC are not under the same PEGC, and the PEMC should communicate with the PINE with the help of 5GS as indicated in the KI#2. The two PEGCs act as the 5G-LAN communication.\nFor scenario 3, as the default communication, the PEMC communicates with the PINE via PIN server. The PIN server supports both the user plane and control plane interactions.\nBut in order to coordinated with the SA1 requirements, it describes the changing of access of PINE. So, only two situation of continuity should be studied in TR:\nFirstly, the PEGC relocation. The PINE changes the gateway to communicate with other PINEs in PIN.\nSecondly, change the communication from via PEGC to via 5GS. The PINE when move out of PEGC coverage, the PINE can change the communicate via 5GS.\nThis procedure solves the situation, that PINE A has application layer communication with PINE B via PEGC 1. And for some reasons, the PEGC 1 should relocate to PEGC 2. And the PINE1 should continue to communicate with PINE 2 via PEGC 2.\nFigure 7.16.2.2.1-1 illustrates the service continuity to change the application layer communication to communication via different PEGC based on request/response model.\nPre-conditions:\n1.\tThe PEMC in a PIN has been pre-configured or has discovered the address (e.g. IP address, FQDN, URI) of the PIN server;\n2.\tThe PIN has already been created and a PIN ID is distributed by PIN server;\n3.\tThe PEMC has been authorized to communicate with the PIN server;\n4.\tThe PINE A and PINE B are both in the same PIN, and can communicate with PEGC 1;\n5.\tThe PEGC 2 is another PEGC that in this PIN;\n\nThe figure depicts a PEGC relocation in a 16x2 grid, with 2x1 cells, illustrating the process of moving PEGCs from one location to another. The figure is labeled with the figure name \"Figure 7.16.2.2.1 -1:  PEGC relocation in PIN.\"\nFigure 7.16.2.2.1-1: PEGC relocation in PIN\n1.\tThe PINE A has application layer communication with PINE B via PEGC 1 in the PIN.\n2.\tThe PEGC 1 detects that PEGC 1 needs relocation, for example, the PEGC 1 will power down or will breakdown.\n3a.\tThe PEGC 1 discovers the PEGC 2 internal PIN. The PEGC 2 should be the PINE in the same PIN and should have the capability of gateway.\n3b. If the PEGC 1 doesn’t discover another potential gateway in PIN, the PEGC 1 can send the request to PEMC to request to discover a new PEGC in PIN.\n4a.\tIf in step 3a, the PEGC 1 determines the PEGC 2 itself, the PEGC 1 indicates the address information about PEGC 2 to PEMC. This PEGC address information including gateway ID or IP address will be taken into consideration when PEMC determines the new gateway.\n5.\tThe PEMC determines the new gateway. For example, the PEGC 2 to replace the PEGC 1.\n6.\tThe PEMC configures the new access control information to PEGC 2, for example, the user name, account, SSID, BSSID. This information is used to control the PINE to access the network.\n7.\tThe PEMC also responses to PEGC 1 that the new PEGC 2 has been determined. And before the PEGC 1 offline, the PEGC 1 triggers the PIN profile relocation to new PEGC 2, because the profile and the route information that configured in PEGC 1 can still be used by the PEGC 2.\n8.\tThe PEMC also sends the updated access control information and authorization information to PINE A. The Auth Info may be included for authenticating/authorizing PINE connecting to PEGC 2.\n9.\tThe PINE A can connect into the PEGC 2 and communicate with PINE B.\nThis procedure solves the situation, that PINE A has application layer communication with PINE B via PEGC. But when the communication via PEGC is not viable, for example, the PINB moves out of the coverage of PEGC 1, only newly establish the 5GS communication to connect PINE B is the potential way.\nFigure 7.16.2.2.2-1 illustrates the service continuity to change application layer communication to communication via PEGC + 5GS based on request/response model.\nPre-conditions:\n1.\tThe PEMC in a PIN has been pre-configured or has discovered the address (e.g. IP address, FQDN, URI) of the PIN server;\n2.\tThe PIN has already been created and a PIN ID is distributed by PIN server;\n3.\tThe PEMC has been authorized to communicate with the PIN server;\n4.\tThe PINE A has the subscription that can communicate with PINE B via 5GS;\nThe figure depicts a network architecture with a focus on communication between different application layers. The figure includes a change in communication from application layer to communication via PEGC (Physical Ethernet Gateway Control) and 5G-GS (5G-Specific Gateway). This change is intended to facilitate the transition from traditional Ethernet-based communication to 5G-based communication, which is a key aspect of the 5G network. The figure also includes a PEGC, which is a physical Ethernet gateway that provides a connection between the physical network and the 5G network. This change is significant as it allows for the seamless transition from Ethernet-based communication to 5G-based communication, which is a key feature of the 5G network.\nFigure 7.16.2.2.2-1: Change application layer communication to communication via PEGC + 5GS\n1.\tThe PINE A has application layer communication with PINE B via PEGC 1.\n2.\tThe PEGC 1 decides to use the 5GS communication to substitute the direct routing via PEGC 1. For example, if the PINE B move out of the coverage of PEGC 1 and can not communicate with PINE 1 via PEGC 1 directly anymore.\n3.\tThe PEGC 1 requests to establish the QoS towards PINE 2, reusing the procedure defined in solution 14. The PEGC 1 sends PINE 5GS connection request (PIN ID, PINE ID, Packet filters, [DN-specific ID]) to the PEMC. The PEMC sends PINE 5GS connection request (PIN ID, PEMC ID, PEGC ID, PINE ID, Packet filters) to the PIN server.\n4.\tThe PIN server will check with the 5GS that whether this PINE has the subscription to communicate with other PINE via 5GS. And if the PINE has the subscription, the PIN server will interact with 5GS to create/update the QoS flow of PEGC for the PINE.\n5.\tAccording to the QoS flow establishment, the PIN server updates the route information and QoS information towards PINE 1 in PEGC 1 or the PIN server requests the PEMC to update.\n6.\tThe PINE A communicates with PINE 2 via 5GS.\n7.17\tSolution #16: PINE registration via the PEGC\n7.17.1\tArchitecture assumptions\nThe architecture of PIN is referred to the solution 1 in clause 7.\n7.17.2\tSolution description\n7.17.2.1\tGeneral\nThis solution addresses aspects of Key Issue #1.\nA PINE may need to perform the PIN registration towards the PIN server to get essential authorizations for the following PIN operations like PIN join.\nThe PINE is provisioned the PIN server address during the communication with PEMC.\n7.17.2.2\tProcedures of PINE registration via the PEGC\nPre-conditions:\n1.\tThe PINE has been pre-configured or has discovered the address (e.g. IP address, FQDN, URI) of the PIN server;\n2.\tThe PINE already establishes the connection with PEGC;\nFigure 7.17.2.2-1 illustrates the PIN registration via the PEGC procedure based on request/response model.\nThe figure depicts a PINE registration process to a PIN server via PEGC, illustrating the steps involved in the registration process.\nFigure 7.17.2.2-1: PINE registration to PIN server via PEGC\n1.\tThe PINE sends PIN registration request to the PIN server. The PIN registration request is routed to the PEGC. The PINE device identity, device credentials and other necessary formation which is also needed for PIN service authorization are included.\n2.\tThe PEGC identifies the received message is the PIN registration request which is allowed to be forwarded regardless the PINE is authorized or not.\n3.\tThe PEGC forwards the PIN registration request towards the PIN server.\n4.\tThe PIN server performs service authorization and verifies the PINE device with the information in the registration request. If authorized, the PIN server allocates the PIN client ID, authorization and security credentials for the PINE.\n5.\tThe PINE server returns the PIN registration response to the PEGC.\n6.\tThe PEGC forwards the PIN registration response to the PINE.\n7.17.2.3 \tProcedures of PINE registration during the PIN join via the PEGC\nPre-conditions:\n1.\tThe PINE has been pre-configured or has discovered the address (e.g. IP address, FQDN, URI) of the PIN server;\n2.\tThe PINE already establishes the connection with PEGC;\n3.\tThe PINE may get the PIN information from the PEMC, PEGC via PIN announcement after connecting to PEMC or PEGC.\nFigure 7.17.2.3.-1 illustrates the PINE registration during the PIN join via the PEGC procedure based on request/response model.\nThe figure depicts a PINE registration process to a PIN server via PEGC, illustrating the steps involved in the registration process.\nFigure 7.17.2.3-1: PINE registration to PIN server via PEGC\n1.\tThe PINE sends PIN join/discovery request to the PEGC. The PINE device identity is included.\n-\tFor the PIN join request, the PIN ID is included.\n-\tFor the PIN discovery request, the discovery criteria are included.\n2.\tThe PEGC identifies the received message is the PIN join/discovery request, and the PINE is not registered and authorized due to no PIN client ID and credentials in the message.\n3.\tThe PEGC returns the PIN join/discovery reject message to the PINE. The registration and authorization indication are also included to instruct the PINE to perform registration.\n4.\tThe PINE if not registered, initiates the PIN registration towards the PIN server via the PEGC as described in clause 7.17.2.2.\n5.\tAfter the registration, the PINE will use the PIN client ID and credentials to initiate the PIN join/discovery again.\n7.18\tSolution #17: Service Continuity in a PIN\n7.18.1\tArchitecture enhancements\nNone.\n7.18.2\tSolution description\n7.18.2.1\tGeneral\nThis solution addresses aspects of Key Issue #5. The solution focuses on how a PIN application on a UE can continue to receive services from an application server after it moved out of reach of PIN element like PEGC or another PINE due to mobility. PIN service continuity in this context is maintaining reachability due to UE mobility. This solution is based on the following principles.\n-\tThe PINE can subscribe for service continuity for one or more ongoing services involving application clients. Third party service provider and application developers, based on response to the subscription request, can make sure that the feature is available and supported for the application. The service continuity feature can be chosen for a specific application and ignored for others. E.g. service continuity can be enabled for gaming and not for TV application inside the house.\n-\tThe subscription can be authorized by PIN server and provide a service continuity policy to the PINE. PIN server is assumed to be the main trusted entity to authorize the subscription request coming from PINE.\n-\tThe PIN server informs the PEMC about allowed UE and applications which can be supported with service continuity feature.\n-\tThe PEMC configures PEGC about the PINE, which has subscribed for service continuity of a specific service. The PEGC can report back to PEMC when the UE is not reachable. The PEMC can decide at that time if it wants to trigger service continuity procedure.\n-\tThe PINE can also report about lost service to PEMC and about the available PEGCs in the PINE’s proximity. The PINE reports those PEGCs, which it can reach.\n-\tThe PEMC configures a PEGC for service continuity and informs the PIN Server about the new PEGC.\n-\tThe PIN Server can expose standard APIs, to expose service continuity information to the AS. The application layer can have mechanisms to deal with service disruptions independent of any communication path changes (e.g. TCP operations), but the exposed APIs can assist the application layer to implement its own mechanism.\nNOTE:\tThis solution is a feature that is provided by the PINAPP layer. An application can also support service continuity via procedures that are outside of 3GPP’s scope and, in such a scenario, would not support this service continuity procedure. Further, an application can decide to not support this service continuity procedure if the application e.g. has particular requirements for authentication.\n7.18.2.2\tProcedure\nThis section provides details of Solution #17.\n7.18.2.2.1\tFunctional entities\nPIN Client: A PINAPP function in UE, PINE, which subscribes for service continuity and informs when service is lost.\nPIN Management Client (PEMC Client): A PINAPP in PEMC, configures the PEGC and PINE for service continuity. Informs PIN server about updates related to service continuity.\nPIN Gateway Client (PEGC Client): A PINAPP in PEGC, obtains configuration from PEMC and executes service continuity procedure.\nPIN Server: Supports PIN Client, PIN Management Client by providing service continuity related information when requested by PIN Management Client. It can expose service continuity information to external entities through APIs.\n7.18.2.2.2\tProcedures of PIN Service Continuity while the PINE is connected to a PEGC\nFigure 7.18.2.2.2-1 illustrates a service continuity procedure for scenario 1, based on request/response model.\nThe figure depicts a PIN Service Continuity when the PINE is connected via PEGC, illustrating the various components and their connections.\nFigure 7.18.2.2.2-1: PIN Service Continuity when the PINE is connected via PEGC\nPre-conditions:\n-\tMore than one PEGC is serving the PIN.\n-\tPEMC connectivity is not lost by a PINE.\n-\tThe PIN Client in UE has been either pre-configured or has discovered the address (e.g. IP address, FQDN, URI) of the PEMC Client, PIN server.\n-\tThe PEMC Client supports functionality to execute the service continuity procedure.\n-\tThe PEGC Client supports functionality to execute the service continuity procedure.\n-\tThe PIN Server has capability to expose service continuity information to external entities such as identification of a service and any changes to the end points of the service.\n1.\tA PIN Client in a UE subscribes for service continuity with the PEMC and PIN server. The purpose of the subscription request is to inform the PEMC and PIN Server that the PINE would like to continue an ongoing service if it loses connectivity with PEGC. The subscription request includes application level IDs such as, PEID, one or more Service identifiers which need service continuity, Application session ID, Destination PIN ID, and an IPv4 Tuple that describes the session. The IPv4 tuple can include the IP Address of the UE, the IP Address of the Server that provides the service, the UE port numbers that are associated with the service, and the port numbers on the server that are associated with the service.\nThe PIN Server authorizes the subscription request, and provides PEMC Client with policy information about service continuity for the PINE.\nThe PEMC configures PEGC for service continuity procedure by providing PEID, Service ID.\nThe PEMC client informs the PINE if service continuity for the requested services is allowed or not.\n2.\tThe PINE moves and loses contact with the PEGC. The loss of connectivity with the PINE can trigger service continuity procedure in the PEGC based on PEID and Service ID.\n3.\tThe PEGC Client informs the PEMC Client about the service discontinuity of the PINE by sending an “Activate service continuity” message, which includes PEID, Service ID. As an alternative PINE can also inform PEMC to activate the service continuity procedure.\n4.\tThe PEMC client decides if it is required to initiate service continuity procedure, and of so informs the PIN Server to update about the service continuity procedure, initiated by PEGC or PINE. The PEMC client sends an “Update Service Continuity information” to the PIN server with information such as the PEID, Service ID, Service continuity status like Started, Executing, Completed. This allows the PIN server to immediately update service continuity information and share with AS, rather than waiting for PINE to discover a new PEGC and update service continuity status.\n5.\tThe PIN server updates information about the service continuity such as identification of the service, involved PINEs and service continuity status to an external AS.\n6.\tIt is assumed that the PINE has the information about other available PEGCs in the PIN (possibly provided by PEMC during start-up procedure). The PINE is able to find and connect to another PEGC in the PIN. It is also assumed that PEMC Client becomes aware of the PINE connecting to the new PEGC.\n7.\tThe PEMC client determines, based on PEID, Service continuity policy, that the new PEGC can be configured to handle service continuity for the PINE. The PEMC Client sends a “Configure new PEGC” message to configure the PEGC with:\na)\tSession ID;\nb)\tdestination PINE information, which is a list of PEID, IP address, Port number or URL; and\nc)\tApplication Server information, which will resume service with the PEGC. Information includes Application Server ID, Application Server port-number, so that the new PEGC can configure to receive information from the Application Server.\nPEMC also collects the PEGC IP address and PEGC port-number, in the response message.\n8.\tThe PIN Management Client sends an “Update Service continuity information” to the PIN server, to indicate that configuration of PEGC and PINE has happened successfully, and the service can be resumed, with information such as:\na)\tService ID: Service to be resumed;\nb)\tApplication Server ID: Identifies the Application Server, which was providing service;\nc)\tTerminating PEGC ID;\nd)\tTerminating PEGC reachability information, such as IP address, port number, URL etc.; and\ne)Terminating Destination PINE reachability information, such as IP address, port number, URL etc.\n9.\tPIN Gateway Client informs PIN Server that it is ready to resume the service with identification information from step 7. PIN Server updates this information and makes available for external entities.\n10.\tThe IP address of PINE and PEGC can change or at application-level IP preserving technique can be applied. PIN Server updates all information for service continuity, which can be used to resume the service to a new destination IP address. PIN Server updates an external AS with the new service continuity information such as:\na)\tApplication Session ID: identifies the application session to be switched to new endpoint; and\nb)\tTerminating IP Address:\n-\tIP address of PINE, port-number where the service will be terminated; and\n-\tIP address of the PEGC, which will forward the service to PINE.\n7.18.2.2.3\tProcedures of PIN Service Continuity while the PINEs are connected directly\nFigure 7.18.2.2.3-1 illustrates a service continuity procedure for scenario 2, based on request/response model.\nThis procedure involves finding a new PEGC for a PINE’s indirect communication by the PEMC. Selection of the new PEGC is dependent upon having connectivity between the PEMC and the PINEs (e.g. PINE1 and PINE2) involved. When the direct connection between PINEs is lost, the PEMC cannot determine correctly a PEGC which has connections to both PINEs. The PEMC requests that the PINEs to PEGCs which it can connect to. Then PEMC can select a PEGC, which has connectivity to both PINEs. These steps differentiate the service continuity procedure from PEGC reselection procedure.\nThe figure depicts a network with multiple points of interconnect (POIs) connected directly to a central point of interconnect (CPI). The network is designed to ensure that the POIs remain connected even if a single point of interconnect (PIN) fails. This is achieved through the use of a PIN Service Continuity (PSC) mechanism, which allows the network to maintain connectivity even when a PIN is disconnected. The figure also illustrates the use of redundancy paths to ensure that the network remains reliable and resilient.\nFigure 7.18.2.2.3-1: PIN Service Continuity when PINEs are connected directly\nPre-conditions:\n-\tOne or more PEGC is serving the PIN.\n-\tPEMC connectivity is not lost by a PINE.\n-\tThe PIN Client in UE has been pre-configured or has discovered the address (e.g. IP address, FQDN, URI) of the PEMC Client.\n-\tPIN client is capable of triggering PEGC discovery procedure by PINE and provide report about the discovered PEGCs.\n-\tThe PEMC Client supports functionality to execute the service continuity procedure.\n-\tThe PEGC Client supports functionality to execute the service continuity procedure.\n-\tThe PIN Server has capability to communicate with Application Server to identify a direct service and provide policy and authorization information.\n1.\tA PIN Client in a UE, subscribes for service continuity with PEMC or PIN server. The purpose of the subscription request is to inform that PINE would like to continue an ongoing service with another PINE, connected directly. The subscription request includes PEID, one or more Service identifiers which need service continuity, Destination PIN ID, and an IPv4 Tuple that describes the session. The IPv4 tuple can include the IP Address of the first UE, the IP Address of the second UE and the UE port numbers that are associated with the service.\na)\tThe PIN Server authorizes the subscription request and provides PEMC Client with policy information about service continuity for the PINEs.\nb)\tPEMC client informs the PINE if service continuity for the requested services is allowed or not and policy information related to service continuity.\n2.\tThe PINE moves and loses contact with other PINE. The loss of connectivity results in service discontinuity between the PINEs. PIN Client informs PEMC Client about the service discontinuity by sending an “Inform SC lost” message, which includes PEIDs, Service ID.\n3.\tTriggering PEGC discovery by PINE, allows PEMC to be sure that the PINE can connect to the selected PEGC. If PEMC selects a PEGC using its own knowledge, there is a possibility that the PINE cannot connect to it. All the involved PINEs start PEGC discovery and reports back to PEMC, a list of discovered PEGCs with the OK message.\n4.\tPEMC client goes through one or more lists sent by one or more PINEs and selects one or more optimal PEGCs for service continuity. The PEMC Client sends a “Configure new PEGC” message to PEGC Client to configure PEGC with the following information, so that PEGC can setup forwarding path between the two PINEs.\na)\tService ID: The service that needs to be handled by PEGC.\nb)\tDestination PINE information, which is a list of PEID, IP address, Port number or URL.\n5.\tPEMC client configures PINE with the new PEGC information such as IP address, port-number, URL, and triggers connection setup.\n6.\tOnce the connection between PINE and PEGC is successful, the service resumes.\n7.18.3\tSolution evaluation\nThe solution addresses the problem when PIN application on a UE is consuming service from an application server and due to UE mobility, how the PIN application on the UE can continue to receive services from the application server. Due to mobility the UE can go out of reach of the PEGC which was delivering service.\nThe solution describes how the service continuity procedure is initiated. Serving PEGC detects that the UE is out of reach and informs PEMC client. PEMC client updates PIN server about the Service Continuity procedure status.\nTo continue the service, UE can connect to a new PEGC, and inform PEMC client. To complete service continuity, PEMC configures the new PEGC to support service continuity and updates PIN server about the status of the procedure and new end point information. Once configuration is complete, service resumes towards the UE through the new PEGC.\nThe detailed role of PEGC involvement for service continuity procedures requires further evaluation considering different PINE status and application scenarios.\n\n",
                            "figures_meta_data": [],
                            "tables": []
                        }
                    ]
                }
            ]
        },
        {
            "title": "8\tDeployment scenarios",
            "description": "",
            "summary": "",
            "tables": [],
            "figures_meta_data": [],
            "subsections": [
                {
                    "title": "8.1\tGeneral",
                    "description": "",
                    "summary": "",
                    "text_content": "This clause provides a general description of the deployment scenarios.\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "8.x\tDeployment scenario #x: <Title>",
                    "description": "",
                    "summary": "",
                    "text_content": "Provide an illustrative description of the deployment scenario.\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                }
            ]
        },
        {
            "title": "9\tOverall evaluation",
            "description": "This clause provides a summary of architecture enhancements and solution evaluations.\n",
            "summary": "",
            "tables": [],
            "figures_meta_data": [],
            "subsections": [
                {
                    "title": "9.1\tArchitecture enhancements",
                    "description": "",
                    "summary": "",
                    "text_content": "",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "9.2\tKey issue evaluations",
                    "description": "",
                    "summary": "",
                    "text_content": "",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": [
                        {
                            "title": "9.2.1\tGeneral",
                            "text_content": "All the key issues, solutions and architecture enhancements specified in this technical report are listed in Table 9.2.1-1.\nTable 9.2.1-1 provides a mapping of the key issues to the related solutions.\nTable 9.2.1-1 Key issue and solutions\n\nFor KI#1 and KI#6, they describe the management (control plane interaction) of PIN.\nPhase 1: Prepare phase, before PIN create.\nBefore the PIN create, two procedures should be done.\nFirstly, as solution 12 describes, the PEMC, PEGC, PINE should register into the PIN server first. This procedure has two purpose. The fist is some of the PINE can receive the role of PEMC from PIN server. The second purpose is the device metadata of PINE, for example, the MAC address, GPSI, PIN client ID and etc can be obtained by PIN server.\nSecondly, as solution 7 describes, the PIN server discovery. Some of the PIN management procedures needs the PIN server to help. So, the PINE should receive the PIN server endpoint address first and then trigger the phase 2 procedure.\nPhase 2: PIN management procedure.\nIn phase 2, it is the real PIN management procedure. And during the PIN management procedure, it can be divided as the following parts:\n1.\tPIN lifecycle: PIN create/delete.\n2.\tPIN management procedure internal PIN (PIN modification): Including the PEMC/PEGC changes and PIN Profile recover.\n3.\tMember management: Including add PINE into a PIN or delete a PINE from PIN.\n4.\tPIN configuration: PIN Profile.\nFor the PIN lifecycle, it includes the PIN create/modification/delete. The PIN create (solution 2) can only be triggered by PEMC, and approved by PIN server. For the PIN delete (solution 10), the PEMC can trigger the delete either internally or with the help of PIN server’s authorization that a PIN is not needed. Also, the PIN server can trigger the PIN release for example, the life cycle of PIN comes to the end.\nFor the PIN management procedure internal PIN (PIN modification), it includes the role changes of PEMC/PEGC. For the PEMC changes, it includes the PEMC changes itself (Solution 2), PIN server triggers PEMC changing (Solution 2), PEMC failure triggers the relocation (Solution 9). For PEGC relocation, it includes (Solution 2) the PEGC relocation itself, PEMC triggers the PEGC relocation, PIN server triggers the PEGC relocation. During the PEMC/PEGC relocation procedure, the PIN profile also need to recover. (Solution 2) A PIN profile recover procedure that recover the profile from PIN server is defined.\nFor the member management, it includes the add PINE into a PIN or delete a PINE from PIN. For adding the PINE into a PIN, only the PINE takes the initiative to join the PIN is defined. (Solution 5) The PINE discovers the PIN from PEMC/PIN server first, and the PINE joins the PIN (Solution 3). For removing a PINE from PIN, one possible way is (Solution 3) the PINE leaves a PIN and this PINE is removed. Another possible way is (Solution 3) the PEMC/PIN server removes the PINE in a PIN.\nFor the PIN configuration, it is related to the definition of PIN profile. (Solution 6) PIN profile and dynamic PIN Profile are defined to describe the related information about PINE, PEMC and PEGC. For example, the ID, endpoint address and etc. This information is important for a PIN, and can be seen as the control plane management information for the PIN.\nPhase 3: Enhancement function of PIN\nAfter the PIN management procedure, some of the enhancement functions are defined in the PIN, including:\n1.\tPINE communication via 5GS: the most important and fundamental features that PIN provide\n2.\tService Switch: offload the application traffic to internal PIN or changes the traffic termination\n3.\tApplication Server Discovery in a PIN: enhance the PIN to support application server procedure\n4.\tPIN Continuity: A variety of PIN device interaction and changes the communication path, for example, via Gateway or via 5GS.\nFor PINE communication via 5GS, (solution 14) PIN server triggers the QoS establishment or the PEGC triggers the PDU session establishment/modification (to coordinate with SA2).\nFor Service Switch, two possible solutions are defined: (Solution 8) PIN server assisted service switch and (Solution 10) Service switch internal PIN.\nFor Application Server Discovery in a PIN, (Solution 11) one or more PINAPP(s) (e.g. in a PEMC or in a PIN server) can maintain a registry to manage information about AS(s) that are available to the PIN. The AS(s) register their availability with the PINAPP. And the AS can be discovered at PIN server.\nEditor's note: PIN Continuity parts need to update later.\nPhase 4: Architectures of PIN\n(Solution 1) PIN enabler architecture needs a new design of PIN enabler layer that both supports AC and the 3GPP communication layer.\n(Solution 13) Another SEAL enhancement architecture is the UE also has a SEAL group management client, and the PIN client interact with the SEAL group management client via the GM-C to achieve PIN management.\n",
                            "figures_meta_data": [],
                            "tables": [
                                {
                                    "description": "Table 9.2.1-1 Key issue and solutions",
                                    "table number": 7,
                                    "summary": "",
                                    "name": ""
                                }
                            ]
                        },
                        {
                            "title": "9.2.2\tEvaluation of key issue #1: PIN Management",
                            "text_content": "For PIN create that addressed in KI#1, solution 2 gives the solution of the PIN create procedure with the following principle:\n-\tThe PIN creation can only be triggered by the PEMC. The PINE receives the role of PEMC during the registration procedure towards PIN server as indicated in solution 12. And the PEMC receives the PIN server endpoint address before triggering the creation.\n-\tThe PEMC sends the PIN create request to PIN server with the GPSI, PIN client ID, UE location, security credential and PIN profile. The PIN profile includes some of the information that PEMC can request defined in solution 6, for example, the description of PIN, duration of PIN and etc.\n-\tThe PIN server sends a successful response to PEMC, which includes a newly assigned PIN ID to indicate the PIN. Also, the PIN lifetime or duration can be indicated to PEMC. If the PIN creation request fails, the PIN server should give the failure response to indicates that indicates the cause of PIN creation request failure.\n-\tAfter the PIN create successfully, the PIN server or PEMC can allocate the access control information to PEGC if the gateway is selected for the PIN and delivers the access control information to PINEs. The access control information includes: user name, account, SSID, BSSID and etc. All the information is used by PINE in PIN to access the PEGC or benefited by 5GS communication.\nFor PIN delete that addressed in KI#1, solution 4 gives the solution of the PIN delete procedure with the following principle:\n-\tThe PIN delete can be triggered either by PEMC or PIN server. All these two situations are valuable.\n-\tThe PEMC decides to delete the PIN due to the PIN is not needed or the lifecycle of PIN comes to the end. The PEMC can delete the PIN locally or request PIN server to delete the PIN\n-\tThe PIN server can trigger the PIN delete procedure, for example, when the life cycle of PIN is end or the PIN server decides to stop the PIN service in this PIN and release the PIN resource.\n-\tFor PEMC triggers PIN delete and sends request to PIN server: the PEMC sends a PIN delete request to the PIN server to request to delete the PIN. The PIN delete request includes the security credentials of the PIN client received during PIN client authorization procedure and PIN ID. The PIN ID indicates this PIN will be deleted.\n-\tIf the PEMC detects that the lifecycle of PIN comes to the end, the PEMC can decide to delete the PIN locally. And the PEMC shall indicate the deletion of PIN to PIN server which includes the PIN ID.\n-\tFor PIN server deletes the PIN: An event occurs at the PIN server that satisfies trigger conditions for notifying a subscribed PEMC of a PIN. If the life cycle of a PIN is end or the PIN server decides to not provide any PIN resource in this PIN, the PIN server should trigger a PIN delete procedure to the PEMC.\nIf a PIN is deleted, the PIN resource will be released and the PIN service will be stopped. Some of the procedure related to the deleted PIN defined in solution 4 addresses the principle below:\n-\tAfter PIN delete, the PEMC sends the notification to PEGC and PINE that in this PIN to delete the PIN profile related to the deleted PIN, which indicated by PIN ID. This is a notification procedure.\n-\tThe access control information in PEGC that related to this PIN and PINE in this PIN should be deactivated.\n-\tAfter PIN delete, if PIN is deleted by PEMC locally, the PEMC sends a PIN status update notification to the PIN server to indicate the PIN has been deleted. In this notification, the PIN ID is included. The PIN server updates the PIN profile to remove the details of this PIN which represented by PIN ID.\n-\tAfter PIN delete, if the PIN is deleted by the PIN server, the PIN server sends the PIN status update notification to the PEMC to indicate the PIN has been deleted. In this notification, the PIN ID is included. The PEMC updates the PIN profile to remove the details of this PIN which represented by PIN ID and triggers other notification towards the PINE/PEGC in this PIN.\nSolution 7 addresses Key Issue 1 and describes the aspects of PIN server discovery. All of the PINE, including PEMC, PINE and PEGC should discover the PIN server first, and then have the interaction towards PIN server. The PIN server discovery procedure should be done before the PIN management.\n-\tSolution #7 addresses the procedure of PIN server discovery. The PIN server can be discovered by the following method as indicated in Solution #7:\n-\tpre-configured in the PIN elements or PIN clients;\n-\tconfigured by the user;\n-\tprovisioned by MNO through 5GC procedure; or\n-\tderived from HPLMN identifier for non-roaming scenario or from VPLMN identifier for roaming scenario.\nFor the provisioned by MNO through 5GC procedure, this has several drawbacks. Firstly, this has the impact to 5GC NAS procedure. Secondly, in order to deliver the PIN server endpoint address to the PIN enabler layer, the UE OS should have an enhancement. At last, if the PIN procedure are all happen in the application layer scope, that the 5GS is not aware of PIN, and this needs the 5GC impact that AF provides the PIN server endpoint address to 5GC. But whether SA2 support this is FFS. So, the PIN server endpoint address that provisioned by MNO through 5GC procedure is not appropriate to be included in the method of PIN server discovery.\nSolution 7 also addresses the method that due to PINE receives the PIN server endpoint address from the PEGC and PEMC.\nFor example, if PINE has application layer connection with PEGC, for example, via WiFi or Bluetooth pairing, so there are two ways for PINE discovering PIN server:\n-\tIf the PINE connects to PEGC with user name and password, the PINE sends PIN server discovery request to PEGC. The requests include the GPSI, PIN client ID if has, UE location.  PEGC can response with PIN server end point address directly.\n-\tIf the PINE has the open access to PEGC that with no user name or password. For this situation, the PINE can’t consume the communication service that provided by PEGC, but can have communication with the PEMC behind the PEGC. The PINE sends PIN server discovery request to PEGC and the PEGC routes the requests to PEMC. The request includes the GPSI, PIN client ID if has, UE location.  PEMC can response with PIN server end point address to PINE via PEGC.\nDue to for some of the PIN elements can have the application interaction towards the PEMC, for example, via WiFi or Bluetooth pairing, so the PEMC can provide the PIN server end point information to PIN elements. The PINE sends PIN server discovery request to PEMC. The requests include the GPSI, PIN client ID if has, UE location. The PEMC delivers the PIN server end point information to PIN elements or PIN client. The end point information of PIN server includes URI(s), FQDN(s), IP address(es)) of PIN server.\nFor PIN discovery of PINE that addressed in KI#1, solution 5 gives the solution of the PINE discovers the PIN with the following principle:\n-\tThe PINE can discover the available PIN from two methods:\n-\tThe PINE can send PIN discovery request to PEMC of a PIN.\n-\tThe PINE can send PIN discovery request to PIN server.\n-\tIf the PINE has already had an application layer connection with a PEMC which manages a PIN, the PINE sends the PIN discovery request to PEMC. The PIN discovery request includes the security credentials of the UE or PIN client and may include the UE identifier such as GPSI if available, PIN client ID, UE location, the service that PINE wants to consume and PIN client profile(s) information.\n-\tIf the PINE has already had the application layer connection towards PEGC, and the PINE has already received the PIN server endpoint address, the PINE sends the PIN discovery request to PIN server. The PIN discovery request includes the security credentials of the UE or PIN client and may include the UE identifier such as GPSI, PIN client ID, UE location, the service that PINE wants to consume and PIN client profile(s) information.\n-\tIn the PIN discovery request to both PEMC or PIN server, the PINE can have the filter information in the PIN discovery request for example, the interesting area, the interesting type of PIN and etc. The filter information can be used for providing certain PIN information.\nSolution 12 and solution #16 addresses Key Issue 1 and describes the aspects of PINE/PEMC/PEGC registration procedure that ahead of PIN creation.\n-\tSolution #12 addresses the procedure that happens before PIN create.\n-\tFor the PEMC, the PEMC sends Registration Request (GPSI) to the PIN server. After successful registration in PIN server, the PIN server allocates the PIN client ID to this PEMC and the PEMC receives the role of PEMC.\n-\tFor the PINE and PEGC, the PINE/PEGC registers itself into PEMC with the device metadata (MAC address, vendor name, device description, PINE/PEGC Address). And the PEMC substitutes the PINE/PEGC to register on PIN server. After successful registration in PIN server, the PIN server allocates the PIN client ID to PINE/PEGC.\n-\tSolution #16 addresses the procedure that happens before PINE joining any PIN.\n-\tThe PINE initiates the PIN registration towards the PIN server via the PEGC with the device information. And the PEGC is designed to identify the PIN registration message and forwards such message regardless of the PINE is authorized or not. The PINE gets the PIN clients ID, necessary authorization and security credentials from the PIN server via this PIN registration.\n-\tIf the PINE initiates the PIN join/discovery request without the registration and authorization, the PEGC rejects such PIN messages, and trigger the PINE to initiate the PIN registration towards the PIN server.\nSolution 6 addresses the aspects of Key Issue 1 related to what information needs to be maintained at the PIN server, PEMC, PEGC and PIN elements. Information maintained at these entities are classified into 2 types – PIN profile and dynamic profile information. Solution 6 captures the information that needs to be maintained at each of the PIN entities in detail.\nSolution 3 addresses Key Issue 1 and describes the aspects of PINE join into a PIN and remove the PINE from a certain PIN. Solution #3 addresses the procedure that happens after PINE accomplish PIN discovery, and the PINE has the application layer connection with PEMC\nFor PINE joins into a PIN:\n-\tThe PINE sends the request to PEMC to join the PIN. The request includes the security credentials of the PIN client, UE identifier such as GPSI, UE location, PIN ID and PIN client profile(s). After PEMC authorizes the request and accept the PINE to join the PIN, the PEMC notifies to PEGC/PIN server in PIN. The PEMC/PEGC/PIN server updates the PIN profile. The access control information in PEGC for this PINE is delivered by PEMC during the notification.\n-\tDuring PIN create procedure, the PEMC can request to create a PIN including the potential PIN elements to be added into a PIN.\n-\tThe PINE sends PIN join/discovery request to the PEGC. The PEGC identifies the received message is the PIN join/discovery request, and the if the PINE is not registered and authorized due to no PIN client ID and credentials in the message, the PINE registration procedure will be also included.\nFor removing PINE from a PIN, two potential ways:\n-\tThe PEMC removes a PINE from PIN, and notify the result to PEGC/PIN server. The PEMC/PEGC/PIN server updates the PIN profile. The access control information in PEGC for this PINE is disabled after receiving the notification from PEMC.\n-\tIf the PINE decides to leave the PIN, the PINE sends the request to PEMC to leave the PIN. The request includes the security credentials of the PIN client, UE identifier such as GPSI, UE location, PIN ID and PIN client profile(s). After PEMC authorizes the request and accept the PINE to leave the PIN, the PEMC notifies to PEGC/PIN server in PIN. The PEMC/PEGC/PIN server updates the PIN profile. The access control information in PEGC for this PINE is disabled after receiving the notification from PEMC.\nOptionally, the PIN server can also be involved in the procedure of PINE added/removed into/from PIN. The PIN server can decide the PINE added/removed into/from PIN or the PIN server can be notified by the result of PINE added/removed into/from PIN.\nSolution 14 addresses Key Issue 1 and describes the aspects of credentials provisioning procedure.\n-\tSolution #14 addresses the procedure below:\n-\tThe PINE sends Credential Provisioning Request (PIN ID, PINE ID, Duration) to the PEGC.\n-\tThe PEGC sends the Credential Provisioning Request to the PEMC directly, or sends PEMC Notification (PEGC ID, Credential Provisioning Request) to PIN server and PIN server sends PEMC Event Notification (PEGC ID, Credential Provisioning Request) to the PEMC.\n-\tThe PEMC/PEGC sends Credentials Provisioning Response to PINE.\nNOTE: Which entity that the PEMC/PEGC obtains the Credentials, for example, the PIN server, 5GS or other NFs, is in the scope of SA3.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "9.2.3\tEvaluation of key issue #2: PINAPP accesses 5G network by application mechanism",
                            "text_content": "Solution 14 addresses Key Issue 2 and describes how to enable the PIN with 5GS communication. For the PIN that support 5GS communication, the PIN can trigger to establish the PDU session or QoS for PINE.\n-\tSolution #14 addresses two procedures that enable the PIN with 5GS communication:\n-\tEstablish QoS for PINE with PIN server support.\n-\tPEGC triggers PDU session establishment/modification for PINE when no PIN server deployed.\nFor the PIN server requests 5GS to establish QoS for PINE, this reuses the procedure defined in SA2 that AF triggers the QoS establishment procedure. No impact to SA2 procedure. After receiving the destination IP address of other UEs or application clients, the PINE sends PINE 5GS connection request (PIN ID, PINE ID, Packet filters, [DN-specific ID]) to the PEMC, via PEGC. And the PEMC sends PINE 5GS connection request (PIN ID, PEMC ID, PEGC ID, PINE ID, Packet filters) to the PIN server. The PIN server should receive the Packet filters, DN-specific ID from PEMC that these parameters are used for AF to trigger the QoS. If the IP address of the PEMC/PEGC is changed, the PEMC/PEGC sends Event Notification (PEMC/PEGC ID, old IP address, new IP address) to the PIN server.\nAnother alternative procedure is PEGC triggering PDU session establishment/modification for PINE without PIN server. This procedure is applied to adapt to SA2 PIN. The PINE may send traffic to PEGC, triggered by the traffic, the PEGC sends PIN Communication Request (PIN ID, MAC address/IP address, Traffic descriptors) to the PEMC. The PEMC sends Create/Update/Remove Communication Request (PIN ID, Packet filters, requested QoS) to the PEGC. The PEGC configures the local rule accordingly. According to the Packet filters, the PEGC may initiate PDU Session Modification with the Packet filters and requested QoS towards 5G system in order to make 5GC configure the N4 rules for UPF(s).\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "9.2.4\tEvaluation of key issue #3: Service switch in PIN",
                            "text_content": "This clause provides an overall evaluation for Key Issue #3, \"Service switch in PIN\".\nSolution #8 and #10 address aspects of Key Issue #3.\nKey Issue #3 studies how to support an application mechanism for service switching in a PIN between different PIN applications.\na)\tTo execute a service switch, a PIN, which can handle the service must be discovered.\nSolution #8:\n-\tDescribes application-level discovery of available PIN, where a PIN Client in a UE sends a discovery request to a PIN Server.\n-\tDiscovery request includes Location information, Application requirements such as Display characteristics, Audio characteristics.\n-\tPIN Server based on Location and application service requirement can provide the PIN Client with information about, one or more available PIN IDs, details of PINAPP capabilities and corresponding PE IDs, such as Device ID, IP address and Port number for each PIN.\nSolution #10:\n-\tPINE is part of the PIN and initiates service discovery with PEMC.\n-\t\tPEMC provides the details of the PIN Service (e.g. service type) and the PINE end point and application end point information.\nb)\tAmong available PINs, the Application client can select a PIN and initiate service switch procedure.\nSolution #8:\n-\tPIN Application Client selects a PIN and requests that the PIN Server trigger a service switch procedure.\n-\tPIN Application Client sends information such as Application session ID, Destination PIN ID, and an IP 4 Tuple that describes the session.\n-\t\tPIN Server accepts the request and sends acknowledgement to PIN Client.\nSolution #10:\n-\tPIN Application client and the corresponding PINE is part of the PIN, selects the suitable PINE where the service can be switched.\n-\tSelection is based on the following principles: firstly, whether this potential PINE has deployed the same application client as PINE and, secondly, whether this potential PINE can maintain the same service type as PINE\nc)\tThe service switch procedure is handled differently in the two solutions.\nSolution #8:\n-\t PIN server can select the PIN Applications in PINE and instruct the PIN Management Client to execute service switch procedure.\n-\tInformation sent to PEMC Client includes Application Session ID, Destination PINE information, which includes PE ID, IP Address, Port number, URL.\n-\tPEMC configures PEGC and PINE and sends end point information to PIN server. A flag is used to indicate PEGC, if the session needs to be split among more than one PINEs.\nNOTE:\tThe target PINE and PEMC are assumed to have already performed an authentication and authorization procedure.\n-\tThus, the solution relies on the PEMC to configure the target PINE and direct interaction between the original PINE and target PINE can be avoided.\n-\tPIN server stores updated service switch related end point information and can make available to external AS through APIs, if it wants to use for its own service switch method.\nSolution #10:\n-\tService switch being handled via direct interaction between the PINEs.\n-\t\tSwitch traffic flow directly from one PINE to another via direct communication method or via the PEGC. The destination IP address is always the original PINE and the original PINE forwards the traffic to the new PINE.\n-\t\tApplication context is relocated along with application context to another PINE and the service resumes. After the context relocation, the application client in PINE triggers the application relocation to potential PINE. Note that this procedure changes the destination IP address\n-\tIn order to maintain the integrity of the application process, the application traffic from application server should be terminated at the PINE first. The PINE transfers the application traffic to the potential PINE directly or via the PEGC.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "9.2.5\tEvaluation of key issue #4: PIN Application Server Discovery",
                            "text_content": "This clause provides an overall evaluation for Key Issue #4, \"PIN Application Server Discovery\".\nSolution #11 is the only solution that addresses Key Issue #4.\n-\tSolution #11 maintains a registry of PIN AS in the PINAPP, which is used to discover PIN AS by Application clients.\n-\tThe registry function can be part of the PEMC Client and PIN Server.\n-\tThis registry function information can be provisioned or configured in the UE or PIN Client.\n-\tRegistry function information can be an address, endpoint, or service API information.\n-\tPIN Clients use the registry function information to query about PIN AS.\n-\tApplication clients in the PIN can register with the Registry function, through PIN client using the registry information.\n-\t\tThe PINAPP registry functions in a PIN can communicate and update information about PIN AS that are stored in the registry. Furthermore, the PIN Server can configure the PINAPP with Usage Policies\n-\t\tPINAPP registry function in PIN server can communicate with the registry function in other PIN servers, which belong to different PIN.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "9.2.6\tEvaluation of key issue #5: Service continuity",
                            "text_content": "Solution #17 and #15 address aspects of Key Issue #5.\nTo execute a service continuity, first it needs to be detected that the mobile PINE is out of reach of the serving PEGC or another PINE in case of direct communication. After detection, the service continuity procedure can be triggered.\n-\tSolution #17 describes application-level detection by the serving PEGC, which was delivering service, that the PINE is out of reach. The PEGC informs PEMC about the condition that the service to the PINE may be disrupted. In the case of direct communication, the PINE informs PEMC about the loss of direct communication.\n-\tSolution #15, addresses the situation where PINEs are interacting via PEGC and a PINE moves out of reach of the PEGC. The PEGC detects the PINEs are out of reach and initiates service continuity procedure. The PEGC discovers another PEGC or requests that PEMC discover another PEGC for the service.\nThe service continuity procedure is executed similarly in the two solutions\n- \tSolution #17 describes that the PEMC selects the new PEGC and configures the new PEGC to support service continuity by providing information about the PINE and Service details. The PEMC also updates PIN server about the status of the service continuity procedure including the PINE and PEGC information.\n-  \tSolution #15 describes that the PEMC discovers a PEGC and configures it for service continuity. The configuration step includes providing access control information and exchanging profile information among PEGC. The PEMC also configures PINE if required.\n-\tSolution #15 also covers the scenario where the PINE moves out of range of the PIN and the service will need to be provided via the 5GS. In this scenario, the PEGC notifies the PEMC and the PEMC notifies the PIN Server about the need for service continuity.  The PIN Server is then able to configure QoS for the flows that are associated with the service. The PIN Server will then provide the updated route information to the PEGC.\nThe solutions propose role assignments for PINE, PEGC, PEMC and PIN server for service continuity procedures considering certain impact to the application layer itself. These roles may require further modification or enhancement considering PINE status and application scenarios.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "9.2.7\tEvaluation of key issue #6: PEMC/PEGC replacement in PIN",
                            "text_content": "This clause provides an overall evaluation for Key Issue #6, \"PEMC/PEGC replacement in PIN\".\nVarious procedures documented as part of Solution #2 in the clause 7.3.2.3 addresses the aspects of Key Issue #6.\nKey Issue #6 studies the following open issues:\na)\tWhether and how the need for PEMC or PEGC role change is determined?\nb)\tHow another active PIN element take over the role or is assigned the role of PEMC or PEGC?\nc)\tWhether and how the existing active PIN elements is notified about the role change?\nd)\tWhether and how the required dynamic or context information of PIN is made available to the new element taking the role of PEMC or PEGC\n-\tProcedures documented as part of the clause 7.3.2.3 considers the PIN modification as means to assign the role of PEMC and PEGC to another PINE. The need of the role change could be because of the current PIN element assigned with the role of PEGC or PEMC is no more available or the duration associated with the role is expired.\n-\tRole change is achieved based on the following principles:\na)\tThe current PEMC or PEGC triggering the role change to another PINE by requesting PIN server – Clause 7.3.2.3.1 describes the procedure for PEMC role change which is triggered by the current PEMC requesting the PIN server to assign the PEMC role to another PINE. As part of the request PEMC may include the list of potential candidate(s). Clause 7.3.2.3.6 describes the procedure for PEGC role change which is triggered by the current PEGC to assign the PEGC role to another PINE. Solution 9 describes the procedure for PEGC role change which is triggered by the PEMC on detecting the unavailability of PEGC. On detecting the unavailability of PEGC, PEMC requests the PIN server to assign the PEGC role to another PIN element which has the gateway capability.\nb)\tRole change triggered by the PIN server – Clause 7.3.2.3.2 describes the PEGC role change procedure by the PIN server on detecting the unavailability of the PIN element which is currently the PEGC. Clause 7.3.2.3.3 describes the PEMC role change procedure by the PIN server on detecting the unavailability of the PIN element which is currently the PEMC.\nc)\tRole change triggered internally within the PIN without involving PIN server - Clause 7.3.2.3.4 describes the procedure of how the current PEMC requesting another PIN element to take the role of PEMC. Once the role assignment succeeds, the PIN server, PEGC and other PIN elements are notified of the role change. Clause 7.3.2.3.5 describes the procedure of how the PEMC requesting another PIN element to take the role of PEGC. In this case the decision of role change is determined and executed by the PEMC and PIN server and other PIN elements are notified of the role change. Clause 7.3.2.3.8 describes the procedure where multiple PEGCs serve two groups of PINEs in a PIN and upon the failure of one of the PEGCs, a backup PEGC assumes the role of the new PEGC.\nd)\tPEMC Role change triggered by authorized administrator residing outside the PIN – Clause 7.3.2.3.7 describes the procedure of how the authorized administrator on a UE requests the PIN server through the 5G network to modify the role of PEMC to another PIN element. The authorized administrator on a UE receives the notification from PEGC about the failure/unavailability of current PEMC.\ne)\tRole change notification to the PIN entities – In all the procedures related to the role change in the PIN, the corresponding PIN entities (PIN server, PEMC, PEGC and PIN elements) are notified about the role change and the PIN dynamic profile information maintained at these entities are updated accordingly.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "9.2.8\tEvaluation of PINAPP architecture",
                            "text_content": "The solutions 1 addresses the key issue related to PINAPP architecture, to support the PIN management and the PIN communication. Also, in the PINAPP architecture supports the service switch, application server discovery and service continuity.\n",
                            "figures_meta_data": [],
                            "tables": []
                        }
                    ]
                }
            ]
        },
        {
            "title": "10\tConclusions",
            "description": "This clause provides conclusions of the study.\n",
            "summary": "",
            "tables": [],
            "figures_meta_data": [],
            "subsections": [
                {
                    "title": "10.1\tConclusion of PIN management of KI#1",
                    "description": "",
                    "summary": "",
                    "text_content": "The following principle is considered normative for PIN create:\n-\tThe PIN creation can only be triggered by the PEMC. The PINE receives the role of PEMC first during the registration procedure towards PIN server.\n-\tThe PEMC sends the PIN create request to PIN server with the GPSI, PIN client ID, UE location, security credential and PIN profile. In order to save the procedure of several PEMCs to be involved into the certain PIN as individual PEMC, the PEMC can have the additional PEMC GPSIs/PIN client ID in the PIN create request, to indicate additional PEMCs that are allowed to manage the PIN. In order to save the procedure of several PINEs to be involved into the certain PIN, the PEMC can have the lists of PINEs GPSIs/PIN client ID in the PIN create request, to indicate additional PINEs that are allowed to join the PIN.\n-\tThe PIN server sends a successful response to PEMC, which includes a newly assigned PIN ID to indicate the PIN. Also, the PIN lifetime or duration can be indicated to PEMC. If the PIN creation request fails, the PIN server should give the failure response to indicates that indicates the cause of PIN creation request failure.\n-\tAfter the PIN create successfully, the PIN server or PEMC can allocate the access control information to PEGC if the gateway is selected for the PIN and delivers the access control information to PINEs. The access control information includes: user name, account, SSID, BSSID and etc. All the information is used by PINE in PIN to access the PEGC or benefited by 5GS communication.\nEditor's note: Whether Access control information is determined by 5GC or PIN server itself depends on SA2 feedback and needs further update.\nThe following principles are considered normative for PIN delete:\n-\tThe PIN delete procedure can be triggered either by PEMC or PIN server.\n-\tThe PEMC sends a PIN delete request to the PIN server to request to delete the PIN.\n-\tThe PEMC can decide to delete the PIN locally. After PIN deleted locally, the PEMC indicates the deletion of PIN to PIN server which includes the PIN ID.\n-\tThe PIN server deletes the PIN when events occur and satisfies trigger conditions for PIN delete. For example, the event includes the life cycle of a PIN is end or the PIN server decides to not provide any PIN resource in this PIN.\nThe PIN delete request includes the security credentials of the PIN client received during PIN client authorization procedure and PIN ID. The PIN ID indicates this PIN will be deleted.\nThe PEMC can delete the PIN locally based on some pre-configuration information on PEMC, for example, the according to the life time configured on PEMC.\nIf a PIN is deleted, the PIN resource will be released and the PIN service will be stopped. Some of the procedure related to the deleted PIN should be normative:\n-\tAfter PIN delete, the PEMC sends the notification to PEGC and PINE to delete the PIN profile related to the deleted PIN.\n-\tThe access control information in PEGC that related to this PIN and PINE in this PIN should be deactivated.\n-\tIf PIN is deleted by PEMC locally, the PEMC sends a PIN status update notification to the PIN server to indicate the PIN has been deleted. In this notification, the PIN ID is included. The PIN server updates the PIN profile to remove the details of this PIN which represented by PIN ID.\n-\tIf the PIN is deleted by the PIN server, the PIN server sends the PIN status update notification to the PEMC to indicate the PIN has been deleted. In this notification, the PIN ID is included. The PEMC updates the PIN profile to remove the details of this PIN which represented by PIN ID and triggers other notification towards the PINE/PEGC in this PIN.\nNOTE:\tThe interaction between PINE and PEMC may be directly interaction or interaction via PEGC.\nThe following principle is considered normative for PIN server discovery:\nThe general static configuration of PIN server in PIN can be consumed as the following methods:\n-\tpre-configured in the PIN elements or PIN clients;\n-\tconfigured by the user;\n-\tderived from HPLMN identifier for non-roaming scenario or from VPLMN identifier for roaming scenario.\nThe dynamic discovery of PIN server in PIN can be consumed as the following methods. If the PINE has the application layer connection to PEGC or PEMC:\n-\tIf the PINE connects to PEGC with user name and password, the PINE sends PIN server discovery request to PEGC. The PEGC can response with PIN server end point address directly.\n-\tIf the PINE has the open access to PEGC, the PINE sends PIN server discovery request to PEGC and the PEGC routes the requests to PEMC. The PEMC can response with PIN server end point address to PINE via PEGC. Authorization information and procedure is needed between PEMC and PINE.\n-\tIf the PINE has the application interaction towards the PEMC, the PINE sends PIN server discovery request to PEMC. The PEMC delivers the PIN server end point information to PIN elements or PIN client.\nIn the PIN server discovery request, the following parameters are included: GPSI, PIN client ID if has, UE location. And in the PIN server discovery response, the endpoint address information of PIN server is included, for example, the IP address, FQDN, or URI.\nNOTE:\tThe PEGC is responsible for response the PIN server address to PINE directly or route the PIN server request to PEMC. If the PEGC is associated with multiple PIN and PEMC, the PEGC route the PIN server request to multiple PEMC separately.\nThe following principle is considered normative for PIN discovery:\n-\tThe PINE can discover the available PIN from two methods:\n-\tThe PINE can send PIN discovery request to PEMC of a PIN.\n-\tThe PINE can send PIN discovery request to PIN server.\n-\tIf the PINE has already had an application layer connection with a PEMC which manages a PIN, the PINE sends the PIN discovery request to PEMC.\n-\tIf the PINE has already had the application layer connection towards PEGC, and the PINE has already received the PIN server endpoint address, the PINE sends the PIN discovery request to PIN server.\nThe PIN discovery request includes the security credentials of the UE or PIN client and may include the UE identifier such as GPSI if available, UE location, the service that PINE wants to consume and PIN client profile(s) information.\nIn the PIN discovery request to both PEMC or PIN server, the PINE can have the filter information in the PIN discovery request for example, the interesting area, the interesting type of PIN and etc. The filter information can be used for providing certain PIN information.\nThe following principle is considered normative for PINE/PEMC/PEGC registration:\n-\tFor the PEMC, the PEMC sends Registration Request (GPSI) to the PIN server. After successful registration in PIN server, the PIN server allocates the PIN client ID to this PEMC and the PEMC receives the role of PEMC.\n-\tFor the PINE and PEGC, the PEMC substitutes the PINE/PEGC to register on PIN server with the device metadata from PINE/PEGC (MAC address, vendor name, device description, PINE/PEGC Address). After successful registration in PIN server, the PIN server allocates the PIN client ID to PINE/PEGC.\n-\tThe PINE can also directly register to the PIN server via the PEGC, if the PEMC/PIN server has already provided the PIN server address to the PINE. And if the PINE is accessing the PEGC without any registration and authorization, the PEGC may reject the message from the PINE and request the PINE to perform the registration.\n\nFor managing the PIN, it is required to maintain the information related to the PIN and PIN elements. Information captured as part of Solution 6 can serve as basis for the normative work and further information if any required can be decided during the normative work.\nThe following principle is considered normative for adding/removing PINE into/from a PIN:\nFor PINE joins into a PIN:\n-\tThe PINE sends the request to PEMC to join the PIN. The request includes the security credentials of the PIN client, UE identifier such as GPSI, UE location, PIN ID and some of PIN client profile(s). After PEMC authorizes the request and accept the PINE to join the PIN, the PEMC notifies to PEGC/PIN server in PIN. The PEMC/PEGC/PIN server updates the PIN profile. The access control information in PEGC for this PINE is delivered by PEMC during the notification.\n-\tDuring PIN create procedure, the PEMC can request to create a PIN including the potential PIN elements to be added into a PIN.\n-\tThe PINE sends PIN join/discovery request to the PEGC. The PEGC identifies the received message is the PIN join/discovery request, and the if the PINE is not registered and authorized due to no PIN client ID and credentials in the message, the PINE registration procedure will be also included.\nFor removing PINE from a PIN, two potential ways:\n-\tThe PEMC removes a PINE from PIN, and notify the result to PEGC/PIN server. The PEMC/PEGC/PIN server updates the PIN profile. The access control information in PEGC for this PINE is disabled after receiving the notification from PEMC.\n-\tIf the PINE decides to leave the PIN, the PINE sends the request to PEMC to leave the PIN. The request includes the security credentials of the PIN client, UE identifier such as GPSI, UE location, PIN ID and PIN client profile(s). After PEMC authorizes the request and accept the PINE to leave the PIN, the PEMC notifies to PEGC/PIN server in PIN. The PEMC/PEGC/PIN server updates the PIN profile. The access control information in PEGC for this PINE is disabled after receiving the notification from PEMC.\nOptionally, the PIN server can also be involved in the procedure of PINE added/removed into/from PIN. The PIN server can decide the PINE added/removed into/from PIN or the PIN server can be notified by the result of PINE added/removed into/from PIN.\nThe following principle is considered normative for credential provisioning:\n-\tThe PINE sends Credential Provisioning Request (PIN ID, PINE ID, Duration) to the PEGC.\n-\tThe PEGC sends the Credential Provisioning Request to the PEMC directly, or sends PEMC Notification (PEGC ID, Credential Provisioning Request) to PIN server and PIN server sends PEMC Event Notification (PEGC ID, Credential Provisioning Request) to the PEMC.\n-\tThe PEMC/PEGC sends Credentials Provisioning Response (Credentials) to PINE.\n\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "10.2\tConclusion of KI#2",
                    "description": "",
                    "summary": "",
                    "text_content": "The following principle is considered normative for KI#2:\n-\tThere are two methods to enable the PIN with 5GS communication:\n-\tEstablish QoS for PINE with AF support.\n-\tPEGC triggers PDU session establishment/modification for PINE when no PIN server deployed.\n\nFor the AF related procedure, the AF trigger the QoS create/modification procedure with parameters of Packet filters, DN specific ID, to request the 5GS to arrange resource for PIN.\n\nFor PEGC related procedure, the PEGC sends PIN Communication Request to the PEMC. The PEMC sends Create/Update/Remove Communication Request (PIN ID, Packet filters, requested QoS) to the PEGC. The PEGC configures the local rule accordingly, or according to the Packet filters, the PEGC may initiate PDU Session Modification with the Packet filters and requested QoS towards 5G system in order to make 5GC configure the N4 rules for UPF(s).\nThe PIN Communication Request includes the following parameters: PIN ID, MAC address/IP address, Traffic descriptors. The Create/Update/Remove Communication Request includes PIN ID, Packet filters, requested QoS.\nDuring the QoS or PDU session establishment procedure, if the IP address of the PEMC/PEGC is changed, the PEMC/PEGC sends Event Notification (PEMC/PEGC ID, old IP address, new IP address) to the PIN server.\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "10.3\tConclusion of Service Switch of KI#3",
                    "description": "",
                    "summary": "",
                    "text_content": "There are two solutions that solution 8 and solution 10 for service switch should be normative with the following principle:\nThe Solution 10 is service switch accomplished internal PIN. The following principle is considered normative for Solution 10:\n-\tThe PINE joins into a PIN and discovers the candidate PINE internal PIN to do the service switch. The candidates PINE should deploy the same application client or can maintains the service towards AS and the service corresponds to the same service type.\n-\tAfter the traffic terminated at the PINE, the PINE offloads the traffic to candidate PINE directly or via PEGC if direct communication is not viable.\nThe Solution 8 is service switch with support from PIN server. The following principle is considered normative for Solution 8:\n-\tThe PINE discovers a PIN and decide a potential candidate PINE to be the target of service switch with the help of PIN server.\n-\tAnd the PIN server requests the PEMC to configure PEGC, PINE, as well as informs AS to trigger another new application layer traffic to candidate PINE/AS.\n-\tAnd after the new application layer is established, that some of the application client context relocation may needed between two clients.\n10.4\tConclusion of KI#4\nSolution 11 reflects the KI#4. The following principle is considered normative for KI#4:\n-\tThe application server registers into AS registry function (can be deployed in PEMC, PIN server) with the endpoint information. The AS registry function can store the information about AS for PINE to discover the appropriate AS.\n-\tThe PINE triggers the application server discovery request to the AS registry function in PEMC, which can be forwarded to the registry function in PIN server, and receives the endpoint address of AS\n-\tApplication clients in the PIN can register with the Registry function, through PIN client using the registry information, obtained by the PIN client from PIN server.\n10.5\tConclusion of KI#5: Service continuity\nIn order to support the service continuity scenarios of Key Issue #5, the principles of Solution #15 and Solution #17 will be followed where the PEMC detects that a service continuity procedure is needed, selects a new PEGC to handle the service, configures the PEGC to handle the service, and can notify the PIN Server about the service continuity procedure. The PEMC detects that a service continuity procedure is needed based on a notification from a PEGC or, in the case of a service that is using direct PINE-to-PINE communication, a notification from a PINE.\nThe principles of Solution #15 will be followed to cover the scenario where the PINE moves out of range of the PIN and the service will need to be provided via the 5GS. The PEGC notifies the PEMC and the PEMC notifies the PIN Server about the need for service continuity. The PIN Server is then able to configure QoS for the flows that are associated with the service. The PIN Server will then provide the updated route information to the PEGC.\nThe service continuity role assignments for PINE, PEGC, PEMC and PIN server can be further modified or enhanced in the normative work considering different PINE status and applications scenarios.\n10.6\tConclusion of KI#6\nThe Key Issue #6, \"PEMC/PEGC replacement in PIN\" studied the open issues related to the PIN modification which is about the re-assignment of PEMC and PEGC role to another PIN element. Various procedures documented as part of Solution #2 in the clause 7.3.2.3 addresses the aspects of Key Issue #6.\nFollowing methods are considered for the normative work related to PEMC role change:\n1. Current PEMC requesting the PIN server to assign the PEMC role to another PIN element (clause 7.3.2.3.1).\n2. PIN server assigning the PEMC role to another PIN element on detecting the unavailability of current PEMC (clause 7.3.2.3.3).\n3. Current PEMC requesting another PIN element to take the role of PEMC (clause 7.3.2.3.4).\n4. Authorized user from outside PIN requesting PIN server to assign to PEMC role another PIN element (clause 7.3.2.3.7)\nAll the above methods require the consent from the new PIN element to be assigned with the role of PEMC. All other PIN elements including PEGC are to be notified about the change in the PEMC role and the PIN dynamic profile information is updated accordingly.\nFollowing methods are considered for the normative work related to PEGC role change:\n1. PIN server assigning the PEGC role to another PIN element on detecting the unavailability of current PEGC (clause 7.3.2.3.2).\n2. PEMC assigning the PEGC role to another PIN element on detecting the unavailability of current PEGC (clause 7.3.2.3.5).\n3. Current PEGC requesting the PIN server to assign the role to another PIN element (clause 7.3.2.3.6, clause 7.3.2.3.8)\nAll the above methods require the consent from the new PIN element to be assigned with the role of PEGC. All other PIN elements including PEMC are to be notified about the change in the PEGC role and the PIN dynamic profile information is updated accordingly.\n10.7\tConclusion of PINAPP architecture\nIt is supposed to use Solution 1 as baseline for normative PINAPP architecture.\n\n\n",
                    "tables": [
                        {
                            "description": "",
                            "table number": 8,
                            "summary": "",
                            "name": ""
                        }
                    ],
                    "figures_meta_data": [],
                    "subsubsections": []
                }
            ]
        }
    ]
}