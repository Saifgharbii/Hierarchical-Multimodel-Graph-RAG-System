{
    "document_name": "36321-i00.docx",
    "content": [
        {
            "title": "Foreword",
            "description": "This Technical Specification has been produced by the 3rd Generation Partnership Project (3GPP).\nThe contents of the present document are subject to continuing work within the TSG and may change following formal TSG approval. Should the TSG modify the contents of the present document, it will be re-released by the TSG with an identifying change of release date and an increase in version number as follows:\nVersion x.y.z\nwhere:\nx\tthe first digit:\n1\tpresented to TSG for information;\n2\tpresented to TSG for approval;\n3\tor greater indicates TSG approved document under change control.\ny\tthe second digit is incremented for all changes of substance, i.e. technical enhancements, corrections, updates, etc.\nz\tthe third digit is incremented when editorial only changes have been incorporated in the document.\n",
            "summary": "",
            "tables": [],
            "figures_meta_data": [],
            "subsections": []
        },
        {
            "title": "1\tScope",
            "description": "The present document specifies the E-UTRA MAC protocol.\n",
            "summary": "",
            "tables": [],
            "figures_meta_data": [],
            "subsections": []
        },
        {
            "title": "2\tReferences",
            "description": "The following documents contain provisions which, through reference in this text, constitute provisions of the present document.\n-\tReferences are either specific (identified by date of publication, edition number, version number, etc.) or non-specific.\n-\tFor a specific reference, subsequent revisions do not apply.\n-\tFor a non-specific reference, the latest version applies. In the case of a reference to a 3GPP document (including a GSM document), a non-specific reference implicitly refers to the latest version of that document in the same Release as the present document.\n[1]\t3GPP TR 21.905: \"Vocabulary for 3GPP Specifications\".\n[2]\t3GPP TS 36.213: \"Evolved Universal Terrestrial Radio Access (E-UTRA); Physical Layer Procedures\".\n[3]\t3GPP TS 36.322: \"Evolved Universal Terrestrial Radio Access (E-UTRA); Radio Link Control (RLC) protocol specification\".\n[4]\t3GPP TS 36.323: \"Evolved Universal Terrestrial Radio Access (E-UTRA); Packet Data Convergence Protocol (PDCP) Specification\".\n[5]\t3GPP TS 36.212: \"Evolved Universal Terrestrial Radio Access (E-UTRA); Multiplexing and channel coding\".\n[6]\t3GPP TS 36.214: \"Evolved Universal Terrestrial Radio Access (E-UTRA); Physical layer; Measurements\".\n[7]\t3GPP TS 36.211: \"Evolved Universal Terrestrial Radio Access (E-UTRA); Physical Channels and Modulation\".\n[8]\t3GPP TS 36.331: \"Evolved Universal Terrestrial Radio Access (E-UTRA); Radio Resource Control (RRC); Protocol specification\".\n[9]\t3GPP TS 36.133: \"Evolved Universal Terrestrial Radio Access (E-UTRA); Requirements for support of radio resource management\".\n[10]\t3GPP TS 36.101: \"Evolved Universal Terrestrial Radio Access (E-UTRA); User Equipment (UE) radio transmission and reception\".\n[11]\t3GPP TS 36.216: \"Evolved Universal Terrestrial Radio Access (E-UTRA); Physical layer for relaying operation\".\n[12]\t3GPP TS 36.306: \"Evolved Universal Terrestrial Radio Access (E-UTRA); User Equipment (UE) radio access capabilities\".\n[13]\t3GPP TS 23.303: \"Proximity-based services (ProSe); Stage 2\".\n[14]\t3GPP TS 23.285: \"Architecture enhancements for V2X services\".\n[15]\t3GPP TS 24.386: \"User Equipment (UE) to V2X control function; protocol aspects; Stage 3\".\n[16]\t3GPP TS 26.114: \"IP Multimedia Subsystem (IMS); Multimedia telephony; Media handling and interaction\".\n[17]\t3GPP TS 38.323: \"NR; Packet Data Convergence Protocol (PDCP) specification\".\n[18]\t3GPP TS 38.213: \"NR; Physical Layer Procedures for control\".\n[19]\t3GPP TS 38.133: \"NR; Requirements for support of radio resource management\".\n[20]\t3GPP TS 36.300: \"Evolved Universal Terrestrial Radio Access (E-UTRA) and Evolved Universal Terrestrial Radio Access (E-UTRAN); Overall description; Stage 2\".\n[21]\t3GPP TS 38.101-3: \"NR; User Equipment (UE) radio transmission and reception; Part 3: Range 1 and Range 2 Interworking operation with other radios\".\n[22]\t3GPP TS 38.306: \"NR; User Equipment (UE) radio access capabilities\".\n[23]\t3GPP TS 23.287: \"Architecture enhancements for 5G System (5GS) to support Vehicle-to-Everything (V2X) services \".\n[24]\t3GPP TS 38.321: \"NR; Medium Access Control (MAC) protocol specification\".\n[25]\t3GPP TS 38.331: \"NR; Radio Resource Control (RRC); Protocol specification\".\n",
            "summary": "",
            "tables": [],
            "figures_meta_data": [],
            "subsections": []
        },
        {
            "title": "3\tDefinitions and abbreviations",
            "description": "",
            "summary": "",
            "tables": [],
            "figures_meta_data": [],
            "subsections": [
                {
                    "title": "3.1\tDefinitions",
                    "description": "",
                    "summary": "",
                    "text_content": "For the purposes of the present document, the terms and definitions given in TR 21.905 [1] and the following apply. A term defined in the present document takes precedence over the definition of the same term, if any, in TR 21.905 [1].\nActive Time: Time related to DRX operation, as defined in clause 5.7, during which the MAC entity monitors the PDCCH.\nmac-ContentionResolutionTimer: Specifies the number of consecutive subframe(s) during which the MAC entity shall monitor the PDCCH after Msg3 is transmitted.\nDRX Cycle: Specifies the periodic repetition of the On Duration followed by a possible period of inactivity (see figure 3.1-1 below).\nThe figure depicts a simplified representation of a DRX cycle, which is a key component in the design of a 5G network. The cycle illustrates the process of signal transmission and reception, with key elements such as the base station (gNB), user equipment (UE), and scatterers. The diagram highlights the importance of beamforming techniques to mitigate interference and ensure reliable communication.\nFigure 3.1-1: DRX Cycle\ndrx-InactivityTimer: Except for NB-IoT UEs, BL UEs or UEs in enhanced coverage, it specifies the number of consecutive PDCCH-subframe(s) after the subframe in which a PDCCH indicates an initial UL, DL or SL user data transmission for this MAC entity. For NB-IoT UEs, it specifies the number of consecutive PDCCH-subframe(s), after the subframe in which the HARQ RTT timer or UL HARQ RTT timer expires, or after PDCCH indicates a new UL or DL transmission for one TB when the UE is configured with multiple HARQ processes. For BL UEs or UEs in enhanced coverage, it specifies the number of consecutive PDCCH-subframe(s) following the subframe containing the last repetition of the PDCCH reception that indicates an initial UL or DL user data transmission for this MAC entity.\ndrx-RetransmissionTimer: Specifies the maximum number of consecutive PDCCH-subframe(s) until a DL retransmission is received.\ndrx-RetransmissionTimerShortTTI: Specifies the maximum number of consecutive TTI(s) until a DL retransmission is received for HARQ processes scheduled using short TTI.\ndrxShortCycleTimer: Specifies the number of consecutive subframe(s) the MAC entity shall follow the Short DRX cycle.\ndrxStartOffset: Specifies the subframe where the DRX Cycle starts.\ndrx-ULRetransmissionTimer: Specifies the maximum number of consecutive PDCCH-subframe(s) until a grant for UL retransmission or the HARQ feedback is received.\ndrx-ULRetransmissionTimeShortTTI: Specifies the maximum number of consecutive TTI(s) until a grant for UL retransmission is received for HARQ processes scheduled using short TTI.\nEarly Data Transmission: Allows one uplink data transmission optionally followed by one downlink data transmission during the random access procedure as specified in TS 36.300 [20]. The S1 connection is established or resumed upon reception of the uplink data and may be released or suspended along with the transmission of the downlink data. Early data transmission refers to both CP-EDT and UP-EDT.\nHARQ information: HARQ information for DL-SCH or for UL-SCH transmissions consists of New Data Indicator (NDI), Transport Block (TB) size. For DL-SCH transmissions and for asynchronous UL HARQ and for autonomous UL HARQ, the HARQ information also includes HARQ process ID, except for UEs in NB-IoT configured with a single HARQ process for which this information is not present. For UL-SCH transmission the HARQ information also includes Redundancy Version (RV). In case of spatial multiplexing on DL-SCH the HARQ information comprises a set of NDI and TB size for each transport block. HARQ information for SL-SCH and SL-DCH transmissions consists of TB size only.\nHARQ RTT Timer: This parameter specifies the minimum amount of subframe(s) before a DL assignment for HARQ retransmission is expected by the MAC entity.\nMsg3: Message transmitted on UL-SCH containing a C-RNTI MAC CE or a CCCH SDU optionally multiplexed with DTCH for the UP-EDT, submitted from upper layer and associated with the UE Contention Resolution Identity, as part of a random access procedure.\nNB-IoT: NB-IoT allows access to network services via E-UTRA with a channel bandwidth limited to 200 kHz.\nNB-IoT UE: A UE that uses NB-IoT.\nNR sidelink communication: AS functionality enabling at least V2X Communication as defined in TS 23.287 [23], between two or more nearby UEs, using NR technology but not traversing any network node.\nNon-terrestrial networks: An E-UTRAN consisting of eNBs, which provide non-terrestrial LTE access to UEs by means of an NTN payload embarked on a space-borne NTN vehicle and an NTN Gateway.\nonDurationTimer: Specifies the number of consecutive PDCCH-subframe(s) at the beginning of a DRX Cycle.\nPDCCH: Refers to the PDCCH (see TS 36.211 [7]), EPDCCH (in subframes when configured), MPDCCH (see TS 36.213 [2]), for an RN with R-PDCCH configured and not suspended, to the R-PDCCH, for NB-IoT to the NPDCCH or for short TTI to SPDCCH.\nPDCCH period (pp): Refers to the interval between the start of two consecutive PDCCH occasions and depends on the currently used PDCCH search space, as specified in TS 36.213 [2]. A PDCCH occasion is the start of a search space and is defined by subframe k0 as specified in clause 16.6 of TS 36.213 [2]. The calculation of number of PDCCH-subframes for the timer configured in units of a PDCCH period is done by multiplying the number of PDCCH periods with npdcch-NumRepetitions-RA when the UE uses the common search space or by npdcch-NumRepetitions when the UE uses the UE specific search space. When counting a timer whose length is calculated in PDCCH-subframes, the UE shall include PDCCH-subframes that will be dropped or not required to be monitored as specified in clause 16.6 of TS 36.213 [2]. The calculation of number of subframes for the timer configured in units of a PDCCH period is done by multiplying the number of PDCCH periods with duration between two consecutive PDCCH occasions.\nPDCCH-subframe: Refers to a subframe with PDCCH. This represents the union over PDCCH-subframes for all serving cells excluding cells configured with cross carrier scheduling for both uplink and downlink, as specified in TS 36.331 [8]; except if the UE is not capable of simultaneous reception and transmission in the aggregated cells where this instead represents the PDCCH-subframes of the SpCell.\n-\tFor FDD serving cells, all subframes represent PDCCH-subframes, unless specified otherwise in this clause.\n-\tFor TDD serving cells, all downlink subframes and subframes including DwPTS of the TDD UL/DL configuration indicated by tdd-Config, as specified in TS 36.331 [8] of the cell represent PDCCH-subframes, unless specified otherwise in this clause.\n-\tFor serving cells operating according to Frame structure Type 3, all subframes represent PDCCH-subframes.\n-\tFor RNs with an RN subframe configuration configured and not suspended, in its communication with the E-UTRAN, all downlink subframes configured for RN communication with the E-UTRAN represent PDCCH-subframes.\n-\tFor SC-PTM reception on an FDD cell, all subframes except MBSFN subframes represent PDCCH-subframes, unless specified otherwise in this clause.\n-\tFor SC-PTM reception on a TDD cell, all downlink subframes and subframes including DwPTS of the TDD UL/DL configuration indicated by tdd-Config, as specified in TS 36.331 [8] of the cell except MBSFN subframes represent PDCCH-subframes, unless specified otherwise in this clause.\n-\tFor BL UE or UE in enhanced coverage, all subframes in which the UE is required to monitor MPDCCH represent PDCCH-subframes among all valid subframes regardless of whether the subframe is dropped, see clause 9.1.5 of TS 36.213 [2].\n-\tFor NB-IoT UE, all subframes that are part of the NPDCCH search space represent PDCCH-subframes among all NB-IoT downlink subframes, including those which the UE is not required to monitor as specified in clause 16.6 of TS 36.213 [2].\nPDSCH: Refers to subframe-PDSCH/slot-PDSCH/subslot-PDSCH or for NB-IoT to NPDSCH.\nPRACH: Refers to PRACH or for NB-IoT to NPRACH.\nPRACH Resource Index: The index of a PRACH within a system frame, see TS 36.211 [7]\nPrimary Timing Advance Group: Timing Advance Group containing the SpCell.\nPUCCH SCell: An SCell configured with PUCCH/SPUCCH.\nPUSCH: Refers to subframe-PUSCH/slot-PUSCH/subslot-PUSCH or for NB-IoT to NPUSCH.\nra-PRACH-MaskIndex: Defines in which PRACHs within a system frame the MAC entity can transmit a Random Access Preamble (see clause 7.3).\nRA-RNTI: The Random Access RNTI is used on the PDCCH when Random Access Response messages are transmitted. It unambiguously identifies which time-frequency resource was utilized by the MAC entity to transmit the Random Access preamble.\nSC Period: Sidelink Control period, the time period consisting of transmission of SCI and its corresponding data.\nSCI: The Sidelink Control Information contains the sidelink scheduling information such as resource block assignment, modulation and coding scheme, Group Destination ID (for sidelink communication) and PPPP (for V2X sidelink communication), see TS 36.212 [5].\nSecondary Timing Advance Group: Timing Advance Group not containing the SpCell. A Secondary Timing Advance Group contains at least one Serving Cell with an UL configured.\nServing Cell: A Primary or a Secondary Cell, see TS 36.331 [8].\nShort Processing Time: For 1 ms TTI length, the operation with short processing time in UL data transmission and DL data reception.\nShort TTI: TTI length based on a slot or a subslot.\nSidelink: UE to UE interface for sidelink communication, sidelink discovery and V2X sidelink communication. The sidelink corresponds to the PC5 interface as defined in TS 23.303 [13] for sidelink communication and sidelink discovery, and as defined in TS 23.285 [14] for V2X sidelink communication.\nSidelink communication: AS functionality enabling ProSe Direct Communication as defined in TS 23.303 [13], between two or more nearby UEs, using E-UTRA technology but not traversing any network node.\nSidelink Discovery Gap for Reception: Time period during which the UE does not receive any channels in DL from any serving cell, except during random access procedure.\nSidelink Discovery Gap for Transmission: Time period during which the UE prioritizes transmission of sidelink discovery and associated procedures e.g. re-tuning and synchronisation over transmission of channels in UL, if they occur in the same subframe, except during random access procedure.\nSpecial Cell: For Dual Connectivity operation the term Special Cell refers to the PCell of the MCG or the PSCell of the SCG, otherwise the term Special Cell refers to the PCell.\nTiming Advance Group: A group of Serving Cells that is configured by RRC and that, for the cells with an UL configured, using the same timing reference cell and the same Timing Advance value.\nTransmission using PUR: Allows one uplink data transmission using preconfigured uplink resource from RRC_IDLE mode as specified in TS 36.300 [9]. Transmission using PUR refers to both CP transmission using PUR and UP transmission using PUR.\nUE-eNB RTT: For non-terrestrial networks, the sum of the UE's Timing Advance value (see TS 36.211 [7], clause 8.1) and k-Mac in units of subframe, not rounded or truncated toward an integer number of subframes.\nUL HARQ RTT Timer: This parameter specifies the minimum amount of subframe(s) before a UL HARQ retransmission grant is expected by the MAC entity.\nV2X sidelink communication: AS functionality enabling V2X Communication as defined in TS 23.285 [14], between nearby UEs, using E-UTRA technology but not traversing any network node.\nNOTE:\tA timer is running once it is started, until it is stopped or until it expires; otherwise it is not running. A timer can be started if it is not running or restarted if it is running. A Timer is always started or restarted from its initial value.\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "3.2\tAbbreviations",
                    "description": "",
                    "summary": "",
                    "text_content": "For the purposes of the present document, the abbreviations given in TR 21.905 [1] and the following apply. An abbreviation defined in the present document takes precedence over the definition of the same abbreviation, if any, in TR 21.905 [1].\nAS\tAccess Stratum\nAUL\tAutonomous Uplink\nBL\tBandwidth reduced Low complexity\nBR\tBandwidth Reduced\nBSR\tBuffer Status Report\nC-RNTI\tCell RNTI\nCBR\tChannel Busy Ratio\nCC-RNTI\tCommon Control RNTI\nCG\tCell Group\nCQI\tChannel Quality Indicator\nCRI\tCSI-RS Resource Indicator\nCSI\tChannel State Information\nDAPS\tDual Active Protocol Stack\nDCQR\tDownlink Channel Quality Report\nDRB\tData Radio Bearer\nEDT\tEarly Data Transmission\neIMTA\tEnhanced Interference Management and Traffic Adaptation\neIMTA-RNTI\tEnhanced Interference Management and Traffic Adaptation - RNTI\nE-UTRA\tEvolved UMTS Terrestrial Radio Access\nE-UTRAN\tEvolved UMTS Terrestrial Radio Access Network\nG-RNTI\tGroup RNTI\nH-SFN\tHyper SFN\nMAC\tMedium Access Control\nMCG\tMaster Cell Group\nM-RNTI\tMBMS RNTI\nMPDCCH\tMTC Physical Downlink Control Channel\nLCG\tLogical Channel Group\nNB-IoT\tNarrow Band Internet of Things\nNPDCCH\tNarrowband Physical Downlink Control Channel\nNPDSCH\tNarrowband Physical Downlink Shared channel\nNPRACH\tNarrowband Physical Random Access Control Channel\nNPUSCH\tNarrowband Physical Uplink Shared channel\nPCell\tPrimary Cell\nPSCell\tPrimary Secondary Cell\nPHR\tPower Headroom Report\nPMI\tPrecoding Matrix Index\nPPPP\tProSe Per-Packet Priority\nP-RNTI\tPaging RNTI\nProSe\tProximity-based Services\npTAG\tPrimary Timing Advance Group\nPTI\tPrecoding Type Indicator\nPUR\tPreconfigured Uplink Resource\nRA-RNTI\tRandom Access RNTI\nRAI\tRelease Assistance Indication\nRI\tRank Indicator\nRN\tRelay Node\nRNTI\tRadio Network Temporary Identifier\nSCell\tSecondary Cell\nSC-FDM\tSingle-Carrier Frequency Division Multiplexing\nSCG\tSecondary Cell Group\nSCI\tSidelink Control Information\nSC-N-RNTI\tSingle Cell Notification RNTI\nSC-PTM\tSingle Cell Point to Multipoint\nSC-RNTI\tSingle Cell RNTI\nSI-RNTI\tSystem Information RNTI\nSL\tSidelink\nSL-RNTI\tSidelink RNTI\nSL-V-RNTI\tSidelink V2X RNTI\nSR\tScheduling Request\nSRS\tSounding Reference Symbols\nSRS-TPC-RNTI\tSounding Reference Symbols-Transmit Power Control-RNTI\nSpCell\tSpecial Cell\nsTAG\tSecondary Timing Advance Group\nsTTI\tSlot or subslot TTI\nTAG\tTiming Advance Group\nTB\tTransport Block\nTPC-PUCCH-RNTI\tTransmit Power Control-Physical Uplink Control Channel-RNTI\nTPC-PUSCH-RNTI\tTransmit Power Control-Physical Uplink Shared Channel-RNTI\nV2X\tVehicle-to-Everything\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                }
            ]
        },
        {
            "title": "4\tGeneral",
            "description": "",
            "summary": "",
            "tables": [],
            "figures_meta_data": [],
            "subsections": [
                {
                    "title": "4.1\tIntroduction",
                    "description": "",
                    "summary": "",
                    "text_content": "The objective is to describe the MAC architecture and the MAC entity from a functional point of view. Functionality specified for the UE equally applies to the RN for functionality necessary for the RN. There is also functionality which is only applicable to the RN, in which case the specification denotes the RN instead of the UE. RN-specific behaviour is not applicable to the UE. For TDD operation, UE behaviour follows the TDD UL/DL configuration indicated by tdd-Config unless specified otherwise.\nThe introduction of short TTI allows for more than a single instance of a TTI to occur within a 1ms subframe and as such the use of the term \"for each TTI\" shall be read as meaning that the associated actions shall be executed for all TTIs also in the case of overlapping TTIs (e.g. a UE may read multiple instances of PDCCH in a downlink subframe).\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "4.2\tMAC architecture",
                    "description": "",
                    "summary": "",
                    "text_content": "The description in this clause is a model and does not specify or restrict implementations.\nRRC is in control of configuration of MAC.\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": [
                        {
                            "title": "4.2.1\tMAC Entities",
                            "text_content": "E-UTRA defines two MAC entities; one in the UE and one in the E-UTRAN. These MAC entities handle the following transport channels:\n-\tBroadcast Channel (BCH);\n-\tDownlink Shared Channel(s) (DL-SCH);\n-\tPaging Channel (PCH);\n-\tUplink Shared Channel(s) (UL-SCH);\n-\tRandom Access Channel(s) (RACH);\n-\tMulticast Channel(s) (MCH);\n-\tSidelink Broadcast Channel (SL-BCH);\n-\tSidelink Discovery Channel (SL-DCH);\n-\tSidelink Shared Channel (SL-SCH).\nThe exact functions performed by the MAC entities are different in the UE from those performed in the E-UTRAN.\nThe RN includes both types of MAC entities; one type for communication with UEs and one type for communication with the E-UTRAN.\nIn Dual Connectivity, two MAC entities are configured in the UE: one for the MCG and one for the SCG. In DAPS handover, two MAC entities are configured in the UE: one MAC entity for the source cell (source MAC entity) and one MAC entity for the target cell (target MAC entity). Each MAC entity is configured by RRC with a serving cell supporting PUCCH transmission and contention based Random Access. In this specification, the term SpCell refers to such cell, whereas the term SCell refers to other serving cells. The term SpCell either refers to the PCell of the MCG or the PSCell of the SCG depending on if the MAC entity is associated to the MCG or the SCG, respectively. A Timing Advance Group containing the SpCell of a MAC entity is referred to as pTAG, whereas the term sTAG refers to other TAGs.\nThe functions of the different MAC entities in the UE operate independently if not otherwise indicated. The timers and paramenters used in each MAC entity are configured independently if not otherwise indicated. The Serving Cells, C-RNTI, radio bearers, logical channels, upper and lower layer entities, LCGs, and HARQ entities considered by each MAC entity refer to those mapped to that MAC entity if not otherwise indicated.\nIf the MAC entity is configured with one or more SCells, there are multiple DL-SCH and there may be multiple UL-SCH and RACH per MAC entity; one DL-SCH, one UL-SCH, and one RACH on the SpCell, one DL-SCH, zero or one UL-SCH and zero or one RACH for each SCell.\nThe physical layer may perform a listen-before-talk procedure, according to which transmissions are not performed if the channel is identified as being occupied or the physical layer may monitor for PUSCH trigger, as specified in TS 36.213 [2], according to which transmissions are not performed if PUSCH trigger B is not received. In both cases a MAC entity considers the transmission to have been performed anyway, unless stated otherwise.\nFigure 4.2.1-1 illustrates one possible structure for the UE side MAC entity when SCG is not configured and for each MAC entity during DAPS handover, and it should not restrict implementation.\nThe figure depicts a simplified overview of the MAC structure in a 2.1-1 5G network, focusing on the UE (User Equipment) side. It illustrates the various components such as the base station (gNB), user equipment (UE), and scatterers. The diagram highlights beamforming techniques to mitigate interference, emphasizing the importance of network design and architecture in ensuring reliable communication.\nFigure 4.2.1-1: MAC structure overview, UE side\nFigure 4.2.1-2 illustrates one possible structure for the UE side MAC entities when MCG and SCG are configured, and it should not restrict implementation. MBMS reception and SC-PTM reception are excluded from this figure for simplicity.\nThe figure depicts a simplified representation of the MAC structure in a 2.1-2 5G network, highlighting the two main entities: the base station (gNB) and the user equipment (UE). The diagram illustrates the various layers of the network, including the core switches, optical line terminals (OLTs), and distributed nodes. The layered design aligns with SDN principles, emphasizing the importance of redundancy and failover mechanisms.\nFigure 4.2.1-2: MAC structure overview with two MAC entities, UE side\nFigure 4.2.1-3 illustrates one possible structure for the UE side MAC entity when sidelink is configured, and it should not restrict implementation.\nThe figure depicts the MAC structure overview for sidelink and UE side, illustrating the various components and their interconnections.\nFigure 4.2.1-3: MAC structure overview for sidelink, UE side\n",
                            "figures_meta_data": [],
                            "tables": []
                        }
                    ]
                },
                {
                    "title": "4.3\tServices",
                    "description": "",
                    "summary": "",
                    "text_content": "",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": [
                        {
                            "title": "4.3.1\tServices provided to upper layers",
                            "text_content": "This clause describes the different services provided by MAC sublayer to upper layers.\n-\tdata transfer\n-\tradio resource allocation\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "4.3.2\tServices expected from physical layer",
                            "text_content": "The physical layer provides the following services to MAC:\n-\tdata transfer services;\n-\tsignalling of HARQ feedback;\n-\tsignalling of Scheduling Request;\n-\tmeasurements (e.g. Channel Quality Indication (CQI)).\nThe access to the data transfer services is through the use of transport channels. The characteristics of a transport channel are defined by its transport format (or format set), specifying the physical layer processing to be applied to the transport channel in question, such as channel coding and interleaving, and any service-specific rate matching as needed.\n",
                            "figures_meta_data": [],
                            "tables": []
                        }
                    ]
                },
                {
                    "title": "4.4\tFunctions",
                    "description": "",
                    "summary": "",
                    "text_content": "The following functions are supported by MAC sublayer:\n-\tmapping between logical channels and transport channels;\n-\tmultiplexing of MAC SDUs from one or different logical channels onto transport blocks (TB) to be delivered to the physical layer on transport channels;\n-\tdemultiplexing of MAC SDUs from one or different logical channels from transport blocks (TB) delivered from the physical layer on transport channels;\n-\tscheduling information reporting;\n-\terror correction through HARQ;\n-\tpriority handling between UEs by means of dynamic scheduling;\n-\tpriority handling between logical channels of one MAC entity;\n-\tLogical Channel prioritisation;\n-\ttransport format selection;\n-\tradio resource selection for SL.\nThe location of the different functions and their relevance for uplink and downlink respectively is illustrated in Table 4.4-1.\nTable 4.4-1: MAC function location and link direction association.\n\n",
                    "tables": [
                        {
                            "description": "Table 4.4-1: MAC function location and link direction association.",
                            "table number": 1,
                            "summary": "",
                            "name": ""
                        }
                    ],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "4.5\tChannel structure",
                    "description": "",
                    "summary": "",
                    "text_content": "The MAC sublayer operates on the channels defined below; transport channels are SAPs between MAC and Layer 1, logical channels are SAPs between MAC and RLC.\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": [
                        {
                            "title": "4.5.1\tTransport Channels",
                            "text_content": "The transport channels used by MAC are described in Table 4.5.1-1 below.\nTable 4.5.1-1: Transport channels used by MAC\n\n",
                            "figures_meta_data": [],
                            "tables": [
                                {
                                    "description": "Table 4.5.1-1: Transport channels used by MAC",
                                    "table number": 2,
                                    "summary": "",
                                    "name": ""
                                }
                            ]
                        },
                        {
                            "title": "4.5.2\tLogical Channels",
                            "text_content": "The MAC layer provides data transfer services on logical channels. A set of logical channel types is defined for different kinds of data transfer services as offered by MAC.\nEach logical channel type is defined by what type of information is transferred.\nMAC provides the control and traffic channels listed in Table 4.5.2-1 below.\nTable 4.5.2-1: Logical channels provided by MAC.\n\n",
                            "figures_meta_data": [],
                            "tables": [
                                {
                                    "description": "Table 4.5.2-1: Logical channels provided by MAC.",
                                    "table number": 3,
                                    "summary": "",
                                    "name": ""
                                }
                            ]
                        },
                        {
                            "title": "4.5.3\tMapping of Transport Channels to Logical Channels",
                            "text_content": "The mapping of logical channels on transport channels depends on the multiplexing that is configured by RRC.\nThe MAC entity is responsible for mapping logical channels for the uplink onto uplink transport channels. The uplink logical channels can be mapped as described in Figure 4.5.3.1-1 and Table 4.5.3.1-1.\nThe figure depicts a 5G network with a multi-path signal propagation, illustrating the signal path from the base station (gNB) to the user equipment (UE) and the presence of scatterers. Key components include the base station, user equipment, and scatterers, with beamforming techniques used to mitigate interference. The figure also highlights the fiber-optic backbone architecture, with core switches, optical line terminals (OLTs), and distributed nodes, aligning with SDN principles.\nFigure 4.5.3.1-1\nTable 4.5.3.1-1: Uplink channel mapping.\n\nThe MAC entity is responsible for mapping the downlink logical channels to downlink transport channels. The downlink logical channels can be mapped as described in Figure 4.5.3.2-1 and Table 4.5.3.2-1.\nThe figure depicts a 5G network with a multi-path signal propagation, illustrating the signal path from the base station (gNB) to the user equipment (UE) and the presence of scatterers. Key components include the base station, user equipment, and scatterers, with beamforming techniques used to mitigate interference. The figure also highlights the fiber-optic backbone architecture, with core switches, optical line terminals (OLTs), and distributed nodes, aligning with SDN principles.\nFigure 4.5.3.2-1\nTable 4.5.3.2-1: Downlink channel mapping.\n\nThe MAC entity is responsible for mapping the sidelink logical channels to sidelink transport channels. The sidelink logical channels can be mapped as described in Figure 4.5.3.3-1 and Table 4.5.3.3-1.\nThe figure depicts a 5G network with a multi-path signal propagation, illustrating the signal path from the base station (gNB) to the user equipment (UE) and the presence of scatterers. Key components include the base station, user equipment, and scatterers, with beamforming techniques used to mitigate interference. The figure also highlights the fiber-optic backbone architecture, with core switches, optical line terminals (OLTs), and distributed nodes, aligning with SDN principles.\nFigure 4.5.3.3-1\nTable 4.5.3.3-1: Sidelink channel mapping.\n\n",
                            "figures_meta_data": [],
                            "tables": [
                                {
                                    "description": "Table 4.5.3.1-1: Uplink channel mapping.",
                                    "table number": 4,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 4.5.3.2-1: Downlink channel mapping.",
                                    "table number": 5,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 4.5.3.3-1: Sidelink channel mapping.",
                                    "table number": 6,
                                    "summary": "",
                                    "name": ""
                                }
                            ]
                        }
                    ]
                }
            ]
        },
        {
            "title": "5\tMAC procedures",
            "description": "",
            "summary": "",
            "tables": [],
            "figures_meta_data": [],
            "subsections": [
                {
                    "title": "5.1\tRandom Access procedure",
                    "description": "",
                    "summary": "",
                    "text_content": "",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": [
                        {
                            "title": "5.1.1\tRandom Access Procedure initialization",
                            "text_content": "The Random Access procedure described in this clause is initiated by a PDCCH order, by the MAC sublayer itself or by the RRC sublayer. Random Access procedure on an SCell shall only be initiated by a PDCCH order. If a MAC entity receives a PDCCH transmission consistent with a PDCCH order, as specified inTS 36.212 [5], masked with its C-RNTI, and for a specific Serving Cell, the MAC entity shall initiate a Random Access procedure on this Serving Cell. For Random Access on the SpCell a PDCCH order or RRC optionally indicate the ra-PreambleIndex and the ra-PRACH-MaskIndex, except for NB-IoT where the subcarrier index is indicated; and for Random Access on an SCell, the PDCCH order indicates the ra-PreambleIndex with a value different from 000000 and the ra-PRACH-MaskIndex. For the pTAG preamble transmission on PRACH and reception of a PDCCH order are only supported for SpCell. If the UE is an NB-IoT UE, the Random Access procedure is performed on the anchor carrier or one of the non-anchor carriers for which PRACH resource has been configured in system information.\nBefore the procedure can be initiated, the following information for related Serving Cell is assumed to be available for UEs other than NB-IoT UEs, BL UEs or UEs in enhanced coverage, as specified in TS 36.331 [8], unless explicitly stated otherwise:\n-\tthe available set of PRACH resources for the transmission of the Random Access Preamble, prach-ConfigIndex.\n-\tthe groups of Random Access Preambles and the set of available Random Access Preambles in each group (SpCell only):\nThe preambles that are contained in Random Access Preambles group A and Random Access Preambles group B are calculated from the parameters numberOfRA-Preambles and sizeOfRA-PreamblesGroupA:\nIf sizeOfRA-PreamblesGroupA is equal to numberOfRA-Preambles then there is no Random Access Preambles group B. The preambles in Random Access Preamble group A are the preambles 0 to sizeOfRA-PreamblesGroupA – 1 and, if it exists, the preambles in Random Access Preamble group B are the preambles sizeOfRA-PreamblesGroupA to numberOfRA-Preambles – 1 from the set of 64 preambles as defined in TS 36.211 [7].\n-\tif Random Access Preambles group B exists, the thresholds, messagePowerOffsetGroupB and messageSizeGroupA, the configured UE transmitted power of the Serving Cell performing the Random Access Procedure, PCMAX, c, as specified in TS 36.101 [10], and the offset between the preamble and Msg3, deltaPreambleMsg3, that are required for selecting one of the two groups of Random Access Preambles (SpCell only).\n-\tthe RA response window size ra-ResponseWindowSize.\n-\tthe power-ramping factor powerRampingStep.\n-\tthe maximum number of preamble transmission preambleTransMax.\n-\tthe initial preamble power preambleInitialReceivedTargetPower.\n-\tthe preamble format based offset DELTA_PREAMBLE (see clause 7.6).\n-\tthe maximum number of Msg3 HARQ transmissions maxHARQ-Msg3Tx (SpCell only).\n-\tthe Contention Resolution Timer mac-ContentionResolutionTimer (SpCell only).\nNOTE 1:\tThe above parameters may be updated from upper layers before each Random Access procedure is initiated.\nThe following information for related Serving Cell is assumed to be available before the procedure can be initiated for NB-IoT UEs, BL UEs or UEs in enhanced coverage, as specified in TS 36.331 [8]:\n-\tif the UE is a BL UE or a UE in enhanced coverage:\n-\tthe available set of PRACH resources associated with each enhanced coverage level supported in the Serving Cell for the transmission of the Random Access Preamble, prach-ConfigIndex.\n-\tfor EDT, the available set of PRACH resources associated with EDT for each enhanced coverage level supported in the Serving Cell for the transmission of the Random Access Preamble, prach-ConfigIndex.\n-\tthe groups of Random Access Preambles and the set of available Random Access Preambles in each group(SpCell only):\n-\texcept for EDT:\n-\tif sizeOfRA-PreamblesGroupA is not equal to numberOfRA-Preambles:\n-\tRandom Access Preambles group A and B exist and are calculated as above;\n-\telse:\n-\tthe preambles that are contained in Random Access Preamble groups for each enhanced coverage level, if it exists, are the preambles firstPreamble to lastPreamble.\n-\tfor EDT, the preambles that are contained in Random Access Preamble groups for each enhanced coverage level, if it exists, are the preambles firstPreamble to edt-LastPreamble if PRACH resources configured by edt-PRACH-ParametersCE are different from the PRACH resources configured by PRACH-ParametersCE for all enhanced coverage levels and edt-PRACH-ParametersCE for all other enhanced coverage levels, otherwise the preambles for EDT are the preambles lastPreamble+1 to edt-LastPreamble.\nNOTE 2:\tWhen a PRACH resource is shared for multiple enhanced coverage levels, and enhanced coverage levels are differentiated by different preamble indices, Group A and Group B is not used for this PRACH resource.\n-\tif the UE is an NB-IoT UE:\n-\tthe available set of PRACH resources supported in the Serving Cell on the anchor carrier, nprach-ParametersList, and on the non-anchor carriers, in ul-ConfigList.\n-\tfor EDT, the available set of PRACH resources associated with EDT on anchor carrier, nprach-ParametersList-EDT, and on the non-anchor carriers, in ul-ConfigList.\n-\tfor random access resource selection and preamble transmission:\n-\ta PRACH resource is mapped into an enhanced coverage level.\n-\teach PRACH resource contains a set of nprach-NumSubcarriers subcarriers which can be partitioned into one or two groups for single/multi-tone Msg3 transmission by nprach-SubcarrierMSG3-RangeStart and nprach-NumCBRA-StartSubcarriers as specified in TS 36.211 [7], clause 10.1.6.1. Each group is referred to as a Random Access Preamble group below in the procedure text.\n-\ta subcarrier is identified by the subcarrier index in the range:\n[nprach-SubcarrierOffset, nprach-SubcarrierOffset + nprach-NumSubcarriers -1]\n-\teach subcarrier of a Random Access Preamble group corresponds to a Random Access Preamble.\n-\twhen the subcarrier index is explicitly sent from the eNB as part of a PDCCH order ra-PreambleIndex shall be set to the signalled subcarrier index.\n-\tthe mapping of the PRACH resources into enhanced coverage levels is determined according to the following:\n-\tthe number of enhanced coverage levels is equal to one plus the number of RSRP thresholds present in rsrp-ThresholdsPrachInfoList.\n-\teach enhanced coverage level has one anchor carrier PRACH resource present in nprach-ParametersList and zero or one PRACH resource for each non-anchor carrier signalled in ul-ConfigList.\n-\tfor EDT, each enhanced coverage level has zero or one anchor carrier PRACH resource present in nprach-ParametersList-EDT and zero or one PRACH resource for each non-anchor carrier signalled in ul-ConfigList.\n-\tenhanced coverage levels are numbered from 0 and the mapping of PRACH resources to enhanced coverage levels are done in increasing numRepetitionsPerPreambleAttempt order.\n-\twhen multiple carriers provide PRACH resources for the same enhanced coverage level, the UE will randomly select one of them using the following selection probabilities:\n-\tthe selection probability of the anchor carrier PRACH resource for the given enhanced coverage level, nprach-ProbabilityAnchor, is given by the corresponding entry in nprach-ProbabilityAnchorList\n-\tthe selection probability is equal for all non-anchor carrier PRACH resources and the probability of selecting one PRACH resource on a given non-anchor carrier is (1- nprach-ProbabilityAnchor)/(number of non-anchor NPRACH resources)\n-\tthe criteria to select PRACH resources based on RSRP measurement per enhanced coverage level supported in the Serving Cell rsrp-ThresholdsPrachInfoList.\n-\tthe maximum number of preamble transmission attempts per enhanced coverage level supported in the Serving Cell maxNumPreambleAttemptCE.\n-\tthe number of repetitions required for preamble transmission per attempt for each enhanced coverage level supported in the Serving Cell numRepetitionPerPreambleAttempt.\n-\tthe configured UE transmitted power of the Serving Cell performing the Random Access Procedure, PCMAX, c, as specified in TS 36.101 [10].\n-\tthe RA response window size ra-ResponseWindowSize and the Contention Resolution Timer mac-ContentionResolutionTimer (SpCell only) per enhanced coverage level supported in the Serving Cell.\n-\tfor EDT, the Contention Resolution Timer mac-ContentionResolutionTimer configured for EDT (SpCell only) per enhanced coverage level supported in the Serving Cell.\n-\tthe power-ramping factor powerRampingStep and optionally powerRampingStepCE1.\n-\tthe maximum number of preamble transmission preambleTransMax-CE.\n-\tthe initial preamble power preambleInitialReceivedTargetPower and optionally preambleInitialReceivedTargetPowerCE1.\n-\tthe preamble format based offset DELTA_PREAMBLE (see clause 7.6).\n-\tfor NB-IoT, the use of contention free random access ra-CFRA-Config.\nThe Random Access procedure shall be performed as follows:\n-\tflush the Msg3 buffer;\n-\tset the PREAMBLE_TRANSMISSION_COUNTER to 1;\n-\tif the UE is an NB-IoT UE, a BL UE or a UE in enhanced coverage:\n-\tset the PREAMBLE_TRANSMISSION_COUNTER_CE to 1;\n-\tif the starting enhanced coverage level, or for NB-IoT the starting number of NPRACH repetitions, has been indicated in the PDCCH order which initiated the Random Access procedure, or if the starting enhanced coverage level has been provided by upper layers:\n-\tthe MAC entity considers itself to be in that enhanced coverage level regardless of the measured RSRP;\n-\telse:\n-\tif the RSRP threshold of enhanced coverage level 3 is configured by upper layers in rsrp-ThresholdsPrachInfoList and the measured RSRP is less than the RSRP threshold of enhanced coverage level 3 and the UE is capable of enhanced coverage level 3 then:\n-\tthe MAC entity considers to be in enhanced coverage level 3;\n-\telse if the RSRP threshold of enhanced coverage level 2 configured by upper layers in rsrp-ThresholdsPrachInfoList and the measured RSRP is less than the RSRP threshold of enhanced coverage level 2 and the UE is capable of enhanced coverage level 2 then:\n-\tthe MAC entity considers to be in enhanced coverage level 2;\n-\telse if the measured RSRP is less than the RSRP threshold of enhanced coverage level 1 as configured by upper layers in rsrp-ThresholdsPrachInfoList then:\n-\tthe MAC entity considers to be in enhanced coverage level 1;\n-\telse:\n-\tthe MAC entity considers to be in enhanced coverage level 0;\n-\tset the backoff parameter value to 0 ms;\n-\tfor the RN, suspend any RN subframe configuration;\n-\tproceed to the selection of the Random Access Resource (see clause 5.1.2).\nNOTE 3:\tThere is only one Random Access procedure ongoing at any point in time in a MAC entity. If the MAC entity receives a request for a new Random Access procedure while another is already ongoing in the MAC entity, it is up to UE implementation whether to continue with the ongoing procedure or start with the new procedure.\nNOTE 4:\tAn NB-IoT UE measures RSRP on the anchor carrier.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "5.1.2\tRandom Access Resource selection",
                            "text_content": "The Random Access Resource selection procedure shall be performed as follows:\n-\tfor BL UEs or UEs in enhanced coverage or NB-IoT UEs, if EDT is initiated by the upper layers:\n-\tif the message size (UL data available for transmission plus MAC header and, where required, MAC control elements) is larger than the TB size signalled in edt-TBS for the selected enhanced coverage level for EDT; or\n-\tif the PRACH resource associated with EDT for the selected enhanced coverage level is not available:\n-\tindicate to upper layers that EDT is cancelled;\n-\tfor BL UEs or UEs in enhanced coverage, select the PRACH resource set corresponding to the selected enhanced coverage level. For EDT, the PRACH resource set shall correspond to the set associated with EDT for the selected enhanced coverage level.\n-\tif, except for NB-IoT, ra-PreambleIndex (Random Access Preamble) and ra-PRACH-MaskIndex (PRACH Mask Index) have been explicitly signalled and ra-PreambleIndex is not 000000:\n-\tthe Random Access Preamble and the PRACH Mask Index are those explicitly signalled;\n-\telse if, for NB-IoT, ra-PreambleIndex (Random Access Preamble) and PRACH resource have been explicitly signalled:\n-\tthe PRACH resource is that explicitly signalled;\n-\tif the ra-PreambleIndex signalled is not 000000:\n-\tif ra-CFRA-Config is configured:\n-\tthe Random Access Preamble is set to nprach-SubcarrierOffset + nprach-NumCBRA-StartSubcarriers + (ra-PreambleIndex modulo (nprach-NumSubcarriers - nprach-NumCBRA-StartSubcarriers)), where nprach-SubcarrierOffset, nprach-NumCBRA-StartSubcarriers and nprach-NumSubcarriers are parameters in the currently used PRACH resource.\n-\telse:\n-\tthe Random Access Preamble is set to nprach-SubcarrierOffset + (ra-PreambleIndex modulo nprach-NumSubcarriers), where nprach-SubcarrierOffset and nprach-NumSubcarriers are parameters in the currently used PRACH resource.\n-\telse:\n-\tselect the Random Access Preamble group according to the PRACH resource and the support for multi-tone Msg3 transmission. A UE supporting multi-tone Msg3 shall only select the single-tone Msg3 Random Access Preambles group if there is no multi-tone Msg3 Random Access Preambles group.\n-\trandomly select a Random Access Preamble within the selected group.\n-\telse the Random Access Preamble shall be selected by the MAC entity as follows:\n-\tif the UE is a BL UE or UE in enhanced coverage and EDT is initiated:\n-\tselect the Random Access Preambles group corresponding to PRACH resource for EDT for the selected enhanced coverage level.\n-\telse if the UE is a BL UE or UE in enhanced coverage and Random Access Preamble group B does not exist:\n-\tselect the Random Access Preambles group corresponding to the selected enhanced coverage level.\n-\telse if the UE is an NB-IoT UE:\n-\tif the UE supports carrier specific NRSRP thresholds for NPRACH resource selection and rsrp-ThresholdsPrachInfoList-r16 is signalled for a carrier in ul-ConfigList:\n-\tif the measured RSRP is lower than the RSRP threshold corresponding to the selected enhanced coverage level in rsrp-ThresholdsPrachInfoList-r16:\n-\tdo not consider the PRACH resource on this non-anchor carrier for PRACH resource selection.\n-\trandomly select one of the PRACH resources corresponding to the selected enhanced coverage level according to the configured probability distribution, and select the Random Access Preambles group corresponding to the PRACH resource and the support for multi-tone Msg3 transmission. A UE supporting multi-tone Msg3 shall only select the single-tone Msg3 Random Access Preambles group if there is no multi-tone Msg3 Random Access Preambles group. For EDT, the PRACH resource shall correspond to resource associated with EDT for the selected enhanced coverage level.\n-\telse if Msg3 has not yet been transmitted, the MAC entity shall:\n-\tif Random Access Preambles group B exists and any of the following events occur:\n-\tthe potential message size (UL data available for transmission plus MAC header and, where required, MAC control elements) is greater than messageSizeGroupA and the pathloss is less than PCMAX,c (of the Serving Cell performing the Random Access Procedure) – preambleInitialReceivedTargetPower – deltaPreambleMsg3 – messagePowerOffsetGroupB;\n-\tthe Random Access procedure was initiated for the CCCH logical channel and the CCCH SDU size plus MAC header is greater than messageSizeGroupA;\n-\tselect the Random Access Preambles group B;\n-\telse:\n-\tselect the Random Access Preambles group A.\n-\telse, if Msg3 is being retransmitted, the MAC entity shall:\n-\tselect the same group of Random Access Preambles as was used for the preamble transmission attempt corresponding to the first transmission of Msg3.\n-\trandomly select a Random Access Preamble within the selected group. The random function shall be such that each of the allowed selections can be chosen with equal probability;\n-\texcept for NB-IoT, set PRACH Mask Index to 0.\n-\tdetermine the next available subframe containing PRACH permitted by the restrictions given by the prach-ConfigIndex (except for NB-IoT), the PRACH Mask Index (except for NB-IoT, see clause 7.3), physical layer timing requirements, as specified in TS 36.213 [2], and in case of NB-IoT, the subframes occupied by PRACH resources related to a higher enhanced coverage level (a MAC entity may take into account the possible occurrence of measurement gaps when determining the next available PRACH subframe);\n-\texcept for NB-IoT:\n-\tif the transmission mode is TDD and the PRACH Mask Index is equal to zero:\n-\tif ra-PreambleIndex was explicitly signalled and it was not 000000 (i.e., not selected by MAC):\n-\trandomly select, with equal probability, one PRACH from the PRACHs available in the determined subframe.\n-\telse:\n-\trandomly select, with equal probability, one PRACH from the PRACHs available in the determined subframe and the next two consecutive subframes.\n-\telse:\n-\tdetermine a PRACH within the determined subframe in accordance with the requirements of the PRACH Mask Index, if any.\n-\tfor NB-IoT UEs, BL UEs or UEs in enhanced coverage, select the ra-ResponseWindowSize and mac-ContentionResolutionTimer corresponding to the selected enhanced coverage level and PRACH.\n-\tproceed to the transmission of the Random Access Preamble (see clause 5.1.3).\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "5.1.3\tRandom Access Preamble transmission",
                            "text_content": "The random-access procedure shall be performed as follows:\n-\tset PREAMBLE_RECEIVED_TARGET_POWER to preambleInitialReceivedTargetPower + DELTA_PREAMBLE + (PREAMBLE_TRANSMISSION_COUNTER – 1) * powerRampingStep;\n-\tif the UE is a BL UE or a UE in enhanced coverage:\n-\tthe PREAMBLE_RECEIVED_TARGET_POWER is set to:\nPREAMBLE_RECEIVED_TARGET_POWER - 10 * log10(numRepetitionPerPreambleAttempt);\n-\tif the UE is an NB-IoT UE:\n-\tfor enhanced coverage level 0, the PREAMBLE_RECEIVED_TARGET_POWER is set to:\n PREAMBLE_RECEIVED_TARGET_POWER - 10 * log10(numRepetitionPerPreambleAttempt)\n-\tfor FDD if the UE supports enhanced random access power control and PowerRampingParameters-NB-v1450 is configured by upper layers, or for TDD:\n-\tthe MSG3_RECEIVED_TARGET_POWER is set to preambleInitialReceivedTargetPower + (PREAMBLE_TRANSMISSION_COUNTER_CE – 1) * powerRampingStep;\n-\tfor other enhanced coverage levels:\n-\tfor FDD if the UE supports enhanced random access power control and PowerRampingParameters-NB-v1450 is configured by upper layers, or for TDD; and\n-\tif the starting enhanced coverage level was enhanced coverage level 0 or enhanced coverage level 1:\n-\tif the MAC entity considers itself to be in enhanced coverage level 1 and if powerRampingStepCE1 and preambleInitialReceivedTargetPowerCE1 have been configured by upper layers:\n-\tthe PREAMBLE_RECEIVED_TARGET_POWER is set to preambleInitialReceivedTargetPowerCE1 + DELTA_PREAMBLE + (PREAMBLE_TRANSMISSION_COUNTER_CE – 1) * powerRampingStepCE1 - 10 * log10(numRepetitionPerPreambleAttempt);\n-\tthe MSG3_RECEIVED_TARGET_POWER is set to preambleInitialReceivedTargetPowerCE1 + (PREAMBLE_TRANSMISSION_COUNTER_CE – 1) * powerRampingStepCE1;\n-\telse:\n-\tthe PREAMBLE_RECEIVED_TARGET_POWER is set to preambleInitialReceivedTargetPower + DELTA_PREAMBLE + (PREAMBLE_TRANSMISSION_COUNTER_CE – 1) * powerRampingStep - 10 * log10(numRepetitionPerPreambleAttempt);\n-\tthe MSG3_RECEIVED_TARGET_POWER is set to preambleInitialReceivedTargetPower + (PREAMBLE_TRANSMISSION_COUNTER_CE – 1) * powerRampingStep;\n-\telse:\n-\tthe PREAMBLE_RECEIVED_TARGET_POWER is set corresponding to the max UE output power;\n-\tif the UE is an NB-IoT UE, a BL UE or a UE in enhanced coverage:\n-\tinstruct the physical layer to transmit a preamble with the number of repetitions required for preamble transmission corresponding to the selected preamble group (i.e., numRepetitionPerPreambleAttempt) using the selected PRACH corresponding to the selected enhanced coverage level, corresponding RA-RNTI, preamble index or for NB-IoT subcarrier index, and PREAMBLE_RECEIVED_TARGET_POWER.\n-\telse:\n-\tinstruct the physical layer to transmit a preamble using the selected PRACH, corresponding RA-RNTI, preamble index and PREAMBLE_RECEIVED_TARGET_POWER.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "5.1.4\tRandom Access Response reception",
                            "text_content": "Once the Random Access Preamble is transmitted and regardless of the possible occurrence of a measurement gap or a Sidelink Discovery Gap for Transmission or a Sidelink Discovery Gap for Reception, and regardless of the prioritization of V2X sidelink communication described in clause 5.14.1.2.2, the MAC entity shall monitor the PDCCH of the SpCell for Random Access Response(s) identified by the RA-RNTI defined below, in the RA Response window which starts at the subframe that contains the end of the preamble transmission,as specified in TS 36.211 [7], plus three subframes and has length ra-ResponseWindowSize.\nIf the UE is a BL UE or a UE in enhanced coverage:\n-\tif the random access preamble was transmitted in a non-terrestrial network:\n-\tRA Response window starts at the subframe that contains the end of the last preamble repetition plus 3 subframes plus UE-eNB RTT and has length ra-ResponseWindowSize for the corresponding enhanced coverage level;\n-\telse:\n-\tRA Response window starts at the subframe that contains the end of the last preamble repetition plus three subframes and has length ra-ResponseWindowSize for the corresponding enhanced coverage level.\nIf the UE is an NB-IoT UE:\n-\tif the random access preamble was transmitted in a non-terrestrial network:\n-\tRA Response window starts at the subframe that contains the end of the last preamble repetition plus X subframes plus UE-eNB RTT and has length ra-ResponseWindowSize for the corresponding enhanced coverage level, where value X is determined from Table 5.1.4-1 based on the used preamble format and the number of NPRACH repetitions;\n-\telse:\n-\tRA Response window starts at the subframe that contains the end of the last preamble repetition plus X subframes and has length ra-ResponseWindowSize for the corresponding enhanced coverage level, where value X is determined from Table 5.1.4-1 based on the used preamble format and the number of NPRACH repetitions.\nTable 5.1.4-1: Subframes between preamble transmission and RA Response Window in NB-IoT\n\nThe RA-RNTI associated with the PRACH in which the Random Access Preamble is transmitted, is computed as:\nRA-RNTI= 1 + t_id + 10*f_id\nwhere t_id is the index of the first subframe of the specified PRACH (0≤ t_id <10), and f_id is the index of the specified PRACH within that subframe, in ascending order of frequency domain (0≤ f_id< 6) except for NB-IoT UEs, BL UEs or UEs in enhanced coverage. If the PRACH resource is on a TDD carrier, the f_id is set to , where  is defined in clause 5.7.1 of TS 36.211 [7].\nFor BL UEs and UEs in enhanced coverage, RA-RNTI associated with the PRACH in which the Random Access Preamble is transmitted, is computed as:\nRA-RNTI=1+t_id + 10*f_id + 60*(SFN_id mod (Wmax/10))\nwhere t_id is the index of the first subframe of the specified PRACH (0≤ t_id <10), f_id is the index of the specified PRACH within that subframe, in ascending order of frequency domain (0≤ f_id< 6), SFN_id is the index of the first radio frame of the specified PRACH, and Wmax is 400, maximum possible RAR window size in subframes for BL UEs or UEs in enhanced coverage. If the PRACH resource is on a TDD carrier, the f_id is set to , where  is defined in clause 5.7.1 of TS 36.211 [7].\nFor NB-IoT UEs, the RA-RNTI associated with the PRACH in which the Random Access Preamble is transmitted, is computed as:\nRA-RNTI=1 + floor(SFN_id/4) + 256*carrier_id\nwhere SFN_id is the index of the first radio frame of the specified PRACH and carrier_id is the index of the UL carrier associated with the specified PRACH. The carrier_id of the anchor carrier is 0.\nFor NB-IoT UEs operating in TDD mode, the RA-RNTI associated with the PRACH in which the Random Access Preamble is transmitted, is computed as:\nRA-RNTI = 1 + floor(SFN_id/4) + 256*(H-SFN mod 2)\nwhere SFN_id is the index of the first radio frame of the specified PRACH and H-SFN is the index of the first hyper frame of the specified PRACH. The PDCCH transmission and the PRACH resource are on the same carrier.\nThe MAC entity may stop monitoring for Random Access Response(s) after successful reception of a Random Access Response containing Random Access Preamble identifiers that matches the transmitted Random Access Preamble.\n-\tIf a downlink assignment for this TTI has been received on the PDCCH for the RA-RNTI and the received TB is successfully decoded, the MAC entity shall regardless of the possible occurrence of a measurement gap or a Sidelink Discovery Gap for Transmission or a Sidelink Discovery Gap for Reception, and regardless of the prioritization of V2X sidelink communication described in clause 5.14.1.2.2:\n-\tif the Random Access Response contains a Backoff Indicator subheader:\n-\tset the backoff parameter value as indicated by the BI field of the Backoff Indicator subheader and Table 7.2-1, except for NB-IoT where the value from Table 7.2-2 is used.\n-\telse, set the backoff parameter value to 0 ms.\n-\tif the Random Access Response contains a Random Access Preamble identifier corresponding to the transmitted Random Access Preamble (see clause 5.1.3), the MAC entity shall:\n-\tconsider this Random Access Response reception successful and apply the following actions for the serving cell where the Random Access Preamble was transmitted:\n-\tprocess the received Timing Advance Command (see clause 5.2);\n-\tindicate the preambleInitialReceivedTargetPower and the amount of power ramping applied to the latest preamble transmission to lower layers (i.e., (PREAMBLE_TRANSMISSION_COUNTER – 1) * powerRampingStep);\n-\tif the SCell is configured with ul-Configuration-r14, ignore the received UL grant otherwise process the received UL grant value and indicate it to the lower layers;\n-\tif, except for NB-IoT, ra-PreambleIndex was explicitly signalled and it was not 000000 (i.e., not selected by MAC):\n-\tconsider the Random Access procedure successfully completed.\n-\telse if, the UE is an NB-IoT UE, ra-PreambleIndex was explicitly signalled and it was not 000000 (i.e., not selected by MAC) and ra-CFRA-Config is configured:\n-\tconsider the Random Access procedure successfully completed.\n-\tthe UL grant provided in the Random Access Response message is valid only for the configured carrier (i.e. UL carrier used prior to this Random Access procedure).\n-\telse:\n-\tif the Random Access Preamble was selected by the MAC entity; or\n-\tif the UE is an NB-IoT UE, the ra-PreambleIndex was explicitly signalled and it was not 000000 and ra-CFRA-Config is not configured:\n-\tset the Temporary C-RNTI to the value received in the Random Access Response message no later than at the time of the first transmission corresponding to the UL grant provided in the Random Access Response message;\n-\tif the Random Access Preamble associated with EDT was transmitted and UL grant provided in the Random Access Response message is not for EDT:\n-\tindicate to upper layers that EDT is cancelled due to UL grant not being for EDT;\n-\tfor CP-EDT, flush the Msg3 buffer.\n-\tfor UP-EDT, update the MAC PDU in the Msg3 buffer in accordance with the uplink grant received in the Random Access Response.\n-\tif the Random Access Preamble associated with EDT was transmitted, the UL grant was received in a Random Access Response for EDT, and there is a MAC PDU in the Msg3 buffer:\n-\tif the TB size according to edt-SmallTBS-Enabled and as described in clause 8.6.2 and 16.3.3 of TS 36.213 [2] does not match the size of the MAC PDU in the Msg3 buffer:\n-\tthe MAC entity shall update the MAC PDU in the Msg3 buffer in accordance with the TB size.\n-\tif this is the first successfully received Random Access Response within this Random Access procedure; or\n-\tif CP-EDT is cancelled due to the UL grant provided in the Random Access Response message not being for EDT:\n-\tif the transmission is not being made for the CCCH logical channel, indicate to the Multiplexing and assembly entity to include a C-RNTI MAC control element in the subsequent uplink transmission;\n-\tobtain the MAC PDU to transmit from the \"Multiplexing and assembly\" entity and store it in the Msg3 buffer.\nNOTE 1:\tWhen an uplink transmission is required, e.g., for contention resolution, the eNB should not provide a grant smaller than 56 bits (or 88 bits for NB-IoT) in the Random Access Response.\nNOTE 2:\tIf within a Random Access procedure, an uplink grant provided in the Random Access Response for the same group of Random Access Preambles has a different size than the first uplink grant allocated during that Random Access procedure, the UE behavior is not defined except for EDT.\nIf no Random Access Response or, for NB-IoT UEs, BL UEs or UEs in enhanced coverage for mode B operation, no PDCCH scheduling Random Access Response is received within the RA Response window, or if none of all received Random Access Responses contains a Random Access Preamble identifier corresponding to the transmitted Random Access Preamble, the Random Access Response reception is considered not successful and the MAC entity shall:\n-\tif the notification of power ramping suspension has not been received from lower layers:\n-\tincrement PREAMBLE_TRANSMISSION_COUNTER by 1;\n-\tif the UE is an NB-IoT UE, a BL UE or a UE in enhanced coverage:\n-\tif PREAMBLE_TRANSMISSION_COUNTER = preambleTransMax-CE + 1:\n-\tif the Random Access Preamble is transmitted on the SpCell:\n-\tindicate a Random Access problem to upper layers;\n-\tif NB-IoT:\n-\tconsider the Random Access procedure unsuccessfully completed;\n-\telse:\n-\tif PREAMBLE_TRANSMISSION_COUNTER = preambleTransMax + 1:\n-\tif the Random Access Preamble is transmitted on the SpCell:\n-\tindicate a Random Access problem to upper layers;\n-\tif the Random Access Preamble is transmitted on an SCell:\n-\tconsider the Random Access procedure unsuccessfully completed.\n-\tif in this Random Access procedure, the Random Access Preamble was selected by MAC:\n-\tbased on the backoff parameter, select a random backoff time according to a uniform distribution between 0 and the Backoff Parameter Value;\n-\tdelay the subsequent Random Access transmission by the backoff time;\n-\telse if the SCell where the Random Access Preamble was transmitted is configured with ul-Configuration-r14:\n-\tdelay the subsequent Random Access transmission until the Random Access Procedure is initiated by a PDCCH order with the same ra-PreambleIndex and ra-PRACH-MaskIndex;\n-\tif the UE is an NB-IoT UE, a BL UE or a UE in enhanced coverage:\n-\tincrement PREAMBLE_TRANSMISSION_COUNTER_CE by 1;\n-\tif PREAMBLE_TRANSMISSION_COUNTER_CE = maxNumPreambleAttemptCE for the corresponding enhanced coverage level + 1:\n-\treset PREAMBLE_TRANSMISSION_COUNTER_CE;\n-\tconsider to be in the next enhanced coverage level, if it is supported by the Serving Cell and the UE, otherwise stay in the current enhanced coverage level;\n-\tif the UE is an NB-IoT UE:\n-\tif the Random Access Procedure was initiated by a PDCCH order:\n-\tselect the PRACH resource in the list of UL carriers providing a PRACH resource for the selected enhanced coverage level for which the carrier index is equal to ((Carrier Indication from the PDCCH order) modulo (Number of PRACH resources in the selected enhanced coverage));\n-\tconsider the selected PRACH resource as explicitly signalled;\n-\tproceed to the selection of a Random Access Resource (see clause 5.1.2).\n",
                            "figures_meta_data": [],
                            "tables": [
                                {
                                    "description": "Table 5.1.4-1: Subframes between preamble transmission and RA Response Window in NB-IoT",
                                    "table number": 7,
                                    "summary": "",
                                    "name": ""
                                }
                            ]
                        },
                        {
                            "title": "5.1.5\tContention Resolution",
                            "text_content": "Contention Resolution is based on either C-RNTI on PDCCH of the SpCell or UE Contention Resolution Identity on DL-SCH.\nOnce Msg3 is transmitted, the MAC entity shall:\n-\tif the UE is an NB-IoT UE, a BL UE or a UE in enhanced coverage:\n-\tif Msg3 is transmitted on a non-terrestrial network:\n-\tif, for EDT, edt-SmallTBS-Enabled is set to TRUE for the corresponding PRACH resource:\n-\tstart mac-ContentionResolutionTimer and restart mac-ContentionResolutionTimer at each HARQ retransmission of the bundle in the subframe corresponding to the last subframe of a PUSCH transmission corresponding to the largest TBS indicated by the UL grant plus UE-eNB RTT.\n-\telse:\n-\tstart mac-ContentionResolutionTimer and restart mac-ContentionResolutionTimer at each HARQ retransmission of the bundle in the subframe containing the last repetition of the corresponding PUSCH transmission plus UE-eNB RTT.\n-\telse:\n-\tif, for EDT, edt-SmallTBS-Enabled is set to TRUE for the corresponding PRACH resource:\n-\tstart mac-ContentionResolutionTimer and restart mac-ContentionResolutionTimer at each HARQ retransmission of the bundle in the subframe corresponding to the last subframe of a PUSCH transmission corresponding to the largest TBS indicated by the UL grant.\n-\telse:\n-\tstart mac-ContentionResolutionTimer and restart mac-ContentionResolutionTimer at each HARQ retransmission of the bundle in the subframe containing the last repetition of the corresponding PUSCH transmission.\n-\telse:\n-\tstart mac-ContentionResolutionTimer and restart mac-ContentionResolutionTimer at each HARQ retransmission.\n-\tregardless of the possible occurrence of a measurement gap or Sidelink Discovery Gap for Reception, monitor the PDCCH until mac-ContentionResolutionTimer expires or is stopped;\n-\tif notification of a reception of a PDCCH transmission is received from lower layers, the MAC entity shall:\n-\tif the C-RNTI MAC control element was included in Msg3:\n-\tif the Random Access procedure was initiated by the MAC sublayer itself or by the RRC sublayer and the PDCCH transmission is addressed to the C-RNTI and contains an UL grant for a new transmission; or\n-\tif the Random Access procedure was initiated by a PDCCH order and the PDCCH transmission is addressed to the C-RNTI:\n-\tconsider this Contention Resolution successful;\n-\tstop mac-ContentionResolutionTimer;\n-\tdiscard the Temporary C-RNTI;\n-\tif the UE is an NB-IoT UE:\n-\tthe UL grant or DL assignment contained in the PDCCH transmission is valid only for the configured carrier (i.e. UL/DL carrier used prior to this Random Access procedure).\n-\tconsider this Random Access procedure successfully completed.\n-\telse if the CCCH SDU was included in Msg3 and the PDCCH transmission is addressed to its Temporary C-RNTI:\n-\tif the MAC PDU is successfully decoded:\n-\tstop mac-ContentionResolutionTimer;\n-\tif the MAC PDU contains a UE Contention Resolution Identity MAC control element; and\n-\tif the UE Contention Resolution Identity included in the MAC control element matches the 48 first bits of the CCCH SDU transmitted in Msg3:\n-\tconsider this Contention Resolution successful and finish the disassembly and demultiplexing of the MAC PDU;\n-\tset the C-RNTI to the value of the Temporary C-RNTI;\n-\tdiscard the Temporary C-RNTI;\n-\tconsider this Random Access procedure successfully completed.\n-\telse:\n-\tdiscard the Temporary C-RNTI;\n-\tconsider this Contention Resolution not successful and discard the successfully decoded MAC PDU.\n-\tif mac-ContentionResolutionTimer expires:\n-\tfor BL UEs or UEs in CE or NB-IoT UEs:\n-\tif notification of a reception of a PDCCH transmission has been received from lower layers before mac-ContentionResolutionTimer expired; and\n-\tif the MAC PDU received until the subframe that contains the last repetition of the corresponding PDSCH transmission is successfully decoded; and\n-\tif the MAC PDU contains a UE Contention Resolution Identity MAC control element; and\n-\tif the UE Contention Resolution Identity included in the MAC control element matches the 48 first bits of the CCCH SDU transmitted in Msg3:\n-\tconsider this Contention Resolution successful and finish the disassembly and demultiplexing of the MAC PDU;\n-\tset the C-RNTI to the value of the Temporary C-RNTI;\n-\tdiscard the Temporary C-RNTI;\n-\tconsider this Random Access procedure successfully completed.\n-\telse if Msg3 was transmitted on a non-terrestrial network:\n-\tif no notification of a reception of a PDCCH transmission addressed to the Temporary C-RNTI indicating an uplink grant for a Msg3 retransmission was received after the start of the mac-ContentionResolutionTimer:\n-\tdiscard the Temporary C-RNTI;\n-\tconsider the Contention Resolution not successful.\n-\telse:\n-\tdiscard the Temporary C-RNTI;\n-\tconsider this Contention Resolution not successful.\n-\texcept for BL UEs or UEs in CE or NB-IoT UEs:\n-\tdiscard the Temporary C-RNTI;\n-\tconsider the Contention Resolution not successful.\n-\tif the Contention Resolution is considered not successful the MAC entity shall:\n-\tflush the HARQ buffer used for transmission of the MAC PDU in the Msg3 buffer;\n-\tif the notification of power ramping suspension has not been received from lower layers:\n-\tincrement PREAMBLE_TRANSMISSION_COUNTER by 1;\n-\tif the UE is an NB-IoT UE, a BL UE or a UE in enhanced coverage:\n-\tif PREAMBLE_TRANSMISSION_COUNTER = preambleTransMax-CE + 1:\n-\tindicate a Random Access problem to upper layers;\n-\tif NB-IoT:\n-\tconsider the Random Access procedure unsuccessfully completed.\n-\telse:\n-\tif PREAMBLE_TRANSMISSION_COUNTER = preambleTransMax + 1:\n-\tindicate a Random Access problem to upper layers.\n-\tbased on the backoff parameter, select a random backoff time according to a uniform distribution between 0 and the Backoff Parameter Value;\n-\tdelay the subsequent Random Access transmission by the backoff time;\n-\tproceed to the selection of a Random Access Resource (see clause 5.1.2).\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "5.1.6\tCompletion of the Random Access procedure",
                            "text_content": "At completion of the Random Access procedure, the MAC entity shall:\n-\tdiscard explicitly signalled ra-PreambleIndex and ra-PRACH-MaskIndex, if any;\n-\tflush the HARQ buffer used for transmission of the MAC PDU in the Msg3 buffer.\nUpon successful completion of the Random Access procedure initiated for DAPS handover, the target MAC entity shall:\n-\tindicate the successful completion of the Random Access Procedure to the upper layers.\nIn addition, the RN shall resume the suspended RN subframe configuration, if any.\n",
                            "figures_meta_data": [],
                            "tables": []
                        }
                    ]
                },
                {
                    "title": "5.2\tMaintenance of Uplink Time Alignment",
                    "description": "",
                    "summary": "",
                    "text_content": "The MAC entity has a configurable timer timeAlignmentTimer per TAG. The timeAlignmentTimer is used to control how long the MAC entity considers the Serving Cells belonging to the associated TAG to be uplink time aligned, as specified in TS 36.331 [8].\nThe MAC entity shall:\n-\twhen a Timing Advance Command MAC control element is received and if a NTA has been stored or maintained with the indicated TAG:\n-\texcept when the received Timing Advance Command MAC control element is addressed with a PUR-RNTI:\n-\tapply the Timing Advance Command for the indicated TAG;\n-\tstart or restart the timeAlignmentTimer associated with the indicated TAG.\n-\twhen a Timing Advance Command is received in a Random Access Response message for a serving cell belonging to a TAG:\n-\tif the UE is configured with pur-Config (see TS 36.331 [8]) and if a NTA has been stored or maintained and no temporary NTA has been stored:\n-\tstore current NTA as temporary NTA (see clause 5.4.7.2).\n-\tif the Random Access Preamble was not selected by the MAC entity:\n-\tapply the Timing Advance Command for this TAG;\n-\tstart or restart the timeAlignmentTimer associated with this TAG.\n-\telse, if the timeAlignmentTimer associated with this TAG is not running:\n-\tapply the Timing Advance Command for this TAG;\n-\tstart the timeAlignmentTimer associated with this TAG;\n-\twhen the contention resolution is considered not successful as described in clause 5.1.5, stop timeAlignmentTimer associated with this TAG.\n-\telse:\n-\tignore the received Timing Advance Command.\n-\twhen the MAC entity is configured with rach-Skip or rach-SkipSCG:\n-\tapply timing advance value indicated by targetTA in rach-Skip or rach-SkipSCG for the pTAG;\n-\tstart the timeAlignmentTimer associated with this TAG.\n-\twhen a timeAlignmentTimer expires:\n-\tif the timeAlignmentTimer is associated with the pTAG:\n-\tflush all HARQ buffers for all serving cells;\n-\tnotify RRC to release PUCCH/SPUCCH for all serving cells;\n-\tnotify RRC to release SRS for all serving cells;\n-\tfor NB-IoT, notify RRC to release all dedicated resources for SR;\n-\tclear any configured downlink assignments and uplink grants;\n-\tconsider all running timeAlignmentTimers as expired;\n-\telse if the timeAlignmentTimer is associated with an sTAG, then for all Serving Cells belonging to this TAG:\n-\tflush all HARQ buffers;\n-\tnotify RRC to release SRS;\n-\tnotify RRC to release PUCCH/SPUCCH, if configured;\n-\tclear any configured downlink assignments and uplink grants.\n-\tupon indication from upper layers to start timeAlignmentTimer, if a NTA has been stored or maintained with the indicated TAG:\n-\tstart or restart the timeAlignmentTimer associated with the indicated TAG.\nWhen the MAC entity stops uplink transmissions for an SCell due to the fact that the maximum uplink transmission timing difference (as described in clause 7.9.2 of TS 36.133 [9]) or the maximum uplink transmission timing difference the UE can handle between TAGs of any MAC entity of the UE is exceeded, the MAC entity considers the timeAlignmentTimer associated with the SCell as expired.\nThe MAC entity shall not perform any uplink transmission on a Serving Cell, except the Random Access Preamble transmission and transmissions corresponding to a PUR-RNTI, when the timeAlignmentTimer associated with the TAG to which this Serving Cell belongs is not running. Furthermore, when the timeAlignmentTimer associated with the pTAG is not running, the MAC entity shall not perform any uplink transmission on any Serving Cell except the Random Access Preamble transmission on the SpCell.\nThe MAC entity shall not perform any sidelink transmission which is performed based on UL timing of the corresponding serving cell and any associated SCI transmissions when the corresponding timeAlignmentTimer is not running.\nNOTE:\tA MAC entity stores or maintains NTA upon expiry of associated timeAlignmentTimer, where NTA is defined in TS 36.211 [7]. The MAC entity applies a received Timing Advance Command MAC control element and starts associated timeAlignmentTimer also when the timeAlignmentTimer is not running.\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "5.2a\tMaintenance of UL Synchronization",
                    "description": "",
                    "summary": "",
                    "text_content": "If upper layer informs that the UL synchronization is lost according to the clause 5.3.18 of TS 36.331 [8], the MAC entity shall:\n-\tflush all HARQ buffers;\n-\tnot perform any uplink transmission.\nIf upper layer informs that the UL synchronization is restored for the SpCell according to the clause 5.3.18 of TS 36.331 [8], uplink transmissions can be performed.\nNOTE:\tThe MAC entity suspends all UL operations (e.g. stop RACH, SR, and UL HARQ operation) after receiving the indication of an uplink synchronization loss and resumes the operation when receiving an indication of uplink synchronization.\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "5.3\tDL-SCH data transfer",
                    "description": "",
                    "summary": "",
                    "text_content": "",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": [
                        {
                            "title": "5.3.1\tDL Assignment reception",
                            "text_content": "Downlink assignments transmitted on the PDCCH indicate if there is a transmission on a DL-SCH for a particular MAC entity and provide the relevant HARQ information.\nWhen the MAC entity has a C-RNTI, Semi-Persistent Scheduling C-RNTI, PUR-RNTI or Temporary C-RNTI, the MAC entity shall for each TTI during which it monitors PDCCH and for each Serving Cell:\n-\tif a downlink assignment for this TTI and this Serving Cell has been received on the PDCCH for the MAC entity's C-RNTI, PUR-RNTI, or Temporary C-RNTI:\n-\tif this is the first downlink assignment for this Temporary C-RNTI; or\n-\tif this is the first downlink assignment corresponding to uplink transmission using previous preconfigured uplink grant for this PUR-RNTI:\n-\tconsider the NDI to have been toggled.\n-\tif the downlink assignment is for the MAC entity's C-RNTI and if the previous downlink assignment indicated to the HARQ entity of the same HARQ process was either a downlink assignment received for the MAC entity's Semi-Persistent Scheduling C-RNTI or a configured downlink assignment:\n-\tconsider the NDI to have been toggled regardless of the value of the NDI.\n-\tindicate the presence of a downlink assignment and deliver the associated HARQ information to the HARQ entity for this TTI.\n-\telse, if a downlink assignment for this TTI has been received for this Serving Cell on the PDCCH for the MAC entity's Semi-Persistent Scheduling C-RNTI:\n-\tif the NDI in the received HARQ information is 1:\n-\tconsider the NDI not to have been toggled;\n-\tindicate the presence of a downlink assignment and deliver the associated HARQ information to the HARQ entity for this TTI.\n-\telse, if the NDI in the received HARQ information is 0:\n-\tif PDCCH contents indicate SPS release:\n-\tclear the configured downlink assignment (if any);\n-\tif the timeAlignmentTimer, associated with the TAG containing the serving cell on which the acknowledgement for the downlink SPS release is to be transmitted, is running:\n-\tindicate a positive acknowledgement for the downlink SPS release to the physical layer.\n-\telse:\n-\tstore the downlink assignment and the associated HARQ information as configured downlink assignment;\n-\tinitialise (if not active) or re-initialise (if already active) the configured downlink assignment to start in this TTI, or in TTI according to N=0 in clause 5.10.1 for short TTI, and to recur according to rules in clause 5.10.1;\n-\tset the HARQ Process ID to the HARQ Process ID associated with this TTI;\n-\tconsider the NDI bit to have been toggled;\n-\tindicate the presence of a configured downlink assignment and deliver the stored HARQ information to the HARQ entity for this TTI.\n-\telse, if a downlink assignment for this TTI has been configured for this Serving Cell and there is no measurement gap in this TTI and there is no Sidelink Discovery Gap for Reception in this TTI; and\n-\tif this TTI is not an MBSFN subframe or the MAC entity is configured with transmission mode tm9 or tm10:\n-\tinstruct the physical layer to receive, in this TTI, transport block on the DL-SCH according to the configured downlink assignment and to deliver it to the HARQ entity;\n-\tset the HARQ Process ID to the HARQ Process ID associated with this TTI;\n-\tconsider the NDI bit to have been toggled;\n-\tindicate the presence of a configured downlink assignment and deliver the stored HARQ information to the HARQ entity for this TTI.\n-\tif the MAC entity is configured with rach-Skip or rach-SkipSCG and a UE Contention Resolution Identity MAC control element for this TTI has been received on the PDSCH indicated by the PDCCH of the SpCell addressed to the C-RNTI:\n-\tindicate to upper layer the successful reception of a PDCCH transmission addressed to the C-RNTI.\nFor configured downlink assignments, the HARQ Process ID associated with this TTI is derived from the following equation:\n-\tif the TTI is a subframe TTI:\n-\tHARQ Process ID = [floor(CURRENT_TTI/semiPersistSchedIntervalDL)] modulo numberOfConfSPS-Processes,\nwhere CURRENT_TTI=[(SFN * 10) + subframe number].\n-\telse:\n-\tHARQ Process ID = [floor(CURRENT_TTI/semiPersistSchedIntervalDL-sTTI)] modulo numberOfConfSPS-Processes-sTTI,\nwhere CURRENT_TTI = [(SFN * 10 * sTTI_Number_Per_Subframe) + subframe number * sTTI_Number_Per_Subframe + sTTI_number]. Refer to 5.10.1 for sTTI_Number_Per_Subframe and sTTI_number.\nFor BL UEs or UEs in enhanced coverage, CURRENT_TTI refers to the TTI where first transmission of repetition bundle takes place.\nWhen the MAC entity needs to read BCCH or BR-BCCH, the MAC entity may, based on the scheduling information from RRC:\n-\tif the UE is a BL UE or a UE in enhanced coverage:\n-\tthe redundancy version of the received downlink assignment for this TTI is determined by RVK = ceiling(3/2*k) modulo 4, where k depends on the type of system information message.\n-\tfor SystemInformationBlockType1-BR\n-\tif number of repetitions for PDSCH carrying SystemInformationBlockType1-BR is 4, k = floor(SFN/2) modulo 4, where SFN is the system frame number.\n-\telse if number of repetitions for PDSCH carrying SystemInformationBlockType1-BR is 8, k = SFN modulo 4, where SFN is the system frame number.\n-\telse if number of repetitions for PDSCH carrying SystemInformationBlockType1-BR is 16, k = (SFN*10+i) modulo 4, where SFN is the system frame number, and i denotes the subframe within the SFN.\nNOTE:\tthe set of subframes for SystemInformationBlockType1-BR when number of repetitions for PDSCH is 16 are given by Table 6.4.1-2 in TS 36.211 [7].\n-\tfor SystemInformation-BR messages, k=i modulo 4, i =0,1,…, nsw–1, where i denotes the subframe number within the SI window nsw;\n-\tindicate a downlink assignment and redundancy version for the dedicated broadcast HARQ process to the HARQ entity for this TTI.\n-\telse if a downlink assignment for this TTI has been received on the PDCCH for the SI-RNTI, except for NB-IoT;\n-\tif the redundancy version is not defined in the PDCCH format:\n-\tthe redundancy version of the received downlink assignment for this TTI is determined by RVK = ceiling(3/2*k) modulo 4, where k depends on the type of system information message: for SystemInformationBlockType1 message, k = (SFN/2) modulo 4, where SFN is the system frame number; for SystemInformation messages, k=i modulo 4, i =0,1,…, nsw–1, where i denotes the subframe number within the SI window nsw;\n-\tindicate a downlink assignment and redundancy version for the dedicated broadcast HARQ process to the HARQ entity for this TTI.\nWhen the MAC entity has SC-RNTI and/or G-RNTI, the MAC entity shall for each TTI during which it monitors PDCCH for SC-RNTI as specified in TS 36.331 [8] for UEs other than NB-IoT UEs, BL UEs or UEs in enhanced coverage and in clause 5.7a for NB-IoT UEs, BL UEs or UEs in enhanced coverage and for G-RNTI as specified in clause 5.7a and for each Serving Cell and cell that may be additionally configured as a Serving Cell according to the UE capabilities:\n-\tif a downlink assignment for this TTI and this Serving Cell has been received on the PDCCH for the MAC entity's SC-RNTI or G-RNTI:\n-\tattempt to decode the received data.\n-\tif the data which the MAC entity attempted to decode was successfully decoded for this TB:\n-\tdeliver the decoded MAC PDU to the disassembly and demultiplexing entity.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "5.3.2\tHARQ operation",
                            "text_content": "There is one HARQ entity at the MAC entity for each Serving Cell which maintains a number of parallel HARQ processes. Each HARQ process is associated with a HARQ process identifier. The HARQ entity directs HARQ information and associated TBs received on the DL-SCH to the corresponding HARQ processes (see clause 5.3.2.2).\nThe number of DL HARQ processes per HARQ entity is specified in TS 36.213 [2], clause 7.\nWhen the physical layer is configured for downlink spatial multiplexing, as specified in TS 36.213 [2], one or two TBs are expected per TTI and they are associated with the same HARQ process. Otherwise, one TB is expected per TTI.\nFor NB-IoT UEs or BL UEs or UEs in enhanced coverage, the parameter DL_REPETITION_NUMBER provides the number of transmissions repeated in a bundle. For each bundle, DL_REPETITION_NUMBER is set to a value provided by lower layers. Within a bundle, after the initial (re)transmission, DL_REPETITION_NUMBER-1 HARQ retransmissions follow. The HARQ feedback is transmitted for the bundle and a downlink assignment corresponding to a new transmission or a retransmission of the bundle is received after the last repetition of the bundle. A retransmission of a bundle is also a bundle. HARQ feedback may be disabled per HARQ process by configuring downlinkHARQ-FeedbackDisabled and/or by indication from lower layers.\nIf the MAC entity is configured with blindSlotSubslotPDSCH-Repetitions or blindSubframePDSCH-Repetitions on a serving cell (TS 36.331 [8]), the parameter DL_REPETITION_NUMBER provides the number of transmissions repeated in a bundle for a downlink assignment received on that serving cell. For each bundle, DL_REPETITION_NUMBER and the redundancy version for each transmission within a bundle are set to values provided by lower layers. Within a bundle, after the initial (re-)transmission, DL_REPETITION_NUMBER-1 HARQ retransmissions follow. The HARQ feedback is sent only one time for the bundle and after the last transmission of the bundle.\nIn addition to the broadcast HARQ process, NB-IoT has one or two DL HARQ processes.\nThe MAC entity shall:\n-\tIf a downlink assignment has been indicated for this TTI; or\n-\tIf this TTI is for a retransmission within a bundle:\n-\tallocate the TB(s) received from the physical layer and the associated HARQ information to the HARQ process indicated by the associated HARQ information.\n-\tIf a downlink assignment has been indicated for the broadcast HARQ process:\n-\tallocate the received TB to the broadcast HARQ process.\nNOTE:\tIn case of BCCH and BR-BCCH a dedicated broadcast HARQ process is used.\nFor each TTI where a transmission takes place for the HARQ process, one or two (in case of downlink spatial multiplexing) TBs and the associated HARQ information are received from the HARQ entity.\nFor each received TB and associated HARQ information, the HARQ process shall:\n-\tif the NDI, when provided, has been toggled compared to the value of the previous received transmission corresponding to this TB; or\n-\tif the HARQ process is equal to the broadcast process and if this is the first received transmission for the TB according to the system information schedule indicated by RRC; or\n-\tif this is the very first received transmission for this TB (i.e. there is no previous NDI for this TB):\n-\tconsider this transmission to be a new transmission.\n-\telse:\n-\tconsider this transmission to be a retransmission.\nThe MAC entity then shall:\n-\tif this is a new transmission:\n-\tattempt to decode the received data.\n-\telse if this is a retransmission:\n-\tif the data for this TB has not yet been successfully decoded:\n-\tcombine the received data with the data currently in the soft buffer for this TB and attempt to decode the combined data.\n-\tif the data which the MAC entity attempted to decode was successfully decoded for this TB; or\n-\tif the data for this TB was successfully decoded before:\n-\tif the HARQ process is equal to the broadcast process:\n-\tdeliver the decoded MAC PDU to upper layers.\n-\telse if this is the first successful decoding of the data for this TB:\n-\tdeliver the decoded MAC PDU to the disassembly and demultiplexing entity.\n-\tgenerate a positive acknowledgement (ACK) of the data in this TB.\n-\telse:\n-\treplace the data in the soft buffer for this TB with the data which the MAC entity attempted to decode.\n-\tgenerate a negative acknowledgement (NACK) of the data in this TB.\n-\tif the HARQ process is associated with a transmission indicated with a Temporary C-RNTI and the Contention Resolution is not yet successful (see clause 5.1.5); or\n-\tif the HARQ process is equal to the broadcast process; or\n-\tif the HARQ process is not associated with a transmission indicated with a PUR-RNTI and the timeAlignmentTimer, associated with the TAG containing the serving cell on which the HARQ feedback is to be transmitted, is stopped or expired; or\n-\tif the HARQ feedback is disabled for the corresponding HARQ process:\n-\tif harq-FeedbackEnablingforSPSactive is configured and the transmission is the first SPS PDSCH transmission after SPS activation:\n-\tindicate the generated positive or negative acknowledgement for this TB to the physical layer.\n-\telse:\n-\tdo not indicate the generated positive or negative acknowledgement to the physical layer.\n-\telse:\n-\tindicate the generated positive or negative acknowledgement for this TB to the physical layer.\nThe MAC entity shall ignore NDI received in all downlink assignments on PDCCH for its Temporary C-RNTI when determining if NDI on PDCCH for its C-RNTI has been toggled compared to the value in the previous transmission.\nNOTE 1:\tWhen the MAC entity is configured with more than one serving cell, UE behaviors for storing data to the soft buffer is specified in TS 36.213 [2].\nNOTE 2:\tIf the MAC entity receives a retransmission with a TB size different from the last valid TB size signalled for this TB, the UE behavior is left up to UE implementation.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "5.3.3\tDisassembly and demultiplexing",
                            "text_content": "The MAC entity shall disassemble and demultiplex a MAC PDU as defined in clause 6.1.2.\n",
                            "figures_meta_data": [],
                            "tables": []
                        }
                    ]
                },
                {
                    "title": "5.4\tUL-SCH data transfer",
                    "description": "",
                    "summary": "",
                    "text_content": "",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": [
                        {
                            "title": "5.4.1\tUL Grant reception",
                            "text_content": "In order to transmit on the UL-SCH the MAC entity must have a valid uplink grant (except for non-adaptive HARQ retransmissions) which it may receive dynamically on the PDCCH or in a Random Access Response or which may be configured semi-persistently or preallocated by RRC or provided by RRC for transmission using PUR (see clause 5.4.7). To perform requested transmissions, the MAC layer receives HARQ information from lower layers. When the physical layer is configured for uplink spatial multiplexing, the MAC layer can receive up to two grants (one per HARQ process) for the same TTI from lower layers.\nIf the MAC entity has a C-RNTI, a Semi-Persistent Scheduling C-RNTI, a UL Semi-Persistent Scheduling V-RNTI, a AUL C-RNTI, or a Temporary C-RNTI, the MAC entity shall for each TTI and for each Serving Cell belonging to a TAG that has a running timeAlignmentTimer and for each grant received for this TTI and for each SPS configuration that is indicated by the PDCCH addressed to UL Semi-Persistent Scheduling V-RNTI; or if the MAC entity has Preconfigured Uplink Resource RNTI, the MAC entity shall for each TTI and for each grant received for this TTI:\n-\tif an uplink grant for this TTI and this Serving Cell has been received on the PDCCH for the MAC entity's C-RNTI, Preconfigured Uplink Resource RNTI or Temporary C-RNTI; or\n-\tif an uplink grant for this TTI has been received in a Random Access Response:\n-\tif the uplink grant is for MAC entity's C-RNTI and if the previous uplink grant delivered to the HARQ entity for the same HARQ process was either an uplink grant received for the MAC entity's Semi-Persistent Scheduling C-RNTI, for the MAC entity's UL Semi-Persistent Scheduling V-RNTI, or a configured uplink grant for which the UL HARQ operation was not autonomous:\n-\tconsider the NDI to have been toggled for the corresponding HARQ process regardless of the value of the NDI.\n-\tdeliver the uplink grant and the associated HARQ information to the HARQ entity for this TTI.\n-\telse, if an uplink grant for this TTI has been received for this Serving Cell on the PDCCH for the MAC entity's Semi-Persistent Scheduling C-RNTI or for the MAC entity's UL Semi-Persistent Scheduling V-RNTI; or if an uplink grant for this TTI has been received for this Serving Cell on the PDCCH for the MAC entity's AUL C-RNTI:\n-\tif the NDI in the received HARQ information is 1:\n-\tconsider the NDI for the corresponding HARQ process not to have been toggled;\n-\tdeliver the uplink grant and the associated HARQ information to the HARQ entity for this TTI.\n-\telse if the NDI in the received HARQ information is 0:\n-\tif PDCCH contents indicate AUL release:\n-\ttrigger an AUL confirmation;\n-\tif an uplink grant for this TTI has been configured:\n-\tconsider the NDI bit for the corresponding HARQ process to have been toggled;\n-\tdeliver the configured uplink grant and the associated HARQ information to the HARQ entity for this TTI;\n-\telse if PDCCH contents indicate AUL activation:\n-\ttrigger an AUL confirmation;\n-\tstore the uplink grant and the associated HARQ information as configured uplink grant;\n-\tinitialise (if not active) or re-initialise (if already active) the configured uplink grant to start in this TTI and to recur according to rules in clause 5.23;\n-\tconsider the NDI bit for the corresponding HARQ process to have been toggled;\n-\tdeliver the configured uplink grant and the associated HARQ information to the HARQ entity for this TTI.\n-\telse if PDCCH contents indicate SPS release:\n-\tif the MAC entity is configured with skipUplinkTxSPS:\n-\ttrigger an SPS confirmation;\n-\tif an uplink grant for this TTI has been configured:\n-\tconsider the NDI bit for the corresponding HARQ process to have been toggled;\n-\tdeliver the configured uplink grant and the associated HARQ information to the HARQ entity for this TTI;\n-\telse:\n-\tclear the corresponding configured uplink grant (if any).\n-\telse:\n-\tif the MAC entity is configured with skipUplinkTxSPS:\n-\ttrigger an SPS confirmation;\n-\tstore the uplink grant and the associated HARQ information as configured uplink grant;\n-\tinitialise (if not active) or re-initialise (if already active) the configured uplink grant to start in this TTI, or in TTI according to N=0 in clause 5.10.2 for short TTI, and to recur according to rules in clause 5.10.2;\n-\tif UL HARQ operation is asynchronous, set the HARQ Process ID to the HARQ Process ID associated with this TTI;\n-\tconsider the NDI bit for the corresponding HARQ process to have been toggled;\n-\tdeliver the configured uplink grant and the associated HARQ information to the HARQ entity for this TTI.\n-\telse, if an uplink grant for this TTI has been configured for the Serving Cell and if UL HARQ operation is autonomous for the corresponding HARQ process:\n-\tif the HARQ_FEEDBACK is set to ACK for the corresponding HARQ process or if there is no uplink grant previously delivered to the HARQ entity for the same HARQ process:\n-\tconsider the NDI bit for the corresponding HARQ process to have been toggled.\n-\tif the aul-RetransmissionTimer is not running:\n-\tif there is no uplink grant previously delivered to the HARQ entity for the same HARQ process; or\n-\tif the previous uplink grant delivered to the HARQ entity for the same HARQ process was not an uplink grant received for the MAC entity's C-RNTI; or\n-\tif the HARQ_FEEDBACK is set to ACK for the corresponding HARQ process:\n-\tdeliver the configured uplink grant, and the associated HARQ information to the HARQ entity for this TTI.\n-\telse:\n-\tif this Serving Cell is the SpCell and an uplink grant for this TTI has been preallocated for the SpCell; or\n-\texcept for preconfigured uplink grant for PUR, if an uplink grant for this TTI has been configured for this Serving Cell:\n-\tif UL HARQ operation is asynchronous, set the HARQ Process ID to the HARQ Process ID associated with this TTI;\n-\tconsider the NDI bit for the corresponding HARQ process to have been toggled;\n-\tdeliver the configured or preallocated uplink grant, and the associated HARQ information to the HARQ entity for this TTI.\nNOTE 1:\tThe period of configured uplink grants is expressed in TTIs.\nNOTE 2:\tIf the MAC entity receives both a grant in a Random Access Response and a grant for its C-RNTI or Semi persistent scheduling C-RNTI requiring transmissions on the SpCell in the same UL subframe, the MAC entity may choose to continue with either the grant for its RA-RNTI or the grant for its C-RNTI or Semi persistent scheduling C-RNTI.\nNOTE 3:\tWhen a configured uplink grant is indicated during a measurement gap and indicates an UL-SCH transmission during a measurement gap, the MAC entity processes the grant but does not transmit on UL-SCH. When a configured uplink grant is indicated during a Sidelink Discovery gap for reception and indicates an UL-SCH transmission during a Sidelink Discovery gap for transmission with a SL-DCH transmission, the MAC entity processes the grant but does not transmit on UL-SCH. When a configured uplink grant indicates an UL-SCH transmission during a V2X sidelink communication transmission and transmission of V2X sidelink communication is prioritized as described in clause 5.14.1.2.2, the MAC entity processes the grant but does not transmit on UL-SCH.\nNOTE 4:\tThe NDI transmitted in the PDCCH for the MAC entity's AUL C-RNTI is set to '0' (TS 36.212 [5]).\nExcept for NB-IoT, for configured uplink grants without harq-ProcID-offset, if UL HARQ operation is not autonomous, the HARQ Process ID associated with this TTI is derived from the following equation for asynchronous UL HARQ operation:\n-\tif the TTI is a subframe TTI:\n-\tHARQ Process ID = [floor(CURRENT_TTI/semiPersistSchedIntervalUL)] modulo numberOfConfUlSPS-Processes,\nwhere CURRENT_TTI=[(SFN * 10) + subframe number] and it refers to the subframe where the first transmission of a bundle takes place.\n-\telse:\n-\tHARQ Process ID = [floor(CURRENT_TTI/semiPersistSchedIntervalUL-sTTI)] modulo numberOfConfUlSPS-Processes-sTTI,\nwhere CURRENT_TTI = [(SFN * 10 * sTTI_Number_Per_Subframe) + subframe number * sTTI_Number_Per_Subframe + sTTI_number] and it refers to the short TTI occasion where the first transmission of a bundle takes place. Refer to 5.10.2 for sTTI_Number_Per_Subframe and sTTI_number.\nFor preallocated uplink grants the HARQ Process ID associated with this TTI is derived from the following equation for asynchronous UL HARQ operation:\nHARQ Process ID = [floor(CURRENT_TTI/ul-SchedInterval)] modulo numberOfConfUL-Processes,\nwhere CURRENT_TTI=subframe number and it refers to the subframe where the first transmission of a bundle takes place.\nFor configured uplink grants, if UL HARQ operation is autonomous, the HARQ Process ID associated with this TTI for transmission on this Serving Cell is selected by the UE implementation from the HARQ process IDs that are configured for autonomous UL HARQ operation by upper layers in aul-HARQ-Processes (TS 36.331 [8]).\nFor configured uplink grants with harq-ProcID-offset, the HARQ Process ID associated with this TTI is derived from the following equation for asynchronous UL HARQ operation:\n-\tif the TTI is a subframe TTI:\n-\tHARQ Process ID = [floor(CURRENT_TTI/semiPersistSchedIntervalUL)] modulo numberOfConfUlSPS-Processes + harq-ProcID-offset,\nwhere CURRENT_TTI = [(SFN * 10) + subframe number] and it refers to the subframe where the first transmission of a bundle takes place.\n-\telse:\n-\tHARQ Process ID = [floor(CURRENT_TTI/semiPersistSchedIntervalUL-sTTI)] modulo numberOfConfUlSPS-Processes-sTTI + harq-ProcID-offset,\nwhere CURRENT_TTI = [(SFN * 10 * sTTI_Number_Per_Subframe) + subframe number * sTTI_Number_Per_Subframe + sTTI_number] and it refers to the short TTI occasion where the first transmission of a bundle takes place. Refer to 5.10.2 for sTTI_Number_Per_Subframe and sTTI_number. For NB-IoT, for configured uplink grants for BSR, the HARQ Process ID is set to 0.\nIf the MAC entity is configured with Short Processing Time or short TTI and if current_TTI is a subframe TTI, the HARQ Process ID associated with this TTI is derived from the following equation for synchronous UL HARQ operation:\nHARQ Process ID = [SFN * number_of_UL_PUSCH_SFs_per_radio_frame + index_of_UL_PUSCH_SF] modulo number_of_UL_HARQ_processes.\nwhere number_of_UL_PUSCH_SFs_per_radio_frame is the number of subframes that can be used for PUSCH (UL PUSCH subframe) per radio frame:\n-\tFor FDD serving cells and serving cells operating according to Frame structure Type 3, all 10 subframes in a radio frame represent UL PUSCH subframes;\n-\tFor TDD serving cells, all uplink subframes of the TDD UL/DL configuration indicated by tdd-Config, as specified in TS 36.331 [8] of the cell represent UL PUSCH subframes and additionally the subframes including UpPTS if the cell is configured with symPUSCH-UpPts-r14;\nand index_of_UL_PUSCH_SF is the index of a subframe that can be used for PUSCH within the radio frame, and number_of_UL_HARQ_processes is the number of parallel HARQ processes per HARQ entity for subframe TTI as specified in TS 36.213 [2], clause 8.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "5.4.2\tHARQ operation",
                            "text_content": "There is one HARQ entity at the MAC entity for each Serving Cell with configured uplink, which maintains a number of parallel HARQ processes allowing transmissions to take place continuously while waiting for the HARQ feedback on the successful or unsuccessful reception of previous transmissions.\nThe number of parallel HARQ processes per HARQ entity is specified in TS 36.213 [2], clause 8. NB-IoT has one or two UL HARQ processes.\nWhen the physical layer is configured for uplink spatial multiplexing, as specified in TS 36.213 [2], there are two HARQ processes associated with a given TTI. Otherwise there is one HARQ process associated with a given TTI.\nAt a given TTI, if an uplink grant is indicated for the TTI, the HARQ entity identifies the HARQ process(es) for which a transmission should take place. It also routes the received HARQ feedback (ACK/NACK information), MCS and resource, relayed by the physical layer, to the appropriate HARQ process(es).\nIn asynchronous HARQ operation, a HARQ process is associated with a TTI based on the received UL grant except for UL grant in RAR. Except for NB-IoT UE configured with a single HARQ process, each asynchronous HARQ process is associated with a HARQ process identifier. For UL transmission with UL grant in RAR and for transmission using PUR, HARQ process identifier 0 is used. HARQ feedback is not applicable for asynchronous UL HARQ except if mpdcch-UL-HARQ-ACK-FeedbackConfig is configured.\nIn autonomous HARQ operation, HARQ feedback is applicable.\nWhen TTI bundling is configured, the parameter TTI_BUNDLE_SIZE provides the number of TTIs of a TTI bundle. TTI bundling operation relies on the HARQ entity for invoking the same HARQ process for each transmission that is part of the same bundle. Within a bundle HARQ retransmissions are non-adaptive and triggered without waiting for feedback from previous transmissions according to TTI_BUNDLE_SIZE. The HARQ feedback of a bundle is only received for the last TTI of the bundle (i.e the TTI corresponding to TTI_BUNDLE_SIZE), regardless of whether a transmission in that TTI takes place or not (e.g. when a measurement gap occurs). A retransmission of a TTI bundle is also a TTI bundle. TTI bundling is not supported when the MAC entity is configured with one or more SCells with configured uplink.\nUplink HARQ operation is asynchronous for NB-IoT UEs, BL UEs or UEs in enhanced coverage except for the repetitions within a bundle, in serving cells configured with pusch-EnhancementsConfig, serving cells operating according to Frame Structure Type 3, for HARQ processes scheduled using short TTI, for HARQ processes scheduled using Short Processing Time, and for HARQ processes associated with an SPS configuration with totalNumberPUSCH-SPS-STTI-UL-Repetitions or totalNumberPUSCH-SPS-UL-Repetitions except for the repetitions within a bundle.\nFor serving cells configured with pusch-EnhancementsConfig, NB-IoT UEs, BL UEs or UEs in enhanced coverage, the parameter UL_REPETITION_NUMBER provides the number of transmission repetitions within a bundle. For each bundle, UL_REPETITION_NUMBER is set to a value provided by lower layers. Bundling operation relies on the HARQ entity for invoking the same HARQ process for each transmission that is part of the same bundle. Within a bundle HARQ retransmissions are non-adaptive and are triggered without waiting for feedback from previous transmissions according to UL_REPETITION_NUMBER. An uplink grant corresponding to a new transmission of the bundle is only received after the last repetiton of the bundle if mpdcch-UL-HARQ-ACK-FeedbackConfig is not configured. An uplink grant corresponding to a retransmission of the bundle is only received after the last repetition of the bundle. For UEs configured with mpdcch-UL-HARQ-ACK-FeedbackConfig, repetitions within a bundle are stopped if an UL HARQ-ACK feedback or an uplink grant corresponding to a new transmission of the bundle is received on PDCCH during the bundle transmission. A retransmission of a bundle is also a bundle.\nFor a SPS configuration with totalNumberPUSCH-SPS-STTI-UL-Repetitions or totalNumberPUSCH-SPS-UL-Repetitions (TS 36.331 [8]), the parameter totalNumberPUSCH-SPS-STTI-UL-Repetitions or totalNumberPUSCH-SPS-UL-Repetitions provides the number of transmission repetitions within a configured grant bundle. Bundling operation relies on the HARQ entity invoking the same HARQ process for each transmission that is part of the same bundle. Within a bundle HARQ retransmissions are non-adaptive and are triggered without waiting for feedback from previous transmissions.\nTTI bundling is not supported for RN communication with the E-UTRAN in combination with an RN subframe configuration.\nFor transmission of Msg3 during Random Access (see clause 5.1.5) TTI bundling does not apply. For UEs configured with pusch-EnhancementsConfig performing contention free Random Access, NB-IoT UEs, BL UEs or UEs in enhanced coverage, uplink repetition bundling is used for transmission of Msg3.\nFor each TTI, the HARQ entity shall:\n-\tidentify the HARQ process(es) associated with this TTI, and for each identified HARQ process:\n-\tif an uplink grant has been indicated for this process and this TTI:\n-\tif the received grant was addressed neither to a Temporary C-RNTI nor to a PUR-RNTI on PDCCH and if the NDI provided in the associated HARQ information has been toggled compared to the value in the previous transmission of this HARQ process; or\n-\tif the uplink grant was received on PDCCH for the C-RNTI and the HARQ buffer of the identified process is empty; or\n-\tif the uplink grant was provided by RRC for transmission using PUR; or\n-\tif the uplink grant was received in a Random Access Response:\n-\tif there is a MAC PDU in the Msg3 buffer and the uplink grant was received in a Random Access Response:\n-\tif the MAC PDU in the Msg3 buffer contains the Data Volume and Power Headroom Report MAC control element:\n-\tthe MAC entity shall update the Data Volume and Power Headroom Report MAC control element in the MAC PDU in the Msg3 buffer.\n-\tif the UE is an NB-IoT UE and cqi-Reporting is configured by upper layers:\n-\tthe MAC entity shall update the MAC PDU in the Msg3 buffer in accordance with the DL channel quality measurement result.\n-\tobtain the MAC PDU to transmit from the Msg3 buffer.\n-\telse if the uplink grant is a configured grant with totalNumberPUSCH-SPS-STTI-UL-Repetitions or totalNumberPUSCH-SPS-UL-Repetitions and if a retransmission within a bundle is triggered for another configured grant with totalNumberPUSCH-SPS-STTI-UL-Repetitions or totalNumberPUSCH-SPS-UL-Repetitions in this TTI:\n-\tignore the uplink grant.\n-\telse if the MAC entity is configured with semiPersistSchedIntervalUL shorter than 10 subframes and if the uplink grant is a configured grant, and if the HARQ buffer of the identified HARQ process is not empty, and if HARQ_FEEDBACK of the identified HARQ process is NACK; or if the MAC entity is configured with ul-SchedInterval shorter than 10 subframes and if the uplink grant is a preallocated uplink grant, and if the HARQ buffer of the identified HARQ process is not empty, and if HARQ_FEEDBACK of the identified HARQ process is NACK:\n-\tinstruct the identified HARQ process to generate a non-adaptive retransmission.\n-\telse:\n-\tif the UL HARQ operation is synchronous, and the uplink grant is a preallocated uplink grant, and a MAC PDU has previously been obtained from the \"Multiplexing and assembly\" entity during this handover attempt:\n-\tignore the uplink grant;\n-\telse:\n-\tobtain the MAC PDU to transmit from the \"Multiplexing and assembly\" entity, if any;\n-\tif a MAC PDU to transmit has been obtained:\n-\tdeliver the MAC PDU and the uplink grant and the HARQ information to the identified HARQ process;\n-\tinstruct the identified HARQ process to trigger a new transmission.\n-\telse:\n-\tflush the HARQ buffer of the identified HARQ process.\n-\telse:\n-\tif the MAC entity is configured with skipUplinkTxSPS and if the uplink grant received on PDCCH was addressed to the Semi-Persistent Scheduling C-RNTI or to the UL Semi-Persistent Scheduling V-RNTI and if the HARQ buffer of the identified process is empty; or\n-\tif UL HARQ operation is autonomous for the identified HARQ process and if the uplink grant is a configured UL grant and if the HARQ buffer of the identified process is empty; or\n-\tif the previous uplink grant delivered to the HARQ entity for the same HARQ process was a configured uplink grant for which the UL HARQ operation was autonomous, and if the corresponding UL grant size was different from the UL grant size indicated by the uplink grant for this TTI:\n-\tignore the uplink grant;\n-\telse:\n-\tdeliver the uplink grant and the HARQ information (redundancy version) to the identified HARQ process;\n-\tif UL HARQ operation is autonomous for the identified HARQ process and if the uplink grant is a configured UL grant:\n-\tinstruct the identified HARQ process to generate a non adaptive retransmission.\n-\telse:\n-\tinstruct the identified HARQ process to generate an adaptive retransmission.\n-\telse, if the HARQ buffer of this HARQ process is not empty:\n-\tinstruct the identified HARQ process to generate a non-adaptive retransmission;\n-\tif the non-adaptive retransmission collides with a transmission of another HARQ process scheduled using Short Processing Time:\n-\tinstruct the identified HARQ process to generate a positive acknowledgement (ACK) of the data in the corresponding TB.\nWhen determining if NDI has been toggled compared to the value in the previous transmission the MAC entity shall ignore NDI received in all uplink grants on PDCCH for its Temporary C-RNTI and PUR-RNTI.\nEach HARQ process is associated with a HARQ buffer.\nFor synchronous HARQ, each HARQ process shall maintain a state variable CURRENT_TX_NB, which indicates the number of transmissions that have taken place for the MAC PDU currently in the buffer, and a state variable HARQ_FEEDBACK, which indicates the HARQ feedback for the MAC PDU currently in the buffer. When the HARQ process is established, CURRENT_TX_NB shall be initialized to 0.\nThe sequence of redundancy versions is 0, 2, 3, 1. The variable CURRENT_IRV is an index into the sequence of redundancy versions. This variable is up-dated modulo 4. For serving cells configured with pusch-EnhancementsConfig, BL UEs or UEs in enhanced coverage see clause 8.6.1 in TS 36.213 [2] for the sequence of redundancy versions and redundancy version determination. For NB-IoT UEs see clause 16.5.1.2 in TS 36.213 [2] for the sequence of redundancy versions and redundancy version determination. For an SPS configuration with totalNumberPUSCH-SPS-STTI-UL-Repetitions or totalNumberPUSCH-SPS-UL-Repetitions (TS 36.331 [8]), the redundancy version for each transmission within a bundle are determined by rv-SPS-STTI-UL-Repetitions or rv-SPS-UL-Repetitions in the SPS configuration (TS 36.331 [8]).\nFor NB-IoT UEs, BL UEs or UEs in enhanced coverage for UL_REPETITION_NUMBER for Mode B operation, the same redundancy version is used multiple times before cycling to the next redundancy version as specified in clauses 16.5.1.2, 8.6.1 and 7.1.7.1 in TS 36.213 [2].\nNew transmissions are performed on the resource and with the MCS indicated on PDCCH or Random Access Response. Adaptive retransmissions are performed on the resource and, if provided, with the MCS indicated on PDCCH. Non-adaptive retransmission is performed on the same resource and with the same MCS as was used for the last made transmission attempt.\nFor synchronous HARQ, the MAC entity is configured with a maximum number of HARQ transmissions and a maximum number of Msg3 HARQ transmissions by RRC: maxHARQ-Tx and maxHARQ-Msg3Tx respectively. For transmissions on all HARQ processes and all logical channels except for transmission of a MAC PDU stored in the Msg3 buffer, the maximum number of transmissions shall be set to maxHARQ-Tx. For transmission of a MAC PDU stored in the Msg3 buffer, the maximum number of transmissions shall be set to maxHARQ-Msg3Tx.\nFor autonomous HARQ, each HARQ process shall maintain a state variable HARQ_FEEDBACK, which indicates the HARQ feedback for the MAC PDU currently in the buffer, and a timer aul-RetransmissionTimer which prohibits new transmission or retransmission for the same HARQ process on the configured autonomous uplink when the timer is running.\nWhen the HARQ feedback is received for this TB, the HARQ process shall:\n-\tset HARQ_FEEDBACK to the received value;\n-\tif running, stop the aul-RetransmissionTimer.\nWhen an uplink grant addressed to C-RNTI is received for this HARQ process and if the UL HARQ operation is autonomous, the HARQ process shall:\n-\tif running, stop the aul-RetransmissionTimer.\nWhen PUSCH transmission is performed for this TB and if the uplink grant is a configured grant for the MAC entity's AUL C-RNTI, the HARQ process shall:\n-\tstart or restart the aul-RetransmissionTimer.\nIf the HARQ entity requests a new transmission, the HARQ process shall:\n-\tif UL HARQ operation is synchronous:\n-\tset CURRENT_TX_NB to 0;\n-\tset HARQ_FEEDBACK to NACK;\n-\tset CURRENT_IRV to 0;\n-\telse:\n-\tif UL HARQ operation is autonomous asychronous:\n-\tset HARQ_FEEDBACK to NACK.\n-\tif the uplink grant was addressed to the AUL C-RNTI:\n-\tset CURRENT_IRV to 0.\n-\telse:\n-\tset CURRENT_IRV to the index corresponding to the redundancy version value provided in the HARQ information;\n-\tstore the MAC PDU in the associated HARQ buffer;\n-\tstore the uplink grant received from the HARQ entity;\n-\tgenerate a transmission as described below.\nIf the HARQ entity requests a retransmission, the HARQ process shall:\n-\tif UL HARQ operation is synchronous:\n-\tincrement CURRENT_TX_NB by 1;\n-\tif the HARQ entity requests an adaptive retransmission:\n-\tstore the uplink grant received from the HARQ entity;\n-\tset CURRENT_IRV to the index corresponding to the redundancy version value provided in the HARQ information;\n-\tif UL HARQ operation is synchronous; or\n-\tif UL HARQ operation is autonomous:\n-\tset HARQ_FEEDBACK to NACK;\n-\tgenerate a transmission as described below.\n-\telse if the HARQ entity requests a non-adaptive retransmission:\n-\tif UL HARQ operation is asynchronous or HARQ_FEEDBACK = NACK:\n-\tif both skipUplinkTxSPS and fixedRV-NonAdaptive are configured and the uplink grant of the initial transmission of this HARQ process was performed on a configured grant and UL HARQ operation is not autonomous; or\n-\tif the uplink grant is a preallocated uplink grant:\n-\tset CURRENT_IRV to 0;\n-\telse if UL HARQ operation is autonomous:\n-\tset CURRENT_IRV to the index corresponding to the redundancy version value selected by the UE implementation.\n-\tgenerate a transmission as described below.\nNOTE 1:\tWhen receiving a HARQ ACK alone, the MAC entity keeps the data in the HARQ buffer.\nNOTE 2:\tWhen no UL-SCH transmission can be made due to the occurrence of a measurement gap or a Sidelink Discovery Gap for Transmission, or prioritization of V2X sidelink communication transmission described in clause 5.14.1.2.2, no HARQ feedback can be received and a non-adaptive retransmission follows.\nNOTE 3:\tFor asynchronous HARQ operation, UL retransmissions are triggered only by adaptive retransmission grants, except for retransmissions within a bundle.\nTo generate a transmission, the HARQ process shall:\n-\tif the MAC PDU was obtained from the Msg3 buffer; or\n-\tif Sidelink Discovery Gaps for Transmission are not configured by upper layers, and there is no measurement gap at the time of the transmission and, in case of retransmission, the retransmission does not collide with a transmission for a MAC PDU obtained from the Msg3 buffer in this TTI; or\n-\tif Sidelink Discovery Gaps for Transmission are configured by upper layers, and there is no measurement gap at the time of the transmission and, in case of retransmission, the retransmission does not collide with a transmission for a MAC PDU obtained from the Msg3 buffer, and there is no Sidelink Discovery Gap for Transmission in this TTI; or\n-\tif Sidelink Discovery Gaps for Transmission are configured by upper layers, and there is no measurement gap at the time of the transmission and, in case of retransmission, the retransmission does not collide with a transmission for a MAC PDU obtained from the Msg3 buffer, and there is a Sidelink Discovery Gap for Transmission, and there is no configured grant for transmission on SL-DCH in this TTI:\n-\tif there is neither transmission of V2X sidelink communication on SL-SCH nor transmission of NR sidelink communication in this TTI; or\n-\tif the transmission of the MAC PDU is prioritized over sidelink transmission:\n-\tinstruct the physical layer to generate a transmission according to the stored uplink grant with the redundancy version corresponding to the CURRENT_IRV value;\n-\tincrement CURRENT_IRV by 1 if UL HARQ operation is not autonomous;\n-\tif UL HARQ operation is synchronous and there is a measurement gap or Sidelink Discovery Gap for Reception at the time of the HARQ feedback reception for this transmission and if the MAC PDU was not obtained from the Msg3 buffer:\n-\tset HARQ_FEEDBACK to ACK at the time of the HARQ feedback reception for this transmission.\nAfter performing above actions, if UL HARQ operation is synchronous the HARQ process then shall:\n-\tif CURRENT_TX_NB = maximum number of transmissions – 1:\n-\tflush the HARQ buffer;\nThe transmission of the MAC PDU is prioritized over sidelink transmission or can be performed simultaneously with sidelink transmission if one of the following conditions is met:\n-\tif there are both a configured grant for transmission of V2X sidelink communication on SL-SCH in this TTI and a sidelink grant for transmission of NR sidelink communication as described in clause 5.22.1.1 of TS 38.321 [24] at the time of the transmission, and neither the transmissions of V2X sidelink communication is prioritized as described in clause 5.14.1.2.2 nor the transmission of NR sidelink communication is prioritized as described in clause 5.22.1.3.1a of TS 38.321 [24]; or\n-\tif there are both a configured grant for transmission of V2X sidelink communication on SL-SCH in this TTI and a sidelink grant for transmission of NR sidelink communication as described in clause 5.22.1.1 of TS 38.321 [24] at the time of the transmission, and the MAC entity is able to perform this UL transmission simultaneously with the transmissions of V2X sidelink communication and/or the transmission of NR sidelink communication; or\n-\tif there is only configured grant(s) for transmission of V2X sidelink communication on SL-SCH in this TTI, and either none of the transmissions of V2X sidelink communication is prioritized or the MAC entity is able to perform this UL transmission and the transmissions of V2X sidelink communication simultaneously; or\n-\tif there is only a sidelink grant for transmission of NR sidelink communication in this TTI as described in clause 5.22.1.1 of TS 38.321 [24], and either no transmission of NR sidelink communication is prioritized as described in clause 5.22.1.3.1a of TS 38.321 [24] or the MAC entity is able to perform this UL transmission simultaneously with the transmission of NR sidelink communication; or\n-\tif there are both a configured grant for transmission of V2X sidelink communication on SL-SCH in this TTI and a sidelink grant for transmission of NR sidelink communication as described in clause 5.22.1.1 of TS 38.321 [24] at the time of the transmission, and either only the transmissions of V2X sidelink communication is prioritized as described in clause 5.14.1.2.2 or only the transmission of NR sidelink communication is prioritized as described in clause 5.22.1.3.1a of TS 38.321 [24] and the MAC entity is able to perform this UL transmission simultaneously with the prioritized transmission of V2X sidelink communication or NR sidelink communication.\nNOTE 4:\tAmong the UL transmissions where the MAC entity is able to perform all transmissions of V2X sidelink communication prioritized simultaneously, if there are more than one UL transmission which the MAC entity is not able to perform simultaneously, it is up to UE implementation whether this UL transmission is performed.\nNOTE 5:\tAmong the UL transmissions that the MAC entity is able to perform simultaneously with the transmission of NR sidelink communication prioritized, if there are more than one UL transmission which the MAC entity is not able to perform simultaneously, it is up to UE implementation whether this UL transmission is performed.\nNOTE 6:\tAmong the UL transmissions where the MAC entity is able to perform all transmissions of V2X sidelink communication prioritized simultaneously with the transmission of NR sidelink communication prioritized, if there are more than one UL transmission which the MAC entity is not able to perform simultaneously, it is up to UE implementation whether this UL transmission is performed.\nNOTE 7:\tIf there is a sidelink grant for transmission of NR sidelink communication in this TTI as described in clause 5.22.1.1 of TS 38.321 [24] and the MAC entity is not able to perform this UL transmission simultaneously with the transmission of NR sidelink communication, and prioritization-related information is not available prior to the time of the transmission due to processing time restriction, it is up to UE implementation whether this UL transmission is performed.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "5.4.3\tMultiplexing and assembly",
                            "text_content": "The Logical Channel Prioritization procedure is applied when a new transmission is performed.\nRRC controls the scheduling of uplink data by signalling for each logical channel: priority where an increasing priority value indicates a lower priority level, prioritisedBitRate which sets the Prioritized Bit Rate (PBR), bucketSizeDuration which sets the Bucket Size Duration (BSD), and optionally allowedTTI-Lengths which sets the allowed TTI lengths. For NB-IoT, prioritisedBitRate, bucketSizeDuration and the corresponding steps of the Logical Channel Prioritisation procedure (i.e., Step 1 and Step 2 below) are not applicable.\nThe MAC entity shall maintain a variable Bj for each logical channel j. Bj shall be initialized to zero when the related logical channel is established, and incremented by the product PBR × TTI duration for each TTI, where PBR is Prioritized Bit Rate of logical channel j. However, the value of Bj can never exceed the bucket size and if the value of Bj is larger than the bucket size of logical channel j, it shall be set to the bucket size. The bucket size of a logical channel is equal to PBR × BSD, where PBR and BSD are configured by upper layers.\nBefore the successful completion of the contention based Random Access procedure initiated for DAPS handover, the target MAC entity shall not select the logical channel(s) corresponding to non-DAPS DRB(s) for the uplink grant received in a Random Access Response. The source MAC entity shall select only the logical channel(s) corresponding to DAPS DRB(s) during DAPS handover.\nThe MAC entity shall perform the following Logical Channel Prioritization procedure when a new transmission is performed on an UL grant with a certain TTI length:\n-\tThe MAC entity shall allocate resources to the logical channels that are allowed to transmit using the TTI length of the grant, in the following steps:\n-\tStep 1: All the allowed logical channels with Bj > 0 are allocated resources in a decreasing priority order. If the PBR of a logical channel is set to \"infinity\", the MAC entity shall allocate resources for all the data that is available for transmission on the logical channel before meeting the PBR of the lower priority logical channel(s);\n-\tStep 2: the MAC entity shall decrement Bj by the total size of MAC SDUs served to logical channel j in Step 1;\nNOTE 1:\tThe value of Bj can be negative.\n-\tStep 3: if any resources remain, all the allowed logical channels are served in a strict decreasing priority order (regardless of the value of Bj) until either the data for that logical channel or the UL grant is exhausted, whichever comes first. Logical channels configured with equal priority should be served equally.\n-\tThe UE shall also follow the rules below during the scheduling procedures above:\n-\tthe UE should not segment an RLC SDU (or partially transmitted SDU or retransmitted RLC PDU) if the whole SDU (or partially transmitted SDU or retransmitted RLC PDU) fits into the remaining resources of the associated MAC entity;\n-\tif the UE segments an RLC SDU from the logical channel, it shall maximize the size of the segment to fill the grant of the associated MAC entity as much as possible;\n-\tthe UE should maximise the transmission of data.\n-\tif the MAC entity is given an UL grant size that is equal to or larger than 4 bytes while having data available for transmission, the MAC entity shall not transmit only padding BSR and/or padding (unless the UL grant size is less than 7 bytes and an AMD PDU segment needs to be transmitted);\n-\tfor transmissions on serving cells operating according to Frame Structure Type 3, the MAC entity shall only consider logical channels for which laa-UL-Allowed has been configured;\n-\tif a logical channel has been configured with lch-CellRestriction and if PDCP duplication within the same MAC entity (i.e. CA duplication) is activated, for this logical channel the MAC entity shall consider the cells indicated by lch-CellRestriction to be restricted for transmission.\n-\tthe MAC entity shall map the logical channel configured with allowedHARQ-mode to the HARQ process with corresponding UL HARQ mode for transmission.\n-\tfor NB-IoT UEs, BL UEs or UEs in enhanced coverage, if edt-SmallTBS-Enabled is set to TRUE for the corresponding PRACH resource, the UE shall choose a TB size among the set of possible TB sizes as described in clauses 8.6.2 and 16.3.3 of TS 36.213 [2]\nThe MAC entity shall not transmit data for a logical channel corresponding to a radio bearer that is suspended (the conditions for when a radio bearer is considered suspended are defined in TS 36.331 [8]).\nIf the MAC PDU includes only the MAC CE for padding BSR or periodic BSR with zero MAC SDUs and there is no aperiodic CSI requested for this TTI, as specified in TS 36.213 [2], the MAC entity shall not generate a MAC PDU for the HARQ entity in the following cases:\n-\tin case the MAC entity is configured with skipUplinkTxDynamic and the grant indicated to the HARQ entity was addressed to a C-RNTI; or\n-\tin case the MAC entity is configured with skipUplinkTxSPS and the grant indicated to the HARQ entity is a configured uplink grant activated by the MAC entity's Semi-Persistent Scheduling C-RNTI or by the MAC entity's UL Semi-Persistent Scheduling V-RNTI; or\n-\tin case the grant indicated to the HARQ entity is a configured uplink grant activated by the MAC entity's AUL C-RNTI; or\n-\tin case the grant indicated to the HARQ entity is a preconfigured uplink grant.\nNOTE 1a:\tIf at least one MAC PDU is to be generated for the HARQ entity for this TTI, the MAC entity generates MAC PDUs corresponding to all UL grants indicated to the HARQ entity for this TTI.\nFor the Logical Channel Prioritization procedure, the MAC entity shall take into account the following relative priority in decreasing order:\n-\tMAC control element for C-RNTI or data from UL-CCCH;\n-\tMAC control element for DPR;\n-\tMAC control element for SPS confirmation;\n-\tMAC control element for AUL confirmation;\n-\tMAC control element for Timing Advance Report;\n-\tMAC control element for GNSS Validity Duration Report;\n-\tMAC control element for BSR, with exception of BSR included for padding;\n-\tMAC control element for PHR, Extended PHR, or Dual Connectivity PHR;\n-\tMAC control element for Sidelink BSR, with exception of Sidelink BSR included for padding;\n-\tMAC control element for DCQR and AS RAI, with exception of when DCQR is to be included in Msg3;\n-\tdata from any Logical Channel, except data from UL-CCCH;\n-\tMAC control element for DCQR and AS RAI, when DCQR is to be included in Msg3;\n-\tMAC control element for Recommended bit rate query;\n-\tMAC control element for BSR included for padding;\n-\tMAC control element for Sidelink BSR included for padding.\nWhen AS RAI has been triggered, DCQR and AS RAI MAC control element shall have higher priority than data from any Logical Channel, except data from UL-CCCH, only if after logical channel prioritization including AS RAI in the resulting MAC PDU does not require segmenting RLC SDU. Otherwise data from any Logical Channel shall have higher priority than DCQR and AS RAI MAC control element.\nNOTE 2:\tWhen the MAC entity is requested to transmit multiple MAC PDUs in one TTI, steps 1 to 3 and the associated rules may be applied either to each grant independently or to the sum of the capacities of the grants. Also the order in which the grants are processed is left up to UE implementation. It is up to the UE implementation to decide in which MAC PDU a MAC control element is included when MAC entity is requested to transmit multiple MAC PDUs in one TTI. When the UE is requested to generate MAC PDU(s) in two MAC entities in one TTI, it is up to UE implementation in which order the grants are processed.\nThe MAC entity shall multiplex MAC control elements and MAC SDUs in a MAC PDU according to clauses 5.4.3.1 and 6.1.2.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "5.4.4\tScheduling Request",
                            "text_content": "The Scheduling Request (SR) is used for requesting UL-SCH resources for new transmission.\nWhen an SR is triggered, it shall be considered as pending until it is cancelled. All pending SR(s) shall be cancelled and sr-ProhibitTimer and ssr-ProhibitTimer shall be stopped when a MAC PDU is assembled and this PDU includes a BSR which contains buffer status up to (and including) the last event that triggered a BSR (see clause 5.4.5), or, if all pending SR(s) are triggered by Sidelink BSR, when a MAC PDU is assembled and this PDU includes a Sidelink BSR which contains buffer status up to (and including) the last event that triggered a Sidelink BSR (see clause 5.14.1.4), or, if all pending SR(s) are triggered by Sidelink BSR, when upper layers configure autonomous resource selection, or when the UL grant(s) can accommodate all pending data available for transmission.\nIf the MAC entity has resources for SR configured on only one of SPUCCH and PUCCH, that SR resource is valid for all logical channels. If the MAC entity has resources for SR configured on both PUCCH and SPUCCH, MAC entity shall consider all logical channels that have triggered an SR (and at retxBSR-Timer expiry, MAC entity shall consider all logical channels, belonging to a LCG, with data available for transmission):\n-\tPUCCH resources for SR are valid if logicalChannelSr-Restriction is not configured, or if logicalChannelSr-Restriction allows SR on PUCCH, for any of the logical channels;\n-\tSPUCCH resources for SR are valid if logicalChannelSr-Restriction is not configured, or if logicalChannelSr-Restriction allows SR on SPUCCH, for any of the logical channels.\nIf an SR is triggered and there is no other SR pending, the MAC entity shall set the SR_COUNTER and the SSR_COUNTER to 0.\nAs long as one SR is pending, the MAC entity shall for each TTI:\n-\tif no UL-SCH resources are available for a transmission in this TTI:\n-\tExcept for NB-IoT:\n-\tif the MAC entity has no valid PUCCH nor valid SPUCCH resource for SR configured in any TTI:\n-\tif the MAC entity is a MCG MAC entity and rach-Skip is not configured; or\n-\tif the MAC entity is a SCG MAC entity and rach-SkipSCG is not configured:\n-\tinitiate a Random Access procedure (see clause 5.1) on the corresponding SpCell and cancel all pending SRs;\n-\telse if this TTI is not part of a measurement gap or Sidelink Discovery Gap for Transmission, and if transmission of V2X sidelink communication is not prioritized in this TTI as described in clause 5.14.1.2.2:\n-\tif the MAC entity has at least one valid SPUCCH resource for SR configured for this TTI and if ssr-ProhibitTimer is not running:\n-\tif SSR_COUNTER < dssr-TransMax:\n-\tincrement SSR_COUNTER by 1;\n-\tinstruct the physical layer to signal the SR on one valid SPUCCH resource for SR;\n-\tstart the ssr-ProhibitTimer.\n-\telse:\n-\tnotify RRC to release SPUCCH for all serving cells;\n-\tif the MAC entity has no valid PUCCH resource for SR configured in any TTI:\n-\tnotify RRC to release PUCCH for all serving cells;\n-\tnotify RRC to release SRS for all serving cells;\n-\tclear any configured downlink assignments and uplink grants;\n-\tinitiate a Random Access procedure (see clause 5.1) on the SpCell and cancel all pending SRs.\n-\tif the MAC entity has at least one valid PUCCH resource for SR configured for this TTI and if sr-ProhibitTimer is not running:\n-\tif SR_COUNTER < dsr-TransMax:\n-\tincrement SR_COUNTER by 1;\n-\tinstruct the physical layer to signal the SR on one valid PUCCH resource for SR;\n-\tstart the sr-ProhibitTimer.\n-\telse:\n-\tnotify RRC to release PUCCH and SPUCCH for all serving cells;\n-\tnotify RRC to release SRS for all serving cells;\n-\tclear any configured downlink assignments and uplink grants;\n-\tinitiate a Random Access procedure (see clause 5.1) on the SpCell and cancel all pending SRs.\n-\tFor NB-IoT:\n-\tif the MAC entity has no valid resource for SR together with acknowledgement of the data in this TTI and no valid PRACH resource for SR configured in any TTI:\n-\tinitiate a Random Access Procedure (see clause 5.1), and cancel all pending SRs in the first subframe containing PRACH for preamble transmission.\n-\telse:\n-\tif the MAC entity has valid resource for SR together with acknowledgement of the data in this TTI:\n-\tinstruct the physical layer to signal the SR together with acknowledgement of the data.\n-\tcancel, if any, initiated Random Access Procedure for SR.\n-\telse:\n-\tif the MAC entity has valid PRACH resource for SR configured in this TTI and sr-ProhibitTimer is not running:\n-\tinstruct the physical layer to signal the SR on one valid PRACH resource for SR.\n-\tstart the sr-ProhibitTimer in the subframe containing the last repetition of the corresponding SR transmission.\nNOTE 1:\tThe selection of which valid PUCCH/SPUCCH resource for SR to signal SR on when the MAC entity has more than one valid PUCCH/SPUCCH resource for SR in one TTI or overlapping TTIs is left to UE implementation.\nNOTE 2:\tSR_COUNTER is incremented for each SR bundle. sr-ProhibitTimer is started in the first TTI of an SR bundle.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "5.4.5\tBuffer Status Reporting",
                            "text_content": "The Buffer Status reporting procedure is used to provide the serving eNB with information about the amount of data available for transmission in the UL buffers associated with the MAC entity. RRC controls BSR reporting by configuring the three timers periodicBSR-Timer, retxBSR-Timer and logicalChannelSR-ProhibitTimer and by, for each logical channel, optionally signalling logicalChannelGroup which allocates the logical channel to an LCG, as specified in TS 36.331 [8].\nFor the Buffer Status reporting procedure, the MAC entity shall consider all radio bearers which are not suspended and may consider radio bearers which are suspended.\nFor NB-IoT the Long BSR is not supported and all logical channels belong to one LCG.\nA Buffer Status Report (BSR) shall be triggered if any of the following events occur:\n-\tUL data, for a logical channel which belongs to a LCG, becomes available for transmission in the RLC entity or in the PDCP entity (the definition of what data shall be considered as available for transmission is specified in TS 36.322 [3] and TS 36.323 [4] or TS 38.323 [17] respectively) and either the data belongs to a logical channel with higher priority than the priorities of the logical channels which belong to any LCG and for which data is already available for transmission, or there is no data available for transmission for any of the logical channels which belong to a LCG, in which case the BSR is referred below to as \"Regular BSR\";\n-\tUL resources are allocated and number of padding bits is equal to or larger than the size of the Buffer Status Report MAC control element plus its subheader, in which case the BSR is referred below to as \"Padding BSR\";\n-\tretxBSR-Timer expires and the MAC entity has data available for transmission for any of the logical channels which belong to a LCG, in which case the BSR is referred below to as \"Regular BSR\";\n-\tperiodicBSR-Timer expires, in which case the BSR is referred below to as \"Periodic BSR\".\nFor Regular BSR:\n-\tif the BSR is triggered due to data becoming available for transmission for a logical channel for which logicalChannelSR-Prohibit is configured by upper layers:\n-\tstart or restart the logicalChannelSR-ProhibitTimer;\n-\telse:\n-\tif running, stop the logicalChannelSR-ProhibitTimer.\nFor Regular and Periodic BSR:\n-\tif more than one LCG has data available for transmission in the TTI where the BSR is transmitted: report Long BSR;\n-\telse report Short BSR.\nFor Padding BSR:\n-\tif the number of padding bits is equal to or larger than the size of the Short BSR plus its subheader but smaller than the size of the Long BSR plus its subheader:\n-\tif more than one LCG has data available for transmission in the TTI where the BSR is transmitted: report Truncated BSR of the LCG with the highest priority logical channel with data available for transmission;\n-\telse report Short BSR.\n-\telse if the number of padding bits is equal to or larger than the size of the Long BSR plus its subheader, report Long BSR.\nFor NB-IoT or BL UEs:\n-\tif rai-Activation is configured, and a buffer size of zero bytes has been triggered for the BSR, and the UE may have more data to send or receive in the near future:\n-\tcancel any pending BSR.\nIf the Buffer Status reporting procedure determines that at least one BSR has been triggered and not cancelled:\n-\tif the MAC entity has UL resources allocated for new transmission for this TTI:\n-\tinstruct the Multiplexing and Assembly procedure to generate the BSR MAC control element(s);\n-\tstart or restart periodicBSR-Timer except when all the generated BSRs are Truncated BSRs;\n-\tstart or restart retxBSR-Timer.\n-\telse if a Regular BSR has been triggered and logicalChannelSR-ProhibitTimer is not running:\n-\tif an uplink grant is not configured or the Regular BSR was not triggered due to data becoming available for transmission for a logical channel for which logical channel SR masking (logicalChannelSR-Mask) is setup by upper layers; or\n-\tif sr-WithHARQ-ACK-Config is configured and there is valid resource for SR together with acknowledgement of the data in this TTI:\n-\ta Scheduling Request shall be triggered.\nA MAC PDU shall contain at most one MAC BSR control element, even when multiple events trigger a BSR by the time a BSR can be transmitted in which case the Regular BSR and the Periodic BSR shall have precedence over the padding BSR.\nFor EDT, the MAC entity shall not generate a BSR MAC control element if new transmission is for Msg3.\nFor CP-PUR, the MAC entity shall not generate a BSR MAC control element if new transmission is intended for preconfigured uplink grant.\nThe MAC entity shall restart retxBSR-Timer upon indication of a grant for transmission of new data on any UL-SCH.\nAll triggered BSRs shall be cancelled in case the UL grant(s) in this TTI can accommodate all pending data available for transmission but is not sufficient to additionally accommodate the BSR MAC control element plus its subheader. All triggered BSRs shall be cancelled when a BSR is included in a MAC PDU for transmission.\nThe MAC entity shall transmit at most one Regular/Periodic BSR in a TTI. If the MAC entity is requested to transmit multiple MAC PDUs in a TTI, it may include a padding BSR in any of the MAC PDUs which do not contain a Regular/Periodic BSR.\nAll BSRs transmitted in a TTI always reflect the buffer status after all MAC PDUs have been built for this TTI. Each LCG shall report at the most one buffer status value per TTI and this value shall be reported in all BSRs reporting buffer status for this LCG.\nNOTE 1:\tA Padding BSR is not allowed to cancel a triggered Regular/Periodic BSR, except for NB-IoT. A Padding BSR is triggered for a specific MAC PDU only and the trigger is cancelled when this MAC PDU has been built.\nNOTE 2:\tIf UL HARQ operation is autonomous for the HARQ entity and if the BSR is already included in a MAC PDU for transmission by this HARQ entity, but not yet transmitted by lower layers, it is up to UE implementation how to handle the BSR content.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "5.4.5a\tData Volume and Power Headroom Reporting",
                            "text_content": "The Data Volume and Power Headroom reporting procedure is only applicable for NB-IoT UEs and is used to provide the serving eNB with information about the amount of data available for transmission in the UL buffers associated with the MAC entity, and to provide the serving eNB with information about the difference between the nominal UE maximum transmission power and the estimated transmission power for UL-SCH transmission for the Serving Cell. The reporting is done using the DPR MAC control element, which is sent in Msg3 together with a CCCH SDU. For EDT, the Data Volume in DPR MAC control element is set to zero.\nIf enhancedPHR is configured and the UE supports extended power headroom reporting, the UE shall:\n-\tif the UE supports power class 14dBm and the MAC entity considers itself to be in enhanced coverage level other than 0:\n-\treport power headroom level using the DPR MAC control element;\n-\telse:\n-\treport extended power headroom level using the DPR MAC control element for Extended Power Headroom level reporting.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "5.4.6\tPower Headroom Reporting",
                            "text_content": "The Power Headroom reporting procedure is used to provide the serving eNB with information about the difference between the nominal UE maximum transmit power and the estimated power for UL-SCH transmission or SRS transmission per activated Serving Cell and also with information about the difference between the nominal UE maximum power and the estimated power for UL-SCH and PUCCH/SPUCCH transmission on SpCell and PUCCH SCell.\nThe reporting period, delay and mapping of Power Headroom are defined in TS 36.133 [9] and TS 38.133 [19]. RRC controls Power Headroom reporting by configuring the two timers periodicPHR-Timer and prohibitPHR-Timer, and by signalling dl-PathlossChange which sets the change in measured downlink pathloss and the required power backoff due to power management (as allowed by P-MPRc, see TS 36.101 [10] and TS 38.101-3 [21]) to trigger a PHR, as specified in TS 36.331 [8].\nA Power Headroom Report (PHR) shall be triggered if any of the following events occur:\n-\tprohibitPHR-Timer expires or has expired and the path loss has changed more than dl-PathlossChange dB for at least one activated Serving Cell of any MAC entity which is used as a pathloss reference since the last transmission of a PHR in this MAC entity when the MAC entity has UL resources for new transmission;\n-\tperiodicPHR-Timer expires;\n-\tupon configuration or reconfiguration of the power headroom reporting functionality by upper layers, as specified in TS 36.331 [8], which is not used to disable the function;\n-\tactivation of an SCell of any MAC entity with configured uplink;\n-\taddition of the PSCell (i.e. PSCell is newly added or PSCell is changed);\n-\tprohibitPHR-Timer expires or has expired, when the MAC entity has UL resources for new transmission, and the following is true in this TTI for any of the activated Serving Cells of any MAC entity with configured uplink:\n-\tthere are UL resources allocated for transmission or there is a PUCCH/SPUCCH transmission on this cell, and the required power backoff due to power management (as allowed by P-MPRc, see TS 36.101 [10] and TS 38.101-3 [21]) for this cell has changed more than dl-PathlossChange dB since the last transmission of a PHR when the MAC entity had UL resources allocated for transmission or PUCCH/SPUCCH transmission on this cell.\nNOTE 1:\tThe MAC entity should avoid triggering a PHR when the required power backoff due to power management decreases only temporarily (e.g. for up to a few tens of milliseconds) and it should avoid reflecting such temporary decrease in the values of PCMAX,c/PH when a PHR is triggered by other triggering conditions.\nNOTE 2:\tIf UL HARQ operation is autonomous for the HARQ entity and if the PHR is already included in a MAC PDU for transmission by this HARQ entity, but not yet transmitted by lower layers, it is up to UE implementation how to handle the PHR content.\nIf the MAC entity has UL resources allocated for new transmission for this TTI the MAC entity shall:\n-\tif it is the first UL resource allocated for a new transmission since the last MAC reset, start periodicPHR-Timer;\n-\tif the Power Headroom reporting procedure determines that at least one PHR has been triggered and not cancelled, and;\n-\tif the allocated UL resources can accommodate the MAC control element for PHR which the MAC entity is configured to transmit, plus its subheader, as a result of logical channel prioritization:\n-\tif extendedPHR is configured:\n-\tfor each activated Serving Cell with configured uplink:\n-\tobtain the value of the Type 1 or Type 3 power headroom;\n-\tif the MAC entity has UL resources allocated for transmission on this Serving Cell for this TTI:\n-\tobtain the value for the corresponding PCMAX,c field from the physical layer;\n-\tif simultaneousPUCCH-PUSCH is configured or a serving cell operating according to Frame Structure Type 3 with uplink is configured and activated:\n-\tobtain the value of the Type 2 power headroom for the PCell;\n-\tobtain the value for the corresponding PCMAX,c field from the physical layer (see clause 5.1.1.2 of TS 36.213 [2]);\n-\tinstruct the Multiplexing and Assembly procedure to generate and transmit an Extended PHR MAC control element for extendedPHR as defined in clause 6.1.3.6a based on the values reported by the physical layer;\n-\telse if extendedPHR2 is configured:\n-\tfor each activated Serving Cell with configured uplink:\n-\tobtain the value of the Type 1 or Type 3 power headroom;\n-\tif the MAC entity has UL resources allocated for transmission on this Serving Cell for this TTI:\n-\tobtain the value for the corresponding PCMAX,c field from the physical layer;\n-\tif a PUCCH SCell is configured and activated:\n-\tobtain the value of the Type 2 power headroom for the PCell and PUCCH SCell;\n-\tobtain the values for the corresponding PCMAX,c fields from the physical layer (see clause 5.1.1.2 ofTS 36.213 [2]);\n-\telse:\n-\tif simultaneousPUCCH-PUSCH is configured for the PCell or a serving cell operating according to Frame Structure Type 3 with uplink is configured and activated:\n-\tobtain the value of the Type 2 power headroom for the PCell;\n-\tobtain the value for the corresponding PCMAX,c field from the physical layer (see clause 5.1.1.2 of TS 36.213 [2]);\n-\tinstruct the Multiplexing and Assembly procedure to generate and transmit an Extended PHR MAC control element for extendedPHR2 according to configured ServCellIndex and the PUCCH(s) for the MAC entity as defined in clause 6.1.3.6a based on the values reported by the physical layer;\n-\telse if dualConnectivityPHR is configured:\n-\tfor each activated Serving Cell with configured uplink associated with any MAC entity:\n-\tobtain the value of the Type 1 or Type 3 power headroom;\n-\tif this MAC entity has UL resources allocated for transmission on this Serving Cell for this TTI or if the other MAC entity has UL resources allocated for transmission on this Serving Cell for this TTI and phr-ModeOtherCG is set to real by upper layers:\n-\tobtain the value for the corresponding PCMAX,c field from the physical layer;\n-\tif simultaneousPUCCH-PUSCH is configured or a serving cell operating according to Frame Structure Type 3 with uplink is configured and activated:\n-\tobtain the value of the Type 2 power headroom for the SpCell;\n-\tobtain the value for the corresponding PCMAX,c field for the SpCell from the physical layer (see clause 5.1.1.2 of TS 36.213 [2]);\n-\tif the other MAC entity is E-UTRA MAC entity:\n-\tobtain the value of the Type 2 power headroom for the SpCell of the other MAC entity.\n-\tif phr-ModeOtherCG is set to real by upper layers:\n-\tobtain the value for the corresponding PCMAX,c field for the SpCell of the other MAC entity from the physical layer (see clause 5.1.1.2 of TS 36.213 [2]);\n-\tinstruct the Multiplexing and Assembly procedure to generate and transmit a Dual Connectivity PHR MAC control element as defined in clause 6.1.3.6b based on the values reported by the physical layer;\n-\telse:\n-\tobtain the value of the Type 1 power headroom from the physical layer;\n-\tinstruct the Multiplexing and Assembly procedure to generate and transmit a PHR MAC control element as defined in clause 6.1.3.6 based on the value reported by the physical layer;\n-\tstart or restart periodicPHR-Timer;\n-\tstart or restart prohibitPHR-Timer;\n-\tcancel all triggered PHR(s).\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "5.4.7\tPreconfigured Uplink Resource",
                            "text_content": "Transmission using PUR is initiated by the RRC layer. When transmission using PUR is initiated, RRC layer provides MAC with the following information:\n-\tPUR-RNTI;\n-\tDuration of PUR response window pur-ResponseWindowTimer;\n-\tUL grant information.\nIf the MAC entity has a PUR-RNTI, the MAC entity shall for each TTI for which RRC layer has provided uplink grant for transmission using PUR:\n-\tdeliver the uplink grant, and the associated HARQ information to the HARQ entity for this TTI.\nAfter transmission using PUR, the MAC entity shall monitor PDCCH identified by PUR-RNTI in the PUR response window using timer pur-ResponseWindowTimer:\n-\tif PUR was transmitted in a non-terrestrial network and UE supports delaying the start of the pur-ResponseWindowTimer:\n-\tthe MAC entity shall start pur-ResponseWindowTimer at the subframe that contains the end of the corresponding PUSCH transmission plus 4 subframes plus UE-eNB RTT.\n-\telse:\n-\tthe MAC entity shall start pur-ResponseWindowTimer at the subframe that contains the end of the corresponding PUSCH transmission plus 4 subframes.\nWhile pur-ResponseWindowTimer is running, the MAC entity shall:\n-\tif the PDCCH transmission is addressed to the PUR-RNTI and contains an UL grant for a retransmission:\n-\tif PUR was transmitted in a non-terrestrial network and UE supports delaying the start of the pur-ResponseWindowTimer:\n-\trestart pur-ResponseWindowTimer at the last subframe of a PUSCH transmission corresponding to the retransmission indicated by the UL grant plus 4 subframes plus UE-eNB RTT.\n-\telse:\n-\trestart pur-ResponseWindowTimer at the last subframe of a PUSCH transmission corresponding to the retransmission indicated by the UL grant plus 4 subframes.\n-\tif L1 ACK for transmission using PUR is received from lower layers; or\n-\tif PDCCH transmission is addressed to the PUR-RNTI and the MAC PDU is successfully decoded:\n-\tstop pur-ResponseWindowTimer;\n-\tif L1 ACK for transmission using PUR is received from lower layers or the MAC PDU contains only Timing Advance Command MAC control element:\n-\tindicate to upper layers the transmission using PUR was successful;\n-\tif repetition adjustment for transmission using PUR is received from lower layers:\n-\tindicate the value of the repetition adjustment to upper layers.\n-\tdiscard the PUR-RNTI.\n-\telse if fallback indication for PUR is received from lower layers:\n-\tstop pur-ResponseWindowTimer;\n-\tindicate to upper layers PUR fallback indication is received;\n-\tif repetition adjustment for transmission using PUR is received from lower layers:\n-\tindicate the value of the repetition adjustment to upper layers.\n-\tdiscard the PUR-RNTI.\n-\tif the pur-ResponseWindowTimer expires:\n-\tif PUR was transmitted in a non-terrestrial network:\n-\tif no notification of a reception of a PDCCH transmission addressed to the PUR-RNTI containing an UL grant for a retransmission was received after the start of pur-ResponseWindowTimer:\n-\tindicate to upper layers the transmission using PUR has failed;\n-\tdiscard the PUR-RNTI.\n-\telse:\n-\tindicate to upper layers the transmission using PUR has failed;\n-\tdiscard the PUR-RNTI.\nMAC entity may be configured with timer pur-TimeAlignmentTimer by upper layers as specified in TS 36.331 [8], clause 5.3.8.3.\nThe MAC entity shall:\n-\twhen pur-TimeAlignmentTimer configuration is received from upper layers:\n-\tstart or restart pur-TimeAlignmentTimer.\n-\twhen pur-TimeAlignmentTimer is released by upper layers:\n-\tstop the pur-TimeAlignmentTimer, if running.\n-\twhen a Timing Advance Command MAC control element is received or PDCCH indicates timing advance adjustment as specified in TS 36.212 [5] and if a NTA has been stored or maintained:\n-\tif the Timing Advance Command MAC control element or PDCCH indicating timing advance adjustment is addressed with a PUR-RNTI:\n-\tapply the Timing Advance Command or the timing advance adjustment;\n-\tstart or restart the pur-TimeAlignmentTimer, if configured;\n-\tindicate to upper layers that the Timing Advance value has been adjusted.\n-\tupon considering a Random Access procedure successfully completed:\n-\tstart or restart the pur-TimeAlignmentTimer, if configured;\n-\tindicate to upper layers that the Timing Advance value has been adjusted;\n-\tif a temporary NTA has been stored, delete the stored temporary NTA.\n-\tupon considering a Random Access procedure unsuccessfully completed, if a temporary NTA has been stored:\n-\tset the NTA to the stored temporary NTA;\n-\tdelete the stored temporary NTA.\nUpon request from upper layers, MAC entity shall indicate whether pur-TimeAlignmentTimer is running.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "5.4.8\tAccess Stratum Release Assistance Indication",
                            "text_content": "Access Stratum Release Assistance Indication is used to provide the serving eNB with information whether subsequent DL or UL transmission is expected. AS RAI uses the DCQR and AS RAI MAC Control Element. Upper layers trigger AS RAI.\nFor EDT and transmission using PUR, if AS RAI is triggered by upper layers but is not included in the resulting MAC PDU with the MAC SDU as a result of logical channel prioritization, AS RAI is cancelled, for other transmissions if AS RAI is not included in the resulting MAC PDU as a result of logical channel prioritization, AS RAI may be cancelled.\nIf rai-Activation is configured and a buffer size of zero bytes has been triggered for the BSR and no subsequent DL and UL data transmission is expected, and if rai-ActivationEnh is enabled and applicable as specified in TS 36.331 [8], it is up to UE to send BSR MAC control element or DCQR and AS RAI MAC control element.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "5.4.9\tTiming Advance Reporting",
                            "text_content": "The UE may be configured to report information about timing advance during a Random Access procedure and in RRC_CONNECTED Mode.\nThe Timing Advance reporting procedure is used in a non-terrestrial network to provide the eNB with an estimate of the UE's Timing Advance, see TTA in TS 36.211 [7] clause 8.1.\nTiming Advance reporting shall be triggered if any of the following events occur:\n-\tif triggered by upper layers;\n-\tupon configuration of offsetThresholdTA by upper layers, if the UE has not previously reported Timing Advance value to current Serving Cell;\n-\tif the variation between current information about Timing Advance and the last reported information about Timing Advance is equal to or larger than offsetThresholdTA, if configured.\nIf the Timing Advance reporting procedure determines that at least one Timing Advance Report has been triggered and not cancelled:\n-\tif the MAC entity has UL resources allocated for new transmission for this TTI, and;\n-\tif the allocated UL resources can accommodate the Timing Advance Report MAC control element plus its subheader, as a result of logical channel prioritization:\n-\tinstruct the Multiplexing and Assembly procedure to generate the Timing Advance report MAC control element as defined in clause 6.1.3.20.\nA MAC PDU shall contain at most one Timing Advance Report MAC CE, even when multiple events have triggered a Timing Advance report. The Timing Advance Report MAC CE shall be generated based on the latest available estimate of the UE's Timing Advance value prior to the MAC PDU assembly.\nAll triggered Timing Advance reports shall be cancelled when a Timing Advance Report MAC CE is included in a MAC PDU for transmission.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "5.4.10\tGNSS validity duration reporting",
                            "text_content": "For a NB-IoT UE, a BL UE or a UE in enhanced coverage in a non-terrestrial network, an indication may be sent by upper layer to report the remaining GNSS measurement validity duration.\nIf the GNSS validity duration reporting procedure has been triggered:\n-\tif the MAC entity has UL resources allocated for new transmission for this TTI, and;\n-\tif the allocated UL resources can accommodate the GNSS Validity Duration Report MAC control element plus its subheader, as a result of logical channel prioritization:\n-\tinstruct the Multiplexing and Assembly procedure to generate the GNSS Validity Duration Report MAC control element as defined in clause 6.1.3.23.\n-\telse:\n-\tinitiate a Random Access procedure (see clause 5.1).\n",
                            "figures_meta_data": [],
                            "tables": []
                        }
                    ]
                },
                {
                    "title": "5.5\tPCH reception",
                    "description": "",
                    "summary": "",
                    "text_content": "When the MAC entity needs to receive PCH, the MAC entity shall:\n-\tif a PCH assignment has been received on the PDCCH for the P-RNTI:\n-\tattempt to decode the TB on the PCH as indicated by the PDCCH information.\n-\tif a TB on the PCH has been successfully decoded:\n-\tdeliver the decoded MAC PDU to upper layers.\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "5.6\tBCH reception",
                    "description": "",
                    "summary": "",
                    "text_content": "When the MAC entity needs to receive BCH, the MAC entity shall:\n-\treceive and attempt to decode the BCH;\n-\tif a TB on the BCH has been successfully decoded:\n-\tdeliver the decoded MAC PDU to upper layers.\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "5.7\tDiscontinuous Reception (DRX)",
                    "description": "",
                    "summary": "",
                    "text_content": "The MAC entity may be configured by RRC with a DRX functionality that controls the UE's PDCCH monitoring activity for the MAC entity's C-RNTI, TPC-PUCCH-RNTI, TPC-PUSCH-RNTI, Semi-Persistent Scheduling C-RNTI (if configured), UL Semi-Persistent Scheduling V-RNTI (if configured), eIMTA-RNTI (if configured), SL-RNTI (if configured), SL-V-RNTI (if configured), CC-RNTI (if configured), SRS-TPC-RNTI (if configured), and AUL C-RNTI (if configured). When in RRC_CONNECTED, if DRX is configured, the MAC entity is allowed to monitor the PDCCH discontinuously using the DRX operation specified in this clause; otherwise the MAC entity monitors the PDCCH continuously. When using DRX operation, the MAC entity shall also monitor PDCCH according to requirements found in other clauses of this specification. RRC controls DRX operation by configuring the timers onDurationTimer, drx-InactivityTimer, drx-RetransmissionTimer (for HARQ processes scheduled using 1ms TTI, one per DL HARQ process except for the broadcast process), drx-RetransmissionTimerShortTTI (for HARQ processes scheduled using short TTI, one per DL HARQ process), drx-ULRetransmissionTimer (for HARQ processes scheduled using 1ms TTI, one per asynchronous UL HARQ process), drx-ULRetransmissionTimerShortTTI (for HARQ processes scheduled using short TTI, one per asynchronous UL HARQ process), the longDRX-Cycle, the value of the drxStartOffset and optionally the drxShortCycleTimer and shortDRX-Cycle. A HARQ RTT timer per DL HARQ process (except for the broadcast process) and UL HARQ RTT Timer per asynchronous UL HARQ process is also defined (see clause 7.7). The HARQ mode per HARQ process can be configured in uplinkHARQ-Mode.\nWhen a DRX cycle is configured, the Active Time includes the time while:\n-\tonDurationTimer or drx-InactivityTimer or drx-RetransmissionTimer or drx-RetransmissionTimerShortTTI or drx-ULRetransmissionTimer or drx-ULRetransmissionTimerShortTTI or mac-ContentionResolutionTimer (as described in clause 5.1.5) is running; or\n-\ta Scheduling Request is sent on PUCCH/SPUCCH and is pending (as described in clause 5.4.4). If this Serving Cell is part of a non-terrestrial network, the Active Time is started after the Scheduling Request transmission that is performed when the SR_COUNTER is 0 for all the SR configurations with pending SR(s) plus the UE-eNB RTT; or\n-\tan uplink grant for a pending HARQ retransmission can occur and there is data in the corresponding HARQ buffer for synchronous HARQ process; or\n-\ta PDCCH indicating a new transmission addressed to the C-RNTI of the MAC entity has not been received after successful reception of a Random Access Response for the preamble not selected by the MAC entity (as described in clause 5.1.4) ; or\n-\tmpdcch-UL-HARQ-ACK-FeedbackConfig is configured and repetitions within a bundle are being transmitted according to UL_REPETITION_NUMBER. If this Serving Cell is part of a non-terrestrial network, the Active Time starts after the first repetition within the bundle plus the UE-eNB RTT when repetitions within the bundle are being transmitted.\nWhen DRX is configured, the MAC entity shall for each subframe:\n-\tif a HARQ RTT Timer expires in this subframe:\n-\tif the data of the corresponding HARQ process was not successfully decoded:\n-\tstart the drx-RetransmissionTimer or drx-RetransmissionTimerShortTTI for the corresponding HARQ process;\n-\tif NB-IoT:\n-\tif lower layers had indicated multiple TBs were scheduled for the associated expired HARQ RTT Timer:\n-\tstart or restart drx-InactivityTimer when all HARQ RTT Timers have expired;\n-\telse:\n-\tstart or restart the drx-InactivityTimer.\n-\tif an UL HARQ RTT Timer expires in this subframe:\n-\tstart the drx-ULRetransmissionTimer or drx-ULRetransmissionTimerShortTTI for the corresponding HARQ process.\n-\tif NB-IoT:\n-\tif lower layers had indicated multiple TBs were scheduled for the associated expired HARQ RTT Timer:\n-\tstart or restart drx-InactivityTimer when all HARQ RTT Timers have expired;\n-\telse:\n-\tstart or restart the drx-InactivityTimer.\n-\tif a DRX Command MAC control element or a Long DRX Command MAC control element is received:\n-\tstop onDurationTimer;\n-\tstop drx-InactivityTimer.\n-\tif drx-InactivityTimer expires or a DRX Command MAC control element is received in this subframe:\n-\tif the Short DRX cycle is configured:\n-\tstart or restart drxShortCycleTimer;\n-\tuse the Short DRX Cycle.\n-\telse:\n-\tuse the Long DRX cycle.\n-\tif drxShortCycleTimer expires in this subframe:\n-\tuse the Long DRX cycle.\n-\tif a Long DRX Command MAC control element is received:\n-\tstop drxShortCycleTimer;\n-\tuse the Long DRX cycle.\n-\tIf the Short DRX Cycle is used and [(SFN * 10) + subframe number] modulo (shortDRX-Cycle) = (drxStartOffset) modulo (shortDRX-Cycle); or\n-\tif the Long DRX Cycle is used and [(SFN * 10) + subframe number] modulo (longDRX-Cycle) = drxStartOffset:\n-\tif NB-IoT:\n-\tif there is at least one HARQ process for which neither HARQ RTT Timer nor UL HARQ RTT Timer is running, start onDurationTimer.\n-\telse:\n-\tstart onDurationTimer.\n-\tduring the Active Time, for a PDCCH-subframe, if the subframe is not required for uplink transmission for half-duplex FDD UE operation, and if the subframe is not a half-duplex guard subframe, as specified in TS 36.211 [7], and if the subframe is not part of a configured measurement gap and if the subframe is not part of a configured Sidelink Discovery Gap for Reception, and for NB-IoT if the subframe is not required for uplink transmission or downlink reception other than on PDCCH; or\n-\tduring the Active Time, for a subframe other than a PDCCH-subframe and for a UE capable of simultaneous reception and transmission in the aggregated cells, if the subframe is a downlink subframe indicated by a valid eIMTA L1 signalling for at least one serving cell not configured with schedulingCellId, as specified in TS 36.331 [8] and if the subframe is not part of a configured measurement gap and if the subframe is not part of a configured Sidelink Discovery Gap for Reception; or\n-\tduring the Active Time, for a subframe other than a PDCCH-subframe and for a UE not capable of simultaneous reception and transmission in the aggregated cells, if the subframe is a downlink subframe indicated by a valid eIMTA L1 signalling for the SpCell and if the subframe is not part of a configured measurement gap and if the subframe is not part of a configured Sidelink Discovery Gap for Reception:\n-\tmonitor the PDCCH;\n-\tif the PDCCH indicates a DL transmission or if a DL assignment has been configured for this subframe:\n-\tif the UE is an NB-IoT UE, a BL UE or a UE in enhanced coverage:\n-\tif the HARQ feedback is disabled by lower layers when downlinkHARQ-FeedbackDisabled is not configured; or\n-\tif the HARQ feedback is disabled by downlinkHARQ-FeedbackDisabled for the corresponding HARQ process; or\n-\tif the HARQ feedback is enabled by downlinkHARQ-FeedbackDisabled for the corresponding HARQ process and further reversed to disabled by lower layers:\n-\tif NB-IoT:\n-\tif the UE is configured with a single DL and UL HARQ process; or\n-\tif lower layers have indicated scheduling of transmission of multiple TBs and both associated HARQ processes are with disabled HARQ feedback:\n-\tstart or restart drx-InactivityTimer in the subframe containing the last repetition of the corresponding PDSCH reception + 12 subframes + deltaPDCCH, where deltaPDCCH is the interval starting from the subframe containing the last repetition of the corresponding PDSCH reception plus 12 subframes to the first subframe of the next PDCCH occasion.\n-\telse if the HARQ feedback is enabled for the corresponding HARQ process:\n-\tif lower layers have indicated scheduling of transmission of multiple TBs:\n-\tstart the HARQ RTT Timers for all HARQ processes which the HARQ feedback are enabled corresponding to the scheduled TBs in the subframe containing the last repetition of the PDSCH corresponding to the last scheduled TB;\n-\telse:\n-\tstart the HARQ RTT Timer for the corresponding HARQ process in the subframe containing the last repetition of the corresponding PDSCH reception;\n-\telse:\n-\tstart the HARQ RTT Timer for the corresponding HARQ process;\n-\tstop the drx-RetransmissionTimer or drx-RetransmissionTimerShortTTI for the corresponding HARQ process.\n-\tif NB-IoT, stop drx-ULRetransmissionTimer for all UL HARQ processes.\n-\tif the PDCCH indicates an UL transmission for an asynchronous HARQ process or if an UL grant has been configured for an asynchronous HARQ process for this subframe, or if the PDCCH indicates an UL transmission for an autonomous HARQ process or;\n-\tif the uplink grant is a configured grant for the MAC entity's AUL C-RNTI and if the corresponding PUSCH transmission has been performed in this subframe:\n-\tif mpdcch-UL-HARQ-ACK-FeedbackConfig is not configured; and\n-\tif the corresponding HARQ process is not configured with HARQ mode B:\n-\tif lower layers have indicated scheduling of transmission of multiple TBs:\n-\tstart the UL HARQ RTT Timers for all scheduled HARQ processes which are not configured with HARQ mode B in the subframe containing the last repetition of the PUSCH corresponding to the last scheduled TB;\n-\telse:\n-\tstart the UL HARQ RTT Timer for the corresponding HARQ process in the subframe containing the last repetition of the corresponding PUSCH transmission;\n-\tstop the drx-ULRetransmissionTimer or drx-ULRetransmissionTimerShortTTI for the corresponding HARQ process;\n-\tif mpdcch-UL-HARQ-ACK-FeedbackConfig is configured and an UL HARQ-ACK feedback has not been received on PDCCH until the last repetition of the corresponding PUSCH transmission:\n-\tif the corresponding HARQ process is not configured with HARQ mode B:\n-\tstart or restart the drx-ULRetransmissionTimer for the corresponding HARQ process in the subframe containing the last repetition of the corresponding PUSCH transmission;\n-\tif NB-IoT:\n-\tif the UE is configured with single UL and DL HARQ process and if the corresponding HARQ process is configured with HARQ mode B; or\n-\tif lower layers have indicated scheduling of transmission of multiple TBs and both associated HARQ processes are configured with HARQ mode B:\n-\tstart or restart drx-InactivityTimer in the subframe containing the last repetition of the corresponding PUSCH transmission + 1 subframe + deltaPDCCH, where deltaPDCCH is the interval starting from the subframe containing the last repetition of the corresponding PUSCH transmission plus 1 subframes to the first subframe of the next PDCCH occasion.\n-\tif NB-IoT, stop drx-RetransmissionTimer for all DL HARQ processes.\n-\tif the PDCCH indicates a new transmission (DL, UL or SL):\n-\tif the UE is an NB-IoT UE:\n-\tif the UE is configured with more than one HARQ process and PDCCH indicate the transmission is for a single TB:\n-\tstart or restart drx-InactivityTimer.\n-\telse:\n-\tstart or restart drx-InactivityTimer.\n-\tif the PDCCH indicates a transmission (DL, UL) for an NB-IoT UE:\n-\tif the NB-IoT UE is configured with a single DL and UL HARQ process; or\n-\tif the PDCCH indicates the transmission is for multiple TBs:\n-\tstop drx-InactivityTimer.\n-\tstop onDurationTimer.\n-\tif the PDCCH indicates an UL HARQ-ACK feedback for an asynchronous UL HARQ process for a UE configured with mpdcch-UL-HARQ-ACK-FeedbackConfig:\n-\tif the lower layer had indicated scheduling of transmission of multiple TBs:\n-\tstop drx-ULRetransmissionTimer for the corresponding UL HARQ process(es).\n-\telse if the PUSCH transmission is completed:\n-\tstop drx-ULRetransmissionTimer for all UL HARQ processes.\n-\tif the PDCCH indicates HARQ feedback for one or more HARQ processes for which UL HARQ operation is autonomous:\n-\tstop the drx-ULRetransmissionTimer for the corresponding HARQ process(es).\n-\tin current subframe n, if the MAC entity would not be in Active Time considering grants/assignments/DRX Command MAC control elements/Long DRX Command MAC control elements received and Scheduling Request sent until and including subframe n-5 when evaluating all DRX Active Time conditions as specified in this clause, type-0-triggered SRS, as specified in TS 36.213 [2], shall not be reported.\n-\tif CQI masking (cqi-Mask) is setup by upper layers:\n-\tin current TTI n, if onDurationTimer would not be running considering grants/assignments/DRX Command MAC control elements/Long DRX Command MAC control elements received until and including TTI n-5 when evaluating all DRX Active Time conditions as specified in this clause, CQI/PMI/RI/PTI/CRI on PUCCH shall not be reported.\n-\telse:\n-\tin current TTI n, if the MAC entity would not be in Active Time considering grants/assignments/DRX Command MAC control elements/Long DRX Command MAC control elements received and Scheduling Request sent until and including TTI n-5 when evaluating all DRX Active Time conditions as specified in this clause, CQI/PMI/RI/PTI/CRI on PUCCH shall not be reported.\nFor NB-IoT, onDurationTimer may start within a PDCCH period and end within a PDCCH period. The UE shall monitor NPDCCH during these partial PDCCH periods while onDurationTimer is running.\nRegardless of whether the MAC entity is monitoring PDCCH or not, the MAC entity receives and transmits HARQ feedback and transmits type-1-triggered SRS, as specified in TS 36.213 [2], when such is expected. The MAC entity monitors PDCCH addressed to CC-RNTI for a PUSCH trigger B, as specified in TS 36.213 [2], on the corresponding SCell even if the MAC entity is not in Active Time. when such is expected.\nWhen the BL UE or the UE in enhanced coverage or NB-IoT UE receives PDCCH, the UE executes the corresponding action specified in this clause in the subframe following the subframe containing the last repetition of the PDCCH reception where such subframe is determined by the starting subframe and the DCI subframe repetition number field in the PDCCH specified in TS 36.213 [2], unless explicitly stated otherwise.\nNOTE 1:\tThe same Active Time applies to all activated serving cell(s).\nNOTE 2:\tIn case of downlink spatial multiplexing, if a TB is received while the HARQ RTT Timer is running and the previous transmission of the same TB was received at least N subframes before the current subframe (where N corresponds to the HARQ RTT Timer), the MAC entity should process it and restart the HARQ RTT Timer.\nNOTE 3:\tThe MAC entity does not consider PUSCH trigger B, as specified in TS 36.213 [2], to be an indication of a new transmission.\nNOTE 4:\tFor NB-IoT, for operation in FDD mode, and for operation in TDD mode with a single HARQ process, DL and UL transmissions will not be scheduled in parallel, i.e. if a DL transmission has been scheduled an UL transmission will not be scheduled until HARQ RTT Timer of the DL HARQ process has expired (and vice versa).\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "5.7a\tDiscontinuous Reception (DRX) for SC-PTM",
                    "description": "",
                    "summary": "",
                    "text_content": "Each G-RNTI and, for NB-IoT UEs, BL UEs or UEs in enhanced coverage, each SC-RNTI of the MAC entity may be configured by RRC with a DRX functionality that controls the UE's PDCCH monitoring activity for this G-RNTI and SC-RNTI as specified in TS 36.331 [8]. When in RRC_IDLE or RRC_CONNECTED, if DRX is configured, the MAC entity is allowed to monitor the PDCCH for this G-RNTI or SC-RNTI discontinuously using the DRX operation specified in this clause; otherwise the MAC entity monitors the PDCCH for this G-RNTI or SC-RNTI continuously. For each G-RNTI or SC-RNTI of the MAC entity, RRC controls its DRX operation by configuring the timers onDurationTimerSCPTM, drx-InactivityTimerSCPTM, the SCPTM-SchedulingCycle and the value of the SCPTM-SchedulingOffset for G-RNTI and for SC-RNTI. The DRX operation specified in this clause is performed independently for each G-RNTI and SC-RNTI and independently from the DRX operation specified in subcaluse 5.7.\nWhen DRX is configured for a G-RNTI or for SC-RNTI, the Active Time includes the time while:\n-\tonDurationTimerSCPTM or drx-InactivityTimerSCPTM is running.\nWhen DRX is configured for a G-RNTI or for SC-RNTI as specified in TS 36.331 [8], the MAC entity shall for each subframe for this G-RNTI or SC-RNTI:\n-\tif [(H-SFN * 10240 + SFN * 10) + subframe number] modulo (SCPTM-SchedulingCycle) = SCPTM-SchedulingOffset:\n-\tstart onDurationTimerSCPTM.\n-\tduring the Active Time, for a PDCCH-subframe:\n-\tmonitor the PDCCH;\n-\tif the PDCCH indicates a DL transmission:\n-\tif the UE is a BL UE or a UE in enhanced coverage:\n-\tstart or re-start the drx-InactivityTimerSCPTM in the subframe containing the last repetition of the corresponding PDSCH reception.\n-\tif the UE is an NB-IoT UE:\n-\tstop onDurationTimerSCPTM;\n-\tstop drx-InactivityTimerSCPTM;\n-\tstart the drx-InactivityTimerSCPTM in the first subframe of the next PDCCH occasion following the subframe containing the last repetition of the corresponding PDSCH reception.\n-\telse:\n-\tstart or restart drx-InactivityTimerSCPTM.\nNOTE:\tIf H-SFN is not configured its value is set to 0 in the calculation of the starting subframe.\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "5.8\tMAC reconfiguration",
                    "description": "",
                    "summary": "",
                    "text_content": "When a reconfiguration of the MAC entity is requested by upper layers, the MAC entity shall:\n-\tupon addition of an SCell, initialize the corresponding HARQ entity;\n-\tupon removal of an SCell, remove the corresponding HARQ entity;\n-\tfor timers apply the new value when the timer is (re)started;\n-\twhen counters are initialized apply the new maximum parameter value;\n-\tfor other parameters, apply immediately the configurations received from upper layers.\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "5.9\tMAC Reset",
                    "description": "",
                    "summary": "",
                    "text_content": "If a reset of the MAC entity is requested by upper layers, the MAC entity shall:\n-\tinitialize Bj for each logical channel to zero;\n-\texcept for pur-TimeAlignmentTimer, if configured, stop (if running) all timers;\n-\texcept for pur-TimeAlignmentTimer, if configured, consider all timeAlignmentTimers as expired and perform the corresponding actions in clause 5.2;\n-\tset the NDIs for all uplink HARQ processes to the value 0;\n-\tstop, if any, ongoing RACH procedure;\n-\tdiscard explicitly signalled ra-PreambleIndex and ra-PRACH-MaskIndex, if any;\n-\tflush Msg3 buffer;\n-\tcancel, if any, triggered Scheduling Request procedure;\n-\tcancel, if any, triggered Buffer Status Reporting procedure;\n-\tcancel, if any, triggered Power Headroom Reporting procedure;\n-\tcancel, if any, triggered Recommended bit rate query procedure;\n-\tcancel, if any, triggered Timing Advance Reporting procedure;\n-\tflush the soft buffers for all DL HARQ processes;\n-\tfor each DL HARQ process, consider the next received transmission for a TB as the very first transmission;\n-\trelease, if any, Temporary C-RNTI;\n-\tclear, if any, Differential Koffset.\nIf a partial reset of the MAC entity is requested by upper layers, for a serving cell, the MAC entity shall for the serving cell:\n-\tset the NDIs for all uplink HARQ processes to the value 0;\n-\tflush all UL HARQ buffers;\n-\tstop all running drx-ULRetransmissionTimers;\n-\tstop all running UL HARQ RTT timers;\n-\tstop, if any, ongoing RACH procedure;\n-\tdiscard explicitly signalled ra-PreambleIndex and ra-PRACH-MaskIndex, if any;\n-\tflush Msg3 buffer;\n-\trelease, if any, Temporary C-RNTI.\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "5.10\tSemi-Persistent Scheduling",
                    "description": "",
                    "summary": "",
                    "text_content": "Except for NB-IoT, multiple UL Semi-Persistent Scheduling configurations are supported per Serving Cell. For NB-IoT, UL Semi-Persistent Scheduling configuration is only supported for BSR per Serving Cell. On one Serving Cell, multiple UL configurations can be active simultaneously only for the same TTI length. Multiple UL/DL configurations can also be active simultaneously on different Serving Cells.\nWhen Semi-Persistent Scheduling is enabled by RRC, the following information is provided, as specified in TS 36.331 [8]:\n-\tSemi-Persistent Scheduling C-RNTI or UL Semi-Persistent Scheduling V-RNTI;\n-\tUplink Semi-Persistent Scheduling interval semiPersistSchedIntervalUL if short TTI in UL for the SpCell is not configured or semiPersistSchedIntervalUL-sTTI in UL for the SpCell if short TTI is configured and number of empty transmissions before implicit release implicitReleaseAfter, if Semi-Persistent Scheduling with Semi-Persistent Scheduling C-RNTI is enabled for the uplink;\n-\tUplink Semi-Persistent Scheduling interval semiPersistSchedIntervalUL and number of empty transmissions before implicit release implicitReleaseAfter for each SPS configuration, if Semi-Persistent Scheduling with UL Semi-Persistent Scheduling V-RNTI is enabled for the uplink;\n-\tWhether twoIntervalsConfig is enabled or disabled for uplink, only for TDD;\n-\tDownlink Semi-Persistent Scheduling interval semiPersistSchedIntervalDL if short TTI in DL for the SpCell is not configured or semiPersistSchedIntervalDL-sTTI if short TTI in DL for the SpCell is configured and number of configured HARQ processes for Semi-Persistent Scheduling numberOfConfSPS-Processes, if Semi-Persistent Scheduling is enabled for the downlink;\n-\tsTTIStartTimeDl if short TTI in DL for the SpCell is configured and sTTIStartTimeUl if short TTI in UL for the SpCell is configured;\nWhen Semi-Persistent Scheduling for uplink or downlink is disabled by RRC, the corresponding configured grant or configured assignment shall be discarded.\nSemi-Persistent Scheduling is not supported for RN communication with the E-UTRAN in combination with an RN subframe configuration.\nNOTE:\tWhen eIMTA is configured, if a configured uplink grant or a configured downlink assignment occurs on a subframe that can be reconfigured through eIMTA L1 signalling, then the UE behaviour is left unspecified.\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": [
                        {
                            "title": "5.10.1\tDownlink",
                            "text_content": "After a Semi-Persistent downlink assignment is configured, the MAC entity shall consider sequentially that the Nth assignment occurs in the TTI for which:\n-\tsubframe SPS is used:\n-\t(10 * SFN + subframe) = [(10 * SFNstart time + subframestart time) + N * semiPersistSchedIntervalDL] modulo 10240.\n-\tslot or subslot SPS is used:\n-\t(10 * SFN * sTTI_Number_Per_Subframe + subframe * sTTI_Number_Per_Subframe + sTTI_number) = [(10 * SFNstart time * sTTI_Number_Per_Subframe + subframestart time * sTTI_Number_Per_Subframe + sTTIStartTimeDl) + N * semiPersistSchedIntervalDL-sTTI] modulo (10240 * sTTI_Number_Per_Subframe).\nWhere SFNstart time, subframestart time and sTTIStartTimeDl are the SFN, subframe and sTTI_number, respectively, at the time the configured downlink assignment were (re-)initialised. The sTTI_Number_Per_Subframe is 6 when subslot TTI is configued and 2 when slot TTI is configured for short TTI operation. sTTI_number refers to the index of the short TTI, i.e., index of subslot or slot within the subframe.\nFor BL UEs or UEs in enhanced coverage SFNstart time and subframestart time refer to SFN and subframe of the first transmission of PDSCH where configured downlink assignment was (re-)initialized.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "5.10.2\tUplink",
                            "text_content": "After a Semi-Persistent Scheduling uplink grant is configured, the MAC entity shall:\n-\tif twoIntervalsConfig is enabled by upper layer:\n-\tset the Subframe_Offset according to Table 7.4-1.\n-\telse:\n-\tset Subframe_Offset to 0.\n-\tconsider sequentially that the Nth grant occurs in the TTI for which:\n-\tsubframe SPS is used:\n-\t(10 * SFN + subframe) = [(10 * SFNstart time + subframestart time) + N * semiPersistSchedIntervalUL + Subframe_Offset * (N modulo 2)] modulo 10240.\n-\tslot or subslot SPS is used:\n-\t(10 * SFN * sTTI_Number_Per_Subframe + subframe * sTTI_Number_Per_Subframe + sTTI_number) = [(10 * SFNstart time * sTTI_Number_Per_Subframe + subframestart time * sTTI_Number_Per_Subframe + sTTIStartTimeUl) + N * semiPersistSchedIntervalUL-sTTI+ Subframe_Offset * (N modulo 2) * sTTI_Number_Per_Subframe] modulo (10240 * sTTI_Number_Per_Subframe).\nWhere SFNstart time, subframestart time and sTTIStartTimeUl are the SFN, subframe and sTTI_number, respectively, at the time the configured uplink grant were (re-)initialised. The sTTI_Number_Per_Subframe is 6 when subslot TTI is configued and 2 when slot TTI is configured for short TTI operation. sTTI_number refers to the index of the short TTI, i.e., index of subslot or slot within the subframe.\nExcept for NB-IoT, for TDD, the MAC entity is configured with semiPersistSchedIntervalUL shorter than 10 subframes, the Nth grant shall be ignored if it occurs in a downlink subframe or a special subframe.\nExcept for NB-IoT, if the MAC entity is not configured with skipUplinkTxSPS, the MAC entity shall clear the configured uplink grant immediately after implicitReleaseAfter, as specified in TS 36.331 [8], number of consecutive new MAC PDUs each containing zero MAC SDUs have been provided by the Multiplexing and Assembly entity, on the Semi-Persistent Scheduling resource.\nIf SPS confirmation has been triggered and not cancelled:\n-\tif the MAC entity has UL resources allocated for new transmission for this TTI:\n-\tinstruct the Multiplexing and Assembly procedure to generate an SPS confirmation MAC Control Element as defined in clause 6.1.3.11;\n-\tcancel the triggered SPS confirmation.\nThe MAC entity shall clear the configured uplink grant immediately after first transmission of SPS confirmation MAC Control Element triggered by the SPS release.\nNOTE:\tRetransmissions for Semi-Persistent Scheduling can continue after clearing the configured uplink grant.\nFor NB-IoT UEs, BL UEs or UEs in enhanced coverage SFNstart time and subframestart time refer to SFN and subframe of the first transmission of PUSCH where configured uplink grant was (re-)initialized.\nIn the event of a resource conflict between multiple UL SPS configurations configured with Uplink Semi-Persistent Scheduling V-RNTI, the UE behaviour is undefined.\nIn the event of a resource conflict in the same serving cell between the initial transmision within a configured grant bundle from multiple different UL SPS configurations configured with Uplink Semi-Persistent Scheduling C-RNTI, the UE behaviour is undefined.\nFor NB-IoT UEs, a configured uplink grant shall be used only for BSR or SPS confirmation transmission, and skipUplinkTxSPS is implicitly configured.\n",
                            "figures_meta_data": [],
                            "tables": []
                        }
                    ]
                },
                {
                    "title": "5.11\tHandling of unknown, unforeseen and erroneous protocol data",
                    "description": "",
                    "summary": "",
                    "text_content": "When a MAC entity receives a MAC PDU for the MAC entity's C-RNTI or Semi-Persistent Scheduling C-RNTI, or by the configured downlink assignment, containing reserved or invalid values, the MAC entity shall:\n-\tdiscard the received PDU.\nWhen a MAC entity receives a MAC PDU on MCH containing reserved values, or on DL-SCH containing reserved values for G-RNTI or SC-RNTI, or on SL-SCH, the MAC entity shall:\n-\tignore the MAC PDU subheaders containing reserved values and the corresponding MAC SDUs;\n-\tin the MAC control elements, ignore the fields containing reserved values and the fields associated with the fields containing reserved values.\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "5.12\tMCH reception",
                    "description": "",
                    "summary": "",
                    "text_content": "MCH transmission may occur in subframes configured by upper layer for MCCH or MTCH transmission. For each such subframe, upper layer indicates if signallingMCS or dataMCS applies. The transmission of an MCH occurs in a set of subframes defined by PMCH-Config. An MCH Scheduling Information MAC control element is included in the first subframe allocated to the MCH within the MCH scheduling period to indicate the position of each MTCH and unused subframes on the MCH. If pmch-InfoListExt is configured for an MCH, an Extended MCH Scheduling Information MAC control element is included in the first subframe allocated to the corresponding MCH within the MCH scheduling period to indicate the position of each MTCH and unused subframes on the MCH, and to indicate whether MTCH transmission is to be suspended. The MAC entity shall assume that the first scheduled MTCH starts immediately after the MCCH or the MCH Scheduling Information MAC control element or the Extended MCH Scheduling Information MAC control element if the MCCH is not present, and the other scheduled MTCH(s) start immediately after the previous MTCH, at the earliest in the subframe where the previous MTCH stops. When the MAC entity needs to receive MCH, the MAC entity shall:\n-\tattempt to decode the TB on the MCH;\n-\tif a TB on the MCH has been successfully decoded:\n-\tdemultiplex the MAC PDU and deliver the MAC SDU(s) to upper layers.\nWhen the MAC entity receives the Extended MCH Scheduling Information MAC control element, the MAC entity shall indicate the MTCH(s) to be suspended to the upper layers.\nNOTE:\tThe MAC entity should continue receiving MCH until the MTCH is removed from the MCCH.\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "5.13\tActivation/Deactivation of SCells",
                    "description": "",
                    "summary": "",
                    "text_content": "If the MAC entity is configured with one or more SCells, the network may activate and deactivate the configured SCells. The SpCell is always activated. The network activates and deactivates the SCell(s) by sending Activation/Deactivation and/or Hibernation MAC control element(s) described in clause 6.1.3.8 and 6.1.3.15 respectively. Furthermore, the MAC entity maintains a sCellDeactivationTimer timer per configured SCell (except the SCell configured with PUCCH/SPUCCH, if any) and deactivates the associated SCell upon its expiry. In case the sCellHibernationTimer is configured, it takes priority over sCellDeactivationTimer. The same initial timer value applies to each instance of the sCellDeactivationTimer and it is configured by RRC. The configured SCells are initially deactivated upon addition and after a handover unless the parameter sCellState is set to activated or dormant for the SCell within RRC configuration. The configured SCG SCells are initially deactivated after a SCG change unless the parameter sCellState is set to activated or dormant for the SCell within RRC configuration.\nThe MAC entity shall for each TTI and for each configured SCell:\n-\tif the MAC entity is configured with an activated SCell upon SCell configuration or receives MAC control element(s) in this TTI activating the SCell, the MAC entity shall in the TTI according to the timing defined in TS 36.213 [2]:\n-\tactivate the SCell; i.e. apply normal SCell operation including:\n-\tSRS transmissions on the SCell;\n-\tif cqi-ShortConfigSCell is configured:\n-\tCQI/PMI/RI/PTI/CRI reporting for the SCell using the short period of the CSI (CQI/PMI/RI/PTI/CRI) reporting resource configured by cqi-ShortConfigSCell according to the timing defined in TS 36.213 [2].\n-\telse:\n-\tCQI/PMI/RI/PTI/CRI reporting for the SCell using the configuration in cqi-ReportConfigSCell.\n-\tPDCCH monitoring on the SCell;\n-\tPDCCH monitoring for the SCell;\n-\tPUCCH/SPUCCH transmissions on the SCell, if configured.\n-\tstart or restart the sCellDeactivationTimer associated with the SCell;\n-\tif sCellHibernationTimer associated with the SCell is configured;\n-\tstart or restart the sCellHibernationTimer associated with the SCell.\n-\ttrigger PHR according to clause 5.4.6.\n-\telse, if the MAC entity receives MAC control element(s) in this TTI deactivating the SCell; or\n-\tif the sCellDeactivationTimer associated with the activated SCell expires in this TTI and sCellHibernationTimer is not configured:\n-\tin the TTI according to the timing defined in TS 36.213 [2]:\n-\tdeactivate the SCell;\n-\tstop the sCellDeactivationTimer associated with the SCell;\n-\tclear any configured downlink assignments and uplink grants associated with the SCell;\n-\tflush all HARQ buffers associated with the SCell.\n-\tif PDCCH on the activated SCell indicates an uplink grant or downlink assignment; or\n-\tif PDCCH on the Serving Cell scheduling the activated SCell indicates an uplink grant or a downlink assignment for the activated SCell; or\n-\tif a MAC PDU is transmitted in a configured uplink grant or received in a configured downlink assignment:\n-\trestart the sCellDeactivationTimer associated with the SCell;\n-\tif sCellHibernationTimer associated with the SCell is configured;\n-\trestart the sCellHibernationTimer associated with the SCell;\n-\tif the SCell is activated and the cqi-ShortConfigSCell expires in this TTI, according to the timing defined in TS 36.213 [2]:\n-\tapply SCell CQI/PMI/RI/PTI/CRI reporting for the SCell using the configuration in cqi-ReportConfigSCell;\n-\tif the SCell is deactivated:\n-\tnot transmit SRS on the SCell;\n-\tnot report CQI/PMI/RI/PTI/CRI for the SCell;\n-\tnot transmit on UL-SCH on the SCell;\n-\tnot transmit on RACH on the SCell;\n-\tnot monitor the PDCCH on the SCell;\n-\tnot monitor the PDCCH for the SCell;\n-\tnot transmit PUCCH/SPUCCH on the SCell.\nHARQ feedback for the MAC PDU containing Activation/Deactivation MAC control element shall not be impacted by PCell, PSCell and PUCCH SCell interruptions due to SCell activation/deactivation, as specified in TS 36.133 [9].\nNOTE:\tWhen SCell is deactivated, the ongoing Random Access procedure on the SCell, if any, is aborted.\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "5.14\tSL-SCH Data transfer",
                    "description": "",
                    "summary": "",
                    "text_content": "",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": [
                        {
                            "title": "5.14.1\tSL-SCH Data transmission",
                            "text_content": "In order to transmit on the SL-SCH the MAC entity must have at least one sidelink grant.\nSidelink grants are selected as follows for sidelink communication:\n-\tif the MAC entity is configured to receive a single sidelink grant dynamically on the PDCCH and more data is available in STCH than can be transmitted in the current SC period, the MAC entity shall:\n-\tusing the received sidelink grant determine the set of subframes in which transmission of SCI and transmission of first transport block occur according to clause 14.2.1 of TS 36.213 [2];\n-\tconsider the received sidelink grant to be a configured sidelink grant occurring in those subframes starting at the beginning of the first available SC Period which starts at least 4 subframes after the subframe in which the sidelink grant was received, overwriting a previously configured sidelink grant occurring in the same SC period, if available;\n-\tclear the configured sidelink grant at the end of the corresponding SC Period;\n-\telse, if the MAC entity is configured by upper layers to receive multiple sidelink grants dynamically on the PDCCH and more data is available in STCH than can be transmitted in the current SC period, the MAC entity shall for each received sidelink grant:\n-\tusing the received sidelink grant determine the set of subframes in which transmission of SCI and transmission of first transport block occur according to clause 14.2.1 of TS 36.213 [2];\n-\tconsider the received sidelink grant to be a configured sidelink grant occurring in those subframes starting at the beginning of the first available SC Period which starts at least 4 subframes after the subframe in which the sidelink grant was received, overwriting a previously configured sidelink grant received in the same subframe number but in a different radio frame as this configured sidelink grant occurring in the same SC period, if available;\n-\tclear the configured sidelink grant at the end of the corresponding SC Period;\n-\telse, if the MAC entity is configured by upper layers to transmit using one or multiple pool(s) of resources as indicated in clause 5.10.4 of TS 36.331 [8] and more data is available in STCH than can be transmitted in the current SC period, the MAC entity shall for each sidelink grant to be selected:\n-\tif configured by upper layers to use a single pool of resources:\n-\tselect that pool of resources for use;\n-\telse, if configured by upper layers to use multiple pools of resources:\n-\tselect a pool of resources for use from the pools of resources configured by upper layers whose associated priority list includes the priority of the highest priority of the sidelink logical channel in the MAC PDU to be transmitted;\nNOTE 1:\tIf more than one pool of resources has an associated priority list which includes the priority of the sidelink logical channel with the highest priority in the MAC PDU to be transmitted, it is left for UE implementation which one of those pools of resources to select.\n-\trandomly select the time and frequency resources for SL-SCH and SCI of a sidelink grant from the selected resource pool. The random function shall be such that each of the allowed selections (see TS 36.213 [2]) can be chosen with equal probability;\n-\tuse the selected sidelink grant to determine the set of subframes in which transmission of SCI and transmission of first transport block occur according to clause 14.2.1 of TS 36.213 [2];\n-\tconsider the selected sidelink grant to be a configured sidelink grant occurring in those subframes starting at the beginning of the first available SC Period which starts at least 4 subframes after the subframe in which the sidelink grant was selected;\n-\tclear the configured sidelink grant at the end of the corresponding SC Period;\nNOTE 2:\tRetransmissions on SL-SCH cannot occur after the configured sidelink grant has been cleared.\nNOTE 3:\tIf the MAC entity is configured by upper layers to transmit using one or multiple pool(s) of resources as indicated in clause 5.10.4 of TS 36.331 [8], it is left for UE implementation how many sidelink grants to select within one SC period taking the number of sidelink processes into account.\nSidelink grants are selected as follows for V2X sidelink communication:\n-\tif the MAC entity is configured to receive a sidelink grant dynamically on the PDCCH and data is available in STCH, the MAC entity shall for each carrier configured in sl-V2X-ConfigDedicated for which a sidelink grant has been dynamically received on the PDCCH for this TTI:\n-\tuse the received sidelink grant to determine the number of HARQ retransmissions and the set of subframes in which transmission of SCI and SL-SCH occur according to clauses 14.2.1 and 14.1.1.4A of TS 36.213 [2];\n-\tconsider the received sidelink grant to be a configured sidelink grant for the carrier;\n-\tif the MAC entity is configured by upper layers to receive a sidelink grant on the PDCCH addressed to SL Semi-Persistent Scheduling V-RNTI, the MAC entity shall for each SL SPS configuration and for each carrier configured in sl-V2X-ConfigDedicated for which a sidelink grant has been received on the PDCCH addressed to SL Semi-Persistent Scheduling V-RNTI either for this TTI or for this PDCCH occasion according to clause 3.1 of TS 38.321 [24]:\n-\tif PDCCH contents indicate SPS activation:\n-\tuse the received sidelink grant to determine the number of HARQ retransmissions and the set of subframes in which transmission of SCI and SL-SCH occur according to clauses 14.2.1 and 14.1.1.4A of TS 36.213 [2];\n-\tconsider the received sidelink grant to be a configured sidelink grant for the carrier.\n-\tif PDCCH contents indicate SPS release:\n-\tclear the corresponding configured sidelink grant for the carrier.\n-\tif the MAC entity is configured by upper layers to transmit using pool(s) of resources in one or multiple carriers as indicated in either clause 5.10.13.1 of TS 36.331 [8] or TS 38.331 [25] based on sensing, or partial sensing, or random selection only if upper layers indicates that transmissions of multiple MAC PDUs are allowed according to either clause 5.10.13.1a of TS 36.331 [8] or TS 38.331 [25], and the MAC entity selects to create a configured sidelink grant corresponding to transmissions of multiple MAC PDUs, and data is available in STCH associated with one or multiple carriers, the MAC entity shall for each Sidelink process configured for multiple transmissions:\n-\tif there is no configured sidelink grant associated with the Sidelink process on any carrier allowed for the STCH as indicated by upper layers, as specified in TS 24.386 [15]:\n-\ttrigger the TX carrier (re-)selection procedure as specified in clause 5.14.1.5;\n-\telse if there is a configured sidelink grant associated with the Sidelink process:\n-\tif SL_RESOURCE_RESELECTION_COUNTER = 0 and when SL_RESOURCE_RESELECTION_COUNTER was equal to 1 the MAC entity randomly selected, with equal probability, a value in the interval [0, 1] which is above the probability configured by upper layers in probResourceKeep; or\n-\tif neither transmission nor retransmission has been performed by the MAC entity on any resource indicated in the configured sidelink grant during the last second; or\n-\tif sl-ReselectAfter is configured and the number of consecutive unused transmission opportunities on resources indicated in the configured sidelink grant is equal to sl-ReselectAfter; or\n-\tif none of the configured sidelink grant(s) on the carrier(s) allowed for the STCH have radio resources available in this TTI to accommodate a RLC SDU according to clause 5.14.1.3.1 by using the maximum allowed MCS configured by upper layers in maxMCS-PSSCH and the MAC entity selects not to segment the RLC SDU; or\nNOTE 4:\tIf none of the configured sidelink grant(s) on the carrier(s) allowed for the STCH have radio resources available in this TTI to accommodate the RLC SDU according to clause 5.14.1.3.1, it is left for UE implementation whether to perform segmentation or sidelink resource reselection.\n-\tif none of the configured sidelink grant(s) on the carrier(s) allowed for the STCH have radio resources available in this TTI, according to clause 5.14.1.3.1 to fulfil the latency requirement of the data in a sidelink logical channel according to the associated PPPP, and the MAC entity selects not to perform transmission(s) corresponding to a single MAC PDU; or\nNOTE 5:\tIf the latency requirement is not met, it is left for UE implementation whether to perform transmission(s) corresponding to single MAC PDU or sidelink resource reselection.\n-\tif the pool of resources where the sidelink grant is configured for the Sidelink process, is reconfigured by upper layers:\n-\ttrigger the TX carrier (re-)selection procedure as specified in clause 5.14.1.5;\n-\tclear the configured sidelink grant associated to the Sidelink process;\n-\tflush the HARQ buffer associated to the Sidelink process;\n-\telse if SL_RESOURCE_RESELECTION_COUNTER = 0 and when SL_RESOURCE_RESELECTION_COUNTER was equal to 1 the MAC entity randomly selected, with equal probability, a value in the interval [0, 1] which is less than or equal to the probability configured by upper layers in probResourceKeep:\n-\tclear the configured sidelink grant, if available;\n-\trandomly select, with equal probability, an integer value in the interval [5, 15] for the resource reservation interval higher than or equal to 100ms, in the interval [10, 30] for the resource reservation interval equal to 50ms or in the interval [25, 75] for the resource reservation interval equal to 20ms, and set SL_RESOURCE_RESELECTION_COUNTER to the selected value;\n-\tuse the previously selected sidelink grant for the number of transmissions of the MAC PDUs determined in clause 14.1.1.4B of TS 36.213 [2] with the resource reservation interval to determine the set of subframes in which transmissions of SCI and SL-SCH occur according to clauses 14.2.1 and 14.1.1.4B of TS 36.213 [2];\n-\tconsider the selected sidelink grant to be a configured sidelink grant;\n-\tif the TX carrier (re-)selection procedure was triggered in above and one or more carriers have been (re-)selected in the Tx carrier (re-)selection according to clause 5.14.1.5:\n-\tdetermine the order of the (re-)selected carriers, according to the decreasing order based on the highest priority of logical channels which are allowed on each (re-)selected carrier, and perform the following for each Sidelink process on each (re-)selected carrier according to the order:\n-\tselect one of the allowed values configured by upper layers in restrictResourceReservationPeriod and set the resource reservation interval by multiplying 100 with the selected value;\nNOTE 6:\tHow the UE selects this value is up to UE implementation.\n-\trandomly select, with equal probability, an integer value in the interval [5, 15] for the resource reservation interval higher than or equal to 100ms, in the interval [10, 30] for the resource reservation interval equal to 50ms or in the interval [25, 75] for the resource reservation interval equal to 20ms, and set SL_RESOURCE_RESELECTION_COUNTER to the selected value;\n-\tselect the number of HARQ retransmissions from the allowed numbers that are configured by upper layers in allowedRetxNumberPSSCH included in pssch-TxConfigList and, if configured by upper layers, overlapped in allowedRetxNumberPSSCH indicated in cbr-pssch-TxConfigList for the highest priority of the sidelink logical channel(s) allowed on the selected carrier and the CBR measured by lower layers according to TS 36.214 [6] if CBR measurement results are available or the corresponding defaultTxConfigIndex configured by upper layers if CBR measurement results are not available;\n-\tselect an amount of frequency resources within the range that is configured by upper layers between minSubchannel-NumberPSSCH and maxSubchannel-NumberPSSCH included in pssch-TxConfigList and, if configured by upper layers, overlapped between minSubchannel-NumberPSSCH and maxSubchannel-NumberPSSCH indicated in cbr-pssch-TxConfigList for the highest priority of the sidelink logical channel(s) allowed on the selected carrier and the CBR measured by lower layers according to TS 36.214 [6] if CBR measurement results are available or the corresponding defaultTxConfigIndex configured by upper layers if CBR measurement results are not available;\n-\trandomly select the time and frequency resources for one transmission opportunity from the resources indicated by the physical layer according to clause 14.1.1.6 of TS 36.213 [2], according to the amount of selected frequency resources. The selected time and frequency resources shall fulfil the physical layer requirements as specified in TS 36.101 [10], and the random function shall be such that each of the allowed selections can be chosen with equal probability;\n-\tuse the randomly selected resource to select a set of periodic resources spaced by the resource reservation interval for transmission opportunities of SCI and SL-SCH corresponding to the number of transmission opportunities of MAC PDUs determined in clause 14.1.1.4B of TS 36.213 [2];\n-\tif the number of HARQ retransmissions is equal to 1:\n-\tif there are available resources left in the resources indicated by the physical layer according to clause 14.1.1.6 of TS 36.213 [2] that meet the conditions in clause 14.1.1.7 of TS 36.213 [2] for more transmission opportunities:\n-\trandomly select the time and frequency resources for one transmission opportunity from the available resources, according to the amount of selected frequency resources. The selected time and frequency resources shall fulfil the physical layer requirements as specified in TS 36.101 [10], and the random function shall be such that each of the allowed selections can be chosen with equal probability;\n-\tuse the randomly selected resource to select a set of periodic resources spaced by the resource reservation interval for the other transmission opportunities of SCI and SL-SCH corresponding to the number of retransmission opportunities of the MAC PDUs determined in clause 14.1.1.4B of TS 36.213 [2];\n-\tconsider the first set of transmission opportunities as the new transmission opportunities and the other set of transmission opportunities as the retransmission opportunities;\n-\tconsider the set of new transmission opportunities and retransmission opportunities as the selected sidelink grant.\n-\telse:\n-\tconsider the set as the selected sidelink grant;\n-\tuse the selected sidelink grant to determine the set of subframes in which transmissions of SCI and SL-SCH occur according to clause 14.2.1 and 14.1.1.4B of TS 36.213 [2];\n-\tconsider the selected sidelink grant to be a configured sidelink grant;\n-\telse, if the MAC entity is configured by upper layers to transmit using pool(s) of resources in one or multiple carriers as indicated in either clause 5.10.13.1 of TS 36.331 [8] or TS 38.331 [25], the MAC entity selects to create a configured sidelink grant corresponding to transmission(s) of a single MAC PDU, and data is available in STCH associated with one or multiple carriers, the MAC entity shall for a Sidelink process:\n-\ttrigger the TX carrier (re-)selection procedure as specified in clause 5.14.1.5;\n-\tif one or more carriers have been (re-)selected in the Tx carrier (re-)selection according to clause 5.14.1.5:\n-\tdetermine the order of the (re-)selected carriers, according to the decreasing order based on the highest priority of logical channels which are allowed on each (re-)selected carrier, and perform the following for each Sidelink process on each (re-)selected carrier according to the order:\n-\tselect the number of HARQ retransmissions from the allowed numbers that are configured by upper layers in allowedRetxNumberPSSCH included in pssch-TxConfigList and, if configured by upper layers, overlapped in allowedRetxNumberPSSCH indicated in cbr-pssch-TxConfigList for the highest priority of the sidelink logical channel(s) allowed on the selected carrier and the CBR measured by lower layers according to TS 36.214 [6] if CBR measurement results are available or the corresponding defaultTxConfigIndex configured by upper layers if CBR measurement results are not available;\n-\tselect an amount of frequency resources within the range that is configured by upper layers between minSubchannel-NumberPSSCH and maxSubchannel-NumberPSSCH included in pssch-TxConfigList and, if configured by upper layers, overlapped between minSubchannel-NumberPSSCH and maxSubchannel-NumberPSSCH indicated in cbr-pssch-TxConfigList for the highest priority of the sidelink logical channel(s) allowed on the selected carrier and the CBR measured by lower layers according to TS 36.214 [6] if CBR measurement results are available or the corresponding defaultTxConfigIndex configured by upper layers if CBR measurement results are not available;\n-\trandomly select the time and frequency resources for one transmission opportunity of SCI and SL-SCH from the resources indicated by the physical layer according to clause 14.1.1.6 of TS 36.213 [2] , according to the amount of selected frequency resources. The selected time and frequency resources shall fulfil the physical layer requirement as specified in TS 36.101 [10], and the random function shall be such that each of the allowed selections can be chosen with equal probability;\n-\tif the number of HARQ retransmissions is equal to 1:\n-\tif there are available resources left in the resources indicated by the physical layer according to clause 14.1.1.6 of TS 36.213 [2] that meet the conditions in subcause 14.1.1.7 of TS 36.213 [2] for one more transmission opportunity:\n-\trandomly select the time and frequency resources for the other transmission opportunity of SCI and SL-SCH corresponding to additional transmission of the MAC PDU from the available resources, according to the amount of selected frequency resources. The selected time and frequency resources shall fulfil the physical layer requirements as specified in TS 36.101 [10], and the random function shall be such that each of the allowed selections can be chosen with equal probability;\n-\tconsider a transmission opportunity which comes first in time as the new transmission opportunity and a transmission opportunity which comes later in time as the retransmission opportunity;\n-\tconsider both of the transmission opportunities as the selected sidelink grant;\n-\telse:\n-\tconsider the transmission opportunity as the selected sidelink grant;\n-\tuse the selected sidelink grant to determine the subframes in which transmission(s) of SCI and SL-SCH occur according to clause 14.2.1 and 14.1.1.4B of TS 36.213 [2];\n-\tconsider the selected sidelink grant to be a configured sidelink grant.\nNOTE 7:\tFor V2X sidelink communication, the UE should ensure the randomly selected time and frequency resources fulfill the latency requirement.\nNOTE 8:\tFor V2X sidelink communication, when there is no overlapping between the chosen configuration(s) in pssch-TxConfigList and chosen configuration(s) indicated in cbr-pssch-TxConfigList, it is up to UE implementation whether the UE transmits and which transmitting parameters the UE uses between allowed configuration(s) indicated in pssch-TxConfigList and allowed configuration(s) indicated in cbr-pssch-TxConfigList.\nThe MAC entity shall for each subframe:\n-\tfor each configured sidelink grant occurring in this subframe:\n-\tif SL_RESOURCE_RESELECTION_COUNTER = 1 for the Sidelink process associated with the configured sidelink grant and the MAC entity randomly selected, with equal probability, a value in the interval [0, 1] which is above the probability configured by upper layers in probResourceKeep:\n-\tset the resource reservation interval for the configured sidelink grant equal to 0;\n-\tif the configured sidelink grant corresponds to transmission of SCI:\n-\tfor V2X sidelink communication in UE autonomous resource selection:\n-\tconsider the selected transmission format to be SL-V2X-TxProfile for the highest priority of the sidelink logical channel(s) in the MAC PDU (TS 36.331 [8]);\n-\tselect a MCS which is, if configured, within the range that is configured by upper layers between minMCS-PSSCH and maxMCS-PSSCH included in pssch-TxConfigList associated with the selected transmission format and, if configured by upper layers, overlapped between minMCS-PSSCH and maxMCS-PSSCH indicated in cbr-pssch-TxConfigList associated with the selected transmission format for the highest priority of the sidelink logical channel(s) in the MAC PDU and the CBR measured by lower layers according to TS 36.214 [6] if CBR measurement results are available or the corresponding defaultTxConfigIndex configured by upper layers if CBR measurement results are not available;\nNOTE 9:\tMCS selection is up to UE implementation if the MCS or the corresponding range is not configured by upper layers.\nNOTE 10:\tFor V2X sidelink communication, when there is no overlapping between the chosen configuration(s) included in pssch-TxConfigList and chosen configuration(s) indicated in cbr-pssch-TxConfigList, it is up to UE implementation whether the UE transmits and which transmitting parameters the UE uses between allowed configuration(s) indicated in pssch-TxConfigList and allowed configuration(s) indicated in cbr-pssch-TxConfigList.\n-\tfor V2X sidelink communication in scheduled resource allocation:\n-\tconsider the selected transmission format to be SL-V2X-TxProfile for the highest priority of the sidelink logical channel(s) in the MAC PDU (TS 36.331 [8]);\n-\tselect a MCS which is associated with the selected transmission format unless it is configured by upper layer;\n-\tinstruct the physical layer to transmit SCI corresponding to the configured sidelink grant;\n-\tfor V2X sidelink communication, deliver the configured sidelink grant, the associated HARQ information and the value of the highest priority of the sidelink logical channel(s) in the MAC PDU to the Sidelink HARQ Entity for this subframe;\n-\telse if the configured sidelink grant corresponds to transmission of first transport block for sidelink communication:\n-\tdeliver the configured sidelink grant and the associated HARQ information to the Sidelink HARQ Entity for this subframe.\nNOTE 11:\tIf the MAC entity has multiple configured sidelink grants occurring in one subframe and if not all of them can be processed due to the single-cluster SC-FDM restriction, it is left for UE implementation which one of these to process according to the procedure above.\nThe MAC entity is configured by upper layers to transmit using pool(s) of resources on one or multiple carriers as indicated in clause 5.10.13.1 of TS 36.331 [8]. For each carrier, there is one Sidelink HARQ Entity at the MAC entity for transmission on SL-SCH, which maintains a number of parallel Sidelink processes.\nFor sidelink communication, the number of transmitting Sidelink processes associated with the Sidelink HARQ Entity is defined in TS 36.331 [8].\nFor V2X sidelink communication, the maximum number of transmitting Sidelink processes associated with each Sidelink HARQ Entity is 8. A sidelink process may be configured for transmissions of multiple MAC PDUs. For transmissions of multiple MAC PDUs, the maximum number of transmitting Sidelink processes associated with each Sidelink HARQ Entity is 2.\nA delivered and configured sidelink grant and its associated HARQ information are associated with a Sidelink process.\nFor each subframe of the SL-SCH and each Sidelink process, the Sidelink HARQ Entity shall:\n-\tif a sidelink grant corresponding to a new transmission opportunity has been indicated for this Sidelink process and there is SL data, for sidelink logical channels of ProSe destination associated with this sidelink grant, available for transmission:\n-\tobtain the MAC PDU from the \"Multiplexing and assembly\" entity;\n-\tdeliver the MAC PDU and the sidelink grant and the HARQ information to this Sidelink process;\n-\tinstruct this Sidelink process to trigger a new transmission.\n-\telse, if this subframe corresponds to retransmission opportunity for this Sidelink process:\n-\tinstruct this Sidelink process to trigger a retransmission.\nNOTE:\tThe resources for retransmission opportunities are specified in clause 14.2.1 of TS 36.213 [2] unless specified in clause 5.14.1.1.\nThe Sidelink process is associated with a HARQ buffer.\nThe sequence of redundancy versions is 0, 2, 3, 1. The variable CURRENT_IRV is an index into the sequence of redundancy versions. This variable is updated modulo 4.\nNew transmissions and retransmissions either for a given SC period in sidelink communication or in V2X sidelink communication are performed on the resource indicated in the sidelink grant as specified in clause 5.14.1.1 and with the MCS selected as specified in clause 5.14.1.1.\nIf the sidelink process is configured to perform transmissions of multiple MAC PDUs for V2X sidelink communication the process maintains a counter SL_RESOURCE_RESELECTION_COUNTER. For other configurations of the sidelink process, this counter is not available.\nIf the Sidelink HARQ Entity requests a new transmission, the Sidelink process shall:\n-\tset CURRENT_IRV to 0;\n-\tstore the MAC PDU in the associated HARQ buffer;\n-\tstore the sidelink grant received from the Sidelink HARQ Entity;\n-\tgenerate a transmission as described below.\nIf the Sidelink HARQ Entity requests a retransmission, the Sidelink process shall:\n-\tgenerate a transmission as described below.\nTo generate a transmission, the Sidelink process shall:\n-\tif there is no uplink transmission; or if the MAC entity is able to perform uplink transmissions and transmissions on SL-SCH simultaneously at the time of the transmission; or if there is a MAC PDU to be transmitted in this TTI in uplink, except a MAC PDU obtained from the Msg3 buffer, and transmission of V2X sidelink communication is prioritized over uplink transmission; and\n-\tif there is no Sidelink Discovery Gap for Transmission or no transmission on PSDCH at the time of the transmission; or, in case of transmissions of V2X sidelink communication, if the MAC entity is able to perform transmissions on SL-SCH and transmissions on PSDCH simultaneously at the time of the transmission:\n-\tinstruct the physical layer to generate a transmission according to the stored sidelink grant with the redundancy version corresponding to the CURRENT_IRV value.\n-\tincrement CURRENT_IRV by 1;\n-\tif this transmission corresponds to the last transmission of the MAC PDU:\n-\tdecrement SL_RESOURCE_RESELECTION_COUNTER by 1, if available.\nThe transmission of the MAC PDU for V2X sidelink communication is prioritized over uplink transmissions if the following conditions are met:\n-\tif the MAC entity is not able to perform all uplink transmissions and all transmissions of V2X sidelink communication simultaneously at the time of the transmission; and\n-\tif uplink transmission is not prioritized by upper layer according to TS 24.386 [15]; and\n-\tif thresSL-TxPrioritization is configured and the value of the highest priority of the sidelink logical channel(s) in the MAC PDU is lower than thresSL-TxPrioritization.\nFor PDU(s) associated with one SCI, MAC shall consider only logical channels with the same Source Layer-2 ID-Destination Layer-2 ID pair.\nMultiple transmissions within overlapping SC periods to different ProSe Destinations are allowed subject to single-cluster SC-FDM constraint.\nIn V2X sidelink communication, multiple transmissions for different Sidelink processes are allowed to be independently performed in different subframes.\nThe Logical Channel Prioritization procedure is applied when a new transmission is performed. Each sidelink logical channel has an associated priority which is the PPPP and optionally an associated PPPR. Multiple sidelink logical channels may have the same associated priority. The mapping between priority and LCID is left for UE implementation. If duplication is activated as specified in TS 36.323 [4], the MAC entity shall map different sidelink logical channels which correspond to the same PDCP entity onto different carriers in accordance with clause 5.14.1.5, or onto different carriers of different carrier sets (if configured in allowedCarrierFreqList for the corresponding destination). For a given sidelink logical channel, it is up to UE implementation which carrier set to select among the carrier sets configured in allowedCarrierFreqList (if configured) for the corresponding destination.\nThe MAC entity shall perform the following Logical Channel Prioritization procedure either for each SCI transmitted in an SC period in sidelink communication, or for each SCI corresponding to a new transmission in V2X sidelink communication:\n-\tThe MAC entity shall allocate resources to the sidelink logical channels in the following steps:\n-\tOnly consider sidelink logical channels not previously selected for this SC period and the SC periods (if any) which are overlapping with this SC period, to have data available for transmission in sidelink communication;\n-\tOnly consider sidelink logical channels which meet the following conditions:\n-\tallowed on the carrier where the SCI is transmitted for V2X sidelink communication, if the carrier is configured by upper layers according to TS 36.331 [8] and TS 24.386 [15];\n-\thaving a priority whose associated threshCBR-FreqReselection is no lower than the CBR of the carrier when the carrier is (re-)selected in accordance with 5.14.1.5;\n-\tOnly consider one sidelink logical channel among sidelink logical channels corresponding to same PDCP entity, if duplication is activated as specified in TS 36.323 [4].\n-\tStep 0: Select a ProSe Destination, having the sidelink logical channel with the highest priority, among the sidelink logical channels having data available for transmission and having the same transmission format as the one selected corresponding to the ProSe Destination;\nNOTE:\tThe sidelink logical channels belonging to the same ProSe Destination have the same transmission format.\n-\tFor each MAC PDU associated to the SCI:\n-\tStep 1: Among the sidelink logical channels belonging to the selected ProSe Destination and having data available for transmission, allocate resources to the sidelink logical channel with the highest priority;\n-\tStep 2: if any resources remain, sidelink logical channels belonging to the selected ProSe Destination are served in decreasing order of priority until either the data for the sidelink logical channel(s) or the SL grant is exhausted, whichever comes first. Sidelink logical channels configured with equal priority should be served equally.\n-\tThe UE shall also follow the rules below during the scheduling procedures above:\n-\tthe UE should not segment an RLC SDU (or partially transmitted SDU) if the whole SDU (or partially transmitted SDU) fits into the remaining resources;\n-\tif the UE segments an RLC SDU from the sidelink logical channel, it shall maximize the size of the segment to fill the grant as much as possible;\n-\tthe UE should maximise the transmission of data;\n-\tif the MAC entity is given a sidelink grant size that is equal to or larger than 10 bytes (for sidelink communication) or 11 bytes (for V2X sidelink communication) while having data available for transmission, the MAC entity shall not transmit only padding.\nThe MAC entity shall multiplex MAC SDUs in a MAC PDU according to clauses 5.14.1.3.1 and 6.1.6.\nThe sidelink Buffer Status reporting procedure is used to provide the serving eNB with information about the amount of sidelink data available for transmission in the SL buffers associated with the MAC entity. RRC controls BSR reporting for the sidelink by configuring the two timers periodic-BSR-TimerSL and retx-BSR-TimerSL. Each sidelink logical channel belongs to a ProSe Destination. Each sidelink logical channel is allocated to an LCG depending on the priority and optionally the PPPR of the sidelink logical channel, and the mapping between LCG ID and priority and optionally the mapping between LCG ID and PPPR which are provided by upper layers in logicalChGroupInfoList, as specified in TS 36.331 [8]. LCG is defined per ProSe Destination.\nA sidelink Buffer Status Report (BSR) shall be triggered if any of the following events occur:\n-\tif the MAC entity has a configured SL-RNTI or a configured SL-V-RNTI:\n-\tSL data, for a sidelink logical channel of a ProSe Destination, becomes available for transmission in the RLC entity or in the PDCP entity (the definition of what data shall be considered as available for transmission is specified in TS 36.322 [3] and TS 36.323 [4] respectively) and either the data belongs to a sidelink logical channel with higher priority than the priorities of the sidelink logical channels which belong to any LCG belonging to the same ProSe Destination and for which data is already available for transmission, or there is currently no data available for transmission for any of the sidelink logical channels belonging to the same ProSe Destination, in which case the Sidelink BSR is referred below to as \"Regular Sidelink BSR\";\n-\tUL resources are allocated and number of padding bits remaining after a Padding BSR has been triggered is equal to or larger than the size of the Sidelink BSR MAC control element containing the buffer status for at least one LCG of a ProSe Destination plus its subheader, in which case the Sidelink BSR is referred below to as \"Padding Sidelink BSR\";\n-\tretx-BSR-TimerSL expires and the MAC entity has data available for transmission for any of the sidelink logical channels, in which case the Sidelink BSR is referred below to as \"Regular Sidelink BSR\";\n-\tperiodic-BSR-TimerSL expires, in which case the Sidelink BSR is referred below to as \"Periodic Sidelink BSR\";\n-\telse:\n-\tAn SL-RNTI or an SL-V-RNTI is configured by upper layers and SL data is available for transmission in the RLC entity or in the PDCP entity (the definition of what data shall be considered as available for transmission is specified in TS 36.322 [3] and TS 36.323 [4] respectively), in which case the Sidelink BSR is referred below to as \"Regular Sidelink BSR\".\nFor Regular and Periodic Sidelink BSR:\n-\tif the number of bits in the UL grant is equal to or larger than the size of a Sidelink BSR containing buffer status for all LCGs having data available for transmission plus its subheader:\n-\treport Sidelink BSR containing buffer status for all LCGs having data available for transmission;\n-\telse report Truncated Sidelink BSR containing buffer status for as many LCGs having data available for transmission as possible, taking the number of bits in the UL grant into consideration.\nFor Padding Sidelink BSR:\n-\tif the number of padding bits remaining after a Padding BSR has been triggered is equal to or larger than the size of a Sidelink BSR containing buffer status for all LCGs having data available for transmission plus its subheader:\n-\treport Sidelink BSR containing buffer status for all LCGs having data available for transmission;\n-\telse report Truncated Sidelink BSR containing buffer status for as many LCGs having data available for transmission as possible, taking the number of bits in the UL grant into consideration.\nIf the Buffer Status reporting procedure determines that at least one Sidelink BSR has been triggered and not cancelled:\n-\tif the MAC entity has UL resources allocated for new transmission for this TTI and the allocated UL resources can accommodate a Sidelink BSR MAC control element plus its subheader as a result of logical channel prioritization:\n-\tinstruct the Multiplexing and Assembly procedure to generate the Sidelink BSR MAC control element(s);\n-\tstart or restart periodic-BSR-TimerSL except when all the generated Sidelink BSRs are Truncated Sidelink BSRs;\n-\tstart or restart retx-BSR-TimerSL;\n-\telse if a Regular Sidelink BSR has been triggered:\n-\tif an uplink grant is not configured:\n-\ta Scheduling Request shall be triggered.\nA MAC PDU shall contain at most one Sidelink BSR MAC control element, even when multiple events trigger a Sidelink BSR by the time a Sidelink BSR can be transmitted in which case the Regular Sidelink BSR and the Periodic Sidelink BSR shall have precedence over the padding Sidelink BSR.\nThe MAC entity shall restart retx-BSR-TimerSL upon reception of an SL grant.\nAll triggered regular Sidelink BSRs shall be cancelled in case the remaining configured SL grant(s) valid for this SC Period can accommodate all pending data available for transmission in sidelink communication or in case the remaining configured SL grant(s) valid can accommodate all pending data available for transmission in V2X sidelink communication. All triggered Sidelink BSRs shall be cancelled in case the MAC entity has no data available for transmission for any of the sidelink logical channels. All triggered Sidelink BSRs shall be cancelled when a Sidelink BSR (except for Truncated Sidelink BSR) is included in a MAC PDU for transmission. All triggered Sidelink BSRs shall be cancelled, and retx-BSR-TimerSL and periodic-BSR-TimerSL shall be stopped, when upper layers configure autonomous resource selection.\nThe MAC entity shall transmit at most one Regular/Periodic Sidelink BSR in a TTI. If the MAC entity is requested to transmit multiple MAC PDUs in a TTI, it may include a padding Sidelink BSR in any of the MAC PDUs which do not contain a Regular/Periodic Sidelink BSR.\nAll Sidelink BSRs transmitted in a TTI always reflect the buffer status after all MAC PDUs have been built for this TTI. Each LCG shall report at the most one buffer status value per TTI and this value shall be reported in all Sidelink BSRs reporting buffer status for this LCG.\nNOTE:\tA Padding Sidelink BSR is not allowed to cancel a triggered Regular/Periodic Sidelink BSR. A Padding Sidelink BSR is triggered for a specific MAC PDU only and the trigger is cancelled when this MAC PDU has been built.\nThe MAC entity shall consider a CBR of a carrier to be one measured by lower layers according to TS 36.214 [6] if CBR measurement results are available, or the corresponding defaultTxConfigIndex configured by upper layers for the carrier if CBR measurement results are not available.\nIf the TX carrier (re-)selection is triggered for a Sidelink process according to clause 5.14.1.1, the MAC entity shall:\n-\tif there is no configured sidelink grant on any carrier allowed for the sidelink logical channel where data is available as indicated by upper layers (TS 36.331 [8] and TS 24.386 [15]):\n-\tfor each carrier configured by upper layers associated with the concerned sidelink logical channel:\n-\tif the CBR of the carrier is below threshCBR-FreqReselection associated with the priority of the sidelink logical channel:\n-\tconsider the carrier as a candidate carrier for TX carrier (re-)selection for the concerned sidelink logical channel.\n-\telse:\n-\tfor each sidelink logical channel, if any, where data is available and that are allowed on the carrier for which Tx carrier (re-)selection is triggered according to clause 5.14.1.1:\n-\tif the CBR of the carrier is below threshCBR-FreqKeeping associated with priority of the sidelink logical channel:\n-\tselect the carrier and the associated pool of resources.\n-\telse:\n-\tfor each carrier configured by upper layers on which the sidelink logical channel is allowed, if the CBR of the carrier is below threshCBR-FreqReselection associated with the priority of the sidelink logical channel;\n-\tconsider the carrier as a candidate carrier for TX carrier (re-)selection.\nThe MAC entity shall:\n-\tif one or more carriers are considered as the candidate carriers for TX carrier (re-)selection:\n-\tfor each sidelink logical channel allowed on the carrier where data is available and Tx carrier (re-)selection is triggered:\n-\tselect one or more carrier(s) and associated pool(s) of resources among the candidate carriers with increasing order of CBR from the lowest CBR.\nNOTE 1:\tIt is left to UE implementation how many carriers to select based on UE capability.\nNOTE 2:\tIt is left to UE implementation to determine the sidelink logical channels among the sidelink logical channels where data is available and that are allowed on the carrier for which Tx carrier (re-) selection is triggered.\nNOTE 3:\tIf the MAC entity is configured by the upper layer to receive a sidelink grant dynamically on the PDCCH, it is left to UE implementation to determine which carriers configured by upper layer in sl-V2X-ConfigDedicated, as specified in TS 36.331 [8] are considered as selected carriers for the sidelink synchronization procedures in clauses 5.10.7, 5.10.8 and 5.10.8a of TS 36.331 [8].\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "5.14.2\tSL-SCH Data reception",
                            "text_content": "SCI transmitted on the PSCCH indicate if there is a transmission on SL-SCH and provide the relevant HARQ information.\nThe MAC entity shall:\n-\tfor each subframe during which the MAC entity monitors PSCCH:\n-\tif SCI for this subframe has been received on the PSCCH for sidelink communication with a Group Destination ID of interest to this MAC entity:\n-\tdetermine the set of subframes in which reception of the first transport blocks occur according to clause 14.2.2 of TS 36.213 [2] using the received SCI;\n-\tstore the SCI and associated HARQ information as SCI valid for the subframes corresponding to first transmission of each transport block;\n-\telse if SCI for this subframe has been received on the PSCCH for V2X sidelink communication:\n-\tdetermine the set of subframes in which reception of the transport block occur according to clause 14.1.2 of TS 36.213 [2] using the received SCI;\n-\tstore the SCI and associated HARQ information as SCI valid for the subframes corresponding to transmission(s) of the transport block;\n-\tfor each subframe for which the MAC entity has a valid SCI:\n-\tdeliver the SCI and the associated HARQ information to the Sidelink HARQ Entity.\nFor each carrier, there is one Sidelink HARQ Entity at the MAC entity for reception of the SL-SCH, which maintains a number of parallel Sidelink processes.\nEach Sidelink process is associated with SCI in which the MAC entity is interested. If SCI includes the Group Destination ID, this interest is as determined by the Group Destination ID of the SCI. The Sidelink HARQ Entity directs HARQ information and associated TBs received on the SL-SCH to the corresponding Sidelink processes.\nThe number of Receiving Sidelink processes associated with the Sidelink HARQ Entity is defined in TS 36.331 [8].\n\nFor each subframe of the SL-SCH, the Sidelink HARQ Entity shall:\n-\tfor each SCI valid in this subframe:\n-\tallocate the TB received from the physical layer and the associated HARQ information to a Sidelink process, associate this Sidelink process with this SCI and consider this transmission to be a new transmission.\n-\tfor each Sidelink process:\n-\tif this subframe corresponds to retransmission opportunity for the Sidelink process according to its associated SCI:\n-\tallocate the TB received from the physical layer and the associated HARQ information to the Sidelink process and consider this transmission to be a retransmission.\nFor each subframe where a transmission takes place for the Sidelink process, one TB and the associated HARQ information is received from the Sidelink HARQ Entity.\nThe sequence of redundancy versions is 0, 2, 3, 1. The variable CURRENT_IRV is an index into the sequence of redundancy versions. This variable is updated modulo 4.\nFor each received TB and associated HARQ information, the Sidelink process shall:\n-\tif this is a new transmission:\n-\tset CURRENT_IRV to 0;\n-\tstore the received data in the soft buffer and optionally attempt to decode the received data according to CURRENT_IRV.\n-\telse if this is a retransmission:\n-\tif the data for this TB has not yet been successfully decoded:\n-\tincrement CURRENT_IRV by 1;\n-\tcombine the received data with the data currently in the soft buffer for this TB and optionally attempt to decode the combined data according to the CURRENT_IRV.\n-\tif the data which the MAC entity attempted to decode was successfully decoded for this TB:\n-\tif this is the first successful decoding of the data for this TB:\n-\tif the DST field of the decoded MAC PDU subheader is equal to the 16 MSB of any of the Destination Layer-2 ID(s) of the UE for which the 8 LSB are equal to the Group Destination ID in the corresponding SCI:\n-\tdeliver the decoded MAC PDU to the disassembly and demultiplexing entity.\n-\telse if the DST field of the decoded MAC PDU subheader is equal to any of the Destination Layer-2 ID(s) of the UE:\n-\tdeliver the decoded MAC PDU to the disassembly and demultiplexing entity.\nThe MAC entity shall disassemble and demultiplex a MAC PDU as defined in clause 6.1.6.\n",
                            "figures_meta_data": [],
                            "tables": []
                        }
                    ]
                },
                {
                    "title": "5.15\tSL-DCH data transfer",
                    "description": "",
                    "summary": "",
                    "text_content": "",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": [
                        {
                            "title": "5.15.1\tSL-DCH data transmission",
                            "text_content": "In order to transmit MAC PDU(s) on SL-DCH, the MAC entity shall for every discovery period and each MAC PDU:\n-\tif the MAC entity is configured by upper layers with a specific grant as specified in TS 36.331 [8]:\n-\tusing the specific grant determine the set of subframes in which a transmission of new MAC PDU(s) occur according to clause 14.3.1 of TS 36.213 [2];\n-\tconsider the determined set of subframes to be a configured grant for the corresponding discovery period;\n-\tfor every subframe, if the MAC entity has a configured grant occurring in that subframe, deliver the configured grant and the MAC PDU to the Sidelink HARQ Entity;\n-\tclear the configured grant at the end of the corresponding discovery period.\nNOTE:\tMapping between grant and physical resources is specified in clause 9.5.6 of TS 36.211 [7].\n-\telse if the MAC entity is configured with a single pool of resources by upper layers:\n-\tselect a random value p1 in the range from 0 to 1, where the random function shall be such that each of the allowed selections can be chosen with equal probability;\n-\tif p1 is less than txProbability:\n-\tselect a random resource from the pool of resources (excluding any resources which are overlapping with PRACH or resources belonging to the subframes of resources already selected for transmissions on SL-DCH in this discovery period), where the random function shall be such that each of the allowed selections (see clause 14.3.1 of TS 36.213 [2]) can be chosen with equal probability;\n-\tusing the selected resource determine the set of subframes in which the transmission of a MAC PDU can occur according to clause 14.3.1 of TS 36.213 [2]\n-\tconsider the determined set of subframes to be a configured grant for the corresponding discovery period;\n-\tfor every subframe, if the MAC entity has a configured grant occurring in that subframe, deliver the configured grant and the MAC PDU to the Sidelink HARQ Entity;\n-\tclear the configured grant at the end of the corresponding discovery period.\nThere is one Sidelink HARQ Entity at the MAC entity for transmission on SL-DCH, which maintains one Sidelink process for each MAC PDU.\nFor each subframe of the SL-DCH the Sidelink HARQ Entity shall:\n-\tif a grant and a MAC PDU has been delivered for this subframe to the Sidelink HARQ Entity:\n-\tdeliver the MAC PDU and the grant to the Sidelink process;\n-\tinstruct the Sidelink process to trigger a new transmission.\n-\telse, if this subframe corresponds to retransmission opportunity for the Sidelink process:\n-\tinstruct the Sidelink process to trigger a retransmission.\nThe Sidelink process is associated with a HARQ buffer.\nThe Sidelink process shall maintain a state variable CURRENT_TX_NB, which indicates the number of transmissions that have taken place for the MAC PDU currently in the buffer. When the Sidelink process is established, CURRENT_TX_NB shall be initialized to 0.\nThe sequence of redundancy versions is 0, 2, 3, 1. The variable CURRENT_IRV is an index into the sequence of redundancy versions. This variable is up-dated modulo 4.\nThe Sidelink process is configured with a maximum number of HARQ retransmissions by RRC: numRetx.\nIf the Sidelink HARQ Entity requests a new transmission, the Sidelink process shall:\n-\tset CURRENT_TX_NB to 0;\n-\tset CURRENT_IRV to 0;\n-\tstore the MAC PDU in the associated HARQ buffer;\n-\tstore the grant received from the Sidelink HARQ Entity;\n-\tgenerate a transmission as described below.\nIf the Sidelink HARQ Entity requests a retransmission, the Sidelink process shall:\n-\tincrement CURRENT_TX_NB by 1;\n-\tgenerate a transmission as described below.\nTo generate a transmission, the Sidelink process shall:\n-\tif there is no uplink transmission, no transmission or reception on PSCCH, and no transmission or reception on PSSCH at the time of the transmission; or\n-\tif there is a Sidelink Discovery Gap for Transmission at the time of transmission and if there is a MAC PDU to be transmitted in this TTI in uplink, which is not obtained from the Msg3 buffer:\n-\tinstruct the physical layer to generate a transmission according to the grant with the redundancy version corresponding to the CURRENT_IRV value.\n-\tincrement CURRENT_IRV by 1.\nAfter performing above actions, the Sidelink process then shall:\n-\tif CURRENT_TX_NB = numRetx:\n-\tflush the HARQ buffer.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "5.15.2\tSL-DCH data reception",
                            "text_content": "There is one Sidelink HARQ Entity at the MAC entity for reception on the SL-DCH which maintains a number of parallel Sidelink processes. The Sidelink HARQ Entity directs HARQ information and associated TBs received on the SL-DCH to the corresponding Sidelink processes.\nThe number of receiving Sidelink processes per Sidelink HARQ Entity is specified in TS 36.331 [8].\nFor each subframe of the SL-DCH, the Sidelink HARQ Entity shall:\n-\treceive the TB and the associated HARQ information from the physical layer;\n-\tif this subframe corresponds to a new transmission opportunity:\n-\tallocate the received TB (if any) and the associated HARQ information to a non-running Sidelink process and consider this transmission to be a new transmission.\n-\telse, if this subframe corresponds to a retransmission opportunity:\n-\tallocate the received TB (if any) and the associated HARQ information to its Sidelink process and consider this transmission to be a retransmission.\nFor each subframe where a transmission takes place for the Sidelink process, one TB and the associated HARQ information is received from the Sidelink HARQ Entity.\nThe sequence of redundancy versions is 0, 2, 3, 1. The variable CURRENT_IRV is an index into the sequence of redundancy versions. This variable is updated modulo 4.\nThe Sidelink process shall:\n-\tif this subframe corresponds to a new transmission opportunity:\n-\tset CURRENT_IRV to 0;\n-\telse, if this subframe corresponds to a retransmission opportunity:\n-\tincrement CURRENT_IRV by 1.\n-\tif a TB was allocated to the Sidelink process:\n-\tif this is a new transmission:\n-\toptionally store the received data in the soft buffer and attempt to decode the received data according to the CURRENT_IRV.\n-\telse if this is a retransmission:\n-\tif the data for this TB has not yet been successfully decoded:\n-\toptionally combine the received data with the data currently in the soft buffer for this TB and attempt to decode the combined data according to the CURRENT_IRV.\n-\tif the data which the MAC entity attempted to decode was successfully decoded for this TB:\n-\tif this is the first successful decoding of the data for this TB:\n-\tdeliver the decoded MAC PDU to upper layers.\n",
                            "figures_meta_data": [],
                            "tables": []
                        }
                    ]
                },
                {
                    "title": "5.16\tSL-BCH data transfer",
                    "description": "",
                    "summary": "",
                    "text_content": "",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": [
                        {
                            "title": "5.16.1\tSL-BCH data transmission",
                            "text_content": "When instructed to send SL-BCH, the MAC entity shall:\n-\tobtain the MAC PDU to transmit from SBCCH;\n-\tdeliver the MAC PDU to the physical layer and instruct it to generate a transmission.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "5.16.2\tSL-BCH data reception",
                            "text_content": "When the MAC entity needs to receive SL-BCH, the MAC entity shall:\n-\treceive and attempt to decode the SL-BCH;\n-\tif a TB on the SL-BCH has been successfully decoded:\n-\tdeliver the decoded MAC PDU to upper layers.\n",
                            "figures_meta_data": [],
                            "tables": []
                        }
                    ]
                },
                {
                    "title": "5.17\tData inactivity monitoring",
                    "description": "",
                    "summary": "",
                    "text_content": "The MAC entity may be configured by RRC with a Data inactivity monitoring functionality, when in RRC_CONNECTED. RRC controls Data inactivity operation by configuring the timer DataInactivityTimer.\nWhen DataInactivityTimer is configured, the MAC entity shall:\n-\tif the MAC entity receives the MAC SDU for DTCH logical channel , DCCH logical channel, or CCCH logical channel; or\n-\tif the MAC entity transmits the MAC SDU for DTCH logical channel, DCCH logical channel;\n-\tstart or restart DataInactivityTimer.\n-\tif DataInactivityTimer expires, indicate the expiry of DataInactivityTimer to upper layers.\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "5.18\tRecommended Bit Rate",
                    "description": "",
                    "summary": "",
                    "text_content": "The recommended bit rate procedure is used to provide the MAC entity with information about the bit rate which the eNB recommends. The bit rate is the recommended bit rate of the physical layer. Averaging window of default value 2000 ms will apply, as specified in TS 26.114 [16].\nThe eNB may transmit the Recommended bit rate MAC control element to the MAC entity to indicate the recommended bit rate for the UE for a specific logical channel and a specific direction (either uplink or downlink). Upon reception of a Recommended bit rate MAC control element the MAC entity shall:\n-\tindicate to upper layers the recommended bit rate for the indicated logical channel and direction\nThe MAC entity may request the eNB to indicate the recommended bit rate for a specific logical channel and a specific direction. If the MAC entity is requested by upper layers to query the eNB for the recommended bit rate for a logical channel and for a direction (i.e. for uplink or downlink), the MAC entity shall:\n-\tif a Recommended bit rate query for this logical channel and this direction has not been triggered:\n-\ttrigger a Recommended bit rate query for this logical channel, direction, and desired bit rate.\nIf the MAC entity has UL resources allocated for new transmission for this TTI the MAC entity shall:\n-\tfor each Recommended bit rate query that the Recommended Bit Rate procedure determines has been triggered and not cancelled:\n-\tif bitRateQueryProhibitTimer for the logical channel and the direction of this Recommended bit rate query is configured, and it is not running; and\n-\tif the MAC entity has UL resources allocated for new transmission for this TTI and the allocated UL resources can accommodate a Recommended bit rate MAC control element plus its subheader as a result of logical channel prioritization:\n-\tinstruct the Multiplexing and Assembly procedure to generate the Recommended bit rate MAC control element for the logical channel and the direction of this Recommended bit rate query;\n-\tstart the bitRateQueryProhibitTimer for the logical channel and the direction of this Recommended bit rate query\n-\tcancel this Recommended bit rate query.\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "5.19\tActivation/Deactivation of CSI-RS resources",
                    "description": "",
                    "summary": "",
                    "text_content": "The network may activate and deactivate the configured CSI-RS resources of a serving cell by sending the Activation/Deactivation of CSI-RS resources MAC control element described in clause 6.1.3.14. The configured CSI-RS resources are initially deactivated upon configuration and after a handover.\nThe MAC entity shall for each TTI:\n-\tif the MAC entity receives an Activation/Deactivation of CSI-RS resources MAC control element in this TTI on a serving cell, the MAC entity shall indicate to lower layers the information regarding the Activation/Deactivation of CSI-RS resources MAC control element:\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "5.20\tPreallocated uplink grant",
                    "description": "",
                    "summary": "",
                    "text_content": "When the preallocated uplink grant is configured by RRC, the following information is provided in ul-ConfigInfo:\n-\tUplink Scheduling interval ul-SchedInterval, starting subframe ul-StartSubframe of the preallocated uplink grant, the uplink grant ul-Grant and the number of HARQ process for the preallocated uplink grant numberOfConfUL-Processes.\nWhen the preallocated uplink grant configuration is released by RRC, the corresponding preallocated uplink grant shall be discarded.\nNOTE 1:\tWhen eIMTA is configured for the SpCell, if a preallocated grant occurs in a subframe that can be reconfigured through eIMTA L1 signalling, then the UE behaviour is left unspecified.\nIf ul-ConfigInfo is configured, the MAC entity shall:\n-\tconsider sequentially that the Nth grant occurs in the subframe for which:\n-\tsubframe = [N * ul-SchedInterval + ul-StartSubframe] modulo 10.\nFor TDD, the MAC entity is configured with ul-SchedInterval shorter than 10 subframes, the Nth grant shall be ignored if it occurs in a downlink subframe or a special subframe.\nNOTE 2:\tRetransmissions for uplink transmissions using the preallocated uplink grant can continue after clearing the preallocated uplink grant.\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "5.21\tSC-PTM Stop Indication",
                    "description": "",
                    "summary": "",
                    "text_content": "For NB-IoT UEs, BL UEs or UEs in enhanced coverage, the eNB may transmit the SC-PTM Stop Indication MAC control element to the MAC entity to indicate that the transmission of SC-MTCH associated with a G-RNTI is stopped as described in clause 6.1.3.12.\nUpon reception of the SC-PTM Stop Indication MAC control element associated with a G-RNTI, the MAC entity shall:\n-\tstop monitoring the PDCCH for this G-RNTI;\n-\tindicate to upper layers that the associated MBMS session is stopped.\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "5.22\tEntering Dormant SCell state",
                    "description": "",
                    "summary": "",
                    "text_content": "If the MAC entity is configured with one or more SCells, the network may transition configured SCells into Dormant State. Dormant State is not applicable for SpCell or PUCCH SCell. The network transitions SCell(s) in and out of Dormant State by sending Activation/Deactivation and/or Hibernation MAC control element as described in clause 6.1.3.8 and 6.1.3.15 respectively.\nFurthermore, the MAC entity maintains two timers related to the dormant state:\n-\tIf configured, an sCellHibernationTimer timer per configured SCell (except the SCell configured with PUCCH, if any). Upon the timer expiry, the MAC entity hibernates the associated SCell if it is in activated state. The same initial timer value applies to each instance of the sCellHibernationTimer and it is configured by RRC.\n-\tIf configured, a dormantSCellDeactivationTimer per configured SCell (except the SCell configured with PUCCH, if any). Upon the timer expiry, the MAC entity deactivates the associated SCell if it is in dormant state. The same initial timer value applies to each instance of the dormantSCellDeactivationTimer and it is configured by RRC.\nAn SCell will be in Dormant SCell state upon SCell configuration in case the parameter sCellState is set to dormant for the SCell within RRC configuration. The configured SCG SCells are dormant after a SCG change in case the parameter sCellState is set to dormant for the SCell within RRC configuration.\nThe MAC entity shall for each TTI and for each configured SCell:\n-\tif the MAC entity is configured with dormant SCell upon SCell configuration or receives MAC control element(s) in this TTI for transitioning the SCell into Dormant State:\n-\tin the TTI according to the timing defined in TS 36.213 [2]:\n-\ttransition the SCell into Dormant State;\n-\tstop the sCellDeactivationTimer associated with the SCell;\n-\tif sCellHibernationTimer associated with the SCell is configured;\n-\tstop the sCellHibernationTimer associated with the SCell;\n-\tstart or restart the dormantSCellDeactivationTimer associated with the SCell;\n-\tclear any configured downlink assignments and uplink grants associated with the SCell;\n-\tflush all HARQ buffers associated with the SCell.\n-\tif the sCellHibernationTimer associated with the activated SCell expires in this TTI:\n-\tin the TTI according to the timing defined in TS 36.213 [2]:\n-\thibernate the SCell;\n-\tstop the sCellDeactivationTimer associated with the SCell;\n-\tstop the sCellHibernationTimer associated with the SCell;\n-\tstart the dormantSCellDeactivationTimer associated with the SCell;\n-\tclear any configured downlink assignments and uplink grants associated with the SCell;\n-\tflush all HARQ buffers associated with the SCell.\n-\tif the dormantSCellDeactivationTimer associated with the dormant SCell expires in this TTI:\n-\tin the TTI according to the timing defined in TS 36.213 [2]:\n-\tdeactivate the SCell;\n-\tstop the dormantSCellDeactivationTimer associated with the SCell;\n-\tif the SCell is in Dormant State:\n-\tnot transmit SRS on the SCell;\n-\treport CQI/PMI/RI/PTI/CRI for the SCell according to the periodicity indicated by cqi-ReportPeriodic-SCell-r15;\n-\tnot transmit on UL-SCH on the SCell;\n-\tnot transmit on RACH on the SCell;\n-\tnot monitor the PDCCH on the SCell;\n-\tnot monitor the PDCCH for the SCell;\n-\tnot transmit PUCCH on the SCell.\nHARQ feedback for the MAC PDU containing Hibernation MAC control element shall not be impacted by PCell, PSCell and PUCCH SCell interruptions due to SCell activation/deactivation or hibernation (TS 36.133 [9]).\nNOTE:\tWhen SCell is in Dormant State, any ongoing Random Access procedure on the SCell is aborted.\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "5.23\tAutonomous Uplink",
                    "description": "",
                    "summary": "",
                    "text_content": "Autonomous uplink is supported on the SCells only. At most one autonomous uplink configuration is supported per SCell. Multiple autonomous uplink configurations can be activated and be active simultaneously when there is more than one SCell. Autonomous uplink and Uplink Semi-Persistent Scheduling cannot be active simultaneously on the same SCell.\nWhen autonomous uplink is configured by RRC, the following information is provided in AUL-Config (TS 36.331 [8]):\n-\tAUL C-RNTI;\n-\tHARQ process IDs aul-HARQ-Processes that are configured for autonomous UL HARQ operation, the time period aul-RetransmissionTimer before triggering a new transmission or a retransmission of the same HARQ process using autonomous uplink;\n-\tThe bitmap aul-Subframes that indicates the subframes that are configured for autonomous UL HARQ operation.\nWhen the autonomous uplink configuration is released by RRC, the corresponding configured grant shall be cleared.\nIf AUL-Config is configured, the MAC entity shall:\n-\tconsider that a configured uplink grant occurs in those subframes for which aul-Subframes is set to 1 (TS 36.331 [8]).\nIf AUL confirmation has been triggered and not cancelled:\n-\tif the MAC entity has UL resources allocated for new transmission for this TTI:\n-\tinstruct the Multiplexing and Assembly procedure to generate an AUL confirmation MAC Control Element as defined in clause 6.1.3.16;\n-\tcancel the triggered AUL confirmation.\nThe MAC entity shall clear the configured uplink grant for the SCell immediately after first transmission of AUL confirmation MAC Control Element triggered by the AUL release for this SCell.\nNOTE:\tRetransmissions for uplink transmissions using autonomous uplink can continue after clearing the corresponding configured uplink grant.\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "5.24\tActivation/Deactivation of PDCP duplication",
                    "description": "",
                    "summary": "",
                    "text_content": "If one or more DRBs are configured with PDCP duplication, the network may activate and deactivate the PDCP duplication for the configured DRB(s) by sending the PDCP Duplication Activation/Deactivation MAC CE described in clause 6.1.3.17. In addition, PDCP duplication for DRB(s) may be activated upon configuration by upper layers (TS 36.331 [8]).\nUpon reception of a PDCP Duplication Activation/Deactivation MAC CE, the MAC entity shall for each DRB configured with duplication:\n-\tif the MAC CE indicates that PDCP duplication for the DRB shall be activated:\n-\tindicate the activation of PDCP duplication for the DRB to upper layers.\n-\tif the MAC CE indicates that PDCP duplication for the DRB shall be deactivated:\n-\tindicate the deactivation of PDCP duplication for the DRB to upper layers.\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "5.25\tTransmission of Downlink Channel Quality Report",
                    "description": "",
                    "summary": "",
                    "text_content": "The MAC entity of a BL UE or UE in enhanced coverage may be configured by upper layers to report DL channel quality in Msg3. DL channel quality in Msg3 in RRC_CONNECTED is not reported.\nIf the UE is a BL UE or UE in enhanced coverage or an NB-IoT UE, a Downlink Channel Quality Report (DCQR) shall be triggered if any of the following events occur:\n-\tDCQR Command MAC control element is received, in which case the DCQR is referred below to as \"Regular DCQR\";\n-\tfor BL UE or UE in enhanced coverage, transmission of DCQR in Msg3 is configured by upper layers in mpdcch-CQI-Reporting, in which case DCQR is referred below to as \"Msg3 DCQR\".\nIf any type of DCQR has been triggered:\n-\tstart performing DL channel quality measurements according to TS 36.133 [9].\nIf \"Regular DCQR\" has been triggered:\n-\tif an uplink grant has been received on the PDCCH for MAC entity's C-RNTI:\n-\tinstruct the Multiplexing and Assembly procedure to generate a DCQR and AS RAI MAC control element as defined in clause 6.1.3.19;\n-\tcancel the triggered \"Regular DCQR\".\nIf \"Msg3 DCQR\" has been triggered:\n-\tif an uplink grant has been received on the PDCCH for MAC entity's RA-RNTI:\n-\tif the allocated resources can accommodate a DCQR and AS RAI MAC control element plus its subheader as a result of logical channel prioritization:\n-\tinstruct the Multiplexing and Assembly procedure to generate a DCQR and AS RAI MAC control element as defined in clause 6.1.3.19;\n-\telse if the uplink grant is not for EDT:\n-\tif configured by upper layers in mpdcch-CQI-Reporting, use R and F2 fields in the MAC PDU subheader, to transmit the measurement outcome, as defined in clause 6.2.1;\n-\tcancel the triggered \"Msg3 DCQR\".\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "5.26\tUpdate of Differential Koffset",
                    "description": "",
                    "summary": "",
                    "text_content": "The network may provide and update the Differential Koffset of a Serving Cell in a non-terrestrial network by sending the Differential Koffset MAC CE described in clause 6.1.3.21.\nThe MAC entity shall:\n-\tif the MAC entity receives a Differential Koffset MAC CE on a Serving Cell:\n-\tindicate to lower layers the information regarding the Differential Koffset MAC CE.\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "5.27\tGNSS measurement",
                    "description": "",
                    "summary": "",
                    "text_content": "The network may request a NB-IoT UE, a BL UE or a UE in enhanced coverage in a non-terrestrial network to perform GNSS measurement or configure a GNSS measurement gap for UE autonomous GNSS measurement by sending the GNSS Measurement Command MAC CE described in clause 6.1.3.22.\nThe MAC entity shall:\n-\tif the MAC entity receives a GNSS Measurement Command MAC CE:\n-\tindicate the GNSS measurement gap length configuration to upper layers;\n-\tif the Type field indicates network-triggered GNSS measurement:\n-\tindicate to upper layers a request to perform GNSS measurement.\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                }
            ]
        },
        {
            "title": "6\tProtocol Data Units, formats and parameters",
            "description": "",
            "summary": "",
            "tables": [],
            "figures_meta_data": [],
            "subsections": [
                {
                    "title": "6.1\tProtocol Data Units",
                    "description": "",
                    "summary": "",
                    "text_content": "",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": [
                        {
                            "title": "6.1.1\tGeneral",
                            "text_content": "A MAC PDU is a bit string that is byte aligned (i.e. multiple of 8 bits) in length. In the figures in clause 6.1, bit strings are represented by tables in which the most significant bit is the leftmost bit of the first line of the table, the least significant bit is the rightmost bit on the last line of the table, and more generally the bit string is to be read from left to right and then in the reading order of the lines. The bit order of each parameter field within a MAC PDU is represented with the first and most significant bit in the leftmost bit and the last and least significant bit in the rightmost bit.\nMAC SDUs are bit strings that are byte aligned (i.e. multiple of 8 bits) in length. An SDU is included into a MAC PDU from the first bit onward.\nThe MAC entity shall ignore the value of Reserved bits in downlink MAC PDUs and in MAC PDUs received in sidelink.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "6.1.2\tMAC PDU (DL-SCH and UL-SCH except transparent MAC and Random Access Response, MCH)",
                            "text_content": "A MAC PDU consists of a MAC header, zero or more MAC Service Data Units (MAC SDU), zero, or more MAC control elements, and optionally padding; as described in Figure 6.1.2-3.\nBoth the MAC header and the MAC SDUs are of variable sizes.\nA MAC PDU header consists of one or more MAC PDU subheaders; each subheader corresponds to either a MAC SDU, a MAC control element or padding.\nA MAC PDU subheader consists of the header fields R/F2/E/LCID/(R/R/eLCID)/(F)/(L). The L field is present in the MAC PDU subheader except for the last subheader in the MAC PDU and fixed sized MAC control elements. The last subheader in the MAC PDU and subheaders for fixed sized MAC control elements consist of the header fields R/F2/E/LCID/(R/R/eLCID). A MAC PDU subheader corresponding to padding consists of the four header fields R/F2/E/LCID.\n\nThe figure depicts a 16-bit MAC subheader with 7-bits and 15-bits L field, which is used in the 5G network to represent various types of data, such as R/F2, E/LCID, and F/L. The figure also includes a 7-bit L field, which is used to represent the length of the data. The figure is important for understanding the structure of the 5G network and its data transmission.\nFigure 6.1.2-1: R/F2/E/LCID/(R/R/eLCID)/F/L MAC subheader with 7-bits and 15-bits L field\nThe figure depicts a 16-bit MAC subheader with a 16-bit L field, which is used in the 16-bit Ethernet MAC protocol. The figure shows the structure of the subheader, including the R/F2, E/LCID, and L fields, which are essential for transmitting data over Ethernet.The figure depicts a 16-bit MAC subheader with a 16-bit L field, which is used in the 16-bit Ethernet MAC protocol. The structure of the subheader, including the R/F2, E/LCID, and L fields, is essential for transmitting data over Ethernet.\nFigure 6.1.2-1a: R/F2/E/LCID/(R/R/eLCID)/L MAC subheader with 16-bits L field\nThe figure depicts a network configuration with various subheader MAC (Media Access Control) subheaders, including R/F2, E/LCID, and (R/R/eLCID), which are used for data transmission and reception in a 5G network.The figure depicts a network configuration with various subheader MAC (Media Access Control) subheaders, including R/F2, E/LCID, and (R/R/eLCID), which are used for data transmission and reception in a 5G network.\nFigure 6.1.2-2: R/F2/E/LCID/(R/R/eLCID) MAC subheader\nMAC PDU subheaders have the same order as the corresponding MAC SDUs, MAC control elements and padding.\nMAC control elements are always placed before any MAC SDU.\nPadding occurs at the end of the MAC PDU, except when single-byte or two-byte padding is required. Padding may have any value and the MAC entity shall ignore it. When padding is performed at the end of the MAC PDU, zero or more padding bytes are allowed.\nWhen single-byte or two-byte padding is required, one or two MAC PDU subheaders corresponding to padding are placed at the beginning of the MAC PDU before any other MAC PDU subheader.\nA maximum of one MAC PDU can be transmitted per TB per MAC entity. A maximum of one MCH MAC PDU can be transmitted per TTI.\nThe figure depicts an example of a MAC PDU (Physical Media Access Control) in a 5G network, showcasing the various components such as the MAC header, MAC control elements, MAC SDUs, and padding. This figure is crucial for understanding the structure and components of a 5G network's physical media access control, which is essential for efficient data transmission and management.\nFigure 6.1.2-3: Example of MAC PDU consisting of MAC header, MAC control elements, MAC SDUs and padding\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "6.1.3\tMAC Control Elements",
                            "text_content": "Buffer Status Report (BSR) MAC control elements consist of either:\n-\tShort BSR and Truncated BSR format: one LCG ID field and one corresponding Buffer Size field (figure 6.1.3.1-1); or\n-\tLong BSR format: four Buffer Size fields, corresponding to LCG IDs #0 through #3 (figure 6.1.3.1-2).\nThe BSR formats are identified by MAC PDU subheaders with LCIDs as specified in table 6.2.1-2.\nThe fields LCG ID and Buffer Size are defined as follow:\n-\tLCG ID: The Logical Channel Group ID field identifies the group of logical channel(s) which buffer status is being reported. The length of the field is 2 bits. For NB-IoT, the LCG ID is set to #0.\n-\tBuffer Size: The Buffer Size field identifies the total amount of data available across all logical channels of a logical channel group after all MAC PDUs for the TTI have been built. The amount of data is indicated in number of bytes. It shall include all data that is available for transmission in the RLC layer and in the PDCP layer; the definition of what data shall be considered as available for transmission is specified in TS 36.322 [3] and TS 36.323 [4] or TS 38.323 [17] respectively. The size of the RLC and MAC headers are not considered in the buffer size computation. The length of this field is 6 bits. If extendedBSR-Sizes is not configured, the values taken by the Buffer Size field are shown in Table 6.1.3.1-1. If extendedBSR-Sizes is configured, the values taken by the Buffer Size field are shown in Table 6.1.3.1-2.\nThe figure depicts a Short BSR (Basic Service Set Request) and Truncated BSR (Truncated Basic Service Set Request) MAC control element, which are essential components in the 5G network. The Short BSR is used for requesting a set of services, while the Truncated BSR is used for requesting a set of services that are less than the maximum set size. These elements are crucial for managing the network's resources and ensuring efficient use of the network's resources.\nFigure 6.1.3.1-1: Short BSR and Truncated BSR MAC control element\nThe figure depicts a Long BSR MAC control element, which is a crucial component in 5G networks. It illustrates the various layers of control and management, including the MAC control unit, the BSR, and the MAC layer. The figure highlights the importance of these elements in ensuring efficient and reliable communication in 5G networks.\nFigure 6.1.3.1-2: Long BSR MAC control element\nTable 6.1.3.1-1: Buffer size levels for BSR\n\nTable 6.1.3.1-2: Extended Buffer size levels for BSR\n\nSidelink BSR and Truncated Sidelink BSR MAC control elements consist of one Destination Index field, one LCG ID field and one corresponding Buffer Size field per reported target group.\nThe Sidelink BSR MAC control elements are identified by MAC PDU subheaders with LCIDs as specified in table 6.2.1-2. They have variable sizes.\nFor each included group, the fields are defined as follows (figures 6.1.3.1a-1 and 6.1.3.1a-2):\n-\tDestination Index: The Destination Index field identifies the ProSe Destination or the destination for V2X sidelink communication. The length of this field is 4 bits. The value is set to the index of the destination reported in destinationInfoList for sidelink communication or is set to one index among index(es) associated to same destination reported in v2x-DestinationInfoList for V2X sidelink communication. If multiple such lists are reported, the value is indexed sequentially across all the lists in the same order as specified in TS 36.331 [8];\n-\tLCG ID: The Logical Channel Group ID field identifies the group of logical channel(s) which buffer status is being reported. The length of the field is 2 bits;\n-\tBuffer Size: The Buffer Size field identifies the total amount of data available across all logical channels of a LCG of a ProSe Destination after all MAC PDUs for the TTI have been built. The amount of data is indicated in number of bytes. It shall include all data that is available for transmission in the RLC layer and in the PDCP layer; the definition of what data shall be considered as available for transmission is specified in TS 36.322 [3] and TS 36.323 [4] respectively. The size of the RLC and MAC headers are not considered in the buffer size computation. The length of this field is 6 bits. The values taken by the Buffer Size field are shown in Table 6.1.3.1-1;\n-\tR: Reserved bit, set to \"0\".\nBuffer Sizes of LCGs are included in decreasing order of the highest priority of the sidelink logical channel belonging to the LCG irrespective of the value of the Destination Index field.\nThe figure depicts a simplified representation of the Sidelink BSR (Side-to-Side Redundancy) and Truncated Sidelink BSR (Side-to-Side Redundancy) MAC control element for even N. The Sidelink BSR MAC control element is a key component in 5G networks, responsible for managing the flow of data between the base station (gNB) and the user equipment (UE). The Truncated Sidelink BSR MAC control element is a simplified version of the Sidelink BSR MAC control element, designed for even N. This figure provides a clear and concise visual representation of the Sidelink BSR and Truncated Sidelink BSR MAC control elements, which are essential for the efficient operation of 5G networks.\nFigure 6.1.3.1a-1: Sidelink BSR and Truncated Sidelink BSR MAC control element for even N\n\nThe figure depicts a Sidelink BSR (Bilateral Sidelink) and Truncated Sidelink BSR (T-BSR) MAC control element for odd N, which are used in 5G networks to enhance the performance of the Sidelink and Truncated Sidelink BSR (T-BSR) protocols. The figure illustrates the structure of these control elements, including the MAC control unit (MCU) and the control signal. The MCU is responsible for managing the control signals and ensuring the proper functioning of the Sidelink and T-BSR protocols. The figure also shows the connection between the MCU and the Sidelink and T-BSR MAC control elements, as well as the control signals that are transmitted between them.\nFigure 6.1.3.1a-2: Sidelink BSR and Truncated Sidelink BSR MAC control element for odd N\nThe C-RNTI MAC control element is identified by MAC PDU subheader with LCID as specified in table 6.2.1-2.\nIt has a fixed size and consists of a single field defined as follows (figure 6.1.3.2-1):\n-\tC-RNTI: This field contains the C-RNTI of the MAC entity. The length of the field is 16 bits.\nThe figure depicts a C-RNTI MAC control element, which is a crucial component in the network's control plane. It is responsible for managing the flow of data packets and ensuring the proper functioning of the network. The figure shows the various components and their connections, including the MAC control unit, the RNTI, and the MAC layer. This figure is essential for the efficient operation of the network and ensures that data packets are transmitted correctly and in a timely manner.\nFigure 6.1.3.2-1: C-RNTI MAC control element\nThe DRX Command MAC control element is identified by a MAC PDU subheader with LCID as specified in table 6.2.1-1.\nIt has a fixed size of zero bits.\nThe UE Contention Resolution Identity MAC control element is identified by MAC PDU subheader with LCID as specified in table 6.2.1-1. This control element has a fixed 48-bit size and consists of a single field defined as follows (figure 6.1.3.4-1)\n-\tUE Contention Resolution Identity: If this MAC control element is included in response to an uplink CCCH transmission, then this field contains the uplink CCCH SDU if the uplink CCCH SDU is 48 bits long. If the CCCH SDU is longer than 48 bits, this field contains the first 48 bits of the uplink CCCH SDU. If this MAC control element is included in response to an uplink DCCH transmission (i.e. the MAC entity is configured with rach-Skip or rach-SkipSCG), then the MAC entity shall ignore the contents of this field.\nThe figure depicts a UE Contention Resolution Identity MAC control element, which is a crucial component in 5G networks. It is responsible for resolving contention issues between multiple users attempting to access the same resource, such as a channel. The figure shows the structure of the element, including its MAC (Media Access Control) header, which contains information about the channel and the user's identity. This element is essential for ensuring efficient and reliable communication in 5G networks.\nFigure 6.1.3.4-1: UE Contention Resolution Identity MAC control element\nThe Timing Advance Command MAC control element is identified by MAC PDU subheader with LCID as specified in table 6.2.1-1.\nIt has a fixed size and consists of a single octet defined as follows (figure 6.1.3.5-1):\n-\tTAG Identity (TAG Id): This field indicates the TAG Identity of the addressed TAG. The TAG containing the SpCell has the TAG Identity 0. The length of the field is 2 bits;\n-\tTiming Advance Command: This field indicates the index value TA (0, 1, 2… 63) used to control the amount of timing adjustment that MAC entity has to apply (see clause 4.2.3 of TS 36.213 [2]). The length of the field is 6 bits.\nThe figure depicts a timing advance command and MAC control element in a 5G network, illustrating the control and timing mechanisms used in the communication process.\nFigure 6.1.3.5-1: Timing Advance Command MAC control element\nThe Power Headroom Report (PHR) MAC control element is identified by a MAC PDU subheader with LCID as specified in table 6.2.1-2. It has a fixed size and consists of a single octet defined as follows (figure 6.1.3.6-1):\n-\tR: reserved bit, set to \"0\";\n-\tPower Headroom (PH): this field indicates the power headroom level. The length of the field is 6 bits. The reported PH and the corresponding power headroom levels are shown in Table 6.1.3.6-1 below (the corresponding measured values in dB can be found in clause 9.1.8.4 of TS 36.133 [9]).\nThe figure depicts a PHR (Physical Layer) MAC control element, which is a crucial component in a 5G network. It is responsible for managing the physical layer of the network, ensuring efficient data transmission and control. The figure shows the various components and their connections, highlighting the importance of proper design and implementation in a 5G network.\nFigure 6.1.3.6-1: PHR MAC control element\nTable 6.1.3.6-1: Power Headroom levels for PHR\n\nFor extendedPHR, the Extended Power Headroom Report (PHR) MAC control element is identified by a MAC PDU subheader with LCID as specified in table 6.2.1-2. It has a variable size and is defined in Figure 6.1.3.6a-2. When Type 2 PH is reported, the octet containing the Type 2 PH field is included first after the octet indicating the presence of PH per SCell and followed by an octet containing the associated PCMAX,c field (if reported). Then follows an octet with the Type 1 PH field and an octet with the associated PCMAX,c field (if reported), for the PCell. If SRS-ConfigAdd-r16 is configured for the PCell then follows an octet with the Type 3 PH field and an octet with the associated PCMAX,c field (if reported), for the PCell. And then follows in ascending order based on the ServCellIndex, as specified in TS 36.331 [8] an octet with the Type x PH field, wherein x is equal to 3 when the ul-Configuration-r14 or SRS-ConfigAdd-r16 is configured for this SCell, x is equal to 1 otherwise, and an octet with the associated PCMAX,c field (if reported), for each SCell indicated in the bitmap.\nFor extendedPHR2, the Extended Power Headroom Report (PHR) MAC control elements are identified by a MAC PDU subheader with LCID as specified in table 6.2.1-2. They have variable sizes and are defined in Figure 6.1.3.6a1-3, Figure 6.1.3.6a2-4 and Figure 6.1.3.6a3-5. One octet with C fields is used for indicating the presence of PH per SCell when the highest SCellIndex of SCell with configured uplink is less than 8, otherwise four octets are used. When Type 2 PH is reported for the PCell, the octet containing the Type 2 PH field is included first after the octet(s) indicating the presence of PH per SCell and followed by an octet containing the associated PCMAX,c field (if reported). Then follows the Type 2 PH field for the PUCCH SCell (if PUCCH on SCell is configured and Type 2 PH is reported for the PUCCH SCell), followed by an octet containing the associated PCMAX,c field (if reported). Then follows an octet with the Type 1 PH field and an octet with the associated PCMAX,c field (if reported), for the PCell. If SRS-ConfigAdd-r16 is configured for the PCell then follows an octet with the Type 3 PH field and an octet with the associated PCMAX,c field (if reported), for the PCell. Then follows in ascending order based on the ServCellIndex, as specified in TS 36.331 [8] an octet with the Type x PH field, wherein, x is equal to 3 when the ul-Configuration-r14 or SRS-ConfigAdd-r16 is configured for this SCell, x is equal to 1 otherwise, and an octet with the associated PCMAX,c field (if reported), for each SCell indicated in the bitmap.\nThe Extended PHR MAC Control Elements are defined as follows:\n-\tCi: this field indicates the presence of a PH field for the SCell with SCellIndex i as specified in TS 36.331 [8]. The Ci field set to \"1\" indicates that a PH field for the SCell with SCellIndex i is reported. The Ci field set to \"0\" indicates that a PH field for the SCell with SCellIndex i is not reported;\n-\tR: reserved bit, set to \"0\";\n-\tV: this field indicates if the PH value is based on a real transmission or a reference format. For Type 1 PH, V=0 indicates real transmission on PUSCH and V=1 indicates that a PUSCH reference format is used. For Type 2 PH, V=0 indicates real transmission on PUCCH/SPUCCH and V=1 indicates that a PUCCH/SPUCCH reference format is used. For Type 3 PH, V=0 indicates real transmission on SRS and V=1 indicates that an SRS reference format is used. Furthermore, for Type 1, Type 2 and Type 3 PH, V=0 indicates the presence of the octet containing the associated PCMAX,c field, and V=1 indicates that the octet containing the associated PCMAX,c field is omitted;\n-\tPower Headroom (PH): this field indicates the power headroom level. The length of the field is 6 bits. The reported PH and the corresponding power headroom levels are shown in Table 6.1.3.6-1 (the corresponding measured values in dB can be found in clause 9.1.8.4 of TS 36.133 [9]);\n-\tP: this field indicates whether the MAC entity applies power backoff due to power management (as allowed by P-MPRc, see TS 36.101 [10]). The MAC entity shall set P=1 if the corresponding PCMAX,c field would have had a different value if no power backoff due to power management had been applied;\n-\tPCMAX,c: if present, this field indicates the PCMAX,c or , as specified in TS 36.213 [2] used for calculation of the preceding PH field. The reported PCMAX,c and the corresponding nominal UE transmit power levels are shown in Table .6a-1 (the corresponding measured values in dBm can be found in clause  of TS 36.133 [9]).\n\nFigure 6.1.3.6a-1: Void\nThe figure depicts an extended P HR MAC control element, which is a crucial component in a 5G network. It illustrates the various layers of the control system, including the MAC (Media Access Control) layer, which handles the transmission of data between the base station and the user equipment. The figure also shows the P HR (Physical Layer) layer, which is responsible for transmitting the physical layer data to the MAC layer. The MAC layer then processes the data and sends it to the appropriate network layer. The figure provides a clear and concise representation of the complex network architecture, highlighting the importance of this control element in ensuring the efficient and reliable operation of a 5G network.\nFigure 6.1.3.6a-2: Extended PHR MAC Control Element\nThe figure depicts an extended PHR MAC Control Element (MACCE) supporting PUCCH on SCell, which is a key component in the 5G network. The MACCE is responsible for managing the control and signaling of the PUCCH protocol, ensuring efficient communication between the SCell and other network elements. The figure illustrates the MACCE's design, including the PUCCH interface, control signals, and signaling paths.\nFigure 6.1.3.6a1-3: Extended PHR MAC Control Element supporting PUCCH on SCell\nThe figure depicts an extended PHR MAC Control Element (MACCE) supporting 32 serving cells with configured uplink, illustrating its role in managing the uplink data transmission in a 5G network.\nFigure 6.1.3.6a2-4: Extended PHR MAC Control Element supporting 32 serving cells with configured uplink\nThe figure depicts an extended PHR MAC Control Element (MACCE) supporting 32 serving cells with configured uplink and PUCCH on SCell. It includes a PUCCH (Physical User Channel Control) and a PHR (Physical Resource Hub) for efficient resource management. The MACCE is designed to support various network configurations, including 32 serving cells, and ensures efficient resource allocation and management.\nFigure 6.1.3.6a3-5: Extended PHR MAC Control Element supporting 32 serving cells with configured uplink and PUCCH on SCell\nTable .6a-1: Nominal UE transmit power level for Extended PHR and for Dual Connectivity PHR\n\nThe Dual Connectivity Power Headroom Report (PHR) MAC control element is identified by a MAC PDU subheader with LCID as specified in table 6.2.1-2. It has a variable size and is defined in Figure 6.1.3.6b-1 and Figure 6.1.3.6b-2. One octet with Ci fields is used for indicating the presence of PH per serving cell other than PCell, when the highest SCellIndex of SCell with configured uplink is less than 8, otherwise four octets are used. In case EN-DC, NE-DC or NGEN-DC is configured, four octets with Ci fields is always used. When Type 2 PH is reported for the PCell, the octet containing the Type 2 PH field is included first after the octet(s) indicating the presence of PH per cell (PSCell and all SCells of all MAC entities) and followed by an octet containing the associated PCMAX,c field (if reported). Then after that, when Type 2 PH is reported for the PSCell, the octet containing the Type 2 PH field is included followed by an octet containing the associated PCMAX,c field (if reported). Then follows an octet with the Type 1 PH field and an octet with the associated PCMAX,c field (if reported), for the PCell. If SRS-ConfigAdd-r16 is configured for the PCell then follows an octet with the Type 3 PH field and an octet with the associated PCMAX,c field (if reported), for the PCell. And then follows in ascending order based on the ServCellIndex, as specified in TS 36.331 [8], an octet with the Type x PH field, wherein x is either 1 or 3 according to TS 36.213 [2] and TS 38.213 [18] and an octet with the associated PCMAX,c field (if reported), for all serving cells of all MAC entities indicated in the bitmap. In case of EN-DC and NGEN-DC, for serving cells in the other MAC entity in which the UE does not support dynamic power sharing or dynamic power sharing is not applicable (clause 4.2.7.9, TS 38.306 [22]), the UE may omit the octets containing Power Headroom field and PCMAX,c field for those serving cells. In case of NE-DC, for serving cells in the other MAC entity in which the UE does not support dynamic power sharing or dynamic power sharing is not applicable, the UE may omit the octets containing Power Headroom field and PCMAX,f,c field for those serving cells except for the PCell in the other MAC entity and the reported values of Power Headroom and PCMAX,f,c for the PCell are up to UE implementation.\nThe Dual Connectivity PHR MAC Control Element is defined as follows:\n-\tCi: this field indicates the presence of a PH field for the serving cell of any MAC entity, except the PCell, with ServCellIndex (for EN-DC, NE-DC or NGEN-DC case) or SCellIndex i as specified in TS 36.331 [8]. The Ci field set to \"1\" indicates that a PH field for the serving cell with ServCellIndex (for EN-DC, NE-DC or NGEN-DC case) or SCellIndex i is reported. The Ci field set to \"0\" indicates that a PH field for the serving cell with ServCellIndex (for EN-DC, NE-DC or NGEN-DC case) or SCellIndex i is not reported;\n-\tR: reserved bit, set to \"0\";\n-\tV: this field indicates if the PH value is based on a real transmission or a reference format. For Type 1 PH, V=0 indicates real transmission on PUSCH and V=1 indicates that a PUSCH reference format is used. For Type 2 PH, V=0 indicates real transmission on PUCCH and V=1 indicates that a PUCCH reference format is used. For Type 3 PH, V=0 indicates real transmission on SRS and V=1 indicates that an SRS reference format is used. Furthermore, for Type 1 ,Type 2 and Type 3 PH, V=0 indicates the presence of the octet containing the associated PCMAX,c field, and V=1 indicates that the octet containing the associated PCMAX,c field is omitted. Whether the reported PH value for an activated NR Serving Cell is based on real transmission or a reference format is determined based on UL transmissions that have been scheduled or configured until 4 ms prior to the TTI in which this PHR MAC CE is transmitted;\n-\tPower Headroom (PH): this field indicates the power headroom level. The length of the field is 6 bits. The reported PH and the corresponding power headroom levels are shown in Table 6.1.3.6-1 (the corresponding measured values in dB for the E-UTRA Serving Cell are specified in clause 9.1.8.4 of TS 36.133 [9] while the corresponding measured values in dB for the NR Serving Cell are specified in TS 38.133 [19]);\n-\tP: this field indicates whether power backoff due to power management is applied (as allowed by P-MPRc, see TS 36.101 [10] and TS 38.101-3 [21]). The MAC entity shall set P=1 if the corresponding PCMAX,c field would have had a different value if no power backoff due to power management had been applied;\n-\tPCMAX,c: if present, this field indicates the PCMAX,c or , as specified in TS 36.213 [2] for the E-UTRA Serving Cell and the PCMAX,f,c or P̃CMAX,f,c, as specified in TS 38.213 [18]) for the NR Serving Cell used for calculation of the preceding PH field. The reported PCMAX,c and the corresponding nominal UE transmit power levels are shown in Table .6a-1 (the corresponding measured values in dBm for the E-UTRA Serving Cell can be found in TS 36.133 [9] while the corresponding measured values in dBm for the NR Serving Cell can be found in TS 38.133 [19]).\nThe figure depicts a dual connectivity PHR MAC control element, which is a crucial component in 5G networks. It illustrates the various layers of the network, including the base station (gNB), user equipment (UE), and scatterers. The figure highlights the importance of beamforming techniques to mitigate interference and ensure reliable communication.\nFigure 6.1.3.6b-1: Dual Connectivity PHR MAC Control Element\nThe figure depicts a dual connectivity PHR MAC control element supporting 32 serving cells with configured uplink, illustrating the various components and their roles in the network's architecture.\nFigure 6.1.3.6b-2: Dual Connectivity PHR MAC Control Element supporting 32 serving cells with configured uplink\nThe MCH Scheduling Information MAC Control Element illustrated in Figure 6.1.3.7-1 is identified by a MAC PDU subheader with LCID as specified in Table 6.2.1-4. This control element has a variable size. For each MTCH the fields below are included:\n-\tLCID: this field indicates the Logical Channel ID of the MTCH. The length of the field is 5 bits;\n-\tStop MTCH: this field indicates the ordinal number of the subframe within the MCH scheduling period, counting only the subframes allocated to the MCH, where the corresponding MTCH stops. Value 0 corresponds to the first subframe. The length of the field is 11 bits. The special Stop MTCH value 2047 indicates that the corresponding MTCH is not scheduled. The value range 2043 to 2046 is reserved.\nThe figure depicts a detailed view of the MCH (Media Convergence Hub) scheduling information and MAC control element in a 5G network. It illustrates the various components and their interconnections, including the MCH, MAC control element, and the Media Convergence Hub (MCH). The figure provides a comprehensive understanding of the network's architecture, highlighting the importance of MCH scheduling in ensuring efficient network operation.\nFigure 6.1.3.7-1: MCH Scheduling Information MAC control element\nThe Extended MCH Scheduling Information MAC control element illustrated in Figure 6.1.3.7-2 is identified by a MAC PDU subheader with LCID as specified in Table 6.2.1-4. This control element has a variable size.\nFor each MTCH the fields below are included:\n-\tLCID: this field indicates the Logical Channel ID of the MTCH. The length of the field is 5 bits;\n-\tStop MTCH: this field indicates the ordinal number of the subframe within the MCH scheduling period, counting only the subframes allocated to the MCH, where the corresponding MTCH stops. Value 0 corresponds to the first subframe. The length of the field is 11 bits. The special Stop MTCH value 2047 indicates that the corresponding MTCH is not scheduled. The value range 2043 to 2046 is reserved.\n\nFor each MTCH the fields below may be included:\n-\tLCID: this field indicates the Logical Channel ID of the MTCH. The length of the field is 5 bits. LCIDs x…x+y shall be equal to or a subset of the LCIDs 1…n;\n-\tS: this field indicates that the transmission of the corresponding MTCH is to be suspended. The S field is set to 000. All other values are reserved.\nThe figure depicts an extended MCH (Multipath Channel) scheduling information MAC control element, which is a crucial component in 5G networks. It illustrates the scheduling of multiple paths for data transmission, ensuring efficient use of resources and reducing interference. The figure includes various elements such as the MCH, MAC control element, and the scheduling information, all of which are essential for managing the flow of data in 5G networks.\nFigure 6.1.3.7a-1: Extended MCH Scheduling Information MAC control element\nThe Activation/Deactivation MAC control element of one octet is identified by a MAC PDU subheader with LCID as specified in table 6.2.1-1. It has a fixed size and consists of a single octet containing seven C-fields and one R-field. The Activation/Deactivation MAC control element with one octet is defined as follows (figure 6.1.3.8-1).\nThe Activation/Deactivation MAC control element of four octets is identified by a MAC PDU subheader with LCID as specified in table 6.2.1-1. It has a fixed size and consists of a four octets containing 31 C-fields and one R-field. The Activation/Deactivation MAC control element of four octets is defined as follows (figure 6.1.3.8-2).\nFor the case with no serving cell with a ServCellIndex, as specified in TS 36.331 [8] larger than 7, Activation/Deactivation MAC control element of one octet is applied, otherwise Activation/Deactivation MAC control element of four octets is applied.\nFor the case that Activation/Deactivation MAC control element is received and Hibernation MAC control element is not received:\n-\tCi: if there is an SCell configured with SCellIndex i as specified in TS 36.331 [8], this field indicates the activation/deactivation status of the SCell with SCellIndex i, else the MAC entity shall ignore the Ci field. When the Ci field is set to \"1\", SCell with SCellIndex i shall be activated if it is in already activated state or deactivated state, otherwise the Ci field set to \"1\" shall be ignored. The Ci field is set to \"0\" to indicate that the SCell with SCellIndex i shall be deactivated;\n-\tR: Reserved bit, set to \"0\".\nFor the case that both Activation/Deactivation MAC control element and Hibernation MAC control element are received, see clause 6.1.3.15.\nThe figure depicts the activation/deactivation MAC control element of one octet in a 6.1.3.8 network. It illustrates the process of controlling the transmission of data packets, with the MAC control element being the central component responsible for managing the flow of data. The figure shows the octet as a rectangular shape with a central hole, which is where the MAC control element is inserted. The octet is connected to the network through a series of cables, with the MAC control element being the only component that is not connected to the network. The figure provides a clear and concise representation of the MAC control element's role in the network, making it easy to understand the process of data transmission and control.\nFigure 6.1.3.8-1: Activation/Deactivation MAC control element of one octet\nThe figure depicts the activation/deactivation MAC control element of four octets, which is a crucial component in the 5G network. It illustrates the process of controlling the transmission of data packets, ensuring efficient and reliable communication.\nFigure 6.1.3.8-2: Activation/Deactivation MAC control element of four octets\nThe Long DRX Command MAC control element is identified by a MAC PDU subheader with LCID as specified in table 6.2.1-1.\nIt has a fixed size of zero bits.\nThe Data Volume and Power Headroom Report (DPR) MAC control element is identified by the MAC PDU subheader used for the CCCH MAC SDU, as specified in table 6.2.1-2. It does not add any additional subheader and is always placed before the CCCH MAC SDU. DPR MAC control element is not included in the calculation of the L field in the MAC PDU subheader for the CCCH MAC SDU.\nIt has a fixed size and consists of a single octet defined as follows (figures 6.1.3.10-1 and 6.1.3.10-1a):\n-\tData Volume (DV): The Data Volume field identifies the total amount of data available across all logical channels and of data not yet associated with a logical channel after all MAC PDUs for the TTI have been built. The amount of data is indicated in number of bytes. It shall include all data that is available for transmission in the RLC layer, in the PDCP layer, and in the RRC layer; the definition of what data shall be considered as available for transmission is specified in TS 36.322 [3], TS 36.323 [4] and TS 36.331 [8] respectively. The size of the RLC and MAC headers are not considered in the buffer size computation. The length of this field is 4 bits. The values taken by the Data Volume field are shown in Table 6.1.3.10-1;\n-\tPower Headroom (PH): This field indicates the power headroom level. The length of the field is 2 bits or 4 bits. The reported PH and the corresponding power headroom and extended power headroom levels are shown in Table 6.1.3.10-2 and Table 6.1.3.10-2a, respectively, below (the corresponding measured values in dB can be found in TS 36.133 [9]);\n-\tR: reserved bit, set to \"0\".\nThe figure depicts a detailed report on the data volume and power headroom of a MAC control element, providing valuable insights into the technical aspects of the device.\nFigure 6.1.3.10-1: Data Volume and Power Headroom Report MAC control element\nThe figure depicts a report on data volume and power headroom for an Extended Power Headroom level reporting MAC control element. It includes a detailed analysis of the data volume and power headroom requirements, as well as the necessary MAC control elements to meet these requirements. The report is crucial for ensuring the proper functioning of the system and maintaining data integrity.\nFigure 6.1.3.10-1a: Data Volume and Power Headroom Report MAC control element for Extended Power Headroom level reporting\nTable 6.1.3.10-1: Data Volume levels for DV\n\nTable 6.1.3.10-2: Power Headroom levels for PH\n\nTable 6.1.3.10-2a: Extended Power Headroom levels for PH\n\nThe SPS confirmation MAC control element is identified by a MAC PDU subheader with LCID as specified in table 6.2.1-2.\nIt has a fixed size of zero bits.\nThe SC-PTM Stop Indication MAC control element is applicable to NB-IoT UEs and BL UEs or UEs in enhanced coverage and indicates that the SC-MTCH transmission for a specific G-RNTI is stopped. It is identified by a MAC PDU subheader with LCID as specified in table 6.2.1-1.\nIt has a fixed size of zero bits.\nThe recommended bit rate MAC control element is identified by a MAC PDU subheader with LCID as specified in tables 6.2.1-1 and 6.2.1-2 for bit rate recommendation message from the eNB to the UE and bit rate recommendation query message from the UE to the eNB, respectively. It has a fixed size and consists of two octets defined as follows (figure 6.1.3.13-1):\n-\tLCID: This field indicates the identity of the logical channel (as described in Table 6.1.3.13-2) for which the recommended bit rate or the recommended bit rate query is applicable. The length of the field is 4 bits;\n-\tUplink/Downlink (UL/DL): This field indicates whether the recommended bit rate or the recommended bit rate query applies to uplink or downlink. The length of the field is 1 bit. The UL/DL field set to \"0\" indicates downlink. The UL/DL field set to \"1\" indicates uplink;\n-\tBit Rate: This field indicates an index to Table 6.1.3.13-1. The length of the field is 6 bits. For bit rate recommendation the value indicates the recommended bit rate. For bit rate recommendation query the value indicates the desired bit rate;\n-\tX: Bit rate multiplier. For UEs supporting recommended bit rate multiplier, when bitRateMultiplier is configured for the logical channel indicated by LCID field, X field set to \"1\" indicates the actual value of bit rate is the value corresponding to the index indicated by the Bit Rate field multiplied by bitRateMultiplier as specified in TS 36.331 [8];\n-\tR: reserved bit, set to \"0\".\nThe figure depicts a recommended bit rate MAC control element (MAC-CE) in a 5G network. It illustrates the structure of the MAC control element, including the MAC layer, the control plane, and the physical layer. The figure also includes a legend to help understand the different components and their functions.\nFigure 6.1.3.13-1: Recommended bit rate MAC control element\nTable 6.1.3.13-1: Values (kbit/s) for Bit Rate field\n\nTable 6.1.3.13-2: Values of identity of the logical channel for LCID field\n\nThe Activation/Deactivation of CSI-RS resources MAC control element is identified by a MAC PDU subheader with LCID as specified in table 6.2.1-1. It has variable size as the number of CSI process configured with csi-RS-NZP-Activation by RRC, see TS 36.331 [8], (N) and the N number of octets with A fields are included in ascending order of CSI process ID, i.e., CSI-ProcessId, as defined in Figure 6.1.3.14-1. Activation/Deactivation CSI-RS command is defined in Figure 6.1.3.14-2 and activates or deactivates CSI-RS resources for a CSI process. For a UE configured with transmission mode 9, N equals 1. Activation/Deactivation of CSI-RS resources MAC control element applies to the serving cell on which the UE receives the Activation/Deactivation of CSI-RS resources MAC control element.\nThe Activation/Deactivation of CSI-RS resources MAC control elements is defined as follows:\n-\tAi: this field indicates the activation/deactivation status of the CSI-RS resources configured by upper layers for the CSI process. A1 corresponds to the 1st entry in the list of CSI-RS specified by csi-RS-ConfigNZP-ApList as configured by upper layers, A2 corresponds to the 2nd entry in this list and so on. The Ai field is set to \"1\" to indicate that ith entry in the list of CSI-RS specified by csi-RS-ConfigNZP-ApList shall be activated. The Ai field is set to \"0\" to indicate that ith entry in the list shall be deactivated. For each CSI process, the number of Ai fields (i=1, 2,…, 8) which are set to \"1\" shall be equal to the value of the higher-layer parameter activatedResources in TS 36.331 [8].\nThe figure depicts the activation/deactivation of CSI-RS resources in a 5G network, illustrating the process of controlling the control signal resources. The figure shows the MAC Control Element (MCE) and the Resource Scheduler (RS) in action, with the MCE controlling the activation/deactivation of CSI-RS resources. This process is crucial for ensuring efficient resource allocation and network performance.\nFigure 6.1.3.14-1: Activation/Deactivation of CSI-RS resources MAC Control Element\nThe figure depicts a 14-2 CSI-RS command, which is a key command in the 5G network. It is used to activate or deactivate the radio resource sharing (RS) feature, allowing for efficient resource allocation and management. The command is crucial for ensuring the efficient use of radio resources and maintaining network performance.\nFigure 6.1.3.14-2: Activation/Deactivation CSI-RS command\nThe Hibernation MAC control element of one octet is identified by a MAC PDU subheader with LCID as specified in table 6.2.1-1. It has a fixed size and consists of a single octet containing seven C-fields and one R-field. The Hibernation MAC control element with one octet is defined as follows (figure 6.1.3.15-1).\nThe Hibernation MAC control element of four octets is identified by a MAC PDU subheader with LCID as specified in table 6.2.1-1. It has a fixed size and consists of a four octets containing 31 C-fields and one R-field. The Hibernation MAC control element of four octets is defined as follows (figure 6.1.3.15-2).\nFor the case with no serving cell with a ServCellIndex (TS 36.331 [8]) larger than 7, Hibernation MAC control element of one octet is applied, otherwise Hibernation MAC control element of four octets is applied.\nFor the case that Hibernation MAC control element is received and Activation/Deactivation MAC control element is not received:\n-\tCi: if there is an SCell configured with SCellIndex i as specified in TS 36.331 [8], this field indicates the dormant/activated status of the SCell with SCellIndex i, else the MAC entity shall ignore the Ci field. The Ci field is set to \"1\" to indicate that the SCell with SCellIndex i shall enter dormant state. When the Ci field is set to \"0\", the SCell with SCellIndex i shall be activated if it is in already activated state or dormant state, otherwise the Ci field set to \"0\" shall be ignored.\n-\tR: Reserved bit, set to \"0\".\nFor the case that both Activation/Deactivation MAC control element and Hibernation MAC control element are received:\n-\tR: Reserved bit, set to \"0\".\n-\tCi: if there is an SCell configured with SCellIndex i as specified in TS 36.331 [8], these fields indicate possible state transitions of the SCell with SCellIndex i, else the MAC entity shall ignore the Ci fields. The Ci fields of the two MAC control elements are interpreted according to Table 6.1.3.15-1.\nThe figure depicts a hibernation MAC control element of one octet, which is a crucial component in the network's control plane. It is used to manage the hibernation state of the network's MAC control elements, ensuring that they are in a state where they can be accessed and managed by the network's control plane. The figure shows the structure and components of the hibernation MAC control element, including the MAC control element itself, the hibernation state indicator, and the hibernation state management logic. This figure is essential for maintaining the network's stability and performance during hibernation periods.\nFigure 6.1.3.15-1: Hibernation MAC control element of one octet\nThe figure depicts a hibernation MAC control element of four octets, which is a crucial component in the network's control plane. It is used to manage the hibernation state of the network's MAC control elements, ensuring efficient network management and reducing the load on the network's control plane.\nFigure 6.1.3.15-2: Hibernation MAC control element of four octets\nTable 6.1.3.15-1: MAC control elements for SCell state transitions\n\nThe AUL confirmation MAC control element of one octet is identified by a MAC PDU subheader with LCID as specified in table 6.2.1-2. It has a fixed size and consists of a single octet containing seven C-fields and one R-field. The AUL confirmation MAC control element with one octet is defined as follows (figure 6.1.3.16-1).\nThe AUL confirmation MAC control element of four octets is identified by a MAC PDU subheader with LCID as specified in table 6.2.1-2. It has a fixed size and consists of a four octets containing 31 C-fields and one R-field. The AUL confirmation MAC control element of four octets is defined as follows (figure 6.1.3.16-2).\nFor the case with no serving cell with a ServCellIndex (TS 36.331 [8]) larger than 7, AUL confirmation MAC control element of one octet is applied, otherwise AUL confirmation MAC control element of four octets is applied.\n-\tCi: if there is an SCell configured with SCellIndex i as specified in TS 36.331 [8], this field indicates whether a PDCCH containing AUL activation or AUL release of the autonomous uplink configuration in the SCell with SCellIndex i has been received, else the MAC entity shall ignore the Ci field. The Ci field is set to \"1\" to indicate that a PDCCH containing AUL activation or AUL release of the autonomous uplink configuration in the SCell with SCellIndex i has been received in the TTI in which AUL confirmation has been triggered. The Ci field is set to \"0\" to indicate that a PDCCH containing AUL activation or AUL release of the autonomous uplink configuration in the SCell with SCellIndex i has not been received in the TTI in which AUL confirmation has been triggered;\n-\tR: Reserved bit, set to \"0\".\nThe figure depicts a Uplink Access Unit (UAU) confirmation MAC Control Element (MACCE) of one octet, which is a crucial component in the network's control plane. The UAU MACCE is responsible for managing the control plane traffic and ensuring the integrity of the network. It is designed to handle the control plane traffic and ensure the network's stability and reliability. The figure provides a visual representation of the UAU MACCE, highlighting its key features and components.\nFigure 6.1.3.16-1: AUL confirmation MAC Control Element of one octet\nThe figure depicts a Uplink Access Unit (UAU) confirmation MAC Control Element (CE) with four octets of data, illustrating the detailed structure and functionality of the UAU CE in a 5G network.\nFigure 6.1.3.16-2: AUL confirmation MAC Control Element of four octets\nPDCP Duplication Activation/Deactivation MAC control element is identified by a MAC PDU subheader with LCID as specified in table 6.2.1-1. It has a fixed size, consists of a single octet containing eight D-fields, and is defined, for a MAC entity, as follows (figure 6.1.3.17-1):\n-\tDi: this field refers to the i-th DRB in the ascending order of the DRB identity among the established DRB(s) configured with duplication and with RLC entity(ies) associated with this MAC entity. Di field set to \"1\" indicates that the duplication shall be activated and Di field set to \"0\" indicates that the duplication shall be deactivated.\nThe figure depicts a PDCP (Physical Data Channel Protocol) Duplication Activation/Deactivation MAC Control Element, which is a crucial component in a 5G network. It is responsible for managing the duplication of physical data channels, ensuring efficient use of resources and maintaining network performance. The figure shows the various elements involved in the process, such as the MAC control element, the physical data channel, and the physical layer control protocol. This helps in optimizing the network's capacity and ensuring reliable communication.\nFigure 6.1.3.17-1: PDCP Duplication Activation/Deactivation MAC Control Element\nDCQR Command MAC control element is identified by a MAC PDU subheader with LCID as specified in Table 6.2.1-1.\nIt has a fixed size of zero bits.\nDCQR and AS RAI MAC control element is identified by a MAC PDU subheader with LCID as specified in Table 6.2.1-2. A MAC PDU shall contain at most one DCQR and AS RAI MAC control element.\nIt has a fixed size and consists of a single octet defined as follows (Figure 6.1.3.19-1):\n-\tR: Reserved bit, set to \"0\";\n-\tAS RAI: The field corresponds to Access Stratum Release Assistance Indication as shown in Table 6.1.3.19-1. The length of the field is 2 bits;\n-\tQuality Report: For a NB-IoT UE, if npdsch-16QAM-Config is not configured, the report mapping is defined in Table 9.1.22.15-1 in TS 36.133 [9] and if npdsch-16QAM-Config is configured the report mapping is defined in Table 9.1.22.17-1 in TS 36.133 [9]. For a BL UE or UE in CE, the field corresponds to DL channel quality report as defined in TS 36.133 [9]. The length of the field is 4 bits.\nThe figure depicts a DCQR (Digital Circuitry and Radio Interface) and AS RAI (Access Radio Interface) MAC control element, which are essential components in the radio interface of a 5G network. The DCQR is responsible for managing the digital signal, while the AS RAI MAC control element handles the radio signal. The figure illustrates the intricate network architecture, highlighting the importance of these components in ensuring reliable communication.\nFigure 6.1.3.19-1: DCQR and AS RAI MAC control element\nTable 6.1.3.19-1: Values for AS RAI\n\nThe Timing Advance MAC CE is identified by MAC subheader with LCID as specified in Table 6.2.1-2.\nIt has a fixed size and consists of two octets defined as follows (Figure 6.1.3.20-1):\n-\tR: Reserved bit, set to 0;\n-\tTiming Advance: The Timing Advance field indicates the least integer number of subframes greater than or equal to the Timing Advance value (see TS 36.211 [7] clause 8.1). The length of the field is 14 bits.\nThe figure depicts a timing advance MAC (Multiplexed Access Channel) in a 5G network, illustrating the timing synchronization between the transmitter and receiver. The figure shows the timing advance MAC CE (Channel Estimation) process, which is crucial for ensuring accurate timing synchronization in 5G networks.\nFigure 6.1.3.20-1: Timing Advance MAC CE\nThe Differential Koffset MAC CE is identified by MAC subheader with LCID as specified in Table 6.2.1-1.\nIt has a fixed size and consists of a single octet defined as follows (Figure 6.1.3.21-1):\n-\tR: Reserved bit, set to 0;\n-\tDifferential Koffset: This field indicates the differential Koffset in subframes (see TS 36.213 [2]). The length of the field is 6 bits.\nThe figure depicts a differential K-offset MAC (Multiplexed Access Channel) in a 5G network, illustrating the different K-offset values for different users. The figure shows the K-offset values for the base station (gNB), user equipment (UE), and scatterers, which are crucial for ensuring efficient signal transmission. The figure also highlights the use of different modulation schemes and coding techniques to enhance the performance of the network.\nFigure 6.1.3.21-1: Differential Koffset MAC CE\nThe GNSS Measurement Command MAC Control Element is identified by a MAC PDU subheader with LCID as specified in table 6.2.1-1.\nIt has a fixed size and consists of a single octet defined as follow (Figure 6.1.3.22-1):\n-\tT: The Type field is a flag indicating UE is triggered by network to perform GNSS measurement or just a GNSS measurement gap length is provided for UE-autonomous measurement. The T field set to \"0\" indicates UE needs to perform GNSS measurement with the GNSS measurement gap length configured in this MAC CE. The T field set to \"1\" indicates the GNSS measurement gap length configured in this MAC CE needs to be stored and used for the subsequent UE-autonomous GNSS measurement;\n-\tR: Reserved bit, set to 0;\n-\tGNSS Measurement Gap Length: the field corresponds to the configuration of GNSS measurement gap length as shown in Table 6.1.3.22-1. The length of the field is 4 bits.\nThe figure depicts a GNSS Measurement Command MAC control element, which is a crucial component in a GNSS (Global Navigation Satellite System) receiver. It is responsible for receiving and processing the commands sent by the GNSS receiver, enabling accurate positioning and navigation. The figure shows the various components and their connections, including the command processor, data acquisition unit, and the control unit. The presence of the command processor and data acquisition unit indicates that the system is capable of receiving and processing multiple commands simultaneously, ensuring efficient operation. The control unit, which is connected to the command processor, is responsible for managing the command processing and data acquisition. Overall, the figure provides a detailed view of the GNSS Measurement Command MAC control element, highlighting its importance in the GNSS receiver system.\nFigure 6.1.3.22-1: GNSS Measurement Command MAC control element\nTable 6.1.3.22-1: Values of GNSS Measurement Gap Length field\n\nThe GNSS Validity Duration Report MAC Control Element is identified by a MAC PDU subheader with LCID as specified in table 6.2.1-2.\nIt has a fixed size and consists of a single octet defined as follows (Figure 6.1.3.23-1):\n-\tR: Reserved bit, set to 0;\n-\tGNSS Validity Duration: the field corresponds to the remaining GNSS validity duration defined in the TS 36.331 [8].\nThe figure depicts a GNSS Validity Duration Report MAC control element, which is a crucial component in the GNSS (Global Navigation Satellite System) system. The report provides information about the validity duration of the GNSS signal, which is essential for accurate navigation and positioning. The figure shows the various elements involved in the report, such as the GNSS signal, the receiver, and the control element, which work together to provide accurate navigation information.\nFigure 6.1.3.23-1: GNSS Validity Duration Report MAC control element\n",
                            "figures_meta_data": [],
                            "tables": [
                                {
                                    "description": "Table 6.1.3.1-1: Buffer size levels for BSR",
                                    "table number": 8,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 6.1.3.1-2: Extended Buffer size levels for BSR",
                                    "table number": 9,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 6.1.3.6-1: Power Headroom levels for PHR",
                                    "table number": 10,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table .6a-1: Nominal UE transmit power level for Extended PHR and for Dual Connectivity PHR",
                                    "table number": 11,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 6.1.3.10-1: Data Volume levels for DV",
                                    "table number": 12,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 6.1.3.10-2: Power Headroom levels for PH",
                                    "table number": 13,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 6.1.3.10-2a: Extended Power Headroom levels for PH",
                                    "table number": 14,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 6.1.3.13-1: Values (kbit/s) for Bit Rate field",
                                    "table number": 15,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 6.1.3.13-2: Values of identity of the logical channel for LCID field",
                                    "table number": 16,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 6.1.3.15-1: MAC control elements for SCell state transitions",
                                    "table number": 17,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 6.1.3.19-1: Values for AS RAI",
                                    "table number": 18,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 6.1.3.22-1: Values of GNSS Measurement Gap Length field",
                                    "table number": 19,
                                    "summary": "",
                                    "name": ""
                                }
                            ]
                        },
                        {
                            "title": "6.1.4\tMAC PDU (transparent MAC)",
                            "text_content": "A MAC PDU consists solely of a MAC Service Data Unit (MAC SDU) whose size is aligned to a TB; as described in figure 6.1.4-1. This MAC PDU is used for transmissions on PCH, BCH, DL-SCH including BCCH, BR-BCCH, SL-DCH and SL-BCH.\nThe figure depicts an example of a transparent MAC (Media Access Control) PDU (Physical Media Access Control) in a 5G network. It illustrates the transparent nature of the PDU, allowing for the transmission of data without the need for a physical connection. The figure shows the PDU's structure, including the MAC header, data, and control information, all in a transparent format. This design is crucial for 5G networks, as it enables efficient data transmission and reduces the need for physical connections.\nFigure 6.1.4-1: Example of MAC PDU (transparent MAC)\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "6.1.5\tMAC PDU (Random Access Response)",
                            "text_content": "A MAC PDU consists of a MAC header and zero or more MAC Random Access Responses (MAC RAR) and optionally padding as described in figure 6.1.5-4.\nThe MAC header is of variable size.\nA MAC PDU header consists of one or more MAC PDU subheaders; each subheader corresponding to a MAC RAR except for the Backoff Indicator subheader. If included, the Backoff Indicator subheader is only included once and is the first subheader included within the MAC PDU header.\nA MAC PDU subheader consists of the three header fields E/T/RAPID (as described in figure 6.1.5-1) but for the Backoff Indicator subheader which consists of the five header field E/T/R/R/BI (as described in figure 6.1.5-2).\nA MAC RAR consists of the following fields R/Timing Advance Command/UL Grant/(R/ER)/Temporary C-RNTI (as described in figures 6.1.5-3, 6.1.5-3a, 6.1.5-3b and 6.1.5-3c). For BL UEs and UEs in enhanced coverage in enhanced coverage level 2 or 3 (see clause 6.2 in TS 36.213 [2]) the MAC RAR in figure 6.1.5-3a is used, for NB-IoT UEs (see clause 16.3.3 in TS 36.213 [2]) the MAC RAR in figure 6.1.5-3b is used, except for NB-IoT UEs using preamble format 2, the MAC RAR in figure 6.1.5-3c is used. Otherwise the MAC RAR in figure 6.1.5-3 is used.\nPadding may occur after the last MAC RAR. Presence and length of padding is implicit based on TB size, size of MAC header and number of RARs.\nThe figure depicts the E/T/RAPID MAC subheader, which is a crucial component of the E/T/RAPID protocol used in 5G networks. The subheader is a header that contains the MAC (Media Access Control) information for the data stream. It is used to identify the data stream and its associated MAC address, ensuring that the correct data is transmitted. The subheader is essential for efficient data transmission and is a key component of the 5G network's data plane.\nFigure 6.1.5-1: E/T/RAPID MAC subheader\nThe figure depicts the E/T/R/R/BI MAC subheader, which is a crucial component of the 5G network. It represents the physical layer of the network, with the E/T/R/R/BI subheader being the first layer of the MAC subheader hierarchy. The figure illustrates the structure of the subheader, including the MAC subheader, the E/T/R/R/BI subheader, and the R/BI subheader. The figure also shows the physical layer parameters such as the number of subframes, the number of subframes per frame, and the number of subframes per frame. The figure is important for understanding the physical layer of the 5G network and its subheader hierarchy.\nFigure 6.1.5-2: E/T/R/R/BI MAC subheader\nThe figure depicts a simplified representation of a 5G network's MAC (Media Access Control) RAR (Routing and Access Control) process, illustrating the flow of data between the base station (gNB) and the user equipment (UE). The figure shows the various paths that data takes through the network, including the use of beamforming techniques to mitigate interference.\nFigure 6.1.5-3: MAC RAR\nThe figure depicts a simplified representation of a PRACH (Point-to-Point Radio Channel Hopping) enhanced coverage level 2 or 3, highlighting the use of MAC RAR (Multipath Automatic Repeat Request) for improved signal quality.\nFigure 6.1.5-3a: MAC RAR for PRACH enhanced coverage level 2 or 3\nThe figure depicts a simplified representation of the MAC (Media Access Control) RAR (Rate Adaptation for Low-Power) for NB-IoT (Narrowband Internet of Things) UEs. It illustrates the rate adaptation process, which is crucial for ensuring efficient data transmission in low-power scenarios. The figure shows the rate adaptation process for different data rates, including 1000, 2000, and 3000 bps. The figure also includes a visual representation of the rate adaptation process, with arrows indicating the direction of the rate adaptation. The figure is a crucial tool for understanding the technical aspects of NB-IoT communication and its performance in low-power scenarios.\nFigure 6.1.5-3b: MAC RAR for NB-IoT UEs\nThe figure depicts a 5G network with a focus on signal propagation and the use of PRACH preambles for NB-IoT UEs. It illustrates the multi-path signal propagation in a 5G network, highlighting the role of base stations (gNB), user equipment (UE), and scatterers. The diagram highlights beamforming techniques to mitigate interference, and the use of PRACH preambles for NB-IoT UEs.\nFigure 6.1.5-3c: MAC RAR for NB-IoT UEs using PRACH preamble format 2\nThe figure depicts an example of a MAC PDU (Physical Media Access Control) header and MAC RARs (Remote Access Routes) in a 5G network. The header includes the MAC address, which is a unique identifier for the network interface card (NIC) that is connected to the device. The RARs are used to route data packets between different network segments, ensuring efficient communication. The figure illustrates the importance of these components in ensuring the smooth operation of 5G networks.\nFigure 6.1.5-4: Example of MAC PDU consisting of a MAC header and MAC RARs\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "6.1.6\tMAC PDU (SL-SCH)",
                            "text_content": "A MAC PDU consists of a MAC header, one or more MAC Service Data Units (MAC SDU), and optionally padding; as described in Figure 6.1.6-4.\nBoth the MAC header and the MAC SDUs are of variable sizes.\nA MAC PDU header consists of one SL-SCH subheader, one or more MAC PDU subheaders; each subheader except SL-SCH subheader corresponds to either a MAC SDU or padding.\nThe SL-SCH subheader consists of the seven header fields V/R/R/R/R/SRC/DST.\nA MAC PDU subheader consists of the six header fields R/R/E/LCID/F/L but for the last subheader in the MAC PDU. The last subheader in the MAC PDU consists solely of the four header fields R/R/E/LCID. A MAC PDU subheader corresponding to padding consists of the four header fields R/R/E/LCID.\nThe figure depicts a complex network architecture, illustrating the various subheader elements used in the R/R/E/LCID/F/L MAC protocol. The figure includes subheader elements such as R, R, E, LCID, and F/L, which are essential for understanding the network's structure and functionality.\nFigure 6.1.6-1: R/R/E/LCID/F/L MAC subheader\nThe figure depicts the R/R/E/LCID MAC subheader, which is a crucial component of the Ethernet MAC protocol. It represents the data link layer (R) and the physical layer (E), as well as the logical link control (LCID) layer. The subheader is used to encapsulate the data and control information, ensuring efficient transmission and data integrity.\nFigure 6.1.6-2: R/R/E/LCID MAC subheader\nThe figure depicts a simplified representation of the MAC subheader for V=0001 and 0010 in the IEEE 802.15.4 standard. The subheader is used to specify the MAC layer protocol for the specified V and data rate. The figure includes the MAC subheader, the data rate, and the V field, which indicates the value of the V field. The subheader is used to specify the MAC layer protocol for the specified V and data rate. The figure includes the MAC subheader, the data rate, and the V field, which indicates the value of the V field.\nFigure 6.1.6-3: SL-SCH MAC subheader for V =\"0001\" and \"0010\"\nThe figure depicts a simplified MAC subheader for a V=0011 signal, which is a key component in the 5G network. The subheader includes the signal type (V=0011), the modulation scheme (16-QAM), and the data rate (100 Mbps). The figure illustrates the importance of this subheader in ensuring efficient communication in the 5G network.\nFigure 6.1.6-3a: SL-SCH MAC subheader for V=\"0011\"\nMAC PDU subheaders have the same order as the corresponding MAC SDUs and padding.\nPadding occurs at the end of the MAC PDU, except when single-byte or two-byte padding is required. Padding may have any value and the MAC entity shall ignore it. When padding is performed at the end of the MAC PDU, zero or more padding bytes are allowed.\nWhen single-byte or two-byte padding is required, one or two MAC PDU subheaders corresponding to padding are placed after the SL-SCH subheader and before any other MAC PDU subheader.\nA maximum of one MAC PDU can be transmitted per TB.\nThe figure depicts an example of a MAC PDU (Physical Media Access Control) header, MAC SDUs (Subframe Data Units), and padding, which are essential components in a 5G network. The header contains the MAC address, which is a unique identifier for the network interface card (NIC) that is connected to the device. The MAC SDUs contain the data that is transmitted over the network, and the padding is used to ensure that the data is transmitted in a consistent format. This figure provides a clear understanding of the structure and components of a 5G MAC PDU, which is crucial for understanding the communication protocols and data transmission in 5G networks.\nFigure 6.1.6-4: Example of MAC PDU consisting of MAC header, MAC SDUs and padding\n",
                            "figures_meta_data": [],
                            "tables": []
                        }
                    ]
                },
                {
                    "title": "6.2\tFormats and parameters",
                    "description": "",
                    "summary": "",
                    "text_content": "",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": [
                        {
                            "title": "6.2.1\tMAC header for DL-SCH, UL-SCH and MCH",
                            "text_content": "The MAC header is of variable size and consists of the following fields:\n-\tLCID: The Logical Channel ID field identifies the logical channel instance of the corresponding MAC SDU or the type of the corresponding MAC control element or padding as described in tables -1, 6.2.1-2 and 6.2.1-4 for the DL-SCH, UL-SCH and MCH respectively. There is one LCID field for each MAC SDU, MAC control element or padding included in the MAC PDU. In addition to that, one or two additional LCID fields are included in the MAC PDU, when single-byte or two-byte padding is required but cannot be achieved by padding at the end of the MAC PDU. If the LCID field is set to \"10000\", an additional octet is present in the MAC PDU subheader containing the eLCID field and this additional octet follows the octet containing LCID field. A UE of Category 0, as specified in TS 36.306 [12], except when in enhanced coverage, and unicastFreqHoppingInd-r13 is indicated in the BR version of SI message carrying SystemInformationBlockType2, and UE supports frequency hopping for unicast, as specified in TS 36.306 [12], shall indicate CCCH using LCID \"01011\", a BL UE with support for frequency hopping for unicast, as specified in TS 36.306 [12], and a UE in enhanced coverage with support for frequency hopping for unicast, as specified in TS 36.306 [12], shall if unicastFreqHoppingInd-r13 is indicated in the BR version of SI message carrying SystemInformationBlockType2 indicate CCCH using LCID \"01100\", otherwise the UE shall indicate CCCH using LCID \"00000\". A short DCQR may be included in the MAC PDU subheader with LCID set to \"00000\", \"01011\", \"01100\" or \"01101\". The LCID field size is 5 bits;\n-\teLCID: The extended Logical Channel ID field identifies the logical channel instance of the corresponding MAC SDU or the type of the corresponding MAC control element as described in tables 6.2.1-1a and 6.2.1-2a for the DL-SCH and UL-SCH respectively. The size of the eLCID field is 6 bits.\n-\tL: The Length field indicates the length of the corresponding MAC SDU or variable-sized MAC control element in bytes. There is one L field per MAC PDU subheader except for the last subheader and subheaders corresponding to fixed-sized MAC control elements. The size of the L field is indicated by the F field and F2 field;\n-\tF: The Format field indicates the size of the Length field as indicated in table 6.2.1-3. There is one F field per MAC PDU subheader except for the last subheader and subheaders corresponding to fixed-sized MAC control elements and except for when F2 is set to 1. The size of the F field is 1 bit. If the F field is included; if the size of the MAC SDU or variable-sized MAC control element is less than 128 bytes, the value of the F field is set to 0, otherwise it is set to 1;\n-\tF2: Except when this field is used for short DCQR, the Format2 field indicates the size of the Length field as indicated in table 6.2.1-3. For short DCQR, the mapping of F2 field to short DCQR value is described in table 6.2.1-5. There is one F2 field per MAC PDU subheader. The size of the F2 field is 1 bit. Except when this field is used for short DCQR, if the size of the MAC SDU or variable-sized MAC control element is larger than 32767 bytes, and if the corresponding subheader is not the last subheader, the value of the F2 field is set to 1, otherwise it is set to 0;\n-\tE: The Extension field is a flag indicating if more fields are present in the MAC header or not. The E field is set to \"1\" to indicate another set of at least R/F2/E/LCID fields. The E field is set to \"0\" to indicate that either a MAC SDU, a MAC control element or padding starts at the next byte;\n-\tR: Except when this field is used for short DCQR, reserved bit, set to \"0\". For short DCQR, the mapping of R field to short DCQR value is described in table 6.2.1-5.\nThe MAC header and subheaders are octet aligned.\nTable 6.2.1-1 Values of LCID for DL-SCH\n\nTable 6.2.1-1a Values of eLCID for DL-SCH\n\nFor NB-IoT only the following LCID values for DL-SCH are applicable: CCCH, Identity of the logical channel, DCQR Command, SC-PTM Stop Indication, SC-MCCH/SC-MTCH, UE Contention Resolution Identity, Timing Advance Command, DRX Command, Differential Koffset, GNSS Measurement Command and Padding.\nTable 6.2.1-2 Values of LCID for UL-SCH\n\nTable 6.2.1-2a Values of eLCID for UL-SCH\n\nFor NB-IoT only the following LCID values for UL-SCH are applicable: CCCH (LCID \"00000\"), Identity of the logical channel, CCCH and Extended Power Headroom Report, DCQR and AS RAI, SPS confirmation, C-RNTI, Short BSR, Timing Advance Report, GNSS Validity Duration Report and Padding.\nTable 6.2.1-3 Values of F and F2 fields:\n\nTable 6.2.1-4 Values of LCID for MCH\n\nTable 6.2.1-5: Values of R and F2 fields for short DCQR\n\n",
                            "figures_meta_data": [],
                            "tables": [
                                {
                                    "description": "Table 6.2.1-1 Values of LCID for DL-SCH",
                                    "table number": 20,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 6.2.1-1a Values of eLCID for DL-SCH",
                                    "table number": 21,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 6.2.1-2 Values of LCID for UL-SCH",
                                    "table number": 22,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 6.2.1-2a Values of eLCID for UL-SCH",
                                    "table number": 23,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 6.2.1-3 Values of F and F2 fields:",
                                    "table number": 24,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 6.2.1-4 Values of LCID for MCH",
                                    "table number": 25,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 6.2.1-5: Values of R and F2 fields for short DCQR",
                                    "table number": 26,
                                    "summary": "",
                                    "name": ""
                                }
                            ]
                        },
                        {
                            "title": "6.2.2\tMAC header for Random Access Response",
                            "text_content": "The MAC header is of variable size and consists of the following fields:\n-\tE: The Extension field is a flag indicating if more fields are present in the MAC header or not. The E field is set to \"1\" to indicate at least another set of E/T/RAPID fields follows. The E field is set to \"0\" to indicate that a MAC RAR or padding starts at the next byte;\n-\tT: The Type field is a flag indicating whether the MAC subheader contains a Random Access ID or a Backoff Indicator. The T field is set to \"0\" to indicate the presence of a Backoff Indicator field in the subheader (BI). The T field is set to \"1\" to indicate the presence of a Random Access Preamble ID field in the subheader (RAPID);\n-\tR: Reserved bit, set to \"0\";\n-\tBI: The Backoff Indicator field identifies the overload condition in the cell. The size of the BI field is 4 bits;\n-\tRAPID: The Random Access Preamble IDentifier field identifies the transmitted Random Access Preamble (see clause 5.1.3). The size of the RAPID field is 6 bits.\nThe MAC header and subheaders are octet aligned.\nNOTE:\tFor NB-IoT, the Random Access Preamble IDentifier field corresponds to the start subcarrier index.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "6.2.3\tMAC payload for Random Access Response",
                            "text_content": "The MAC RAR is of fixed size and consists of the following fields:\n-\tR: Reserved bit, set to \"0\". For a BL UE or a UE in CE, this bit is set to \"1\" to indicate that an UL Grant in Random Access Response is for EDT;\n-\tTiming Advance Command: The Timing Advance Command field indicates the index value TA (0, 1, 2… 1282) used to control the amount of timing adjustment that the MAC entity has to apply (see clause 4.2.3 of TS 36.213 [2]), except for NB-IoT UEs using preamble format 2, where the Timing Advance Command field indicates the index value TA (0, 1, 2… 1536). The size of the Timing Advance Command field is 11 bits;\n-\tUL Grant: The Uplink Grant field indicates the resources to be used on the uplink (see clause 6.2 of TS 36.213 [2], or for NB-IoT UEs, see clause 16.3.3 of TS 36.213 [2]). The size of the UL Grant field is 20 bits, except for NB-IoT UEs, where the size of UL grant field is 15 bits, and except for BL UEs and UEs in enhanced coverage level 2 or 3, where the size of the UL grant field is 12 bits.\n-\tER: Extended RAPID bits, indicating the two least significant bits of extended RAPID used when PRACH preamble format 2 is transmitted.\n-\tTemporary C-RNTI: The Temporary C-RNTI field indicates the temporary identity that is used by the MAC entity during Random Access. The size of the Temporary C-RNTI field is 16 bits.\nThe MAC RAR is octet aligned.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "6.2.4\tMAC header for SL-SCH",
                            "text_content": "The MAC header is of variable size and consists of the following fields:\n-\tV: The MAC PDU format version number field indicates which version of the SL-SCH subheader is used. In this version of the specification three format versions are defined, and this field shall therefore be set to \"0001\", \"0010\", and \"0011\". If the DST field is 24 bits this field shall be set to \"0011\". The V field size is 4 bits;\n-\tSRC: The Source Layer-2 ID field carries the identity of the source. It is set to the ProSe UE ID. The SRC field size is 24 bits;\n-\tDST: The DST field can be 16 bits or 24 bits. If it is 16 bits, it carries the 16 most significant bits of the Destination Layer-2 ID. If it is 24 bits, it is set to the Destination Layer-2 ID. For sidelink communication, the Destination Layer-2 ID is set to the ProSe Layer-2 Group ID or Prose UE ID. For V2X sidelink communication, the Destination Layer-2 ID is set to the identifier provided by upper layers as defined in TS 23.285 [14]. If the V field is set to \"0001\", this identifier is a groupcast identifier. If the V field is set to \"0010\", this identifier is a unicast identifier;\n-\tLCID: The Logical Channel ID field uniquely identifies the logical channel instance within the scope of one Source Layer-2 ID and Destination Layer-2 ID pair of the corresponding MAC SDU or padding as described in table 6.2.4-1. There is one LCID field for each MAC SDU or padding included in the MAC PDU. In addition to that, one or two additional LCID fields are included in the MAC PDU, when single-byte or two-byte padding is required but cannot be achieved by padding at the end of the MAC PDU. The values of LCID from \"01011\" to \"10100\" identify the logical channels used to send duplicated RLC SDUs from logical channels of which the values of LCID from \"00001\" to \"01010\" respectively in sequential order. The LCID field size is 5 bits;\n-\tL: The Length field indicates the length of the corresponding MAC SDU in bytes. There is one L field per MAC PDU subheader except for the last subheader. The size of the L field is indicated by the F field;\n-\tF: The Format field indicates the size of the Length field as indicated in table 6.2.4-2. There is one F field per MAC PDU subheader except for the last subheader. The size of the F field is 1 bit. If the size of the MAC SDU is less than 128 bytes, the value of the F field is set to 0, otherwise it is set to 1;\n-\tE: The Extension field is a flag indicating if more fields are present in the MAC header or not. The E field is set to \"1\" to indicate another set of at least R/R/E/LCID fields. The E field is set to \"0\" to indicate that either a MAC SDU or padding starts at the next byte;\n-\tR: Reserved bit, set to \"0\".\nThe MAC header and subheaders are octet aligned.\nTable 6.2.4-1 Values of LCID for SL-SCH\n\nTable 6.2.4-2 Values of F field:\n\n",
                            "figures_meta_data": [],
                            "tables": [
                                {
                                    "description": "Table 6.2.4-1 Values of LCID for SL-SCH",
                                    "table number": 27,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 6.2.4-2 Values of F field:",
                                    "table number": 28,
                                    "summary": "",
                                    "name": ""
                                }
                            ]
                        }
                    ]
                }
            ]
        },
        {
            "title": "7\tVariables and constants",
            "description": "",
            "summary": "",
            "tables": [],
            "figures_meta_data": [],
            "subsections": [
                {
                    "title": "7.1\tRNTI values",
                    "description": "",
                    "summary": "",
                    "text_content": "RNTI values are presented in Table 7.1-1 and their usage and associated Transport Channels and Logical Channels are presented in Table 7.1-2.\nTable 7.1-1: RNTI values.\n\nNOTE 1:\tA MAC entity uses the same C-RNTI on all Serving Cells.\nNOTE 2:\tSI-RNTI value FFFF may be used for MBMS-dedicated carrier. SI-RNTI value FFF9 is only used for MBMS-dedicated carrier.\nNOTE 3:\tRange applicable for NB-IoT.\nTable 7.1-2: RNTI usage.\n\n",
                    "tables": [
                        {
                            "description": "Table 7.1-1: RNTI values.",
                            "table number": 29,
                            "summary": "",
                            "name": ""
                        },
                        {
                            "description": "Table 7.1-2: RNTI usage.",
                            "table number": 30,
                            "summary": "",
                            "name": ""
                        }
                    ],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "7.2\tBackoff Parameter values",
                    "description": "",
                    "summary": "",
                    "text_content": "Backoff Parameter values are presented in Table 7.2-1 except for NB-IoT where Table 7.2-2 shall be used.\nTable 7.2-1: Backoff Parameter values.\n\nThe reserved values of the backoff parameter if received by the current release version UEs shall be taken as 960 ms.\nTable 7.2-2: Backoff Parameter values for NB-IoT.\n\nThe reserved values of the backoff parameter if received by the current release version NB-IoT UEs shall be taken as 524288 ms.\n",
                    "tables": [
                        {
                            "description": "Table 7.2-1: Backoff Parameter values.",
                            "table number": 31,
                            "summary": "",
                            "name": ""
                        },
                        {
                            "description": "Table 7.2-2: Backoff Parameter values for NB-IoT.",
                            "table number": 32,
                            "summary": "",
                            "name": ""
                        }
                    ],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "7.3\tPRACH Mask Index values",
                    "description": "",
                    "summary": "",
                    "text_content": "Table 7.3-1: PRACH Mask Index values\n\n",
                    "tables": [
                        {
                            "description": "Table 7.3-1: PRACH Mask Index values",
                            "table number": 33,
                            "summary": "",
                            "name": ""
                        }
                    ],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "7.4\tSubframe_Offset values",
                    "description": "",
                    "summary": "",
                    "text_content": "Subframe_Offset values are presented in Table 7.4-1.\nTable 7.4-1: Subframe_Offset values\n\n",
                    "tables": [
                        {
                            "description": "Table 7.4-1: Subframe_Offset values",
                            "table number": 34,
                            "summary": "",
                            "name": ""
                        }
                    ],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "7.5\tTTI_BUNDLE_SIZE value",
                    "description": "",
                    "summary": "",
                    "text_content": "The parameter TTI_BUNDLE_SIZE is 4.\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "7.6\tDELTA_PREAMBLE values",
                    "description": "",
                    "summary": "",
                    "text_content": "Except for NB-IoT, the DELTA_PREAMBLE preamble format based power offset values are presented in Table 7.6-1.\nTable 7.6-1: DELTA_PREAMBLE values.\n\nWhere the Preamble Format is given by prach-ConfigIndex, as specified in TS 36.211 [7].\nFor NB-IoT, the DELTA_PREAMBLE preamble format based power offset values are presented in Table 7.6-2.\nTable 7.6-2: DELTA_PREAMBLE values for NB-IoT.\n\nWhere Preamble Format is specified in TS 36.211 [7].\n",
                    "tables": [
                        {
                            "description": "Table 7.6-1: DELTA_PREAMBLE values.",
                            "table number": 35,
                            "summary": "",
                            "name": ""
                        },
                        {
                            "description": "Table 7.6-2: DELTA_PREAMBLE values for NB-IoT.",
                            "table number": 36,
                            "summary": "",
                            "name": ""
                        }
                    ],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "7.7\tHARQ RTT Timers",
                    "description": "",
                    "summary": "",
                    "text_content": "The parameters RTToffset and DLoffset provides offsets for determining the HARQ round trip time. The parameter RTToffset is set to 0 in terrestrial networks and RTToffset is set to UE-eNB RTT in Non-terrestrial networks. The parameter DLoffset is set to 0 in terrestrial networks and DLoffset is set to Koffset + k-Mac in Non-terrestrial networks where Koffset is defined in TS 36.213 [2].\nFor each serving cell, in case of FDD configuration not configured with subframeAssignment-r15 and in case of Frame Structure Type 3 configuration on the serving cell which carries the HARQ feedback for this serving cell the HARQ RTT Timer is set to 8 subframes. For each serving cell, in case of TDD configuration or FDD with subframeAssignment-r15 configured on the serving cell which carries the HARQ feedback for this serving cell the HARQ RTT Timer is set to k + 4 subframes, where k is the interval between the downlink transmission and the transmission of associated HARQ feedback, as indicated in clauses 10.1 and 10.2 of TS 36.213 [2], and for an RN configured with rn-SubframeConfig, as specified in TS 36.331 [8] and not suspended, as indicated in Table 7.5.1-1 of TS 36.216 [11].\nFor each serving cell, for HARQ processes scheduled using Short Processing Time (TS 36.331 [8]) the HARQ RTT Timer is set to 6 subframes for FDD and Frame Structure Type 3 and set to k + 3 subframes for TDD, where k is the interval between the downlink transmission and the transmission of associated HARQ feedback, as indicated in clauses 10.1 and 10.2 of TS 36.213 [2].\nFor each serving cell, for HARQ processes scheduled using short TTI (TS 36.331 [8]) the HARQ RTT Timer is set to 8 TTIs if the TTI length is one slot or if proc-Timeline is set to n+4 set1, to 12 TTIs if proc-Timeline is set to n+6 set1 or n+6 set2 and to 16 TTIs if proc-Timeline is set to n+8 set2 for FDD and Frame Structure Type 3.\nFor TDD short TTI the HARQ RTT Timer is set to k + 4 TTIs, where k is the interval between the downlink transmission and the transmission of associated HARQ feedback, as indicated in clauses 10.1 and 10.2 of TS 36.213 [2].\nFor BL UEs and UEs in enhanced coverage, when single TB is scheduled by PDCCH the HARQ RTT Timer corresponds to 7 + N subframes plus DLoffset, where N is the used PUCCH repetition factor, where only valid (configured) UL subframes as configured by upper layers in fdd-UplinkSubframeBitmapBR are counted for N. In case of TDD, HARQ RTT Timer corresponds to 3 + k + N subframes, where k is the interval between the last repetition of downlink transmission and the first repetition of the transmission of associated HARQ feedback, and N is the used PUCCH repetition factor, where only valid UL subframes are counted for N as indicated in clauses 10.1 and 10.2 of TS 36.213 [2].\nFor BL UEs and UEs in enhanced coverage, when multiple TBs are scheduled by PDCCH and HARQ-ACK bundling is not configured, the HARQ RTT Timer corresponds to 7 + m * N subframes plus DLoffset, where N is the used PUCCH repetition factor and m is the number of scheduled TBs as indicated in PDCCH whose associated HARQ process is with enabled HARQ feedback, where only valid (configured) UL subframes as configured by upper layers in fdd-UplinkSubframeBitmapBR are counted for m * N.\nFor BL UEs and UEs in enhanced coverage, when multiple TBs are scheduled by PDCCH and HARQ-ACK bundling is configured the HARQ RTT Timer corresponds to 7 + M * N subframes plus DLoffset, where N is the used PUCCH repetition factor and M is the number of TB bundles as specified in clause 7.3 of TS 36.213 [2], where only valid (configured) UL subframes as configured by upper layers in fdd-UplinkSubframeBitmapBR are counted for M * N.\nFor NB-IoT, when single TB is scheduled by PDCCH or when multiple TBs are scheduled for the interleaved case when HARQ-ACK bundling is configured the HARQ RTT Timer is set to k+3+N subframes plus RTToffset + deltaPDCCH, where k is the interval between the last subframe of the downlink transmission and the first subframe of the associated HARQ feedback transmission and N is the transmission duration in subframes of the associated HARQ feedback, and deltaPDCCH is the interval starting from the subframe following the last subframe of the associated HARQ feedback transmission plus 3 subframes plus RTToffset to the first subframe of the next PDCCH occasion.\nFor NB-IoT, when multiple TBs are scheduled by PDCCH for the non-interleaved case or for the interleaved case when HARQ-ACK bundling is not configured, the HARQ RTT Timer is set to k+m*N+1 subframes plus RTToffset + deltaPDCCH where k is the interval between the last subframe of the downlink transmission and the first subframe of the first HARQ feedback transmission and N is the transmission duration in subframes of the associated HARQ feedback and m is the number of scheduled TBs as indicated in PDCCH whose associated HARQ process is with enabled HARQ feedback, and deltaPDCCH is the interval starting from the subframe following the last subframe of the last HARQ feedback transmission plus 1 subframe plus RTToffset to the first subframe of the next PDCCH occasion.\nExcept for NB-IoT and for HARQ processes scheduled using Short Processing Time and for short TTI, UL HARQ RTT Timer length is set to 4 subframes plus RTToffset for FDD and Frame Structure Type 3, and set to kULHARQRTT subframes for TDD, where kULHARQRTT equals to the kPHICH value indicated in Table 9.1.2-1 of TS 36.213 [2] if the UE is not configured with upper layer parameter symPUSCH-UpPts for the serving cell, otherwise the kPHICH value is indicated in Table 9.1.2-3.\nFor NB-IoT, when single TB is scheduled by PDCCH the UL HARQ RTT timer length is set to 4 subframes plus RTToffset + deltaPDCCH, where deltaPDCCH is the interval starting from the subframe following the last subframe of the PUSCH transmission plus 3 subframes plus RTToffset to the first subframe of the next PDCCH occasion.\nFor NB-IoT, when multiple TBs are scheduled by PDCCH the UL HARQ RTT timer length is set to 2 subframes plus RTToffset + deltaPDCCH, where deltaPDCCH is the interval starting from the subframe following the last subframe of the PUSCH transmission plus 1 subframe plus RTToffset to the first subframe of the next PDCCH occasion.\nFor HARQ processes scheduled using Short Processing Time (TS 36.331 [8]), the UL HARQ RTT Timer length is set to 3 subframes for FDD and for Frame Structure Type 3, and set to kULHARQRTT subframes for TDD, where kULHARQRTT equals the value indicated in Table 7.7-1 and Table 7.7-2.\nFor HARQ processes scheduled using short TTI (TS 36.331 [8]), the UL HARQ RTT Timer length is set to 8 TTIs if the TTI length is one slot or if proc-Timeline is set to n+4 set1, to 12 TTIs if proc-Timeline is set to n+6 set1 or n+6 set2 and to 16 TTIs if proc-Timeline is set to n+8 set2 for FDD and Frame Structure Type 3. For TDD short TTI the UL HARQ RTT Timer is set to kULHARQRTT TTIs, where kULHARQRTT equals the value indicated in Table 7.7-3, Table 7.7-4 and Table 7.7-5.\nTable 7.7-1: kULHARQRTT for TDD Short Processing Time when special subframe configurations 0~9 is configured\n\nTable 7.7-2: kULHARQRTT for TDD Short Processing Time applied when special subframe configuration 10 is configured\n\nTable 7.7-3: kULHARQRTT for TDD short TTI applied when special subframe configurations 1, 2, 3, 4, 6, 7 and 8 are configured\n\nTable 7.7-4: kULHARQRTT for TDD short TTI applied when special subframe configurations 0, 5 and 9 are configured\n\nTable 7.7-5: kULHARQRTT for TDD short TTI applied when special subframe configuration 10 is configured\n\nNOTE 1:\tVoid\nNOTE 2:\tVoid\n",
                    "tables": [
                        {
                            "description": "Table 7.7-1: kULHARQRTT for TDD Short Processing Time when special subframe configurations 0~9 is configured",
                            "table number": 37,
                            "summary": "",
                            "name": ""
                        },
                        {
                            "description": "Table 7.7-2: kULHARQRTT for TDD Short Processing Time applied when special subframe configuration 10 is configured",
                            "table number": 38,
                            "summary": "",
                            "name": ""
                        },
                        {
                            "description": "Table 7.7-3: kULHARQRTT for TDD short TTI applied when special subframe configurations 1, 2, 3, 4, 6, 7 and 8 are configured",
                            "table number": 39,
                            "summary": "",
                            "name": ""
                        },
                        {
                            "description": "Table 7.7-4: kULHARQRTT for TDD short TTI applied when special subframe configurations 0, 5 and 9 are configured",
                            "table number": 40,
                            "summary": "",
                            "name": ""
                        },
                        {
                            "description": "Table 7.7-5: kULHARQRTT for TDD short TTI applied when special subframe configuration 10 is configured",
                            "table number": 41,
                            "summary": "",
                            "name": ""
                        }
                    ],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "7.8\tDL_REPETITION_NUMBER value",
                    "description": "",
                    "summary": "",
                    "text_content": "The parameter DL_REPETITION_NUMBER value is received from lower layers and corresponds to the repetition level as specified in TS 36.213 [2].\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "7.9\tUL_REPETITION_NUMBER value",
                    "description": "",
                    "summary": "",
                    "text_content": "The parameter UL_REPETITION_NUMBER value is received from lower layers and corresponds to the repetition level as specified in TS 36.213 [2].\nIn this specification, the subframes which cannot be used for transmission according to clause 8.1.2.1 of TS 36.133 [9] are also considered as part of measurement gaps in uplink. Measurement gaps are defined in TS 36.133 [9].\nIn a subframe that is part of a measurement gap, the UE shall not perform the transmission of HARQ feedback and CQI/PMI/RI/PTI/CRI, and SRS shall not be reported.\nWhen checking whether contention resolution was successful a MAC entity considers the MAC header structures shown below for the processing of a MAC PDU containing a UE Contention Resolution Identity MAC control element.\nThe figure B-1 illustrates the MAC header structures in a 5G network, showing the UE Contention Resolution Identity (CRI) MAC control element. This element is used to manage the contention for the radio resource and ensures efficient use of the radio resources.\nFigure B-1: MAC header structures containing a UE Contention Resolution Identity MAC control element\nNOTE 1:\tFor Case 1 (only Contention Resolution ID is carried), the resulting MAC PDU content is of fixed size and UE interprets the rest of MAC PDU data (if any) as padding without MAC subheader for padding.\nNOTE 2:\tFor Case 2 to Case 6, LCID of '00001' is applicable only when UE supports the CIoT EPS User Plane optimisation.\nNOTE 3:\tCase 7 and Case 8 are only applicable to EDT when the UE supports the CIoT EPS User Plane optimisation. For NB-IoT UE, n is 1 or 2. For BL UE or a UE in enhanced coverage, n is from 1 to 8.\nNOTE 4:\tIn Case 7, if n is 1, there is no L field after the subheader of MAC SDU for DTCH.\nWhen a DRX timer is set to a value of X, and n denotes the subframe in which the related event is triggered according to the clause 5.7, the intended behaviours of each DRX timer are presented in the Table C-1 below:\nTable C-1: Intended UE behaviour for DRX timers\n\nFor drx-InactivityTimerSCPTM, drx-InactivityTimer, drx-RetransmissionTimer and drx-ULRetransmissionTimer, if X=0, the timer does not make the MAC entity to monitor the PDCCH.\nThe intended UE behaviours in Table C-1 are not applicable for NB-IoT.\nFor NB-IoT, the intended UE behaviour regarding setting the HARQ RTT Timer is shown in Figure C-1 and for the UL HARQ RTT Timer is shown in Figure C-2.\nThe figure depicts a setup for setting the RTT timer for NB-IoT, which is a type of low-power wide-area network (LPWAN) used for IoT applications. The figure shows a timer, a power supply, and a circuit board, all connected to the NB-IoT module. The timer is used to control the transmission rate of the NB-IoT signal, ensuring that the network operates efficiently and reliably.\nFigure C-1: Setting the HARQ RTT Timer for NB-IoT\nThe figure depicts a setup for setting the UL HARQ RTT timer for NB-IoT, which is a technology used for low-power wide-area networks. The figure shows a timer with a countdown, indicating the time remaining for the UL HARQ RTT (Round-Trip Time) to be set. This timer is crucial for ensuring reliable communication in NB-IoT networks, as it determines the time for the UL HARQ (Universal HARQ) protocol to be activated. The timer is set to countdown, which means that the time remaining for the UL HARQ RTT will decrease as the countdown progresses. This setup is essential for ensuring that the network can maintain a reliable connection even in the presence of potential disruptions or network failures.\nFigure C-2: Setting the UL HARQ RTT Timer for NB-IoT\nThis annex lists the Change Requests (CRs) whose changes may be implemented by a UE of an earlier release than which the CR was approved in (i.e. CRs that contain on their coversheets the sentence \"Implementation of this CR from Rel-N will not cause interoperability issues\").\nTable D-1: List of CRs Containing Early Implementable Features and Corrections\n\n\nNote:\tWORD version for TS 36.321 v12.4.0 was changed over from WORD 2003 to WORD 2007. Accordingly, some table formats may be converted due to the impact of comparability mode but contents in the tables were confirmed to be consistent.\n",
                    "tables": [
                        {
                            "description": "Table C-1: Intended UE behaviour for DRX timers",
                            "table number": 42,
                            "summary": "",
                            "name": ""
                        },
                        {
                            "description": "Table D-1: List of CRs Containing Early Implementable Features and Corrections",
                            "table number": 43,
                            "summary": "",
                            "name": ""
                        },
                        {
                            "description": "",
                            "table number": 44,
                            "summary": "",
                            "name": ""
                        }
                    ],
                    "figures_meta_data": [],
                    "subsubsections": []
                }
            ]
        }
    ]
}