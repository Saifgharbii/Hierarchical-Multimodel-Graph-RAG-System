{
    "document_name": "29557-i20.docx",
    "content": [
        {
            "title": "Foreword",
            "description": "This Technical Specification has been produced by the 3rd Generation Partnership Project (3GPP).\nThe contents of the present document are subject to continuing work within the TSG and may change following formal TSG approval. Should the TSG modify the contents of the present document, it will be re-released by the TSG with an identifying change of release date and an increase in version number as follows:\nVersion x.y.z\nwhere:\nx\tthe first digit:\n1\tpresented to TSG for information;\n2\tpresented to TSG for approval;\n3\tor greater indicates TSG approved document under change control.\ny\tthe second digit is incremented for all changes of substance, i.e. technical enhancements, corrections, updates, etc.\nz\tthe third digit is incremented when editorial only changes have been incorporated in the document.\nIn the present document, modal verbs have the following meanings:\nshall\tindicates a mandatory requirement to do something\nshall not\tindicates an interdiction (prohibition) to do something\nThe constructions \"shall\" and \"shall not\" are confined to the context of normative provisions, and do not appear in Technical Reports.\nThe constructions \"must\" and \"must not\" are not used as substitutes for \"shall\" and \"shall not\". Their use is avoided insofar as possible, and they are not used in a normative context except in a direct citation from an external, referenced, non-3GPP document, or so as to maintain continuity of style when extending or modifying the provisions of such a referenced document.\nshould\tindicates a recommendation to do something\nshould not\tindicates a recommendation not to do something\nmay\tindicates permission to do something\nneed not\tindicates permission not to do something\nThe construction \"may not\" is ambiguous and is not used in normative elements. The unambiguous constructions \"might not\" or \"shall not\" are used instead, depending upon the meaning intended.\ncan\tindicates that something is possible\ncannot\tindicates that something is impossible\nThe constructions \"can\" and \"cannot\" are not substitutes for \"may\" and \"need not\".\nwill\tindicates that something is certain or expected to happen as a result of action taken by an agency the behaviour of which is outside the scope of the present document\nwill not\tindicates that something is certain or expected not to happen as a result of action taken by an agency the behaviour of which is outside the scope of the present document\nmight\tindicates a likelihood that something will happen as a result of action taken by some agency the behaviour of which is outside the scope of the present document\nmight not\tindicates a likelihood that something will not happen as a result of action taken by some agency the behaviour of which is outside the scope of the present document\nIn addition:\nis\t(or any other verb in the indicative mood) indicates a statement of fact\nis not\t(or any other negative verb in the indicative mood) indicates a statement of fact\nThe constructions \"is\" and \"is not\" do not indicate requirements.\n",
            "summary": "",
            "tables": [],
            "figures_meta_data": [],
            "subsections": []
        },
        {
            "title": "1\tScope",
            "description": "The present document specifies the stage 3 protocol and data model for the Application Function ProSe Service of the 5G System. It provides stage 3 protocol definitions and message flows, and specifies the API for the Naf_ProSe service.\nThe 5G System stage 2 architecture and procedures are specified in 3GPP TS 23.501 [2], 3GPP TS 23.502 [3] and 3GPP TS 23.304 [14].\nThe Technical Realization of the Service Based Architecture and the Principles and Guidelines for Services Definition are specified in 3GPP TS 29.500 [4] and 3GPP TS 29.501 [5].\nThe Application Function ProSe Service is provided by the Application Function (AF). This service supports 5G ProSe Direct Discovery authorization.\n",
            "summary": "",
            "tables": [],
            "figures_meta_data": [],
            "subsections": []
        },
        {
            "title": "2\tReferences",
            "description": "The following documents contain provisions which, through reference in this text, constitute provisions of the present document.\n-\tReferences are either specific (identified by date of publication, edition number, version number, etc.) or non-specific.\n-\tFor a specific reference, subsequent revisions do not apply.\n-\tFor a non-specific reference, the latest version applies. In the case of a reference to a 3GPP document (including a GSM document), a non-specific reference implicitly refers to the latest version of that document in the same Release as the present document.\n[1]\t3GPP TR 21.905: \"Vocabulary for 3GPP Specifications\".\n[2]\t3GPP TS 23.501: \"System Architecture for the 5G System; Stage 2\".\n[3]\t3GPP TS 23.502: \"Procedures for the 5G System; Stage 2\".\n[4]\t3GPP TS 29.500: \"5G System; Technical Realization of Service Based Architecture; Stage 3\".\n[5]\t3GPP TS 29.501: \"5G System; Principles and Guidelines for Services Definition; Stage 3\".\n[6]\tOpenAPI: \"OpenAPI Specification Version 3.0.0\", .\n[7]\t3GPP TR 21.900: \"Technical Specification Group working methods\".\n[8]\t3GPP TS 33.501: \"Security architecture and procedures for 5G system\".\n[9]\tIETF RFC 6749: \"The OAuth 2.0 Authorization Framework\".\n[10]\t3GPP TS 29.510: \"5G System; Network Function Repository Services; Stage 3\".\n[11]\tIETF RFC 9113: \"HTTP/2\".\n[12]\tIETF RFC 8259: \"The JavaScript Object Notation (JSON) Data Interchange Format\".\n[13]\tIETF RFC 9457: \"Problem Details for HTTP APIs\".\n[14]\t3GPP TS 23.304: \"Proximity based Services (ProSe) in the 5G System (5GS); Stage 2\".\n[15]\t3GPP TS 23.303: \"Proximity-based services (ProSe); Stage 2\".\n[16]\t3GPP TS 29.555: \"5G System; 5G Direct Discovery Name Management Services; Stage 3\".\n[17]\tIETF RFC 7396: \"JSON Merge Patch\".\n[18]\t3GPP TS 29.571: \"5G System; Common Data Types for Service Based Interfaces; Stage 3\".\n",
            "summary": "",
            "tables": [],
            "figures_meta_data": [],
            "subsections": []
        },
        {
            "title": "3\tDefinitions, symbols and abbreviations",
            "description": "",
            "summary": "",
            "tables": [],
            "figures_meta_data": [],
            "subsections": [
                {
                    "title": "3.1\tDefinitions",
                    "description": "",
                    "summary": "",
                    "text_content": "For the purposes of the present document, the terms and definitions given in 3GPP TR 21.905 [1] and the following apply. A term defined in the present document takes precedence over the definition of the same term, if any, in 3GPP TR 21.905 [1].\nexample: text used to clarify abstract rules by applying them literally.\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "3.2\tSymbols",
                    "description": "",
                    "summary": "",
                    "text_content": "For the purposes of the present document, the following symbols apply:\n<symbol>\t<Explanation>\n\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "3.3\tAbbreviations",
                    "description": "",
                    "summary": "",
                    "text_content": "For the purposes of the present document, the abbreviations given in 3GPP TR 21.905 [1] and the following apply. An abbreviation defined in the present document takes precedence over the definition of the same abbreviation, if any, in 3GPP TR 21.905 [1].\n5G DDNMF\t5G Direct Discovery Name Management Function\n5G ProSe\t5G Proximity-based Services\nRPAUID\tRestricted ProSe Application User ID\nPDUID\tProSe Discovery UE ID\n\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                }
            ]
        },
        {
            "title": "4\tOverview",
            "description": "The Application Function ProSe (Naf_ProSe) Service, as defined in clause 7.2.2 of 3GPP TS 23.304 [14], is provided by the Application Function (AF) which owns the functionality of ProSe Application Server.\nFigure 4-1 and figure 4-2 provide the reference architecture (in service based interface representation and reference point representation), with focus on the ProSe Service of the Application Function.\nFigure 4-1 illustrates the Naf_ProSe service architecture, showcasing the Service Based Architecture (SBI) representation. The figure depicts a network infrastructure with various components, including the Network Function Virtualization (NFV) Manager, Network Function Virtualization (NFV) Orchestrator, and Network Service Function (NSF). The NFV Manager is responsible for managing and orchestrating the lifecycle of network functions, while the NFV Orchestrator coordinates the deployment and management of these functions. The NSF is the actual network service that is deployed and executed within the network. The figure also shows the relationship between the different components, highlighting the communication and interaction between them. This representation provides a clear understanding of the Naf_ProSe service architecture and its components, as well as their interactions and responsibilities within the network.\nFigure 4-1: Naf_ProSe Service architecture, SBI representation\nThe Naf_ProSe Service is part of the Naf service-based interface exhibited by the AF. The service is provided by the AF and consumed by NF service consumers (e.g. 5G DDNMF), as shown in figure 4-1 for the SBI representation and figure 4-2 for the reference point model.\nFigure 4-2 illustrates the Naf_ ProSe service architecture, with a reference point representation. The figure showcases the various components involved in the architecture, including the network elements, interfaces, and protocols. The service architecture is designed to support real-time communication and control, with a focus on efficiency and reliability. The figure provides a clear overview of the system's structure and how different components interact with each other.\nFigure 4-2: Naf_ProSe Service architecture, reference point representation\n",
            "summary": "",
            "tables": [],
            "figures_meta_data": [],
            "subsections": []
        },
        {
            "title": "5\tNaf_ProSe Service offered by the AF",
            "description": "",
            "summary": "",
            "tables": [],
            "figures_meta_data": [],
            "subsections": [
                {
                    "title": "5.1\tIntroduction",
                    "description": "",
                    "summary": "",
                    "text_content": "Table 5.1-1 shows the Application Function ProSe Service and the corresponding Service Operations.\nTable 5.1-1: Application Function ProSe Service\n\nTable 5.1-2 summarizes the corresponding APIs defined for this specification.\nTable 5.1-2: API Descriptions\n\n",
                    "tables": [
                        {
                            "description": "Table 5.1-1: Application Function ProSe Service",
                            "table number": 3,
                            "summary": "",
                            "name": ""
                        },
                        {
                            "description": "Table 5.1-2: API Descriptions",
                            "table number": 4,
                            "summary": "",
                            "name": ""
                        }
                    ],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "5.2\tNaf_ProSe Service",
                    "description": "",
                    "summary": "",
                    "text_content": "",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": [
                        {
                            "title": "5.2.1\tService Description",
                            "text_content": "The Naf_ProSe Service enables NF service consumers (e.g. 5G DDNMF) to request authorization for a UE of a 5G ProSe Discovery request.\nThis service hence supports the following functionalities:\n-\tmapping of RPAUID and PDUID and authentication of the RPAUID(s) for restricted 5G ProSe Direct Discovery;\n-\tallocation of a ProSe Application Code Suffix pool, if open 5G ProSe Direct Discovery with application-controlled extension is used;\n-\tallocation of mask(s) for the ProSe Application Code Suffix(es), if open 5G ProSe Direct Discovery with application-controlled extension is used;\n-\tallocation of a ProSe Restricted Code Suffix pool, if restricted 5G ProSe Direct Discovery with application-controlled extension is used; and\n-\tallocation of mask(s) for ProSe Restricted Code Suffix, if restricted 5G ProSe Direct Discovery with application-controlled extension is used; and\n-\tupdate of authorization information to revoke Restricted ProSe Direct Discovery permission(s).\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "5.2.2\tService Operations",
                            "text_content": "The service operations defined for the Naf_ProSe Service are as follows:\n-\tDiscoveryAuthorization: It allows a NF service consumer (e.g. 5G DDNMF) to request the authorization for a UE of a 5G ProSe Direct Discovery request;\n-\tDiscoveryAuthorizationUpdateNotify: It allows an AF to update the authorization information to revoke discovery permissions related to some other users at the NF service consumer for Restricted ProSe Direct Discovery;\n-\tDiscoveryAuthorizationResultUpdate: It allows a NF service consumer (e.g. 5G DDNMF) to inform the AF of the revocation result associated to the update of authorization information for Restricted ProSe Direct Discovery.\nThe DiscoveryAuthorization service operation is used by a NF service consumer (e.g. 5G DDNMF) to obtain the authorization for a UE of a 5G ProSe Direct Discovery request, i.e. detect and identify other UEs in proximity using NR radio signals.\nThe following procedures are supported using the DiscoveryAuthorization Service Operation:\n-\tAuth Request procedures (see 3GPP TS 23.304 [14], clause 6.3, and 3GPP TS 23.303 [15], clause 5.3).\nThese procedures are invoked by a NF service consumer (e.g. HPLMN 5G DDNMF) towards an AF to request the authorization for a UE to perform 5G ProSe Direct Discovery.\nFigure 5.2.2.2-1: Authorization of Discovery Request for a UE, illustrates the process of granting permission for a User Equipment (UE) to initiate a discovery request within a telecommunication network. The figure shows the interaction between the Network Equipment Sub-system (NES) and the Service Equipment Sub-system (SESS), where the NES authorizes the UE to access network resources. The visual representation emphasizes the importance of security and network management in the authorization process, ensuring only authorized devices can access network services.\nFigure 5.2.2.2.2-1: Authorization of Discovery Request for a UE\n1.\tIn order to request the authorization for a UE of a 5G ProSe Direct Discovery request, the NF service consumer shall send an HTTP POST request with the request URI set to \"{apiRoot}/naf-prose/<apiVersion>/authorize-discovery\" and the request body containing the AuthDisReqData data structure, as described in figure 5.2.2.2.2-1.\nThe AuthDisReqData data structure shall contain the authorization request type related to the received 5G ProSe Direct Discovery request within the \"authRequestType\" attribute. The remaining content of the AuthDisReqData data structure differs according to the following cases, as defined in clauses 5.2.2.2.3, 5.2.2.2.4, 5.2.2.2.5, 5.2.2.2.6 and 5.2.2.2.7.\n-\tOpen 5G ProSe Direct Discovery request with application-controlled extension initiated by an announcing UE (see clause 5.3.3 of 3GPP TS 23.303 [15]). This is defined in clause 5.2.2.2.3.\n-\tOpen 5G ProSe Direct Discovery request with application-controlled extension initiated by a monitoring UE (see clause 5.3.3 of 3GPP TS 23.303 [15]). This is defined in clause 5.2.2.2.3.\n-\tRestricted 5G ProSe Direct Discovery request initiated by an announcing UE (see clause 5.3.3 of 3GPP TS 23.303 [15]). This is defined in clause 5.2.2.2.4.\n-\tRestricted 5G ProSe Direct Discovery request with application-controlled extension initiated by an announcing UE (see clause 5.3.3 of 3GPP TS 23.303 [15]). This is defined in clause 5.2.2.2.5.\n-\tRestricted 5G ProSe Direct Discovery request initiated by a monitoring UE (see clause 5.3.3 of 3GPP TS 23.303 [15]). This is defined in clause 5.2.2.2.4.\n-\tRestricted 5G ProSe Direct Discovery request with application-controlled extension initiated by a monitoring UE (see clause 5.3.3 of 3GPP TS 23.303 [15]). This is defined in clause 5.2.2.2.5.\n-\tRestricted 5G ProSe Direct Discovery request initiated by a discoveree UE (see clause 5.3.3A of 3GPP TS 23.303 [15]). This is defined in clause 5.2.2.2.6.\n-\tRestricted 5G ProSe Direct Discovery request initiated by a discoverer UE (see clause 5.3.3A of 3GPP TS 23.303 [15]). This is defined in clause 5.2.2.2.7.\n-\tRestricted 5G ProSe Direct Discovery match report (see clauses 5.3.4 and 5.3.4A of 3GPP TS 23.303 [15]). This is defined in clause 5.2.2.2.3.\n2a \tOn success, a response with HTTP \"200 OK\" status code shall be returned. The response body shall contain the parameters related to the 5G ProSe Direct Discovery authorization response data within the AuthDisResData data structure, which shall contain the authorization response type related to the received 5G ProSe Direct Discovery request within the \"authResponseType\" attribute. The remaining content of the AuthDisResData data structure also differs according to the above listed cases in step 1, as defined in clauses 5.2.2.2.3, 5.2.2.2.4, 5.2.2.2.5, 5.2.2.2.6 and 5.2.2.2.7.\n2b\tOn failure, one of the HTTP status codes listed in table 6.1.4.2.2-2 may be returned. For a 4xx/5xx response, the message body may contain a ProblemDetails structure with the \"cause\" attribute set to one of the application errors listed in table 6.1.7.3-1.\nWhen Open 5G ProSe Direct Discovery (Model A) with application-controlled extension is used, the NF service consumer (e.g. 5G DDNMF) shall provide the following attributes within the AuthDisReqData data structure, as specified in clause 6.3 of 3GPP TS 23.304 [14] and clauses 5.3.3.2, 5.3.3.3, 5.3.3.4 and 5.3.3.5 of 3GPP TS 23.303 [15].\n-\tWhen the 5G ProSe Direct Discovery request is initiated by an announcing UE:\n-\tthe ProSe Application ID within the \"proseAppId\" attribute, indicating what the UE is interested to announce;\n-\tthe allowed number of suffixes within the \"allowedSuffixNum\" attribute, indicating how many ProSe Application Code Suffixes the ProSe Application Server can assign for the UE;\n-\tthe application level container within the \"appLevelContainer\" attribute, containing the request and any relevant information for the 5G ProSe AF to assign a (set of) ProSe Application Code Suffix(es); and\n-\tthe authorization request type set to \"OPEN_DISCOVERY_EXTENSION_ANNOUNCE\" within the \"authRequestType\" attribute.\n-\tWhen the 5G ProSe Direct Discovery request is initiated by a monitoring UE:\n-\tthe ProSe Application ID(s) within the \"proseAppId\" attribute, indicating what the UE is interested to monitor;\n-\tthe application level container within the \"appLevelContainer\" attribute, containing the request and information corresponding to the ProSe Application Code Suffix; and\n-\tthe authorization request type set to \"OPEN_DISCOVERY_EXTENSION_MONITOR\" within the \"authRequestType\" attribute.\nIf the processing of the request is successful, the 5G ProSe AF shall provide the following attributes within the AuthDisResData data structure, also as specified in clause 6.3 of 3GPP TS 23.304 [14] and clauses 5.3.3.2, 5.3.3.3, 5.3.3.4 and 5.3.3.5 of 3GPP TS 23.303 [15]:\n-\tWhen the 5G ProSe Direct Discovery request is initiated by an announcing UE:\n-\tthe ProSe Application Code Suffix Pool within the \"proseAppCodeSuffixPool\" attribute, containing the Suffix(es) allocated by the 5G ProSe AF based on the inputs provided by the NF service consumer (e.g. 5G DDNMF) in the associated request;\n-\tthe authorization response type set to \"OPEN_DISCOVERY_EXTENSION_ANNOUNCE_ACK\" within the \"authResponseType\" attribute.\n-\tWhen the 5G ProSe Direct Discovery request is initiated by a monitoring UE:\n-\tthe mask(s) for the ProSe Application Code Suffix(es) within the \"proseAppMasks\" attribute, corresponding to ProSe Application ID provided by the NF service consumer (e.g. 5G DDNMF) in the related request;\n-\tthe authorization response type set to \"OPEN_DISCOVERY_EXTENSION_MONITOR_ACK\" within the \"authResponseType\" attribute.\nWhen Restricted 5G ProSe Direct Discovery (Model A) is used, the NF service consumer (e.g. 5G DDNMF) shall provide the following attributes within the AuthDisReqData data structure, as specified in clause 6.3 of 3GPP TS 23.304 [14] and clauses 5.3.3.2A, 5.3.3.3A, 5.3.3.4A and 5.3.3.5A of 3GPP TS 23.303 [15].\n-\tWhen the 5G ProSe Direct Discovery request is initiated by an announcing UE:\n-\tthe RPAUID within the \"rpauid\" attribute, indicating what the UE is interested to announce; and\n-\tthe authorization request type set to \"RESTRICTED_DISCOVERY_ANNOUNCE\" within the \"authRequestType\" attribute.\n-\tWhen the 5G ProSe Direct Discovery request is initiated by a monitoring UE:\n-\tthe authorization request type set to either \"RESTRICTED_DISCOVERY_MONITOR\" or \"RESTRICTED_DISCOVERY_PERMISSION\" within the \"authRequestType\" attribute; and\n-\tif the authorization request type is set to \"RESTRICTED_DISCOVERY_MONITOR\":\n-\tthe RPAUID within the \"rpauid\" attribute, indicating the identity that the UE uses to obtain the permission to monitor; and\n-\tthe application level container within the \"appLevelContainer\" attribute, containing the Target RPAUID(s) indicating what the UE is interested to monitor;\notherwise,\n-\tif the authorization request type is set to \"RESTRICTED_DISCOVERY_PERMISSION\":\n-\tthe RPAUID within the \"rpauid\" attribute, indicating the identity that the UE uses to obtain the permission to monitor;\n-\tthe target RPAUID within the \"targetRpauid\" attribute, containing the Target RPAUID;\nIf the processing of the request is successful, the 5G ProSe AF shall provide the following attributes within the AuthDisResData data structure, also as specified in clause 6.3 of 3GPP TS 23.304 [14] and clauses 5.3.3.2A, 5.3.3.3A, 5.3.3.4A and 5.3.3.5A of 3GPP TS 23.303 [15]:\n-\tWhen the 5G ProSe Direct Discovery request is initiated by an announcing UE:\n-\tthe PDUID(s) within the \"pduids\" attribute, containing the PDUID(s) corresponding to the provided RPAUID; and\n-\tthe authorization response type set to \"RESTRICTED_DISCOVERY_ANNOUNCE_ACK\" within the \"authResponseType\" attribute.\n-\tWhen the 5G ProSe Direct Discovery request is initiated by a monitoring UE:\n-\tthe authorization response type set to either \"RESTRICTED_DISCOVERY_MONITOR_ACK\" or \"RESTRICTED_DISCOVERY_PERMISSION_ACK\" within the \"authResponseType\" attribute; and\n-\tif the authorization response type is set to \"RESTRICTED_DISCOVERY_MONITOR_ACK\":\n-\tthe PDUID within the \"pduids\" attribute, containing the PDUID corresponding to the provided RPAUID;\n-\ta response application level container within the \"appLevelContainer\" attribute, containing the successfully authenticated Target RPAUID(s); and\n-\tN sets of Target PDUID - Target RPAUID - Metadata Indicator within the \"targetDataSet\" attribute, containing N sets of Target PDUID - Target RPAUID - Metadata Indicator (Each Target PDUID is returned with the corresponding Target RPAUID(s) that the RPAUID is allowed to discover);\nNOTE:\tThe Metadata Indicator is optional. It indicates whether there is metadata associated with the RPAUID, and if so, whether updating this metadata is allowed.\notherwise,\n-\tif the authorization response type is set to \"RESTRICTED_DISCOVERY_PERMISSION_ACK\":\n-\tthe target PDUID within the \"targetPduid\" attribute, containing the Target PDUID;\nWhen Restricted 5G ProSe Direct Discovery (Model A) is used, the NF service consumer (e.g. 5G DDNMF) shall provide the following attributes within the AuthDisReqData data structure, as specified in clause 6.3 of 3GPP TS 23.304 [14] and clauses 5.3.3.2A, 5.3.3.3A, 5.3.3.4A and 5.3.3.5A of 3GPP TS 23.303 [15].\n-\tWhen the 5G ProSe Direct Discovery request is initiated by an announcing UE:\n-\tthe RPAUID within the \"rpauid\" attribute, indicating what the UE is interested to announce;\n-\tthe allowed number of suffixes within the \"allowedSuffixNum\" attribute, indicating how many ProSe Restricted Code Suffixes the ProSe Application Server can assign for the UE;\n-\tthe authorization request type set to \"RESTRICTED_DISCOVERY_EXTENSION_ANNOUNCE\" within the \"authRequestType\" attribute.\n-\tWhen the 5G ProSe Direct Discovery request is initiated by a monitoring UE:\n-\tthe RPAUID within the \"rpauid\" attribute, indicating the identity that the UE uses to obtain the permission to monitor; and\n-\tthe application level container within the \"appLevelContainer\" attribute, containing the Target RPAUID(s) indicating what the UE is interested to monitor; and\n-\tthe authorization request type set to \"RESTRICTED_DISCOVERY_EXTENSION_MONITOR\" within the \"authRequestType\" attribute.\nIf the processing of the request is successful, the 5G ProSe AF shall provide the following attributes within the AuthDisResData data structure, also as specified in clause 6.3 of 3GPP TS 23.304 [14] and clauses 5.3.3.2A, 5.3.3.3A, 5.3.3.4A and 5.3.3.5A of 3GPP TS 23.303 [15]:\n-\tWhen the 5G ProSe Direct Discovery request is initiated by an announcing UE:\n-\tthe PDUID(s) within the \"pduids\" attribute, containing the PDUID(s) corresponding to the provided RPAUID; and\n-\tthe ProSe Restricted Code Suffix Pool within the \"restrictedCodeSuffixPool\" attribute, containing the Suffix(es) allocated by the 5G ProSe AF based on the inputs provided by the NF service consumer (e.g. 5G DDNMF) in the associated request;\n-\tthe authorization response type set to \"RESTRICTED_DISCOVERY_EXTENSION_ANNOUNCE_ACK\" within the \"authResponseType\" attribute.\n-\tWhen the 5G ProSe Direct Discovery request is initiated by a monitoring UE:\n-\tthe PDUID within the \"pduids\" attribute, containing the PDUID corresponding to the provided RPAUID;\n-\ta response application level container within the \"appLevelContainer\" attribute, containing the successfully authenticated Target RPAUID(s);\n-\tN sets of Target PDUID - Target RPAUID - Metadata Indicator within the \"targetDataSet\" attribute, containing N sets of Target PDUID - Target RPAUID - Metadata Indicator (Each Target PDUID is returned with the corresponding Target RPAUID(s) that the RPAUID is allowed to discover); and\nNOTE:\tThe Metadata Indicator is optional. It indicates whether there is metadata associated with the RPAUID, and if so, whether updating this metadata is allowed.\n-\tthe authorization response type set to \"RESTRICTED_DISCOVERY_EXTENSION_MONITOR_ACK\" within the \"authResponseType\" attribute.\nThe AuthDisResData data structure may also include in this case:\n-\tthe mask(s) for the ProSe Restricted Code Suffix(es) within the \"proSeRestrictedMasks\" attribute, corresponding to each of the provided Target RPAUID(s);\nWhen Restricted 5G ProSe Direct Discovery (Model B) is used, the NF service consumer (e.g. 5G DDNMF) shall provide the following attributes within the AuthDisReqData data structure, as specified in clause 6.3 of 3GPP TS 23.304 [14] and clauses 5.3.3A.2, 5.3.3A.3, 5.3.3A.4 and 5.3.3A.5 of 3GPP TS 23.303 [15].\n-\tWhen the 5G ProSe Direct Discovery request is initiated by a discoveree UE:\n-\tthe RPAUID within the \"rpauid\" attribute, indicating what the UE is interested to announce; and\n-\tthe authorization request type set to \"RESTRICTED_DISCOVERY_RESPONSE\" within the \"authRequestType\" attribute.\n-\tWhen the 5G ProSe Direct Discovery request is initiated by a discoverer UE:\n-\tthe RPAUID within the \"rpauid\" attribute, indicating the identity that the UE uses to obtain the permission to discover; and\n-\teither:\n-\tthe application level container within the \"appLevelContainer\" attribute (e.g. if the NF service consumer is the HPLMN 5G DDNMF), containing the Target RPAUID(s) indicating what the UE is interested to discover; or\n-\tthe target RPAUID within the \"targetRpauid\" attribute (if the NF service consumer is a 5G DDNMF located in another PLMN), containing the Target RPAUID; and\n-\tthe authorization request type set to \"RESTRICTED_DISCOVERY_QUERY\" within the \"authRequestType\" attribute.\nIf the processing of the request is successful, the 5G ProSe AF shall provide the following attributes within the AuthDisResData data structure, also as specified in clause 6.3 of 3GPP TS 23.304 [14] and clauses 5.3.3A.2, 5.3.3A.3, 5.3.3A.4 and 5.3.3A.5 of 3GPP TS 23.303 [15]:\n-\tWhen the 5G ProSe Direct Discovery request is initiated by a discoveree UE:\n-\tthe PDUID(s) within the \"pduids\" attribute, containing the PDUID(s) corresponding to the provided RPAUID; and\n-\tthe authorization response type set to \"RESTRICTED_DISCOVERY_RESPONSE_ACK\" within the \"authResponseType\" attribute.\n-\tWhen the 5G ProSe Direct Discovery request is initiated by a discoverer UE:\n-\tthe PDUID within the \"pduids\" attribute, containing the PDUID corresponding to the provided RPAUID;\n-\teither:\n-\tN sets of Target PDUID - Target RPAUID within the \"targetDataSet\" attribute (e.g. if the NF service consumer is the HPLMN 5G DDNMF and an application level container was received in the associated request), containing N sets of Target PDUID - Target RPAUID (Each Target PDUID is returned with the corresponding Target RPAUID(s) that the RPAUID is allowed to discover); or\n-\tthe target PDUID within the \"targetPduid\" attribute (if the NF service consumer is a 5G DDNMF located in another PLMN and only one target RPAUID was received in the associated request), containing the Target PDUID; and\n-\tthe authorization response type set to \"RESTRICTED_DISCOVERY_QUERY_ACK\" within the \"authResponseType\" attribute.\nFor a Restricted 5G ProSe Direct Discovery match report, the NF service consumer (e.g. 5G DDNMF) shall provide the following attributes within the AuthDisReqData data structure, as specified in clause 6.3 of 3GPP TS 23.304 [14] and clauses 5.3.4.1A, 5.3.4.2A, 5.3.4A.1 and 5.3.4A.2 of 3GPP TS 23.303 [15].\n-\tthe RPAUID within the \"rpauid\" attribute, indicating what the UE is interested to announce; and\n-\tthe target RPAUID within the \"targetRpauid\" attribute (if the NF service consumer is a 5G DDNMF located in another PLMN), containing the Target RPAUID; and\n-\tthe authorization request type set to \"RESTRICTED_DISCOVERY_MATCH\" within the \"authRequestType\" attribute.\nIf the processing of the request is successful, the 5G ProSe AF shall provide the following attributes within the AuthDisResData data structure, also as specified in clause 6.3 of 3GPP TS 23.304 [14] and clauses 5.3.4.1A, 5.3.4.2A, 5.3.4A.1 and 5.3.4A.2 of 3GPP TS 23.303 [15]:\n-\tthe PDUID within the \"pduids\" attribute, containing the PDUID corresponding to the provided RPAUID;\n-\tthe target PDUID within the \"targetPduid\" attribute, containing the Target PDUID;\n-\tthe metadata within the \"metaData\" attribute, corresponding to the Target PDUID; and\n-\tthe authorization response type set to \"RESTRICTED_DISCOVERY_MATCH_ACK\" within the \"authResponseType\" attribute.\nThe DiscoveryAuthorizationUpdateNotify service operation is used by an AF to update the authorization information to revoke discovery permissions relating to some other users at the NF service consumer (e.g. 5G DDNMF) for Restricted ProSe Direct Discovery. See Figure 5.2.2.3.1-1.\nThe following procedures are supported using the DiscoveryAuthorizationUpdateNotify Service Operation:\n-\tAuth Update procedures (see 3GPP TS 23.303 [15], clause 5.3.6A.2).\nFigure 5.2.2.3.1-1: DiscoveryAuthorizationUpdate Notification represents a protocol used in telecommunication networks for the exchange of information regarding the discovery, authorization, and update of network resources. This figure illustrates the process of how devices in a network communicate to identify available resources, gain access permissions, and notify each other of any changes to those resources. The figure showcases the importance of secure and efficient communication between network entities, ensuring the smooth operation of the network and the proper management of resources.\nFigure 5.2.2.3.1-1: DiscoveryAuthorizationUpdate Notification\n1.\tThe AF shall send an HTTP POST request to the callback URI of the NF consumer (e.g. 5G DDNMF). The request body shall contain the AuthUpdateData data structure.\nThe callback URI is provided to the AF during the Auth Request procedures defined in clause 5.2.2.2.\n2a.\tOn success, a response with an HTTP \"204 No content\" status code shall be returned by the NF service consumer.\n2b.\tOn failure, one of the HTTP status codes listed in Table 6.1.5.2.3.1-2 may be returned. For a 4xx/5xx response, the message body may contain a ProblemDetails data structure with the \"cause\" attribute set to one of the application errors listed in Table 6.1.5.2.3.1-2.\nThe DiscoveryAuthorizationResultUpdate service operation is used by a NF service consumer (e.g. 5G DDNMF) to inform the AF of the result of the revocation request to update the authorization information for Restricted ProSe Direct Discovery. See Figure 5.2.2.4.1-1.\nThe following procedures are supported using the DiscoveryAuthorizationResultUpdate Service Operation:\n-\tAuth Update Result procedures (see 3GPP TS 23.303 [15], clause 5.3.6A.2).\nFigure 5.2.2.4.1-1: DiscoveryAuthorization Result Update Request/Response illustrates the process of updating a result in a discovery authorization context. The figure shows a client initiating a request to update a result, which is then processed by a server. The updated result is then sent back to the client, completing the update process. The figure highlights the importance of secure communication and efficient data exchange in network management.\nFigure 5.2.2.4.1-1: DiscoveryAuthorizationResultUpdate Request/Response\n1.\tIn order to inform the AF of the result of the revocation related to discovery authorization update, the NF service consumer shall send an HTTP POST request with the request URI set to \"{apiRoot}/naf-prose/<apiVersion>/authorize-update-result\" and the request body containing the AuthUpdateData data structure, as described in figure 5.2.2.4.1-1.\n2a\tOn success, a response with an HTTP \"204 No Content\" status code shall be returned by the AF.\n2b\tOn failure, one of the HTTP status codes listed in Table 6.1.4.3.2-2 may be returned. For a 4xx/5xx response, the message body may contain a ProblemDetails structure with the \"cause\" attribute set to one of the application errors listed in Table 6.1.4.3.2-2.\n",
                            "figures_meta_data": [],
                            "tables": []
                        }
                    ]
                }
            ]
        },
        {
            "title": "6\tAPI Definitions",
            "description": "",
            "summary": "",
            "tables": [],
            "figures_meta_data": [],
            "subsections": [
                {
                    "title": "6.1\tNaf_ProSe Service API",
                    "description": "",
                    "summary": "",
                    "text_content": "",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": [
                        {
                            "title": "6.1.1\tIntroduction",
                            "text_content": "The Naf_ProSe shall use the Naf_ProSe API.\nThe API URI of the Naf_ProSe API shall be:\n{apiRoot}/<apiName>/<apiVersion>\nThe request URIs used in HTTP requests from the NF service consumer towards the NF service producer shall have the Resource URI structure defined in clause 4.4.1 of 3GPP TS 29.501 [5], i.e.:\n{apiRoot}/<apiName>/<apiVersion>/<apiSpecificResourceUriPart>\nwith the following components:\n-\tThe {apiRoot} shall be set as described in 3GPP TS 29.501 [5].\n-\tThe <apiName> shall be \"naf-prose \".\n-\tThe <apiVersion> shall be \"v1\".\n-\tThe <apiSpecificResourceUriPart> shall be set as described in clause 6.1.3.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "6.1.2\tUsage of HTTP",
                            "text_content": "HTTP/2, IETF RFC 9113 [11], shall be used as specified in clause 5 of 3GPP TS 29.500 [4].\nHTTP/2 shall be transported as specified in clause 5.3 of 3GPP TS 29.500 [4].\nThe OpenAPI [6] specification of HTTP messages and content bodies for the naf-prose API is contained in Annex A.2.\nSee clause 5.2.2 of 3GPP TS 29.500 [4] for the usage of HTTP standard headers.\nJSON, IETF RFC 8259 [12], shall be used as content type of the HTTP bodies specified in the present specification as specified in clause 5.4 of 3GPP TS 29.500 [4]. The use of the JSON format shall be signalled by the content type \"application/json\".\n\"Problem Details\" JSON object shall be used to indicate additional details of the error in a HTTP response body and shall be signalled by the content type \"application/problem+json\", as defined in IETF RFC 9457 [13].\nJSON Merge Patch, as defined in IETF RFC 7396 [17], signalled by the content type \"application/merge-patch+json\".\nThe mandatory HTTP custom header fields specified in clause 5.2.3.2 of 3GPP TS 29.500 [4] shall be supported, and the optional HTTP custom header fields specified in clause 5.2.3.3 of 3GPP TS 29.500 [4] may be supported.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "6.1.3\tResources",
                            "text_content": "In this release of this specification, no resource is defined for the Naf_ProSe Service.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "6.1.4\tCustom Operations without associated resources",
                            "text_content": "The structure of the custom operation URIs of the Naf_ProSe Service is shown in figure 6.1.4.1-1.\nFigure 6.1.4.1-1 illustrates the resource URI structure of the Naf ProSe API, showcasing the hierarchical organization of API endpoints and their corresponding paths. The figure presents a detailed overview of the API's architecture, with various components such as the service registry, application context, and resource identifiers. This structured representation is essential for developers to understand the API's capabilities and design efficient communication protocols.\nFigure 6.1.4.1-1: Resource URI structure of the Naf_ProSe API\nTable 6.1.4.1-1 provides an overview of the custom operations and applicable HTTP methods.\nTable 6.1.4.1-1: Custom operations\n\nThis clause represents the custom operation and what it is used for, and the custom operation URI.\nThis operation shall support request data structures specified in table 6.1.4.2.2-1 and response data structures specified in table 6.1.4.2.2-2.\nTable 6.1.4.2.2-1: Data structures supported by the POST Request Body on this resource\n\nTable 6.1.4.2.2-2: Data structures supported by the POST Response Body on this resource\n\nTable 6.1.4.2.2-3: Headers supported by the 307 Response Code on this resource\n\nTable 6.1.4.2.2-4: Headers supported by the 308 Response Code on this resource\n\nThis clause represents the custom operation and what it is used for, and the custom operation URI.\nThis operation shall support request data structures specified in table 6.1.4.3.2-1 and response data structures specified in table 6.1.4.3.2-2.\nTable 6.1.4.3.2-1: Data structures supported by the POST Request Body on this resource\n\nTable 6.1.4.3.2-2: Data structures supported by the POST Response Body on this resource\n\nTable 6.1.4.3.2-3: Headers supported by the 307 Response Code on this resource\n\nTable 6.1.4.3.2-4: Headers supported by the 308 Response Code on this resource\n\n",
                            "figures_meta_data": [],
                            "tables": [
                                {
                                    "description": "Table 6.1.4.1-1: Custom operations",
                                    "table number": 5,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 6.1.4.2.2-1: Data structures supported by the POST Request Body on this resource",
                                    "table number": 6,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 6.1.4.2.2-2: Data structures supported by the POST Response Body on this resource",
                                    "table number": 7,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 6.1.4.2.2-3: Headers supported by the 307 Response Code on this resource",
                                    "table number": 8,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 6.1.4.2.2-4: Headers supported by the 308 Response Code on this resource",
                                    "table number": 9,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 6.1.4.3.2-1: Data structures supported by the POST Request Body on this resource",
                                    "table number": 10,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 6.1.4.3.2-2: Data structures supported by the POST Response Body on this resource",
                                    "table number": 11,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 6.1.4.3.2-3: Headers supported by the 307 Response Code on this resource",
                                    "table number": 12,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 6.1.4.3.2-4: Headers supported by the 308 Response Code on this resource",
                                    "table number": 13,
                                    "summary": "",
                                    "name": ""
                                }
                            ]
                        },
                        {
                            "title": "6.1.5\tNotifications",
                            "text_content": "Table 6.1.5.1-1 provides an overview of the notification operation and applicable HTTP method.\nTable 6.1.5.1-1: Notifications overview\n\nThe DiscoveryAuthorizationUpdateNotify service operation is used to update the authorization information to revoke discovery permissions related to some other users in the NF service consumer (e.g. 5G DDNMF).\nCall-back URI: {authUpdateCallbackUri}\nSee clause 5.2.2.2.1 for the description of how the AF obtains the Call-back URI of the NF service consumer.\nThis method sends a discovery authorization update notification to the NF service consumer.\nThis method shall support the request and response data structures and response codes specified in table 6.1.5.2.3.1-1 and table 6.1.5.2.3.1-2.\nTable 6.1.5.2.3.1-1: Data structures supported by the POST Request Body\n\nTable 6.1.5.2.3.1-2: Data structures supported by the POST Response Body\n\nTable 6.1.5.2.3-3: Headers supported by the 307 Response Code on this resource\n\nTable 6.1.5.2.3-4: Headers supported by the 308 Response Code on this resource\n\n",
                            "figures_meta_data": [],
                            "tables": [
                                {
                                    "description": "Table 6.1.5.1-1: Notifications overview",
                                    "table number": 14,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 6.1.5.2.3.1-1: Data structures supported by the POST Request Body",
                                    "table number": 15,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 6.1.5.2.3.1-2: Data structures supported by the POST Response Body",
                                    "table number": 16,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 6.1.5.2.3-3: Headers supported by the 307 Response Code on this resource",
                                    "table number": 17,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 6.1.5.2.3-4: Headers supported by the 308 Response Code on this resource",
                                    "table number": 18,
                                    "summary": "",
                                    "name": ""
                                }
                            ]
                        },
                        {
                            "title": "6.1.6\tData Model",
                            "text_content": "This clause specifies the application data model supported by the Naf_ProSe API.\nTable 6.1.6.1-1 specifies the data types defined for the Naf_ProSe service based interface.\nTable 6.1.6.1-1: Naf_ProSe specific Data Types\n\nTable 6.1.6.1-2 specifies data types re-used by the Naf_ProSe service based interface from other specifications, including a reference to their respective specifications, and when needed, a short description of their use within the Naf_ProSe Service based interface.\nTable 6.1.6.1-2: Naf_ProSe re-used Data Types\n\nThis clause defines the structures to be used in resource representations.\nTable 6.1.6.2.2-1: Definition of type AuthDisReqData\n\nTable 6.1.6.2.3-1: Definition of type AuthDisResData\n\nTable 6.1.6.2.4-1: Definition of type TargetData\n\nTable 6.1.6.2.5-1: Definition of type AuthUpdateData\n\nTable 6.1.6.2.6-1: Definition of type BannedAuthData\n\nThis clause defines simple data types and enumerations that can be referenced from data structures defined in the previous clauses.\nThe simple data types defined in table 6.1.6.3.2-1 shall be supported.\nTable 6.1.6.3.2-1: Simple data types\n\nThe enumeration AuthRequestType represents the Authorization Request Type. It shall comply with the provisions of table 6.1.6.3.3-1.\nTable 6.1.6.3.3-1: Enumeration AuthRequestType\n\nThe enumeration AuthRequestType represents the Authorization Response Type. It shall comply with the provisions defined in table 6.1.6.3.4-1.\nTable 6.1.6.3.4-1: Enumeration AuthResponseType\n\nThe enumeration MetadataIndic represents the possible options for metadata associated with a particular target RPAUID. It shall comply with the provisions of table 6.1.6.3.5-1.\nTable 6.1.6.3.5-1: Enumeration MetadataIndic\n\nThe enumeration RevocationResult represents the revocation result of a set of Banned RPAUID - Banned PDUID for Restricted ProSe Direct Discovery. It shall comply with the provisions of table 6.1.6.3.6-1.\nTable 6.1.6.3.6-1: Enumeration MetadataIndic\n\nNone.\nNone.\n",
                            "figures_meta_data": [],
                            "tables": [
                                {
                                    "description": "Table 6.1.6.1-1: Naf_ProSe specific Data Types",
                                    "table number": 19,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 6.1.6.1-2: Naf_ProSe re-used Data Types",
                                    "table number": 20,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 6.1.6.2.2-1: Definition of type AuthDisReqData",
                                    "table number": 21,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 6.1.6.2.3-1: Definition of type AuthDisResData",
                                    "table number": 22,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 6.1.6.2.4-1: Definition of type TargetData",
                                    "table number": 23,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 6.1.6.2.5-1: Definition of type AuthUpdateData",
                                    "table number": 24,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 6.1.6.2.6-1: Definition of type BannedAuthData",
                                    "table number": 25,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 6.1.6.3.2-1: Simple data types",
                                    "table number": 26,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 6.1.6.3.3-1: Enumeration AuthRequestType",
                                    "table number": 27,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 6.1.6.3.4-1: Enumeration AuthResponseType",
                                    "table number": 28,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 6.1.6.3.5-1: Enumeration MetadataIndic",
                                    "table number": 29,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 6.1.6.3.6-1: Enumeration MetadataIndic",
                                    "table number": 30,
                                    "summary": "",
                                    "name": ""
                                }
                            ]
                        },
                        {
                            "title": "6.1.7\tError Handling",
                            "text_content": "For the Naf_ProSe API, HTTP error responses shall be supported as specified in clause 4.8 of 3GPP TS 29.501 [5]. Protocol errors and application errors specified in table 5.2.7.2-1 of 3GPP TS 29.500 [4] shall be supported for an HTTP method if the corresponding HTTP status codes are specified as mandatory for that HTTP method in table 5.2.7.1-1 of 3GPP TS 29.500 [4].\nIn addition, the requirements in the following clauses are applicable for the Naf_ProSe API.\nProtocol errors handling shall be supported as specified in clause 5.2.7 of 3GPP TS 29.500 [4].\nThe application errors defined for the Naf_ProSe service are listed in table 6.1.7.3-1.\nTable 6.1.7.3-1: Application errors\n\n",
                            "figures_meta_data": [],
                            "tables": [
                                {
                                    "description": "Table 6.1.7.3-1: Application errors",
                                    "table number": 31,
                                    "summary": "",
                                    "name": ""
                                }
                            ]
                        },
                        {
                            "title": "6.1.8\tFeature negotiation",
                            "text_content": "The optional features in table 6.1.8-1 are defined for the Naf_ProSe API. They shall be negotiated using the extensibility mechanism defined in clause 6.6 of 3GPP TS 29.500 [4].\nTable 6.1.8-1: Supported Features\n\n",
                            "figures_meta_data": [],
                            "tables": [
                                {
                                    "description": "Table 6.1.8-1: Supported Features",
                                    "table number": 32,
                                    "summary": "",
                                    "name": ""
                                }
                            ]
                        },
                        {
                            "title": "6.1.9\tSecurity",
                            "text_content": "As indicated in 3GPP TS 33.501 [8] and 3GPP TS 29.500 [4], the access to the Naf_ProSe API may be authorized by means of the OAuth2 protocol (see IETF RFC 6749 [9]), based on local configuration, using the \"Client Credentials\" authorization grant, where the NRF (see 3GPP TS 29.510 [10]) plays the role of the authorization server.\nIf OAuth2 is used, an NF service consumer, prior to consuming services offered by the Naf_ProSe API, shall obtain a \"token\" from the authorization server, by invoking the Access Token Request service, as described in 3GPP TS 29.510 [10], clause 5.4.2.2.\nNOTE:\tWhen multiple NRFs are deployed in a network, the NRF used as authorization server is the same NRF that the NF service consumer used for discovering the Naf_ProSe service.\nThe Naf_ProSe API defines a single scope \"naf_prose\" for OAuth2 authorization (as specified in 3GPP TS 33.501 [8]) for the entire service, and it does not define any additional scopes at resource or operation level.\n\n",
                            "figures_meta_data": [],
                            "tables": []
                        }
                    ]
                }
            ]
        },
        {
            "title": "A.1\tGeneral",
            "description": "This Annex specifies the formal definition of the API(s) defined in the present specification. It consists of OpenAPI 3.0.0 specifications in YAML format.\nThis Annex shall take precedence when being discrepant to other parts of the specification with respect to the encoding of information elements and methods within the API(s).\nNOTE 1:\tThe semantics and procedures, as well as conditions, e.g. for the applicability and allowed combinations of attributes or values, not expressed in the OpenAPI definitions but defined in other parts of the specification also apply.\nInformative copies of the OpenAPI specification files contained in this 3GPP Technical Specification are available on a Git-based repository that uses the GitLab software version control system (see clause 5.3.1 of 3GPP TS 29.501 [5] and clause 5B of 3GPP TR 21.900 [7]).\n",
            "summary": "",
            "tables": [],
            "figures_meta_data": [],
            "subsections": []
        },
        {
            "title": "A.2\tNaf_ProSe API",
            "description": "openapi: 3.0.0\n\ninfo:\ntitle: Naf_ProSe API\nversion: 1.1.0-alpha.2\ndescription: |\nNaf_ProSe Service.\n© 2023, 3GPP Organizational Partners (ARIB, ATIS, CCSA, ETSI, TSDSI, TTA, TTC).\nAll rights reserved.\n\nexternalDocs:\ndescription: >\n3GPP TS 29.557 V18.1.0; 5G System; Application Function ProSe Service; Stage 3.\nurl: https://www.3gpp.org/ftp/Specs/archive/29_series/29.557/\n\nservers:\n- url: '{apiRoot}/naf-prose/v1'\nvariables:\napiRoot:\ndefault: https://example.com\ndescription: apiRoot as defined in clause 4.4 of 3GPP TS 29.501\n\nsecurity:\n- {}\n- oAuth2ClientCredentials:\n- naf-prose\n\npaths:\n/authorize-discovery:\npost:\nsummary: Obtain the authorization of Discovery Request from 5G DDNMF for a UE\noperationId: ObtainDiscAuth\ntags:\n- Obtain the authorization of Discovery Request for a UE\nrequestBody:\ncontent:\napplication/json:\nschema:\n$ref: '#/components/schemas/AuthDisReqData'\nresponses:\n'200':\ndescription: Expected response to a valid request\ncontent:\napplication/json:\nschema:\n$ref: '#/components/schemas/AuthDisResData'\n'307':\n$ref: 'TS29571_CommonData.yaml#/components/responses/307'\n'308':\n$ref: 'TS29571_CommonData.yaml#/components/responses/308'\n'400':\n$ref: 'TS29571_CommonData.yaml#/components/responses/400'\n'401':\n$ref: 'TS29571_CommonData.yaml#/components/responses/401'\n'403':\n$ref: 'TS29571_CommonData.yaml#/components/responses/403'\n'404':\n$ref: 'TS29571_CommonData.yaml#/components/responses/404'\n'411':\n$ref: 'TS29571_CommonData.yaml#/components/responses/411'\n'413':\n$ref: 'TS29571_CommonData.yaml#/components/responses/413'\n'415':\n$ref: 'TS29571_CommonData.yaml#/components/responses/415'\n'429':\n$ref: 'TS29571_CommonData.yaml#/components/responses/429'\n'500':\n$ref: 'TS29571_CommonData.yaml#/components/responses/500'\n'502':\n$ref: 'TS29571_CommonData.yaml#/components/responses/502'\n'503':\n$ref: 'TS29571_CommonData.yaml#/components/responses/503'\ndefault:\ndescription: Unexpected error\ncallbacks:\nDiscoveryAuthorizationUpdateNotify:\n'{$request.body#/authUpdateCallbackUri}':\npost:\nrequestBody:\ndescription: >\nupdate of authorization information to revoke discovery permissions\nrelating to some other users in the NF consumer for Restricted ProSe Direct Discovery\ncontent:\napplication/json:\nschema:\n$ref: '#/components/schemas/AuthUpdateData'\nresponses:\n'204':\ndescription: Expected response to a valid notification\n'307':\n$ref: 'TS29571_CommonData.yaml#/components/responses/307'\n'308':\n$ref: 'TS29571_CommonData.yaml#/components/responses/308'\n'400':\n$ref: 'TS29571_CommonData.yaml#/components/responses/400'\n'401':\n$ref: 'TS29571_CommonData.yaml#/components/responses/401'\n'403':\n$ref: 'TS29571_CommonData.yaml#/components/responses/403'\n'404':\n$ref: 'TS29571_CommonData.yaml#/components/responses/404'\n'411':\n$ref: 'TS29571_CommonData.yaml#/components/responses/411'\n'413':\n$ref: 'TS29571_CommonData.yaml#/components/responses/413'\n'415':\n$ref: 'TS29571_CommonData.yaml#/components/responses/415'\n'429':\n$ref: 'TS29571_CommonData.yaml#/components/responses/429'\n'500':\n$ref: 'TS29571_CommonData.yaml#/components/responses/500'\n'502':\n$ref: 'TS29571_CommonData.yaml#/components/responses/502'\n'503':\n$ref: 'TS29571_CommonData.yaml#/components/responses/503'\n'504':\n$ref: 'TS29571_CommonData.yaml#/components/responses/504'\ndefault:\n$ref: 'TS29571_CommonData.yaml#/components/responses/default'\n/authorization-update-result:\npost:\nsummary: >\nreport the result of update of authorization information to revoke discovery\npermissions relating to some other users in the NF consumer for Restricted ProSe Direct\nDiscovery\noperationId: AuthorizationUpdateResult\ntags:\n- Authorization Information Update Result\nrequestBody:\ncontent:\napplication/json:\nschema:\n$ref: '#/components/schemas/AuthUpdateData'\nrequired: true\nresponses:\n'204':\ndescription: Expected response to a successful cancellation\n'307':\n$ref: 'TS29571_CommonData.yaml#/components/responses/307'\n'308':\n$ref: 'TS29571_CommonData.yaml#/components/responses/308'\n'400':\n$ref: 'TS29571_CommonData.yaml#/components/responses/400'\n'401':\n$ref: 'TS29571_CommonData.yaml#/components/responses/401'\n'403':\n$ref: 'TS29571_CommonData.yaml#/components/responses/403'\n'404':\n$ref: 'TS29571_CommonData.yaml#/components/responses/404'\n'411':\n$ref: 'TS29571_CommonData.yaml#/components/responses/411'\n'413':\n$ref: 'TS29571_CommonData.yaml#/components/responses/413'\n'415':\n$ref: 'TS29571_CommonData.yaml#/components/responses/415'\n'429':\n$ref: 'TS29571_CommonData.yaml#/components/responses/429'\n'500':\n$ref: 'TS29571_CommonData.yaml#/components/responses/500'\n'502':\n$ref: 'TS29571_CommonData.yaml#/components/responses/502'\n'503':\n$ref: 'TS29571_CommonData.yaml#/components/responses/503'\n'504':\n$ref: 'TS29571_CommonData.yaml#/components/responses/504'\ndefault:\n$ref: 'TS29571_CommonData.yaml#/components/responses/default'\n\ncomponents:\nsecuritySchemes:\noAuth2ClientCredentials:\ntype: oauth2\nflows:\nclientCredentials:\ntokenUrl: '{nrfApiRoot}/oauth2/token'\nscopes:\nnaf-prose: Access to the Naf_ProSe API\n\nschemas:\n\n# COMPLEX TYPES:\n\nAuthDisReqData:\ntype: object\ndescription: >\nRepresents Data used to request the authorization for a UE of a 5G ProSe Direct\nDiscovery request.\nrequired:\n- authRequestType\nproperties:\nauthRequestType:\n$ref: '#/components/schemas/AuthRequestType'\nproseAppId:\ntype: array\nitems:\n$ref: 'TS29555_N5g-ddnmf_Discovery.yaml#/components/schemas/ProseApplicationId'\nallowedSuffixNum:\n$ref: '#/components/schemas/AllowedSuffixNum'\nappLevelContainer:\n$ref: '#/components/schemas/AppLevelContainer'\nrpauid:\n$ref: 'TS29555_N5g-ddnmf_Discovery.yaml#/components/schemas/Rpauid'\ntargetRpauid:\n$ref: 'TS29555_N5g-ddnmf_Discovery.yaml#/components/schemas/Rpauid'\nauthUpdateCallbackUri:\n$ref: 'TS29571_CommonData.yaml#/components/schemas/Uri'\n\nAuthDisResData:\ntype: object\ndescription: >\nRepresents the obtained authorization Data for a UE of a 5G ProSe Direct Discovery\nrequest.\nrequired:\n- authResponseType\nproperties:\nauthResponseType:\n$ref: '#/components/schemas/AuthResponseType'\nproseAppCodeSuffixPool:\n$ref: 'TS29555_N5g-ddnmf_Discovery.yaml#/components/schemas/ProseApplicationCodeSuffixPool'\npduids:\ntype: array\nitems:\n$ref: 'TS29555_N5g-ddnmf_Discovery.yaml#/components/schemas/Pduid'\nrestrictedCodeSuffixPool:\ntype: array\nitems:\n$ref: 'TS29555_N5g-ddnmf_Discovery.yaml#/components/schemas/RestrictedCodeSuffixPool'\nproseAppMasks:\ntype: array\nitems:\n$ref: 'TS29555_N5g-ddnmf_Discovery.yaml#/components/schemas/ProseApplicationMask'\nproSeRestrictedMasks:\ntype: array\nitems:\n$ref: '#/components/schemas/ProSeRestrictedMask'\nresAppLevelContainer:\n$ref: '#/components/schemas/AppLevelContainer'\ntargetDataSet:\ntype: array\nitems:\n$ref: '#/components/schemas/TargetData'\ntargetPduid:\n$ref: 'TS29555_N5g-ddnmf_Discovery.yaml#/components/schemas/Pduid'\nmetaData:\n$ref: 'TS29555_N5g-ddnmf_Discovery.yaml#/components/schemas/MetaData'\n\n\nTargetData:\ntype: object\ndescription: Represents a set of Target PDUID - Target RPAUID - Metadata Indicator.\nrequired:\n- targetRpauid\n- pduid\nproperties:\ntargetRpauid:\n$ref: 'TS29555_N5g-ddnmf_Discovery.yaml#/components/schemas/Rpauid'\npduid:\n$ref: 'TS29555_N5g-ddnmf_Discovery.yaml#/components/schemas/Pduid'\nmetadataIndic:\n$ref: '#/components/schemas/MetadataIndic'\nAuthUpdateData:\ntype: object\ndescription: >\nRepresents the update data and resulting update data of authorization information\nfor Restricted ProSe Direct Discovery.\nrequired:\n- targetRpauid\n- bannedAuthData\nproperties:\ntargetRpauid:\n$ref: 'TS29555_N5g-ddnmf_Discovery.yaml#/components/schemas/Rpauid'\nbannedAuthData:\ntype: array\nitems:\n$ref: '#/components/schemas/BannedAuthData'\nminItems: 1\n\nBannedAuthData:\ntype: object\ndescription: Represents a set of Banned PDUID - Banned RPAUID.\nrequired:\n- bannedRpauid\n- bannedPduid\nproperties:\nbannedRpauid:\n$ref: 'TS29555_N5g-ddnmf_Discovery.yaml#/components/schemas/Rpauid'\nbannedPduid:\n$ref: 'TS29555_N5g-ddnmf_Discovery.yaml#/components/schemas/Pduid'\nrevocationResult:\n$ref: '#/components/schemas/RevocationResult'\n\n# SIMPLE TYPES:\n\nAllowedSuffixNum:\ndescription: contains the allowed number of suffixes.\ntype: integer\n\nAppLevelContainer:\ndescription: Contains the Application Level Container.\ntype: string\n\nProSeRestrictedMask:\ndescription: Contains a ProSe Restricted Mask.\ntype: string\n\n# ENUMS:\n\nAuthRequestType:\nanyOf:\n- type: string\nenum:\n- OPEN_DISCOVERY_EXTENSION_ANNOUNCE\n- RESTRICTED_DISCOVERY_ANNOUNCE\n- RESTRICTED_DISCOVERY_EXTENSION_ANNOUNCE\n- OPEN_DISCOVERY_EXTENSION_MONITOR\n- RESTRICTED_DISCOVERY_MONITOR\n- RESTRICTED_DISCOVERY_EXTENSION_MONITOR\n- RESTRICTED_DISCOVERY_PERMISSION\n- RESTRICTED_DISCOVERY_RESPONSE\n- RESTRICTED_DISCOVERY_QUERY\n- RESTRICTED_DISCOVERY_MATCH\n- type: string\ndescription: >\nThis string provides forward-compatibility with future extensions to the enumeration\nand is not used to encode content defined in the present version of this API.\ndescription: |\nRepresents the authorization request type.\nPossible values are:\n- OPEN_DISCOVERY_EXTENSION_ANNOUNCE: Indicates that the Authorization Request Type is\nopen discovery with application-controlled extension/announce.\n- RESTRICTED_DISCOVERY_ANNOUNCE: Indicates that the Authorization Request Type is restricted\ndiscovery/announce.\n- RESTRICTED_DISCOVERY_EXTENSION_ANNOUNCE: Indicates that the Authorization Request Type is\nrestricted discovery with application-controlled extension/announce.\n- OPEN_DISCOVERY_EXTENSION_MONITOR: Indicates that the Authorization Request Type is open\ndiscovery with application-controlled extension/monitor.\n- RESTRICTED_DISCOVERY_MONITOR: Indicates that the Authorization Request Type is restricted\ndiscovery/monitor.\n- RESTRICTED_DISCOVERY_EXTENSION_MONITOR: Indicates that the Authorization Request Type is\nrestricted discovery with application-controlled extension/monitor.\n- RESTRICTED_DISCOVERY_PERMISSION: Indicates that the Authorization Request Type is\nrestricted discovery/permission.\n- RESTRICTED_DISCOVERY_RESPONSE: Indicates that the Authorization Request Type is restricted\ndiscovery/response.\n- RESTRICTED_DISCOVERY_QUERY: Indicates that the Authorization Request Type is restricted\ndiscovery/query.\n- RESTRICTED_DISCOVERY_MATCH: Indicates that the Authorization Request Type is restricted\ndiscovery/match.\n\nAuthResponseType:\nanyOf:\n- type: string\nenum:\n- OPEN_DISCOVERY_EXTENSION_ANNOUNCE_ACK\n- RESTRICTED_DISCOVERY_ANNOUNCE_ACK\n- RESTRICTED_DISCOVERY_EXTENSION_ANNOUNCE_ACK\n- OPEN_DISCOVERY_EXTENSION_MONITOR_ACK\n- RESTRICTED_DISCOVERY_MONITOR_ACK\n- RESTRICTED_DISCOVERY_EXTENSION_MONITOR_ACK\n- RESTRICTED_DISCOVERY_PERMISSION_ACK\n- RESTRICTED_DISCOVERY_RESPONSE_ACK\n- RESTRICTED_DISCOVERY_QUERY_ACK\n- RESTRICTED_DISCOVERY_MATCH_ACK\n- type: string\ndescription: >\nThis string provides forward-compatibility with future extensions to the enumeration\nand is not used to encode content defined in the present version of this API.\ndescription: |\nRepresents the authorization response type.\nPossible values are:\n- OPEN_DISCOVERY_EXTENSION_ANNOUNCE_ACK: Indicates that the Authorization Response Type is\nopen discovery with application-controlled extension/announce ack.\n- RESTRICTED_DISCOVERY_ANNOUNCE_ACK: Indicates that the Authorization Response Type is\nrestricted discovery/announce ack.\n- RESTRICTED_DISCOVERY_EXTENSION_ANNOUNCE_ACK: Indicates that the Authorization Response\nType is restricted discovery with application-controlled extension/announce ack.\n- OPEN_DISCOVERY_EXTENSION_MONITOR_ACK: Indicates that the Authorization Response Type is\nopen discovery with application-controlled extension/monitor ack.\n- RESTRICTED_DISCOVERY_MONITOR_ACK: Indicates that the Authorization Response Type is\nrestricted discovery/monitor ack.\n- RESTRICTED_DISCOVERY_EXTENSION_MONITOR_ACK: Indicates that the Authorization Response Type\nis restricted discovery with application-controlled extension/monitor ack.\n- RESTRICTED_DISCOVERY_PERMISSION_ACK: Indicates that the Authorization Response Type is\nrestricted discovery/permission ack.\n- RESTRICTED_DISCOVERY_RESPONSE_ACK: Indicates that the Authorization Response Type is\nrestricted discovery/response ack.\n- RESTRICTED_DISCOVERY_QUERY_ACK: Indicates that the Authorization Response Type is\nrestricted discovery/query ack.\n- RESTRICTED_DISCOVERY_MATCH_ACK: Indicates that the Authorization Response Type is\nrestricted discovery/match ack.\n\nMetadataIndic:\nanyOf:\n- type: string\nenum:\n- NO_METADATA\n- METADATA_UPDATE_DISALLOWED\n- METADATA_UPDATE_ALLOWED\n- type: string\ndescription: >\nThis string provides forward-compatibility with future extensions to the enumeration\nand is not used to encode content defined in the present version of this API.\ndescription: |\nRepresents the Metadata Indicator.\nPossible values are:\n- NO_METADATA: This value may be used to indicate that there is no metadata associated with\nthe target RPAUID. This is the default value applicable if this IE is not supplied.\n- METADATA_UPDATE_DISALLOWED: This value shall be used to indicate that there exists\nmetadata associated with the target RPAUID, but the metadata is not allowed to be updated.\n- METADATA_UPDATE_ALLOWED: This value shall be used to indicate that there exists metadata\nassociated with the target RPAUID, and the metadata is allowed to be updated.\n\nRevocationResult:\nanyOf:\n- type: string\nenum:\n- REVOCATION_SUCCESSFUL\n- REVOCATION_NOT_SUCCESSFUL\n- type: string\ndescription: >\nThis string provides forward-compatibility with future extensions to the enumeration\nand is not used to encode content defined in the present version of this API.\ndescription: |\nRepresents the revocation result of a set of Banned RPAUID - Banned PDUID for Restricted\nProSe Direct Discovery.\nPossible values are:\n- REVOCATION_SUCCESSFUL: Indicates the successful revocation for a set of Banned RPAUID -\nBanned PDUID for Restricted ProSe Direct Discovery.\n- REVOCATION_NOT_SUCCESSFUL: Indicates that unsuccessful revocation for a set of Banned\nRPAUID - Banned PDUID for Restricted ProSe Direct Discovery.\n\n\n\n\n\n",
            "summary": "",
            "tables": [
                {
                    "description": "",
                    "table number": 33,
                    "summary": "",
                    "name": ""
                }
            ],
            "figures_meta_data": [],
            "subsections": []
        }
    ]
}