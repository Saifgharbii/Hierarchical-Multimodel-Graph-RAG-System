{
    "document_name": "24193-i40.docx",
    "content": [
        {
            "title": "Foreword",
            "description": "This Technical Specification has been produced by the 3rd Generation Partnership Project (3GPP).\nThe contents of the present document are subject to continuing work within the TSG and may change following formal TSG approval. Should the TSG modify the contents of the present document, it will be re-released by the TSG with an identifying change of release date and an increase in version number as follows:\nVersion x.y.z\nwhere:\nx\tthe first digit:\n1\tpresented to TSG for information;\n2\tpresented to TSG for approval;\n3\tor greater indicates TSG approved document under change control.\ny\tthe second digit is incremented for all changes of substance, i.e. technical enhancements, corrections, updates, etc.\nz\tthe third digit is incremented when editorial only changes have been incorporated in the document.\nIn the present document, certain modal verbs have the following meanings:\nshall\tindicates a mandatory requirement to do something\nshall not\tindicates an interdiction (prohibition) to do something\nNOTE 1:\tThe constructions \"shall\" and \"shall not\" are confined to the context of normative provisions, and do not appear in Technical Reports.\nNOTE 2:\tThe constructions \"must\" and \"must not\" are not used as substitutes for \"shall\" and \"shall not\". Their use is avoided insofar as possible, and they are not used in a normative context except in a direct citation from an external, referenced, non-3GPP document, or so as to maintain continuity of style when extending or modifying the provisions of such a referenced document.\nshould\tindicates a recommendation to do something\nshould not\tindicates a recommendation not to do something\nmay\tindicates permission to do something\nneed not\tindicates permission not to do something\nNOTE 3:\tThe construction \"may not\" is ambiguous and is not used in normative elements. The unambiguous constructions \"might not\" or \"shall not\" are used instead, depending upon the meaning intended.\ncan\tindicates that something is possible\ncannot\tindicates that something is impossible\nNOTE 4:\tThe constructions \"can\" and \"cannot\" shall not to be used as substitutes for \"may\" and \"need not\".\nwill\tindicates that something is certain or expected to happen as a result of action taken by an agency the behaviour of which is outside the scope of the present document\nwill not\tindicates that something is certain or expected not to happen as a result of action taken by an agency the behaviour of which is outside the scope of the present document\nmight\tindicates a likelihood that something will happen as a result of action taken by some agency the behaviour of which is outside the scope of the present document\nmight not\tindicates a likelihood that something will not happen as a result of action taken by some agency the behaviour of which is outside the scope of the present document\nIn addition:\nis\t(or any other verb in the indicative mood) indicates a statement of fact\nis not\t(or any other negative verb in the indicative mood) indicates a statement of fact\nNOTE 5:\tThe constructions \"is\" and \"is not\" do not indicate requirements.\n",
            "summary": "",
            "tables": [],
            "figures_meta_data": [],
            "subsections": []
        },
        {
            "title": "1\tScope",
            "description": "The present document specifies the procedures for access traffic steering, switching and splitting (ATSSS) between the UE and the network across one 3GPP access network and one non-3GPP access network as specified in 3GPP TS 23.501 [2], 3GPP 23.502 [3], and 3GPP TS 23.316 [4].\nThe ATSSS can be supported over the access network where an MA PDU session can be established. The type of access network includes NG-RAN and untrusted non-3GPP access network as specified in 3GPP TS 23.501 [2], trusted non-3GPP access network, wireline access network and as specified in 3GPP TS 23.316 [4]. An MA PDU session established by the UE can also simultaneously use one 3GPP access network connected to EPC and one non-3GPP access network connected to 5GCN as specified in 3GPP TS 23.502 [3].\n",
            "summary": "",
            "tables": [],
            "figures_meta_data": [],
            "subsections": []
        },
        {
            "title": "2\tReferences",
            "description": "The following documents contain provisions which, through reference in this text, constitute provisions of the present document.\n-\tReferences are either specific (identified by date of publication, edition number, version number, etc.) or non-specific.\n-\tFor a specific reference, subsequent revisions do not apply.\n-\tFor a non-specific reference, the latest version applies. In the case of a reference to a 3GPP document (including a GSM document), a non-specific reference implicitly refers to the latest version of that document in the same Release as the present document.\n[1]\t3GPP TR 21.905: \"Vocabulary for 3GPP Specifications\".\n[2]\t3GPP TS 23.501: \"System Architecture for the 5G System; Stage 2\".\n[3]\t3GPP TS 23.502: \"Procedures for the 5G System; Stage 2\".\n[3A]\t3GPP TS 23.503: \"Policy and charging control framework for the 5G System (5GS); Stage 2\".\n[4]\t3GPP TS 23.316: \"Wireless and wireline convergence access support for the 5G System (5GS)\".\n[5]\t3GPP TS 24.526: \"UE policies for 5G System (5GS); Stage 3\".\n[6]\t3GPP TS 24.501: \"Non-Access-Stratum (NAS) protocol for 5G System (5GS); Stage 3\".\n[7]\t3GPP TS 24.502: \"Access to the 3GPP 5G System (5GS) via non-3GPP access networks; Stage 3\".\n[8]\tIETF RFC 8684: \"TCP Extensions for Multipath Operation with Multiple Addresses\".\n[9]\tIETF RFC 8803: \"0-RTT TCP Convert Protocol\".\n[9A]\tIETF RFC 9000: \"QUIC: A UDP-Based Multiplexed and Secure Transport\".\n[9B]\tIETF RFC 9001: \"Using TLS to Secure QUIC\".\n[9C]\tIETF RFC 9002: \"QUIC Loss Detection and Congestion Control\".\n[9D]\tIETF RFC 9221: \"An Unreliable Datagram Extension to QUIC\".\n[9E]\tIETF RFC 9298: \"Proxying UDP in HTTP\".\n[9F]\tIETF RFC 9114: \"Hypertext Transfer Protocol Version 3 (HTTP/3)\".\n[9G]\tIETF RFC 9297: \"HTTP Datagrams and the Capsule Protocol\".\n[9H]\tIETF RFC 9220: \"Bootstrapping WebSockets with HTTP/3\".\n[9I]\tdraft-ietf-quic-multipath-03 (April 2023), \"Multipath Extension for QUIC\".\nEditor's note (WI: IMSProtoc9, CR#5979): The above document cannot be formally referenced until it is published as an IETF RFC.\n[10]\t3GPP TS 24.301: \"Non-Access-Stratum (NAS) protocol for Evolved Packet System (EPS); Stage 3\".\n[11]\tIEEE Std 802-2014: \"IEEE Standard for Local and Metropolitan Area Networks: Overview and Architecture\".\n[12]\tIEEE 802.3-2018: \"IEEE Standard for Ethernet\".\n[13]\t3GPP TS 24.007: \"Mobile radio interface signalling layer 3; General aspects\".\n[14]\t3GPP TS 33.501: \"Security architecture and procedures for 5G system\".\n[15]\t3GPP TS 37.324: \"E-UTRA and NR; Service Data Adaptation Protocol (SDAP) specification\".\n[16]\t3GPP TS 29.244: \"Interface between the Control Plane and the User Plane Nodes; Stage 3\".\n[17]\t3GPP TS 24.302: \"Access to the 3GPP Evolved Packet Core (EPC) via non-3GPP access networks; Stage 3\".\n",
            "summary": "",
            "tables": [],
            "figures_meta_data": [],
            "subsections": []
        },
        {
            "title": "3\tDefinitions, symbols and abbreviations",
            "description": "",
            "summary": "",
            "tables": [],
            "figures_meta_data": [],
            "subsections": [
                {
                    "title": "3.1\tDefinitions",
                    "description": "",
                    "summary": "",
                    "text_content": "For the purposes of the present document, the terms and definitions given in 3GPP TR 21.905 [1] and the following apply. A term defined in the present document takes precedence over the definition of the same term, if any, in 3GPP TR 21.905 [1].MPTCP client: A UE supporting MPTCP functionality by supporting the TCP extensions for multipath operation specified in IETF RFC 8684 [8].\nMPQUIC client: A UE supporting QUIC functionality by supporting QUIC protocol as defined IETF RFC 9000 [9A], IETF RFC 9001[9B], IETF RFC RFC 9002 [X3] and the extensions defined in:\na)\tIETF RFC RFC 9221 [9D] for supporting unreliable datagram transport with QUIC; and\nb)\tdraft-ietf-quic-multipath [9I] for supporting QUIC connections using multiple paths simultaneously.\nFor the purposes of the present document, the following terms and definitions given in 3GPP TS 23.501 [2] apply:\nMA PDU session\nMeasurement assistance information\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "3.2\tAbbreviations",
                    "description": "",
                    "summary": "",
                    "text_content": "For the purposes of the present document, the abbreviations given in 3GPP TR 21.905 [1] and the following apply. An abbreviation defined in the present document takes precedence over the definition of the same abbreviation, if any, in 3GPP TR 21.905 [1].\n5G-RG\t5G Residential Gateway\nATSSS\tAccess Traffic Steering, Switching, Splitting\nATSSS-LL\tATSSS Low-Layer\nLADN\tLocal Area Data Network\nMA PDU\tMulti-Access PDU\nMAI\tMeasurement Assistance Information\nMPTCP\tMulti-Path TCP Protocol\nMPQUIC\tMulti-Path QUIC\nPCO\tProtocol Configuration Options\nPDU\tProtocol Data Unit\nPLR\tPacket Loss Rate\nPMF\tPerformance Measurement Function\nQFI\tQoS Flow Identifier\nRTT\tRound Trip Time\nSA PDU\tSingle-Access PDU\nSDF\tService Data Flow\nTDR\tTraffic Duplication Resume\nTDS\tTraffic Duplication Suspend\nUAD\tUE Assistance Data\nUAT\tUE Assistance data Termination\nUPF\tUser Plane Function\nURSP\tUE Route Selection Policy\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                }
            ]
        },
        {
            "title": "4\tGeneral description",
            "description": "",
            "summary": "",
            "tables": [],
            "figures_meta_data": [],
            "subsections": [
                {
                    "title": "4.1\tIntroduction",
                    "description": "",
                    "summary": "",
                    "text_content": "ATSSS is an optional feature that can be supported by the UE and the 5GC network to route data traffic across 3GPP access and non-3GPP access networks. An ATSSS capable UE establishes an MA PDU session supporting multi-access connectivity over 3GPP access and non-3GPP access networks as described in clause 4.2. The ATSSS capable UE can support ATSSS-LL MPTCP or MPQUIC steering functionality or any combination of them as described in clause 4.3, with associated steering modes, i.e. active-standby, smallest delay, load balancing, priority based or redundant. The ATSSS capable UE indicates the steering functionality and associated steering modes to the 5GC network.\nWhen the ATSSS capable UE registers to a registration area, it receives an indication from the AMF if the network supports the ATSSS. The procedure for how the AMF indicates the UE about its ATSSS support is specified in 3GPP TS 24.501 [6]. The UE capable ATSSS and the network supporting ATSSS exchange access performance measurements as described in clause 4.4. Clause 4.5 describes the traffic distribution over 3GPP access and non-3GPP access networks. Clause 4.6 provides a description for interworking with EPS network. Clause 4.7 describes ATSSS when the ATSSS capable UE is interconnected with EPS.\nThe architecture reference model for ATSSS support is described in clause 4.2.10 of 3GPP TS 23.501 [2].\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "4.2\tMulti-access PDU session",
                    "description": "",
                    "summary": "",
                    "text_content": "A PDU session supporting a multi-access PDU connectivity service is referred to as multi-access PDU (MA PDU) session. An MA PDU session is a PDU session which can use one 3GPP access network or one non-3GPP access network at a time, or simultaneously one 3GPP access network and one non-3GPP access network as defined in 3GPP TS 23.501 [2].\nAn MA PDU session can be established when the UE is registered to the same PLMN over 3GPP access network and non-3GPP access network or registered to different PLMNs over 3GPP access network and non-3GPP access network respectively. A UE can initiate MA PDU session establishment when the UE is registered to a PLMN over both 3GPP access network and non-3GPP access network, or only registered to one access network. Therefore, at any given time, the MA PDU session can have user-plane resources established on both 3GPP access and non-3GPP access, or on one access only (either 3GPP access or non-3GPP access), or can have no user-plane resources established on any access.\nAn ATSSS capable UE can establish an MA PDU session based on the URSP rules as defined in 3GPP TS 24.526 [5].\nThe following PDU session types are defined for an MA PDU session: IPv4, IPv6, IPv4v6 and Ethernet.\nNOTE 1:\tThe unstructured PDU session type is not supported in this release of the specification.\nNOTE 2:\tAn MA PDU session using IPv6 multi-homing or uplink classifier is not specified in this release of the specification.\nMA PDU sessions for LADN are not supported.\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "4.3\tSteering functionalities",
                    "description": "",
                    "summary": "",
                    "text_content": "An ATSSS capable UE can use a steering functionality to steer, switch and split the UL traffic across the 3GPP access network and the non-3GPP access network as defined in clause 5.32.6 of 3GPP TS 23.501 [2]. An ATSSS capable network can use the corresponding steering functionality for the DL traffic.\nThe UE and the network can support one or more steering functionalities as defined in clause 5.32.6 of 3GPP TS 23.501 [2], in the categories of:\na)\thigh-layer steering functionalities i.e.:\ni)\tthe MPTCP steering functionality which operates above the IP layer, where the UE and an associated MPTCP proxy functionality in the UPF can communicate by using the MPTCP protocol; and\nii)\tthe MPQUIC steering functionality which operates above the UDP/IP layer, where the UE and an associated QUIC proxy in the UPF can communicate by using the QUIC protocol; and\nb)\tlow-layer steering functionalities, i.e.:\ni)\tthe ATSSS-LL steering functionality which operates below the IP layer as a data switching function.\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "4.4\tSupport of access performance measurements",
                    "description": "",
                    "summary": "",
                    "text_content": "The ATSSS capable UE can perform access performance measurements to decide how to distribute traffic over 3GPP access and non-3GPP access. The access performance measurements can be performed by using the QoS flow(s) of default QoS rule. Based on the UE capability that the UE has indicated to the network, the access performance measurements can also be performed by using the QoS flows of non-default QoS rules.\nAn ATSSS capable UE receives MAI from the SMF during the PDU session establishment procedure for an MA PDU session as described in clause 5.32.5 of 3GPP TS 23.501 [2], during a network-requested PDU session modification procedure as specified in clause 6.3.2 of 3GPP TS 24.501 [6], during UE requested PDN connectivity procedure according to clause 6.5.1 of 3GPP TS 24.301 [10] or during EPS bearer context modification procedure according to clause 6.4.3 of 3GPP TS 24.301 [10]. The MAI can contain the addressing information of the PMF in the UPF, as well as an indicator on whether access availability/unavailability reports need to be sent to the network. If the UE indicates to the network the capability to perform the access performance measurements by using the QoS flows of non-default QoS rules, the MAI can also indicate to the UE that the performance measurement is for the QoS flows of non-default QoS rules and therefore include a QoS flow list for which, the measurements are to be performed. The encoding of the MAI is specified in clause 6.1.5.\nAn ATSSS capable UE that supports the MPTCP steering functionality can use the measurements available at the MPTCP layer.\nAn ATSSS capable UE that supports the MPQUIC steering functionality can use the measurements available at the MPQUIC layer.\nThe following PMF protocol messages can be exchanged between the PMF in the UE and the PMF in the UPF:\na)\tmessages for RTT measurements, only applicable for the ATSSS-LL steering functionality;\nb)\tmessages for reporting access availability/unavailability by the UE to the UPF;\nc)\tmessages for PLR measurements, only applicable for the ATSSS-LL steering functionality; or\nd)\tmessages for UAD provisioning ;\ne)\tmessages for UAT ;\nf)\tmessages for TDS; or\ng)\tmessages for TDR.\nAn ATSSS capable UE does not apply the ATSSS rules to the PMF protocol messages.\nThe performance measurement function protocol procedures are specified with following procedures:\na)\tUE-initiated RTT measurement (see clause 5.4.3);\nb)\tNetwork-initiated RTT measurement (see clause 5.4.4);\nc)\tUE-initiated PLR measurement (see clause 5.4.6);\nd)\tNetwork-initiated PLR measurement (see clause 5.4.7);\ne)\tUE assistance data provisioning procedure (see clause 5.4.8);\nf)\tThe access availability/unavailability procedures (see clause 5.4.5);\ng)\tUE assistance data termination procedure (see clause 5.4.9);\nh)\tTraffic duplication suspend procedure (see clause 5.4.10); and\ni)\tTraffic duplication resume procedure (see clause 5.4.11).\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "4.5\tDistribution of traffic across 3GPP access and non-3GPP access networks",
                    "description": "",
                    "summary": "",
                    "text_content": "The UE can receive ATSSS rules during the PDU session establishment procedure for an MA PDU session or network-requested PDU session modification procedure. The ATSSS rule ID and ATSSS rule operation for each rule is used to add a new ATSSS rule, or to delete or update an existing ATSSS rule. The UE can distribute the UL traffic except for the PMF protocol messages across the 3GPP access network and the non-3GPP access network according to the ATSSS rules and other local conditions (such as network interface availability, signal loss conditions, user preferences, etc.).\nNOTE:\tOn the network side, the SMF configures relevant N4 rules according to the ATSSS control information provided by the PCF for the UPF to distribute DL traffic across two access networks.\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "4.6\tEPS interworking",
                    "description": "",
                    "summary": "",
                    "text_content": "In the network supporting N26 interface:\na)\tif the UE established an MA PDU session over non-3GPP access only, no EPS bearer identity can be assigned to any QoS flow of the MA PDU session as specified in 3GPP TS 23.502 [3];\nb)\tif the UE established an MA PDU session over 3GPP access and non-3GPP access and the user plane of the MA PDU session over 3GPP access is released, the EPS bearer identity assigned for the MA PDU session can be revoked as specified in 3GPP TS 23.502 [3];\nc)\tfor an inter-system change from N1 mode to S1 mode:\n1)\tif the UE established an MA PDU session over 3GPP access only, the UE follows the procedure as specified in clause 6.1.4.1 of 3GPP TS 24.501 [6]; or\n2)\tif the UE established an MA PDU session over 3GPP access and non-3GPP access, the UE follows the procedure as specified in clause 6.1.4.1 of 3GPP TS 24.501 [6], and\nA)\tif the MA PDU session is transferred to EPS as a PDN connection and the UE did not indicate its support of establishing a PDN connection as the user plane resource of an MA PDU session during the MA PDU session establishment procedure as specified in clause 6.4.1.2 of 3GPP TS 24.501 [6], the SMF can initiate the network-requested PDU session release procedure over non-3GPP access as specified in clause 6.3.3.2 of 3GPP TS 24.501 [6] or perform a local release of the MA PDU session. The UE performs a local release of the MA PDU session over 3GPP access and non-3GPP access;\nNOTE 1:\tIf the UE receives from the network a PDU SESSION RELEASE COMMAND message which indicates to release the MA PDU session over non-3GPP access and the UE has already performed or is performing a local release of the MA PDU session, the error handling as specified in clause 6.3.3.6 of 3GPP TS 24.501 [6] is applied.\nNOTE 2:\tThe QoS flow(s) with EBI assigned over non-3GPP access is also transferred to the corresponding PDN connection.\nB)\tif the MA PDU session is transferred to EPS as a PDN connection and the UE indicated its support of establishing a PDN connection as the user plane resource of an MA PDU session during the MA PDU session establishment procedure as specified in clause 6.4.1.2 of 3GPP TS 24.501 [6], the SMF can keep the MA PDU session over non-3GPP access; or\nC)\tif the MA PDU session is not transferred to EPS as a PDN connection and the SMF decides to move the traffic of the MA PDU session from 3GPP access to non-3GPP access, the SMF can initiate the network-requested PDU session modification procedure as specified in clause 6.3.2.2 of 3GPP TS 24.501 [6]; and\n3)\tif the UE established an MA PDU session with the user-plane resource over 3GPP access and the user-plane resource with the PDN connection over untrusted non-3GPP access network, the UE follows the procedure as specified in clause 6.1.4.1 of 3GPP TS 24.501 [6], and\nA)\tif the MA PDU session is transferred to EPS as a PDN connection and:\n-\tthe UE did not indicate its support of establishing a PDN connection as the user plane resource of an MA PDU session during the MA PDU session establishment procedure as specified in clause 6.4.1.2 of 3GPP TS 24.501 [6], the SMF can initiate the tunnel disconnection procedure over untrusted non-3GPP access network as specified in clause 7.4.3 of 3GPP TS 24.302 [17] or perform a local release of the MA PDU session . The UE performs a local release of the MA PDU session over 3GPP access and over untrusted non-3GPP access; or\n-\tthe UE indicates its support of establishing a PDN connection as the user plane resource of an MA PDU session during the MA PDU session establishment procedure as specified in clause 6.4.1.2 of 3GPP TS 24.501 [6], the network can keep the MA PDU session with the user-plane resource with the PDN connection over 3GPP access network and locally release the user-plane resource over untrusted non-3GPP access. The UE performs a local release of the MA PDU session over untrusted non-3GPP access.\nB)\tif the MA PDU session is not transferred to EPS as a PDN connection and the SMF decides to move the traffic of the MA PDU session from 3GPP access to untrusted non-3GPP access, the SMF can initiate the tunnel modification procedure as specified in clause 7.4.2 of 3GPP TS 24.302 [17]; and\nd)\tfor an inter-system change from S1 mode to N1 mode, if the UE requests an MA PDU session or the related URSP or UE local configuration does not mandate that the PDU session is established over a single access when transferring the PDN connection to 3GPP access, the PDN connection can be converted by the network to an MA PDU session via the UE-requested PDU session modification procedure (see clause 5.2.5).\nIn the network not supporting N26 interface:\na)\tfor an inter-system change from N1 mode to S1 mode, if the UE intends to transfer the MA PDU session to EPS and the UE did not indicate its support of establishing a PDN connection as the user plane resource of an MA PDU session during the MA PDU session establishment procedure as specified in clause 6.4.1.2 of 3GPP TS 24.501 [6], the UE follows the procedure as specified in clause 6.1.4.2 of 3GPP TS 24.501 [6] and performs a local release of the MA PDU session over 3GPP access and non-3GPP access. The SMF can initiate the network-requested PDU session release procedure over non-3GPP access as specified in clause 6.3.3.2 of 3GPP TS 24.501 [6] or perform a local release of the MA PDU session;\nNOTE 3:\tIf the UE receives from the network a PDU SESSION RELEASE COMMAND message which indicates to release the MA PDU session over non-3GPP access and the UE has already performed or is performing a local release of the MA PDU session, the error handling as specified in clause 6.3.3.6 of 3GPP TS 24.501 [6] is applied.\na1)\tfor an inter-system change from N1 mode to S1 mode, if the UE intends to transfer the MA PDU session to EPS and the UE did not indicate its support of establishing a PDN connection as the user plane resource of an MA PDU session during the MA PDU session establishment procedure as specified in clause 6.4.1.2 of 3GPP TS 24.501 [6], the UE follows the procedure as specified in clause 6.1.4.2 of 3GPP TS 24.501 [6] and performs a local release of the MA PDU session over 3GPP access and non-3GPP access. The SMF can initiate the tunnel disconnection procedure over untrusted non-3GPP access network as specified in clause 7.4.3 of 3GPP TS 24.302 [17] or perform a local release of the MA PDU session;\nb)\tfor an inter-system change from N1 mode to S1 mode, if the UE intends to transfer the MA PDU session to EPS and the UE indicated its support of establishing a PDN connection as the user plane resource of an MA PDU session during the MA PDU session establishment procedure as specified in clause 6.4.1.2 of 3GPP TS 24.501 [6], the UE follows the procedure as specified in clause 6.1.4.2 of 3GPP TS 24.501 [6] and performs a local release of the MA PDU session over 3GPP access. The SMF can keep the MA PDU session over non-3GPP access; and\nb1)\tfor an inter-system change from N1 mode to S1 mode, if the UE intends to transfer the MA PDU session to EPS and the UE indicated its support of establishing a PDN connection as the user plane resource of an MA PDU session during the MA PDU session establishment procedure as specified in clause 6.4.1.2 of 3GPP TS 24.501 [6], the UE follows the procedure as specified in clause 6.1.4.2 of 3GPP TS 24.501 [6] and performs a local release of the MA PDU session over 3GPP access. The SMF locally release the user-plane resource over untrusted non-3GPP access. The UE performs a local release of the MA PDU session over untrusted non-3GPP access.\nc)\tfor an inter-system change from S1 mode to N1 mode, if the related URSP or UE local configuration does not mandate that the PDU session is established over a single access, the UE can initiate the UE-requested PDU session establishment procedure to request an MA PDU session (see clause 5.2.1) or to allow the PDU session to be upgraded to an MA PDU session (see clause 5.2.6) when transferring the PDN connection to 5GS.\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "4.7\tMA PDU session establishment with 3GPP access connected to EPC and non-3GPP access connected to 5GCN",
                    "description": "",
                    "summary": "",
                    "text_content": "A UE can establish an MA PDU session via non-3GPP access connected to 5GCN and E-UTRAN EPC as specified in clause 4.22.2.3 of 3GPP TS 23.502 [3].\nWhen establishing a PDN connection via 3GPP access connected to EPS, the UE can indicate that the PDN connection is to be used as a user-plane resource associated with:\na)\ta new MA PDU session; or\nb)\tan existing MA PDU session established in non-3GPP access connected to 5GCN.\nNOTE:\t\"Non-3GPP access\" is replaced with \"wireline access network\" connected to 5GCN if the UE is the 5G-RG.\nIf the UE does not support Ethernet PDN type or the Ethernet PDN type is not supported in EPC, there are following requirements:\na)\tthe UE cannot establish a PDN connection as the user plane resource associated with a new MA PDU session of Ethernet PDU session type; and\nb)\tthe UE can establish a PDN connection of non-IP PDN type as the user plane resource associated with an existing MA PDU session of Ethernet PDU session type.\nClause 5.3 specifies the procedure of MA PDU session establishment with 3GPP access connected to EPC and non-3GPP access connected to 5GCN.\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "4.8\tMA PDU session establishment with untrusted non-3GPP access connected to EPC and 3GPP access connected to 5GCN",
                    "description": "",
                    "summary": "",
                    "text_content": "A UE can establish an MA PDU session via 3GPP access connected to 5GCN and via untrusted non-3GPP access connected to EPC as specified in clause 4.22.2.4 of 3GPP TS 23.502 [3].\nWhen establishing a PDN connection to EPS via untrusted non-3GPP access network, the UE can indicate that the PDN connection is to be used as a user-plane resource associated with:\na)\ta new MA PDU session; or\nb)\tan existing MA PDU session established in 3GPP access connected to 5GCN.\nClause 5.3a specifies the session management procedures of MA PDU session established with untrusted non-3GPP access connected to EPC and 3GPP access connected to 5GCN.\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                }
            ]
        },
        {
            "title": "5\tATSSS control procedures",
            "description": "",
            "summary": "",
            "tables": [],
            "figures_meta_data": [],
            "subsections": [
                {
                    "title": "5.1\tIntroduction",
                    "description": "",
                    "summary": "",
                    "text_content": "The ATSSS control procedures include:\na)\tmulti-access PDU connectivity service procedures (see clause 5.2);\nb)\tmulti-access PDU connectivity over E-UTRAN and non-3GPP access network (see clause 5.3); and\nc)\tperformance measurement function protocol procedures (see clause 5.4).\nIn clause 5.2, multi-access PDU connectivity service procedures include following management procedures:\na)\tactivation of multi-access PDU connectivity service;\nb)\tre-activation of user-plane resources;\nc)\trelease of user-plane resources;\nd)\tupdating ATSSS parameters;\ne)\tconverting PDU session transferred from EPS to MA PDU session; and\nf)\tPDU session establishment with network modification to MA PDU session.\nIn clause 5.3, the multi-access PDU connectivity procedures over E-UTRAN and non-3GPP access network are specified.\nIn clause 5.4, performance measurement function protocol procedures are performed by exchanges of PMF protocol messages between the PMF in a UE and the PMF in the UPF over the user plane. For MA PDU sessions of IPv4, IPv6, or IPv4v6 PDU session type, the PMF protocol messages are transported using UDP. For MA PDU sessions of Ethernet PDU session type, the PMF protocol messages are transported using Ethernet frames. The protocol stacks of the PMF protocol are specified in clause 5.32.5.4 of 3GPP TS 23.501 [2].\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "5.2\tMulti-access PDU connectivity service",
                    "description": "",
                    "summary": "",
                    "text_content": "",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": [
                        {
                            "title": "5.2.1\tActivation of multi-access PDU connectivity service",
                            "text_content": "Activating multi-access PDU connectivity service refers to the establishment of user-plane resources on both 3GPP access and non-3GPP access:\na)\tif the UE is registered over both 3GPP access and non-3GPP access in the same PLMN, the UE shall initiate the UE-requested PDU session establishment procedure as specified in clause 6.4.1.2 of 3GPP TS 24.501 [6] over a selected access, either 3GPP access or non-3GPP access. Over which access to initiate this UE-requested PDU session establishment procedure is UE implementation specific. When the UE receives the PDU SESSION ESTABLISHMENT ACCEPT message including the ATSSS container IE as specified in clause 6.4.1.3 of 3GPP TS 24.501 [6], the UE shall consider that the MA PDU session has been established and the user plane resources are successfully established on the selected access. When the user plane resources are established on the access other than the selected access (e.g. received lower layer indication in 3GPP access or established user plane IPsec SA in untrusted non-3GPP access), the UE shall consider the user plane resources are established on both;\nNOTE:\tIf the UE receives the PDU SESSION ESTABLISHMENT ACCEPT message including the ATSSS container IE and fails to receive user plane resources established on the access other than the selected access, upon an implementation specific timer expiry the UE re-initiates the UE-requested PDU session establishment procedure over the access other than the selected access, in order to establish user plane resources on the access other than the selected access.\nb)\tif the UE is registered over both 3GPP access and non-3GPP access in different PLMNs, the UE shall initiate the UE-requested PDU session establishment procedure as specified in clause 6.4.1.2 of 3GPP TS 24.501 [6] over 3GPP access and non-3GPP access sequentially. Over which access to first initiate the UE-requested PDU session establishment procedure is UE implementation specific. When the UE receives the PDU SESSION ESTABLISHMENT ACCEPT message including the ATSSS container IE as specified in clause 6.4.1.3 of 3GPP TS 24.501 [6] over the selected access, the UE shall consider that the MA PDU session has been established and the user plane resources of the MA PDU session on this access are successfully established. The UE shall then initiate the UE-requested PDU session establishment procedure with the same PDU session ID, as specified in clause 6.4.1.2 of 3GPP TS 24.501 [6] over the other access, in order to establish user plane resources on the other access for the MA PDU session. If the UE receives the PDU SESSION ESTABLISHMENT ACCEPT message as specified in clause 6.4.1.3 of 3GPP TS 24.501 [6] over the other access, the UE shall consider that the user plane resources of the MA PDU session have been established on both 3GPP access and non-3GPP access; or\nc)\tif the UE is registered to a PLMN over only one access, either 3GPP access or non-3GPP access, the UE shall initiate the UE-requested PDU session establishment procedure as specified in clause 6.4.1.2 of 3GPP TS 24.501 [6] over this access. When the UE receives the PDU SESSION ESTABLISHMENT ACCEPT message including the ATSSS container IE as specified in clause 6.4.1.3 of 3GPP TS 24.501 [6] over the access, the UE shall consider that the MA PDU session has been established and the user plane resources of the MA PDU session on this access are successfully established. When the UE at a later point in time registers over the other access, either in the same PLMN or in a different PLMN, the UE shall initiate the UE-requested PDU session establishment procedure with the same PDU session ID as specified in clause 6.4.1.2 of 3GPP TS 24.501 [6] over the other access in order to establish user plane resources on the other access for the MA PDU session. If the UE receives the PDU SESSION ESTABLISHMENT ACCEPT message as specified in clause 6.4.1.3 of 3GPP TS 24.501 [6] over the other access, the UE shall consider that the user plane resources of the MA PDU session have been established over both 3GPP access and non-3GPP access.\nIf the UE is in the non-allowed area, the UE shall not initiate a PDU session establishment procedure for an MA PDU session over the 3GPP access. It may still initiate a PDU session establishment procedure for an MA PDU session over the non-3GPP access other than wireline access network, however the network shall not establish user plane resources for the 3GPP access if the UE is in the non-allowed area. The handling of non-allowed area when using wireline access is described in 3GPP TS 23.316 [4].\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "5.2.2\tRe-activation of user-plane resources",
                            "text_content": "In order to re-establish the user-plane resources of an MA PDU session:\na)\tif the UE requests re-establishment of the user-plane resources of the MA PDU session over 3GPP access which were released, the UE shall include the Uplink data status IE indicating the related MA PDU session,\n1)\tin the REGISTRATION REQUEST message when the registration procedure for mobility and periodic registration update is initiated by the UE over 3GPP access as specified in clause 5.5.1.3.2 of 3GPP TS 24.501 [6]; or\n2)\tin the SERVICE REQUEST message when the service request procedure initiated by the UE over 3GPP access as specified in clause 5.6.1.2 of 3GPP TS 24.501 [6];\nb)\tif the UE requests re-establishment of the user-plane resources of the MA PDU session over non-3GPP access which were released and the UE is in 5GMM-CONNECTED mode over non-3GPP access, the UE shall include the Uplink data status IE indicating the related MA PDU session,\n1)\tin the REGISTRATION REQUEST message when the registration procedure for mobility registration update is initiated by the UE over non-3GPP access as specified in clause 5.5.1.3.2 of 3GPP TS 24.501 [6]; or\n2)\tin the SERVICE REQUEST message when the service request procedure initiated by the UE over non-3GPP access as specified in clause 5.6.1.2 of 3GPP TS 24.501 [6];\nc)\tif the UE requests re-establishment of the user-plane resources of the MA PDU session over non-3GPP access which were released and the UE is in 5GMM-IDLE mode over non-3GPP access,\n1)\tfor untrusted non-3GPP access, the UE shall perform the procedure as specified in clause 7.3 of 3GPP TS 24.502 [7] and include the Uplink data status IE indicating the related MA PDU session in the SERVICE REQUEST message when the service request procedure initiated by the UE over non-3GPP access as specified in clause 5.6.1.2 of 3GPP TS 24.501 [6]; or\n2)\tfor trusted non-3GPP access, the UE shall perform the procedures as specified in clause 7.3A of 3GPP TS 24.502 [7] and include the Uplink data status IE indicating the related MA PDU session in the SERVICE REQUEST message when the service request procedure initiated by the UE over non-3GPP access as specified in clause 5.6.1.2 of 3GPP TS 24.501 [6]; and\nd)\tif the network requests re-establishment of the user-plane resources of the MA PDU session, the UE shall initiate the service request procedure by sending a SERVICE REQUEST message to the AMF upon receipt of the paging request as specified in clause 5.6.1.2 of 3GPP TS 24.501 [6] or shall follow the procedure specified in clause 5.6.3 of 3GPP TS 24.501 [6] upon receipt of a NOTIFICATION message.\nIf the UE is in the non-allowed area, the UE shall not request re-establishment of the user plane resources of the MA PDU session for the 3GPP access. It may still request re-establishment of the user plane resources of the MA PDU session for the non-3GPP access.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "5.2.3\tRelease of user-plane resources",
                            "text_content": "In order to release the MA PDU session:\na)\tthe SMF shall initiate the network-requested PDU session release procedure as specified in clause 6.3.3.2 of 3GPP TS 24.501 [6] over 3GPP access or non-3GPP access, by sending the PDU SESSION RELEASE COMMAND message to the UE. Over which access to initiate this network-requested PDU session release procedure is SMF implementation specific; or\nb)\tthe UE shall initiate the UE-requested PDU session release procedure as specified in clause 6.4.3.2 of 3GPP TS 24.501 [6] over 3GPP access or non-3GPP access by sending the PDU SESSION RELEASE REQUEST message to the network. Over which access to initiate this UE-requested PDU session release procedure is UE implementation specific.\nWhen the UE receives the PDU SESSION RELEASE COMMAND message, the UE shall behave as specified in 3GPP TS 24.501 [6] clause 6.3.3.3.\nIn order to release the MA PDU session's user-plane resources on either 3GPP access or non-3GPP access, the SMF shall initiate the network-requested PDU session release procedure as specified in clause 6.3.3.2 of 3GPP TS 24.501 [6] over 3GPP access or non-3GPP access, by sending the PDU SESSION RELEASE COMMAND message with the Access type IE indicating of which access the user-plane resources are released to the UE, e.g. when the AMF indicates to the SMF that the UE is deregistered over an access or when S-NSSAI of the MA PDU session is not in the Allowed NSSAI over an access. Over which access to initiate this network-requested PDU session release procedure is SMF implementation specific. When the UE receives the PDU SESSION RELEASE COMMAND message, the UE shall behave as specified in 3GPP TS 24.501 [6] clause 6.3.3.3, and consider that the user plane resources of the MA PDU session have been released on the access indicated in the Access type IE.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "5.2.4\tUpdating ATSSS parameters",
                            "text_content": "An SMF may update ATSSS parameters, i.e. the ATSSS rules, and the MAI, according to the procedure for the network-requested PDU session modification as specified in clause 6.3.2 of 3GPP TS 24.501 [6] over 3GPP access network or non-3GPP access network. The ATSSS rules may be individually added, deleted or updated using the ATSSS rule ID and ATSSS rule operation. The SMF may change the access network over which the traffic of the GBR QoS flow is transmitted by updating the UE's ATSSS rules. The SMF may change the QoS flows over which access performance measurements may be performed by updating the MAI.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "5.2.5\tConverting PDU session transferred from EPS to MA PDU session",
                            "text_content": "When an ATSSS capable UE has transferred a PDN connection from S1 mode to N1 mode in the network supporting N26 interface and the related URSP or UE local configuration does not mandate the PDU session shall be established over a single access:\na)\tif the UE is registered over both 3GPP access and non-3GPP access in the same PLMN, and the S-NSSAI associated with the PDU session over 3GPP access is included in the allowed NSSAI of non-3GPP access, the UE may initiate the UE-requested PDU session modification procedure by sending the PDU SESSION MODIFICATION REQUEST message including 5GSM capability IE over 3GPP access as specified in clause 6.4.2.2 of 3GPP TS 24.501 [6]. The UE may set the Request type IE to either:\n1)\t\"modification request\" and include the MA PDU session information IE set to \"MA PDU session network upgrade is allowed\" as defined in clause 9.11.3.31A of 3GPP TS 24.501 [6]; or\n2)\t\"MA PDU request\"\nin the UL NAS TRANSPORT message as specified in clause 8.2.10 of 3GPP TS 24.501 [6]. When the UE receives the PDU SESSION MODIFICATION COMMAND message including the ATSSS container IE as specified in clause 6.4.2.3 of 3GPP TS 24.501 [6], the UE shall consider that the requested PDU session was converted by the network to an MA PDU session and the user plane resources are successfully established on 3GPP access. When the user plane resources are established on the non-3GPP access (e.g., received established user plane IPsec SA in untrusted non-3GPP access), the UE shall consider the user plane resources are established on both accesses;\nNOTE:\tIf the UE receives the PDU SESSION MODIFICATION COMMAND message including the ATSSS container IE and fails to receive user plane resources established on the non-3GPP access, upon an implementation specific timer expiry the UE initiates the UE-requested PDU session establishment procedure over the non-3GPP access, in order to establish user plane resources on the non-3GPP access.\nb)\tif the UE is registered over both 3GPP access and non-3GPP access in different PLMNs, the UE may initiate the UE-requested PDU session modification procedure by sending the PDU SESSION MODIFICATION REQUEST message including 5GSM capability IE over 3GPP access as specified in clause 6.4.2.2 of 3GPP TS 24.501 [6]. The UE may set the Request type IE to either:\n1)\t\"modification request\" and include the MA PDU session information IE set to \"MA PDU session network upgrade is allowed\" as defined in clause 9.11.3.31A of 3GPP TS 24.501 [6]; or\n2)\t\"MA PDU request\"\nin the UL NAS TRANSPORT message as specified in clause 8.2.10 of 3GPP TS 24.501 [6]. When the UE receives the PDU SESSION MODIFICATION COMMAND message including the ATSSS container IE as specified in clause 6.4.2.3 of 3GPP TS 24.501 [6], the UE shall consider that the requested PDU session was converted by the network to an MA PDU session and the user plane resources are successfully established on 3GPP access. The UE shall then initiate the UE-requested PDU session establishment procedure with the same PDU session ID, as specified in clause 6.4.1.2 of 3GPP TS 24.501 [6] over non-3GPP access, in order to establish user plane resources on the other access for the MA PDU session; or\nc)\tif the UE is registered over 3GPP access only, the UE may initiate the UE-requested PDU session modification procedure by sending the PDU SESSION MODIFICATION REQUEST message including 5GSM capability IE over 3GPP access as specified in clause 6.4.2.2 of 3GPP TS 24.501 [6], The UE may set the Request type IE to either:\n1)\t\"modification request\" and include the MA PDU session information IE set to \"MA PDU session network upgrade is allowed\" as defined in clause 9.11.3.31A of 3GPP TS 24.501 [6]; or\n2)\t\"MA PDU request\"\nin the UL NAS TRANSPORT message as specified in clause 8.2.10 of 3GPP TS 24.501 [6]. When the UE receives the PDU SESSION MODIFICATION COMMAND message including the ATSSS container IE as specified in clause 6.4.2.3 of 3GPP TS 24.501 [6], the UE shall consider that the requested PDU session was converted by the network to an MA PDU session and the user plane resources are successfully established on 3GPP access. When the UE at a later point in time registers over the non-3GPP access, either in the same PLMN or in a different PLMN, the UE shall initiate the UE-requested PDU session establishment procedure with the same PDU session ID as specified in clause 6.4.1.2 of 3GPP TS 24.501 [6] over non-3GPP access in order to establish user plane resources on non-3GPP access for the MA PDU session.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "5.2.6\tPDU session establishment with network modification to MA PDU session",
                            "text_content": "When an ATSSS capable UE establishes a new PDU session and the related URSP or UE local configuration does not mandate the PDU session shall be established over a single access:\na)\tif the UE is registered over both 3GPP access and non-3GPP access in the same PLMN and the UE initiates the UE-requested PDU session establishment procedure over a selected access, either 3GPP access or non-3GPP access, the UE may include the MA PDU session information IE in the UL NAS TRANSPORT message and set the IE to \"MA PDU session network upgrade is allowed\" as defined in clause 9.11.3.31A of 3GPP TS 24.501 [6]. When the UE receives the PDU SESSION ESTABLISHMENT ACCEPT message including the ATSSS container IE as specified in clause 6.4.1.3 of 3GPP TS 24.501 [6], the UE shall consider that the requested PDU session is established as an MA PDU session and the user plane resources are successfully established on the selected access. When the user plane resources are established on the access other than the selected access (e.g. received lower layer indication in 3GPP access or established user plane IPsec SA in untrusted non-3GPP access), the UE shall consider the user plane resources are successfully established on both accesses;\nNOTE:\tIf the UE receives the PDU SESSION ESTABLISHMENT ACCEPT message including the ATSSS container IE and fails to receive user plane resources established on the access other than the selected access, upon an implementation specific timer expiry the UE re-initiates the UE-requested PDU session establishment procedure over the access other than the selected access, in order to establish user plane resources on the access other than the selected access.\nb)\tif the UE is registered over both 3GPP access and non-3GPP access in different PLMNs and the UE initiates the UE-requested PDU session establishment procedure over 3GPP access or non-3GPP access, the UE may include the MA PDU session information IE in the UL NAS TRANSPORT message and shall set the IE to \"MA PDU session network upgrade is allowed\" as defined in clause 9.11.3.31A of 3GPP TS 24.501 [6]. When the UE receives the PDU SESSION ESTABLISHMENT ACCEPT message including the ATSSS container IE as specified in clause 6.4.1.3 of 3GPP TS 24.501 [6] over the access, the UE shall consider that the requested PDU session is established as an MA PDU session and the user plane resources are established on this access. The UE shall then initiate the UE-requested PDU session establishment procedure with the same PDU session ID, as specified in clause 6.4.1.2 of 3GPP TS 24.501 [6] over the other access, in order to establish user plane resources on the other access for the MA PDU session. If the UE receives the PDU SESSION ESTABLISHMENT ACCEPT message including the ATSSS container IE as specified in clause 6.4.1.3 of 3GPP TS 24.501 [6] over the other access, the UE shall consider that the user plane resources of the MA PDU session have been established on both 3GPP access and non-3GPP access; or\nc)\tif the UE is registered to a PLMN over only one access, either 3GPP access or non-3GPP access, and the UE requests to establish a PDU session over this access, the UE may include the MA PDU session information IE in the UL NAS TRANSPORT message and shall set the IE to \"MA PDU session network upgrade is allowed\" as defined in clause 9.11.3.31A of 3GPP TS 24.501 [6]. When the UE receives the PDU SESSION ESTABLISHMENT ACCEPT message including the ATSSS container IE as specified in clause 6.4.1.3 of 3GPP TS 24.501 [6] over the access, the UE shall consider that the requested PDU session is established as an MA PDU session and the user plane resources are established on this access. When the UE at a later point in time registers over the other access, either in the same PLMN or in a different PLMN, the UE shall initiate the UE-requested PDU session establishment procedure with the same PDU session ID as specified in clause 6.4.1.2 of 3GPP TS 24.501 [6] over the other access in order to establish user plane resources on the other access for the MA PDU session. If the UE receives the PDU SESSION ESTABLISHMENT ACCEPT message including the ATSSS container IE as specified in clause 6.4.1.3 of 3GPP TS 24.501 [6] over the other access, the UE shall consider that the user plane resources of the MA PDU session have been established on both 3GPP access and non-3GPP access.\n",
                            "figures_meta_data": [],
                            "tables": []
                        }
                    ]
                },
                {
                    "title": "5.3\tMulti-access PDU connectivity over E-UTRAN and non-3GPP access network",
                    "description": "",
                    "summary": "",
                    "text_content": "",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": [
                        {
                            "title": "5.3.0\tGeneral",
                            "text_content": "If the UE supports MA PDU session and procedures for PDN connection establishment as specified in 3GPP TS 24.301 [10], then the UE shall also support handling as described in clauses 5.3.1 and 5.3.2.\nNOTE:\tThe PDN connection established as a user plane resource of an MA PDU session is not applicable for CIoT EPS optimizations in this release of specification.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "5.3.1\tUE establishing a PDN connection as a user-plane resource of an MA PDU session to be established",
                            "text_content": "In order to establish a PDN connection as a user-plane resource of an MA PDU session to be established, the UE shall initiate the UE requested PDN connectivity procedure according to 3GPP TS 24.301 [10].\nIn the PDN CONNECTIVITY REQUEST message or, when applicable, in the ESM INFORMATION RESPONSE message, of the UE requested PDN connectivity procedure:\na)\tthe UE shall set the request type to \"initial request\" as specified in 3GPP TS 24.301 [10];\nNOTE 1:\tAccording to 3GPP TS 24.301 [10], a newly generated PDU session ID is included in the protocol configuration options IE or the extended protocol configuration options IE of the PDN CONNECTIVITY REQUEST message with the request type \"initial request\".\nb)\tthe UE shall set the PDN Type IE to \"IPv4\", \"IPv6\", \"IPv4v6\" or \"Ethernet\"; and\nc)\tin the protocol configuration options or extended protocol configuration options IE of the PDN CONNECTIVITY REQUEST message, the UE shall include the ATSSS request PCO parameter. In the ATSSS request PCO parameter:\n1)\tif the UE supports ATSSS Low-Layer functionality with any steering mode (i.e., any steering mode allowed for ATSSS Low-Layer functionality) as specified in clause 5.32.6 of 3GPP TS 23.501 [2], the UE shall set the ATSSS-ST field to \"ATSSS Low-Layer functionality with any steering mode allowed for ATSSS-LL supported\";\nNOTE 2:\tThe ATSSS Low-Layer functionality cannot be used together with the redundant steering mode. When the UE indicates that it is capable of supporting the ATSSS Low-Layer functionality with any steering mode, it implies that the UE supports the ATSSS Low-Layer functionality with any steering mode except the redundant steering mode.\n2)\tif the UE supports MPTCP functionality with any steering mode and ATSSS-LL functionality with only active-standby steering mode as specified in clause 5.32.6 of 3GPP TS 23.501 [2], the UE shall set the ATSSS-ST field to \"MPTCP functionality with any steering mode and ATSSS-LL functionality with only active-standby steering mode supported\";\n3)\tif the UE supports MPTCP functionality with any steering mode and ATSSS-LL functionality with any steering mode (i.e., any steering mode allowed for ATSSS-LL) as specified in clause 5.32.6 of 3GPP TS 23.501 [2], the UE shall set the ATSSS-ST field to \"MPTCP functionality with any steering mode and ATSSS-LL functionality with any steering mode allowed for ATSSS-LL supported\";\n4)\tif the UE supports MPQUIC functionality with any steering mode and ATSSS-LL functionality with only active-standby steering mode as specified in clause 5.32.6 of 3GPP TS 23.501 [2], the UE shall set the ATSSS-ST field to \"MPQUIC functionality with any steering mode and ATSSS-LL functionality with only active-standby steering mode supported\";\n5)\tif the UE supports MPQUIC functionality with any steering mode and ATSSS-LL functionality with any steering mode (i.e., any steering mode allowed for ATSSS Low-Layer functionality) as specified in clause 5.32.6 of 3GPP TS 23.501 [2], the UE shall set the ATSSS-ST field to \"MPQUIC functionality with any steering mode and ATSSS-LL functionality with any steering mode allowed for ATSSS-LL supported\";\n6)\tif the UE supports MPTCP functionality with any steering mode, MPQUIC functionality with any steering mode and ATSSS-LL functionality with only active-standby steering mode as specified in clause 5.32.6 of 3GPP TS 23.501 [2], the UE shall set the ATSSS-ST field to \"MPTCP functionality with any steering mode, MPQUIC functionality with any steering mode and ATSSS-LL functionality with only active-standby steering mode supported\"; or\n7)\tif the UE supports MPTCP functionality with any steering mode, MPQUIC functionality with any steering mode and ATSSS-LL functionality with any steering mode (i.e., any steering mode allowed for ATSSS Low-Layer functionality) as specified in clause 5.32.6 of 3GPP TS 23.501 [2], the UE shall set the ATSSS-ST field to \"MPTCP functionality with any steering mode, MPQUIC functionality with any steering mode and ATSSS-LL functionality with any steering mode allowed for ATSSS-LL supported\".\nUpon receipt of an ACTIVATE DEFAULT EPS BEARER CONTEXT REQUEST message of a default EPS bearer context activation procedure as a response to the PDN CONNECTIVITY REQUEST message as specified in 3GPP TS 24.301 [10], the ACTIVATE DEFAULT EPS BEARER CONTEXT REQUEST message containing the extended protocol configuration options IE with the ATSSS response with the length of two octets PCO parameter:\na)\tthe UE shall consider that the MA PDU session is established based on parameters from the default EPS bearer context of the PDN connection, as follows:\n1)\tthe PDN type of the default EPS bearer context shall be mapped to the PDU session type of the MA PDU session as follows:\ni)\tif the PDN type is \"IPv4\", the PDU session type is set to \"IPv4\";\nii)\tif the PDN type is \"IPv6\", the PDU session type is set to \"IPv6\";\niii)\tif the PDN type is \"IPv4v6\", the PDU session type is set to \"IPv4v6\"; or\niv)\tif the PDN type is \"Ethernet\", the PDU session type is set to \"Ethernet\";\n2)\tthe PDN address of the default EPS bearer context shall be mapped to PDU address of the MA PDU session;\n3)\tthe APN of the default EPS bearer context shall be mapped to the DNN of the MA PDU session;\n4)\tthe PDU session identity of the MA PDU session shall be set to the PDU session identity included by the UE in the Protocol configuration options IE or Extended protocol configuration options IE in the PDN CONNECTIVITY REQUEST message;\n5)\tthe S-NSSAI of the MA PDU session shall be set to the S-NSSAI included by the network in the Protocol configuration options IE or Extended protocol configuration options IE in the ACTIVATE DEFAULT EPS BEARER REQUEST message, if the PDN connection is a non-emergency PDN connection;\n6)\tthe SSC mode of the MA PDU session shall be set to \"SSC mode 1\";\n7)\tstate of the PDU session shall be set to PDU SESSION ACTIVE; and\n8)\tthe ESM cause of the default EPS bearer context, if any, shall be mapped to the 5GSM cause of the MA PDU session as follows:\ni)\tif the ESM cause is #50 \"PDN type IPv4 only allowed\", the 5GSM cause of the MA PDU session is set to #50 \"PDU session type IPv4 only allowed\"; or\nii)\tif the ESM cause is #51 \"PDN type IPv6 only allowed\", the 5GSM cause of the MA PDU session is set to #51 \"PDU session type IPv6 only allowed\";\nand that the PDN connection is established as a user-plane resource of the MA PDU session;\nb)\tif the network steering functionalities information is included in the ATSSS response with the length of two octets PCO parameter, the UE shall use the network steering functionalities information; and\nc)\tif the measurement assistance information is included in the ATSSS response with the length of two octets PCO parameter, the UE shall use the measurement assistance information.\nUpon receipt of:\na)\ta PDN CONNECTIVITY REJECT message as a response to the PDN CONNECTIVITY REQUEST message as specified in 3GPP TS 24.301 [10]; or\nb)\tan ACTIVATE DEFAULT EPS BEARER CONTEXT REQUEST message of a default EPS bearer context activation procedure as a response to the PDN CONNECTIVITY REQUEST message as specified in 3GPP TS 24.301 [10] without the extended protocol configuration options IE containing the ATSSS response with the length of two octets PCO parameter;\nthe UE shall consider that the MA PDU session is not established and the PDN connection is not established as a user-plane resource of the MA PDU session.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "5.3.2\tUE establishing a PDN connection as a user-plane resource of an already established MA PDU session",
                            "text_content": "In order to establish a PDN connection as a user-plane resource of an already established MA PDU session, the UE shall initiate the UE requested PDN connectivity procedure according to 3GPP TS 24.301 [10].\nIn the PDN CONNECTIVITY REQUEST message or, when applicable, in the ESM INFORMATION RESPONSE message, of the UE requested PDN connectivity procedure:\na)\tthe UE shall set the request type to \"handover\" as specified in 3GPP TS 24.301 [10];\nNOTE 1:\tAccording to 3GPP TS 24.301 [10], the PDU session ID of the already established MA PDU session is included in the protocol configuration options IE or the extended protocol configuration options IE of the PDN CONNECTIVITY REQUEST message with the request type \"handover\".\nb)\tthe UE shall set the PDN Type IE to \"IPv4\", \"IPv6\", \"IPv4v6\", \"Ethernet\" or \"non-IP\"; and\nNOTE 2:\tIf the UE does not support Ethernet PDN type or the Ethernet PDN type is not supported in EPC, the UE sets \"non-IP\" PDN type when the established MA PDU session is Ethernet PDU session type.\nc)\tin the protocol configuration options or extended protocol configuration options IE, the UE shall include the ATSSS request PCO parameter.\nUpon receipt of the ACTIVATE DEFAULT EPS BEARER CONTEXT REQUEST message of a default EPS bearer context activation procedure as a response to the PDN CONNECTIVITY REQUEST message as specified in 3GPP TS 24.301 [10], the UE shall consider that the PDN connection is established as a user-plane resource of the MA PDU session.\nUpon receipt of a PDN CONNECTIVITY REJECT message as specified in 3GPP TS 24.301 [10], the UE shall consider that the PDN connection is not established as a user-plane resource of the MA PDU session.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "5.3.3\tRe-activation of user-plane resources",
                            "text_content": "For an MA PDU session with a PDN connection established as a user-plane resource:\na)\tif the UE in EMM-IDLE mode has pending user data to be sent over the PDN connection, the UE shall:\n1)\tset the \"active\" flag in the EPS update type IE in the TRACKING AREA UPDATE REQUEST message when the normal and periodic tracking area updating procedure is initiated by the UE as specified in clause 5.5.3.2.2 of 3GPP TS 24.301 [10]; or\n2)\tinitiate service request procedure as specified in clause 5.6.1.2.1 of 3GPP TS 24.301 [10];\nb)\tif the UE requests re-establishment of the user-plane resources of the MA PDU session over non-3GPP access which were established but released, the UE shall initiate registration procedure for mobility registration update or service request procedure as specified in clause 5.2.2 bullets b) and c); or\nc)\tif the UE is in EMM-IDLE mode and the network has pending user data to be sent over the PDN connection, the UE shall initiate the service request procedure by sending a SERVICE REQUEST message to the MME upon receipt of the paging request as specified in clause 5.6.1.2.1 of 3GPP TS 24.301 [10].\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "5.3.4\tRelease of user-plane resource(s)",
                            "text_content": "In order to release an MA PDU session which has a PDN connection established as a user-plane resource:\na)\tto release the PDN connection established as a user-plane resource of the MA PDU session:\n1)\tthe network shall:\ni)\tinitiate the network initiated detach procedure as specified in clause 5.5.2.3 of 3GPP TS 24.301 [10] by sending the DETACH REQUEST message to the UE if EMM-REGISTERED without PDN connection is not supported by the UE and the MME and the PDN connection is the last PDN connection; or\nii)\tinitiate the EPS bearer context deactivation procedure as specified in clause 6.4.4 of 3GPP TS 24.301 [10] by sending the DEACTIVATE EPS BEARER CONTEXT REQUEST message to the UE if EMM-REGISTERED without PDN connection is supported by the UE and the MME or the PDN connection is not the last PDN connection; or\n2)\tthe UE shall:\ni)\tinitiate the UE initiated detach procedure as specified in clause 5.5.2.2 of 3GPP TS 24.301 [10] by sending the DETACH REQUEST message to the network if EMM-REGISTERED without PDN connection is not supported by the UE and the MME and the PDN connection is the last PDN connection; or\nii)\tinitiate the UE requested PDN disconnect procedure as specified in clause 6.5.2 of 3GPP TS 24.301 [10] by sending the PDN DISCONNECT REQUEST message to the network if EMM-REGISTERED without PDN connection is supported by the UE and the MME or the PDN connection is not the last PDN connection; and\nb)\tto release the user-plane resources, if any, established on non-3GPP access of the MA PDU session:\n1)\tthe network shall initiate the network-requested PDU session release procedure as specified in clause 6.3.3.2 of 3GPP TS 24.501 [6] by sending the PDU SESSION RELEASE COMMAND message with the Access type IE indicating \"Non-3GPP access\" or without including the Access type IE to the UE; or\n2)\tthe UE shall initiate the UE-requested PDU session release procedure as specified in clause 6.4.3.2 of 3GPP TS 24.501 [6] by sending the PDU SESSION RELEASE REQUEST message to the network.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "5.3.5\tUpdating ATSSS parameters",
                            "text_content": "A PGW-C+SMF may update ATSSS parameters as specified in clause 5.2.4 over non-3GPP access. The PGW-C+SMF may also include the updated MAI or the updated network steering functionalities information or both in the extended protocol configuration options IE with the ATSSS response with the length of two octets PCO parameter. The updated MAI or the updated network steering functionalities information or both in the extended protocol configuration options IE with the ATSSS response with the length of two octets PCO parameter is sent to the UE during the EPS bearer context modification according to clause 6.4.3 of 3GPP TS 24.301 [10].\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "5.3.6\tA/Gb mode or Iu mode Interworking",
                            "text_content": "Upon inter-system change from S1 mode to A/Gb mode or Iu mode, for a PDN connection which was established as a user-plane resource of an MA PDU session:\na)\tif the SM activates a PDP context using parameters from the default EPS bearer context of the PDN connection as specified clause 6.1.4 of 3GPP TS 24.301 [10]:\n1)\tthe SMF can initiate the network-requested PDU session release procedure over non-3GPP access as specified in clause 6.3.3.2 of 3GPP TS 24.501 [6] if the user plane resources are established on non-3GPP access for this MA PDU session, or perform a local release of the MA PDU session; and\n2)\tthe UE performs a local release of the MA PDU session.\nNOTE 1:\tIf the UE receives from the network a PDU SESSION RELEASE COMMAND message which indicates to release the MA PDU session over non-3GPP access and the UE has already performed or is performing a local release of the MA PDU session, the error handling as specified in clause 6.3.3.6 of 3GPP TS 24.501 [6] is applied.\nNOTE 2:\tIf the SM does not activate a PDP context using parameters from the default EPS bearer context of the PDN connection and the user plane resources are established on non-3GPP access for this MA PDU session, the SMF initiates the network-requested PDU session modification procedure as specified in clause 6.3.2.2 of 3GPP TS 24.501 [6] over non-3GPP access if the SMF decides to move the traffic of the MA PDU session to non-3GPP access, or the SMF initiates the network-requested PDU session release procedure as specified in clause 6.3.3.2 of 3GPP TS 24.501 [6] over non-3GPP access without including the Access type IE or with the Access type IE indicating \"Non-3GPP access\".\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "5.3.7\tAbnormal cases in the UE",
                            "text_content": "The following abnormal cases can be identified:\na)\tFor an MA PDU session already established over non-3GPP access, upon receipt of the ACTIVATE DEFAULT EPS BEARER CONTEXT REQUEST message, if any of the following conditions is not fulfilled:\n1)\tthe \"PDN type value\" of the PDN address IE is set to\ni)\t\"IPv4\" and the stored PDU session type of the MA PDU session is set to \"IPv4\";\nii)\t\"IPv6\" and the stored PDU session type of the MA PDU session is set to \"IPv6\";\niii)\t\"IPv4v6\" and the stored PDU session type of the MA PDU session is set to \"IPv4v6\"; or\niv)\t\"Ethernet\" and the stored PDU session type of the MA PDU session is set to \"Ethernet\";\n2)\tthe PDN address in \"PDN address information\" of the PDN address IE is the same as the stored PDU address of the MA PDU session;\n3)\tthe stored selected SSC mode of the MA PDU session is set to \"SSC mode 1\";\n4)\tthe ESM cause IE is:\ni)\tnot included and there is no stored 5GSM cause of the MA PDU session;\nii)\tset to #50 \"PDN type IPv4 only allowed\" and the stored 5GSM cause of the MA PDU session is set to #50 \"PDU session type IPv4 only allowed\";\niii)\tset to #51 \"PDN type IPv6 only allowed\" and the stored 5GSM cause of the MA PDU session is set to #51 \"PDU session type IPv6 only allowed\"; or\niv)\tset to #52 \"single address bearers only allowed\" and there is no stored 5GSM cause of the MA PDU session;\n5)\tthe S-NSSAI is included by the network in the Protocol configuration options IE or Extended protocol configuration options IE and is the same as the stored S-NSSAI value of the MA PDU session; and\n6)\tthe APN maps to the same DNN as the stored DNN of the MA PDU session;\nthe UE shall send ACTIVATE DEFAULT EPS BEARER CONTEXT REJECT message to the network as specified in clause 6.4.1.4 of 3GPP TS 24.301 [10], may perform a local release of the MA PDU session and the registration procedure for mobility and periodic registration update with a REGISTRATION REQUEST message including the PDU session status IE over non-3GPP access.\n",
                            "figures_meta_data": [],
                            "tables": []
                        }
                    ]
                },
                {
                    "title": "5.3a\tMulti-access PDU connectivity over untrusted non-3GPP access network to EPC and 3GPP access to 5GCN",
                    "description": "",
                    "summary": "",
                    "text_content": "",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": [
                        {
                            "title": "5.3a.1\tGeneral",
                            "text_content": "If the UE supports MA PDU session and procedures for PDN connection establishment over untrusted non-3GPP access network as specified in 3GPP TS 24.302 [17], then the UE shall also support handling as described in clause 5.3a.2 and clause 5.3a.3.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "5.3a.2\tUE establishing a PDN connection over untrusted non-3GPP access network as a user-plane resource of an MA PDU session to be established",
                            "text_content": "In order to establish a PDN connection over untrusted non-3GPP access network as a user-plane resource of an MA PDU session to be established, the UE shall initiate the IPsec tunnel establishment procedure using the IKEv2 protocol according to 3GPP TS 24.302 [17].\nIn the IKE_AUTH request message to the ePDG:\na)\tthe UE shall provide an indication about Attach Type, which indicates Initial Attach as specified in 3GPP TS 24.302 [17]; and\nNOTE 1:\tAccording to 3GPP TS 24.302 [17], a newly generated PDU session ID is included in N1_MODE_CAPABILITY Notify payload.\nb)\tthe UE shall include ATSSS_REQUEST Notify payload as specified in clause 8.2.9.20 of 3GPP TS 24.302 [17] and:\n1)\tif the UE supports ATSSS Low-Layer functionality with any steering mode (i.e., any steering mode allowed for ATSSS Low-Layer functionality) as specified in clause 5.32.6 of 3GPP TS 23.501 [2], the UE shall set the ATSSS request information field of the ATSSS_REQUEST Notify payload to \"ATSSS Low-Layer functionality with any steering mode allowed for ATSSS-LL supported\";\n2)\tif the UE supports MPTCP functionality with any steering mode and ATSSS-LL functionality with only active-standby steering mode as specified in clause 5.32.6 of 3GPP TS 23.501 [2], the UE shall set the ATSSS request information field of ATSSS_REQUEST Notify payload to \"MPTCP functionality with any steering mode and ATSSS-LL functionality with only active-standby steering mode supported\";\n3)\tif the UE supports MPTCP functionality with any steering mode and ATSSS-LL functionality with any steering mode (i.e., any steering mode allowed for ATSSS Low-Layer functionality) as specified in clause 5.32.6 of 3GPP TS 23.501 [2], the UE shall set the ATSSS request information field of ATSSS_REQUEST Notify payload to \"MPTCP functionality with any steering mode and ATSSS-LL functionality with any steering mode allowed for ATSSS-LL supported\";\n4)\tif the UE supports MPQUIC functionality with any steering mode and ATSSS-LL functionality with only active-standby steering mode as specified in clause 5.32.6 of 3GPP TS 23.501 [2], the UE shall set the ATSSS request information field of ATSSS_REQUEST Notify payload to \"MPQUIC functionality with any steering mode and ATSSS-LL functionality with only active-standby steering mode supported\";\n5)\tif the UE supports MPQUIC functionality with any steering mode and ATSSS-LL functionality with any steering mode (i.e., any steering mode allowed for ATSSS Low-Layer functionality) as specified in clause 5.32.6 of 3GPP TS 23.501 [2], the UE shall set the ATSSS request information field of ATSSS_REQUEST Notify payload to \"MPQUIC functionality with any steering mode and ATSSS-LL functionality with any steering mode allowed for ATSSS-LL supported\";\n6)\tif the UE supports MPTCP functionality with any steering mode, MPQUIC functionality with any steering mode, and ATSSS-LL functionality with only active-standby steering mode as specified in clause 5.32.6 of 3GPP TS 23.501 [2], the UE shall set the ATSSS request information field of ATSSS_REQUEST Notify payload to \"MPTCP functionality with any steering mode, MPQUIC functionality with any steering mode and ATSSS-LL functionality with only active-standby steering mode supported\"; or\n7)\tif the UE supports MPTCP functionality with any steering mode, MPQUIC functionality with any steering mode, and ATSSS-LL functionality with any steering mode (i.e., any steering mode allowed for ATSSS Low-Layer functionality) as specified in clause 5.32.6 of 3GPP TS 23.501 [2], the UE shall set the ATSSS request information field of ATSSS_REQUEST Notify payload to \"MPTCP functionality with any steering mode, MPQUIC functionality with any steering mode and ATSSS-LL functionality with any steering mode allowed for ATSSS-LL supported\".\nUpon receipt of IKE_AUTH response message as specified in 3GPP TS 24.302 [17] containing the ATSSS_RESPONSE Notify payload:\na)\tthe UE shall consider that the MA PDU session is established based on parameters in the IKE_AUTH response message, as follows:\n1)\tthe PDN type shall be mapped to the PDU session type of the MA PDU session as follows:\ni)\tif the CFG_REPLY contains the INTERNAL_IP4_ADDRESS attribute, the PDU session type is set to \"IPv4\";\nii)\tif the CFG_REPLY contains the INTERNAL_IP6_SUBNET attribute or INTERNAL_IP6_ADDRESS attribute, the PDU session type is set to \"IPv6\"; or\niii)\tif the CFG_REPLY contains the INTERNAL_IP4_ADDRESS attribute and INTERNAL_IP6_SUBNET attributes, or the INTERNAL_IP4_ADDRESS attribute and INTERNAL_IP6_ADDRESS attribute, the PDU session type is set to \"IPv4v6\";\nNOTE 2:\tPDN connections with PDN type \"Ethernet\" or PDN type \"non-IP\" are not supported over ePDG.\n2)\tthe PDN address shall be mapped to PDU address of the MA PDU session;\n3)\tthe APN of the PDN connection shall be mapped to the DNN of the MA PDU session;\n4)\tthe PDU session identity of the MA PDU session shall be set to the PDU session identity included by the UE in the PDU Session ID field of the N1_MODE_CAPABILITY Notify payload in the IKE_AUTH request message;\n5)\tthe S-NSSAI of the MA PDU session shall be set to the S-NSSAI included by the network in the S-NSSAI Value field of the N1_MODE INFORMATION Notify payload in the IKE_AUTH response message, if the PDN connection is a non-emergency PDN connection;\n6)\tthe SSC mode of the MA PDU session shall be set to \"SSC mode 1\";\n7)\tstate of the PDU session shall be set to PDU SESSION ACTIVE; and\n8)\tthe Private Notify Message Status Types, if received, shall be mapped to the 5GSM cause of the MA PDU session as follows:\ni)\tif a PDN_TYPE_IPv4_ONLY_ALLOWED Notify payload is received, the 5GSM cause of the MA PDU session is set to #50 \"PDU session type IPv4 only allowed\"; or\nii)\tif a PDN_TYPE_IPv6_ONLY_ALLOWED Notify payload is received, the 5GSM cause of the MA PDU session is set to #51 \"PDU session type IPv6 only allowed\";\nand that the PDN connection over untrusted non-3GPP access network is established as a user-plane resource of the MA PDU session;\nb)\tif the network steering functionalities information is included in the ATSSS response information field of the ATSSS_RESPONSE Notify payload, the UE shall use the network steering functionalities information;\nc)\tif the measurement assistance information is included in ATSSS response information field of the ATSSS_RESPONSE Notify payload, the UE shall use the measurement assistance information; and\nd)\tif the ATSSS rules are included in ATSSS response information field of the ATSSS_RESPONSE Notify payload, the UE shall use the ATSSS rules.\nIf the UE receives:\na)\ta IKE_AUTH response message including a Notify payload with a Private Notify Message Type as specified in clause 7.2.2.2 of 3GPP TS 24.302 [17]; or\nb)\tno IKE_AUTH response message including the ATSSS_RESPONSE Notify payload;\nthe UE shall consider that the MA PDU session is not established and the PDN connection over untrusted non-3GPP access network is not established as a user-plane resource of the MA PDU session.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "5.3a.3\tUE establishing a PDN connection over untrusted non-3GPP access network as a user-plane resource of an already established MA PDU session",
                            "text_content": "In order to establish a PDN connection over untrusted non-3GPP access network as a user-plane resource of an already established MA PDU session, the UE shall initiate the IPsec tunnel establishment procedure using the IKEv2 protocol according to 3GPP TS 24.302 [17].\nIn the IKE_AUTH request message to the ePDG:\na)\tthe CFG_REQUEST configuration payload shall include the INTERNAL_IP4_ADDRESS attribute, the INTERNAL_IP6_ADDRESS attribute or both, indicating the PDU session address of the established MA PDU session;\nb)\tthe IDr payload shall be set to the APN mapped from the DNN of the established MA PDU session;\nc)\tthe PDU Session ID field of the N1_MODE_CAPABILITY Notify payload shall be set to the PDU session identity of the establish MA PDU session;\nd)\tthe S-NSSAI Value field of the N1_MODE INFORMATION Notify payload shall be set to the S-NSSAI of the established MA PDU session; and\ne)\tthe ATSSS_REQUEST Notify payload shall be included as specified in clause 8.2.9.20 of 3GPP TS 24.302 [17].\nUpon receipt of the IKE_AUTH response as specified in clause 7.2.2.1 of 3GPP TS 24.302 [17], the UE shall consider that the PDN connection over untrusted non-3GPP access network is established as a user-plane resource of the MA PDU session.\nUpon receipt of an IKE_AUTH response message including a Notify payload with a Private Notify Message Type as specified in clause 7.2.2.2 of 3GPP TS 24.302 [17], the UE shall consider that the PDN connection over non-3GPP access network is not established as a user-plane resource of the MA PDU session.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "5.3a.4\tRelease of user-plane resource(s)",
                            "text_content": "For an MA PDU session which has a PDN connection over untrusted non-3GPP access network established as a user-plane resource, if:\na)\tthe UE needs to release the PDN connection over untrusted non-3GPP access network established as a user-plane resource of the MA PDU session, the UE shall use the tunnel disconnection procedure as specified in clause 7.2.4 of 3GPP TS 24.302 [17]; or\nb)\tthe UE needs to release the user-plane resources, if any, established on 3GPP access of the MA PDU session, the UE shall initiate the UE-requested PDU session release procedure as specified in clause 6.4.3.2 of 3GPP TS 24.501 [6] by sending the PDU SESSION RELEASE REQUEST message to the network.\nFor an MA PDU session which has a PDN connection over untrusted non-3GPP access network established as a user-plane resource, if:\na)\tthe ePDG needs to release the PDN connection over untrusted non-3GPP access network established as a user-plane resource of the MA PDU session, the ePDG shall use the tunnel disconnection procedure as specified in clause 7.4.3 of 3GPP TS 24.302 [17]; or\nb)\tthe network needs to release the user-plane resources, if any, established on 3GPP access of the MA PDU session, the network shall initiate the network-requested PDU session release procedure as specified in clause 6.3.3.2 of 3GPP TS 24.501 [6] by sending the PDU SESSION RELEASE COMMAND message to the UE.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "5.3a.5\tUpdating ATSSS parameters",
                            "text_content": "A PGW-C+SMF may update ATSSS parameters as specified in clause 4.6 and clause 5.2.4 and include the updated MAI in the ATSSS_RESPONSE Notify payload. The updated MAI and ATSSS parameters in ATSSS_RESPONSE Notify payload is sent to the UE during the tunnel modification procedure as specified in clause 7.4.2 of 3GPP TS 24.302 [17].\n",
                            "figures_meta_data": [],
                            "tables": []
                        }
                    ]
                },
                {
                    "title": "5.4\tPerformance measurement function (PMF) protocol (PMFP) procedures",
                    "description": "",
                    "summary": "",
                    "text_content": "",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": [
                        {
                            "title": "5.4.1\tGeneral",
                            "text_content": "Performance measurement function protocol (PMFP) procedures are performed between a performance measurement function (PMF) in a UE and a PMF in the UPF.\nThe following UE-initiated PMFP procedures are specified:\na)\tUE-initiated RTT measurement procedure; and\nb)\taccess availability or unavailability report procedure;\nc)\tUE-initiated PLR measurement procedure;\nd)\tUE assistance data provisioning procedure; and\ne)\tUE assistance data termination procedure.\nThe following UPF-initiated PMFP procedures are specified:\na)\tUPF-initiated RTT measurement procedure;\nb)\tUPF-initiated PLR measurement procedure;\nc)\ttraffic duplication suspend procedure; and\nd)\ttraffic duplication resume procedure.\nThe UE-initiated PMFP procedures and the UPF-initiated PMFP procedures can be performed:\na)\ton the user plane of an MA PDU session via either 3GPP access or non-3GPP access in 5GS if the MAI is provided to the UE during establishment of the MA PDU session; or\nb)\ton the user plane of the PDN connection established as the user plane resource of an MA PDU session via 3GPP access in EPS or the user plane of the MA PDU session via non-3GPP access in 5GS as specified in clause 5.3.\nPMFP messages are transported in an IP packet or an Ethernet frame according to clause 5.3.2.\nIf the UE supports performance measurement function protocol procedures for the QoS flow of a non-default QoS rule, the UE indicates its \"access performance measurements per QoS flow\" capability as defined in clause 9.11.4.1 of 3GPP TS 24.501 [6] to the SMF. If the SMF determines that PMFP using the QoS flow of the non-default QoS rule is applied to the MA PDU session for the UE, the SMF provides the UE with the MAI including a list of QoS flows over which access performance measurements may be performed. The UE performs the RTT measurement procedure or the PLR measurement procedure over the QoS flow(s) as indicated in the received MAI.\nNOTE 1:\tIn this release of the specification, for the PDN connection established as a user-plane resource of an MA PDU session, the PMFP procedures are only performed over the default EPS bearer of the PDN connection.\nFor the PDN connection over untrusted non-3GPP access network established as a user-plane resource of an MA PDU session, for the PLR measurement procedure, the UE counts packets sent or received over all IPSec tunnels of the PDN connection and sends PMFP messages over the IPsec tunnel of default bearer context of the PDN connection, and the PGW-U+UPF counts packets sent or received over all S2b bearers of the PDN connection and sends PMFP messages over the default S2b bearer of the PDN connection.\nNOTE 2:\tIn this release of the specification, for the PDN connection over untrusted non-3GPP access network established as a user-plane resource of an MA PDU session, for the RTT measurement procedure PMFP message are only performed over the default bearer of the PDN connection (i.e. IPsec tunnel of the default bearer and default S2b bearer of the PDN connection).\nIf the UPF receives the indication from the SMF that the performance measurement is for QoS flow(s) of the non-default QoS rule, the UPF performs the RTT measurement procedure or the PLR measurement procedure over the QoS flow(s) of non-default QoS rule as indicated by the SMF. Otherwise, the UPF performs the RTT measurement procedure or the PLR measurement procedure over the QoS flow of the default QoS rule\nPMFP messages, transported between the UE and the UPF over one (or more) QoS flows of a non-default QoS rule, are specified in clause 5.4.2.1.3.\nPMFP messages transported between the UE and the UPF (and vice versa) are protected using the security mechanisms protecting the user data packets transported over NG-RAN or non-3GPP access connected to the 5GCN and over the N3 and N9 reference points, are specified in 3GPP TS 33.501 [14]. A PMFP-specific security mechanism is not specified.\nNOTE 3:\tEven though transport of PMFP messages between the UE and the UPF is protected, a compromised UE can send false or incorrect PMFP messages.\nPMFP is a standard L3 protocol according to 3GPP TS 24.007 [13], PMFP messages are standard L3 messages according to 3GPP TS 24.007 [13] and error behaviour specified for L3 protocol in according to 3GPP TS 24.007 [13] applies for PMFP.\nThe access availability or unavailability report procedure, the traffic duplication suspend procedure and the traffic duplication resume procedure are only performed over the QoS flow of the default QoS rule, over the default EPS bearer of the PDN connection established as a user-plane resource, or over the default bearer context of the PDN connection over untrusted non-3GPP access network established as a user-plane resource of an MA PDU session.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "5.4.2\tElementary procedures for PMFP",
                            "text_content": "In order to send a PMFP message over an access of an MA PDU session of IPv4, IPv6 or IPv4v6 PDU session type:\na)\tif the UE obtained IPv4 address for the PDU session and the received measurement assistance information contains an IPv4 address of the PMF in the UPF, the UE shall create a UDP/IPv4 packet. In the UDP/IPv4 packet, the UE:\n1)\tshall set the data octets field to the PMFP message;\n2)\tshall set the source port field to the UDP port of the PMF in the UE;\n3)\tshall set the destination port field to the UDP port of the PMF in the UPF associated with the access of the MA PDU session indicated in the received measurement assistance information according to the target QoS flow which is used to transport the PMFP message:\nA)\tif the target QoS flow is the QoS flow of the default QoS rule, the destination UDP port field is set to the value of:\n-\tthe \"PMF 3GPP port\" as specified in figure 6.1.5.2-1 for the PMFP message to be transported over 3GPP access; or\n-\tthe \"PMF non-3GPP port\" as specified in figure 6.1.5.2-1 for the PMFP message to be transported over non-3GPP access; and\nB)\tif the target QoS flow is a QoS flow of the non-default QoS rule, the destination UDP port field is set to the value of:\n-\tthe \"PMF 3GPP port\" of the corresponding QoS flow as specified in figure 6.1.5.2-4 for the PMFP message to be transported over 3GPP access; or\n-\tthe \"PMF non-3GPP port\" of the corresponding QoS flow as specified in figure 6.1.5.2-4 for the PMFP message to be transported over non-3GPP access;\n4)\tshall set the source address field to the IPv4 address of the UE; and\n5)\tshall set the destination address field to the IPv4 address of the PMF in the UPF as specified in figure 6.1.5.2-1, included in the received measurement assistance information; or\nb)\tif the UE obtained IPv6 prefix for the PDU session, generated an IPv6 address for the PMF in the UE and the received measurement assistance information contains an IPv6 address of the PMF in the UPF, the UE shall create a UDP/IPv6 packet. In the UDP/IPv6 packet, the UE:\n1)\tshall set the data octets field to the PMFP message;\n2)\tshall set the source port field to the UDP port of the PMF in the UE;\n3)\tshall set the destination port field to the UDP port of the PMF in the UPF associated with the access of the MA PDU session indicated in the received measurement assistance information according to the target QoS flow which is used to transport the PMFP message:\nA)\tif the target QoS flow is the QoS flow of the default QoS rule, the destination UDP port field is set to the value of:\n-\tthe \"PMF 3GPP port\" as specified in figure 6.1.5.2-1 for the PMFP message to be transported over 3GPP access;\n-\tthe \"PMF non-3GPP port\" as specified in figure 6.1.5.2-1 for the PMFP message to be transported over non-3GPP access; and\nB)\tif the target QoS flow is a QoS flow of the non-default QoS rule, the destination UDP port field is set to the value of:\n-\tthe \"PMF 3GPP port\" of the corresponding QoS flow as specified in figure 6.1.5.2-4 for the PMFP message to be transported over 3GPP access; or\n-\tthe \"PMF non-3GPP port\" of the corresponding QoS flow as specified in figure 6.1.5.2-4 for the PMFP message to be transported over non-3GPP access;\n4)\tshall set the source address field to the IPv6 address of the PMF in the UE; and\n5)\tshall set the destination address field to the IPv6 address of the PMF in the UPF as specified in figure 6.1.5.2-1, included in the received measurement assistance information.\nThe UE shall send the UDP/IPv4 packet or UDP/IPv6 packet over the access of the MA PDU session.\nIn order to send a PMFP message over an access of an MA PDU session of IPv4, IPv6 or IPv4v6 PDU session type:\na)\tif the UPF is aware of the UDP port of the PMF in the UE used with IPv4, the UPF shall create a UDP/IPv4 packet. In the UDP/IPv4 packet, the UPF:\n1)\tshall set the data octets field to the PMFP message;\n2)\tshall set the source port field to the UDP port of the PMF in the UPF associated with the access of the MA PDU session indicated in the measurement assistance information provided to the UE according to the target QoS flow which is used to transport the PMFP message:\nA)\tif the target QoS flow is the QoS flow of the default QoS rule, the source UDP port field is set to the value of:\n-\tthe \"PMF 3GPP port\" as specified in figure 6.1.5.2-1 for the PMFP message to be transported over 3GPP access;\n-\tthe \"PMF non-3GPP port\" as specified in figure 6.1.5.2-1 for the PMFP message to be transported over non-3GPP access; and\nB)\tif the target QoS flow is a QoS flow of the non-default QoS rule, the source UDP port field is set to the value of:\n-\tthe \"PMF 3GPP port\" of the corresponding QoS flow as specified in figure 6.1.5.2-4 for the PMFP message to be transported over 3GPP access; or\n-\tthe \"PMF non-3GPP port\" of the corresponding QoS flow as specified in figure 6.1.5.2-4 for the PMFP message to be transported over non-3GPP access;\n3)\tshall set the destination port field to the UDP port of the PMF in the UE used with IPv4;\n4)\tshall set the source address field to the IPv4 address of the PMF in the UPF as specified in figure 6.1.5.2-1, included in the measurement assistance information provided to the UE; and\n5)\tshall set the destination address field to the IPv4 address of the UE; or\nb)\tif the UPF is aware of the UDP port and the IPv6 address of the PMF in the UE, the UPF shall create a UDP/IPv6 packet. In the UDP/IPv6 packet, the UPF:\n1)\tshall set the data octets field to the PMFP message;\n2)\tshall set the source port field to the UDP port of the PMF in the UPF associated with the access of the MA PDU session indicated in the measurement assistance information provided to the UE according to the target QoS flow which is used to transport the PMFP message:\nA)\tif the target QoS flow is the QoS flow of the default QoS rule, the source UDP port field is set to the value of:\n-\tthe \"PMF 3GPP port\" as specified in figure 6.1.5.2-1 for the PMFP message to be transported over 3GPP access;\n-\tthe \"PMF non-3GPP port\" as specified in figure 6.1.5.2-1 for the PMFP message to be transported over non-3GPP access; and\nB)\tif the target QoS flow is a QoS flow of the non-default QoS rule, the source UDP port field is set to the value of:\n-\tthe \"PMF 3GPP port\" of the corresponding QoS flow as specified in figure 6.1.5.2-4 for the PMFP message to be transported over 3GPP access; or\n-\tthe \"PMF non-3GPP port\" of the corresponding QoS flow as specified in figure 6.1.5.2-4 for the PMFP message to be transported over non-3GPP access;\n3)\tshall set the destination port field to the UDP port of the PMF in the UE;\n4)\tshall set the source address field to the IPv6 address of the PMF in the UPF as specified in figure 6.1.5.2-1, included in the measurement assistance information provided to the UE; and\n5)\tshall set the destination address field to the IPv6 address of the PMF in the UE.\nThe UPF shall send the UDP/IPv4 packet or UDP/IPv6 packet over the access of the MA PDU session.\nThe UE shall select the UDP port of the PMF in the UE upon establishment of an MA PDU session of IPv4, IPv6 or IPv4v6 PDU session type. The UE shall use the same UDP port of the PMF in the UE till release of the MA PDU session. The UE shall select the IPv6 address of the PMF in the UE upon establishment of an MA PDU session of IPv6 or IPv4v6 PDU session type. The UE shall use the same IPv6 address of the PMF in the UE till release of the MA PDU session.\nNOTE:\tRegardless of whether the target QoS flow is associated with default QoS rule or not, the UE only allocates a single UDP port for PMFP messages.\nThe UPF shall discover the UDP port of the PMF in the UE used with IPv4 of an MA PDU session of IPv4 or IPv4v6 PDU session type, in the source port field of an UDP/IPv4 packet:\na)\treceived via the MA PDU session;\nb)\twith the destination port field set to the UDP port of the PMF in the UPF associated with an access, included in the measurement assistance information provided to the UE; and\nc)\twith the destination address field set to the IPv4 address of the PMF in the UPF, included the measurement assistance information provided to the UE.\nThe UPF shall discover the UDP port and the IPv6 address of the PMF in the UE of an MA PDU session of IPv6 or IPv4v6 PDU session type, in the source port field and the source address field of an UDP/IPv6 packet:\na)\treceived via the MA PDU session;\nb)\twith the destination port field set to the UDP port of the PMF in the UPF associated with an access, included in the measurement assistance information provided to the UE; and\nc)\twith the destination address field set to the IPv6 address of the PMF in the UPF, included the measurement assistance information provided to the UE.\nIn order to enable the UPF to discover:\na)\tthe UDP port of the PMF in the UE in case of an MA PDU session of IPv4 or IPv4v6 PDU session type, or\nb)\tthe UDP port and the IPv6 address of the PMF in the UE in case of an MA PDU session of IPv6 or IPv4v6 PDU session type;\nthe UE shall perform an access availability or unavailability report procedure over an access for each address (i.e., twice for IPv4v6) immediately after the MA PDU session is established. If the MA PDU session is established over both 3GPP access and non-3GPP access, the UE may use either of the accesses for the access availability or unavailability report procedure. If the access availability or unavailability report procedure is aborted, the UE shall repeat the access availability or unavailability report procedure over the same access or, if the MA PDU session is established over both 3GPP access and non-3GPP access, over the other access.\nIn order to send a PMFP message over an access of an MA PDU session of Ethernet PDU session type, the UE shall create an Ethernet frame as specified in IEEE 802.3 [12]. In the Ethernet frame, the UE:\na)\tshall set the length/type field of the Ethernet frame to the ethertype value included in the received measurement assistance information;\nb)\tshall set the destination address field of the Ethernet frame to the MAC address of the PMF in the UPF associated with the access of the MA PDU session indicated in the received measurement assistance information according to the target QoS flow which is used to transport the PMFP message:\n1)\tif the target QoS flow is the QoS flow of the default QoS rule, the destination address field of the Ethernet frame is set to the value of:\nA)\tthe \"PMF 3GPP MAC address\" as specified in figure 6.1.5.2-2 for the PMFP message to be transported over 3GPP access; or\nB)\tthe \"PMF non-3GPP MAC address\" as specified in figure 6.1.5.2-2 for the PMFP message to be transported over non-3GPP access; and\n2)\tif the target QoS flow is a QoS flow of the non-default QoS rule, the destination address field of the Ethernet frame is set to the value of:\nA)\tthe \"PMF 3GPP MAC address\" of the corresponding QoS flow as specified in figure 6.1.5.2-5 for the PMFP message to be transported over 3GPP access; or\nB)\tthe \"PMF non-3GPP MAC address\" of the corresponding QoS flow as specified in figure 6.1.5.2-5 for the PMFP message to be transported over non-3GPP access;\nc)\tshall set the source address field of the Ethernet frame to the MAC address of the PMF in the UE;\nd)\tshall set the MAC client data field of the Ethernet frame to the 3GPP IEEE MAC based protocol family envelope;\ne)\tshall set the protocol subtype field of the 3GPP IEEE MAC based protocol family envelope to \"Performance measurement function protocol (PMFP)\"; and\nf)\tshall set the PMFP message field of the protocol data field of the 3GPP IEEE MAC based protocol family envelope to the PMFP message.\nThe UE shall send the Ethernet frame over the access of the MA PDU session.\nIn order to send a PMFP message over an access of an MA PDU session, the UPF shall create an Ethernet frame as specified in IEEE 802.3 [12]. In the Ethernet frame, the UPF:\na)\tshall set the length/type field of the Ethernet frame to the ethertype value included in the measurement assistance information provided to the UE;\nb)\tshall set the source address field of the Ethernet frame to the MAC address of the PMF in the UPF associated with the access of the MA PDU session indicated in the measurement assistance information provided to the UE according to the target QoS flow which is used to transport the PMFP message:\n1)\tif the target QoS flow is the QoS flow of the default QoS rule, the source address field of the Ethernet frame is set to the value of:\nA)\tthe \"PMF 3GPP MAC address\" as specified in figure 6.1.5.2-2 for the PMFP message to be transported over 3GPP access; or\nB)\tthe \"PMF non-3GPP MAC address\" as specified in figure 6.1.5.2-2 for the PMFP message to be transported over non-3GPP access; and\n2)\tif the target QoS flow is a QoS flow of the non-default QoS rule, the source address field of the Ethernet frame is set to the value of:\nA)\tthe \"PMF 3GPP MAC address\" of the corresponding QoS flow as specified in figure 6.1.5.2-5 for the PMFP message to be transported over 3GPP access; or\nB)\tthe \"PMF non-3GPP MAC address\" of the corresponding QoS flow as specified in figure 6.1.5.2-5 for the PMFP message to be transported over non-3GPP access;\nc)\tshall set the destination address field of the Ethernet frame to the MAC address of the PMF in the UE;\nd)\tshall set the MAC client data field of the Ethernet frame to the 3GPP IEEE MAC based protocol family envelope;\ne)\tshall set the protocol subtype field of the 3GPP IEEE MAC based protocol family envelope to \"Performance measurement function protocol (PMFP)\"; and\nf)\tshall set the PMFP message field of the protocol data field of the 3GPP IEEE MAC based protocol family envelope to the PMFP message.\nThe UPF shall send the Ethernet frame so that the UE receives it over the access of the MA PDU session.\nThe UE shall select the MAC address of the PMF in the UE upon establishment of an MA PDU session of Ethernet PDU session type. The UE shall use the same MAC address of the PMF in the UE till release of the MA PDU session.\nNOTE:\tRegardless of whether the target QoS flow is associated with default QoS rule or not, the UE only allocates a single MAC address for PMFP messages.\nThe UPF shall discover the MAC address of the PMF in the UE of an MA PDU session of Ethernet PDU session type, in the source address field of an Ethernet frame:\na)\treceived via the MA PDU session;\nb)\twith the length/type field of the Ethernet frame set to the ethertype value included in the measurement assistance information provided to the UE; and\nc)\twith the destination address field of the Ethernet frame set to the MAC address of the PMF in the UPF associated with an access, included in the measurement assistance information provided to the UE.\nIn order to enable the UPF to discover the MAC address of the PMF in the UE of an MA PDU session of Ethernet PDU session type, the UE shall perform an access availability or unavailability report procedure over an access immediately after the MA PDU session is established. If the MA PDU session is established over both 3GPP access and non-3GPP access, the UE may use either of the accesses for the access availability or unavailability report procedure. If the access availability or unavailability report procedure is aborted, the UE shall repeat the access availability or unavailability report procedure over the same access or, if the MA PDU session is established over both 3GPP access and non-3GPP access, over the other access.\nIn this release of specification, RTT measurement procedure and PLR measurement procedure can be performed per QoS flow.\nIn order to transport PMFP ECHO REQUEST message, PMFP ECHO RESPONSE message, PMFP PLR COUNT REQUEST message, PMFP PLR COUNT RESPONSE message, PMFP PLR REPORT REQUEST message and PMFP PLR REPORT RESPONSE message over the specific QoS flows, SMF shall provide the UE with the QoS rules including the packet filters containing the UDP port or the MAC address associated with the QoS flow in the MAI. The SMF shall ensure the UDP port or the MAC address is unique within the PDU session.\nNOTE:\tThe SMF providing the UPF with the UL PDR including the UDP port or the MAC address associated with a QoS flow is specified in 3GPP TS 29.244 [16].\nThe UE shall maintain the current available UE EPTI value. When the MA PDU session is established, the UE shall set the current available UE EPTI value to 0000H. When a UE-initiated PMFP procedure is initiated, the UE shall allocate the current available UE EPTI value to the UE-initiated PMFP procedure and:\n-\tif the current available UE EPTI value is 7FFFH, shall set the current available UE EPTI value to 0000H; or\n-\totherwise, shall increase the current available UE EPTI value by one.\nThe UE shall release the EPTI value allocated to the UE-initiated PMFP procedure when the UE-initiated PMFP procedure completes or is aborted.\nThe UPF shall maintain the current available UPF EPTI value. When the MA PDU session is established, the UPF shall set the current available UPF EPTI value to 8000H. When a UPF-initiated PMFP procedure is initiated, the UPF shall allocate the current available UPF EPTI value to the UPF-initiated PMFP procedure and:\n-\tif the current available UPF EPTI value is FFFFH, shall set the current available UPF EPTI value to 8000H; or\n-\totherwise, shall increase the current available UPF EPTI value by one.\nThe UPF shall release the EPTI value allocated to the UPF-initiated PMFP procedure when the UPF-initiated PMFP procedure completes or is aborted.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "5.4.3\tUE-initiated RTT measurement procedure",
                            "text_content": "The purpose of the UE-initiated RTT measurement procedure is to enable the UE to measure the RTT of an exchange of user data packets between the UE and the UPF over an access of an MA PDU session.\nThe UE-initiated RTT measurement procedure can be performed over an access of an MA PDU session only when the UE has user-plane resources on the access of the MA PDU session.\nIn order to initiate a UE-initiated RTT measurement procedure over an access of an MA PDU session, the UE shall allocate an EPTI value as specified in clause 5.4.2.2 and shall create one or more PMFP ECHO REQUEST messages. The number of created PMFP ECHO REQUEST messages is UE implementation specific. In each PMFP ECHO REQUEST message, the UE:\na)\tshall set the EPTI IE to the allocated EPTI value;\nb)\tshall set the RI IE to a unique value identifying the particular PMFP ECHO REQUEST message within the transaction; and.\nc)\tif the upper layers request a particular length of PMFP messages, shall include the Padding IE such that length of the PMFP message becomes equal to the requested length.\nThe UE shall start a timer T101 and shall send the one or more PMFP ECHO REQUEST messages over the access of the MA PDU session.\nAn example of the UE-initiated RTT measurement procedure is shown in figure 5.3.3.2-1.\nFigure 5 illustrates the UE-initiated RTT measurement procedure, which involves the synchronization of a user equipment (UE) with a base station (BS) to measure the round-trip time (RTT). The figure depicts the process in three main steps: synchronization, RTT measurement, and synchronization recovery. The synchronization step is crucial for establishing a reliable connection between the UE and the BS, ensuring accurate RTT measurements. The RTT measurement step involves sending a synchronization signal from the UE to the BS and receiving the response, which is then used to calculate the RTT. Finally, the synchronization recovery step ensures that the connection remains stable even if there are any disruptions during the measurement process. The figure highlights the importance of precise timing and synchronization in telecommunication networks for accurate RTT measurements.\nFigure 5.4.3.2-1: UE-initiated RTT measurement procedure\nUpon reception of the PMFP ECHO REQUEST message, the UPF shall create a PMFP ECHO RESPONSE message. In the PMFP ECHO RESPONSE message, the UPF shall set the EPTI IE to the EPTI value in the PMFP ECHO REQUEST message and shall set the RI IE to the RI value in the PMFP ECHO REQUEST message. If the PMFP ECHO REQUEST message contains the Padding IE, the UPF shall include the Padding IE such that length of the PMFP message becomes equal to length of the received PMFP message. The UPF shall send the PMFP ECHO RESPONSE message over the access of the MA PDU session via which the PMFP ECHO REQUEST message was received.\nUpon reception of a PMFP ECHO RESPONSE message with the same EPTI as the allocated EPTI value and with the RI value of a sent PMFP ECHO REQUEST message, the UE shall determine the RTT value for the request identified by the RI value by subtracting the current value of the timer T101 from the value of the timer T101 valid when the PMFP ECHO REQUEST with the RI value was sent.\nWhen a PMFP ECHO RESPONSE message with the same EPTI as the allocated EPTI value has been received for each sent PMFP ECHO REQUEST message, the UE shall calculate an average of the RTT values for the requests, shall stop the timer T101.\nThe following abnormal cases can be identified:\na)\tExpiration of the timer T101\nUpon expiration of the timer T101, the UE shall abort the procedure, shall calculate an average of the RTT values for the requests for which a response was received and shall count the number of requests for which no response was received.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "5.4.4\tNetwork-initiated RTT measurement procedure",
                            "text_content": "The purpose of the UPF-initiated RTT measurement procedure is to enable the UPF to measure the RTT of an exchange of user data packets between the UPF and the UE over an access of an MA PDU session.\nThe UPF-initiated RTT measurement procedure can be performed over an access of an MA PDU session only when the UE has user-plane resources on the access of the MA PDU session.\nIn order to initiate a UPF-initiated RTT measurement procedure over an access of an MA PDU session, the UPF shall allocate a EPTI value as specified in clause 5.4.2.2 and shall create one or more PMFP ECHO REQUEST messages. The number of created PMFP ECHO REQUEST messages is UPF implementation specific. In each PMFP ECHO REQUEST message, the UPF:\na)\tshall set the EPTI IE to the allocated EPTI value;\nb)\tshall set the RI IE to a unique value identifying the particular PMFP ECHO REQUEST message within the transaction; and\nc)\tif the upper layers request a particular length of PMFP messages, shall include the Padding IE such that length of the PMFP message becomes equal to the requested length.\nThe UPF shall start a timer T201 and shall send the one or more PMFP ECHO REQUEST messages over the access of the MA PDU session.\nAn example of the UPF-initiated RTT measurement procedure is shown in figure 5.4.4.2-1.\nFigure 5 illustrates the UPF-initiated RTT measurement procedure, which involves the UPF (User Plane Function) initiating a request to measure the round-trip time (RTT) between two network elements. The figure depicts the process flow, starting with the UPF sending a measurement request to the RPF (Routing Policy Function). The RPF then forwards the request to the RPF-UPF, which measures the RTT and sends the result back to the RPF. The RPF subsequently relays the RTT measurement to the UPF, completing the process. This procedure is crucial for optimizing network performance and ensuring timely data transmission.\nFigure 5.4.4.2-1: UPF-initiated RTT measurement procedure\nUpon reception of the PMFP ECHO REQUEST message, the UE shall create a PMFP ECHO RESPONSE message. In the PMFP ECHO RESPONSE message, the UE shall set the EPTI IE to the EPTI value in the PMFP ECHO REQUEST message and shall set the RI IE to the RI value in the PMFP ECHO REQUEST message. If the PMFP ECHO REQUEST message contains the Padding IE, the UE shall include the Padding IE such that length of the PMFP message becomes equal to length of the received PMFP message. The UE shall send the PMFP ECHO RESPONSE message over the access of the MA PDU session via which the PMFP ECHO REQUEST message was received.\nUpon reception of a PMFP ECHO RESPONSE message with the same EPTI as the allocated EPTI value and with the RI value of a sent PMFP ECHO REQUEST message, the UPF shall determine the RTT value for the request identified by the RI value by subtracting the current value of the timer T201 from the starting value of the timer T201 valid when the PMFP ECHO REQUEST with the RI value was sent.\nWhen a PMFP ECHO RESPONSE message with the same EPTI as the allocated EPTI value has been received for each sent PMFP ECHO REQUEST message, the UPF shall calculate an average of the RTT values for the requests, shall stop the timer T201.\nThe following abnormal cases can be identified:\na)\tExpiration of the timer T201\nUpon expiration of the timer T201, the UPF shall abort the procedure, shall calculate an average of the RTT values for the requests for which a response was received and shall count the number of requests for which no response was received.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "5.4.5\tAccess availability or unavailability report procedure",
                            "text_content": "The purpose of the access availability or unavailability report procedure is to enable the UE to inform the UPF about availability or unavailability of an access of an MA PDU session.\nIn order to initiate an access availability or unavailability report procedure over an access of an MA PDU session, the UE shall allocate a EPTI value as specified in clause 5.4.2.2 and shall create a PMFP ACCESS REPORT message. In the PMFP ACCESS REPORT message, the UE shall set the EPTI IE to the allocated EPTI value. The UE shall send the PMFP ACCESS REPORT message over the access of the MA PDU session and shall start a timer T102.\nAn example of the access availability or unavailability report procedure is shown in figure 5.4.5.2-1.\nFigure 5 illustrates the process of assessing access availability or unavailability, detailing the steps involved in reporting procedures. The figure outlines the various stages, including initial assessment, reporting, and follow-up actions. Key components include the reporting entity, the reporting process, and the necessary follow-up actions. The figure emphasizes the importance of timely and accurate reporting to ensure effective troubleshooting and resolution of access issues.\nFigure 5.4.5.2-1: Access availability or unavailability report procedure\nUpon reception of the PMFP ACCESS REPORT message, the UPF shall create a PMFP ACKNOWLEDGEMENT message. In the PMFP ACKNOWLEDGEMENT message, the UPF shall set the EPTI IE to the EPTI value in the PMFP ACCESS REPORT message. The UPF shall send the PMFP ACKNOWLEDGEMENT message over the access of the MA PDU session via which the PMFP ACCESS REPORT message was received.\nUpon reception of a PMFP ACKNOWLEDGEMENT message with the same EPTI as the allocated EPTI value, the UE shall stop the timer T102.\nThe following abnormal cases can be identified:\na)\tExpiry of the timer T102\nThe UE shall, on the first expiry of the timer T102, retransmit the PMFP ACCESS REPORT message and shall reset and start timer T102. This retransmission is repeated up to four times, i.e. on the fifth expiry of timer T102, the UE shall abort the procedure.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "5.4.6\tUE-initiated PLR measurement procedure",
                            "text_content": "The purpose of the UE-initiated PLR measurement procedure is to enable the UE to measure the PLR of UL traffic to the UPF over an access of an MA PDU session.\nThe UE-initiated PLR measurement procedure can be performed over an access of an MA PDU session only when the UE has user-plane resources on the access of the MA PDU session. The UE-initiated PLR measurement procedure can be performed for the QoS flow of the default QoS rule or the QoS flow of the non-default QoS rule.\nThe UE-initiated PLR measurement procedure consists of following:\na)\tone UE-initiated PLR count procedure (see clause 5.4.6.2); and\nb)\tone or more UE-initiated PLR report procedure (see clause 5.4.6.3).\nIf an indication to request restart of counting procedure is sent by the UE and accepted by the UPF, the UE-initiated PLR measurement procedure consists of more than one UE-initiated PLR report procedure. Otherwise, the UE-initiated PLR measurement procedure consists of one UE-initiated PLR report procedure.\nThe UE shall not initiate another PLR measurement procedure over the same QoS flow on the same access until current UE-initiated PLR measurement procedure is completed.\nAn example of UE-initiated PLR measurement procedure which consists of the two procedures is shown in figure 5.4.6.1-1.\nFigure 5.4.6.1 -1 illustrates the procedure for measuring PLR (Packet Loss Rate) initiated by the UE (User Equipment). The figure depicts the steps involved in the process, starting with the UE sending a PLR measurement request to the network. The network then collects and analyzes the data, and finally, the UE receives the PLR measurement results. The figure highlights the importance of accurate PLR measurements in maintaining reliable communication between the UE and the network.\nFigure 5.4.6.1-1: UE-initiated PLR measurement procedure\n1.\tThe UE sends a PMFP PLR count request message to the UPF. If the UE-initiated PLR measurement is to meaure the PLR of the SDF over a QoS flow of the non-default QoS rule, the PMFP PLR count request message is transported over the QoS flow of the non-default QoS rule. Otherwise, the PMFP PLR count request message is transported over the QoS flow of the default QoS rule.\nNOTE 1:\tIn the UE-initiated PLR measurement procedure, all the PMFP messages are transported over the same QoS flow on the same access.\n2.\tUpon sending the PMFP PLR count request message, the UE starts counting the transmitted UL packets over the QoS flow.\n3-4.\tUpon receiving the PMFP PLR count request message, the UPF starts counting the received UL packets over the QoS flow which the PMFP PLR count request message is received from and sends the PMFP PLR count response message to the UE.\n5-7.\tThe UE sends a PMFP PLR report request message to request the UPF to report the number of the counted UL packets and stops counting the transmitted UL packets over the QoS flow. If the UE intends to request the UPF to restart counting the UL packets, the UE can include an indication in the PMFP PLR report request message and restart counting the transmitted UL packets over the QoS flow.\n8-10.\tUpon receiving the PMFP PLR report request message, the UPF stops counting the UL packets and sends PMFP PLR report response message which includes the number of the UL packets counted since the reception of the last PMFP PLR count request message. If an indication to request restart of counting procedure is received in the PMFP PLR report request message and accepted by the UPF, the UPF restarts counting the received UL packets.\n11.\tThe UE calculates the UL packet loss rate based on the local counting result of the number of transmitted UL packets and the reported number of received UL packets included in the PMFP PLR report response message. If the UE includes an indication to request restart of counting in the PMFP PLR report request message in step 5 and the UE receives PMFP PLR report response message with an indication of restart counting is not accepted or without an indication of restart counting, the UE shall abort the restart of PMFP PLR measurement procedure.\n12.\tSame as step 5, if the UE restarts counting the transmitted UL packets as specified in step 7.\n13.\tSame as step 6, if the UE restarts counting the transmitted UL packets as specified in step 7.\n14.\tSame as step 7.\n15.\tSame as step 8, if the UPF restarts counting the received UL packets as specified in step 9.\n16.\tSame as step 9.\n17\tSame as step 10, if the UPF restarts counting the transmitted UL packets as specified in step 9.\n18\tSame as step 11, if the UE restarts counting the transmitted UL packets as specified in step 7.\nNOTE 2:\tWhen the UE requests and the UPF accepts the restart of counting, there can be multiple occurrences of step 7, 9, and 12-18.\nIn order to initiate a UE-initiated PLR count procedure over an access of an MA PDU session, the UE shall:\n-\tallocate an EPTI value as specified in clause 5.4.2.2;\n-\tcreate a PMFP PLR COUNT REQUEST message;\n-\tset the EPTI IE of the PMFP PLR COUNT REQUEST message to the allocated EPTI value;\n-\tsend the PMFP PLR COUNT REQUEST message using the QoS flow indicated in the MAI over the access of the MA PDU session;\n-\tstart a timer T103 upon sending the PMFP PLR COUNT REQUEST message; and\n-\tstart counting the transmitted UL packets over the QoS flow.\nAn example of the UE-initiated PLR count procedure is shown in figure 5.4.6.2.1-1.\nFigure 5.4. 6 .2.1 -1: UE-initiated PLR count procedure illustrates the process of measuring the packet loss rate (PLR) initiated by the user equipment (UE) in a telecommunication network. The figure shows the steps involved in the procedure, including the transmission of a synchronization signal by the base station (BS) to synchronize the UE. The UE then sends a synchronization request to the BS, initiating the PLR count. The figure also depicts the transmission of the PLR count data from the UE to the BS, which is essential for monitoring and maintaining network quality. The key components in the figure include the UE, BS, and the synchronization signals, which are crucial for accurate PLR measurement and network performance evaluation.\nFigure 5.4.6.2.1-1: UE-initiated PLR count procedure\nUpon receiving the PMFP PLR COUNT REQUEST message, the UPF shall:\n-\tcreate a PMFP PLR COUNT RESPONSE message;\n-\tset the EPTI IE of the PMFP PLR COUNT RESPONSE message to the EPTI value of the received PMFP PLR COUNT REQUEST message;\n-\tsend the PMFP PLR COUNT RESPONSE message over the access of the MA PDU session via which the PMFP PLR COUNT REQUEST message was received; and\n-\tset the counted received UL packets, if any, to zero, and start counting the received UL packets over the QoS flow on the same access which the PMFP PLR COUNT REQUEST message is received.\nUpon receiving PMFP PLR COUNT RESPONSE message with the same EPTI as the allocated EPTI value of the sent PMFP PLR COUNT REQUEST message, the UE shall stop the timer T103 and consider that the counting has started.\nThe following abnormal cases can be identified:\na)\tExpiration of the timer T103\nUpon expiration of the timer T103, the UE shall abort the procedure.\nIn order to initiate a UE-initiated PLR report procedure over an access of an MA PDU session, the UE shall\n-\tallocate an EPTI value as specified in clause 5.4.2.2;\n-\tcreate a PMFP PLR REPORT REQUEST message;\n-\tset the EPTI IE of the PMFP PLR REPORT REQUEST message to the allocated EPTI value; and\n-\tinclude the Additional measurement indication IE with \"RC\" bit set if the UE intends to request the UPF to restart counting the UL packets.\nUpon sending the PMFP PLR REPORT REQUEST message the UE shall:\n-\tstart a timer T104;\n-\tstop counting the UL packets; and\n-\trestart counting the transmitted UL packets if the Additional measurement indication IE with \"RC\" bit set is included in the PMFP PLR REPORT REQUEST message.\nAn example of the UE-initiated PLR report procedure is shown in figure 5.4.6.3.1-1.\nFigure 5.4. 6 .3.1 -1: UE-initiated PLR report procedure illustrates the process by which a user equipment (UE) initiates a procedure to report a packet loss rate (PLR) to the network. The figure outlines the steps involved, including the UE sending a PLR report request to the network, the network processing the request, and the feedback loop that ensures the UE is informed of the PLR status. Key components include the UE, the network infrastructure, and the signaling protocol used for communication. This procedure is crucial for maintaining network quality and ensuring reliable data transmission.\nFigure 5.4.6.3.1-1: UE-initiated PLR report procedure\nUpon receiving the PMFP PLR REPORT REQUEST message, the UPF shall:\n-\tcreate a PMFP PLR REPORT RESPONSE message;\n-\tset the EPTI IE of the PMFP PLR REPORT RESPONSE message to the EPTI value of the received PMFP PLR REPORT REQUEST message;\n-\tstop counting the received UL packets and set the Counting result IE to the number of counted received UL packets since the reception of the last PMFP PLR COUNT REQUEST message over the QoS flow; and\n-\tinclude the Additional measurement indication IE with \"RC\" bit set if accepting the request from the UE to restart counting the UL packets.\nThe UPF shall send the PMFP PLR REPORT RESPONSE message over the QoS flow on the same access which the PMFP PLR REPORT REQUEST message was received. Upon sending the PMFP PLR REPORT RESPONSE message, the UPF restarts counting the received UL packets over the QoS flow on the same access which the PMFP PLR REPORT REQUEST message is received if accepting the request from the UE to restart counting the UL packets.\nUpon receiving the PMFP PLR REPORT RESPONSE message with the same EPTI as the allocated EPTI value of the sent PMFP PLR REPORT REQUEST message, the UE shall:\n-\tstop the timer T104; and\n-\tcalculate the UL PLR over the QoS flow based on the number of the UL packets counted locally and the number indicated in Counting result IE in the received PMFP PLR REPORT RESPONSE message.\nThe following abnormal cases can be identified:\na)\tExpiration of the timer T104\nUpon expiration of the timer T104, the UE shall abort the UE-initiated PLR measurement procedure.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "5.4.7\tNetwork-initiated PLR measurement procedure",
                            "text_content": "The purpose of the network-initiated PLR measurement procedure is to enable the UPF to measure the PLR of DL traffic to the UE over an access of an MA PDU session.\nThe network-initiated PLR measurement procedure can be performed over an access of an MA PDU session only when there is user-plane resources on the access of the MA PDU session. The network-initiated PLR measurement procedure can be performed for the QoS flow of the default QoS rule or the QoS flow of the non-default QoS rule. In the latter case, the SMF shall provide the UE with the QoS rules including downlink only or bidirectional packet filter matching the SDF to be measured, unless reflective QoS is used for the SDF during the PDU session establishment procedure or PDU session modification procedure as specified in 3GPP TS 24.501 [6].\nThe network-initiated PLR measurement procedure consists of following:\na)\tone network-initiated PLR count procedure (see clause 5.4.7.2); and\nb)\tone or more network-initiated PLR report procedure (see clause 5.4.7.3).\nIf an indication to request restart of counting procedure is sent by the UPF and accepted by the UE, the network-initiated PLR measurement procedure consists of more than one network-initiated PLR report procedure. Otherwise, the network-initiated PLR measurement procedure consists of one network-initiated PLR report procedure.\nThe network shall not initiate another PLR measurement procedure over the same QoS flow until current network-initiated PLR measurement procedure is completed.\nAn example of network-initiated PLR measurement procedure which consists of the two procedures is shown in figure 5.4.7.1-1.\nFigure 5.4.7.1 -1: Network-initiated PLR measurement procedure\n\nThis figure illustrates the network-initiated procedure for measuring Packet Loss Rate (PLR) in a telecommunication network. The figure shows the various steps involved in the process, including the initiation of the measurement, data collection, and analysis of the results. The figure highlights the importance of accurate PLR measurement in ensuring the quality of service for network users. Key components of the procedure include the use of a network analyzer to collect data, the analysis of the collected data to determine the PLR, and the reporting of the results to network administrators for further action. The figure also emphasizes the need for a standardized procedure to ensure consistency and comparability of PLR measurements across different networks.\nFigure 5.4.7.1-1: Network-initiated PLR measurement procedure\n1.\tThe UPF sends a PMFP PLR count request message to the UE. If the network-initiated PLR measurement is to measure the PLR of the SDF over a QoS flow of the non-default QoS rule, the PMFP PLR count request message is transported over the QoS flow of the non-default QoS rule. Otherwise, the PMFP PLR count request message is transported over the QoS flow of the default QoS rule.\nNOTE 1:\tIn the network-initiated PLR measurement procedure, all the PMFP messages are transported over the same QoS flow on the same access of the MA PDU session.\n2.\tUpon sending the PMFP PLR count request message, the UPF starts counting the transmitted DL packets over the QoS flow.\n3-4.\tUpon receiving the PMFP PLR count request message, the UE starts counting the received DL packets over the QoS flow which the PMFP PLR count request message is received from and sends the PMFP PLR count response message to the UPF. In order to determine the QFI of the received PMFP PLR count request message, the UE:\n-\tlearns the QFI from the header of the received message (e.g. in the SDAP header as specified in 3GPP TS 37.324 [15]); or\n-\tmaps the received message to the QFI by evaluating the QoS rules for downlink only or bidirectional packet filter(s) if no QFI is included in the header of the received message;\nIn order to determine the QFI the counted DL packet is associated with, the UE:\n-\tlearns the QFI from the header of the received DL packet (e.g. in the SDAP header as specified in 3GPP TS 37.324 [15]); or\n-\tmaps the DL packet to the QFI by evaluating the QoS rules for downlink only or bidirectional packet filter(s) if no QFI is included in the header of the received DL packet.\n5-7.\tThe UPF sends a PMFP PLR report request message to request the UE to report the number of the counted DL packets. If the UPF intends to request the UE to restart counting the DL packets, the UPF can include an indication in the PMFP PLR report request message and restart counting the transmitted DL packets over the QoS flow.\n8-10.\tUpon receiving the PMFP PLR report request message, the UE stops counting the DL packets and sends PMFP PLR report response message which includes the number of the DL packets counted since the reception of the last PMFP PLR count request message. If an indication to request restart of counting procedure is received in the PMFP PLR report request message and accepted by the UE, the UE restarts counting the received DL packets.\n11.\tThe UPF calculates the DL packet loss rate based on the local counting result of the number of transmitted DL packets and the reported number of received DL packets included in the PMFP PLR report response message. If the UPF includes an indication to request restart of counting in the PMFP PLR report request message in step 5 and the UPF receives PMFP PLR report response message with an indication of restart counting is not accepted or without an indication of restart counting, the UPF shall abort the restart of PMFP PLR measurement procedure.\n12.\tSame as step 5, if the UPF restarts counting the transmitted DL packets as specified in step 7.\n13.\tSame as step 6, if the UPF restarts counting the transmitted DL packets as specified in step 7.\n14.\tSame as step 7.\n15.\tSame as step 8, if the UE restarts counting the received DL packets as specified in step 9.\n16.\tSame as step 9.\n17.\tSame as step 10, if the UE restarts counting the received DL packets as specified in step 9.\n18.\tSame as step 11, if the UPF restarts counting the transmitted DL packets as specified in step 7.\nNOTE 2:\tWhen the UPF requests and the UE accepts the restart of counting, there can be multiple occurrences of step 7, 9, and 12-18.\nIn order to initiate a network-initiated PLR count procedure over an access of an MA PDU session, the UPF shall:\n-\tallocate an EPTI value as specified in clause 5.4.2.2;\n-\tcreate a PMFP PLR COUNT REQUEST message;\n-\tset the EPTI IE of the PMFP PLR COUNT REQUEST message to the allocated EPTI value;\n-\tsend the PMFP PLR COUNT REQUEST message using the QoS flow indicated in the MAI over the access of the MA PDU session;\n-\tstart a timer T203 upon sending the PMFP PLR COUNT REQUEST message; and\n-\tstart counting the transmitted DL packets over the QoS flow.\nAn example of the network-initiated PLR count procedure is shown in figure 5.4.7.2.1-1.\nFigure 5.4.7.2.1 -1: Network-initiated PLR count procedure illustrates the process of network-initiated packet loss rate (PLR) counting, which is a method used to monitor and diagnose network performance. The figure shows the steps involved in initiating a PLR count, including the generation of a random sequence of packets, their transmission through the network, and the subsequent count of lost packets at the receiver. This procedure is crucial for identifying and resolving network issues, ensuring reliable communication and minimizing downtime.\nFigure 5.4.7.2.1-1: Network-initiated PLR count procedure\nUpon receiving the PMFP PLR COUNT REQUEST message, the UE shall:\n-\tcreate a PMFP PLR COUNT RESPONSE message;\n-\tset the EPTI IE of the PMFP PLR COUNT RESPONSE message to the EPTI value of the received PMFP PLR COUNT REQUEST message;\n-\tsend the PMFP PLR COUNT RESPONSE message over the access of the MA PDU session via which the PMFP PLR COUNT REQUEST message was received; and\n-\tset the counted received DL packets, if any, to zero, and start counting the received DL packets over the QoS flow on the same access which the PMFP PLR COUNT REQUEST message is received.\nUpon receiving PMFP PLR COUNT RESPONSE message with the same EPTI as the allocated EPTI value of the sent PMFP PLR COUNT REQUEST message, the UPF shall stop the timer T203 and consider that the counting has started.\nThe following abnormal cases can be identified:\na)\tExpiration of the timer T203\nUpon expiration of the timer T203, the UPF shall abort the procedure.\nIn order to initiate a network-initiated PLR report procedure over an access of an MA PDU session, the UPF shall\n-\tallocate an EPTI value as specified in clause 5.4.2.2;\n-\tcreate a PMFP PLR REPORT REQUEST message;\n-\tset the EPTI IE of the PMFP PLR REPORT REQUEST message to the allocated EPTI value; and\n-\tinclude the Additional measurement indication IE with \"RC\" bit set if the UPF intends to request the UE to restart counting the DL packets.\nUpon sending the PMFP PLR REPORT REQUEST message the UPF shall:\n-\tstart a timer T204;\n-\tstop counting the DL packets; and\n-\trestart counting the transmitted DL packets if the Additional measurement indication IE with \"RC\" bit set is included in the PMFP PLR REPORT REQUEST message.\nAn example of the network-initiated PLR report procedure is shown in figure 5.4.7.3.1-1.\nFigure 5.4.7.3.1 -1: Network-initiated PLR report procedure illustrates the process of network-initiated PLR (Packet Loss Rate) reporting. The figure outlines the steps involved in generating and submitting PLR reports to the network management system. Key components include the network elements, such as switches and routers, which collect and process the PLR data. The figure emphasizes the importance of accurate PLR reporting for network performance monitoring and troubleshooting.\"\nFigure 5.4.7.3.1-1: Network-initiated PLR report procedure\nUpon receiving the PMFP PLR REPORT REQUEST message, the UE shall:\n-\tcreate a PMFP PLR REPORT RESPONSE message;\n-\tset the EPTI IE of the PMFP PLR REPORT RESPONSE message to the EPTI value of the received PMFP PLR REPORT REQUEST message;\n-\tstop counting the received DL packets and set the Counting result IE to the number of counted received DL packets since the reception of the last PMFP PLR COUNT REQUEST message over the QoS flow; and\n-\tinclude the Additional measurement indication IE with \"RC\" bit set if accepting the request from the UPF to restart counting the DL packets.\nThe UE shall send the PMFP PLR REPORT RESPONSE message over the QoS flow on the same access which the PMFP PLR REPORT REQUEST message was received. Upon sending the PMFP PLR REPORT RESPONSE message, the UE restarts counting the received DL packets over the QoS flow on the same access which the PMFP PLR REPORT REQUEST message is received if accepting the request from the UPF to restart counting the DL packets.\nUpon receiving the PMFP PLR REPORT RESPONSE message with the same EPTI as the allocated EPTI value of the sent PMFP PLR REPORT REQUEST message, the UPF shall:\n-\tstop the timer T204; and\n-\tcalculate the DL PLR over the QoS flow based on the number of the DL packets counted locally and the number indicated in Counting result IE in the received PMFP PLR REPORT RESPONSE message.\nThe following abnormal cases can be identified:\na)\tExpiration of the timer T204\nUpon expiration of the timer T204, the UE shall abort the network-initiated PLR measurement procedure.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "5.4.8\tUE assistance data provisioning procedure",
                            "text_content": "The purpose of the UE assistance data provisioning procedure is to enable the UE to provide to the UPF a DL traffic distribution that can be applied by the UPF for all DL traffic that applies to the UE assistance operation.\nIf the UE has received the LBPAO set to \"UE assistance operation is allowed\" in an ATSSS rule and decides to apply for an SDF a UL traffic distribution different from the default UL traffic distribution indicated in the load balancing steering mode of the ATSSS rule, the UE sends a PMFP UAD provisioning message to the UPF.\nNOTE 1:\tIt is based on UE implementation that how the UE decides to apply a different UL traffic distribution for an SDF and how the corresponding DL traffic distribution is decided.\nNOTE 2:\tOnce the UE assistance data provisioning procedure is successfully completed, if the UE receives updated ATSSS rules in which the value of the load balancing percentages adjustment operation filed is changed from \"UE assistance operation is allowed\" to other values, the UE needs to turn to apply immediately the UL traffic distribution for the SDF indicated in the updated ATSSS rules.\nIn order to initiate a UE assistance data provisioning procedure over an access of an MA PDU session, the UE shall:\na)\tallocate an EPTI value as specified in clause 5.4.2.2;\nb)\tcreate a PMF UAD PROVISIONING message;\nc)\tset the EPTI IE of the PMFP UAD PROVISIONING message to the allocated EPTI value; and\nd)\tinclude the DL distribution information IE with a DL traffic distribution that can be applied by the UPF for all DL traffic that applies to the UE-assistance operation.\nUpon sending the PMFP UAD PROVISIONING message the UE shall start a timer T106.\nThe UE in the PMFP UAD provisioning message includes DL distribution information.\n\n\nFigure 5.4.8.2-1: UE assistance data provisioning procedure\nOn receipt of a PMFP UAD PROVISIONING message, the UPF may use the information in the received PMFP UAD PROVISIONING message to align the DL traffic distribution for all DL traffic that applies to the UE-assistance operation. Furthermore, the UPF shall create a PMFP UAD PROVISIONING COMPLETE message. In the PMFP UAD PROVISIONING COMPLETE message, the UPF shall set the EPTI IE to the EPTI value in the PMFP UAD PROVISIONING message. The UPF shall send the PMFP UAD PROVISIONING COMPLETE message over the access of the MA PDU session via which the PMFP UAD PROVISIONING message was received.\nThe following abnormal cases can be identified:\na)\tExpiry of the timer T106\nThe UE shall, on the first expiry of the timer T106, retransmit the PMFP UAD PROVISIONING message and shall reset and start timer T106. This retransmission is repeated up to four times, i.e. on the fifth expiry of timer T106, the UE shall abort the procedure.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "5.4.9\tUE assistance data termination procedure",
                            "text_content": "The purpose of the UE assistance data termination procedure is to enable the UE to inform the UPF that the UE assistance data operation is terminated and the UE performs UL traffic distribution according to load balancing percentages of the ATSSS rule received from the network.\nIf the UE decides to terminate the UE assistance data operation and instead use the split percentages for respective SDF traffic transmitted over 3GPP access and non-3GPP access as indicated in the load balancing steering mode of the ATSSS rules, the UE sends a PMFP UAT command message to the UPF.\nNOTE:\tIt is based on UE implementation how the UE decides to terminate applying UL traffic distribution different from the percentages indicated in the load balancing steering mode of the ATSSS rules.\nIn order to initiate a UE assistance data termination procedure over an access of an MA PDU session, the UE shall:\na)\tallocate an EPTI value as specified in clause 5.4.2.2;\nb)\tcreate a PMF UAT COMMAND message; and\nc)\tset the EPTI IE of the PMFP UAT COMMAND message to the allocated EPTI value.\nUpon sending the PMFP UAT COMMAND message the UE shall start a timer T105.\nFigure 5.4.9.1-1 illustrates the UE assistance data termination procedure, which involves the cooperation between the UE and the network to efficiently process data. The figure depicts the process in three main steps: data reception, data processing, and data transmission. In the first step, the UE receives data from the network, which is then processed in the UE. The processed data is then transmitted back to the network for further use. The figure also shows the role of the network in assisting the UE in data processing, which is crucial for improving the overall efficiency of the data processing process.\nFigure 5.4.9.1-1: UE assistance data termination procedure\nOn receipt of a PMFP UAT command message, the UPF shall remove the DL steering information, if created for a previous UE assistance data operation, and shall perform DL traffic distribution according to the load balancing percentages without UE assistance operation. Furthermore, the UPF shall create a PMFP UAT COMPLETE message . In the PMFP UAT COMPLETE message, the UPF shall set the EPTI IE to the EPTI value in the PMFP UAT COMMAND message. The UPF shall send the PMFP UAT COMPLETE message over the access of the MA PDU session via which the PMFP UAT COMMAND message was received.\nUpon reception of a PMFP UAT COMPLETE message with the same EPTI as the allocated EPTI value, the UE shall stop the timer T105.\nThe following abnormal cases can be identified:\na)\tExpiry of the timer T105\nThe UE shall, on the first expiry of the timer T105, retransmit the PMFP UAT COMMAND message and shall reset and start timer T105. This retransmission is repeated up to four times, i.e. on the fifth expiry of timer T105, the UE shall abort the procedure.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "5.4.10\tTraffic duplication suspend procedure",
                            "text_content": "The purpose of the traffic duplication suspend procedure is to enable the UPF to suspend traffic duplication of the MA PDU session when the redundant steering mode is applied.\nThe traffic duplication suspend procedure can be performed over any available access of the MA PDU session.\nAfter the traffic duplication has been suspended and:\na)\tif both accesses are available and the steering mode information field in the access selection descriptor inside the ATSSS rule is set to \"Primary access is 3GPP\" or set to \"Primary access is non-3GPP\", the UE and UPF shall send all the traffic of the SDF on the indicated primary access (3GPP access or non-GPP access);\nb)\tif both accesses are available and the steering mode information field in the access selection descriptor inside the ATSSS rule is set to \"Primary access is not provided\", the UE and UPF select an access to send all the traffic of the SDF based on their implementation; or\nc)\tif there is only one access available, the UE and UPF shall send the traffic of the SDF on the available access.\nIn order to initiate a traffic duplication suspend procedure over an access of the MA PDU session, the UPF shall allocate a EPTI value as specified in clause 5.4.2.2 and shall create a PMFP TDS REQUEST message. In the PMFP TDS REQUEST message, the UPF:\na)\tshall set the EPTI IE to the allocated EPTI value; and\nb)\tmay include the traffic type IE that indicates the type of traffic where duplication is to be suspended (\"GBR\", \"non-GBR\" or \"GBR and non-GBR\").\nThe UPF shall start a timer T207 and shall send the PMFP TDS REQUEST message over any available access of the MA PDU session.\nAn example of the traffic duplication suspend procedure is shown in figure 5.4.10.2-1.\nFigure 5.4.10.2 -1: Traffic duplication suspend procedure\n\nFigure 5.4.10.2 -1 depicts a network traffic duplication suspend procedure, illustrating the process of temporarily halting the duplication of traffic between two nodes in a network. The figure shows the network nodes, with the duplication point highlighted by the dashed line. The procedure aims to prevent data overload and ensure network stability during maintenance or testing.\nFigure 5.4.10.2-1: Traffic duplication suspend procedure\nUpon reception of the PMFP TDS REQUEST message, the UE:\na)\tshall stop the duplication of the traffic, if any, as per the traffic type indicated in the traffic type IE if included. If the traffic type IE is not included, the UE shall stop the duplication of both GBR traffic and non-GBR traffic, if any; and\nb)\tshall create a PMFP TDS RESPONSE message. In the PMFP TDS RESPONSE message, the UE shall set the EPTI IE to the EPTI value in PMFP TDS REQUEST message. The UE shall send the PMFP TDS RESPONSE message over the access of the MA PDU session via which the PMFP TDS REQUEST message was received.\nUpon reception of a PMFP TDS RESPONSE message with the same EPTI as the allocated EPTI value, the UPF shall stop the timer T207.\nThe following abnormal cases can be identified:\na)\tExpiration of the timer T207\nThe UPF shall, on the first expiry of the timer T207, retransmit the PMFP TDS REQUEST message and shall reset and start timer T207. This retransmission is repeated up to four times, i.e. on the fifth expiry of timer T207, the UPF shall abort the procedure.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "5.4.11\tTraffic duplication resume procedure",
                            "text_content": "The purpose of the traffic duplication resume procedure is to enable the UPF to resume traffic duplication of the MA PDU session when the redundant steering mode is applied.\nThe traffic duplication resume procedure can be performed over any available access of the MA PDU session.\nIn order to initiate a traffic duplication resume procedure over an access of the MA PDU session, the UPF shall allocate a EPTI value as specified in clause 5.4.2.2 and shall create a PMFP TDR REQUEST message. In the PMFP TDR REQUEST message, the UPF:\na)\tshall set the EPTI IE to the allocated EPTI value; and\nb)\tmay include the traffic type IE that indicates the type of traffic where duplication is to be resumed (\"GBR\", \"non-GBR\" or \"GBR and non-GBR\").\nThe UPF shall start a timer T208 and shall send the PMFP TDR REQUEST message over any available access of the MA PDU session.\nAn example of the traffic duplication resume procedure is shown in figure 5.4.11.2-1.\nFigure 5.4.11.2 -1: Traffic duplication resume procedure illustrates the process of resuming traffic duplication in a network. The figure depicts the steps involved in the procedure, including the initiation of the duplication process, the temporary suspension due to a network issue, and the subsequent resumption to ensure uninterrupted service. Key components include the network nodes, switches, and the duplication process itself, which is represented by the arrows and connections between the nodes. The figure emphasizes the importance of redundancy and quick recovery in maintaining network performance and reliability.\nFigure 5.4.11.2-1: Traffic duplication resume procedure\nUpon reception of the PMFP TDR REQUEST message, the UE:\na)\tmay resume the duplication of the traffic, if any, as per the traffic type indicated in the traffic type IE if included. If the traffic type IE is not included, the UE may resume the duplication of both GBR traffic and non-GBR traffic, if any; and\nb)\tshall create a PMFP TDR RESPONSE message. In the PMFP TDR RESPONSE message, the UE shall set the EPTI IE to the EPTI value in PMFP TDR REQUEST message. The UE shall send the PMFP TDR RESPONSE message over the access of the MA PDU session via which the PMFP TDR REQUEST message was received.\nUpon reception of a PMFP TDR RESPONSE message with the same EPTI as the allocated EPTI value, the UPF shall stop the timer T208.\nThe following abnormal cases can be identified:\na)\tExpiration of the timer T208:\nThe UPF shall, on the first expiry of the timer T208, retransmit the PMFP TDR REQUEST message and shall reset and start timer T208. This retransmission is repeated up to four times, i.e. on the fifth expiry of timer T208, the UPF shall abort the procedure.\n\n\n",
                            "figures_meta_data": [],
                            "tables": []
                        }
                    ]
                }
            ]
        },
        {
            "title": "6\tPDUs and parameters specific to the present document",
            "description": "",
            "summary": "",
            "tables": [],
            "figures_meta_data": [],
            "subsections": [
                {
                    "title": "6.1\tATSSS parameters",
                    "description": "",
                    "summary": "",
                    "text_content": "",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": [
                        {
                            "title": "6.1.1\tGeneral",
                            "text_content": "The ATSSS parameters are the contents of the ATSSS container as defined in clause 9.11.4.22 of 3GPP TS 24.501 [6].\nThe purpose of the ATSSS parameters is to indicate the parameters associated with ATSSS (e.g. ATSSS rules).\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "6.1.2\tEncoding of ATSSS parameters",
                            "text_content": "The ATSSS container contents include one or more ATSSS parameters and they are coded as shown in figure 6.1.2-1, figure 6.1.2-2 and table 6.1.2-1.\nFigure 6.1.2-1: ATSSS container contents\n\nFigure 6.1.2-2: ATSSS parameter\nTable 6.1.2-1: ATSSS parameter\n\n\n",
                            "figures_meta_data": [],
                            "tables": [
                                {
                                    "description": "The ATSSS container contents include one or more ATSSS parameters and they are coded as shown in figure 6.1.2-1, figure 6.1.2-2 and table 6.1.2-1.",
                                    "table number": 3,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Figure 6.1.2-1: ATSSS container contents",
                                    "table number": 4,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 6.1.2-1: ATSSS parameter",
                                    "table number": 5,
                                    "summary": "",
                                    "name": ""
                                }
                            ]
                        },
                        {
                            "title": "6.1.3\tATSSS rules",
                            "text_content": "The ATSSS rules are defined in 3GPP TS 23.501 [2] and is set of one or more ATSSS rules, where a rule is composed of:\na)\tan ATSSS rule ID identifying the individual ATSSS rule;\nb)\tan ATSSS rule operation identifying whether the ATSSS rule is added to or deleted from the set of ATSSS rules;\nc)\ta precedence value of the ATSSS rule identifying the precedence of the ATSSS rule;\nd)\ta traffic descriptor matching a service data flow (SDF); and\ne)\tan access selection descriptor including:\n1)\ta steering functionality set to:\nA)\tMPTCP functionality, the UE steers the SDF by using the MPTCP functionality;\nB)\tMPQUIC functionality, the UE steers the SDF by using the MPQUIC functionality;\nC)\tATSSS-LL functionality, the UE steers the SDF by using the ATSSS-LL functionality;or\nD)\tUE's supported steering functionality;\nwhere the UE, supporting multiple steering functionalities, shall use a steering functionlity by using the ATSSS rules (see 3GPP TS 23.503 [3A]) to apply for a specific packet flow;\nNOTE 0:\tThe steering functionality can only be set to \"UE's supported steering functionality\" if the UE indicated that the UE supports only \"ATSSS Low-Layer functionality with any steering mode\".\nNOTE 1:\tIf the included steering functionality is not supported by the UE, the UE ignores this ATSSS rule, and proceeds with the evaluation of the ATSSS rule with the next smallest precedence, if available.\n2)\ta steering mode:\nA)\tactive-standby, the UE steers the SDF by using the active access if the active access is available. If the active access is not available and the standby access is available, the UE steers the SDF by using the standby access;\nB)\tsmallest delay, the UE steers the SDF by using the access network with the smallest RTT. If there is only one access available, the UE steers the SDF by using the available access. This steering mode is only applicable to non-GBR SDF;\nC)\tload balancing, the UE steers the SDF across both the 3GPP access and the non-3GPP access with a given precentage if both accesses are available. If there is only one access available, the UE steers the SDF by using the available access. This steering mode is only applicable to non-GBR SDF;\nD)\tpriority based, the UE steers the SDF over the access with high priority unless the access with high priority is congested or unavailable, when the UE steers the SDF over both the access with high priority and the access with low priority. This steering mode is only applicable to non-GBR SDF;or\nE)\tredundant, the UE duplicates the traffic of an SDF on both the 3GPP access and the non-3GPP access according to the following rules when there is no threshold values provided in the the access selection descriptor:\n-\tif both accesses are available and the steering mode information field in the access selection descriptor is set to \"Primary access is not provided\", the UE shall duplicate all the traffic of the SDF on both accesses;\n-\tif both accesses are available and the steering mode information field in the access selection descriptor is set to \"Primary access is 3GPP\" or set to \"Primary access is non-3GPP\", the UE shall send all the traffic of an SDF on the indicated primary access (3GPP access or non-GPP access) and may dublicate the traffic on the other access, where how many and which data packets are duplicated by UE on the other access are implementation dependent; or\n-\tIf there is only one access available, the UE shall send the traffic of the SDF on the available access.\nThe redundant steering mode is applicable to both GBR SDF and non-GBR SDF when there is no threshold value provided in the access selection descriptor. If threshold value is provided in the access selection descriptor, the redundant steering mode is applicable to only non-GBR SDF. If the steering functionality is set to ATSSS-LL functionality, the steering mode shall not be set to redundant.\n3)\ta steering mode additional indicator:\nA)\tload balancing percentages adjustment operation (LBPAO):\n-\tautonomous load-balance operation, this operation is only applicable to load balancing steering mode. With this operation, the UE may ignore the information provided in the steering mode information (i.e. percentages of the SDF traffic transmitted over 3GPP access and non-3GPP access), and that the UE may autonomously determine its own percentages for traffic splitting, in a way that maximizes the aggregated bandwidth in the uplink direction. The UPF may apply a similar behaviour in the downlink direction; or\n-\tUE assistance operation, this operation is only applicable to load balancing steering mode. With this operation, the UE may decide how to distribute the UL traffic of the matching SDF based on the UE's internal state (e.g. when the UE is in the special internal state such as lower battery level) and inform the UPF how it decided to distribute the UL traffic of the matching SDF by performing UE assistance data provisioning procedure as specified in clause 5.4.8;\nNOTE 2:\tThe UE is expected to determine its own percentages for traffic splitting by performing measurements across both the 3GPP access and the non-3GPP access.\n4)\tthreshold values include one maximum RTT value or one maximum packet loss rate value or both. The threshold values are only used when the steering mode is indicated as load balancing, priority based; or redundant, where in the redundant steering mode, only either maximum RTT value or maximum packet loss rate value may be provided and not both; and\nNOTE 3:\tThe threshold values and the LBPAO set with either \"autonomous load-balancing operation is allowed\" or \"UE assistance operation is allowed\" in the steering mode additional indicator cannot exist at the same time in an ATSSS rule.\nNOTE 4:\tThe threshold values and the steering mode indicator cannot be provided together in an access selection descriptor.\n5)\ta transport mode to identify the transport mode for the matching traffic when the steering functionality is MPQUIC functionality.\nNOTE 5:\tIf the steering functionality is not MPQUIC functionality, the transport mode is not provided.\nThe UE and the UPF use the provided threshold values on both 3GPP access and non-3GPP access as follows:\nA)\tfor the load balancing steering mode,\ni)\tif the maximum RTT value or the maximum packet loss rate value of the MA PDU session in an access exceeds the indicated value, the UE and the UPF reduce the amount of traffic sent over that access and they send traffic over the other access; and\nii)\tif both the maximum RTT value and the maximum packet loss rate value of the MA PDU session for both accesses do not exceed the provided threshold values, the UE and the UPF steer the SDF traffic across both the 3GPP access and non-3GPP access as indicated by the steering information of the ATSSS rule;\nB)\tfor the priority based steering mode, the UE and the UPF use the maximum RTT value or the maximum packet loss rate value or both to detect when an access of an MA PDU session is congested. If the maximum RTT value or the maximum packet loss rate value in an access of the MA PDU session exceeds the indicated value, the UE and the UPF may send some traffic over the other access, i.e. the UE splits the SDF traffic over both the access with high priority and the access with low priority; and.\nC)\tfor the redundant steering mode,\ni)\tif the maximum packet loss rate value is indicated and:\n-\tthe maximum packet loss rate value of the MA PDU session on both accesses exceeds the indicated value, the UE and UPF shall duplicate the traffic of the SDF on both accesses;\n-\tthe maximum packet loss rate value of the MA PDU session on only one access exceeds the indicated value, the UE and UPF shall send the traffic of the SDF on the other access; or\n-\tthe maximum packet loss rate value of the MA PDU session on any access does not exceed the indicated value, the UE and UPF shall send the traffic of the SDF only over the primary access indicated in the steering mode information field, if any. If the steering mode information field is set to \"Primary access is not provided\", the UE and UPF select a primary access based on their implementation (e.g., the access with the lowest packet loss rate); or\nii)\tif the maximum RTT value is indicated and:\n-\tthe maximum RTT value of the MA PDU session on both accesses exceeds the indicated value, the UE and UPF may duplicate the traffic of the SDF on both accesses based on their implementation;\n-\tthe maximum RTT value of the MA PDU session on only one access exceeds the indicated value, the UE and UPF shall send the traffic of the SDF on the other access; or\n-\tthe maximum RTT value of the MA PDU session on any access does not exceed the indicated value, the UE and UPF shall send the traffic of the SDF only over the primary access indicated in the steering mode information field, if any. If the steering mode information field is set to \"Primary access is not provided\", the UE and UPF select a primary access based on their implementation (e.g., the access with the lowest RTT).\nNOTE 6:\tIf measurement results on an access are not available for a parameter, it is considered that the measured parameter for this access has not exceeded the provided threshold value.\nThe ATSSS rules are encoded as shown in figure 6.1.3.2-1, to figure 6.1.3.2-5 and table 6.1.3.2-1.\nFigure 6.1.3.2-1: ATSSS parameter contents including one or more ATSSS rules\n\nFigure 6.1.3.2-2: ATSSS rule\n\nNOTE:\tIf the steering mode is defined as smallest delay, then “Steering mode information” is not present and z=f+4; otherwise, z=f+5.\nFigure 6.1.3.2-3: Access selection descriptor\nFigure 6.1.3.2-4: Steering mode additional indicator\nFigure 6.1.3.2-5: Threshold values\nFigure 6.1.3.2-6: Transport mode\nTable 6.1.3.2-1: ATSSS parameter contents including an ATSSS rule\n\n",
                            "figures_meta_data": [],
                            "tables": [
                                {
                                    "description": "The ATSSS rules are encoded as shown in figure 6.1.3.2-1, to figure 6.1.3.2-5 and table 6.1.3.2-1.",
                                    "table number": 6,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Figure 6.1.3.2-1: ATSSS parameter contents including one or more ATSSS rules",
                                    "table number": 7,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Figure 6.1.3.2-2: ATSSS rule",
                                    "table number": 8,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Figure 6.1.3.2-3: Access selection descriptor",
                                    "table number": 9,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Figure 6.1.3.2-4: Steering mode additional indicator",
                                    "table number": 10,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Figure 6.1.3.2-5: Threshold values",
                                    "table number": 11,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 6.1.3.2-1: ATSSS parameter contents including an ATSSS rule",
                                    "table number": 12,
                                    "summary": "",
                                    "name": ""
                                }
                            ]
                        },
                        {
                            "title": "6.1.4\tNetwork steering functionalities information",
                            "text_content": "In order for the UE to support the MPTCP functionality, the UE shall support the TCP extensions for multipath operation specified in IETF RFC 8684 [8].\nMPQUIC protocol is built on top of UDP/IP and to implement the MPQUIC functionality:\na)\tthe UE and the UPF shall support QUIC layer supporting QUIC protocol as defined IETF RFC 9000 [9A], IETF RFC 9001[9B], IETF RFC RFC 9002 [9C] and the extensions defined in:\n1)\tIETF RFC RFC 9221 [9.4] for supporting unreliable datagram transport with QUIC; and\n2)\tdraft-ietf-quic-multipath [9I] for supporting QUIC connections using multiple paths simultaneously; and\nb)\tthe UE shall implement the HTTP/3 client and the UPF shall implement HTTP/3 proxy of the HTTP/3 layer, where the HTTP/3 layer support the HTTP/3 protocol defined in IETF RFC 9114 [9F] and the following extensions defined in:\n1)\tIETF RFC 9298 [9E] for supporting UDP proxying over HTTP;\n2)\tIETF RFC 9297 [9G] for supporting HTTP datagrams; and\n3)\tIETF RFC 9220 [9H] for supporting Extended CONNECT.\nAfter the QUIC connection is established, the UE sends all uplink traffic of the QUIC connection to the QoS flow associated with the QUIC connection. This enables the network to determine the QoS flow associated with the QUIC connection for selecting a QUIC connection for downlink traffic of the QoS flow.\nNOTE:\tHow the UE ensures that all uplink traffic of the QUIC connection is sent to the QoS flow associated with the QUIC connection, is an implementation issue. Upon establishment of the QUIC connection, methods such as liveness testing as defined in IETF RFC 9000 [9A], can be used over the QoS flow of the QUIC connection.\nWhen the UE indicates support for MPTCP functionality with any steering mode and the ATSSS-LL functionality with only the active-standby steering mode and the network accepts to enable these functionalities for an MA PDU session of IP type in the UPF as specified in the clause 5.32.2 of 3GPP TS 23.501 [2], then the network shall provide the following information to the UE:\na)\ttwo \"link-specific multipath\" IP addresses/prefixes used only by the MPTCP functionality in the UE, one associated with the 3GPP access and another associated with the non-3GPP access;\nNOTE:\tIt is possible that the network provides the \"link-specific multipath\" IP addresses/prefix that is not routable via N6 (e.g. IPv6 link local address).\nb)\tthe IP address, port number and the type of one or more MPTCP proxies in the UPF; and\nc)\tone or more ATSSS rules including an ATSSS rule for non-MPTCP traffic which is. composed of a precedence with value \"255\", a \"match-all type\" traffic descriptor, an \"ATSSS-LL functionality\" steering functionality and an \"active-standby\" steering mode.\nIn this release of the specification, the UPF shall support the Transport Converter as specified in IETF RFC 8803 [9].\nIn this release of the specification, the UE shall support the client extensions specified in IETF RFC 8803 [9], and only client-initiated multipath connections via a Transport Converter are supported.\nThe UE shall use the \"link-specific multipath\" addresses/prefixes to establish subflows over non-3GPP access and over 3GPP access.\nWhen the MA PDU session is Ethernet type, the network shall not enable the MPTCP functionality with any steering mode and the ATSSS-LL functionality with only the active-standby steering mode.\nWhen the UE indicates ATSSS-LL capability with any steering mode (i.e., any steering mode allowed for ATSSS-LL functionality) and the network accepts to enable this functionality for an MA PDU session of any supported type, then the network shall enable ATSSS-LL functionality with any steering mode (i.e., any steering mode allowed for ATSSS-LL functionality) in the UPF as specified in the clause 5.32.2 of 3GPP TS 23.501 [2] and provide one or more ATSSS rules to the UE.\nIn an ATSSS capable UE, the following ATSSS-LL requirements apply:\na)\tfor an MA PDU session of Ethernet PDU session type, the ATSSS-LL functionality with any steering mode (i.e., any steering mode allowed for ATSSS-LL functionality) is mandatory; and\nb)\tfor an MA PDU session of IPv4, IPv6, or IPv4v6 PDU session type, if the UE does not support:\n1)\tthe MPTCP functionality with any steering mode and the ATSSS-LL functionality with only the active-standby steering mode;\n2)\tthe MPTCP functionality with any steering mode and the ATSSS-LL functionality with any steering mode (i.e., any steering mode allowed for ATSSS-LL functionality);\n3)\tthe MPQUIC functionality with any steering mode and the ATSSS-LL functionality with only the active-standby steering mode;\n4)\tthe MPQUIC functionality with any steering mode and the ATSSS-LL functionality with any steering mode;\n5)\tthe MPTCP functionality with any steering mode, the MPQUIC functionality with any steering mode and the ATSSS-LL functionality with only the active-standby steering mode; or\n6)\tthe MPTCP functionality with any steering mode, the MPQUIC functionality with any steering mode and the ATSSS-LL functionality with any steering mode,\nthen ATSSS-LL functionality with any steering mode (i.e., any steering mode allowed for ATSSS-LL functionality) is mandatory.\nWhen the UE indicates support for MPTCP functionality with any steering mode and the ATSSS-LL functionality with any steering mode (i.e., any steering mode allowed for ATSSS-LL functionality) and the network accepts to enable these functionalities for an MA PDU session of IP type in the UPF as specified in the clause 5.32.2 of 3GPP TS 23.501 [2], then the network shall provide the following information to the UE:\na)  two \"link-specific multipath\" IP addresses/prefixes used only by the MPTCP functionality in the UE, one associated with the 3GPP access and another associated with the non-3GPP access;\nNOTE:\tIt is possible that the network provides the \"link-specific multipath\" IP addresses/prefix that is not routable via N6 (e.g. IPv6 link local address).\nb)\tthe IP address, port number and the type of one or more MPTCP proxies in the UPF; and\nc)\tone or more ATSSS rules.\nIn this release of the specification, the UPF shall support the Transport Converter as specified in IETF RFC 8803 [9].\nIn this release of the specification, the UE shall support the client extensions specified in IETF RFC 8803 [9], and only client-initiated multipath connections via a Transport Converter are supported.\nThe UE shall use the \"link-specific multipath\" addresses/prefixes to establish subflows over non-3GPP access and over 3GPP access.\nWhen the MA PDU session is Ethernet type, the network shall not enable the MPTCP functionality with any steering mode and the ATSSS-LL functionality with any steering mode (i.e., any steering mode allowed for ATSSS-LL functionality).\nWhen the UE indicates support for MPQUIC functionality with any steering mode and ATSSS-LL functionality with only active-standby steering mode and the network accepts to enable these functionalities for an MA PDU session of IP type in the UPF which support MPQUIC proxy functionality, then the network shall provide the following information to the UE:\na)\ttwo \"link-specific multipath\" IP addresses/prefixes used only by the MPQUIC functionality in the UE to establish UDP subflows with the MPQUIC Proxy functionality in the UPF, one associated with the 3GPP access network and another associated with the non-3GPP access network;\nNOTE:\tIt is possible that the network provides the \"link-specific multipath\" IP addresses/prefix that is not routable via N6 (e.g. IPv6 link local address).\nb)\tthe IP address, port number and the type of one or more MPQUIC proxies in the UPF; and\nc)\tone or more ATSSS rules including one ATSSS rule for non-MPQUIC traffic which is composed of a precedence with value \"255\", a \"match-all type\" traffic descriptor, an \"ATSSS-LL functionality\" steering functionality and an \"active-standby\" steering mode.\nWhen the MA PDU session is Ethernet type, the network shall not enable the MPQUIC functionality with any steering mode and the ATSSS-LL functionality with only active-standby steering mode.\nWhen the UE indicates support for MPQUIC functionality with any steering mode and ATSSS-LL functionality with any steering mode and the network accepts to enable these functionalities for an MA PDU session of IP type in the UPF which support MPQUIC proxy functionality, then the network shall provide the following information to the UE:\na)\ttwo \"link-specific multipath\" IP addresses/prefixes used only by the MPQUIC functionality in the UE to establish UDP subflows with the MPQUIC Proxy functionality in the UPF, one associated with the 3GPP access network and another associated with the non-3GPP access network;\nNOTE:\tIt is possible that the network provides the \"link-specific multipath\" IP addresses/prefix that is not routable via N6 (e.g. IPv6 link local address).\nb)\tthe IP address, port number and the type of one or more MPQUIC proxies in the UPF; and\nc)\tone or more ATSSS rules.\nWhen the MA PDU session is Ethernet type, the network shall not enable the MPQUIC functionality with any steering mode and the ATSSS-LL functionality with any steering mode.\nWhen the UE indicates support for for MPTCP functionality with any steering mode, MPQUIC functionality with any steering mode and ATSSS-LL functionality with only active-standby steering mode and the network accepts to enable these functionalities for an MA PDU session of IP type in the UPF which support MPTCP proxy functionality and MPQUIC proxy functionality, then the network shall provide the following information to the UE:\na)\ttwo \"link-specific multipath\" IP addresses/prefixes used only by the MPTCP functionality in the UE to establish UDP subflows with the MPTCP proxy functionality in the UPF, one associated with the 3GPP access network and another associated with the non-3GPP access network;\nb)\ttwo \"link-specific multipath\" IP addresses/prefixes used only by the MPQUIC functionality in the UE to establish UDP subflows with the MPQUIC proxy functionality in the UPF, one associated with the 3GPP access network and another associated with the non-3GPP access network;\nNOTE 1:\tIt is possible that neither of the \"link-specific multipath\" IP addresses/prefix used by only the MPTCP functionality nor only the MPQUIC functionality which are provided by the network, is routable via N6 (e.g. IPv6 link local address).\nNOTE 2:\tThe \"link-specific multipath\" addresses used by the MPTCP functionality and the \"link-specific multipath\" addresses used by the MPQUIC functionality can be the same.\nc)\tthe IP address, port number, and the type of one or more MPTCP proxies in the UPF;\nd)\tthe IP address, port number, and the type of one or more MPQUIC proxies in the UPF; and\nNOTE 3:\tThe MPTCP proxy and the MPQUIC proxy in the UPF can use the same IP address and port number.\ne)\tone or more ATSSS rules including one ATSSS rule for non-MPTCP and non-MPQUIC traffic which is composed of a precedence with value \"255\", a \"match-all type\" traffic descriptor, an \"ATSSS-LL functionality\" steering functionality and an \"active-standby\" steering mode.\nWhen the MA PDU session is Ethernet type, the network shall not enable the MPTCP functionality nor the MPQUIC functionality with any steering mode and the ATSSS-LL functionality with only active-standby steering mode.\nWhen the UE indicates support for MPTCP functionality with any steering mode, MPQUIC functionality with any steering mode and ATSSS-LL functionality with any steering mode and the network accepts to enable these functionalities for an MA PDU session of IP type in the UPF which support MPTCP proxy functionality and MPQUIC proxy functionality, then the network shall provide the following information to the UE:\na)\ttwo \"link-specific multipath\" IP addresses/prefixes used only by the MPTCP functionality in the UE to establish UDP subflows with the MPTCP proxy functionality in the UPF, one associated with the 3GPP access network and another associated with the non-3GPP access network;\nb)\ttwo \"link-specific multipath\" IP addresses/prefixes used only by the MPQUIC functionality in the UE to establish UDP subflows with the MPQUIC proxy functionality in the UPF, one associated with the 3GPP access network and another associated with the non-3GPP access network;\nNOTE 1:\tIt is possible that neither of the \"link-specific multipath\" IP addresses/prefix used by only the MPTCP functionality or only the MPQUIC functionality which are provided by the network, is routable via N6 (e.g. IPv6 link local address).\nNOTE 2:\tThe \"link-specific multipath\" addresses used by the MPTCP functionality and the \"link-specific multipath\" addresses used by the MPQUIC functionality can be the same.\nc)\tthe IP address, port number and the type of one or more MPTCP proxies in the UPF;\nd)\tthe IP address, port number and the type of one or more MPQUIC proxies in the UPF; and\nNOTE 3:\tThe MPTCP proxy and the MPQUIC proxy in the UPF can use the same IP address and port number.\ne)\tone or more ATSSS rules.\nWhen the MA PDU session is Ethernet type, the network shall not enable the MPTCP functionality nor the MPQUIC functionality with any steering mode and the ATSSS-LL functionality with any steering mode\nThe network steering functionalities information contains:\na)\taddressing information for the ATSSS capable UE actingas the client for a functionality; and\nb)\taddressing and type information for the proxy for that functionality,\nwhere the network steering functionalities information is either MPTCP network steering functionalities information or MPQUIC network steering functionalities information and is identified by ATSSS parameter identifier as encoded in table 6.1.2-1.\nThe network steering functionalities information is encoded as shown in figure 6.1.4.2-1, figure 6.1.4.2-2 and table 6.1.4.2-1:\nFigure 6.1.4.2-1: Network steering functionalities information including client IP addresses and Proxy information\nFigure 6.1.4.2-2: Proxy information\nTable 6.1.4.2-1: Client IP addresses and Proxy information\n\n",
                            "figures_meta_data": [],
                            "tables": [
                                {
                                    "description": "The network steering functionalities information is encoded as shown in figure 6.1.4.2-1, figure 6.1.4.2-2 and table 6.1.4.2-1:",
                                    "table number": 13,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Figure 6.1.4.2-1: Network steering functionalities information including client IP addresses and Proxy information",
                                    "table number": 14,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 6.1.4.2-1: Client IP addresses and Proxy information",
                                    "table number": 15,
                                    "summary": "",
                                    "name": ""
                                }
                            ]
                        },
                        {
                            "title": "6.1.5\tMeasurement assistance information",
                            "text_content": "The measurement assistance information may be transmitted by the network to the ATSSS capable UE. If the UE is only capable of supporting:\na)\tthe MPTCP functionality with any steering mode and the ATSSS-LL functionality with only the active-standby steering mode;\nb)\tthe MPQUIC functionality with any steering mode and the ATSSS-LL functionality with only the active-standby steering mode; or\nc)\tthe MPTCP functionality with any steering mode, the MPQUIC functionality with any steering mode and the ATSSS-LL functionality with only the active-standby steering mode,\nthe measurement assistance information is only used by the UE to send access availability/unavailability to the UPF. In this case, the UE and UPF shall not perform RTT and PLR measurements using PMF. The UE and UPF shall use the RTT and PLR measurements available at the MPTCP layer or MPQUIC layer.\nThe measurement assistance information is defined in 3GPP TS 23.501 [2] and it contains:\na)\taddressing for the PMF in the UPF according to:\n1)\tif the PDU session is IP type, the measurement assistance information contains IP address for the PMF with an allocated port number associated with the 3GPP access network and another allocated port number associated with non-3GPP access network for access performance measurements over the QoS flow of the default QoS rule, and optionally a QoS flow list according to figure 6.1.5.2-3 and figure 6.1.5.2-4 with the allocated port numbers to perform measurements over the QoS flows of non-default QoS rules; and\n2)\tif the PDU session is Ethernet type, the measurement assistance information contains a MAC address associated with the 3GPP access network and another MAC address associated with the non-3GPP address network for the PMF for access performance measurements over the QoS flow of the default QoS rule, and optionally a QoS flow list according to figure 6.1.5.2-3 and figure 6.1.5.2-5 with the MAC addresses to perform for measurements over the QoS flows of non-default QoS rules; and\nb)\tan indicator to report the availability and unavailability of an access network.\nThe measurement assistance information contains addressing information for the PMF in the UPF and is encoded as shown in figure 6.1.5.2-1 and figure 6.1.5.2-2 and table 6.1.5.2-1 and table 6.1.5.2-2.\nFigure 6.1.5.2-1: ATSSS parameter contents including one PMF IP address information\nTable 6.1.5.2-1: PMF IP address type\n\nFigure 6.1.5.2-2: ATSSS parameter contents including one PMF MAC address information\n\nTable 6.1.5.2-2: PMF MAC address type\n\nFigure 6.1.5.2-3: QoS flow list information element\n\nFigure 6.1.5.2-4: QoS flow – IP address\nFigure 6.1.5.2-5: QoS flow – MAC address\nTable 6.1.5.2-3: QoS flow\n\n",
                            "figures_meta_data": [],
                            "tables": [
                                {
                                    "description": "The measurement assistance information contains addressing information for the PMF in the UPF and is encoded as shown in figure 6.1.5.2-1 and figure 6.1.5.2-2 and table 6.1.5.2-1 and table 6.1.5.2-2.",
                                    "table number": 16,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 6.1.5.2-1: PMF IP address type",
                                    "table number": 17,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "",
                                    "table number": 18,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 6.1.5.2-2: PMF MAC address type",
                                    "table number": 19,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "",
                                    "table number": 20,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "",
                                    "table number": 21,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Figure 6.1.5.2-4: QoS flow – IP address",
                                    "table number": 22,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 6.1.5.2-3: QoS flow",
                                    "table number": 23,
                                    "summary": "",
                                    "name": ""
                                }
                            ]
                        },
                        {
                            "title": "6.1.6\tATSSS PCO parameters",
                            "text_content": "Clause 6.1.6 specifies PCO parameters used for ATSSS.\nThe purpose of the ATSSS request PCO parameter is to provide UE parameters for MA PDU session management.\nThe ATSSS request PCO parameter container contents are coded as shown in figure 6.1.6.2-1 and table 6.1.6.2-1.\nThe ATSSS request PCO parameter container contents may be one or more octets long. If the ATSSS request PCO parameter container contents is longer than one octet, octets other than the first octet shall be ignored.\nFigure 6.1.6.2-1: ATSSS request PCO parameter container contents\nTable 6.1.6.2-1: ATSSS request PCO parameter container contents\n\nThe purpose of the ATSSS response with the length of two octets PCO parameter is to provide network parameters for MA PDU session management.\nThe ATSSS response with the length of two octets PCO parameter container contents are coded as shown in figure 6.1.6.3-1 and table 6.1.6.3-1.\nThe ATSSS response with the length of two octets PCO parameter container contents may be one or more octets long. If the ATSSS response with the length of two octets PCO parameter container contents is longer than as indicated in the figure 6.1.6.3-1, the octets after the last field of the figure 6.1.6.3-1 shall be ignored.\nFigure 6.1.6.3-1: ATSSS response with the length of two octets PCO parameter container contents\nTable 6.1.6.3-1: ATSSS response with the length of two octets PCO parameter container contents\n\n",
                            "figures_meta_data": [],
                            "tables": [
                                {
                                    "description": "The ATSSS request PCO parameter container contents may be one or more octets long. If the ATSSS request PCO parameter container contents is longer than one octet, octets other than the first octet shall be ignored.",
                                    "table number": 24,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 6.1.6.2-1: ATSSS request PCO parameter container contents",
                                    "table number": 25,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "The ATSSS response with the length of two octets PCO parameter container contents may be one or more octets long. If the ATSSS response with the length of two octets PCO parameter container contents is longer than as indicated in the figure 6.1.6.3-1, the octets after the last field of the figure 6.1.6.3-1 shall be ignored.",
                                    "table number": 26,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 6.1.6.3-1: ATSSS response with the length of two octets PCO parameter container contents",
                                    "table number": 27,
                                    "summary": "",
                                    "name": ""
                                }
                            ]
                        }
                    ]
                },
                {
                    "title": "6.2\tEncoding of performance measurement function (PMF) protocol (PMFP)",
                    "description": "",
                    "summary": "",
                    "text_content": "",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": [
                        {
                            "title": "6.2.1\tMessage functional definitions and format",
                            "text_content": "The following PMFP messages are specified:\n-\tPMFP echo request;\n-\tPMFP echo response;\n-\tPMFP access report;\n-\tPMFP acknowledgement;\n-\tPMFP UAD provisioning;\n-\tPMFP UAD provisioning complete;\n-\tPMFP UAT command;\n-\tPMFP UAT complete;\n-\tPMFP PLR count request;\n-\tPMFP PLR count response;\n-\tPMFP PLR report request;\n-\tPMFP PLR report response;\n-\tPMFP TDS request;\n-\tPMFP TDS response;\n-\tPMFP TDR request; and\n-\tPMFP TDR response.\nThe PMFP ECHO REQUEST message is sent by the UE to the UPF or by the UPF to the UE to initiate detection of RTT.\nSee table 6.2.1.2.1-1.\nMessage type:\tPMFP ECHO REQUEST\nSignificance:\tdual\nDirection:\tUE to UPF or UPF to UE\nTable 6.2.1.2.1-1: PMFP ECHO REQUEST message content\n\nThe PMFP ECHO RESPONSE message is sent by the UPF to the UE or by the UE to the UPF as response to an PMFP ECHO REQUEST message to enable detection of RTT.\nSee table 6.2.1.3.1-1.\nMessage type:\tPMFP ECHO RESPONSE\nSignificance:\tdual\nDirection:\tUE to UPF or UPF to UE\nTable 6.2.1.3.1-1: PMFP ECHO RESPONSE message content\n\nThe PMFP ACCESS REPORT message is sent by the UE to the UPF to inform the UPF about access availability or unavailability.\nSee table 6.2.1.4.1-1.\nMessage type:\tPMFP ACCESS REPORT\nSignificance:\tdual\nDirection:\tUE to UPF\nTable 6.2.1.4.1-1: PMFP ACCESS REPORT message content\n\nThe PMFP ACKNOWLEDGEMENT message is sent by the UPF to the UE to acknowledge reception of a PMFP ACCESS REPORT message.\nSee table 6.2.1.5.1-1.\nMessage type:\tPMFP ACKNOWLEDGEMENT\nSignificance:\tdual\nDirection:\tUPF to UE\nTable 6.2.1.5.1-1: PMFP ACKNOWLEDGEMENT message content\n\nThe PMFP UAD PROVISIONING message is sent by the UE to provide UE assistance data to the UPF.\nSee table 6.2.1.6.1-1.\nMessage type:\tPMFP UAD PROVISIONING\nSignificance:\tdual\nDirection:\tUE to network\nTable 6.2.1.6.1-1: PMFP UAD PROVISIONING message content\n\nThe PMFP PLR COUNT REQUEST message is sent by the UE or the UPF to initiate a PMFP PLR measurement procedure.\nSee table 6.2.1.7.1-1.\nMessage type:\tPMFP PLR COUNT REQUEST\nSignificance:\tdual\nDirection:\tboth\nTable 6.2.1.7.1-1: PMFP PLR COUNT REQUEST message content\n\nThe PMFP PLR COUNT RESPONSE message is sent by the UE to the UPF or the UPF to the UE to acknowledge reception of a PMFP PLR COUNT REQUEST message.\nSee table 6.2.1.8.1-1.\nMessage type:\tPMFP PLR COUNT RESPONSE\nSignificance:\tdual\nDirection:\tboth\nTable 6.2.1.8.1-1: PMFP PLR COUNT RESPONSE message content\n\nThe PMFP PLR REPORT REQUEST message is sent by either UE or UPF to request the report of the counting result.\nSee table 6.2.1.9.1-1.\nMessage type:\tPMFP PLR REPORT REQUEST\nSignificance:\tdual\nDirection:\tboth\nTable 6.2.1.9.1-1: PMFP PLR REPORT REQUEST message content\n\nThis IE is included in the message by either UE or UPF when the restart counting for another PLR measurement is required.\nThe PMFP PLR REPORT RESPONSE message is sent by either UE or the UPF to respond the PMFP PLR REPORT REQUEST message and report the counting result.\nSee table 6.2.1.10.1-1.\nMessage type:\tPMFP PLR REPORT RESPONSE\nSignificance:\tdual\nDirection:\tboth\nTable 6.2.1.10.1-1: PMFP PLR REPORT RESPONSE message content\n\nThis IE is included in the message by either UE or UPF to indicate whether to accept the request of restart counting for another PLR measurement in the PMFP PLR REPORT REQUEST message.\nThe PMFP UAT COMMAND message is sent by the UE to the UPF in order to terminate the UE assistance operation to the UPF.\nSee table 6.2.1.11.1-1.\nMessage type:\tPMFP UAT COMMAND\nSignificance:\tdual\nDirection:\tUE to network\nTable 6.2.1.11.1-1: PMFP UAT COMMAND message content\n\nThe PMFP UAT COMPLETE message is sent by the UPF to the UE.\nSee table 6.2.1.12.1-1.\nMessage type:\tPMFP UAT COMPLETE\nSignificance:\tdual\nDirection:\tnetwork to UE\nTable 6.2.1.12.1-1: PMFP UAT COMPLETE message content\n\nThe PMFP UAD PROVISIONING COMPLETE message is sent by the UPF to the UE as response to PMFP UAD PROVISIONING message.\nSee table 6.2.1.13.1-1.\nMessage type:\tPMFP UAD PROVISIONING COMPLETE\nSignificance:\tdual\nDirection:\tnetwork to UE\nTable 6.2.1.13.1-1: PMFP UAD PROVISIONING COMPLETE message content\n\nThe PMFP TDS REQUEST message is sent by the UPF to the UE to suspend the traffic duplication.\nSee table 6.2.1.14.1-1.\nMessage type:\tPMFP TDS REQUEST\nSignificance:\tdual\nDirection:\tUPF to UE\nTable 6.2.1.14.1-1: PMFP TDS REQUEST message content\n\nThe PMFP TDS RESPONSE message is sent by the UE to the UPF to acknowledge reception of a PMFP TDS REQUEST message.\nSee table 6.2.1.15.1-1.\nMessage type:\tPMFP TDS RESPONSE\nSignificance:\tdual\nDirection: UE to UPF\nTable 6.2.1.15.1-1: PMFP TDS RESPONSE message content\n\nThe PMFP TDR REQUEST message is sent by the UPF to the UE to resume the traffic duplication.\nSee table 6.2.1.16.1-1.\nMessage type:\tPMFP TDR REQUEST\nSignificance:\tdual\nDirection:\tUPF to UE\nTable 6.2.1.16.1-1: PMFP TDR REQUEST message content\n\nThe PMFP TDR RESPONSE message is sent by the UE to the UPF to acknowledge reception of a PMFP TDR REQUEST message.\nSee table 6.2.1.17.1-1.\nMessage type:\tPMFP TDR RESPONSE\nSignificance:\tdual\nDirection: UE to UPF\nTable 6.2.1.17.1-1: PMFP TDR RESPONSE message content\n\n",
                            "figures_meta_data": [],
                            "tables": [
                                {
                                    "description": "Table 6.2.1.2.1-1: PMFP ECHO REQUEST message content",
                                    "table number": 28,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 6.2.1.3.1-1: PMFP ECHO RESPONSE message content",
                                    "table number": 29,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 6.2.1.4.1-1: PMFP ACCESS REPORT message content",
                                    "table number": 30,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 6.2.1.5.1-1: PMFP ACKNOWLEDGEMENT message content",
                                    "table number": 31,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 6.2.1.6.1-1: PMFP UAD PROVISIONING message content",
                                    "table number": 32,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 6.2.1.7.1-1: PMFP PLR COUNT REQUEST message content",
                                    "table number": 33,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 6.2.1.8.1-1: PMFP PLR COUNT RESPONSE message content",
                                    "table number": 34,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 6.2.1.9.1-1: PMFP PLR REPORT REQUEST message content",
                                    "table number": 35,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 6.2.1.10.1-1: PMFP PLR REPORT RESPONSE message content",
                                    "table number": 36,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 6.2.1.11.1-1: PMFP UAT COMMAND message content",
                                    "table number": 37,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 6.2.1.12.1-1: PMFP UAT COMPLETE message content",
                                    "table number": 38,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 6.2.1.13.1-1: PMFP UAD PROVISIONING COMPLETE message content",
                                    "table number": 39,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 6.2.1.14.1-1: PMFP TDS REQUEST message content",
                                    "table number": 40,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 6.2.1.15.1-1: PMFP TDS RESPONSE message content",
                                    "table number": 41,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 6.2.1.16.1-1: PMFP TDR REQUEST message content",
                                    "table number": 42,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 6.2.1.17.1-1: PMFP TDR RESPONSE message content",
                                    "table number": 43,
                                    "summary": "",
                                    "name": ""
                                }
                            ]
                        },
                        {
                            "title": "6.2.2\tEncoding of information element",
                            "text_content": "Message type is a type 3 information element with length of 1 octet.\nTable 6.2.2.1-1 defines the value part of the message type IE used in the PMFP.\nTable 6.2.2.1-1: Message type\n\nThe purpose of the extended procedure transaction identity information element is to enable distinguishing up to 10000H different bi-directional message flows. Such a message flow is called a transaction.\nExtended procedure transaction identity is a type 3 information element with length of 2 octet.\nThe extended procedure transaction identity information element is coded as shown in figure 6.2.2.2-1 and table 6.2.2.2-1.\nFigure 6.2.2.2-1: Extended procedure transaction identity information element\nTable 6.2.2.2-1: Extended procedure transaction identity information element\n\nThe purpose of the access availability state information element is to provide information about availability of access.\nThe access availability state is a type 1 information element.\nThe access availability state information element is coded as shown in figure 6.2.2.3-1 and table 6.2.2.3-1.\nFigure 6.2.2.3-1: Access availability state information element\nTable 6.2.2.3-1: Access availability state information element\n\nThis information element is used in the description of messages when an odd number of half octet type 1 information elements are used. This element is filled with spare bits set to zero and is placed in bits 5 to 8 of the octet unless otherwise specified.\nThe purpose of the Request identity information element is to enable association of a PMF ECHO RESPONSE message with one of PMF ECHO REQUEST messages sent within one RTT measurement procedure.\nThe Request identity is a type 3 information element with length of 1 octet.\nThe Request identity information element is coded as shown in figure 6.2.2.5-1 and table 6.2.2.5-1.\nFigure 6.2.2.5-1: Request identity information element\nTable 6.2.2.5-1: Request identity information element\n\nThe purpose of the Padding information element is to extend the PMFP message to length requested by upper layers.\nThe Padding information information element is coded as shown in figure 6.2.2.6-1.\nThe Padding information is a type 6 information element with a minimum length of 3 octets.\nFigure 6.2.2.6-1: Padding information element\nTable 6.2.2.6-1: Padding information element\n\nThe purpose of the DL distribution information information element is to provide a DL traffic distribution that can be applied by the UPF for all DL traffic that applies to the UE-assistance operation.\nThe DL distribution information is a type 3 information element with length of 2 octets.\nThe DL distribution information information element is coded as shown in figure 6.2.2.8-1 and table 6.2.2.8-1.\nFigure 6.2.2.8-1: DL distribution information information element\nTable 6.2.2.8-1: DL distribution information information element\n\nThe purpose of the additional measurement indication information element is to indicate whether to restart counting for another PLR measurement.\nThe additional measurement indication is a type 1 information element.\nThe additional measurement indication information element is coded as shown in figure 6.2.2.9-1 and table 6.2.2.9-1.\nFigure 6.2.2.9-1: Additional measurement indication information element\nTable 6.2.2.9-1: Additional measurement indication information element\n\nThe purpose of the counting result information element is to indicate the number of the counted packets.\nThe counting result is a type 3 information element with length of 5 octet.\nThe counting result information element is coded as shown in figure 6.2.2.10-1.\nFigure 6.2.2.10-1: Counting result information element\nTable 6.2.2.10-1: Counting result information element\n\nThe purpose of the traffic type information element is to indicate the type of traffic.\nThe traffic type is a type 1 information element.\nThe traffic type information element is coded as shown in figure 6.2.2.11-1 and table 6.2.2.11-1.\nFigure 6.2.2.11-1: Traffic type information element\nTable 6.2.2.11-1: Traffic type information element\n\n\n",
                            "figures_meta_data": [],
                            "tables": [
                                {
                                    "description": "Table 6.2.2.1-1: Message type",
                                    "table number": 44,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "The extended procedure transaction identity information element is coded as shown in figure 6.2.2.2-1 and table 6.2.2.2-1.",
                                    "table number": 45,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 6.2.2.2-1: Extended procedure transaction identity information element",
                                    "table number": 46,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "The access availability state information element is coded as shown in figure 6.2.2.3-1 and table 6.2.2.3-1.",
                                    "table number": 47,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 6.2.2.3-1: Access availability state information element",
                                    "table number": 48,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "The Request identity information element is coded as shown in figure 6.2.2.5-1 and table 6.2.2.5-1.",
                                    "table number": 49,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 6.2.2.5-1: Request identity information element",
                                    "table number": 50,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "The Padding information is a type 6 information element with a minimum length of 3 octets.",
                                    "table number": 51,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 6.2.2.6-1: Padding information element",
                                    "table number": 52,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "The DL distribution information information element is coded as shown in figure 6.2.2.8-1 and table 6.2.2.8-1.",
                                    "table number": 53,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 6.2.2.8-1: DL distribution information information element",
                                    "table number": 54,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "The additional measurement indication information element is coded as shown in figure 6.2.2.9-1 and table 6.2.2.9-1.",
                                    "table number": 55,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 6.2.2.9-1: Additional measurement indication information element",
                                    "table number": 56,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "The counting result information element is coded as shown in figure 6.2.2.10-1.",
                                    "table number": 57,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 6.2.2.10-1: Counting result information element",
                                    "table number": 58,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "The traffic type information element is coded as shown in figure 6.2.2.11-1 and table 6.2.2.11-1.",
                                    "table number": 59,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 6.2.2.11-1: Traffic type information element",
                                    "table number": 60,
                                    "summary": "",
                                    "name": ""
                                }
                            ]
                        }
                    ]
                },
                {
                    "title": "6.3\tEncoding of 3GPP IEEE MAC based protocol family",
                    "description": "",
                    "summary": "",
                    "text_content": "Ethertype of the 3GPP IEEE MAC based protocol family is XYZ.\nEditor's note: ethertype of the 3GPP IEEE MAC based protocol family will be assigned by IEEE.\nThe MAC client data field of a MAC frame as specified in IEEE 802.3 [12] with the length/type field set to the ethertype of the 3GPP IEEE MAC based protocol family contains a 3GPP IEEE MAC based protocol family envelope. The 3GPP IEEE MAC based protocol family envelope is encoded as shown in figure 6.3-1 and table 6.3-1.\nFigure 6.3-1: 3GPP IEEE MAC based protocol family envelope\nTable 6.3-1: 3GPP IEEE MAC based protocol family envelope\n\n",
                    "tables": [
                        {
                            "description": "The MAC client data field of a MAC frame as specified in IEEE 802.3 [12] with the length/type field set to the ethertype of the 3GPP IEEE MAC based protocol family contains a 3GPP IEEE MAC based protocol family envelope. The 3GPP IEEE MAC based protocol family envelope is encoded as shown in figure 6.3-1 and table 6.3-1.",
                            "table number": 61,
                            "summary": "",
                            "name": ""
                        },
                        {
                            "description": "Table 6.3-1: 3GPP IEEE MAC based protocol family envelope",
                            "table number": 62,
                            "summary": "",
                            "name": ""
                        }
                    ],
                    "figures_meta_data": [],
                    "subsubsections": []
                }
            ]
        },
        {
            "title": "7\tList of system parameters",
            "description": "",
            "summary": "",
            "tables": [],
            "figures_meta_data": [],
            "subsections": [
                {
                    "title": "7.1\tGeneral",
                    "description": "",
                    "summary": "",
                    "text_content": "The description of timers in the tables of clause 7 should be considered a brief summary. The precise details are found in clause 5, which should be considered the definitive descriptions.\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "7.2\tTimers of performance measurement function (PMF) protocol (PMFP)",
                    "description": "",
                    "summary": "",
                    "text_content": "Timers of PMFP are shown in table 7.2-1 and table 7.2-2.\nTable 7.2-1: Timers of PMFP – UE side\n\nTable 7.2-2: Timers of PMFP – UPF side\n\n",
                    "tables": [
                        {
                            "description": "Table 7.2-1: Timers of PMFP – UE side",
                            "table number": 63,
                            "summary": "",
                            "name": ""
                        },
                        {
                            "description": "Table 7.2-2: Timers of PMFP – UPF side",
                            "table number": 64,
                            "summary": "",
                            "name": ""
                        }
                    ],
                    "figures_meta_data": [],
                    "subsubsections": []
                }
            ]
        },
        {
            "title": "8\tHandling of unknown, unforeseen, and erroneous PMFP data",
            "description": "",
            "summary": "",
            "tables": [],
            "figures_meta_data": [],
            "subsections": [
                {
                    "title": "8.1\tGeneral",
                    "description": "",
                    "summary": "",
                    "text_content": "The procedures specified in the clause apply to those messages which pass the checks described in this clause.\nThis clause also specifies procedures for the handling of unknown, unforeseen, and erroneous PMFP data by the receiving entity. These procedures are called \"error handling procedures\", but in addition to providing recovery mechanisms for error situations they define a compatibility mechanism for future extensions of the PMFP.\nClauses 8.1 to 8.8 shall be applied in order of precedence.\nDetailed error handling procedures in the network are implementation dependent and may vary from PLMN to PLMN. However, when extensions of PMFP are developed, networks are assumed to have the error handling which is indicated in this clause as mandatory (\"shall\") and that is indicated as strongly recommended (\"should\").\nAlso, the error handling of the network is only considered as mandatory or strongly recommended when certain thresholds for errors are not reached during a dedicated connection.\nFor definition of semantical and syntactical errors see 3GPP TS 24.007 [13], clause 11.4.2.\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "8.2\tMessage too short or too long",
                    "description": "",
                    "summary": "",
                    "text_content": "",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": [
                        {
                            "title": "8.2.1\tMessage too short",
                            "text_content": "When a message is received that is too short to contain a complete message type information element, that message shall be ignored, c.f. 3GPP TS 24.007 [13].\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "8.2.2\tMessage too long",
                            "text_content": "The maximum size of a PMFP message is 65535 octets.\n",
                            "figures_meta_data": [],
                            "tables": []
                        }
                    ]
                },
                {
                    "title": "8.3\tUnknown or unforeseen extended procedure transaction identity (EPTI)",
                    "description": "",
                    "summary": "",
                    "text_content": "",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": [
                        {
                            "title": "8.3.1\tExtended procedure transaction identity (EPTI)",
                            "text_content": "The following network procedures shall apply for handling an unknown, erroneous, or unforeseen EPTI received in a PMFP message:\na)\tIn case the network receives a PMFP ECHO RESPONSE message in which the EPTI value does not match any EPTI in use, the network shall ignore the PMFP message.\nThe following UE procedures shall apply for handling an unknown, erroneous, or unforeseen EPTI received in a PMFP message:\na)\tIn case the UE receives a PMFP ECHO RESPONSE message, a PMFP UAD PROVISIONING COMPLETE message, a PMFP UAT COMPLETE message or a PMFP ACKNOWLEDGEMENT message in which the EPTI value does not match any EPTI in use, the UE shall ignore the PMFP message.\n",
                            "figures_meta_data": [],
                            "tables": []
                        }
                    ]
                },
                {
                    "title": "8.4\tUnknown or unforeseen message type",
                    "description": "",
                    "summary": "",
                    "text_content": "If the UE or the network receives a PMFP message with message type not defined for the PMFP or not implemented by the receiver, it shall ignore the PMFP message.\nNOTE:\tA message type not defined for the PMFP in the given direction is regarded by the receiver as a message type not defined for the PMFP, see 3GPP TS 24.007 [13].\nIf the UE receives a message not compatible with the PMFP state, the UE shall ignore the PMFP message.\nIf the network receives a message not compatible with the PMFP state, the network actions are implementation dependent.\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "8.5\tNon-semantical mandatory information element errors",
                    "description": "",
                    "summary": "",
                    "text_content": "",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": [
                        {
                            "title": "8.5.1\tCommon procedures",
                            "text_content": "When on receipt of a message,\na)\tan \"imperative message part\" error; or\nb)\ta \"missing mandatory IE\" error;\nis diagnosed or when a message containing:\na)\ta syntactically incorrect mandatory IE;\nb)\tan IE unknown in the message, but encoded as \"comprehension required\" (see 3GPP TS 24.007 [13]); or\nc)\tan out of sequence IE encoded as \"comprehension required\" (see 3GPP TS 24.007 [13]) is received;\nthe UE shall ignore the PMFP message and the network shall:\na)\ttry to treat the message (the exact further actions are implementation dependent); or\nb)\tignore the message.\n",
                            "figures_meta_data": [],
                            "tables": []
                        }
                    ]
                },
                {
                    "title": "8.6\tUnknown and unforeseen IEs in the non-imperative message part",
                    "description": "",
                    "summary": "",
                    "text_content": "",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": [
                        {
                            "title": "8.6.1\tIEIs unknown in the message",
                            "text_content": "The UE shall ignore all IEs unknown in a message which are not encoded as \"comprehension required\" (see 3GPP TS 24.007 [13]).\nThe network shall take the same approach.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "8.6.2\tOut of sequence IEs",
                            "text_content": "The UE shall ignore all out of sequence IEs in a message which are not encoded as \"comprehension required\" (see 3GPP TS 24.007 [13]).\nThe network should take the same approach.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "8.6.3\tRepeated IEs",
                            "text_content": "If an information element with format T, TV, TLV, or TLV-E is repeated in a message in which repetition of the information element is not specified in clause 6.2.1, the UE shall handle only the contents of the information element appearing first and shall ignore all subsequent repetitions of the information element. When repetition of information elements is specified, the UE shall handle only the contents of specified repeated information elements. If the limit on repetition of information elements is exceeded, the UE shall handle the contents of information elements appearing first up to the limit of repetitions and shall ignore all subsequent repetitions of the information element.\nThe network should follow the same procedures.\n",
                            "figures_meta_data": [],
                            "tables": []
                        }
                    ]
                },
                {
                    "title": "8.7\tNon-imperative message part errors",
                    "description": "",
                    "summary": "",
                    "text_content": "",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": [
                        {
                            "title": "8.7.1\tGeneral",
                            "text_content": "This category includes:\na)\tsyntactically incorrect optional IEs; and\nb)\tconditional IE errors.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "8.7.2\tSyntactically incorrect optional IEs",
                            "text_content": "The UE shall treat all optional IEs that are syntactically incorrect in a message as not present in the message.\nThe network shall take the same approach.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "8.7.3\tConditional IE errors",
                            "text_content": "NOTE:\tIn this release of specification, there are no conditional IEs.\nWhen upon receipt of a PMFP message the UE diagnoses a \"missing conditional IE\" error or an \"unexpected conditional IE\" error, or when it receives a PMFP message containing at least one syntactically incorrect conditional IE, the UE shall ignore the message.\nWhen the network receives a message and diagnoses a \"missing conditional IE\" error or an \"unexpected conditional IE\" error or when it receives a message containing at least one syntactically incorrect conditional IE, the network shall either:\na)\ttry to treat the message (the exact further actions are implementation dependent); or\nb)\tignore the message.\n",
                            "figures_meta_data": [],
                            "tables": []
                        }
                    ]
                },
                {
                    "title": "8.8\tMessages with semantically incorrect contents",
                    "description": "",
                    "summary": "",
                    "text_content": "When a message with semantically incorrect contents is received, the UE shall perform the foreseen reactions of the procedural part of clause 5.4. If, however no such reactions are specified, the UE shall ignore the message.\nThe network should follow the same procedure.\n\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                }
            ]
        },
        {
            "title": "A.1\tIEEE registration templates",
            "description": "",
            "summary": "",
            "tables": [],
            "figures_meta_data": [],
            "subsections": [
                {
                    "title": "A.1.1\tIEEE registration templates for ethertype values",
                    "description": "",
                    "summary": "",
                    "text_content": "",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": [
                        {
                            "title": "A.1.1.1\tIEEE registration templates for ethertype value for 3GPP IEEE MAC based protocol family",
                            "text_content": "Editor's note: MCC is requested to apply in IEEE-RA for allocation of an ethertype value according to this template.\nRegistration URL:\n\n\nRegistry:\nethertype\n\nDetailed description:\nThis application requests allocation of an ethertype value for 3GPP IEEE MAC based protocol family, as specified in IEEE 802 [11].\n\nProtocol description:\nThe MAC client data field of a MAC frame as specified in IEEE 802.3 [12] of the 3GPP IEEE MAC based protocol family is formatted as follows:\n-\toctet 1 of the MAC client data field is the protocol subtype field.\n-\tremaining octets of the MAC client data field are the protocol data field.\nThe protocol subtype field set to one identifies the performance measurement function protocol specified in 3GPP TS 24.193.\n3GPP TS 24.193 enables assignment of further protocols to values of the protocol subtype field.\n\nAssignment quantity:\n1\n\nAdditional comments:\n\n1) Does the company requesting the assignment have any existing Ethertype assignments?\nYes.\n\n1a) Does the existing use of the original assignment support sub-typing?\nNo.\n\n1b) Does the current applicant know who is currently responsible for maintenance of the previously assigned Ethertype?\nYes.\n\n1c) Has the company considered using sub-typing of the older Ethertype for the new use under application?\nYes. Sub-typing of the older Ethertype for the new use under application is not possible.\n\n1d) Given the above, why is a new Ethertype needed?\n\nSee detailed description for the new use under application.\n\n2) Has the new protocol been developed and tested in accordance with clause 9 and especially clause 9.2.3 and Figure 12 of IEEE Std 802-2014 [11], IEEE Standard for Local and Metropolitan Area Networks: Overview and Architecture?\nThe 3GPP IEEE MAC based protocol family has been developed as follows:\n-\tthe first octet of the MAC client data field of a MAC frame as specified in IEEE 802.3 [12] of the 3GPP IEEE MAC based protocol family contains the protocol subtype field.\n-\tthe MAC client data field of the MAC frame of the 3GPP IEEE MAC based protocol family does not contain a protocol version field. If a protocol identified by an existing protocol subtype field value is modified in a backward-compatible way, there is no need to indicate a protocol version. If a protocol identified by an existing protocol subtype field value needs to be modified in a backward-incompatible way, a new protocol subtype field value will be assigned to the modified protocol.\nThe 3GPP IEEE MAC based protocol family has not been tested.\n\n3) Have the full provisions of Figure 12 for the \"Protocol identification field\" in the prototype protocol been preserved in the final version of the protocol for which the new EtherType is being requested?\nThe first octet of the MAC client data field of a MAC frame as specified in IEEE 802.3 [12] of the 3GPP IEEE MAC based protocol family contains the protocol subtype field.\nThe MAC client data field of the MAC frame of the 3GPP IEEE MAC based protocol family does not contain a protocol version field. If a protocol identified by an existing protocol subtype field value is modified in a backward-compatible way, there is no need to indicate a protocol version. If a protocol identified by an existing protocol subtype field value needs to be modified in a backward-incompatible way, a new protocol subtype field value will be assigned to the modified protocol.\nThis is preserved in the final version.\n\n4) What provisions have been made for maintaining and assigning sub-types going forward within your company? Please provide an example of the first 10 bytes/octets as an example.\n3GPP TS 24.193 enables assignment of protocols to values of the protocol subtype field. A sending entity shall not set the protocol subtype field to a reserved value. A receiving entity shall ignore the MAC client data field, if the protocol subtype field is set to a reserved value. 3GPP TS 24.193 so far contains an assignment for the performance measurement function to value one of the protocol subtype field.\nFor the performance measurement function protocol:\n- value of octet 1 of the MAC client data field is set to one.\n- values of octet 2 and octet 3 of the MAC client data field contain the length of the performance measurement function protocol message.\n- value of octet 4 of the MAC client data field is set to the message type of the performance measurement function protocol.\n- value of octet 5 and octet 6 of the MAC client data field is set to the extended procedure transaction identity of the performance measurement function protocol, enabling distinguishing of procedures running in parallel.\n- values of octet 7 and later octets of the MAC client data field depend on the message type of the performance measurement function protocol.\n\n",
                            "figures_meta_data": [],
                            "tables": [
                                {
                                    "description": "",
                                    "table number": 65,
                                    "summary": "",
                                    "name": ""
                                }
                            ]
                        }
                    ]
                }
            ]
        }
    ]
}