{
    "document_name": "29550-i20.docx",
    "content": [
        {
            "title": "Foreword",
            "description": "This Technical Specification has been produced by the 3rd Generation Partnership Project (3GPP).\nThe contents of the present document are subject to continuing work within the TSG and may change following formal TSG approval. Should the TSG modify the contents of the present document, it will be re-released by the TSG with an identifying change of release date and an increase in version number as follows:\nVersion x.y.z\nwhere:\nx\tthe first digit:\n1\tpresented to TSG for information;\n2\tpresented to TSG for approval;\n3\tor greater indicates TSG approved document under change control.\ny\tthe second digit is incremented for all changes of substance, i.e. technical enhancements, corrections, updates, etc.\nz\tthe third digit is incremented when editorial only changes have been incorporated in the document.\nIn the present document, modal verbs have the following meanings:\nshall\tindicates a mandatory requirement to do something\nshall not\tindicates an interdiction (prohibition) to do something\nThe constructions \"shall\" and \"shall not\" are confined to the context of normative provisions, and do not appear in Technical Reports.\nThe constructions \"must\" and \"must not\" are not used as substitutes for \"shall\" and \"shall not\". Their use is avoided insofar as possible, and they are not used in a normative context except in a direct citation from an external, referenced, non-3GPP document, or so as to maintain continuity of style when extending or modifying the provisions of such a referenced document.\nshould\tindicates a recommendation to do something\nshould not\tindicates a recommendation not to do something\nmay\tindicates permission to do something\nneed not\tindicates permission not to do something\nThe construction \"may not\" is ambiguous and is not used in normative elements. The unambiguous constructions \"might not\" or \"shall not\" are used instead, depending upon the meaning intended.\ncan\tindicates that something is possible\ncannot\tindicates that something is impossible\nThe constructions \"can\" and \"cannot\" are not substitutes for \"may\" and \"need not\".\nwill\tindicates that something is certain or expected to happen as a result of action taken by an agency the behaviour of which is outside the scope of the present document\nwill not\tindicates that something is certain or expected not to happen as a result of action taken by an agency the behaviour of which is outside the scope of the present document\nmight\tindicates a likelihood that something will happen as a result of action taken by some agency the behaviour of which is outside the scope of the present document\nmight not\tindicates a likelihood that something will not happen as a result of action taken by some agency the behaviour of which is outside the scope of the present document\nIn addition:\nis\t(or any other verb in the indicative mood) indicates a statement of fact\nis not\t(or any other negative verb in the indicative mood) indicates a statement of fact\nThe constructions \"is\" and \"is not\" do not indicate requirements.\n",
            "summary": "",
            "tables": [],
            "figures_meta_data": [],
            "subsections": []
        },
        {
            "title": "1\tScope",
            "description": "The present document specifies the stage 3 protocol and data model for the Nsoraf Service Based Interface. It provides stage 3 protocol definitions and message flows, and specifies the API for each service offered by the SOR-AF.\nThe 5G System stage 2 architecture and procedures are specified in 3GPP TS 23.501 [2] and 3GPP TS 23.502 [3]. The stage 2 architecture and procedures for 5G Steering of Roaming are specified in 3GPP TS 23.122 [14].\nThe Technical Realization of the Service Based Architecture and the Principles and Guidelines for Services Definition are specified in 3GPP TS 29.500 [4] and 3GPP TS 29.501 [5].\n",
            "summary": "",
            "tables": [],
            "figures_meta_data": [],
            "subsections": []
        },
        {
            "title": "2\tReferences",
            "description": "The following documents contain provisions which, through reference in this text, constitute provisions of the present document.\n-\tReferences are either specific (identified by date of publication, edition number, version number, etc.) or non-specific.\n-\tFor a specific reference, subsequent revisions do not apply.\n-\tFor a non-specific reference, the latest version applies. In the case of a reference to a 3GPP document (including a GSM document), a non-specific reference implicitly refers to the latest version of that document in the same Release as the present document.\n[1]\t3GPP TR 21.905: \"Vocabulary for 3GPP Specifications\".\n[2]\t3GPP TS 23.501: \"System Architecture for the 5G System; Stage 2\".\n[3]\t3GPP TS 23.502: \"Procedures for the 5G System; Stage 2\".\n[4]\t3GPP TS 29.500: \"5G System; Technical Realization of Service Based Architecture; Stage 3\".\n[5]\t3GPP TS 29.501: \"5G System; Principles and Guidelines for Services Definition; Stage 3\".\n[6]\tOpenAPI: \"OpenAPI 3.0.0 Specification\",  .\n[7]\t3GPP TR 21.900: \"Technical Specification Group working methods\".\n[8]\t3GPP TS 33.501: \"Security architecture and procedures for 5G system\".\n[9]\tIETF RFC 6749: \"The OAuth 2.0 Authorization Framework\".\n[10]\t3GPP TS 29.510: \"5G System; Network Function Repository Services; Stage 3\".\n[11]\tIETF RFC 9113: HTTP/2.\n[12]\tIETF RFC 8259: \"The JavaScript Object Notation (JSON) Data Interchange Format\".\n[13]\tIETF RFC 9457: \"Problem Details for HTTP APIs\".\n[14]\t3GPP TS 23.122: \"Non-Access-Stratum (NAS) functions related to Mobile Station (MS) in idle mode\".\n[15]\t3GPP TS 29.503: \"5G System; Unified Data Management Services; Stage 3\".\n[16]\t3GPP TS 29.571: \"5G System; Common Data Types for Service Based Interfaces Stage 3\".\n[17]\t3GPP TS 31.115: \"Secured packet structure for (Universal) Subscriber Identity Module (U)SIM Toolkit applications\".\n[18]\t3GPP TS 24.501: \"Non-Access-Stratum (NAS) protocol for 5G System (5GS); Stage 3\".\n[19]\t3GPP TS 29.544: \"5G System; Secured Packet Application Function (SP-AF) services; Stage 3\".\n[20]\t3GPP TS 29.509: \"Authentication Server Services; Stage 3\".\n",
            "summary": "",
            "tables": [],
            "figures_meta_data": [],
            "subsections": []
        },
        {
            "title": "3\tDefinitions, symbols and abbreviations",
            "description": "",
            "summary": "",
            "tables": [],
            "figures_meta_data": [],
            "subsections": [
                {
                    "title": "3.1\tTerms",
                    "description": "",
                    "summary": "",
                    "text_content": "SoR Information: In this specification, this refers to the following HPLMN information:\na)\tan indication of whether the SOR-AF requires the UDM to request an acknowledgement from the UE for successful reception of the Steering of Roaming information; and\nb)\tone of the following:\n-\ta list of preferred PLMN/access technology combinations with an indication that it is included;\n-\ta secured packet with an indication that it is included; or\n-\tthe HPLMN indication that 'no change of the \"Operator Controlled PLMN Selector with Access Technology\" list stored in the UE is needed and thus no list of preferred PLMN/access technology combinations is provided'.\nNOTE:\tThe secured packet contains the list of preferred PLMN/access technology combinations encapsulated with a security mechanism as described in 3GPP TS 31.115 [17].\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "3.2\tSymbols",
                    "description": "",
                    "summary": "",
                    "text_content": "Void.\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "3.3\tAbbreviations",
                    "description": "",
                    "summary": "",
                    "text_content": "For the purposes of the present document, the abbreviations given in 3GPP TR 21.905 [1] and the following apply. An abbreviation defined in the present document takes precedence over the definition of the same abbreviation, if any, in 3GPP TR 21.905 [1].\nJSON\tJavascript Object Notation\nNF\tNetwork Function\nSOR-AF\tSteering Of Roaming Application Function\nSoR\tSteering of Roaming\nSUPI\tSubscription Permanent Identifier\nUDM\tUnified Data Management\nUE\tUser Equipment\n\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                }
            ]
        },
        {
            "title": "4\tOverview",
            "description": "",
            "summary": "",
            "tables": [],
            "figures_meta_data": [],
            "subsections": [
                {
                    "title": "4.1\tIntroduction",
                    "description": "",
                    "summary": "",
                    "text_content": "Within the 5GC, the Steering Of Roaming Application Function (SOR-AF) provides services (see 3GPP TS 23.122 [14]) to NF service consumers (e.g. UDM) via the Nsoraf service based interface.\nNOTE:\tThe generation and calculation of the SoR information and associated roaming business logic are out of scope of this document.\nFigure°4.1-1 depicts the reference architecture of the SOR-AF.\nThe figure depicts a reference model for SOR-AF, which stands for Single-Rate OFDM (Orthogonal Frequency Division Multiplexing) with Automatic Frequency Selection (AFS). The model illustrates the signal propagation in a 5G network, with key components such as the base station (gNB), user equipment (UE), and scatterers. The diagram highlights beamforming techniques to mitigate interference, and the layered design aligns with SDN principles.\nFigure 4.1-1: Reference model – SOR-AF\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                }
            ]
        },
        {
            "title": "5\tServices offered by the SOR-AF",
            "description": "",
            "summary": "",
            "tables": [],
            "figures_meta_data": [],
            "subsections": [
                {
                    "title": "5.1\tIntroduction",
                    "description": "",
                    "summary": "",
                    "text_content": "The SOR-AF offers the following services to NF consumers (e.g. UDM) via the Nsoraf service based interface:\n-\tNsoraf_SteeringOfRoaming\nTable 5.1-1 summarizes the corresponding APIs defined for this specification.\nTable 5.1-1: APIs Description\n\n",
                    "tables": [
                        {
                            "description": "Table 5.1-1: APIs Description",
                            "table number": 3,
                            "summary": "",
                            "name": ""
                        }
                    ],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "5.2\tNsoraf_SteeringOfRoaming Service",
                    "description": "",
                    "summary": "",
                    "text_content": "",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": [
                        {
                            "title": "5.2.1\tService Description",
                            "text_content": "The Nsoraf_SteeringOfRoaming (Nsoraf_SOR) service provides Steering of Roaming services to NF consumers (e.g. UDM) to enable the retrieval of SoR information (i.e. the list of preferred PLMN/access technology combinations or an indication that no update to the list of preferred PLMN/access technology combinations is needed) to be conveyed to the UE, as specified in Annex C of 3GPP°TS°23.122 [14]. The latter specifies the 5GS control plane mechanism for Steering of Roaming that aims at allowing the HPLMN to update the \"Operator Controlled PLMN Selector with Access Technology\" list in the UE by providing and updating this list of preferred PLMN/access technology combinations.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "5.2.2\tService Operations",
                            "text_content": "For the Nsoraf_SteeringOfRoaming service, the following service operations are defined:\n-\tGet\n-\tInfo\nThis service operation is used by a NF consumer (e.g. UDM) to retrieve SoR information.\nThe returned information can consist of either:\n-\ta list of preferred PLMN/access technology combinations;-\ta secured packet;\n-\tneither of them.\nNOTE:\tThe secured packet contains the list of preferred PLMN/access technology combinations encapsulated with a security mechanism as described in 3GPP TS 31.115 [17].\nThe following procedures are supported using the \"Get\" service operation:\n-\tSoR Information Retrieval\nFigure 5.2.2.2.2-1 depicts a scenario where a NF consumer (e.g. UDM) sends a request to the SOR-AF to retrieve the SoR information for a UE (see also clause C.2 and C.5 in Annex C of 3GPP°TS°23.122°[14]).\nThe request contains the UE's identity (/{supi}) and a set of query parameters (e.g. PLMN ID of the visited PLMN the UE is roaming in, or SNPN ID of the visited SNPN).\nThe figure depicts a simplified information retrieval procedure for the SoR (System of Record) system, which is a key component in the 5G network. The figure illustrates the steps involved in retrieving information from the SoR system, including the initial query, the search process, and the final result. The figure is a visual representation of the complex process, making it easier to understand and interpret.\nFigure 5.2.2.2.2-1: SoR Information Retrieval Procedure\n1.\tThe NF service consumer (e.g. UDM) sends a GET request to the resource representing the SoR information (sor-information), with query parameters indicating the PLMN ID or SNPN ID and other relevant information (e.g. Access type).\n2a.\tOn success, the SOR-AF responds with the HTTP status code \"200 OK\" with the message body containing the SoR information (i.e. list of preferred PLMN/access technology combinations, the SOR-CMCI, if any, the \"Store the SOR-CMCI in the ME\" indicator, if any, SOR-SNPN-SI, if any and SOR-SNPN-SI-LS, if any, or a secured packet by consuming Nspaf services as specified in 3GPP TS 29.544 [19])  for the concerned UE. The response also contains a Cache-Control HTTP header set to the value \"no-cache\" instructing the NF consumer (e.g. UDM) to not cache the received SoR information.\n2b.\tIf there is no valid SoR information for the UE (e.g. the resource does not exist, the SUPI is unknown to the SOR-AF), the SOR-AF responds with the HTTP status code \"404 Not Found\" including additional error information in the response body (within the \"ProblemDetails\" IE).\nNOTE:\tAn operator configurable timer shall be used by the NF Service Consumer (e.g. UDM) to control the acceptable time during which it shall wait for the GET response from the SOR-AF, as specified in clause C.2 of 3GPP°TS°23.122°[14] (step 3d of the procedure description). The default value and range of this timer is operator specific and shall take into account the importance of the related procedure (e.g. registration procedure).\nOn failure, the appropriate HTTP status code indicating the error shall be returned and appropriate additional error information should be returned in the GET response body.\nThis service operation is used by a NF consumer (e.g. UDM) to provide the SOR-AF with the reception status of the acknowledgment on successful reception of SoR information by the UE, in case an acknowledgment was requested to the UE.\nThe following procedures are supported using the \"Info\" service operation:\n-\tSoR Acknowledgment Reception Notification\nFigure 5.2.2.3.2-1 depicts a scenario where a NF consumer (e.g. UDM) sends an indication to the SOR-AF on the reception status of SoR information by the UE (see also clauses C.2 C.3, C.5 and C.6 in Annex C of 3GPP°TS°23.122°[14]).\nThe request contains the UE's identity (/{supi}), the type of acknowledgment (/sor-information/sor-ack) and the indication (SorAckInfo).\nThe figure depicts a SoR (Service Acknowledgment Reception Notification) procedure, which is a crucial step in the network's signaling process. It involves the acknowledgment of service requests from the network, followed by the reception of the acknowledgment from the service provider. This procedure ensures that the network is aware of the service request and can respond accordingly. The figure illustrates the steps involved in this process, including the use of a SoR acknowledgment receiver and a network interface controller (NIC).\nFigure 5.2.2.3.2-1: SoR Acknowledgment Reception Notification procedure\n1.\tThe NF service consumer (e.g. UDM) sends a PUT request to the resource representing the SoR information acknowledgment (/{supi}/sor-information/sor-ack) with the SorAckInfo containing an indication on the reception status of SoR information by the UE, and \"ME support of SOR-CMCI\", \"ME support of SOR-SNPN-SI-LS\" and, \"ME support of SOR-SNPN-SI\" if available.\n2a.\tThe SOR-AF responds with the HTTP status code \"204 No Content\".\n2b.\tIf there is an error (e.g. the SUPI is unknown to the SOR-AF), the SOR-AF shall respond with the HTTP status code \"404 Not Found\" including additional error information in the response body (within the \"ProblemDetails\" IE).\nOn failure, the appropriate HTTP status code indicating the error shall be returned and appropriate additional error information should be returned in the PUT response body.\n",
                            "figures_meta_data": [],
                            "tables": []
                        }
                    ]
                }
            ]
        },
        {
            "title": "6\tAPI Definitions",
            "description": "",
            "summary": "",
            "tables": [],
            "figures_meta_data": [],
            "subsections": [
                {
                    "title": "6.1\tNsoraf_SteeringOfRoaming Service API",
                    "description": "",
                    "summary": "",
                    "text_content": "",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": [
                        {
                            "title": "6.1.1\tIntroduction",
                            "text_content": "The Nsoraf_SOR service shall use the Nsoraf_SOR service API.\nThe API URI of the Nsoraf_SOR API shall be:\n{apiRoot}/<apiName>/<apiVersion>\nThe request URI used in HTTP request from the NF service consumer towards the NF service producer shall have the structure defined in clause 4.4.1 of 3GPP TS 29.501 [5], i.e.:\n{apiRoot}/<apiName>/<apiVersion>/<apiSpecificResourceUriPart>\nwith the following components:\n-\tThe {apiRoot} shall be set as described in 3GPP TS 29.501 [5].\n-\tThe <apiName> shall be \"nsoraf-sor\".\n-\tThe <apiVersion> shall be \"v1\".\n-\tThe <apiSpecificResourceUriPart> shall be set as described in clause 6.1.3.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "6.1.2\tUsage of HTTP",
                            "text_content": "HTTP/2, IETF RFC 9113 [11], shall be used as specified in clause 5 of 3GPP TS 29.500 [4].\nHTTP/2 shall be transported as specified in clause 5.3 of 3GPP TS 29.500 [4].\nThe OpenAPI [6] specification of HTTP messages and content bodies for the Nsoraf_SOR API is contained in Annex A.\nSee clause 5.2.2 of 3GPP TS 29.500 [4] for the usage of HTTP standard headers.\nJSON, IETF RFC 8259 [12], shall be used as content type of the HTTP bodies specified in the present specification as specified in clause 5.4 of 3GPP TS 29.500 [4]. The use of the JSON format shall be signalled by the content type \"application/json\".\n\"Problem Details\" JSON object shall be used to indicate additional details of the error in a HTTP response body and shall be signalled by the content type \"application/problem+json\", as defined in IETF RFC 9457 [13].\nThe \"Cache-Control\" header set to the value \"no-cache\" shall be included in HTTP responses for resources that shall not be cached (e.g. SorInformation).\nThe mandatory HTTP custom header fields specified in clause 5.2.3.2 of 3GPP TS 29.500 [4] shall be applicable.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "6.1.3\tResources",
                            "text_content": "The structure of the Resource URIs of the \"Nsoraf_SOR\" service is depicted in Figure 6.1.3.1-1.\nThe figure depicts a resource URI structure of the Nsoraf_SOR API, which is used to access the Nsoraf_SOR service. The structure includes the resource name, resource type, and resource identifier. The figure provides a clear and concise representation of the API's structure, making it easy to understand and use.\nFigure 6.1.3.1-1: Resource URI structure of the Nsoraf_SOR API\nTable 6.1.3.1-1 provides an overview of the resources and applicable HTTP methods.\nTable 6.1.3.1-1: Resources and methods overview\n\nThis resource represents the SoR information for a SUPI. It is used by NF consumers (e.g. UDM) to:\n-\trequest the retrieval of the SoR information during registration in a VPLMN as specified in clause C.2 in Annex C of 3GPP°TS°23.122°[14].\nResource URI: {apiRoot}/nsoraf-sor//<apiVersion>/{supi}/sor-information\nThis resource shall support the resource URI variables defined in table 6.1.3.2.2-1.\nTable 6.1.3.2.2-1: Resource URI variables for this resource\n\nThis method shall support the URI query parameters specified in table 6.1.3.2.3.1-1.\nTable 6.1.3.2.3.1-1: URI query parameters supported by the GET method on this resource\n\nThis method shall support the request data structures specified in table 6.1.3.2.3.1-2 and the response data structures and response codes specified in table 6.1.3.2.3.1-3.\nTable 6.1.3.2.3.1-2: Data structures supported by the GET Request Body on this resource\n\nTable 6.1.3.2.3.1-3: Data structures supported by the GET Response Body on this resource\n\nTable 6.1.3.2.3.1-4: Headers supported by the 200 Response Code on this resource\n\nTable 6.1.3.2.3.1-5: Headers supported by the 307 Response Code on this endpoint\n\nTable 6.1.3.2.3.1-6: Headers supported by the 308 Response Code on this endpoint\n\nThis resource represents the notification from the NF consumer (e.g. UDM) of the reception status of the acknowledgment of successful reception of SoR information by the UE as specified in in Annex C of 3GPP°TS°23.122 [14].\nResource URI: {apiRoot}/nsoraf-sor//<apiVersion>/{supi}/sor-information/sor-ack\nThis resource shall support the resource URI variables defined in table 6.1.3.3.2-1.\nTable 6.1.3.3.2-1: Resource URI variables for this resource\n\nThis method shall support the URI query parameters specified in table 6.1.3.3.3.1-1.\nTable 6.1.3.3.3.1-1: URI query parameters supported by the PUT method on this resource\n\nThis method shall support the request data structures specified in table 6.1.3.3.3.1-2 and the response data structures and response codes specified in table 6.1.3.3.3.1-3.\nTable 6.1.3.3.3.1-2: Data structures supported by the PUT Request Body on this resource\n\nTable 6.1.3.3.3.1-3: Data structures supported by the PUT Response Body on this resource\n\nTable 6.1.3.3.3.1-4: Headers supported by the 307 Response Code on this endpoint\n\nTable 6.1.3.3.3.1-5: Headers supported by the 308 Response Code on this endpoint\n\n",
                            "figures_meta_data": [],
                            "tables": [
                                {
                                    "description": "Table 6.1.3.1-1: Resources and methods overview",
                                    "table number": 4,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 6.1.3.2.2-1: Resource URI variables for this resource",
                                    "table number": 5,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 6.1.3.2.3.1-1: URI query parameters supported by the GET method on this resource",
                                    "table number": 6,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 6.1.3.2.3.1-2: Data structures supported by the GET Request Body on this resource",
                                    "table number": 7,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 6.1.3.2.3.1-3: Data structures supported by the GET Response Body on this resource",
                                    "table number": 8,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 6.1.3.2.3.1-4: Headers supported by the 200 Response Code on this resource",
                                    "table number": 9,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 6.1.3.2.3.1-5: Headers supported by the 307 Response Code on this endpoint",
                                    "table number": 10,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 6.1.3.2.3.1-6: Headers supported by the 308 Response Code on this endpoint",
                                    "table number": 11,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 6.1.3.3.2-1: Resource URI variables for this resource",
                                    "table number": 12,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 6.1.3.3.3.1-1: URI query parameters supported by the PUT method on this resource",
                                    "table number": 13,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 6.1.3.3.3.1-2: Data structures supported by the PUT Request Body on this resource",
                                    "table number": 14,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 6.1.3.3.3.1-3: Data structures supported by the PUT Response Body on this resource",
                                    "table number": 15,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 6.1.3.3.3.1-4: Headers supported by the 307 Response Code on this endpoint",
                                    "table number": 16,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 6.1.3.3.3.1-5: Headers supported by the 308 Response Code on this endpoint",
                                    "table number": 17,
                                    "summary": "",
                                    "name": ""
                                }
                            ]
                        },
                        {
                            "title": "6.1.4\tCustom Operations without associated resources",
                            "text_content": "No custom operations without associated resources are defined for the Nsoraf_SOR Service.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "6.1.5\tNotifications",
                            "text_content": "In this release of this specification, no notifications are defined for the Nsoraf_SOR Service.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "6.1.6\tData Model",
                            "text_content": "This clause specifies the application data model supported by the API.\nTable 6.1.6.1-1 specifies the data types defined for the Nsoraf_SOR service based interface protocol.\n\nTable 6.1.6.1-1: Nsoraf specific Data Types\n\nTable 6.1.6.1-2 specifies data types re-used by the Nsoraf_SOR service based interface protocol from other specifications, including a reference to their respective specifications and when needed, a short description of their use within the Nsoraf service based interface.\nTable 6.1.6.1-2: Nsoraf re-used Data Types\n\nThis clause defines the structures to be used in resource representations.\nTable 6.1.6.2.2-1: Definition of type SorInformation\n\nTable 6.1.6.2.3-1: Definition of type SorAckInfo\n\nTable 6.1.6.2.4.-1: Definition of type SteeringContainer as a list of mutually exclusive alternatives\n\nTable 6.1.6.2.5-1: Definition of type SteeringInfo\n\nThis clause defines simple data types and enumerations that can be referenced from data structures defined in the previous clauses.\nThe simple data types defined in table 6.1.6.3.2-1 shall be supported.\nTable 6.1.6.3.2-1: Simple data types\n\nThe enumeration SorAckStatus represents an indication to the SOR-AF on whether the acknowledgment of successful reception of SoR information was received from the UE. It shall comply with the provisions defined in table 6.1.6.3.3-1.\nTable 6.1.6.3.3-1: Enumeration SorAckStatus\n\n",
                            "figures_meta_data": [],
                            "tables": [
                                {
                                    "description": "Table 6.1.6.1-1: Nsoraf specific Data Types",
                                    "table number": 18,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 6.1.6.1-2: Nsoraf re-used Data Types",
                                    "table number": 19,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 6.1.6.2.2-1: Definition of type SorInformation",
                                    "table number": 20,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 6.1.6.2.3-1: Definition of type SorAckInfo",
                                    "table number": 21,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 6.1.6.2.4.-1: Definition of type SteeringContainer as a list of mutually exclusive alternatives",
                                    "table number": 22,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 6.1.6.2.5-1: Definition of type SteeringInfo",
                                    "table number": 23,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 6.1.6.3.2-1: Simple data types",
                                    "table number": 24,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 6.1.6.3.3-1: Enumeration SorAckStatus",
                                    "table number": 25,
                                    "summary": "",
                                    "name": ""
                                }
                            ]
                        },
                        {
                            "title": "6.1.7\tError Handling",
                            "text_content": "For the Nsoraf_SOR API, HTTP error responses shall be supported as specified in clause 4.8 of 3GPP TS 29.501 [5]. Protocol errors and application errors specified in table 5.2.7.2-1 of 3GPP TS 29.500 [4] shall be supported for an HTTP method if the corresponding HTTP status codes are specified as mandatory for that HTTP method in table 5.2.7.1-1 of 3GPP TS 29.500 [4].\nIn addition, the requirements in the following clauses are applicable for the Nsoraf_SOR API.\nNo specific procedures for the Nsoraf_SOR service are specified.\nThe application errors defined for the Nsoraf_SOR service are listed in Table 6.1.7.3-1.\nTable 6.1.7.3-1: Application errors\n\n",
                            "figures_meta_data": [],
                            "tables": [
                                {
                                    "description": "Table 6.1.7.3-1: Application errors",
                                    "table number": 26,
                                    "summary": "",
                                    "name": ""
                                }
                            ]
                        },
                        {
                            "title": "6.1.8\tFeature negotiation",
                            "text_content": "The optional features in table 6.1.8-1 are defined for the Nsoraf_SOR API. They shall be negotiated using the extensibility mechanism defined in clause 6.6 of 3GPP TS 29.500 [4].\nTable 6.1.8-1: Supported Features\n\n",
                            "figures_meta_data": [],
                            "tables": [
                                {
                                    "description": "Table 6.1.8-1: Supported Features",
                                    "table number": 27,
                                    "summary": "",
                                    "name": ""
                                }
                            ]
                        },
                        {
                            "title": "6.1.9\tSecurity",
                            "text_content": "As indicated in 3GPP TS 33.501 [8] and 3GPP TS 29.500 [4], the access to the Nsoraf_SOR API may be authorized by means of the OAuth2 protocol (see IETF RFC 6749 [9]), based on local configuration, using the \"Client Credentials\" authorization grant, where the NRF (see 3GPP TS 29.510 [10]) plays the role of the authorization server.\nIf OAuth2 is used, an NF Service Consumer, prior to consuming services offered by the Nsoraf_SOR API, shall obtain a \"token\" from the authorization server, by invoking the Access Token Request service, as described in 3GPP TS 29.510 [10], clause 5.4.2.2.\nNOTE:\tWhen multiple NRFs are deployed in a network, the NRF used as authorization server is the same NRF that the NF Service Consumer used for discovering the Nsoraf_SOR service.\nThe Nsoraf_SOR API defines a single scope \"nsoraf-sor\" for the entire service, and it does not define any additional scopes at resource or operation level.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "6.1.10\tHTTP redirection",
                            "text_content": "An HTTP request may be redirected to a different SOR-AF service instance when using direct or indirect communications (see 3GPP TS 29.500 [4]).\nAn SCP that reselects a different SOR-AF producer instance will return the NF Instance ID of the new SOR-AF producer instance in the 3gpp-Sbi-Producer-Id header, as specified in clause 6.10.3.4 of 3GPP TS 29.500 [4].\nIf an SOR-AF redirects a service request to a different SOR-AF using an 307 Temporary Redirect or 308 Permanent Redirect status code, the identity of the new SOR-AF towards which the service request is redirected shall be indicated in the 3gpp-Sbi-Target-Nf-Id header of the 307 Temporary Redirect or 308 Permanent Redirect response as specified in clause 6.10.9.1 of 3GPP TS 29.500 [4].\n\n",
                            "figures_meta_data": [],
                            "tables": []
                        }
                    ]
                }
            ]
        },
        {
            "title": "A.1\tGeneral",
            "description": "This Annex specifies the formal definition of the API(s) defined in the present specification. It consists of OpenAPI 3.0.0 specifications in YAML format.\nThis Annex takes precedence when being discrepant to other parts of the specification with respect to the encoding of information elements and methods within the API(s).\nNOTE:\tThe semantics and procedures, as well as conditions, e.g. for the applicability and allowed combinations of attributes or values, not expressed in the OpenAPI definitions but defined in other parts of the specification also apply.\nInformative copies of the OpenAPI specification files contained in this 3GPP Technical Specification are available on a Git-based , that uses the GitLab software version control system (see 3GPP TS 29.501 [5] clause 5.3.1 and 3GPP TR 21.900 [7] clause 5B).\n",
            "summary": "",
            "tables": [],
            "figures_meta_data": [],
            "subsections": []
        },
        {
            "title": "A.2\tNsoraf_SOR API",
            "description": "openapi: 3.0.0\ninfo:\ntitle: 'Nsoraf_SOR'\nversion: 1.2.0-alpha.3\ndescription: |\nNsoraf Steering Of Roaming Service.\n© 2023, 3GPP Organizational Partners (ARIB, ATIS, CCSA, ETSI, TSDSI, TTA, TTC).\nAll rights reserved.\nexternalDocs:\ndescription: 3GPP TS 29.550 V18.2.0; Steering Of Roaming Application Function Services.\nurl: http://www.3gpp.org/ftp/Specs/archive/29_series/29.550/\nservers:\n- url: '{apiRoot}/nsoraf-sor/v1'\nvariables:\napiRoot:\ndefault: https://example.com\ndescription: apiRoot as defined in clause 4.4 of 3GPP TS 29.501\nsecurity:\n- {}\n- oAuth2ClientCredentials:\n- nsoraf-sor\npaths:\n/{supi}/sor-information:\nget:\nsummary: retrieve the steering of roaming information for a UE\noperationId: GetSorInformation\ntags:\n- SoR Information Retrieval\nparameters:\n- name: supi\nin: path\ndescription: Identifier of the UE\nrequired: true\nschema:\n$ref: 'TS29571_CommonData.yaml#/components/schemas/Supi'\n- name: supported-features\nin: query\ndescription: Supported Features\nschema:\n$ref: 'TS29571_CommonData.yaml#/components/schemas/SupportedFeatures'\n- name: plmn-id\nin: query\ndescription: serving PLMN ID or SNPN ID\nrequired: true\ncontent:\napplication/json:\nschema:\n$ref: 'TS29571_CommonData.yaml#/components/schemas/PlmnIdNid'\n- name: access-type\nin: query\ndescription: Access type used by the UE\nschema:\n$ref: 'TS29571_CommonData.yaml#/components/schemas/AccessType'\nresponses:\n'200':\ndescription: Expected response to a valid request\ncontent:\napplication/json:\nschema:\n$ref: '#/components/schemas/SorInformation'\nheaders:\nCache-Control:\ndescription: Cache-Control (as described in RFC 9111) with value \"no-cache\" to indicate that the returned SoR information should not be cached\nschema:\ntype: string\n'307':\n$ref: 'TS29571_CommonData.yaml#/components/responses/307'\n'308':\n$ref: 'TS29571_CommonData.yaml#/components/responses/308'\n'400':\n$ref: 'TS29571_CommonData.yaml#/components/responses/400'\n'401':\n$ref: 'TS29571_CommonData.yaml#/components/responses/401'\n'403':\n$ref: 'TS29571_CommonData.yaml#/components/responses/403'\n'404':\n$ref: 'TS29571_CommonData.yaml#/components/responses/404'\n'406':\n$ref: 'TS29571_CommonData.yaml#/components/responses/406'\n'429':\n$ref: 'TS29571_CommonData.yaml#/components/responses/429'\n'500':\n$ref: 'TS29571_CommonData.yaml#/components/responses/500'\n'502':\n$ref: 'TS29571_CommonData.yaml#/components/responses/502'\n'503':\n$ref: 'TS29571_CommonData.yaml#/components/responses/503'\ndefault:\ndescription: Unexpected error\n/{supi}/sor-information/sor-ack:\nput:\nsummary: SoR Acknowledgment Reception Notification\noperationId: SorAckInfo\ntags:\n- Providing the reception status of the acknowledgement of Steering of Roaming information reception by the UE\nparameters:\n- name: supi\nin: path\ndescription: Identifier of the UE\nrequired: true\nschema:\n$ref: 'TS29571_CommonData.yaml#/components/schemas/Supi'\nrequestBody:\nrequired: true\ncontent:\napplication/json:\nschema:\n$ref: '#/components/schemas/SorAckInfo'\nresponses:\n'204':\ndescription: Successful reception of the indication\n'307':\n$ref: 'TS29571_CommonData.yaml#/components/responses/307'\n'308':\n$ref: 'TS29571_CommonData.yaml#/components/responses/308'\n'400':\n$ref: 'TS29571_CommonData.yaml#/components/responses/400'\n'401':\n$ref: 'TS29571_CommonData.yaml#/components/responses/401'\n'403':\n$ref: 'TS29571_CommonData.yaml#/components/responses/403'\n'404':\n$ref: 'TS29571_CommonData.yaml#/components/responses/404'\n'429':\n$ref: 'TS29571_CommonData.yaml#/components/responses/429'\n'500':\n$ref: 'TS29571_CommonData.yaml#/components/responses/500'\n'502':\n$ref: 'TS29571_CommonData.yaml#/components/responses/502'\n'503':\n$ref: 'TS29571_CommonData.yaml#/components/responses/503'\ndefault:\ndescription: Unexpected error\ncomponents:\nsecuritySchemes:\noAuth2ClientCredentials:\ntype: oauth2\nflows:\nclientCredentials:\ntokenUrl: '{nrfApiRoot}/oauth2/token'\nscopes:\nnsoraf-sor: Access to the Nsoraf_SOR API\nschemas:\n\n#\n# COMPLEX DATA TYPES\n#\n\nSorInformation:\ndescription: Represents the SoR information to be conveyed to a UE.\ntype: object\nrequired:\n- sorAckIndication\n- sorSendingTime\nproperties:\nsupportedFeatures:\n$ref: 'TS29571_CommonData.yaml#/components/schemas/SupportedFeatures'\nsteeringContainer:\n$ref: '#/components/schemas/SteeringContainer'\nsorAckIndication:\ntype: boolean\nsorCmci:\n$ref: 'TS29503_Nudm_SDM.yaml#/components/schemas/SorCmci'\nstoreSorCmciInMe:\ntype: boolean\nsorSendingTime:\n$ref: 'TS29571_CommonData.yaml#/components/schemas/DateTime'\nsorSnpnSi:\n$ref: 'TS29571_CommonData.yaml#/components/schemas/Bytes'\nsorSnpnSiLs:\n$ref: 'TS29571_CommonData.yaml#/components/schemas/Bytes'\n\nSorAckInfo:\ndescription: >\nRepresents an indication to the SOR-AF on the reception status of the\nacknowledgment of successful reception of SoR Information by a UE.\ntype: object\nrequired:\n- sorAckStatus\n- sorSendingTime\nproperties:\nsorAckStatus:\n$ref: '#/components/schemas/SorAckStatus'\nsorSendingTime:\n$ref: 'TS29571_CommonData.yaml#/components/schemas/DateTime'\nmeSupportOfSorCmci:\ntype: boolean\nmeSupportOfSorSnpnSi:\ntype: boolean\nmeSupportOfSorSnpnSiLs:\ntype: boolean\n\nSteeringContainer:\ndescription: It consists of either a list (array) of SteeringInfo objects or a Secured Packet\noneOf:\n- type: array\nitems:\n$ref: '#/components/schemas/SteeringInfo'\nminItems: 1\n- $ref: 'TS29509_Nausf_SoRProtection.yaml#/components/schemas/SecuredPacket'\n\nSteeringInfo:\ndescription: >\nContains either a PLMN-ID, an SNPN-ID or a GIN and, for the case of PLMNs, zero or more\npreferred access technologies for accessing such PLMN\ntype: object\noneOf:\n- required: [ plmnId ]\n- required: [ snpnId ]\n- required: [ gin ]\nproperties:\nplmnId:\n$ref: 'TS29571_CommonData.yaml#/components/schemas/PlmnId'\nsnpnId:\n$ref: 'TS29571_CommonData.yaml#/components/schemas/PlmnIdNid'\ngin:\n$ref: 'TS29571_CommonData.yaml#/components/schemas/PlmnIdNid'\naccessTechList:\ntype: array\nitems:\n$ref: 'TS29509_Nausf_SoRProtection.yaml#/components/schemas/AccessTech'\nminItems: 1\n\n\n#\n# ENUMS\n#\n\nSorAckStatus:\ndescription: >\nRepresents the reception status of the acknowledgment of successful reception of\nSoR Information by a UE.\n\nanyOf:\n- type: string\nenum:\n- ACK_SUCCESSFUL\n- ACK_NOT_RECEIVED\n- ACK_NOT_SUCCESSFUL\n- type: string\n\n\n\n",
            "summary": "",
            "tables": [
                {
                    "description": "",
                    "table number": 28,
                    "summary": "",
                    "name": ""
                }
            ],
            "figures_meta_data": [],
            "subsections": []
        }
    ]
}