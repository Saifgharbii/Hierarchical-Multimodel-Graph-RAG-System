{
    "document_name": "29514-i40.docx",
    "content": [
        {
            "title": "Foreword",
            "description": "This Technical Specification has been produced by the 3rd Generation Partnership Project (3GPP).\nThe contents of the present document are subject to continuing work within the TSG and may change following formal TSG approval. Should the TSG modify the contents of the present document, it will be re-released by the TSG with an identifying change of release date and an increase in version number as follows:\nVersion x.y.z\nwhere:\nx\tthe first digit:\n1\tpresented to TSG for information;\n2\tpresented to TSG for approval;\n3\tor greater indicates TSG approved document under change control.\ny\tthe second digit is incremented for all changes of substance, i.e. technical enhancements, corrections, updates, etc.\nz\tthe third digit is incremented when editorial only changes have been incorporated in the document.\n",
            "summary": "",
            "tables": [],
            "figures_meta_data": [],
            "subsections": []
        },
        {
            "title": "1\tScope",
            "description": "The present specification provides the stage 3 definition of the Policy Authorization Service of the 5G System.\nThe 5G System Architecture is defined in 3GPP TS 23.501 [2]. The stage 2 definition and related procedures for the Npcf Policy Authorization Service are specified in 3GPP TS 23.502 [3] and 3GPP TS 23.503 [4].\nThe 5G System stage 3 call flows are provided in 3GPP TS 29.513 [7].\nThe Technical Realization of the Service Based Architecture and the Principles and Guidelines for Services Definition are specified in 3GPP TS 29.500 [5] and 3GPP TS 29.501 [6].\nThe Policy Authorization Service is provided by the Policy Control Function (PCF). This service creates policies as requested by the authorised AF for the PDU Session to which the AF session is bound.\n",
            "summary": "",
            "tables": [],
            "figures_meta_data": [],
            "subsections": []
        },
        {
            "title": "2\tReferences",
            "description": "The following documents contain provisions which, through reference in this text, constitute provisions of the present document.\n-\tReferences are either specific (identified by date of publication, edition number, version number, etc.) or non-specific.\n-\tFor a specific reference, subsequent revisions do not apply.\n-\tFor a non-specific reference, the latest version applies. In the case of a reference to a 3GPP document (including a GSM document), a non-specific reference implicitly refers to the latest version of that document in the same Release as the present document.\n[1]\t3GPP TR 21.905: \"Vocabulary for 3GPP Specifications\".\n[2]\t3GPP TS 23.501: \"System Architecture for the 5G System; Stage 2\".\n[3]\t3GPP TS 23.502: \"Procedures for the 5G System; Stage 2\".\n[4]\t3GPP TS 23.503: \"Policy and Charging Control Framework for the 5G System; Stage 2\".\n[5]\t3GPP TS 29.500: \"5G System; Technical Realization of Service Based Architecture; Stage 3\".\n[6]\t3GPP TS 29.501: \"5G System; Principles and Guidelines for Services Definition; Stage 3\".\n[7]\t3GPP TS 29.513: \"5G System; Policy and Charging Control signalling flows and QoS parameter mapping; Stage 3\".\n[8]\t3GPP TS 29.512: \"5G System; Session Management Policy Control Service; Stage 3\".\n[9]\tIETF RFC 9113: \"HTTP/2\".\n[10]\tIETF RFC 8259: \"The JavaScript Object Notation (JSON) Data Interchange Format\".\n[11]\tOpenAPI: \"OpenAPI Specification Version 3.0.0\", ..\n[12]\t3GPP TS 29.571: \"5G System; Common Data Types for Service Based Interfaces; Stage 3\".\n[13]\t3GPP TS 29.508: \"5G System; Session Management Event Exposure Service; Stage 3\".\n[14]\t3GPP TS 29.554: \"5G System; Background Data Transfer Policy Control Service; Stage 3\".\n[15]\t3GPP TS 29.122: \"T8 reference point for Northbound APIs\".\n[16]\tIEEE 802.3-2015: \"IEEE Standard for Ethernet\".\n[17]\tIEEE 802.1Q-2014: \"Bridges and Bridged Networks\".\n[18]\tIETF RFC 7042: \"IANA Considerations and IETF Protocol and Documentation Usage for IEEE 802 Parameters\".\n[19]\tIETF RFC 3986: \"Uniform Resource Identifier (URI): Generic Syntax\".\n[20]\t3GPP TS 29.214: \"Policy and Charging Control over Rx reference point\".\n[21]\tIETF RFC 7396: \"JSON Merge Patch\".\n[22]\t3GPP TS 32.291: \"5G System; Charging service; Stage 3\".\n[23]\t3GPP TS 22.153: \"5G System; \"Multimedia Priority Service\".\n[24]\tIETF RFC 9457: \"Problem Details for HTTP APIs\".\n[25]\t3GPP TS 33.501: \"Security architecture and procedures for 5G system\".\n[26]\tIETF RFC 6749: \"The OAuth 2.0 Authorization Framework\".\n[27]\t3GPP TS 29.510: \"5G System; Network Function Repository Services; Stage 3\".\n[28]\t3GPP TR 21.900: \"Technical Specification Group working methods\".\n[29]\t3GPP TS 24.292: \"IP Multimedia (IM) Core Network (CN) subsystem Centralized Services (ICS); Stage 3\".\n[30]\t3GPP TS 26.114: \"IP Multimedia Subsystem (IMS); Multimedia telephony; Media handling and interaction\".\n[31]\tIETF RFC 5761: \"Multiplexing RTP Data and Control Packets on a Single Port\".\n[32]\t3GPP TS 24.229: \"IP Multimedia Call Control Protocol based on SIP and SDP; Stage 3\".\n[33]\t3GPP TS 23.228: \"IP Multimedia Subsystem (IMS); Stage 2\".\n[34]\tIETF RFC 5031: \"A Uniform Resource Name (URN) for Emergency and Other Well-Known Services\".\n[35]\tIETF RFC 5009: \"Private Header (P-Header) Extension to the Session Initiation Protocol (SIP) for Authorization of Early Media\".\n[36]\t3GPP TS 24.008: \"Mobile radio interface Layer 3 specification; Core network protocols; Stage 3\".\n[37]\tIETF RFC 3556: \"Session Description Protocol (SDP) Bandwidth Modifiers for RTP Control Protocol (RTCP) Bandwidth\".\n[38]\tIETF RFC 3959 (December 2004): \"The Early Session Disposition Type for the Session Initiation Protocol (SIP)\".\n[39]\t3GPP TS 23.380: \"IMS Restoration Procedures\".\n[40]\t3GPP TS 23.167: \"IP Multimedia Subsystem (IMS) emergency sessions\".\n[41]\t3GPP TS 24.379: \"Mission Critical Push To Talk (MCPTT) call control; Protocol specification\".\n[42]\tIETF RFC 8101: \"IANA Registration of New Session Initiation Protocol (SIP), Resource-Priority Namespace for Mission Critical Push To Talk Service\".\n[43]\t3GPP TS 24.281: \"Mission Critical Video (MCVideo) signalling control; Protocol specification\".\n[44]\t3GPP TS 23.316: \"Wireless and wireline convergence access support for the 5G System (5GS)\".\n[45]\t3GPP TS 22.179: \"Mission Critical Push to Talk (MCPTT) over LTE; Stage 1\".\n[46]\t3GPP TS 22.280: \"Mission Critical (MC) services common requirements\".\n[47]\t3GPP TS 22.281: \"Mission Critical (MC) video over LTE\".\n[48]\t3GPP TS 22.282: \"Mission Critical (MC) data over LTE\".\n[49]\t3GPP TS 24.501: \"Non-Access-Stratum (NAS) protocol for 5G System (5GS); Stage 3\".\n[50]\tIETF RFC 4574: \"The Session Description Protocol (SDP) Label Attribute\".\n[51]\t3GPP TS 26.238: \"Uplink Streaming\".\n[52]\tIETF RFC 6733: \"Diameter Base Protocol\".\n[53]\t3GPP TS 29.519: \"5G System; Usage of the Unified Data Repository service for Policy Control Data, Application Data and Structured Data for Exposure; Stage 3\".\n[54]\t3GPP TS 29.522: \"5G System; Network Exposure Function Northbound APIs; Stage 3\".\n[55]\tVoid.\n[56]\tIETF RFC 8655: \"Deterministic Networking Architecture\".\n[57]\t3GPP TS 29.502: \"5G System; Session Management Services; Stage 3\".\n",
            "summary": "",
            "tables": [],
            "figures_meta_data": [],
            "subsections": []
        },
        {
            "title": "3\tDefinitions and abbreviations",
            "description": "",
            "summary": "",
            "tables": [],
            "figures_meta_data": [],
            "subsections": [
                {
                    "title": "3.1\tDefinitions",
                    "description": "",
                    "summary": "",
                    "text_content": "For the purposes of the present document, the terms and definitions given in 3GPP TR 21.905 [1] and the following apply. A term defined in the present document takes precedence over the definition of the same term, if any, in 3GPP TR 21.905 [1].\nApplication Function (AF): Element offering application(s) that use PDU session resources.\nAF Application identifier: An identifier that refers to the particular service the NF service consumer session belongs to. In the context of application detection control, it refers to the application identifier used by the PCF in the PCC rule as specified in 3GPP TS 29.512 [8].\nAF application session context: Application level session context established by an application level signalling protocol offered by the AF that requires a session context set-up with explicit session context description before the use of the service.\nMCS session: A session for which priority treatment is applied for allocating and maintaining radio and network resources to support the Mission Critical Service (MCS). MCS is defined in 3GPP TS 22.179 [45], 3GPP TS 22.280 [46], 3GPP TS 22.281 [47], and 3GPP TS 22.282 [48].\nMPS session: A session for which priority treatment is applied for allocating and maintaining radio and network resources to support the Multimedia Priority Service (MPS). MPS is defined in 3GPP TS 22.153 [23].\nPCC rule: Set of information enabling the detection of a service data flow and providing parameters for policy control and/or charging control.\nService information: Set of information conveyed from the AF/NEF to the PCF by the Npcf_PolicyAuthorization service to be used as a basis for PCC decisions at the PCF, including information about the AF/NEF application session context (e.g. application identifier, type of media, bandwidth, IP address and port number).\nService data flow: An aggregate set of packet flows.\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "3.2\tAbbreviations",
                    "description": "",
                    "summary": "",
                    "text_content": "For the purposes of the present document, the abbreviations given in 3GPP TR 21.905 [1] and the following apply. An abbreviation defined in the present document takes precedence over the definition of the same abbreviation, if any, in 3GPP TR 21.905 [1].\n5G-RG\t5G Residential Gateway\nAF\tApplication Function\nARP\tAllocation and Retention Priority\nATSSS\tAccess Traffic Steering, Switching and Splitting\nBAT\tBurst Arrival Time\nBBF\tBroadband Forum\nBSSID\tBasic Service Set IDentifier\nCHEM\tCoverage and Handoff Enhancements using Multimedia error robustness feature\nCHF\tCharging Function\nDCCF\tData Collection Coordination Function\nDEI\tDrop Eligible Indicator\nDetNet\tDeterministic Networking\nDNAI\tDN Access Identifier\nDNN\tData Network Name\nDS-TT\tDevice-side TSN translator\nDSL\tDigital Subscriber Line\nDTS\tData Transport Service\nEAS\tEdge Application Server\nECN\tExplicit Congestion Notification\nePDG\tevolved Packet Data Gateway\nE-UTRA\tEvolved Universal Terrestrial Radio Access\nFLUS\tFramework for Live Uplink Streaming\nFN-RG\tFixed Network Residential Gateway\nGEO\tGeosynchronous Orbit\nGPSI\tGeneric Public Subscription Identifier\nHFC\tHybrid Fiber-Coaxial\nH-PCF\tPCF in the HPLMN\nIMS\tIP-Multimedia Subsystem\nJSON\tJavaScript Object Notation\nL4S\tLow Latency Low Loss Scalable Throughput\nLEO\tLow Earth Orbit\nMA\tMulti-Access\nMCPTT\tMission Critical Push to Talk Service\nMCVideo\tMission Critical Video\nMEO\tMedium Earth Orbit\nMPS\tMultimedia Priority Service\nMTU\tMaximum Transmission Unit\nNEF\tNetwork Exposure Function\nNID\tNetwork Identifier\nNR\tNew Radio\nNRF\tNetwork Repository Function\nNWDAF\tNetwork Data Analytics Function\nNW-TT\tNetwork-side TSN translator\nPCC\tPolicy and Charging Control\nPCF\tPolicy Control Function\nPCP\tPriority Code Point\nP-CSCF\tProxy Call Session Control Function\nPDV\tPacket Delay Variation\nPEI\tPermanent Equipment Identifier\nPMIC\tPort Management Information Container\nPON\tPassive Optical Network\nPRA\tPresence Reporting Area\nPSA\tPDU Session Anchor\nQoS\tQuality of Service\nRFSP\tRAT Frequency Selection Priority\nRSN\tRedundancy Session Number\nRTCP\tReal Time Control Protocol\nRTP\tReal Time Protocol\nSDF\tService Data Flow\nSDP\tSession Description Protocol\nSFC\tService Function Chain\nSIP\tSession Initiation Protocol\nSMF\tSession Management Function\nS-NSSAI\tSingle Network Slice Selection Assistance Information\nSNPN\tStand-alone Non-Public Network\nSPI\tSecurity Parameter Index\nSSC\tService and Session Continuity\nSSID\tService Set IDentifier\nSUPI\tSubscription Permanent Identifier\nTNAP\tTrusted Non-3GPP Access Point\nTSC\tTime Sensitive Communication\nTSCAI\tTime Sensitive Communication Assistance Information\nTSCTSF\tTime Sensitive Communication and Time Synchronization Function\nTSN\tTime Sensitive Networking\nUDR\tUnified Data Repository\nUMIC\tUser plane node Management Information Container\nUPF\tUser Plane Function\nURSP\tUE Route Selection Policy\nVID\tVLAN Identifier\nVLAN\tVirtual Local Area Network\nV-PCF\tPCF in the VPLMN\nW-5GAN\tWireline 5G Access Network\nW-5GBAN\tWireline 5G BBF Access Network\nW-5GCAN\tWireline 5G Cable Access Network\nW-AGF\tWireline Access Gateway Function\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                }
            ]
        },
        {
            "title": "4\tNpcf_PolicyAuthorization Service",
            "description": "",
            "summary": "",
            "tables": [],
            "figures_meta_data": [],
            "subsections": [
                {
                    "title": "4.1\tService Description",
                    "description": "",
                    "summary": "",
                    "text_content": "",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": [
                        {
                            "title": "4.1.1\tOverview",
                            "text_content": "The Npcf_PolicyAuthorization Service, as defined in 3GPP TS 23.502 [3] and in 3GPP TS 23.503 [4], is provided by the Policy Control Function (PCF).\nThe Npcf_PolicyAuthorization service authorises a NF service consumer request and creates policies as requested by the authorised NF service consumer for the PDU session to which the AF session is bound to. This service also allows the NF service consumer to subscribe/unsubscribe to notifications on events (e.g. access type change, PLMN change, usage report, access network information report).\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "4.1.2\tService Architecture",
                            "text_content": "The 5G System Architecture is defined in 3GPP TS 23.501 [2]. The Policy and Charging control related 5G architecture is also described in 3GPP TS 23.503 [4] and 3GPP TS 29.513 [7].\nThe only known NF service consumers of the Npcf_PolicyAuthorization service are the Application Function (AF), the Network Exposure Function (NEF), the Time Sensitive Communication and Time Synchronization Function (TSCTSF) and the Policy Control Function for the UE (PCF for the UE).\nThe Npcf_PolicyAuthorization service is provided by the PCF and consumed by the AF, the NEF, the TSCTSF and, when the PCF for the PDU session and the PCF for the UE are different, the PCF for the UE, as shown in figure 4.1.2-1 for the SBI representation model and in figure 4.1.2-2 for the reference point representation model.\nThe figure depicts the architecture of the Npcf_PolicyAuthorization service, showing the service's components and their interactions. The service is represented as a set of services, each with its own responsibilities and dependencies. The diagram illustrates the service's flow, from the client to the service provider, and the interactions between the services. The service is designed to be scalable and fault-tolerant, with a focus on security and performance.\nFigure 4.1.2-1: Npcf_PolicyAuthorization service Architecture, SBI representation\nThe figure depicts the architecture of the Npcf_PolicyAuthorization service, illustrating its reference point representation. It includes a reference point (RP) for each service, which is a point in the network where the service is implemented. The RP is used to determine the service's location and to ensure that the service is correctly implemented. The figure also shows the service's reference point representation, which is a point in the network where the service is implemented. The RP is used to determine the service's location and to ensure that the service is correctly implemented.\nFigure 4.1.2-2: Npcf_PolicyAuthorization service Architecture, reference point representation\nNOTE:\tWhen the N43 reference point exists, i.e. when the PCF is a NF service consumer of the Npcf_PolicyAuthorization service, the PCF for the UE interacts with the PCF for the PDU session.\nThe AF trusted by the operator interacts with the PCF via the N5 reference point. In the case of an untrusted AF, the AF interacts with the PCF via the NEF. The NEF interacts with the PCF via the N30 reference point in the same way that the AF interacts with the PCF via the N5 reference point.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "4.1.3\tNetwork Functions",
                            "text_content": "The PCF (Policy Control Function) performs policy and charging control for the PDU session and/or the flows indicated by the NF service consumer and according to the service requirements provided by the NF service consumer.\nThe policy and charging control for service data flows enable the PCF to provide network control regarding the service data flow detection, gating, QoS and flow based charging (except credit management) towards the SMF/UPF.\nThe PCF receives session and media related information from the Npcf_PolicyAuthorization service consumers and notifies them of subscribed traffic plane events.\nThe PCF may receive from the NF service consumers the request to monitor the requested service and media information and notifies them of the UL/DL/round-trip delay, and congestion information of the requested flows.\nThe PCF may receive service routing requirements and the indication of receiving notifications about user plane path changes from the Npcf_PolicyAuthorization service consumers.\nThe PCF may receive from the NF service consumers the specific required QoS and a prioritized list of alternative QoS profiles and notifies them about the QoS target the access network guarantees.\nThe PCF checks that the service information provided by the NF service consumer is consistent with the operator defined policy rules before storing the service information.\nThe PCF uses the received service information and the subscription information when it applies as basis for the policy and charging control decisions.\nThe PCF derives PCC rules and provisions them to the SMF via the Npcf_SMPolicyControl service and subscribes to traffic plane events via policy control request triggers as described in 3GPP TS 29.512 [8].\nTo enable Time Sensitive Communication, Time Synchronization and Deterministic Networking, the PCF:\n-\tnotifies the NF service consumer (i.e. TSN AF or TSCTSF) about the TSC user plane node and port number corresponding to the device side of a PDU session;\n-\tenables the NF service consumer (i.e. TSN AF or TSCTSF) configures/reads information from the TSC user plane node and ports by forwarding TSC user plane node management containers and port management containers to the SMF as described in 3GPP TS 29.512 [8];\n-\tnotifies the NF service consumer (i.e. TSN AF or TSCTSF) about updated TSC user plane node configuration and port configuration information by forwarding TSC user plane node management containers and port management containers received from the SMF; and\n-\tuses the received QoS and TSC assistance information to derive the policy information delivered in the PCC rule to the SMF as described in 3GPP TS 29.512 [8].\nTo enable PDU Set handling, the PCF may receive the PDU set related QoS from the NF service consumers to derive the policy information delivered in the PCC rule to the SMF as described in 3GPP TS 29.512 [8].\nWhen the PCF for the UE is separated from the PCF for the PDU session, the PCF for the PDU session is responsible for notifying to the PCF for the UE about the URSP enforcement information received from the UE via the SMF as described in 3GPP TS 29.512 [8].\nThe known NF service consumers are the AF, the NEF, the TSCTSF and the PCF (for a UE), as defined in 3GPP TS 23.502 [3].\nThe AF is an element offering control to applications that require the policy and charging control of traffic plane resources; specific user plane paths for the requested traffic, the monitoring of the required service QoS, and/or specific QoS and alternative QoS profiles. The AF uses the Npcf_PolicyAuthorization service to provide service information to the PCF.\nIn 5GS interworking with TSN networks, the TSN AF is an element offering to TSC control functions an interface to 5GS to forward TSC user plane node and port management configuration, and to set the QoS policy required to forward the TSC traffic making use of the 5GS traffic plane resources.\nThe AFs can be deployed by the same operator offering the access services or can be provided by external third-party service provider. If the AF is not allowed by the operator to access directly the PCF, the AF uses the external exposure framework via NEF to interact with the PCF, as described in clause 5.20 of 3GPP TS 23.501 [2].\nThe Network Exposure Function (NEF) supports external exposure of capabilities of network functions.\nThe AF trusted by the operator, the NEF or the DetNet controller can use the TSCTSF to interface with PCF to support time sensitive communication, time synchronization and deterministic networking. The TSCTSF is an element offering, to internal and/or external time sensitive AF (via NEF) and/or to the DetNet controller, control to handle from/towards the PCF the required TSC user plane node and port management configuration, and to set in the PCF the QoS policy required to forward TSC traffic.\nThe PCF providing session management policy control for a UE (i.e. PCF for a PDU session) and the PCF providing UE policy control and/or access and mobility control for this same UE (i.e. PCF for a UE) may be different PCFs. When access and mobility policies depend on traffic plane events (as e.g. application detection control), or the URSP may be adjusted based on the report of URSP enforcement information, the PCF for a UE may act as an NF service consumer of the PCF for the PDU session by subscribing to the corresponding events.\n",
                            "figures_meta_data": [],
                            "tables": []
                        }
                    ]
                },
                {
                    "title": "4.2\tService Operations",
                    "description": "",
                    "summary": "",
                    "text_content": "",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": [
                        {
                            "title": "4.2.1\tIntroduction",
                            "text_content": "Service operations defined for the Npcf_PolicyAuthorization Service are shown in table 4.2.1-1.\nTable 4.2.1-1: Npcf_PolicyAuthorization Service Operations\n\nNOTE 1:\tThe NEF and the AF use the Npcf_PolicyAuthorization service in the same way.\nNOTE 2:\tThe PCF is the consumer when the PCF for the UE and the PCF for the PDU session are different in the Npcf_PolicyAuthorization_Notify/Subscribe/Unsubscribe operations.\nNOTE 3:\tThe NWDAF and the DCCF can be NF service consumers of the Npcf_PolicyAuthorization_Notify/Subscribe/Unsubscribe operations to perform data collection for UEs. However, there is no data collected from the PCF by the NWDAF or the DCCF defined in this Release of the specification.\n",
                            "figures_meta_data": [],
                            "tables": [
                                {
                                    "description": "Table 4.2.1-1: Npcf_PolicyAuthorization Service Operations",
                                    "table number": 1,
                                    "summary": "",
                                    "name": ""
                                }
                            ]
                        },
                        {
                            "title": "4.2.2\tNpcf_PolicyAuthorization_Create service operation",
                            "text_content": "The Npcf_PolicyAuthorization_Create service operation authorizes the request from the NF service consumer, and optionally communicates with Npcf_SMPolicyControl service to determine and install the policy according to the information provided by the NF service consumer.\nThe Npcf_PolicyAuthorization_Create service operation creates an application session context in the PCF.\nThe following procedures using the Npcf_PolicyAuthorization_Create service operation are supported:\n-\tInitial provisioning of service information.\n-\tGate control.\n-\tInitial Background Data Transfer policy indication.\n-\tInitial provisioning of sponsored connectivity information.\n-\tSubscription to Service Data Flow QoS notification control.\n-\tSubscription to Service Data Flow Deactivation.\n-\tInitial provisioning of traffic routing information.\n-\tSubscription to resources allocation outcome.\n-\tInvocation of Multimedia Priority Services.\n-\tSupport of content versioning.\n-\tRequest of access network information.\n-\tInitial provisioning of service information status.\n-\tProvisioning of signalling flow information.\n-\tSupport of resource sharing.\n-\tIndication of Emergency traffic.\n-\tInvocation of MCPTT.\n-\tInvocation of MCVideo.\n-\tPriority sharing indication.\n-\tSubscription to out of credit notification.\n-\tSubscription to Service Data Flow QoS Monitoring information.\n-\tProvisioning of TSCAI input information and TSC QoS related data.\n-\tProvisioning of TSC user plane node management information and port management information.\n-\tP-CSCF restoration enhancements.\n-\tSupport of CHEM feature.\n-\tSupport of FLUS feature.\n-\tSubscription to EPS Fallback report.\n-\tSubscription to TSC user plane node related events.\n-\tInitial provisioning of required QoS information.\n-\tSupport of QoSHint feature.\n-\tSubscription to reallocation of credit notification.\n-\tSubscription to satellite backhaul category changes.\n-\tSubscription to the report of extra UE addresses.\n-\tInitial provisioning of Round-Trip latency requirements.\n-\tProvisioning of multi-modal services.\n-\tProvisioning of PDU Set QoS related data.\n-\tSubscription to BAT offset notification.\n-\tSubscription to Packet Delay Variation monitoring.\n-\tProvisioning of the indication of ECN marking for L4S support.\n-\tSubscription of Round-Trip delay monitoring requirements over two QoS flows.\n-\tProvisioning of the QoS timing information.\n-\tInitial provisioning of Periodicity information.\nThis procedure is used to set up an AF application session context for the service as defined in 3GPP TS 23.501 [2], 3GPP TS 23.502 [3] and 3GPP TS 23.503 [4].\nFigure 4.2.2.2-1 illustrates the initial provisioning of service information.\n\nThe figure depicts the initial provisioning of service information in a 5G network, illustrating the process of setting up the network infrastructure. It shows the various components involved, such as base stations (gNB), user equipment (UE), and scatterers, as well as the use of beamforming techniques to mitigate interference. The figure also highlights the importance of redundancy paths to ensure failover reliability.\nFigure 4.2.2.2-1: Initial provisioning of service information\nWhen a new AF application session context is being established and media information for this application session context is available at the NF service consumer and the related media requires PCC control, the NF service consumer shall invoke the Npcf_PolicyAuthorization_Create service operation by sending the HTTP POST request to the resource URI representing the \"Application Sessions\" collection resource of the PCF, as shown in figure 4.2.2.2-1, step 1.\nThe NF service consumer shall include in the \"AppSessionContext\" data type in the content of the HTTP POST request a partial representation of the \"Individual Application Session Context\" resource by providing the \"AppSessionContextReqData\" data type. The \"Individual Application Session Context\" resource and the \"Events Subscription\" sub-resource are created as described below.\nThe NF service consumer shall provide in the body of the HTTP POST request:\n-\tfor IP type PDU sessions, the IP address (IPv4 or IPv6) of the UE in the \"ueIpv4\" or \"ueIpv6\" attribute; and\n-\tfor Ethernet type PDU sessions, the MAC address of the UE in the \"ueMac\" attribute.\nFor Ethernet type PDU sessions, if the \"TimeSensitiveNetworking\" or \"TimeSensitiveCommunication\" feature is supported, the \"ueMac\" attribute containing the MAC address of the DS-TT port as received from the PCF during the reporting of TSC user plane node information as defined in clause 4.2.5.16.\nNOTE 1:\tThe determination of the DS-TT port MAC address is specified in clause 5.28.2 of 3GPP TS 23.501 [2]. The DS-TT port MAC address is used as identifier of the PDU session related to the reported TSC user plane node information.\nFor IP type PDU sessions, if the \"TimeSensitiveCommunication\" feature is supported, the \"ueIpv4\" or \"ueIpv6\" attribute containing the IPv4 or IPv6 address of the UE as received from the PCF during the reporting of user plane node information as defined in clause 4.2.5.16.\nNOTE 2:\tThe IP address of the PDU session is used as identifier of the PDU session related to the reported TSC user plane node information.\nThe NF service consumer shall provide the corresponding service information in the \"medComponents\" attribute, if available. The NF service consumer shall indicate to the PCF for each media component included within the \"medComponents\" attribute whether the media component service data flow(s) (IP or Ethernet) should be enabled or disabled with the \"fStatus\" attribute. The service data flow filters (IP or Ethernet) that identify the traffic of the media component, if available, shall be provided within the media subcomponent(s) elements included in the \"medSubComps\" attribute (one uplink and/or downlink service data flow filter per media subcomponent). If the \"EnQosMon\" feature is supported, the NF service consumer may include the attribute \"evSubsc\" in the \"MediaSubComponent\" data type for QoS monitoring for each media component. Either the \"evSubsc\" in \"MediaSubComponent\" data type or attribute \"evSubsc\" in \"AppSessionContextReqData\" data type may be provided to subscribe to notifications for a specific event.\nAn IP flow description is based on the definition of the packet filter for an IP flow (direction, IP source and destination address, protocol, and source and destination port) as defined by \"FlowDescription\" data type, the type of service or traffic class as defined in the \"tosTrCl\" attribute and, when the feature \"DetNet\" is supported, the flow label and the IPsec SPI as defined in the \"flowLabel\" and \"spi\" attributes respectively.\nAn Ethernet flow description is based on the definition of the packet filter for an Ethernet flow (direction, Ethertype, source and destination MAC address, vlan tags, IP flow description (when Ethertype is IP) and source and destination MAC address range) as specified by \"EthFlowDescription\" data type.\nIf the \"AuthorizationWithRequiredQoS\" feature as defined in clause 5.8 is supported, the AF may provide within the MediaComponent data structure required QoS information as specified in clause 4.2.2.32.\nThe AF may include the AF application identifier in the \"afAppId\" attribute into the body of the HTTP POST request in order to indicate the particular service that the AF session belongs to.\nThe AF application identifier may be provided at both \"AppSessionContextReqData\" data type level, and \"MediaComponent\" data type level. When provided at both levels, the AF application identifier provided at \"MediaComponent\" data type level shall have precedence.\nThe AF application identifier at the \"AppSessionContextReqData\" data type level may be used to trigger the PCF to indicate to the SMF/UPF to perform the application detection based on the operator's policy as defined in 3GPP TS 29.512 [8].\nIf the \"IMS_SBI\" feature is supported, the NF service consumer may include the AF charging identifier in the \"afChargId\" attribute for charging correlation purposes.\nIf the \"TimeSensitiveNetworking\" or \"TimeSensitiveCommunication\" feature is supported the NF service consumer may provide TSC information as specified in clauses 4.2.2.24 and 4.2.2.25.\nIf the \"MultiMedia\" feature is supported, the NF service consumer may provide the multi-modal service identifier in the \"multiModalId\" attribute for multi-modal communication purpose in clause 4.2.2.37.\nIf the \"PDUSetHandling\" feature is supported, the NF service consumer may provide PDU set related QoS information as specified in clauses 4.2.2.39.\nThe NF service consumer may also include the \"evSubsc\" attribute of \"EventsSubscReqData\" data type to request the notification of certain user plane events. The NF service consumer shall include the events to subscribe to in the \"events\" attribute, and the notification URI where to address the Npcf_PolicyAuthorization_Notify service operation in the \"notifUri\" attribute. The events subscription is provisioned in the \"Events Subscription\" sub-resource.\nThe AF shall also include the \"notifUri\" attribute in the \"AppSessionContextReqData\" data type to indicate the URI where the PCF can request to the AF the deletion of the \"Individual Application Session Context\" resource.\nIf the PCF cannot successfully fulfil the received HTTP POST request due to the internal PCF error or due to the error in the HTTP POST request, the PCF shall send the HTTP error response as specified in clause 5.7.\nOtherwise, when the PCF receives the HTTP POST request from the NF service consumer, the PCF shall apply session binding as described in 3GPP TS 29.513 [7]. To allow the PCF to identify the PDU session for which the HTTP POST request applies, the NF service consumer shall provide in the body of the HTTP POST request:\n-\tfor IP type PDU session, either the \"ueIpv4\" attribute or \"ueIpv6\" attribute containing the IPv4 or the IPv6 address applicable to an IP flow or IP flows towards the UE; and\n-\tfor Ethernet type PDU session, the \"ueMac\" attribute containing the UE MAC address applicable to an Ethernet flow or Ethernet flows towards the UE.\nThe NF service consumer may provide DNN in the \"dnn\" attribute, SUPI in the \"supi\" attribute, GPSI in the \"gpsi\" attribute, the S-NSSAI in the \"sliceInfo\" attribute if available for session binding. The NF service consumer may also provide the domain identity in the \"ipDomain\" attribute.\nNOTE 3:\tThe \"ipDomain\" attribute is helpful in the following scenario: Within a network slice, there are several separate IP address domains, with SMF/UPF(s) that allocate Ipv4 IP addresses out of the same private address range to UE PDU sessions. The same IP address can thus be allocated to UE PDU sessions served by SMF/UPF(s) in different address domains. If one PCF controls several SMF/UPF(s) in different IP address domains, the UE IP address is thus not sufficient for the session binding. A NF service consumer can serve UEs in different IP address domains, either by having direct IP interfaces to those domains, or by having interconnections via NATs in the user plane between the UPF and the NF service consumer. If a NAT is used, the NF service consumer obtains the IP address allocated to the UE PDU session via application level signalling and supplies it for the session binding to the PCF in the \"ueIpv4\" attribute. The NF service consumer supplies an \"ipDomain\" attribute denoting the IP address domain behind the NAT in addition. The NF service consumer can derive the appropriate value from the source address (allocated by the NAT) of incoming user plane packets. The value provided in the \"ipDomain\" attribute is operator configurable.\nNOTE 4:\tThe \"sliceInfo\" attribute is helpful in the scenario where multiple network slices are deployed in the same DNN, and the same IPv4 address may be allocated to UE PDU sessions in different network slices. If one PCF controls several network slices, the UE IP address is not sufficient for the session binding. The NF service consumer supplies \"sliceInfo\" attribute denoting the network slice that allocated the IPv4 address of the UE PDU session. How the NF service consumer derives S-NSSAI is out of the scope of this specification.\nNOTE 5:\tWhen the scenario described in NOTE 3 applies and the NF service consumer is a P-CSCF it is assumed that the P-CSCF has direct IP interfaces to the different IP address domains and that no NAT is located between the UPF and P-CSCF. How a non-IMS NF service consumer obtains the UE private IP address to be provided to the PCF is out of scope of the present release; it is unspecified how to support applications that use a protocol that does not retain the original UE's private IP address.\nNOTE 6:\tAs described in 3GPP TS 29.513 [7], in order to have a successful session binding, all attributes must match, if provided.\nIf the PCF fails in executing session binding, the PCF shall reject the Npcf_PolicyAuthorization_Create service operation with an HTTP \"500 Internal Server Error\" response including the \"cause\" attribute set to \"PDU_SESSION_NOT_AVAILABLE\".\nIf the request contains the \"medComponents\" attribute the PCF shall store the received service information. The PCF shall process the received service information according to the operator policy and may decide whether the request is accepted or not. The PCF may take the priority information within the \"resPrio\" attribute into account when making this decision.\nIf the service information provided in the body of the HTTP POST request is rejected (e.g. the subscribed guaranteed bandwidth for a particular user is exceeded or the authorized data rate in that slice for a UE is exceeded), the PCF shall indicate in an HTTP \"403 Forbidden\" response message the cause for the rejection including the \"cause\" attribute set to \"REQUESTED_SERVICE_NOT_AUTHORIZED\".\nIf the PCF detects that a temporary network failure has occurred (e.g. the SGW has failed as defined in clause B.3.3.3 or B.3.4.9 of 3GPP TS 29.512 [8]) and the AF initiates an Npcf_PolicyAuthorization_Create service operation, the PCF shall reject the request with an HTTP \"403 Forbidden\" response including the \"cause\" attribute set to \"TEMPORARY_NETWORK_FAILURE\".\nIf the service information provided in the HTTP POST request is rejected due to a temporary condition in the network (e.g. the NWDAF reported the network slice selected for the PDU session is congested), the PCF may include in the \"403 Forbidden\" response the \"cause\" attribute set to \"REQUESTED_SERVICE_TEMPORARILY_NOT_AUTHORIZED\". The PCF may also provide a retry interval within the \"Retry-After\" HTTP header field. When the NF service consumer receives the retry interval within the \"Retry-After\" HTTP header field, the NF service consumer shall not send the same service information to the PCF again (for the same application session context) until the retry interval has elapsed. The \"Retry-After\" HTTP header is described in 3GPP TS 29.500 [5] clause 5.2.2.2.\nIf the service information is invalid or in sufficient for the PCF to perform the requested action, e.g. invalid media type or invalid QoS reference, the PCF shall indicate an HTTP \"Bad Request\" response including the \"cause\" attribute set to \"INVALID_SERVICE_INFORMATION\".\nIf the IP flow descriptions cannot be handled by the PCF because the restrictions defined in clause 5.3.8 of 3GPP TS 29.214 [20] are not observed, the PCF shall indicate an HTTP \"Bad Request\" response including the \"cause\" attribute set to \"FILTER_RESTRICTIONS\".\nIf the AF provided the same AF charging identifier for a new Individual Application Session Context that is already in use for the other ongoing Individual Application Session, the PCF shall indicate an HTTP \"Bad Request\" response including the \"cause\" attribute set to \"DUPLICATED_AF_SESSION\".\nNOTE 7:\t\tWhen the PCF supports data rate control per network slice and/or data rate control per network slice for a UE as specified in 3GPP TS 29.512 [8] and the authorized data rate for any of those cases in a slice is exceeded due to the bandwidth demands of the new service information, it is also possible to accept the request based on operator policies. In this case the derived PCC rule(s) belonging to the authorized GBR service data flows can include a different MBR and/or have a different charging than the one applicable if the data rate is not exceeded as specified in 3GPP TS 29.512 [8].\nThe PCF may additionally provide the acceptable bandwidth within the attribute \"acceptableServInfo\" included in the \"ExtendedProblemDetails\" data structure returned in the rejection response message.\nIf the \"SignalingPathValidation\" feature is supported, and the \"User-Agent\" HTTP header field indicates that the NF type of the NF that originated the request is \"NEF\" or \"AF\", and the PCF detects that the TSCTSF is the NF type required for the request (e.g., the PCF triggered a notification about TSC user plane node information towards the TSCTSF as described in clause 4.2.15.16), the PCF shall reject the request with an HTTP \"403 Forbidden\" response including the \"cause\" attribute set to \"INVALID_SIGNALING_PATH\". When the NEF/AF receives this error from the PCF, the NEF/AF selects the TSCTSF for this request, as specified in 3GPP TS 29.522 [54].\nTo allow the PCF and SMF/UPF to perform PCC rule authorization and QoS flow binding for the described service data flows, the NF service consumer shall supply:\n-\tfor IP type PDU session, both source and destination IP addresses and port numbers in the \"fDescs\" attribute within the \"medSubComps\" attribute, if such information is available; and\n-\tfor Ethernet type PDU session, the Ethernet Packet filters in the \"ethfDescs\" attribute within the \"medSubComps\" attribute, if such information is available.\nThe NF service consumer may specify the ToS traffic class (i.e. ToS (IPv4) or TC (IPv6) value) within the \"tosTrCl\" attribute for the described service data flows together with the \"fDescs\" attribute.\nNOTE 8:\t\t:\tA ToS/TC value can be useful when another packet filter attribute is needed to differentiate between packet flows. For example, packet flows encapsulated and encrypted by a tunnelling protocol can be differentiated by the ToS/TC value of the outer header if appropriately set by the application. To use ToS/TC for service data flow detection, network configuration needs to ensure there is no ToS/TC re-marking applied along the path from the application to the PSA UPF and the specific ToS/TC values are managed properly to avoid potential collision with other usage (e.g., paging policy differentiation).\nThe NF service consumer may include the \"resPrio\" attribute at the \"AppSessionContextReqData\" data type level to assign a priority to the AF Session as well as include the \"resPrio\" attribute at the \"MediaComponent\" data type level to assign a priority to the service data flow. The presence of the \"resPrio\" attribute in both levels does not constitute a conflict as they each represent different types of priority. The reservation priority at the \"AppSessionContextReqData\" data type level provides the relative priority for an AF session while the reservation priority at the \"MediaComponent\" data type level provides the relative priority for a service data flow within a session. If the \"resPrio\" attribute is not specified, the requested priority is PRIO_1.\nThe PCF shall check whether the received service information requires PCC rules to be created and provisioned as specified in 3GPP TS 29.513 [7]. Provisioning of PCC rules to the SMF shall be carried out as specified at 3GPP TS 29.512 [8].\nBased on the received subscription information from the NF service consumer, the PCF may create a subscription to event notifications for a related PDU session from the SMF, as described in 3GPP TS 29.512 [8].\nIf the PCF created an \"Individual Application Session Context\" resource, the PCF shall send to the NF service consumer a \"201 Created\" response to the HTTP POST request, as shown in figure 4.2.2.2-1, step 2. The PCF shall include in the \"201 Created\" response:\n-\ta Location header field; and\n-\tan \"AppSessionContext\" data type in the content.\nThe Location header field shall contain the URI of the created individual application session context resource i.e. \"{apiRoot}/npcf-policyauthorization/v1/app-sessions/{appSessionId}\".\nWhen \"Events Subscription\" sub-resource is created in this procedure, the NF service consumer shall build the sub-resource URI by adding the path segment \"/events-subscription\" at the end of the URI path received in the Location header field.\nThe \"AppSessionContext\" data type the content shall contain the representation of the created \"Individual Application Session Context\" resource and may include the \"Events Subscription\" sub-resource.\nThe PCF shall include in the \"evsNotif\" attribute:\n-\tif the NF service consumer subscribed to the event \"PLMN_CHG\" in the HTTP POST request, the \"event\" attribute set to \"PLMN_CHG\" and the \"plmnId\" attribute including the PLMN Identifier or the SNPN Identifier if the PCF has previously requested to be updated with this information in the SMF;\nNOTE 9:\tThe SNPN Identifier consists of the PLMN Identifier and the NID.\nNOTE 10:\tHandover between non-equivalent SNPNs, and between SNPN and PLMN is not supported. When the UE is operating in SNPN access mode, the trigger reports changes of equivalent SNPNs.\n-\tif the NF service consumer subscribed to the event \"ACCESS_TYPE_CHANGE\" in the HTTP POST request, the \"event\" attribute set to \"ACCESS_TYPE_CHANGE\" and:\ni.\tthe \"accessType\" attribute including the access type, and the \"ratType\" attribute including the RAT type when applicable for the notified access type; and\nii.\tif the \"ATSSS\" feature is supported, the \"addAccessInfo\" attribute with the additional access type information if available, where the access type is encoded in the \"accessType\" attribute, and the RAT type is encoded in the \"ratType\" attribute when applicable for the notified access type; and\nNOTE 11:\tFor a MA PDU session, if the \"ATSSS\" feature is not supported by the NF service consumer the PCF includes the \"accessType\" attribute and the \"ratType\" attribute with a currently active combination of access type and RAT type (if applicable for the notifed access type). When both 3GPP and non-3GPP accesses are available, the PCF includes the information corresponding to the 3GPP access.\niii.\t\tthe \"anGwAddr\" attribute including access network gateway address when available,\nif the PCF has previously requested to be updated with this information in the SMF; and\n-\tif the \"IMS_SBI\" feature is supported and if the NF service consumer subscribed to the \"CHARGING_CORRELATION\" event in the HTTP POST request, the \"event\" attribute set to \"CHARGING_CORRELATION\" and may include the \"anChargIds\" attribute containing the access network charging identifier(s) and the \"anChargAddr\" attribute containing the access network charging address.\nThe NF service consumer subscription to other specific events using the Npcf_PolicyAuthorization_Create request is described in the related clauses. Notification of events when the applicable information is not available in the PCF when receiving the Npcf_PolicyAuthorization_Create request is described in clause 4.2.5.\nThe acknowledgement towards the NF service consumer should take place before or in parallel with any required PCC rule provisioning towards the SMF.\nNOTE 12:\tThe behaviour when the NF service consumer does not receive the HTTP response message, or when it arrives after the internal timer waiting for it has expired, or when it arrives with an indication different than a success indication, are outside the scope of this specification and based on operator policy.\nThis procedure is used by an NF service consumer to instruct the PCF about when the service data flow(s) are to be enabled or disabled for a PDU session.\nThe AF shall include in the HTTP POST request message described in subclause 4.2.2.2 the \"fStatus\" attribute for the flows to be enabled or disabled within the \"medComponents\" or \"medSubComps\" attributes.\nIf a \"medSubComps\" attribute contains a \"flowUsage\" attribute with the value \"RTCP\", then the IP Flows described by that media subcomponent shall be enabled in both directions irrespective of the value of the \"fStatus\" attribute of the corresponding media component.\nAs result of this action, the PCF shall set the appropriate gate status for the corresponding active PCC rule(s).\nThe PCF shall reply to the NF service consumer as described in clause 4.2.2.2.\nThis procedure is used by a NF service consumer to indicate a transfer policy negotiated for background data transfer using the Npcf_BDTPolicyControl service as described in 3GPP TS 29.554 [14].\nThe NF service consumer may include in the HTTP POST request message described in clause 4.2.2.2 a reference identifier related to a transfer policy negotiated for background data transfer in the \"bdtRefId\" attribute.\nNOTE 1:\tThe PCF will retrieve the corresponding transfer policy from the UDR based on the reference identifier within the \"bdtRefId\" attribute. In case only one PCF is deployed in the network, transfer policies can be locally stored in the PCF and the interaction with the UDR is not required.\nIf the PCF cannot retrieve the transfer policy, the PCF shall set to TP_NOT_KNOWN the \"servAuthInfo\" attribute in the HTTP response message to the NF service consumer to indicate that the transfer policy is unknown.\nIf the time window of the received transfer policy has expired, the PCF shall set to TP_EXPIRED the \"servAuthInfo\" attribute in the HTTP response message to indicate to the NF service consumer that the transfer policy has expired. Otherwise, if the time window of the received transfer policy has not yet occurred, the PCF shall set to TP_NOT_YET_OCCURRED the \"servAuthInfo\" attribute in the HTTP response message to the NF service consumer to indicate that the time window of the transfer policy has not yet occurred.\nNOTE 2:\tIn the case that the PCF cannot retrieve the transfer policy, the transfer policy time window has not yet occurred or the transfer policy expired, the PCF makes the decision without considering the transfer policy.\nThe PCF shall reply to the NF service consumer as described in clause 4.2.2.2.\nThis procedure is used by a NF service consumer to indicate sponsored data connectivity when \"SponsoredConnectivity\" feature is supported.\nThe NF service consumer shall provide in the \"AppSessionContext\" data type of the HTTP POST request message described in clause 4.2.2.2 an application service provider identity and a sponsor identity within the \"aspId\" attribute and \"sponId\" attribute within the \"ascReqData\" attribute. Additionally, the NF service consumer may provide an indication to the PCF of sponsored data connectivity not enabled by including the \"sponStatus\" attribute set to \"SPONSOR_DISABLED\".\nTo support the usage monitoring of sponsored data connectivity, the NF service consumer may subscribe with the PCF to the notification of usage threshold reached. The NF service consumer shall include:\n-\tan entry of the \"AfEventSubscription\" data type in the \"events\" attribute with the \"event\" attribute set to \"USAGE_REPORT\"; and\n-\tthe \"usgThres\" attribute of \"UsageThreshold\" data type in the \"EventsSubscReqData\" data type with:\na)\tthe total volume in the \"totalVolume\" attribute; or\nb)\tthe uplink volume only in the \"uplinkVolume\" attribute; or\nc)\tthe downlink volume only in the \"downlinkVolume\"; and/or\nd)\tthe time in the \"duration\" attribute.\nNOTE 1:\tIf the NF service consumer is in the user plane, the AF can handle the usage monitoring and therefore it is not required to provide a usage threshold to the PCF as part of the sponsored connectivity functionality.\nWhen the NF service consumer indicated to enable sponsored data connectivity, and the UE is roaming in a VPLMN, the following procedures apply:\n-\tIf the NF service consumer is located in the HPLMN, for home routed roaming case and when the operator policies do not allow accessing the sponsored data connectivity with this roaming case, the H-PCF shall reject the service request and shall include in the HTTP \"403 Forbidden\" response message the \"cause\" attribute set to \"UNAUTHORIZED_SPONSORED_DATA_CONNECTIVITY\".\n-\tIf the NF service consumer is located in the VPLMN, the V-PCF shall reject the service request and shall include in the HTTP \"403 Forbidden\" response message the \"cause\" attribute set to \"UNAUTHORIZED_SPONSORED_DATA_CONNECTIVITY\".\nWhen the NF service consumer indicated to enable sponsored data connectivity, and the UE is non-roaming or roaming with the home routed case and the operator policies allow accessing the sponsored data connectivity with this roaming case, the following procedures apply:\n-\tIf the SMF does not support sponsored connectivity and the required reporting level for that service indicates a sponsored connectivity level according to 3GPP TS 29.512 [8], then the PCF shall reject the request and shall include in the HTTP \"403 Forbidden\" response message the \"cause\" attribute set to \"REQUESTED_SERVICE_NOT_AUTHORIZED\".\n-\tIf the SMF supports sponsored data connectivity feature or the required reporting level is different from sponsored connectivity level as described in 3GPP TS 29.512 [8], then the PCF, based on operator policies, shall check whether it is required to validate the sponsored connectivity data. If it is required, it shall perform the authorizations based on sponsored data connectivity profiles. If the authorization fails, the PCF shall include in the HTTP \"403 Forbidden\" response message the \"cause\" attribute set to \"UNAUTHORIZED_SPONSORED_DATA_CONNECTIVITY\".\nNOTE 2:\tThe PCF is not required to verify that a trust relationship exists between the operator and the sponsors.\nThe PCF shall reply to the NF service consumer as described in clause 4.2.2.2.\nThe subscription to Service Data Flow QoS notification control is used by a NF service consumer to subscribe to receive a notification when the GBR QoS targets for one or more service data flows can no longer (or can again) be guaranteed.\nNOTE:\tIt may happen that the GBR QoS targets for one or more PCC rules (i.e. Service Data Flows) cannot be guaranteed, either permanently or temporarily in the radio access network.\nThe NF service consumer shall use the \"EventsSubscReqData\" data type as described in clause 4.2.2.2 and shall include in the HTTP POST request message an event within the \"events\" attribute with the \"event\" attribute set to \"QOS_NOTIF\".\nThe PCF shall reply to the NF service consumer as described in clause 4.2.2.2.\nAs result of this action, the PCF shall set the appropriate subscription to QoS notification control for the corresponding PCC rule(s) as described in in 3GPP TS 29.512 [8].\nThis procedure is used by NF service consumer to subscribe to the notification of deactivation of one or more Service Data Flows within the AF application session context.\nNOTE:\tIt may happen that one or more PCC rules (i.e. Service Data Flows) are deactivated at the SMF at certain time, either permanently or temporarily, due to e.g. release of resources or out of credit condition.\nThe NF service consumer shall use the \"EventsSubscReqData\" data type as described in clause 4.2.2.2 and shall include in the HTTP POST request message an event within the \"events\" attribute with the \"event\" attribute set to \"FAILED_RESOURCES_ALLOCATION\".\nThe PCF shall reply to the NF service consumer as described in clause 4.2.2.2.\nAs result of this action, the PCF shall set the appropriate subscription to service data flow deactivation for the corresponding PCC rule(s) as described in in 3GPP TS 29.512 [8].\nThis procedure is used by a NF service consumer to:\n-\tinfluence SMF traffic routing decisions to a local access to a Data Network identified by a DNAI; and/or\n-\trequest subscriptions to notifications about UP path management events related to the PDU session,\nwhen \"InfluenceOnTrafficRouting\" feature is supported; and/or\n-\tinfluence the steering of user traffic to service function chain(s) on N6-LAN,\nwhen \"SFC\" feature is supported.\nNOTE 1:\tThe NF service consumer uses the Npcf_PolicyAuthorization service for requests targeting specific on-going PDU sessions of individual UE(s). The NF service consumer requests that target existing or future PDU Sessions of multiple UE(s) or any UE are sent via the NEF and may target multiple PCF(s), as described in 3GPP TS 29.513 [7].\nWhen the \"CommonEASDNAI\" feature is supported, the procedure is also used by a NF service consumer to request to select a common EAS or EAS(es) corresponding to a common DNAI for a set of UE associated with the same traffic correlation Id accessing the application identified by the provided service information.\nNOTE 2:\tCommon EAS selection means the common DNAI is selected.\nIn order to influence on traffic routing, the NF service consumer shall include in the HTTP POST request message described in clause 4.2.2.2 the \"afRoutReq\" attribute of \"AfRoutingRequirement\" data type with specific routing requirements for the application traffic flows either within \"AppSessionContextReqData\" data type for the service indicated in the \"afAppId\" attribute, or within the \"medComponents\" attribute. When provided at both levels, the \"afRoutReq\" attribute value in the \"medComponents\" attribute shall have precedence over the \"afRoutReq\" attribute included in the \"AppSessionContextReqData\" data type.\nIn order to influence on N6-LAN traffic steering, the NF service consumer shall include in the HTTP POST request message described in clause 4.2.2.2 the \"afSfcReq\" attribute of \"AfSfcRequirement\" data type with specific N6-LAN traffic steering requirements for the application traffic flows either within \"AppSessionContextReqData\" data type for the service indicated in the \"afAppId\" attribute, or within the \"medComponents\" attribute. When provided at both levels, the \"afSfcReq\" attribute value in the \"medComponents\" attribute shall have precedence over the \"afSfcReq\" attribute included in the \"AppSessionContextReqData\" data type.\nThe NF service consumer may include traffic routing and N6-LAN traffic steering requirements together with service information.\nThe NF service consumer may request to influence on N6-LAN traffic steering and/or to influence SMF traffic routing decisions to a DNAI.\nIf \"SFC\" feature is supported, when the NF service consumer requests to influence N6-LAN traffic steering, it shall include in the \"afSfcReq\" attribute:\na)\tThe pre-defined Service Function Chain identifier for downlink in \"sfcIdDl\" and/or for uplink in \"sfcIdUl\".\nIn that case, the NF service consumer may include in the \"afSfcReq\" attribute:\na)\tSpatial validity during which the NF service consumer request is valid shall be indicated in terms of validity areas encoded in the \"spVal\" attribute of \"SpatialValidity\" data type. The \"SpatialValidity\" data type consists of a list of presence areas included in the \"presenceInfoList\" attribute, where each element shall include the presence reporting area identifier in the \"praId\" attribute and may include the elements composing a presence area encoded in the attributes: \"trackingAreaList\", \"ecgList\", \"ncgList\", \"globalRanNodeIdList\".\nb)\tMetadata to be transparently sent to the SMF as defined in 3GPP TS 29.512[8].\nIf \"InfluenceOnTrafficRouting\" feature is supported, when the NF service consumer request to influence on traffic routing, the NF service consumer shall include in the \"afRoutReq\" attribute:\na)\tA list of routes to locations of applications in the \"routeToLocs\" attribute. Each element of the list shall contain:\n-\ta DNAI in the \"dnai\" attribute to indicate the location of the application towards which the traffic routing is applied; and\n-\ta routing profile identifier in the \"routeProfId\" attribute, and/or the explicit routing information in the \"routeInfo\" attribute.\nIn this case, the NF service consumer may include in the \"afRoutReq\" attribute:\na)\tIndication of application relocation possibility in the \"appReloc\" attribute.\nb)\tTemporal validity during which the NF service consumer request is valid shall be indicated with the \"startTime\" and \"stopTime\" attributes.\nc)\tSpatial validity during which the NF service consumer request is valid shall be indicated in terms of validity areas encoded in the \"spVal\" attribute of \"SpatialValidity\" data type. The \"SpatialValidity\" data type consists of a list of presence areas included in the \"presenceInfoList\" attribute, where each element shall include the presence reporting area identifier in the \"praId\" attribute and may include the elements composing a presence area encoded in the attributes: \"trackingAreaList\", \"ecgList\", \"ncgList\", \"globalRanNodeIdList\".\nd)\tIndication of UE IP address preservation in the \"addrPreserInd\" attribute if the URLLC feature is supported.\ne)\tIf the SimultConnectivity feature is supported:\n-\tindication of simultaneous connectivity temporarily maintained in the source and target PSA during the edge re-location procedure in the \"simConnInd\" attribute; and\n-\tif the \"simConnInd\" attribute is set to true, the minimum time interval to be considered for inactivity of the traffic routed via the source PSA in the \"simConnTerm\" attribute.\nf)\tEAS IP replacement information in the \"easIpReplaceInfos\" attribute if the EASIPreplacement feature is supported.\ng)\tIndication of EAS rediscovery in the \"easRedisInd\" attribute if the EASDiscovery feature is supported.\nh)\tMaximum allowed user plane latency in the \"maxAllowedUpLat\" attribute if the AF_latency feature is supported.\nNOTE 3:\tThe EAS IP Replacement information and the information indicating the EAS rediscovery are not provided simultaneously.\ni)\tIf the CommonEASDNAI feature is supported, traffic correlation information in the \"tfcCorreInfo\" attribute.\nWhen \"InfluenceOnTrafficRouting\" feature is supported, the NF service consumer may also subscribe to notifications about UP path management events. The NF service consumer shall include in the \"upPathChgSub\" attribute:\n-\tnotifications of early and/or late DNAI change, using the attribute \"dnaiChgType\" indicating whether the subscription is for \"EARLY\", \"LATE\" or \"EARLY_LATE\";\n-\tthe notification URI where the NF service consumer is receiving the Nsmf_EventExposure_Notify service operation in the \"notificationUri\" attribute; and\n-\tthe notification correlation identifier assigned by the NF service consumer in the \"notifCorreId\" attribute.\nWhen the NF service consumer subscribes to notifications about UP path management events, it may include the \"3gpp-Sbi-Consumer-Info\" custom HTTP header as described in clause 6.6.2 of 3GPP TS 29.500 [5] to indicate the features supported by the NF service consumer over the Nsmf_EventExposure service related to UP path management event handling as described in 3GPP TS 29.508[13].\nIf the URLLC feature is supported, the NF service consumer may include an indication of NF service consumer acknowledgement to be expected as an \"afAckInd\" attribute within the \"upPathChgSub\" attribute.\nWhen the feature \"RoutingReqOutcome\" is supported:\n-\tthe PCF may set the \"servAuthInfo\" attribute in the HTTP response message to \"ROUT_REQ_NOT_AUTHORIZED\" when the PCF determines, e.g. based on subscription, the AF influence on traffic routing is not allowed for the PDU session;\n-\twhen the NF service consumer requests the steering of traffic to a DNAI and/or the subscription to notifications about UP path management events, the NF service consumer may subscribe to notifications of failures in the enforcement of UP path changes including within the \"evSubsc\" attribute the \"event\" attribute value \"UP_PATH_CHG_FAILURE\" in an entry of the \"events\" array.\nNOTE 4:\tIn the case that the PCF determines that the requested AF routing requirements cannot be applied and returns the \"servAuthInfo\" attribute in the HTTP response, the PCF makes the decision without considering the requested AF routing requirements.\nThe PCF shall reply to the NF service consumer as described in clause 4.2.2.2.\nThe PCF shall store the routing requirements included in the \"afRoutReq\" attribute and/or in the N6-LAN traffic steering requirements \"afSfcReq\" attribute.\nThe PCF shall check whether the received routing requirements and/or N6-LAN traffic steering requirements require PCC rules to be created or provisioned to include or modify traffic steering policies (for both routing requirements and/or N6-LAN traffic steering requirements) and the application relocation possibility (only for routing requirements) as specified in 3GPP TS 29.513 [7]. Provisioning of PCC rules to the SMF shall be carried out as specified in 3GPP TS 29.512 [8].\nNOTE 5:\tThe NF service consumer receives the notification about UP path management events by the Nsmf_EventExposure_Notify service operation as defined in clause 4.2.2.2 of 3GPP TS 29.508 [13].\n\nThis procedure is used by a NF service consumer to subscribe to notifications when the resources associated to the corresponding service information have been allocated and/or cannot be allocated.\nThe NF service consumer shall use the \"EventsSubscReqData\" data type as described in clause 4.2.2.2 and shall include in the HTTP POST request message:\n-\tif the NF service consumer requests the PCF to provide a notification when the resources associated to the service information have been allocated, an event entry within the \"events\" attribute with the \"event\" attribute set to \"SUCCESSFUL_RESOURCES_ALLOCATION\";\n-\tif the NF service consumer requests the PCF to provide a notification when the resources associated to the service information cannot be allocated, an event entry within the \"events\" attribute with the \"event\" attribute set to \"FAILED_RESOURCES_ALLOCATION\"; and/or\n-\tif the feature \"UEUnreachable\" is supported and the NF service consumer request the PCF to provide a notification when the resources associated to the service information are not allocated because the UE is unreachable, an event entry within the \"events\" attribute with the \"event\" attribute set to \"UE_TEMPORARILY_UNAVAILABLE\".\nThe PCF shall reply to the NF service consumer as described in clause 4.2.2.2.\nAs a result of this action, the PCF shall set the appropriate subscription to notification of resources allocation outcome for the corresponding PCC Rule(s) as described in 3GPP TS 29.512 [8].\n\nThis procedure allows a NF service consumer, as per 3GPP TS 22.153 [23], to request prioritized access to system resources in situations such as during congestion.\nThe NF service consumer may include the \"mpsId\" attribute to indicate that the new AF session relates to an MPS session.\nThe \"mpsId\" attribute shall contain the national variant for the MPS service name indicating an MPS session. The \"resPrio\" attribute shall include the priority value of the related priority service.\nIf the NF service consumer supports the SBI Message Priority mechanism for an MPS session, it shall include the \"3gpp-Sbi-Message-Priority\" custom HTTP header towards the PCF as described in clause 6.8.2 of 3GPP TS 29.500 [5].\nNOTE 1:\tIf the NF service consumer supports the SBI Message Priority mechanism for an MPS session, the NF service consumer will include the \"3gpp-Sbi-Message-Priority\" custom HTTP header with a priority value equivalent to the value of the \"resPrio\" attribute. Highest user priority value is mapped in the corresponding lowest value of the \"3gpp-Sbi-Message-Priority\" custom HTTP header.\nWhen the PCF receives the \"mpsId\" attribute indicating an MPS session, the PCF shall take specific actions on the corresponding PDU session to ensure that the MPS session is prioritized as specified in 3GPP TS 29.512 [8].\nNOTE 2:\t\t\tWhen the PCF supports data rate control per network slice and/or data rate control per network slice for a UE as specified in 3GPP TS 29.512 [8], it is possible that, subject to operator policy and national/regional regulations, prioritised services are exempted from the limitation of data rate per network slice. In that case the PCF will handle the request from the NF service consumer even if the authorized data rate per network slice is exceeded.\nMPS for DTS is the means for an NF service consumer to invoke/revoke the Priority PDU connectivity service for the default QoS flow only, i.e. without designating a particular service data flow for priority service. MPS for DTS applies only to non-IMS DNNs.\nWhen the \"MPSforDTS\" feature is supported, to invoke MPS for DTS, the NF service consumer includes the \"mpsAction\" attribute, set to \"ENABLE_MPS_FOR_DTS\" or \"AUTHORIZE_AND_ENABLE_MPS_FOR_DTS\". These \"mpsAction\" attribute values signal a QoS change to the default QoS flow and service data flows mapped to the default QoS flow without the creation of a new QoS flow.\nWhen the \"ENABLE_MPS_FOR_DTS\" value is received, and allowed by local policy, the PCF does not check the user's MPS subscription details. When the \"AUTHORIZE_AND_ENABLE_MPS_FOR_DTS\" value is received, and allowed by local policy, the PCF shall check the user's MPS subscription to authorize the request. When the request is to authorize and enable, and the request is not authorized (e.g. not allowed by MPS subscription), the PCF shall indicate in an HTTP \"403 Forbidden\" response message the cause for the rejection including the \"cause\" attribute set to \"REQUESTED_SERVICE_NOT_AUTHORIZED\".\nNOTE:\tHow the NF service consumer checks the MPS for DTS authorization is out of scope of the present document.\nWhen creating an Individual Application Session Context resource, due to the invocation or revocation of MPS for DTS, the NF service consumer may subscribe to the outcome of the default QoS updates by setting within the \"evSubsc\" attribute an event in the \"events\" array with:\n-\tthe \"event\" attribute set to the value \"SUCCESSFUL_QOS_UPDATE\" to report that the invocation/revocation requested by the NF service consumer was successful; and/or\n-\tthe \"event\" attribute set to the value \"FAILED_QOS_UPDATE\" to report that the invocation/revocation requested by the NF service consumer has failed to be successful.\nThe NF service consumer may use the procedure specified in clause 4.2.2.12.3 to open a new priority PDU session related to the AF signalling IP flow between the UE and NF service consumer.\nThis clause is applicable to provisioning of signalling flow information for MPS for DTS if the MPSforDTS feature is supported as described in clause 5.8.\nThis procedure allows the NF service consumer to provision information about the AF signalling IP flows between the UE and the NF service consumer.\nThe NF service consumer shall provide:\n-\tthe IP address (IPv4 or IPv6) of the UE in the \"ueIpv4\" or \"ueIpv6\" attribute;\n-\twhen the \"AuthorizationForMpsSignalling\" feature is supported, the \"mpsAction\" attribute set to \"AUTHORIZE_AND_ENABLE_MPS_FOR_AF_SIGNALLING\";\n-\tthe \"mpsId\" attribute; and\n-\ta media component within the \"medComponents\" attribute including:\n-\tthe \"medCompN\" attribute set to \"0\"; and\n-\tthe media subcomponent within the \"medSubComps\" attribute representing the AF signalling IP flow, where the media subcomponent shall contain:\n-\tthe \"flowUsage\" attribute set to the value \"AF_SIGNALLING\";\n-\tthe \"fNum\" attribute set according to the rules described in Annex C;\n-\tthe \"fDesc\" attribute containing the IP flows of the AF signalling flow; and\n-\tthe \"fStatus\" set to the value \"ENABLED\".\nThe PCF shall determine whether the request is accepted or not. If accepted, the PCF shall perform session binding and shall reply to the NF service consumer as described in clause 4.2.2.2. If rejected, the PCF shall indicate in an HTTP \"403 Forbidden\" response message the cause for the rejection including the \"cause\" attribute set to \"REQUESTED_SERVICE_NOT_AUTHORIZED\".\nThe PCF shall set appropriate QoS values for the AF signalling IP flow and shall install the corresponding dynamic PCC rule for the AF signalling IP flows.\nThe NF service consumer may de-provision the information about the AF signalling IP flows at any time. To do that, if the \"Individual Application Session Context\" resource is only used to provide information about the AF Signalling IP flows, the NF service consumer shall remove the resource by sending an Npcf_PolicyAuthorization_Delete service operation towards the PCF as defined in clause 4.2.4.2. Otherwise, the NF service consumer shall remove the IP flow within the media component invoking the Npcf_PolicyAuthorization_Update service operation as defined in clause 4.2.3.17.\nNOTE:\tCombining the request for the AF signalling flow with an MPS for DTS invocation/revocation request is not supported in this release.\nThe support of the media component versioning is optional. When the \"MediaComponentVersioning\" feature is supported, the NF service consumer and the PCF shall comply with the procedures specified in this clause.\nIf required by operator policies, the NF service consumer shall assign a content version to the media component related to certain service and shall provide assigned content version to the PCF in the \"contVer\" attribute included in the corresponding media component entry of the \"medComponents\" attribute.\nIf the PCF receives the \"contVer\" attribute for a certain media component, the PCF shall follow the procedures described in 3GPP TS 29.512 [8], clause 4.2.6.2.14.\nThis procedure is used by a NF service consumer to request the PCF to report the access network information (i.e. user location and/or user timezone information) at the creation of the \"Individual Application Session Context\" resource, when the \"NetLoc\" feature is supported.\nThe NF service consumer shall include in the HTTP POST request message described in clause 4.2.2.2:\n-\tan entry of the \"AfEventSubscription\" data type in the \"events\" attribute with:\na)\tthe \"event\" attribute set to the value \"ANI_REPORT\"; and\nb)\tthe \"notifMethod\" attribute set to the value \"ONE_TIME\"; and\n-\tthe \"reqAnis\" attribute, with the required access network information, i.e. user location and/or user time zone information).\nWhen the PCF determines that the access network does not support the access network information reporting because the SMF does not support the NetLoc feature, the PCF shall respond to the NF service consumer including in the \"EventsNotification\" data type the \"noNetLocSupp\" attribute set to \"ANR_NOT_SUPPORTED\" value. Otherwise, the PCF shall immediately configure the SMF to provide such access information, as specified in 3GPP TS 29.512 [8].\nThe PCF shall reply to the NF service consumer with an HTTP response message as described in clause 4.2.2.2.\nWhen the \"IMS_SBI\" feature is supported, the NF service consumer may provide the status of the service information.\nIf the NF service consumer provides service information that has been fully negotiated (e.g. based on the SDP answer), the NF service consumer may include the \"servInfStatus\" attribute set to \"FINAL\". In this case the PCF shall authorize the session and provision the corresponding PCC rules to the SMF.\nThe NF service consumer may additionally provide preliminary service information not fully negotiated yet (e.g. based on the SDP offer) at an earlier stage. To do so, the NF service consumer shall include the \"servInfStatus\" attribute set to \"PRELIMINARY\". Upon receipt of such preliminary service information, the PCF shall perform an early authorization check of the service information. If the NF service consumer requests the PCF to report the access network information together with preliminary service information, the PCF shall immediately configure the SMF to provide the access network information.\nThis clause is applicable when IMS restoration is supported according to the supported feature \"ProvAFsignalFlow\" as described in clause 5.8.\nThis procedure allows NF service consumer to provision information about the AF signalling IP flows between the UE and the NF service consumer.\nThe NF service consumer shall provide:\n-\tthe IP address (IPv4 or IPv6) of the UE in the \"ueIPv4\" or \"ueIPv6\" attribute; and\n-\ta media component within the \"medComponents\" attribute including:\n-\tthe \"medCompN\" attribute set to \"0\"; and\n-\tone or more media subcomponents within the \"medSubComps\" attribute representing the AF signalling IP flows, where each media subcomponent shall contain:\n-\tthe \"flowUsage\" attribute set to the value \"AF_SIGNALLING\";\n-\tthe \"fNum\" attribute set according to the rules described in Annex C;\n-\tthe \"fDesc\" attribute containing the IP flows of the AF signalling flow;\n-\tthe \"fStatus\" set to the value \"ENABLED\"; and\n-\tthe \"afSigProtocol\" set to the value corresponding to the signalling protocol used between the UE and the NF service consumer.\nThe PCF shall perform session binding and shall reply to the NF service consumer as described in clause 4.2.2.2.\nPCC rules related to the AF signalling IP flows could have been provisioned to SMF using the corresponding procedures specified in 3GPP TS 29.512 [8] at an earlier stage (e.g. typically at the establishment of the QoS flow for AF Signalling IP Flows). The PCF shall install the corresponding dynamic PCC rule for the AF signalling IP flows.\nThe NF service consumer may de-provision the information about the AF signalling IP flows at any time. To do that, if the \"Individual Application Session Context\" resource is only used to provide information about the AF Signalling IP flows, the NF service consumer shall remove the resource by sending an Npcf_PolicyAuthorization_Delete service operation as service operation towards the PCF as defined in clause 4.2.4.2. Otherwise, the NF service consumer shall remove the IP flows within the media component invoking the Npcf_PolicyAuthorization_Update service operation as defined in clause 4.2.3.17.\nThis procedure is used by a NF service consumer to indicate that a media component of an Individual Application Session Context resource may share resources with other media components in the related direction in other Individual Application Session Context resources when the \"ResourceSharing\" feature is supported.\nThe NF service consumer may include the \"sharingKeyUl\" attribute and/or \"sharingKeyDl\" attribute within a media component of the \"medComponents\" attribute to indicate that the related media of the created new Individual Application Session Context resource may share resources with other media components in the related direction that include the same value for the \"sharingKeyUl\" attribute and/or \"sharingKeyDl\" attribute.\nThe PCF shall reply to the NF service consumer with an HTTP response message as described in clause 4.2.2.2.\nIf the \"sharingKeyUl\" attribute and/or \"sharingKeyDl\" attribute are provided within a media component of the \"medComponents\" attribute, the PCF may apply the mechanisms for resource sharing as described in 3GPP TS 29.512 [8], clause 4.2.6.2.8.\nWhen the \"IMS_SBI\" feature is supported, this procedure allows a NF service consumer to indicate that the new AF session context relates to emergency traffic.\nThe NF service consumer may include the \"servUrn\" attribute to indicate that the new AF session context relates to emergency traffic. Additionally, the NF service consumer may include the \"afReqData\" attribute to indicate the additional information requested for the AF session context.\nWhen the PCF receives the \"servUrn\" attribute indicating an emergency session, the PCF may apply special policies, for instance prioritising service flows relating to the new AF session context, allowing these service flows free of charge or exempting the service flows from the limitation of data rate per network slice when the PCF supports data rate control per network slice and/or data rate control per network slice for a UE as specified in 3GPP TS 29.512 [8]).\nIf the \"servUrn\" attribute indicates that the new NF service consumer session context relates to emergency traffic and the \"afReqData\" attribute is received, the PCF shall reply to the NF service consumer as described in clause 4.2.2.2 and shall provide the requested available user information in the \"ueIds\" attribute included within the \"ascRespData\" attribute in the HTTP \"201 Created\" response.\nNOTE 1:\tThe \"supi\" attribute within the \"ueIds\" attribute contains an IMSI, if available, when the UE accesses a PLMN and contains either an IMSI or a network-specific identifier that takes the form of an NAI, if available, when the UE accesses a SNPN. For both, PLMN access and SNPN access, the \"gpsi\" attribute within the \"ueIds\" attribute contains an MSISDN, if available, and the \"pei\" attribute contains an IMEI(SV).\nIf the NF service consumer supports the SBI Message Priority mechanism for an emergency session, it shall include the \"3gpp-Sbi-Message-Priority\" custom HTTP header towards the PCF as described in clause 6.8.2 of 3GPP TS 29.500 [5].\nNOTE 2:\tIf the NF service consumer supports the SBI Message Priority mechanism for an emergency session, the NF service consumer includes the \"3gpp-Sbi-Message-Priority\" custom HTTP header based on NF service consumer policies in relation to valid values of the \"servUrn\" attribute. The highest user priority value is mapped to the corresponding lowest value of the \"3gpp-Sbi-Message-Priority\" custom HTTP header.\nWhen the new AF session context does not indicate emergency traffic and the session binding function detects that the binding is to a PDU session established to the Emergency DNN, the PCF shall reject the HTTP POST request and shall indicate in an HTTP \"403 Forbidden\" response message the cause for the rejection including the \"cause\" attribute set to \"UNAUTHORIZED_NON_EMERGENCY_SESSION\".\nWhen the feature \"MCPTT\" is supported by the NF service consumer and the PCF, this procedure allows a NF service consumer to request prioritized access to system resources in situations such as an MCPTT session with priority call.\nThe NF service consumer may include the \"mcpttId\" attribute to indicate that the new \"Individual Application Session Context\" resource relates to an MCPTT session with priority call.\nWhen the PCF receives the \"mcpttId\" attribute indicating an MCPTT session and the \"resPrio\" attribute, the PCF shall take specific actions on the corresponding PDU session to ensure that the MCPTT session is prioritized as specified in 3GPP TS 29.512 [8].\nNOTE:\tWhen the PCF supports data rate control per network slice and/or data rate control per network slice for a UE as specified in 3GPP TS 29.512 [8], it is possible that, subject to operator policy and national/regional regulations, prioritised services are exempted from the limitation of data rate per network slice. In that case the PCF will handle the request from the NF service consumer even if the authorized data rate per network slice is exceeded.\nAdditionally, when the \"PrioritySharing\" feature is supported, the PCF may receive the \"prioSharingInd\" attribute within the media component received in the \"medComponents\" attribute as described in clause 4.2.2.21. In this case, and if \"MCPTT-Preemption\" feature is supported, the PCF may receive pre-emption information as also described in clause 4.2.2.21.\nFor the handling of MCPTT session with priority call, see Annex B.13\nWhen the feature \"MCVideo\" is supported by the NF service consumer and the PCF, this procedure allows a NF service consumer to request prioritized access to system resources in situations such as an MCVideo session with priority call.\nThe NF service consumer may include the \"mcVideoId\" attribute to indicate that the new \"Individual Application Session Context\" resource relates to an MCVideo session with priority call.\nWhen the PCF receives the \"mcVideoId\" attribute indicating an MCVideo session and the \"resPrio\" attribute, the PCF shall take specific actions on the corresponding PDU session to ensure that the MCVideo session is prioritized as specified in 3GPP TS 29.512 [8].\nNOTE:\tWhen the PCF supports data rate control per network slice and/or data rate control per network slice for a UE as specified in 3GPP TS 29.512 [8], it is possible that, subject to operator policy and national/regional regulations, prioritised services are exempted from the limitation of data rate per network slice. In that case the PCF will handle the request from the NF service consumer even if the authorized data rate per network slice is exceeded.\nFor the handling of MCVideo session with priority call, see Annex B.15.\nWhen the \"PrioritySharing\" feature is supported, the NF service consumer may indicate to the PCF that the related media flow is allowed to use the same Allocation and Retention Priority (ARP) as media flows belonging to other \"Individual Application Session Context\" resources.\nThe NF service consumer may include the \"prioSharingInd\" attribute set to \"ENABLED\" within a media component of the \"medComponents\" attribute to indicate to the PCF that the related media flow is allowed to use the same Allocation and Retention Priority as media flows which:\n-\tare assigned the same 5QI in the PCF; and\n-\tbelong to other \"Individual Application Session Context\" resources bound to the same PDU session that also contain the \"prioSharingInd\" attribute set to \"ENABLED\".\nIf the \"MCPTT-Preemption\" feature is supported, the NF service consumer may also include:\n-\twithin a media component of the \"medComponents\" attribute, the \"preemptCap\" attribute containing the suggested pre-emption capability value and the \"preemptVuln\" attribute containing the suggested pre-emption vulnerability value, for the PCF to determine ARP values;\n-\twithin the \"ascReqData\" attribute in the request body, the \"preemptControlInfo\" attribute containing the pre-emption control information for the PCF to perform pre-emption control as described in 3GPP TS 29.512 [8], clause 4.2.6.2.9; and\n-\twithin the \"evSubsc\" attribute, the \"event\" attribute set to \"FAILED_RESOURCES_ALLOCATION\" to request the notification for resource allocation failure.\nUpon reception of this information, the PCF shall behave as described in 3GPP TS 29.512 [8], clause 4.2.6.2.9. For the handling of MCPTT sessions, see Annex B.10.\nNOTE 1:\tService data flow deactivation procedures will apply according to clauses 4.2.2.7, 4.2.3.7, 4.2.5.5.\nNOTE 2:\tThis enhancement avoids the risk that a QoS flow establishment request is rejected if the maximum number of active QoS flows is exceeded.\nThe PCF shall reply to the NF service consumer with an HTTP response message as described in clause 4.2.2.2.\nThis procedure is used by the NF service consumer if the \"IMS_SBI\" feature is supported to subscribe to notifications of credit not available for the Service Data Flows within the AF application session context.\nNOTE:\tIt can happen that there are one or more PCC rules (i.e. Service Data Flows) with credit not available, each one with their corresponding termination action (terminate, redirect, access restricted).\nThe NF service consumer shall use the \"EventsSubscReqData\" data type as described in clause 4.2.2.2 and shall include in the HTTP POST request message an event within the \"evSubsc\" attribute with the \"event\" attribute set to the value \"OUT_OF_CREDIT\".\nAs result of this action, the PCF shall set the appropriate subscription to out of credit notification for the corresponding PCC rule(s) as described in 3GPP TS 29.512 [8].\nThe PCF shall reply to the NF service consumer with an HTTP response message as described in clause 4.2.2.2.\nThe subscription to Service Data Flow QoS monitoring information is used by a NF service consumer to receive a notification about the real-time measurements of QoS parameters for a QoS Flow, e.g. packet delay between UPF and UE, when the \"QoSMonitoring\" feature is supported.\nThe NF service consumer shall use the \"EventsSubscReqData\" data type as described in clause 4.2.2.2 and shall include:\n-\tthe requested QoS monitoring parameter(s) to be measured (i.e. DL, UL and/or round trip packet delay, if the feature \"XRM_5G\" is supported, , and/or the UL and/or DL data rate information) within the \"reqQosMonParams\" attribute;\n-\tan entry of the \"AfEventSubscription\" data type per requested notification method in the \"events\" attribute with:\na)\tthe \"event\" attribute set to the value \"QOS_MONITORING\"; and\nb)\tthe \"notifMethod\" attribute set to the value \"EVENT_DETECTION\" or \"PERIODIC\"; and\nc)\twhen the \"notifMethod\" attribute is set to the value \"PERIODIC\", the periodic time for reporting and, if the feature \"PacketDelayFailureReport\" or \"EnQoSMon\" is supported, the maximum period with no QoS measurement results reported  within the \"repPeriod\" attribute; and\nd)\twhen the \"notifMethod\" attribute is set to the value \"EVENT_DETECTION\", the minimum waiting time between subsequent reports within the \"waitTime\" attribute and, if the feature \"PacketDelayFailureReport\" or \"EnQoSMon\" is supported, the maximum period with no QoS measurement results reported within the \"repPeriod\" attribute;\n-\twhen the \"notifMethod\" attribute set to the value \"EVENT_DETECTION\":\n1.\tFor QoS monitoring of packet delay, the \"qosMon\" attribute, with the required QoS Monitoring information:\na)\tthe delay threshold for downlink with the \"repThreshDl\" attribute;\nb)\tthe delay threshold for uplink with the \"repThreshUl\" attribute; and/or\nc)\tthe delay threshold for round trip with the \"repThreshRp\" attribute.\nWhen the feature \"XRM_5G\" is supported, for QoS monitoring for congestion information, the \"congestMon\" attribute with:\na)\tthe delay threshold for downlink with the \"conThreshDl\" attribute; and/or\nb)\tthe delay threshold for uplink with the \"conThreshUl\" attribute.\n2.\tWhen the feature \"XRM_5G\" is supported, for QoS monitoring of data rate, the \"qosMonDatRate\" attribute with;\na)\tthe data rate threshold for downlink within the \"repThreshDatRateDl\" attribute; and/or\nb)\tthe data rate threshold for the uplink within the \"repThreshDatRateUl\" attribute.\nEditor’s note:\tWhether the applicable reporting frequency for the Data Rate QoS monitoring can be event triggered and/or periodic is FFS.\nThe NF service consumer may include in \"EventsSubscReqData\" data type the notification correlation identifier assigned by the AF within the \"notifCorreId\" attribute and, if the feature \"ExposureToEAS\" or \"EnQoSMon\" is supported, the \"directNotifInd\" attribute set to true to indicate direct event notification of QoS Monitoring data from the UPF.\nFor data rate monitoring, the AF may include an averaging window within the \"avrgWndw\" attribute.\nThe NF service consumer may include the \"3gpp-Sbi-Consumer-Info\" custom HTTP header as described in clause 6.6.2 of 3GPP TS 29.500 [5] to indicate the support of \"QoSMonitoring\" feature by the NF service consumer over the Nsmf_EventExposure service as described in 3GPP TS 29.508[13].\nThe NF service consumer shall include more than one \"AfEventSubscription\" data type within the \"EventsSubscReqData\" data type if more than one notification method is required.\nThe PCF shall reply to the AF as described in clause 4.2.2.2.\nIf the AF provided an indication of direct event notification in the request and PCF determines that the direct notification of QoS Monitoring reports applies (i.e. the AF request does not include QoS parameter measurements that are derived by PCF), the PCF behaves as specified in 3GPP TS 29.512 [8].\nIf the AF provided an indication of direct event notification and PCF determines that the direct notification of QoS Monitoring reports does not apply (i.e. the AF request includes QoS parameter measurements that are derived by PCF as specified in clause 4.2.2.41 (AF request for monitoring packet delay variation), and clause 4.2.2.44 (AF request for monitoring round trip packet delay when UL and DL are on different service data flows)), the PCF generates a successful response to the AF and indicates that direct event notification is not possible by including within the \"servAuthInfo\" attribute the value \"DIRECT_NOTIF_NOT_POSSIBLE\". In this case, the PCF shall not indicate direct notification in the QoS Monitoring policy provided to the SMF and instead subscribe to receive QoS Monitoring reports from SMF as specified in 3GPP TS 29.512 [8].\nAs result of this action, the PCF shall set the appropriate subscription to QoS Monitoring information for the corresponding PCC rule(s) as described in 3GPP TS 29.512 [8].\nEditor’s note:\tIt is FFS whether new data type structure is needed for QoS monitoring control for multi-modal services.\nIf the \"TimeSensitiveNetworking\" feature is supported the NF service consumer (i.e. TSN AF or TSCTSF) may provide TSCAI input information within the TSC assistance container and QoS related data to the PCF by the Npcf_PolicyAuthorization_Create service operation to describe the TSC traffic pattern and QoS characteristics for use in the 5G System.\nThe NF service consumer (i.e. TSN AF or TSCTSF) shall derive the TSCAI input information and the QoS related data for a given TSC stream or flow of aggregated TSC streams. The TSCTSF may determine the TSCAI input information and the related QoS data based on information provided by an AF/NEF, and may provide it for IP type and Ethernet type of PDU sessions as specified in clauses 4.15.6.6 and 4.15.6.6a of TS 23.502 [3]. In case of integration with IEEE TSN network, the TSN AF determines the TSCAI input information as defined in clause 5.27.2.2 of 3GPP TS 23.501 [2] and the QoS related data as defined in clause 5.28.4 of 3GPP TS 23.501 [2].\nTo indicate the TSCAI input information of a TSC stream or aggregated set of TSC streams, the NF service consumer (i.e. TSN AF or TSCTSF) may include for the uplink flow direction (ingress interface of the DS-TT/UE) in the \"tscaiInputUl\" attribute and/or for the downlink flow direction (ingress interface of the NW-TT) the \"tscaiInputDl\" attribute included in a media component entry of the \"medComponents\" attribute:\n-\tthe time period between the start of two bursts of a TSC stream or aggregated TSC streams in reference to the external GM encoded in the \"periodicity\" attribute, and the acceptable lower bound and upper bound of the periodicity of the start two bursts of a TSC stream or aggregated TSC streams in reference to the external GM or acceptable list of the periodicity value(s) encoded in the \"periodicityRange\" attribute if the \"EnTSCAC\" feature is supported;\n-\tthe arrival time of the first data burst of a TSC stream or aggregated TSC streams in reference to the external GM encoded in the \"burstArrivalTime\" attribute, and the acceptable earliest and latest arrival time of the first data burst of the TSC stream or aggregated TSC streams in reference to the external GM encoded in the \"burstArrivalTimeWnd\" attribute if the \"EnTSCAC\" feature is supported; and\n-\tif the \"TimeSensitiveCommunication\" feature is supported, the time period an application can survive without any burst, i.e., the survival time, in terms of maximum number of messages encoded in the \"surTimeInNumMsg\" attribute or in time units encoded in the \"surTimeInTime\" attribute.\nNOTE:\tA single burst (message is equivalent to burst) is expected within a single periodicity. The survival time in terms of maximum number of messages represents the time period result of multiplying the periodicity by the indicated number of messages.\nThe uplink and/or downlink flow of the TSC stream or aggregated set of TSC streams shall be encoded within the corresponding \"MediaSubComponent\" entries of the \"medSubComps\" attribute, for PDU sessions of Ethernet type in the \"ethfDescs\" attribute and for PDU sessions of IP type in the \"fDescs\" attribute.\nWhen the feature \"TimeSensitiveCommunication\" is supported, to indicate the time domain the NF service consumer is located in (i.e. the (g)PTP domain), the NF service consumer may include the \"tscaiTimeDom\" attribute in the corresponding media component entry of the \"medComponents\" attribute.\nWhen the feature \"EnTSCAC\" is supported, the NF service consumer may include within the \"capBatAdaptation\" attribute in the corresponding media component entry of the \"medComponents\" attribute the capability of AF to adjust the burst sending time according to the network provided Burst Arrival Time offset if burst arrival time window is not provided.\nWhen the feature \"EnTSCAC\" is supported, an NF service consumer may request to be notified about the network-determined BAT offset and the optionally adjusted periodicity by using the \"EventsSubscReqData\" data type and shall include in the HTTP POST request message an event within the \"events\" attribute with the \"event\" attribute set to \"BAT_OFFSET_INFO\".\nTo indicate the TSC QoS related data of a TSC stream or aggregated set of TSC streams, the NF service consumer (i.e. TSN AF or TSCTSF) may include in the \"tsnQos\" attribute included in a media component entry of the \"medComponents\" attribute;\n-\tthe maximum burst size encoded in the \"maxTscBurstSize\" attribute;\n-\tthe maximum time a packet may be delayed encoded in the \"tscPackDelay\" attribute;\n-\tthe maximum packet error rate encoded in the \"maxPer\" attribute, if the \"ExtQoS\" feature is supported;\n-\tthe TSC traffic priority in scheduling resources among other TSC streams encoded in the \"tscPrioLevel\" attribute.\nThe NF service consumer (i.e. TSN AF or TSCTSF) may also include the max bitrates in uplink and downlink within the \"marBwUl\" attribute and the \"marBwDl\" attribute of the \"medComponents\" attribute respectively. In case of integration with IEEE TSN network, the TSN AF determines the maximum flow bit rate as defined in Annex I of 3GPP TS 23.501 [2]. In case of integration with a TSC network other than IEEE TSN network, the TSCTSF may additionally include the \"mirBwUl\" attribute and the \"mirBwDl\" attribute of the \"medComponents\" attribute to indicate the requested guaranteed bit rates in uplink and downlink respectively.\nWhen the feature \"TimeSensitiveCommunication\" is supported, and the feature \"AuthorizationWithRequiredQoS\" is supported as specified in clause 4.2.2.32, the NF service consumer (i.e. TSCTSF or TSN AF) may provide within an entry of the \"medComponents\" attribute a reference to pre-defined QoS information within the \"qosReference\" attribute instead of providing the attributes \"tsnQos\", \"marBwUl\", \"marBwDl\", \"mirBwUl\", and/or \"mirBwDl\". Additionally, if the NF service consumer supports adjustments to different QoS parameter combinations, the NF service consumer may provide a prioritized list of one or more QoS references within the \"altSerReqs\" attribute as specified in clause  4.2.2.32.\nWhen the feature \"TimeSensitiveCommunication\" is supported, the feature \"AltSerReqsWithIndQoS\" is supported as specified in clause 4.2.2.32, and the NF service consumer (i.e. TSCTSF or TSN AF) provides within an entry of the \"medComponents\" attribute individual QoS information (e.g. within the \"tsnQos\", \"marBwUl\" and/or \"marBwDl\" attributes as described in this clause, then the NF service consumer may provide adjustments to different QoS parameter combinations within a prioritized list of one or more Requested Alternative QoS Parameter set(s) within the \"altSerReqsData\"attribute as specified in clause 4.2.2.32.\nThe PCF shall reply to the NF service consumer (i.e. TSN AF or TSCTSF) as described in clause 4.2.2.2.\nThe PCF shall check whether the received TSCAI input container and TSC QoS related data require to create PCC rules to provide the SMF with derived QoS characteristics and the received TSCAI input container. Provisioning of PCC rule(s) to the SMF shall be carried out as specified in 3GPP TS 29.512 [8].\nDuring the lifetime of a PDU session enabling Time Sensitive Communications, Time Synchronization and Deterministic Networking, the PCF may receive from the NF service consumer TSC user plane node management information and/or, when the DS-TT or the NW-TT functions are used, port management information for a port located in DS-TT and/or NW-TT and/or, the direct event notification of TSC management information from the UPF if the feature \"ExposureToTSC\" is supported.\nNOTE:\tThe 5GS Architecture to support IETF Deterministic Networking (IETF RFC 8655 [56]) does not require the DS-TT functionality to be supported in the device nor require the user plane NW-TT functionality to be supported in the UPF. However, it can co-exist with such functions.\nIf the \"TimeSensitiveNetworking\" or \"TimeSensitiveCommunication\" feature is supported, the NF service consumer (i.e., the TSN AF or the TSCTSF) may provide a UMIC with TSC user plane node management information for the UPF/NW-TT and PMIC(s) with port management information for the DS-TT port and/or the NW-TT ports, to configure the 5G system as a TSC user plane node by invoking the Npcf_PolicyAuthorization_Create service operation to the PCF.\nThe NF service consumer may include in the \"AppSessionContextReqData\" data type:\n-\tthe DS-TT PMIC encoded in the attribute \"tsnPortManContDstt\" and/or the one or more NW-TT PMIC(s) encoded in the \"tsnPortManContNwtts\" attribute, if available, for the DS-TT port and NW-TT ports allocated for a PDU session. The PMIC(s) are encoded in the \"PortManagementContainer\" data type, which includes the port management information in the \"portManCont\" attribute and the related port number in the \"portNum\" attribute;\n-\tthe UMIC encoded in the \"tsnBridgeManCont\", if available, for the TSC user plane node functionality of the UPF/NW-TT allocated for a PDU session. The UMIC is encoded in the \"BridgeManagementContainer\" data type;and/or\n-\tif the feature \"ExposureToTSC\" is supported, the notification URI within the \"tscNotifUri\" attribute and the notification correlation identifier assigned by the TSCTSF or TSN AF within the \"tscNotifCorreId\" attribute, which, if available, indicates that the direct event notification of TSC management information from the UPF is requested.\nAs result of this action, the PCF shall provide the received DS-TT and/or NW-TT PMIC(s) and/or UMIC and/or the direct event notification of TSC management information for the corresponding PDU session as described in 3GPP TS 29.512 [8].\nThis procedure allows a NF service consumer, as per 3GPP TS 22.179 [45], to request prioritized access to system resources in situations such as during congestion.\nThe NF service consumer may include the \"mcsId\" attribute to indicate that the new AF session relates to an MCS session.\nThe \"mcsId\" attribute shall contain the national variant for the MCS service name indicating an MCS session. The \"resPrio\" attribute shall include the priority value of the related priority service.\nIf the NF service consumer supports the SBI Message Priority mechanism for an MCS session, it shall include the \"3gpp-Sbi-Message-Priority\" custom HTTP header towards the PCF as described in clause 6.8.2 of 3GPP TS 29.500 [5].\nNOTE:\tIf the NF service consumer supports the SBI Message Priority mechanism for an MCS session, the NF service consumer will include the \"3gpp-Sbi-Message-Priority\" custom HTTP header with a priority value equivalent to the value of the \"resPrio\" attribute. Highest user priority value is mapped in the corresponding lowest value of the \"3gpp-Sbi-Message-Priority\" custom HTTP header.\nWhen the PCF receives the \"mcsId\" attribute indicating an MCS session, the PCF shall take specific actions on the corresponding PDU session to ensure that the MCS session is prioritised as specified in 3GPP TS 29.512 [8].\nThe P-CSCF restoration custom operation is applicable when the PCF based Restoration Enhancement, as defined in 3GPP TS 23.380 [39], represented by the supported feature \"PCSCF-Restoration-Enhancement\" is supported by both P-CSCF and PCF.\nFigure 4.2.2.27-1 illustrates the P-CSCF restoration enhancements.\n\nThe figure depicts a P-CSCF (Passive-CSCF) restoration enhancement, which is a crucial component in the restoration of a communication system. The figure shows the P-CSCF in a state of restoration, with the restoration process being highlighted. The restoration enhancement is a crucial step in ensuring the reliability and functionality of the communication system.\nFigure 4.2.2.27-1: P-CSCF restoration enhancements\nThe P-CSCF acting as a NF service consumer shall invoke the \"P-CSCF restoration\" custom operation sending an HTTP POST request to the resource URI representing the custom operation (POST …/pcscf-restoration) as shown in figure 4.2.2.27-1, step 1, in case P-CSCF restoration needs to be performed.\nThe P-CSCF shall include in the \"PcscfRestorationRequestData\" data type in the content of the HTTP POST request:\n-\tthe IP address (IPv4 or IPv6) of the UE in the \"ueIpv4\" or \"ueIpv6\" attribute, and if the IP address is not unique (e.g. private IPv4 case), the \"ipDomain\" attribute or the \"sliceInfo\" attribute if available; or\n-\tif the IP address is not available or if the IP address is not unique and the \"ipDomain\" attribute and the \"sliceInfo\" attribute are not available, the SUPI in the \"supi\" attribute and the DNN in the \"dnn\" attribute.\nThe PCF shall identify the PDU session for which the HTTP POST request applies. If the PCF fails in identifying the PDU session, the PCF shall reject the \"P-CSCF restoration\" custom operation with an HTTP \"500 Internal Server Error\" response including the \"cause\" attribute set to \"PDU_SESSION_NOT_AVAILABLE\".\nOtherwise, the PCF shall acknowledge the request and shall send to the NF service consumer a \"204 No content\" response to the HTTP POST request, as shown in figure 4.2.2.27-1, step 2.\nThe PCF shall send a request for P-CSCF restoration to the SMF for the corresponding PDU session as described in 3GPP TS 29.512 [8], clause 4.2.3.18.\n4.2.2.28\tSupport of CHEM feature\nWhen CHEM feature is supported, the NF service consumer may include the value of Maximum Packet Loss Rate for UL within the \"maxPacketLossRateUl\" attribute and/or the value of Maximum Packet Loss Rate for DL within the \"maxPacketLossRateDl\" attribute in \"medComponents\" attribute. For CHEM feature, see Annex B.14.\nWhen \"FLUS\" feature is supported by the NF service consumer, the NF service consumer may include the \"flusId\" attribute within a media component of the \"medComponents\" attribute to indicate that the related media of the created new Individual Application Session Context resource corresponds to a FLUS media stream. Additional QoS information for the treatment of FLUS media may be provided within \"desMaxLatency\" attribute and/or \"desMaxLoss\" attribute.\nWhen the \"EPSFallbackReport\" feature is supported, the NF service consumer subscribes to EPS Fallback report to be notified of the rejection in 5GS of the requested resources associated to service information for voice media type and the subsequent fallback to EPS of the resources associated to the voice media and other medias requested by this NF service consumer.\nThe NF service consumer shall use the \"EventsSubscReqData\" data type as described in clause 4.2.2.2 and shall include in the HTTP POST request message an event within the \"events\" attribute with the \"event\" attribute set to \"EPS_FALLBACK\". The NF service consumer shall request to the PCF to report EPS Fallback in conjuction with providing the PCF with NF service consumer service information for voice media type as described in clause 4.2.2.2.\nThe PCF shall reply to the NF service consumer as described in clause 4.2.2.2.\nAs result of this action, the PCF shall set the appropriate subscription to EPS Fallback report for the corresponding PCC rule(s) as described in in 3GPP TS 29.512 [8].\nThis procedure is used by the NF service consumer (i.e. TSN AF or TSCTSF) if the \"TimeSensitiveNetworking\" or \"TimeSensitiveCommunication\" feature is supported to subscribe to notifications of updated TSC user plane node information, e.g., DS-TT PMIC and/or NW-TT PMIC(s) and/or UMIC availability within the Individual Application Session Context resource created to handle the TSC user plane node in the context of a PDU session.\nThe NF service consumer shall use the \"EventsSubscReqData\" data type as described in clause 4.2.2.2 and shall include in the HTTP POST request message within the \"evSubsc\" attribute an event within \"events\" attribute with the \"event\" attribute set to the value \"TSN_BRIDGE_INFO\" to subscribe to the reception of TSC user plane node information.\nThe PCF shall reply to the NF service consumer with an HTTP response message as described in clause 4.2.2.2. If the PCF stores updated PMIC/UMIC updated information, the PCF shall include the \"evsNotif\" attribute with an entry in the \"evNotifs\" array with the \"event\" attribute set to \"TSN_BRIDGE_INFO\" and the \"tsnBridgeManCont\" attribute and/or the \"tsnPortManContDstt\" attribute and/or the \"tsnPortManContNwtts\" attribute as received from the SMF if not previously reported.\nAs result of this action, the PCF shall set the corresponding subscription to the report of TSC user plane node management information and port management information for the corresponding PDU session , if not previously done, as described in 3GPP TS 29.512 [8].\nThis procedure is used by a NF service consumer to request that a data session to a UE is set up with a specific QoS (e.g. low latency or Packet Delay Variation) and priority handling when the \"AuthorizationWithRequiredQoS\" feature is supported.\nThe NF service consumer may provide within one or more entries of the \"medComponents\" attribute included in the \"ascReqData\" attribute of the HTTP POST request message described in clause 4.2.2.2 a reference to pre-defined QoS information within the \"qosReference\" attribute.\nAdditionally, if the NF service consumer supports adjustment to different QoS parameter combinations, the NF service consumer may provide a prioritized list of one or more QoS references within the \"altSerReqs\" attribute, where the lower the index of the array for a given entry, the higher the priority.\nIf the \"AltSerReqsWithIndQoS\" feature is supported, and the NF service consumer requests that the data session to a UE is set up with individual QoS parameters (i.e., with QoS information within \"medComponents\" attribute, e.g. the \"tsnQos\", \"marBwUl\" and/or \"marBwDl\" attributes, instead of a QoS reference within the \"qosReference\" attribute), the NF service consumer may instead of the \"altSerReqs\" attribute provide a prioritized list of alternative service requirements that include Requested Alternative QoS Parameter set(s) within the \"altSerReqsData\" attribute, where the lower the index of the array for a given entry, the higher the priority.\nIf the \"DisableUENotification\" feature is supported, the AF may also indicate to the PCF that the UE does not need to be informed about changes related to Alternative QoS Profiles by including the \"disUeNotif\" attribute set to true.\nWhen the NF service consumer provides the \"altSerReqs\" attribute or the \"altSerReqsData\" attribute, the NF service consumer shall also subscribe to receive notifications from the PCF when the resources associated to the corresponding service information have been allocated as described in clause 4.2.2.10 and when the GBR QoS targets for one or more service data flows can no longer (or can again) be guaranteed, as described in clause 4.2.2.6.\nDue to the received QoS information, the PCF may need to provision or modify the related PCC rules as specified in 3GPP TS 29.513 [7] and provide the related information towards the SMF following the corresponding procedures specified in 3GPP TS 29.512 [8].\nThe PCF shall reply to the NF service consumer as described in clause 4.2.2.2.\nIf the QoSHint feature is supported by the NF service consumer, the NF service consumer may include the \"desMaxLatency\" attribute and/or \"desMaxLoss\" attribute within a media component of the \"medComponents\" attribute to indicate that the related media of the created Individual Application Session Context resource has specific latency and/or loss demands.\nThis procedure is used by the NF service consumer if the \"IMS_SBI\" and the \"ReallocationOfCredit\" features are supported to subscribe to notifications of reallocation of credit for the Service Data Flows within the AF application session context.\nThe NF service consumer shall use the \"EventsSubscReqData\" data type as described in clause 4.2.2.2 and shall include in the HTTP POST request message an event within the \"evSubsc\" attribute with the \"event\" attribute set to the value \"REALLOCATION_OF_CREDIT\".\nAs result of this action, the PCF shall set the appropriate subscription to reallocation of credit notification for the corresponding PCC rule(s) as described in 3GPP TS 29.512 [8].\nThe PCF shall reply to the NF service consumer with an HTTP response message as described in clause 4.2.2.2.\nWhen the feature \"SatelliteBackhaul\"is supported, the subscription to satellite backhaul category changes is used by a NF service consumer to subscribe to receive a notification when the satellite backhaul category changes and when the backhaul category changes between satellite backhaul and non-satellite backhaul. When the feature \"EnSatBackhaulCatChg\" is supported, the subscription is also used to receive a notification when the satellite backhaul category change comprises a dynamic satellite backhaul category.\nThe NF service consumer shall use the \"evSubsc\" attribute as described in clause 4.2.2.2 and shall include in the HTTP POST request message an event within the \"events\" attribute with the \"event\" attribute set to \"SAT_CATEGORY_CHG\".\nThe PCF shall reply to the NF service consumer as described in clause 4.2.2.2. The PCF shall include the \"evsNotif\" attribute with an entry in the \"evNotifs\" array with the \"event\" attribute set to \"SAT_CATEGORY_CHG\" and the \"satBackhaulCategory\" attribute including the satellite backhaul category or the indication of non-satellite backhaul if the PCF has previously requested to the SMF to be updated with this information.\nAs result of this action, the PCF shall set the appropriate subscription to satellite backhaul changes for the PDU session, if not previously subscribed, as described in in 3GPP TS 29.512 [8].\nWhen the feature \"ExtraUEaddrReport\" is supported, the subscription to the report of extra UE addresses is used to report information about the extra IP addresses or address ranges allocated to the PDU session due to framed routes or IPv6 prefix delegation. The report shall include the actual list of IPv4 addresses or list of IPv6 prefixes as currently allocated.\nNOTE:\tIn case of Deterministic Networking, the 5GS DetNet Node, as described in 3GPP TS 23.501 [2], may forward via its device side interface IP packets destined not only to the UE's IP address or prefix but also to a range of IPv4 addresses or IPv6 IP prefixes according to one or more Framed Routes.\nThe NF service consumer shall use the \"evSubsc\" attribute as described in clause 4.2.2.2 and shall include in the HTTP POST request message an event within the \"events\" array with the \"event\" attribute set to \"EXTRA_UE_ADDR\".\nThe PCF shall reply to the NF service consumer with an HTTP response message as described in clause 4.2.2.2.\nIf the PCF received from the SMF the framed routes as described in 3GPP TS 29.512 [8], clause 4.2.2.2, or the PCF receives updated information of the extra one or more IPv6 prefixes allocated to the UE as described in 3GPP TS 29.512 [8], clauses 4.2.4.2 and C.3.4.1, the PCF shall include in the response the \"evsNotif\" attribute with an entry in the \"evNotifs\" array with the \"event\" attribute set to \"EXTRA_UE_ADDR\" and:\n-\tthe actual list of IPv4 addresses within the \"ipv4AddrList\" attribute, if one or more IPv4 framed routes are associated to the PDU session and are available in the PCF; or\n-\tthe actual list of IPv6 prefixes allocated to the UE within the \"ipv6PrefixList\" attribute, if one or more IPv6 framed routes are associated to the PDU session and are available in the PCF, or if the PCF keeps updated IPv6 prefix(es) information.\nAs result of this action, the PCF shall set the appropriate subscription to the report of UE IP addresses, if not previously subscribed, as described in in 3GPP TS 29.512 [8].\nThis procedure is used by a NF service consumer to:\n-\tprovide service requirements for each media flow that comprise the multi-modal service; and/or\n-\tprovide QoS monitoring requirements for each media flow that comprise the multi-modal service;\nwhen \"MultiMedia\" feature is supported.\nThe NF service consumer may include the multi-modal Service Identifier within the \"multiModalId\" attribute to indicate that the new AF session relates to a multi-modal service.\nTo provide service requirements for a multi-modal service, the NF service consumer shall follow the procedures described in clause 4.2.2.2 for initial provisioning of service information, with the following additional considerations:\n-\tWhen the multi-modal service combines several media, the NF service consumer shall provide the service information of each media within the \"medComponents\" attribute. The media subcomponent(s), when provided for a media component, only contain the description of the service data flow(s).\nTo provide QoS monitoring requirements for each media component, the NF service consumer shall follow the procedures described in clause 4.2.2.23 for subscriptions to QoS Monitoring Information.\nEditor's Note:\tIt is FFS whether different QoS monitoring requirements per different media might be requested and the data types to use in that case.\nWhen the \"RTLatency\" feature is supported, this procedure is used by a NF service consumer to request Round-Trip (RT) latency requirement for an XR or other interactive media services with an RT latency indication via the AF session with required QoS procedure.The AF may provide the \"rTLatencyInd\" attribute contained in MediaComponent data type to indicate that the service data flow needs to meet the RT latency requirement of the service, which is the twice of the single direction delay requirement between the UE and the PSA UPF derived from the \"qosReference\" attribute or included in the \"tscPackDelay\" attribute.\nDue to the received Round-Trip latency requirements, the PCF may need to provision or modify the related PCC rules as specified in 3GPP TS 29.513 [7] and provide the related information towards the SMF following the corresponding procedures specified in clause 4.2.6.21.2 of 3GPP TS 29.512 [8].\nIf the \"PDUSetHandling\" feature is supported, to indicate the PDU Set QoS related information for the PDU Set, the NF service consumer may include in the \"pduSetQos\" attribute included in a media component entry of the \"medComponents\" attribute;\n-\tthe upper bound for the delay that a PDU Set may experience for the transfer between the UE and the N6 termination point at the UPF encoded in the \"pduSetDelayBudget\" attribute as described in 3GPP TS 29.571 [12];\n-\tupper bound for the non-congestion related PDU Set loss rate encoded in the \"pduSetErrRate\" attribute as described in 3GPP TS 29.571 [12].\n-\tPDU Set Integrated Handling information (PSIHI) indicates whether all PDUs of the PDU Set are needed for the usage of the PDU Set by the application layer in the receiver side in the \"pduSetHandlingInfo\" attribute as described in 3GPP TS 29.571 [12].\nThe PCF shall reply to the NF service consumer as described in clause 4.2.2.2.\nAs result of this action, the PCF shall set the appropriate PDU Set QoS parameters for the corresponding PCC rule(s) as described in 3GPP TS 29.512 [8].\n4.2.2.40\tSubscription to BAT offset notification\nWhen the \"EnTSCAC\" feature is supported, the subscription to BAT offset is used by a NF service consumer to subscribe to receive a notification when NF service consumer provides the Capability for BAT adaptation or BAT Window as defined in clause 4.2.2.24. When the NF service consumer provides the periodicity range, the BAT offset subscription is also used to receive the adjusted periodicity.\nThe NF service consumer shall use the \"EventsSubscReqData\" data type as described in clause 4.2.2.2 and shall include in the HTTP POST request message an event within the \"evSubsc\" attribute with the \"event\" attribute set to the value \"BAT_OFFSET_INFO\".\nAs result of this action, the PCF shall set the appropriate subscription to BAT offset notification for the corresponding PCC rule(s) as described in 3GPP TS 29.512 [8].\nThe subscription to Packet Delay Variation is used by an NF service consumer to receive a notification about the variation of packet delay between UE and PSA UPF when the \"EnQoSMon\" feature is supported.\nThe NF service consumer shall use the \"EventsSubscReqData\" data type as described in clause 4.2.2.2 and may include:\n-\tthe requested Packet Delay Variation parameter(s) to be measured (i.e. DL, UL and/or round trip packet delay) within the \"pdvReqMonParams\" attribute;\n-\tan entry of the \"AfEventSubscription\" data type per requested notification method in the \"events\" attribute with:\na)\tthe \"event\" attribute set to the value \"PACK_DEL_VAR\"; and\nb)\tthe \"notifMethod\" attribute set to the value \"EVENT_DETECTION\" or \"PERIODIC\"; and\nc)\twhen the \"notifMethod\" attribute is set to the value \"PERIODIC\", the periodic time for reporting and the maximum period with no Packet Delay Variation measurement within the \"repPeriod\" attribute; and\nd)\twhen the \"notifMethod\" attribute is set to the value \"EVENT_DETECTION\", the minimum waiting time between subsequent reports within the \"waitTime\" attribute and the maximum period with no Packet Delay Variation measurement within the \"repPeriod\" attribute;\n-\twhen the \"notifMethod\" attribute set to the value \"EVENT_DETECTION\", the \"pdvMon\" attribute, with the required Packet Delay Variation monitoring information:\na)\tthe delay threshold for downlink with the \"repThreshDl\" attribute;\nb)\tthe delay threshold for uplink with the \"repThreshUl\" attribute; and/or\nc)\tthe delay threshold for round trip with the \"repThreshRp\" attribute.\nThe NF service consumer shall include more than one \"AfEventSubscription\" data types within the \"EventsSubscReqData\" data type if more than one notification methods are required.\nIf the AF also subscribed to packet delay measurements and provided \"directNotifInd\" attribute in the request as described in clause 4.2.2.23, and the PCF determines that to calculate the Packet Delay Variations the packet delay measurements cannot be notified directly, the PCF shall set to DIRECT_NOTIF_NOT_POSSIBLE the \"servAuthInfo\" attribute in the HTTP response message. The PCF shall not provide the notification addresses and direct notification indication in the PCC rule. The PCF shall subscribe to receive the QoS Monitoring reports from SMF by setting the QoS Monitoring Policy Control Request Trigger.\nThe PCF shall reply to the AF as described in clause 4.2.2.2.\nAs result of this action, the PCF shall determine the QoS Monitoring information to derive packet delay variation measurements requested by the AF and shall set the appropriate subscription for QoS Monitoring with the SMF to receive packet delay monitoring reports for the corresponding PCC rule(s) as described in 3GPP TS 29.512 [8].\nIf the \"XRM_5G\" feature is supported, the AF may provide the Uplink and/or Downlink Periodicity information which indicates the time period between the start of the two data bursts in Uplink and/or Downlink direction within \"periodInfo\" attribute contained in MediaComponent data structure.\nAs a result of this action, the PCF shall send the Periodicity information to the SMF as described in 3GPP TS 29.512 [8].\nWhen the \"L4S\" feature is supported, this procedure is used by a NF service consumer to explicitly indicate that the UL and/or DL service data flow of a media component supports ECN marking for L4S support.\nThe NF service consumer may include in the HTTP POST request message described in clause 4.2.2.2, within the corresponding media component(s) entries of the \"medComponents\" attribute, the \"l4sInd\" attribute set to \"UL\", \"DL\" or \"UL_DL\" to indicate respectively whether the UL, the DL, or both, UL and DL, service data flow(s) supports ECN marking for L4S support.\nThe NF service consumer shall also subscribe to receive notifications from the PCF when the ECN marking for L4S support is not available or available again in 5GS by including within the \"evSubsc\" attribute the \"events\" attribute with the \"event\" attribute set to \"L4S_SUPP\".\nThe PCF may indicate to the SMF to enable for ECN marking for L4S support following the procedures specified in clause 4.2.6.2.21 of 3GPP TS 29.512 [8].\nWhen the \"EnQoSMon\" feature is supported, this procedure is used by an NF service consumer to receive a notification about the Round-Trip delay measurements over two QoS flows.\nThe NF service consumer shall use the \"EventsSubscReqData\" data type as described in clause 4.2.2.2 and shall include:\n-\tan entry of the \"AfEventSubscription\" data type per requested notification method in the \"events\" attribute with:\na)\tthe \"event\" attribute set to the value \"RT_DELAY_TWO_QOS_FLOWS\"; and\nb)\tthe \"notifMethod\" attribute set to the value \"EVENT_DETECTION\", or \"PERIODIC\"; and\nc)\twhen the \"notifMethod\" attribute is set to the value \"PERIODIC\", the periodic time for reporting and the maximum period with no Round-Trip delay measurement within the \"repPeriod\" attribute; and\nd)\twhen the \"notifMethod\" attribute is set to the value \"EVENT_DETECTION\", the minimum waiting time between subsequent reports within the \"waitTime\" attribute and the maximum period with no Round-Trip delay within the \"repPeriod\" attribute;\n-\twhen the \"notifMethod\" attribute set to the value \"EVENT_DETECTION\", the \"qosMon\" attribute, with the delay threshold for round trip with the \"repThreshRp\" attribute.\nEditor’s note:\tIt is FFS whether to reuse \"qosMon\" attribute or create a new \"rttMon\" attribute.\nIf the UL and DL flows request the same QoS, the NF service consumer shall use the \"MediaComponent\" data type as described in clause 4.2.2.2 for the two QoS flows which Round-Trip delay will be measured and shall include:\n-\tan entry of the \"MediaSubComponent\" data type with the \"fDescs\" attribute contains the flow description for the monitored Uplink and/or Downlink IP flows.\nIf the UL and DL flows request the different QoS, the NF service consumer shall use two \"MediaComponent\" data type as described in clause 4.2.2.2 for the uplink and downlink QoS flows which Round-Trip delay will be measured and shall include:\n-\tfor the uplink flow, an entry of the \"MediaSubComponent\" data type with the \"fDescs\" attribute cantains the monitored flow description for the Uplink IP flow;\n-\tfor the downlink flow, an entry of the \"MediaSubComponent\" data type with the \"fDescs\" attribute cantains the monitored flow description for the Downlink IP flow.\nEditor’s note:\tIt is FFS how to enable flow level event subscription per UL and DL QoS flow.\nThe NF service consumer shall include more than one \"AfEventSubscription\" data type within the \"EventsSubscReqData\" data type if more than one notification method is required.\nThe PCF shall reply to the AF as described in clause 4.2.2.2.\nAs result of this action, the PCF shall determine the QoS Monitoring information to derive round-trip delay measurements requested by the AF and shall set the appropriate subscription for QoS Monitoring information for the corresponding PCC rule(s) as described in 3GPP TS 29.512 [8].\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "4.2.3\tNpcf_PolicyAuthorization_Update service operation",
                            "text_content": "The Npcf_PolicyAuthorization_Update service operation provides updated application level information from the NF service consumer and optionally communicates with the Npcf_SMPolicyControl service to determine and install the policy according to the information provided by the NF service consumer.\nThe Npcf_PolicyAuthorization_Update service operation updates an application session context in the PCF.\nThe following procedures using the Npcf_PolicyAuthorization_Update service operation are supported:\n-\tModification of service information.\n-\tGate control.\n-\tBackground Data Transfer policy indication at policy authorization update.\n-\tModification of sponsored connectivity information.\n-\tModification of Subscription to Service Data Flow QoS notification control.\n-\tModification of Subscription to Service Data Flow Deactivation.\n-\tUpdate of traffic routing information.\n-\tModification of subscription to resources allocation outcome.\n-\tModification of Multimedia Priority Services.\n-\tSupport of content versioning.\n-\tRequest of access network information.\n-\tModification of service information status.\n-\tSupport of SIP forking.\n-\tProvisioning of signalling flow information.\n-\tSupport of resource sharing.\n-\tModification of MCPTT.\n-\tModification of MCVideo.\n-\tPriority sharing indication.\n-\tModification of subscription to out of credit notification.\n-\tModification of Subscription to Service Data Flow QoS Monitoring Information.\n-\tUpdate of TSCAI Input Information and TSC QoS related data.\n-\tProvisioning of TSC user plane node management information and port management information.\n-\tSupport of CHEM feature.\n-\tSupport of FLUS feature.\n-\tSubscription to EPS Fallback report.\n-\tModification of required QoS information.\n-\tSupport of QoSHint feature.\n-\tModification of subscription to reallocation of credit notification.\n-\tModification of subscription to satellite backhaul category changes.\n-\tModification of the subscription to the report of extra UE addresses.\n-\tModification of multi-modal services\n-\tModification of Round-Trip latency requirements.\n-\tUpdate of PDU Set QoS related data.\n-\tModification of subscription to BAT offset notification.\n-\tModification of subscription to Packet Delay Variation monitoring.\n-\tProvisioning of the indication of ECN marking for L4S support.\n-\tModification of Round-Trip delay monitoring requirements over two QoS flows.\n-\tProvisioning of the QoS timing information.\n-\tModification of Periodicity information.\nThis procedure is used to modify an existing application session context as defined in 3GPP TS 23.501 [2], 3GPP TS 23.502 [3] and 3GPP TS 23.503 [4] when the feature \"PatchCorrection\" is supported.\nFigure 4.2.3.2-1 illustrates the modification of service information using HTTP PATCH method.\n\nThe figure depicts a modification of service information using HTTP PATCH, illustrating the process of updating the status of a service. The figure shows a network interface card (NIC) with a service information table, which is modified using HTTP PATCH. The modification is depicted as a series of HTTP requests and responses, illustrating the process of updating the status of a service.\nFigure 4.2.3.2-1: Modification of service information using HTTP PATCH\nThe NF service consumer may modify the application session context information at any time (e.g. due to an AF session modification or internal NF service consumer trigger) and invoke the Npcf_PolicyAuthorization_Update service operation by sending the HTTP PATCH request message to the resource URI representing the \"Individual Application Session Context\" resource, as shown in figure 4.2.3.2-1, step 1, with the modifications to apply.\nThe JSON body within the PATCH request shall include the \"AppSessionContextUpdateDataPatch\" data type and shall be encoded according to \"JSON Merge Patch\", as defined in IETF RFC 7396 [21]. The modifications to apply are encoded within the attributes of the \"ascReqData\" attribute, as described below and in subsequent clauses.\nThe NF service consumer may include the updated service information in the \"medComponents\" attribute of the \"ascReqData\" attribute. The NF service consumer may update the service data flow filter(s) (IP or Ethernet) that identify the traffic of the media component by replacing, within the concerned media subcomponent(s), the previously provided value(s) with the updated one(s).\nIf the \"AuthorizationWithRequiredQoS\" feature as defined in clause 5.8 is supported, the NF service consumer may provide within the MediaComponentRm data structure an update of the required QoS information as specified in clause 4.2.3.30.\nThe NF service consumer may include in the \"ascReqData\" attribute an AF application identifier in the \"afAppId\" attribute to trigger the PCF to indicate to the SMF/UPF to perform the application detection based on the operator's policy as defined in 3GPP TS 29.512 [8].\nIf the \"TimeSensitiveNetworking\" or \"TimeSensitiveCommunication\" feature is supported, the NF service consumer may provide TSC user plane node related information as specified in clauses 4.2.3.24 and 4.2.3.25.\nIf the \"PDUSetHandling\" feature is supported, the NF service consumer may update PDU set related QoS information as specified in clauses 4.2.3.36.\nThe NF service consumer may also create, modify or remove events subscription information by sending the HTTP PATCH request message to the resource URI representing the \"Individual Application Session Context\" resource.\nThe NF service consumer shall create event subscription information by including in the \"ascReqData\" attribute the \"evSubsc\" attribute of \"EventsSubscReqDataRm\" data type with the corresponding list of events to subscribe to; and the \"notifUri\" attribute with the notification URI where the PCF shall send the notifications.\nThe NF service consumer shall update existing event subscription information by including in the \"ascReqData\" attribute an updated value of the \"evSubsc\" attribute of the \"EventsSubscReqDataRm\" data type as follows:\n-\tThe \"events\" attribute shall include the new complete list of subscribed events.\n-\tWhen the NF service consumer requests to update the additional information related to an event (e.g. the NF service consumer needs to provide new thresholds to the PCF in the \"usgThres\" attribute related to the \"USAGE_REPORT\" event) the NF service consumer shall include the additional information, which shall completely replace the previously provided one.\nNOTE 1:\tNote that when the NF service consumer requests to remove an event, this event is not included in the \"events\" attribute.\nNOTE 2:\tWhen an event is included in the \"events\" attribute and its related additional information is set to null, the PCF considers the subscription to this event is active, but the related procedures stop applying.\nNOTE 3:\tWhen an event is removed from the \"events\" attribute but its related information is not set to null, the PCF considers the subscription to this event is terminated, the related additional information is removed, and the related procedures stop applying.\nThe NF service consumer shall remove existing event subscription information by setting to null the \"evSubsc\" attribute included in the \"ascReqData\" attribute.\nIf the \"EnQosMon\" feature is supported, the NF service consumer may include attribute \"evSubsc\" in \"MediaSubComponentRm\" data type for QoS monitoring for each media component. Either the attribute \"evSubsc\" in \"MediaSubComponentRm\" data type or attribute \"evSubsc\" in \"AppSessionContextReqDataRm\" data type may be provided to subscribe to notifications for a specific event. An event subscription modification shall not create simultaneous subscriptions, for the provided event, within the media subcomponent and within the application session context.\nThe NF service consumer shall update the existing event subscription information of each media component by updating the value of the \"evSubsc\" attribute in \"MediaSubComponentRm\" data type.\nThe NF service consumer shall remove the existing event subscription information of each media component by setting to null the \"evSubsc\" attribute in \"MediaSubComponentRm\" data type.\nEvents with \"notifMethod\" set to \"ONE_TIME\" shall only apply at the time the NF service consumer requests their subscription. Once the event report is performed, the subscription to this event is automatically terminated in the PCF and the related information is removed. The presence of a one-time event, together with its related additional information when applicable, during an update procedure shall represent the recreation of the subscription to this event in the PCF.\nNOTE 4:\tThe \"notifUri\" attribute within the EventsSubscReqData data structure can be modified to request that subsequent notifications are sent to a new NF service consumer.\nIf the PCF cannot successfully fulfil the received HTTP PATCH request due to the internal PCF error or due to the error in the HTTP PATCH request, the PCF shall send the HTTP error response as specified in clause 5.7.\nIf the feature \"ES3XX\" is supported, and the PCF determines the received HTTP PATCH request needs to be redirected, the PCF shall send an HTTP redirect response as specified in clause 6.10.9 of 3GPP TS 29.500 [5].\nOtherwise, the PCF shall process the received service information according the operator policy and may decide whether the HTTP request message is accepted or not.\nIf the updated service information is not acceptable (e.g. the subscribed guaranteed bandwidth for a particular user is exceeded or the authorized data rate in that slice for the UE is exceeded), the PCF shall include in an HTTP \"403 Forbidden\" response message the \"cause\" attribute set to \"REQUESTED_SERVICE_NOT_AUTHORIZED\".\nIf the PCF detects that a temporary network failure has occurred (e.g. the SGW has failed as defined in clause B.3.3.3 or B.3.4.9 of 3GPP TS 29.512 [8]) and the AF initiates an Npcf_PolicyAuthorization_Update service operation, the PCF shall reject the request with an HTTP \"403 Forbidden\" response including the \"cause\" attribute set to \"TEMPORARY_NETWORK_FAILURE\".\nIf the service information provided in the HTTP PATCH request is rejected due to a temporary condition in the network (e.g. the NWDAF reported the network slice selected for the PDU session is congested), the PCF may include in the \"403 Forbidden\" response the \"cause\" attribute set to \"REQUESTED_SERVICE_TEMPORARILY_NOT_AUTHORIZED\". The PCF may also provide a retry interval within the \"Retry-After\" HTTP header field. When the NF service consumer receives the retry interval within the \"Retry-After\" HTTP header field, the NF service consumer shall not send the same service information to the PCF again (for the same application session context) until the retry interval has elapsed. The \"Retry-After\" HTTP header is described in 3GPP TS 29.500 [5] clause 5.2.2.2.\nIf the service information is invalid or in sufficient for the PCF to perform the requested action, e.g. invalid media type or invalid QoS reference, the PCF shall indicate an HTTP \"Bad Request\" response including the \"cause\" attribute set to \"INVALID_SERVICE_INFORMATION\".\nIf the IP flow descriptions cannot be handled by the PCF because the restrictions defined in clause 5.3.8 of 3GPP TS 29.214 [20] are not observed, the PCF shall indicate an HTTP \"Bad Request\" response including the \"cause\" attribute set to \"FILTER_RESTRICTIONS\".\nIf the AF provided the same AF charging identifier for a new Individual Application Session Context that is already in use for the other ongoing Individual Application Session, the PCF shall indicate an HTTP \"Bad Request\" response including the \"cause\" attribute set to \"DUPLICATED_AF_SESSION\".\nNOTE 5:\t\tWhen the PCF supports data rate control per network slice and/or data rate control per network slice for a UE as specified in 3GPP TS 29.512 [8] and the authorized data rate in a slice is exceeded due to the bandwidth demands of the modified service information, it is also possible to accept the request based on operator policies. In this case the derived PCC rule(s) belonging to the authorized GBR service data flows can include a different MBR and/or have a different charging than the one applicable if the data rate is not exceeded as specified in 3GPP TS 29.512 [8].\nThe PCF may additionally provide the acceptable bandwidth within the attribute \"acceptableServInfo\" included in the \"ExtendedProblemDetails\" data structure returned in the rejection response message.\nIf the request is accepted, the PCF shall update the service information with the new information received. Due to the updated service information, the PCF may need to create, modify or delete the related PCC rules as specified in 3GPP TS 29.513 [7] and provide the updated information towards the SMF following the corresponding procedures specified in 3GPP TS 29.512 [8].\nBased on the received subscription information from the NF service consumer, the PCF may create a subscription to event notifications or may modify the existing subscription to event notifications, for a related PDU session from the SMF, as described in 3GPP TS 29.512 [8].\nThe PCF shall reply with the HTTP response message to the NF service consumer and may include the \"AppSessionContext\" data type content with the representation of the modified \"Individual Application Session Context\" resource and may include the \"Events Subscription\" sub-resource.\nThe PCF shall include in the \"evsNotif\" attribute:\n-\tif the NF service consumer subscribed to the \"PLMN_CHG\" event in the HTTP PATCH request, the \"event\" attribute set to \"PLMN_CHG\" and the \"plmnId\" attribute including the PLMN Identifier or the SNPN Identifier if the PCF has previously requested to be updated with this information in the SMF;\nNOTE 6:\tThe SNPN Identifier consists of the PLMN Identifier and the NID.\nNOTE 7:\tHandover between non-equivalent SNPNs, and between SNPN and PLMN is not supported. When the UE is operating in SNPN access mode, the trigger reports changes of equivalent SNPNs.\n-\tif the NF service consumer subscribed to the event \"ACCESS_TYPE_CHANGE\" event in the HTTP PATCH request, the \"event\" attribute set to \"ACCESS_TYPE_CHANGE\" and:\ni.\tthe \"accessType\" attribute including the access type, and the \"ratType\" attribute including the RAT type when applicable for the notified access type; and\nii.\tif the \"ATSSS\" feature is supported, the \"addAccessInfo\" attribute with the additional access type information if available, where the access type is encoded in the \"accessType\" attribute, and the RAT type is encoded in the \"ratType\" attribute when applicable for the notified access type; and\nNOTE 8:\tFor a MA PDU session, if the \"ATSSS\" feature is not supported by the NF service consumer, the PCF includes the \"accessType\" attribute and the \"ratType\" attribute with a currently active combination of access type and RAT type (if applicable for the notifed access type). When both 3GPP and non-3GPP accesses are available, the PCF includes the information corresponding to the 3GPP access.\niii.\t\tthe \"anGwAddr\" attribute including access network gateway address when available,\nif the PCF has previously requested to be updated with this information in the SMF; and\n-\tif the \"IMS_SBI\" feature is supported and if the NF service consumer subscribed to the \"CHARGING_CORRELATION\" event in the HTTP PATCH request, the \"event\" attribute set to \"CHARGING_CORRELATION\" and may include the \"anChargIds\" attribute containing the access network charging identifier(s) and the \"anChargAddr\" attribute containing the access network charging address.\nThe NF service consumer subscription to other specific events using the Npcf_PolicyAuthorization_Update request is described in the related clauses. Notification of events when the applicable information is not available in the PCF when receiving the Npcf_PolicyAuthorization_Update request is described in clause 4.2.5.\nThe HTTP response message towards the NF service consumer should take place before or in parallel with any required PCC rule provisioning towards the SMF.\nIf the PCF does not have an existing application session context for the application session context being modified (such as after a PCF failure), the PCF shall reject the HTTP request message with the HTTP response message with the applicable rejection cause.\nThis procedure is used by a NF service consumer to modify in the PCF the service data flow(s) that are to be enabled or disabled to pass through the PDU session.\nThe NF service consumer shall use the HTTP PATCH method to modify the gate control information.\nThe NF service consumer shall include in the HTTP PATCH request message described in clause 4.2.3.2, in the \"ascReqData\" attribute, in the media component(s) included in the \"medComponents\" attribute at media and/or media subcomponent level, the \"fStatus\" attribute for the flows to be enabled or disabled with the appropriate value.\nIf a \"medSubComps\" attribute contains a \"flowUsage\" attribute with the value \"RTCP\", then the IP Flows described by that media subcomponent shall be enabled in both directions irrespective of the value of the \"fStatus\" attribute of the corresponding media component.\nAs result of this action, the PCF shall set the appropriate gate status for the corresponding active PCC rule(s).\nThe PCF shall reply to the NF service consumer as described in clause 4.2.3.2.\nThis procedure is used by a NF service consumer to indicate at policy authorization update a transfer policy negotiated for background data transfer using the Npcf_BDTPolicyControl service as described in 3GPP TS 29.554 [14].\nThe NF service consumer may include in the HTTP PATCH request message described in clause 4.2.3.2, in the \"ascReqData\" attribute, a new reference id in the \"bdtRefId\" attribute.\nNOTE 1:\tThe PCF will retrieve the corresponding transfer policy from the UDR based on the reference identifier within the \"bdtRefId\" attribute. In case only one PCF is deployed in the network, transfer policies can be locally stored in the PCF and the interaction with the UDR is not required.\nIf the PCF cannot retrieve the transfer policy, the PCF shall set to TP_NOT_KNOWN the \"servAuthInfo\" attribute in the HTTP response message to the NF service consumer to indicate that the transfer policy is unknown.\nIf the time window of the received transfer policy has expired, the PCF shall set to TP_EXPIRED the \"servAuthInfo\" attribute in the HTTP response message to indicate to the NF service consumer that the transfer policy has expired. Otherwise, if the time window of the received transfer policy has not yet occurred, the PCF shall set to TP_NOT_YET_OCCURRED the \"servAuthInfo\" attribute in the HTTP response message to the NF service consumer to indicate that the time window of the transfer policy has not yet occurred.\nNOTE 2:\tIn the case that the PCF cannot retrieve the transfer policy, the transfer policy time window has not yet occurred or the transfer policy expired, the PCF makes the decision without considering the transfer policy.\nThe PCF shall reply to the NF service consumer as described in clause 4.2.3.2.\nThis procedure is used by a NF service consumer to modify sponsored data connectivity when \"SponsoredConnectivity\" feature is supported.\nThe NF service consumer shall use the HTTP PATCH method to modify the sponsored connectivity information.\nThe NF service consumer shall include in the HTTP PATCH request message described in clause 4.2.3.2, in the \"ascReqData\" attribute, an application service provider identity and a sponsor identity within the \"aspId\" attribute and \"sponId\" attribute, and optionally an indication of whether to enable or disable sponsored data connectivity within the \"sponStatus\" attribute set to the applicable value to provide sponsored connectivity information or to update existing sponsored connectivity information.\nIf the NF service consumer requests to enable sponsored data connectivity the NF service consumer shall change the \"sponStatus\" attribute value to \"SPONSOR_ENABLED\".\nIf the NF service consumer requests to disable sponsored data connectivity the NF service consumer shall provide an indication to disable sponsored data connectivity to the PCF by setting the \"sponStatus\" attribute to \"SPONSOR_DISABLED\".\nTo support the usage monitoring of sponsored data connectivity, the NF service consumer may also include in the HTTP PATCH a new or modified \"evSubsc\" attribute of \"EventsSubscReqDataRm\" data type with:\n-\tthe usage thresholds to apply in the \"usgThres\" attribute; and\n-\tthe subscription to usage monitoring for sponsored data connectivity in an entry of the \"events\" attribute of the \"AfEventSubscription\" data type with the \"event\" attribute set to \"USAGE_REPORT\".\nNOTE 1:\tIf the NF service consumer is in the user plane, the NF service consumer can handle the usage monitoring and therefore it is not required to provide a usage threshold to the PCF as part of the sponsored data connectivity information.\nWhen the NF service consumer indicated to enable sponsored data connectivity, and the UE is roaming with the visited access case, the following procedures apply:\n-\tIf the NF service consumer is located in the HPLMN, for home routed roaming case and when operator policies do not allow accessing the sponsored data connectivity with this roaming case, the H-PCF shall reject the service request and shall include in the HTTP \"403 Forbidden\" response message the \"cause\" attribute set to \"UNAUTHORIZED_SPONSORED_DATA_CONNECTIVITY\".\n-\tIf the NF service consumer is located in the VPLMN, the V-PCF shall reject the service request and shall include in the HTTP \"403 Forbidden\" response message the \"cause\" attribute set to \"UNAUTHORIZED_SPONSORED_DATA_CONNECTIVITY\".\nWhen the NF service consumer indicated to enable sponsored data connectivity, and the UE is in the non-roaming case or roaming with the home routed case and the operator policies allow accessing the sponsored data connectivity with this roaming case, the following procedures apply:\n-\tIf the SMF does not support sponsored connectivity and the required reporting level for that service indicates a sponsored connectivity level according to 3GPP TS 29.512 [8], then the PCF shall reject the request and shall include in the HTTP \"403 Forbidden\" response message the \"cause\" attribute set to \"REQUESTED_SERVICE_NOT_AUTHORIZED\".\n-\tIf the SMF supports sponsored data connectivity feature or the required reporting level is different from sponsored connectivity level as described in 3GPP TS 29.512 [8], then the PCF, based on operator policies, shall check whether it is required to validate the sponsored connectivity data. If it is required, it shall perform the authorizations based on sponsored data connectivity profiles. If the authorization fails, the PCF shall include in the HTTP \"403 Forbidden\" response message the \"cause\" attribute set to \"UNAUTHORIZED_SPONSORED_DATA_CONNECTIVITY\".\nNOTE 2:\tThe PCF is not required to verify that a trust relationship exists between the operator and the sponsors.\nThe PCF shall reply to the NF service consumer as described in clause 4.2.3.2.\nThis procedure is used in the NF service consumer to modify in the PCF the subscription to notification about whether the GBR QoS targets can no longer (or can again) be guaranteed.\nThe NF service consumer shall use the HTTP PATCH method to update the \"Events Subscription\" sub-resource together with the modifications to the \"Individual Application Session Context\" resource.\nThe NF service consumer shall include in the HTTP PATCH request message described in clause 4.2.3.2, in the \"ascReqData\" attribute, the updated values of the \"EventsSubscReqDataRm\" data type, which either shall include in the \"events\" attribute a new element with the \"event\" attribute set to \"QOS_NOTIF\" to indicate the subscription to QoS notification control, or shall not include in the \"events\" attribute an existing element with the \"event\" attribute set to \"QOS_NOTIF\" to indicate the termination of the subscription to QoS notification control.\nAs result of this action, the PCF shall set the appropriate subscription to QoS notification control for the corresponding active PCC rule(s) as described in 3GPP TS 29.512 [8].\nThe PCF shall reply to the NF service consumer as described in clause 4.2.3.2.\nThis procedure is used by a NF service consumer to modify in the PCF the subscription to the notification of deactivation of one or more Service Data Flows within the AF application session context.\nThe NF service consumer shall use the HTTP PATCH method to update the \"Events Subscription\" sub-resource together with the modifications to the \"Individual Application Session Context\" resource.\nThe NF service consumer shall include in the HTTP PATCH request message described in clause 4.2.3.2, in the \"ascReqData\" attribute, the updated values of the \"EventsSubscReqDataRm\" data type, which either shall include in the \"events\" attribute a new element with the \"event\" attribute set to \"FAILED_RESOURCES_ALLOCATION\" to indicate the subscription to service data flow deactivation, or shall not include in the \"events\" attribute an existing element with the \"event\" attribute set to \"FAILED_RESOURCES_ALLOCATION\".\nThe PCF shall reply to the NF service consumer as described in clause 4.2.3.2.\nAs result of this action, the PCF shall set the appropriate subscription to service data flow deactivation for the corresponding PCC rule(s) as described in in 3GPP TS 29.512 [8].\nThis procedure is used by NF service consumer to modify in the PCF the traffic routing information to a local access to a DNN, and/or to modify the subscription to notifications about UP path management when \"InfluenceOnTrafficRouting\" feature is supported.\nWhen the \"SFC\" feature is supported, this procedure is used by NF service consumer to modify in the PCF the service function chaining information.\nWhen the \"SimultConnectivity\" feature is supported, this procedure may be used to modify (create, delete, update) the indication of simultaneous connectivity temporarily maintained for the source and target PSA and/or the indication of the minimum time interval to be considered for inactivity for the traffic routed via the source PSA.\nWhen the \"URLLC\" feature is supported, this procedure may be used to modify (create, delete, update) the indication of UE IP address preservation.\nWhen the \"EASIPreplacement\" feature is supported, this procedure may be used to modify (initially provide, delete, update) the EAS IP replacement information to the PCF.\nThe NF service consumer shall use the HTTP PATCH method.\nTo modify traffic routing information, the NF service consumer shall include in the HTTP PATCH request message described in clause 4.2.3.2, in the \"ascReqData\" attribute, an updated \"afRoutReq\" attribute(s) with the modified traffic routing information. To modify the indication of simultaneous connectivity and/or the termination of the simultaneous connectivity, the NF service consumer shall include an updated \"simConnInd\" attribute and/or an updated \"simConnTem\" attribute, if applicable. To modify the indication of UE IP address preservation, the NF service consumer shall include the updated indication of UE IP address preservation in the \"addrPreserInd\" attribute, if applicable. To modify the EAS IP replacement information, the NF service consumer shall include the updated/new \"easIpReplaceInfos\" attribute, if applicable. To modify the maximum allowed user plane latency, the NF service consumer shall include the updated/new \"maxAllowedUpLat\" attribute, if applicable. To modify the traffic correlation information, the NF service consumer shall include an updated/new \"tfcCorreInfo\" attribute. To send a new indication of EAS rediscovery, the NF service consumer shall include the indication in the \"easRedisInd\" attribute, if applicable.\nTo modify service function chaining information, the NF service consumer shall include in the HTTP PATCH request message described in clause 4.2.3.2, in the \"ascReqData\" attribute, an updated \"afSfcReq\" attribute(s) with the modified service function chaining information.\nTo modify the subscription to notifications about UP path management events (create, delete or modify), the NF service consumer shall include in the HTTP PATCH request message described in clause 4.2.3.2, in the \"ascReqData\" attribute, the updated values of the \"upPathChgSub\" attribute with the modified subscription to UP path management events.\nWhen the feature \"RoutingReqOutcome\" is supported:\n-\tand the NF service consumer is creating or modifying AF routing information, the PCF may set the \"servAuthInfo\" attribute in the HTTP response message to \"ROUT_REQ_NOT_AUTHORIZED\" when the PCF determines, e.g. based on subscription, the AF influence on traffic routing is not allowed for the PDU session;\n-\twhen the NF service consumer requests the update of the steering of traffic to a DNAI and/or the subscription to notifications about UP path management events, the NF service consumer may subscribe to notifications of failures in the enforcement of UP path changes including within the \"evSubsc\" attribute the \"event\" attribute value \"UP_PATH_CHG_FAILURE\" in an entry of the \"events\" array, or may remove the subscription to notification of failures in the enforcement of UP path changes by not including the the \"event\" attribute value \"UP_PATH_CHG_FAILURE\" in an entry of the \"events\" array of the \"evSubsc\" attribute.\nNOTE:\tIn the case that the PCF determines that the requested AF routing requirements cannot be applied and returns the \"servAuthInfo\" attribute in the HTTP response, the PCF makes the decision without considering the requested AF routing requirements.\nThe PCF shall reply to the NF service consumer as described in clause 4.2.3.2.\nThe PCF shall store the application routing requirements included in the \"afRoutReq\" attribute and/or in the N6-LAN traffic steering requirements \"afSfcReq\" attribute.\nThe PCF shall check whether the updated application routing requirements and/or N6-LAN traffic steering requirements require PCC rules to be created or modified to include updated traffic steering policies (for both routing requirements and/or N6-LAN traffic steering requirements), or to update the application relocation possibility (only for routing requirements)  as specified in 3GPP TS 29.513 [7]. Provisioning of PCC rules to the SMF shall be carried out as specified at 3GPP TS 29.512 [8].\n\nThis procedure is used in the NF service consumer to modify in the PCF the subscription to notification about resources allocation outcome.\nThe NF service consumer shall use the HTTP PATCH method to update the \"Events Subscription\" sub-resource together with the modifications to the \"Individual Application Session Context\" resource.\nThe NF service consumer shall include in the HTTP PATCH request message described in clause 4.2.3.2, in the \"ascReqData\" attribute, the updated values of the \"EventsSubscReqDataRm\" data type, which either include in the \"events\" attribute a new element with the \"event\" attribute set to \"SUCCESSFUL_RESOURCES_ALLOCATION\",\"FAILED_RESOURCES_ALLOCATION\" and/or \"UE_TEMPORARILY_UNAVAILABLE\" or remove in the \"events\" attribute an existing element with the \"event\" attribute set to \"SUCCESSFUL_RESOURCES_ALLOCATION\", \"FAILED_RESOURCES_ALLOCATION\" and/or \"UE_TEMPORARILY_UNAVAILABLE\".As a result of this action, the PCF shall set the appropriate subscription to notification of resources allocation outcome in the corresponding PCC Rule(s) as described in 3GPP TS 29.512 [8].\n\nThe NF service consumer may include, in the \"ascReqData\" attribute, the \"mpsId\" attribute if it was not previously provided in order to indicate that the modified AF session relates to an MPS session.\nIf the NF service consumer supports the SBI Message Priority mechanism for an MPS session, the NF service consumer shall include the \"3gpp-Sbi-Message-Priority\" custom HTTP header towards the PCF as described in clause 4.2.2.12.1.\nIf the PCF receives the \"mpsId\" attribute, the PCF shall take specific actions on the corresponding PDU session to ensure that the MPS session is prioritized as defined in 3GPP TS 29.512 [8].\nNOTE:\tWhen the PCF supports data rate control per network slice and/or data rate control per network slice for a UE as specified in 3GPP TS 29.512 [8], it is possible that, subject to operator policy and national/regional regulations, prioritised services are exempted from the limitation of data rate per network slice. In that case the PCF will handle the request from the NF service consumer even if the authorized data rate per network slice is exceeded.\nWhen the feature \"MPSforDTS\" is supported, the NF service consumer includes the \"mpsAction\" attribute to invoke or revoke MPS for DTS, as specified in clause 4.2.2.12.2. When invoking MPS for DTS, the NF service consumer shall include the \"mpsAction\" attribute set to \"ENABLE_MPS_FOR_DTS\" or \"AUTHORIZE_AND_ENABLE_MPS_FOR_DTS\". When the \"ENABLE_MPS_FOR_DTS\" value is received in the \"mpsAction\" attribute,  and allowed by local policy, the PCF does not check the authorization of the request. When the \"AUTHORIZE_AND_ENABLE_MPS_FOR_DTS\" value is received in the \"mpsAction\" attribute, and allowed by local policy, the PCF shall check the user's MPS subscription to authorize the request. When the request is to authorize and enable, and the request is not authorized (e.g. not allowed by MPS subscription), the PCF shall indicate in an HTTP \"403 Forbidden\" response message the cause for the rejection including the \"cause\" attribute set to \"REQUESTED_SERVICE_NOT_AUTHORIZED\".\nTo revoke MPS for DTS, the NF service consumer shall include the \"mpsAction\" attribute set to \"DISABLE_MPS_FOR_DTS\". When the \"DISABLE_MPS_FOR_DTS\" value is received in the \"mpsAction\" attribute, and allowed by local policy, the PCF does not check the authorization of the request.\nWhen modifying an Individual Application Session Context resource due to the invocation or revocation of the MPS for DTS service, the NF service consumer may subscribe to the outcome of the QoS updates by setting within the \"evSubsc\" attribute an event within the \"events\" array with:\n-\tthe \"event\" attribute set to the value \"SUCCESSFUL_QOS_UPDATE\" to report that the invocation/revocation requested by the NF service consumer was successful; and/or\n-\tthe \"event\" attribute set to the value \"FAILED_QOS_UPDATE\" to report that the invocation/revocation requested by the NF service consumer has failed.\nThe support of the media component versioning is optional. When the \"MediaComponentVersioning\" feature is supported, the NF service consumer and the PCF shall comply with the procedures specified in this clause.\nUpon each media component modification encoded in the \"medComponents\" attribute included in the \"ascReqData\" attribute, if the content version was previously assigned to a media component, the NF service consumer shall assign a new content version. All the content related to that media component shall be included and the content version shall be unique for the lifetime of the media component.\nNOTE:\tThe NF service consumer will include all the content of the media component in each media component modification in order to ensure that the media component is installed with the proper information regardless of the outcome of the QoS flow procedure related to previous interactions that are not reported to the PCF yet.\nIf the PCF receives the \"contVer\" attribute for a certain media component, the PCF shall follow the procedures described in 3GPP TS 29.512 [8], clause 4.2.6.2.14.\nThis procedure is used by a NF service consumer to request access network information for an existing \"Individual Application Session Context\" resource at service information modification when the \"NetLoc\" feature is supported.\nNOTE 1:\tClause 4.2.6.6 describes the NF service consumer request of access network information without providing service information.\nThe NF service consumer shall create event subscription information by including in the \"AppSessionContextUpdateData\" data type the \"evSubsc\" attribute of \"EventsSubscReqData\" data type with the corresponding list of events to subscribe to.\nThe NF service consumer shall include in the HTTP PATCH request message described in clause 4.2.3.2, in the \"ascReqData\" attribute:\n-\tan entry of the \"AfEventSubscription\" data type in the \"events\" attribute with:\na)\tthe \"event\" attribute set to the value \"ANI_REPORT\"; and\nb)\tthe \"notifMethod\" attribute set to the value \"ONE_TIME\"; and\n-\tthe \"reqAnis\" attribute, with the required access network information, i.e. user location and/or user time zone information).\nWhen the PCF determines that the access network does not support the access network information reporting because the SMF does not support the NetLoc feature, the PCF shall respond to the NF service consumer including in the \"EventsNotification\" data type the \"noNetLocSupp\" attribute set to \"ANR_NOT_SUPPORTED\" value. Otherwise, the PCF shall immediately configure the SMF to provide such access information, as specified in 3GPP TS 29.512 [8].\nThe PCF shall reply to the NF service consumer with an HTTP response message as described in clause 4.2.3.2.\nNOTE 2:\tThe NF service consumer does not invoke the Npcf_PolicyAuthorization_Update service operation to remove subscription to access network information report since the \"Access Network Information Notification\" is the one-time reported event. Once the access network information is reported to the NF service consumer the subscription to the access network information report is automatically terminated in the PCF and the related information is removed.\nWhen the \"IMS_SBI\" feature is supported, the NF service consumer may update the status of the service information. If the NF service consumer provides service information that has been fully negotiated (e.g. based on the SDP answer), the NF service consumer may include in the \"ascReqData\" attribute the \"servInfStatus\" attribute set to \"FINAL\". In this case the PCF shall authorize the session and provision the corresponding PCC rules to the SMF.\nThe NF service consumer may additionally provide preliminary service information not fully negotiated yet (e.g. based on the SDP offer) at an earlier stage. To do so, the NF service consumer shall include the \"servInfStatus\" attribute set to \"PRELIMINARY\". Upon receipt of such preliminary service information, the PCF shall perform an early authorization check of the service information. If the NF service consumer requests the PCF to report the access network information together with preliminary service information, the PCF shall immediately configure the SMF to provide the access network information.\nWhen the \"IMS_SBI\" feature is supported, this procedure is used by a NF service consumer to indicate that an existing \"Individual Application Session Context\" resource comprises service information about several SIP dialogues.\nThe NF service consumer shall use the HTTP PATCH method to modify the service information.\nThe NF service consumer may include in the HTTP PATCH request message described in clause 4.2.3.2, in the \"ascReqData\" attribute, the \"sipForkInd\" attribute and include the updated service information.\nThe PCF shall reply to the NF service consumer as described in clause 4.2.3.2.\nWhen the \"sipForkInd\" attribute gets the value:\n-\t\"SEVERAL_DIALOGUES\", the PCF shall send additional PCC rules or individual data flow filters to already provided PCC rules as described in Annex B.3.1.\n-\t\"SINGLE_DIALOGUE\", the PCF shall update installed PCC rules and Authorized-QoS information as described in Annex B.3.2.\nThis procedure is used by a NF service consumer to provision or de-provision information about the AF signalling IP flows between the UE and the NF service consumer.\nThe NF service consumer shall include in the HTTP PATCH request message described in clause 4.2.3.2, in the \"ascReqData\" attribute:\n-\twhen the procedure is used to provision information about the AF signalling IP flows, a media component within the \"medComponents\" attribute including the attributes described in clause 4.2.2.16 in the case of IMS restoration or clause 4.2.2.12.3 otherwise;\n-\twhen the procedure is used to de-provision information about the AF signalling IP flows, for the media subcomponents containing the AF signalling IP flows, the \"fStatus\" attribute set to the value \"REMOVED\".\nThe PCF shall reply to the NF service consumer as described in clause 4.2.3.2.\nWhen the \"ResourceSharing\" is supported by the NF service consumer and the PCF, the NF service consumer may include, in the \"ascReqData\" attribute, the \"sharingKeyUl\" attribute and/or \"sharingKeyDl\" attribute within a media component of the \"medComponents\" attribute to indicate to the PCF that the related media of the modified Individual Application Session Context resource may share resources with other media components in the related direction that include the same value in the \"sharingKeyUl\" attribute and/or \"sharingKeyDl\" attribute.\nThe NF service consumer may modify the conditions for resource sharing by including the media component within the \"medComponents\" attribute with a new value for the \"sharingKeyUl\" attribute and/or \"sharingKeyDl\" attribute. The NF service consumer may indicate that the related media of the modified Individual Application Session resource is not sharing resources with other media components in the related direction setting the \"sharingKeyUl\" attribute and/or \"sharingKeyDl\" attribute to \"null\".\nThe NF service consumer shall use the HTTP PATCH method to update the \"Individual Application Session Context resource\" as described in clause 4.2.3.2.\nIf the \"sharingKeyUl\" attribute and/or \"sharingKeyDl\" attribute are provided within a media component of the \"medComponents\" attribute, the PCF may apply the mechanisms for resource sharing as described in 3GPP TS 29.512 [8], clause 4.2.6.2.8.\nThe NF service consumer may include, in the \"ascReqData\" attribute, the \"mcpttId\" attribute in order to indicate that the modified \"Individual Application Session Context\" resource relates to the priority adjustment of an MCPTT session. When the PCF receives the \"mcpttId\" attribute related to that MCPTT session, the PCF may take specific actions on the corresponding PDU session to ensure that the MCPTT session is prioritized. For the handling of MCPTT session with priority call, see Annex B.13.\nNOTE:\tWhen the PCF supports data rate control per network slice and/or data rate control per network slice for a UE as specified in 3GPP TS 29.512 [8], it is possible that, subject to operator policy and national/regional regulations, prioritised services are exempted from the limitation of data rate per network slice. In that case the PCF will handle the request from the NF service consumer even if the authorized data rate per network slice is exceeded.\nAdditionally, when the \"PrioritySharing\" feature is supported, the PCF may receive the \"prioSharingInd\" attribute within the media component received in the \"medComponents\" attribute as described in clause 4.2.2.21. In this case, and if \"MCPTT-Preemption\" feature is supported, the PCF may receive pre-emption information as also described in clause 4.2.3.21.\nThe NF service consumer may include, in the \"ascReqData\" attribute, the \"mcVideoId\" attribute in order to indicate that the modified \"Individual Application Session Context\" resource relates to the priority adjustment of an MCVideo session. When the PCF receives the \"mcVideoId\" attribute related to that MCVideo session, the PCF may take specific actions on the corresponding PDU session to ensure that the MCVideo session is prioritized. For the handling of MCVideo session with priority call, see Annex B.15.\nNOTE:\tWhen the PCF supports data rate control per network slice and/or data rate control per network slice for a UE as specified in 3GPP TS 29.512 [8], it is possible that, subject to operator policy and national/regional regulations, prioritised services are exempted from the limitation of data rate per network slice. In that case the PCF will handle the request from the NF service consumer even if the authorized data rate per network slice is exceeded.\nWhen the \"PrioritySharing\" feature is supported, the NF service consumer may include the \"prioSharingInd\" attribute set to \"ENABLED\" within a media component of the \"medComponents\" attribute included in the \"ascReqData\" attribute to indicate to the PCF that the related media flow is allowed to use the same Allocation and Retention Priority (ARP) as media flows belonging to other \"Individual Application Session Context\" resources as described in clause 4.2.2.21. In this case, if the \"MCPTT-Preemption\" feature is supported, the NF service consumer may also include the \"preemptCap\", \"preemptVuln\" and \"preemptControlInfo\" attributes as described in clause 4.2.2.21.\nWhen the \"preemptControlInfo\" attribute is modified, the latest provided value shall be applied to all potential media flow candidates.\nIf the NF service consumer earlier has indicated a media flow priority sharing to the PCF by setting the \"prioSharingInd\" attribute to \"ENABLED\", the NF service consumer may include the Priority-Sharing-Indicator AVP set to \"DISABLED\" within a media component of the \"medComponents\" attribute to indicate to the PCF that the related media flow shall not be part of the mechanism for sharing the Allocation and Retention Priority with other media flows any longer.\nIf this media flow was in priority sharing with other media flows the PCF should readjust the Allocation and Retention Priority for the remaining services sharing priority as described in 3GPP TS 29.512 [8], clause 4.2.6.2.9 and handle the media flow excluded from priority sharing according to normal PCC/QoS rule provisioning procedures described in 3GPP TS 29.512 [8], clause 4.2.6.2.\nIf the NF service consumer earlier has indicated a media flow priority sharing to the PCF by setting the \"prioSharingInd\" attribute to \"ENABLED\" for media flows and the NF service consumer indicates to remove one or more of the media flows in priority sharing with other media flows, the PCF should readjust the Allocation and Retention Priority for the remaining services sharing priority as described in 3GPP TS 29.512 [8], clause 4.2.6.2.9 and handle the media flow removed according to normal PCC/QoS rule provisioning procedures described in 3GPP TS 29.212 [8], clause 4.2.6.2.\nThis procedure is used by the NF service consumer if the \"IMS_SBI\" feature is supported to modify in the PCF the subscription to notification about credit unavailability for the Service Data Flows within the AF application session context.\nThe NF service consumer shall use the HTTP PATCH method to update the \"Events Subscription\" sub-resource together with the modifications to the \"Individual Application Session Context\" resource.\nThe NF service consumer shall include in the HTTP PATCH request message described in clause 4.2.3.2, in the \"ascReqData\" attribute, the updated values of the \"EventsSubscReqDataRm\" data type, which either include in the \"events\" attribute a new element with the \"event\" attribute set to the value \"OUT_OF_CREDIT\" or remove from the \"events\" attribute the existing element with the \"event\" attribute set to the value \"OUT_OF_CREDIT\".\nAs a result of this action, the PCF shall set the appropriate subscription to out of credit notification for the corresponding PCC Rule(s) as described in 3GPP TS 29.512 [8].\nThe PCF shall reply to the NF service consumer with an HTTP response message as described in clause 4.2.3.2.\nThis procedure is used by NF service consumer to modify the PCF subscription for notification about real-time measurements of QoS parameters for a QoS Flow, e.g. packet delay and/or congestion information between UPF and UE, when the \"QoSMonitoring\" feature is supported.\nThe NF service consumer shall use the HTTP PATCH method to update the \"Events Subscription\" sub-resource together with the modifications to the \"Individual Application Session Context\" resource.\nThe NF service consumer shall include in the HTTP PATCH request message described in clause 4.2.3.2, in the \"ascReqData\" attribute, the updated values of the \"evSubsc\" attribute of \"EventsSubscReqDataRm\" data type, as follows:\n-\tto create a subscription to notifications of QoS monitoring report:\na)\tshall include the \"events\" array with an array that contains a new entry per requested notification method with the \"event\" attribute set to \"QOS_MONITORING\", and notification related information as described in clause 4.2.2.23;\nb)\twhen the \"notifMethod\" of the new entry is \"EVENT_DETECTION\", shall include a \"qosMon\" attribute with the QoS monitoring information for packet delay thresholds and/or a \"qosMonDatRate\" attribute with QoS monitoring information for data rate thresholds and/or the \"congestMon\" attribute for congestion thresholds as described in clause 4.2.2.23.\nc)\tshall include the new requested QoS monitoring parameter(s) to be measured (i.e. DL,/UL/round trip packet delay and/or if the feature \"XRM_5G\" is supported, congestion infomation, and/or, data rate information) within the \"reqQosMonParams\" attribute;\nd)\tmay include the notification correlation identifier assigned by the AF within the \"notifCorreId\" attribute;\ne)\tif the feature \"ExposureToEAS\" and/or \"XRM_5G\" is supported, may include the \"directNotifInd\" attribute set to true to indicate the direct event notification of QoS Monitoring data from the UPF;\nf)\tfor data rate monitoring, may include the \"avrgWndw\" attribute to indicate the average window for the data rate measurement; and\n-\tto remove a subscription to QoS monitoring information:\na)\tshall include the \"events\" array containing an array that shall omit the corresponding entry with the \"event\" attribute value \"QOS_MONITORING\";\nb)\twhen the \"notifMethod\" attribute of the removed entry is \"EVENT_DETECTION\", it shall contain the \"qosMon\" and/or \"qosMonDatRate\" and/or \"congestMon\" attribute set to null;\nc)\tif the \"directNotifInd\" attribute and/or the \"avrgWndw\" attribute was previously provided, it shall contain the \"directNotifInd\" attribute and/or the \"avrgWndw\" attribute set to null.\nIf the AF provided an indication of direct event notification, and the PCF determines that the QoS Monitoring reports cannot be notified directly (e.g. the AF requests for monitoring packet delay variation or round trip packet delay when UL and DL are on different service data flows), the PCF generates a successful response to the AF and indicates that direct event notification is not possible by including within the \"servAuthInfo\" attribute the value \"DIRECT_NOTIF_NOT_POSSIBLE\", as described in clause 4.2.2.23.\nAs result of this action, the PCF shall set the appropriate subscription to QoS monitoring information for the corresponding active PCC rule(s) as described in 3GPP TS 29.512 [8].\nThe PCF shall reply to the NF service consumer as described in clause 4.2.3.2.\nEditor’s note:\tWhether the applicable reporting frequency for the Data Rate QoS monitoring can be event triggered and/or periodic is FFS.\nIf the \"TimeSensitiveNetworking\" feature is supported, the NF service consumer may update the TSCAI Input container and the TSC QoS related data held in an \"Individual Application Session Context\" resource using the Npcf_PolicyAuthorization_Update service operation to modify the TSCAI input information and QoS characteristics delivered to the SMF for use in the 5G System.\nThe NF service consumer shall use the HTTP PATCH method as described in clause 4.2.3.2 to modify TSCAI input container and the TSC QoS related information.\nThe NF service consumer may indicate TSCAI input information and/or TSC QoS related information for new TSC streams by adding, in the \"ascReqData\" attribute, one or more media component entries within the \"medComponents\" attribute including the \"tsnQos\" attribute and including the \"tscaiInputUl\" attribute and/or the \"tscaiInputDl\" attribute and, when the feature \"TimeSensitiveCommunication\" is supported, the \"tscaiTimeDom\" attribute, if available, when the feature \"EnTSCAC\" feature is supported, the \"capBatAdaptation\" attribute, if available, as described in clause 4.2.2.24.\nThe NF service consumer may update the TSCAI input information and/or the TSC QoS related information for existing TSC traffic by including the updated values in the \"tscaiInputUl\" attribute and/or \"tscaiInputDl\"attribute and/or updated values in the \"tsnQos\" attribute included in a media component entry of the \"medComponents\" attribute included in the \"ascReqData\" attribute.\nThe NF service consumer may delete the TSCAI input information and TSC QoS related information of removed TSC traffic by removing the corresponding media component entries within the \"medComponents\" attribute included in the \"ascReqData\" attribute.\nAlternatively, when the \"TimeSensitiveCommunication\" and \"AuthorizationWithRequiredQoS\" features are supported, the NF service consumer (i.e., the TSCTSF or TSN AF) may update TSC QoS related information updating the \"qosReference\" attribute, and/or may indicate the update of the alternative service requirements updating the \"altSerReqs\" attribute as specified in clause 4.2.3.30.\nWhen the \"TimeSensitiveCommunication\" and \"AltSerReqsWithIndQoS\" features are supported, the NF service consumer (i.e., the TSCTSF or TSN AF) may update TSC QoS related information updating the individual QoS requirement within the \"tsnQos\" attribute, and/or may indicate the update of the alternative service requirements updating the \"altSerReqsData\" attribute as specified in clause 4.2.3.30.\nWhen the \"EnTSCAC\" feature is supported, the NF service consumer may update the request to notify the network-determined BAT offset and the optionally adjusted periodicity by using the \"EventsSubscReqDataRm\" data type and may update by including the event within the \"events\" attribute with the \"event\" attribute set to \"BAT_OFFSET_INFO\", if available, as described in clause 4.2.2.40.\nThe PCF shall reply to the NF service consumer as described in clause 4.2.3.2.\nThe PCF shall check whether the received TSCAI input information and TSC QoS related information require to modify or to remove PCC rules in the SMF. Provisioning of PCC rule(s) to the SMF shall be carried out as specified in 3GPP TS 29.512 [8].\nDuring the lifetime of a PDU session enabling Time Sensitive Communications, Time Synchronization and Deterministic Networking, the NF service consumer may provision or update, at any time, TSC user plane node management information and/or, when the DS-TT or the NW-TT functions are used, port management information for a port located in DS-TT and/or NW-TT and/or, the direct event notification of TSC management information from the UPF if the feature \"ExposureToTSC\" is supported.\nIf the \"TimeSensitiveNetworking\" or \"TimeSensitiveCommunication\" feature is supported the NF service consumer (i.e., the TSN AF or the TSCTSF) may provide a UMIC with TSC user plane management information for the UPF/NW-TT and/or a PMIC for the DS-TT port and/or PMIC(s) for the NW-TT ports with the respective port management information, to read and/or to update the configuration of the 5G system as a TSC user plane node by invoking the Npcf_PolicyAuthorization_Update service operation to the PCF.\nThe NF service consumer shall use the HTTP PATCH method as described in clause 4.2.3.2 to modify the \"Individual Application Session Context\" resource holding the UMIC and/or the DS-TT PMIC and/or NW-TT PMIC(s).\nThe NF service consumer may include in the \"ascReqData\" attribute:\n-\tthe DS-TT PMIC encoded in the \"tsnPortManContDstt\" and/or the one or more NW-TT PMIC(s)encoded in the \"tsnPortManContNwtts\", if available;\n-\tthe UMIC encoded in the \"tsnBridgeManCont\", if available; and/or\n-\tif the feature \"ExposureToTSC\" is supported, the notification URI within the \"tscNotifUri\" attribute and the notification correlation identifier assigned by the TSCTSF or TSN AF within the \"tscNotifCorreId\" attribute, which, if available, indicates that the direct event notification of TSC management information from the UPF is requested.\nAs result of this action, the PCF shall provide the received DS-TT and/or NW-TT PMIC(s) and/or UMIC and/or the direct event notification of TSC management information for the corresponding PDU session as described in 3GPP TS 29.512 [8].\nThe NF service consumer may include, in the \"ascReqData\" attribute, the \"mcsId\" attribute if it was not previously provided in order to indicate that the modified AF session relates to an MCS session.\nIf the NF service consumer supports the SBI message priority mechanism for an MCS session, the NF service consumer shall include the \"3gpp-Sbi-Message-Priority\" custom HTTP header towards the PCF as described in clause 4.2.2.12.\nIf the PCF receives the \"mcsId\" attribute, the PCF shall take specific actions on the corresponding PDU session to ensure that the MCS session is prioritised as defined in 3GPP TS 29.512 [8].\n4.2.3.27\tSupport of CHEM feature\nWhen CHEM feature is supported, the NF service consumer may include the value of Maximum Packet Loss Rate for UL within the \"maxPacketLossRateUl\" attribute and/or the value of Maximum Packet Loss Rate for DL within the \"maxPacketLossRateDl\" attribute in \"medComponents\" attribute. For CHEM feature, see Annex B.14.\nIf the \"FLUS\" feature is supported by the NF service consumer, the NF service consumer may include the \"flusId\" attribute within a media component of the \"medComponents\" attribute to indicate that the related media of the modified Individual Application Session Context resource corresponds to a FLUS media stream. Additional QoS information for the treatment of FLUS media may be provided within \"desMaxLatency\" attribute and/or \"desMaxLoss\" attribute.\nWhen the \"EPSFallbackReport\" feature is supported, this procedure is used in the NF service consumer to subscribe to the notification of EPS Fallback events, if this event was not previously provisioned.\nThe NF service consumer shall use the HTTP PATCH method to update the \"Events Subscription\" sub-resource together with the modifications to the \"Individual Application Session Context\" resource.\nThe NF service consumer shall include in the HTTP PATCH request message described in clause 4.2.3.2, in the \"ascReqData\" attribute, the updated values of the \"evSubsc\" attribute of the \"EventsSubscReqDataRm\" data type, which shall include in the \"events\" attribute a new element with the \"event\" attribute set to \"EPS_FALLBACK\". The NF service consumer shall request to the PCF to report EPS Fallback in conjunction with providing the PCF with NF service consumer service information for voice media type as described in clause 4.2.3.2, if the event was not previously provisioned as described in clause 4.2.2.30.\nAs result of this action, the PCF shall set the appropriate subscription to EPS Fallback for the corresponding active PCC rule(s) as described in 3GPP TS 29.512 [8].\nThe PCF shall reply to the NF service consumer as described in clause 4.2.3.2.\nWhen the \"AuthorizationWithRequiredQoS\" feature is supported, this procedure is used by a NF service consumer to modify the required QoS by providing a different QoS reference(s) parameter while the AF session is ongoing. When the \"AltSerReqsWithIndQoS\" feature is supported, this procedure is used by a NF service consumer to modify the Requested Alternative QoS Parameter set(s).\nThe NF service consumer shall use the HTTP PATCH method to modify the required QoS information.\nWhen the \"AuthorizationWithRequiredQoS\" feature is supported, the NF service consumer may include in the HTTP PATCH request message described in clause 4.2.3.2, in the \"ascReqData\" attribute, within one or more entries of the \"medComponents\" attribute included in the AppSessionContextUpdateData data type:\n-\ta \"qosReference\" attribute, which may contain:\ni.\ta QoS reference, that replaces an existing QoS reference value if the \"qosReference\" attribute was previously provisioned, or creates a new one if no \"qosReference\" attribute was previously provisioned;\nii.\ta \"null\" value, which removes a previously provisioned \"qosReference\" attribute value.\n-\tan \"altSerReqs\" attribute, which may contain:\ni.\ta prioritized list of alternative QoS references, which replaces an existing alternative QoS references list if the \"altSerReqs\" attribute was previously provisioned, or creates a new one if no \"altSerReqs\" attribute was previously provisioned;\nii.\ta \"null\" value, which removes a previously provisioned alternative QoS references list.\nWhen the \"AltSerReqsWithIndQoS\" feature is supported, and the service QoS is provided, or was previously provided using individual QoS parameters (e.g. \"marBwUl\" and/or \"marBwDl\", attributes) instead of a QoS reference, the NF service consumer may include within one or more entries of the \"medComponents\" attribute:\n-\tan \"altSerReqsData\" attribute, which may contain:\ni.\ta prioritized list of alternative service requirements that include Requested Alternative QoS Parameter set(s), which replaces an existing list of alternative service requirements that include Requested Alternative QoS Parameter set(s) if the \"altSerReqsData\" attribute was previously provisioned, or creates a new one if no \"altSerReqsData\" attribute was previously provisioned;\nii.\ta \"null\" value, which removes a previously provisioned list of alternative service requirements that include individual QoS parameter sets.\nNOTE:\tThe modification of the individual QoS parameters is performed by provisioning within the \"medComponents\" attribute an update of the existing values or deleting the previously provided values, as described in clause 4.2.3.2.\nWhen the \"DisableUENotification\" feature is supported, the NF service consumer may include a \"disUeNotif\" attribute, which may contain:\ni.\ta \"true\" value if it was not provided or it was provided and set to \"false\";\nii.\ta \"false\" value if it was provided and set to \"true\".\nWhen the NF service consumer provides the \"altSerReqs\" attribute containing a prioritized list of alternative QoS references or \"altSerReqsData\" attribute containing a prioritized list of alternative service requirements that include individual QoS parameter sets, the NF service consumer shall subscribe to receive notifications from the PCF when the resources associated to the corresponding service information have been allocated as described in clause 4.2.3.10 and when the GBR QoS targets for one or more service data flows can no longer (or can again) be guaranteed, as described in clause 4.2.3.6, if not previously subscribed.\nDue to the updated required QoS information, the PCF may need to modify the related PCC rules as specified in 3GPP TS 29.513 [7] and provide the updated information towards the SMF following the corresponding procedures specified in 3GPP TS 29.512 [8].\nThe PCF shall reply to the NF service consumer as described in clause 4.2.3.2.\nIf the QoSHint feature is supported by the NF service consumer, the NF service consumer may include the \"desMaxLatency\" attribute and/or \"desMaxLoss\" attribute within a media component of the \"medComponents\" attribute to indicate that the related media of the modified Individual Application Session Context resource has specific latency and/or loss demands.\nThis procedure is used by the NF service consumer if the \"IMS_SBI\" and the \"ReallocationOfCredit\" features are supported to modify in the PCF the subscription to notification about reallocation of credit for the Service Data Flows within the AF application session context.\nThe NF service consumer shall use the HTTP PATCH method to update the \"Events Subscription\" sub-resource together with the modifications to the \"Individual Application Session Context\" resource.\nThe NF service consumer shall include in the HTTP PATCH request message described in clause 4.2.3.2, in the \"ascReqData\" attribute, the updated values of the \"EventsSubscReqDataRm\" data type, which either include in the \"events\" attribute a new element with the \"event\" attribute set to the value \"REALLOCATION_OF_CREDIT\" or remove from the \"events\" attribute the existing element with the \"event\" attribute set to the value \"REALLOCATION_OF_CREDIT\".\nAs a result of this action, the PCF shall set the appropriate subscription to reallocation of credit notification for the corresponding PCC Rule(s) as described in 3GPP TS 29.512 [8].\nThe PCF shall reply to the NF service consumer with an HTTP response message as described in clause 4.2.3.2.\nWhen the feature \"SatelliteBackhaul\"is supported, this procedure is used in the NF service consumer to modify in the PCF the subscription to notification about satellite backhaul category changes. When the feature \"EnSatBackhaulCatChg\" is supported, the procedure is also used to modify the subscription to notification about dynamic satellite backhaul category changes.\nThe NF service consumer shall use the HTTP PATCH method to update the \"Events Subscription\" sub-resource together with the modifications to the \"Individual Application Session Context\" resource.\nThe NF service consumer shall include in the HTTP PATCH request message described in clause 4.2.3.2, in the \"ascReqData\" attribute, the updated values of the \"EventsSubscReqDataRm\" data type, which shall include in the \"events\" attribute a new element with the \"event\" attribute set to \"SAT_CATEGORY_CHG\" to indicate the subscription to changes of satellite backhaul category or changes between satellite backhaul and non-satellite backhaul.\nAs result of this action, the PCF shall set the appropriate subscription to satellite backhaul changes for the PDU session as described in 3GPP TS 29.512 [8].\nThe PCF shall reply to the NF service consumer as described in clause 4.2.3.2. The PCF shall include the \"evsNotif\" attribute with an entry in the \"evNotifs\" array with the \"event\" attribute set to \"SAT_CATEGORY_CHG\" and the \"satBackhaulCategory\" attribute including the satellite backhaul category or the indication of non-satellite backhaul if the PCF has previously subscribed with the SMF to changes in this information.\nWhen the \"TimeSensitiveNetworking\" or \"TimeSensitiveCommunication\" feature is supported, this procedure is used to modify in the PCF the subscription to TSC user plane node related events.\nThe NF service consumer shall use the HTTP PATCH request message described in clause 4.2.3.2. To subscribe to this event, the NF service consumer shall include in the \"evSubsc\" attribute within the \"ascReqData\" attribute, the \"events\" attribute with a new element with the \"event\" attribute set to the value \"TSN_BRIDGE_INFO\". To unsubscribe to this event, the NF service consumer shall omit the event \"TSN_BRIDGE_INFO\" within the \"events\" attribute or, if all the subscribed events are being removed, shall set the \"evSubsc\" attribute to null.\nThe PCF shall reply to the NF service consumer with an HTTP response message as described in clause 4.2.3.2.\nIf the PCF stores updated PMIC/UMIC updated information, and the NF service consumer subscribed to the reception of TSC user plane information, the PCF shall include the \"evsNotif\" attribute with an entry in the \"evNotifs\" array with the \"event\" attribute set to \"TSN_BRIDGE_INFO\" and the \"tsnBridgeManCont\" attribute and/or the \"tsnPortManContDstt\" attribute and/or the \"tsnPortManContNwtts\" attribute as received from the SMF, if not previously reported.\nAs result of this action, the PCF shall modify the corresponding subscription to the report of TSC user plane node management information and port management information for the corresponding PDU session, if applicable, as described in 3GPP TS 29.512 [8].\nWhen the feature \"ExtraUEaddrReport\" is supported, this procedure is used to modify in the PCF the subscription to the report of extra UE addresses.\nThe NF service consumer shall use the HTTP PATCH request message described in clause 4.2.3.2. To subscribe to this event, the NF service consumer shall include in the \"evSubsc\" attribute within the \"ascReqData\" attribute, the \"events\" array with a new element with the \"event\" attribute set to the value \"EXTRA_UE_ADDR\". To unsubscribe to this event, the NF service consumer shall omit the event \"EXTRA_UE_ADDR\" within the \"events\" attribute or, if all the subscribed events are being removed, shall set the \"evSubsc\" attribute to null.\nThe PCF shall reply to the NF service consumer with an HTTP response message as described in clause 4.2.3.2.\nIf the PCF received from the SMF the framed routes as described in 3GPP S 29.512 [8], clause 4.2.2.2, or the PCF received updates of the one or more IPv6 prefixes allocated to the UE as described in 3GPP TS 29.512 [8], clauses 4.2.4.2 and C.3.4.1, and the NF service consumer is subscribing to this event, the PCF shall include in the response the \"evsNotif\" attribute with an entry in the \"evNotifs\" array with the \"event\" attribute set to \"EXTRA_UE_ADDR\" and:\n-\tthe actual list of IPv4 addresses within the \"ipv4AddrList\" attribute, if one or more IPv4 framed routes are available in the PCF; or\n-\tthe actual list of IPv6 prefixes allocated to the UE within the \"ipv6PrefixList\" attribute, if one or more IPv6 framed routes are associated to the PDU session and are available in the PCF, or if the PCF keeps updated IPv6 prefix(es) information.\nAs result of this action, the PCF shall set the appropriate subscription to the report of UE IP addresses, if not previously subscribed, as described in in 3GPP TS 29.512 [8].\nThis procedure is used by a NF service consumer to modify the provisioning of multi-modality services when \"MultiMedia\" feature is supported.\nThe NF service consumer shall use the HTTP PATCH method to modify the provisioning of multi-modality services.\nThe NF service consumer may include in the HTTP PATCH request message described in clause 4.2.3.2, in the \"ascReqData\" attribute.\nThe NF service consumer may include in the HTTP PATCH request message described in clause 4.2.3.2, in the \"ascReqData\" attribute, the updated QoS monitoring requirements.\nEditor's Note:\tIt is FFS whether different QoS monitoring requirements per different media might be requested. It is also FFS whether the existing data structures for QoS Monitoring can be reused or new ones are needed.\nIf the \"RTLatency\" feature is supported, the NF service consumer may update the RT latency requirement using the HTTP PATCH method as described in clause 4.2.3.2 by invoking the Npcf_PolicyAuthorization_Update service operation.\nDue to the change of Round-Trip latency requirements, the PCF may need to provision or modify the related PCC rules as specified in 3GPP TS 29.513 [7] and provide the related information towards the SMF following the corresponding procedures specified in clause 4.2.6.21.2 of 3GPP TS 29.512 [8].\nIf the \"PDUSetHandling\" feature is supported, the NF service consumer may update the PDU Set QoS related data held in an \"Individual Application Session Context\" resource using the Npcf_PolicyAuthorization_Update service operation to modify the PDU Set QoS characteristics delivered to the SMF for use in the 5G System.\nThe NF service consumer may indicate PDU Set QoS related information for new PDUs by adding, in the \"ascReqData\" attribute, one or more media component entries within the \"medComponents\" attribute including the \"pduSetQos\" attribute, as described in clause 4.2.2.39.\nThe NF service consumer may delete the PDU Set QoS related information of removed PDU Set traffic by removing the corresponding media component entries within the \"medComponents\" attribute included in the \"ascReqData\" attribute.\nThe PCF shall reply to the NF service consumer as described in clause 4.2.3.2.\nAs result of this action, the PCF shall set the appropriate PDU Set QoS parameters for the corresponding PCC rule(s) as described in 3GPP TS 29.512 [8].\nWhen the \"EnTSCAC\" feature is supported, this procedure is used to modify in the PCF the subscription to the BAT offset information notification.\nThe NF service consumer shall use the HTTP PATCH method to update the \"Events Subscription\" sub-resource together with the modifications to the \"Individual Application Session Context\" resource.\nThe NF service consumer shall include in the HTTP PATCH request message described in clause 4.2.3.2, in the \"ascReqData\" attribute, the updated values of the \"EventsSubscReqDataRm\" data type, which shall include in the \"events\" attribute a new element with the \"event\" attribute set to \"BAT_OFFSET_INFO\" to indicate the subscription to changes of the BAT offset and the optionally adjusted periodicity.\nAs result of this action, the PCF shall set the appropriate subscription to BAT offset notification for the corresponding PCC rule(s) as described in 3GPP TS 29.512 [8].\nThis procedure is used by an NF service consumer to modify the subscription for notification about the variation of packet delay between UE and PSA UPF when the \"EnQoSMon\" feature is supported.\nThe NF service consumer shall include in the HTTP PATCH request message described in clause 4.2.3.2, in the \"ascReqData\" attribute, the updated values of the \"evSubsc\" attribute of \"EventsSubscReqDataRm\" data type, as follows:\n-\tto create a subscription to notifications of Packet Delay Variation reports, the NF service consumer shall behave as specified in clause 4.2.2.41; or\n-\tto remove a subscription to Packet Delay Variation reports, the NF service consumer shall include the \"events\" array without any entry with the \"event\" value \"PACK_DEL_VAR\" and shall set to null the \"pdvMon\" attribute if previously provided.\n-\tto modify a subscription to Packet Delay Variation reports, the NF service consumer shall replace the Packet Delay Variation parameter(s) and/or the Packet Delay Variation information and/or the event reporting information, as necessary.\nAs result of this action, the PCF shall determine the QoS Monitoring information to derive Packet Delay Variation measurements requested by the AF, if applicable, and shall modify the subscription for QoS Monitoring for the corresponding PCC rule(s) as described in 3GPP TS 29.512 [8].\nThe PCF shall reply to the NF service consumer as described in clause 4.2.3.2.\nIf the \"XRM_5G\" feature is supported, the AF may provide the Uplink and/or Downlink Periodicity information which indicates the time period between the start of the two data bursts in Uplink and/or Downlink direction within \"periodInfo\" attribute contained in MediaComponentRm data structure.\nAs a result of this action, the PCF shall send the Periodicity information to the SMF as described in 3GPP TS 29.512 [8].\nWhen the \"L4S\" feature is supported, this procedure is used by a NF service consumer to provide the explicit indication of whether the UL and/or DL service data flow of a new media component supports ECN marking for L4S.\nThe NF service consumer may include in the HTTP PATCH request message described in clause 4.2.3.2, in the \"ascReqData\" attribute, in the corresponding new media component(s) entries of the \"medComponents\" attribute, the \"l4sInd\" attribute with the indication of ECN marking for L4S support as described in clause 4.2.2.43. The NF service consumer shall also subscribe to receive notifications when the ECN marking for L4S support is not available or available again as described in clause 4.2.2.43, if not previously subscribed.\nAs result of this action, the PCF may indicate to the SMF to enable for ECN marking for L4S support for the service data flow of the new media component(s) following the procedures specified in clause 4.2.6.2.21 of 3GPP TS 29.512 [8].\nThis procedure is used by an NF service consumer to modify the subscription for notification about the Round-Trip delay measurements over two QoS flows when the \"EnQoSMon\" feature is supported.\nThe NF service consumer shall include in the HTTP PATCH request message described in clause 4.2.3.2, in the \"ascReqData\" attribute, the updated values of the \"evSubsc\" attribute of \"EventsSubscReqDataRm\" data type, as follows:\n-\tto create a subscription to notifications of Round-Trip delay measurements over two QoS flows reports, the NF service consumer shall behave as specified in clause 4.2.2.44; and\n-\tto remove a subscription to Round-Trip delay measurements over two QoS flows reports, the NF service consumer shall include the \"events\" array without any entry with the \"event\" value \"RT_DELAY_TWO_QOS_FLOWS\";\n-\tto modify a subscription to Round-Trip delay measurements over two QoS flows reports, the NF service consumer shall replace the Round-Trip delay over two QoS flows and/or the event reporting information, as necessary.\nAs result of this action, the PCF shall determine the QoS Monitoring information to derive the Round-Trip delay measurements over two QoS flows requested by the AF, if applicable, and shall modify the subscription for QoS Monitoring for the corresponding PCC rule(s) as described in 3GPP TS 29.512 [8],\nThe PCF shall reply to the NF service consumer as described in clause 4.2.3.2.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "4.2.4\tNpcf_PolicyAuthorization_Delete service operation",
                            "text_content": "The Npcf_PolicyAuthorization_Delete service operation provides means for the NF service consumer to delete the context of application session information.\nThe following procedures using the Npcf_PolicyAuthorization_Delete service operation are supported:\n-\tAF application session context termination.\n-\tReporting usage for sponsored data connectivity.\n-\tTermination of Multimedia Priority Services.\n-\tRequest and report of access network information.\n-\tTermination of MCPTT.\n-\tTermination of MCVideo.\n-\tPriority sharing indication.\n-\tReport of RAN-NAS release cause.\n-\tTermination of Mission Critical Services.\nThis procedure is used to terminate an AF application session context for the service as defined in 3GPP TS 23.501 [2], 3GPP TS 23.502 [3] and 3GPP TS 23.503 [4].\nFigure 4.2.4.2-1 illustrates the application session context termination.\n\nThe figure depicts a detailed view of the application session context termination process in a 5G network. It illustrates the various components involved, such as the application session context, the termination point, and the termination mechanism. The figure provides a comprehensive understanding of the process, highlighting the importance of context management in 5G networks to ensure efficient and reliable communication.\nFigure 4.2.4.2-1: Application session context termination\nWhen an AF session is terminated, and if the AF application session context was created as described in clause 4.2.2 or in clause 4.2.6.3, the NF service consumer shall invoke the Npcf_PolicyAuthorization_Delete service operation to the PCF using an HTTP POST request, as shown in figure 4.2.4.2-1, step 1.\nThe NF service consumer shall set the request URI to \"{apiRoot}/npcf-policyauthorization/v1/app-sessions/{appSessionId}/delete\".\nThe NF service consumer may include in the body of the HTTP POST the \"EventsSubscReqData\" data type with the \"evSubsc\" attribute indicating the corresponding list of events to subscribe to.\nWhen the PCF receives the HTTP POST request from the NF service consumer, indicating the termination of the AF application session context information, the PCF shall acknowledge that request by sending an HTTP response message with the corresponding status code.\nIf the HTTP POST request from the NF service consumer is accepted, the PCF shall send to the NF service consumer:\na)\tif event information is reported, a \"200 OK\" response to HTTP POST request, as shown in figure 4.2.4.2-1, step 2a, including in the \"AppSessionContext\" data type the \"evsNotif\" attribute, which encodes within \"evNotifs\" attribute the event to report to the NF service consumer, if available, as described in clause 4.2.5.2. If the event information is not available at the PCF the PCF shall defer sending the response to the NF service consumer and shall immediately configure the SMF to provide such information, as specified in 3GPP TS 29.512 [8];\nb)\totherwise, the PCF shall send to the NF service consumer a \"204 No Content\".\nAfterwards, the PCF shall free the network resources allocated for the Service Data Flow(s) corresponding to the deleted AF application session context information. In order to do that, the PCF shall initiate the request for the removal of any related PCC rules from the SMF, if not previously done, following the corresponding procedures specified in 3GPP TS 29.512 [8].\nIf the HTTP POST request from the NF service consumer is rejected, the PCF shall indicate in the response to HTTP POST request the cause for the rejection as specified in clause 5.7.\nWhen \"SponsoredConnectivity\" is supported, and the NF service consumer indicated to enable sponsored data connectivity and the NF service consumer provided usage thresholds for such sponsor to the PCF, the PCF shall report accumulated usage to the NF service consumer using the response of the Npcf_PolicyAuthorization_Delete service operation.\nThis procedure is initiated when:\n-\tthe \"Individual Application Session Context\" is deleted by the NF service consumer; or\n-\tthe PCF requests the deletion of the \"Individual Application Session Context\" to the NF service consumer, as described in clause 4.2.5.3, due to PDU session termination, the termination of all the service data flows of the AF session or the home operator policy disallowing the UE accessing the sponsored data connectivity in the roaming case.\nTo report the accumulated usage, the PCF shall immediately configure the SMF to retrieve the accumulated usage as specified in 3GPP TS 29.512 [8]. When the PCF receives the usage information from the SMF, the PCF shall notify the NF service consumer by including the \"EventsNotification\" data type in the response of the HTTP POST request as described in clause 4.2.4.2.\nThe PCF shall include:\n-\tan event of the \"AfEventNotification\" data type in the \"evNotifs\" attribute with the matched event \"USAGE_REPORT\" in the \"event\" attribute; and\n-\tthe usage encoded in the \"usgRep\" attribute.\n\nIf the AF session being terminated corresponds to an MPS session, the PCF shall delete the PCC rules corresponding to the MPS session and the PCF shall revoke the actions related to the prioritization of the MPS session in the corresponding PDU Session as defined in 3GPP TS 29.512 [8].\nIf the AF session being terminated corresponds to an MPS for DTS session, the PCF shall revoke MPS for DTS session in the corresponding PDU Session as defined in 3GPP TS 29.512 [8].\nThis procedure is used by a NF service consumer to request the PCF to report the access network information (i.e. user location and/or user timezone information) at the deletion of the \"Individual Application Session Context\" resource when the \"NetLoc\" feature is supported.\nThis procedure is initiated when:\n-\tthe \"Individual Application Session Context\" is deleted by the NF service consumer; or\n-\tthe PCF requests the deletion of the \"Individual Application Session Context\" from the NF service consumer, as described in clause 4.2.5.3, due to PDU session termination or the termination of all the service data flows of the AF session.\nThe NF service consumer shall include in the HTTP POST request message described in clause 4.2.4.2:\n-\tan entry of the \"AfEventSubscription\" data type in the \"events\" attribute with:\na)\tthe \"event\" attribute set to the value \"ANI_REPORT\"; and\nb)\tthe \"notifMethod\" attribute set to the value \"ONE_TIME\"; and\n-\tthe \"reqAnis\" attribute, with the required access network information, i.e. user location and/or user time zone information).\nWhen the PCF determines that the access network does not support the access network information reporting because the SMF does not support the NetLoc feature, the PCF shall respond to the NF service consumer including in the \"EventsNotification\" data type the \"noNetLocSupp\" attribute set to \"ANR_NOT_SUPPORTED\" value. Otherwise, the PCF shall immediately configure the SMF to provide such access information, as specified in 3GPP TS 29.512 [8].\nWhen the PCF receives the access network information from the SMF, the PCF shall provide the corresponding access network information to the NF service consumer by including the \"EventsNotification\" data type in the \"200 OK\" response to the HTTP POST request. The PCF shall include:\n-\tin case of 3GPP access, the user location information in the \"eutraLocation\" or in the \"nrLocation\" attribute in the \"ueLoc\" attribute, if available and required;\n-\tin case of untrusted non-3GPP access, the user location information in the \"n3gaLocation\" attribute in the \"ueLoc\" attribute, if required, as follows:\na)\tthe user local IP address in the \"ueIpv4Addr\" or \"ueIpv6Addr\" attribute, if available;\nb)\tthe UDP source port or the TCP source port in the \"portNumber\" and \"protocol\" attributes, if available; and\nc)\tif the \"WLAN_Location\" feature is supported, the WLAN location information encoded in the \"twapId\" attribute, if available, that shall consist of:\ni.\tthe SSID in the \"ssId\" attribute;\nii.\tthe BSSID the \"bssId\" attribute if available; and\niii.\tthe civic address in the \"civicAddress\" attribute if available;\nNOTE 1:\tWhen the UE reaches the ePDG via a NAT, the combination of UE local IP address and the UE source port is needed for lawful interception purposes. The UE source port may be either a UDP or a TCP port, and it is indicated in the \"protocol\" attribute.\n-\tin case of trusted non-3GPP access, the user location information in the \"n3gaLocation\" attribute in the \"ueLoc\" attribute, if required, as follows:\na)\tthe user local IP address in the \"ueIpv4Addr\" or \"ueIpv6Addr\" attribute, if available; and\nb)\tthe UDP source port in the \"portNumber\" attribute if available; and\nNOTE 2:\tThe UDP protocol can be used between the UE and the TNGF to enable NAT traversal.\nc)\teither the TNAP identifier encoded in the \"tnapId\" attribute or the TWAP identifier encoded in the \"twapId\" attribute. The TNAP identifier and the TWAP identifier shall consist of:\ni.\tthe SSID in the \"ssId\" attribute;\nii.\tthe BSSID the \"bssId\" attribute if available; and\niii.\tthe civic address in the \"civicAddress\" attribute if available;\n-\tif user location was required, the time when it was last known in the \"ueLocTime\" attribute if available;\nNOTE 3:\tThe PCF derives the value of the \"ueLocTime\" attribute from the \"userLocationInfoTime\" attribute received from the SMF as specified in 3GPP TS 29.512 [8].\n-\tthe serving network identity i.e. the PLMN Identifier (the PLMN network code and the country code) or the SNPN Identifier (the PLMN Identifier and the NID) in the \"plmnId\" attribute, if user location information is required but not available in any access; and/or\n-\tthe UE timezone in the \"ueTimeZone\" attribute if required and available.\nNOTE 4:\tThe PCF forwards both 3GPP and non-3GPP access UE locations in the \"ueLoc\" attribute when both UE locations are provided by the SMF as defined in 3GPP TS 29.512 [8].\nWhen the PCF receives from the SMF that the access network does not support access network information report, the PCF shall include the \"noNetLocSupp\" attribute set to \"ANR_NOT_SUPPORTED\", \"TZR_NOT_SUPPORTED\" or \"LOC_NOT_SUPPORTED\" value received from the SMF in the \"EventsNotification\" data type in the \"200 OK\" response to the HTTP POST request.\nThe PCF shall also include an event of the \"AfEventNotification\" data type in the \"evNotifs\" attribute with the \"event\" attribute set to the value \"ANI_REPORT\".\nIf the \"Individual Application Session Context\" resource being removed corresponds to an MCPTT session, the PCF shall delete the PCC rules corresponding to the MCPTT session and the PCF shall revoke the actions related to the prioritization of the MCPTT session in the corresponding PDU Session as defined in 3GPP TS 29.512 [8].\nIf the \"Individual Application Session Context\" resource being removed corresponds to an MCVideo session, the PCF shall delete the PCC rules corresponding to the MCVideo session and the PCF shall revoke the actions related to the prioritization of the MCVideo session in the corresponding PDU Session as defined in 3GPP TS 29.512 [8].\nIf the \"Individual Application Session Context\" resource being removed included the \"prioSharingInd\" attribute set to \"ENABLED\" within a media component of the \"medComponents\" attribute, if the related media flow(s) was in priority sharing with other media flows the PCF should readjust the Allocation and Retention Priority for the remaining services sharing Allocation and Retention Priority as described in 3GPP TS 29.512 [8], clause 4.2.6.2.9 and handle the media flow removed according to normal PCC/QoS rule provisioning procedures described in 3GPP TS 29.512 [8], clause 4.2.6.2.\nThis procedure is used by a PCF to report about the RAN-NAS release cause together with access network information (i.e. user location and/or user timezone information) at the deletion of the \"Individual Application Session Context\" resource when the \"RAN-NAS-Cause\" feature is supported.\nThis procedure is initiated when:\n-\tthe \"Individual Application Session Context\" is deleted by the NF service consumer; or\n-\tthe PCF requests the deletion of the \"Individual Application Session Context\" from the NF service consumer, as described in clause 4.2.5.3, due to PDU session termination or the termination of all the service data flows of the AF session.\nThe PCF shall immediately configure the SMF to provide such RAN-NAS release cause together with access information, as specified in 3GPP TS 29.512 [8].\nWhen the PCF receives the RAN-NAS release cause and access network information from the SMF, the PCF shall provide the corresponding access network information and RAN-NAS release cause to the NF service consumer by including the \"EventsNotification\" data type in the \"200 OK\" response to the HTTP POST request. The PCF shall include:\n-\tin case of 3GPP access, the user location information in the \"eutraLocation\" or in the \"nrLocation\" attribute in the \"ueLoc\" attribute, if available;\n-\tin case of untrusted non-3GPP access, the user location information in the \"n3gaLocation\" attribute in the \"ueLoc\" attribute, if available, as follows:\na)\tthe user local IP address in the \"ueIpv4Addr\" or \"ueIpv6Addr\" attribute;\nb)\tthe UDP source port or the TCP source port in the \"portNumber\" and \"protocol\" attributes if available; and\nc)\tif the \"WLAN_Location\" feature is supported, the WLAN location information encoded in the \"twapId\" attribute, if available, that shall consist of:\ni.\tthe SSID in the \"ssId\" attribute;\nii.\tthe BSSID the \"bssId\" attribute if available; and\niii.\tthe civic address in the \"civicAddress\" attribute if available;\nNOTE 1:\tWhen the UE reaches the ePDG via a NAT, the combination of UE local IP address and the UE source port is needed for lawful interception purposes. The UE source port may be either a UDP or a TCP port, and it is indicated in the \"protocol\" attribute.\n-\tin case of trusted non-3GPP access, the user location information in the \"n3gaLocation\" attribute in the \"ueLoc\" attribute, if available, as follows:\na)\tthe user local IP address in the \"ueIpv4Addr\" or \"ueIpv6Addr\" attribute, if available; and\nb)\tthe UDP source port in the \"portNumber\" attribute if available; and\nNOTE 2:\tThe UDP protocol can be used between the UE and the TNGF to enable NAT traversal.\nc)\teither the TNAP identifier encoded in the \"tnapId\" attribute or the TWAP identifier encoded in the \"twapId\" attribute. The TNAP identifier and the TWAP identifier shall consist of:\ni.\tthe SSID in the \"ssId\" attribute;\nii.\tthe BSSID the \"bssId\" attribute if available; and\niii.\tthe civic address in the \"civicAddress\" attribute if available;\n-\tthe serving network identity i.e. the PLMN Identifier (the PLMN network code and the country code) or the SNPN Identifier (the PLMN Identifier and the NID) in the \"plmnId\" attribute, if user location information is not available in any access;\n-\tthe UE timezone in the \"ueTimeZone\" attribute if available; and\n-\tthe RAN and/or NAS release cause in the \"ranNasRelCauses\" attribute, if available.\nThe PCF shall also include an event of the \"AfEventNotification\" data type in the \"evNotifs\" attribute with the \"event\" attribute set to the value \"RAN_NAS_CAUSE\".\nIf the AF session being terminated corresponds to an MCS session, the PCF shall delete the PCC rules corresponding to the MCS session and the PCF shall revoke the actions related to the prioritisation of the MCS session in the corresponding PDU Session as defined in 3GPP TS 29.512 [8].\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "4.2.5\tNpcf_PolicyAuthorization_Notify service operation",
                            "text_content": "The Npcf_PolicyAuthorization_Notify service operation enables notification to NF service consumers that the previously subscribed event for the existing application session context occurred or that the application session context is no longer valid.\nThe following procedures using the Npcf_PolicyAuthorization_Notify service operation are supported:\n-\tNotification about application session context event.\n-\tNotification about application session context termination.\n-\tNotification about Service Data Flow QoS notification control.\n-\tNotification about service data flow deactivation.\n-\tReporting usage for sponsored data connectivity.\n-\tNotification of resources allocation outcome.\n-\tReporting access network information.\n-\tNotification of signalling path status.\n-\tNotification about out of credit.\n-\tNotification about TSC user plane node management information and/or port management information, Individual Application Session Context exists.\n-\tNotification about Service Data Flow QoS Monitoring control.\n-\tReport of EPS Fallback.\n-\tNotification about TSC user plane node Information, no Individual Application Session Context exists.\n-\tNotification about reallocation of credit.\n-\tNotification of MPS for DTS outcome.\n-\tNotification about application detection information.\n-\tNotification about satellite backhaul category changes.\n-\tNotification about UP path change enforcement failure.\n-\tNotification about PDU session established/terminated events.\n-\tNotification about extra UE addresses.\n-\tNotification about BAT offset.\n-\tNotification about UE reporting Connection Capabilities.\n-\tNotification about Packet Delay Variation.\n-\tNotification about 5GS support for Policy Control for L4S.\n-\tNotification about Round-Trip delay monitoring measurements over two QoS flows.\n-\tEvent notification for AF requested QoS for a UE or group of UE(s) not identified by UE address(es).\nThis procedure is invoked by the PCF to notify the NF service consumer when a certain, previously subscribed, application session context event occurs, as defined in 3GPP TS 23.501 [2], 3GPP TS 23.502 [3] and 3GPP TS 23.503 [4].\nFigure 4.2.5.2-1 illustrates the notification about application session context event.\n\nThe figure depicts a notification about an application session context event, which is an important event in the context of the application. The event is related to the application session context, which is a critical component of the application's state. The notification is sent to the application's server, indicating that an application session has been started or ended. This event is used to manage the application's state and ensure that the application is running correctly. The notification is sent to the application's server, which is responsible for managing the application's state and ensuring that the application is running correctly.\nFigure 4.2.5.2-1: Notification about application session context event\nWhen the PCF determines that the event for the existing AF application session context, to which the NF service consumer has subscribed to, occurred e.g. upon reception of an event notification for a PDU session from the SMF as described in 3GPP TS 29.512 [8], the PCF shall invoke the Npcf_PolicyAuthorization_Notify service operation by sending the HTTP POST request (as shown in figure 4.2.5.2-1, step 1) to the NF service consumer using the notification URI received in the subscription creation (or modification), as specified in clause 4.2.6, and appending the \"notify\" segment path at the end of the URI. The PCF shall provide in the body of the HTTP POST request the \"EventsNotification\" data type including:\n-\tthe Events Subscription resource identifier related with the notification in the \"evSubsUri\" attribute; and\n-\tthe list of the reported events in the \"evNotifs\" attribute. For each reported event, the \"AfEventNotification\" data type shall include the event identifier and may include additional event information.\nThe PCF shall include:\n-\tif the NF service consumer subscribed to the \"PLMN_CHG\" event, the \"event\" attribute set to \"PLMN_CHG\" and the \"plmnId\" attribute including the PLMN Identifier or the SNPN Identifier if the PCF has requested to be updated with this information in the SMF;\nNOTE 1:\tThe SNPN Identifier consists of the PLMN Identifier and the NID.\nNOTE 2:\tHandover between non-equivalent SNPNs, and between SNPN and PLMN is not supported. When the UE is operating in SNPN access mode, the trigger reports changes of equivalent SNPNs.\n-\tif the NF service consumer subscribed to the event \"ACCESS_TYPE_CHANGE\", the \"event\" attribute set to \"ACCESS_TYPE_CHANGE\" and:\ni.\tthe \"accessType\" attribute including the access type, and the \"ratType\" attribute including the RAT type when applicable for the notified access type; and/or\nii.\tif the \"ATSSS\" feature is supported and the PDU session is a MA PDU session:\na.\tif it is the first access type report, and both, 3GPP and non-3GPP access information is available, the \"addAccessInfo\" attribute. The \"addAccessInfo\" attribute contains the additional access type information, where the access type is encoded in the \"accessType\" attribute, and the RAT type is encoded in the \"ratType\" attribute when applicable for the notified access type;\nb.\tif it is a subsequent access type change report:\n-\tif a new access type is added to the MA PDU session, the\"addAccessInfo\" attribute with the added access type encoded in the \"accessType\" attribute, and the RAT type encoded in the \"ratType\" attribute when applicable for the notified access type;\n-\tif an access type is released to the MA PDU session, the \"relAccessInfo\" attribute with the released access type encoded in the \"accessType\" attribute, and the RAT type encoded in the \"ratType\" attribute when applicable for the notified access type; and\nNOTE 3:\tFor a MA PDU session, if the \"ATSSS\" feature is not supported by the NF service consumer the PCF shall include the \"accessType\" attribute and the \"ratType\" attribute with a currently active combination of access type and RAT type. When both 3GPP and non-3GPP accesses are available, the PCF includes the information corresponding to the 3GPP access and only changes on activation and deactivation of 3GPP access are reported.\niii.\t\tthe \"anGwAddr\" attribute including access network gateway address when available; and\n-\tif the \"IMS_SBI\" feature is supported and if the NF service consumer subscribed to the \"CHARGING_CORRELATION\" event, the \"event\" attribute set to \"CHARGING_CORRELATION\" and may include the \"anChargIds\" attribute containing the access network charging identifier(s) and the \"anChargAddr\" attribute containing the access network charging address.\nThe NF service consumer notification of other specific events using the Npcf_PolicyAuthorization_Notify request is described in the related clauses.\nUpon the reception of the HTTP POST request from the PCF indicating that the PDU session and/or service related event occurred, the NF service consumer shall acknowledge that request by sending an HTTP response message with the corresponding status code.\nIf the HTTP POST request from the PCF is accepted, the NF service consumer shall acknowledge the receipt of the event notification with a \"204 No Content\" response to HTTP POST request, as shown in figure 4.2.5.2-1, step 2.\nIf the HTTP POST request from the PCF is not accepted, the NF service consumer shall indicate in the response to HTTP POST request the cause for the rejection as specified in clause 5.7.\nIf the feature \"ES3XX\" is supported, and the NF service consumer determines the received HTTP POST request needs to be redirected, the NF service consumer shall send an HTTP redirect response as specified in clause 6.10.9 of 3GPP TS 29.500 [5].\nThis procedure is invoked by the PCF to notify the NF service consumer that the application session context is no longer valid, as defined in 3GPP TS 23.501 [2], 3GPP TS 23.502 [3] and 3GPP TS 23.503 [4].\nFigure 4.2.5.3-1 illustrates the notification about application session context termination.\n\nThe figure depicts a notification about application session context termination, indicating that the session is about to end.\nFigure 4.2.5.3-1: Notification about application session context termination\nWhen the PCF determines that the AF application session context is no longer valid, the PCF shall invoke the Npcf_PolicyAuthorization_Notify service operation by sending the HTTP POST request (as shown in figure 4.2.5.3-1, step 1) using the notification URI received in the \"Individual Application Session Context\" context creation, as specified in clause 4.2.2 and clause 4.2.6.3, and appending the \"terminate\" segment path at the end of the URI, to trigger the NF service consumer to request the application session context termination (see clause 4.2.4.2). The PCF shall provide in the body of the HTTP POST request the \"TerminationInfo\" data type including:\n-\tthe Individual Application Session Context resource identifier related to the termination notification in the \"resUri\" attribute; and\n-\tthe application session context termination cause in the \"termCause\" attribute of the \"TerminationCause\" data type, indicating:\ni)\t\"PDU_SESSION_TERMINATION\" when the PCF received from the SMF the indication of SM Policy Context termination without a specific PDU session release cause value;\nii)\t\"ALL_SDF_DEACTIVATION\" when the PCF received from the SMF the indication that all the SDFs of the Individual Application Session Context resource are deactivated or all resource allocation of an Individual Application Session Context fails because other reasons than \"PS_TO_CS_HAN\";\niii)\t\"PS_TO_CS_HO\" if the \"IMS_SBI\" feature is supported and the PCF received from the SMF:\na)\tthe PDU session release cause value \"PS_TO_CS_HO\"; or\nb)\tthe failure code value \"PS_TO_CS_HAN\" for all the SDFs of the Individual Application Session Context resource;\niv)\t\"INSUFICIENT_SERVER_RESOURCES\" when the PCF is overloaded;\nv)\t\"INSUFFICIENT_QOS_FLOW_RESOURCES\" when the PCF received that the maximum number of QoS flows for the PDU session is reached or there was a QoS flow resource limitation error; or\nvi)\t\"SPONSORED_DATA_CONNECTIVITY_DISALLOWED\" when the PCF detects that due to operator policy the UE accessing the sponsored data connectivity is disallowed.\nUpon the reception of the HTTP POST request from the PCF requesting the application session context termination, the NF service consumer shall acknowledge that request by sending an HTTP response message with the corresponding status code.\nIf the HTTP POST request from the PCF is accepted, the NF service consumer shall acknowledge the receipt of the application session context termination request with a \"204 No Content\" response to HTTP POST request (as shown in figure 4.2.5.3-1, step 2) and shall invoke the Npcf_PolicyAuthorization_Delete service operation to the PCF as described in clause 4.2.4.\nIf the HTTP POST request from the PCF is not accepted, the NF service consumer shall indicate in the response to HTTP POST request the cause for the rejection as specified in clause 5.7.\nIf the feature \"ES3XX\" is supported, and the NF service consumer determines the received HTTP POST request needs to be redirected, the NF service consumer shall send an HTTP redirect response as specified in clause 6.10.9 of 3GPP TS 29.500 [5].\nWhen the PCF gets the knowledge that one or more SDFs:\n-\tcannot guarantee the GBR QoS targets; or\n-\tcan guarantee again the GBR QoS targets;\nthe PCF shall inform the NF service consumer accordingly if the AF has previously subscribed as described in clauses 4.2.2.6 and 4.2.3.6.\nThe PCF shall notify the NF service consumer by including the \"EventsNotification\" data type in the body of the HTTP POST request as described in clause 4.2.5.2.\nThe PCF shall include:\n-\twithin the \"evNotifs\" attribute an event entry of the \"AfEventNotification\" data type with the matched event \"QOS_NOTIF\" in the \"event\" attribute; and\n-\tthe \"qncReports\" array with:\na)\tthe \"notifType\" attribute to indicate whether the GBR targets for the indicated SDFs are \"NOT_GUARANTEED\" or \"GUARANTEED\" again;\nb)\tthe identification of the affected service flows (if not all the flows are affected) encoded in the \"flows\" attribute if applicable; and\nc)\tif the \"AuthorizationWithRequiredQoS\" feature or the \"AltSerReqsWithIndQoS\" feature as defined in clause 5.8 is supported, the reference to the Alternative Service Requirement corresponding alternative QoS parameter set if received from the SMF within the \"altSerReq\" attribute. When the \"altSerReq\" attribute is omitted and the \"notifType\" attribute is NOT_GUARANTEED, it indicates that the lowest priority alternative service requirement could not be fulfilled.\nWhen the \"AuthorizationWithRequiredQoS\" and \"AltQoSProfilesSupportReport\" features as defined in clause 5.8 are supported, and the AF included during the media component provisioning the \"altSerReqs\" attribute for the concerned media components(s), or the \"AltSerReqsWithIndQoS\" and \"AltQoSProfilesSupportReport\" features are supported and the AF included during media component provisioning the \"altSerReqsData\" attribute for the concerned media component(s), if the PCF receives from the SMF the indication that the GBR QoS targets cannot be guaranteed and the indication that alternative QoS profiles are not supported in the NG-RAN where the UE is currently located as specified in in 3GPP TS 29.512 [8], the PCF may include within the QosNotificationControlInfo data structure the \"altSerReqNotSuppInd\" attribute set to true. When the Alternative QoS profiles are supported by the NG-RAN where the UE is currently located, the PCF may omit or set the \"altSerReqNotSuppInd\" attribute to false, as indicated by the SMF.\nIf \"MediaComponentVersioning\" feature is supported, and if the content version was included when the corresponding media component was provisioned, the \"flows\" attribute shall also contain the \"contVers\" attribute including the content version(s) of the media components. The PCF shall include more than one entry in the \"contVers\" attribute for the same media component if the PCF has received multiple content versions as described in clause 4.2.6.2.14 in 3GPP TS 29.512 [8].\nWhen the NF service consumer receives the HTTP POST request, it shall acknowledge the request by sending a \"204 No Content\" response to the PCF. The NF service consumer may also update the AF application session context information by sending an HTTP PATCH request to the PCF.\nSignalling flows for Service Data Flow QoS notification control are presented in 3GPP TS 29.513 [7].\nWhen the PCF gets the knowledge that one or more SDFs have been deactivated, the PCF shall inform the NF service consumer accordingly if the NF service consumer has previously subscribed as described in clauses 4.2.2.7 and 4.2.3.7.\nWhen not all the service data flows within the AF application session context are affected, the PCF shall notify the NF service consumer by including the \"EventsNotification\" data type in the body of the HTTP POST request as described in clause 4.2.5.2.\nThe PCF shall include within the \"evNotifs\" attribute an event of \"AfEventNotification\" data type indicating the matched event (\"FAILED_RESOURCES_ALLOCATION\" if the resources could not be allocated or \"UE_TEMPORARILY_UNAVAILABLE\" if the UE was temporarily unavailable) in the \"event\" attribute and the deactivated service data flows (if not all the flows are affected) encoded in the \"flows\" attribute.\nNOTE 1:\tIf the PCF detects that the PCC rules related to an AF application session context cannot be installed or modified because there is a temporary network failure (e.g. SGW failed according to clause B.3.3.3 or B.3.4.9 of 3GPP TS 29.512 [8]) and if requested by the AF, the PCF can notify the AF of the event \"FAILED_RESOURCES_ALLOCATION\".\nIf the \"MediaComponentVersioning\" feature is supported, and if the content version was included when the corresponding media component was provisioned as described in clause 4.2.5.8, the PCF shall also include in the \"flows\" attribute the \"contVers\" attribute with the content version(s) of the media components.\nIf the \"RAN-NAS-Cause\" feature is supported and the PCF received the RAN-NAS release cause and access network information from the SMF, the PCF shall provide in the \"EventsNotification\" data type of the HTTP POST request:\n-\tin case of 3GPP access, the user location information in the \"eutraLocation\" or in the \"nrLocation\" attribute in the \"ueLoc\" attribute, if available;\n-\tin case of untrusted non-3GPP access, the user location information in the \"n3gaLocation\" attribute in the \"ueLoc\" attribute, if available, as follows:\na)\tthe user local IP address in the \"ueIpv4Addr\" or \"ueIpv6Addr\" attribute;\nb)\tthe UDP source port or the TCP source port in the \"portNumber\" and \"protocol\" attributes, if available; and\nc)\tif the \"WLAN_Location\" feature is supported, the WLAN location information encoded in the \"twapId\" attribute, if available, that shall consist of:\ni.\tthe SSID in the \"ssId\" attribute;\nii.\tthe BSSID the \"bssId\" attribute if available; and\niii.\tthe civic address in the \"civicAddress\" attribute if available;\nNOTE 2:\tWhen the UE reaches the ePDG via a NAT, the combination of UE local IP address and the UE source port is needed for lawful interception purposes. The UE source port may be either a UDP or a TCP port, and it is indicated in the \"protocol\" attribute.\n-\tin case of trusted non-3GPP access, the user location information in the \"n3gaLocation\" attribute in the \"ueLoc\" attribute, if available, as follows:\na)\tthe user local IP address in the \"ueIpv4Addr\" or \"ueIpv6Addr\" attribute, if available; and\nb)\tthe UDP source port in the \"portNumber\" attribute if available; and\nNOTE 3:\tThe UDP protocol can be used between the UE and the TNGF to enable NAT traversal.\nc)\teither the TNAP identifier encoded in the \"tnapId\" attribute or the TWAP identifier encoded in the \"twapId\" attribute. The TNAP identifier and the TWAP identifier shall consist of:\ni.\tthe SSID in the \"ssId\" attribute;\nii.\tthe BSSID the \"bssId\" attribute if available; and\niii.\tthe civic address in the \"civicAddress\" attribute if available;\n-\tthe serving network identity i.e. the PLMN Identifier (the PLMN network code and the country code) or the SNPN Identifier (the PLMN Identifier and the NID) in the \"plmnId\" attribute, if user location information is not available in any access;\n-\tthe UE timezone in the \"ueTimeZone\" attribute if available; and\n-\tthe RAN and/or NAS release cause in the \"ranNasRelCauses\" attribute, if available.\nNOTE 4:\tThe PCF forwards both 3GPP and non-3GPP access UE locations in the \"ueLoc\" attribute when both UE locations are provided by the SMF as defined in 3GPP TS 29.512 [8].\nThe PCF shall include in the \"evNotifs\" attribute, together with the event \"FAILED_RESOURCES_ALLOCATION\", an event of the \"AfEventNotification\" data type with the \"event\" attribute set to the value \"RAN_NAS_CAUSE\".\nThe PCF shall include more than one entry in the \"contVers\" attribute for the same media component if the PCF has received multiple content versions as described in clause 4.2.6.2.14 in 3GPP TS 29.512 [8].\nWhen the NF service consumer receives the HTTP POST request, it shall acknowledge the request by sending a \"204 No Content\" response to the PCF. The NF service consumer may also update the AF application session context information by sending an HTTP PATCH request to the PCF.\nWhen all the service data flows within the AF session are affected, the PCF shall inform the NF service consumer by sending a notification about application session context termination as defined in clause 4.2.5.3.\nSignalling flows for Service Data Flow Deactivation cases are presented in 3GPP TS 29.513 [7].\nWhen \"SponsoredConnectivity\" is supported, the NF service consumer enabled sponsored data connectivity and the NF service consumer provided usage thresholds for such sponsor to the PCF, the PCF shall report accumulated usage to the NF service consumer using the Npcf_PolicyAuthorization_Notify service operation when:\n-\tthe PCF detects that the usage threshold provided by the NF service consumer has been reached; or\n-\tthe NF service consumer disables the sponsored data connectivity.\nThe PCF shall notify the NF service consumer of the accumulated usage by including the \"EventsNotification\" data type in the body of the HTTP POST request as described in clause 4.2.5.2.\nThe PCF shall include:\n-\tan event of the \"AfEventNotification\" data type in the \"evNotifs\" attribute with the matched event \"USAGE_REPORT\" in the \"event\" attribute; and\n-\tthe accumulated usage, corresponding to the usage since the last report to the AF, encoded in the \"usgRep\" attribute.\nWhen the NF service consumer receives the HTTP POST request, it shall acknowledge the request by sending a \"204 No Content\" response to the PCF. The NF service consumer may terminate the AF session sending an HTTP POST as described in clause 4.2.4.2 or update the AF application session context information by providing a new usage threshold sending an HTTP PATCH request to the PCF as described in clause 4.2.3.5 or an HTTP PUT request to the PCF as described in clause 4.2.6.4.\nNOTE:\tOnce the accumulated usage is reported by the PCF to the AF, the monitoring will not start until the PCF receives the new threshold from the NF service consumer and provides it to the SMF.\n\nWhen the PCF becomes aware that the resources associated to service information for one or more SDFs have been allocated, the PCF shall inform the NF service consumer accordingly if the NF service consumer has previously subscribed to the \"SUCCESSFUL_RESOURCES_ALLOCATION\" event as described in clauses 4.2.2.10 and 4.2.3.10. The PCF shall notify the NF service consumer by including the \"EventsNotification\" data type in the body of the HTTP POST request as described in clause 4.2.5.2. The PCF shall include in the \"evNotifs\" attribute an entry with the \"event\" attribute set to \"SUCCESSFUL_RESOURCES_ALLOCATION\" and (if not all the flows are affected) the identification of the related media components in the \"flows\" attribute. If the \"MediaComponentVersioning\" feature is supported, the PCF shall also include in the \"flows\" attribute the \"contVers\" attribute with the content version(s) of the media components if the content version was included when the corresponding media component was provisioned.\nIf the \"AuthorizationWithRequiredQoS\" feature or the \"AltSerReqsWithIndQoS\" feature as defined in clause 5.8 is supported, when the PCF becomes aware that the resources associated to service information for one or more SDFs have been allocated and additionally receives the alternative QoS parameter set(s), the PCF shall notify the NF service consumer by including the \"EventsNotification\" data type in the body of the HTTP POST request as described in clause 4.2.5.2. The PCF shall include:\n-\tan entry in the \"evNotifs\" attribute with the \"event\" attribute set to \"SUCCESSFUL_RESOURCES_ALLOCATION\"; and\n-\tthe \"succResourcAllocReports\" attribute with the reference to the Alternative Service Requirement corresponding alternative QoS parameter set within the \"altSerReq\" attribute and the identification of the related media components in the \"flows\" attribute. If the \"MediaComponentVersioning\" feature is supported, the PCF shall also include in the \"flows\" attribute the \"contVers\" attribute with the content version(s) of the media components if the content version was included when the corresponding media component was provisioned.\nWhen the PCF becomes aware that the resources associated to service information for one or more SDFs cannot be allocated, the PCF shall inform the NF service consumer accordingly if the NF service consumer has previously subscribed to the \"FAILED_RESOURCES_ALLOCATION\" event as described in clauses 4.2.2.10 and 4.2.3.10. The PCF shall notify the NF service consumer by including the \"EventsNotification\" data type in the body of the HTTP POST request as described in clause 4.2.5.2. The PCF shall include:\n-\tan entry in the \"evNotifs\" attribute with the \"event\" attribute set to \"FAILED_RESOURCES_ALLOCATION\"; and\n-\tthe \"failedResourcAllocReports\" attribute with the active/inactive status of the PCC rules related to certain media components encoded in the \"mcResourcStatus\" attribute, and (if not all the flows are affected) the identification of the related media components in the \"flows\" attribute. If the \"MediaComponentVersioning\" feature is supported, the PCF shall also include in the \"flows\" attribute the \"contVers\" attribute with the content version(s) of the media components if the content version was included when the corresponding media component was provisioned.\nWhen the feature \"UEUnreachable\" is supported and if the PCF becomes aware that the UE is temporarily unavailable and thus the resources associated to service information for one or more SDFs are not allocated, the PCF shall inform the NF service consumer accordingly if the NF service consumer has previously subscribed to the \"UE_TEMPORARILY_UNAVAILABLE\" event as described in clauses 4.2.2.10 and 4.2.3.10. The PCF shall notify the NF service consumer by including the \"EventsNotification\" data type in the body of the HTTP POST request as described in clause 4.2.5.2. The PCF shall include:\n-\tan entry in the \"evNotifs\" attribute with the \"event\" attribute set to \"UE_TEMPORARILY_UNAVAILABLE\",\n-\tthe \"failedResourcAllocReports\" attribute with the active/inactive status of the PCC rules related to certain media components encoded in the \"mcResourcStatus\" attribute, and (if not all the flows are affected) the identification of the related media components in the \"flows\" attribute. If the \"MediaComponentVersioning\" feature is supported, the PCF shall also include in the \"flows\" attribute the \"contVers\" attribute with the content version(s) of the media components if the content version was included when the corresponding media component was provisioned; and\n-\tthe \"retryAfter\" attribute if this information was received from the SMF.\nThe PCF shall include more than one entry in the \"contVers\" attribute for the same media component if the PCF has received multiple content versions as described in clause 4.2.6.2.14 in 3GPP TS 29.512 [8].\nNOTE:\tThe NF service consumer will use the content version to identify the media component version that failed or succeeded when multiple provisions of the same media component occur in a short period of time. How the NF service consumer handles such situations is out of scope of this specification.\nWhen the NF service consumer receives the HTTP POST request, it shall acknowledge the request by sending a \"204 No Content\" response to the PCF.\nSignalling flows for resource allocation outcome are presented in 3GPP TS 29.513 [7].\n\nWhen the PCF is notified of the loss or release of resources associated to the PCC rules corresponding with AF signalling IP flows, the PCF shall inform the NF service consumer about the loss of the signalling transmission path if the NF service consumer has previously subscribed as described in clause 4.2.6.7.\nThe PCF shall notify the NF service consumer by including the \"EventsNotification\" data type in the body of the HTTP POST request as described in clause 4.2.5.2.\nThe PCF shall include within the \"evNotifs\" attribute an event of \"AfEventNotification\" data type indicating the matched event \"FAILED_RESOURCES_ALLOCATION\" in the \"event\" attribute and the deactivated IP flow encoded in the \"flows\" attribute.\nIf the \"RAN-NAS-Cause\" feature is supported and the PCF received the RAN-NAS release cause and/or access network information from the SMF, the PCF shall provide in the \"EventsNotification\" data type in the \"200 OK\" response to the HTTP POST request:\n-\tin case of 3GPP access, the user location information in the \"eutraLocation\" or in the \"nrLocation\" attribute in the \"ueLoc\" attribute, if available;\n-\tin case of untrusted non-3GPP access, the user location information in the \"n3gaLocation\" attribute in the \"ueLoc\" attribute, if available, as follows:\na)\tthe user local IP address in the \"ueIpv4Addr\" or \"ueIpv6Addr\" attribute; and\nb)\tthe UDP source port or the TCP source port in the \"portNumber\" and \"protocol\" attributes, if available; and\nc)\tif the \"WLAN_Location\" feature is supported, the WLAN location information encoded in the \"twapId\" attribute, if available, that shall consist of:\ni.\tthe SSID in the \"ssId\" attribute;\nii.\tthe BSSID the \"bssId\" attribute if available; and\niii.\tthe civic address in the \"civicAddress\" attribute if available;\nNOTE 1:\tWhen the UE reaches the ePDG via a NAT, the combination of UE local IP address and the UE source port is needed for lawful interception purposes. The UE source port may be either a UDP or a TCP port, and it is indicated in the \"protocol\" attribute.\n-\tin case of trusted non-3GPP access, the user location information in the \"n3gaLocation\" attribute in the \"ueLoc\" attribute, if available, as follows:\na)\tthe user local IP address in the \"ueIpv4Addr\" or \"ueIpv6Addr\" attribute, if available; and\nb)\tthe UDP source port in the \"portNumber\" attribute if available; and\nNOTE 2:\tThe UDP protocol can be used between the UE and the TNGF to enable NAT traversal.\nc)\teither the TNAP identifier encoded in the \"tnapId\" attribute or the TWAP identifier encoded in the \"twapId\" attribute. The TNAP identifier and the TWAP identifier shall consist of:\ni.\tthe SSID in the \"ssId\" attribute;\nii.\tthe BSSID the \"bssId\" attribute if available; and\niii.\tthe civic address in the \"civicAddress\" attribute if available;\n-\tthe serving network identity i.e. the PLMN Identifier (the PLMN network code and the country code) or the SNPN Identifier (the PLMN Identifier and the NID) in the \"plmnId\" attribute, if user location information is not available in any access;\n-\tthe UE timezone in the \"ueTimeZone\" attribute if available; and\n-\tthe RAN and/or NAS release cause in the \"ranNasRelCauses\" attribute, if available.\nNOTE 3:\tThe PCF forwards both 3GPP and non-3GPP access UE locations in the \"ueLoc\" attribute when both UE locations are provided by the SMF as defined in 3GPP TS 29.512 [8].\nThe PCF shall include in the \"evNotifs\" attribute, together with the event \"FAILED_RESOURCES_ALLOCATION\", an event of the \"AfEventNotification\" data type with the \"event\" attribute set to the value \"RAN_NAS_CAUSE\".\nWhen the NF service consumer receives the HTTP POST request, it shall acknowledge the request by sending a \"204 No Content\" response to the PCF.\nThis procedure is used by the PCF to report the access network information (i.e. user location and/or user timezone information) to the NF service consumer when the \"NetLoc\" feature is supported.\nWhen the PCF receives the access network information from the SMF, the PCF shall include the \"EventsNotification\" data type in the body of the HTTP POST request message sent to the NF service consumer as described in clause 4.2.5.2. The PCF shall include in the \"EventsNotification\" data type:\n-\tin case of 3GPP access, the user location information in the \"eutraLocation\" or in the \"nrLocation\" attribute in the \"ueLoc\" attribute, if available and required;\n-\tin case of untrusted non-3GPP access, the user location information in the \"n3gaLocation\" attribute in the \"ueLoc\" attribute, if required, as follows:\na)\tthe user local IP address in the \"ueIpv4Addr\" or \"ueIpv6Addr\" attribute, if available;\nb)\tthe UDP source port or the TCP source port in the \"portNumber\" and \"protocol\" attributes, if available; and\nc)\tif the \"WLAN_Location\" feature is supported, the WLAN location information encoded in the \"twapId\" attribute, if available, that shall consist of:\ni.\tthe SSID in the \"ssId\" attribute;\nii.\tthe BSSID the \"bssId\" attribute if available; and\niii.\tthe civic address in the \"civicAddress\" attribute if available;\nNOTE 1:\tWhen the UE reaches the ePDG via a NAT, the combination of UE local IP address and the UE source port is needed for lawful interception purposes. The UE source port may be either a UDP or a TCP port, and it is indicated in the \"protocol\" attribute.\n-\tin case of trusted non-3GPP access, the user location information in the \"n3gaLocation\" attribute in the \"ueLoc\" attribute, if required, as follows:\na)\tthe user local IP address in the \"ueIpv4Addr\" or \"ueIpv6Addr\" attribute, if available; and\nb)\tthe UDP source port in the \"portNumber\" attribute if available; and\nNOTE 2:\tThe UDP protocol can be used between the UE and the TNGF to enable NAT traversal.\nc)\teither the TNAP identifier encoded in the \"tnapId\" attribute or the TWAP identifier encoded in the \"twapId\" attribute. The TNAP identifier and the TWAP identifier shall consist of:\ni.\tthe SSID in the \"ssId\" attribute;\nii.\tthe BSSID the \"bssId\" attribute if available; and\niii.\tthe civic address in the \"civicAddress\" attribute if available;\n-\tif user location was required, the time when it was last known in the \"ueLocTime\" attribute if available;\nNOTE 3:\tThe PCF derives the value of the \"ueLocTime\" attribute from the \"userLocationInfoTime\" attribute received from the SMF as specified in 3GPP TS 29.512 [8].\n-\tthe serving network identity i.e. the PLMN Identifier (the PLMN network code and the country code) or the SNPN Identifier (the PLMN Identifier and the NID) in the \"plmnId\" attribute, if user location information is required but not available in any access; and/or\n-\tthe UE timezone in the \"ueTimeZone\" attribute if required and available.\nNOTE 4:\tThe PCF forwards both 3GPP and non-3GPP access UE locations in the \"ueLoc\" attribute when both UE locations are provided by the SMF as defined in 3GPP TS 29.512 [8].\nWhen the PCF receives from the SMF that the access network does not support access network information report, the PCF shall include the \"noNetLocSupp\" attribute set to \"ANR_NOT_SUPPORTED\", \"TZR_NOT_SUPPORTED\" or \"LOC_NOT_SUPPORTED\" value received from the SMF in the \"EventsNotification\" data type in the \"200 OK\" response to the HTTP POST request.\nThe PCF shall also include an event of the \"AfEventNotification\" data type in the \"evNotifs\" attribute with the \"event\" attribute set to the value \"ANI_REPORT\".\nNOTE 5:\tThe PCF receives the access network information from the SMF if it is previously requested by the NF service consumer or at PDU session termination or at the termination of all the service data flows of the AF session.\nThe PCF shall not invoke the Npcf_PolicyAuthorization_Notify service operation with the \"event\" attribute set to the value \"ANI_REPORT\" to report to the NF service consumer any subsequently received access network information, unless the NF service consumer sends a new request for access network information.\nIf the \"IMS_SBI\" feature is supported and if the PCF becomes aware that there is no credit available in the CHF for one or more SDFs, the PCF shall inform the NF service consumer accordingly if the NF service consumer has previously subscribed to the \"OUT_OF_CREDIT\" event as described in clauses 4.2.2.22 and 4.2.3.22.\nThe PCF shall notify the NF service consumer by including the \"EventsNotification\" data type in the body of the HTTP POST request as described in clause 4.2.5.2.\nThe PCF shall include:\n-\tin the \"evNotifs\" attribute an entry with the \"event\" attribute set to the value \"OUT_OF_CREDIT\"; and\n-\tthe \"outOfCredReports\" attribute containing in each entry of the \"OutOfCreditInformation\" data type the credit information for one or more service data flows. The \"OutOfCreditInformation\" data type shall contain the termination action in the \"finUnitAct\" attribute, and the identification of the affected service data flows (if not all the flows are affected) encoded in the \"flows\" attribute.\nUpon the reception of the HTTP POST request from the PCF, the NF service consumer shall acknowledge that request by sending an HTTP response message as described in clause 4.2.5.2.\nDuring the lifetime of a PDU session enabling Time Sensitive Communication, Time Synchronization and/or Deterministic Networking, the SMF may send to the PCF TSC user plane node management information of the UPF/NW-TT within a UMIC and/or, when the DS-TT or the NW-TT functions are used, a PMIC from the DS-TT port and/or one or more PMIC(s) from the one or more NW-TT ports.\nIf the \"TimeSensitiveNetworking\" or \"TimeSensitiveCommunication\"feature is supported and if the PCF becomes aware that updated TSC user plane node information is available, e.g., a UMIC and/or PMIC(s) have been received, for the SM Policy Association bound to the Individual Application Session Context resource,, the PCF shall inform the NF service consumer (i.e., the TSN AF or the TSCTSF) accordingly, if the NF service consumer has previously subscribed as described in clause 4.2.2.31.\nThe PCF shall notify the NF service consumer by including the \"EventsNotification\" data type in the body of the HTTP POST request as described in clause 4.2.5.2.\nThe PCF shall include in the \"evNotifs\" attribute an entry with the \"event\" attribute set to the value \"TSN_BRIDGE_INFO\", and the \"tsnBridgeManCont\" attribute and/or the \"tsnPortManContDstt\" attribute and/or the \"tsnPortManContNwtts\" attribute as received from the SMF if the PCF is aware that a UMIC and/or a DS-TT PMIC and/or one or more NW-TT PMIC(s) are available or updated.\nUpon the reception of the HTTP POST request from the PCF, the NF service consumer shall acknowledge that request as specified in clause 4.2.5.2.\nThe NF service consumer may use the received UMIC and/or the received DS-TT PMIC and/or NW-TT PMIC(s) and the local configuration to construct the DS-TT port and or NW-TT port management information required to interwork with the external network (e.g. TSN).\nIf port management information shall be sent as a response of the received notification, the NF service consumer triggers the Npcf_PolicyAuthorization_Update service operation to send the port management information to the PCF as specified in clause 4.2.3. The NF service consumer delivers to the PCF the derived port management information containers as described in clause 4.2.3.25.\nAnd/or if TSC user plane node management information shall be sent as a response of the received notification, the NF service consumer includes the UMIC in the Npcf_PolicyAuthorization_Update service operation as described in clause 4.2.3.25.\nWhen the PCF gets the information about real-time measurements of QoS parameters for one or more SDFs from the SMF (e.g. for QoS monitoring for packet delay, uplink packet delay(s), downlink packet delay(s) and/or round trip delay(s) or if the feature \"PacketDelayFailureReport\" is supported, indicator of packet delay measurement failure) the PCF shall inform the NF service consumer accordingly if the NF service consumer has previously subscribed as described in clauses 4.2.2.23 and 4.2.3.23 and 4.2.6.8.\nThe PCF shall notify the NF service consumer of the QoS monitoring events by including the \"EventsNotification\" data type in the body of the HTTP POST request as described in clause 4.2.5.2.\nThe PCF shall include:\n-\twithin the \"evNotifs\" attribute an event entry of the \"AfEventNotification\" data type with the matched event \"QOS_MONITORING\" in the \"event\" attribute; and\n-\tfor QoS monitoring for packet delay, the \"qosMonReports\" array with:\na)\t\tthe identification of the affected service flows (if not all the flows are affected) encoded in the \"flows\" attribute if applicable; and, for QoS monitoring for packet delay:\nb)\tone or two uplink packet delays within the \"ulDelays\" attribute;\nc)\tone or two downlink packet delays within the \"dlDelays\" attribute;\nd)\tone or two round trip packet delays within the \"rtDelays\" attribute; and/or\ne)\tif the feature \"PacketDelayFailureReport\" is supported, the packet delay measurement failure indicator within the\"pdmf\" attribute;\n-\tif the feature \"EnQoSMon\" is supported, to report data rate measurements, the \"qosMonDatRateReps\" array with:\na)\t\tthe identification of the affected service flows (if not all the flows are affected) encoded in the \"flows\" attribute if applicable;\nb)\tone data rate measurement for the UL within the \"ulDataRate\" attribute; and/or\nc)\tone data rate measurement for the DL within the \"dlDataRate\" attribute.\nEditor’s note:\tWhether Data Rate monitoring requires the report of the maximum and minimum calculated during the waiting time is FFS.\n-\tif the feature \"EnQoSMon\" is supported, for QoS monitoring for congestion information, the \"congestReports\" array with:\na)\t\tthe identification of the affected service flows (if not all the flows are affected) encoded in the \"flows\" attribute if applicable; and\nb)\tthe uplink congestion information measurement(s) within the \"ulConInfo\" attribute;\nc)\tthe downlink congestion information measurement(s) within the \"dlConInfo\" attribute; or\nd)\tthe congestion information measurement failure indicator within the\"cimf\" attribute.\n\nWhen \"EPSFallbackReport\" feature is supported and the PCF becomes aware of the EPS Fallback for the resources requested for a particular service information (voice media type), the PCF shall inform the NF service consumer if the NF service consumer has previously subscribed as described in clauses 4.2.2.30 and 4.2.3.29.\nThe PCF shall notify the NF service consumer by including the \"EventsNotification\" data type in the body of the HTTP POST request as described in clause 4.2.5.2.\nThe PCF shall include within the \"evNotifs\" attribute an event entry of the \"AfEventNotification\" data type with the matched event \"EPS_FALLBACK\" in the \"event\" attribute.\nWhen the NF service consumer receives the HTTP POST request, it shall acknowledge the request by sending a \"204 No Content\" response to the PCF.\nDuring PDU session establishment of a PDU session enabling Time Sensitive Communications, Time Synchronization and Deterministic Networking, the PCF may receive from the SMF TSC user plane node information as specified in clauses 4.2.2.19 and 4.2.3.23 of 3GPP TS 29.512 [8].\nIf the \"TimeSensitiveNetworking\" or \"TimeSensitiveCommunication\" feature is supported and if the PCF becomes aware that TSC user plane node information for an external network (e.g. TSN) is available, but there is no \"Individual Application Session Context\" resource bound to the SM Policy Association updated with TSC user plane node related information, the PCF shall inform the NF service consumer (i.e. TSN AF or TSCTSF) about the detection of a TSC user plane node information in the context of a PDU session by sending a notification request:\n-\tto the request URI locally configured in the PCF for the NF service consumer; or\n-\tif the request URI for the TSCTSF is not locally configured in the PCF, to the notification URI registered by the TSCTSF in the NRF as default notification subscription for time sensitive communication, time synchronization and deterministic networking notifications, and retrieved from NRF by the PCF using the discovery service, as specified in 3GPP TS 29.510[27] for the PDU session DNN/S-NSSAI.\nNOTE 1:\tPCF configuration of TSN AF needs to ensure that the notification is addressed to a TSN AF that connects to the same external network the UPF/NW-TT connects to. How it is achieved is implementation specific. It can be based e.g. on dedicated DNN/S-NSSAI combinations or on the received TSC user plane node information.\nNOTE 2:\tIt is assumed that there is only one TSCTSF for a given DNN/S-NSSAI in this release of the specification.\nFigure 4.2.5.16-1 illustrates the notification about TSC user plane node information when there is no Individual Application Session Context bound to the SM Policy Association.\n\nThe figure depicts a notification about TSC user plane node information, indicating that no AF session context exists.\nFigure 4.2.5.16-1: Notification about TSC user plane node Information, no AF session context exists\nWhen the PCF determines that the AF application session context does not exist for the SM Policy Association that detected new port information and a notification URI for the NF service consumer can be determined, the PCF shall invoke the Npcf_PolicyAuthorization_Notify service operation by sending the HTTP POST request (as shown in figure 4.2.5.16-1, step 1) using the notification URI locally configured in the PCF or, retrieved from NRF, and appending the \"new-bridge\" segment path at the end of the URI, to trigger the NF service consumer (i.e. TSN AF or TSCTSF) to request the creation of an Individual Application Session Context resource to handle the TSC user plane node detected in the context of a PDU session, configuring ports and TSC user plane node management information, and providing the corresponding TSCAI input containers and TSC traffic QoS related data (see clauses 4.2.2.2, 4.2.2.24, 4.2.2.25 and 4.2.2.31).\nThe PCF shall provide in the body of the HTTP POST request the \"PduSessionTsnBridge\" data type including TSC user plane node information as follows:\n-\tthe \"tsnBridgeInfo\" attribute as received from the SMF;\n-\twhen DS-TT and/or NW-TT functionality is used, the \"tsnPortManContDstt\" attribute and/or \"tsnPortManContNwtts\" attribute as received from the SMF, if available;\n-\tin case of Deterministic Networking, for the device side port, and if the \"MTU_Size\" feature is supported, the MTU size for IPv4 and the MTU size for IPv6 encoded in the \"mtuIpv4\" and \"mtuIpv6\" attributes respectively, if available; and\n-\twhen the \"TimeSensitiveCommunication\" feature is supported and for a PDU session of IP type, the UE IPv4 address within the \"ueIpv4Addr\" attribute or the UE IPv6 prefix within the \"ueIpv6AddrPrefix\", the DNN within the \"dnn\" attribute, the S-NSSAI within the \"snssai\" attribute and, if available, the domain identity within the \"ipDomain\" attribute if UE IPv4 address is provided.\nNOTE 3:\tIn the case of IP overlapping, the DNN, S-NSSAI and domain identity, if available, are required for session binding in the PCF. Domain identity applies as defined in clause 4.2.2.2.\nUpon the reception of the HTTP POST request from the PCF, the NF service consumer shall acknowledge that request.\nWith the received information, the NF service consumer (i.e. TSN AF or TSCTSF) shall immediately trigger the creation of an Individual Application Session Context resource to handle in this association the configuration of the new TSC user plane node in the context of this PDU session, as described in clauses 4.2.2.2, 4.2.2.24, 4.2.2.25 and 4.2.2.31.\nNOTE 4:\tFor the time synchronization service, the subscription to UE availability for time-synchronization service can occur after the PDU Session establishment has been completed in 5GS. Similarly, for the AF session with required QoS, the indication of the required QoS and TSC Assistance Container information can occur after the completion of the PDU session establishment. In such cases, the PCF sends the notification to the TSCTSF about the detection of a TSC user plane node information during PDU session establishment, and the TSCTSF could defer the creation of the related \"Individual Application Session Context\" till the reception of the subscription to UE availability for time synchronization or the AF session with required QoS occurs, as specified in 3GPP TS 29.513[7].\nThe NF service consumer (i.e. TSN AF or TSCTSF) may use the received TSC user plane node information and/or the received DS-TT port management information container and/or NW-TT port management information containers and the local configuration to construct the DS-TT port and or NW-TT port management information required to interwork with the external network.\nIf the \"IMS_SBI\" and the \"ReallocationOfCredit\" features are supported and if the PCF becomes aware that there is credit reallocated for one or more SDFs after a former out of credit indication, the PCF shall inform the NF service consumer accordingly if the NF service consumer has previously subscribed to the \"REALLOCATION_OF_CREDIT\" event as described in clauses 4.2.2.34 and 4.2.3.32.\nThe PCF shall notify the NF service consumer by including the \"EventsNotification\" data type in the body of the HTTP POST request as described in clause 4.2.5.2.\nThe PCF shall include in the \"evNotifs\" attribute an entry with:\n-\tthe \"event\" attribute set to the value \"REALLOCATION_OF_CREDIT\"; and\n-\tthe SDFs that are impacted as consequence of the reallocation of credit condition encoded in the \"flows\" attribute.\nUpon the reception of the HTTP POST request from the PCF, the NF service consumer shall acknowledge that request by sending an HTTP response message as described in clause 4.2.5.2.\nWhen the MPSforDTS feature is supported and the PCF is informed about the successful default QoS update, the PCF shall notify the NF service consumer as described in clause 4.2.5.2, if the NF service consumer has previously subscribed to the \"SUCCESSFUL_QOS_UPDATE\" event as described in clauses 4.2.2.12.2 and 4.2.3.12. The PCF shall notify the NF service consumer by including within the \"evNotifs\" attribute, an entry with the \"event\" attribute set to \"SUCCESSFUL_QOS_UPDATE\".\nWhen the MPSforDTS feature is supported and the PCF is informed about the failure of a default QoS update, the PCF shall notify the NF service consumer as described in clause 4.2.5.2, if the NF service consumer has previously subscribed to the \"FAILED_QOS_UPDATE\" event as described in clauses 4.2.2.12.2 and 4.2.3.12. The PCF shall notify the NF service consumer by including within the \"evNotifs\" attribute, an entry with the \"event\" attribute set to \"FAILED_QOS_UPDATE\".\nWhen the \"ApplicationDetectionEvents\" feature is supported, when the PCF gets the knowledge that the traffic of the indicated application started or stopped, the PCF shall inform the NF service consumer accordingly if the NF service consumer has previously subscribed as described in clauses 4.2.6.9.\nThe PCF shall notify the NF service consumer by including the \"EventsNotification\" data type in the body of the HTTP POST request as described in clause 4.2.5.2.\nThe PCF shall include, for the detected application(s)'s traffic:\n-\twithin the \"evNotifs\" attribute an event entry of the \"AfEventNotification\" data type with the matched event \"APP_DETECTION\" in the \"event\" attribute; and\n-\tthe \"adReports\" array, which for each detected application's traffic shall include:\na)\tthe \"adNotifType\" attribute to indicate whether the detection is about the start of the application's traffic encoded as the \"APP_START\" value, or about the stop of the application's traffic encoded as the \"APP_STOP\" value; and\nb)\t\tthe application identifier within the \"afAppId\" attribute.\nWhen the NF service consumer receives the HTTP POST request, it shall acknowledge the request by sending a \"204 No Content\" response to the PCF.\nSignalling flows for the notification of application detection information are presented in 3GPP TS 29.513 [7].\nNOTE:\tWhen the NF service consumer receives the notifications for multiple applications, the NF service consumer (e.g. the PCF for the UE) can determine which logic to apply (e.g. which AM policy to apply) based on local configuration and operator policy.\nIn this release of the specification application detection applies only to the application(s) with IP traffic.\nWhen the PCF gets the knowledge that there is a change of the backhaul used for the PDU session between satellite backhaul categories  or between a satellite and a non-satellite backhaul category, the PCF shall inform the NF service consumer accordingly if the NF service consumer has previously subscribed as described in clauses 4.2.2.35 and 4.2.3.33 and 4.2.6.10.\nThe PCF shall notify the NF service consumer by including the \"EventsNotification\" data type in the body of the HTTP POST request as described in clause 4.2.5.2.\nWhen the \"SatelliteBackhaul\" feature is supported, the PCF shall include within the \"evNotifs\" attribute an event entry of the \"AfEventNotification\" data type with the matched event \"SAT_CATEGORY_CHG\" in the \"event\" attribute, and within the \"satBackhaulCategory\" attribute the received satellite backhaul category  or the indication of non-satellite backhaul.When the \"EnSatBackhaulCatChg\" feature is supported and the PCF received the dynamic satellite backhaul category, the PCF shall include the dynamic satellite backhaul category within the \"satBackhaulCategory\" attribute.\nWhen the NF service consumer receives the HTTP POST request, it shall acknowledge the request by sending a \"204 No Content\" response to the PCF. The NF service consumer may also update the AF application session context information by sending an HTTP PATCH request to the PCF.\nIf the \"RoutingReqOutcome\" feature is supported and if the PCF becomes aware that the enforcement of the UP path change fails (as specified in clause 4.2.6.2.6.2 of 3GPP TS 29.512 [8]), the PCF shall inform the NF service consumer accordingly if the NF service consumer has previously subscribed to the \"UP_PATH_CHG_FAILURE\" event as described in clauses 4.2.2.8 and 4.2.3.8.\nThe PCF shall notify the NF service consumer by including the \"EventsNotification\" data type in the body of the HTTP POST request as described in clause 4.2.5.2.\nThe PCF shall include in the \"evNotifs\" attribute an entry with the \"event\" attribute set to the value \"UP_PATH_CHG_FAILURE\".\nUpon the reception of the HTTP POST request from the PCF, the NF service consumer shall acknowledge that request by sending an HTTP response message as described in clause 4.2.5.2.\nIf the PCF becomes aware that the SM Policy Association contains the callback URI of the PCF for a UE then, the PCF shall inform the NF service consumer (i.e. the PCF for a UE) about:\n-\tthe PDU session establishment, when the PCF receives the callback URI of the PCF for a UE from the SMF; and\n-\tthe PDU session termination, when the PCF receives the SM Policy Association termination from the SMF;\nby sending a notification request to the received callback URI of the PCF for a UE.\nFigure 4.2.5.22-1 illustrates the notification about PDU session established/terminated events.\n\nThe figure depicts a notification about PDU session established/terminated events, with a detailed breakdown of the events and their respective PDU identifiers.\nFigure 4.2.5.22-1: Notification about PDU session established/terminated events\nWhen the PCF becomes aware that a SM Policy Association is receiving the callback URI of the PCF for a UE, or becomes aware that the SM Policy Association that is terminating contains the callback URI of the PCF for a UE, the PCF shall invoke the Npcf_PolicyAuthorization_Notify service operation by sending an HTTP POST request (as shown in figure 4.2.5.22-1, step 1) using the callback URI contained in the SM Policy Association and appending the \"pdu-session\" path segment at the end of the URI.\nNOTE:\tThe PCF includes in the notification request a Routing Binding Indication as specified in 3GPP TS 29.500 [5], clause 6.12 if an SBA binding indication relative to the PCF for a UE is available in the SM Policy Association together with the callback URI of the PCF for a UE.\nThe PCF shall provide in the body of the HTTP POST request the PduSessionEventNotification data type, which shall include an indication of PDU session establishment/termination as follows:\n-\tthe \"evNotif\" attribute, of \"AfEventNotification\" data type, which shall include the \"PDU_SESSION_STATUS\" event within the \"event\" attribute;\n-\tthe SUPI of the PDU session within the \"supi\" attribute;\n-\tthe served UE address as the identification of the reported PDU session:\ni.\tfor IP type PDU sessions, the IP address (IPv4 or IPv6) of the UE in the \"ueIpv4\" or \"ueIpv6\" attribute; and\nii.\tfor Ethernet type PDU sessions, the MAC address of the UE in the \"ueMac\" attribute;\n-\twhether the PDU session is established or terminated within the \"status\" attribute; and\n-\twhen the \"status\" attribute indicates \"ESTABLISHED\":\ni.\tthe PCF addressing information where the NF service consumer (i.e. PCF for a UE) may send the subscription request to notification about the detected application traffic in the \"pcfInfo\" attribute; and\nii.\tthe context information of the related PDU session, i.e., the DNN withing the \"dnn\" attribute, the S-NSSAI within the \"snssai\" attribute and the GPSI within the \"gpsi\" attribute, if available.\nUpon the reception of the HTTP POST request from the PCF, and if the request is accepted, the NF service consumer (i.e. PCF for a UE) shall acknowledge that request by sending an HTTP response message with a \"204 No Content\" status code as described in figure 4.2.5.22-1, step 2.\nThe NF service consumer (i.e. PCF for a UE) may use the notified PCF address(es) and SBA binding indication, if available, to subscribe with the PCF for a PDU session to the detection of application(s) traffic, as described in clause 4.2.6.9.\nWhen the \"ExtraUEaddrReport\" feature is supported, and the PCF becomes aware that the there is a change in the list of IP addresses or address ranges allocated to the PDU session due to framed routes or IPv6 prefix delegation (as described in 3GPP TS 29.512 [8], clauses 4.2.4.2 and C.3.4.1), the PCF shall inform the NF service consumer accordingly if the NF service consumer has previously subscribed to the \"EXTRA_UE_ADDR\" event as described in clauses 4.2.2.36, 4.2.3.35 and 4.2.6.12. The report shall include the actual list of IPv4 addresses or list of IPv6 prefixes as currently allocated.\nThe PCF shall notify the NF service consumer by including the \"EventsNotification\" data type in the body of the HTTP POST request as described in clause 4.2.5.2.\nThe PCF shall include in the \"evNotifs\" array an entry with the \"event\" attribute set to the value \"EXTRA_UE_ADDR\" and:\n-\tthe actual list of IPv4 addresses within the \"ipv4AddrList\" attribute, if there was a change in the one or more IPv4 framed routes associated to the PDU session; or\n-\tthe actual list of IPv6 prefixes allocated to the UE within the \"ipv6PrefixList\" attribute, if there was a change in the one or more IPv6 framed routes associated to the PDU session, or in the one or more IPv6 prefixes allocated to the PDU session.\nNOTE:\tIn this release of the specification the IP Framed Routes are received by the PCF during PDU session establishment and remain unchanged during the lifetime of the PDU session.\nUpon the reception of the HTTP POST request from the PCF, the NF service consumer shall acknowledge that request by sending an HTTP response message as described in clause 4.2.5.2.\n\n4.2.5.24\tNotification about BAT offset\nIf the \"EnTSCAC\" feature is supported, upon receiving the BAT offset and optionally the adjusted periodicity, the PCF shall inform the NF service consumer accordingly if the NF service consumer has previously subscribed to the \"BAT_OFFSET_INFO\" event as described in clauses 4.2.2.40 and 4.2.3.24.\nThe PCF shall notify the NF service consumer by including the \"EventsNotification\" data type in the body of the HTTP POST request as described in clause 4.2.5.2.\nThe PCF shall include:\n-\tin the \"evNotifs\" attribute an entry with the \"event\" attribute set to the value \"BAT_OFFSET_INFO\";\n-\tthe \"batOffsetInfo\" attribute containing the offset of the BAT and the optionally adjusted periodicity. The \"BatOffsetInfo\" data type shall contain the BAT offset of the arrival time in the \"ranBatOffsetNotif\" attribute, and the optionally adjusted periodicity of the data bursts encoded in the \"adjPeriod\" attribute; and\n-\tthe identification of the affected service flows (if not all the flows are affected) encoded in the \"flows\" attribute if applicable.\nUpon the reception of the HTTP POST request from the PCF, the NF service consumer shall acknowledge that request by sending an HTTP response message as described in clause 4.2.5.2.\nWhen the \"URSPEnforcement\" feature is supported, when the PCF gets from the UE via the SMF the report of URSP rule enforcement information from associated URSP rule(s) as defined in 3GPP TS 29.512 [8], the PCF shall inform the NF service consumer accordingly if the NF service consumer has previously subscribed as described in clause 4.2.6.14.\nThe PCF shall notify the NF service consumer by including the \"EventsNotification\" data type in the body of the HTTP POST request as described in clause 4.2.5.2.\nThe PCF shall include, for the notification about URSP rule enforcement information:\n-\twithin the \"evNotifs\" attribute an event entry of the \"AfEventNotification\" data type with the matched event \"URSP_ENF_INFO\" in the \"event\" attribute;\n-\twithin the \"urspEnfRep\" attribute, the URSP rule enforcement information received from the UE as defined in 3GPP TS 29.512 [8];\n-\tif not previously reported, the SSC mode within the \"sscMode\" attribute, the UE requested DNN, if available, within the \"ueReqDnn\" attribute, and if the PDU session is redundant, the RSN and the PDU session pair ID within the \"redundantPduSessionInfo\" attribute; and\n-\twithin the \"accessType\" attribute and \"ratType\" attribute,  the access type, if available and changed compared to the latest report.\nWhen the NF service consumer receives the HTTP POST request, it shall acknowledge the request by sending a \"204 No Content\" response to the PCF.\nSignalling flows for the notification of UE reporting of URSP rule enforcement are presented in 3GPP TS 29.513 [7].\nWhen the PCF gets the information about real-time measurements of QoS parameters for one or more SDFs from the SMF (e.g. for QoS monitoring for packet delay, uplink packet delay(s), downlink packet delay(s) and/or round trip delay(s)), the PCF calculates the uplink, downlink and/or round trip Packet Delay Variations based on the received uplink, downlink or round trip QoS Monitoring result, and reports to the NF service consumer accordingly if the NF service consumer has previously subscribed to Packet Delay Variation reports as described in clauses 4.2.2.41 and 4.2.3.40.\nThe PCF shall notify the NF service consumer of the Packet Delay Variation events by including the \"EventsNotification\" data type in the body of the HTTP POST request as described in clause 4.2.5.2.\nThe PCF shall include:\n-\twithin the \"evNotifs\" attribute an event entry of the \"AfEventNotification\" data type with the matched event \"PACK_DEL_VAR\" in the \"event\" attribute; and\n-\tthe \"pdvMonReports\" array with:\na)\t\tthe identification of the affected service flows (if not all the flows are affected) encoded in the \"flows\" attribute if applicable; and\nb)\tone or two uplink packet delay variation measurement(s) within the \"ulPdv\" attribute;\nc)\tone or two downlink packet delay variation measurement(s) within the \"dlPdv\" attribute;\nd)\tone or two round trip packet delay variation measurement(s) within the \"rtPdv\" attribute; and/or.\nEditor's note:\tWhether reporting packet delay variation errors is needed is FFS.\nWhen the \"L4S\" feature is supported, the NF service consumer provided the explicit indication of ECN marking for L4S support for the provided UL and/or DL SDF(s) as described in clauses 4.2.2.43 and 4.2.3.42, and the PCF gets the knowledge that there is a change of the 5GS support for ECN marking for L4S for the indicated SDF(s), the PCF, may notify the NF service consumer about the change of 5GS support by including the \"EventsNotification\" data type in the body of the HTTP POST request as described in clause 4.2.5.2.\nThe PCF shall include within the \"evNotifs\" attribute an event entry of the \"AfEventNotification\" data type with the matched event, \"L4S_SUPP\", in the \"event\" attribute and the \"l4sReports\" array. In each entry of the \"l4sReports\" array, the PCF shall include the indication that ECN marking for L4S is not available or is available again within the \"notifType\" attribute and the SDFs that are impacted as consequence of change of 5GS availability condition for ECN marking for L4S encoded in the \"flows\" attribute.\nWhen the NF service consumer receives the HTTP POST request, it shall acknowledge the request by sending a \"204 No Content\" response to the PCF.\nUpon receiving the delay information per flow (e.g. the UL and DL are separated into two flows) from the SMF(e.g. for QoS monitoring for packet delay, uplink packet delay(s), downlink packet delay(s) and/or round trip delay(s)), the PCF calculates the Round-Trip delay and reports to the NF service consumer accordingly if the NF service consumer has previously subscribed to RTT monitoring reports as described in clauses 4.2.2.44 and 4.2.3.43.\nThe PCF shall notify the NF service consumer of the RTT monitoring events by including the \"EventsNotification\" data type in the body of the HTTP POST request as described in clause 4.2.5.2.\nThe PCF shall include:\n-\twithin the \"evNotifs\" attribute an event entry of the \"AfEventNotification\" data type with the matched event \"RT_DELAY_TWO_QOS_FLOWS\" in the \"event\" attribute; and\n-\tthe \"qosMonReports\" array with:\na)\tone or two round trip packet delay measurement(s) within the \"rtDelays\" attribute; or\nb)\tthe packet delay measurement failure indicator within the \"pdmf\" attribute.\nEditor’s note:\tIt is FFS whether to reuse \"qosMonReports\" attribute or create a new \"rttMonReports\" attribute.\nAn NF service consumer (e.g., AF, NEF) may subscribe to event(s) reporting implicitly via the UDR as specified in 3GPP TS 29.519 [53] (see also clause 4.15.6.14 of 3GPP TS 23.502 [3] and clause 6.1.3.28 of 3GPP TS 23.503 [4]) when provisioning/updating AF requested QoS for a UE or a group of UE(s) not identified by UE address(es).\nEditor’s Note: Whether and/or how to identify the relation with a GMEC feature is FFS.This procedure is invoked by the PCF to notify the NF service consumer(s) (e.g., NEF, AF) when such previously subscribed event(s) occur.\nWhen the PCF determines that event(s) occurred (e.g., upon reception of an event notification for a PDU session from the SMF as described in 3GPP TS 29.512 [8]), the PCF shall invoke the Npcf_PolicyAuthorization_Notify service operation as described in clause 4.2.5.2 with the following differences:\na.\tThe \"{notifUri}\" variable part of the request URI of the HTTP POST request shall contain the callback URI included within the \"notifUri\" attribute contained within the \"evSubsc\" attribute of the corresponding AF Requested QoS Data obtained from the UDR as specified in 3GPP TS 29.519 [53].\nb.\tThe \"EventsNotification\" data type shall include within the \"{appSessionId}\" variable part of the \"<apiSpecificResourceUriPart>\" component (see clause 5.1) of the \"evSubsUri\" attribute, the notification correlation identifier included within the \"notifCorreId\" attribute included within the \"evSubsc\" attribute of the corresponding AF Requested QoS Data also obtained from the UDR as specified in 3GPP TS 29.519 [53].\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "4.2.6\tNpcf_PolicyAuthorization_Subscribe service operation",
                            "text_content": "The Npcf_PolicyAuthorization_Subscribe service operation enables NF service consumers handling of subscription to events for the existing application session context. Subscription to events shall be created:\n-\twithin the application session context establishment procedure by invoking the Npcf_PolicyAuthorization_Create service operation, as described in clause 4.2.2; or\n-\twithin the application session context modification procedure by invoking the Npcf_PolicyAuthorization_Update service operation, as described in clause 4.2.3; or\n-\tby invoking the Npcf_PolicyAuthorization_Subscribe service operation for the existing application session context, as described in clause 4.2.6.2.\nThe following procedures using the Npcf_PolicyAuthorization_Subscribe service operation is supported:\n-\tHandling of subscription to events for the existing application session context.\n-\tInitial subscription to events without provisioning of service information.\n-\tSubscription to usage monitoring of sponsored data connectivity.\n-\tRequest of access network information.\n-\tSubscription to notification of signalling path status.\n-\tSubscription to Service Data Flow QoS Monitoring Information.\n-\tSubscription to application detection notifications.\n-\tSubscription to satellite backhaul category changes.\n-\tSubscription to the report of extra UE addresses.\n-\tSubscription to Service Data Flow QoS Monitoring multi-modal services.\n-\tSubscription to UE reporting Connection Capabilities notification.\nThis procedure is used to create a subscription to events for the existing AF application session context bound to the corresponding PDU session or to modify an existing subscription, as defined in 3GPP TS 23.501 [2], 3GPP TS 23.502 [3] and 3GPP TS 23.503 [4].\nFigure 4.2.6.2-1 illustrates the creation of events subscription information using HTTP PUT method.\n\nThe figure depicts a detailed process of creating event subscription information using HTTP PUT, illustrating the steps involved in creating a subscription for an event. The figure includes a step-by-step guide on how to use the HTTP PUT method to send the necessary data to the server, ensuring that the event subscription is created successfully.\nFigure 4.2.6.2-1: Creation of events subscription information using HTTP PUT\nFigure 4.2.6.2-2 illustrates the modification of events subscription information using HTTP PUT method.\n\nThe figure depicts a modification of events subscription information using HTTP PUT, illustrating the process of updating the subscription information in a web-based system. The figure shows the HTTP PUT request, the response, and the modified event subscription information.\nFigure 4.2.6.2-2: Modification of events subscription information using HTTP PUT\nWhen the NF service consumer decides to create a subscription to one or more events for the existing application session context or to modify an existing subscription previously created by itself at the PCF, the NF service consumer shall invoke the Npcf_PolicyAuthorization_Subscribe service operation by sending the HTTP PUT request to the resource URI representing the \"Events Subscription\" sub-resource in the PCF, as shown in figure 4.2.6.2-1, step 1 and figure 4.2.6.2-2, step 1. The NF service consumer shall provide in the \"EventsSubscReqData\" data type of the body of the HTTP PUT request:\n-\tthe \"events\" attribute with the list of events to be subscribed; and\n-\tthe \"notifUri\" attribute that includes the Notification URI to indicate to the PCF where to send the notification of the subscribed events.\nNOTE 1:\tThe \"notifUri\" attribute within the EventsSubscReqData data structure can be modified to request that subsequent notifications are sent to a new NF service consumer.\nUpon the reception of the HTTP PUT request from the NF service consumer, the PCF shall decide whether the received HTTP PUT request is accepted.\nIf the HTTP PUT request from the NF service consumer is rejected, the PCF shall indicate in the HTTP response the cause for the rejection as specified in clause 5.7.\nIf the feature \"ES3XX\" is supported, and the PCF determines the received HTTP PUT request needs to be redirected, the PCF shall send an HTTP redirect response as specified in clause 6.10.9 of 3GPP TS 29.500 [5].\nIf the PCF accepted the HTTP PUT request to create a subscription to events, the PCF shall create the \"Events Subscription\" sub-resource and shall send the HTTP response message to the NF service consumer as shown in figure 4.2.6.2-1, step 2. The PCF shall include in the \"201 Created\" response:\n-\ta Location header field that shall contain the URI of the created \"Events Subscription\" sub-resource i.e. \"{apiRoot}/npcf-policyauthorization/v1/app-sessions/{appSessionId}/events-subscription\"; and\n-\ta response body with the \"EventsSubscPutData\" data type, that contains the attributes of the \"EventsSubscReqData\" data type, representing the created \"Events Subscription\" sub-resource.\nIf the PCF determines that one or more of the subscribed events are already met in the PCF, the PCF may also include the attributes of the \"EventsNotification\" data type within the \"EventsSubscPutData\" data type to notify about the already met events in the PCF.\nIf the PCF accepted the HTTP PUT request to modify the events subscription, the PCF shall modify the \"Events Subscription\" sub-resource and shall send to the NF service consumer:\n-\tthe HTTP \"204 No Content\" response (as shown in figure 4.2.6.2-2, step 2a); or\n-\tthe HTTP \"200 OK\" response (as shown in figure 4.2.6.2-2, step 2b) including in the \"EventsSubscPutData\" data type the updated representation of the \"Events Subscription\" sub-resource encoded within the attributes of the \"EventsSubscReqData\" data type and, if one or more of the updated subscribed events are already met in the PCF, the notification of these events by including the attributes of the \"EventsNotification\" data type.\nThe PCF shall include in the \"evsNotif\" attribute:\n-\tif the NF service consumer subscribed to the \"PLMN_CHG\" event in the HTTP PUT request, the \"event\" attribute set to \"PLMN_CHG\" and the \"plmnId\" attribute including the PLMN Identifier or the SNPN Identifie if the PCF has previously requested to be updated with this information in the SMF; and\nNOTE 2:\tThe SNPN Identifier consists of the PLMN Identifier and the NID.\nNOTE 3:\tHandover between non-equivalent SNPNs, and between SNPN and PLMN is not supported. When the UE is operating in SNPN access mode, the trigger reports changes of equivalent SNPNs.\n-\tif the NF service consumer subscribed to the \"ACCESS_TYPE_CHANGE\" event in the HTTP PUT request, the \"event\" attribute set to \"ACCESS_TYPE_CHANGE\" and:\ni.\tthe \"accessType\" attribute including the access type, and the \"ratType\" attribute including the RAT type when applicable for the notified access type; and\nii.\tif the \"ATSSS\" feature is supported, the \"addAccessInfo\" attribute with the additional access type information if available, where the access type is encoded in the \"accessType\" attribute, and the RAT type is encoded in the \"ratType\" attribute when applicable for the notified access type; and\nNOTE 4:\tFor a MA PDU session, if the \"ATSSS\" feature is not supported by the NF service consumer the PCF includes the \"accessType\" attribute and the \"ratType\" attribute with a currently active combination of access type and RAT type (when applicable for the notified access type). When both 3GPP and non-3GPP accesses are available, the PCF includes the information corresponding to the 3GPP access.\niii.\tthe \"anGwAddr\" attribute including access network gateway address when available,\nif the PCF has previously requested to be updated with this information in the SMF.\nBased on the received subscription information from the NF service consumer, the PCF may create a subscription to event notifications or may modify the existing subscription to event notifications, for a related PDU session from the SMF, as described in 3GPP TS 29.512 [8].\nThe NF service consumer may subscribe with the PCF to events notification without providing service information.\nNOTE 1:\tThis service operation is intended to create a resource that enables to handle subscription to events without provisioning service information. For the scenarios where it is known the NF service consumer, after creating a subscription without service information, could require an application session context with the PCF with required service information, the NF service consumer needs to create an Individual Application Session context as described in clause 4.2.2.2.\nFigure 4.2.6.3-1 illustrates the initial subscription to events without provisioning of service information.\n\nThe figure depicts an initial subscription to events without provisioning of service information, illustrating the process of initiating a subscription to events without the provision of service information.\nFigure 4.2.6.3-1: Initial Subscription to events without provisioning of service information\nWhen a NF service consumer establishes an application session context with the PCF to subscribe to events and does not require PCC control for the related media, the NF service consumer shall invoke the Npcf_PolicyAuthorization_Subscribe service operation by sending the HTTP POST request to the resource URI representing the \"Application Sessions\" collection resource of the PCF, as shown in figure 4.2.6.3-1, step 1.\nThe NF service consumer shall include in the \"ascReqData\" attribute of the \"AppSessionContext\" data type in the content of the HTTP POST request:\n-\teither the \"ueMac\" attribute containing the UE MAC address, or the \"ueIpv4\" attribute or \"ueIpv6\" attribute containing the UE IPv4 or the IPv6 address;\n-\tthe \"notifUri\" attribute containing the URI where the PCF shall request to the NF service consumer the deletion of the \"Individual Application Session Context\" resource\"; and\n-\tthe \"evSubsc\" attribute of \"EventsSubscReqData\" data type to request the notification of certain user plane events. The NF service consumer shall include:\na.\tthe events to subscribe to in the \"events\" attribute; and\nb.\tthe notification URI where to address the notification of the met events within the \"notifUri\" attribute.\nThe NF service consumer may provide in the \"AppSessionContext\" data type the DNN in the \"dnn\" attribute, SUPI in the \"supi\" attribute or other information if available.\nIf the PCF cannot successfully fulfil the received HTTP POST request due to the internal PCF error or due to the error in the HTTP POST request, the PCF shall send the HTTP error response as specified in clause 5.7.\nOtherwise, when the PCF receives the HTTP POST request from the NF service consumer, the PCF shall apply session binding as described in 3GPP TS 29.513 [7]. The PCF identifies the PDU session for which the HTTP POST request applies as described in clause 4.2.2.2.\nIf the PCF fails in executing session binding, the PCF shall reject the Npcf_PolicyAuthorization_Subscribe service operation with an HTTP \"500 Internal Server Error\" response including the \"cause\" attribute set to \"PDU_SESSION_NOT_AVAILABLE\".\nThe information required for session binding (UE MAC address, or UE Ipv4 or IPv6 address, DNN, SUPI and other available information, such as S-NSSAI and/or IPv4 address domain identifier) is provisioned in the \"Individual Application Session Context\" resource. The events subscription is provisioned in the \"Events Subscription\" sub-resource.\nBased on the received subscription information from the NF service consumer, the PCF may create a subscription to event notifications for a related PDU session from the SMF, as described in 3GPP TS 29.512 [8].\nIf the PCF created the \"Events Subscription\" sub-resource within the \"Individual Application Session Context\" resource, the PCF shall send to the NF service consumer a \"201 Created\" response to the HTTP POST request, as shown in figure 4.2.6.3-1, step 2. The PCF shall include in the \"201 Created\" response:\n-\ta Location header field; and\n-\tan \"AppSessionContext\" data type in the content.\nThe Location header field shall contain the URI of the created events subscription sub-resource i.e. \"{apiRoot}/npcf-policyauthorization/v1/app-sessions/{appSessionId}/events-subscription\".\nThe \"AppSessionContext\" data type content shall contain the representation of the created \"Individual Application Session Context\" resource and \"Events Subscription\" sub-resource.\nThe PCF shall include in the \"evsNotif\" attribute:\n-\tif the NF service consumer subscribed to the event \"PLMN_CHG\" in the HTTP POST request, the \"event\" attribute set to \"PLMN_CHG\" and the \"plmnId\" attribute including the PLMN Identifier or the SNPN Identifier if the PCF has previously requested to be updated with this information in the SMF;\nNOTE 2:\tThe SNPN Identifier consists of the PLMN Identifier and the NID.\nNOTE 3:\tHandover between non-equivalent SNPNs, and between SNPN and PLMN is not supported. When the UE is operating in SNPN access mode, the trigger reports changes of equivalent SNPNs.\n-\tif the NF service consumer subscribed to the event \"ACCESS_TYPE_CHANGE\" in the HTTP POST request, the \"event\" attribute set to \"ACCESS_TYPE_CHANGE\" and:\ni.\tthe \"accessType\" attribute including the access type, and the \"ratType\" attribute including the RAT type when applicable for the notified access type; and\nii.\tif the \"ATSSS\" feature is supported, the \"addAccessInfo\" attribute with the additional access type information if available, where the access type is encoded in the \"accessType\" attribute, and the RAT type is encoded in the \"ratType\" attribute when applicable for the notified access type; and\nNOTE 4:\tFor a MA PDU session, if the \"ATSSS\" feature is not supported by the NF service consumer the PCF includes the \"accessType\" attribute and the \"ratType\" attribute with a currently active combination of access type and RAT type (if applicable for the notified access type). When both 3GPP and non-3GPP accesses are available, the PCF includes the information corresponding to the 3GPP access.\niii.\tthe \"anGwAddr\" attribute including access network gateway address when available,\nif the PCF has previously requested to be updated with this information in the SMF; and\n-\tif the \"IMS_SBI\" feature is supported and if the NF service consumer subscribed to the event \"CHARGING_CORRELATION\" in the HTTP POST request, the \"event\" attribute set to \"CHARGING_CORRELATION\" and may include the \"anChargIds\" attribute containing the access network charging identifier(s) and the \"anChargAddr\" attribute containing the access network charging address.\nNOTE 5:\tDue to the resource structure, as result of the Npcf_PolicyAuthorization_Subscribe service operation using POST methods, the PCF creates an Individual Application Session context resource which can only be deleted via Npcf_PolicyAuthorization_Delete service operation.\nThis procedure is used by a NF service consumer to subscribe with the PCF to usage monitoring of sponsored data connectivity or to provide updated usage thresholds for the existing application session context, when the \"Sponsored Connectivity\" feature is supported.\nThe NF service consumer shall include in the HTTP PUT request message described in clause 4.2.6.2 the \"EventsSubscReqData\" data type, that shall contain:\n-\tthe \"events\" attribute with a new entry of the \"AfEventSubscription\" data type with the \"event\" attribute set to \"USAGE_REPORT\"; and\n-\tthe \"usgThres\" attribute with the usage thresholds to apply.\nThe PCF shall reply to the NF service consumer as described in clause 4.2.6.2.\n\nThis procedure is used by a NF service consumer to request the PCF to report the access network information (i.e. user location and/or user timezone information) without providing service information when the \"NetLoc\" feature is supported.\nThe NF service consumer can request access network information without providing service information:\n-\tat initial subscription to events, using the HTTP POST request message as described in clause 4.2.6.3; and\n-\tat modification of the subscription to events, using the HTTP PUT request message as described in clause 4.2.6.2.\nThe NF service consumer shall include in the HTTP request message:\n-\tan entry of the \"AfEventSubscription\" data type in the \"events\" attribute with:\na)\tthe \"event\" attribute set to the value \"ANI_REPORT\"; and\nb)\tthe \"notifMethod\" attribute set to the value \"ONE_TIME\"; and\n-\tthe \"reqAnis\" attribute, with the required access network information, i.e. user location and/or user time zone information).\nWhen the PCF determines that the access network does not support the access network information reporting because the SMF does not support the NetLoc feature, the PCF shall respond to the NF service consumer including in the \"EventsNotification\" data type the \"noNetLocSupp\" attribute set to \"ANR_NOT_SUPPORTED\" value. Otherwise, the PCF shall immediately configure the SMF to provide such access information, as specified in 3GPP TS 29.512 [8].\nThe PCF shall reply to the NF service consumer with the HTTP POST response as described in clause 4.2.6.3 and with the HTTP PUT response as described in clause 4.2.6.2.\nWhen the feature \"IMS_SBI\" is supported, this procedure is used by a NF service consumer to subscribe to notifications of the status of the AF signalling transmission path.\nThe NF service consumer shall create a new \"Individual Application Session Context\" resource with the PCF for the AF signalling using the Npcf_PolicyAuthorization_Create service operation.\nThe NF service consumer shall provide:\n-\tthe IP address (IPv4 or IPv6) of the UE in the \"ueIpv4\" or \"ueIpv6\" attribute;\n-\twithin the \"evSubsc\" attribute, the \"event\" attribute set to \"FAILED_RESOURCES_ALLOCATION\"; and\n-\ta media component within the \"medComponents\" attribute including:\n-\tthe \"medCompN\" attribute set to \"0\"; and\n-\ta single media subcomponent within the \"medSubComps\" attribute with:\n-\tthe \"flowUsage\" attribute set to the value \"AF_SIGNALLING\"; and\n-\tif the procedures for NF service consumer provisioning of AF signalling flow information do not apply, the \"fNum\" attribute set to \"0\".\nWhen the \"fNum\" attribute is set to \"0\", the rest of attributes within the related media component and media subcomponent shall not be used.\nThe PCF shall perform session binding as described in 3GPP TS 29.513 [7] and shall reply to the NF service consumer as described in clause 4.2.6.3.\nPCC rules related to AF signalling IP flows should be provisioned to SMF using the corresponding procedures specified at 3GPP TS 29.512 [8] at an earlier stage (e.g. typically at the establishment of the QoS flow dedicated for AF signalling IP flows). The PCF may install the corresponding dynamic PCC rules for the AF signalling IP flows if none has been installed before.\nNOTE 1:\tWell-known ports (e.g. 3GPP TS 24.229 [32] for SIP) or wildcard ports can be used by PCF to derive the dynamic PCC for the AF signalling IP flows.\nIf the \"Individual Application Session Context\" resource is only used for subscription to notification of AF signalling path status, the NF service consumer may cancel the subscription to notifications of the status of the AF signalling transmission path removing the resource as described in clause 4.2.4.2.\nNOTE 2:\tThe \"Individual Application Session Context\" resource created for the AF signalling can also be used when the NF service consumer requests notifications of access type change, access network information for SMS over IP and/or when the NF service consumer provisions AF Signalling Flow Information.\nThis procedure is used by NF service consumer to subscribe and/or modify the PCF subscription for notification about real-time measurements of QoS parameters, e.g. packet delay between UPF and UE, when the \"QoSMonitoring\" feature is supported.\nThe NF service consumer shall include in the HTTP PUT request message described in clause 4.2.6.2 the \"EventsSubscReqData\" data type, that shall contain:\n-\tto create a subscription to notifications of QoS monitoring report:\na)\tshall include the \"events\" array with an array that contains a new entry per requested notification method with the \"event\" attribute set to \"QOS_MONITORING\", and notification related information as described in clause 4.2.2.23;\nb)\twhen the \"notifMethod\" of the new entry is \"EVENT_DETECTION\", shall include a \"qosMon\" attribute with the QoS monitoring information for packet delay thresholds and/or a \"qosMonDatRate\" attribute with QoS monitoring information for data rate thresholds and/or the \"congestMon\" attribute for congestion thresholds as described in clause 4.2.2.23;\nc)\tshall include the new requested QoS monitoring parameter(s) to be measured (i.e. DL/UL/round trip packet delay and/or, if the feature \"XRM_5G\" is supported, congestion infomation, and/or data rate information) within the \"reqQosMonParams\" attribute; and\nd)\tmay include the notification correlation identifier assigned by the AF within the \"notifCorreId\" attribute;\ne)\tif the feature \"ExposureToEAS\" and/or \"XRM_5G\" is supported, may include the \"directNotifInd\" attribute set to true to indicate the direct event notification of QoS Monitoring data from the UPF.\nf)\tfor data rate monitoring, may include the \"avrgWndw\" attribute to indicate the average window for the data rate measurement; and\n-\tto remove a subscription to QoS monitoring information:\na)\tshall include the \"events\" array containing an array that shall omit the corresponding entry with the \"event\" attribute value \"QOS_MONITORING\"; and\nb)\twhen the \"notifMethod\" of the removed entry is \"EVENT_DETECTION\", it shall omit the \"qosMon\" and/or \"qosMonDatRate\" and/or \"congestMon\" attribute;\nc)\tshall omit the \"reqQosMonParams\";\nd)\tif the feature \"ExposureToEAS\" and/or \"XRM_5G\" is supported, shall omit the \"directNotifInd\" attribute and/or the \"avrgWndw\" attribute;\nThe NF service consumer shall include other events related information that shall remain unchanged.\nAs result of this action, the PCF shall set the appropriate subscription to QoS monitoring information for the corresponding active PCC rule(s) as described in 3GPP TS 29.512 [8].\nIf the AF provided an indication of direct event notification, and the PCF determines that the QoS Monitoring reports cannot be notified directly (e.g. the AF requests for monitoring packet delay variation or round trip packet delay when UL and DL are on different service data flows), the PCF generates a successful response to the AF and indicates that direct event notification is not possible by including within the \"servAuthInfo\" attribute the value \"DIRECT_NOTIF_NOT_POSSIBLE\", as described in clause 4.2.2.23.\nThe PCF shall reply to the NF service consumer as described in clause 4.2.6.2.\nEditor’s note:\tWhether the applicable reporting frequency for the Data Rate QoS monitoring can be event triggered and/or periodic is FFS.\nThis procedure is used by a NF service consumer to request the PCF the subscription to application (e.g. start, stop) detection notifications, if the \"ApplicationDetectionEvents\" feature is supported.\nThe NF service consumer can request the subscription to notification of application detection events without providing service information:\n-\tat initial subscription to events, using the HTTP POST request message as described in clause 4.2.6.3; and\n-\tat modification of the subscription to events, using the HTTP PUT request message as described in clause 4.2.6.2.\nThe NF service consumer shall include:\n-\tTo subscribe to notifications about the detection of the start/stop of one or more application's traffic the \"evSubsc\" attribute within the POST request as described in clause 4.2.6.3, with:\na.\t the \"events\" array, including an event with the \"event\" attribute value set to \"APP_DETECTION\"; and\nb.\tthe \"afAppIds\" attribute, with the list of AF application identifier(s) that refer to the applications' traffic to detect.\n-\tTo modify the subscription to notifications of application's traffic detection the \"EventsSubscReqData\" data type within the PUT request as described in clause 4.2.6.2, including an event with the \"event\" attribute value set to \"APP_DETECTION\" and an updated list of AF application identifiers within the \"afAppIds\" attribute.\n-\tTo remove the subscription to notifications about the start and stop of the applications traffic, an \"events\" array within the PUT request as described in clause 4.2.6.2, without including any event with the \"event\" attribute value \"APP_DETECTION\" and omitting the \"afAppIds\" attribute.\nThe PCF shall reply to the NF service consumer with the HTTP POST response as described in clause 4.2.6.3 and with the HTTP PUT response as described in clause 4.2.6.2.\nThe PCF shall set the appropriate subscription to Application Detection for the corresponding PCC rule(s) as described in 3GPP TS 29.512 [8].\nIn this release of the specification application detection applies only to the application(s) with IP traffic.\nWhen the feature \"SatelliteBackhaul\"is supported, this procedure is used by NF service consumer to subscribe and/or modify the PCF subscription to receive a notification when the satellite backhaul category changes and when the backhaul category changes between satellite backhaul and non-satellite backhaul. When the feature \"EnSatBackhaulCatChg\" is supported, the subscription is also used to receive a notification when the satellite backhaul category change comprises a dynamic satellite backhaul category.\nThe NF service consumer shall include in the HTTP PUT request message described in clause 4.2.6.2 the \"EventsSubscReqData\" data type, or in the HTTP POST request message described in clause 4.2.6.3 the \"evSubsc\" attribute, that shall contain the \"events\" array, with a new entry with the \"event\" attribute set to \"SAT_CATEGORY_CHG\" to indicate the creation of a subscription to backhaul category changes.\nThe NF service consumer shall include other events related information that shall remain unchanged.\nAs result of this action, the PCF shall set the appropriate subscription to satellite backhaul changes for the PDU session as described in in 3GPP TS 29.512 [8].\nThe PCF shall reply to the NF service consumer as described in clause 4.2.6.2 or in clause 4.2.6.3. The PCF shall include the \"evsNotif\" attribute with an entry in the \"evNotifs\" array with the \"event\" attribute set to \"SAT_CATEGORY_CHG\" and the \"satBackhaulCategory\" attribute including the satellite backhaul category or the indication of non-satellite backhaul if the PCF has previously subscribed with the SMF to changes in this information.\nWhen the \"TimeSensitiveNetworking\" or \"TimeSensitiveCommunication\" feature is supported, this procedure is used by the NF service consumer to subscribe and/or modify the PCF subscription to received notification when TSC user plane node information is updated.\nThe NF service consumer shall include in the HTTP PUT request message described in clause 4.2.6.2 the \"EventsSubscReqData\" data type, or in the HTTP POST request message described in clause 4.2.6.3 the \"evSubsc\" attribute, that shall contain the \"events\" array, with a new entry with the \"event\" attribute set to the value \"TSN_BRIDGE_INFO\" to subscribe to the reception of TSC user plane node information.\nThe NF service consumer shall include other events related information that shall remain unchanged.\nAs result of this action, the PCF shall set the corresponding subscription to the report of TSC user plane node management information and port management information for the corresponding PDU session as described in 3GPP TS 29.512 [8].\nThe PCF shall reply to the NF service consumer in clause 4.2.6.2 or in clause 4.2.6.3. The PCF shall include the \"evsNotif\" attribute with an entry in the \"evNotifs\" array with the \"event\" attribute set to attribute set to \"TSN_BRIDGE_INFO\" and the \"tsnBridgeManCont\" attribute and/or the \"tsnPortManContDstt\" attribute and/or the \"tsnPortManContNwtts\" attribute as received from the SMF, if not previously reported.\nAs result of this action, the PCF shall subscribe to the report of TSC user plane node management information and port management information for the corresponding PDU session, if not previously subscribed, as described in 3GPP TS 29.512 [8].\nWhen the feature \"ExtraUEaddrReport\" is supported, the subscription to the report of extra UE addresses is used to report about the extra IP addresses or address ranges allocated to the PDU session due to framed routes or IPv6 prefix delegation. The report shall include the actual list of IPv4 addresses or list of IPv6 prefixes as currently allocated.\nThe PCF shall include in the HTTP PUT request message described in clause 4.2.6.2 the \"EventsSubscReqData\" data type, or in the HTTP POST request message described in clause 4.2.6.3 the \"evSubsc\" attribute, that shall contain the \"events\" array, with a new entry with the \"event\" attribute set to the value \"EXTRA_UE_ADDR\".\nThe NF service consumer shall include other events related information that shall remain unchanged, if applicable.\nThe PCF shall reply to the NF service consumer with the HTTP POST response as described in clause 4.2.6.3 and with the HTTP PUT response as described in clause 4.2.6.2.\nIf the PCF received from the SMF the framed routes as described in 3GPP TS 29.512 [8], clause 4.2.2.2, or the PCF received updated information of the one or more IPv6 prefixes allocated to the UE as described in 3GPP TS 29.512 [8], clauses 4.2.4.2 and C.3.4.1, the PCF shall include in the response the \"evsNotif\" attribute with an entry in the \"evNotifs\" array with the \"event\" attribute set to \"EXTRA_UE_ADDR\" and:\n-\tthe actual list of IPv4 addresses within the \"ipv4AddrList\" attribute, if one or more IPv4 framed routes are associated to the PDU session and are available in the PCF; or\n-\tthe actual list of IPv6 prefixes allocated to the UE within the \"ipv6PrefixList\" attribute, if one or more IPv6 framed routes are associated to the PDU session and are available in the PCF, or if the PCF keeps updated IPv6 prefix(es) information.\nAs result of this action, the PCF shall set the appropriate subscription to the report of UE IP addresses, if not previously subscribed, as described in 3GPP TS 29.512 [8].\nWhen the \"XRM_5G\" feature is supported, this procedure is used by the NF service consumer to subscribe and/or modify the PCF subscription for notification about real-time measurements of QoS parameters, e.g. packet delay between UPF and UE, with distinct QoS monitoring requirements per media component.\nTo provide QoS monitoring requirements for each media component, the NF service consumer shall follow the procedures described in clause 4.2.6.8 for subscription to QoS Monitoring Information.\nEditor's Note:\tIt is FFS whether different QoS monitoring requirements per different media might be requested. It is also FFS whether the existing data structures for QoS Monitoring can be reused or new ones are needed.\n\nThis procedure is used by a NF service consumer to request the PCF the subscription to URSP rule enforcement notification, if the \"URSPEnforcement\" feature is supported.\nThe NF service consumer may request the subscription to notification of URSP rule enforcement event without providing service information:\n-\tat initial subscription to events, using the HTTP POST request message as described in clause 4.2.6.3; and\n-\tat modification of the subscription to events, using the HTTP PUT request message as described in clause 4.2.6.2.\nThe NF service consumer shall include:\n-\tTo subscribe to notifications about URSP rule enforcement information, the \"evSubsc\" attribute within the POST request as described in clause 4.2.6.3, with the \"events\" array, including an event with the \"event\" attribute value set to \"URSP_ENF_INFO\"; and\n-\tTo remove the subscription to notifications about URSP rule enforcement information, an \"events\" array within the PUT request as described in clause 4.2.6.2, without including any event with the \"event\" attribute value \"URSP_ENF_INFO\".\nThe PCF shall reply to the NF service consumer with the HTTP POST response as described in clause 4.2.6.3 and with the HTTP PUT response as described in clause 4.2.6.2.\nIf URSP rule enforcement information corresponding to the subscription is available, the PCF shall include the received URSP rule enforcement information within the \"urspEnfRep\" attribute, the SSC mode within the \"sscMode\" attribute, the UE requested DNN, if available, within the \"ueReqDnn\" attribute, if the PDU session is redundant, the RSN and the PDU session pair ID within the \"redundantPduSessionInfo\" attribute and the access type within the \"accessType\" attribute, if not previously provided, or changed compared to the latest provided value,  in the \"evsNotif\" attribute as defined in clause 4.2.5.24.\nThe PCF shall set the appropriate subscription to URSP rule enforcement report as described in 3GPP TS 29.512 [8].\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "4.2.7\tNpcf_PolicyAuthorization_Unsubscribe service operation",
                            "text_content": "The Npcf_PolicyAuthorization_Unsubscribe service operation enables NF service consumers to remove subscription to all subscribed events for the existing application session context. Subscription to events shall be removed:\n-\tby invoking the Npcf_PolicyAuthorization_Unsubscribe service operation for the existing application session context, as described in clause 4.2.7.2; or\n-\twithin the application session context modification procedure by invoking the Npcf_PolicyAuthorization_Update service operation, as described in clause 4.2.3; or\n-\twithin the application session context termination procedure by invoking the Npcf_PolicyAuthorization_Delete service operation, as described in clause 4.2.4.\nThe following procedure using the Npcf_PolicyAuthorization_Unsubscribe service operation is supported:\n-\tUnsubscription to events.\nThis procedure is used to unsubscribe to all subscribed events for the existing AF application session context, as defined in 3GPP TS 23.501 [2], 3GPP TS 23.502 [3] and 3GPP TS 23.503 [4].\nFigure 4.2.7.2-1 illustrates the unsubscription to events using the HTTP DELETE method.\n\nThe figure depicts a simplified representation of the removal of event subscription information using HTTP DELETE. It shows a web interface where users can remove events from a subscription list. The figure includes a list of events, a button to remove the event, and a confirmation message. The removal process is depicted as a single step, with the event being removed from the subscription list.\nFigure 4.2.7.2-1: Removal of events subscription information using HTTP DELETE\nWhen the NF service consumer decides to unsubscribe to all subscribed events for the existing application session context, the NF service consumer shall invoke the Npcf_PolicyAuthorization_Unsubscribe service operation by sending the HTTP DELETE request message to the resource URI representing the \"Events Subscription\" sub-resource in the PCF, as shown in figure 4.2.7.2-1, step 1.\nUpon the reception of the HTTP DELETE request message from the NF service consumer, the PCF shall decide whether the received HTTP request message is accepted.\nIf the HTTP DELETE request message from the NF service consumer is accepted, the PCF shall delete \"Events Subscription\" sub-resource and shall send to the NF service consumer a HTTP \"204 No Content\" response message. The PCF may delete the existing subscription to event notifications for the related PDU session from the SMF as described in 3GPP TS 29.512 [8].\nIf the HTTP DELETE request message from the NF service consumer is rejected, the PCF shall indicate in the HTTP response message the cause for the rejection as specified in clause 5.7.\n",
                            "figures_meta_data": [],
                            "tables": []
                        }
                    ]
                }
            ]
        },
        {
            "title": "5\tNpcf_PolicyAuthorization Service API",
            "description": "",
            "summary": "",
            "tables": [],
            "figures_meta_data": [],
            "subsections": [
                {
                    "title": "5.1\tIntroduction",
                    "description": "",
                    "summary": "",
                    "text_content": "The Npcf_PolicyAuthorization Service shall use the Npcf_PolicyAuthorization API.\nThe API URI of the Npcf_PolicyAuthorization API shall be:\n{apiRoot}/<apiName>/<apiVersion>\nThe request URIs used in each HTTP requests from the NF service consumer towards the PCF shall have the Resource URI structure defined in clause 4.4.1 of 3GPP TS 29.501 [6], i.e.:\n{apiRoot}/<apiName>/<apiVersion>/<apiSpecificResourceUriPart>\nwith the following components:\n-\tThe {apiRoot} shall be set as described in 3GPP TS 29.501 [6].\n-\tThe <apiName> shall be \"npcf-policyauthorization\".\n-\tThe <apiVersion> shall be \"v1\".\n-\tThe <apiSpecificResourceUriPart> shall be set as described in clause 5.3.\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "5.2\tUsage of HTTP",
                    "description": "",
                    "summary": "",
                    "text_content": "",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": [
                        {
                            "title": "5.2.1\tGeneral",
                            "text_content": "HTTP/2, IETF RFC 9113 [9], shall be used as specified in clause 5.2 of 3GPP TS 29.500 [5].\nHTTP/2 shall be transported as specified in clause 5.3 of 3GPP TS 29.500 [5].\nThe OpenAPI [11] specification of HTTP messages and content bodies for the Npcf_PolicyAuthorization service is contained in Annex A.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "5.2.2\tHTTP standard headers",
                            "text_content": "See clause 5.2.2 of 3GPP TS 29.500 [5] for the usage of HTTP standard headers.\nJSON, IETF RFC 8259 [10], shall be used as content type of the HTTP bodies specified in the present specification, as specified in clause 5.4 of 3GPP TS 29.500 [5]. The use of the JSON format shall be signalled by the content type \"application/json\".\nJSON object used in the HTTP PATCH request shall be encoded according to \"JSON Merge Patch\" and shall be signalled by the content type \"application/merge-patch+json\", as defined in IETF RFC 7396 [21].\n\"Problem Details\" JSON object shall be used to indicate additional details of the error in a HTTP response body and shall be signalled by the content type \"application/problem+json\", as defined in IETF RFC 9457 [24].\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "5.2.3\tHTTP custom headers",
                            "text_content": "The Npcf_PolicyAuthorization API shall support mandatory HTTP custom header fields specified in clause 5.2.3.2 of 3GPP TS 29.500 [5] and may support optional HTTP custom header fields specified in clause 5.2.3.3 of 3GPP TS 29.500 [5].\nIn this Release of the specification, no specific custom headers are defined for the Npcf_PolicyAuthorization API.\n",
                            "figures_meta_data": [],
                            "tables": []
                        }
                    ]
                },
                {
                    "title": "5.3\tResources",
                    "description": "",
                    "summary": "",
                    "text_content": "",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": [
                        {
                            "title": "5.3.1\tResource Structure",
                            "text_content": "This clause describes the structure for the Resource URIs and the resources and methods used for the service.\nFigure 5.3.1-1 depicts the resource URIs structure for the Npcf_PolicyAuthorization API.\nThe figure depicts the resource URI structure of the Npcf_PolicyAuthorization API, which is used to access the policy authorization service. The structure includes the resource URI, the method, and the parameters required to access the service. The figure provides a clear and concise representation of the API's structure, making it easy to understand and use.\nFigure 5.3.1-1: Resource URI structure of the Npcf_PolicyAuthorization API\nTable 5.3.1-1 provides an overview of the resources and applicable HTTP methods.\nTable 5.3.1-1: Resources and methods overview\n\n",
                            "figures_meta_data": [],
                            "tables": [
                                {
                                    "description": "Table 5.3.1-1: Resources and methods overview",
                                    "table number": 2,
                                    "summary": "",
                                    "name": ""
                                }
                            ]
                        },
                        {
                            "title": "5.3.2\tResource: Application Sessions (Collection)",
                            "text_content": "The Application Sessions resource represents all application session contexts that exist in the Npcf_PolicyAuthorization service at a given PCF instance.\nResource URI: {apiRoot}/npcf-policyauthorization/v1/app-sessions\nThis resource shall support the resource URI variables defined in table 5.3.2.2-1.\nTable 5.3.2.2-1: Resource URI variables for this resource\n\nThis method shall support the URI query parameters specified in table 5.3.2.3.1-1.\nTable 5.3.2.3.1-1: URI query parameters supported by the POST method on this resource\n\nThis method shall support the request data structures specified in table 5.3.2.3.1-2 and the response data structures and response codes specified in table 5.3.2.3.1-3.\nTable 5.3.2.3.1-2: Data structures supported by the POST Request Body on this resource\n\nTable 5.3.2.3.1-3: Data structures supported by the POST Response Body on this resource\n\nTable 5.3.2.3.1-4: Headers supported by the 201 Response Code on this resource\n\nTable 5.3.2.3.1-5: Headers supported by the 303 Response Code on this resource\n\nTable 5.3.2.3.1-6: Headers supported by the 403 Response Code on this resource\n\nTable 5.3.2.4.1-1: Custom operations\n\nThis custom operation invokes P-CSCF restoration in the PCF and does not create an Individual Application Session Context resource.\nThis operation shall support the request data structure specified in table 5.3.2.4.2.2-1 and the response data structure and response codes specified in table 5.3.2.4.2.2-2.\nTable 5.3.2.4.2.2-1: Data structures supported by the POST Request Body on this resource\n\nTable 5.3.2.4.2.2-2: Data structures supported by the POST Response Body on this resource\n\nTable 5.3.2.4.2.2-3: Headers supported by the 307 Response Code on this resource\n\nTable 5.3.2.4.2.2-4: Headers supported by the 308 Response Code on this resource\n\n",
                            "figures_meta_data": [],
                            "tables": [
                                {
                                    "description": "Table 5.3.2.2-1: Resource URI variables for this resource",
                                    "table number": 3,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 5.3.2.3.1-1: URI query parameters supported by the POST method on this resource",
                                    "table number": 4,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 5.3.2.3.1-2: Data structures supported by the POST Request Body on this resource",
                                    "table number": 5,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 5.3.2.3.1-3: Data structures supported by the POST Response Body on this resource",
                                    "table number": 6,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 5.3.2.3.1-4: Headers supported by the 201 Response Code on this resource",
                                    "table number": 7,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 5.3.2.3.1-5: Headers supported by the 303 Response Code on this resource",
                                    "table number": 8,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 5.3.2.3.1-6: Headers supported by the 403 Response Code on this resource",
                                    "table number": 9,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 5.3.2.4.1-1: Custom operations",
                                    "table number": 10,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 5.3.2.4.2.2-1: Data structures supported by the POST Request Body on this resource",
                                    "table number": 11,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 5.3.2.4.2.2-2: Data structures supported by the POST Response Body on this resource",
                                    "table number": 12,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 5.3.2.4.2.2-3: Headers supported by the 307 Response Code on this resource",
                                    "table number": 13,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 5.3.2.4.2.2-4: Headers supported by the 308 Response Code on this resource",
                                    "table number": 14,
                                    "summary": "",
                                    "name": ""
                                }
                            ]
                        },
                        {
                            "title": "5.3.3\tResource: Individual Application Session Context (Document)",
                            "text_content": "The Individual Application Session Context resource represents a single application session context that exists in the Npcf_PolicyAuthorization service.\nResource URI: {apiRoot}/npcf-policyauthorization/v1/app-sessions/{appSessionId}\nThis resource shall support the resource URI variables defined in table 5.3.2.2-1.\nTable 5.3.3.2-1: Resource URI variables for this resource\n\nThis method shall support the URI query parameters specified in table 5.3.3.3.1-1.\nTable 5.3.3.3.1-1: URI query parameters supported by the GET method on this resource\n\nThis method shall support the request data structures specified in table 5.3.3.3.1-2 and the response data structures and response codes specified in table 5.3.3.3.1-3.\nTable 5.3.3.3.1-2: Data structures supported by the GET Request Body on this resource\n\nTable 5.3.3.3.1-3: Data structures supported by the GET Response Body on this resource\n\nTable 5.3.3.3.1-4: Headers supported by the 307 Response Code on this resource\n\nTable 5.3.3.3.1-5: Headers supported by the 308 Response Code on this resource\n\nThis method shall support the URI query parameters specified in table 5.3.3.3.2-1.\nTable 5.3.3.3.2-1: URI query parameters supported by the PATCH method on this resource\n\nThis method shall support the request data structures specified in table 5.3.3.3.2-2 and the response data structures and response codes specified in table 5.3.3.3.2-3.\nTable 5.3.3.3.2-2: Data structures supported by the PATCH Request Body on this resource\n\nTable 5.3.3.3.2-3: Data structures supported by the PATCH Response Body on this resource\n\nTable 5.3.3.3.2-4: Headers supported by the 403 Response Code on this resource\n\nTable 5.3.3.3.2-5: Headers supported by the 307 Response Code on this resource\n\nTable 5.3.3.3.2-6: Headers supported by the 308 Response Code on this resource\n\nTable 5.3.3.4.1-1: Custom operations\n\nThis custom operation deletes an existing Individual Application Session Context resource and the child Events Subscription sub-resource in the PCF.\nThis operation shall support the request data structures specified in table 5.3.3.4.2.2-1 and the response data structure and response codes specified in table 5.3.3.4.2.2-2.\nTable 5.3.3.4.2.2-1: Data structures supported by the POST Request Body on this resource\n\nTable 5.3.3.4.2.2-2: Data structures supported by the POST Response Body on this resource\n\nTable 5.3.3.4.2.2-3: Headers supported by the 307 Response Code on this resource\n\nTable 5.3.3.4.2.2-4: Headers supported by the 308 Response Code on this resource\n\n",
                            "figures_meta_data": [],
                            "tables": [
                                {
                                    "description": "Table 5.3.3.2-1: Resource URI variables for this resource",
                                    "table number": 15,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 5.3.3.3.1-1: URI query parameters supported by the GET method on this resource",
                                    "table number": 16,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 5.3.3.3.1-2: Data structures supported by the GET Request Body on this resource",
                                    "table number": 17,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 5.3.3.3.1-3: Data structures supported by the GET Response Body on this resource",
                                    "table number": 18,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 5.3.3.3.1-4: Headers supported by the 307 Response Code on this resource",
                                    "table number": 19,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 5.3.3.3.1-5: Headers supported by the 308 Response Code on this resource",
                                    "table number": 20,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 5.3.3.3.2-1: URI query parameters supported by the PATCH method on this resource",
                                    "table number": 21,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 5.3.3.3.2-2: Data structures supported by the PATCH Request Body on this resource",
                                    "table number": 22,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 5.3.3.3.2-3: Data structures supported by the PATCH Response Body on this resource",
                                    "table number": 23,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 5.3.3.3.2-4: Headers supported by the 403 Response Code on this resource",
                                    "table number": 24,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 5.3.3.3.2-5: Headers supported by the 307 Response Code on this resource",
                                    "table number": 25,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 5.3.3.3.2-6: Headers supported by the 308 Response Code on this resource",
                                    "table number": 26,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 5.3.3.4.1-1: Custom operations",
                                    "table number": 27,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 5.3.3.4.2.2-1: Data structures supported by the POST Request Body on this resource",
                                    "table number": 28,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 5.3.3.4.2.2-2: Data structures supported by the POST Response Body on this resource",
                                    "table number": 29,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 5.3.3.4.2.2-3: Headers supported by the 307 Response Code on this resource",
                                    "table number": 30,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 5.3.3.4.2.2-4: Headers supported by the 308 Response Code on this resource",
                                    "table number": 31,
                                    "summary": "",
                                    "name": ""
                                }
                            ]
                        },
                        {
                            "title": "5.3.4\tResource: Events Subscription (Document)",
                            "text_content": "The Events Subscription sub-resource represents a subscription to events for an application session context that exists in the Npcf_PolicyAuthorization service.\nResource URI: {apiRoot}/npcf-policyauthorization/v1/app-sessions/{appSessionId}/events-subscription\nThis resource shall support the resource URI variables defined in table 5.3.4.2-1.\nTable 5.3.4.2-1: Resource URI variables for this resource\n\nThis method shall support the URI query parameters specified in table 5.3.4.3.1-1.\nTable 5.3.4.3.1-1: URI query parameters supported by the PUT method on this resource\n\nThis method shall support the request data structures specified in table 5.3.4.3.1-2 and the response data structures and response codes specified in table 5.3.4.3.1-3.\nTable 5.3.4.3.1-2: Data structures supported by the PUT Request Body on this resource\n\nTable 5.3.4.3.1-3: Data structures supported by the PUT Response Body on this resource\n\nTable 5.3.4.3.1-4: Headers supported by the 201 Response Code on this resource\n\nTable 5.3.4.3.1-5: Headers supported by the 307 Response Code on this resource\n\nTable 5.3.4.3.1-6: Headers supported by the 308 Response Code on this resource\n\nThis method shall support the URI query parameters specified in table 5.3.4.3.2-1.\nTable 5.3.4.3.2-1: URI query parameters supported by the DELETE method on this resource\n\nThis method shall support the request data structures specified in table 5.3.4.3.2-2 and the response data structures and response codes specified in table 5.3.4.3.2-3.\nTable 5.3.4.3.2-2: Data structures supported by the DELETE Request Body on this resource\n\nTable 5.3.4.3.2-3: Data structures supported by the DELETE Response Body on this resource\n\nTable 5.3.4.3.2-4: Headers supported by the 307 Response Code on this resource\n\nTable 5.3.4.3.2-5: Headers supported by the 308 Response Code on this resource\n\nNone.\n",
                            "figures_meta_data": [],
                            "tables": [
                                {
                                    "description": "Table 5.3.4.2-1: Resource URI variables for this resource",
                                    "table number": 32,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 5.3.4.3.1-1: URI query parameters supported by the PUT method on this resource",
                                    "table number": 33,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 5.3.4.3.1-2: Data structures supported by the PUT Request Body on this resource",
                                    "table number": 34,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 5.3.4.3.1-3: Data structures supported by the PUT Response Body on this resource",
                                    "table number": 35,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 5.3.4.3.1-4: Headers supported by the 201 Response Code on this resource",
                                    "table number": 36,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 5.3.4.3.1-5: Headers supported by the 307 Response Code on this resource",
                                    "table number": 37,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 5.3.4.3.1-6: Headers supported by the 308 Response Code on this resource",
                                    "table number": 38,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 5.3.4.3.2-1: URI query parameters supported by the DELETE method on this resource",
                                    "table number": 39,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 5.3.4.3.2-2: Data structures supported by the DELETE Request Body on this resource",
                                    "table number": 40,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 5.3.4.3.2-3: Data structures supported by the DELETE Response Body on this resource",
                                    "table number": 41,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 5.3.4.3.2-4: Headers supported by the 307 Response Code on this resource",
                                    "table number": 42,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 5.3.4.3.2-5: Headers supported by the 308 Response Code on this resource",
                                    "table number": 43,
                                    "summary": "",
                                    "name": ""
                                }
                            ]
                        }
                    ]
                },
                {
                    "title": "5.4\tCustom Operations without associated resources",
                    "description": "",
                    "summary": "",
                    "text_content": "No custom operation is defined in this Release of the specification.\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "5.5\tNotifications",
                    "description": "",
                    "summary": "",
                    "text_content": "",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": [
                        {
                            "title": "5.5.1\tGeneral",
                            "text_content": "Notifications shall comply to clause 6.2 of 3GPP TS 29.500 [5] and clause 4.6.2.3 of 3GPP TS 29.501 [6].\nTable 5.5.1-1: Notifications overview\n\n",
                            "figures_meta_data": [],
                            "tables": [
                                {
                                    "description": "Table 5.5.1-1: Notifications overview",
                                    "table number": 44,
                                    "summary": "",
                                    "name": ""
                                }
                            ]
                        },
                        {
                            "title": "5.5.2\tEvent Notification",
                            "text_content": "The Event Notification is used by the PCF to report one or several observed application session context events to the NF service consumer that has subscribed to such notifications, via the Events Subscription sub-resource for explicit subscriptions or, via the UDR for implicit subscriptions.\nEditor’s Note: Whether/how to document how the OpenAPI represents the Callback URI for implicit subscriptions in this TS is FFS.\nThe Callback URI \"{notifUri}/notify\" shall be used with the callback URI variables defined in table 5.5.2.2-1.\nTable 5.5.2.2-1: Callback URI variables\n\nThis method shall support the URI query parameters specified in table 5.5.2.3.1-1.\nTable 5.5.2.3.1-1: URI query parameters supported by the POST method on this resource\n\nThis method shall support the request data structures specified in table 5.5.2.3.1-2 and the response data structures and response codes specified in table 5.5.2.3.1-3.\nTable 5.5.2.3.1-2: Data structures supported by the POST Request Body on this resource\n\nTable 5.5.2.3.1-3: Data structures supported by the POST Response Body on this resource\n\nTable 5.5.2.3.1-4: Headers supported by the 307 Response Code on this resource\n\nTable 5.5.2.3.1-5: Headers supported by the 308 Response Code on this resource\n\n",
                            "figures_meta_data": [],
                            "tables": [
                                {
                                    "description": "Table 5.5.2.2-1: Callback URI variables",
                                    "table number": 45,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 5.5.2.3.1-1: URI query parameters supported by the POST method on this resource",
                                    "table number": 46,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 5.5.2.3.1-2: Data structures supported by the POST Request Body on this resource",
                                    "table number": 47,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 5.5.2.3.1-3: Data structures supported by the POST Response Body on this resource",
                                    "table number": 48,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 5.5.2.3.1-4: Headers supported by the 307 Response Code on this resource",
                                    "table number": 49,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 5.5.2.3.1-5: Headers supported by the 308 Response Code on this resource",
                                    "table number": 50,
                                    "summary": "",
                                    "name": ""
                                }
                            ]
                        },
                        {
                            "title": "5.5.3\tTermination Request",
                            "text_content": "The Termination Request is used by the PCF to request the NF service consumer the deletion of the Individual Application Session Context resource.\nThe Callback URI \"{notifUri}/terminate\" shall be used with the callback URI variables defined in table 5.5.3.2-1.\nTable 5.5.3.2-1: Callback URI variables\n\nThis method shall support the URI query parameters specified in table 5.5.3.3.1-1.\nTable 5.5.3.3.1-1: URI query parameters supported by the POST method on this resource\n\nThis method shall support the request data structures specified in table 5.5.3.3.1-2 and the response data structures and response codes specified in table 5.5.3.3.1-3.\nTable 5.5.3.3.1-2: Data structures supported by the POST Request Body on this resource\n\nTable 5.5.3.3.1-3: Data structures supported by the POST Response Body on this resource\n\nTable 5.5.3.3.1-4: Headers supported by the 307 Response Code on this resource\n\nTable 5.5.3.3.1-5: Headers supported by the 308 Response Code on this resource\n\n",
                            "figures_meta_data": [],
                            "tables": [
                                {
                                    "description": "Table 5.5.3.2-1: Callback URI variables",
                                    "table number": 51,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 5.5.3.3.1-1: URI query parameters supported by the POST method on this resource",
                                    "table number": 52,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 5.5.3.3.1-2: Data structures supported by the POST Request Body on this resource",
                                    "table number": 53,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 5.5.3.3.1-3: Data structures supported by the POST Response Body on this resource",
                                    "table number": 54,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 5.5.3.3.1-4: Headers supported by the 307 Response Code on this resource",
                                    "table number": 55,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 5.5.3.3.1-5: Headers supported by the 308 Response Code on this resource",
                                    "table number": 56,
                                    "summary": "",
                                    "name": ""
                                }
                            ]
                        },
                        {
                            "title": "5.5.4\tDetected 5GS Bridge for a PDU session",
                            "text_content": "The detected TSC user plane node for a PDU session operation is used by the PCF to notify the NF service consumer about the detection of TSC user plane node information in the context of a PDU session and to trigger in the NF service consumer (i.e. TSN AF or TSCTSF) the creation of a new Individual Application Session Context to associate it with the detected TSC user plane node for the PDU session.\nThe PCF shall use the locally configured notification URI of the NF service consumer (i.e. TSN AF or TSCTSF) or the notification URI of the NF service consumer (i.e. TSCTSF) discovered via Nnrf_NFDiscovery service as defined in 3GPP TS 29.510 [27], if not configured, as request URI of the notification request. The \"callback\" definition in the OpenAPI specification is associated to the \"ApplicationSessions\" resource.\nThe Callback URI \"{notifUri}/new-bridge\" shall be used with the callback URI variables defined in table 5.5.4.2-1.\nTable 5.5.4.2-1: Callback URI variables\n\nThis method shall support the URI query parameters specified in table 5.5.4.3.1-1.\nTable 5.5.4.3.1-1: URI query parameters supported by the POST method on this resource\n\nThis method shall support the request data structures specified in table 5.5.4.3.1-2 and the response data structures and response codes specified in table 5.5.4.3.1-3.\nTable 5.5.4.3.1-2: Data structures supported by the POST Request Body on this resource\n\nTable 5.5.4.3.1-3: Data structures supported by the POST Response Body on this resource\n\nTable 5.5.4.3.1-4: Headers supported by the 307 Response Code on this resource\n\nTable 5.5.4.3.1-5: Headers supported by the 308 Response Code on this resource\n\n",
                            "figures_meta_data": [],
                            "tables": [
                                {
                                    "description": "Table 5.5.4.2-1: Callback URI variables",
                                    "table number": 57,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 5.5.4.3.1-1: URI query parameters supported by the POST method on this resource",
                                    "table number": 58,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 5.5.4.3.1-2: Data structures supported by the POST Request Body on this resource",
                                    "table number": 59,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 5.5.4.3.1-3: Data structures supported by the POST Response Body on this resource",
                                    "table number": 60,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 5.5.4.3.1-4: Headers supported by the 307 Response Code on this resource",
                                    "table number": 61,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 5.5.4.3.1-5: Headers supported by the 308 Response Code on this resource",
                                    "table number": 62,
                                    "summary": "",
                                    "name": ""
                                }
                            ]
                        },
                        {
                            "title": "5.5.5\tNotification about PDU session event",
                            "text_content": "The Notification about PDU session events not bound to an Individual Application Session Context (eventNotificationPduSession) is used by the PCF to notify the NF service consumer (e.g., the PCF for a UE) about the PDU session events.\nThe PCF shall use the NF service consumer (e.g. PCF for a UE) callback URI implicitly subscribed (e.g. contained in the SM Policy Association of the related PDU session) as request URI of the notification request, and append the \"pdu-session\" segment path at the end of the URI. The \"callback\" definition in the OpenAPI specification is associated to the \"ApplicationSessions\" resource.\nThe Callback URI \"{notifUri}/pdu-session\" shall be used with the callback URI variables defined in table 5.5.5.2-1.\nTable 5.5.5.2-1: Callback URI variables\n\nThis method shall support the URI query parameters specified in table 5.5.5.3.1-1.\nTable 5.5.5.3.1-1: URI query parameters supported by the POST method on this resource\n\nThis method shall support the request data structures specified in table 5.5.5.3.1-2 and the response data structures and response codes specified in table 5.5.5.3.1-3.\nTable 5.5.5.3.1-2: Data structures supported by the POST Request Body on this resource\n\nTable 5.5.5.3.1-3: Data structures supported by the POST Response Body on this resource\n\nTable 5.5.5.3.1-4: Headers supported by the 307 Response Code on this resource\n\nTable 5.5.5.3.1-5: Headers supported by the 308 Response Code on this resource\n\n",
                            "figures_meta_data": [],
                            "tables": [
                                {
                                    "description": "Table 5.5.5.2-1: Callback URI variables",
                                    "table number": 63,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 5.5.5.3.1-1: URI query parameters supported by the POST method on this resource",
                                    "table number": 64,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 5.5.5.3.1-2: Data structures supported by the POST Request Body on this resource",
                                    "table number": 65,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 5.5.5.3.1-3: Data structures supported by the POST Response Body on this resource",
                                    "table number": 66,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 5.5.5.3.1-4: Headers supported by the 307 Response Code on this resource",
                                    "table number": 67,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 5.5.5.3.1-5: Headers supported by the 308 Response Code on this resource",
                                    "table number": 68,
                                    "summary": "",
                                    "name": ""
                                }
                            ]
                        }
                    ]
                },
                {
                    "title": "5.6\tData Model",
                    "description": "",
                    "summary": "",
                    "text_content": "",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": [
                        {
                            "title": "5.6.1\tGeneral",
                            "text_content": "This clause specifies the application data model supported by the API.\nTable 5.6.1-1 specifies the data types defined for the Npcf_PolicyAuthorization service based interface protocol.\nTable 5.6.1-1: Npcf_PolicyAuthorization specific Data Types\n\nTable 5.6.1-2 specifies data types re-used by the Npcf_PolicyAuthorization service based interface protocol from other specifications, including a reference to their respective specifications and when needed, a short description of their use within the Npcf_PolicyAuthorization service based interface.\nTable 5.6.1-2: Npcf_PolicyAuthorization re-used Data Types\n\n",
                            "figures_meta_data": [],
                            "tables": [
                                {
                                    "description": "Table 5.6.1-1: Npcf_PolicyAuthorization specific Data Types",
                                    "table number": 69,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 5.6.1-2: Npcf_PolicyAuthorization re-used Data Types",
                                    "table number": 70,
                                    "summary": "",
                                    "name": ""
                                }
                            ]
                        },
                        {
                            "title": "5.6.2\tStructured data types",
                            "text_content": "This clause defines the structures to be used in resource representations.\nTable 5.6.2.2-1: Definition of type AppSessionContext\n\nTable 5.6.2.3-1: Definition of type AppSessionContextReqData\n\nTable 5.6.2.4-1: Definition of type AppSessionContextRespData\n\nTable 5.6.2.5-1: Definition of type AppSessionContextUpdateData\n\nTable 5.6.2.6-1: Definition of type EventsSubscReqData\n\nEditor’s Note: It is FFS whether the QoS monitoring requirements for congestion measurements are different than the ones for packet delay, i.e., it is FFS whether reporting period and reporting frequency apply, or different criteria needs to be applied.\nEditor's note:\tWhether to reuse or enhance the QosMonitoringInformation data type for the \"pdvMon\" attribute is FFS.\nTable 5.6.2.7-1: Definition of type MediaComponent\n\nEditor's Note:\tWhether the AF can provide an indication fo detection of last PDU of the data burst is FFS based on stage 2 discussion.\nAll IP flows within a \"MediaSubComponent\" data type are permanently disabled by supplying \"FlowStatus\" data type with a deletion indication.\nBandwidth information and the \"fStatus\" attribute provided within the MediaComponent applies to all those IP flows within the media component, for which no corresponding information is being provided within the \"medSubComps\" attribute. As defined in 3GPP TS 29.513 [7], the bandwidth information within the media component level \"marBwUl\" and \"marBwDl\" attributes applies separately to each media subcomponent except for media subcomponents with a \"flowUsage\" attribute with the value \"RTCP\". The mapping of bandwidth information for RTCP media subcomponent is defined in 3GPP TS 29.513 [7] clause 7.3.3.\nEditor’s note: It is FFS whether other IEs within the \"tsnQos\" attribute than \"tscPackDelay\" attribute can apply for multi-modal communication services.\nTable 5.6.2.8-1: Definition of type MediaSubComponent\n\nEditor’s Note: Whether the internal AF or the NEF need to separate the MediaSubComponent or adding fDescs or ethfDescs inside the evSuscs if different events applies to different single-modal data flow is FFS.\nEditor’s note: It is FFS whether the notifUri and notifCorreId attributes may be required for the evSubsc attribute.\nThe bit rate information and flow status information provided within the \"MediaSubComponent\" data type takes precedence over information provided within \"MediaComponent\" data type.\nAll service data flows within a \"MediaSubComponent\" data type are permanently disabled by supplying \"FlowStatus\" data type with a deletion indication.\nTable 5.6.2.9-1: Definition of type EventsNotification\n\nTable 5.6.2.10-1: Definition of type AfEventSubscription\n\nTable 5.6.2.11-1: Definition of type AfEventNotification\n\nTable 5.6.2.12-1: Definition of type TerminationInfo\n\nTable 5.6.2.13-1: Definition of type AfRoutingRequirement\n\nTable 5.6.2.14-1: Definition of type ResourcesAllocationInfo\n\nTable 5.6.2.15-1: Definition of type QosNotificationControlInfo\n\nTable 5.6.2.16-1: Definition of type SpatialValidity\n\nTable 5.6.2.17-1: Definition of type EthFlowDescription\n\n\n\nTable 5.6.2.20-1: Definition of type AnGwAddress\n\nTable 5.6.2.21-1: Definition of type Flows\n\nTable 5.6.2.22-1: Definition of type TemporalValidity\n\n\nThis data type is defined in the same way as the \"AfRoutingRequirement\" data type, but:\n-\twith the OpenAPI \"nullable: true\" property;\n-\tthe removable attribute \"spVal\" is defined with the data type \"SpatialValidityRm\"; and\n-\tthe removable attributes \"tempVals\", \"routeToLocs\", \"addrPreserInd\", \"simConnInd\", \"simConnTerm\" and \"easIpReplaceInfos\" are defined as nullable in the OpenAPI.\nTable 5.6.2.24-1: Definition of type AfRoutingRequirementRm\n\nThis data type is defined in the same way as the \"EventsSubscReqData\" data type, but:\n-\twith the OpenAPI \"nullable: true\" property; and\n-\tthe removable attribute \"usgThres\" is defined with the removable data type \"UsageThresholdRm\"; and removable attribute \"qosMon\" is defined with the removable data type \"QosMonitoringInformationRm\".\nTable 5.6.2.25-1: Definition of type EventsSubscReqDataRm\n\nEditor’s Note: It is FFS whether the QoS monitoring requirements for congestion measurements are different than the ones for packet delay, i.e., it is FFS whether reporting period and reporting frequency apply, or different criteria needs to be applied.\nThis data type is defined in the same way as the \"MediaComponent\" data type, but:\n-\twith the OpenAPI \"nullable: true\" property; and\n-\tthe removable attributes \"afRoutReq\" is defined with the removable data type \"AfRoutingRequirementRm\"; \"maxPacketLossRateDl\" and \"maxPacketLossRateUl\" are defined with the removable data type \"PacketLossRateRm\"; \"medSubComps\" is defined with the removable data type \"MediaSubComponentRm\"; \"preemptCap\" is defined with the removable data type \"PreemptionCapabilityRm\"; \"preemptVuln\" is defined with the removable data type \"PreemptionVulnerabilityRm\"; \"marBwDl\", \"marBwUl\", \"minDesBwDl\", \"minDesBwUl\", \"mirBwDl\", \"mirBwUl\", \"maxSuppBwDl\", \"maxSuppBwUl\", \"rrBw\", \"rsBw\" are defined with the removable data type \"BitRateRm\"; \"sharingKeyDl\", \"sharingKeyUl\", \"tsnQos\", and \"pduSetQos\" are defined with the removable data types \"Uint32Rm\", \"TsnQosContainerRm\" and \"pduSetQosParaRm\"; the removable attributes \"desMaxLatency\" and \"desMaxLoss\" are defined with the removable data type \"FloatRm\"; \"pduSetprotDesc\" is defined with the removable data type \"ProtoDescRm\", the removable attribute \"flusId\" is defined as nullable in the OpenAPI.\n-\tthe removable attributes \"qosReference\", \"altSerReqs\" and \"afSfcReq\" are defined as nullable.\nTable 5.6.2.26-1: Definition of type MediaComponentRm\n\nEditor’s note: It is FFS whether other IEs within the \"tsnQos\" attribute than \"tscPackDelay\" attribute can apply for multi-modal communication services.\nThis data type is defined in the same way as the \"MediaSubComponent\" data type, but:\n-\twith the OpenAPI \"nullable: true\" property;\n-\tthe removable attributes \"marBwDl\", \"marBwUl\", defined with the removable data type \"BitRateRm\"; the removable attribute \"tosTrCl\", defined with the removable data type \"TosTrafficClassRm\"; and\n-\tthe removable attributes \"ethfDescs\" and \"fDescs\" and \"addInfoFlowDescs\" are defined as nullable in the OpenAPI.\nTable 5.6.2.27-1: Definition of type MediaSubComponentRm\n\nEditor’s note: It is FFS whether the notifUri and notifCorreId attributes may be required for the evSubsc attribute.\nThis data type is defined in the same way as the \"SpatialValidity\" data type, but with the OpenAPI \"nullable: true\" property.\nThis data type is the \"ProblemDetails\" data type defined in 3GPP TS 29.571 [12] but extended with the attribute \"acceptableServInfo\" of data type \"AcceptableServiceInfo\".\nTable 5.6.2.29-1: Definition of type ExtendedProblemDetails\n\nTable 5.6.2.30-1: Definition of type AcceptableServiceInfo\n\nTable 5.6.2.31-1: Definition of type UeIdentityInfo\n\nTable 5.6.2.32-1: Definition of type AccessNetChargingIdentifier\n\n\nTable 5.6.2.33-1: Definition of type OutOfCreditInformation\n\nTable 5.6.2.34-1: Definition of type QosMonitoringInformation\n\nEditor’s note:\tWhether the applicable reporting frequency for the Data Rate QoS monitoring can be event triggered and/or periodic is FFS.\nEditor’s Note: It is FFS whether the QoS monitoring requirements for congestion measurements are different than the ones for packet delay, i.e., it is FFS whether reporting period and reporting frequency apply, or different criteria needs to be applied.\nTable 5.6.2.35-1: Definition of type TsnQosContainer\n\nTable 5.6.2.36-1: Definition of type PcscfRestorationRequestData\n\nTable 5.6.2.37-1: Definition of type QosMonitoringReport\n\nEditor’s note:\tWhether a maximum and minimum data rate measurements calculated during the waiting time interval are the applicable is FFS.\nThis data type is defined in the same way as the \"TsnQoSContainer\" data type, but with the OpenAPI \"nullable: true\" property for each of the attributes as well as for the entire data type.\nTable 5.6.2.39-1: Definition of type TscaiInputContainer\n\n\nTable 5.6.2.40-1: Definition of type PduSessionTsnBridge\n\nThis data type is defined in the same way as the \"QosMonitoringInformation\" data type, but with the OpenAPI \"nullable: true\" property for the data type and for the \"repThreshDatRateDl\" and \"repThreshDatRateUl\" attributes.\nTable 5.6.2.42-1: Definition of type EventsSubscPutData\n\nTable 5.6.2.43-1: Definition of type AppSessionContextUpdateDataPatch\n\nTable 5.6.2.44-1: Definition of type AppDetectionReport\n\nTable 5.6.2.45-1: Definition of PduSessionEventNotification\n\nTable 5.6.2.46-1: Definition of type PcfAddressingInfo\n\nTable 5.6.2.47-1: Definition of type AlternativeServiceRequirementsData\n\nTable 5.6.2.48-1: Definition of type PeriodicityRange\n\nTable 5.6.2.49-1: Definition of type AfSfcRequirement\n\n5.6.2.50\tType BatOffsetInfo\nTable 5.6.2.50-1: Definition of type BatOffsetInfo\n\nThis data type is defined to represent media protocol description of the service data flow\nTable 5.6.2.51-1: Definition of type ProtoDesc\n\nEditor's Note:\t The encoding and detailed entries within protocol and payloadType attribute is FFS.\nThis data type is defined in the same way as the \"ProtoDesc\" data type, but with the OpenAPI \"nullable: true\" property for each of the attributes as well as for the entire data type.\nTable 5.6.2.53-1: Definition of type PdvMonitoringReport\n\nEditor's note:\tWhether reporting packet delay variation errors is needed is FFS.\nEditor's note:\tWhether the \"ulPdv\" and \"dlPdv\" attributes are single or plural is FFS.\nTable 5.6.2.54-1: Definition of type PeriodicityInfo\n\n5.6.2.55\tType AddFlowDescriptionInfo\nTable 5.6.2.55-1: Definition of AddFlowDescriptionInfo\n\nTable 5.6.2.56-1: Definition of type L4sSupport\n\n",
                            "figures_meta_data": [],
                            "tables": [
                                {
                                    "description": "Table 5.6.2.2-1: Definition of type AppSessionContext",
                                    "table number": 71,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 5.6.2.3-1: Definition of type AppSessionContextReqData",
                                    "table number": 72,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 5.6.2.4-1: Definition of type AppSessionContextRespData",
                                    "table number": 73,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 5.6.2.5-1: Definition of type AppSessionContextUpdateData",
                                    "table number": 74,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 5.6.2.6-1: Definition of type EventsSubscReqData",
                                    "table number": 75,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 5.6.2.7-1: Definition of type MediaComponent",
                                    "table number": 76,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 5.6.2.8-1: Definition of type MediaSubComponent",
                                    "table number": 77,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 5.6.2.9-1: Definition of type EventsNotification",
                                    "table number": 78,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 5.6.2.10-1: Definition of type AfEventSubscription",
                                    "table number": 79,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 5.6.2.11-1: Definition of type AfEventNotification",
                                    "table number": 80,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 5.6.2.12-1: Definition of type TerminationInfo",
                                    "table number": 81,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 5.6.2.13-1: Definition of type AfRoutingRequirement",
                                    "table number": 82,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 5.6.2.14-1: Definition of type ResourcesAllocationInfo",
                                    "table number": 83,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 5.6.2.15-1: Definition of type QosNotificationControlInfo",
                                    "table number": 84,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 5.6.2.16-1: Definition of type SpatialValidity",
                                    "table number": 85,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 5.6.2.17-1: Definition of type EthFlowDescription",
                                    "table number": 86,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 5.6.2.20-1: Definition of type AnGwAddress",
                                    "table number": 87,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 5.6.2.21-1: Definition of type Flows",
                                    "table number": 88,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 5.6.2.22-1: Definition of type TemporalValidity",
                                    "table number": 89,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 5.6.2.24-1: Definition of type AfRoutingRequirementRm",
                                    "table number": 90,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 5.6.2.25-1: Definition of type EventsSubscReqDataRm",
                                    "table number": 91,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 5.6.2.26-1: Definition of type MediaComponentRm",
                                    "table number": 92,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 5.6.2.27-1: Definition of type MediaSubComponentRm",
                                    "table number": 93,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 5.6.2.29-1: Definition of type ExtendedProblemDetails",
                                    "table number": 94,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 5.6.2.30-1: Definition of type AcceptableServiceInfo",
                                    "table number": 95,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 5.6.2.31-1: Definition of type UeIdentityInfo",
                                    "table number": 96,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 5.6.2.32-1: Definition of type AccessNetChargingIdentifier",
                                    "table number": 97,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 5.6.2.33-1: Definition of type OutOfCreditInformation",
                                    "table number": 98,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 5.6.2.34-1: Definition of type QosMonitoringInformation",
                                    "table number": 99,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 5.6.2.35-1: Definition of type TsnQosContainer",
                                    "table number": 100,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 5.6.2.36-1: Definition of type PcscfRestorationRequestData",
                                    "table number": 101,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 5.6.2.37-1: Definition of type QosMonitoringReport",
                                    "table number": 102,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 5.6.2.39-1: Definition of type TscaiInputContainer",
                                    "table number": 103,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 5.6.2.40-1: Definition of type PduSessionTsnBridge",
                                    "table number": 104,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 5.6.2.42-1: Definition of type EventsSubscPutData",
                                    "table number": 105,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 5.6.2.43-1: Definition of type AppSessionContextUpdateDataPatch",
                                    "table number": 106,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 5.6.2.44-1: Definition of type AppDetectionReport",
                                    "table number": 107,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 5.6.2.45-1: Definition of PduSessionEventNotification",
                                    "table number": 108,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 5.6.2.46-1: Definition of type PcfAddressingInfo",
                                    "table number": 109,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 5.6.2.47-1: Definition of type AlternativeServiceRequirementsData",
                                    "table number": 110,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 5.6.2.48-1: Definition of type PeriodicityRange",
                                    "table number": 111,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 5.6.2.49-1: Definition of type AfSfcRequirement",
                                    "table number": 112,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 5.6.2.50-1: Definition of type BatOffsetInfo",
                                    "table number": 113,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 5.6.2.51-1: Definition of type ProtoDesc",
                                    "table number": 114,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 5.6.2.53-1: Definition of type PdvMonitoringReport",
                                    "table number": 115,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 5.6.2.54-1: Definition of type PeriodicityInfo",
                                    "table number": 116,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 5.6.2.55-1: Definition of AddFlowDescriptionInfo",
                                    "table number": 117,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 5.6.2.56-1: Definition of type L4sSupport",
                                    "table number": 118,
                                    "summary": "",
                                    "name": ""
                                }
                            ]
                        },
                        {
                            "title": "5.6.3\tSimple data types and enumerations",
                            "text_content": "This clause defines simple data types and enumerations that can be referenced from data structures defined in the previous clauses.\nThe simple data types defined in table 5.6.3.2-1 shall be supported.\nTable 5.6.3.2-1: Simple data types\n\nThe enumeration \"MediaType\" represents the media type of a media component.\nTable 5.6.3.3-1: Enumeration MediaType\n\nThe enumeration \"ReservPriority\" represents the reservation priority. The lowest priority shall be indicated with the \"PRIO_1\" value, the next after the lowest with the \"PRIO_2\" value, and so on up to the highest priority which shall be indicated with \"PRIO_16\".\nTable 5.6.3.4-1: Enumeration ReservPriority\n\nThe enumeration \"ServAuthInfo\" represents the result of the Npcf_PolicyAuthorization service request from the NF service consumer.\nTable 5.6.3.5-1: Enumeration ServAuthInfo\n\nThe enumeration \"SponsoringStatus\" represents whether the sponsored data connectivity is enabled or disabled/not-enabled.\nTable 5.6.3.6-1: Enumeration SponsoringStatus\n\nThe enumeration \"AfEvent\" represents the traffic events the PCF can notify to the NF service consumer.\nTable 5.6.3.7-1: Enumeration AfEvent\n\nThe enumeration \"AfNotifMethod\" represents the notification methods that can be subscribed by an NF service consumer.\nTable 5.6.3.8-1: Enumeration AfNotifMethod\n\nThe enumeration \"QosNotifType\" represents the types of reports bound to the notification of QoS Notification Control.\nTable 5.6.3.9-1: Enumeration QosNotifType\n\nThe enumeration \"TerminationCause\" represents the types of causes the PCF can report when requesting to the NF service consumer the deletion of the \"Individual Application Session Context\" resource.\nTable 5.6.3.10-1: Enumeration TerminationCause\n\n\nThe enumeration \"FlowStatus\" represents whether the service data flow(s) are enabled or disabled.\nTable 5.6.3.12-1: Enumeration FlowStatus\n\nThe enumeration \"MediaComponentResourcesStatus\" indicates whether the PCC rule(s) related to certain media component are active or inactive.\nTable 5.6.3.13-1: Enumeration MediaComponentResourcesStatus\n\nThe enumeration \"FlowUsage\" represents the flow usage of the flows described by a media subcomponent.\nTable 5.6.3.14-1: Enumeration FlowUsage\n\nNOTE:\tA NF service consumer can choose not to identify RTCP flows, e.g. in order to avoid that RTCP flows are always enabled by the server.\nThe enumeration \"RequiredAccessInfo\" represents the access network information required for the \"Individual Application Session Context\" resource.\nTable 5.6.3.15-1: Enumeration RequiredAccessInfo\n\nThe enumeration \"ServiceInfoStatus\" represents whether the NF service consumer provided service information is preliminary or final.\nTable 5.6.3.16-1: Enumeration ServiceInfoStatus\n\nThe enumeration \"SipForkingIndication\" describes if several SIP dialogues are related to an \"Individual Application Session Context\" resource.\nTable 5.6.3.17-1: Enumeration SipForkingIndication\n\nThe enumeration \"AfRequestedData\" represents the information the NF service consumer requested to be exposed.\nTable 5.6.3.18-1: Enumeration AfRequestedData\n\nThe enumeration \"PreemptionControlInformation\" represents how to perform pre-emption among multiple potential media flow candidates of same priority.\nTable 5.6.3.19-1: Enumeration PreemptionControlInformation\n\nThe enumeration \"PrioritySharingIndicator\" represents whether the media component is enabled or disabled for priority sharing with other media components which are assigned the same 5QI and belong to other \"Individual Application Session Context\" resource bound to the same PDU session.\nTable 5.6.3.20-1: Enumeration PrioritySharingIndicator\n\nThis data type is defined in the same way as the \"PreemptionControlInformation\" data type but also allows null value (specified as \"NullValue\" data type).\nThe enumeration \"MpsAction\" indicates the type of action for an MPS request.\nTable 5.6.3.22-1: Enumeration MpsAction\n\nThe enumeration \"AppDetectionNotifType\" represents the types of reports bound to the notification of application detection information.\nTable 5.6.3.23-1: Enumeration AppDetectionNotifType\n\nThe enumeration \"PduSessionStatus\" represents the notification is about PDU session established or terminated.\nTable 5.6.3.24-1: Enumeration PduSessionStatus\n\nThe enumeration \"UplinkDownlinkSupport\" represents whether a capability is supported for the UL, the DL or both, UL and DL.\nTable 5.6.3.25-1: Enumeration UplinkDownlinkSupport\n\nThe enumeration \"L4sNotifType\" represents unavailability or availability again of the ECN marking for L4S support in 5GS.\nTable 5.6.3.26-1: Enumeration L4sNotifType\n\n",
                            "figures_meta_data": [],
                            "tables": [
                                {
                                    "description": "Table 5.6.3.2-1: Simple data types",
                                    "table number": 119,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 5.6.3.3-1: Enumeration MediaType",
                                    "table number": 120,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 5.6.3.4-1: Enumeration ReservPriority",
                                    "table number": 121,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 5.6.3.5-1: Enumeration ServAuthInfo",
                                    "table number": 122,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 5.6.3.6-1: Enumeration SponsoringStatus",
                                    "table number": 123,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 5.6.3.7-1: Enumeration AfEvent",
                                    "table number": 124,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 5.6.3.8-1: Enumeration AfNotifMethod",
                                    "table number": 125,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 5.6.3.9-1: Enumeration QosNotifType",
                                    "table number": 126,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 5.6.3.10-1: Enumeration TerminationCause",
                                    "table number": 127,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 5.6.3.12-1: Enumeration FlowStatus",
                                    "table number": 128,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 5.6.3.13-1: Enumeration MediaComponentResourcesStatus",
                                    "table number": 129,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 5.6.3.14-1: Enumeration FlowUsage",
                                    "table number": 130,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 5.6.3.15-1: Enumeration RequiredAccessInfo",
                                    "table number": 131,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 5.6.3.16-1: Enumeration ServiceInfoStatus",
                                    "table number": 132,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 5.6.3.17-1: Enumeration SipForkingIndication",
                                    "table number": 133,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 5.6.3.18-1: Enumeration AfRequestedData",
                                    "table number": 134,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 5.6.3.19-1: Enumeration PreemptionControlInformation",
                                    "table number": 135,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 5.6.3.20-1: Enumeration PrioritySharingIndicator",
                                    "table number": 136,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 5.6.3.22-1: Enumeration MpsAction",
                                    "table number": 137,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 5.6.3.23-1: Enumeration AppDetectionNotifType",
                                    "table number": 138,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 5.6.3.24-1: Enumeration PduSessionStatus",
                                    "table number": 139,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 5.6.3.25-1: Enumeration UplinkDownlinkSupport",
                                    "table number": 140,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 5.6.3.26-1: Enumeration L4sNotifType",
                                    "table number": 141,
                                    "summary": "",
                                    "name": ""
                                }
                            ]
                        }
                    ]
                },
                {
                    "title": "5.7\tError handling",
                    "description": "",
                    "summary": "",
                    "text_content": "",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": [
                        {
                            "title": "5.7.1\tGeneral",
                            "text_content": "HTTP error handling shall be supported as specified in clause 5.2.4 of 3GPP TS 29.500 [5].\nFor the Npcf_PolicyAuthorization API, HTTP error responses shall be supported as specified in clause 4.8 of 3GPP TS 29.501 [6].\nProtocol errors and application errors specified in table 5.2.7.2-1 of 3GPP TS 29.500 [5] shall be supported for an HTTP method if the corresponding HTTP status codes are specified as mandatory for that HTTP method in table 5.2.7.1-1 of 3GPP TS 29.500 [5].\nIn addition, the requirements in the following clauses shall apply.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "5.7.2\tProtocol Errors",
                            "text_content": "In this Release of the specification, there are no additional protocol errors applicable for the Npcf_PolicyAuthorization API.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "5.7.3\tApplication Errors",
                            "text_content": "The application errors defined for the Npcf_PolicyAuthorization API are listed in table 5.7.3-1.\nTable 5.7.3-1: Application errors\n\n",
                            "figures_meta_data": [],
                            "tables": [
                                {
                                    "description": "Table 5.7.3-1: Application errors",
                                    "table number": 142,
                                    "summary": "",
                                    "name": ""
                                }
                            ]
                        }
                    ]
                },
                {
                    "title": "5.8\tFeature negotiation",
                    "description": "",
                    "summary": "",
                    "text_content": "The optional features in table 5.8-1 are defined for the Npcf_PolicyAuthorization API. They shall be negotiated using the extensibility mechanism defined in clause 6.6.2 of 3GPP TS 29.500 [5].\nWhen requesting the PCF to create an Individual Application Session Context resource the NF service consumer shall indicate the optional features the NF service consumer supports for the Npcf_PolicyAuthorization service by including the \"suppFeat\" attribute in the \"AppSessionContextReqData\" data type of the HTTP POST request.\nThe PCF shall determine the supported features for the created Individual Application Session Context resource as specified in clause 6.6.2 of 3GPP TS 29.500 [5]. The PCF shall indicate the supported features in the HTTP response confirming the creation of the Individual Application Session Context resource by including the \"suppFeat\" attribute in the \"AppSessionContextRespData\" data type.\nTable 5.8-1: Supported Features\n\nEditor's note:\tWhether an independent feature for RT latency is needed is FFS.\nEditor's note:\tWhether and/how to indicate the support of end of burst indication, and provision the flow periodicity information within the Power Saving feature is FFS.\n",
                    "tables": [
                        {
                            "description": "Table 5.8-1: Supported Features",
                            "table number": 143,
                            "summary": "",
                            "name": ""
                        }
                    ],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "5.9\tSecurity",
                    "description": "",
                    "summary": "",
                    "text_content": "As indicated in 3GPP TS 33.501 [25] and 3GPP TS 29.500 [5], the access to the Npcf_PolicyAuthorization API, based on local configuration, may be authorized by means of the OAuth2 protocol (see IETF RFC 6749 [26]), using the \"Client Credentials\" authorization grant, where the NRF (see 3GPP TS 29.510 [27]) plays the role of the authorization server.\nIf OAuth2 authorization is used, an NF service consumer, prior to consuming services offered by the Npcf_PolicyAuthorization API, shall obtain a \"token\" from the authorization server, by invoking the Access Token Request service, as described in 3GPP TS 29.510 [27], clause 5.4.2.2.\nNOTE:\tWhen multiple NRFs are deployed in a network, the NRF used as authorization server is the same NRF that the NF service consumer used for discovering the Npcf_PolicyAuthorization service.\nThe Npcf_PolicyAuthorization API the following scopes for OAuth2 authorization as described in 3GPP TS 29.501 [6], clause 4.x.\nTable 5.9-1: OAuth2 scopes defined in Npcf_PolicyAuthorization API\n\n",
                    "tables": [
                        {
                            "description": "Table 5.9-1: OAuth2 scopes defined in Npcf_PolicyAuthorization API",
                            "table number": 144,
                            "summary": "",
                            "name": ""
                        }
                    ],
                    "figures_meta_data": [],
                    "subsubsections": []
                }
            ]
        },
        {
            "title": "A.1\tGeneral",
            "description": "The present Annex contains an OpenAPI [11] specification of HTTP messages and content bodies used by the Npcf_PolicyAuthorization API.\nThis Annex shall take precedence when being discrepant to other parts of the specification with respect to the encoding of information elements and methods within the API.\nNOTE:\tThe semantics and procedures, as well as conditions, e.g. for the applicability and allowed combinations of attributes or values, not expressed in the OpenAPI definitions but defined in other parts of the specification also apply.\nInformative copies of the OpenAPI specification file contained in this 3GPP Technical Specification are available on a Git-based repository that uses the GitLab software version control system (see clause 5B of the 3GPP TR 21.900 [28] and clause 5.3.1 of the 3GPP TS 29.501 [6] for further information).\n",
            "summary": "",
            "tables": [],
            "figures_meta_data": [],
            "subsections": []
        },
        {
            "title": "A.2\tNpcf_PolicyAuthorization API",
            "description": "\nopenapi: 3.0.0\n\ninfo:\ntitle: Npcf_PolicyAuthorization Service API\nversion: 1.3.0-alpha.5\ndescription: |\nPCF Policy Authorization Service.\n© 2023, 3GPP Organizational Partners (ARIB, ATIS, CCSA, ETSI, TSDSI, TTA, TTC).\nAll rights reserved.\n\nexternalDocs:\ndescription: 3GPP TS 29.514 V18.4.0; 5G System; Policy Authorization Service; Stage 3.\nurl: 'https://www.3gpp.org/ftp/Specs/archive/29_series/29.514/'\n\nservers:\n- url: '{apiRoot}/npcf-policyauthorization/v1'\nvariables:\napiRoot:\ndefault: https://example.com\ndescription: apiRoot as defined in clause 4.4 of 3GPP TS 29.501\n\nsecurity:\n- {}\n- oAuth2ClientCredentials:\n- npcf-policyauthorization\n\npaths:\n/app-sessions:\npost:\nsummary: Creates a new Individual Application Session Context resource\noperationId: PostAppSessions\ntags:\n- Application Sessions (Collection)\nsecurity:\n- {}\n- oAuth2ClientCredentials:\n- npcf-policyauthorization\n- oAuth2ClientCredentials:\n- npcf-policyauthorization\n- npcf-policyauthorization:policy-auth-mgmt\nrequestBody:\ndescription: Contains the information for the creation the resource.\nrequired: true\ncontent:\napplication/json:\nschema:\n$ref: '#/components/schemas/AppSessionContext'\nresponses:\n'201':\ndescription: Successful creation of the resource\ncontent:\napplication/json:\nschema:\n$ref: '#/components/schemas/AppSessionContext'\nheaders:\nLocation:\ndescription: >\nContains the URI of the created individual application session context resource,\naccording to the structure\n{apiRoot}/npcf-policyauthorization/v1/app-sessions/{appSessionId}\nor the URI of the created events subscription sub-resource,\naccording to the structure\n{apiRoot}/npcf-policyauthorization/v1/app-sessions/{appSessionId}\n/events-subscription\nrequired: true\nschema:\ntype: string\n'303':\ndescription: >\nSee Other. The result of the HTTP POST request would be equivalent to the existing\nApplication Session Context.\nheaders:\nLocation:\ndescription: >\nContains the URI of the existing individual Application Session Context resource.\nrequired: true\nschema:\ntype: string\n'400':\n$ref: 'TS29571_CommonData.yaml#/components/responses/400'\n'401':\n$ref: 'TS29571_CommonData.yaml#/components/responses/401'\n'403':\ndescription: Forbidden\ncontent:\napplication/problem+json:\nschema:\n$ref: '#/components/schemas/ExtendedProblemDetails'\nheaders:\nRetry-After:\ndescription: >\nIndicates the time the AF has to wait before making a new request. It can be a\nnon-negative integer (decimal number) indicating the number of seconds the AF\nhas to wait before making a new request or an HTTP-date after which the AF can\nretry a new request.\nschema:\nanyOf:\n- type: integer\n- type: string\n'404':\n$ref: 'TS29571_CommonData.yaml#/components/responses/404'\n'411':\n$ref: 'TS29571_CommonData.yaml#/components/responses/411'\n'413':\n$ref: 'TS29571_CommonData.yaml#/components/responses/413'\n'415':\n$ref: 'TS29571_CommonData.yaml#/components/responses/415'\n'429':\n$ref: 'TS29571_CommonData.yaml#/components/responses/429'\n'500':\n$ref: 'TS29571_CommonData.yaml#/components/responses/500'\n'502':\n$ref: 'TS29571_CommonData.yaml#/components/responses/502'\n'503':\n$ref: 'TS29571_CommonData.yaml#/components/responses/503'\ndefault:\n$ref: 'TS29571_CommonData.yaml#/components/responses/default'\ncallbacks:\nterminationRequest:\n'{$request.body#/ascReqData/notifUri}/terminate':\npost:\nrequestBody:\ndescription: >\nRequest of the termination of the Individual Application Session Context.\nrequired: true\ncontent:\napplication/json:\nschema:\n$ref: '#/components/schemas/TerminationInfo'\nresponses:\n'204':\ndescription: The receipt of the notification is acknowledged.\n'307':\n$ref: 'TS29571_CommonData.yaml#/components/responses/307'\n'308':\n$ref: 'TS29571_CommonData.yaml#/components/responses/308'\n'400':\n$ref: 'TS29571_CommonData.yaml#/components/responses/400'\n'401':\n$ref: 'TS29571_CommonData.yaml#/components/responses/401'\n'403':\n$ref: 'TS29571_CommonData.yaml#/components/responses/403'\n'404':\n$ref: 'TS29571_CommonData.yaml#/components/responses/404'\n'411':\n$ref: 'TS29571_CommonData.yaml#/components/responses/411'\n'413':\n$ref: 'TS29571_CommonData.yaml#/components/responses/413'\n'415':\n$ref: 'TS29571_CommonData.yaml#/components/responses/415'\n'429':\n$ref: 'TS29571_CommonData.yaml#/components/responses/429'\n'500':\n$ref: 'TS29571_CommonData.yaml#/components/responses/500'\n'502':\n$ref: 'TS29571_CommonData.yaml#/components/responses/502'\n'503':\n$ref: 'TS29571_CommonData.yaml#/components/responses/503'\ndefault:\n$ref: 'TS29571_CommonData.yaml#/components/responses/default'\neventNotification:\n'{$request.body#/ascReqData/evSubsc/notifUri}/notify':\npost:\nrequestBody:\ndescription: Notification of an event occurrence in the PCF.\nrequired: true\ncontent:\napplication/json:\nschema:\n$ref: '#/components/schemas/EventsNotification'\nresponses:\n'204':\ndescription: The receipt of the notification is acknowledged.\n'307':\n$ref: 'TS29571_CommonData.yaml#/components/responses/307'\n'308':\n$ref: 'TS29571_CommonData.yaml#/components/responses/308'\n'400':\n$ref: 'TS29571_CommonData.yaml#/components/responses/400'\n'401':\n$ref: 'TS29571_CommonData.yaml#/components/responses/401'\n'403':\n$ref: 'TS29571_CommonData.yaml#/components/responses/403'\n'404':\n$ref: 'TS29571_CommonData.yaml#/components/responses/404'\n'411':\n$ref: 'TS29571_CommonData.yaml#/components/responses/411'\n'413':\n$ref: 'TS29571_CommonData.yaml#/components/responses/413'\n'415':\n$ref: 'TS29571_CommonData.yaml#/components/responses/415'\n'429':\n$ref: 'TS29571_CommonData.yaml#/components/responses/429'\n'500':\n$ref: 'TS29571_CommonData.yaml#/components/responses/500'\n'502':\n$ref: 'TS29571_CommonData.yaml#/components/responses/502'\n'503':\n$ref: 'TS29571_CommonData.yaml#/components/responses/503'\ndefault:\n$ref: 'TS29571_CommonData.yaml#/components/responses/default'\ndetected5GsBridgeForPduSession:\n'{$request.body#/ascReqData/evSubsc/notifUri}/new-bridge':\npost:\nrequestBody:\ndescription: Notification of a new TSC user plane node detected in the PCF.\nrequired: true\ncontent:\napplication/json:\nschema:\n$ref: '#/components/schemas/PduSessionTsnBridge'\nresponses:\n'204':\ndescription: The receipt of the notification is acknowledged.\n'307':\n$ref: 'TS29571_CommonData.yaml#/components/responses/307'\n'308':\n$ref: 'TS29571_CommonData.yaml#/components/responses/308'\n'400':\n$ref: 'TS29571_CommonData.yaml#/components/responses/400'\n'401':\n$ref: 'TS29571_CommonData.yaml#/components/responses/401'\n'403':\n$ref: 'TS29571_CommonData.yaml#/components/responses/403'\n'404':\n$ref: 'TS29571_CommonData.yaml#/components/responses/404'\n'411':\n$ref: 'TS29571_CommonData.yaml#/components/responses/411'\n'413':\n$ref: 'TS29571_CommonData.yaml#/components/responses/413'\n'415':\n$ref: 'TS29571_CommonData.yaml#/components/responses/415'\n'429':\n$ref: 'TS29571_CommonData.yaml#/components/responses/429'\n'500':\n$ref: 'TS29571_CommonData.yaml#/components/responses/500'\n'502':\n$ref: 'TS29571_CommonData.yaml#/components/responses/502'\n'503':\n$ref: 'TS29571_CommonData.yaml#/components/responses/503'\ndefault:\n$ref: 'TS29571_CommonData.yaml#/components/responses/default'\neventNotificationPduSession:\n'{$request.body#/ascReqData/evSubsc/notifUri}/pdu-session':\npost:\nrequestBody:\ndescription: Notification of PDU session established or terminated.\nrequired: true\ncontent:\napplication/json:\nschema:\n$ref: '#/components/schemas/PduSessionEventNotification'\nresponses:\n'204':\ndescription: The receipt of the notification is acknowledged.\n'307':\n$ref: 'TS29571_CommonData.yaml#/components/responses/307'\n'308':\n$ref: 'TS29571_CommonData.yaml#/components/responses/308'\n'400':\n$ref: 'TS29571_CommonData.yaml#/components/responses/400'\n'401':\n$ref: 'TS29571_CommonData.yaml#/components/responses/401'\n'403':\n$ref: 'TS29571_CommonData.yaml#/components/responses/403'\n'404':\n$ref: 'TS29571_CommonData.yaml#/components/responses/404'\n'411':\n$ref: 'TS29571_CommonData.yaml#/components/responses/411'\n'413':\n$ref: 'TS29571_CommonData.yaml#/components/responses/413'\n'415':\n$ref: 'TS29571_CommonData.yaml#/components/responses/415'\n'429':\n$ref: 'TS29571_CommonData.yaml#/components/responses/429'\n'500':\n$ref: 'TS29571_CommonData.yaml#/components/responses/500'\n'502':\n$ref: 'TS29571_CommonData.yaml#/components/responses/502'\n'503':\n$ref: 'TS29571_CommonData.yaml#/components/responses/503'\ndefault:\n$ref: 'TS29571_CommonData.yaml#/components/responses/default'\n\n/app-sessions/pcscf-restoration:\npost:\nsummary: \"Indicates P-CSCF restoration and does not create an Individual Application Session Context\"\noperationId: PcscfRestoration\ntags:\n- PCSCF Restoration Indication\nrequestBody:\ndescription: PCSCF Restoration Indication.\nrequired: true\ncontent:\napplication/json:\nschema:\n$ref: '#/components/schemas/PcscfRestorationRequestData'\nresponses:\n'204':\ndescription: The deletion is confirmed without returning additional data.\n'307':\n$ref: 'TS29571_CommonData.yaml#/components/responses/307'\n'308':\n$ref: 'TS29571_CommonData.yaml#/components/responses/308'\n'400':\n$ref: 'TS29571_CommonData.yaml#/components/responses/400'\n'401':\n$ref: 'TS29571_CommonData.yaml#/components/responses/401'\n'403':\n$ref: 'TS29571_CommonData.yaml#/components/responses/403'\n'404':\n$ref: 'TS29571_CommonData.yaml#/components/responses/404'\n'411':\n$ref: 'TS29571_CommonData.yaml#/components/responses/411'\n'413':\n$ref: 'TS29571_CommonData.yaml#/components/responses/413'\n'415':\n$ref: 'TS29571_CommonData.yaml#/components/responses/415'\n'429':\n$ref: 'TS29571_CommonData.yaml#/components/responses/429'\n'500':\n$ref: 'TS29571_CommonData.yaml#/components/responses/500'\n'502':\n$ref: 'TS29571_CommonData.yaml#/components/responses/502'\n'503':\n$ref: 'TS29571_CommonData.yaml#/components/responses/503'\ndefault:\n$ref: 'TS29571_CommonData.yaml#/components/responses/default'\n\n/app-sessions/{appSessionId}:\nget:\nsummary: \"Reads an existing Individual Application Session Context\"\noperationId: GetAppSession\ntags:\n- Individual Application Session Context (Document)\nsecurity:\n- {}\n- oAuth2ClientCredentials:\n- npcf-policyauthorization\n- oAuth2ClientCredentials:\n- npcf-policyauthorization\n- npcf-policyauthorization:policy-auth-mgmt\nparameters:\n- name: appSessionId\ndescription: String identifying the resource.\nin: path\nrequired: true\nschema:\ntype: string\nresponses:\n'200':\ndescription: A representation of the resource is returned.\ncontent:\napplication/json:\nschema:\n$ref: '#/components/schemas/AppSessionContext'\n'307':\n$ref: 'TS29571_CommonData.yaml#/components/responses/307'\n'308':\n$ref: 'TS29571_CommonData.yaml#/components/responses/308'\n'400':\n$ref: 'TS29571_CommonData.yaml#/components/responses/400'\n'401':\n$ref: 'TS29571_CommonData.yaml#/components/responses/401'\n'403':\n$ref: 'TS29571_CommonData.yaml#/components/responses/403'\n'404':\n$ref: 'TS29571_CommonData.yaml#/components/responses/404'\n'406':\n$ref: 'TS29571_CommonData.yaml#/components/responses/406'\n'429':\n$ref: 'TS29571_CommonData.yaml#/components/responses/429'\n'500':\n$ref: 'TS29571_CommonData.yaml#/components/responses/500'\n'502':\n$ref: 'TS29571_CommonData.yaml#/components/responses/502'\n'503':\n$ref: 'TS29571_CommonData.yaml#/components/responses/503'\ndefault:\n$ref: 'TS29571_CommonData.yaml#/components/responses/default'\npatch:\nsummary: \"Modifies an existing Individual Application Session Context\"\noperationId: ModAppSession\ntags:\n- Individual Application Session Context (Document)\nsecurity:\n- {}\n- oAuth2ClientCredentials:\n- npcf-policyauthorization\n- oAuth2ClientCredentials:\n- npcf-policyauthorization\n- npcf-policyauthorization:policy-auth-mgmt\nparameters:\n- name: appSessionId\ndescription: String identifying the resource.\nin: path\nrequired: true\nschema:\ntype: string\nrequestBody:\ndescription: Modification of the resource.\nrequired: true\ncontent:\napplication/merge-patch+json:\nschema:\n$ref: '#/components/schemas/AppSessionContextUpdateDataPatch'\nresponses:\n'200':\ndescription: >\nSuccessful modification of the resource and a representation of that resource is\nreturned.\ncontent:\napplication/json:\nschema:\n$ref: '#/components/schemas/AppSessionContext'\n'204':\ndescription: The successful modification.\n'307':\n$ref: 'TS29571_CommonData.yaml#/components/responses/307'\n'308':\n$ref: 'TS29571_CommonData.yaml#/components/responses/308'\n'400':\n$ref: 'TS29571_CommonData.yaml#/components/responses/400'\n'401':\n$ref: 'TS29571_CommonData.yaml#/components/responses/401'\n'403':\ndescription: Forbidden\ncontent:\napplication/problem+json:\nschema:\n$ref: '#/components/schemas/ExtendedProblemDetails'\nheaders:\nRetry-After:\ndescription: >\nIndicates the time the AF has to wait before making a new request. It can be a\nnon-negative integer (decimal number) indicating the number of seconds the AF has\nto wait before making a new request or an HTTP-date after which the AF can retry\na new request.\nschema:\nanyOf:\n- type: integer\n- type: string\n'404':\n$ref: 'TS29571_CommonData.yaml#/components/responses/404'\n'411':\n$ref: 'TS29571_CommonData.yaml#/components/responses/411'\n'413':\n$ref: 'TS29571_CommonData.yaml#/components/responses/413'\n'415':\n$ref: 'TS29571_CommonData.yaml#/components/responses/415'\n'429':\n$ref: 'TS29571_CommonData.yaml#/components/responses/429'\n'500':\n$ref: 'TS29571_CommonData.yaml#/components/responses/500'\n'502':\n$ref: 'TS29571_CommonData.yaml#/components/responses/502'\n'503':\n$ref: 'TS29571_CommonData.yaml#/components/responses/503'\ndefault:\n$ref: 'TS29571_CommonData.yaml#/components/responses/default'\ncallbacks:\neventNotification:\n'{$request.body#/ascReqData/evSubsc/notifUri}/notify':\npost:\nrequestBody:\ndescription: Notification of an event occurrence in the PCF.\nrequired: true\ncontent:\napplication/json:\nschema:\n$ref: '#/components/schemas/EventsNotification'\nresponses:\n'204':\ndescription: The receipt of the notification is acknowledged\n'307':\n$ref: 'TS29571_CommonData.yaml#/components/responses/307'\n'308':\n$ref: 'TS29571_CommonData.yaml#/components/responses/308'\n'400':\n$ref: 'TS29571_CommonData.yaml#/components/responses/400'\n'401':\n$ref: 'TS29571_CommonData.yaml#/components/responses/401'\n'403':\n$ref: 'TS29571_CommonData.yaml#/components/responses/403'\n'404':\n$ref: 'TS29571_CommonData.yaml#/components/responses/404'\n'411':\n$ref: 'TS29571_CommonData.yaml#/components/responses/411'\n'413':\n$ref: 'TS29571_CommonData.yaml#/components/responses/413'\n'415':\n$ref: 'TS29571_CommonData.yaml#/components/responses/415'\n'429':\n$ref: 'TS29571_CommonData.yaml#/components/responses/429'\n'500':\n$ref: 'TS29571_CommonData.yaml#/components/responses/500'\n'502':\n$ref: 'TS29571_CommonData.yaml#/components/responses/502'\n'503':\n$ref: 'TS29571_CommonData.yaml#/components/responses/503'\ndefault:\n$ref: 'TS29571_CommonData.yaml#/components/responses/default'\n\n/app-sessions/{appSessionId}/delete:\npost:\nsummary: \"Deletes an existing Individual Application Session Context\"\noperationId: DeleteAppSession\ntags:\n- Individual Application Session Context (Document)\nsecurity:\n- {}\n- oAuth2ClientCredentials:\n- npcf-policyauthorization\n- oAuth2ClientCredentials:\n- npcf-policyauthorization\n- npcf-policyauthorization:policy-auth-mgmt\nparameters:\n- name: appSessionId\ndescription: String identifying the Individual Application Session Context resource.\nin: path\nrequired: true\nschema:\ntype: string\nrequestBody:\ndescription: >\nDeletion of the Individual Application Session Context resource, req notification.\nrequired: false\ncontent:\napplication/json:\nschema:\n$ref: '#/components/schemas/EventsSubscReqData'\nresponses:\n'200':\ndescription: The deletion of the resource is confirmed and a resource is returned.\ncontent:\napplication/json:\nschema:\n$ref: '#/components/schemas/AppSessionContext'\n'204':\ndescription: The deletion is confirmed without returning additional data.\n'307':\n$ref: 'TS29571_CommonData.yaml#/components/responses/307'\n'308':\n$ref: 'TS29571_CommonData.yaml#/components/responses/308'\n'400':\n$ref: 'TS29571_CommonData.yaml#/components/responses/400'\n'401':\n$ref: 'TS29571_CommonData.yaml#/components/responses/401'\n'403':\n$ref: 'TS29571_CommonData.yaml#/components/responses/403'\n'404':\n$ref: 'TS29571_CommonData.yaml#/components/responses/404'\n'411':\n$ref: 'TS29571_CommonData.yaml#/components/responses/411'\n'413':\n$ref: 'TS29571_CommonData.yaml#/components/responses/413'\n'415':\n$ref: 'TS29571_CommonData.yaml#/components/responses/415'\n'429':\n$ref: 'TS29571_CommonData.yaml#/components/responses/429'\n'500':\n$ref: 'TS29571_CommonData.yaml#/components/responses/500'\n'502':\n$ref: 'TS29571_CommonData.yaml#/components/responses/502'\n'503':\n$ref: 'TS29571_CommonData.yaml#/components/responses/503'\ndefault:\n$ref: 'TS29571_CommonData.yaml#/components/responses/default'\n\n/app-sessions/{appSessionId}/events-subscription:\nput:\nsummary: \"creates or modifies an Events Subscription subresource\"\noperationId: updateEventsSubsc\ntags:\n- Events Subscription (Document)\nparameters:\n- name: appSessionId\ndescription: String identifying the Events Subscription resource.\nin: path\nrequired: true\nschema:\ntype: string\nrequestBody:\ndescription: Creation or modification of an Events Subscription resource.\nrequired: true\ncontent:\napplication/json:\nschema:\n$ref: '#/components/schemas/EventsSubscReqData'\nresponses:\n'201':\ndescription: >\nThe creation of the Events Subscription resource is confirmed and its representation is\nreturned.\ncontent:\napplication/json:\nschema:\n$ref: '#/components/schemas/EventsSubscPutData'\nheaders:\nLocation:\ndescription: >\nContains the URI of the created Events Subscription resource,\naccording to the structure\n{apiRoot}/npcf-policyauthorization/v1/app-sessions/{appSessionId}/\nevents-subscription\nrequired: true\nschema:\ntype: string\n'200':\ndescription: >\nThe modification of the Events Subscription resource is confirmed its representation is\nreturned.\ncontent:\napplication/json:\nschema:\n$ref: '#/components/schemas/EventsSubscPutData'\n'204':\ndescription: >\nThe modification of the Events Subscription subresource is confirmed without returning\nadditional data.\n'307':\n$ref: 'TS29571_CommonData.yaml#/components/responses/307'\n'308':\n$ref: 'TS29571_CommonData.yaml#/components/responses/308'\n'400':\n$ref: 'TS29571_CommonData.yaml#/components/responses/400'\n'401':\n$ref: 'TS29571_CommonData.yaml#/components/responses/401'\n'403':\n$ref: 'TS29571_CommonData.yaml#/components/responses/403'\n'404':\n$ref: 'TS29571_CommonData.yaml#/components/responses/404'\n'411':\n$ref: 'TS29571_CommonData.yaml#/components/responses/411'\n'413':\n$ref: 'TS29571_CommonData.yaml#/components/responses/413'\n'415':\n$ref: 'TS29571_CommonData.yaml#/components/responses/415'\n'429':\n$ref: 'TS29571_CommonData.yaml#/components/responses/429'\n'500':\n$ref: 'TS29571_CommonData.yaml#/components/responses/500'\n'502':\n$ref: 'TS29571_CommonData.yaml#/components/responses/502'\n'503':\n$ref: 'TS29571_CommonData.yaml#/components/responses/503'\ndefault:\n$ref: 'TS29571_CommonData.yaml#/components/responses/default'\ncallbacks:\neventNotification:\n'{$request.body#/notifUri}/notify':\npost:\nrequestBody:\ndescription: >\nContains the information for the notification of an event occurrence in the PCF.\nrequired: true\ncontent:\napplication/json:\nschema:\n$ref: '#/components/schemas/EventsNotification'\nresponses:\n'204':\ndescription: The receipt of the notification is acknowledged.\n'307':\n$ref: 'TS29571_CommonData.yaml#/components/responses/307'\n'308':\n$ref: 'TS29571_CommonData.yaml#/components/responses/308'\n'400':\n$ref: 'TS29571_CommonData.yaml#/components/responses/400'\n'401':\n$ref: 'TS29571_CommonData.yaml#/components/responses/401'\n'403':\n$ref: 'TS29571_CommonData.yaml#/components/responses/403'\n'404':\n$ref: 'TS29571_CommonData.yaml#/components/responses/404'\n'411':\n$ref: 'TS29571_CommonData.yaml#/components/responses/411'\n'413':\n$ref: 'TS29571_CommonData.yaml#/components/responses/413'\n'415':\n$ref: 'TS29571_CommonData.yaml#/components/responses/415'\n'429':\n$ref: 'TS29571_CommonData.yaml#/components/responses/429'\n'500':\n$ref: 'TS29571_CommonData.yaml#/components/responses/500'\n'502':\n$ref: 'TS29571_CommonData.yaml#/components/responses/502'\n'503':\n$ref: 'TS29571_CommonData.yaml#/components/responses/503'\ndefault:\n$ref: 'TS29571_CommonData.yaml#/components/responses/default'\ndelete:\nsummary: deletes the Events Subscription subresource\noperationId: DeleteEventsSubsc\ntags:\n- Events Subscription (Document)\nparameters:\n- name: appSessionId\ndescription: String identifying the Individual Application Session Context resource.\nin: path\nrequired: true\nschema:\ntype: string\nresponses:\n'204':\ndescription: >\nThe deletion of the of the Events Subscription sub-resource is confirmed without\nreturning additional data.\n'307':\n$ref: 'TS29571_CommonData.yaml#/components/responses/307'\n'308':\n$ref: 'TS29571_CommonData.yaml#/components/responses/308'\n'400':\n$ref: 'TS29571_CommonData.yaml#/components/responses/400'\n'401':\n$ref: 'TS29571_CommonData.yaml#/components/responses/401'\n'403':\n$ref: 'TS29571_CommonData.yaml#/components/responses/403'\n'404':\n$ref: 'TS29571_CommonData.yaml#/components/responses/404'\n'429':\n$ref: 'TS29571_CommonData.yaml#/components/responses/429'\n'500':\n$ref: 'TS29571_CommonData.yaml#/components/responses/500'\n'502':\n$ref: 'TS29571_CommonData.yaml#/components/responses/502'\n'503':\n$ref: 'TS29571_CommonData.yaml#/components/responses/503'\ndefault:\n$ref: 'TS29571_CommonData.yaml#/components/responses/default'\n\ncomponents:\n\nsecuritySchemes:\noAuth2ClientCredentials:\ntype: oauth2\nflows:\nclientCredentials:\ntokenUrl: '{nrfApiRoot}/oauth2/token'\nscopes:\nnpcf-policyauthorization: Access to the Npcf_PolicyAuthorization API\nnpcf-policyauthorization:policy-auth-mgmt: >\nAccess to service operations applying to PCF Policy Authorization for creation,\nupdation, deletion, retrieval.\n\nschemas:\n\nAppSessionContext:\ndescription: Represents an Individual Application Session Context resource.\ntype: object\nproperties:\nascReqData:\n$ref: '#/components/schemas/AppSessionContextReqData'\nascRespData:\n$ref: '#/components/schemas/AppSessionContextRespData'\nevsNotif:\n$ref: '#/components/schemas/EventsNotification'\n\nAppSessionContextReqData:\ndescription: Identifies the service requirements of an Individual Application Session Context.\ntype: object\nrequired:\n- notifUri\n- suppFeat\noneOf:\n- required: [ueIpv4]\n- required: [ueIpv6]\n- required: [ueMac]\nproperties:\nafAppId:\n$ref: '#/components/schemas/AfAppId'\nafChargId:\n$ref: 'TS29571_CommonData.yaml#/components/schemas/ApplicationChargingId'\nafReqData:\n$ref: '#/components/schemas/AfRequestedData'\nafRoutReq:\n$ref: '#/components/schemas/AfRoutingRequirement'\nafSfcReq:\n$ref: '#/components/schemas/AfSfcRequirement'\naspId:\n$ref: '#/components/schemas/AspId'\nbdtRefId:\n$ref: 'TS29122_CommonData.yaml#/components/schemas/BdtReferenceId'\ndnn:\n$ref: 'TS29571_CommonData.yaml#/components/schemas/Dnn'\nevSubsc:\n$ref: '#/components/schemas/EventsSubscReqData'\nmcpttId:\ndescription: Indication of MCPTT service request.\ntype: string\nmcVideoId:\ndescription: Indication of MCVideo service request.\ntype: string\nmedComponents:\ntype: object\nadditionalProperties:\n$ref: '#/components/schemas/MediaComponent'\nminProperties: 1\ndescription: >\nContains media component information. The key of the map is the medCompN attribute.\nmultiModalId:\n$ref: '#/components/schemas/MultiModalId'\nipDomain:\ntype: string\nmpsAction:\n$ref: '#/components/schemas/MpsAction'\nmpsId:\ndescription: Indication of MPS service request.\ntype: string\nmcsId:\ndescription: Indication of MCS service request.\ntype: string\npreemptControlInfo:\n$ref: '#/components/schemas/PreemptionControlInformation'\nqosDuration:\n$ref: 'TS29571_CommonData.yaml#/components/schemas/DurationSec'\nqosInactInt:\n$ref: 'TS29571_CommonData.yaml#/components/schemas/DurationSec'\nresPrio:\n$ref: '#/components/schemas/ReservPriority'\nservInfStatus:\n$ref: '#/components/schemas/ServiceInfoStatus'\nnotifUri:\n$ref: 'TS29571_CommonData.yaml#/components/schemas/Uri'\nservUrn:\n$ref: '#/components/schemas/ServiceUrn'\nsliceInfo:\n$ref: 'TS29571_CommonData.yaml#/components/schemas/Snssai'\nsponId:\n$ref: '#/components/schemas/SponId'\nsponStatus:\n$ref: '#/components/schemas/SponsoringStatus'\nsupi:\n$ref: 'TS29571_CommonData.yaml#/components/schemas/Supi'\ngpsi:\n$ref: 'TS29571_CommonData.yaml#/components/schemas/Gpsi'\nsuppFeat:\n$ref: 'TS29571_CommonData.yaml#/components/schemas/SupportedFeatures'\nueIpv4:\n$ref: 'TS29571_CommonData.yaml#/components/schemas/Ipv4Addr'\nueIpv6:\n$ref: 'TS29571_CommonData.yaml#/components/schemas/Ipv6Addr'\nueMac:\n$ref: 'TS29571_CommonData.yaml#/components/schemas/MacAddr48'\ntsnBridgeManCont:\n$ref: 'TS29512_Npcf_SMPolicyControl.yaml#/components/schemas/BridgeManagementContainer'\ntsnPortManContDstt:\n$ref: 'TS29512_Npcf_SMPolicyControl.yaml#/components/schemas/PortManagementContainer'\ntsnPortManContNwtts:\ntype: array\nitems:\n$ref: 'TS29512_Npcf_SMPolicyControl.yaml#/components/schemas/PortManagementContainer'\nminItems: 1\ntscNotifUri:\n$ref: 'TS29571_CommonData.yaml#/components/schemas/Uri'\ntscNotifCorreId:\ntype: string\ndescription: >\nCorrelation identifier for TSC management information notifications.\n\nAppSessionContextRespData:\ndescription: >\nDescribes the authorization data of an Individual Application Session Context created by\nthe PCF.\ntype: object\nproperties:\nservAuthInfo:\n$ref: '#/components/schemas/ServAuthInfo'\nueIds:\ntype: array\nitems:\n$ref: '#/components/schemas/UeIdentityInfo'\nminItems: 1\nsuppFeat:\n$ref: 'TS29571_CommonData.yaml#/components/schemas/SupportedFeatures'\n\nAppSessionContextUpdateDataPatch:\ndescription: >\nIdentifies the modifications to an Individual Application Session Context and/or the\nmodifications to the sub-resource Events Subscription.\ntype: object\nproperties:\nascReqData:\n$ref: '#/components/schemas/AppSessionContextUpdateData'\n\nAppSessionContextUpdateData:\ndescription: >\nIdentifies the modifications to the \"ascReqData\" property of an Individual Application\nSession Context which may include the modifications to the sub-resource Events Subscription.\ntype: object\nproperties:\nafAppId:\n$ref: '#/components/schemas/AfAppId'\nafRoutReq:\n$ref: '#/components/schemas/AfRoutingRequirementRm'\nafSfcReq:\n$ref: '#/components/schemas/AfSfcRequirement'\naspId:\n$ref: '#/components/schemas/AspId'\nbdtRefId:\n$ref: 'TS29122_CommonData.yaml#/components/schemas/BdtReferenceId'\nevSubsc:\n$ref: '#/components/schemas/EventsSubscReqDataRm'\nmcpttId:\ndescription: Indication of MCPTT service request.\ntype: string\nmcVideoId:\ndescription: Indication of modification of MCVideo service.\ntype: string\nmedComponents:\ntype: object\nadditionalProperties:\n$ref: '#/components/schemas/MediaComponentRm'\nminProperties: 1\ndescription: >\nContains media component information. The key of the map is the medCompN attribute.\nmpsAction:\n$ref: '#/components/schemas/MpsAction'\nmpsId:\ndescription: Indication of MPS service request.\ntype: string\nmcsId:\ndescription: Indication of MCS service request.\ntype: string\npreemptControlInfo:\n$ref: '#/components/schemas/PreemptionControlInformationRm'\nqosDuration:\n$ref: 'TS29571_CommonData.yaml#/components/schemas/DurationSecRm'\nqosInactInt:\n$ref: 'TS29571_CommonData.yaml#/components/schemas/DurationSecRm'\nresPrio:\n$ref: '#/components/schemas/ReservPriority'\nservInfStatus:\n$ref: '#/components/schemas/ServiceInfoStatus'\nsipForkInd:\n$ref: '#/components/schemas/SipForkingIndication'\nsponId:\n$ref: '#/components/schemas/SponId'\nsponStatus:\n$ref: '#/components/schemas/SponsoringStatus'\ntsnBridgeManCont:\n$ref: 'TS29512_Npcf_SMPolicyControl.yaml#/components/schemas/BridgeManagementContainer'\ntsnPortManContDstt:\n$ref: 'TS29512_Npcf_SMPolicyControl.yaml#/components/schemas/PortManagementContainer'\ntsnPortManContNwtts:\ntype: array\nitems:\n$ref: 'TS29512_Npcf_SMPolicyControl.yaml#/components/schemas/PortManagementContainer'\nminItems: 1\ntscNotifUri:\n$ref: 'TS29571_CommonData.yaml#/components/schemas/Uri'\ntscNotifCorreId:\ntype: string\ndescription: >\nCorrelation identifier for TSC management information notifications.\n\nEventsSubscReqData:\ndescription: Identifies the events the application subscribes to.\ntype: object\nrequired:\n- events\nproperties:\nevents:\ntype: array\nitems:\n$ref: '#/components/schemas/AfEventSubscription'\nminItems: 1\nnotifUri:\n$ref: 'TS29571_CommonData.yaml#/components/schemas/Uri'\nreqQosMonParams:\ntype: array\nitems:\n$ref: 'TS29512_Npcf_SMPolicyControl.yaml#/components/schemas/RequestedQosMonitoringParameter'\nminItems: 1\nqosMon:\n$ref: '#/components/schemas/QosMonitoringInformation'\nqosMonDatRate:\n$ref: '#/components/schemas/QosMonitoringInformation'\npdvReqMonParams:\ntype: array\nitems:\n$ref: 'TS29512_Npcf_SMPolicyControl.yaml#/components/schemas/RequestedQosMonitoringParameter'\nminItems: 1\npdvMon:\n$ref: '#/components/schemas/QosMonitoringInformation'\ncongestMon:\n$ref: '#/components/schemas/QosMonitoringInformation'\nreqAnis:\ntype: array\nitems:\n$ref: '#/components/schemas/RequiredAccessInfo'\nminItems: 1\nusgThres:\n$ref: 'TS29122_CommonData.yaml#/components/schemas/UsageThreshold'\nnotifCorreId:\ntype: string\nafAppIds:\ntype: array\nitems:\n$ref: '#/components/schemas/AfAppId'\nminItems: 1\ndirectNotifInd:\ntype: boolean\navrgWndw:\n$ref: 'TS29571_CommonData.yaml#/components/schemas/AverWindow'\n\nEventsSubscReqDataRm:\ndescription: >\nThis data type is defined in the same way as the EventsSubscReqData data type, but with\nthe OpenAPI nullable property set to true.\ntype: object\nrequired:\n- events\nproperties:\nevents:\ntype: array\nitems:\n$ref: '#/components/schemas/AfEventSubscription'\nnotifUri:\n$ref: 'TS29571_CommonData.yaml#/components/schemas/Uri'\nreqQosMonParams:\ntype: array\nitems:\n$ref: 'TS29512_Npcf_SMPolicyControl.yaml#/components/schemas/RequestedQosMonitoringParameter'\nminItems: 1\nqosMon:\n$ref: '#/components/schemas/QosMonitoringInformationRm'\nqosMonDatRate:\n$ref: '#/components/schemas/QosMonitoringInformationRm'\npdvReqMonParams:\ntype: array\nitems:\n$ref: 'TS29512_Npcf_SMPolicyControl.yaml#/components/schemas/RequestedQosMonitoringParameter'\nminItems: 1\npdvMon:\n$ref: '#/components/schemas/QosMonitoringInformationRm'\ncongestMon:\n$ref: '#/components/schemas/QosMonitoringInformation'\nreqAnis:\ntype: array\nitems:\n$ref: '#/components/schemas/RequiredAccessInfo'\nminItems: 1\nusgThres:\n$ref: 'TS29122_CommonData.yaml#/components/schemas/UsageThresholdRm'\nnotifCorreId:\ntype: string\ndirectNotifInd:\ntype: boolean\nnullable: true\navrgWndw:\n$ref: 'TS29571_CommonData.yaml#/components/schemas/AverWindowRm'\nnullable: true\n\nMediaComponent:\ndescription: Identifies a media component.\ntype: object\nrequired:\n- medCompN\nallOf:\n- not:\nrequired: [altSerReqs,altSerReqsData]\n- not:\nrequired: [qosReference,altSerReqsData]\nproperties:\nafAppId:\n$ref: '#/components/schemas/AfAppId'\nafRoutReq:\n$ref: '#/components/schemas/AfRoutingRequirement'\nafSfcReq:\n$ref: '#/components/schemas/AfSfcRequirement'\nqosReference:\ntype: string\ndisUeNotif:\ntype: boolean\naltSerReqs:\ntype: array\nitems:\ntype: string\nminItems: 1\naltSerReqsData:\ntype: array\nitems:\n$ref: '#/components/schemas/AlternativeServiceRequirementsData'\nminItems: 1\ndescription: >\nContains alternative service requirements that include individual QoS parameter sets.\ncontVer:\n$ref: '#/components/schemas/ContentVersion'\ncodecs:\ntype: array\nitems:\n$ref: '#/components/schemas/CodecData'\nminItems: 1\nmaxItems: 2\ndesMaxLatency:\n$ref: 'TS29571_CommonData.yaml#/components/schemas/Float'\ndesMaxLoss:\n$ref: 'TS29571_CommonData.yaml#/components/schemas/Float'\nflusId:\ntype: string\nfStatus:\n$ref: '#/components/schemas/FlowStatus'\nmarBwDl:\n$ref: 'TS29571_CommonData.yaml#/components/schemas/BitRate'\nmarBwUl:\n$ref: 'TS29571_CommonData.yaml#/components/schemas/BitRate'\nmaxPacketLossRateDl:\n$ref: 'TS29571_CommonData.yaml#/components/schemas/PacketLossRateRm'\nmaxPacketLossRateUl:\n$ref: 'TS29571_CommonData.yaml#/components/schemas/PacketLossRateRm'\nmaxSuppBwDl:\n$ref: 'TS29571_CommonData.yaml#/components/schemas/BitRate'\nmaxSuppBwUl:\n$ref: 'TS29571_CommonData.yaml#/components/schemas/BitRate'\nmedCompN:\ntype: integer\nmedSubComps:\ntype: object\nadditionalProperties:\n$ref: '#/components/schemas/MediaSubComponent'\nminProperties: 1\ndescription: >\nContains the requested bitrate and filters for the set of service data flows identified\nby their common flow identifier. The key of the map is the fNum attribute.\nmedType:\n$ref: '#/components/schemas/MediaType'\nminDesBwDl:\n$ref: 'TS29571_CommonData.yaml#/components/schemas/BitRate'\nminDesBwUl:\n$ref: 'TS29571_CommonData.yaml#/components/schemas/BitRate'\nmirBwDl:\n$ref: 'TS29571_CommonData.yaml#/components/schemas/BitRate'\nmirBwUl:\n$ref: 'TS29571_CommonData.yaml#/components/schemas/BitRate'\npreemptCap:\n$ref: 'TS29571_CommonData.yaml#/components/schemas/PreemptionCapability'\npreemptVuln:\n$ref: 'TS29571_CommonData.yaml#/components/schemas/PreemptionVulnerability'\nprioSharingInd:\n$ref: '#/components/schemas/PrioritySharingIndicator'\nresPrio:\n$ref: '#/components/schemas/ReservPriority'\nrrBw:\n$ref: 'TS29571_CommonData.yaml#/components/schemas/BitRate'\nrsBw:\n$ref: 'TS29571_CommonData.yaml#/components/schemas/BitRate'\nsharingKeyDl:\n$ref: 'TS29571_CommonData.yaml#/components/schemas/Uint32'\nsharingKeyUl:\n$ref: 'TS29571_CommonData.yaml#/components/schemas/Uint32'\ntsnQos:\n$ref: '#/components/schemas/TsnQosContainer'\ntscaiInputDl:\n$ref: '#/components/schemas/TscaiInputContainer'\ntscaiInputUl:\n$ref: '#/components/schemas/TscaiInputContainer'\ntscaiTimeDom:\n$ref: 'TS29571_CommonData.yaml#/components/schemas/Uinteger'\ncapBatAdaptation:\ntype: boolean\ndescription: >\nIndicates the capability for AF to adjust the burst sending time, when it is supported\nand set to \"true\". The default value is \"false\" if omitted.\nrTLatencyInd:\ntype: boolean\ndescription: >\nIndicates the service data flow needs to meet the Round-Trip (RT) latency requirement of\nthe service, when it is included and set to \"true\". The default value is \"false\" if\nomitted.\npduSetQos:\n$ref: 'TS29571_CommonData.yaml#/components/schemas/PduSetQosPara'\npduSetProtDesc:\n$ref: '#/components/schemas/ProtoDesc'\nperiodInfo:\n$ref: '#/components/schemas/PeriodicityInfo'\nl4sInd:\n$ref: '#/components/schemas/UplinkDownlinkSupport'\n\nMediaComponentRm:\ndescription: >\nThis data type is defined in the same way as the MediaComponent data type, but with the\nOpenAPI nullable property set to true.\ntype: object\nrequired:\n- medCompN\nnot:\nrequired: [altSerReqs,altSerReqsData]\nproperties:\nafAppId:\n$ref: '#/components/schemas/AfAppId'\nafRoutReq:\n$ref: '#/components/schemas/AfRoutingRequirementRm'\nafSfcReq:\n$ref: '#/components/schemas/AfSfcRequirement'\nqosReference:\ntype: string\nnullable: true\naltSerReqs:\ntype: array\nitems:\ntype: string\nminItems: 1\nnullable: true\naltSerReqsData:\ntype: array\nitems:\n$ref: '#/components/schemas/AlternativeServiceRequirementsData'\nminItems: 1\ndescription: >\nContains removable alternative service requirements that include individual QoS\nparameter sets.\nnullable: true\ndisUeNotif:\ntype: boolean\ncontVer:\n$ref: '#/components/schemas/ContentVersion'\ncodecs:\ntype: array\nitems:\n$ref: '#/components/schemas/CodecData'\nminItems: 1\nmaxItems: 2\ndesMaxLatency:\n$ref: 'TS29571_CommonData.yaml#/components/schemas/FloatRm'\ndesMaxLoss:\n$ref: 'TS29571_CommonData.yaml#/components/schemas/FloatRm'\nflusId:\ntype: string\nnullable: true\nfStatus:\n$ref: '#/components/schemas/FlowStatus'\nmarBwDl:\n$ref: 'TS29571_CommonData.yaml#/components/schemas/BitRateRm'\nmarBwUl:\n$ref: 'TS29571_CommonData.yaml#/components/schemas/BitRateRm'\nmaxPacketLossRateDl:\n$ref: 'TS29571_CommonData.yaml#/components/schemas/PacketLossRateRm'\nmaxPacketLossRateUl:\n$ref: 'TS29571_CommonData.yaml#/components/schemas/PacketLossRateRm'\nmaxSuppBwDl:\n$ref: 'TS29571_CommonData.yaml#/components/schemas/BitRateRm'\nmaxSuppBwUl:\n$ref: 'TS29571_CommonData.yaml#/components/schemas/BitRateRm'\nmedCompN:\ntype: integer\nmedSubComps:\ntype: object\nadditionalProperties:\n$ref: '#/components/schemas/MediaSubComponentRm'\nminProperties: 1\ndescription: >\nContains the requested bitrate and filters for the set of service data flows identified\nby their common flow identifier. The key of the map is the fNum attribute.\nmedType:\n$ref: '#/components/schemas/MediaType'\nminDesBwDl:\n$ref: 'TS29571_CommonData.yaml#/components/schemas/BitRateRm'\nminDesBwUl:\n$ref: 'TS29571_CommonData.yaml#/components/schemas/BitRateRm'\nmirBwDl:\n$ref: 'TS29571_CommonData.yaml#/components/schemas/BitRateRm'\nmirBwUl:\n$ref: 'TS29571_CommonData.yaml#/components/schemas/BitRateRm'\npreemptCap:\n$ref: 'TS29571_CommonData.yaml#/components/schemas/PreemptionCapabilityRm'\npreemptVuln:\n$ref: 'TS29571_CommonData.yaml#/components/schemas/PreemptionVulnerabilityRm'\nprioSharingInd:\n$ref: '#/components/schemas/PrioritySharingIndicator'\nresPrio:\n$ref: '#/components/schemas/ReservPriority'\nrrBw:\n$ref: 'TS29571_CommonData.yaml#/components/schemas/BitRateRm'\nrsBw:\n$ref: 'TS29571_CommonData.yaml#/components/schemas/BitRateRm'\nsharingKeyDl:\n$ref: 'TS29571_CommonData.yaml#/components/schemas/Uint32Rm'\nsharingKeyUl:\n$ref: 'TS29571_CommonData.yaml#/components/schemas/Uint32Rm'\ntsnQos:\n$ref: '#/components/schemas/TsnQosContainerRm'\ntscaiInputDl:\n$ref: '#/components/schemas/TscaiInputContainer'\ntscaiInputUl:\n$ref: '#/components/schemas/TscaiInputContainer'\ntscaiTimeDom:\n$ref: 'TS29571_CommonData.yaml#/components/schemas/Uinteger'\ncapBatAdaptation:\ntype: boolean\ndescription: >\nIndicates the capability for AF to adjust the burst sending time, when it is supported\nand set to \"true\". The default value is \"false\" if omitted.\nrTLatencyInd:\ntype: boolean\ndescription: >\nIndicates the service data flow needs to meet the Round-Trip (RT) latency requirement of\nthe service, when it is included and set to \"true\". The default value is \"false\" if\nomitted.\npduSetQos:\n$ref: 'TS29571_CommonData.yaml#/components/schemas/PduSetQosParaRm'\npduSetProtDesc:\n$ref: '#/components/schemas/ProtoDescRm'\nperiodInfo:\n$ref: '#/components/schemas/PeriodicityInfo'\nl4sInd:\n$ref: '#/components/schemas/UplinkDownlinkSupport'\nnullable: true\n\nMediaSubComponent:\ndescription: Identifies a media subcomponent.\ntype: object\nrequired:\n- fNum\nproperties:\nafSigProtocol:\n$ref: 'TS29512_Npcf_SMPolicyControl.yaml#/components/schemas/AfSigProtocol'\nethfDescs:\ntype: array\nitems:\n$ref: '#/components/schemas/EthFlowDescription'\nminItems: 1\nmaxItems: 2\nfNum:\ntype: integer\nfDescs:\ntype: array\nitems:\n$ref: '#/components/schemas/FlowDescription'\nminItems: 1\nmaxItems: 2\naddInfoFlowDescs:\ntype: array\nitems:\n$ref: '#/components/schemas/AddFlowDescriptionInfo'\nminItems: 1\nmaxItems: 2\ndescription: >\nRepresents additional flow description information (flow label and IPsec SPI)\nper Uplink and/or Downlink IP flows.\nfStatus:\n$ref: '#/components/schemas/FlowStatus'\nmarBwDl:\n$ref: 'TS29571_CommonData.yaml#/components/schemas/BitRate'\nmarBwUl:\n$ref: 'TS29571_CommonData.yaml#/components/schemas/BitRate'\ntosTrCl:\n$ref: '#/components/schemas/TosTrafficClass'\nflowUsage:\n$ref: '#/components/schemas/FlowUsage'\nevSubsc:\n$ref: '#/components/schemas/EventsSubscReqData'\n\nMediaSubComponentRm:\ndescription: >\nThis data type is defined in the same way as the MediaSubComponent data type, but with the\nOpenAPI nullable property set to true. Removable attributes marBwDl and marBwUl are defined\nwith the corresponding removable data type.\ntype: object\nrequired:\n- fNum\nproperties:\nafSigProtocol:\n$ref: 'TS29512_Npcf_SMPolicyControl.yaml#/components/schemas/AfSigProtocol'\nethfDescs:\ntype: array\nitems:\n$ref: '#/components/schemas/EthFlowDescription'\nminItems: 1\nmaxItems: 2\nnullable: true\nfNum:\ntype: integer\nfDescs:\ntype: array\nitems:\n$ref: '#/components/schemas/FlowDescription'\nminItems: 1\nmaxItems: 2\nnullable: true\naddInfoFlowDescs:\ntype: array\nitems:\n$ref: '#/components/schemas/AddFlowDescriptionInfo'\nminItems: 1\nmaxItems: 2\nnullable: true\ndescription: >\nRepresents additional flow description information (flow label and IPsec SPI)\nper Uplink and/or Downlink IP flows.\nfStatus:\n$ref: '#/components/schemas/FlowStatus'\nmarBwDl:\n$ref: 'TS29571_CommonData.yaml#/components/schemas/BitRateRm'\nmarBwUl:\n$ref: 'TS29571_CommonData.yaml#/components/schemas/BitRateRm'\ntosTrCl:\n$ref: '#/components/schemas/TosTrafficClassRm'\nflowUsage:\n$ref: '#/components/schemas/FlowUsage'\nevSubsc:\n$ref: '#/components/schemas/EventsSubscReqDataRm'\nnullable: true\n\nEventsNotification:\ndescription: Describes the notification of a matched event.\ntype: object\nrequired:\n- evSubsUri\n- evNotifs\nproperties:\nadReports:\ntype: array\nitems:\n$ref: '#/components/schemas/AppDetectionReport'\nminItems: 1\ndescription: Includes the detected application report.\naccessType:\n$ref: 'TS29571_CommonData.yaml#/components/schemas/AccessType'\naddAccessInfo:\n$ref: 'TS29512_Npcf_SMPolicyControl.yaml#/components/schemas/AdditionalAccessInfo'\nrelAccessInfo:\n$ref: 'TS29512_Npcf_SMPolicyControl.yaml#/components/schemas/AdditionalAccessInfo'\nanChargAddr:\n$ref: 'TS29512_Npcf_SMPolicyControl.yaml#/components/schemas/AccNetChargingAddress'\nanChargIds:\ntype: array\nitems:\n$ref: '#/components/schemas/AccessNetChargingIdentifier'\nminItems: 1\nanGwAddr:\n$ref: '#/components/schemas/AnGwAddress'\nl4sReports:\ntype: array\nitems:\n$ref: '#/components/schemas/L4sSupport'\nminItems: 1\nevSubsUri:\n$ref: 'TS29571_CommonData.yaml#/components/schemas/Uri'\nevNotifs:\ntype: array\nitems:\n$ref: '#/components/schemas/AfEventNotification'\nminItems: 1\nfailedResourcAllocReports:\ntype: array\nitems:\n$ref: '#/components/schemas/ResourcesAllocationInfo'\nminItems: 1\nsuccResourcAllocReports:\ntype: array\nitems:\n$ref: '#/components/schemas/ResourcesAllocationInfo'\nminItems: 1\nnoNetLocSupp:\n$ref: 'TS29512_Npcf_SMPolicyControl.yaml#/components/schemas/NetLocAccessSupport'\noutOfCredReports:\ntype: array\nitems:\n$ref: '#/components/schemas/OutOfCreditInformation'\nminItems: 1\nplmnId:\n$ref: 'TS29571_CommonData.yaml#/components/schemas/PlmnIdNid'\nqncReports:\ntype: array\nitems:\n$ref: '#/components/schemas/QosNotificationControlInfo'\nminItems: 1\nqosMonReports:\ntype: array\nitems:\n$ref: '#/components/schemas/QosMonitoringReport'\nminItems: 1\nqosMonDatRateReps:\ntype: array\nitems:\n$ref: '#/components/schemas/QosMonitoringReport'\nminItems: 1\npdvMonReports:\ntype: array\nitems:\n$ref: '#/components/schemas/PdvMonitoringReport'\nminItems: 1\ncongestReports:\ntype: array\nitems:\n$ref: '#/components/schemas/QosMonitoringReport'\nminItems: 1\nranNasRelCauses:\ntype: array\nitems:\n$ref: 'TS29512_Npcf_SMPolicyControl.yaml#/components/schemas/RanNasRelCause'\nminItems: 1\ndescription: Contains the RAN and/or NAS release cause.\nratType:\n$ref: 'TS29571_CommonData.yaml#/components/schemas/RatType'\nsatBackhaulCategory:\n$ref: 'TS29571_CommonData.yaml#/components/schemas/SatelliteBackhaulCategory'\nueLoc:\n$ref: 'TS29571_CommonData.yaml#/components/schemas/UserLocation'\nueLocTime:\n$ref: 'TS29571_CommonData.yaml#/components/schemas/DateTime'\nueTimeZone:\n$ref: 'TS29571_CommonData.yaml#/components/schemas/TimeZone'\nusgRep:\n$ref: 'TS29122_CommonData.yaml#/components/schemas/AccumulatedUsage'\nurspEnfRep:\n$ref: 'TS29512_Npcf_SMPolicyControl.yaml#/components/schemas/UrspEnforcementInfo'\nsscMode:\n$ref: 'TS29571_CommonData.yaml#/components/schemas/SscMode'\nueReqDnn:\n$ref: 'TS29571_CommonData.yaml#/components/schemas/Dnn'\nredundantPduSessionInfo:\n$ref: 'TS29502_Nsmf_PDUSession.yaml#/components/schemas/RedundantPduSessionInformation'\ntsnBridgeManCont:\n$ref: 'TS29512_Npcf_SMPolicyControl.yaml#/components/schemas/BridgeManagementContainer'\ntsnPortManContDstt:\n$ref: 'TS29512_Npcf_SMPolicyControl.yaml#/components/schemas/PortManagementContainer'\ntsnPortManContNwtts:\ntype: array\nitems:\n$ref: 'TS29512_Npcf_SMPolicyControl.yaml#/components/schemas/PortManagementContainer'\nminItems: 1\nipv4AddrList:\ntype: array\nitems:\n$ref: 'TS29571_CommonData.yaml#/components/schemas/Ipv4AddrMask'\nminItems: 1\nipv6PrefixList:\ntype: array\nitems:\n$ref: 'TS29571_CommonData.yaml#/components/schemas/Ipv6Prefix'\nminItems: 1\nbatOffsetInfo:\n$ref: '#/components/schemas/BatOffsetInfo'\n\n\nAfEventSubscription:\ndescription: Describes the event information delivered in the subscription.\ntype: object\nrequired:\n- event\nproperties:\nevent:\n$ref: '#/components/schemas/AfEvent'\nnotifMethod:\n$ref: '#/components/schemas/AfNotifMethod'\nrepPeriod:\n$ref: 'TS29571_CommonData.yaml#/components/schemas/DurationSec'\nwaitTime:\n$ref: 'TS29571_CommonData.yaml#/components/schemas/DurationSec'\n\nAfEventNotification:\ndescription: Describes the event information delivered in the notification.\ntype: object\nrequired:\n- event\nproperties:\nevent:\n$ref: '#/components/schemas/AfEvent'\nflows:\ntype: array\nitems:\n$ref: '#/components/schemas/Flows'\nminItems: 1\nretryAfter:\n$ref: 'TS29571_CommonData.yaml#/components/schemas/Uinteger'\n\nTerminationInfo:\ndescription: >\nIndicates the cause for requesting the deletion of the Individual Application Session\nContext resource.\ntype: object\nrequired:\n- termCause\n- resUri\nproperties:\ntermCause:\n$ref: '#/components/schemas/TerminationCause'\nresUri:\n$ref: 'TS29571_CommonData.yaml#/components/schemas/Uri'\n\nAfRoutingRequirement:\ndescription: Describes AF requirements on routing traffic.\ntype: object\nproperties:\nappReloc:\ntype: boolean\nrouteToLocs:\ntype: array\nitems:\n$ref: 'TS29571_CommonData.yaml#/components/schemas/RouteToLocation'\nminItems: 1\nspVal:\n$ref: '#/components/schemas/SpatialValidity'\ntempVals:\ntype: array\nitems:\n$ref: '#/components/schemas/TemporalValidity'\nminItems: 1\nupPathChgSub:\n$ref: 'TS29512_Npcf_SMPolicyControl.yaml#/components/schemas/UpPathChgEvent'\naddrPreserInd:\ntype: boolean\nsimConnInd:\ntype: boolean\ndescription: >\nIndicates whether simultaneous connectivity should be temporarily maintained for the\nsource and target PSA.\nsimConnTerm:\n$ref: 'TS29571_CommonData.yaml#/components/schemas/DurationSec'\neasIpReplaceInfos:\ntype: array\nitems:\n$ref: 'TS29571_CommonData.yaml#/components/schemas/EasIpReplacementInfo'\nminItems: 1\ndescription: Contains EAS IP replacement information.\neasRedisInd:\ntype: boolean\ndescription: Indicates the EAS rediscovery is required.\nmaxAllowedUpLat:\n$ref: 'TS29571_CommonData.yaml#/components/schemas/Uinteger'\ntfcCorreInfo:\n$ref: 'TS29519_Application_Data.yaml#/components/schemas/TrafficCorrelationInfo'\nAfSfcRequirement:\ndescription: Describes AF requirements on steering traffic to N6-LAN.\ntype: object\nproperties:\nsfcIdDl:\ntype: string\ndescription: Reference to a pre-configured SFC for downlink traffic.\nnullable: true\nsfcIdUl:\ntype: string\ndescription: Reference to a pre-configured SFC for uplink traffic.\nnullable: true\nspVal:\n$ref: '#/components/schemas/SpatialValidityRm'\nmetadata:\n$ref: 'TS29571_CommonData.yaml#/components/schemas/Metadata'\nnullable: true\n\nSpatialValidity:\ndescription: Describes explicitly the route to an Application location.\ntype: object\nrequired:\n- presenceInfoList\nproperties:\npresenceInfoList:\ntype: object\nadditionalProperties:\n$ref: 'TS29571_CommonData.yaml#/components/schemas/PresenceInfo'\nminProperties: 1\ndescription: >\nDefines the presence information provisioned by the AF. The praId attribute within the\nPresenceInfo data type is the key of the map.\n\nSpatialValidityRm:\ndescription: >\nThis data type is defined in the same way as the SpatialValidity data type, but with the\nOpenAPI nullable property set to true.\ntype: object\nrequired:\n- presenceInfoList\nproperties:\npresenceInfoList:\ntype: object\nadditionalProperties:\n$ref: 'TS29571_CommonData.yaml#/components/schemas/PresenceInfo'\nminProperties: 1\ndescription: >\nDefines the presence information provisioned by the AF. The praId attribute within the\nPresenceInfo data type is the key of the map.\nnullable: true\n\nAfRoutingRequirementRm:\ndescription: >\nThis data type is defined in the same way as the AfRoutingRequirement data type, but with\nthe OpenAPI nullable property set to true and the spVal and tempVals attributes defined as\nremovable.\ntype: object\nproperties:\nappReloc:\ntype: boolean\nrouteToLocs:\ntype: array\nitems:\n$ref: 'TS29571_CommonData.yaml#/components/schemas/RouteToLocation'\nminItems: 1\nnullable: true\nspVal:\n$ref: '#/components/schemas/SpatialValidityRm'\ntempVals:\ntype: array\nitems:\n$ref: '#/components/schemas/TemporalValidity'\nminItems: 1\nnullable: true\nupPathChgSub:\n$ref: 'TS29512_Npcf_SMPolicyControl.yaml#/components/schemas/UpPathChgEvent'\naddrPreserInd:\ntype: boolean\nnullable: true\nsimConnInd:\ntype: boolean\nnullable: true\ndescription: >\nIndicates whether simultaneous connectivity should be temporarily maintained for the\nsource and target PSA.\nsimConnTerm:\n$ref: 'TS29571_CommonData.yaml#/components/schemas/DurationSecRm'\neasIpReplaceInfos:\ntype: array\nitems:\n$ref: 'TS29571_CommonData.yaml#/components/schemas/EasIpReplacementInfo'\nminItems: 1\ndescription: Contains EAS IP replacement information.\nnullable: true\neasRedisInd:\ntype: boolean\ndescription: Indicates the EAS rediscovery is required.\nmaxAllowedUpLat:\n$ref: 'TS29571_CommonData.yaml#/components/schemas/UintegerRm'\ntfcCorreInfo:\n$ref: 'TS29519_Application_Data.yaml#/components/schemas/TrafficCorrelationInfo'\nnullable: true\n\nAnGwAddress:\ndescription: Describes the address of the access network gateway control node.\ntype: object\nanyOf:\n- required: [anGwIpv4Addr]\n- required: [anGwIpv6Addr]\nproperties:\nanGwIpv4Addr:\n$ref: 'TS29571_CommonData.yaml#/components/schemas/Ipv4Addr'\nanGwIpv6Addr:\n$ref: 'TS29571_CommonData.yaml#/components/schemas/Ipv6Addr'\n\nFlows:\ndescription: Identifies the flows.\ntype: object\nrequired:\n- medCompN\nproperties:\ncontVers:\ntype: array\nitems:\n$ref: '#/components/schemas/ContentVersion'\nminItems: 1\nfNums:\ntype: array\nitems:\ntype: integer\nminItems: 1\nmedCompN:\ntype: integer\n\nEthFlowDescription:\ndescription: Identifies an Ethernet flow.\ntype: object\nrequired:\n- ethType\nproperties:\ndestMacAddr:\n$ref: 'TS29571_CommonData.yaml#/components/schemas/MacAddr48'\nethType:\ntype: string\nfDesc:\n$ref: '#/components/schemas/FlowDescription'\nfDir:\n$ref: 'TS29512_Npcf_SMPolicyControl.yaml#/components/schemas/FlowDirection'\nsourceMacAddr:\n$ref: 'TS29571_CommonData.yaml#/components/schemas/MacAddr48'\nvlanTags:\ntype: array\nitems:\ntype: string\nminItems: 1\nmaxItems: 2\nsrcMacAddrEnd:\n$ref: 'TS29571_CommonData.yaml#/components/schemas/MacAddr48'\ndestMacAddrEnd:\n$ref: 'TS29571_CommonData.yaml#/components/schemas/MacAddr48'\n\nResourcesAllocationInfo:\ndescription: Describes the status of the PCC rule(s) related to certain media components.\ntype: object\nproperties:\nmcResourcStatus:\n$ref: '#/components/schemas/MediaComponentResourcesStatus'\nflows:\ntype: array\nitems:\n$ref: '#/components/schemas/Flows'\nminItems: 1\naltSerReq:\ntype: string\ndescription: >\nIndicates whether NG-RAN supports alternative QoS parameters. The default value false\nshall apply if the attribute is not present. It shall be set to false to indicate that\nthe lowest priority alternative QoS profile could not be fulfilled.\n\nTemporalValidity:\ndescription: Indicates the time interval(s) during which the AF request is to be applied.\ntype: object\nproperties:\nstartTime:\n$ref: 'TS29571_CommonData.yaml#/components/schemas/DateTime'\nstopTime:\n$ref: 'TS29571_CommonData.yaml#/components/schemas/DateTime'\n\nQosNotificationControlInfo:\ndescription: >\nIndicates whether the QoS targets for a GRB flow are not guaranteed or guaranteed again.\ntype: object\nrequired:\n- notifType\nproperties:\nnotifType:\n$ref: '#/components/schemas/QosNotifType'\nflows:\ntype: array\nitems:\n$ref: '#/components/schemas/Flows'\nminItems: 1\naltSerReq:\ntype: string\ndescription: >\nIndicates the alternative service requirement NG-RAN can guarantee. When it is omitted\nand the notifType attribute is set to NOT_GUAARANTEED it indicates that the lowest\npriority alternative alternative service requirement could not be fulfilled by NG-RAN.\naltSerReqNotSuppInd:\ntype: boolean\ndescription: >\nWhen present and set to true it indicates that Alternative Service Requirements are not\nsupported by NG-RAN.\n\nAcceptableServiceInfo:\ndescription: Indicates the maximum bandwidth that shall be authorized by the PCF.\ntype: object\nproperties:\naccBwMedComps:\ntype: object\nadditionalProperties:\n$ref: '#/components/schemas/MediaComponent'\ndescription: >\nIndicates the maximum bandwidth that shall be authorized by the PCF for each media\ncomponent of the map. The key of the map is the media component number.\nminProperties: 1\nmarBwUl:\n$ref: 'TS29571_CommonData.yaml#/components/schemas/BitRate'\nmarBwDl:\n$ref: 'TS29571_CommonData.yaml#/components/schemas/BitRate'\n\nUeIdentityInfo:\ndescription: Represents 5GS-Level UE identities.\ntype: object\nanyOf:\n- required: [gpsi]\n- required: [pei]\n- required: [supi]\nproperties:\ngpsi:\n$ref: 'TS29571_CommonData.yaml#/components/schemas/Gpsi'\npei:\n$ref: 'TS29571_CommonData.yaml#/components/schemas/Pei'\nsupi:\n$ref: 'TS29571_CommonData.yaml#/components/schemas/Supi'\n\nAccessNetChargingIdentifier:\ndescription: Describes the access network charging identifier.\ntype: object\noneOf:\n- required: [accNetChaIdValue]\n- required: [accNetChargIdString]\nproperties:\naccNetChaIdValue:\n$ref: 'TS29571_CommonData.yaml#/components/schemas/ChargingId'\naccNetChargIdString:\ntype: string\ndescription: A character string containing the access network charging identifier.\nflows:\ntype: array\nitems:\n$ref: '#/components/schemas/Flows'\nminItems: 1\n\nOutOfCreditInformation:\ndescription: >\nIndicates the SDFs without available credit and the corresponding termination action.\ntype: object\nrequired:\n- finUnitAct\nproperties:\nfinUnitAct:\n$ref: 'TS32291_Nchf_ConvergedCharging.yaml#/components/schemas/FinalUnitAction'\nflows:\ntype: array\nitems:\n$ref: '#/components/schemas/Flows'\nminItems: 1\n\nQosMonitoringInformation:\ndescription: >\nIndicates the QoS Monitoring information to report, i.e. UL and/or DL and or round trip delay.\ntype: object\nproperties:\nrepThreshDl:\ntype: integer\nrepThreshUl:\ntype: integer\nrepThreshRp:\ntype: integer\nrepThreshDatRateUl:\n$ref: 'TS29571_CommonData.yaml#/components/schemas/BitRate'\nrepThreshDatRateDl:\n$ref: 'TS29571_CommonData.yaml#/components/schemas/BitRate'\nconThreshDl:\n$ref: 'TS29571_CommonData.yaml#/components/schemas/Uinteger'\nconThreshUl:\n$ref: 'TS29571_CommonData.yaml#/components/schemas/Uinteger'\n\nPduSessionTsnBridge:\ndescription: >\nContains the new TSC user plane node information and may contain the DS-TT port and/or\nNW-TT port management information.\ntype: object\nrequired:\n- tsnBridgeInfo\nproperties:\ntsnBridgeInfo:\n$ref: 'TS29512_Npcf_SMPolicyControl.yaml#/components/schemas/TsnBridgeInfo'\ntsnBridgeManCont:\n$ref: 'TS29512_Npcf_SMPolicyControl.yaml#/components/schemas/BridgeManagementContainer'\ntsnPortManContDstt:\n$ref: 'TS29512_Npcf_SMPolicyControl.yaml#/components/schemas/PortManagementContainer'\ntsnPortManContNwtts:\ntype: array\nitems:\n$ref: 'TS29512_Npcf_SMPolicyControl.yaml#/components/schemas/PortManagementContainer'\nminItems: 1\nueIpv4Addr:\n$ref: 'TS29571_CommonData.yaml#/components/schemas/Ipv4Addr'\ndnn:\n$ref: 'TS29571_CommonData.yaml#/components/schemas/Dnn'\nsnssai:\n$ref: 'TS29571_CommonData.yaml#/components/schemas/Snssai'\nipDomain:\ntype: string\ndescription: IPv4 address domain identifier.\nueIpv6AddrPrefix:\n$ref: 'TS29571_CommonData.yaml#/components/schemas/Ipv6Prefix'\n\nQosMonitoringInformationRm:\ndescription: >\nThis data type is defined in the same way as the QosMonitoringInformation data type, but\nwith the OpenAPI nullable property set to true.\ntype: object\nproperties:\nrepThreshDl:\ntype: integer\nrepThreshUl:\ntype: integer\nrepThreshRp:\ntype: integer\nrepThreshDatRateUl:\n$ref: 'TS29571_CommonData.yaml#/components/schemas/BitRateRm'\nrepThreshDatRateDl:\n$ref: 'TS29571_CommonData.yaml#/components/schemas/BitRateRm'\nconThreshDl:\n$ref: 'TS29571_CommonData.yaml#/components/schemas/Uinteger'\nconThreshUl:\n$ref: 'TS29571_CommonData.yaml#/components/schemas/Uinteger'\nnullable: true\n\nPcscfRestorationRequestData:\ndescription: Indicates P-CSCF restoration.\ntype: object\noneOf:\n- required: [ueIpv4]\n- required: [ueIpv6]\nproperties:\ndnn:\n$ref: 'TS29571_CommonData.yaml#/components/schemas/Dnn'\nipDomain:\ntype: string\nsliceInfo:\n$ref: 'TS29571_CommonData.yaml#/components/schemas/Snssai'\nsupi:\n$ref: 'TS29571_CommonData.yaml#/components/schemas/Supi'\nueIpv4:\n$ref: 'TS29571_CommonData.yaml#/components/schemas/Ipv4Addr'\nueIpv6:\n$ref: 'TS29571_CommonData.yaml#/components/schemas/Ipv6Addr'\n\nQosMonitoringReport:\ndescription: QoS Monitoring reporting information.\ntype: object\nproperties:\nflows:\ntype: array\nitems:\n$ref: '#/components/schemas/Flows'\nminItems: 1\nulDelays:\ntype: array\nitems:\ntype: integer\nminItems: 1\ndlDelays:\ntype: array\nitems:\ntype: integer\nminItems: 1\nrtDelays:\ntype: array\nitems:\ntype: integer\nminItems: 1\npdmf:\ntype: boolean\ndescription: Represents the packet delay measurement failure indicator.\nulConInfo:\ntype: array\nitems:\ntype: integer\nminItems: 1\ndlConInfo:\ntype: array\nitems:\ntype: integer\nminItems: 1\ncimf:\ntype: boolean\ndescription: Represents the congestion information measurement failure indicator.\nulDataRate:\n$ref: 'TS29571_CommonData.yaml#/components/schemas/BitRate'\ndlDataRate:\n$ref: 'TS29571_CommonData.yaml#/components/schemas/BitRate'\n\nTsnQosContainer:\ndescription: Indicates TSC Traffic QoS.\ntype: object\nproperties:\nmaxTscBurstSize:\n$ref: 'TS29571_CommonData.yaml#/components/schemas/ExtMaxDataBurstVol'\ntscPackDelay:\n$ref: 'TS29571_CommonData.yaml#/components/schemas/PacketDelBudget'\nmaxPer:\n$ref: 'TS29571_CommonData.yaml#/components/schemas/PacketErrRate'\ntscPrioLevel:\n$ref: '#/components/schemas/TscPriorityLevel'\n\nTsnQosContainerRm:\ndescription: Indicates removable TSC Traffic QoS.\ntype: object\nproperties:\nmaxTscBurstSize:\n$ref: 'TS29571_CommonData.yaml#/components/schemas/ExtMaxDataBurstVolRm'\ntscPackDelay:\n$ref: 'TS29571_CommonData.yaml#/components/schemas/PacketDelBudgetRm'\nmaxPer:\n$ref: 'TS29571_CommonData.yaml#/components/schemas/PacketErrRateRm'\ntscPrioLevel:\n$ref: '#/components/schemas/TscPriorityLevelRm'\nnullable: true\n\nTscaiInputContainer:\ndescription: Indicates TSC Traffic pattern.\ntype: object\nproperties:\nperiodicity:\n$ref: 'TS29571_CommonData.yaml#/components/schemas/Uinteger'\nburstArrivalTime:\n$ref: 'TS29571_CommonData.yaml#/components/schemas/DateTime'\nsurTimeInNumMsg:\n$ref: 'TS29571_CommonData.yaml#/components/schemas/Uinteger'\nsurTimeInTime:\n$ref: 'TS29571_CommonData.yaml#/components/schemas/Uinteger'\nburstArrivalTimeWnd:\n$ref: 'TS29122_CommonData.yaml#/components/schemas/TimeWindow'\nperiodicityRange:\n$ref: '#/components/schemas/PeriodicityRange'\nnullable: true\n\nAppDetectionReport:\ndescription: >\nIndicates the start or stop of the detected application traffic and the application\nidentifier of the detected application traffic.\ntype: object\nrequired:\n- adNotifType\n- afAppId\nproperties:\nadNotifType:\n$ref: '#/components/schemas/AppDetectionNotifType'\nafAppId:\n$ref: '#/components/schemas/AfAppId'\n\nPduSessionEventNotification:\ndescription: >\nIndicates PDU session information for the concerned established/terminated PDU session.\ntype: object\nrequired:\n- evNotif\nproperties:\nevNotif:\n$ref: '#/components/schemas/AfEventNotification'\nsupi:\n$ref: 'TS29571_CommonData.yaml#/components/schemas/Supi'\nueIpv4:\n$ref: 'TS29571_CommonData.yaml#/components/schemas/Ipv4Addr'\nueIpv6:\n$ref: 'TS29571_CommonData.yaml#/components/schemas/Ipv6Addr'\nueMac:\n$ref: 'TS29571_CommonData.yaml#/components/schemas/MacAddr48'\nstatus:\n$ref: '#/components/schemas/PduSessionStatus'\npcfInfo:\n$ref: '#/components/schemas/PcfAddressingInfo'\ndnn:\n$ref: 'TS29571_CommonData.yaml#/components/schemas/Dnn'\nsnssai:\n$ref: 'TS29571_CommonData.yaml#/components/schemas/Snssai'\ngpsi:\n$ref: 'TS29571_CommonData.yaml#/components/schemas/Gpsi'\n\nPcfAddressingInfo:\ndescription: Contains PCF address information.\ntype: object\nproperties:\npcfFqdn:\n$ref: 'TS29571_CommonData.yaml#/components/schemas/Fqdn'\npcfIpEndPoints:\ntype: array\nitems:\n$ref: 'TS29510_Nnrf_NFManagement.yaml#/components/schemas/IpEndPoint'\nminItems: 1\ndescription: IP end points of the PCF hosting the Npcf_PolicyAuthorization service.\nbindingInfo:\ntype: string\ndescription: contains the binding indications of the PCF.\n\nAlternativeServiceRequirementsData:\ndescription: Contains an alternative QoS related parameter set.\ntype: object\nrequired:\n- altQosParamSetRef\nproperties:\naltQosParamSetRef:\ntype: string\ndescription: Reference to this alternative QoS related parameter set.\ngbrUl:\n$ref: 'TS29571_CommonData.yaml#/components/schemas/BitRate'\ngbrDl:\n$ref: 'TS29571_CommonData.yaml#/components/schemas/BitRate'\npdb:\n$ref: 'TS29571_CommonData.yaml#/components/schemas/PacketDelBudget'\nper:\n$ref: 'TS29571_CommonData.yaml#/components/schemas/PacketErrRate'\n\nEventsSubscPutData:\ndescription: >\nIdentifies the events the application subscribes to within an Events Subscription\nsub-resource data. It may contain the notification of the already met events.\nanyOf:\n- $ref: '#/components/schemas/EventsSubscReqData'\n- $ref: '#/components/schemas/EventsNotification'\n\nPeriodicityRange:\ndescription: >\nContains the acceptable range (which is formulated as lower bound and upper bound of\nthe periodicity of the start twobursts in reference to the external GM) or\nacceptable periodicity value(s) (which is formulated as a list of values for\nthe periodicity).\ntype: object\noneOf:\n- required: [lowerBound, upperBound]\n- required: [periodicVals]\nproperties:\nlowerBound:\n$ref: 'TS29571_CommonData.yaml#/components/schemas/Uinteger'\nupperBound:\n$ref: 'TS29571_CommonData.yaml#/components/schemas/Uinteger'\nperiodicVals:\ntype: array\nitems:\n$ref: 'TS29571_CommonData.yaml#/components/schemas/Uinteger'\nminItems: 1\n\nBatOffsetInfo:\ndescription: >\nIndicates the offset of the BAT and the optionally adjusted periodicity.\ntype: object\nrequired:\n- ranBatOffsetNotif\nproperties:\nranBatOffsetNotif:\ntype: integer\ndescription: >\nIndicates the BAT offset of the arrival time of the data burst in units\nof milliseconds.\nadjPeriod:\n$ref: 'TS29571_CommonData.yaml#/components/schemas/Uinteger'\nflows:\ntype: array\nitems:\n$ref: '#/components/schemas/Flows'\nminItems: 1\ndescription: >\nIdentification of the flows. If no flows are provided, the BAT offset applies\nfor all flows of the AF session.\n\nProtoDesc:\ndescription: Contains the protocol description namely protocol details and payload type\ninformation.\ntype: object\nproperties:\nprotocol:\n$ref: '#/components/schemas/MediaProtocol'\npayloadType:\n$ref: '#/components/schemas/PayloadType'\n\nProtoDescRm:\ndescription: Contains the protocol description namely protocol details and payload type\ninformation.\ntype: object\nproperties:\nprotocol:\n$ref: '#/components/schemas/MediaProtocol'\npayloadType:\n$ref: '#/components/schemas/PayloadType'\nnullable: true\n\nPdvMonitoringReport:\ndescription: Packet Delay Variation reporting information.\ntype: object\nproperties:\nflows:\ntype: array\nitems:\n$ref: '#/components/schemas/Flows'\nminItems: 1\ndescription: Identification of the flows.\nulPdv:\ntype: integer\ndescription: Uplink packet delay variation in units of milliseconds.\ndlPdv:\ntype: integer\ndescription: Downlink packet delay variation in units of milliseconds.\nrtPdv:\ntype: integer\ndescription: Round trip packet delay variation in units of milliseconds.\n\nPeriodicityInfo:\ndescription: >\nIndicates the time period between the start of the two data bursts in Uplink and/or Downlink\ndirection.\ntype: object\nproperties:\nperiodUl:\n$ref: 'TS29571_CommonData.yaml#/components/schemas/DurationSecRm'\nperiodDl:\n$ref: 'TS29571_CommonData.yaml#/components/schemas/DurationSecRm'\nnullable: true\n\nAddFlowDescriptionInfo:\ndescription: Contains additional flow description information.\ntype: object\nproperties:\nspi:\ntype: string\ndescription: >\n4-octet string representing the security parameter index of the IPSec packet\nin hexadecimal representation.\nflowLabel:\ntype: string\ndescription: >\n3-octet string representing the IPv6 flow label header field in hexadecimal\nrepresentation.\nflowDir:\n$ref: 'TS29512_Npcf_SMPolicyControl.yaml#/components/schemas/FlowDirection'\n\nL4sSupport:\ndescription: >\nIndicates whether the ECN marking for L4S support is not available or available\nagain in 5GS.\ntype: object\nrequired:\n- notifType\nproperties:\nnotifType:\n$ref: '#/components/schemas/L4sNotifType'\nflows:\ntype: array\nitems:\n$ref: '#/components/schemas/Flows'\nminItems: 1\n\n#\n# EXTENDED PROBLEMDETAILS\n#\nExtendedProblemDetails:\ndescription: Extends ProblemDetails to also include the acceptable service info.\nallOf:\n- $ref: 'TS29571_CommonData.yaml#/components/schemas/ProblemDetails'\n- type: object\nproperties:\nacceptableServInfo:\n$ref: '#/components/schemas/AcceptableServiceInfo'\n\n#\n# SIMPLE DATA TYPES\n#\nAfAppId:\ndescription: Contains an AF application identifier.\ntype: string\nAspId:\ndescription: Contains an identity of an application service provider.\ntype: string\nCodecData:\ndescription: Contains codec related information.\ntype: string\nContentVersion:\ndescription: Represents the content version of some content.\ntype: integer\nFlowDescription:\ndescription: Defines a packet filter of an IP flow.\ntype: string\nSponId:\ndescription: Contains an identity of a sponsor.\ntype: string\nServiceUrn:\ndescription: Contains values of the service URN and may include subservices.\ntype: string\nTosTrafficClass:\ndescription: >\n2-octet string, where each octet is encoded in hexadecimal representation. The first octet\ncontains the IPv4 Type-of-Service or the IPv6 Traffic-Class field and the second octet\ncontains the ToS/Traffic Class mask field.\ntype: string\nTosTrafficClassRm:\ndescription: >\nThis data type is defined in the same way as the TosTrafficClass data type, but with the\nOpenAPI nullable property set to true.\ntype: string\nnullable: true\nMultiModalId:\ndescription: >\nThis data type contains a multi-modal service identifier.\ntype: string\nTscPriorityLevel:\ndescription: Represents the priority level of TSC Flows.\ntype: integer\nminimum: 1\nmaximum: 8\nTscPriorityLevelRm:\ndescription: >\nThis data type is defined in the same way as the TscPriorityLevel data type, but with the\nOpenAPI nullable property set to true.\ntype: integer\nminimum: 1\nmaximum: 8\nnullable: true\n\nMediaProtocol:\ndescription: represents the different media protocol applicable for XRM muti modality session.\ntype: string\n\nPayloadType:\ndescription: represents the different payload type.\ntype: string\n#\n# ENUMERATIONS DATA TYPES\n#\nMediaType:\ndescription: Indicates the media type of a media component.\nanyOf:\n- type: string\nenum:\n- AUDIO\n- VIDEO\n- DATA\n- APPLICATION\n- CONTROL\n- TEXT\n- MESSAGE\n- OTHER\n- type: string\ndescription: >\nThis string provides forward-compatibility with future extensions to the enumeration\nand is not used to encode content defined in the present version of this API.\n\nMpsAction:\ndescription: >\nIndicates whether it is an invocation, a revocation or an invocation with authorization of\nthe MPS for DTS service.\nanyOf:\n- type: string\nenum:\n- DISABLE_MPS_FOR_DTS\n- ENABLE_MPS_FOR_DTS\n- AUTHORIZE_AND_ENABLE_MPS_FOR_DTS\n- AUTHORIZE_AND_ENABLE_MPS_FOR_AF_SIGNALLING\n- type: string\ndescription: >\nThis string provides forward-compatibility with future extensions to the enumeration\nand is not used to encode content defined in the present version of this API.\n\nReservPriority:\ndescription: Indicates the reservation priority.\nanyOf:\n- type: string\nenum:\n- PRIO_1\n- PRIO_2\n- PRIO_3\n- PRIO_4\n- PRIO_5\n- PRIO_6\n- PRIO_7\n- PRIO_8\n- PRIO_9\n- PRIO_10\n- PRIO_11\n- PRIO_12\n- PRIO_13\n- PRIO_14\n- PRIO_15\n- PRIO_16\n- type: string\ndescription: >\nThis string provides forward-compatibility with future extensions to the enumeration\nand is not used to encode content defined in the present version of this API.\n\nServAuthInfo:\ndescription: Indicates the result of the Policy Authorization service request from the AF.\nanyOf:\n- type: string\nenum:\n- TP_NOT_KNOWN\n- TP_EXPIRED\n- TP_NOT_YET_OCURRED\n- ROUT_REQ_NOT_AUTHORIZED\n- DIRECT_NOTIF_NOT_POSSIBLE\n- type: string\ndescription: >\nThis string provides forward-compatibility with future extensions to the enumeration\nand is not used to encode content defined in the present version of this API.\n\nSponsoringStatus:\ndescription: Indicates whether sponsored data connectivity is enabled or disabled/not enabled.\nanyOf:\n- type: string\nenum:\n- SPONSOR_DISABLED\n- SPONSOR_ENABLED\n- type: string\ndescription: >\nThis string provides forward-compatibility with future extensions to the enumeration\nand is not used to encode content defined in the present version of this API.\n\nAfEvent:\ndescription: Represents an event to notify to the AF.\nanyOf:\n- type: string\nenum:\n- ACCESS_TYPE_CHANGE\n- ANI_REPORT\n- APP_DETECTION\n- CHARGING_CORRELATION\n- EPS_FALLBACK\n- EXTRA_UE_ADDR\n- FAILED_QOS_UPDATE\n- FAILED_RESOURCES_ALLOCATION\n- OUT_OF_CREDIT\n- PDU_SESSION_STATUS\n- PLMN_CHG\n- QOS_MONITORING\n- QOS_NOTIF\n- RAN_NAS_CAUSE\n- REALLOCATION_OF_CREDIT\n- SAT_CATEGORY_CHG\n- SUCCESSFUL_QOS_UPDATE\n- SUCCESSFUL_RESOURCES_ALLOCATION\n- TSN_BRIDGE_INFO\n- UP_PATH_CHG_FAILURE\n- USAGE_REPORT\n- UE_TEMPORARILY_UNAVAILABLE\n- BAT_OFFSET_INFO\n- URSP_ENF_INFO\n- PACK_DEL_VAR\n- L4S_SUPP\n- RT_DELAY_TWO_QOS_FLOWS\n- type: string\ndescription: >\nThis string provides forward-compatibility with future extensions to the enumeration\nand is not used to encode content defined in the present version of this API.\n\nAfNotifMethod:\ndescription: Represents the notification methods that can be subscribed for an event.\nanyOf:\n- type: string\nenum:\n- EVENT_DETECTION\n- ONE_TIME\n- PERIODIC\n- type: string\ndescription: >\nThis string provides forward-compatibility with future extensions to the enumeration\nand is not used to encode content defined in the present version of this API.\n\nQosNotifType:\ndescription: Indicates the notification type for QoS Notification Control.\nanyOf:\n- type: string\nenum:\n- GUARANTEED\n- NOT_GUARANTEED\n- type: string\ndescription: >\nThis string provides forward-compatibility with future extensions to the enumeration\nand is not used to encode content defined in the present version of this API.\n\nTerminationCause:\ndescription: >\nIndicates the cause behind requesting the deletion of the Individual Application Session\nContext resource.\nanyOf:\n- type: string\nenum:\n- ALL_SDF_DEACTIVATION\n- PDU_SESSION_TERMINATION\n- PS_TO_CS_HO\n- INSUFFICIENT_SERVER_RESOURCES\n- INSUFFICIENT_QOS_FLOW_RESOURCES\n- SPONSORED_DATA_CONNECTIVITY_DISALLOWED\n- type: string\ndescription: >\nThis string provides forward-compatibility with future extensions to the enumeration\nand is not used to encode content defined in the present version of this API.\n\nMediaComponentResourcesStatus:\ndescription: Indicates whether the media component is active or inactive.\nanyOf:\n- type: string\nenum:\n- ACTIVE\n- INACTIVE\n- type: string\ndescription: >\nThis string provides forward-compatibility with future extensions to the enumeration\nand is not used to encode content defined in the present version of this API.\n\nFlowUsage:\ndescription: Describes the flow usage of the flows described by a media subcomponent.\nanyOf:\n- type: string\nenum:\n- NO_INFO\n- RTCP\n- AF_SIGNALLING\n- type: string\ndescription: >\nThis string provides forward-compatibility with future extensions to the enumeration\nand is not used to encode content defined in the present version of this API.\n\nFlowStatus:\ndescription: Describes whether the IP flow(s) are enabled or disabled.\nanyOf:\n- type: string\nenum:\n- ENABLED-UPLINK\n- ENABLED-DOWNLINK\n- ENABLED\n- DISABLED\n- REMOVED\n- type: string\ndescription: >\nThis string provides forward-compatibility with future extensions to the enumeration\nand is not used to encode content defined in the present version of this API.\n\nRequiredAccessInfo:\ndescription: Indicates the access network information required for an AF session.\nanyOf:\n- type: string\nenum:\n- USER_LOCATION\n- UE_TIME_ZONE\n- type: string\ndescription: >\nThis string provides forward-compatibility with future extensions to the enumeration\nand is not used to encode content defined in the present version of this API.\n\nSipForkingIndication:\ndescription: >\nIndicates whether several SIP dialogues are related to an \"Individual Application Session\nContext\" resource.\nanyOf:\n- type: string\nenum:\n- SINGLE_DIALOGUE\n- SEVERAL_DIALOGUES\n- type: string\ndescription: >\nThis string provides forward-compatibility with future extensions to the enumeration\nand is not used to encode content defined in the present version of this API.\n\nAfRequestedData:\ndescription: Represents the information that the AF requested to be exposed.\nanyOf:\n- type: string\nenum:\n- UE_IDENTITY\n- type: string\ndescription: >\nThis string provides forward-compatibility with future extensions to the enumeration\nand is not used to encode content defined in the present version of this API.\n\nServiceInfoStatus:\ndescription: Represents the preliminary or final service information status.\nanyOf:\n- type: string\nenum:\n- FINAL\n- PRELIMINARY\n- type: string\ndescription: >\nThis string provides forward-compatibility with future extensions to the enumeration\nand is not used to encode content defined in the present version of this API.\n\nPreemptionControlInformation:\ndescription: Represents Pre-emption control information.\nanyOf:\n- type: string\nenum:\n- MOST_RECENT\n- LEAST_RECENT\n- HIGHEST_BW\n- type: string\ndescription: >\nThis string provides forward-compatibility with future extensions to the enumeration\nand is not used to encode content defined in the present version of this API.\n\nPrioritySharingIndicator:\ndescription: Represents the Priority sharing indicator.\nanyOf:\n- type: string\nenum:\n- ENABLED\n- DISABLED\n- type: string\ndescription: >\nThis string provides forward-compatibility with future extensions to the enumeration\nand is not used to encode content defined in the present version of this API.\n\nPreemptionControlInformationRm:\ndescription: >\nThis data type is defined in the same way as the PreemptionControlInformation data type, but\nwith the OpenAPI nullable property set to true.\nanyOf:\n- $ref: '#/components/schemas/PreemptionControlInformation'\n- $ref: 'TS29571_CommonData.yaml#/components/schemas/NullValue'\n\nAppDetectionNotifType:\ndescription: Indicates the notification type for Application Detection Control.\nanyOf:\n- type: string\nenum:\n- APP_START\n- APP_STOP\n- type: string\ndescription: >\nThis string provides forward-compatibility with future extensions to the enumeration\nand is not used to encode content defined in the present version of this API.\n\nPduSessionStatus:\ndescription: Indicates whether the PDU session is established or terminated.\nanyOf:\n- type: string\nenum:\n- ESTABLISHED\n- TERMINATED\n- type: string\ndescription: >\nThis string provides forward-compatibility with future extensions to the enumeration\nand is not used to encode content defined in the present version of this API.\n\nUplinkDownlinkSupport:\ndescription: >\nRepresents whether an indication or capability is supported for the UL, the DL or both,\nUL and DL.\nanyOf:\n- type: string\nenum:\n- UL\n- DL\n- UL_DL\n- type: string\ndescription: >\nThis string provides forward-compatibility with future extensions to the enumeration\nand is not used to encode content defined in the present version of this API.\n\nL4sNotifType:\ndescription: Indicates the notification type for ECN marking for L4S support in 5GS.\nanyOf:\n- type: string\nenum:\n- AVAILABLE\n- NOT_AVAILABLE\n- type: string\ndescription: >\nThis string provides forward-compatibility with future extensions to the enumeration\nand is not used to encode content defined in the present version of this API.\n\n",
            "summary": "",
            "tables": [],
            "figures_meta_data": [],
            "subsections": []
        },
        {
            "title": "B.1\tProvision of Service Information at P-CSCF",
            "description": "When the \"IMS_SBI\" feature is supported, the P-CSCF shall send service information to the PCF upon every SIP message that includes an SDP answer payload for the purpose of authorizing the IP flows and the QoS resources required for a negotiated IMS session, unless the SDP payload only relates to a circuit-switched bearer (i.e. \"c=\" line set to \"PSTN\" and an \"m=\" line set to \"PSTN\", refer to 3GPP TS 24.292 [29]). The service information shall be derived both from the SDP offer and the SDP answer. This ensures that the PCF receives proper information to perform media authorization for all possible IMS session set-up scenarios, and that the PCF is also capable of handling session modifications. The P-CSCF may include \"servInfStatus\" attribute set to \"FINAL\".\nAdditionally, the P-CSCF may send service information to the PCF when receiving a SIP message that includes an SDP offer payload for the purpose of performing an early bandwidth authorization check, or for enabling pre-authorization for a UE terminated IMS session establishment or modification with UE initiated resource reservation, or for the retrieval of network provided access network information (see clause B.8.2).\nThe P-CSCF shall send service information to the PCF when receiving a SIP message that includes an SDP offer payload when the IMS session is an MPS session that requires priority treatment. For a UE terminated session the P-CSCF may send the service information derived from the SDP offer when the SDP offer either does not include any preconditions information or includes preconditions information indicating that the local preconditions (i.e. the preconditions related to the remote peer) are already met. In this case, the P-CSCF shall derive the service information only from the SDP offer and shall include \"servInfStatus\" attribute set to \"PRELIMINARY\".\nNOTE 1:\tFor a UE terminated session setup, when the SDP offer either does not include any preconditions information or includes preconditions information indicating that the local preconditions (i.e. the preconditions related to the remote peer) are already met, the terminating UE can request a resource modification prior to sending the SDP answer. Even if the IP address and port information in the session information derived from the SDP offer can be insufficient for PCC rule authorization, the policy to handle such UE initiated requests at the PCF can take into account the fact that an IMS session establishment is ongoing, for instance in deciding whether to authorize the request and in selecting an appropriate charging key and a gating policy.\nThe P-CSCF shall derive the value of the \"fDescs\" attribute within the service information from the SDP as follows:\n-\tAn uplink entry in the \"fDescs\" attribute shall be formed as follows: The destination address shall be taken from the SDP information received by the P-CSCF in downlink direction, while the source IP address may be formed from the address present in the SDP received by the P-CSCF in uplink direction (taking into account only the 64 bit prefix of the Ipv6 address) Source and destination ports shall be derived according to rules provided in 3GPP TS 29.513 [7] clause 7.2.\nEXAMPLE 1:\tAssuming UE A sends an SDP to UE B, the PCF of UE B uses the address present in this SDP for the destination address of UE B's uplink entry in the \"fDescs\" attribute, while the PCF of the UE A uses the 64 bit prefix of the same address for the source address of UE A's uplink entry in the \"fDescs\" attribute. If the source address is not formed from the 64 bit prefix, the source address shall be wildcarded.\n-\tA downlink entry in the \"fDescs\" attribute shall be formed as follows: The destination address shall be taken from the SDP information received by the P-CSCF in uplink direction, while the source IP address may be formed (in order to reduce the possibilities of QoS flow misuse) from the destination address in the SDP received by the P-CSCF in downlink direction (taking into account only the 64 bit prefix of the Ipv6 address) Source and destination ports shall be derived according to rules provided in 3GPP TS 29.513 [7] clause 7.2.\nEXAMPLE 2:\tAssuming UE A sends an SDP to UE B, the PCF of UE A uses the address present in this SDP for the destination address of UE A's downlink entry in the \"fDescs\" attribute, while the PCF of UE B uses the 64 bit prefix of the same address for the source address of UE B's downlink entry in the \"fDescs\" attribute. If the source address is not formed from the 64 bit prefix, the source address shall be wildcarded.\nThe P-CSCF shall derive the bandwidth information within the service information, from the \"b=AS\" SDP parameter and \"a=bw-info\" SDP parameter, if available. If \"a=bw-info\" is used for bandwidth derivation, the P-CSCF shall use the SDP attribute line that contains the bandwidth properties for the IP version used by the UE, as detailed in 3GPP TS 29.513 [7] clause 7.2. If the received \"a=bw-info\" SDP attribute line(s) contain only bandwidth properties for an IP version that is not used by the UE, the P-CSCF shall re-compute the bandwidth properties for the used IP version and use that value for the bandwidth derivation as defined in 3GPP TS 26.114 [30].\nNOTE 2:\tIf no IP version is included for any of the \"a=bw-info\" SDP attribute lines related to a certain payload type and direction then IPv6 is assumed for all bandwidth properties related to the same direction and payload type, on all of the related \"a=bw-info\" SDP attribute lines, see clause 19 of 3GPP TS 26.114 [30].\nIf \"a=bw-info\" is used for bandwidth derivation and it includes both known and unknown bandwidth properties, the P-CSCF shall only consider the known bandwidth properties to derive the bandwidth information and ignore the unknown ones. If the\" a=bw-info\" line is received with an unknown directionality, then the entire \"a=bw-info\" line shall be ignored.\nFor the possibly associated RTCP IP flows, the P-CSCF shall use the SDP \"b=RR\" and \"b=RS\" parameters, if present, as specified in 3GPP TS 29.513 [7] clause 7.2. The \"b=AS\", \"b=RR\" and \"b=RS\" parameters in the SDP contain all the overhead coming from the IP-layer and the layers above, e.g. IP, UDP, RTP and RTCP payload, or IP, UDP and RTCP.\nFor multiplexed RTP/RTCP flows (as negotiated using the \"a=rtcp-mux\" SDP attribute defined in IETF RFC 5761 [31], a P-CSCF supporting RTP/RTCP transport multiplexing shall derive the bandwidth information within the service information as specified in 3GPP TS 29.513 [7] clause 7.2.\nHowever, if service information is received containing the \"b=TIAS\" SDP parameter that corresponds to an SDP answer payload, and if the P-CSCF supports this parameter, the P-CSCF may derive the bandwidth from this parameter rather than from the \"b=AS\" SDP parameter, as detailed in 3GPP TS 29.513 [7] clause 7.2.\nWhen available, the P-CSCF shall also indicate to PCF, as a complement to the Service Information, the IMS Communication Service Identifier within the \"afAppId\" attribute. The originating P-CSCF shall take the IMS Communication Service Identifier value from the SIP response. The terminating P-CSCF shall take the IMS Communication Service Identifier value from the SIP request. Otherwise, the P-CSCF may not be able to provide an IMS Communication Service Identifier value to the PCF. The format and specific headers where IMS communication service identifiers are transported within SIP are defined in 3GPP TS 24.229 [32].\nNOTE 3:\tIn order to indicate the IMS Communication Service Identifier to the PCF, the originating P-CSCF sets the \"afAppId\" attribute to the ICSI contained in the topmost occurrence of the \"+g.3gpp.icsi-ref\" header field parameter of the Feature-Caps header field(s) of 18x or 2xx SIP response (Feature-Caps: *;+g.3gpp.icsi-ref=\"urn%Aurn-7%A3gpp-service.ims.icsi.mmtel\") and the terminating P-CSCF sets the \"afAppId\" attribute to the ICSI of the P-Asserted-Service header information received in the SIP request (e.g. P-Asserted-Service: urn:urn-7:3gpp-service.ims.icsi.mmtel). Since the headers and the format of the ICSI can vary depending on the case, the PCF has to be prepared to accept the complete ICSI information received in different formats, as described in clause 7.2A.8.2 in 3GPP TS 24.229 [32].\nAdditionally, if \"ResourceSharing\" feature is supported, the P-CSCF may include the \"sharingKeyUl\" attribute and/or \"sharingKeyDl\" attribute within a media component of the \"medComponents\" attribute in order to indicate the PCF that resource sharing should apply for the media components in the related direction with the same value for the \"sharingKeyUl\" attribute and/or \"sharingKeyDl\" attribute.\nAdditionally, if \"PrioritySharing\" feature is supported, the P-CSCF may provide the \"prioSharingInd\" attribute within a media component of the \"medComponents\" attribute as described in clause 4.2.2.21 and 4.2.3.21.\nNOTE 4: \tThe P-CSCF obtains this information from the Application Server as described in 3GPP TS 23.228 [33], clause 5.4.7.9.\nNOTE 5:\tRTCP flows are not subject to resource sharing. This requirement cannot be met for multiplexed RTP/RTCP flows as in this case there is no mechanism in the current release to distinguish between RTP and RTCP flows.\nFor IMS emergency services provided by a PLMN or an SNPN if the \"servUrn\" attribute does not include an emergency service URN, i.e. a top-level service type of \"sos\" as specified in IETF RFC 5031 [34] and possibly additional sub-service information on the type of the emergency service and the PCF binds the IMS service session to a PDU session established to an Emergency DNN, the PCF shall return the application error UNAUTHORIZED_NON_EMERGENCY_SESSION to the P-CSCF. Upon receiving an application error UNAUTHORIZED_NON_EMERGENCY_SESSION the P-CSCF shall apply the procedures defined in 3GPP TS 24.229 [32].\nNOTE 6:\tThe PCF determines whether a PDU session is established to an Emergency DNN based on the information received over N7 and operator configuration.\nIf the \"afReqData\" attribute is provided in the \"ascReqData\" attribute indicating \"5GS-level UE Identities required\", the PCF shall provide the available user information for the PDU session in the serving network (either a PLMN or an SNPN) within the \"ueIds\" attribute included in the \"ascRespData\" attribute, where each entry shall contain the IMSI (for PLMN access) or either IMSI or NAI (for SNPN access) within the \"supi\", and/or the MSISDN within the \"gpsi\" and/or the IMEI(SV) within the \"pei\" attributes.\nThe PCF may decide not to authorize requested service information. The PCF will indicate it to the P-CSCF by rejecting the HTTP request with an HTTP \"403 Forbidden\" response message including the \"cause\" attribute set to \"REQUESTED_SERVICE_NOT_AUTHORIZED\". Upon receiving an HTTP \"403 Forbidden\" response message including the \"cause\" attribute set to the value \"REQUESTED_SERVICE_NOT_AUTHORIZED\" the P-CSCF shall apply the procedures defined in 3GPP TS 24.229 [32].\n",
            "summary": "",
            "tables": [],
            "figures_meta_data": [],
            "subsections": []
        },
        {
            "title": "B.2\tEnabling of IP Flows",
            "description": "",
            "summary": "",
            "tables": [],
            "figures_meta_data": [],
            "subsections": [
                {
                    "title": "B.2.1\tGeneral",
                    "description": "",
                    "summary": "",
                    "text_content": "Prior to the completion of the SIP session set-up, i.e. until the 2xx response to the INVITE request is received, the P-CSCF may enable or disable media IP flows depending on operator policy, thus allowing or forbidding early media in forward and/or backward direction. The P-CSCF may set the values of the \"fStatus\" attribute derived from the SDP direction attributes as defined in 3GPP TS 29.513 [7] clause 7.3.3 or set the values of the \"fStatus\" attributes considering the em-param of the P-Early-Media header field according to clause B.2.2 or downgrade the values of the \"fStatus\" attribute derived from the SDP direction attribute based on the configuration in the P-CSCF according to clause B.2.3. However for multiplexed RTP/RTCP flows (as negotiated using the \"a=rtcp-mux\" SDP attribute defined in IETF RFC 5761 [31]), a P-CSCF supporting RTP/RTCP transport multiplexing shall set the \"fStatus\" attribute to \"ENABLED\" to prevent that RTCP is blocked. If the P-CSCF chooses to modify the values of the \"fStatus\" as received from the SDP direction attribute, the P-CSCF shall store the last received SDP.\nWhen a 2xx response is received, the P-CSCF shall enable all media IP flows according to the direction attribute within the last received SDP, as specified in 3GPP TS 29.513 [7] clause 7.3.3. When a 2xx response is received and the P-CSCF previously provided the values of the \"fStatus\" attributes different from the value derived from the SDP direction attribute in the session information, the P-CSCF shall provide service information with values of the \"fStatus\" attributes corresponding to the last received SDP.\nNOTE:\tIn most cases a 2xx response is a 200 (OK) response.\nIf the P-CSCF receives SDP answers after the completion of the SIP session set-up, i.e. after the 2xx response to the INVITE request is received, the P-CSCF shall provide the \"fStatus\" attribute, based on the last received SDP answer. The \"fStatus\" attribute shall be derived from the SDP according to 3GPP TS 29.513 [7] clause 7.3.3.\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "B.2.2\tGate control procedures considering the P-Early-Media header field",
                    "description": "",
                    "summary": "",
                    "text_content": "Prior to the completion of the SIP session set-up, the P-CSCF may use the em-param of the P-Early-Media header field defined in IETF RFC 5009 [35] in order to enable or disable early media in forward and/or backward direction. If the P-CSCF uses the em-param of the P-Early-Media header field for the gate control of early media, the P-CSCF shall perform the following procedures.\nIn the terminating P-CSCF, when a SIP message with the P-Early-Media header field is received from the UE and the policies configured in the P-CSCF indicate that the UE is authorized to send early media, then:\n1)\tthe P-CSCF shall set the \"fStatus\" attribute to \"ENABLED\" if:\n-\tthe received em-param(s) in the P-Early-Media header field includes \"sendrecv\" and the last received SDP direction attribute from the UE is \"sendrecv\" or no SDP direction attribute has been received; or\n2)\tthe P-CSCF shall set the \"fStatus\" attribute to \"ENABLED-UPLINK\" if:\n-\tthe received em-param(s) in the P-Early-Media header field includes \"sendrecv\" and the last received SDP direction attribute from the UE is \"sendonly\"; or\n-\tthe received em-param(s) in the P-Early-Media header field includes \"sendonly\" and the last received SDP direction attribute from the UE is \"sendrecv\" or \"sendonly\" or no SDP direction attribute has been received; or\n3)\tthe P-CSCF shall set the \"fStatus\" attribute to \"ENABLED-DOWNLINK\" if:\n-\tthe received em-param(s) in the P-Early-Media header field includes \"sendrecv\" and the last received SDP direction attribute from the UE is \"recvonly\"; or\n-\tthe received em-param(s) in the P-Early-Media header field includes \"recvonly\" and the last received SDP direction attribute from the UE is \"sendrecv\" or \"recvonly\" or no SDP direction attribute has been received; or\n4)\tthe P-CSCF shall set the \"fStatus\" attribute to \"DISABLED\" if either the received em-param(s) in the P-Early-Media header field or the last received SDP direction attribute from the UE includes \"inactive\"; or\n5)\tthe P-CSCF may set the \"fStatus\" attribute to \"DISABLED\" or apply the rules defined in clause B.2.2 if the received em-param(s) in the P-Early-Media header field includes \"sendonly\" or \"recvonly\" and the last received SDP direction attribute from the UE is \"recvonly\" or \"sendonly\" respectively.\nNOTE 1:\tIf the UE is authorized to send early media, the P-CSCF will not remove or modify the P-Early-Media header field according to 3GPP TS 24.229 [32].\nWhen a SIP message with the P-Early-Media header field is received from the functional entity within the trust domain, and if:\n-\tthe P-Early-Media header field includes the \"gated\" parameter, then the P-CSCF may decide not to perform the gate control of early media; or\n-\tthe P-Early-Media header field does not include the \"gated\" parameter, then the P-CSCF shall perform the following procedures:\n1)\tthe P-CSCF shall set the \"fStatus\" attribute to \"ENABLED\" if:\n-\tthe received em-param(s) in the P-Early-Media header field includes \"sendrecv\" and the last received SDP direction attribute from the functional entity is \"sendrecv\" or no SDP direction attribute has been received; or\n2)\tthe P-CSCF shall set the \"fStatus\" attribute to \"ENABLED-DOWNLINK\" if:\n-\tthe received em-param(s) in the P-Early-Media header field includes \"sendrecv\" and the last received SDP direction attribute from the functional entity is \"sendonly\"; or\n-\tthe received em-param(s) in the P-Early-Media header field includes \"sendonly\" and the last received SDP direction attribute from the functional entity is \"sendrecv\" or \"sendonly\" or no SDP direction parameter has been received; or\n3)\tthe P-CSCF shall set the \"fStatus\" attribute to \"ENABLED-UPLINK\" if:\n-\tthe received em-param(s) in the P-Early-Media header field includes \"sendrecv\" and the last received SDP direction attribute from the functional entity is \"recvonly\"; or\n-\tthe received em-param(s) in the P-Early-Media header field includes \"recvonly\" and the last received SDP direction attribute from the functional entity is \"sendrecv\" or \"recvonly\" or no SDP direction parameter has been received; or\n4)\tthe P-CSCF shall set the \"fStatus\" attribute to \"DISABLED\" if either the received em-param(s) in the P-Early-Media header field or the last received SDP direction attribute from the functional entity includes \"inactive\"; or\n5)\tthe P-CSCF may set the \"fStatus\" attribute to \"DISABLED\" or apply the rules defined in clause A.2.2 if the received em-param(s) in the P-Early-Media header field includes \"sendonly\" or \"recvonly\" and the last received SDP direction attribute from the functional entity is \"recvonly\" or \"sendonly\" respectively.\nNOTE 2:\tAccording to IETF RFC 5009 [35], the non-direction parameter \"gated\" can be included after the direction parameter (e.g. \"sendrecv\") in the parameter list. The proxy performing gating of early media can add the parameter before forwarding the SIP message.\nWhen a SIP message without the P-Early-Media header field is received from either the functional entity within the trust domain or the UE that is authorized to send early media, then the P-CSCF may set the \"fStatus\" attribute to \"DISABLED\" or apply the rules defined in clause B.2.3 or apply the rules defined in 3GPP TS 29.513 [7] clause 7.3.3.\nNOTE 3:\tAs indicated in IETF RFC 5009 [35] the applicable preconditions need to be met in order to allow early media in a particular direction.\nWhen a SIP message is received from the functional entity other than the functional entity within the trust domain or the UE that is authorized to send early media, then the P-CSCF shall not use the received em-param(s) in the P-Early-Media header field and may apply the rules defined in clause B.2.2 or apply the rules defined in 3GPP TS 29.513 [7] clause 7.3.3.\nNOTE 4:\tThe P-CSCF will remove or modify the P-Early-Media header field in the above case.\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "B.2.3\tGate control procedures based on the configuration in the P-CSCF",
                    "description": "",
                    "summary": "",
                    "text_content": "Prior to the completion of the SIP session set-up, the P-CSCF may downgrade the values of the \"fStatus\" attributes derived from the SDP direction attributes based on the configuration in the P-CSCF. If the P-CSCF has the configuration for the gate control of early media, the P-CSCF shall perform the following procedures.\nNOTE:\tThe gate control of early media can be configured in the P-CSCF per UE basis.\nWhen the \"fStatus\" attribute derived from the SDP direction attribute is \"ENABLED\", then the P-CSCF may downgrade the value of the \"fStatus\" attribute to the value \"DISABLED\", \"ENABLED_UPLINK\", or \"ENABLED_DOWNLINK\" based on the configuration in the P-CSCF.\nWhen the \"fStatus\" attribute derived from the SDP direction attribute is \"ENABLED_UPLINK\" or \"ENABLED_DOWNLINK\", then the P-CSCF may downgrade the value of the \"fStatus\" attribute to the value \"DISABLED\" based on the configuration in the P-CSCF.\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                }
            ]
        },
        {
            "title": "B.3\tSupport for SIP forking",
            "description": "",
            "summary": "",
            "tables": [],
            "figures_meta_data": [],
            "subsections": [
                {
                    "title": "B.3.0\tGeneral",
                    "description": "",
                    "summary": "",
                    "text_content": "The P-CSCF shall be able to handle forking when PCC is applied and the \"IMS_SBI\" feature is supported. Forking can occur as specified in 3GPP TS 23.228 [33]. The related UE procedures are described in 3GPP TS 24.229 [32].\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "B.3.1\tPCC rule provisioning for early media for forked responses",
                    "description": "",
                    "summary": "",
                    "text_content": "When a SIP session has been originated by a connected UE, the P-CSCF may receive multiple provisional responses due to forking before the first final answer is received. Multiple early media session may be established during this process.\nThe UE and the P-CSCF become aware of the forking only when a subsequent provisional response arrives for a new early dialogue. After the first early media session is established, for each subsequent provisional response establishing an additional early media session, the P-CSCF shall use an Npcf_PolicyAuthorization_Update service operation containing the \"sipForkInd\" attribute with value \"SEVERAL_DIALOGUES\" and include the service information derived from the latest provisional response.\nThe P-CSCF shall also provision the service information derived from any subsequent SDP offer-answer exchange within an early dialogue (e.g. in PRACK and OK(PRACK), or UPDATE and OK(UPDATE) ) using an Npcf_PolicyAuthorization_Update service operation containing the \"sipForkInd\" attribute with value \"SEVERAL_DIALOGUES\" and the derived service information.\nWhen receiving an Npcf_PolicyAuthorization_Update service operation containing the \"sipForkInd\" attribute with value \"SEVERAL_DIALOGUES\", the PCF shall identify the existing \"Individual Application Session Context\" resource with existing authorization information.\nThe PCF shall send additional PCC Rules or individual service data flow filters to already provided PCC rules as required by the \"fDescs\" attribute within the AF session context information to the SMF. The PCF shall authorize any additional media components and any increased QoS requirements for the previously authorized media components, as requested within the service information.\nThe PCF shall authorize the maximum bandwidth required by any of the dialogues, but not the sum of the bandwidths required by all dialogues. Thus, the QoS authorized for a media component is equal to the highest QoS requested for that media component by any of the forked responses.\nThe PCF shall open or close the gates for service flows depending on the flow status that is being provisioned. However, if a flow ID has been enabled in uplink or downlink direction or both way within previous service information, it shall remain enabled even if the PCF receives service information that disable this flow ID within an Npcf_PolicyAuthorization_Update service operation containing the \"sipForkInd\" attribute with value \"SEVERAL_DIALOGUES\".\nIf the P-CSCF provides one or more media components within the \"medComponents\" attribute with the \"fStatus\" attribute set to \"REMOVED\" for previously authorized media component(s) the media component shall remain as authorized and the PCF shall not take any action on that media component(s).\nNOTE:\tThere can be cases where a forked response could not support some of the media components included in the SDP Offer (e.g. when early session disposition SDP as described in Annex B.6 applies, the forked response related to the early session could include the port set to zero for those media components not related to the early session or when a subsequent SDP Offer-Answer to indicate that some media is disabled). For those cases the P-CSCF will indicate the PCF about the removal of the corresponding media component. However this media component is already supported by other UEs and the PCF needs to maintain the corresponding PCC rules until the final SDP answer is received in the P-CSCF in order to avoid the release of resources in the network.\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "B.3.2\tUpdating the provisioned PCC rules at the final answer",
                    "description": "",
                    "summary": "",
                    "text_content": "The P-CSCF shall store the SDP information for each early dialogue separately till the first final SIP answer is received. Then the related early dialogue is progressed to an established dialogue to establish the final SIP session. All the other early dialogues are terminated. The service information for the SIP session is updated to match the requirements of the remaining early dialogue only.\nWhen receiving the first final SIP response, the P-CSCF shall send an Npcf_PolicyAuthorization_Update service operation setting to null the \"sipForkInd\" attribute and shall include the service information derived from the SDP corresponding to the dialogue of the final response. The P-CSCF shall provision the full service information including the applicable \"fDescs\" attribute and \"fStatus\" attribute.\nWhen receiving an Npcf_PolicyAuthorization_Update service operation with a \"sipForkInd\" attribute with value \"SINGLE_DIALOGUE\", the PCF shall update installed PCC Rules information and Authorized-QoS information to match only the requirements of the service information within this Npcf_PolicyAuthorization_Update service operation. The PCF should immediately remove PCC Rule(s) or individual service data flow filters not matching IP flow(s) in the updated Service Information, to reduce the risk for initial clipping of the media stream, and to minimize possible misuse of resources. The PCF shall also open or close the gates for service flows according to the flow status in the received service information.\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                }
            ]
        },
        {
            "title": "B.4\tNotification of AF Signalling Transmission Path Status",
            "description": "When the P-CSCF receives an initial REGISTER SIP message from an attached UE, the P-CSCF may subscribe to notifications of the status of the AF signalling transmission path using the procedures specified in clause 4.2.6.7. Once the P-CSCF has subscribed, the P-CSCF may receive notifications from the PCF according to clause 4.2.5.10.\nNOTE: \tThis procedure is not applicable for IMS registrations for Emergency sessions.\nThe P-CSCF shall cancel the subscription to notification of the status of the AF signalling transmission path when the AF signalling to that particular user is terminated (i.e. when the user is de-REGISTERED from the IM CN subsystem).\nWhen the P-CSCF receives a notification of loss of signalling connectivity from the PCF, the P-CSCF shall behave as defined in 3GPP TS 24.229 [32].\n",
            "summary": "",
            "tables": [],
            "figures_meta_data": [],
            "subsections": []
        },
        {
            "title": "B.5\tIndication of Emergency Registration and Session Establishment",
            "description": "When the P-CSCF receives an initial REGISTER SIP message for an IMS emergency registration or an INVITE SIP message for an emergency session and the P-CSCF determines that there are no IMS-level roaming interfaces, and the \"IMS_SBI\" feature is supported the P-CSCF may request the PCF to provide the 5GS-Level UE identities (GPSI, SUPI, PEI) available for that PDU session in the serving network (either a PLMN or an SNPN) using the procedure as specified in this clause (for an IMS emergency registration) or B.1 (for an IMS emergency session establishment).\nA P-CSCF may request the PCF to provide the 5GS-level identities (GPSI, SUPI, PEI) available for that PDU session when no service information is available in the P-CSCF. To do so, the P-CSCF shall create an \"Individual Application Session Context\" resource in the PCF for the AF signalling using an Npcf_PolicyAuthorization_Create service operation. The P-CSCF shall provide the UE's IP address (using either the \"ueIpv4\" attribute or the \"ueIpv6\" attribute) and the \"afReqData\" attribute set to \"UE_IDENTITY\". The P-CSCF shall include the \"servUrn\" attribute set to the value \"sos\", in order to indicate that the new AF session context relates to emergency traffic that is not related to a specific emergency service.\nIf the P-CSCF supports the SBI Message Priority mechanism for an emergency session, it shall include the \"3gpp-Sbi-Message-Priority\" custom HTTP header towards the PCF as described in clause 6.8.2 of 3GPP TS 29.500 [5].\nNOTE 1:\tIf the P-CSCF supports the SBI Message Priority mechanism for an emergency session, the P-CSCF includes the \"3gpp-Sbi-Message-Priority\" custom HTTP header based on P-CSCF policies in relation to valid values of the \"servUrn\" attribute. The highest user priority value is mapped to the corresponding lowest value of the \"3gpp-Sbi-Message-Priority\" custom HTTP header.\nWhen the PCF receives an Npcf_PolicyAuthorization_Create service operation as described in the preceding paragraphs from the P-CSCF, the PCF shall perform session binding as described in 3GPP TS 29.513 [7]. When the PCF receives the \"servUrn\" attribute indicating an emergency session, the PCF may apply special policies, for instance prioritising service flows relating to the AF session context or allowing these service flows free of charge.\nWhen the \"servUrn\" attribute indicates that the AF session context relates to emergency traffic and the \"afReqData\" attribute is received indicating \"UE_IDENTITY\", the PCF shall provide the requested available user information (MSISDN, IMSI (for PLMN access) or either IMSI or NAI (for SNPN access), IMEI(SV)) for the PDU session within \"ueIds\" attribute within the \"ascRespData\" in the HTTP \"201 Created\" response.\nWhen the P-CSCF receives the HTTP \"201 Created\" response with the 5GS-level UE identities from the PCF, the P-CSCF stores the \"ueIds\" received within \"Individual Application Session Context\" resource returned in the HTTP \"201 Created\" response and behaves as defined in 3GPP TS 24.229 [32].\nNOTE 2:\tThe user information received within the \"ueIds\" attribute can be used to support PSAP callback functionality for anonymous IMS emergency sessions. See 3GPP TS 23.167 [40] for further information.\nThe P-CSCF may decide to delete the \"Individual Application Session Context\" resource at any time. In that case, the Npcf_PolicyAuthorization_Delete service operation, as described in clause 4.2.4.2.\nA SIP INVITE request can contain a service URN as defined in IETF RFC 5031 [34] within the request URI. If the service within this URN is \"sos\", possibly with additional sub-service information, the P-CSCF shall provision this service and sub-service information within the \"servUrn\" attribute towards the PCF. The P-CSCF may also provision possible information about other services received within the service URN.\n",
            "summary": "",
            "tables": [],
            "figures_meta_data": [],
            "subsections": []
        },
        {
            "title": "B.6\tSupport for Early Session disposition SDP",
            "description": "",
            "summary": "",
            "tables": [],
            "figures_meta_data": [],
            "subsections": [
                {
                    "title": "B.6.1\tGeneral",
                    "description": "",
                    "summary": "",
                    "text_content": "As a network option, when the \"IMS_SBI\" feature is supported, the P-CSCF may support the PCC procedures in the present clause to handle \"early session\" disposition type SDP, as standardised in IETF RFC 3959 [38].\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "B.6.2\tService Information Provisioning for Early Media",
                    "description": "",
                    "summary": "",
                    "text_content": "The P-CSCF can receive \"early session\" disposition SDP in addition to \"session\" disposition SDP in SIP early dialogues.\nThe P-CSCF shall then provision service information derived both from the \"early session\" disposition SDP and \"session\" disposition SDP applying the procedures in clauses B.1, B.2, and B.3, and in the present clause.\nThe P-CSCF shall apply the mapping rules in Annex C to derive the flow identifiers from \"early session\" disposition SDP.\nIf a single media line with one media type (e.g. \"audio\" or \"video\") is contained in \"early session\" disposition SDP and a single media line with the same media type is contained in the \"session\" disposition SDP of the same SIP dialogue, and both media lines describe service flows of the same directionality (uplink, downlink, or bidirectional), the P-CSCF should describe those SDP media lines in the same session information media component (with the same flow ID).\nThe \"early session\" disposition SDP can also contain media lines of a type not included in the \"session\" disposition SDP, or several media lines of the same type. Such media components shall be described in own media components in the service information.\nIf the P-CSCF desires to invoke special policies or separate event notifications for an \"early session\" disposition media line, it may choose to provision a separate session information media component even if a media line with the same media type and directionality is contained in \"session\" disposition SDP.\nNOTE 1:\tA PCF is then likely to supply separate PCC rules for early media and the corresponding final media. This may lead to an over provisioning of resources during call establishment and a subsequent reconfiguration of the radio bearer, or even to a call failure if the extra resources are not authorized or available.\nIf the P-CSCF receives \"early session\" disposition SDP before any \"session\" disposition SDP and supplies service information derived from the \"early session\" disposition SDP at this point of time, it shall use dedicated media components relating only to the \"early session\" disposition SDP in the service information.\nNOTE 2:\tThe \"session\" disposition SDP offer will frequently occur before the \"early session\" disposition SDP offer, but can also occur in parallel or in exceptional cases afterwards. The \"session\" disposition SDP answer can be contained in the same SIP message as the \"early session\" disposition SDP offer, or can be sent in a 200 OK (INVITE), i.e. after the \"early session\" disposition SDP answer.\nIf the P-CSCF includes any media component relating both to \"early session\" disposition SDP and \"session\" disposition SDP in the service information, the P-CSCF shall:\n-\tprovision the service information derived from \"early session\" disposition SDP and the service information derived from \"session\" disposition SDP in separate Npcf_PolicyAuthorization_Update requests (to the same \"Individual Application Session Context\" resource), and shall send a new Npcf_PolicyAuthorization_Update request only after any previous Npcf_PolicyAuthorization_Update request has been acknowledged; and\n-\tprovision the first service information (either derived from \"early session\" disposition SDP or \"session\" disposition SDP) without the \"sipForkInd\" attribute, or with \"sipForkInd\" attribute with value \"SINGLE_DIALOGUE\"; and\n-\tprovision all subsequent service information during ongoing call establishment with the \"sipForkInd\" attribute with value SEVERAL_DIALOGUES; and\n-\tif an SDP answer has been received and codecs are provisioned within the \"codecs\" attribute included in a media component of the \"medComponents\" attribute, provision within a \"codecs\" attribute the codec derived from the corresponding offer together with a codec derived from the SDP answer.\nNOTE 3:\tThe P-CSCF needs to provision the service information derived from \"early session\" disposition SDP and the service information derived from \"session\" disposition SDP in separate Npcf_PolicyAuthorization_Update requests because the encoding of the media component does not allow for the simultaneous provisioning of two corresponding filters.\nNOTE 4:\tThe PCF will treat service information containing the \"sipForkInd\" attribute as described in clause B.3.\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "B.6.3\tUpdating the Provisioned Service Information when Dialogue is established",
                    "description": "",
                    "summary": "",
                    "text_content": "The P-CSCF shall store the SDP information for the \"session\" disposition type until the first final SIP answer is received. Then the early media described in the \"early session\" disposition type SDP are terminated.\nThe P-CSCF shall then update the service information to match the requirements of the media described in the \"session\" disposition type SDP only:\n-\tIf the P-CSCF included any media component relating both to \"early session\" disposition SDP and \"session\" disposition SDP in the service information, the P-CSCF shall send an Npcf_PolicyAuthorization_Update request without the \"sipForkInd\" attribute or with a \"sipForkInd\" attribute with value SINGLE_DIALOGUE and shall include the service information derived from the \"session\" disposition SDP. The P-CSCF shall provision the full service information including the applicable \"fDescs\" attribute and \"fStatus\" attribute.\n-\tThe P-CSCF shall disable any media component(s) in the service information that relate to early media only by setting their flow status to \"REMOVED\".\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                }
            ]
        },
        {
            "title": "B.7\tProvision of Signalling Flow Information at P-CSCF",
            "description": "When the P-CSCF has successfully concluded the initial registration of an attached UE, i.e., when the P-CSCF has sent to the UE a SIP 200 (OK) response to the SIP REGISTER request, the P-CSCF may provision information about the SIP signalling flows between the UE and itself using the procedure specified in clause 4.2.2.16. If the P-CSCF already has created an \"Individual Application Session Context\" resource with the PCF related to the signalling with the UE, e.g. one that has been opened according to the procedure described in clause B.4, the P-CSCF shall reuse the already open session to provision the SIP Signalling IP Flow information using the procedure specified in clause 4.2.3.17.\nNOTE:\tThis procedure is not applicable for IMS registrations for Emergency sessions.\nIf the P-CSCF provisions information about SIP signalling flows, the P-CSCF shall ensure that for each signalling IP flow information it provides, the flow descriptions within the \"fDescs\" attribute shall accurately reflect the IP flow information as seen in the IP header 'on the wire'. The P-CSCF shall set the value of the \"afSigProtocol\" attribute to \"SIP\".\nWhen the P-CSCF de-registers the UE and terminates SIP Signalling to the UE, the P-CSCF shall de-provision the SIP Signalling IP flow information from the PCRF as described in clauses 4.2.2.16 and 4.2.3.17.\n",
            "summary": "",
            "tables": [],
            "figures_meta_data": [],
            "subsections": []
        },
        {
            "title": "B.8\tRetrieval of network provided location information",
            "description": "",
            "summary": "",
            "tables": [],
            "figures_meta_data": [],
            "subsections": [
                {
                    "title": "B.8.1\tGeneral",
                    "description": "",
                    "summary": "",
                    "text_content": "According to clause E.7 of 3GPP TS 23.228 [33], the P-CSCF can use PCC to retrieve network provided location information. Information flows related to the distribution of network provided location information within the IMS are provided in Annex R of 3GPP TS 23.228 [33].\nThe following clauses provide optional PCC procedures to support the retrieval of network provided location information.\nThe originating P-CSCF can, depending on operator policy, retrieve the user location and/or UE Time Zone information either before sending the INVITE or MESSAGE towards the terminating side or upon reception of the SDP answer from the terminating side.\nThe terminating P-CSCF can, depending on operator policy, retrieve the user location and/or UE Time Zone information either upon reception of a SIP INVITE or upon reception of a SIP response.\nThe originating and terminating P-CSCF can, depending on operator policy, retrieve the user location and/or UE Time Zone information at mid call. e.g., when the P-CSCF learns about the access type change.\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "B.8.2\tRetrieval of network provided location information at originating P-CSCF for inclusion in SIP Request",
                    "description": "",
                    "summary": "",
                    "text_content": "If the originating P-CSCF is required by operator policy to retrieve network provided location information before forwarding a SIP INVITE request, upon reception of the SIP INVITE/UPDATE request, the P-CSCF shall invoke:\n-\tthe Npcf_PolicyAuthorization_Create service operation according to clause 4.2.2.14 (SIP INVITE request); or\n-\tthe Npcf_PolicyAuthorization_Update service operation according to clause 4.2.3.14 or the Npcf_PolicyAuthorization_Subscribe service operation according to clause 4.2.6.6 (SIP INVITE/UPDATE request);\nincluding in the corresponding HTTP request:\n-\tan entry of the \"AfEventSubscription\" data type in the \"events\" attribute with:\na)\tthe \"event\" attribute set to the value \"ANI_REPORT\"; and\nb)\tthe \"notifMethod\" attribute set to the value \"ONE_TIME\"; and\n-\tthe \"reqAnis\" attribute, with the required access network information, i.e. user location and/or user time zone information).\nIf the SIP INVITE request is an initial SIP INVITE request, the P-CSCF shall create a new \"Individual Application Session Context\" for the new SIP session with the Npcf_PolicyAuthorization_Subscribe service operation according to clause 4.2.6.6 (if no session information is included) or with the Npcf_PolicyAuthorization_Create service operation according to clause 4.2.2.14 (if preliminary session information is included).\nThe P-CSCF will receive the access network information from the PCF within the Npcf_PolicyAuthorization_Notify service operation as described in clause 4.2.5.11 and should include this access network information in the SIP INVITE/UPDATE requests that it forwards. When the retrieved access network information corresponds to the \"tnapId\" or \"twapId\" attribute, the P-CSCF may also map the retrieved access network information to a Geographical Identifier for routing, as specified in clause E.8 of 3GPP TS 23.228 [33].\nIf the originating P-CSCF is required by operator policy to retrieve network provided location information before forwarding a SIP MESSAGE request, upon reception of a MESSAGE request, the P-CSCF shall invoke the Npcf_PolicyAuthorization_Subscribe service operation including in the corresponding HTTP request:\n-\tthe IP address (IPv4 or IPv6) of the UE in the \"ueIpv4\" or \"ueIpv6\" attribute;\n-\ta media component within the \"medComponents\" attribute including:\na)\tthe \"medCompN\" attribute set to \"0\"; and\nb)\ta single media subcomponent within the \"medSubComps\" attribute with:\ni.\tthe \"flowUsage\" attribute set to the value \"AF_SIGNALLING\"; and\nii.\tif the procedures for AF provisioning of AF signalling flow information do not apply, the \"fNum\" attribute set to \"0\".\n-\tan entry of the \"AfEventSubscription\" data type in the \"events\" attribute with:\na)\tthe \"event\" attribute set to the value \"ANI_REPORT\"; and\nb)\tthe \"notifMethod\" attribute set to the value \"ONE_TIME\"; and\n-\tthe \"reqAnis\" attribute, with the required access network information, i.e. user location and/or user time zone information).\nThe P-CSCF will receive the access network information from the PCF within the Npcf_PolicyAuthorization_Notify service operation as described in clause 4.2.5.11 and should include this access network information in the SIP MESSAGE requests that it forwards. When the retrieved access network information corresponds to the \"tnapId\" or \"twapId\" attribute, the P-CSCF may also map the retrieved access network information to a Geographical Identifier for routing, as specified in clause E.8 of 3GPP TS 23.228 [33].\nIf the AF application session context is only used for retrieval of network provided location information, at reception of this information, the AF may delete the context of application session information using the Npcf_PolicyAuthorization_ Delete service operation.\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "B.8.3\tRetrieval of network provided location information at originating P-CSCF for inclusion in SIP response confirmation",
                    "description": "",
                    "summary": "",
                    "text_content": "If an originating P-CSCF is required by operator policy to retrieve network provided location information before forwarding an SDP answer, the P-CSCF shall apply the following procedures.\nUpon reception of an SDP offer, the P-CSCF may invoke the Npcf_PolicyAuthorization_Create service operation to the PCF according to clause B.1 and may include in the corresponding HTTP POST request:\n-\tan entry of the \"AfEventSubscription\" data type in the \"events\" attribute with:\na)\tthe \"event\" attribute set to the value \"ANI_REPORT\"; and\nb)\tthe \"notifMethod\" attribute set to the value \"ONE_TIME\"; and\n-\tthe \"reqAnis\" attribute, with the required access network information, i.e. user location and/or user time zone information).\nUpon reception of an SDP answer, the P-CSCF will invoke the Npcf_PolicyAuthorization_Update service operation to the PCF according to clause B.1. If the P-CSCF has not requested access network information upon reception of the SDP offer, the P-CSCF shall include in the corresponding HTTP PATCH request:\n-\tan entry of the \"AfEventSubscription\" data type in the \"events\" attribute with:\na)\tthe \"event\" attribute set to the value \"ANI_REPORT\"; and\nb)\tthe \"notifMethod\" attribute set to the value \"ONE_TIME\"; and\n-\tthe \"reqAnis\" attribute, with the required access network information, i.e. user location and/or user time zone information).\nThe P-CSCF will receive the access network information from the PCF in the Npcf_PolicyAuthorization_Notify service operation and should include this access network information in the SIP message with the response confirmation before forwarding it. When the retrieved access network information corresponds to the \"tnapId\" or \"twapId\" attribute, the P-CSCF may also map the retrieved access network information to a Geographical Identifier for routing, as specified in clause E.8 of 3GPP TS 23.228 [33].\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "B.8.4\tRetrieval of network provided location information at terminating P-CSCF",
                    "description": "",
                    "summary": "",
                    "text_content": "If a terminating P-CSCF is required by operator policy to retrieve network provided location information at session establishment and/or modification, the P-CSCF shall apply the following procedures.\nThe terminating P-CSCF may request network provided location information upon reception of a SIP INVITE request in the following manner:\n-\tif the SIP INVITE request is an initial SIP INVITE request, the P-CSCF shall create a new \"Individual Application Session Context\" for the new SIP session with the Npcf_PolicyAuthorization_Subscribe service operation according to clause 4.2.6.6 (if no session information is included) or with the Npcf_PolicyAuthorization_Create service operation according to clause 4.2.2.14 (if preliminary session information is included);\n-\tif the SIP INVITE contains an SDP offer, the P-CSCF shall include in the corresponding HTTP request:\na)\tan entry of the \"AfEventSubscription\" data type in the \"events\" attribute with:\n(i)\tthe \"event\" attribute set to the value \"ANI_REPORT\"; and\n(ii)\tthe \"notifMethod\" attribute set to the value \"ONE_TIME\";\nb)\tthe \"reqAnis\" attribute, with the required access network information, i.e. user location and/or user time zone information);\nc)\tservice information derived from the SDP offer; and\nd)\tthe \"servInfStatus\" attribute with the value set to \"PRELIMINARY\"; and\n-\tif the SIP INVITE does not contain an SDP offer, the P-CSCF shall include in the corresponding HTTP request:\na)\tan entry of the \"AfEventSubscription\" data type in the \"events\" attribute with:\n(i)\tthe \"event\" attribute set to the value \"ANI_REPORT\"; and\n(ii)\tthe \"notifMethod\" attribute set to the value \"ONE_TIME\"; and\nb)\tthe \"reqAnis\" attribute, with the required access network information, i.e. user location and/or user time zone information).\nUpon reception of a SIP response that requires the inclusion of access network information, if the P-CSCF has not already requested network provided location information upon reception of the corresponding SIP INVITE request, the P-CSCF shall request network provided location information in the following manner:\n-\tif an \"Individual Application Session Context\" related to service data has not yet been created, the P-CSCF shall create an \"Individual Application Session Context\" for the new SIP session with the Npcf_PolicyAuthorization_Subscribe service operation according to clause 4.2.6.6 (if no session information is included) or with the Npcf_PolicyAuthorization_Create service operation according to clause 4.2.2.14 (if session information is included);\n-\tif the SIP response includes an SDP answer, the P-CSCF shall send an HTTP request to the PCF according to clause B.1; the P-CSCF shall include in this HTTP request:\na)\tan entry of the \"AfEventSubscription\" data type in the \"events\" attribute with:\n(i)\tthe \"event\" attribute set to the value \"ANI_REPORT\"; and\n(ii)\tthe \"notifMethod\" attribute set to the value \"ONE_TIME\"; and\nb)\tthe \"reqAnis\" attribute, with the required access network information, i.e. user location and/or user time zone information);\n-\tif the SIP response does not contain an SDP body, the P-CSCF shall include in the corresponding HTTP request:\na)\tan entry of the \"AfEventSubscription\" data type in the \"events\" attribute with:\n(i)\tthe \"event\" attribute set to the value \"ANI_REPORT\"; and\n(ii)\tthe \"notifMethod\" attribute set to the value \"ONE_TIME\"; and\nb)\tthe \"reqAnis\" attribute, with the required access network information, i.e. user location and/or user time zone information); and\n-\tif the SIP response includes an SDP offer, the P-CSCF shall include in the corresponding HTTP request:\n-\ta)\tan entry of the \"AfEventSubscription\" data type in the \"events\" attribute with:\n(i)\tthe \"event\" attribute set to the value \"ANI_REPORT\"; and\n(ii)\tthe \"notifMethod\" attribute set to the value \"ONE_TIME\";\nb)\tthe \"reqAnis\" attribute, with the required access network information, i.e. user location and/or user time zone information);\nc)\tservice information derived from the SDP offer; and\nd)\tthe \"servInfStatus\" attribute with the value set to \"PRELIMINARY\".\nThe P-CSCF will receive the access network information from the PCF in the Npcf_PolicyAuthorization_Notify service operation and should include this access network information in the appropriate SIP response before forwarding it. When the retrieved access network information corresponds to the \"tnapId\" or \"twapId\" attribute, the P-CSCF may also map the retrieved access network information to a Geographical Identifier for routing, as specified in clause E.8 of 3GPP TS 23.228 [33].\nIf the terminating P-CSCF is required by operator policy to retrieve network provided location information upon reception of a SIP MESSAGE response, the P-CSCF shall behave according to B.8.2.\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "B.8.5\tProvisioning of network provided location information at SIP session release",
                    "description": "",
                    "summary": "",
                    "text_content": "If a P-CSCF is required by operator policy to include network provided location information in SIP session release signalling, the P-CSCF shall apply the following procedures:\nUpon reception of a SIP session release request that requires the inclusion of network provided location information, the P-CSCF will invoke the Npcf_PolicyAuthorization_Delete service operation to the PCF according to clause 4.2.4.6 and shall include in the HTTP request:\n-\tan entry of the \"AfEventSubscription\" data type in the \"events\" attribute with:\na)\tthe \"event\" attribute set to the value \"ANI_REPORT\"; and\nb)\tthe \"notifMethod\" attribute set to the value \"ONE_TIME\"; and\n-\tthe \"reqAnis\" attribute, with the required access network information, i.e. user location and/or user time zone information).\nThe P-CSCF will receive the access network information from the PCF in the Npcf_PolicyAuthorization_Delete service operation according to clause 4.2.4.6 and shall include this access network information in the appropriate SIP message before forwarding it. When the retrieved access network information corresponds to the \"tnapId\" or \"twapId\" attribute, the P-CSCF may also map the retrieved access network information to a Geographical Identifier for routing, as specified in clause E.8 of 3GPP TS 23.228 [33].\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "B.8.6\tProvisioning of network provided location information at mid call",
                    "description": "",
                    "summary": "",
                    "text_content": "If a P-CSCF is required by operator policy to include network provided location information at mid call, the P-CSCF shall apply the following procedures:\nUpon reception of a trigger (e.g., when the P-CSCF learns about the access change) that requires the inclusion of network provided location information in a SIP message, the P-CSCF will invoke the Npcf_PolicyAuthorization_Update and shall include in the corresponding HTTP request:\na)\tan entry of the \"AfEventSubscription\" data type in the \"events\" attribute with:\n(i)\tthe \"event\" attribute set to the value \"ANI_REPORT\"; and\n(ii)\tthe \"notifMethod\" attribute set to the value \"ONE_TIME\";\nb)\tthe \"reqAnis\" attribute, with the required access network information, i.e. user location and/or user time zone information);\nc)\tservice information related to the service according to clause 4.2.3.2.\nThe P-CSCF will receive the access network information from the PCF in the Npcf_PolicyAuthorization_Notify service operation, and should include this access network information in the appropriate SIP message before forwarding it. When the retrieved access network information corresponds to the \"tnapId\" or \"twapId\" attribute, the P-CSCF may also map the retrieved access network information to a Geographical Identifier for routing, as specified in clause E.8 of 3GPP TS 23.228 [33].\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                }
            ]
        },
        {
            "title": "B.9\tResource Sharing",
            "description": "The P-CSCF may indicate to the PCF that media of an \"Individual Application Session Context\" resource may share resources with media belonging to other \"Individual Application Session Context\" resources according to 3GPP TS 23.228 [33].\nIf the P-CSCF determines that resource sharing is possible, it may at creation of a new \"Individual Application Session Context\" resource, include the \"sharingKeyUl\" attribute and/or \"sharingKeyDl\" attribute indicating that media resources may be shared in the related direction. The P-CSCF shall assign a distinct value for the \"sharingKeyUl\" attribute and/or \"sharingKeyDl\" attribute for each media component within the \"medComponents\" attribute.\nNOTE 1:\tWhen resource sharing applies to both directions for a certain media component, the P-CSCF can assign the same value for \"sharingKeyUl\" attribute and \"sharingKeyDl\" attribute within the same media component.\nThe P-CSCF shall not include the \"sharingKeyUl\" attribute and/or \"sharingKeyDl\" attribute within the media components in the \"medComponents\" attribute when the \"Individual Application Session Context\" resource relates to an Emergency Session.\nThe PCF shall not include the \"sharingKeyUl\" attribute and/or \"sharingKeyDl\" attribute for those PCC/QoS Rules related to the RTCP traffic.\nTrigger conditions that require applying or stopping resource sharing are described in 3GPP TS 24.229 [32].\nNOTE 2:\tWhen P-CSCF needs to stop sharing according to the procedures described in 3GPP TS 24.229 [32], the P-CSCF will provide \"null\" value for the \"sharingKeyUl\" attribute and/or \"sharingKeyDl\" attribute within the media component in the \"medComponents\" attribute.\n",
            "summary": "",
            "tables": [],
            "figures_meta_data": [],
            "subsections": []
        },
        {
            "title": "B.10\tHandling of MCPTT priority call",
            "description": "",
            "summary": "",
            "tables": [],
            "figures_meta_data": [],
            "subsections": [
                {
                    "title": "B.10.1\tGeneral",
                    "description": "",
                    "summary": "",
                    "text_content": "Within the framework of MCPTT, when the SIP Core (3GPP TS 24.379 [41]) is implemented by an IMS core network, if the P-CSCF receives a SIP request message including a Resource-Priority header field with a namespace field and priority value defined for MCPTT for adjusting the priority of an MCPTT session, the P-CSCF shall provide the \"resPrio\" attribute and the \"mcpttId\" in the Npcf_PolicyAuthorization_Create request as defined in clause B.13.2 to allow the PCF to set the corresponding PCC rule(s) according to the prioritized MCPTT service. Additionally, if \"PrioritySharing\" feature is supported, the P-CSCF may provide the \"prioSharingInd\" attribute within the media component included in the \"medComponents\" attribute as described in clause B.1. For MCPTT the service priority and the priority sharing indicator are defined in 3GPP TS 24.379 [41].\nNOTE 1:\tThe process of adjusting priority may occur several times during the course of one session, e.g. a normal MCPTT group call elevated to an MCPTT emergency group call, returned to a normal priority MCPTT group call, elevated to an MCPTT imminent peril group call and returned to a normal priority MCPTT group call.\nNOTE 2:\tUpon reception of a request that requires the adjustment of the MCPTT priority, the PCF is expected to derive the PCC Rules corresponding to the this MCPTT session, as appropriate according to operator policies.\nNOTE 3:\tThe PCF can identify an MCPTT call using the IMS Communication Service Identifier specific to MCPTT, which is provided by the P-CSCF in the \"afAppId\" attribute in the Npcf_PolicyAuthorization_Create request sent to PCF.\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "B.10.2\tDetermination of MCPTT priority parameter values",
                    "description": "",
                    "summary": "",
                    "text_content": "When the P-CSCF receives an authorized Resource-Priority header field containing an appropriate namespace and priority value used for MCPTT in SIP signalling, the P-CSCF shall include the \"mcpttId\" attribute and the \"resPrio\" attribute in the corresponding Npcf_PolicyAuthorization service operation towards the PCF.\nThe \"mcpttId\" attribute shall include the namespace defined for MCPTT as received within the Resource-Priority header field.\nNOTE:\tTwo different values are defined for the MCPTT-Identifier AVP, one for each namespace value defined for MCPTT (see IETF RFC 8101 [42]).\nThe \"resPrio\" attribute shall contain the priority value of the Resource-Priority header; the lowest priority shall be mapped to PRIO_1 (Resource-Priority header value 0), the next after the lowest to PRIO_2 (Resource-Priority header value 1), and so on up to the highest priority which shall be mapped to PRIO_16 (Resource-Priority header value 15).\nAdditionally, when the P-CSCF receives information about priority sharing from an MCPTT server that supports simultaneous sessions and that needs to share a common priority for several MCPTT sessions and if \"PrioritySharing\" feature is supported, the P-CSCF may include the \"prioSharingInd\" attribute within the media component received in the \"medComponents\" attribute in the corresponding Npcf_PolicyAuthorization service operation. See 3GPP TS 24.379 [41] for further information.\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                }
            ]
        },
        {
            "title": "B.11\tHandling of MCVideo priority call",
            "description": "",
            "summary": "",
            "tables": [],
            "figures_meta_data": [],
            "subsections": [
                {
                    "title": "B.11.1\tGeneral",
                    "description": "",
                    "summary": "",
                    "text_content": "Within the framework of MCVideo, when the SIP Core (3GPP TS 23.281 [34]) is implemented by an IMS core network, if the P-CSCF receives a SIP request message including a Resource-Priority header field with a namespace field and priority value defined for MCVideo for adjusting the priority of an MCVideo session, the P-CSCF shall provide the \"resPrio\" attribute and the \"mcVideoId\" in the Npcf_PolicyAuthorization_Create request as defined in clause B.15.2 to allow the PCF to set the corresponding PCC rule(s) according to the prioritized MCVideo service.\nNOTE 1:\tThe process of adjusting priority may occur several times during the course of one session, e.g. a normal MCVideo group call elevated to an MCVideo emergency group call and returned to a normal priority MCVideo group call, elevated to an MCVideo imminent peril group call and returned to a normal priority MCVideo group call.\nNOTE 2:\tUpon reception of a request that requires the adjustment of the MCVideo priority, the PCF is expected to derive the PCC Rules corresponding to the this MCVideo session, as appropriate according to operator policies.\nNOTE 3:\tThe PCF can identify an MCVideo call using the IMS Communication Service Identifier specific to MCVideo, which is provided by the P-CSCF in the \"afAppId\" attribute in the Npcf_PolicyAuthorization_Create request sent to PCF.\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "B.11.2\tDetermination of MCVideo priority parameter values",
                    "description": "",
                    "summary": "",
                    "text_content": "When the P-CSCF receives an authorized Resource-Priority header field containing an appropriate namespace and priority value used for MCVideo in SIP signalling, the P-CSCF shall include the \"mcVideoId\" attribute and the \"resPrio\" attribute in the corresponding Npcf_PolicyAuthorization service operation towards the PCF.\nThe \"mcVideoId\" attribute shall include the namespace defined for MCVideo as received within the Resource-Priority header field.\nThe \"resPrio\" attribute shall contain the priority value of the Resource-Priority header; the lowest priority shall be mapped to PRIO_1 (Resource-Priority header value 0), the next after the lowest to PRIO_2 (Resource-Priority header value 1), and so on up to the highest priority which shall be mapped to PRIO_16 (Resource-Priority header value 15).\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                }
            ]
        },
        {
            "title": "B.12\tNotification Access Type Change",
            "description": "When the P-CSCF receives an initial SIP REGISTER message or a SIP INVITE message from an attached UE, the P-CSCF may request from the PCF the information about the access type the UE is attached to using the procedure specified in clauses 4.2.2.2, 4.2.3.2 and 4.2.6.2.\nNOTE 1:\tThis procedure is not applicable for IMS registrations for Emergency sessions.\nNOTE 2:\tThe P-CSCF can request information about the access type as part of the SIP session setup when it is only interested in the related information when the IMS session is ongoing.\nIf the P-CSCF requests information about the access type, the P-CSCF shall also subscribe within the same Npcf_PolicyAuthorization service operation to notifications for changes of the access type used by the UE. The P-CSCF shall include an entry of the \"AfEventSubscription\" data type in the \"events\" attribute with the \"event\" attribute set to the value \"ACCESS_TYPE_CHANGE\".\nWhen the P-CSCF receives from the PCF the access type:\n-\tin the subscription request response within the HTTP response; or\n-\tin the notification of access type change in an HTTP POST request from the PCF,\nthe P-CSCF shall store the access type information received within the \"accessType\" attribute and the RAT type information received within \"ratType\" attribute and use the received information as per P-CSCF procedures in 3GPP TS 24.229 [32].\nThe P-CSCF may receive subsequent notifications for changes of the access type from the PCF according to clause 4.2.5.2. When the P-CSCF receives a notification of the change of the access type used by the UE, the P-CSCF shall store the new access type information and RAT type information and use the received information as per P-CSCF procedures in 3GPP TS 24.229 [32].\nNOTE 3:\tThe subscription to receive information about the access type will be cancelled when the corresponding Individual Application Session Context resource is removed by the P-CSCF (i.e. when the UE is de-REGISTERED or the related SIP call is released).\n",
            "summary": "",
            "tables": [],
            "figures_meta_data": [],
            "subsections": []
        },
        {
            "title": "B.13\tNotification of PLMN Change",
            "description": "When the P-CSCF receives an initial SIP REGISTER message from an attached UE, the P-CSCF may subscribe to notifications of PLMN changes corresponding to the identity of the network (either a PLMN or an SNPN) where the UE is located using the procedure specified in clauses 4.2.2.2, 4.2.3.2 and 4.2.6.2.\nNOTE:\tFor a UE located in an SNPN the SNPN Identifier consisting of the PLMN Identifier and the NID is provided.\nWhen the P-CSCF receives the subscription request response in an HTTP response or the notification of PLMN change in an HTTP POST request from the PCF, the P-CSCF shall store the PLMN Identifier and, if available, the NID received within the \"plmnId\" attribute and use the received information as per P-CSCF procedures in 3GPP TS 24.229 [32].\nThe P-CSCF shall cancel the subscription to notification for changes of the PLMN used by the UE when the user is de-registered from the IM CN subsystem.\n",
            "summary": "",
            "tables": [],
            "figures_meta_data": [],
            "subsections": []
        },
        {
            "title": "B.14\tCoverage and Handoff Enhancements using Multimedia error robustness feature (CHEM)",
            "description": "As a network option, the P-CSCF may support the PCC procedures in the present clause to handle the Coverage and Handoff Enhancements using Multimedia error robustness feature (CHEM).\nNOTE:\tWhen the CHEM feature is supported, improved error robustness might be enabled by packet-loss handling procedures of the codec, codec mode, or codec configuration to avoid, delay, or reduce the need to handoff a terminal due to degradation in the media quality. Communicating the level of robustness of the media to the network enables the eNB to use this information to determine a threshold for when the terminal should be handed off to another cell, domain (circuit-switched vs. packet-switched), or radio access technology.\nWhen a session is initiated or modified the P-CSCF supporting the CHEM feature shall derive the \"maxPacketLossRateDl\" attribute and \"maxPacketLossRateUl\" attribute based on the PLR_adapt and maxe2e-PLR attribute values in both the SDP offer and/or SDP answer to determine the maximum tolerable end-to-end PLR budget distributed across the uplink and downlink in a media transport path as described in 3GPP TS 29.513 [7] clause 7.2.3.\nUpon reception of SDP offer and answer, the P-CSCF should check whether \"a= PLR_adapt\" line is present in both SDP offer and answer to derive \"maxPacketLossRateDl\" attribute and \"maxPacketLossRateUl\" attribute in \"medComponents\" attribute else \"maxPacketLossRateDl\" and \"maxPacketLossRateUl\" attributes are not included by the P-CSCF.\nThe originating P-CSCF should derive \"maxPacketLossRateDl\" attribute to the maximum value of MaxPacketLossRateDl among all the RTP payload types. For each RTP payload type MaxPacketLossRateDl is computed as described in 3GPP TS 29.513 [7] clause 7.2.3.\n-\tIf maxe2e-PLR is included in the SDP offer then the MaxPacketLossRateDl for a payload type is derived as value of maxe2e-PLR in the SDP offer minus maxUL-PLR in the SDP answer if present else the MaxPacketLossRateDlis ½ maxe2e-PLR value present in the SDP offer.\n-\tIf maxe2e-PLR is not included in the SDP offer then the MaxPacketLossRateDl for a payload type is derived from the default value in end-to-end Maximum End-to-End Packet Loss Rate for the decoder of the RTP payload type as recommended in 3GPP TS 26.114 [30]clause X.1.2 for application layer redundancy or X.1.1 for partial redundancy minus maxUL-PLR in the SDP answer if present else the MaxPacketLossRateDl ½ default value in end-to-end Maximum End-to-End Packet Loss Rate for the decoder of the RTP payload type as recommended in 3GPP TS 26.114 [30] clause X.1.2 for application layer redundancy or X.1.1 for partial redundancy.\nThe originating P-CSCF should derive \"maxPacketLossRateUl\" attribute to the maximum value of MaxPacketLossRateUl among all the RTP payload types. For each RTP payload type MaxPacketLossRateUl is computed as described in 3GPP TS 29.513 [7] clause 7.2.3.\n-\tIf maxe2e-PLR is included in the SDP answer then the MaxPacketLossRateUl for a payload type is derived as value of maxe2e-PLR in the SDP answer minus maxDL-PLR in the SDP answer if present else the MaxPacketLossRateUl is ½ maxe2e-PLR value present in the SDP answer.\n-\tIf maxe2e-PLR is not included in the SDP answer then the MaxPacketLossRateUl for a payload type is derived as the ½ default value in end-to-end Maximum End-to-End Packet Loss Rate for the decoder of the RTP payload type as recommended in 3GPP TS 26.114 [30] clause X.1.2 for application layer redundancy or X.1.1 for partial redundancy.\nThe terminating P-CSCF should derive \"maxPacketLossRateDl\" attribute to the maximum value of MaxPacketLossRateDl among all the RTP payload types. For each RTP payload type MaxPacketLossRateDl is computed as described in 3GPP TS 29.513 [7] clause 7.2.3.\n-\tIf maxe2e-PLR is included in the SDP answer then the MaxPacketLossRateDl for a payload type is derived as value of maxDL-PLR in the SDP answer if present else the MaxPacketLossRateDl is ½ maxe2e-PLR value present in the SDP answer.\n-\tIf maxe2e-PLR is not included in the SDP answer then the MaxPacketLossRateDl for a payload type is derived as the ½ default value in end-to-end Maximum End-to-End Packet Loss Rate for the decoder of the RTP payload type as recommended in 3GPP TS 26.114 [30] clause X.1.2 for application layer redundancy or X.1.1 for partial redundancy.\nThe terminating P-CSCF should derive \"maxPacketLossRateUl\" attribute to the maximum value of MaxPacketLossRateUl among all the RTP payload types. For each RTP payload type MaxPacketLossRateUl is computed as described in 3GPP TS 29.513 [7] clause 7.2.3.\n-\tIf maxe2e-PLR is included in the SDP offer then the MaxPacketLossRateUl for a payload type is derived as value of maxUL-PLR in the SDP answer if present else the MaxPacketLossRateUl is ½ maxe2e-PLR value present in the SDP offer.\n-\tIf maxe2e-PLR is not included in the SDP offer then the MaxPacketLossRateUl for a payload type is derived as the ½ default value in end-to-end Maximum End-to-End Packet Loss Rate for the decoder of the RTP payload type as recommended in 3GPP TS 26.114 [30] clause X.1.2 for application layer redundancy or X.1.1 for partial redundancy.\n",
            "summary": "",
            "tables": [],
            "figures_meta_data": [],
            "subsections": []
        },
        {
            "title": "B.15\tHandling of a FLUS session",
            "description": "If the P-CSCF receives a SIP request that requires provisioning of a service information to the PCF, the \"FLUS\" feature is supported and an SDP attribute \"a=label:flus…\" is included in one or more of the received SDP media descriptions, the P-CSCF shall provide the string after \"a=label:\" starting with \"flus\" within the \"flusId\" attribute for each affected media components within the \"medComponents\" attribute in the corresponding Npcf_PolicyAuthorization service operation towards the PCF.\nNOTE:\tDuring the first interaction with the PCF, the P-CSCF does not know if the \"FLUS\" feature is supported by the PCF. In this case the P-CSCF will include the information as if the feature is supported.\nIf additionally the P-CSCF receives the \"a=3gpp-qos-hint\" media-level SDP attribute in the SIP request, the P-CSCF shall provide the PCF with the \"desMaxLatency\" attribute and/or \"desMaxLoss\" attribute as described in 3GPP TS 29.513 [7], clause 7.2.3.\nUpon receiving the information from the P-CSCF and if the \"FLUS\" feature is supported, the PCF shall derive the QoS information as described in 3GPP TS 29.513 [7], clause 7.3.3.\n",
            "summary": "",
            "tables": [],
            "figures_meta_data": [],
            "subsections": []
        },
        {
            "title": "B.16\tQoS hint support for data channel media",
            "description": "If the P-CSCF receives a SIP request that requires provisioning of a service information to the PCF, the QoSHint feature is supported and an SDP attribute \"a=3gpp-qos-hint\" is included in one or more of the received data channel media descriptions, the P-CSCF may provide the \"desMaxLatency\" attribute and/or \"desMaxLoss\" attribute for each affected application media component within the \"medComponents\" attribute in the corresponding Npcf_PolicyAuthorization service operation towards the PCF.\nNOTE:\tDuring the first interaction with the PCF, the P-CSCF does not know if the QoSHint feature is supported by the PCF. In this case the P-CSCF will include the information as if the feature is supported.\nUpon receiving the information from the P-CSCF and if the QoSHint feature is supported, the PCF shall derive the QoS information as described in 3GPP TS 29.513 [7], clause 7.3.3.\n",
            "summary": "",
            "tables": [],
            "figures_meta_data": [],
            "subsections": []
        },
        {
            "title": "B.17\tHandling of MPS Session",
            "description": "When the P-CSCF receives an authorised Resource-Priority header field or when the P-CSCF adds a temporarily authorised Resource-Priority header field containing an appropriate namespace and priority value in SIP signaling, and recognizes the need for priority treatment as specified in 3GPP TS 24.229 [32], and the \"IMS_SBI\" feature is supported, the P-CSCF shall include the \"mpsId\" attribute and the \"resPrio\" attribute in the corresponding Npcf_PolicyAuthorization service operation towards the PCF. The \"mpsId\" attribute shall contain the national variant for MPS service name indicating an MPS session. The \"resPrio\" attribute shall be determined based on the resource value received in the \"wps\" namespace of the SIP Resource-Priority header field, and shall be included at \"AppSessionContextReqData\" data type level as well as the \"MediaComponent\" data type level. The \"resPrio\" attribute shall be populated with a default value if the priority value is unknown.\nNOTE 1:\tVarious mechanisms can be applied to recognize the need for priority treatment in the P-CSCF (e.g., based on the dialled digits), according to national regulation and network configuration, as stated in 3GPP TS 24.229 [32].\nNOTE 2:\tHighest user priority level (lowest numerical resource value of the SIP Resource-Priority header field) is mapped to the highest enumerated value of the \"resPrio\" attribute.\nIf the P-CSCF supports the SBI Message Priority mechanism for an MPS session, the P-CSCF shall include the \"3gpp-Sbi-Message-Priority\" custom HTTP header with a priority value based on the value of the \"resPrio\" attribute. The highest \"resPrio\" value is mapped to the corresponding lowest value of the \"3gpp-Sbi-Message-Priority\" custom HTTP header.\nUpon reception of a request that requires MPS treatment, the PCF shall derive the PCC rules corresponding to the MPS session, as appropriate. The PCF shall take specific actions on the corresponding PDU session to ensure that the MPS session is prioritized, as described in 3GPP TS 29.512 [8], clause 4.2.6.2.12.3.\nWhen the P-CSCF detects that the MPS session has ended, the P-CSCF deletes in the PCF the \"Individual Application Session Context\" resource corresponding to the MPS session. The PCF shall delete the PCC rules corresponding to the MPS session and shall revoke the actions related to the prioritization of the MPS session in the corresponding PDU session, as described in 3GPP TS 29.512 [8], clause 4.2.6.2.12.3.\n",
            "summary": "",
            "tables": [],
            "figures_meta_data": [],
            "subsections": []
        },
        {
            "title": "B.18\tHandling of RAN/NAS release cause values",
            "description": "If the P-CSCF is required by operator policy to provide the RAN/NAS release cause information, it includes this information in the corresponding SIP message as specified in 3GPP TS 24.229 [32] when received from the PCF (see clause 4.4.4, 4.4.6.1, 4.4.6.2, 4.4.6.3 and 4.4.6.7).\n",
            "summary": "",
            "tables": [],
            "figures_meta_data": [],
            "subsections": []
        },
        {
            "title": "C.1\tFormat of a flow identifier",
            "description": "",
            "summary": "",
            "tables": [],
            "figures_meta_data": [],
            "subsections": [
                {
                    "title": "C.1.1\tGeneral",
                    "description": "",
                    "summary": "",
                    "text_content": "A flow identifier is expressed as a 2-tuple as follows:\n<The ordinal number of the position of the media component description in the SDI. The ordinal number of the IP flow(s) within the media component description assigned in the order of increasing downlink port numbers as detailed below.>\nwhere both are numbered starting from 1. The encoding of the flow identifier is as indicated in 3GPP TS 24.008 [36].\nThe rules for the allocation of flow identifiers to IP flows are defined in 3GPP TS 29.214 [20], Annex B.1.1. Derivation of flow identifiers from SDP are described in 3GPP TS 29.214 [20], Annex B.1.2, and examples are covered in 3GPP TS 29.214 [20], Annex B2, B3, B4 and B5.\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                }
            ]
        },
        {
            "title": "D.1\tScope",
            "description": "This annex provides the stage 3 definition of the Policy Authorization Service for wireless and wireline convergence access support for 5GS.\nThe stage 2 definition and procedures of the Policy Authorization Service for wireless and wireline convergence access support for 5GS are contained in 3GPP TS 23.316 [44].\n",
            "summary": "",
            "tables": [],
            "figures_meta_data": [],
            "subsections": []
        },
        {
            "title": "D.2\tNpcf_PolicyAuthorization Service",
            "description": "",
            "summary": "",
            "tables": [],
            "figures_meta_data": [],
            "subsections": [
                {
                    "title": "D.2.1\tService Description",
                    "description": "",
                    "summary": "",
                    "text_content": "",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": [
                        {
                            "title": "D.2.1.1\tOverview",
                            "text_content": "The overview defined in clause 4.1.1 applies with the exception that the UE is replaced by the 5G-RG and the W-AGF, which is acting as a UE towards the 5GC on behalf of the FN-RG.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "D.2.1.2\tService Architecture",
                            "text_content": "The service architecture defined in clause 4.1.2 applies.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "D.2.1.3\tNetwork Functions",
                            "text_content": "The PCF functionality defined in clause 4.1.3.1 shall apply with the following modifications for W-5GAN and for the Npcf_PolicyAuthorization service:\n-\tThe 5G-RG and the W-AGF, acting as a UE towards the 5GC on behalf of the FN-RG, replace the UE.\n-\tThe PCF provides Policy Authorization as described in this Annex.\nThe NF service consumer functionality defined in clause 4.1.3.2 shall apply with the following exceptions for the traffic of a PDU session over wireline access:\n-\tIndication that the QoS targets can no longer (or can again) be guaranteed does not apply.\n-\tInvocation of Multimedia Priority Services does not apply in this release of the specification.\n-\tIndication of PLMN change does not apply.\n-\tIndication of TSN 5GS Bridge Information does not apply.\n-\tReporting RAN/NAS Release Cause over wireline does not apply.\n-\tThe Maximum Packet Loss Rate for UL and DL is not forwarded to the wireline access. CHEM feature does not apply.\n",
                            "figures_meta_data": [],
                            "tables": []
                        }
                    ]
                }
            ]
        },
        {
            "title": "D.3\tService Operations",
            "description": "",
            "summary": "",
            "tables": [],
            "figures_meta_data": [],
            "subsections": [
                {
                    "title": "D.3.1\tIntroduction",
                    "description": "",
                    "summary": "",
                    "text_content": "Service procedures covered in clause 4.2.1 shall apply.\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "D.3.2\tNpcf_PolicyAuthorization_Create Service Operation",
                    "description": "",
                    "summary": "",
                    "text_content": "",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": [
                        {
                            "title": "D.3.2.1\tGeneral",
                            "text_content": "The procedures specified in clause 4.2.2 shall apply with the following differences:\n-\tSubscriptions to notifications of Service Data Flow QoS targets are not supported. Clause 4.2.2.6 does not apply for the traffic of a PDU session over wireline access.\n-\tInvocation of Multimedia Priority Services is not supported. Clause 4.2.2.12 does not apply for the traffic of a PDU session over wireline access.\n-\tThe PEI that may be returned as available user information within the \"ueIds\" attribute described in clause 4.2.2.18 shall have one of the following representations:\ni.\tWhen the UE supports only wireline access, the PEI shall be a MAC address.\nii.\tWhen the UE supports at least one 3GPP access technology, the PEI shall be the allocated IMEI or IMEISV.\n-\tSubscription and notification of PLMN change does not apply for the traffic of a PDU session over wireline access.\n-\tIndication of TSN 5GS Bridge Information does not apply. Clauses 4.2.2.24, 4.2.2.25 and 4.2.2.31 do not apply.\n-\tThe Maximum Packet Loss Rate for UL and DL is not forwarded to the wireline access. Clause 4.2.2.28, Support of CHEM feature, does not apply for the traffic of a PDU session over wireline access.\n-\tWhen the NF service consumer subscribes to the Access Type Change event, the event is met, and the 5G-RG or FN-RG is connected to the 5GC via wireline access, the reported wireline transmission technology is encoded in the \"ratType\" attribute, within either the EventsNotification data type or the AdditionalAccessInfo data type, as applicable.\n",
                            "figures_meta_data": [],
                            "tables": []
                        }
                    ]
                },
                {
                    "title": "D.3.3\tNpcf_PolicyAuthorization_Update Service Operation",
                    "description": "",
                    "summary": "",
                    "text_content": "",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": [
                        {
                            "title": "D.3.3.1\tGeneral",
                            "text_content": "The procedures specified in clause 4.2.3 shall apply with the following differences:\n-\tSubscriptions to notifications of Service Data Flow QoS targets are not supported. Clause 4.2.3.6 does not apply for the traffic of a PDU session over wireline access.\n-\tInvocation of Multimedia Priority Services is not supported. Clause 4.2.3.12 does not apply for the traffic of a PDU session over wireline access.\n-\tSubscription and notification of PLMN change does not apply for the traffic of a PDU session over wireline access.\n-\tIndication of TSN 5GS Bridge Information does not apply. Clauses 4.2.3.24, and 4.2.3.25 do not apply.\n-\tThe Maximum Packet Loss Rate for UL and DL is not forwarded to the wireline access. Clause 4.2.3.27, Support of CHEM feature, does not apply for the traffic of a PDU session over wireline access.\n-\tWhen the NF service consumer subscribes to the Access Type Change event, the event is met, and the 5G-RG or FN-RG is connected to the 5GC via wireline access, the reported wireline transmission technology is encoded in the \"ratType\" attribute, within either the EventsNotification data type or the AdditionalAccessInfo data type, as applicable.\n",
                            "figures_meta_data": [],
                            "tables": []
                        }
                    ]
                },
                {
                    "title": "D.3.4\tNpcf_PolicyAuthorization_Delete Service Operation",
                    "description": "",
                    "summary": "",
                    "text_content": "",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": [
                        {
                            "title": "D.3.4.1\tGeneral",
                            "text_content": "The procedures specified in clause 4.2.4 shall apply with the following differences:\n-\tWhen the report of access network information described in clause 4.2.4.6 includes the user location information, the \"n3gaLocation\" attribute shall be included in the \"ueLoc\" attribute and shall encode:\na)\tif the UE connects via W-5GBAN access:\n-\tshall encode the Global Line Identifier in the \"gli\" attribute; and\n-\tmay include the \"w5gbanLineType\" attribute to indicate whether the W-5GBAN access is DSL or PON; or\nb)\tif the UE connects via W-5GCAN access, the HFC Node Identifier in the \"hfcNodeId\" attribute.\n-\tReporting RAN/NAS Release Cause over wireline does not apply. Clause 4.2.4.10 does not apply.\n",
                            "figures_meta_data": [],
                            "tables": []
                        }
                    ]
                },
                {
                    "title": "D.3.5\tNpcf_PolicyAuthorization_Notify Service Operation",
                    "description": "",
                    "summary": "",
                    "text_content": "",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": [
                        {
                            "title": "D.3.5.1\tGeneral",
                            "text_content": "The procedures specified in clause 4.2.5 shall apply with the following differences:\n-\tSubscriptions to notifications of Service Data Flow QoS targets are not supported. Clause 4.2.5.4 does not apply for the traffic of a PDU session over wireline access.\n-\tInvocation of Multimedia Priority Services is not supported. Clause 4.2.4.5 does not apply for the traffic of a PDU session over wireline access.\n-\tWhen the report of access network information described in clause 4.2.5.11 includes the user location information, the \"n3gaLocation\" attribute shall be included in the \"ueLoc\" attribute and shall encode:\na)\tif the UE connects via W-5GBAN access:\n-\tshall encode the Global Line Identifier in the \"gli\" attribute; and\n-\tmay include the \"w5gbanLineType\" attribute to indicate whether the W-5GBAN access is DSL or PON; or\nb)\tif the UE connects via W-5GCAN access, the HFC Node Identifier in the \"hfcNodeId\" attribute.\n-\tNotification of PLMN changes does not apply for the traffic of a PDU session over wireline access.\n-\tIndication of TSN 5GS Bridge Information does not apply. Clauses 4.2.5.13 and 4.2.5.16 do not apply.\n-\tReporting RAN/NAS Release Cause over wireline does not apply. Clauses 4.2.5.5 and 4.2.5.10 do not apply.\n-\tWhen the 5G-RG or FN-RG connects to the 5GC via W-5GAN, and the Access Type Change event is met, the reported wireline transmission technology is encoded in the \"ratType\" attribute, within either the EventsNotification data type or the AdditionalAccessInfo data type, as applicable.\n",
                            "figures_meta_data": [],
                            "tables": []
                        }
                    ]
                },
                {
                    "title": "D.3.6\tNpcf_PolicyAuthorization_Subscribe Service Operation",
                    "description": "",
                    "summary": "",
                    "text_content": "",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": [
                        {
                            "title": "D.3.6.1\tGeneral",
                            "text_content": "The procedures specified in clause 4.2.6 shall apply with the following differences:\n-\tWhen the NF service consumer subscribes to the Access Type Change event, the event is met, and the 5G-RG or FN-RG is connected to the 5GC via wireline access, the reported wireline transmission technology is encoded in the \"ratType\" attribute, within either the EventsNotification data type or the AdditionalAccessInfo data type, as applicable.\n-\tSubscription to PLMN change does not apply for the traffic of a PDU session over wireline access.\n",
                            "figures_meta_data": [],
                            "tables": []
                        }
                    ]
                },
                {
                    "title": "D.3.7\tNpcf_PolicyAuthorization_Unsubscribe Service Operation",
                    "description": "",
                    "summary": "",
                    "text_content": "",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": [
                        {
                            "title": "D.3.7.1\tGeneral",
                            "text_content": "The procedures specified in clause 4.2.7 shall apply.\n\n",
                            "figures_meta_data": [],
                            "tables": [
                                {
                                    "description": "",
                                    "table number": 145,
                                    "summary": "",
                                    "name": ""
                                }
                            ]
                        }
                    ]
                }
            ]
        }
    ]
}