{
    "document_name": "33896-i01.docx",
    "content": [
        {
            "title": "Foreword",
            "description": "This Technical Report has been produced by the 3rd Generation Partnership Project (3GPP).\nThe contents of the present document are subject to continuing work within the TSG and may change following formal TSG approval. Should the TSG modify the contents of the present document, it will be re-released by the TSG with an identifying change of release date and an increase in version number as follows:\nVersion x.y.z\nwhere:\nx\tthe first digit:\n1\tpresented to TSG for information;\n2\tpresented to TSG for approval;\n3\tor greater indicates TSG approved document under change control.\ny\tthe second digit is incremented for all changes of substance, i.e. technical enhancements, corrections, updates, etc.\nz\tthe third digit is incremented when editorial only changes have been incorporated in the document.\nIn the present document, modal verbs have the following meanings:\nshall\t\tindicates a mandatory requirement to do something\nshall not\tindicates an interdiction (prohibition) to do something\nThe constructions \"shall\" and \"shall not\" are confined to the context of normative provisions, and do not appear in Technical Reports.\nThe constructions \"must\" and \"must not\" are not used as substitutes for \"shall\" and \"shall not\". Their use is avoided insofar as possible, and they are not used in a normative context except in a direct citation from an external, referenced, non-3GPP document, or so as to maintain continuity of style when extending or modifying the provisions of such a referenced document.\nshould\t\tindicates a recommendation to do something\nshould not\tindicates a recommendation not to do something\nmay\t\tindicates permission to do something\nneed not\tindicates permission not to do something\nThe construction \"may not\" is ambiguous and is not used in normative elements. The unambiguous constructions \"might not\" or \"shall not\" are used instead, depending upon the meaning intended.\ncan\t\tindicates that something is possible\ncannot\t\tindicates that something is impossible\nThe constructions \"can\" and \"cannot\" are not substitutes for \"may\" and \"need not\".\nwill\t\tindicates that something is certain or expected to happen as a result of action taken by an agency the behaviour of which is outside the scope of the present document\nwill not\t\tindicates that something is certain or expected not to happen as a result of action taken by an agency the behaviour of which is outside the scope of the present document\nmight\tindicates a likelihood that something will happen as a result of action taken by some agency the behaviour of which is outside the scope of the present document\nmight not\tindicates a likelihood that something will not happen as a result of action taken by some agency the behaviour of which is outside the scope of the present document\nIn addition:\nis\t(or any other verb in the indicative mood) indicates a statement of fact\nis not\t(or any other negative verb in the indicative mood) indicates a statement of fact\nThe constructions \"is\" and \"is not\" do not indicate requirements.\n",
            "summary": "",
            "tables": [],
            "figures_meta_data": [],
            "subsections": []
        },
        {
            "title": "1\tScope",
            "description": "The present document is to investigate potential enhancements of 5GS that would enable broader use cases in relation with user consent.\nThe following aspects are in the scope of the study:\n1.\tInvestigating the potential issues and solutions with user consent for:\n- \t eNA in case of roaming.\n- \tMEC in case of roaming.\n- \tNTN.\n- \tAI/ML for NG-RAN.\n2.\tInvestigating the potential generic security requirements, services and guidance for user consent derived from objective 1.\nNOTE 1: \tPrinciples, regulations, and definitions related to privacy, which are recognized differently in each different country or area, are taken into account when deriving the concept of user consent for 3GPP users.\nEven where solutions exist to obtain user consent, collection and exposure of user sensitive data should be minimized and identification of the users should only be allowed where critical to the operation of the related feature.\n",
            "summary": "",
            "tables": [],
            "figures_meta_data": [],
            "subsections": []
        },
        {
            "title": "2\tReferences",
            "description": "The following documents contain provisions which, through reference in this text, constitute provisions of the present document.\n-\tReferences are either specific (identified by date of publication, edition number, version number, etc.) or non-specific.\n-\tFor a specific reference, subsequent revisions do not apply.\n-\tFor a non-specific reference, the latest version applies. In the case of a reference to a 3GPP document (including a GSM document), a non-specific reference implicitly refers to the latest version of that document in the same Release as the present document.\n[1]\t3GPP TR 21.905: \"Vocabulary for 3GPP Specifications\".\n[2]\t3GPP TR 23.700-81: \"Study of Enablers for Network Automation for 5G System (5GS); Phase 3\".\n[3]\t3GPP TS 33.501:\t \"Security architecture and procedures for 5G system\".\n[4]\t\t3GPP TS 23.501: \"System architecture for the 5G System (5GS)\".\n[5]\t3GPP TS 38.300: \"NR; NR and NG-RAN Overall Description\".\n[6]\t3GPP TR 33.867: \"Study on User Consent for 3GPP services\".\n",
            "summary": "",
            "tables": [],
            "figures_meta_data": [],
            "subsections": []
        },
        {
            "title": "3\tDefinitions of terms, symbols and abbreviations",
            "description": "",
            "summary": "",
            "tables": [],
            "figures_meta_data": [],
            "subsections": [
                {
                    "title": "3.1\tTerms",
                    "description": "",
                    "summary": "",
                    "text_content": "For the purposes of the present document, the terms given in TR 21.905 [1] and the following apply. A term defined in the present document takes precedence over the definition of the same term, if any, in TR 21.905 [1].\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "3.2\tSymbols",
                    "description": "",
                    "summary": "",
                    "text_content": "Void.\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "3.3\tAbbreviations",
                    "description": "",
                    "summary": "",
                    "text_content": "For the purposes of the present document, the abbreviations given in TR 21.905 [1] and the following apply. An abbreviation defined in the present document takes precedence over the definition of the same abbreviation, if any, in TR 21.905 [1].\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                }
            ]
        },
        {
            "title": "4\tOverview",
            "description": "Concept of user consent and some of background information are depicted in clause 4 in TR 33.867 [6].\nIn TS 33.501 [3]. The framework includes storage requirements for the UDM as well as generic services for user consent check and revocation. For any such feature, the framework requires the identification, in the standards, of a special NF called the user consent enforcement entity.\nHowever, the case that the enforcement entity and UDM belong to different legal domains, i.e. subject to different regulations, has not been considered so far.\nAll the user consent work performed in Rel-17 pertains to CN and CN related features.\n",
            "summary": "",
            "tables": [],
            "figures_meta_data": [],
            "subsections": []
        },
        {
            "title": "5\tKey issues",
            "description": "",
            "summary": "",
            "tables": [],
            "figures_meta_data": [],
            "subsections": [
                {
                    "title": "5.1\tKey Issue #1: User consent for roaming case in eNA",
                    "description": "",
                    "summary": "",
                    "text_content": "",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": [
                        {
                            "title": "5.1.1\tKey issue details",
                            "text_content": "As depicted in key issue #3 in TR 23.700-81 [2], \"In roaming scenario, the HPLMN/VPLMN may need to collect data or consume analytics from the VPLMN/HPLMN.\" In this case, the user data may be exchanged between different entity, i.e. VPLMN and HPLMN, that may be subject to different regulations with respect to user consent.\nWhen it comes to the actions performed on the user data, the following cases need to be considered:\n-\tHPLMN collects user data and exposes the data to VPLMN, VPLMN performs analytics and ML training.\n-\tVPLMN collects user data and exposes the data to HPLMN, HPLMN performs analytics and ML training.\nIn order to cover these scenarios, it is important to assess the current user consent framework in Annex V in TS 33.501 [3], and decides who will perform the role of enforcement point.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "5.1.2\tSecurity threats",
                            "text_content": "If the HPLMN/VPLMN is not aware to check user consent for roaming case for eNA, e.g. data analysis or ML training, the HPLMN/VPLMN may expose user privacy information to VPLMN/HPLMN which could lead to a compromise of the user privacy.\nIf the HPLMN/VPLMN is not aware to revoke user consent for roaming case for eNA, the HPLMN/VPLMN may continue to process user privacy information which could lead to a compromise of user privacy.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "5.1.3\tPotential security requirements",
                            "text_content": "The 5GS shall provide the means for a HPLMN/VPLMN to check of user consent for the roaming scenario in eNA.\nThe 5GS shall provide the means for HPLMN/VPLMN to revoke of user consent for the roaming scenario in eNA.\nNOTE: \tCross-PLMN data sharing among different countries is not addressed in the present document.\n",
                            "figures_meta_data": [],
                            "tables": []
                        }
                    ]
                },
                {
                    "title": "5.2\tKey Issue #2: User consent for NTN",
                    "description": "",
                    "summary": "",
                    "text_content": "",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": [
                        {
                            "title": "5.2.1\tKey issue details",
                            "text_content": "NTN scenario is specified in clause 5.4.11 of TS 23.501 [4] and clause 16.14 of TS 38.300 [5]. For this scenario, the NG-RAN in NTN may require UE's location information for selecting the AMF.\nThe way it works now is that after AS security is activated, the NG-RAN in NTN can request the UE to report its accurate location or coarse location. However, for both types of location reports obtaining, user consent aspect is missing.\nThis key issue is intended to study whether there is any need to enhance the current user consent framework specified in Annex V in TS 33.501 [3] in order to support the NTN feature.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "5.2.2\tSecurity threats",
                            "text_content": "If the NG-RAN in NTN is not aware of user consent status, then the NG-RAN in NTN may collect user's location information without consent which could lead to a compromise of the user privacy.\nIf the NG-RAN in NTN is not aware that user consent for NTN use case has been revoked, then the NG-RAN in NTN may continue to collect user's location information which could lead to a compromise of user privacy.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "5.2.3\tPotential security requirements",
                            "text_content": "The network should take into account the user consent for NTN usage when user subscribes to NTN services considering NTN regulatory requirements.\nNOTE: \tProposed solutions should consider current solutions with the actual communication flow.\n",
                            "figures_meta_data": [],
                            "tables": []
                        }
                    ]
                },
                {
                    "title": "5.3\tKey Issue #3: Unified framework for user consent related data retrieval, notification, and revocation",
                    "description": "",
                    "summary": "",
                    "text_content": "",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": [
                        {
                            "title": "5.3.1\tKey issue details",
                            "text_content": "User consent is stored in the UDM/UDR. All NFs/AFs need to retrieve the consent flag from the UDM and accordingly collect the data from a UE or UE related data from other NFs. However, not all NFs/AFs do contact UDM before collecting data.\nFor example, AF does not interact with UDM before collecting the data related to a UE. Even if AF interacts with UDM for the user consent, then AF collects data via AMF, therefore AMF also needs to coordinate with UDM before collecting data from a UE or UE related data from other NFs. This means, that the same consent checking is necessary at multiple places/NFs. Furthermore, keeping track of revocation and which NF has received which UE-related user consent details seems to become tedious. TS 33.501 [3] clause V.2 states that user consent revocation service is not provided by UDM.\nThis key issue looks into the benefits of a unified framework such as a central function or a service for coordinating and keeping track of user consent retrieval, notification, and revocation.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "5.3.2\tSecurity threats",
                            "text_content": "When user consent needs to get revoked, all NFs/AFs that have asked for user data beforehand need to revoke them. Otherwise, there is the danger that some NFs/AFs are not tracked and thus not informed about the revocation demand. This can result in accessing user-related data by NFs/AFs even after revocation by the user.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "5.3.3\tPotential security requirements",
                            "text_content": "In addition to the requirements listed in TS 33.501 [3] clauses V.1 and V.4:\nThe 5GS shall ensure that all NFs/AFs that collected user consent related data are notified.\n",
                            "figures_meta_data": [],
                            "tables": []
                        }
                    ]
                },
                {
                    "title": "5.4\tKey Issue #4: Guidance for Enforcing User Consent",
                    "description": "",
                    "summary": "",
                    "text_content": "",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": [
                        {
                            "title": "5.4.1\tKey issue details",
                            "text_content": "As depicted in Annex V.1.1 in TS 33.501 [3], \"user consent can be required for 3GPP features depending on local regulations.\" It means that user consent check and revocation procedure for different 3GPP features is conditional and configurable based on operator's local policy which considers local regulation.\nHowever, there is no guidance to determine for what information user consent is required and for what information user consent is not required, or how to enforce user consent, it may be helpful to provide some general principles for these purposes.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "5.4.2\tSecurity threats",
                            "text_content": "Not applicable.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "5.4.3\tPotential security requirements",
                            "text_content": "Not applicable.\n",
                            "figures_meta_data": [],
                            "tables": []
                        }
                    ]
                }
            ]
        },
        {
            "title": "6\tSolutions",
            "description": "",
            "summary": "",
            "tables": [],
            "figures_meta_data": [],
            "subsections": [
                {
                    "title": "6.1\tMapping of solutions to key issues",
                    "description": "",
                    "summary": "",
                    "text_content": "Table 6.1-1: Mapping of solutions to key issues\n\n",
                    "tables": [
                        {
                            "description": "Table 6.1-1: Mapping of solutions to key issues",
                            "table number": 3,
                            "summary": "",
                            "name": ""
                        }
                    ],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "6.1\tSolution #1: User consent obtained by the NTN-RAN in non-mobility use case",
                    "description": "",
                    "summary": "",
                    "text_content": "",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": [
                        {
                            "title": "6.1.1\tIntroduction",
                            "text_content": "This solution addresses the Key Issue #2 on NTN specific user consent. Specifically, it addresses the first requirement in KI#2.\nIn NTN use case, the network function requiring user consent is the NTN-RAN, which needs to obtain user consent for configuring the UE to report its GNSS-based information and processing the UE location information. By referring to TS 33.501 [3] Annex V, the NTN-RAN is the enforcement point for user consent which does not perform the related operation unless user consent is granted.\nAccording to TS 33.501 [3] Annex V.2, the parameters indicating user consent preference are stored in the UDM as subscription data, which can be retrieved via UDM service for network function to check whether user consent is granted for the requested operation or not. Specifically for NTN use case, it is proposed that user consent preference for a UE can be stored in a UE NTN privacy profile as part of UE subscription data in the UDM/UDR. The user consent preference within the UE NTN privacy profile can be used to indicate whether the configuration on the UE performed by the NTN-RAN is allowed or disallowed.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "6.1.2\tSolution details",
                            "text_content": "Given that the use of user consent information at the NTN-RAN in NTN could allow its enforcement at the earliest RAN convenience, it is proposed that the user consent information is provisioned by the UDM at the earliest possibility to the AMF, i.e. during Registration procedure, which could be \"initial registration\", \"periodic registration update\" or \"mobility registration update\" procedure, etc. The AMF can store the received user consent preference in the UE context, which further provisions the user consent preference to the NTN-RAN.\nFigure 6.1.2-1 illustrates the process of obtaining specific user consent for non-mobility cases in a Networked Transport Node (NTN) scenario. The figure depicts the steps involved in obtaining consent from the user, including the NTN, the Network Unit (NU), and the Network Element (NE). The figure highlights the importance of clear communication and user understanding in ensuring a seamless and secure data transmission process.\nFigure 6.1.2-1: NTN Specific User Consent in Non-mobility Case\n1.\tThe UE sends the Registration Request to the NTN-RAN (gNB or NTN-GW) including its SUCI or 5G-GUTI.\n2.\tThe NTN-RAN selects an AMF for the UE and sends to the AMF a N2 message (e.g. Initial UE Message) containing N2 parameters in addition to the Registration Request. The N2 message also includes a UE Context Request indicating that the user consent preference on UE location information for NTN access is needed or to be updated.\n3.\tBased on the N2 message from the NTN-RAN, the AMF determines that the RAT type is NTN access. If the received N2 message contains a UE Context Request requesting the user consent preference, the AMF checks whether its stored UE context already contains the user consent preference of the UE for NTN access by checking against the SUCI or 5G-GUTI. If the user consent preference of the UE is not available in the UE context or the validity timer for user consent preference has expired, the AMF proceeds to step 4. Otherwise, the AMF proceeds to step 8.\n4.\tThe AMF sends a Nudm_SDM_Get request to the UDM for retrieving the user consent preference on UE location information for NTN access from the UE's subscription data.\n5.\tAfter receiving the Nudm_SDM_Get request, the UDM checks with the UDR for the user consent preference on location information for NTN access, probably within the NTN privacy profile of the UE's subscription data, against the SUPI of the UE.\n6.\tThe UDM sends a Nudm_SDM_Get response to the AMF containing the user consent preference on UE location information for NTN access.\n7.\tAfter receiving the Nudm_SDM_Get response, the AMF stores the user consent preference in the UE context, or replaces its stored user consent preference with the one received from the UDM. The AMF forwards the user consent preference to the NTN-RAN.\n8.\tThe AMF sends a N2 message (e.g. Initial Context Setup Request) to the NTN-RAN, which includes user consent result or user consent preference for NTN access in addition to the Registration Accept.\n9.\tAfter receiving the N2 message, the NTN-RAN stores the user consent result or user consent preference in its UE context. Based on the received user consent result/preference, the NTN-RAN determines how to enforce the user consent, either using RRCReconfiguration message in (in step #10) or using UEInformationRequest message (in step #14).\n10.\tThe NTN-RAN sends the RRCReconfiguration message () to the UE. If the user consent is granted for location reporting and the NTN-RAN decides to request UE location using RRCReconfiguration message, the RRCReconfiguration message also contains location configuration info (e.g. via includeCommonLocationInfo in the reportConfig); if the use consent is not granted for location reporting, the NTN-RAN does not send such configuration.\n11.\tThe UE sends the RRCReconfigurationComplete message to the NTN-RAN.\n12.\tThe NTN-RAN sends a N2 message (e.g. Initial Context Setup Response) to the AMF.\n13.\tThe UE sends the Registration Complete message to the NTN-RAN.\n14.\tIf the user consent is granted for location reporting and the NTN-RAN decides to request UE location using UEInformationRequest message, the NTN-RAN contains coarseLocationRequest in the UEInformationRequest message sent to the UE.\n15.\tThe UE returns coarseLocationInfo in the UEInformationResponse message sent to the NTN-RAN.\nNOTE:\tThe granularity of user consent preference could be detailed in the UE privacy profile for NTN in the UE subscription.\n",
                            "figures_meta_data": [],
                            "tables": []
                        }
                    ]
                },
                {
                    "title": "6.2\tSolution #2: User consent revocation obtained by the NTN-RAN",
                    "description": "",
                    "summary": "",
                    "text_content": "",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": [
                        {
                            "title": "6.2.1\tIntroduction",
                            "text_content": "This solution addresses the Key Issue #2 on NTN specific user consent. Specifically, it addresses the second requirement in KI#2.\nAs per TS 33.501 [3] Annex V, besides the retrieval of user consent parameters, the notification of user consent parameters change or user consent revocation shall also be supported for user consent mechanism. Any 5GC consumer NFs (processing the data pertaining to user consent) shall subscribe to the UDM for user consent parameter change notification, except if the consent enforcement NF that is deemed an enforcement point is tracking of those NFs and is actively informing those consumer NFs in case of user consent revocation.\nThe solution is introduced for NTN-RAN to obtain user consent parameters change or user consent revocation in NTN use case, so as to protect the user privacy while user consent is updated or revoked.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "6.2.2\tSolution details",
                            "text_content": "In NTN use case, the enforcement point of user consent is not a 5GC NF but the NTN-RAN, which is informed of the user consent status by the 5GC NF, i.e. the AMF in this case. As the AMF is able to track multiple NTN-RANs within the tracking area it covers, this solution proposes that the AMF subscribes to the UDM for user consent parameter change notification or revocation notification, which then informs the NTN-RAN at which the UE is camped.\nFigure 6.2.2-1 illustrates the NTN Specific User Consent Revocation Procedure, detailing the steps for revoking consent for non-terrestrial networks (NTNs) in a satellite communication system. The figure outlines the process, which begins with the user's consent being revoked by the network operator. The revoked consent is then communicated to the satellite network, which in turn informs the satellite ground station. The ground station then sends a message to the satellite, instructing it to cease communication with the user's terminal. The figure emphasizes the importance of a clear and efficient revocation process to ensure seamless communication and user satisfaction in NTN systems.\nFigure 6.2.2-1: NTN Specific User Consent Revocation Procedure\n1.\tThe AMF subscribes to the UDM for the service of user consent update and/or revocation notification via Nudm_SDM_Subscribe service operation. The service could be subscribed for a specific UE or it could be a generic service subscription for all UEs.\n2.\tThe user consent parameters are updated or revoked in the subscription data during the related procedure between a specific UE and the UDM.\n3.\tThe UDM retrieves the AMF ID serving the UE and notifies the AMF about the user consent parameter change via Nudm_SDM_Notification service operation. The user consent parameter change is associated with the UE by indicating the UE ID, i.e. SUPI. The user consent parameter change may also contain the NTN-RAN ID which is affected by the change, e.g. the NTN-RAN which was allowed to obtain UE location before it is no longer allowed.\n4.\tUpon receiving the notification from the UDM, the AMF updates the user consent parameters in its locally stored UE context associated with the SUPI.\n5.\tThe AMF sends a N2 message to the NTN-RAN including, e.g. UE Context Modification Request, which contains the user consent parameter change. The AMF associates the user consent parameter change with a temporary UE ID, e.g. 5G GUTI.\n6.\tUpon receiving the N2 message from the AMF, the NTN-RAN updates the user consent parameters in its locally stored UE context associated with a temporary UE ID, e.g. I-RNTI. The NTN-RAN then determines how to enforce the updated/revoked user consent. If the NTN-RAN has previously sent UEInformationRequest message to request UE location, the NTN-RAN stores the updated user consent parameters to stop including coarseLoactionRequest in the next UEInformationRequest message and proceeds to step #10. If the NTN-RAN has previously configured the UE to periodically report its location using RRCReconfiguration message, the NTN-RAN proceeds to step #7.\n7.\tBased on the updated user consent parameters, the NG-RAN determines the configuration and sends the RRCReconfiguration message to the UE. If the user consent is revoked, the NG-RAN does NOT send the configuration (e.g. includeCommonLocationInfo in the reportConfig) so as to prevent the UE from reporting its location.\n8.\tUpon receiving the RRCReconfiguration message without the configuration for location reporting, the UE stops reporting its location.\n9.\tThe UE sends the RRCReconfigurationComplete message to the NTN-RAN.\n10.\tThe NTN-RAN sends a N2 message to the AMF including e.g. UE Context Modification Response.2.\tThe NTN-RAN selects an AMF for the UE and sends to the AMF a N2 message (e.g. Initial UE Message) containing N2 parameters in addition to the Registration Request. The N2 message also includes a UE Context Request indicating that the user consent preference on UE location information for NTN access is needed or to be updated.\n",
                            "figures_meta_data": [],
                            "tables": []
                        }
                    ]
                },
                {
                    "title": "6.3\tSolution #3: User Consent for UE Data Exposure to HPLMN in the Roaming case",
                    "description": "",
                    "summary": "",
                    "text_content": "",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": [
                        {
                            "title": "6.3.1\tIntroduction",
                            "text_content": "The solution addresses Key Issue #1: User consent for roaming case in eNA. It aims to meet two potential requirements in Key issue #1 regarding checking of user consent and revocation of user consent for the roaming scenario in eNA.\nAs per TR 23.700-81 [2], both PLMNs (VPLMN, HPLMN) need the ability to control the amount of UE data exposed based on user consent, operator policy, regulatory policy and/or roaming agreements. If the Consumer NF in the HPLMN requests the data collection or data analytics from the VPLMN, the V-Central NF will perform the role of enforcement point and determine whether the requested collected data and analytics information can be exposed to HPLMN.\nAs the enforcement point, the V-Central NF will send the notification message to the Consumer NF and Data Provider NF once the user consent is modified or revoked. After receiving the notification message, the Consumer NF deletes the data or stops the data processing for which prior user consent was given, the Data Provider NF stops to collect data or generate analytics information.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "6.3.2\tSolution details",
                            "text_content": "Figure 6.2.3-1 illustrates the process of user consent for exposing user equipment (UE) data to the home personal local mobile network (HPLMN) during roaming. The figure depicts the interaction between the user, the mobile network operator (MNO), and the home network operator (HNO) in a roaming scenario. The user is shown as the central figure, with the MNO and HNO represented by the two circles on either side. The figure highlights the various stages of consent, including the initial request, the user's decision-making process, and the final confirmation. The figure emphasizes the importance of user consent in ensuring privacy and security in mobile network operations.\nFigure 6.2.3-1: User Consent for UE Data Exposure to HPLMN in the Roaming case\n1.\tThe H-Consumer NF requests/subscribes analytics to the H-NWDAF. The message may include UE ID and Data Processor ID.\n2.\tOnce receiving the request message, the H-NWDAF checks local operator policy and/or regulatory policy to determine whether it is allowed to obtain analytics information in the VPLMN. If the analytics information in the VPLMN is allowed to be used in the HPLMN, the H-NWDAF sends the Analytics Request to the V-Central NF.\nNote 1: The selection of V-Central NF (i.e. NWDAF, DCCF, NEF or new NF, e.g. GEF) is based on the SA2's conclusion.\n3.\tOnce receiving the request message, the V-Central NF checks the user consent. Based on the user consent, local operator policy and/or local regulatory policy, V-Central NF determines whether it is allowed to expose analytics information/collected data to the HPLMN.\nNote 2:\tIf the HPLMN and the VPLMN belong to the same legal domain, the VPLMN specific user consent is stored in the UDM/UDR as subscription data. The V Central NF can obtain the VPLMN specific user consent by using the Nudm_SDM_Get service operation. If the HPLMN and the VPLMN belong to different legal domains, the procedure to collect and/or revoke the user consent could be left to the local operator to decide.\nIf the VPLMN analytics information is requested, steps 4a-5a are performed.\n4a.\tThe V-Central NF sends Nnwdaf_AnalyticsSubscription_Subscribe message to the V-NWDAF.\n5a. The V-NWDAF sends the Nnwdaf_AnalyticsSubscription_Notify message to V-Central NF, which contains VPLMN analytics information.\nIf the collected data is requested, steps 4b-5b are performed.\n4b.\tThe V-Central NF sends Nnf_EventExpose_Subscribe message to the V-NF.\n5b.\tThe V-NF sends the Nnf_EventExpose_Notify message to V-Central NF, which contains collected data in the VPLMN.\n6.\tThe V-Central NF sends the Analytics response to the H-NWDAF, which contains analytics information or collected data.\n7.\tThe H-NWDAF obtains the analytics information and sends the Nnwdaf_AnalyticsSubscription_Notify message to H-Consumer NF.\nSteps 8-10 are performed after the user consent is modified or revoked.\n8.\tIf VPLMN specific user consent parameter is changed, e.g. user consent is revoked, the V-central NF decides to send the notification messages.\n9a. The V-Central NF sends the user consent modification/revocation notification message to the H-NWDAF.\n9b. The H-NWDAF sends the user consent modification/revocation notification message to the H-Consumer NF. Once receiving the notification message, H-Consumer NF stops to process the collected data and deletes the related analytics information.\n10a. The V-Central NF sends the user consent modification/revocation notification message to the V-NWDAF. The V-NWDAF stops to generate the analytics information.\n10b. The V-Central NF sends the user consent modification/revocation notification message to the V-NF. The V-NF stops to collect user information.\nNote 3:\tThe sequence of steps 9 and 10 can be changed.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "6.3.3\tEvaluation",
                            "text_content": "This solution addresses KI#1: User consent for roaming case in eNA.\nThis solution provides a method to check/revoke user consent for UE Data Exposure to HPLMN in the Roaming case.\nThe V Central NF (i.e. NWDAF) acts as the enforcement point for checking and revoking user consent and determines whether the requested collected data and analytics information can be exposed to HPLMN based on the user consent, operator policy, regulatory policy and/or roaming agreements.\n",
                            "figures_meta_data": [],
                            "tables": []
                        }
                    ]
                },
                {
                    "title": "6.4\tSolution #4: User Consent for UE Data Exposure to VPLMN in the Roaming case",
                    "description": "",
                    "summary": "",
                    "text_content": "",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": [
                        {
                            "title": "6.4.1\tIntroduction",
                            "text_content": "The solution addresses Key Issue #1: User consent for roaming case in eNA. It aims to meet two potential requirements in Key issue #1 regarding checking of user consent and revocation of user consent for the roaming scenario in eNA.\nAs per TR 23.700-81 [2], both PLMNs (VPLMN, HPLMN) need the ability to control the amount of UE data exposed based on user consent, operator policy, regulatory policy and/or roaming agreements. If the Consumer NF in the VPLMN requests the analytics information from the HPLMN, the H-NWDAF will perform the role of enforcement point and determine whether the requested collected data and analytics information can be exposed to VPLMN.\nAs the enforcement point, the H-NWDAF will send the notification message to the Consumer NF once the user consent is modified or revoked. After receiving the notification message, the Consumer NF deletes the analytics information and stops to use the obtained analytics information for which prior user consent was given.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "6.4.2\tSolution details",
                            "text_content": "Figure 6.4.2-1 illustrates the process of user consent for exposing user equipment (UE) data to the visitor premises local mobile network (VPLMN) during roaming. The figure depicts the interaction between the mobile network operator (MNO) and the visitor's mobile network operator (VNO) in a roaming scenario. Key elements include the UE, VPLMN, and VNO, as well as the signaling between them. The figure emphasizes the importance of user consent and data protection in the context of international roaming.\nFigure 6.4.2-1: User Consent for UE Data Exposure toVPLMN in the Roaming case\n1.\tA V-Consumer NF requests/subscribes analytics to the V-NWDAF. The message may include UE ID and Data Processor ID.\n2.\tOnce receiving the request message, the V-NWDAF checks local operator policy and/or regulatory policy to determine whether it is allowed to obtain analytics information in the HPLMN. If the analytics information in the HPLMN is allowed to be used in the VPLMN, the V-NWDAF sends the Analytics request.\nIf the V-Central NF is V-NWDAF, the V-NWDAF sends Analytics Request to the H-NWDAF. If the V-Central NF is DCCF, NEF or new NF, e.g. GEF, the V-NWDAF sends Analytics Request to the H-NWDAF via V-Central NF.\nNote 1:\tThe selection of V-Central NF (i.e. NWDAF, DCCF, NEF or new NF, e.g. GEF) is based on the conclusion in TR 23.700-81 [2].\n3.\tOnce receiving the request message, the H-NWDAF checks the user consent. Based on the user consent, operator policy and/or regulatory policy, H-NWDAF determines whether it is allowed to expose analytics information to the VPLMN.\nNOTE 2:\tThis solution does not describe how the H-NWDAF obtains the VPLMN specific user consent.\n4.\tIf the user consent parameters, operator policy and/or regulatory policy indicate that the analytics information is allowed to be exposed to the VPLMN, the H-NWDAF sends analytics response to V-NWDAF, which contains analytics information.\n5.\tThe V-NWDAF obtains the analytics information and sends the Nnwdaf_AnalyticsSubscription_Notify message to V-Consumer NF.\nSteps 6-8 are performed after the user consent is modified or revoked.\n6.\tIf the user consent parameter is changed, e.g. user consent is revoked, H-NWDAF updates the H-NWDAF's UE context.\n7.\tThe H-NWDAF sends the user consent modification/revocation notification message to the V-NWDAF via V-Central NF.\n8.\tThe V-NWDAF sends the user consent modification/revocation notification message to the V-Consumer NF. Once receiving the notification message, the V-Consumer NF stops to use the obtained analytics information and deletes the obtained analytics information.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "6.4.3\tEvaluation",
                            "text_content": "Evaluation is not provided.\n",
                            "figures_meta_data": [],
                            "tables": []
                        }
                    ]
                },
                {
                    "title": "6.5\tSolution #5: Central authorization for user consent handling",
                    "description": "",
                    "summary": "",
                    "text_content": "",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": [
                        {
                            "title": "6.5.1\tIntroduction",
                            "text_content": "This solution is addressing key issue #3.\nThis solution provides one solution for introducing a central NF or a service to allow for dedicated authorization related to user consent data retrieval and revocation, which allows to provide a unified authentication framework.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "6.5.2\tSolution details",
                            "text_content": "Whenever NF/AF wants to retrieve data related to one or several UEs, it provides in an authorization request to a user consent authorization function (UCA NF) a list of UEs, for which the user consent is wanted. The UCA NF contacts the UDM/UDR to gain information about which UEs give their user consent, and which do not. This information can then also be re-used by UCA NF for other requests.\nThe UCA NF creates a user consent authorization token including the list of allowed UE identities. This token is created in addition to the OAuth2.0 token that the NF needs to request from NRF.\nThe UCA NF sends in a signed response the user consent related authorization token which includes the list of UEs, for which data collection was authorized. With this token (and the OAuth2.0 token for authorizing for the service), the NF/AF requests another NF to provide data about the UE.\nNFp validates both tokens before providing any data.\nThe UCA NF has the history of NFs/AFs that collected UE consent. This allows for sending centrally notifications of updates or revocations to those NFs that requested UE consent before. To keep an up-to-date list, the UCA needs to either subscribe for notifications from UDM once user consent was collected about a UE, or regularly check the UDM.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "6.5.3\tEvaluation",
                            "text_content": "This solution ensures that all NF(s)/AF(s) receiving/having received UE data are tracked centrally. It does not require multiple NFs to check the user consent. Whenever user consent is revoked, the 5GS is able to find the NF(s)/AF(s) that have been storing the data by requesting the central entity, which can trigger/request NF(s)/AF(s) to revoke the data.\n",
                            "figures_meta_data": [],
                            "tables": []
                        }
                    ]
                }
            ]
        },
        {
            "title": "7\tConclusions",
            "description": "",
            "summary": "",
            "tables": [],
            "figures_meta_data": [],
            "subsections": [
                {
                    "title": "7.1\tConclusion for Key Issue #1",
                    "description": "",
                    "summary": "",
                    "text_content": "For KI#1 on analytics, the following is agreed for user consent handling:\nFor scenarios where local regulations permit, for example vPLMN and hPLMN subject to the same regulatory requirements, the NWDAF is deemed to be the enforcement point and is subject to the requirement specified in Annex V of TS 33.501 [3]. Depending on the use case and the data source, it could be the vNWDAF or the hNWDAF. This is however left to the involved PLMNs to determine.\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "7.2\tConclusion for Key Issue #2",
                    "description": "",
                    "summary": "",
                    "text_content": "For KI #2 on the NTN feature, it is concluded that no normative work is required.\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "7.3\tConclusion for Key Issue #3",
                    "description": "",
                    "summary": "",
                    "text_content": "It is concluded that no normative work is required. There is only one use case, i.e. user consent for eNA roaming, and in this case, UDM is the NF to notify the revocation.\n\n\n",
                    "tables": [
                        {
                            "description": "",
                            "table number": 4,
                            "summary": "",
                            "name": ""
                        }
                    ],
                    "figures_meta_data": [],
                    "subsubsections": []
                }
            ]
        }
    ]
}