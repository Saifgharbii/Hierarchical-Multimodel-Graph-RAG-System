{
    "document_name": "38300-i00.docx",
    "content": [
        {
            "title": "Foreword",
            "description": "This Technical Specification has been produced by the 3rd Generation Partnership Project (3GPP).\nThe contents of the present document are subject to continuing work within the TSG and may change following formal TSG approval. Should the TSG modify the contents of the present document, it will be re-released by the TSG with an identifying change of release date and an increase in version number as follows:\nVersion x.y.z\nwhere:\nx\tthe first digit:\n1\tpresented to TSG for information;\n2\tpresented to TSG for approval;\n3\tor greater indicates TSG approved document under change control.\ny\tthe second digit is incremented for all changes of substance, i.e. technical enhancements, corrections, updates, etc.\nz\tthe third digit is incremented when editorial only changes have been incorporated in the document.\n\n",
            "summary": "",
            "tables": [],
            "figures_meta_data": [],
            "subsections": []
        },
        {
            "title": "1\tScope",
            "description": "The present document provides an overview and overall description of the NG-RAN and focuses on the radio interface protocol architecture of NR connected to 5GC (E-UTRA connected to 5GC is covered in the 36 series). Details of the radio interface protocols are specified in companion specifications of the 38 series.\n",
            "summary": "",
            "tables": [],
            "figures_meta_data": [],
            "subsections": []
        },
        {
            "title": "2\tReferences",
            "description": "The following documents contain provisions which, through reference in this text, constitute provisions of the present document.\n-\tReferences are either specific (identified by date of publication, edition number, version number, etc.) or non-specific.\n-\tFor a specific reference, subsequent revisions do not apply.\n-\tFor a non-specific reference, the latest version applies. In the case of a reference to a 3GPP document (including a GSM document), a non-specific reference implicitly refers to the latest version of that document in the same Release as the present document.\n[1]\t3GPP TR 21.905: \"Vocabulary for 3GPP Specifications\".\n[2]\t3GPP TS 36.300: \"Evolved Universal Terrestrial Radio Access (E-UTRA) and Evolved Universal Terrestrial Radio Access Network (E-UTRAN); Overall description; Stage 2\".\n[3]\t3GPP TS 23.501: \"System Architecture for the 5G System; Stage 2\".\n[4]\t3GPP TS 38.401: \"NG-RAN; Architecture description\".\n[5]\t3GPP TS 33.501: \"Security Architecture and Procedures for 5G System\".\n[6]\t3GPP TS 38.321: \"NR; Medium Access Control (MAC) protocol specification\".\n[7]\t3GPP TS 38.322: \"NR; Radio Link Control (RLC) protocol specification\".\n[8]\t3GPP TS 38.323: \"NR; Packet Data Convergence Protocol (PDCP) specification\".\n[9]\t3GPP TS 37.324: \" E-UTRA and NR; Service Data Protocol (SDAP) specification\".\n[10]\t3GPP TS 38.304: \"NR; User Equipment (UE) procedures in Idle mode and RRC Inactive state\".\n[11]\t3GPP TS 38.306: \"NR; User Equipment (UE) radio access capabilities\".\n[12]\t3GPP TS 38.331: \"NR; Radio Resource Control (RRC); Protocol specification\".\n[13]\t3GPP TS 38.133: \"NR; Requirements for support of radio resource management\".\n[14]\t3GPP TS 22.168: \"Earthquake and Tsunami Warning System (ETWS) requirements; Stage 1\".\n[15]\t3GPP TS 22.268: \"Public Warning System (PWS) Requirements\".\n[16]\t3GPP TS 38.410: \"NG-RAN; NG general aspects and principles\".\n[17]\t3GPP TS 38.420: \"NG-RAN; Xn general aspects and principles\".\n[18]\t3GPP TS 38.101-1: \"NR; User Equipment (UE) radio transmission and reception; Part 1: Range 1 Standalone\".\n[19]\t3GPP TS 22.261: \"Service requirements for next generation new services and markets\".\n[20]\t3GPP TS 38.202: \"NR; Physical layer services provided by the physical layer\"\n[21]\t3GPP TS 37.340: \"NR; Multi-connectivity; Overall description; Stage-2\".\n[22]\t3GPP TS 23.502: \"Procedures for the 5G System; Stage 2\".\n[23]\tIETF RFC 4960 (2007-09): \"Stream Control Transmission Protocol\".\n[24]\t3GPP TS 26.114: \"Technical Specification Group Services and System Aspects; IP Multimedia Subsystem (IMS); Multimedia Telephony; Media handling and interaction\".\n[25]\tVoid.\n[26]\t3GPP TS 38.413: \"NG-RAN; NG Application Protocol (NGAP)\".\n[27]\tIETF RFC 3168 (09/2001): \"The Addition of Explicit Congestion Notification (ECN) to IP\".\n[28]\t3GPP TS 24.501: \"NR; Non-Access-Stratum (NAS) protocol for 5G System (5GS)\".\n[29]\t3GPP TS 36.331: \"Evolved Universal Terrestrial Radio Access (E-UTRA); Radio Resource Control (RRC); Protocol specification\".\n[30]\t3GPP TS 38.415: \"NG-RAN; PDU Session User Plane Protocol\".\n[31]\t3GPP TS 38.340: \"NR; Backhaul Adaptation Protocol (BAP) specification\".\n[32]\t3GPP TS 38.470: \"NG-RAN; F1 application protocol (F1AP) \".\n[33]\t3GPP TS 38.425: \"NG-RAN; NR user plane protocol\".\n[34]\t3GPP TS 23.216: \"Single Radio Voice Call Continuity (SRVCC); Stage 2\".\n[35]\t3GPP TS 38.101-2: \"User Equipment (UE) radio transmission and reception; Part 2: Range 2 Standalone\".\n[36]\t3GPP TS 38.101-3: \"User Equipment (UE) radio transmission and reception; Part 3: Range 1 and Range 2 Interworking operation with other radios\".\n[37]\t3GPP TS 37.213: \"Physical layer procedures for shared spectrum channel access\".\n[38]\t3GPP TS 38.213: \"NR; Physical layer procedures for control\".\n[39]\t3GPP TS 22.104 \"Service requirements for cyber-physical control applications in vertical domains\".\n[40]\t3GPP TS 23.287: \"Architecture enhancements for 5G System (5GS) to support Vehicle-to-Everything (V2X) services\".\n[41]\t3GPP TS 23.285: \"Technical Specification Group Services and System Aspects; Architecture enhancements for V2X services\".\n[42]\t3GPP TS 38.305: \"NG Radio Access Network (NG-RAN); Stage 2 functional specification of User Equipment (UE) positioning in NG-RAN\".\n[43]\t3GPP TS 37.355: \"LTE Positioning Protocol (LPP)\".\n[44]\t3GPP TS 29.002: \"Mobile Application Part (MAP) specification\".\n[45]\t3GPP TS 23.247: \"Architectural enhancements for 5G multicast-broadcast services; Stage 2\".\n[46]\t3GPP TS 26.346 \"Multimedia Broadcast/Multicast Service (MBMS); Protocols and codecs\".\n[47]\t3GPP TS 23.122: \"Non-Access-Stratum (NAS) functions related to Mobile Station (MS) in idle mode\".\n[48]\t3GPP TS 23.304: \"Proximity based Services (ProSe) in the 5G System (5GS)\".\n[49]\t3GPP TS 28.541: \"5G Network Resource Model (NRM)\".\n[50]\t3GPP TS 38.423: \"NG-RAN; Xn Application Protocol (XnAP)\".\n[51]\tNIMA TR 8350.2, Third Edition, Amendment 1, 3 January 2000: \"DEPARTMENT OF DEFENSE WORLD GEODETIC SYSTEM 1984\".\n[52]\t3GPP TS 38.211: \"NR; Physical channels and modulation\".\n[53]\t3GPP TS 24.587: \"Vehicle-to-Everything (V2X) services in 5G System (5GS)\".\n[54]\t3GPP TS 23.041: \"Technical realization of Cell Broadcast Service (CBS)\".\n[55]\t3GPP TS 24.554: \"Technical Specification Group Core Network and Terminals; Proximity-services (ProSe) in 5G System (5GS) protocol\".\n[56]\t3GPP TS 38.214: \"Technical Specification Group Radio Access Network; NR; Physical layer procedures for data\".\n[57]\t3GPP TR 38.835: \"NR; Study on XR enhancements for NR\".\n[58]\t3GPP TS 26.522: \"5G Real-time Media Transport Protocol Configurations\".\n[59]\t3GPP TS 38.215: \"NR; Physical layer measurements\".\n[60]\t3GPP TS 23.256: \"Support of Uncrewed Aerial Systems (UAS) connectivity, identification and tracking; Stage 2\".\n",
            "summary": "",
            "tables": [],
            "figures_meta_data": [],
            "subsections": []
        },
        {
            "title": "3\tAbbreviations and Definitions",
            "description": "",
            "summary": "",
            "tables": [],
            "figures_meta_data": [],
            "subsections": [
                {
                    "title": "3.1\tAbbreviations",
                    "description": "",
                    "summary": "",
                    "text_content": "For the purposes of the present document, the abbreviations given in TR 21.905 [1], in TS 36.300 [2] and the following apply. An abbreviation defined in the present document takes precedence over the definition of the same abbreviation, if any, in TR 21.905 [1] and TS 36.300 [2].\n5GC\t5G Core Network\n5GS\t5G System\n5QI\t5G QoS Identifier\nA2X\tAircraft-to-Everything\nA-CSI\tAperiodic CSI\nAGC\tAutomatic Gain Control\nAI\tArtificial Intelligence\nAKA\tAuthentication and Key Agreement\nAMBR\tAggregate Maximum Bit Rate\nAMC\tAdaptive Modulation and Coding\nAMF\tAccess and Mobility Management Function\nAR\tAugmented Reality\nARP\tAllocation and Retention Priority\nATG\tAir to Ground\nBA\tBandwidth Adaptation\nBCCH\tBroadcast Control Channel\nBCH\tBroadcast Channel\nBFD\tBeam Failure Detection\nBH\tBackhaul\nBL\tBandwidth reduced Low complexity\nBPSK\tBinary Phase Shift Keying\nBRID\tBroadcast Remote Identification\nC-RNTI\tCell RNTI\nCAG\tClosed Access Group\nCAPC\tChannel Access Priority Class\nCBRA\tContention Based Random Access\nCCE\tControl Channel Element\nCD-SSB\tCell Defining SSB\nCFR\tCommon Frequency Resource\nCFRA\tContention Free Random Access\nCG\tConfigured Grant\nCHO\tConditional Handover\nCIoT\tCellular Internet of Things\nCLI\tCross Link interference\nCMAS\tCommercial Mobile Alert Service\nCORESET\tControl Resource Set\nCP\tCyclic Prefix\nCPA\tConditional PSCell Addition\nCPC\tConditional PSCell Change\nDAA\tDetect And Avoid\nDAG\tDirected Acyclic Graph\nDAPS\tDual Active Protocol Stack\nDFT\tDiscrete Fourier Transform\nDCI\tDownlink Control Information\nDCP\tDCI with CRC scrambled by PS-RNTI\nDCR\tDirect Communication Request\nDL-AoD\tDownlink Angle-of-Departure\nDL-SCH\tDownlink Shared Channel\nDL-TDOA\tDownlink Time Difference Of Arrival\nDMRS\tDemodulation Reference Signal\nDRX\tDiscontinuous Reception\nDSR\tDelay Status Report\nDTX\tDiscontinuous Transmission\nE-CID\tEnhanced Cell-ID (positioning method)\nEC\tEnergy Cost\nEHC\tEthernet Header Compression\nePWS\tenhancements of Public Warning System\nETWS\tEarthquake and Tsunami Warning System\nFS\tFeature Set\nFSA ID\tFrequency Selection Area Identity\nG-CS-RNTI\tGroup Configured Scheduling RNTI\nG-RNTI\tGroup RNTI\nGFBR\tGuaranteed Flow Bit Rate\nGIN\tGroup ID for Network selection\nGNSS\tGlobal Navigation Satellite System\nGSO\tGeosynchronous Orbit\nH-SFN\tHyper System Frame Number\nHAPS\tHigh Altitude Platform Station\nHRNN\tHuman-Readable Network Name\nIAB\tIntegrated Access and Backhaul\nIFRI\tIntra Frequency Reselection Indication\nI-RNTI\tInactive RNTI\nINT-RNTI\tInterruption RNTI\nKPAS\tKorean Public Alarm System\nL2\tLayer-2\nL3\tLayer-3\nLDPC\tLow Density Parity Check\nLEO\tLow Earth Orbit\nLTM\tL1/L2 Triggered Mobility\nMBS\tMulticast/Broadcast Services\nMCE\tMeasurement Collection Entity\nMCCH\tMBS Control Channel\nMDBV\tMaximum Data Burst Volume\nMEO\tMedium Earth Orbit\nMIB\tMaster Information Block\nMICO\tMobile Initiated Connection Only\nMFBR\tMaximum Flow Bit Rate\nML\tMachine Learning\nMMTEL\tMultimedia telephony\nMNO\tMobile Network Operator\nMO-SDT\tMobile Originated SDT\nMP\tMulti-Path\nMPE\tMaximum Permissible Exposure\nMRB\tMBS Radio Bearer\nMT\tMobile Termination\nMT-SDT\tMobile Terminated SDT\nMTCH\tMBS Traffic Channel\nMTSI\tMultimedia Telephony Service for IMS\nMU-MIMO\tMulti User MIMO\nMulti-RTT\tMulti-Round Trip Time\nMUSIM\tMulti-Universal Subscriber Identity Module\nN3C\tNon-3GPP Connection\nNB-IoT\tNarrow Band Internet of Things\nNCD-SSB\tNon Cell Defining SSB\nNCGI\tNR Cell Global Identifier\nNCL\tNeighbour Cell List\nNCR\tNeighbour Cell Relation\nNCRT\tNeighbour Cell Relation Table\nNGAP\tNG Application Protocol\nNGSO\tNon-Geosynchronous Orbit\nNID\tNetwork Identifier\nNPN\tNon-Public Network\nNR\tNR Radio Access\nNSAG\tNetwork Slice AS Group\nNTN\tNon-Terrestrial Network\nP-MPR\tPower Management Maximum Power Reduction\nP-RNTI\tPaging RNTI\nPCH\tPaging Channel\nPCI\tPhysical Cell Identifier\nPDB\tPacket Delay Budget\nPDC\tPropagation Delay Compensation\nPDCCH\tPhysical Downlink Control Channel\nPDSCH\tPhysical Downlink Shared Channel\nPEI\tPaging Early Indication\nPER\tPacket Error Rate\nPH\tPaging Hyperframe\nPLMN\tPublic Land Mobile Network\nPNI-NPN\tPublic Network Integrated NPN\nPO\tPaging Occasion\nPQI\tPC5 5QI\nPRACH\tPhysical Random Access Channel\nPRB\tPhysical Resource Block\nPRG\tPrecoding Resource block Group\nPRS\tPositioning Reference Signal\nPS-RNTI\tPower Saving RNTI\nPSDB\tPDU Set Delay Budget\nPSER\tPDU Set Error Rate\nPSI\tPDU Set Importance\nPSIHI\tPDU Set Integrated Handling Information\nPSS\tPrimary Synchronisation Signal\nPTM\tPoint to Multipoint\nPTP\tPoint to Point\nPTW\tPaging Time Window\nPUCCH\tPhysical Uplink Control Channel\nPUSCH\tPhysical Uplink Shared Channel\nPWS\tPublic Warning System\nQAM\tQuadrature Amplitude Modulation\nQFI\tQoS Flow ID\nQMC\tQoE Measurement Collection\nQoE\tQuality of Experience\nQPSK\tQuadrature Phase Shift Keying\nRA\tRandom Access\nRA-RNTI\tRandom Access RNTI\nRACH\tRandom Access Channel\nRANAC\tRAN-based Notification Area Code\nREG\tResource Element Group\nRIM\tRemote Interference Management\nRLM\tRadio Link Monitoring\nRMSI\tRemaining Minimum SI\nRNA\tRAN-based Notification Area\nRNAU\tRAN-based Notification Area Update\nRNTI\tRadio Network Temporary Identifier\nRQA\tReflective QoS Attribute\nRQoS\tReflective Quality of Service\nRS\tReference Signal\nRSRP\tReference Signal Received Power\nRSRQ\tReference Signal Received Quality\nRSSI\tReceived Signal Strength Indicator\nRSTD\tReference Signal Time Difference\nRTT\tRound Trip Time\nRVQoE\tRAN visible QoE\nSCS\tSubCarrier Spacing\nSD\tSlice Differentiator\nSDAP\tService Data Adaptation Protocol\nSDT\tSmall Data Transmission\nSD-RSRP\tSidelink Discovery RSRP\nSFI-RNTI\tSlot Format Indication RNTI\nSHR\tSuccessful Handover Report\nSIB\tSystem Information Block\nSI-RNTI\tSystem Information RNTI\nSLA\tService Level Agreement\nSL-PRS\tSidelink Positioning Reference Signal\nSL-RSRP\tSidelink RSRP\nSMC\tSecurity Mode Command\nSMF\tSession Management Function\nSMTC\tSS/PBCH block Measurement Timing Configuration\nS-NSSAI\tSingle Network Slice Selection Assistance Information\nSNPN\tStand-alone Non-Public Network\nSNPN ID\tStand-alone Non-Public Network Identity\nSPR\tSuccessful PSCell Addition/Change Report\nSPS\tSemi-Persistent Scheduling\nSR\tScheduling Request\nSRAP\tSidelink Relay Adaptation Protocol\nSRS\tSounding Reference Signal\nSRVCC\tSingle Radio Voice Call Continuity\nSS\tSynchronization Signal\nSSB\tSS/PBCH block\nSSS\tSecondary Synchronisation Signal\nSSSG\tSearch Space Set Group\nSST\tSlice/Service Type\nSU-MIMO\tSingle User MIMO\nSUL\tSupplementary Uplink\nTA\tTiming Advance\nTB\tTransport Block\nTCE\tTrace Collection Entity\nTNL\tTransport Network Layer\nTPC\tTransmit Power Control\nTRP\tTransmit/Receive Point\nTRS\tTracking Reference Signal\nU2N\tUE-to-Network\nU2U\tUE-to-UE\nUAV\tUncrewed Aerial Vehicle\nUCI\tUplink Control Information\nUDC\tUplink Data Compression\nUDM\tUnified Data Management\nUE-Slice-MBR\tUE Slice Maximum Bit Rate\nUL-AoA\tUplink Angles of Arrival\nUL-RTOA\tUplink Relative Time of Arrival\nUL-SCH\tUplink Shared Channel\nUPF\tUser Plane Function\nURLLC\tUltra-Reliable and Low Latency Communications\nVR\tVirtual Reality\nV2X\tVehicle-to-Everything\nXn-C\tXn-Control plane\nXn-U\tXn-User plane\nXnAP\tXn Application Protocol\nXR\teXtended Reality\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "3.2\tDefinitions",
                    "description": "",
                    "summary": "",
                    "text_content": "For the purposes of the present document, the terms and definitions given in TR 21.905 [1], in TS 36.300 [2] and the following apply. A term defined in the present document takes precedence over the definition of the same term, if any, in TR 21.905 [1] and TS 36.300 [2].\nA2X communication: A communication to support A2X services leveraging PC5 reference points. A2X services are realized by various types of A2X applications, i.e. BRID or DAA.\nAerial UE communication: functionality enabling Aerial UE function, as defined in 16.18.\nAir to Ground network: An NG-RAN consisting of ground-based gNBs, which provide cell towers that send signals up to an aircraft's antenna(s) of onboard ATG terminal, with typical vertical altitude of around 10,000m and take-off/landing altitudes down to 3000m.\nBH RLC channel: an RLC channel between two nodes, which is used to transport backhaul packets.\nBoundary IAB-node: as defined in TS 38.401 [4].\nBroadcast MRB: A radio bearer configured for MBS broadcast delivery.\nCAG Cell: a PLMN cell broadcasting at least one Closed Access Group identity.\nCAG Member Cell: for a UE, a CAG cell broadcasting the identity of the selected PLMN, registered PLMN or equivalent PLMN, and for that PLMN, a CAG identifier belonging to the Allowed CAG list of the UE for that PLMN.\nCAG-only cell: a CAG cell that is only available for normal service for CAG UEs.\nCell-Defining SSB: an SSB with an RMSI associated.\nChild node: IAB-DU's and IAB-donor-DU's next hop neighbour node; the child node is also an IAB-node.\nConditional Handover (CHO): a handover procedure that is executed only when execution condition(s) are met.\nCORESET#0: the control resource set for at least SIB1 scheduling, can be configured either via MIB or via dedicated RRC signalling.\nDAPS Handover: a handover procedure that maintains the source gNB connection after reception of RRC message for handover and until releasing the source cell after successful random access to the target gNB.\nData Burst: A set of multiple PDUs generated and sent by the application in a short period of time, as defined in TS 23.501 [3].\nDirect Path: a type of UE-to-Network transmission path, where data is transmitted between a UE and the network without sidelink relaying.\nDownstream: direction toward child node or UE in IAB-topology.\nEarly Data Forwarding: data forwarding that is initiated before the UE executes the handover.\nEarth-centered, earth-fixed: a global geodetic reference system for the Earth intended for practical applications of mapping, charting, geopositioning and navigation, as specified in NIMA TR 8350.2 [51].\neRedCap UE: a UE with enhanced reduced capabilities as specified in clause 4.2.22.1 in TS 38.306 [11].\nFeeder link: wireless link between the NTN Gateway and the NTN payload.\nGeosynchronous Orbit: earth-centered orbit at approximately 35786 kilometres above Earth's surface and synchronised with Earth's rotation. A geostationary orbit is a non-inclined geosynchronous orbit, i.e. in the Earth's equator plane.\nGroup ID for Network Selection: an identifier used during SNPN selection to enhance the likelihood of selecting a preferred SNPN that supports a Default Credentials Server or a Credentials Holder, as specified in TS 23.501 [3].\ngNB: node providing NR user plane and control plane protocol terminations towards the UE, and connected via the NG interface to the 5GC.\nHigh Altitude Platform Station: airborne vehicle embarking the NTN payload placed at an altitude between 8 and 50 km.\nIAB-donor: gNB that provides network access to UEs via a network of backhaul and access links.\nIAB-donor-CU: as defined in TS 38.401 [4].\nIAB-donor-DU: as defined in TS 38.401 [4].\nIAB-DU: gNB-DU functionality supported by the IAB-node to terminate the NR access interface to UEs and next-hop IAB-nodes, and to terminate the F1 protocol to the gNB-CU functionality, as defined in TS 38.401 [4], on the IAB-donor.\nIAB-MT: IAB-node function that terminates the Uu interface to the parent node using the procedures and behaviours specified for UEs unless stated otherwise. IAB-MT function used in 38-series of 3GPP Specifications corresponds to IAB-UE function defined in TS 23.501 [3].\nIAB-node: RAN node that supports NR access links to UEs and NR backhaul links to parent nodes and child nodes. The IAB-node does not support backhauling via LTE.\nIAB topology: the unison of all IAB-nodes and IAB-donor-DUs whose F1 and/or RRC connections are terminated at the same IAB-donor-CU.\nIndirect Path: a type of UE-to-Network transmission path, where data is forwarded via a U2N Relay UE between a U2N Remote UE and the network.\nInter-donor partial migration: migration of an IAB-MT to a parent node underneath a different IAB-donor-CU while the collocated IAB-DU and its descendant IAB-node(s), if any, are terminated at the initial IAB-donor-CU. The procedure renders the said IAB-node as a boundary IAB-node.\nIntra-system Handover: handover that does not involve a CN change (EPC or 5GC).\nInter-system Handover: handover that involves a CN change (EPC or 5GC).\nLate Data Forwarding: data forwarding that is initiated after the source NG-RAN node knows that the UE has successfully accessed a target NG-RAN node.\nL1/L2 Triggered Mobility: a cell switch procedure that the network triggers via MAC CE based on L1 measurements.\nMapped Cell ID: in NTN, it corresponds to a fixed geographical area.\nMBS Radio Bearer: A radio bearer configured for MBS delivery.\nMobile-IAB cell: a cell of a mobile IAB-DU.\nMobile IAB-DU: gNB-DU functionality supported by the mobile IAB-node to terminate the NR access interface to UEs, and to terminate the F1 protocol to the gNB-CU functionality on the IAB-donor, as defined in TS 38.401 [4].\nMobile IAB-DU migration: procedure for a mobile IAB-node as defined in TS 38.401 [4].\nMobile IAB-MT: mobile IAB-node function that terminates the Uu interface to the parent node using the procedures and behaviours specified for UEs unless stated otherwise.\nMobile IAB-MT migration: procedure for a mobile IAB-MT as defined in TS 38.401 [4].\nMobile IAB-node: RAN node that supports NR access links to UEs and an NR backhaul link to a parent node, and that can conduct physical mobility across the RAN area. The mobile IAB-node function used in 38-series of 3GPP Specifications corresponds to the MBSR function defined in TS 23.501 [3].\nMP Relay UE: a UE that provides functionality to support connectivity to the network for MP Remote UE(s).\nMP Remote UE: a UE that communicates with the network via a direct Uu link and a MP Relay UE.\nMSG1: preamble transmission of the random access procedure for 4-step random access (RA) type.\nMSG3: first scheduled transmission of the random access procedure.\nMSGA: preamble and payload transmissions of the random access procedure for 2-step RA type.\nMSGB: response to MSGA in the 2-step random access procedure. MSGB may consist of response(s) for contention resolution, fallback indication(s), and backoff indication.\nMulticast/Broadcast Service: A point-to-multipoint service as defined in TS 23.247 [45].\nMulticast MRB: A radio bearer configured for MBS multicast delivery.\nMulti-hop backhauling: using a chain of NR backhaul links between an IAB-node and an IAB-donor.\nNCR-Fwd: Network-Controlled Repeater node function, which performs amplifying-and-forwarding of UL/DL RF signals between gNB and UE. The behaviour of the NCR-Fwd is controlled according to the side control information received by the NCR-MT from a gNB.\nNCR-Fwd access link: link used for transmissions between the NCR-Fwd and UEs.\nNCR-Fwd backhaul link: link used for backhauling between the NCR-Fwd and gNB.\nNCR-MT: NCR-node entity which communicates with a gNB via a control link to receive side control information. The control link is based on NR Uu interface.\nNCR-node: RAN node comprising NCR-MT and NCR-Fwd.\nng-eNB: node providing E-UTRA user plane and control plane protocol terminations towards the UE, and connected via the NG interface to the 5GC.\nNG-C: control plane interface between NG-RAN and 5GC.\nNG-U: user plane interface between NG-RAN and 5GC.\nNG-RAN node: either a gNB or an ng-eNB.\nNon-CAG Cell: a PLMN cell which does not broadcast any Closed Access Group identity.\nNon-Cell Defining SSB: an SSB without an RMSI associated.\nNon-Geosynchronous orbit: earth-centered orbit with an orbital period that does not match Earth's rotation on its axis. This includes Low and Medium Earth Orbit (LEO and MEO). LEO operates at altitudes between 300 km and 1500 km and MEO at altitudes between 7000 km and 25000 km, approximately.\nNon-terrestrial network: an NG-RAN consisting of gNBs, which provide non-terrestrial NR access to UEs by means of an NTN payload embarked on an airborne or space-borne NTN vehicle and an NTN Gateway.\nNR backhaul link: NR link used for backhauling between an IAB-node and an IAB-donor, and between IAB-nodes in case of a multi-hop backhauling.\nNR sidelink communication: AS functionality enabling at least V2X communication as defined in TS 23.287 [40] and the ProSe communication (including ProSe non-Relay and UE-to-Network Relay communication) as defined in TS 23.304 [48], between two or more nearby UEs, using NR technology but not traversing any network node.\nNR sidelink discovery: AS functionality enabling ProSe non-Relay Discovery and ProSe UE-to-Network Relay discovery for Proximity based Services as defined in TS 23.304 [48] between two or more nearby UEs, using NR technology but not traversing any network node.\nNTN Gateway: an earth station located at the surface of the earth, providing connectivity to the NTN payload using the feeder link. An NTN Gateway is a TNL node.\nNTN payload: a network node, embarked on board a satellite or high altitude platform station, providing connectivity functions, between the service link and the feeder link. In the current version of this specification, the NTN payload is a TNL node.\nNumerology: corresponds to one subcarrier spacing in the frequency domain. By scaling a reference subcarrier spacing by an integer N, different numerologies can be defined.\nParent node: IAB-MT's next hop neighbour node; the parent node can be IAB-node or IAB-donor-DU\nPC5 Relay RLC channel: an RLC channel between L2 U2N Remote UE and L2 U2N Relay UE, or between L2 U2U Remote UE and L2 U2U Relay UE, which is used to transport packets over PC5 for L2 UE-to-Network/UE-to-UE Relay.\nPDU Set: one or more PDUs carrying the payload of one unit of information generated at the application level (e.g. frame(s) or video slice(s) for XR Services), as defined in TS 23.501 [3].\nPLMN Cell: a cell of the PLMN.\nRACH-less LTM: an LTM cell switch procedure where UE skips the random access procedure.\nRedCap UE: a UE with reduced capabilities as specified in clause 4.2.21.1 in TS 38.306 [11].\nRelay discovery: AS functionality enabling 5G ProSe UE-to-Network Relay Discovery as defined in TS 23.304 [48], using NR technology but not traversing any network node.\nSatellite: a space-borne vehicle orbiting the Earth embarking the NTN payload.\nService link: wireless link between the NTN payload and UE.\nSidelink Discovery RSRP: RSRP measurements on PC5 link related to NR sidelink discovery.\nSidelink RSRP: RSRP measurements on PC5 link related to NR sidelink communication.\nSNPN Access Mode: mode of operation whereby a UE only accesses SNPNs.\nSNPN-only cell: a cell that is only available for normal service for SNPN subscribers.\nSNPN Identity: the identity of Stand-alone NPN defined by the pair (PLMN ID, NID).\nSubsequent LTM: LTM cell switch procedures between candidate cells without RRC reconfiguration by the network in between.\nTransmit/Receive Point: part of the gNB transmitting and receiving radio signals to/from UE according to physical layer properties and parameters inherent to that element.\nU2N Relay UE: a UE that provides functionality to support connectivity to the network for U2N Remote UE(s).\nU2N Remote UE: a UE that communicates with the network via a U2N Relay UE.\nU2U Relay UE: a UE that provides functionality to support connectivity between two U2U Remote UEs.\nU2U Remote UE: a UE that communicates with other UE(s) via a U2U Relay UE.\nUpstream: direction toward parent node in IAB-topology.\nUu Relay RLC channel: an RLC channel between L2 U2N Relay UE and gNB, which is used to transport packets over Uu for L2 UE-to-Network Relay.\nV2X sidelink communication: AS functionality enabling V2X communication as defined in TS 23.285 [41], between nearby UEs, using E-UTRA technology but not traversing any network node.\nXn: network interface between NG-RAN nodes.\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                }
            ]
        },
        {
            "title": "4\tOverall Architecture and Functional Split",
            "description": "",
            "summary": "",
            "tables": [],
            "figures_meta_data": [],
            "subsections": [
                {
                    "title": "4.1\tOverall Architecture",
                    "description": "",
                    "summary": "",
                    "text_content": "An NG-RAN node is either:\n-\ta gNB, providing NR user plane and control plane protocol terminations towards the UE; or\n-\tan ng-eNB, providing E-UTRA user plane and control plane protocol terminations towards the UE.\nThe gNBs and ng-eNBs are interconnected with each other by means of the Xn interface. The gNBs and ng-eNBs are also connected by means of the NG interfaces to the 5GC, more specifically to the AMF (Access and Mobility Management Function) by means of the NG-C interface and to the UPF (User Plane Function) by means of the NG-U interface (see TS 23.501 [3]).\nNOTE:\tThe architecture and the F1 interface for a functional split are defined in TS 38.401 [4].\nThe NG-RAN architecture is illustrated in Figure 4.1-1 below.\nFigure 4.1-1 presents an overview of the telecommunication system's overall architecture, illustrating the interconnected components that work together to facilitate seamless communication. The figure showcases the various nodes and their interconnections, emphasizing the importance of each element in maintaining the system's functionality. The layout provides a clear visual representation of the network's structure, allowing for a better understanding of how data flows and is processed throughout the system.\nFigure 4.1-1: Overall Architecture\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "4.2\tFunctional Split",
                    "description": "",
                    "summary": "",
                    "text_content": "The gNB and ng-eNB host the following functions:\n-\tFunctions for Radio Resource Management: Radio Bearer Control, Radio Admission Control, Connection Mobility Control, Dynamic allocation of resources to UEs in uplink, downlink and sidelink (scheduling);\n-\tIP and Ethernet header compression, uplink data decompression, encryption and integrity protection of data;\n-\tSelection of an AMF at UE attachment when no routing to an AMF can be determined from the information provided by the UE;\n-\tRouting of User Plane data towards UPF(s);\n-\tRouting of Control Plane information towards AMF;\n-\tConnection setup and release;\n-\tScheduling and transmission of paging messages;\n-\tScheduling and transmission of system broadcast information (originated from the AMF or OAM);\n-\tMeasurement and measurement reporting configuration for mobility and scheduling;\n-\tTransport level packet marking in the uplink;\n-\tSession Management;\n-\tSupport of Network Slicing;\n-\tQoS Flow management and mapping to data radio bearers;\n-\tSupport of UEs in RRC_INACTIVE state;\n-\tDistribution function for NAS messages;\n-\tRadio access network sharing;\n-\tDual Connectivity;\n-\tTight interworking between NR and E-UTRA;\n-\tMaintain security and radio configuration for User Plane CIoT 5GS Optimisation, as defined in TS 23.501 [3] (ng-eNB only).\nNOTE 1:\tBL UE or UE in enhanced coverage is only supported by ng-eNB, see TS 36.300 [2].\nNOTE 2:\tNB-IoT UE is only supported by ng-eNB, see TS 36.300 [2].\nThe AMF hosts the following main functions (see TS 23.501 [3]):\n-\tNAS signalling termination;\n-\tNAS signalling security;\n-\tAS Security control;\n-\tInter CN node signalling for mobility between 3GPP access networks;\n-\tIdle mode UE Reachability (including control and execution of paging retransmission);\n-\tRegistration Area management;\n-\tSupport of intra-system and inter-system mobility;\n-\tAccess Authentication;\n-\tAccess Authorization including check of roaming rights;\n-\tMobility management control (subscription and policies);\n-\tSupport of Network Slicing;\n-\tSMF selection.\n-\tSelection of CIoT 5GS optimisations;\nThe UPF hosts the following main functions (see TS 23.501 [3]):\n-\tAnchor point for Intra-/Inter-RAT mobility (when applicable);\n-\tExternal PDU session point of interconnect to Data Network;\n-\tPacket routing & forwarding;\n-\tPacket inspection and User plane part of Policy rule enforcement;\n-\tTraffic usage reporting;\n-\tUplink classifier to support routing traffic flows to a data network;\n-\tBranching point to support multi-homed PDU session;\n-\tQoS handling for user plane, e.g. packet filtering, gating, UL/DL rate enforcement;\n-\tUplink Traffic verification (SDF to QoS flow mapping);\n-\tDownlink packet buffering and downlink data notification triggering.\nThe Session Management function (SMF) hosts the following main functions (see TS 23.501 [3]):\n-\tSession Management;\n-\tUE IP address allocation and management;\n-\tSelection and control of UP function;\n-\tConfigures traffic steering at UPF to route traffic to proper destination;\n-\tControl part of policy enforcement and QoS;\n-\tDownlink Data Notification.\nThis is summarized on the figure below where yellow boxes depict the logical nodes and white boxes depict the main functions.\nFigure 4.2 -1 illustrates the functional split between the Non-Standalone (NSA) and Standalone (SA) networks in a 5G Core (5GC) architecture. The figure depicts the separation of the Evolved Packet Core (EPC) and the new 5GC, with the EPC handling the traditional mobile network functions and the 5GC managing the new 5G services. The split is crucial for efficient resource allocation and improved performance in the 5G network. The figure also shows the interworking of the two domains, highlighting the need for seamless communication and coordination between them.\nFigure 4.2-1: Functional Split between NG-RAN and 5GC\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "4.3\tNetwork Interfaces",
                    "description": "",
                    "summary": "",
                    "text_content": "",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": [
                        {
                            "title": "4.3.1\tNG Interface",
                            "text_content": "The NG user plane interface (NG-U) is defined between the NG-RAN node and the UPF. The user plane protocol stack of the NG interface is shown on Figure 4.3.1.1-1. The transport network layer is built on IP transport and GTP-U is used on top of UDP/IP to carry the user plane PDUs between the NG-RAN node and the UPF.\nFigure 4.3.1.1 - 1: NG - U Protocol Stack illustrates the layered structure of the Network-User Protocol Stack, which is essential for the efficient communication between network nodes and users. The figure showcases the various layers, including the Transport Layer, Network Layer, and Application Layer, each responsible for specific functions such as data transfer, routing, and application-specific protocols. The visual representation emphasizes the complexity and interdependence of these layers, highlighting their role in ensuring seamless communication and data exchange in modern communication networks.\nFigure 4.3.1.1-1: NG-U Protocol Stack\nNG-U provides non-guaranteed delivery of user plane PDUs between the NG-RAN node and the UPF.\nFurther details of NG-U can be found in TS 38.410 [16].\nThe NG control plane interface (NG-C) is defined between the NG-RAN node and the AMF. The control plane protocol stack of the NG interface is shown on Figure 4.3.1.2-1. The transport network layer is built on IP transport. For the reliable transport of signalling messages, SCTP is added on top of IP. The application layer signalling protocol is referred to as NGAP (NG Application Protocol). The SCTP layer provides guaranteed delivery of application layer messages. In the transport, IP layer point-to-point transmission is used to deliver the signalling PDUs.\nFigure 4.3.1.2-1 illustrates the Network Gateway (NG) Communication Protocol Stack, which is a crucial component in modern telecommunications. The figure showcases the various layers of the protocol stack, including the Network Gateway (NG), Session Border Controller (SBC), and the User Plane Function (UPF). The UPF is responsible for processing user traffic and is located at the edge of the network, enabling efficient and secure communication. The figure also highlights the role of the SBC in managing security and signaling aspects, ensuring a secure and reliable connection for end-users. The NG acts as a bridge between the core network and the user plane, facilitating efficient communication and management of network resources. Overall, this protocol stack is essential for the smooth operation of modern telecommunications networks, enabling seamless connectivity and communication for users.\nFigure 4.3.1.2-1: NG-C Protocol Stack\nNG-C provides the following functions:\n-\tNG interface management;\n-\tUE context management;\n-\tUE mobility management;\n-\tTransport of NAS messages;\n-\tPaging;\n-\tPDU Session Management;\n-\tConfiguration Transfer;\n-\tWarning Message Transmission.\nFurther details of NG-C can be found in TS 38.410 [16].\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "4.3.2\tXn Interface",
                            "text_content": "The Xn User plane (Xn-U) interface is defined between two NG-RAN nodes. The user plane protocol stack on the Xn interface is shown in Figure 4.3.2.1-1. The transport network layer is built on IP transport and GTP-U is used on top of UDP/IP to carry the user plane PDUs.\nFigure 4.3.2.1 -1: Xn -U Protocol Stack illustrates the layered architecture of the Xn -U protocol stack, which is a key component in the communication between network elements. The figure shows the various layers, including the physical, data link, network, transport, and application layers, each with its own set of functions and protocols. The physical layer is responsible for transmitting raw bit streams over the network, while the data link layer ensures reliable data transmission. The network layer is responsible for routing data packets, and the transport layer provides reliable transport services. The application layer is where the actual application-specific protocols are defined. The figure also shows how the different layers interact with each other, highlighting the complex interactions that occur in modern network communication.\nFigure 4.3.2.1-1: Xn-U Protocol Stack\nXn-U provides non-guaranteed delivery of user plane PDUs and supports the following functions:\n-\tData forwarding;\n-\tFlow control.\nFurther details of Xn-U can be found in TS 38.420 [17].\nThe Xn control plane interface (Xn-C) is defined between two NG-RAN nodes. The control plane protocol stack of the Xn interface is shown on Figure 4.3.2.2-1. The transport network layer is built on SCTP on top of IP. The application layer signalling protocol is referred to as XnAP (Xn Application Protocol). The SCTP layer provides the guaranteed delivery of application layer messages. In the transport IP layer point-to-point transmission is used to deliver the signalling PDUs.\nFigure 4.3.2.2 -1: Xn -C Protocol Stack illustrates the layered architecture of the Xn -C protocol stack, which is a key component in the communication between network elements in a 5G network. The figure shows the various layers, including the physical, data link, network, transport, and application layers, as well as the control and user plane functions. This stack is designed to support high-speed data transmission, low latency, and high reliability, which are essential for the efficient operation of 5G networks. The figure also highlights the role of the gNB (gateway node baseband) in managing the communication between the network and the user equipment, ensuring seamless connectivity and data transfer.\nFigure 4.3.2.2-1: Xn-C Protocol Stack\nThe Xn-C interface supports the following functions:\n-\tXn interface management;\n-\tUE mobility management, including context transfer and RAN paging;\n-\tDual connectivity.\nFurther details of Xn-C can be found in TS 38.420 [17].\n",
                            "figures_meta_data": [],
                            "tables": []
                        }
                    ]
                },
                {
                    "title": "4.4\tRadio Protocol Architecture",
                    "description": "",
                    "summary": "",
                    "text_content": "",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": [
                        {
                            "title": "4.4.1\tUser Plane",
                            "text_content": "The figure below shows the protocol stack for the user plane, where SDAP, PDCP, RLC and MAC sublayers (terminated in gNB on the network side) perform the functions listed in clause 6.\nFigure 4.4.1-1: User Plane Protocol Stack\n\nThis figure illustrates the structure of the User Plane Protocol (UPP) stack, which is a key component in the 5G network architecture. The figure shows the various layers of the UPP stack, including the Network Exposure Protocol (NEP), the Session Initiation Protocol (SIP), and the User Plane Function (UPF). The figure also depicts the interaction between the UPP stack and the core network, as well as the role of the User Equipment (UE) in establishing and maintaining connections. The figure provides a clear and concise overview of the 5G network architecture and the role of the UPP stack in enabling high-speed, low-latency communication.\nFigure 4.4.1-1: User Plane Protocol Stack\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "4.4.2\tControl Plane",
                            "text_content": "The figure below shows the protocol stack for the control plane, where:\n-\tPDCP, RLC and MAC sublayers (terminated in gNB on the network side) perform the functions listed in clause 6;\n-\tRRC (terminated in gNB on the network side) performs the functions listed in clause 7;\n-\tNAS control protocol (terminated in AMF on the network side) performs the functions listed in TS 23.501 [3]), for instance: authentication, mobility management, security control…\nFigure 4.4.2 - 1 illustrates the control protocol stack for a specific telecommunication system, showcasing the various layers involved in data transmission. The topmost layer represents the application layer, which handles user-level communication. Below it, the transport layer ensures reliable data transfer through protocols such as TCP or UDP. The network layer, or Internet layer, is responsible for routing the data packets across the network. The data link layer, or link layer, is in charge of transmitting data over physical media, while the physical layer manages the actual transmission of bits. The figure also includes a visual representation of the protocol stack, with each layer's functions and protocols clearly labeled.\nFigure 4.4.2-1: Control Plane Protocol Stack\n",
                            "figures_meta_data": [],
                            "tables": []
                        }
                    ]
                },
                {
                    "title": "4.5\tMulti-Radio Dual Connectivity",
                    "description": "",
                    "summary": "",
                    "text_content": "NG-RAN supports Multi-Radio Dual Connectivity (MR-DC) operation whereby a UE in RRC_CONNECTED is configured to utilise radio resources provided by two distinct schedulers, located in two different NG-RAN nodes connected via a non-ideal backhaul, one providing NR access and the other one providing either E-UTRA or NR access. Further details of MR-DC operation, including Conditional PSCell Addition (CPA) and Conditional PSCell Change (CPC), can be found in TS 37.340 [21].\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "4.6\tRadio Access Network Sharing",
                    "description": "",
                    "summary": "",
                    "text_content": "NG-RAN supports radio access network sharing as defined in TS 23.501 [3].\nIf NR access is shared, system information broadcast in a shared cell indicates a TAC and a Cell Identity for each subset of PLMNs, PNI-NPNs and SNPNs. NR access provides only one TAC and one Cell Identity per cell per PLMN, SNPN or PNI-NPN. In this version of the specification, a Cell Identity can only belong to one network type among PLMN, PNI-NPN or SNPN as defined in TS 23.501 [3].\nEach Cell Identity associated with a subset of PLMNs, SNPNs or PNI-NPNs identifies its serving NG-RAN node.\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "4.7\tIntegrated Access and Backhaul",
                    "description": "",
                    "summary": "",
                    "text_content": "",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": [
                        {
                            "title": "4.7.1\tArchitecture",
                            "text_content": "Integrated access and backhaul (IAB) enables wireless relaying in NG-RAN. The relaying node, referred to as IAB-node, supports access and backhauling via NR. The terminating node of NR backhauling on network side is referred to as the IAB-donor, which represents a gNB with additional functionality to support IAB. Backhauling can occur via a single or via multiple hops. The IAB architecture is shown in Figure 4.7.1-1.\nThe IAB-node supports the gNB-DU functionality, as defined in TS 38.401 [4], to terminate the NR access interface to UEs and next-hop IAB-nodes, and to terminate the F1 protocol to the gNB-CU functionality, as defined in TS 38.401 [4], on the IAB-donor. The gNB-DU functionality on the IAB-node is also referred to as IAB-DU.\nIn addition to the gNB-DU functionality, the IAB-node also supports a subset of the UE functionality referred to as IAB-MT, which includes, e.g., physical layer, layer-2, RRC and NAS functionality to connect to the gNB-DU of another IAB-node or the IAB-donor, to connect to the gNB-CU on the IAB-donor, and to the core network.\nThe IAB-node can access the network using either SA mode or EN-DC. In EN-DC, the IAB-node connects via E-UTRA to a MeNB, and the IAB-donor terminates X2-C as SgNB (TS 37.340 [21]).\nFigure 4.7.1-1 illustrates the Internet Architecture Board (IAB) architecture, showcasing two distinct configurations: a) IAB-node utilizing SA mode with 5 Gateway Control (GC) and b) IAB-node employing EN-DC (Energy-Efficient Dual Connectivity). The figure highlights the role of IAB nodes in managing network resources and enabling efficient communication between devices. The SA mode with 5 GC configuration emphasizes the use of Software-Defined Networking (SDN) principles to streamline network operations, while the EN-DC configuration underscores the integration of energy-saving technologies in modern network infrastructure.\nFigure 4.7.1-1: IAB architecture; a) IAB-node using SA mode with 5GC; b) IAB-node using EN-DC\nAll IAB-nodes that are connected to an IAB-donor via one or multiple backhaul hops and controlled by this IAB-donor via F1AP and/or RRC form an IAB topology with the IAB-donor as its root (Fig. 4.7.1-2). In this IAB topology, the neighbour node of the IAB-DU or the IAB-donor-DU is referred to as the child node and the neighbour node of the IAB-MT is referred to as the parent node. The direction toward the child node is referred to as downstream while the direction toward the parent node is referred to as upstream. The IAB-donor performs centralized resource, topology and route management for its IAB topology.\nFigure 4.7.1-2 illustrates the parent- and child-node relationship for IAB-nodes in a telecommunication network. The figure shows the hierarchical structure of the network, with the IAB-node at the top, followed by the child-nodes. The parent-node represents the higher-level management, while the child-nodes handle the lower-level tasks. The figure emphasizes the efficient delegation of responsibilities and the smooth flow of information within the network.\nFigure 4.7.1-2: Parent- and child-node relationship for IAB-node\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "4.7.2\tProtocol Stacks",
                            "text_content": "Fig. 4.7.2-1 shows the protocol stack for F1-U and Fig. 4.7.2-2 shows the protocol stack for F1-C between IAB-DU and IAB-donor-CU. In these figures, F1-U and F1-C are carried over two backhaul hops.\nF1-U and F1-C use an IP transport layer between IAB-DU and IAB-donor-CU as defined in TS 38.470 [32]. F1-U and F1-C need to be security-protected as described in TS 33.501 [5] (the security layer is not shown in the Figures 4.7.2-1/2).\nOn the wireless backhaul, the IP layer is carried over the Backhaul Adaptation Protocol (BAP) sublayer, which enables routing over multiple hops. The IP layer can also be used for non-F1 traffic, such as OAM traffic as defined in TS 38.401 [4].\nOn each backhaul link, the BAP PDUs are carried by BH RLC channels. Multiple BH RLC channels can be configured on each BH link to allow traffic prioritization and QoS enforcement. The BH-RLC-channel mapping for BAP PDUs is performed by the BAP entities on each IAB-node and the IAB-donor-DU.\nProtocol stacks for an IAB-donor with split gNB architecture are specified in TS 38.401 [4].\nFigure 4.7.2-1 illustrates the protocol stack for the support of F1-U protocol, which is a telecommunication protocol used for the transmission of voice and data services. The figure shows the various layers of the protocol stack, including the physical layer, data link layer, network layer, transport layer, and application layer. Each layer performs specific functions to ensure the efficient transmission of information. The physical layer is responsible for transmitting raw bit streams over the air interface, while the data link layer handles error detection and correction. The network layer is responsible for routing the data packets, and the transport layer ensures reliable delivery of the data. The application layer provides the interface between the network and the user, allowing for the transmission of voice and data services. The figure also shows the interaction between the various layers, highlighting the importance of each layer in the overall protocol stack.\nFig. 4.7.2-1: Protocol stack for the support of F1-U protocol\nFigure 4.7.2-2 illustrates the protocol stack for the support of F1-C protocol, which is a key component in telecommunication networks. The figure shows the various layers of the protocol stack, including the physical layer, data link layer, network layer, transport layer, and application layer. Each layer performs specific functions to ensure the efficient transmission of data. The physical layer is responsible for transmitting raw bit streams over the network, while the data link layer manages the connection between devices. The network layer is responsible for routing data packets across the network, and the transport layer ensures the reliable transmission of data. Finally, the application layer provides the interface between the network and the user, allowing for the exchange of data in a meaningful way. The figure also shows the relationship between the F1-C protocol and other protocols, such as the F1-C protocol itself, the F1-C protocol with F1-C, and the F1-C protocol with F1-C. This relationship is important for understanding how the F1-C protocol fits into the larger network and how it interacts with other protocols.\nFig. 4.7.2-2: Protocol stack for the support of F1-C protocol\nThe IAB-MT further establishes SRBs (carrying RRC and NAS) with the IAB-donor-CU. For IAB-nodes operating in EN-DC, the IAB-MT establishes one or more DRBs with the eNB and one or more DRBs with the IAB-donor-CU, which can be used, e.g., to carry OAM traffic. For SA mode, the establishment of DRBs is optional. These SRBs and DRBs are transported between the IAB-MT and its parent node over Uu access channel(s). The protocol stacks for the SRB is shown in Fig. 4.7.2-3.\nFigure 4.7.2-3 illustrates the protocol stack for the support of IAB-MT's RRC and NAS connections, showcasing the various layers involved in establishing and maintaining communication between the device and the network. The figure depicts the RRC (Radio Resource Control) protocol, which handles the control and management of radio resources, as well as the NAS (Network Access Server) protocol, which is responsible for authentication, authorization, and accounting. The figure also highlights the role of the PDCP (Packet Data Convergence Protocol) in the process, which ensures the efficient transfer of data between the device and the network. Overall, this protocol stack is essential for the smooth operation of IAB-MT connections and the effective management of network resources.\nFigure 4.7.2-3: Protocol stack for the support of IAB-MT's RRC and NAS connections\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "4.7.3\tUser-plane Aspects",
                            "text_content": "The IAB-DU's IP traffic is routed over the wireless backhaul via the BAP sublayer. The BAP sublayer is specified in TS 38.340 [31]. In downstream direction, upper layer packets are encapsulated by the BAP sublayer at the IAB-donor-DU and de-encapsulated at the destination IAB-node. In upstream direction, upper layer packets are encapsulated at the IAB-node and de-encapsulated at the IAB-donor-DU. IAB-specific transport between IAB-donor-CU and IAB-donor-DU is specified in TS 38.401 [4].\nOn the BAP sublayer, packets are routed based on the BAP routing ID, which is carried in the BAP header. The BAP header is added to the packet when it arrives from upper layers, and the BAP header is stripped off when the packet has reached its destination node. The selection of the packet's BAP routing ID is configured by the IAB-donor-CU. The BAP routing ID consists of BAP address and BAP path ID, where the BAP address indicates the destination node of the packet on the BAP sublayer, and the BAP path ID indicates the routing path the packet should follow to this destination. For the purpose of routing, each IAB-node and IAB-donor-DU is further configured with a designated BAP address.\nOn each hop of the packet's path, the IAB-node inspects the packet's BAP address in the BAP routing ID carried in the BAP header to determine if the packet has reached its destination, i.e., matches the IAB-node's BAP address. In case the packet has not reached the destination, the IAB-node determines the next hop backhaul link, referred to as egress link, based on the BAP routing ID carried in the BAP header and a routing configuration it received from the IAB-donor-CU.\nFor each packet, the IAB-node further determines the egress BH RLC channel on the designated egress link. For packets arriving from upper layers, the designated egress BH RLC channel is configured by the IAB-donor-CU, and it is based on upper layer traffic specifiers. Since each BH RLC channel is configured with QoS information or priority level, BH-RLC-channel selection facilitates traffic-specific prioritization and QoS enforcement on the BH. For F1-U traffic, it is possible to map each GTP-U tunnel to a dedicated BH RLC channel or to aggregate multiple GTP-U tunnels into one common BH RLC channel. For traffic other than F1-U traffic, it is possible to map UE-associated F1AP messages, non-UE-associated F1AP messages and non-F1 traffic onto the same or separate BH RLC channels.\nWhen packets are routed from one BH link to another, the egress BH RLC channel on the egress BH link is determined based on the mapping configuration between ingress BH RLC channels and egress BH RLC channels provided by the IAB-donor-CU.\nFlow and congestion control can be supported in both upstream and downstream directions in order to avoid congestion-related packet drops on IAB-nodes and IAB-donor-DU:\n-\tIn upstream direction, UL scheduling on MAC layer can support flow control on each hop;\n-\tIn downstream direction, the NR user plane protocol (TS 38.425 [33]) supports flow and congestion control between the IAB-node and the IAB-donor-CU for UE bearers that terminate at this IAB-node. Further, flow control is supported on BAP sublayer, where the IAB-node can send feedback information on the available buffer size for an ingress BH RLC channel or BAP routing ID to its parent node. The feedback can be sent proactively, e.g., when the buffer load exceeds a certain threshold, or based on polling by the parent node.\nThe IAB-node can reduce UL scheduling latency through signalling of a Pre-emptive BSR to its parent node. The IAB-node can send the Pre-emptive BSR based on UL grants it has provided to child nodes and/or UEs, or based on BSRs it has received from child nodes or UEs (Figure 4.7.3.3-1). The Pre-emptive BSR conveys the data expected rather than the data buffered.\nFigure 4.7.3.3 -1 illustrates the scheduling of Basic Service Set (BSS) in an Individual Antenna Block (IAB), showcasing the process of allocating resources to Base Transceiver Stations (BTS) and Base Stations (BS) within a given area. The figure highlights the importance of efficient resource allocation in managing network traffic and ensuring optimal performance. Key components include the Base Transceiver Station (BTS), Base Station (BS), and the Individual Antenna Block (IAB). The diagram emphasizes the role of the Network Planning and Optimization (NPO) department in determining the optimal resource allocation to maximize network capacity and coverage.\nFigure 4.7.3.3-1: Scheduling of BSR in IAB:\na) regular BSR based on buffered data,\nb) Pre-emptive BSR based on UL grant,\nc) Pre-emptive BSR based on reception of regular BSR\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "4.7.4\tSignalling procedures",
                            "text_content": "The IAB-node integration procedure is captured in TS 38.401 [4].\nThe IAB-node can migrate to a different parent node underneath the same IAB-donor-CU. The IAB-node continues providing access and backhaul service when migrating to a different parent node.\nThe IAB-MT can also migrate to a different parent node underneath another IAB-donor-CU. In this case, the collocated IAB-DU and the IAB-DU(s) of its descendant node(s) retain F1 connectivity with the initial IAB-donor-CU. The IAB-MT of each descendant node and all the served UEs retain the RRC connectivity with the initial IAB-donor-CU. This migration is referred to as inter-donor partial migration. The IAB-node, whose IAB-MT migrates to the new IAB-donor-CU, is referred to as a boundary IAB-node. After inter-donor partial migration, the F1 traffic of the IAB-DU and its descendant nodes is routed via the BAP layer of the IAB topology to which the IAB-MT has migrated.\nInter-donor partial migration is only supported for SA-mode.\nThe intra-donor IAB-node migration procedure and inter-donor partial migration procedures are captured in TS 38.401 [4].\nThe IAB-node may have redundant routes to the IAB-donor-CU(s).\nFor IAB-nodes operating in SA-mode, NR DC can be used to enable route redundancy in the BH by allowing the IAB-MT to have concurrent BH links with two parent nodes. The parent nodes may be connected to the same or to different IAB-donor-CUs, which control the establishment and release of redundant routes via these two parent nodes. Either parent node's gNB-DU functionality together with the respective IAB-donor-CU assumes the role of the IAB-MT's master node or secondary node. The NR DC framework (e.g., MCG/SCG-related procedures) is used to configure the dual radio links with the parent nodes (TS 37.340 [21]).\nThe procedure for establishment of topological redundancy for IAB-nodes operating in SA-mode is captured in TS 38.401 [4].\nAn IAB-node operating in NR-DC may also use one of its links for BH connectivity with an IAB-donor and the other link for access-only connectivity with a separate gNB that does not assume IAB-donor role. The IAB-donor can assume the MN or the SN role. The IAB-node may exchange F1-C traffic with the IAB-donor via the backhaul link and/or via the access link with the gNB. In the latter case, the F1-C messages are carried over NR RRC between the IAB-node and the gNB, and via XnAP between the gNB and the IAB-donor.\nIAB-nodes operating in EN-DC can exchange F1-C traffic with the IAB-donor via the MeNB. The F1-C message is carried over LTE RRC using SRB2 between IAB-node and MeNB and via X2AP between the MeNB and the IAB-donor.\nThe procedures for establishment of redundant transport of F1-C for IAB-nodes using NR-DC and EN-DC are captured in TS 37.340 [21] and TS 38.401 [4].\nWhen the IAB-node using SA-mode declares RLF on the backhaul link, it can perform RLF recovery at another parent node underneath the same or underneath a different IAB-donor-CU. In the latter case, the collocated IAB-DU and the IAB-DU(s) of its descendant node(s) may retain the F1 connectivity with the initial IAB-donor-CU, while the IAB-MT(s) of the descendant node(s) and all the served UEs retain the RRC connectivity with the initial IAB-donor-CU, in the same manner as for inter-donor partial migration.\nThe BH RLF recovery procedure for the IAB-node is captured in TS 38.401 [4]. BH RLF declaration for IAB-node and the aspects of RLF recovery by the IAB-MT are handled in clause 9.2.7 of the present document.\nAn IAB-DU is subject to the same downlink timing alignment of a gNB. The IAB-DU may use the received downlink signal from a parent as a reference to control its downlink timing using TA in conjunction with an additional Tdelta parameter received by the collocated IAB-MT from the parent via MAC-CE.\nInter node discovery is supported via SSB-based and/or CSI-RS-based measurements. An IAB-node can be configured to transmit and receive off synchronization raster SSB signals to discover neighbouring IAB-nodes. The configuration is not expected to create a conflict between IAB-DU SSB transmission and IAB-MT SSB measurement windows.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "4.7.5\tMobile IAB",
                            "text_content": "Mobile IAB introduces the mobile IAB-node, which is a RAN node that provides NR access links to UEs and an NR backhaul link to a parent node, and that can conduct physical mobility across the RAN area. The mobile IAB-node includes a mobile IAB-MT and a mobile IAB-DU. Mobile IAB supports the same functionality as IAB unless explicitly specified. The following enhancements/restrictions only apply to mobile IAB:\nThe mobile IAB-node uses the mobile IAB-node authorization procedure defined in TS 38.401 [4] and the MBSR authorization procedure defined in TS 23.501 [3].\nA RAN node operating as a mobile IAB-node shall not concurrently operate as an IAB-node. During network integration, the RAN node shall indicate whether it intends to operate as a mobile IAB-node or as an IAB-node via an indicator in the RRCSetupComplete message.\nThe parent node indicates support for mobile IAB-nodes by broadcasting a mobile-IAB-specific indicator in SIB1.\nThe mobile IAB-node shall not have descendent nodes. A mobile-IAB cell shall therefore not broadcast any indication that it is a suitable parent node for IAB-nodes or mobile IAB-nodes.\nThe cell of a mobile IAB-DU may indicate to UEs via a SIB1 indicator that it is a mobile-IAB cell.\nThe mobile IAB-node uses the mobile IAB-node network integration procedure as defined in TS 38.401 [4].\nThe mobile IAB-MT can perform the mobile IAB-MT migration procedures via Xn handover and/or via NG handover as defined in TS 38.401 [4]. The mobile IAB-MT can also perform the mobile IAB-node recovery procedure as defined in TS 38.401 [4].\nThe mobile IAB-node can perform the mobile IAB-DU migration procedure, where a new logical mobile IAB-DU is established on the mobile IAB-node and the initial logical mobile IAB-DU is released some time later. During this procedure, the UEs connected via the mobile IAB-node are handed over from the initial logical mobile IAB-DU, referred to as the source logical mobile IAB-DU, to the new logical mobile IAB-DU, referred to as the target logical mobile IAB-DU. The details of this procedure are defined in TS 38.401 [4]. Enhancements related to BAP for mobile IAB-DU migration are defined in TS 38.340 [31].\nWhen a RAN node is operating as a mobile IAB node, dual connectivity for this node is not supported.\nDuring the mobile IAB-DU migration procedure, RACH-less handover can be configured for a UE that is migrated from the source logical mobile IAB-DU to the target logical mobile IAB-DU. The RACH-less handover procedure applies the following functionality:\nThe UE uses the same timing advance at the cell of the target logical mobile IAB-DU as signalled by the cell of the source logical mobile IAB-DU.\nThe handover command for the UE contains a beam identifier for the beam to be used by the UE at the target logical mobile-IAB cell. The beam may be determined based on a UE measurement report and/or based on implementation, e.g., using the target cell's knowledge about the beam(s) used by the UE at the co-located source cell.\nThe handover command may include a pre-allocated UL grant. Alternatively, an UL grant is dynamically signalled by the target logical IAB-DU cell.\nThe UE transmits the RRCReconfigurationComplete message using the pre-allocated or dynamically signalled UL grant. The UE's successful UL data reception on the target logical mobile-IAB cell terminates the RACH-less handover execution.\n",
                            "figures_meta_data": [],
                            "tables": []
                        }
                    ]
                },
                {
                    "title": "4.8\tNon-Public Networks",
                    "description": "",
                    "summary": "",
                    "text_content": "A Non-Public Network (NPN) is a network for non-public use (see TS 22.261 [19]), which can be deployed as (see TS 23.501 [3]):\n-\ta Stand-alone Non-Public Network (SNPN) when not relying on network functions provided by a PLMN; or\n-\ta Public Network Integrated (PNI) NPN when relying on the support of a PLMN.\nNOTE:\tAs described in clause 5.30.3.1 of TS 23.501 [3], there are several approaches in which PNI-NPNs can be made available via PLMNs. The only approach visible to AS, and hence the only approach that is addressed in AS specifications is the approach of using CAGs.\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "4.9\tNetwork-Controlled Repeaters",
                    "description": "",
                    "summary": "",
                    "text_content": "",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": [
                        {
                            "title": "4.9.1\tArchitecture",
                            "text_content": "A Network-Controlled Repeater node, referred to as NCR-node, is an RF repeater that enables wireless amplifying-and-forwarding functionality in NG-RAN. The NCR-node is capable of receiving and applying side control information from a gNB with additional functionality to support Network-Controlled Repeater.\nThe NCR-node comprises an NCR-MT and an NCR-Fwd. The NCR-MT is an entity supporting a subset of the UE functionality that communicates with the gNB to receive side control information via a control link based on the NR Uu interface. The NCR-Fwd is the function performing amplifying-and-forwarding of signals between gNB and UE via the NCR-Fwd backhaul link and NCR-Fwd access link, respectively. The NCR-Fwd can support multiple beams towards the UE. The behaviour of the NCR-Fwd is controlled according to the side control information received from the gNB. The NCR-node is modelled as depicted in Figure 4.9.1-1.\nFigure 4.9.1-1 presents a conceptual model of network-controlled repeaters, illustrating the integration of network-managed repeaters within a telecommunications network. The figure showcases the various components involved, including the network controller, repeaters, and the network itself. The network-controlled repeaters are depicted as nodes within the network, with connections to the network controller and other repeaters. This model emphasizes the role of network-controlled repeaters in optimizing network performance and ensuring efficient data transmission.\nFigure 4.9.1-1: Conceptual model of network-controlled repeater.\nAn NCR-MT establishes SRBs and, optionally, DRB(s) with a gNB. The establishment of DRB(s) can be used to transport OAM traffic.\nThe signal that NCR-Fwd forwards is associated to the cell that the NCR-MT is connected to via the control link. Whether the NCR-Fwd can forward other signals is up to implementation.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "4.9.2\tCapabilities",
                            "text_content": "Carrier Aggregation (CA), Multi-Radio Dual Connectivity (MR-DC), handover and its related features (e.g., CHO, DAPS, CPAC, etc.) are not supported by NCR-MT, as defined together with other limitations in TS 38.306 [11].\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "4.9.3\tSignalling procedures",
                            "text_content": "NR RRC signalling is utilized to configure the NCR-MT to receive side control information from a gNB, which is used by the NCR-Fwd to determine whether and how to amplify-and-forward RF signals. If the side control configuration is removed, the NCR-Fwd ceases its amplifying-and-forwarding function.\nWhen the NCR-MT is in RRC_CONNECTED state, the NCR-Fwd may amplify-and-forward RF signals based on the side control information received from the gNB. The NCR-MT does not support RRM measurements in RRC_CONNECTED.\nWhen the NCR-MT transitions from RRC_CONNECTED state to RRC_INACTIVE state, the NCR-Fwd may continue to amplify-and-forward RF signals in accordance with the last side control information received from the gNB. When the NCR-MT is in RRC_INACTIVE state, the NCR-Fwd ceases to amplify-and-forward RF signals if no suitable cell is detected, or if the NCR-MT selects a different cell than the last serving cell on which side control configuration was received.\nWhen an NCR-MT in RRC_INACTIVE state determines degradation of the NCR-Fwd backhaul link beam, then the NCR-Fwd should cease amplifying-and-forwarding RF signals, and the NCR-MT should attempt to resume its RRC connection (with cause value mo-Signalling). The criteria to evaluate backhaul beam degradation are left to the NCR-node implementation.\nWhen the NCR-MT transitions from RRC_CONNECTED state to RRC_IDLE, the NCR-Fwd ceases any amplifying-and-forwarding of RF signals. How an NCR-MT transitions back from RRC_IDLE state to RRC_CONNECTED state is left to NCR-node or network implementation.\nAn NCR-MT can detect RLF on the control link as specified in TS 38.331 clause 5.3.10 [12]. When RLF is detected, the NCR-MT performs the RRC re-establishment procedure as specified in TS 38.331 [12]. During the RRC re-establishment procedure, the NCR-Fwd ceases to amplify-and-forward RF signals.\nAfter successfully performing the RRC re-establishment procedure, the NCR-MT waits for the new side control configuration for the NCR-Fwd to resume the amplifying-and-forwarding of RF signals.\nAn NCR-MT can also perform Beam Failure Detection (BFD) and Beam Failure Recovery (BFR) as described in clause 9.2.8. Once the NCR-MT detects beam failure in the control link, the NCR-Fwd should cease amplifying-and-forwarding RF signals until BFR is completed.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "4.9.4\tOAM aspects",
                            "text_content": "The transport connection between the NCR-node and its OAM may be provided by the NCR-MT's PDU session. A Network-Controlled Repeater may be configured with a list of allowed gNB cell(s) that the NCR-MT is allowed to connect with, and/or a list of forbidden gNB cell(s) that the NCR-MT is not allowed to connect with.\nThe information on the physical beam(s) used by NCR-Fwd for access link may be provided by OAM to the gNB and the Network-Controlled Repeater for operation. How to characterize and provide the physical beams of NCR-Fwd is up to implementation.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "4.9.5\tNetwork-controlled repeater management",
                            "text_content": "Network-Controlled Repeater identification is performed in RAN, and Network-Control Repeater authorization is performed in 5GC. The general procedure of the Network-Controlled Repeater management is illustrated in Figure 4.9.5-1:\nFigure 4.9 illustrates the network-controlled management of repeaters in a telecommunication network. The figure depicts a network with multiple repeaters, each managed by the network controller. The network controller is responsible for coordinating the operation of the repeaters, ensuring efficient data transmission and minimizing latency. The figure also shows the interconnections between the repeaters and the network, highlighting the importance of repeaters in extending the reach of the network and improving connectivity.\nFigure 4.9.5-1: Network-Controlled Repeater management.\nThe gNB broadcasts the Network-Controlled Repeater supported information via system information.\nWhen a Network-Controlled Repeater is trying to access the network as a Network-Controlled Repeater, the Network-Controlled Repeater indication is sent to the serving gNB.\nThe serving gNB selects an appropriate AMF for the Network-Controlled Repeater.\nAMF provides Network-Controlled Repeater authorization information to the gNB.\nOther steps refer to the signalling flow as defined in 9.2.1.3.\n",
                            "figures_meta_data": [],
                            "tables": []
                        }
                    ]
                }
            ]
        },
        {
            "title": "5\tPhysical Layer",
            "description": "",
            "summary": "",
            "tables": [],
            "figures_meta_data": [],
            "subsections": [
                {
                    "title": "5.1\tWaveform, numerology and frame structure",
                    "description": "",
                    "summary": "",
                    "text_content": "The downlink transmission waveform is conventional OFDM using a Cyclic Prefix. The uplink transmission waveform is conventional OFDM using a CP with a transform precoding function performing DFT spreading that can be disabled or enabled. For operation with shared spectrum channel access in FR1, the uplink transmission waveform subcarrier mapping can map to subcarriers in one or more PRB interlaces.\nFigure 5.1-1 illustrates the transmitter block diagram for CP-OFDM with optional DFT-spreading, showcasing the transmitter's components and their interactions. The figure depicts the CP-OFDM signal generation, followed by the application of an optional Discrete Fourier Transform (DFT) spreading technique to increase spectral efficiency. The resulting signals are then modulated and converted into a carrier wave, which is transmitted through the air interface. The block diagram emphasizes the importance of CP-OFDM in managing interference and improving the overall performance of wireless communication systems.\nFigure 5.1-1: Transmitter block diagram for CP-OFDM with optional DFT-spreading\nThe numerology is based on exponentially scalable sub-carrier spacing f = 2µ × 15 kHz with µ={0,1,3,4,5,6} for PSS, SSS and PBCH and µ={0,1,2,3,5,6} for other channels. Normal CP is supported for all sub-carrier spacings, Extended CP is supported for µ=2. 12 consecutive sub-carriers form a Physical Resource Block (PRB). Up to 275 PRBs are supported on a carrier.\nTable 5.1-1: Supported transmission numerologies.\n\nThe UE may be configured with one or more bandwidth parts on a given component carrier, of which only one can be active at a time, as described in clauses 7.8 and 6.10 respectively. The active bandwidth part defines the UE's operating bandwidth within the cell's operating bandwidth. For initial access, and until the UE's configuration in a cell is received, initial bandwidth part detected from system information is used.\nDownlink and uplink transmissions are organized into frames with 10 ms duration, consisting of ten 1 ms subframes. Each frame is divided into two equally-sized half-frames of five subframes each. The slot duration is 14 symbols with Normal CP and 12 symbols with Extended CP, and scales in time as a function of the used sub-carrier spacing so that there is always an integer number of slots in a subframe.\nTiming Advance TA is used to adjust the uplink frame timing relative to the downlink frame timing.\nFigure 5.1-2 illustrates the timing relationship between uplink and downlink transmissions in a telecommunication system. The figure depicts the synchronization of data transfer between the base station and user equipment, with the uplink and downlink represented by the blue and red lines, respectively. The timing diagram demonstrates the precise moment when each signal is transmitted and received, highlighting the importance of accurate timing for maintaining efficient communication. The figure also shows the impact of timing offsets on the overall system performance, emphasizing the need for precise synchronization in modern telecommunication networks.\nFigure 5.1-2: Uplink-downlink timing relation\nOperation on both paired and unpaired spectrum is supported.\n",
                    "tables": [
                        {
                            "description": "Table 5.1-1: Supported transmission numerologies.",
                            "table number": 1,
                            "summary": "",
                            "name": ""
                        }
                    ],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "5.2\tDownlink",
                    "description": "",
                    "summary": "",
                    "text_content": "",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": [
                        {
                            "title": "5.2.1\tDownlink transmission scheme",
                            "text_content": "Demodulation Reference Signal (DMRS) based spatial multiplexing is supported for Physical Downlink Shared Channel (PDSCH). Up to 8, 12, 16 and 24 orthogonal DL DMRS ports are supported for type 1, type 2, enhanced type 1, and enhanced type 2 DMRS respectively. Up to 8 orthogonal DL DMRS ports per UE are supported for SU-MIMO and up to 4 orthogonal DL DMRS ports per UE are supported for MU-MIMO. The number of SU-MIMO code words is one for 1-4 layer transmissions and two for 5-8 layer transmissions.\nThe DMRS and corresponding PDSCH are transmitted using the same precoding matrix and the UE does not need to know the precoding matrix to demodulate the transmission. The transmitter may use different precoder matrix for different parts of the transmission bandwidth, resulting in frequency selective precoding. The UE may also assume that the same precoding matrix is used across a set of Physical Resource Blocks (PRBs) denoted Precoding Resource Block Group (PRG).\nTransmission durations from 2 to 14 symbols in a slot is supported.\nAggregation of multiple slots with Transport Block (TB) repetition is supported.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "5.2.2\tPhysical-layer processing for physical downlink shared channel",
                            "text_content": "The downlink physical-layer processing of transport channels consists of the following steps:\n-\tTransport block CRC attachment;\n-\tCode block segmentation and code block CRC attachment;\n-\tChannel coding: LDPC coding;\n-\tPhysical-layer hybrid-ARQ processing;\n-\tRate matching;\n-\tScrambling;\n-\tModulation: QPSK, 16QAM, 64QAM, 256QAM, and 1024QAM;\n-\tLayer mapping;\n-\tMapping to assigned resources and antenna ports.\nThe UE may assume that at least one symbol with demodulation reference signal is present on each layer in which PDSCH is transmitted to a UE, and up to 3 additional DMRS can be configured by higher layers.\nPhase Tracking RS may be transmitted on additional symbols to aid receiver phase tracking.\nThe DL-SCH physical layer model is described in TS 38.202 [20].\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "5.2.3\tPhysical downlink control channels",
                            "text_content": "The Physical Downlink Control Channel (PDCCH) can be used to schedule DL transmissions on PDSCH and UL transmissions on PUSCH, where the Downlink Control Information (DCI) on PDCCH includes:\n-\tDownlink assignments containing at least modulation and coding format, resource allocation, and hybrid-ARQ information related to DL-SCH;\n-\tUplink scheduling grants containing at least modulation and coding format, resource allocation, and hybrid-ARQ information related to UL-SCH.\nIn addition to scheduling, PDCCH can be used to for:\n-\tActivation and deactivation of configured PUSCH transmission with configured grant;\n-\tActivation and deactivation of PDSCH semi-persistent transmission;\n-\tNotifying one or more UEs of the slot format;\n-\tNotifying one or more UEs of the PRB(s) and OFDM symbol(s) where the UE may assume no transmission is intended for the UE;\n-\tTransmission of TPC commands for PUCCH and PUSCH;\n-\tTransmission of one or more TPC commands for SRS transmissions by one or more UEs;\n-\tSwitching a UE's active bandwidth part;\n-\tInitiating a random access procedure;\n-\tIndicating the UE(s) to monitor the PDCCH during the next occurrence of the DRX on-duration;\n-\tIn IAB context, indicating the availability for soft symbols of an IAB-DU;\n-\tTriggering one shot HARQ-ACK codebook feedback;\n-\tFor operation with shared spectrum channel access:\n-\tTriggering search space set group switching;\n-\tIndicating one or more UEs about the available RB sets and channel occupancy time duration;\n-\tIndicating downlink feedback information for configured grant PUSCH (CG-DFI).\nA UE monitors a set of PDCCH candidates in the configured monitoring occasions in one or more configured COntrol REsource SETs (CORESETs) according to the corresponding search space configurations.\nA CORESET consists of a set of PRBs with a time duration of 1 to 3 OFDM symbols. The resource units Resource Element Groups (REGs) and Control Channel Elements (CCEs) are defined within a CORESET with each CCE consisting a set of REGs. Control channels are formed by aggregation of CCE. Different code rates for the control channels are realized by aggregating different number of CCE. Interleaved and non-interleaved CCE-to-REG mapping are supported in a CORESET.\nThe PDCCH repetition is operated by using two search spaces which are explicitly linked by configuration provided by the RRC layer, and are associated with corresponding CORESETs. For PDCCH repetition, two linked search spaces are configured with the same number of candidates, and two PDCCH candidates in two search spaces are linked with the same candidate index. When PDCCH repetition is scheduled to a UE, an intra-slot repetition is allowed and each repetition has the same number of CCEs and coded bits, and corresponds to the same DCI payload.\nPolar coding is used for PDCCH.\nEach resource element group carrying PDCCH carries its own DMRS.\nQPSK modulation is used for PDCCH.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "5.2.4\tSynchronization signal and PBCH block",
                            "text_content": "The Synchronization Signal and PBCH block (SSB) consists of primary and secondary synchronization signals (PSS, SSS), each occupying 1 symbol and 127 subcarriers, and PBCH spanning across 3 OFDM symbols and 240 subcarriers, but on one symbol leaving an unused part in the middle for SSS as show in Figure 5.2.4-1. For the 3 MHz channel bandwidth, the PBCH is further equally punctured from both edges to span 144 subcarriers. The possible time locations of SSBs within a half-frame are determined by sub-carrier spacing and the periodicity of the half-frames where SSBs are transmitted is configured by the network. During a half-frame, different SSBs may be transmitted in different spatial directions (i.e. using different beams, spanning the coverage area of a cell).\nWithin the frequency span of a carrier, multiple SSBs can be transmitted. The PCIs of SSBs transmitted in different frequency locations do not have to be unique, i.e. different SSBs in the frequency domain can have different PCIs. However, when an SSB is associated with an RMSI, the SSB is referred to as a Cell-Defining SSB (CD-SSB). A PCell is always associated to a CD-SSB located on the synchronization raster.\nWhen an SSB is not associated with an RMSI, the SSB is referred to as a non-Cell Defining SSB (NCD-SSB), which can be used to perform RLM, BFD, and RRM measurements and measurements for RA resource selection inside the active DL BWP when the active BWP does not contain the CD-SSB. A UE may be configured with multiple SSBs provided that each BWP is configured with at most one SSB (CD-SSB or NCD-SSB).\nFigure 5.2.4-1 illustrates the time-frequency structure of Single Side Band (SSB), a modulation technique used in telecommunication. The figure shows the signal's amplitude modulation (AM) and frequency modulation (FM) components, which are combined to create a single sideband waveform. The diagram highlights the carrier wave, upper sideband, and lower sideband, demonstrating how the signal's frequency is shifted to one side, resulting in a more efficient use of bandwidth. The figure is essential for understanding the principles of SSB and its application in various communication systems.\nFigure 5.2.4-1: Time-frequency structure of SSB\nPolar coding is used for PBCH.\nThe UE may assume a band-specific sub-carrier spacing for the SSB unless a network has configured the UE to assume a different sub-carrier spacing.\nPBCH symbols carry its own frequency-multiplexed DMRS.\nQPSK modulation is used for PBCH.\nThe PBCH physical layer model is described in TS 38.202 [20].\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "5.2.5\tPhysical layer procedures",
                            "text_content": "Link adaptation (AMC: adaptive modulation and coding) with various modulation schemes and channel coding rates is applied to the PDSCH. The same coding and modulation is applied to all groups of resource blocks belonging to the same L2 PDU scheduled to one user within one transmission duration and within a MIMO codeword.\nFor channel state estimation purposes, the UE may be configured to measure CSI-RS and estimate the downlink channel state based on the CSI-RS measurements. The UE feeds the estimated channel state back to the gNB to be used in link adaptation.\nDownlink power control can be used.\nCell search is the procedure by which a UE acquires time and frequency synchronization with a cell and detects the Cell ID of that cell. NR cell search is based on the primary and secondary synchronization signals, and PBCH DMRS, located on the synchronization raster.\nAsynchronous Incremental Redundancy Hybrid ARQ is supported. The gNB provides the UE with the HARQ-ACK feedback timing either dynamically in the DCI or semi-statically in an RRC configuration. Retransmission of HARQ-ACK feedback is supported by using enhanced dynamic codebook and/or one-shot triggering of HARQ-ACK transmission for (i) all configured CCs and HARQ processes in the PUCCH group, (ii) a configured subset of CCs and/or HARQ processes in the PUCCH group, or (iii) a dynamically indicated HARQ-ACK feedback instance. For HARQ-ACK of SPS PDSCH without associated PDCCH, in case of HARQ-ACK dropping due to TDD specific collisions, the HARQ-ACK feedback can be deferred to a next available PUCCH transmission occasion.\nThe UE may be configured to receive code block group based transmissions where retransmissions may be scheduled to carry a sub-set of all the code blocks of a TB.\nThe Master Information Block (MIB) on PBCH provides the UE with parameters (e.g. CORESET#0 configuration) for monitoring of PDCCH for scheduling PDSCH that carries the System Information Block 1 (SIB1). PBCH may also indicate that there is no associated SIB1, in which case the UE may be pointed to another frequency from where to search for an SSB that is associated with a SIB1 as well as a frequency range where the UE may assume no SSB associated with SIB1 is present. The indicated frequency range is confined within a contiguous spectrum allocation of the same operator in which SSB is detected.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "5.2.6\tDownlink Reference Signals and Measurements for Positioning",
                            "text_content": "The DL Positioning Reference Signals (DL PRS) are defined to facilitate support of different positioning methods such as DL-TDOA, DL-AoD, multi-RTT through the following set of UE measurements DL RSTD, DL PRS-RSRP, and UE Rx-Tx time difference respectively as described in TS 38.305 [42].\nBesides DL PRS signals, UE can use SSB and CSI-RS for RRM (RSRP and RSRQ) measurements for E-CID type of positioning.\n",
                            "figures_meta_data": [],
                            "tables": []
                        }
                    ]
                },
                {
                    "title": "5.3\tUplink",
                    "description": "",
                    "summary": "",
                    "text_content": "",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": [
                        {
                            "title": "5.3.1\tUplink transmission scheme",
                            "text_content": "Two transmission schemes are supported for PUSCH: codebook based transmission and non-codebook based transmission.\nFor codebook based transmission, the gNB provides the UE with a transmit precoding matrix indication in the DCI. The UE uses the indication to select the PUSCH transmit precoder from the codebook. For non-codebook based transmission, the UE determines its PUSCH precoder based on wideband SRI field from the DCI.\nDMRS based spatial multiplexing is supported for PUSCH. Up to 8, 12, 16, and 24 orthogonal UL DMRS ports are supported for type 1, type 2, enhanced type 1, and enhanced type 2 DMRS respectively. For a given UE, up to 4 or up to 8 layer transmissions are supported. The number of code words is one for 1 to 4 layer transmission and two for 5 to 8 layer transmission. When transform precoding is used, only a single MIMO layer transmission is supported.\nTransmission durations from 1 to 14 symbols in a slot is supported.\nAggregation of multiple slots with TB repetition is supported.\nTwo types of frequency hopping are supported, intra-slot frequency hopping, and in case of slot aggregation, inter-slot frequency hopping. Intra-slot and inter-slot frequency hopping are not supported when PRB interlace uplink transmission waveform is used.\nPUSCH may be scheduled with DCI on PDCCH, or a semi-static configured grant may be provided over RRC, where two types of operation are supported:\n-\tThe first PUSCH is triggered with a DCI, with subsequent PUSCH transmissions following the RRC configuration and scheduling received on the DCI, or\n-\tThe PUSCH is triggered by data arrival to the UE's transmit buffer and the PUSCH transmissions follow the RRC configuration.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "5.3.2\tPhysical-layer processing for physical uplink shared channel",
                            "text_content": "The uplink physical-layer processing of transport channels consists of the following steps:\n-\tTransport Block CRC attachment;\n-\tCode block segmentation and Code Block CRC attachment;\n-\tChannel coding: LDPC coding;\n-\tPhysical-layer hybrid-ARQ processing;\n-\tRate matching;\n-\tScrambling;\n-\tModulation: π/2 BPSK (with transform precoding only), QPSK, 16QAM, 64QAM and 256QAM;\n-\tLayer mapping, transform precoding (enabled/disabled by configuration), and pre-coding;\n-\tMapping to assigned resources and antenna ports.\nThe UE transmits at least one symbol with demodulation reference signal on each layer on each frequency hop in which the PUSCH is transmitted, and up to 3 additional DMRS can be configured by higher layers.\nPhase Tracking RS may be transmitted on additional symbols to aid receiver phase tracking.\nThe UL-SCH physical layer model is described in TS 38.202 [20].\nFor configured grants operation with shared spectrum channel access, described in clause 10.3, a CG-UCI (Configured Grant Uplink Control Information) can be transmitted in PUSCH scheduled by configured uplink grant.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "5.3.3\tPhysical uplink control channel",
                            "text_content": "Physical uplink control channel (PUCCH) carries the Uplink Control Information (UCI) from the UE to the gNB. Five formats of PUCCH exist, depending on the duration of PUCCH and the UCI payload size:\n-\tFormat #0: Short PUCCH of 1 or 2 symbols with small UCI payloads of up to two bits with UE multiplexing capacity of up to 6 UEs with 1-bit payload in the same PRB;\n-\tFormat #1: Long PUCCH of 4-14 symbols with small UCI payloads of up to two bits with UE multiplexing capacity of up to 84 UEs without frequency hopping and 36 UEs with frequency hopping in the same PRB;\n-\tFormat #2: Short PUCCH of 1 or 2 symbols with large UCI payloads of more than two bits with no UE multiplexing capability in the same PRBs;\n-\tFormat #3: Long PUCCH of 4-14 symbols with large UCI payloads with no UE multiplexing capability in the same PRBs;\n-\tFormat #4: Long PUCCH of 4-14 symbols with moderate UCI payloads with multiplexing capacity of up to 4 UEs in the same PRBs.\nThe short PUCCH format of up to two UCI bits is based on sequence selection, while the short PUCCH format of more than two UCI bits frequency multiplexes UCI and DMRS. The long PUCCH formats time-multiplex the UCI and DMRS. Frequency hopping is supported for long PUCCH formats and for short PUCCH formats of duration of 2 symbols. Short and long PUCCH formats can be repeated over multiple slots or sub-slots, where the repetition factor is either indicated dynamically in the DCI or semi-statically in an RRC configuration.\nFor operation with shared spectrum channel access in FR1, PUCCH Format #0, #1, #2, #3 are extended to use resource in one PRB interlace (up to two interlaces for Format #2 and Format #3) in one RB Set. PUCCH Format #2 and #3 are enhanced to support multiplexing capacity of up to 4 UEs in the same PRB interlace when one interlace is used.\nFor operation in FR2-2, PUCCH Format #0, #1, #4 are extended to use resource in configurable number of continuous PRBs, up to 16 PRBs.\nUp to two PUCCH configurations can be configured for a UE per PUCCH group (see TS 38.331 [12]), where the first PUCCH configuration is associated with a PUCCH of priority index 0 (low) and the second PUCCH configuration is associated with a PUCCH of priority index 1 (high).\nUCI multiplexing in PUCCH is supported when PUCCH transmissions of UCIs coincide in time, and are associated with the same priority (high/low). In addition, multiplexing of HARQ-ACK of priority index 0 (low) and UCI of priority index 1 (high) in PUCCH of priority index 1 (high) is supported when PUCCH transmissions of HARQ-ACK of priority index 0 and UCI of priority index 1 (high) coincide in time.\nUCI multiplexing in PUSCH is supported when UCI and PUSCH transmissions coincide in time, either due to transmission of a UL-SCH transport block or due to triggering of A-CSI transmission without UL-SCH transport block, and are associated with the same priority (high/low). In addition, HARQ-ACK multiplexing of a certain priority in PUSCH of a different priority is supported when HARQ-ACK and PUSCH transmissions coincide in time, either due to transmission of a UL-SCH transport block or due to triggering of A-CSI transmission without UL-SCH transport block:\n-\tUCI carrying HARQ-ACK feedback with 1 or 2 bits is multiplexed by puncturing PUSCH;\n-\tIn all other cases UCI is multiplexed by rate matching PUSCH.\nUCI consists of the following information:\n-\tCSI;\n-\tACK/NAK;\n-\tScheduling request.\nSimultaneous transmission of PUCCH and PUSCH associated with different priorities on cells of different bands in a PUCCH group is supported, where UCI multiplexing in the PUCCH associated with a priority in combination of UCI multiplexing in a PUSCH associated with a different priority is supported if the UCI multiplexed on PUSCH is of same priority as the PUSCH.\nFor operation with shared spectrum channel access, multiplexing of CG-UCI and PUCCH carrying HARQ-ACK feedback can be configured by the gNB. If not configured, when PUCCH overlaps with PUSCH scheduled by a configured grant within a PUCCH group and PUCCH carries HARQ ACK feedback, PUSCH scheduled by configured grant is skipped.\nQPSK and π/2 BPSK modulation can be used for long PUCCH with more than 2 bits of information, QPSK is used for short PUCCH with more than 2 bits of information and BPSK and QPSK modulation can be used for long PUCCH with up to 2 information bits.\nTransform precoding is applied to PUCCH Format #3 and Format #4.\nChannel coding used for uplink control information is described in table 5.3.3-1.\nTable 5.3.3-1: Channel coding for uplink control information\n\n",
                            "figures_meta_data": [],
                            "tables": [
                                {
                                    "description": "Table 5.3.3-1: Channel coding for uplink control information",
                                    "table number": 2,
                                    "summary": "",
                                    "name": ""
                                }
                            ]
                        },
                        {
                            "title": "5.3.4\tRandom access",
                            "text_content": "Random access preamble sequences, of four different lengths are supported. Sequence length 839 is applied with subcarrier spacings of 1.25 and 5 kHz, sequence length 139 is applied with subcarrier spacings of 15, 30, 60, 120, 480, and 960 kHz, sequence length of 571 is applied with subcarrier spacings of 30, 120, and 480 kHz, and sequence length 1151 is applied with subcarrier spacings of 15 and 120 kHz. Sequence length 839 supports unrestricted sets and restricted sets of Type A and Type B, while sequence lengths 139, 571, and 1151 support unrestricted sets only. Sequence length 839 is only used for operation with licensed channel access while sequence length 139 can be used for operation with either licensed or shared spectrum channel access. For FR1, sequence lengths of 571 and 1151 can be used only for operation with shared spectrum channel access. For FR2-2, sequence lengths of 571 can be used for operation with either licensed or shared spectrum channel access only with subcarrier spacings of 120 kHz and 480 kHz and sequence lengths of 1151 can be used for operation with either licensed or shared spectrum channel access only with subcarrier spacings of 120 kHz.\nMultiple PRACH preamble formats are defined with one or more PRACH OFDM symbols, and different CP and guard time. The PRACH preamble configuration to use is provided to the UE in the system information.\nFor IAB additional random access configurations are defined. These configurations are obtained by extending the random access configurations defined for UEs via scaling the periodicity and/or offsetting the time domain position of the RACH occasions.\nIAB-MTs can be provided with random access configurations (as defined for UEs or after applying the aforementioned scaling/offsetting) different from random access configurations provided to UEs.\nThe UE calculates the PRACH transmit power for the retransmission of the preamble based on the most recent estimate pathloss and power ramping counter.\nThe system information provides information for the UE to determine the association between the SSB and the RACH resources. The RSRP threshold for SSB selection for RACH resource association is configurable by network.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "5.3.5\tPhysical layer procedures",
                            "text_content": "Four types of link adaptation are supported as follows:\n-\tAdaptive transmission bandwidth;\n-\tAdaptive transmission duration;\n-\tTransmission power control;\n-\tAdaptive modulation and channel coding rate.\nFor channel state estimation purposes, the UE may be configured to transmit SRS that the gNB may use to estimate the uplink channel state and use the estimate in link adaptation.\nThe gNB determines the desired uplink transmit power and provides uplink transmit power control commands to the UE. The UE uses the provided uplink transmit power control commands to adjust its transmit power.\nThe gNB (including IAB-DU and IAB-donor-DU) determines the desired Timing Advance setting and provides that to the UE (or IAB-MT). The UE/IAB-MT uses the provided TA to determine its uplink transmit timing relative to the UE's/IAB-MTs observed downlink receive timing.\nAn IAB-node may support additional modes for uplink timing:\n-\tThe IAB-MT uses the provided TA plus a provided additional offset to determine its uplink transmission timing, to facilitate parent node's IAB-MT Rx / IAB-DU Rx multiplexing;\n-\tThe IAB-MT aligns its uplink transmission timing to that of the collocated IAB-DU downlink transmission timing, to facilitate IAB-MT Tx / IAB-DU Tx multiplexing of this IAB-node.\nThe IAB-node uplink timing mode is indicated by the parent node via MAC-CE.\nAsynchronous Incremental Redundancy Hybrid ARQ is supported. The gNB schedules each uplink transmission and retransmission using the uplink grant on DCI. For operation with shared spectrum channel access, UE can also retransmit on configured grants if configured.\nThe UE may be configured to transmit code block group based transmissions where retransmissions may be scheduled to carry a sub-set of all the code blocks of a transport block.\nUp to two HARQ-ACK codebooks corresponding to a priority (high/low) can be constructed simultaneously. For each HARQ-ACK codebook, more than one PUCCH for HARQ-ACK transmission within a slot is supported. Each PUCCH is limited within one sub-slot, and the sub-slot pattern is configured per HARQ-ACK codebook.\nPUSCH and PUCCH can be associated with a priority (high/low) by RRC or L1 signalling. If a PUCCH transmission overlaps in time with a transmission of a PUSCH or another PUCCH, only the PUCCH or PUSCH associated with a high priority can be transmitted.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "5.3.6\tUplink Reference Signals and Measurements for Positioning",
                            "text_content": "The periodic, semipersistent and aperiodic transmission of Rel-15 SRS is defined for gNB UL RTOA, UL SRS-RSRP, UL-AoA measurements to facilitate support of UL TDOA and UL AoA positioning methods as described in TS 38.305 [42].\nThe periodic, semipersistent and aperiodic transmission of SRS for positioning is defined for gNB UL RTOA, UL SRS-RSRP, UL-AoA, gNB Rx-Tx time difference measurements to facilitate support of UL TDOA, UL AoA and multi-RTT positioning methods as described in TS 38.305 [42].\n",
                            "figures_meta_data": [],
                            "tables": []
                        }
                    ]
                },
                {
                    "title": "5.4\tCarrier aggregation",
                    "description": "",
                    "summary": "",
                    "text_content": "",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": [
                        {
                            "title": "5.4.1\tCarrier aggregation",
                            "text_content": "In Carrier Aggregation (CA), two or more Component Carriers (CCs) are aggregated. A UE may simultaneously receive or transmit on one or multiple CCs depending on its capabilities:\n-\tA UE with single timing advance capability for CA can simultaneously receive and/or transmit on multiple CCs corresponding to multiple serving cells sharing the same timing advance (multiple serving cells grouped in one TAG);\n-\tA UE with multiple timing advance capability for CA can simultaneously receive and/or transmit on multiple CCs corresponding to multiple serving cells with different timing advances (multiple serving cells grouped in multiple TAGs). NG-RAN ensures that each TAG contains at least one serving cell;\n-\tA non-CA capable UE can receive on a single CC and transmit on a single CC corresponding to one serving cell only (one serving cell in one TAG).\nCA is supported for both contiguous and non-contiguous CCs. When CA is deployed frame timing and SFN are aligned across cells that can be aggregated, or an offset in multiples of slots between the PCell/PSCell and an SCell is configured to the UE. The maximum number of configured CCs for a UE is 16 for DL and 16 for UL.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "5.4.2\tSupplementary Uplink",
                            "text_content": "In conjunction with a UL/DL carrier pair (FDD band) or a bidirectional carrier (TDD band), a UE may be configured with additional, Supplementary Uplink (SUL). SUL differs from the aggregated uplink in that the UE may be scheduled to transmit either on the supplementary uplink or on the uplink of the carrier being supplemented, but not on both at the same time.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "5.4.3\tUplink Tx switching",
                            "text_content": "In uplink CA or SUL, a UE configured with uplink Tx switching can have Tx chain(s) dynamically switched from one uplink band or two uplink bands to another uplink band or two uplink bands for enabling up to 2Tx UL transmission in one uplink band or simultaneous UL transmissions in two uplink bands at a time.\n",
                            "figures_meta_data": [],
                            "tables": []
                        }
                    ]
                },
                {
                    "title": "5.5\tTransport Channels",
                    "description": "",
                    "summary": "",
                    "text_content": "The physical layer offers information transfer services to MAC and higher layers. The physical layer transport services are described by how and with what characteristics data are transferred over the radio interface. An adequate term for this is \"Transport Channel\". This should be clearly separated from the classification of what is transported, which relates to the concept of logical channels at MAC sublayer.\nDownlink transport channel types are:\n1.\tBroadcast Channel (BCH) characterised by:\n-\tfixed, pre-defined transport format;\n-\trequirement to be broadcast in the entire coverage area of the cell, either as a single message or by beamforming different BCH instances.\n2.\tDownlink Shared Channel (DL-SCH) characterised by:\n-\tsupport for HARQ;\n-\tsupport for dynamic link adaptation by varying the modulation, coding and transmit power;\n-\tpossibility to be broadcast in the entire cell;\n-\tpossibility to use beamforming;\n-\tsupport for both dynamic and semi-static resource allocation;\n-\tsupport for UE discontinuous reception (DRX) to enable UE power saving.\n3.\tPaging Channel (PCH) characterised by:\n-\tsupport for UE discontinuous reception (DRX) to enable UE power saving (DRX cycle is indicated by the network to the UE);\n-\trequirement to be broadcast in the entire coverage area of the cell, either as a single message or by beamforming different BCH instances;\n-\tmapped to physical resources which can be used dynamically also for traffic/other control channels.\nUplink transport channel types are:\n1.\tUplink Shared Channel (UL-SCH) characterised by:\n-\tpossibility to use beamforming;\n-\tsupport for dynamic link adaptation by varying the transmit power and potentially modulation and coding;\n-\tsupport for HARQ;\n-\tsupport for both dynamic and semi-static resource allocation.\n2.\tRandom Access Channel(s) (RACH) characterised by:\n-\tlimited control information;\n-\tcollision risk.\nSidelink transport channel types are:\n1.\tSidelink broadcast channel (SL-BCH) characterised by:\n-\tpre-defined transport format.\n2.\tSidelink shared channel (SL-SCH) characterised by:\n-\tsupport for unicast transmission, groupcast transmission and broadcast transmission;\n-\tsupport for both UE autonomous resource selection and scheduled resource allocation by NG-RAN;\n-\tsupport for both dynamic and semi-static resource allocation when UE is allocated resources by the NG-RAN;\n-\tsupport for HARQ;\n-\tsupport for dynamic link adaptation by varying the transmit power, modulation and coding;\n-\tsupport for SL discontinuous reception (SL DRX) to enable UE power saving.\nAssociation of transport channels to physical channels is described in TS 38.202 [20].\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "5.6\tAccess to Shared Spectrum",
                    "description": "",
                    "summary": "",
                    "text_content": "",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": [
                        {
                            "title": "5.6.1\tOverview",
                            "text_content": "NR Radio Access operating with shared spectrum channel access can operate in different modes where either PCell, PSCell, or SCells can be in shared spectrum and an SCell may or may not be configured with uplink. The applicable deployment scenarios are described in Annex B.3.\nThe gNB performs channel access mode procedures as described in TS 37.213 [37]. The gNB and the UE may apply Listen-Before-Talk (LBT) before performing a transmission on a cell configured with shared spectrum channel access. When LBT is applied, the transmitter listens to/senses the channel to determine whether the channel is free or busy and performs transmission only if the channel is sensed free.\nWhen the UE detects consistent uplink LBT failures, it takes actions as specified in TS 38.321 [6]. The detection is per Bandwidth Part (BWP) and based on all uplink transmissions within this BWP. When consistent uplink LBT failures are detected on SCell(s), the UE reports this to the corresponding gNB (MN for MCG, SN for SCG) via MAC CE on a different serving cell than the SCell(s) where the failures were detected. If no resources are available to transmit the MAC CE, a Scheduling Request (SR) can be transmitted by the UE. When consistent uplink LBT failures are detected on SpCell, the UE switches to another UL BWP with configured RACH resources on that cell, initiates RACH, and reports the failure via MAC CE. When multiple UL BWPs are available for switching, it is up to the UE implementation which one to select. For PSCell, if consistent uplink LBT failures are detected on all the UL BWPs with configured RACH resources, the UE declares SCG RLF and reports the failure to the MN via SCGFailureInformation. For PCell, if the uplink LBT failures are detected on all the UL BWP(s) with configured RACH resources, the UE declares RLF.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "5.6.2\tChannel Access Priority Classes",
                            "text_content": "The Channel Access Priority Classes (CAPC) of radio bearers and MAC CEs are either fixed or configurable for operation in FR1:\n-\tFixed to the lowest priority for the padding BSR and recommended bit rate MAC CEs;\n-\tFixed to the highest priority for SRB0, SRB1, SRB3 and other MAC CEs;\n-\tConfigured by the gNB for SRB2 and DRB.\nWhen choosing the CAPC of a DRB, the gNB takes into account the 5QIs of all the QoS flows multiplexed in that DRB while considering fairness between different traffic types and transmissions. Table 5.6.2-1 below shows which CAPC should be used for which standardized 5QIs i.e. which CAPC to use for a given QoS flow.\nNOTE:\tA QoS flow corresponding to a non-standardized 5QI (i.e. operator specific 5QI) should use the CAPC of the standardized 5QI which best matches the QoS characteristics of the non-standardized 5QI.\nTable 5.6.2-1: Mapping between Channel Access Priority Classes and 5QI\n\nWhen performing Type 1 LBT for the transmission of an uplink TB (see TS 37.213 [37], clause 4.2.1.1) and when the CAPC is not indicated in the DCI, the UE shall select the CAPC as follows:\n-\tIf only MAC CE(s) are included in the TB, the highest priority CAPC of those MAC CE(s) is used; or\n-\tIf CCCH SDU(s) are included in the TB, the highest priority CAPC is used; or\n-\tIf DCCH SDU(s) are included in the TB, the highest priority CAPC of the DCCH(s) is used; or\n-\tThe lowest priority CAPC of the logical channel(s) with MAC SDU multiplexed in the TB is used otherwise.\n",
                            "figures_meta_data": [],
                            "tables": [
                                {
                                    "description": "Table 5.6.2-1: Mapping between Channel Access Priority Classes and 5QI",
                                    "table number": 3,
                                    "summary": "",
                                    "name": ""
                                }
                            ]
                        }
                    ]
                },
                {
                    "title": "5.7\tSidelink",
                    "description": "",
                    "summary": "",
                    "text_content": "",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": [
                        {
                            "title": "5.7.1\tGeneral",
                            "text_content": "Sidelink supports UE-to-UE direct communication using the sidelink resource allocation modes, physical-layer signals/channels, and physical layer procedures below.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "5.7.2\tSidelink resource allocation modes",
                            "text_content": "Two sidelink resource allocation modes are supported: mode 1 and mode 2. In mode 1, the sidelink resource allocation is provided by the network. In mode 2, UE decides the SL transmission resources in the resource pool(s).\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "5.7.3\tPhysical sidelink channels and signals",
                            "text_content": "Physical Sidelink Control Channel (PSCCH) indicates resource and other transmission parameters used by a UE for PSSCH. PSCCH transmission is associated with a DM-RS.\nPhysical Sidelink Shared Channel (PSSCH) transmits the TBs of data themselves, and control information for HARQ procedures and CSI feedback triggers, etc. At least 6 OFDM symbols within a slot are used for PSSCH transmission. PSSCH transmission is associated with a DM-RS and may be associated with a PT-RS.\nPhysical Sidelink Feedback Channel (PSFCH) carries HARQ feedback over the sidelink from a UE which is an intended recipient of a PSSCH transmission to the UE which performed the transmission. PSFCH sequence is transmitted in one PRB repeated over two OFDM symbols near the end of the sidelink resource in a slot.\nThe Sidelink synchronization signal consists of sidelink primary and sidelink secondary synchronization signals (S-PSS, S-SSS), each occupying 2 symbols and 127 subcarriers. Physical Sidelink Broadcast Channel (PSBCH) occupies 9 and 7 symbols for normal and extended CP cases respectively, including the associated DM-RS.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "5.7.4\tPhysical layer procedures for sidelink",
                            "text_content": "Sidelink HARQ feedback uses PSFCH and can be operated in one of two options. In one option, which can be configured for unicast and groupcast, PSFCH transmits either ACK or NACK using a resource dedicated to a single PSFCH transmitting UE. In another option, which can be configured for groupcast, PSFCH transmits NACK, or no PSFCH signal is transmitted, on a resource that can be shared by multiple PSFCH transmitting UEs. The latter option is not supported for sidelink in unlicensed spectrum.\nIn sidelink resource allocation mode 1, a UE which received PSFCH can report sidelink HARQ feedback to gNB via PUCCH or PUSCH.\nFor in-coverage operation, the power spectral density of the sidelink transmissions can be adjusted based on the pathloss from the gNB.\nFor unicast, the power spectral density of some sidelink transmissions can be adjusted based on the pathloss between the two communicating UEs.\nFor unicast, channel state information reference signal (CSI-RS) is supported for CSI measurement and reporting in sidelink. A CSI report is carried in a sidelink MAC CE.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "5.7.5\tPhysical layer measurement definition",
                            "text_content": "For measurement on the sidelink, the following UE measurement quantities are supported:\n-\tPSBCH reference signal received power (PSBCH RSRP);\n-\tPSSCH reference signal received power (PSSCH-RSRP);\n-\tPSСCH reference signal received power (PSCCH-RSRP);\n-\tSidelink received signal strength indicator (SL RSSI);\n-\tSidelink channel occupancy ratio (SL CR);\n-\tSidelink channel busy ratio (SL CBR).\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "5.7.6\tSidelink Reference Signal and Measurements for Positioning",
                            "text_content": "The Sidelink Positioning Reference Signal (SL-PRS) is defined to facilitate Ranging/Sidelink positioning methods, such as SL-TOA, SL-TDOA, SL-RTT, SL-AoA, through the following set of measurements SL-PRS RSRP, RSRPP, RTOA, RSTD, Rx-Tx timing difference and AoA as described in TS 38.305 [42].\n",
                            "figures_meta_data": [],
                            "tables": []
                        }
                    ]
                }
            ]
        },
        {
            "title": "6\tLayer 2",
            "description": "",
            "summary": "",
            "tables": [],
            "figures_meta_data": [],
            "subsections": [
                {
                    "title": "6.1\tOverview",
                    "description": "",
                    "summary": "",
                    "text_content": "The layer 2 of NR is split into the following sublayers: Medium Access Control (MAC), Radio Link Control (RLC), Packet Data Convergence Protocol (PDCP) and Service Data Adaptation Protocol (SDAP). The two figures below depict the Layer 2 architecture for downlink and uplink, where:\n-\tThe physical layer offers to the MAC sublayer transport channels;\n-\tThe MAC sublayer offers to the RLC sublayer logical channels;\n-\tThe RLC sublayer offers to the PDCP sublayer RLC channels;\n-\tThe PDCP sublayer offers to the SDAP sublayer radio bearers;\n-\tThe SDAP sublayer offers to 5GC QoS flows;\n-\tComp. refers to header compression or uplink data compression;\n-\tSegm. refers to segmentation;\n-\tControl channels (BCCH, PCCH are not depicted for clarity).\nNOTE:\tThe gNB may not be able to guarantee that a L2 buffer overflow will never occur. If such overflow occurs, the UE may discard packets in the L2 buffer.\nFigure 6.1-1 illustrates the downlink Layer 2 structure of a telecommunication network, showcasing the organization of data packets as they travel from the base station to the user equipment. The figure depicts the various components involved, including the baseband unit (BBU), home subscriber station (HSS), and the packet data network (PDN). The downlink path is shown with multiple layers, each representing a different stage of processing and transmission. The figure emphasizes the importance of efficient data routing and signal processing in maintaining high-speed and reliable communication.\nFigure 6.1-1: Downlink Layer 2 Structure\nFigure 6.1-2 illustrates the uplink Layer 2 structure in a telecommunication network, focusing on the aggregation of data from various devices before transmission to the core network. The figure showcases the role of the access switch, which aggregates traffic from multiple access ports, and the distribution switch, which further aggregates traffic from multiple access switches. The core switch is depicted at the top, receiving aggregated traffic from the distribution switch and forwarding it to the core network. This structure ensures efficient data processing and transmission, optimizing network performance and capacity.\nFigure 6.1-2: Uplink Layer 2 Structure\nRadio bearers are categorized into two groups: data radio bearers (DRB) for user plane data and signalling radio bearers (SRB) for control plane data.\nFor IAB, the Layer 2 of NR includes: MAC, RLC, Backhaul Adaptation Protocol (BAP), PDCP and optionally SDAP. The BAP sublayer supports routing across the IAB topology and traffic mapping to BH RLC channels for enforcement of traffic prioritization and QoS.\nFigures 6.1-3 below depicts the Layer-2 architecture for downlink on the IAB-donor. Figures 6.1-4 and 6.1-5 depict the Layer-2 architecture for downlink and uplink on the IAB-node, where the BAP sublayer offers routing functionality and mapping to BH RLC channels.\nFigure 6.1 illustrates the downlink (DL) Layer 2 structure for the user plane at the Internet Access Broker (IAB) donor. The figure showcases the various components involved in the process, including the IAB donor, the IAB, the Access Concentrator (AC), and the User Equipment (UE). The IAB donor is responsible for providing the user plane to the IAB, while the IAB manages the user plane. The AC is responsible for providing the user plane to the UE, and the UE is the end-user device that receives the user plane. The figure also shows the various interfaces between these components, such as the IAB-donor interface, the IAB-IAC interface, and the IAB-UE interface. This structure allows for efficient and secure communication between the IAB donor, IAB, AC, and UE, ensuring a smooth and reliable user experience.\nFigure 6.1-3: DL L2-structure for user plane at IAB-donor\nFigure 6.1-4 illustrates the detailed data-link layer structure at an Intermediate Access Node (IAB) in a telecommunication network. The figure showcases the various components involved in the process, including the Data Link Control (DLL) and the Intermediate System to Intermediate System (IS-IS) routing protocol. The diagram emphasizes the role of the IAB in forwarding packets and managing the network's connectivity. The figure also highlights the importance of the LLC (Logical Link Control) and the MAC (Media Access Control) protocols in ensuring efficient data transmission and access control within the network.\nFigure 6.1-4: DL L2-structure at IAB-node\nFigure 6.1-5 illustrates the Upper Layer 2 structure at an Intermediate Access Point (IAB) node, showcasing the detailed organization of the network elements involved in the transmission of data. The figure presents a comprehensive view of the various components, including the IAB node, Access Concentrator (AC), and the Radio Access Network (RAN). The IAB node serves as a central hub, managing the flow of data between the Access Concentrator and the Radio Access Network. The Access Concentrator is responsible for aggregating and forwarding data to the IAB node, while the Radio Access Network handles the actual transmission of data to the end-user devices. The figure also highlights the importance of synchronization and timing in maintaining the integrity of the data transmission, with the use of the Network Time Protocol (NTP) and the Precision Time Protocol (PTP) being crucial for accurate timing. Overall, the figure provides a detailed overview of the Upper Layer 2 structure at an IAB node, emphasizing the importance of synchronization and timing in maintaining the efficiency and reliability of the network.\nFigure 6.1-5: UL L2-structure at IAB-node\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "6.2\tMAC Sublayer",
                    "description": "",
                    "summary": "",
                    "text_content": "",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": [
                        {
                            "title": "6.2.1\tServices and Functions",
                            "text_content": "The main services and functions of the MAC sublayer include:\n-\tMapping between logical channels and transport channels;\n-\tMultiplexing/demultiplexing of MAC SDUs belonging to one or different logical channels into/from transport blocks (TB) delivered to/from the physical layer on transport channels;\n-\tScheduling information reporting;\n-\tError correction through HARQ (one HARQ entity per cell in case of CA);\n-\tPriority handling between UEs by means of dynamic scheduling;\n-\tPriority handling between logical channels of one UE by means of logical channel prioritisation;\n-\tPriority handling between overlapping resources of one UE;\n-\tPadding.\nA single MAC entity can support multiple numerologies, transmission timings and cells. Mapping restrictions in logical channel prioritisation control which numerology(ies), cell(s), and transmission timing(s) a logical channel can use (see clause 16.1.2).\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "6.2.2\tLogical Channels",
                            "text_content": "Different kinds of data transfer services as offered by MAC. Each logical channel type is defined by what type of information is transferred. Logical channels are classified into two groups: Control Channels and Traffic Channels. Control channels are used for the transfer of control plane information only:\n-\tBroadcast Control Channel (BCCH): a downlink channel for broadcasting system control information.\n-\tPaging Control Channel (PCCH): a downlink channel that carries paging messages.\n-\tCommon Control Channel (CCCH): channel for transmitting control information between UEs and network. This channel is used for UEs having no RRC connection with the network.\n-\tDedicated Control Channel (DCCH): a point-to-point bi-directional channel that transmits dedicated control information between a UE and the network. Used by UEs having an RRC connection.\nTraffic channels are used for the transfer of user plane information only:\n-\tDedicated Traffic Channel (DTCH): point-to-point channel, dedicated to one UE, for the transfer of user information. A DTCH can exist in both uplink and downlink.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "6.2.3\tMapping to Transport Channels",
                            "text_content": "In Downlink, the following connections between logical channels and transport channels exist:\n-\tBCCH can be mapped to BCH;\n-\tBCCH can be mapped to DL-SCH;\n-\tPCCH can be mapped to PCH;\n-\tCCCH can be mapped to DL-SCH;\n-\tDCCH can be mapped to DL-SCH;\n-\tDTCH can be mapped to DL-SCH.\nIn Uplink, the following connections between logical channels and transport channels exist:\n-\tCCCH can be mapped to UL-SCH;\n-\tDCCH can be mapped to UL- SCH;\n-\tDTCH can be mapped to UL-SCH.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "6.2.4\tHARQ",
                            "text_content": "The HARQ functionality ensures delivery between peer entities at Layer 1. A single HARQ process supports one TB when the physical layer is not configured for downlink/uplink spatial multiplexing, and when the physical layer is configured for downlink/uplink spatial multiplexing, a single HARQ process supports one or multiple TBs.\n",
                            "figures_meta_data": [],
                            "tables": []
                        }
                    ]
                },
                {
                    "title": "6.3\tRLC Sublayer",
                    "description": "",
                    "summary": "",
                    "text_content": "",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": [
                        {
                            "title": "6.3.1\tTransmission Modes",
                            "text_content": "The RLC sublayer supports three transmission modes:\n-\tTransparent Mode (TM);\n-\tUnacknowledged Mode (UM);\n-\tAcknowledged Mode (AM).\nThe RLC configuration is per logical channel with no dependency on numerologies and/or transmission durations, and ARQ can operate on any of the numerologies and/or transmission durations the logical channel is configured with.\nFor SRB0, paging and broadcast system information, TM mode is used. For other SRBs AM mode used. For DRBs, either UM or AM mode are used.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "6.3.2\tServices and Functions",
                            "text_content": "The main services and functions of the RLC sublayer depend on the transmission mode and include:\n-\tTransfer of upper layer PDUs;\n-\tSequence numbering independent of the one in PDCP (UM and AM);\n-\tError Correction through ARQ (AM only);\n-\tSegmentation (AM and UM) and re-segmentation (AM only) of RLC SDUs;\n-\tReassembly of SDU (AM and UM);\n-\tDuplicate Detection (AM only);\n-\tRLC SDU discard (AM and UM);\n-\tRLC re-establishment;\n-\tProtocol error detection (AM only).\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "6.3.3\tARQ",
                            "text_content": "The ARQ within the RLC sublayer has the following characteristics:\n-\tARQ retransmits RLC SDUs or RLC SDU segments based on RLC status reports;\n-\tPolling for RLC status report is used when needed by RLC;\n-\tRLC receiver can also trigger RLC status report after detecting a missing RLC SDU or RLC SDU segment.\n",
                            "figures_meta_data": [],
                            "tables": []
                        }
                    ]
                },
                {
                    "title": "6.4\tPDCP Sublayer",
                    "description": "",
                    "summary": "",
                    "text_content": "",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": [
                        {
                            "title": "6.4.1\tServices and Functions",
                            "text_content": "The main services and functions of the PDCP sublayer include:\n-\tTransfer of data (user plane or control plane);\n-\tMaintenance of PDCP SNs;\n-\tHeader compression and decompression using the ROHC protocol;\n-\tHeader compression and decompression using EHC protocol;\n-\tCompression and decompression of uplink PDCP SDUs: DEFLATE based UDC only;\n-\tCiphering and deciphering;\n-\tIntegrity protection and integrity verification;\n-\tTimer based SDU discard;\n-\tFor split bearers, routing;\n-\tDuplication;\n-\tReordering and in-order delivery;\n-\tOut-of-order delivery;\n-\tDuplicate discarding.\nSince PDCP does not allow COUNT to wrap around in DL and UL, it is up to the network to prevent it from happening (e.g. by using a release and add of the corresponding radio bearer or a full configuration).\n",
                            "figures_meta_data": [],
                            "tables": []
                        }
                    ]
                },
                {
                    "title": "6.5\tSDAP Sublayer",
                    "description": "",
                    "summary": "",
                    "text_content": "The main services and functions of SDAP include:\n-\tMapping between a QoS flow and a data radio bearer;\n-\tMarking QoS flow ID (QFI) in both DL and UL packets.\nA single protocol entity of SDAP is configured for each individual PDU session.\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "6.6\tL2 Data Flow",
                    "description": "",
                    "summary": "",
                    "text_content": "An example of the Layer 2 Data Flow is depicted on Figure 6.6-1, where a transport block is generated by MAC by concatenating two RLC PDUs from RBx and one RLC PDU from RBy. The two RLC PDUs from RBx each corresponds to one IP packet (n and n+1) while the RLC PDU from RBy is a segment of an IP packet (m).\nNOTE:\tH depicts the headers and subheaders.\nFigure 6.6-1 illustrates a data flow example within a telecommunication system, showcasing the various components involved in transmitting and processing information. The figure depicts a network consisting of multiple nodes, each representing a different entity such as a user, server, or network device. These nodes are interconnected through a series of lines, which symbolize the data paths that information takes as it moves from one node to another.\n\nThe figure also includes arrows, indicating the direction of data flow and the flow of control signals. For instance, the arrow pointing from a user to a server suggests that the user is sending a request to the server, while the arrow pointing from the server to the user indicates the server's response. The presence of multiple arrows between nodes highlights the complex interactions and concurrent data exchanges that occur within a network.\n\nMoreover, the figure includes a legend that identifies the different types of nodes and lines, providing a clear understanding of the system's architecture and the roles of each component. This legend is crucial for interpreting the data flow accurately and for identifying potential bottlenecks or areas of interest within the network.\n\nIn summary, Figure 6.6-1 provides a comprehensive view of a telecommunication system's data flow, showcasing the\nFigure 6.6-1: Data Flow Example\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "6.7\tCarrier Aggregation",
                    "description": "",
                    "summary": "",
                    "text_content": "In case of CA, the multi-carrier nature of the physical layer is only exposed to the MAC layer for which one HARQ entity is required per serving cell as depicted on Figures 6.7-1 and 6.7-2 below:\n-\tIn both uplink and downlink, there is one independent hybrid-ARQ entity per serving cell and one transport block is generated per assignment/grant per serving cell in the absence of spatial multiplexing. Each transport block and its potential HARQ retransmissions are mapped to a single serving cell.\nFigure 6.7-1 illustrates the Layer 2 structure for Deep Learning (DL) with Channel State Information (CSI) feedback and CoMP (Coordinated Multi-Point) with CA (Coordinated Beamforming) configured. The figure showcases the network architecture, including the eNB (Evolved Node B), eNodeB, and the UE (User Equipment). The diagram highlights the role of the eNB in processing and forwarding data, as well as the UE's role in receiving and processing information. The figure also demonstrates the use of CoMP and CA to improve signal quality and coverage, with the use of multiple antennas and beamforming techniques. The figure is a valuable resource for understanding the complex interactions and optimizations involved in modern wireless networks.\nFigure 6.7-1: Layer 2 Structure for DL with CA configured\nFigure 6.7-2 illustrates the Layer 2 structure for the uplink (UL) with channel aggregation (CA) configured, showcasing the various components involved in the process. The figure displays the network elements such as the central office (CO), distribution frame (D-F), and remote terminal unit (RTU), which are essential for signal transmission and reception. The presence of channel bonding and traffic engineering (TE) techniques is evident, as they are crucial for optimizing network performance and capacity. The figure also highlights the importance of synchronization and timing management in maintaining a reliable and efficient communication system.\nFigure 6.7-2: Layer 2 Structure for UL with CA configured\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "6.8\tDual Connectivity",
                    "description": "",
                    "summary": "",
                    "text_content": "When the UE is configured with SCG, the UE is configured with two MAC entities: one MAC entity for the MCG and one MAC entity for the SCG. Further details of DC operation can be found in TS 37.340 [21].\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "6.9\tSupplementary Uplink",
                    "description": "",
                    "summary": "",
                    "text_content": "In case of Supplementary Uplink (SUL, see TS 38.101-1 [18]), the UE is configured with 2 ULs for one DL of the same cell, and uplink transmissions on those two ULs are controlled by the network to avoid overlapping PUSCH/PUCCH transmissions in time. Overlapping transmissions on PUSCH are avoided through scheduling while overlapping transmissions on PUCCH are avoided through configuration (PUCCH can only be configured for only one of the 2 ULs of the cell). In addition, initial access is supported in each of the uplink (see clause 9.2.6). An example of SUL is given in Annex B.\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "6.10\tBandwidth Adaptation",
                    "description": "",
                    "summary": "",
                    "text_content": "With Bandwidth Adaptation (BA), the receive and transmit bandwidth of a UE need not be as large as the bandwidth of the cell and can be adjusted: the width can be ordered to change (e.g. to shrink during period of low activity to save power); the location can move in the frequency domain (e.g. to increase scheduling flexibility); and the subcarrier spacing can be ordered to change (e.g. to allow different services). A subset of the total cell bandwidth of a cell is referred to as a Bandwidth Part (BWP) and BA is achieved by configuring the UE with BWP(s) and telling the UE which of the configured BWPs is currently the active one.\nFigure 6.10-1 below describes a scenario where 3 different BWPs are configured:\n-\tBWP1 with a width of 40 MHz and subcarrier spacing of 15 kHz;\n-\tBWP2 with a width of 10 MHz and subcarrier spacing of 15 kHz;\n-\tBWP3 with a width of 20 MHz and subcarrier spacing of 60 kHz.\nFigure 6.10-1 illustrates a basic example of a Business Associate (BA) in a healthcare scenario, highlighting the flow of Protected Health Information (PHI) and the BA's role in ensuring compliance with regulations such as HIPAA. The figure depicts the BA as an intermediary between healthcare providers and other entities, with arrows indicating the direction of PHI transmission. The BA's responsibilities include securing the data, ensuring proper authorization, and adhering to data usage policies. The figure emphasizes the importance of clear communication and adherence to protocols to maintain the confidentiality and integrity of PHI.\nFigure 6.10-1: BA Example\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "6.11\tBackhaul Adaptation Protocol Sublayer",
                    "description": "",
                    "summary": "",
                    "text_content": "",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": [
                        {
                            "title": "6.11.1\tServices and Functions",
                            "text_content": "The main service and functions of the BAP sublayer include:\n-\tTransfer of data;\n-\tRouting of packets to next hop;\n-\tDetermination of BAP destination and BAP path for packets from upper layers;\n-\tDetermination of egress BH RLC channels for packets routed to next hop;\n-\tDifferentiating traffic to be delivered to upper layers from traffic to be delivered to egress link;\n-\tFlow control feedback and polling signalling;\n-\tBH RLF detection indication, BH RLF recovery indication, and BH RLF indication;\n-\tBAP header rewriting.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "6.11.2\tTraffic Mapping from Upper Layers to Layer-2",
                            "text_content": "In upstream direction, the IAB-donor-CU configures the IAB-node with mappings between upstream F1 and non-F1 traffic originated at the IAB-node, and the appropriate BAP routing ID, next-hop BAP address and BH RLC channel. A specific mapping is configured:\n-\tfor each F1-U GTP-U tunnel;\n-\tfor non-UE associated F1AP messages;\n-\tfor UE-associated F1AP messages;\n-\tfor non-F1 traffic.\nMultiple mappings can contain the same BH RLC channel and/or next-hop BAP address and/or BAP routing ID. In case the IAB-MT is NR-dual-connected (SA mode only), the mapping may include two separate BH RLC channels, where the two BH RLC channels are established toward different parent nodes.\nIn case the IAB-node is configured with multiple IP addresses for F1-C on the NR leg, multiple mappings can be configured for non-UE-associated F1AP messages or UE-associated F1AP messages. The appropriate mapping is selected based on the IAB-node's implementation.\nThese traffic mapping configurations are performed via F1AP. For a boundary IAB-node, the traffic mapping configuration includes information that allows the boundary IAB-node to determine the IAB topology the mapping applies to.\nDuring IAB-node integration, a default BH RLC channel and a default BAP routing ID may be configured via RRC, which can be used for non-F1-U traffic. These default configurations may be updated during topology adaptation scenarios as discussed in TS 38.401 [4].\nIn downstream direction, traffic mapping occurs internal to the IAB-donor. Transport for IAB-donors that use split-gNB architecture is handled in TS 38.401 [4].\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "6.11.3\tRouting, BAP Header Rewriting and BH-RLC-channel Mapping on BAP sublayer",
                            "text_content": "Figure 6.11.3-1 illustrates the process of routing and Base-band Loop-back Control (RLC) channel selection on a BAP (Base Antenna Point) sublayer in a telecommunication network. The figure depicts the various steps involved in selecting the appropriate RLC channel for data transmission, including the use of routing tables and the selection of the best path based on factors such as signal strength and quality. The figure also shows how the BAP sublayer interacts with other layers in the network stack, such as the MAC (Media Access Control) and PHY (Physical Layer) sublayers, to ensure efficient and reliable data transmission.\nFigure 6.11.3-1: Routing and BH RLC channel selection on BAP sublayer\nRouting on BAP sublayer uses the BAP routing ID, which is configured by the IAB-donor-CU. The BAP routing ID consists of BAP address and BAP path ID. The BAP address is used for the following purposes:\n1.\tDetermination if a packet has reached the destination node, i.e. IAB-node or IAB-donor-DU, on BAP sublayer. This is the case if the BAP address in the packet's BAP header matches the BAP address configured via RRC on the IAB-node, or via F1AP on the IAB-donor-DU. For a dual-connected boundary IAB-node that is configured with two BAP addresses, the BAP address in the packet's BAP header is matched with the BAP address configured by the CU of the IAB topology, where the packet has been received.\n2.\tDetermination of the next-hop node for packets that have not reached their destination. This applies to packets arriving from a prior hop on BAP sublayer or that have been received from IP layer.\nFor packets arriving from a prior hop or from upper layers, the determination of the next-hop node is based on a routing configuration provided by the IAB-donor-CU via F1AP signalling or a default configuration provided by the IAB-donor-CU via RRC signalling. This F1AP configuration contains the mapping between the BAP routing ID carried in the packet's BAP header and the next-hop node's BAP address.\nTable 6.11.3-1: Routing configuration\n\nThe IAB-node resolves the next-hop BAP address to a physical backhaul link. For this purpose, the IAB-donor-CU provides the IAB-node/IAB-donor-DU with its child-node's BAP address via F1AP, and it provides the IAB-node with its parent-node's BAP address via RRC. For a boundary IAB-node, the routing configuration also indicates the IAB topology it applies to. The BH link to the next-hop node and the next-hop BAP address belong to the IAB topology of the CU that provided the RRC configuration of the BH link to that next-hop node.\nThe IAB-node can receive multiple routing configurations with the same destination BAP address but different BAP path IDs. These routing configurations may resolve to the same or different egress BH links.\nIn case the BH link resolved from the routing entry is considered unavailable for this packet, the IAB-node may perform local rerouting as defined in TS 38.340 [31], i.e., select another BH link by considering only the packet's BAP address or, in some cases, by header rewriting. In this manner, the packet can be delivered via an alternative path as defined in TS 38.340 [31].\nA BH link may be considered unavailable in case the BH link has RLF. A parent link may be considered unavailable after a BH RLF detection indication has been received on this parent link and before a subsequent BH RLF recovery indication has been received on the same parent link. For DL traffic, a BH link may be considered unavailable for BAP PDUs carrying a certain BAP routing ID due to congestion derived from flow-control feedback information related to this BAP routing ID, as defined in TS 38.340 [31].\nFor a boundary IAB-node, the routing configuration may carry information on the IAB topology the configuration applies to.\nThe IAB-node may rewrite the BAP routing ID in the packet's BAP header under the following circumstances:\n-\tA packet is routed between two IAB topologies via a boundary IAB-node as defined in TS 38.401[31]. In this case, the BAP routing ID carried by the received BAP PDU is allocated by the IAB-donor-CU of the ingress IAB topology, while the BAP routing ID carried by the BAP PDU after header rewriting is allocated by the IAB-donor-CU of the egress IAB topology.\n-\tAn upstream packet is locally re-routed to a different IAB-donor-DU than indicated by the BAP address in the BAP header of the received packet. The rewritten BAP header carries the BAP address of the alternative IAB-donor-DU and the BAP path ID for a path to this alternative IAB-donor-DU. BAP header rewriting for upstream inter-IAB-donor-DU local rerouting is only applied if neither routing nor local re-routing without header rewriting resolve to an available egress BH link.\nFor packets that are routed between two IAB topologies via a boundary node, the BAP header rewriting configuration is provided via F1AP, and it includes the ingress BAP routing ID, the egress BAP routing ID, and it indicates the egress IAB topology:\nTable 6.11.3-2a: BAP header rewriting configuration\n\nFor upstream packets that are locally re-routed to a different IAB-donor-DU, the BAP header is rewritten with a BAP routing ID contained in the routing entry that was selected for re-routing.\nDetails of BAP header rewriting are defined in TS 38.340 [31].\nWhen routing a packet from an ingress to an egress BH link, the IAB-node derives the egress BH RLC channel on the egress BH link through an F1AP-configured mapping from the BH RLC channel used on the ingress BH link. The BH RLC channel IDs used for ingress and egress BH RLC channels are generated by the IAB-donor-CU. Since the BH RLC channel ID only has link-local scope, the mapping configurations also include the BAP addresses of prior and next hop:\nTable 6.11.3-2: BH RLC channel mapping configuration\n\nFor a boundary IAB-node, the BH RLC channel mapping configuration may also include indicators for the IAB topology of the ingress and of the egress BH link.\nThe IAB-node resolves the BH RLC channel IDs from logical channel IDs based on the configuration by the IAB-donor-CU. The IAB-MT obtains the BH RLC channel ID in the RRC configuration of the corresponding logical channel. The IAB-DU obtains the BH RLC channel ID in the F1AP configuration of the BH RLC channel.\n",
                            "figures_meta_data": [],
                            "tables": [
                                {
                                    "description": "Table 6.11.3-1: Routing configuration",
                                    "table number": 4,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 6.11.3-2a: BAP header rewriting configuration",
                                    "table number": 5,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table 6.11.3-2: BH RLC channel mapping configuration",
                                    "table number": 6,
                                    "summary": "",
                                    "name": ""
                                }
                            ]
                        }
                    ]
                },
                {
                    "title": "6.12\tMultiple Transmit/Receive Point Operation",
                    "description": "",
                    "summary": "",
                    "text_content": "In Multiple Transmit/Receive Point (multi-TRP) operation, a serving cell can schedule the UE from two TRPs, providing better coverage, reliability and/or data rates for PDSCH, PDCCH, PUSCH, and PUCCH.\nThere are two different operation modes to schedule multi-TRP PDSCH transmissions: single-DCI and multi-DCI. For both modes, control of uplink and downlink operation can be done by physical layer and MAC layer, within the configuration provided by the RRC layer. In single-DCI mode, the UE is scheduled by the same DCI for both TRPs and in multi-DCI mode, the UE is scheduled by independent DCIs from each TRP.\nThere are two different operation modes for multi-TRP PDCCH: PDCCH repetition as in Clause 5.2.3 and Single Frequency Network (SFN) based PDCCH transmission. In both modes, the UE can receive two PDCCH transmissions, one from each TRP, carrying the same DCI. In PDCCH repetition mode, the UE can receive the two PDCCH transmissions carrying the same DCI from two linked search spaces each associated with a different CORESET. In SFN based PDCCH transmission mode, the UE can receive the two PDCCH transmissions carrying the same DCI from a single search space/CORESET using different TCI states.\nFor multi-TRP PUSCH repetition, according to indications in a single DCI or in a semi-static configured grant provided over RRC, the UE performs PUSCH transmission of the same contents toward two TRPs with corresponding beam directions associated with different spatial relations. For multi-TRP PUCCH repetition, the UE performs PUCCH transmission of the same contents toward two TRPs with corresponding beam directions associated with different spatial relations.\nFor inter-cell multi-TRP operation, for multi-DCI PDSCH transmission, one or more TCI states can be associated with SSB with a PCI different from the serving cell PCI. The activated TCI states can be associated with at most one PCI different from the serving cell PCI at a time.\nFor inter-cell and intra-cell multi-DCI multi-TRP operation, up to two TAGs with associated TAG IDs can be configured per serving cell. Each UL/Joint TCI state is associated with a TAG ID and the UE applies the timing advance of the TAG ID associated with the UL/joint TCI state utilized for UL transmission.\nFor single-DCI multi-TRP Simultaneous Transmission with Multi-Panel (STxMP) Spatial Domain Multiplexing (SDM) PUSCH transmission, different layers of one PUSCH are separately transmitted towards two TRPs. For single-DCI multi-TRP STxMP SFN PUSCH transmission, same layers of one PUSCH are transmitted towards two TRPs. For multi-DCI based multi-TRP STxMP PUSCH+PUSCH transmission, two PUSCHs are transmitted towards two TRPs. For single-DCI multi-TRP STxMP SFN PUCCH transmission, one PUCCH is transmitted towards two TRPs.\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                }
            ]
        },
        {
            "title": "7\tRRC",
            "description": "",
            "summary": "",
            "tables": [],
            "figures_meta_data": [],
            "subsections": [
                {
                    "title": "7.1\tServices and Functions",
                    "description": "",
                    "summary": "",
                    "text_content": "The main services and functions of the RRC sublayer over the Uu interface include:\n-\tBroadcast of System Information related to AS and NAS;\n-\tPaging initiated by 5GC or NG-RAN;\n-\tEstablishment, maintenance and release of an RRC connection between the UE and NG-RAN including:\n-\tAddition, modification and release of carrier aggregation;\n-\tAddition, modification and release of Dual Connectivity in NR or between E-UTRA and NR.\n-\tSecurity functions including key management;\n-\tEstablishment, configuration, maintenance and release of Signalling Radio Bearers (SRBs) and Data Radio Bearers (DRBs);\n-\tMobility functions including:\n-\tHandover and context transfer;\n-\tUE cell selection and reselection and control of cell selection and reselection;\n-\tInter-RAT mobility.\n-\tQoS management functions;\n-\tUE measurement reporting and control of the reporting;\n-\tDetection of and recovery from radio link failure;\n-\tNAS message transfer to/from NAS from/to UE.\nThe sidelink specific services and functions of the RRC sublayer over the Uu interface include:\n-\tConfiguration of sidelink resource allocation via system information or dedicated signalling;\n-\tReporting of UE sidelink information;\n-\tMeasurement configuration and reporting related to sidelink;\n-\tReporting of UE assistance information for SL traffic pattern(s).\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "7.2\tProtocol States",
                    "description": "",
                    "summary": "",
                    "text_content": "RRC supports the following states which can be characterised as follows:\n-\tRRC_IDLE:\n-\tPLMN selection;\n-\tBroadcast of system information;\n-\tCell re-selection mobility;\n-\tPaging for mobile terminated data is initiated by 5GC;\n-\tTransfer of MBS broadcast data to the UE over MRB(s);\n-\tDRX for CN paging configured by NAS.\n-\tRRC_INACTIVE:\n-\tPLMN selection;\n-\tBroadcast of system information;\n-\tCell re-selection mobility;\n-\tPaging is initiated by NG-RAN (RAN paging);\n-\tRAN-based notification area (RNA) is managed by NG- RAN;\n-\tDRX for RAN paging configured by NG-RAN;\n-\t5GC - NG-RAN connection (both C/U-planes) is established for UE;\n-\tThe UE Inactive AS context is stored in NG-RAN and the UE;\n-\tNG-RAN knows the RNA which the UE belongs to;\n-\tTransfer of MBS broadcast data to the UE over MRB(s);\n-\tTransfer of unicast data and/or signalling to/from the UE over radio bearers configured for SDT.\n-\tRRC_CONNECTED:\n-\t5GC - NG-RAN connection (both C/U-planes) is established for UE;\n-\tThe UE AS context is stored in NG-RAN and the UE;\n-\tNG-RAN knows the cell which the UE belongs to;\n-\tTransfer of unicast data to/from the UE;\n-\tTransfer of MBS multicast/broadcast data to the UE over MRB(s);\n-\tNetwork controlled mobility including measurements.\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "7.3\tSystem Information Handling",
                    "description": "",
                    "summary": "",
                    "text_content": "",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": [
                        {
                            "title": "7.3.1\tOverview",
                            "text_content": "System Information (SI) consists of a MIB and a number of SIBs, which are divided into Minimum SI and Other SI:\n-\tMinimum SI comprises basic information required for initial access and information for acquiring any other SI. Minimum SI consists of:\n-\tMIB contains cell barred status information and essential physical layer information of the cell required to receive further system information, e.g. CORESET#0 configuration. MIB is periodically broadcast on BCH.\n-\tSIB1 defines the scheduling of other system information blocks and contains information required for initial access. SIB1 is also referred to as Remaining Minimum SI (RMSI) and is periodically broadcast on DL-SCH or sent in a dedicated manner on DL-SCH to UEs in RRC_CONNECTED.\n-\tOther SI encompasses all SIBs not broadcast in the Minimum SI. Those SIBs can either be periodically broadcast on DL-SCH, broadcast on-demand on DL-SCH (i.e. upon request from UEs in RRC_IDLE, RRC_INACTIVE, or RRC_CONNECTED), or sent in a dedicated manner on DL-SCH to UEs in RRC_CONNECTED (i.e., upon request, if configured by the network, from UEs in RRC_CONNECTED or when the UE has an active BWP with no common search space configured or when the UE configured with inter cell beam management is receiving DL-SCH from a TRP with PCI different from serving cell's PCI). Other SI consists of:\n-\tSIB2 contains cell re-selection information, mainly related to the serving cell;\n-\tSIB3 contains information about the serving frequency and intra-frequency neighbouring cells relevant for cell re-selection (including cell re-selection parameters common for a frequency as well as cell specific re-selection parameters);\n-\tSIB4 contains information about other NR frequencies and inter-frequency neighbouring cells relevant for cell re-selection (including cell re-selection parameters common for a frequency as well as cell specific re-selection parameters), which can also be used for NR idle/inactive measurements;\n-\tSIB5 contains information about E-UTRA frequencies and E-UTRA neighbouring cells relevant for cell re-selection (including cell re-selection parameters common for a frequency as well as cell specific re-selection parameters);\n-\tSIB6 contains an ETWS primary notification;\n-\tSIB7 contains an ETWS secondary notification;\n-\tSIB8 contains a CMAS warning notification;\n-\tSIB9 contains information related to GPS time and Coordinated Universal Time (UTC);\n-\tSIB10 contains the Human-Readable Network Names (HRNN) of the NPNs listed in SIB1;\n-\tSIB11 contains information related to idle/inactive measurements;\n-\tSIB15 contains information related to disaster roaming;\n-\tSIB16 contains slice-based cell reselection information;\n-\tSIB17 contains information related to TRS configuration for UEs in RRC_IDLE/RRC_INACTIVE;\n-\tSIBpos contains positioning assistance data as defined in TS 37.355 [43] and TS 38.331 [12];\n-\tSIB18 contains information related to the Group IDs for Network selection (GINs) associated with SNPNs listed in SIB1.\n-\tSIB19 in TN contains NTN-specific parameters for NTN neighbour cells as defined in TS 38.331 [12].\nFor sidelink, Other SI also includes:\n-\tSIB12 contains information related to NR sidelink communication;\n-\tSIB13 contains information related to SystemInformationBlockType21 for V2X sidelink communication as specified in TS 36.331 clause 5.2.2.28 [29];\n-\tSIB14 contains information related to SystemInformationBlockType26 for V2X sidelink communication as specified in TS 36.331 clause 5.2.2.33 [29];\n-\tSIB23 contains information related to ranging and sidelink positioning.\nFor non-terrestrial network, Other SI also includes:\n-\tSIB19 contains NTN-specific parameters for serving cell and optionally NTN-specific parameters for neighbour cells as defined in TS 38.331 [12].\n-\tSIB25 contains TN coverage are information as defined in TS 38.331 [12].\nFor MBS broadcast, Other SI also includes:\n-\tSIB20 contains MCCH configuration;\n-\tSIB21 contains information related to service continuity for MBS broadcast reception.\nFor ATG network, Other SI also includes:\n-\tSIB22 contains ATG-specific parameters for serving cell and optionally ATG-specific parameters for neighbour cells as defined in TS 38.331 [12].\nFigure 7.3.1-1 below summarises System Information provisioning.\nFigure 7.3.1 - 1 illustrates the process of system information provisioning, which involves the exchange of data between various components within a telecommunication system. The figure depicts a network architecture with multiple nodes, each responsible for managing and processing information. The nodes communicate with each other through a series of interconnected lines, representing the flow of data. The figure highlights the importance of accurate and timely information provisioning in maintaining the efficiency and reliability of the telecommunication system.\nFigure 7.3.1-1: System Information Provisioning\nFor a cell/frequency that is considered for camping by the UE, the UE is not required to acquire the contents of the minimum SI of that cell/frequency from another cell/frequency layer. This does not preclude the case that the UE applies stored SI from previously visited cell(s).\nIf the UE cannot determine the full contents of the minimum SI of a cell by receiving from that cell, the UE shall consider that cell as barred.\nIn case of BA, the UE only acquires SI on the active BWP.\nIf the UE is configured with inter cell beam management:\n-\tthe UE is not required to acquire the SI from the serving cell while it is receiving DL-SCH from a TRP with PCI different from serving cell's PCI.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "7.3.2\tScheduling",
                            "text_content": "The MIB is mapped on the BCCH and carried on BCH while all other SI messages are mapped on the BCCH, where they are dynamically carried on DL-SCH. The scheduling of SI messages part of Other SI is indicated by SIB1.\nFor UEs in RRC_IDLE and RRC_INACTIVE while SDT procedure is not ongoing (see clause 18), a request for Other SI triggers a random access procedure (see clause 9.2.6) where MSG3 includes the SI request message unless the requested SI is associated to a subset of the PRACH resources, in which case MSG1 is used for indication of the requested Other SI. When MSG1 is used, the minimum granularity of the request is one SI message (i.e. a set of SIBs), one RACH preamble and/or PRACH resource can be used to request multiple SI messages and the gNB acknowledges the request in MSG2. When MSG 3 is used, the gNB acknowledges the request in MSG4.\nFor UEs in RRC_CONNECTED, a request for Other SI may be sent to the network, if configured by the network, in a dedicated manner (i.e., via UL-DCCH) and the granularity of the request is one SIB. The gNB may respond with an RRCReconfiguration including the requested SIB(s). It is a network choice to decide which requested SIBs are delivered in a dedicated or broadcasted manner.\nThe Other SI may be broadcast at a configurable periodicity and for a certain duration. The Other SI may also be broadcast when it is requested by UE in RRC_IDLE/RRC_INACTIVE/RRC_CONNECTED.\nFor a UE to be allowed to camp on a cell it must have acquired the contents of the Minimum SI from that cell. There may be cells in the system that do not broadcast the Minimum SI and where the UE therefore cannot camp.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "7.3.3\tSI Modification",
                            "text_content": "Change of system information (other than for ETWS/CMAS, see clause 16.4) only occurs at specific radio frames, i.e. the concept of a modification period is used. System information may be transmitted a number of times with the same content within a modification period, as defined by its scheduling. The modification period is configured by system information.\nWhen the network changes (some of the) system information, it first notifies the UEs about this change, i.e. this may be done throughout a modification period. In the next modification period, the network transmits the updated system information. Upon receiving a change notification, the UE acquires the new system information from the start of the next modification period. The UE applies the previously acquired system information until the UE acquires the new system information.\n",
                            "figures_meta_data": [],
                            "tables": []
                        }
                    ]
                },
                {
                    "title": "7.4\tAccess Control",
                    "description": "",
                    "summary": "",
                    "text_content": "NG-RAN supports overload and access control functionality such as RACH back off, RRC Connection Reject, RRC Connection Release and UE based access barring mechanisms.\nOne unified access control framework as specified in TS 22.261 [19] applies to all UE states (RRC_IDLE, RRC_INACTIVE and RRC_CONNECTED) for NR. NG-RAN broadcasts barring control information associated with Access Categories and Access Identities (in case of network sharing, the barring control information can be set individually for each PLMN). The UE determines whether an access attempt is authorized based on the barring information broadcast for the selected PLMN, and the selected Access Category and Access Identity(ies) for the access attempt:\n-\tFor NAS triggered requests, NAS determines the Access Category and Access Identity(ies);\n-\tFor AS triggered requests, RRC determines the Access Category while NAS determines the Access Identity(ies).\nThe gNB handles access attempts with establishment causes \"emergency\", \"mps-PriorityAccess\" and \"mcs-PriorityAccess\" (i.e. Emergency calls, MPS, MCS subscribers) with high priority and responds with RRC Reject to these access attempts only in extreme network load conditions that may threaten the gNB stability.\nUnified access control does not apply to IAB-MTs or NCR-MTs.\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "7.5\tUE Capability Retrieval framework",
                    "description": "",
                    "summary": "",
                    "text_content": "The UE reports its UE radio access capabilities which are static at least when the network requests. The gNB can request what capabilities for the UE to report based on band information. The UE capability can be represented by a capability ID, which may be exchanged in NAS signalling over the air and in network signalling instead of the UE capability structure.\nIn IAB, it is optional for an IAB-MT to support UE capability Retrieval framework and the related signalling. In case IAB-MT does not support UE capability Retrieval framework, IAB-MT capabilities are assumed to be known to the network by other means, e.g. OAM.\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "7.6\tTransport of NAS Messages",
                    "description": "",
                    "summary": "",
                    "text_content": "NR provides reliable in-sequence delivery of NAS messages over SRBs in RRC, except at handover where losses or duplication can occur when PDCP is re-established. In RRC, NAS messages are sent in transparent containers. Piggybacking of NAS messages can occur in the following scenarios:\n-\tAt bearer establishment/modification/release in the DL;\n-\tFor transferring the initial NAS message during connection setup and connection resume in the UL.\nNOTE:\tIn addition to the integrity protection and ciphering performed by NAS, NAS messages can also be integrity protected and ciphered by PDCP.\nMultiple NAS messages can be sent in a single downlink RRC message during PDU Session Resource establishment or modification. In this case, the order of the NAS messages contained in the RRC message shall be in the same order as that in the corresponding NG-AP message in order to ensure the in-sequence delivery of NAS messages.\nNG-RAN node may trigger the NAS Non Delivery Indication procedure to report the non-delivery of the non PDU Session related NAS PDU received from the AMF as specified in TS 38.413 [26].\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "7.7\tCarrier Aggregation",
                    "description": "",
                    "summary": "",
                    "text_content": "When CA is configured, the UE only has one RRC connection with the network. At RRC connection establishment/re-establishment/handover, one serving cell provides the NAS mobility information, and at RRC connection re-establishment/handover, one serving cell provides the security input. This cell is referred to as the Primary Cell (PCell). Depending on UE capabilities, Secondary Cells (SCells) can be configured to form together with the PCell a set of serving cells. The configured set of serving cells for a UE therefore always consists of one PCell and one or more SCells.\nThe reconfiguration, addition and removal of SCells can be performed by RRC. At intra-NR handover and during connection resume from RRC_INACTIVE, the network can also add, remove, keep, or reconfigure SCells for usage with the target PCell. When adding a new SCell, dedicated RRC signalling is used for sending all required system information of the SCell i.e. while in connected mode, UEs need not acquire broadcast system information directly from the SCells.\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "7.8\tBandwidth Adaptation",
                    "description": "",
                    "summary": "",
                    "text_content": "To enable BA on the PCell, the gNB configures the UE with UL and DL BWP(s). To enable BA on SCells in case of CA, the gNB configures the UE with DL BWP(s) at least (i.e. there may be none in the UL). For the PCell, the BWP used for initial access is configured via system information. For the SCell(s), the BWP used after initial activation is configured via dedicated RRC signalling.\nIn paired spectrum, DL and UL can switch BWP independently. In unpaired spectrum, DL and UL switch BWP simultaneously. Switching between configured BWPs happens by means of RRC signalling, DCI, inactivity timer or upon initiation of random access. When an inactivity timer is configured for a serving cell, the expiry of the inactivity timer associated to that cell switches the active BWP to a default BWP configured by the network. There can be at most one active BWP per cell, except when the serving cell is configured with SUL, in which case there can be at most one on each UL carrier.\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "7.9\tUE Assistance Information",
                    "description": "",
                    "summary": "",
                    "text_content": "When configured to do so, the UE can signal the network through UEAssistanceInformation:\n-\tIf it prefers an adjustment in the connected mode DRX cycle length, for the purpose of delay budget reporting;\n-\tIf it is experiencing internal overheating;\n-\tIf it prefers certain DRX parameter values, and/or a reduced maximum number of secondary component carriers, and/or a reduced maximum aggregated bandwidth and/or a reduced maximum number of MIMO layers and/or minimum scheduling offsets K0 and K2 for power saving purpose;\n-\tIf it expects not to send or receive any more data in the near future, and in this case, it can provide its preference to transition out of RRC_CONNECTED where this indication may express its preferred RRC state, or alternately, it may cancel an earlier indicated preference to transition out of RRC_CONNECTED;\n-\tIf it prefers (not) to be provisioned with reference time information;\n-\tIf it prefers to transition out of RRC_CONNECTED state for MUSIM operation and its preferred RRC state after transition;\n-\tIf it wants to include assistance information for setup or release of gaps for MUSIM operation;\n-\tWhen affected by IDC problems that it cannot solve by itself:\n-\tThe list of frequencies affected by IDC problems (see clause 23.4 of TS 36.300 [2]);\n-\tThe list of frequency ranges/frequency range combinations affected by the IDC problems;\n-\tDRX based TDM assistance information (see clause 23.4.2 of TS 36.300 [2]);\n-\tIts RRM measurement relaxation status indicating whether RRM measurement relaxation criteria are met or not;\n-\tIts RLM measurement relaxation status indicating whether the UE is applying RLM measurements relaxation;\n-\tIts BFD measurement relaxation status indicating whether the UE is applying BFD measurements relaxation;\n-\tIf it prefers not operating on multi-Rx (i.e. not supporting simultaneous reception with different QCL-typeD) for FR2.\nNOTE:\tThe requirements on RRM/RLM/CSI measurements in different phases of IDC interference defined in TS 36.300 [2] are applicable except that for NR serving cell, the requirements in TS 38.133 [13] and TS 38.101-1 [18], TS 38.101-2 [35], TS 38.101-3 [36] apply.\nIn the second case, the UE can express a preference for temporarily reducing the number of maximum secondary component carriers, the maximum aggregated bandwidth and the number of maximum MIMO layers. In all cases, it is up to the gNB whether to accommodate the request.\nFor sidelink, the UE can report SL traffic pattern(s) to NG-RAN, for periodic traffic.\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "7.10\tSegmentation of RRC messages",
                    "description": "",
                    "summary": "",
                    "text_content": "An RRC message may be segmented in case the size of the encoded RRC message PDU exceeds the maximum PDCP SDU size. Segmentation is performed in the RRC layer using a separate RRC PDU to carry each segment. The receiver reassembles the segments to form the complete RRC message. All segments of an RRC message are transmitted before sending another RRC message. Segmentation is supported in both uplink and downlink as specified in TS 38.331 [12].\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                }
            ]
        },
        {
            "title": "8\tNG Identities",
            "description": "",
            "summary": "",
            "tables": [],
            "figures_meta_data": [],
            "subsections": [
                {
                    "title": "8.1\tUE Identities",
                    "description": "",
                    "summary": "",
                    "text_content": "In this clause, the identities used by NR connected to 5GC are listed. For scheduling at cell level, the following identities are used:\n-\tC-RNTI: unique UE identification used as an identifier of the RRC Connection and for scheduling;\n-\tCG-SDT-CS-RNTI: unique UE identification used for Configured Grant-based SDT in the uplink;\n-\tCI-RNTI: identification of cancellation in the uplink;\n-\tCS-RNTI: unique UE identification used for Semi-Persistent Scheduling in the downlink or configured grant in the uplink;\n-\tINT-RNTI: identification of pre-emption in the downlink;\n-\tMCS-C-RNTI: unique UE identification used for indicating an alternative MCS table for PDSCH and PUSCH;\n-\tP-RNTI: identification of Paging and System Information change notification in the downlink;\n-\tSI-RNTI: identification of Broadcast and System Information in the downlink;\n-\tSP-CSI-RNTI: unique UE identification used for semi-persistent CSI reporting on PUSCH.\nFor power and slot format control, the following identities are used:\n-\tSFI-RNTI: identification of slot format;\n-\tTPC-PUCCH-RNTI: unique UE identification to control the power of PUCCH;\n-\tTPC-PUSCH-RNTI: unique UE identification to control the power of PUSCH;\n-\tTPC-SRS-RNTI: unique UE identification to control the power of SRS.\nDuring the random access procedure, the following identities are also used:\n-\tRA-RNTI: identification of the Random Access Response in the downlink;\n-\tMSGB-RNTI: identification of the Random Access Response for 2-step RA type in the downlink;\n-\tTemporary C-RNTI: UE identification temporarily used for scheduling during the random access procedure;\n-\tRandom value for contention resolution: UE identification temporarily used for contention resolution purposes during the random access procedure.\nFor NR connected to 5GC, the following UE identity is used at NG-RAN level:\n-\tI-RNTI: used to identify the UE context in RRC_INACTIVE.\nFor UE power saving purpose, the following identities are used:\n-\tPS-RNTI: used to determine if the UE needs to monitor PDCCH on the next occurrence of the connected mode DRX on-duration;\n-\tPEI-RNTI: used to determine if the UE needs to monitor the associated PO.\nFor IAB the following identity is used:\n-\tAI-RNTI: identification of the DCI carrying availability indication for soft symbols of an IAB-DU.\nFor Network-Controlled Repeater the following identity is used:\n-\tNCR-RNTI: identification of the DCI carrying side control information.\nFor MBS, the following identities are used:\n-\tG-RNTI: Identifies dynamically scheduled PTM transmissions of MTCH(s);\n-\tG-CS-RNTI: Identifies configured scheduled PTM transmissions of MTCH(s) scheduled with configured grant;\n-\tMCCH-RNTI: Identifies transmissions of MCCH and MCCH change notification.\nFor sidelink, the following identities are used:\n-\tSL-RNTI: unique UE identification used for NR sidelink communication scheduling;\n-\tSL-CS-RNTI: unique UE identification used for configured sidelink grant for NR sidelink communication;\n-\tSL Semi-Persistent Scheduling V-RNTI: unique UE identification used for semi-persistent scheduling for V2X sidelink communication;\n-\tSL-PRS-RNTI: unique UE identification used for SL-PRS transmission scheduling on dedicated SL-PRS resource pool;\n-\tSL-PRS-CS-RNTI: unique UE identification used for configured sidelink grant for SL-PRS transmission on dedicated SL-PRS resource pool.\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "8.2\tNetwork Identities",
                    "description": "",
                    "summary": "",
                    "text_content": "The following identities are used in NG-RAN for identifying a specific network entity:\n-\tAMF Name: used to identify an AMF.\n-\tNR Cell Global Identifier (NCGI): used to identify NR cells globally. The NCGI is constructed from the PLMN identity the cell belongs to and the NR Cell Identity (NCI) of the cell. The PLMN ID included in the NCGI should be the first PLMN ID within the set of PLMN IDs associated to the NR Cell Identity in SIB1, following the order of broadcast.\nNOTE 1:\tHow to manage the scenario where a different PLMN ID has been allocated by the operator for an NCGI is left to OAM and/or implementation.\n-\tgNB Identifier (gNB ID): used to identify gNBs within a PLMN. The gNB ID is contained within the NCI of its cells.\n-\tGlobal gNB ID: used to identify gNBs globally. The Global gNB ID is constructed from the PLMN identity the gNB belongs to and the gNB ID. The MCC and MNC are the same as included in the NCGI.\nNOTE 2:\tIt is not precluded that a cell served by a gNB does not broadcast the PLMN ID included in the Global gNB ID.\n-\tTracking Area identity (TAI): used to identify tracking areas. The TAI is constructed from the PLMN identity the tracking area belongs to and the TAC (Tracking Area Code) of the Tracking Area.\n-\tSingle Network Slice Selection Assistance information (S-NSSAI): identifies a network slice.\n-\tNetwork Slice AS Group (NSAG): identifies an association to a slice or a set of slices. An NSAG is defined within a TA, used for slice-based cell reselection and/or slice-based RACH configuration. Values of NSAG IDs associated with different slice or set of slices shall be unique within a TA, also when slice-based cell reselection and slice-based RACH configuration are both supported in the TA.\n-\tNetwork Identifier (NID): identifies an SNPN in combination with a PLMN ID.\n-\tClosed Access Group Identifier: identifies a CAG within a PLMN.\n-\tLocal NG-RAN Node Identifier: used as reference to the NG-RAN node in the I-RNTI.\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "8.3\tUser Data Transport on the CN-RAN Interface",
                    "description": "",
                    "summary": "",
                    "text_content": "The core network may provide two transport layer addresses of different versions to enable that a NG-RAN node can select either IPv4 or IPv6.\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "8.4\tNR sidelink communication and V2X sidelink communication related identities",
                    "description": "",
                    "summary": "",
                    "text_content": "The following identities are used for NR sidelink communication:\n-\tSource Layer-2 ID: Identifies the sender of the data in NR sidelink communication. The Source Layer-2 ID is 24 bits long and is split in the MAC layer into two bit strings:\n-\tOne bit string is the LSB part (8 bits) of Source Layer-2 ID and forwarded to physical layer of the sender. This identifies the source of the intended data in sidelink control information and is used for filtering of packets at the physical layer of the receiver;\n-\tSecond bit string is the MSB part (16 bits) of the Source Layer-2 ID and is carried within the MAC header. This is used for filtering of packets at the MAC layer of the receiver.\n-\tDestination Layer-2 ID: Identifies the target of the data in NR sidelink communication. For NR sidelink communication, the Destination Layer-2 ID is 24 bits long and is split in the MAC layer into two bit strings:\n-\tOne bit string is the LSB part (16 bits) of Destination Layer-2 ID and forwarded to physical layer of the sender. This identifies the target of the intended data in sidelink control information and is used for filtering of packets at the physical layer of the receiver;\n-\tSecond bit string is the MSB part (8 bits) of the Destination Layer-2 ID and is carried within the MAC header. This is used for filtering of packets at the MAC layer of the receiver.\n-\tPC5 Link Identifier: Uniquely identifies the PC5 unicast link in a UE for the lifetime of the PC5 unicast link as specified in TS 23.287 [40]. The PC5 Link Identifier is used to indicate to upper layers the PC5 unicast link in which sidelink RLF was declared and corresponding PC5-RRC connection was released.\nV2X sidelink communication related identities are specified in clause 8.3 of TS 36.300 [2].\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                }
            ]
        },
        {
            "title": "9\tMobility and State Transitions",
            "description": "",
            "summary": "",
            "tables": [],
            "figures_meta_data": [],
            "subsections": [
                {
                    "title": "9.1\tOverview",
                    "description": "",
                    "summary": "",
                    "text_content": "Load balancing is achieved in NR with handover, redirection mechanisms upon RRC release and through the usage of inter-frequency and inter-RAT absolute priorities and inter-frequency Qoffset parameters.\nMeasurements to be performed by a UE for connected mode mobility are classified in at least four measurement types:\n-\tIntra-frequency NR measurements;\n-\tInter-frequency NR measurements;\n-\tInter-RAT measurements for E-UTRA;\n-\tInter-RAT measurements for UTRA.\nFor each measurement type one or several measurement objects can be defined (a measurement object defines e.g. the carrier frequency to be monitored).\nFor each measurement object one or several reporting configurations can be defined (a reporting configuration defines the reporting criteria). Three reporting criteria are used: event triggered reporting, periodic reporting and event triggered periodic reporting.\nThe association between a measurement object and a reporting configuration is created by a measurement identity (a measurement identity links together one measurement object and one reporting configuration of the same RAT). By using several measurement identities (one for each measurement object, reporting configuration pair) it is then possible to:\n-\tAssociate several reporting configurations to one measurement object and;\n-\tAssociate one reporting configuration to several measurement objects.\nThe measurements identity is used as well when reporting results of the measurements.\nMeasurement quantities are considered separately for each RAT.\nMeasurement commands are used by NG-RAN to order the UE to start, modify or stop measurements.\nHandover can be performed within the same RAT and/or CN, or it can involve a change of the RAT and/or CN.\nInter system fallback towards E-UTRAN is performed when 5GC does not support emergency services, voice services, for load balancing etc. Depending on factors such as CN interface availability, network configuration and radio conditions, the fallback procedure results in either RRC_CONNECTED state mobility (handover procedure) or RRC_IDLE state mobility (redirection), see TS 23.501 [3] and TS 38.331 [12].\nSRVCC from 5G to UTRAN, if supported by both the UE and the network, may be performed to handover a UE with an ongoing voice call from NR to UTRAN. The overall procedure is described in TS 23.216 [34]. See also TS 38.331 [12] and TS 38.413 [26].\nIn the NG-C signalling procedure, the AMF based on support for emergency services, voice service, any other services or for load balancing etc, may indicate the target CN type as EPC or 5GC to the gNB node. When the target CN type is received by gNB, the target CN type is also conveyed to the UE in RRCRelease Message.\nInter-gNB CSI-RS based mobility, i.e. handover, is supported between two neighbour gNBs by enabling that neighbour gNBs can exchange and forward their own CSI-RS configurations and on/off status.\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "9.2\tIntra-NR",
                    "description": "",
                    "summary": "",
                    "text_content": "",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": [
                        {
                            "title": "9.2.1\tMobility in RRC_IDLE",
                            "text_content": "The principles of PLMN selection in NR are based on the 3GPP PLMN selection principles. Cell selection is required on transition from RM-DEREGISTERED to RM-REGISTERED, from CM-IDLE to CM-CONNECTED and from CM-CONNECTED to CM-IDLE and is based on the following principles:\n-\tThe UE NAS layer identifies a selected PLMN and equivalent PLMNs;\n-\tCell selection is always based on CD-SSBs located on the synchronization raster (see clause 5.2.4):\n-\tThe UE searches the NR frequency bands and for each carrier frequency identifies the strongest cell as per the CD-SSB. It then reads cell system information broadcast to identify its PLMN(s):\n-\tThe UE may search each carrier in turn (\"initial cell selection\") or make use of stored information to shorten the search (\"stored information cell selection\").\n-\tThe UE seeks to identify a suitable cell; if it is not able to identify a suitable cell it seeks to identify an acceptable cell. When a suitable cell is found or if only an acceptable cell is found it camps on that cell and commence the cell reselection procedure:\n-\tA suitable cell is one for which the measured cell attributes satisfy the cell selection criteria; the cell PLMN is the selected PLMN, registered or an equivalent PLMN; the cell is not barred or reserved and the cell is not part of a tracking area which is in the list of \"forbidden tracking areas for roaming\";\n-\tAn acceptable cell is one for which the measured cell attributes satisfy the cell selection criteria and the cell is not barred.\n-\tThe IAB-MT and NCR-MT apply the cell selection procedure as described for the UE with the following differences:\n-\tThe IAB-MT and NCR-MT ignore cell-barring or cell-reservation indications contained in cell system information broadcast;\n-\tThe IAB-MT only considers a cell as a candidate for cell selection if the cell system information broadcast indicates IAB support for the selected PLMN or the selected SNPN, and the NCR-MT only considers a cell as a candidate for cell selection if the cell system information broadcast indicates Network-Controlled Repeater support.\n-\tThe mobile IAB-MT applies the cell selection procedure as described for the IAB-MT with the following differences:\n-\tThe mobile IAB-MT only considers a cell as a candidate cell for cell selection if the cell system information broadcast indicates mobile IAB support.\nTransition to RRC_IDLE:\nOn transition from RRC_CONNECTED or RRC_INACTIVE to RRC_IDLE, a UE should camp on a cell as result of cell selection according to the frequency be assigned by RRC in the state transition message if any.\nRecovery from out of coverage:\nThe UE should attempt to find a suitable cell in the manner described for stored information or initial cell selection above. If no suitable cell is found on any frequency or RAT, the UE should attempt to find an acceptable cell.\nIn multi-beam operations, the cell quality is derived amongst the beams corresponding to the same cell (see clause 9.2.4).\nA UE in RRC_IDLE performs cell reselection. The principles of the procedure are the following:\n-\tCell reselection is always based on CD-SSBs located on the synchronization raster (see clause 5.2.4).\n-\tThe UE makes measurements of attributes of the serving and neighbour cells to enable the reselection process:\n-\tFor the search and measurement of inter-frequency neighbouring cells, only the carrier frequencies need to be indicated.\n-\tCell reselection identifies the cell that the UE should camp on. It is based on cell reselection criteria which involves measurements of the serving and neighbour cells:\n-\tIntra-frequency reselection is based on ranking of cells;\n-\tInter-frequency reselection is based on absolute priorities where a UE tries to camp on the highest priority frequency available;\n-\tA Neighbour Cell List (NCL) can be provided by the serving cell to handle specific cases for intra- and inter-frequency neighbouring cells;\n-\tExclude-lists can be provided to prevent the UE from reselecting to specific intra- and inter-frequency neighbouring cells;\n-\tAllow-lists can be provided to request the UE to reselect to only specific intra- and inter-frequency neighbouring cells;\n-\tCell reselection can be speed dependent;\n-\tService specific prioritisation;\n-\tSlice-based cell reselection information can be provided to facilitate the UE to reselect a cell that supports specific slices.\nIn multi-beam operations, the cell quality is derived amongst the beams corresponding to the same cell (see clause 9.2.4).\nThe following figure describes the UE triggered transition from RRC_IDLE to RRC_CONNECTED (for the NAS part, see TS 23.502 [22]):\nFigure 9.2.1.3-1 illustrates the process of a user equipment (UE) transitioning from the RRC_IDLE state to the RRC_CONNECTED state, triggered by the UE. The figure depicts the various stages of the process, including the initial RRC_IDLE state, the UE's request to connect, the establishment of the connection, and the subsequent RRC_CONNECTED state. Key components such as the RRC (Radio Resource Control) protocol and the signaling process are highlighted, emphasizing the importance of accurate and timely communication between the UE and the network. This figure is essential for understanding the complex interactions that occur during the initial connection process in a telecommunication network.\nFigure 9.2.1.3-1: UE triggered transition from RRC_IDLE to RRC_CONNECTED\n1.\tThe UE requests to setup a new connection from RRC_IDLE.\n2/2a. The gNB completes the RRC setup procedure.\nNOTE:\tThe scenario where the gNB rejects the request is described below.\n3.\tThe first NAS message from the UE, piggybacked in RRCSetupComplete, is sent to AMF.\n4/4a/5/5a. Additional NAS messages may be exchanged between UE and AMF, see TS 23.502 [22].\n6.\tThe AMF prepares the UE context data (including PDU session context, the Security Key, UE Radio Capability and UE Security Capabilities, etc.) and sends it to the gNB.\n7/7a. The gNB activates the AS security with the UE.\n8/8a. The gNB performs the reconfiguration to setup SRB2 and DRBs for UE, or SRB2 and optionally DRBs for IAB-MT.\n9.\tThe gNB informs the AMF that the setup procedure is completed.\nNOTE 1:\tRRC messages in step 1 and 2 use SRB0, all the subsequent messages use SRB1. Messages in steps 7/7a are integrity protected. From step 8 on, all the messages are integrity protected and ciphered.\nNOTE 2:\tFor signalling only connection, step 8 is skipped since SRB2 and DRBs are not setup.\nThe following figure describes the rejection from the network when the UE attempts to setup a connection from RRC_IDLE:\nFigure 9.2.1.3 -2 illustrates the process of a User Equipment (UE) transitioning from the RRC_IDLE state due to a specific event or condition. The figure depicts the various stages of the RRC (Radio Resource Control) protocol, which is responsible for managing the radio link between the UE and the network. The UE's state transitions are crucial for maintaining connectivity and ensuring proper communication between devices. The figure highlights the importance of accurate state transitions in maintaining network efficiency and reliability.\nFigure 9.2.1.3-2: Rejection of UE triggered transition from RRC_IDLE\n1.\tUE attempts to setup a new connection from RRC_IDLE.\n2.\tThe gNB is not able to handle the procedure, for instance due to congestion.\n3.\tThe gNB sends RRCReject (with a wait time) to keep the UE in RRC_IDLE.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "9.2.2\tMobility in RRC_INACTIVE",
                            "text_content": "RRC_INACTIVE is a state where a UE remains in CM-CONNECTED and can move within an area configured by NG-RAN (the RNA) without notifying NG-RAN. In RRC_INACTIVE, the last serving gNB node keeps the UE context and the UE-associated NG connection with the serving AMF and UPF.\nFor a UE in RRC_INACTIVE with eDRX cycle longer than 10.24 seconds, the NG-RAN node may, based on implementation, send a request to the AMF to perform MT Communication Handling as described in TS 23.501 [3].\nIf the last serving gNB receives DL data from the UPF or DL UE-associated signalling from the AMF (except the UE Context Release Command message) while the UE is in RRC_INACTIVE, it pages in the cells corresponding to the RNA and may send XnAP RAN Paging to neighbour gNB(s) if the RNA includes cells of neighbour gNB(s).\nUpon receiving the RAN Paging Request message from the AMF while the UE is in RRC_INACTIVE with eDRX beyond 10.24 seconds, the last serving gNB may page in its cells comprised in the RNA and may send XnAP RAN Paging to neighbour gNB(s) if the RNA includes cells of neighbour gNB(s), in order for the gNB to trigger the UE to resume connection in RRC_CONNECTED state or RRC_INACTIVE state.\nUpon receiving the UE Context Release Command message while the UE is in RRC_INACTIVE, the last serving gNB may page in the cells corresponding to the RNA and may send XnAP RAN Paging to neighbour gNB(s) if the RNA includes cells of neighbour gNB(s), in order to release UE explicitly.\nUpon receiving the NG RESET message while the UE is in RRC_INACTIVE, the last serving gNB may page involved UEs in the cells corresponding to the RNA and may send XnAP RAN Paging to neighbour gNB(s) if the RNA includes cells of neighbour gNB(s) in order to explicitly release involved UEs.\nUpon RAN paging failure, the gNB behaves according to TS 23.501 [3].\nThe AMF provides to the NG-RAN node the Core Network Assistance Information to assist the NG-RAN node's decision whether the UE can be sent to RRC_INACTIVE, and to assist UE configuration and paging in RRC_INACTIVE. The Core Network Assistance Information includes the registration area configured for the UE, the Periodic Registration Update timer, and the UE Identity Index value, and may include the UE specific DRX, an indication if the UE is configured with Mobile Initiated Connection Only (MICO) mode by the AMF, the Expected UE Behaviour, the UE Radio Capability for Paging, the PEI with Paging Subgrouping assistance information, the NR Paging eDRX Information, the Paging Cause Indication for Voice Service, the Hashed UE Identity Index Value and the CN support indication for MT Communication Handling. The UE registration area is taken into account by the NG-RAN node when configuring the RNA. The UE specific DRX and UE Identity Index value are used by the NG-RAN node for RAN paging. The Periodic Registration Update timer is taken into account by the NG-RAN node to configure Periodic RNA Update timer. The NG-RAN node takes into account the Expected UE Behaviour to assist the UE RRC state transition decision. The NG-RAN node may use the UE Radio Capability for Paging during RAN Paging. The NG-RAN node takes into account the PEI with Paging Subgrouping assistance information for subgroup paging in RRC_INACTIVE except when the UE context contains an emergency PDU session in which case the PEI with Paging Subgrouping assistance information shall not be used according to TS 24.501 [28]. When sending the XnAP RAN Paging to neighbour NG-RAN node(s), the PEI with Paging Subgrouping assistance information may be included. The NG-RAN node takes into account the NR Paging eDRX Information to configure the RAN Paging when the NR UE is in RRC_INACTIVE. When sending XnAP RAN Paging to neighbour NG-RAN node(s), the NR Paging eDRX Information for RRC_IDLE and for RRC_INACTIVE may be included. The NG-RAN node takes into consideration the Paging Cause Indication for Voice Service to include the Paging Cause in RAN Paging for a UE in RRC_INACTIVE state. When sending XnAP RAN Paging to neighbour NG-RAN node(s), the Paging Cause may be included. When sending XnAP RAN Paging to neighbour NG-RAN node(s), the Hashed UE Identity Index Value may be included to determine the start point of PTW. The NG-RAN takes into account the CN support indication for MT Communication Handling when deciding to request the AMF for MT Communication Handling for a UE in RRC_INACTIVE state with long eDRX beyond 10.24 seconds as described in TS 23.501 [3].\nAt transition to RRC_INACTIVE the NG-RAN node may configure the UE with a periodic RNA Update timer value. At periodic RNA Update timer expiry without notification from the UE, the gNB behaves as specified in TS 23.501 [3].\nIf the UE accesses a gNB other than the last serving gNB, the receiving gNB triggers the XnAP Retrieve UE Context procedure to get the UE context from the last serving gNB and may also trigger an Xn-U Address Indication procedure including tunnel information for potential recovery of data from the last serving gNB. Upon successful UE context retrieval, the receiving gNB shall perform the slice-aware admission control in case of receiving slice information and becomes the serving gNB and it further triggers the NGAP Path Switch Request and applicable RRC procedures. After the path switch procedure, the serving gNB triggers release of the UE context at the last serving gNB by means of the XnAP UE Context Release procedure.\nIn case the UE is not reachable at the last serving gNB, the gNB shall fail any AMF initiated UE-associated class 1 procedure which allows the signalling of unsuccessful operation in the respective response message. It may trigger the NAS Non Delivery Indication procedure to report the non-delivery of any non PDU Session related NAS PDU received from the AMF as specified in TS 38.413 [26].\nIf the UE accesses a gNB other than the last serving gNB and the receiving gNB does not find a valid UE Context, the receiving gNB can perform establishment of a new RRC connection instead of resumption of the previous RRC connection. UE context retrieval will also fail and hence a new RRC connection needs to be established if the serving AMF changes.\nA UE in the RRC_INACTIVE state is required to initiate RNA update procedure when it moves out of the configured RNA. When receiving RNA update request from the UE, the receiving gNB triggers the XnAP Retrieve UE Context procedure to get the UE context from the last serving gNB and may decide to send the UE back to RRC_INACTIVE state, move the UE into RRC_CONNECTED state, or send the UE to RRC_IDLE. In case of periodic RNA update, if the last serving gNB decides not to relocate the UE context, it fails the Retrieve UE Context procedure and sends the UE back to RRC_INACTIVE, or to RRC_IDLE directly by an encapsulated RRCRelease message.\nA UE in RRC_INACTIVE performs cell reselection. The principles of the procedure are as for the RRC_IDLE state (see clause 9.2.1.2).\nA UE in the RRC_INACTIVE state can be configured by the last serving NG-RAN node with an RNA, where:\n-\tthe RNA can cover a single or multiple cells, and shall be contained within the CN registration area; in this release Xn connectivity should be available within the RNA;\n-\ta RAN-based notification area update (RNAU) is periodically sent by the UE and is also sent when the cell reselection procedure of the UE selects a cell that does not belong to the configured RNA.\nThere are several different alternatives on how the RNA can be configured:\n-\tList of cells:\n-\tA UE is provided an explicit list of cells (one or more) that constitute the RNA.\n-\tList of RAN areas:\n-\tA UE is provided (at least one) RAN area ID, where a RAN area is a subset of a CN Tracking Area or equal to a CN Tracking Area. A RAN area is specified by one RAN area ID, which consists of a TAC and optionally a RAN area Code;\n-\tA cell broadcasts one or, in case of network sharing with multiple cell ID broadcast, more RAN area IDs in the system information.\nNG-RAN may provide different RNA definitions to different UEs but not mix different definitions to the same UE at the same time. UE shall support all RNA configuration options listed above.\nThe following figure describes the UE triggered transition from RRC_INACTIVE to RRC_CONNECTED in case of UE context retrieval success:\nFigure 9.2.2.4.1-1: UE triggered transition from RRC_INACTIVE to RRC_CONNECTED (UE context retrieval success) illustrates the process of a user equipment (UE) initiating a transition from a state of inactivity to a connected state, indicating successful retrieval of context information. This figure is part of a larger communication system, specifically focusing on the interaction between the UE and the radio resource control (RRC) protocol. The transition is triggered by the UE, which requires context information to be retrieved from the network. The figure highlights the importance of context information in maintaining a seamless connection and efficient communication between the UE and the network.\nFigure 9.2.2.4.1-1: UE triggered transition from RRC_INACTIVE to RRC_CONNECTED\n(UE context retrieval success)\n1.\tThe UE resumes from RRC_INACTIVE, providing the I-RNTI, allocated by the last serving gNB.\n2.\tThe gNB, if able to resolve the gNB identity contained in the I-RNTI, requests the last serving gNB to provide UE Context data.\n3.\tThe last serving gNB provides UE context data.\n4/5. The gNB and UE completes the resumption of the RRC connection.\nNOTE:\tUser Data can also be sent in step 5 if the grant allows.\n6.\tIf loss of DL user data buffered in the last serving gNB shall be prevented, the gNB provides forwarding addresses.\n7/8. The gNB performs path switch.\n9.\tThe gNB triggers the release of the UE resources at the last serving gNB.\nAfter step 1 above, when the gNB decides to use a single RRC message to reject the Resume Request right away and keep the UE in RRC_INACTIVE without any reconfiguration (e.g. as described in the two examples below), or when the gNB decides to setup a new RRC connection, SRB0 (without security) is used. Conversely, when the gNB decides to reconfigure the UE (e.g. with a new DRX cycle or RNA) or when the gNB decides to push the UE to RRC_IDLE, SRB1 (with integrity protection and ciphering as previously configured for that SRB) shall be used.\nNOTE:\tSRB1 can only be used once the UE Context is retrieved i.e. after step 3.\nThe following figure describes the UE triggered transition from RRC_INACTIVE to RRC_CONNECTED in case of UE context retrieval failure:\nFigure 9.2.2.4.1-2 illustrates a UE (User Equipment) transitioning from the RRC_INACTIVE state to the RRC_CONNECTED state due to a context retrieval failure. The figure depicts the RRC (Radio Resource Control) protocol steps involved in this process, including the initial RRC_INACTIVE state, the UE's attempt to retrieve context information, and the subsequent RRC_CONNECTED state achieved after the context is successfully retrieved. The figure highlights the importance of context information in maintaining a stable connection and the mechanisms in place to handle retrieval failures.\nFigure 9.2.2.4.1-2: UE triggered transition from RRC_INACTIVE to RRC_CONNECTED\n(UE context retrieval failure)\n1.\tThe UE resumes from RRC_INACTIVE, providing the I-RNTI, allocated by the last serving gNB.\n2.\tThe gNB, if able to resolve the gNB identity contained in the I-RNTI, requests the last serving gNB to provide UE Context data.\n3.\tThe last serving gNB cannot retrieve or verify the UE context data.\n4.\tThe last serving gNB indicates the failure to the gNB.\n5.\tThe gNB performs a fallback to establish a new RRC connection by sending RRCSetup.\n6.\tA new connection is setup as described in clause 9.2.1.3.\nThe following figure describes the rejection form the network when the UE attempts to resume a connection from RRC_INACTIVE:\nFigure 9.2.2 . 4.1-3 illustrates a scenario where a user equipment (UE) is rejected from the network. The figure depicts the UE's attempt to resume a connection after being disconnected. It shows the interaction between the UE, the network elements, and the signaling protocols involved in the process. The figure highlights the importance of network management and UE behavior in maintaining connectivity and ensuring a seamless user experience.\nFigure 9.2.2.4.1-3: Reject from the network, UE attempts to resume a connection\n1.\tUE attempts to resume the connection from RRC_INACTIVE.\n2.\tThe gNB is not able to handle the procedure, for instance due to congestion.\n3.\tThe gNB sends RRCReject (with a wait time) to keep the UE in RRC_INACTIVE.\nThe following figure describes the network triggered transition from RRC_INACTIVE to RRC_CONNECTED:\nFigure 9.2.2.4.2-1 illustrates a network-triggered transition from the RRC_INACTIVE state to the RRC_CONNECTED state. This figure depicts the process of a mobile device connecting to a network, showing the various stages of the RRC (Radio Resource Control) protocol. Key components include the mobile device, network elements, and signaling protocols. The figure highlights the importance of seamless handover and synchronization in maintaining connectivity and ensuring a smooth user experience.\nFigure 9.2.2.4.2-1: Network triggered transition from RRC_INACTIVE to RRC_CONNECTED\n1.\tA RAN paging trigger event occurs (incoming DL user plane, DL signalling from 5GC, etc.).\n2.\tRAN paging is triggered; either only in the cells controlled by the last serving gNB or also by means of Xn RAN Paging in cells controlled by other gNBs, configured to the UE in the RAN-based Notification Area (RNA).\n3.\tThe UE is paged with the I-RNTI.\n4.\tIf the UE has been successfully reached, it attempts to resume from RRC_INACTIVE, as described in clause 9.2.2.4.1.\nThe following figure describes the UE triggered RNA update procedure involving context retrieval over Xn. The procedure may be triggered when the UE moves out of the configured RNA, or periodically.\nFigure 9.2.2.5-1 illustrates the process of updating the Radio Access Network (RAN) through a procedure that involves the relocation of User Equipment (UE) context. The figure depicts the steps taken by the Network Management System (NMS) to ensure seamless network operations during the update process. The figure shows the UE context being transferred from the old RAN to the new RAN, highlighting the importance of context preservation for maintaining service continuity. The figure also emphasizes the coordination between the NMS and the RAN, as well as the involvement of the User Equipment in the update procedure.\nFigure 9.2.2.5-1: RNA update procedure with UE context relocation\n1.\tThe UE resumes from RRC_INACTIVE, providing the I-RNTI allocated by the last serving gNB and appropriate cause value, e.g., RAN notification area update.\n2.\tThe gNB, if able to resolve the gNB identity contained in the I-RNTI, requests the last serving gNB to provide UE Context, providing the cause value received in step 1.\n3.\tThe last serving gNB may provide the UE context (as assumed in the following). Alternatively, the last serving gNB may decide to move the UE to RRC_IDLE (and the procedure follows steps 3 and later of figure 9.2.2.5-3) or, if the UE is still within the previously configured RNA, to keep the UE context in the last serving gNB and to keep the UE in RRC_INACTIVE (and the procedure follows steps 3 and later of figure 9.2.2.5-2).\n4.\tThe gNB may move the UE to RRC_CONNECTED (and the procedure follows step 4 of Figure 9.2.2.4.1-1), or send the UE back to RRC_IDLE (in which case an RRCRelease message is sent by the gNB), or send the UE back to RRC_INACTIVE as assumed in the following.\n5.\tIf loss of DL user data buffered in the last serving gNB shall be prevented, the gNB provides forwarding addresses.\n6./7. The gNB performs path switch.\n8.\tThe gNB keeps the UE in RRC_INACTIVE state by sending RRCRelease with suspend indication.\n9.\tThe gNB triggers the release of the UE resources at the last serving gNB.\nThe following figure describes the RNA update procedure for the case when the UE is still within the configured RNA and the last serving gNB decides not to relocate the UE context and to keep the UE in RRC_INACTIVE:\nFigure 9.2.2.5-2 illustrates the periodic update procedure for RNA (Radio Network Architecture) without UE (User Equipment) context relocation. The figure depicts the process of updating the network configuration, including the base station (BS), eNodeB, and the RNC (Radio Network Controller). The procedure involves the synchronization of the BS and RNC, as well as the exchange of information between them. The figure highlights the importance of efficient network management and coordination in maintaining the integrity and performance of the radio network.\nFigure 9.2.2.5-2: Periodic RNA update procedure without UE context relocation\n1.\tThe UE resumes from RRC_INACTIVE, providing the I-RNTI allocated by the last serving gNB and appropriate cause value, e.g., RAN notification area update.\n2.\tThe gNB, if able to resolve the gNB identity contained in the I-RNTI, requests the last serving gNB to provide UE Context, providing the cause value received in step 1.\n3.\tThe last serving gNB stores received information to be used in the next resume attempt (e.g. C-RNTI and PCI related to the resumption cell), and responds to the gNB with the RETRIEVE UE CONTEXT FAILURE message including an encapsulated RRCRelease message. The RRCRelease message includes Suspend Indication.\n4.\tThe gNB forwards the RRCRelease message to the UE.\nThe following figure describes the RNA update procedure for the case when the last serving gNB decides to move the UE to RRC_IDLE:\nFigure 9.2.2.5-3 illustrates the process of updating an RNA (Radio Network Architecture) in a telecommunication system, specifically transitioning from the RRC_IDLE state to another state. The figure depicts the sequence of events and procedures involved in this update, including the role of the RRC (Radio Resource Control) and the signaling between different network elements. The figure highlights the importance of accurate and timely updates for maintaining network performance and ensuring seamless communication between devices.\nFigure 9.2.2.5-3: RNA update procedure with transition to RRC_IDLE\n1.\tThe UE resumes from RRC_INACTIVE, providing the I-RNTI allocated by the last serving gNB and appropriate cause value, e.g., RAN notification area update.\n2.\tThe gNB, if able to resolve the gNB identity contained in the I-RNTI, requests the last serving gNB to provide UE Context, providing the cause value received in step 1.\n3.\tInstead of providing the UE context, the last serving gNB provides an RRCRelease message to move the UE to RRC_IDLE.\n4.\tThe last serving gNB deletes the UE context.\n5.\tThe gNB sends the RRCRelease which triggers the UE to move to RRC_IDLE.\nThe following figure describes a UE triggered NAS procedure responded by the network with a release with redirect, with UE context relocation.\nFigure 9.2.2.6-1 illustrates a scenario in which a user equipment (UE) context relocation is initiated in response to a resume request. The figure depicts the interaction between the mobile network operator's (MNO) home network and the new network, where the UE sends a Release with Redirect message to the MNO. The MNO acknowledges the request and initiates the relocation process, which involves transferring the UE's context from the home network to the new network. This process ensures that the UE can continue to communicate with the MNO and access its services even when it is not connected to the home network. The figure highlights the importance of context relocation in mobile communication, as it allows for seamless handover between networks and ensures uninterrupted service for the user.\nFigure 9.2.2.6-1: Resume request responded with Release with Redirect, with UE Context relocation\n1.\tThe UE resumes from RRC_INACTIVE, providing the I-RNTI allocated by the last serving gNB.\n2.\tThe gNB, if able to resolve the gNB identity contained in the I-RNTI, requests the last serving gNB to provide UE Context data.\n3.\tThe last serving gNB provides the UE context.\n4.\tThe gNB may move the UE to RRC_CONNECTED (and the procedure follows step 4 of Figure 9.2.2.4.1-1), or send the UE back to RRC_IDLE (in which case an RRCRelease message is sent by the gNB), or send the UE back to RRC_INACTIVE, including a release with redirect indication (as assumed in the following).\n5.\tIf loss of DL user data buffered in the last serving gNB shall be prevented, the gNB provides forwarding addresses.\n6./7. The gNB performs path switch.\n8.\tThe gNB keeps the UE in RRC_INACTIVE state by sending RRCRelease with suspend indication, including redirection information (frequency layer the UE performs cell selection upon entering RRC_INACTIVE).\n9.\tThe gNB triggers the release of the UE resources at the last serving gNB.\nNOTE1:\tUpon receiving the release with redirect, the higher layers trigger a pending procedure so the UE tries to resume again after cell selection.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "9.2.3\tMobility in RRC_CONNECTED",
                            "text_content": "Network controlled mobility applies to UEs in RRC_CONNECTED and is categorized into two types of mobility: cell level mobility and beam level mobility. Beam level mobility includes intra-cell beam level mobility and inter-cell beam level mobility.\nCell Level Mobility requires explicit RRC signalling to be triggered, i.e. handover. For inter-gNB handover, the signalling procedures consist of at least the following elemental components illustrated in Figure 9.2.3.1-1:\nFigure 9.2.3.1 -1 illustrates the inter-gNB handover procedures in a cellular network, showcasing the seamless transfer of user equipment (UE) between different base stations (gNBs). The figure depicts the process of signal reception, signal quality assessment, and the decision to initiate a handover. Key components include the gNB, UE, and the inter-gNB link. The figure emphasizes the importance of efficient handover processes for maintaining network connectivity and reducing latency.\nFigure 9.2.3.1-1: Inter-gNB handover procedures\n1.\tThe source gNB initiates handover and issues a HANDOVER REQUEST over the Xn interface.\n2.\tThe target gNB performs admission control and provides the new RRC configuration as part of the HANDOVER REQUEST ACKNOWLEDGE.\n3.\tThe source gNB provides the RRC configuration to the UE by forwarding the RRCReconfiguration message received in the HANDOVER REQUEST ACKNOWLEDGE. The RRCReconfiguration message includes at least cell ID and all information required to access the target cell so that the UE can access the target cell without reading system information. For some cases, the information required for contention-based and contention-free random access can be included in the RRCReconfiguration message. The access information to the target cell may include beam specific information, if any.\n4.\tThe UE moves the RRC connection to the target gNB and replies with the RRCReconfigurationComplete.\nNOTE 1:\tUser Data can also be sent in step 4 if the grant allows.\nIn case of DAPS handover, the UE continues the downlink user data reception from the source gNB until releasing the source cell and continues the uplink user data transmission to the source gNB until successful random access procedure to the target gNB.\nOnly source and target PCell are used during DAPS handover. CA, DC, SUL, multi-TRP, EHC, CHO, UDC, NR sidelink configurations and V2X sidelink configurations are released by the source gNB before the handover command is sent to the UE and are not configured by the target gNB until the DAPS handover has completed (i.e. at earliest in the same message that releases the source PCell).\nThe handover mechanism triggered by RRC requires the UE at least to reset the MAC entity and re-establish RLC, except for DAPS handover, where upon reception of the handover command, the UE:\n-\tCreates a MAC entity for target;\n-\tEstablishes the RLC entity and an associated DTCH logical channel for target for each DRB configured with DAPS;\n-\tFor each DRB configured with DAPS, reconfigures the PDCP entity with separate security and ROHC functions for source and target and associates them with the RLC entities configured by source and target respectively;\n-\tRetains the rest of the source configurations until release of the source.\nThe cell switch mechanism triggered by MAC, (i.e., LTM cell switch) requires the UE at least to reset the MAC entity. RLC handling depends on the network configuration.\nNOTE 2:\tVoid.\nNOTE 3:\tVoid.\nRRC managed handovers with and without PDCP entity re-establishment are both supported. For DRBs using RLC AM mode, PDCP can either be re-established together with a security key change or initiate a data recovery procedure without a key change. For DRBs using RLC UM mode, PDCP can either be re-established together with a security key change or remain as it is without a key change. For SRBs, PDCP can either remain as it is, discard its stored PDCP PDUs/SDUs without a key change or be re-established together with a security key change.\nData forwarding, in-sequence delivery and duplication avoidance at handover can be guaranteed when the target gNB uses the same DRB configuration as the source gNB.\nTimer based handover failure procedure is supported in NR. RRC connection re-establishment procedure is used for recovering from handover failure except in certain CHO, DAPS handover or LTM cell switch scenarios:\n-\tWhen DAPS handover fails, the UE falls back to the source cell configuration, resumes the connection with the source cell, and reports DAPS handover failure via the source without triggering RRC connection re-establishment if the source link has not been released.\n-\tWhen initial CHO execution attempt fails or HO fails, the UE performs cell selection, and if the selected cell is a CHO candidate and if network configured the UE to try CHO after handover/CHO failure, then the UE attempts CHO execution once, otherwise re-establishment is performed.\n-\tWhen initial LTM execution attempt fails or HO fails, the UE performs cell selection and if the selected cell is an LTM candidate cell and if network configured the UE to try LTM after LTM execution failure, then the UE attempts LTM execution once, otherwise re-establishment is performed.\nDAPS handover for FR2 to FR2 case is not supported in this release of the specification.\nThe handover of the IAB-MT in SA mode follows the same procedure as described for the UE. After the backhaul has been established, the handover of the IAB-MT is part of the intra-CU or inter-CU topology adaptation procedures defined in TS 38.401 [4]. Modifications to the configuration of BAP sublayer and higher protocol layers above the BAP sublayer are described in TS 38.401 [4].\nThe handover of the mobile IAB-MT follows the same procedure as described for the UE. After the backhaul has been established, the handover of the mobile IAB-MT is part of the mobile IAB-MT migration procedure defined in TS 38.401 [4].\nBeam Level Mobility does not require explicit RRC signalling to be triggered. Beam level mobility can be within a cell, or between cells, the latter is referred to as inter-cell beam management (ICBM). For ICBM, a UE can receive or transmit UE dedicated channels/signals via a TRP associated with a PCI different from the PCI of a serving cell, while non-UE-dedicated channels/signals can only be received via a TRP associated with a PCI of the serving cell. The gNB provides via RRC signalling the UE with measurement configuration containing configurations of SSB/CSI resources and resource sets, reports and trigger states for triggering channel and interference measurements and reports. In case of ICBM, a measurement configuration includes SSB resources associated with PCIs different from the PCI of a serving cell. Beam Level Mobility is then dealt with at lower layers by means of physical layer and MAC layer control signalling, and RRC is not required to know which beam is being used at a given point in time.\nSSB-based Beam Level Mobility is based on the CD-SSB associated to the initial DL BWP and can be configured for the initial DL BWPs, for DL BWPs containing the CD-SSB associated to the initial DL BWP, and if supported, for DL BWPs not containing the CD-SSB associated to the initial DL BWP. SSB-based Beam Level Mobility can be also performed based on an NCD-SSB, if configured for the active DL BWP. For other DL BWPs, Beam Level Mobility can only be performed based on CSI-RS, if configured for the active DL BWP.\nThe intra-NR RAN handover performs the preparation and execution phase of the handover procedure performed without involvement of the 5GC, i.e. preparation messages are directly exchanged between the gNBs. The release of the resources at the source gNB during the handover completion phase is triggered by the target gNB. The figure below depicts the basic handover scenario where neither the AMF nor the UPF changes:\nFigure 9.2.3.2.1 -1: Intra-AMF/UPF Handover illustrates the intra-Application and Mobility Management Function (AMF)/User Plane Function (UPF) handover process within a 5G network. The figure depicts the seamless transfer of network control and user data between two or more Access and Mobility Management Function (AMF)/UPF entities, ensuring minimal latency and high throughput for mobile users. Key components include the eMBB (enhanced Mobile Broadband) and URLLC (Ultra-Reliable Low Latency Communications) services, which are supported by the 5G network's advanced features such as network slicing and multi-access edge computing (MEC). The figure highlights the importance of efficient handover management in maintaining a high-quality user experience in dynamic network environments.\nFigure 9.2.3.2.1-1: Intra-AMF/UPF Handover\n0.\tThe UE context within the source gNB contains information regarding roaming and access restrictions which were provided either at connection establishment or at the last TA update.\n1.\tThe source gNB configures the UE measurement procedures and the UE reports according to the measurement configuration.\n2.\tThe source gNB decides to handover the UE, based on MeasurementReport and RRM information.\n3.\tThe source gNB issues a Handover Request message to the target gNB passing a transparent RRC container with necessary information to prepare the handover at the target side. The information includes at least the target cell ID, KgNB*, the C-RNTI of the UE in the source gNB, RRM-configuration including UE inactive time, basic AS-configuration including antenna Info and DL Carrier Frequency, the current QoS flow to DRB mapping rules applied to the UE, the SIB1 information from source gNB, the UE capabilities for different RATs, PDU session related information, and can include the UE reported measurement information including beam-related information if available. The PDU session related information includes the slice information and QoS flow level QoS profile(s). The source gNB may also request a DAPS handover for one or more DRBs.\nNOTE 1:\tAfter issuing a Handover Request, the source gNB should not reconfigure the UE, including performing Reflective QoS flow to DRB mapping.\n4.\tAdmission Control may be performed by the target gNB. Slice-aware admission control shall be performed if the slice information is sent to the target gNB. If the PDU sessions are associated with non-supported slices the target gNB shall reject such PDU Sessions.\n5.\tThe target gNB prepares the handover with L1/L2 and sends the HANDOVER REQUEST ACKNOWLEDGE to the source gNB, which includes a transparent container to be sent to the UE as an RRC message to perform the handover. The target gNB also indicates if a DAPS handover is accepted.\nNOTE 2:\tAs soon as the source gNB receives the HANDOVER REQUEST ACKNOWLEDGE, or as soon as the transmission of the handover command is initiated in the downlink, data forwarding may be initiated.\nNOTE 3:\tFor DRBs configured with DAPS, downlink PDCP SDUs are forwarded with SN assigned by the source gNB, until SN assignment is handed over to the target gNB in step 8b, for which the normal data forwarding follows as defined in 9.2.3.2.3.\n6.\tThe source gNB triggers the Uu handover by sending an RRCReconfiguration message to the UE, containing the information required to access the target cell: at least the target cell ID, the new C-RNTI, the target gNB security algorithm identifiers for the selected security algorithms. It can also include a set of dedicated RACH resources, the association between RACH resources and SSB(s), the association between RACH resources and UE-specific CSI-RS configuration(s), common RACH resources, and system information of the target cell, etc.\nNOTE 4:\tFor DRBs configured with DAPS, the source gNB does not stop transmitting downlink packets until it receives the HANDOVER SUCCESS message from the target gNB in step 8a.\nNOTE 4a:\tCHO cannot be configured simultaneously with DAPS handover.\n7a.\tFor DRBs configured with DAPS, the source gNB sends the EARLY STATUS TRANSFER message. The DL COUNT value conveyed in the EARLY STATUS TRANSFER message indicates PDCP SN and HFN of the first PDCP SDU that the source gNB forwards to the target gNB. The source gNB does not stop assigning SNs to downlink PDCP SDUs until it sends the SN STATUS TRANSFER message to the target gNB in step 8b.\n7.\tFor DRBs not configured with DAPS, the source gNB sends the SN STATUS TRANSFER message to the target gNB to convey the uplink PDCP SN receiver status and the downlink PDCP SN transmitter status of DRBs for which PDCP status preservation applies (i.e. for RLC AM). The uplink PDCP SN receiver status includes at least the PDCP SN of the first missing UL PDCP SDU and may include a bit map of the receive status of the out of sequence UL PDCP SDUs that the UE needs to retransmit in the target cell, if any. The downlink PDCP SN transmitter status indicates the next PDCP SN that the target gNB shall assign to new PDCP SDUs, not having a PDCP SN yet.\nNOTE 5:\tIn case of DAPS handover, the uplink PDCP SN receiver status and the downlink PDCP SN transmitter status for a DRB with RLC-AM and not configured with DAPS may be transferred by the SN STATUS TRANSFER message in step 8b instead of step 7.\nNOTE 6:\tFor DRBs configured with DAPS, the source gNB may additionally send the EARLY STATUS TRANSFER message(s) between step 7 and step 8b, to inform discarding of already forwarded PDCP SDUs. The target gNB does not transmit forwarded downlink PDCP SDUs to the UE, whose COUNT is less than the conveyed DL COUNT value and discards them if transmission has not been attempted already.\n8.\tThe UE synchronises to the target cell and completes the RRC handover procedure by sending RRCReconfigurationComplete message to target gNB. In case of DAPS handover, the UE does not detach from the source cell upon receiving the RRCReconfiguration message. The UE releases the source resources and configurations and stops DL/UL reception/transmission with the source upon receiving an explicit release from the target node.\nNOTE 6a:\tFrom RAN point of view, the DAPS handover is considered to only be completed after the UE has released the source cell as explicitly requested from the target node. RRC suspend, a subsequent handover or inter-RAT handover cannot be initiated until the source cell has been released.\n8a/b\tIn case of DAPS handover, the target gNB sends the HANDOVER SUCCESS message to the source gNB to inform that the UE has successfully accessed the target cell. In return, the source gNB sends the SN STATUS TRANSFER message for DRBs configured with DAPS for which the description in step 7 applies, and the normal data forwarding follows as defined in 9.2.3.2.3.\nNOTE 7:\tThe uplink PDCP SN receiver status and the downlink PDCP SN transmitter status are also conveyed for DRBs with RLC-UM in the SN STATUS TRANSFER message in step 8b, if configured with DAPS.\nNOTE 8:\tFor DRBs configured with DAPS, the source gNB does not stop delivering uplink QoS flows to the UPF until it sends the SN STATUS TRANSFER message in step 8b. The target gNB does not forward QoS flows of the uplink PDCP SDUs successfully received in-sequence to the UPF until it receives the SN STATUS TRANSFER message, in which UL HFN and the first missing SN in the uplink PDCP SN receiver status indicates the start of uplink PDCP SDUs to be delivered to the UPF. The target gNB does not deliver any uplink PDCP SDUs which has an UL COUNT lower than the provided.\nNOTE 9:\tVoid.\n9.\tThe target gNB sends a PATH SWITCH REQUEST message to AMF to trigger 5GC to switch the DL data path towards the target gNB and to establish an NG-C interface instance towards the target gNB.\n10.\t5GC switches the DL data path towards the target gNB. The UPF sends one or more \"end marker\" packets on the old path to the source gNB per PDU session/tunnel and then can release any U-plane/TNL resources towards the source gNB.\n11.\tThe AMF confirms the PATH SWITCH REQUEST message with the PATH SWITCH REQUEST ACKNOWLEDGE message.\n12.\tUpon reception of the PATH SWITCH REQUEST ACKNOWLEDGE message from the AMF, the target gNB sends the UE CONTEXT RELEASE to inform the source gNB about the success of the handover. The source gNB can then release radio and C-plane related resources associated to the UE context. Any ongoing data forwarding may continue.\nThe RRM configuration can include both beam measurement information (for layer 3 mobility) associated to SSB(s) and CSI-RS(s) for the reported cell(s) if both types of measurements are available. Also, if CA is configured, the RRM configuration can include the list of best cells on each frequency for which measurement information is available. And the RRM measurement information can also include the beam measurement for the listed cells that belong to the target gNB.\nThe common RACH configuration for beams in the target cell is only associated to the SSB(s). The network can have dedicated RACH configurations associated to the SSB(s) and/or have dedicated RACH configurations associated to CSI-RS(s) within a cell. The target gNB can only include one of the following RACH configurations in the Handover Command to enable the UE to access the target cell:\ni)\tCommon RACH configuration;\nii)\tCommon RACH configuration + Dedicated RACH configuration associated with SSB;\niii)\tCommon RACH configuration + Dedicated RACH configuration associated with CSI-RS.\nThe dedicated RACH configuration allocates RACH resource(s) together with a quality threshold to use them. When dedicated RACH resources are provided, they are prioritized by the UE and the UE shall not switch to contention-based RACH resources as long as the quality threshold of those dedicated resources is met. The order to access the dedicated RACH resources is up to UE implementation.\nUpon receiving a handover command requesting DAPS handover, the UE suspends source cell SRBs, stops sending and receiving any RRC control plane signalling toward the source cell, and establishes SRBs for the target cell. The UE releases the source cell SRBs configuration upon receiving source cell release indication from the target cell after successful DAPS handover execution. When DAPS handover to the target cell fails and if the source cell link is available, then the UE reverts back to the source cell configuration and resumes source cell SRBs for control plane signalling transmission.\nThe U-plane handling during the Intra-NR-Access mobility activity for UEs in RRC_CONNECTED takes the following principles into account to avoid data loss during HO:\n-\tDuring HO preparation, U-plane tunnels can be established between the source gNB and the target gNB;\n-\tDuring HO execution, user data can be forwarded from the source gNB to the target gNB;\n-\tForwarding should take place in order as long as packets are received at the source gNB from the UPF or the source gNB buffer has not been emptied.\n-\tDuring HO completion:\n-\tThe target gNB sends a path switch request message to the AMF to inform that the UE has gained access and the AMF then triggers path switch related 5GC internal signalling and actual path switch of the source gNB to the target gNB in UPF;\n-\tThe source gNB should continue forwarding data as long as packets are received at the source gNB from the UPF or the source gNB buffer has not been emptied.\nFor RLC-AM bearers:\n-\tFor in-sequence delivery and duplication avoidance, PDCP SN is maintained on a per DRB basis and the source gNB informs the target gNB about the next DL PDCP SN to allocate to a packet which does not have a PDCP sequence number yet (either from source gNB or from the UPF).\n-\tFor security synchronisation, HFN is also maintained and the source gNB provides to the target one reference HFN for the UL and one for the DL i.e. HFN and corresponding SN.\n-\tIn both the UE and the target gNB, a window-based mechanism is used for duplication detection and reordering.\n-\tThe occurrence of duplicates over the air interface in the target gNB is minimised by means of PDCP SN based reporting at the target gNB by the UE. In uplink, the reporting is optionally configured on a per DRB basis by the gNB and the UE should first start by transmitting those reports when granted resources are in the target gNB. In downlink, the gNB is free to decide when and for which bearers a report is sent and the UE does not wait for the report to resume uplink transmission.\n-\tThe target gNB re-transmits and prioritizes all downlink data forwarded by the source gNB (i.e. the target gNB should first send all forwarded PDCP SDUs with PDCP SNs, then all forwarded downlink PDCP SDUs without SNs before sending new data from 5GC), excluding PDCP SDUs for which the reception was acknowledged through PDCP SN based reporting by the UE.\nNOTE 1:\tLossless delivery when a QoS flow is mapped to a different DRB at handover, requires the old DRB to be configured in the target cell. For in-order delivery in the DL, the target gNB should first transmit the forwarded PDCP SDUs on the old DRB before transmitting new data from 5GC on the new DRB. In the UL, the target gNB should not deliver data of the QoS flow from the new DRB to 5GC before receiving the end marker on the old DRB from the UE.\n-\tThe UE re-transmits in the target gNB all uplink PDCP SDUs starting from the oldest PDCP SDU that has not been acknowledged at RLC in the source, excluding PDCP SDUs for which the reception was acknowledged through PDCP SN based reporting by the target.\n-\tIn case of handovers involving Full Configuration, the following description below for RLC-UM bearers applies for RLC-AM bearers instead. Data loss may happen.\nFor RLC-UM bearers:\n-\tThe PDCP SN and HFN are reset in the target gNB, unless the bearer is configured with DAPS handover;\n-\tNo PDCP SDUs are retransmitted in the target gNB;\n-\tThe target gNB prioritises all downlink SDAP SDUs forwarded by the source gNB over the data from the core network;\nNOTE 2:\tTo minimise losses when a QoS flow is mapped to a different DRB at handover, the old DRB needs to be configured in the target cell. For in-order delivery in the DL, the target gNB should first transmit the forwarded PDCP SDUs on the old DRB before transmitting new data from 5GC on the new DRB. In the UL, the target gNB should not deliver data of the QoS flow from the new DRB to 5GC before receiving the end marker on the old DRB from the UE.\n-\tThe UE does not retransmit any PDCP SDU in the target cell for which transmission had been completed in the source cell.\nFor DAPS handover:\nA DAPS handover can be used for an RLC-AM or RLC-UM bearer. For a DRB configured with DAPS, the following principles are additionally applied.\nDownlink:\n-\tDuring HO preparation, a forwarding tunnel is always established.\n-\tThe source gNB is responsible for allocating downlink PDCP SNs until the SN assignment is handed over to the target gNB and data forwarding in 9.2.3.2.3 takes place. That is, the source gNB does not stop assigning PDCP SNs to downlink packets until it receives the HANDOVER SUCCESS message and sends the SN STATUS TRANSFER message to the target gNB.\n-\tUpon allocation of downlink PDCP SNs by the source gNB, it starts scheduling downlink data on the source radio link and also starts forwarding downlink PDCP SDUs along with assigned PDCP SNs to the target gNB.\n-\tFor security synchronisation, HFN is maintained for the forwarded downlink SDUs with PDCP SNs assigned by the source gNB. The source gNB sends the EARLY STATUS TRANSFER message to convey the DL COUNT value, indicating PDCP SN and HFN of the first PDCP SDU that the source gNB forwards to the target gNB.\n-\tHFN and PDCP SN are maintained after the SN assignment is handed over to the target gNB. The SN STATUS TRANSFER message indicates the next DL PDCP SN to allocate to a packet which does not have a PDCP sequence number yet, even for RLC-UM.\n-\tDuring handover execution period, the source and target gNBs separately perform ROHC header compression, ciphering, and adding PDCP header.\n-\tDuring handover execution period, the UE continues to receive downlink data from both source and target gNBs until the source gNB connection is released by an explicit release command from the target gNB.\n-\tDuring handover execution period, the UE PDCP entity configured with DAPS maintains separate security and ROHC header decompression functions associated with each gNB, while maintaining common functions for reordering, duplicate detection and discard, and PDCP SDUs in-sequence delivery to upper layers. PDCP SN continuity is supported for both RLC AM and UM DRBs configured with DAPS.\nUplink:\n-\tThe UE transmits UL data to the source gNB until the random access procedure toward the target gNB has been successfully completed. Afterwards the UE switches its UL data transmission to the target gNB.\n-\tEven after switching its UL data transmissions towards the target gNB, the UE continues to send UL layer 1 CSI feedback, HARQ feedback, layer 2 RLC feedback, ROHC feedback, HARQ data (re-)transmissions, and RLC data (re-)transmissions to the source gNB.\n-\tDuring handover execution period, the UE maintains separate security context and ROHC header compressor context for uplink transmissions towards the source and target gNBs. The UE maintains common UL PDCP SN allocation. PDCP SN continuity is supported for both RLC AM and UM DRBs configured with DAPS.\n-\tDuring handover execution period, the source and target gNBs maintain their own security and ROHC header decompressor contexts to process UL data received from the UE.\n-\tThe establishment of a forwarding tunnel is optional.\n-\tHFN and PDCP SN are maintained in the target gNB. The SN STATUS TRANSFER message indicates the COUNT of the first missing PDCP SDU that the target should start delivering to the 5GC, even for RLC-UM.\nThe following description depicts the data forwarding principles for intra-system handover.\nThe source NG-RAN node may suggest downlink data forwarding per QoS flow established for a PDU session and may provide information how it maps QoS flows to DRBs. The target NG-RAN node decides data forwarding per QoS flow established for a PDU Session.\nIf \"lossless handover\" is required and the QoS flows to DRB mapping applied at the target NG-RAN node allows applying for data forwarding the same QoS flows to DRB mapping as applied at the source NG-RAN node for a DRB and if all QoS flows mapped to that DRB are accepted for data forwarding, the target NG-RAN node establishes a downlink forwarding tunnel for that DRB.\nFor a DRB for which preservation of SN status applies, the target NG-RAN node may decide to establish an UL data forwarding tunnel.\nThe target NG-RAN node may also decide to establish a downlink forwarding tunnel for each PDU session. In this case the target NG-RAN node provides information for which QoS flows data forwarding has been accepted and corresponding UP TNL information for data forwarding tunnels to be established between the source NG-RAN node and the target NG-RAN node.\nIf QoS flows have been re-mapped at the source NG-RAN node and user packets along the old source mapping are still being processed at handover preparation, and if the source NG-RAN node has not yet received the SDAP end marker for certain QoS flows when providing the SN status to the target NG-RAN node, the source NG-RAN node provides the old side QoS mapping information for UL QoS flows to the target NG-RAN node for which no SDAP end marker was yet received. The target NG-RAN will receive for those QoS flows the end marker when the UE finalises to send UL user data according to the old source side mapping.\nThe source NG-RAN node may also propose to establish uplink forwarding tunnels for some PDU sessions in order to transfer SDAP SDUs corresponding to QoS flows for which flow re-mapping happened before the handover and the SDAP end marker has not yet been received, and for which user data was received at the source NG-RAN node via the DRB to which the QoS flow was remapped. If accepted the target NG-RAN node shall provide the corresponding UP TNL information for data forwarding tunnels to be established between the source NG-RAN node and the target NG-RAN node.\nAs long as data forwarding of DL user data packets takes place, the source NG-RAN node shall forward user data in the same forwarding tunnel, i.e.\n-\tfor any QoS flow accepted for data forwarding by the target NG-RAN node and for which a DRB DL forwarding tunnel was established for a DRB to which this QoS flow was mapped at the source NG-RAN node, any fresh packets of this QoS flow shall be forwarded as PDCP SDUs via the mapped DRB DL forwarding tunnel.\n-\tfor DRBs for which preservation of SN status applies, the source NG-RAN node may forward in order to the target NG-RAN node via the DRB DL forwarding tunnel all downlink PDCP SDUs with their SN corresponding to PDCP PDUs which have not been acknowledged by the UE.\nNOTE:\tThe SN of forwarded PDCP SDUs is carried in the \"PDCP PDU number\" field of the GTP-U extension header.\n-\tfor any QoS flow accepted for data forwarding by the target NG-RAN node for which a DL PDU session forwarding tunnel was established, the source NG-RAN node forwards SDAP SDUs as received on NG-U from the UPF.\nFor handovers involving Full Configuration, the source NG-RAN node behaviour is unchanged from the description above. In case a DRB DL forwarding tunnel was established, the target NG-RAN node may identify the PDCP SDUs for which delivery was attempted by the source NG-RAN node, by the presence of the PDCP SN in the forwarded GTP-U packet and may discard them.\nAs long as data forwarding of UL user data packets takes place for DRBs for which preservation of SN status applies the source NG-RAN node either:\n-\tdiscards the uplink PDCP PDUs received out of sequence if the source NG-RAN node has not accepted the request from the target NG-RAN node for uplink forwarding or if the target NG-RAN node has not requested uplink forwarding for the bearer during the Handover Preparation procedure; or\n-\tforwards to the target NG-RAN node via the corresponding DRB UL forwarding tunnel, the uplink PDCP SDUs with their SN corresponding to PDCP PDUs received out of sequence if the source NG-RAN node has accepted the request from the target NG-RAN node for uplink forwarding for the bearer during the Handover Preparation procedure, including PDCP SDUs corresponding to user data of those QoS flows, for which re-mapping happened for a QoS flow before the handover and the SDAP end marker has not yet been received at the source NG-RAN node.\nAs long as data forwarding of UL user data packets takes place for a PDU session, the source NG-RAN node forwards via the corresponding PDU session UL forwarding tunnel, the uplink SDAP SDUs corresponding to QoS flows for which flow re-mapping happened before the handover and the SDAP end marker has not yet been received at the source NG-RAN node, and which were received at the source NG-RAN node via the DRB to which the QoS flow was remapped.\nFor DRBs configured with DAPS handover, data forwarding after the source gNB receives the HANDOVER SUCCESS message from the target gNB follows the same behaviours as described above.\nFor DRBs configured with DAPS handover, before the source gNB receives the HANDOVER SUCCESS message:\n-\tThe source gNB may forward to the target gNB downlink PDCP SDUs with SNs assigned by the source gNB. No downlink PDCP SDU without a SN assigned or SDAP SDU is forwarded. No uplink PDCP SDU or SDAP SDU is forwarded.\n-\tThe source gNB sends the EARLY STATUS TRANSFER message to maintain HFN continuity by indicating PDCP SN and HFN of the first PDCP SDU that the source gNB forwards to the target gNB. The subsequent messages may be sent for discarding of already forwarded downlink PDCP SDUs in the target gNB.\n-\tThe source gNB does not stop transmitting downlink packets to the UE. The source gNB keeps forwarding to the 5GC the uplink SDAP SDUs successfully received in-sequence from the UE.\nHandling of end marker packets:\n-\tThe source NG-RAN node receives one or several GTP-U end marker packets per PDU session from the UPF and replicates the end marker packets into each data forwarding tunnel when no more user data packets are to be forwarded over that tunnel.\n-\tEnd marker packets sent via a data forwarding tunnel are applicable to all QoS flows forwarded via that tunnel. After end marker packets have been received over a forwarding tunnel, the target NG-RAN node can start taking into account the packets of QoS flows associated with that forwarding tunnel received at the target NG-RAN node from the NG-U PDU session tunnel.\nA UE in RRC_CONNECTED may initiate the re-establishment procedure to continue the RRC connection when a failure condition occurs (e.g. radio link failure, reconfiguration failure, integrity check failure…).\nThe following figure describes the re-establishment procedure started by the UE:\nFigure 9.2.3.3-1 illustrates the re-establishment procedure for a telecommunication system, depicting the steps taken to recover communication after a disruption. The figure shows the initial connection between the sender and receiver, followed by the disruption event, and finally the re-establishment process. Key components include the sender, receiver, and various telecommunication nodes that facilitate the re-establishment. The figure highlights the importance of efficient re-establishment strategies in maintaining uninterrupted communication in telecommunication systems.\nFigure 9.2.3.3-1: Re-establishment procedure\n1.\tThe UE re-establishes the connection, providing the UE Identity (PCI+C-RNTI) to the gNB where the trigger for the re-establishment occurred.\n2.\tIf the UE Context is not locally available, the gNB, requests the last serving gNB to provide UE Context data.\n3.\tThe last serving gNB provides UE context data.\n4/4a. The gNB continues the re-establishment of the RRC connection. The message is sent on SRB1.\n5/5a. The gNB may perform the reconfiguration to re-establish SRB2 and DRBs when the re-establishment procedure is ongoing.\n6/7.\tIf loss of user data buffered in the last serving gNB shall be prevented, the gNB provides forwarding addresses, and the last serving gNB provides the SN status to the gNB.\n8/9. The gNB performs path switch.\n10.\tThe gNB triggers the release of the UE resources at the last serving gNB.\nThe IAB-MT in SA mode follows the same re-establishment procedure as described for the UE. After the backhaul has been established, the re-establishment procedure of the IAB-MT is part of the intra-CU backhaul RLF recovery procedure for IAB-nodes defined in TS 38.401 [4]. Modifications to the configuration of BAP sublayer and higher protocol layers above the BAP sublayer are described in TS 38.401 [4].\nA Conditional Handover (CHO) is defined as a handover that is executed by the UE when one or more handover execution conditions are met. The UE starts evaluating the execution condition(s) upon receiving the CHO configuration, and stops evaluating the execution condition(s) once a handover is executed.\nThe following principles apply to CHO:\n-\tThe CHO configuration contains the configuration of CHO candidate cell(s) generated by the candidate gNB(s) and execution condition(s) generated by the source gNB.\n-\tAn execution condition may consist of one or two trigger condition(s) (CHO events A3/A5, as defined in [12]). Only single RS type is supported and at most two different trigger quantities (e.g. RSRP and RSRQ, RSRP and SINR, etc.) can be configured simultaneously for the evalution of CHO execution condition of a single candidate cell.\n-\tBefore any CHO execution condition is satisfied, upon reception of HO command (without CHO configuration), the UE executes the HO procedure as described in clause 9.2.3.2, regardless of any previously received CHO configuration.\n-\tWhile executing CHO, i.e. from the time when the UE starts synchronization with target cell, UE does not monitor source cell.\nCHO is also supported for the IAB-MT in context of intra- and inter-donor IAB-node migration and BH RLF recovery.\nCHO is not supported for NG-C based handover in this release of the specification.\nAs in intra-NR RAN handover, in intra-NR RAN CHO, the preparation and execution phase of the conditional handover procedure is performed without involvement of the 5GC; i.e. preparation messages are directly exchanged between gNBs. The release of the resources at the source gNB during the conditional handover completion phase is triggered by the target gNB. The figure below depicts the basic conditional handover scenario where neither the AMF nor the UPF changes:\nFigure 9.2.3.4.2-1 illustrates the intra-Application and Mobility Management Function (AMF)/User Plane Function (UPF) conditional handover process. The figure depicts the flow of data packets within the 5G network, showing how the AMF and UPF collaborate to ensure seamless connectivity. The figure highlights the role of the Mobility Management Entity (MME) in coordinating handovers, while also emphasizing the importance of low latency and high throughput in 5G network operations. The figure is a valuable resource for understanding the intricate details of 5G network management and the critical role of the AMF and UPF in maintaining high-quality connections.\nFigure 9.2.3.4.2-1: Intra-AMF/UPF Conditional Handover\n0/1.\tSame as step 0, 1 in Figure 9.2.3.2.1-1 of clause 9.2.3.2.1.\n2.\tThe source gNB decides to use CHO.\n3.\tThe source gNB requests CHO for one or more candidate cells belonging to one or more candidate gNBs. A CHO request message is sent for each candidate cell.\n4.\tSame as step 4 in Figure 9.2.3.2.1-1 of clause 9.2.3.2.1.\n5.\tThe candidate gNB(s) sends CHO response (HO REQUEST ACKNOWLEDGE) including configuration of CHO candidate cell(s) to the source gNB. The CHO response message is sent for each candidate cell.\n6.\tThe source gNB sends an RRCReconfiguration message to the UE, containing the configuration of CHO candidate cell(s) and CHO execution condition(s).\nNOTE 1:\tCHO configuration of candidate cells can be followed by another reconfiguration from the source gNB.\nNOTE 1a:\tA configuration of a CHO candidate cell cannot contain a DAPS handover configuration.\n7.\tThe UE sends an RRCReconfigurationComplete message to the source gNB.\n7a\tIf early data forwarding is applied, the source gNB sends the EARLY STATUS TRANSFER message.\n8.\tThe UE maintains connection with the source gNB after receiving CHO configuration, and starts evaluating the CHO execution conditions for the candidate cell(s). If at least one CHO candidate cell satisfies the corresponding CHO execution condition, the UE detaches from the source gNB, applies the stored corresponding configuration for that selected candidate cell, synchronises to that candidate cell and completes the RRC handover procedure by sending RRCReconfigurationComplete message to the target gNB. The UE releases stored CHO configurations after successful completion of RRC handover procedure.\n8a/b\tThe target gNB sends the HANDOVER SUCCESS message to the source gNB to inform that the UE has successfully accessed the target cell. In return, the source gNB sends the SN STATUS TRANSFER message following the principles described in step 7 of Intra-AMF/UPF Handover in clause 9.2.3.2.1.\nNOTE 2:\tLate data forwarding may be initiated as soon as the source gNB receives the HANDOVER SUCCESS message.\n8c.\tThe source gNB sends the HANDOVER CANCEL message toward the other signalling connections or other candidate target gNBs, if any, to cancel CHO for the UE.\nThe U-plane handling for Conditional Handover follows the same principles for DAPS handover in 9.2.3.2.2, if early data forwarding is applied, except that, in case of Full Configuration, HFN and PDCP SN are reset in the target gNB after the SN assignment is handed over to the target gNB. If late data forwarding is applied, the U-plane handling follows the RLC-AM or RLC-UM bearer principles defined in 9.2.3.2.2.\nIf late data forwarding is applied, the source NG-RAN node initiates data forwarding once it knows which target NG-RAN node the UE has successfully accessed. In that case the behavior of the Conditional Handover data forwarding follows the same behavior as defined in 9.2.3.2.3 for the intra-system handover data forwarding, except the behavior for DRBs configured with DAPS handover.\nIf early data forwarding is applied instead, the source NG-RAN node initiates data forwarding before the UE executes the handover, to a candidate target node of interest. The behavior of early data forwarding for the Conditional Handover follows the same principles for DRBs configured with DAPS handover in the intra-system handover as defined in 9.2.3.2.3.\nLTM is a procedure in which a gNB receives L1 measurement report(s) from a UE, and on their basis the gNB changes UE serving cell by a cell switch command signalled via a MAC CE. The cell switch command indicates an LTM candidate configuration that the gNB previously prepared and provided to the UE through RRC signalling. Then the UE switches to the target configuration according to the cell switch command. The LTM procedure can be used to reduce the mobility latency as described in Annex G.\nWhen configured by the network, it is possible to activate TCI states of one or multiple cells that are different from the current serving cell. For instance, the TCI states of the LTM candidate cells can be activated in advance before any of those cells become the serving cell. This allows the UE to be DL synchronized with those cells, thereby facilitating a faster cell switch to one of those cells when cell switch is triggered.\nWhen configured by the network, it is possible to initiate UL TA acquisition (called early TA) procedure of one or multiple cells that are different from the current serving cells. If the cell has the same NTA as the current serving cells or NTA=0, early TA acquisition procedure is not required. The network may request the UE to perform early TA acquisition of a candidate cell before a cell switch. The early TA acquisition procedure is triggered by PDCCH order as specified in clause 9.2.6 or realized through UE-based TA measurement as configured by RRC. In the former case, the gNB to which the candidate cell belongs calculates the TA value and sends it to the gNB to which the serving cell belongs. The serving cell sends the TA value in the LTM cell switch command MAC CE when triggering LTM cell switch. In the latter case, the UE performs TA measurement for the candidate cells after being configured by RRC but the exact time the UE performs TA measurement is up to UE implementation. The UE applies the TA value measured by itself and performs RACH-less LTM upon receiving the cell switch command. The network may also send a TA value in the LTM cell switch command MAC CE without early TA acquisition.\nDepending on the availability of a valid TA value, the UE performs either a RACH-less LTM or RACH-based LTM cell switch. If the TA value is provided in the cell switch command, the UE applies the TA value as instructed by the network. In the case where UE-based TA measurement is configured, but no TA value is provided in the cell switch command, the UE applies the TA value by itself if available. Meanwhile, the UE performs RACH-less LTM cell switch upon receiving the cell switch command. If no valid TA value is available, the UE performs RACH-based LTM cell switch.\nRegardless of whether the UE is configured for UE-based TA measurement for a certain candidate cell, it will still follow the PDCCH order, which includes requesting a random access procedure towards the candidate cells. This also applies to the candidate cells for which the UE is capable of deriving TA values by itself. Additionally, regardless of whether the UE has already performed a random access procedure towards the candidate cells, it will still follow the UE-based measurement configuration if configured by the network.\nFor RACH-less LTM, the UE accesses the target cell using either a configured grant or a dynamic grant. The configured grant is provided in the LTM candidate configuration, and the UE selects the configured grant occasion associated with the beam indicated in the cell switch command. Upon initiation of LTM cell switch to the target cell, the UE starts to monitor PDCCH on the target cell for dynamic scheduling. Before RACH-less LTM procedure completion, the UE shall not trigger random access procedure if it does not have a valid PUCCH resource for triggered SRs.\nThe following principles apply to LTM:\n-\tSecurity key is maintained upon an LTM cell switch;\n-\tSubsequent LTM is supported.\nLTM supports both intra-gNB-DU and intra-gNB-CU inter-gNB-DU mobility. LTM supports both intra-frequency and inter-frequency mobility, including mobility to inter-frequency cell that is not a current serving cell. LTM is supported only for licensed spectrum. The following scenarios are supported:\n-\tPCell change in non-CA scenario and non-DC scenario;\n-\tPCell and SCell(s) change in CA scenario;\n-\tDual connectivity scenario, PCell and MCG SCell(s) change and intra-SN PSCell and SCG SCell(s) change without MN involvement. LTM for simultaneous PCell and PSCell change is not supported.\nWhile the UE has stored LTM candidate configurations the UE can also execute any L3 handover command sent by the network.\nCell switch command is conveyed in a MAC CE, which contains the necessary information to perform the LTM cell switch.\nThe overall procedure for LTM is shown in Figure 9.2.3.5.2-1 below. Subsequent LTM is done by repeating the early synchronization, LTM cell switch execution, and LTM cell switch completion steps without releasing other LTM candidate configurations after each LTM cell switch completion. The general procedure over the air interface is applicable to SCG LTM. Further details of SCG LTM can be found in TS 37.340 [21].\nFigure 9.2.3.5 .2-1 illustrates the signal ing procedure for LTM, showcasing the various stages of signal processing and analysis. The figure begins with the reception of signals from multiple sources, represented by the various input points. These signals are then directed through a series of filters and amplifiers, as indicated by the arrows and labeled components. The processed signals are then subjected to further analysis and processing steps, such as modulation and demodulation, before being transmitted to the intended destination. The figure emphasizes the importance of efficient signal processing in modern communication systems, highlighting the need for advanced techniques to handle the increasing complexity and volume of data transmitted.\nFigure 9.2.3.5.2-1. Signalling procedure for LTM\nThe procedure for LTM is as follows:\n1.\tThe UE sends a MeasurementReport message to the gNB. The gNB decides to configure LTM and initiates LTM preparation.\n2.\tThe gNB transmits an RRCReconfiguration message to the UE including the LTM candidate configurations.\n3.\tThe UE stores the LTM candidate configurations and transmits an RRCReconfigurationComplete message to the gNB.\n4a.\tThe UE performs DL synchronization with the candidate cell(s) before receiving the cell switch command.\n4b.\tWhen UE-based TA measurement is configured, UE acquires the TA value(s) of the candidate cell(s) by measurement. UE performs early TA acquisition with the candidate cell(s) as requested by the network before receiving the cell switch command as specified in clause 9.2.6. This is done via CFRA triggered by a PDCCH order from the source cell, following which the UE sends preamble towards the indicated candidate cell. In order to minimize the data interruption of the source cell due to CFRA towards the candidate cell(s), the UE does not receive random access response from the network for the purpose of TA value acquisition and the TA value of the candidate cell is indicated in the cell switch command. The UE does not maintain the TA timer for the candidate cell and relies on network implementation to guarantee the TA validity.\n5.\tThe UE performs L1 measurements on the configured candidate cell(s) and transmits L1 measurement reports to the gNB. L1 measurement should be performed as long as RRC reconfiguration (step 2) is applicable.\n6.\tThe gNB decides to execute cell switch to a target cell and transmits a MAC CE triggering cell switch by including the candidate configuration index of the target cell. The UE switches to the target cell and applies the configuration indicated by candidate configuration index.\n7.\tThe UE performs the random access procedure towards the target cell, if UE does not have valid TA of the target cell as specified in clause 6.1.3.xy of TS 38.321[6].\n8.\tThe UE completes the LTM cell switch procedure by sending RRCReconfigurationComplete message to target cell. If the UE has performed a RA procedure in step 7 the UE considers that LTM cell switch execution is successfully completed when the random access procedure is successfully completed. For RACH-less LTM, the UE considers that LTM cell switch execution is successfully completed when the UE determines that the network has successfully received its first UL data.\nThe steps 4-8 can be performed multiple times for subsequent LTM using the LTM candidate configuration(s) provided in step 2.\nThe procedure over the air interface described in Figure x is applicable to both intra-gNB-DU LTM and inter-gNB-DU LTM. The overall LTM procedures over F1-C interface are captured in TS 38.401[4].\nAfter receiving an LTM cell switch command MAC CE, the UE performs MAC reset. Whether the UE performs RLC re-establishment and PDCP data recovery during cell switch is explicitly controlled by the network through RRC signalling.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "9.2.4\tMeasurements",
                            "text_content": "In RRC_CONNECTED, the UE measures multiple beams (at least one) of a cell and the measurements results (power values) are averaged to derive the cell quality. In doing so, the UE is configured to consider a subset of the detected beams. Filtering takes place at two different levels: at the physical layer to derive beam quality and then at RRC level to derive cell quality from multiple beams. Cell quality from beam measurements is derived in the same way for the serving cell(s) and for the non-serving cell(s). Measurement reports may contain the measurement results of the X best beams if the UE is configured to do so by the gNB.\nThe corresponding high-level measurement model is described below:\nFigure 9.2.4-1 illustrates a measurement model for a telecommunication system, depicting various components and their interactions. The model showcases the input signal, which is received by a sensor, processed by a pre-amplifier, and then sent through a transmission line. Along the transmission line, the signal is amplified and filtered by a power amplifier and a filter, respectively. The amplified and filtered signal is then transmitted through a transmitter, which modulates the signal and converts it into a radio frequency (RF) signal. This RF signal is then transmitted through a transmission medium, such as a wireless network, and received by a receiver. The receiver demodulates the signal and converts it back into the original form, which is then processed by a post-amplifier and a power supply. The output of the power supply is then sent to a display, which shows the measured value. The model also includes a clock, which provides timing information to the system. Overall, the model provides a comprehensive overview of the measurement process in a telecommunication system.\nFigure 9.2.4-1: Measurement Model\nNOTE 1:\tK beams correspond to the measurements on SSB or CSI-RS resources configured for L3 mobility by gNB and detected by UE at L1.\n-\tA: measurements (beam specific samples) internal to the physical layer.\n-\tLayer 1 filtering: internal layer 1 filtering of the inputs measured at point A. Exact filtering is implementation dependent. How the measurements are actually executed in the physical layer by an implementation (inputs A and Layer 1 filtering) is not constrained by the standard.\n-\tA1: measurements (i.e. beam specific measurements) reported by layer 1 to layer 3 after layer 1 filtering.\n-\tBeam Consolidation/Selection: beam specific measurements are consolidated to derive cell quality. The behaviour of the Beam consolidation/selection is standardised and the configuration of this module is provided by RRC signalling. Reporting period at B equals one measurement period at A1.\n-\tB: a measurement (i.e. cell quality) derived from beam-specific measurements reported to layer 3 after beam consolidation/selection.\n-\tLayer 3 filtering for cell quality: filtering performed on the measurements provided at point B. The behaviour of the Layer 3 filters is standardised and the configuration of the layer 3 filters is provided by RRC signalling. Filtering reporting period at C equals one measurement period at B.\n-\tC: a measurement after processing in the layer 3 filter. The reporting rate is identical to the reporting rate at point B. This measurement is used as input for one or more evaluation of reporting criteria.\n-\tEvaluation of reporting criteria: checks whether actual measurement reporting is necessary at point D. The evaluation can be based on more than one flow of measurements at reference point C e.g. to compare between different measurements. This is illustrated by input C and C1. The UE shall evaluate the reporting criteria at least every time a new measurement result is reported at point C, C1. The reporting criteria are standardised and the configuration is provided by RRC signalling (UE measurements).\n-\tD: measurement report information (message) sent on the radio interface.\n-\tL3 Beam filtering: filtering performed on the measurements (i.e. beam specific measurements) provided at point A1. The behaviour of the beam filters is standardised and the configuration of the beam filters is provided by RRC signalling. Filtering reporting period at E equals one measurement period at A1.\n-\tE: a measurement (i.e. beam-specific measurement) after processing in the beam filter. The reporting rate is identical to the reporting rate at point A1. This measurement is used as input for selecting the X measurements to be reported.\n-\tBeam Selection for beam reporting: selects the X measurements from the measurements provided at point E. The behaviour of the beam selection is standardised and the configuration of this module is provided by RRC signalling.\n-\tF: beam measurement information included in measurement report (sent) on the radio interface.\nLayer 1 filtering introduces a certain level of measurement averaging. How and when the UE exactly performs the required measurements is implementation specific to the point that the output at B fulfils the performance requirements set in TS 38.133 [13]. Layer 3 filtering for cell quality and related parameters used are specified in TS 38.331 [12] and do not introduce any delay in the sample availability between B and C. Measurement at point C, C1 is the input used in the event evaluation. L3 Beam filtering and related parameters used are specified in TS 38.331 [12] and do not introduce any delay in the sample availability between E and F.\nMeasurement reports are characterized by the following:\n-\tMeasurement reports include the measurement identity of the associated measurement configuration that triggered the reporting;\n-\tCell and beam measurement quantities to be included in measurement reports are configured by the network;\n-\tThe number of non-serving cells to be reported can be limited through configuration by the network;\n-\tCells belonging to an exclude-list configured by the network are not used in event evaluation and reporting, and conversely when an allow-list is configured by the network, only the cells belonging to the allow-list are used in event evaluation and reporting;\n-\tBeam measurements to be included in measurement reports are configured by the network (beam identifier only, measurement result and beam identifier, or no beam reporting).\nIntra-frequency neighbour (cell) measurements and inter-frequency neighbour (cell) measurements are defined as follows:\n-\tSSB based intra-frequency measurement: a measurement is defined as an SSB based intra-frequency measurement provided the center frequency of the SSB of the serving cell and the center frequency of the SSB of the neighbour cell are the same, and the subcarrier spacing of the two SSBs is also the same.\n-\tSSB based inter-frequency measurement: a measurement is defined as an SSB based inter-frequency measurement provided the center frequency of the SSB of the serving cell and the center frequency of the SSB of the neighbour cell are different, or the subcarrier spacing of the two SSBs is different.\nNOTE 2:\tFor SSB based measurements, one measurement object corresponds to one SSB and the UE considers different SSBs as different cells.\nNOTE 2a:\tIf a UE is configured to perform serving cell measurements based on an NCD-SSB configured in its active BWP, this NCD-SSB is considered as the SSB of the serving cell in the definition of intra-frequency and inter-frequency measurements as above.\n-\tCSI-RS based intra-frequency measurement: a measurement is defined as a CSI-RS based intra-frequency measurement provided that:\n-\tThe subcarrier spacing of CSI-RS resources on the neighbour cell configured for measurement is the same as the SCS of CSI-RS resources on the serving cell indicated for measurement; and\n-\tFor 60kHz subcarrier spacing, the CP type of CSI-RS resources on the neighbour cell configured for measurement is the same as the CP type of CSI-RS resources on the serving cell indicated for measurement; and\n-\tThe centre frequency of CSI-RS resources on the neighbour cell configured for measurement is the same as the centre frequency of CSI-RS resource on the serving cell indicated for measurement.\n-\tCSI-RS based inter-frequency measurement: a measurement is defined as a CSI-RS based inter-frequency measurement if it is not a CSI-RS based intra-frequency measurement.\nNOTE 3:\tExtended CP for CSI-RS based measurement is not supported in this release.\nWhether a measurement is non-gap-assisted or gap-assisted depends on the capability of the UE, the active BWP of the UE and the current operating frequency:\n-\tFor SSB based inter-frequency measurement, if the measurement gap requirement information is reported by the UE, a measurement gap configuration may be provided according to the information. Otherwise, a measurement gap configuration is always provided in the following cases:\n-\tIf the UE only supports per-UE measurement gaps;\n-\tIf the UE supports per-FR measurement gaps and any of the serving cells are in the same frequency range of the measurement object.\n-\tFor SSB based intra-frequency measurement, if the measurement gap requirement information is reported by the UE, a measurement gap configuration may be provided according to the information. Otherwise, a measurement gap configuration is always provided in the following case:\n-\tOther than the initial BWP, if any of the UE configured BWPs do not contain the frequency domain resources of the SSB associated to the initial DL BWP, and are not configured with NCD-SSB for serving cell measurement.\nIn non-gap-assisted scenarios, the UE shall be able to carry out such measurements without measurement gaps. In gap-assisted scenarios, the UE cannot be assumed to be able to carry out such measurements without measurement gaps.\nNetwork may request the UE to measure NR and/or E-UTRA carriers in RRC_IDLE or RRC_INACTIVE via system information or via dedicated measurement configuration in RRCRelease. If the UE was configured to perform measurements of NR and/or E-UTRA carriers while in RRC_IDLE or in RRC_INACTIVE, it may provide an indication of the availability of corresponding measurement results to the gNB in the RRCSetupComplete message. The network may request the UE to report those measurements after security activation. The request for the measurements can be sent by the network immediately after transmitting the Security Mode Command (i.e. before the reception of the Security Mode Complete from the UE).\nIf the UE was configured to perform measurements of NR and/or E-UTRA carriers while in RRC_INACTIVE, the gNB can request the UE to provide corresponding measurement results in the RRCResume message and then the UE can include the available measurement results in the RRCResumeComplete message. Alternatively, the UE may provide an indication of the availability of the measurement results to the gNB in the RRCResumeComplete message and the gNB can then request the UE to provide these measurement results.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "9.2.5\tPaging",
                            "text_content": "Paging allows the network to reach UEs in RRC_IDLE and in RRC_INACTIVE state through Paging messages, and to notify UEs in RRC_IDLE, RRC_INACTIVE and RRC_CONNECTED state of system information change (see clause 7.3.3) and ETWS/CMAS indications (see clause 16.4) through Short Messages. Both Paging messages and Short Messages are addressed with P-RNTI on PDCCH, but while the former is sent on PCCH, the latter is sent over PDCCH directly (see clause 6.5 of TS 38.331 [12]).\nWhile in RRC_IDLE the UE monitors the paging channels for CN-initiated paging. While in RRC_INACTIVE with no ongoing SDT procedure (see clause 18.0) the UE monitors paging channels for RAN-initiated paging and CN-initiated paging. A UE need not monitor paging channels continuously though; Paging DRX is defined where the UE in RRC_IDLE or RRC_INACTIVE is only required to monitor paging channels during one Paging Occasion (PO) per DRX cycle (see TS 38.304 [10]). The Paging DRX cycles are configured by the network:\n1)\tFor CN-initiated paging, a default cycle is broadcast in system information;\n2)\tFor CN-initiated paging, a UE specific cycle can be configured via NAS signalling;\n3)\tFor RAN-initiated paging, a UE-specific cycle is configured via RRC signalling;\n-\tThe UE uses the shortest of the DRX cycles applicable i.e. a UE in RRC_IDLE uses the shortest of the first two cycles above, while a UE in RRC_INACTIVE uses the shortest of the three.\nThe POs of a UE for CN-initiated and RAN-initiated paging are based on the same UE ID, resulting in overlapping POs for both. The number of different POs in a DRX cycle is configurable via system information and a network may distribute UEs to those POs based on their IDs.\nWhile in RRC_CONNECTED and while in RRC_INACTIVE with ongoing SDT procedure, the UE monitors the paging channels in any PO signalled in system information for SI change indication and PWS notification. In case of BA, a UE in RRC_CONNECTED only monitors paging channels on the active BWP with common search space configured.\nFor operation with shared spectrum channel access, a UE can be configured for an additional number of PDCCH monitoring occasions in its PO to monitor for paging. However, when the UE detects a PDCCH transmission within the UE's PO addressed with P-RNTI, the UE is not required to monitor the subsequent PDCCH monitoring occasions within this PO.\nIf Paging Cause is included in the Paging message, a UE in RRC_IDLE or RRC_INACTIVE state may use the Paging Cause as per TS 23.501[3].\nPaging optimization for UEs in CM_IDLE: at UE context release, the NG-RAN node may provide the AMF with a list of recommended cells and NG-RAN nodes as assistance info for subsequent paging. The AMF may also provide Paging Attempt Information consisting of a Paging Attempt Count and the Intended Number of Paging Attempts and may include the Next Paging Area Scope. If Paging Attempt Information is included in the Paging message, each paged NG-RAN node receives the same information during a paging attempt. The Paging Attempt Count shall be increased by one at each new paging attempt. The Next Paging Area Scope, when present, indicates whether the AMF plans to modify the paging area currently selected at next paging attempt. If the UE has changed its state to CM CONNECTED the Paging Attempt Count is reset.\nPaging optimization for UEs in RRC_INACTIVE: at RAN Paging, the serving NG-RAN node provides RAN Paging area information. The serving NG-RAN node may also provide RAN Paging attempt information. Each paged NG-RAN node receives the same RAN Paging attempt information during a paging attempt with the following content: Paging Attempt Count, the intended number of paging attempts and the Next Paging Area Scope. The Paging Attempt Count shall be increased by one at each new paging attempt. The Next Paging Area Scope, when present, indicates whether the serving NG_RAN node plans to modify the RAN Paging Area currently selected at next paging attempt. If the UE leaves RRC_INACTIVE state the Paging Attempt Count is reset.\nUE power saving for paging monitoring: in order to reduce UE power consumption due to false paging alarms, the group of UEs monitoring the same PO can be further divided into multiple subgroups. With subgrouping, a UE shall monitor PDCCH in its PO for paging if the subgroup to which the UE belongs is paged as indicated via associated PEI. If a UE cannot find its subgroup ID with the PEI configurations in a cell or if the UE is unable to monitor the associated PEI occasion corresponding to its PO, it shall monitor the paging in its PO.\nThese subgroups have the following characteristics:\n-\tThey are formed based on either CN controlled subgrouping or UE ID based subgrouping;\n-\tIf CN controlled subgroup ID is not provided from AMF, UE ID based subgrouping is used if supported by the UE and network;\n-\tThe RRC state (RRC_IDLE or RRC_INACTIVE state) does not impact which subgroup the UE belongs to;\n-\tSubgrouping support for a cell is broadcast in the system information as one of the following: Only CN controlled subgrouping supported, only UE ID based subgrouping supported, or both CN controlled subgrouping and UE ID based subgrouping supported;\n-\tTotal number of subgroups allowed in a cell is up to 8 and represents the sum of CN controlled and UE ID based subgrouping configured by the network;\n-\tA UE configured with CN controlled subgroup ID applies CN controlled subgroup ID if the cell supports CN controlled subgrouping; otherwise, it derives UE ID based subgroup ID if the cell supports only UE ID based subgrouping.\nPEI associated with subgroups has the following characteristics:\n-\tIf the PEI is supported by the UE, it shall at least support UE ID based subgrouping method;\n-\tPEI monitoring can be limited via system information to the last used cell (i.e., the cell in which the UE most recently received RRCRelease without indicating that the last used cell for PEI shall not be updated);\n-\tA PEI-capable UE shall store its last used cell information;\n-\tgNBs supporting the PEI monitoring to the last used cell function provide the UE's last used cell information to the AMF in the NG-AP UE Context Release Complete message for PEI capable UEs, as described in TS 38.413 [26];\n-\tUE that expects MBS group notification shall ignore the PEI and shall monitor paging in its PO.\nCN controlled subgrouping: For CN controlled subgrouping, AMF is responsible for assigning subgroup ID to the UE. The total number of subgroups for CN controlled subgrouping which can be configured, e.g. by OAM is up to 8. It is assumed that CN controlled subgrouping support is homogeneous within an RNA.\nThe following figure describes the procedure for CN controlled subgrouping:\nFigure 9.2.5-1 illustrates the procedure for controlled subgrouping in a Communication Network (CN), which is a crucial aspect of network management. The figure outlines the steps involved in the process, starting with the initial state where the network is ungrouped. The procedure then proceeds through various stages, including the establishment of a control group, the selection of a subgroup, and the final state where the subgroup is fully controlled. The figure also highlights the role of the Network Control Center (NCC) in managing the subgrouping process, ensuring efficient and effective network operation.\nFigure 9.2.5-1: Procedure for CN controlled subgrouping\n1.\tThe UE indicates its support of CN controlled subgrouping via NAS signalling.\n2.\tIf the UE supports CN controlled subgrouping, the AMF determines the subgroup ID assignment for the UE.\n3.\tThe AMF sends subgroup ID to the UE via NAS signalling.\n4.\tThe AMF informs the gNB about the CN assigned subgroup ID for paging the UE in RRC_IDLE/ RRC_INACTIVE state.\n5.\tWhen the paging message for the UE is received from the CN or is generated by the gNB, the gNB determines the PO and the associated PEI occasion for the UE.\n6.\tBefore the UE is paged in the PO, the gNB transmits the associated PEI and indicates the corresponding CN controlled subgroup of the UE that is to be paged in the PEI.\nUE ID based subgrouping: For UE ID based subgrouping, the gNB and UE can determine the subgroup ID based on the UE ID and the total number of subgroups for UE ID based subgrouping in the cell. The total number of subgroups for UE ID based subgrouping is decided by the gNB for each cell and can be different in different cells. The following figure describes the procedure for UE ID based subgrouping:\nFigure 9.2.5-2 illustrates the procedure for UE ID based subgrouping in a telecommunication network. The figure depicts the process of grouping users based on their unique identifiers, which helps in efficient resource allocation and improved network performance. The steps involve collecting UE IDs, creating subgroups, and assigning them to base stations. This approach enables better management of network resources and enhances overall network efficiency.\nFigure 9.2.5-2: Procedure for UE ID based subgrouping\n1.\tThe gNB determines the total number of subgroups for UE ID based subgrouping in a cell.\n2.\tThe gNB broadcasts the total number of subgroups for UE ID based subgrouping in a cell.\n3.\tUE determines its subgroup in a cell.\n4.\tWhen paging message for the PEI capable UE is received from the CN at the gNB or is generated by the gNB, the gNB determines the PO and the associated PEI occasion for the UE.\n5.\tBefore the UE is paged in the PO, the gNB transmits the associated PEI and indicates the corresponding subgroup derived based on UE ID of the UE that is paged in the PEI.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "9.2.6\tRandom Access Procedure",
                            "text_content": "The random access procedure is triggered by a number of events:\n-\tInitial access from RRC_IDLE;\n-\tRRC Connection Re-establishment procedure;\n-\tDL or UL data arrival, during RRC_CONNECTED or during RRC_INACTIVE while SDT procedure (see clause 18.0) is ongoing, when UL synchronisation status is \"non-synchronised\";\n-\tUL data arrival, during RRC_CONNECTED or during RRC_INACTIVE while SDT procedure is ongoing, when there are no PUCCH resources for SR available;\n-\tHandover;\n-\tSR failure;\n-\tExplicit request by RRC upon synchronous reconfiguration;\n-\tRRC Connection Resume procedure from RRC_INACTIVE;\n-\tTo establish time alignment for a primary or a secondary TAG;\n-\tRequest for Other SI (see clause 7.3);\n-\tBeam failure recovery;\n-\tConsistent UL LBT failure on SpCell;\n-\tSDT in RRC_INACTIVE (see clause 18);\n-\tPositioning purpose during RRC_CONNECTED requiring random access procedure, e.g., when timing advance is needed for UE positioning;\n-\tEarly UL synchronization with an LTM candidate cell;\n-\tRACH-based LTM cell switch.\nTwo types of random access procedure are supported: 4-step RA type with MSG1 and 2-step RA type with MSGA. Both types of RA procedure support contention-based random access (CBRA) and contention-free random access (CFRA) as shown on Figure 9.2.6-1 below.\nThe UE selects the type of random access at initiation of the random access procedure based on network configuration:\n-\twhen CFRA resources are not configured, an RSRP threshold is used by the UE to select between 2-step RA type and 4-step RA type;\n-\twhen CFRA resources for 4-step RA type are configured, UE performs random access with 4-step RA type;\n-\twhen CFRA resources for 2-step RA type are configured, UE performs random access with 2-step RA type.\nThe network does not configure CFRA resources for 4-step and 2-step RA types at the same time for a Bandwidth Part (BWP). CFRA with 2-step RA type is only supported for handover.\nThe MSG1 of the 4-step RA type consists of a preamble on PRACH. After MSG1 transmission, the UE monitors for a response from the network within a configured window. For CFRA, dedicated preamble for MSG1 transmission is assigned by the network and upon receiving random access response from the network, the UE ends the random access procedure as shown in Figure 9.2.6-1(c). For CBRA, upon reception of the random access response, the UE sends MSG3 using the UL grant scheduled in the response and monitors contention resolution as shown in Figure 9.2.6-1(a). If contention resolution is not successful after MSG3 (re)transmission(s), the UE goes back to MSG1 transmission.\nThe MSGA of the 2-step RA type includes a preamble on PRACH and a payload on PUSCH. After MSGA transmission, the UE monitors for a response from the network within a configured window. For CFRA, dedicated preamble and PUSCH resource are configured for MSGA transmission and upon receiving the network response, the UE ends the random access procedure as shown in Figure 9.2.6-1(d). For CBRA, if contention resolution is successful upon receiving the network response, the UE ends the random access procedure as shown in Figure 9.2.6-1(b); while if fallback indication is received in MSGB, the UE performs MSG3 transmission using the UL grant scheduled in the fallback indication and monitors contention resolution as shown in Figure 9.2.6-2. If contention resolution is not successful after MSG3 (re)transmission(s), the UE goes back to MSGA transmission.\nIf the random access procedure with 2-step RA type is not completed after a number of MSGA transmissions, the UE can be configured to switch to CBRA with 4-step RA type.\nFor the random access procedure towards an LTM candidate cell for early UL TA acquisition, CFRA triggered by a PDCCH order is used. The UE sends MSG1 towards the cell without monitoring for a response from it as shown in Figure 9.2.6-1 (e). To support UE power ramping, the UE may perform MSG1 retransmission as indicated by the network.\n\n(a)\tCBRA with 4-step RA type\t\t\t\t\t\t(b) CBRA with 2-step RA type\n\n(c) CFRA with 4-step RA type\t\t\t\t\t\t(d) CFRA with 2-step RA type\nFigure e illustrates the CFRA (Channel State Information Feedback and Relaying) protocol in action without the network response, specifically showcasing a 4-step relaying type. The figure depicts the signal flow from the source node to the destination node through relays, with the CFRA process enabling efficient channel state information feedback and relaying. The absence of network response in this scenario emphasizes the reliance on relay cooperation for successful communication.\n(e) CFRA without network response with 4-step RA type\nFigure 9.2.6-1: Random Access Procedures\nFigure 9.2.6-2 illustrates the fallback mechanism for Centralized Baseband Radio Access (CBRA) with a 2-step Radio Access Type (RA Type). The figure depicts the process of radio access network (RAN) fallback in the event of a primary RAN failure. The diagram showcases the interaction between the RAN controller, RAN nodes, and the fallback mechanism, highlighting the importance of redundancy and efficient network management in maintaining seamless connectivity.\nFigure 9.2.6-2: Fallback for CBRA with 2-step RA type\nFor random access in a cell configured with SUL, the network can explicitly signal which carrier to use (UL or SUL). Otherwise, the UE selects the SUL carrier if and only if the measured quality of the DL is lower than a broadcast threshold. UE performs carrier selection before selecting between 2-step and 4-step RA type. The RSRP threshold for selecting between 2-step and 4-step RA type can be configured separately for UL and SUL. Once started, all uplink transmissions of the random access procedure remain on the selected carrier.\nThe network can associate a set of RACH resources with feature(s) applicable to a Random Access procedure: Network Slicing (see clause 16.3), (e)RedCap (see clause 16.13), SDT (see clause 18), and NR coverage enhancement (see clause 19). A set of RACH resources associated with a feature is only valid for random access procedures applicable to at least that feature; and a set of RACH resources associated with several features is only valid for random access procedures having at least all of these features. The UE selects the set(s) of applicable RACH resources, after uplink carrier (i.e. NUL or SUL) and BWP selection and before selecting the RA type.\nWhen CA is configured, random access procedure with 2-step RA type is only performed on PCell while contention resolution can be cross-scheduled by the PCell.\nWhen CA is configured, for random access procedure with 4-step RA type, the first three steps of CBRA always occur on the PCell while contention resolution (step 4) can be cross-scheduled by the PCell. The three steps of a CFRA started on the PCell remain on the PCell. CFRA on SCell can only be initiated by the gNB to establish timing advance for a secondary TAG: the procedure is initiated by the gNB with a PDCCH order (step 0) that is sent on an activated SCell of the secondary TAG, preamble transmission (step 1) takes place on the SCell, and Random Access Response (step 2) takes place on PCell.\nWhen two TAG IDs are configured for the serving cell, the TAG for which the TA command is applied is indicated in Random Access Response message or in MSGB.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "9.2.7\tRadio Link Failure",
                            "text_content": "In RRC_CONNECTED, the UE performs Radio Link Monitoring (RLM) in the active BWP based on reference signals (SSB/CSI-RS) and signal quality thresholds configured by the network. SSB-based RLM is based on the CD-SSB associated to the initial DL BWP and can be configured for the initial DL BWP, for DL BWPs containing the CD-SSB associated to the initial DL BWP, and, if supported, for DL BWPs not containing the CD-SSB associated to the initial DL BWP. Besides, SSB-based RLM can be also performed based on a non-cell defining SSB, if configured for the active DL BWP. For other DL BWPs, RLM can only be performed based on CSI-RS, if configured for the active DL BWP. In case of DAPS handover, the UE continues the detection of radio link failure at the source cell until the successful completion of the random access procedure to the target cell.\nThe UE declares Radio Link Failure (RLF) when one of the following criteria are met:\n-\tExpiry of a radio problem timer started after indication of radio problems from the physical layer (if radio problems are recovered before the timer is expired, the UE stops the timer); or\n-\tExpiry of a timer started upon triggering a measurement report for a measurement identity for which the timer has been configured while another radio problem timer is running; or\n-\tRandom access procedure failure; or\n-\tRLC failure; or\n-\tDetection of consistent uplink LBT failures for operation with shared spectrum channel access as described in 5.6.1; or\n-\tFor IAB-MT, the reception of a BH RLF indication received from its parent node.\nAfter RLF is declared, the UE:\n-\tstays in RRC_CONNECTED;\n-\tin case of DAPS handover, for RLF in the source cell:\n-\tstops any data transmission or reception via the source link and releases the source link, but maintains the source RRC configuration;\n-\tif handover failure is then declared at the target cell, the UE:\n-\tselects a suitable cell and then initiates RRC re-establishment;\n-\tenters RRC_IDLE if a suitable cell was not found within a certain time after handover failure was declared.\n-\tin case of CHO, for RLF in the source cell:\n-\tselects a suitable cell and if the selected cell is a CHO candidate and if network configured the UE to try CHO after RLF then the UE attempts CHO execution once, otherwise re-establishment is performed;\n-\tenters RRC_IDLE if a suitable cell was not found within a certain time after RLF was declared.\n-\tin case of MCG LTM, for RLF in the source cell:\n-\tselects a suitable cell and if the selected cell is an LTM candidate cell and if network configured the UE to try LTM after RLF then the UE attempts LTM execution once, otherwise re-establishment is performed;\n-\tenters RRC_IDLE if a suitable cell was not found within a certain time after RLF was declared.\n-\totherwise, for RLF in the serving cell or in case of DAPS handover, for RLF in the target cell before releasing the source cell:\n-\tselects a suitable cell and then initiates RRC re-establishment;\n-\tenters RRC_IDLE if a suitable cell was not found within a certain time after RLF was declared.\nWhen RLF occurs at the IAB BH link, the same mechanisms and procedures are applied as for the access link. This includes BH RLF detection and RLF recovery.\nThe IAB-DU can transmit a BH RLF detection indication to its child nodes in the following cases:\n-\tThe collocated IAB-MT initiates RRC re-establishment;\n-\tThe collocated IAB-MT is dual-connected, detects BH RLF on a BH link, and cannot perform UL re-routing for any traffic. This includes the scenario of an IAB-node operating in EN-DC or NR-DC, which uses only one link for backhauling and has BH RLF on this BH link;\n-\tThe collocated IAB-MT has received a BH RLF detection indication from a parent node, and there is no remaining backhaul link that is unaffected by the BH RLF condition indicated.\nUpon reception of the BH RLF detection indication, the child node may perform local rerouting for upstream traffic, if possible, over an available BH link.\nIf the IAB-DU has transmitted a BH RLF detection indication to a child node due to an RLF condition on the collocated IAB-MT's parent link, and the collocated IAB-MT's subsequent RLF recovery is successful, the IAB-DU may transmit a BH RLF recovery indication to this child node.\nIf the IAB-DU has transmitted a BH RLF detection indication to a child node due to the reception of a BH RLF detection indication by the collocated IAB-MT, and the collocated IAB-MT receives a BH RLF recovery indication, the IAB-DU may also transmit a BH RLF recovery indication to this child node.\nUpon reception of the BH RLF recovery indication, the child node reverts the actions triggered by the reception of the previous BH RLF detection indication.\nIn case the RRC re-establishment procedure fails, the IAB-node may transmit a BH RLF indication to its child nodes. The BH RLF detection indication, BH RLF recovery indication and BH RLF indication are transmitted as BAP Control PDUs.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "9.2.8\tBeam failure detection and recovery",
                            "text_content": "For beam failure detection, the gNB configures the UE with beam failure detection reference signals (SSB or CSI-RS) and the UE declares beam failure when the number of beam failure instance indications from the physical layer reaches a configured threshold before a configured timer expires. For beam failure detection in multi-TRP operation, the gNB configures the UE with two sets of beam failure detection reference signals, and the UE declares beam failure for a TRP / BFD-RS set when the number of beam failure instance indications associated with the corresponding set of beam failure detection reference signals from the physical layer reaches a configured threshold before a configured timer expires.\nSSB-based Beam Failure Detection is based on the CD-SSB associated to the initial DL BWP and can be configured for the initial DL BWPs, for DL BWPs containing the CD-SSB associated to the initial DL BWP, and, if supported, for DL BWPs not containing the CD-SSB associated to the initial DL BWP. Besides, SSB-based Beam Failure Detection can be also performed based on the non-cell defining SSB, if configured for the active DL BWP. For other DL BWPs, Beam Failure Detection can only be performed based on CSI-RS, if configured for the active DL BWP.\nAfter beam failure is detected on PCell, the UE:\n-\ttriggers beam failure recovery by initiating a Random Access procedure on the PCell;\n-\tselects a suitable beam to perform beam failure recovery (if the gNB has provided dedicated Random Access resources for certain beams, those will be prioritized by the UE).\n-\tincludes an indication of a beam failure on PCell in a BFR MAC CE if the Random Access procedure involves contention-based random access.\nUpon completion of the Random Access procedure, beam failure recovery for PCell is considered complete.\nAfter beam failure is detected on an SCell, the UE:\n-\ttriggers beam failure recovery by initiating a transmission of a BFR MAC CE for this SCell;\n-\tselects a suitable beam for this SCell (if available) and indicates it along with the information about the beam failure in the BFR MAC CE.\nUpon reception of a PDCCH indicating an uplink grant for a new transmission for the HARQ process used for the transmission of the BFR MAC CE, beam failure recovery for this SCell is considered complete.\nAfter beam failure is detected for a BFD-RS set of a Serving Cell, the UE:\n-\ttriggers beam failure recovery by initiating a transmission of a BFR MAC CE for this BFD-RS set;\n-\tselects a suitable beam for this BFD-RS set (if available) and indicates whether the suitable (new) beam is found or not along with the information about the beam failure in the BFR MAC CE for this BFD-RS set.\nUpon reception of a PDCCH indicating an uplink grant for a new transmission for the HARQ process used for the transmission of the BFR MAC CE for this BFD-RS set, beam failure recovery for this BFD-RS set is considered complete.\nAfter beam failure is detected for both BFD-RS sets of PCell concurrently, the UE:\n-\ttriggers beam failure recovery by initiating a Random Access procedure on the PCell;\n-\tselects a suitable beam for each failed BFD-RS set (if available) and indicates whether the suitable (new) beam is found or not along with the information about the beam failure in the BFR MAC CE for each failed BFD-RS set;\n-\tupon completion of the Random Access procedure, beam failure recovery for both BFD-RS sets of PCell is considered complete.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "9.2.9\tTiming Advance",
                            "text_content": "In RRC_CONNECTED, the gNB is responsible for maintaining the timing advance to keep the L1 synchronised. Serving cells having UL to which the same timing advance applies and using the same timing reference cell are grouped in a TAG. Each TAG contains at least one serving cell with configured uplink, and the mapping of each serving cell to a TAG is configured by RRC.\nFor the primary TAG the UE uses the PCell as timing reference, except with shared spectrum channel access where an SCell can also be used in certain cases (see clause 7.1, TS 38.133 [13]). In a secondary TAG, the UE may use any of the activated SCells of this TAG as a timing reference cell, but should not change it unless necessary.\nTiming advance updates are signalled by the gNB to the UE via MAC CE commands. Such commands restart a TAG-specific timer which indicates whether the L1 can be synchronised or not: when the timer is running, the L1 is considered synchronised, otherwise, the L1 is considered non-synchronised (in which case uplink transmission can only take place through MSG1/MSGA).\nWhen two TAG IDs are configured for the PCell, both TAGs are regarded as primary TAG.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "9.2.10\tExtended DRX for RRC_IDLE and RRC_INACTIVE",
                            "text_content": "When extended DRX (eDRX) is used, the following applies:\n-\tFor RRC_INACTIVE, eDRX configuration for RAN paging is decided and configured by NG-RAN. In RRC_INACTIVE the UE monitors both RAN and CN paging;\n-\tFor RRC_IDLE, eDRX for CN paging is configured by upper layers. In RRC_IDLE the UE monitors only CN paging;\n-\tInformation on whether eDRX for CN paging and RAN paging is allowed on the cell is provided separately in system information;\n-\tThe maximum value of the eDRX cycle is 10485.76 seconds (2.91 hours) while the minimum value of the eDRX cycle is 2.56 seconds;\n-\tThe hyper SFN (H-SFN) is broadcast by the cell and increments by one when the SFN wraps around;\n-\tPaging Hyperframe (PH) refers to the H-SFN in which the UE starts monitoring paging according to DRX during a Paging Time Window (PTW). The PH and PTW are determined based on a formula (see TS 38.304 [10]) that is known by the AMF, UE and NG-RAN;\n-\tH-SFN, PH and PTW are used if the eDRX cycle is greater than 10.24 seconds;\n-\tWhen the RRC_IDLE eDRX cycle is longer than the system information modification period, the UE verifies that stored system information remains valid before resuming/establishing an RRC connection.\n",
                            "figures_meta_data": [],
                            "tables": []
                        }
                    ]
                },
                {
                    "title": "9.3\tInter RAT",
                    "description": "",
                    "summary": "",
                    "text_content": "",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": [
                        {
                            "title": "9.3.1\tNR-E-UTRA mobility: Intra 5GC",
                            "text_content": "Cell reselection is characterised by the following:\n-\tCell reselection between NR RRC_IDLE and E-UTRA RRC_IDLE is supported;\n-\tCell reselection from NR RRC_INACTIVE to E-UTRA RRC_IDLE is supported.\nInter RAT mobility is characterised by the following:\n-\tThe Source RAT configures Target RAT measurement and reporting.\n-\tThe source RAT decides on the preparation initiation and provides the necessary information to the target RAT in the format required by the target RAT:\n-\tFor handover preparation from E-UTRA to NR, the source RAT issues a handover preparation request message to the target RAT passing a transparent RRC container with necessary information to prepare the handover at the target side. The information for the target RAT is the same type as specified in clause 9.2.3.2.1 including the current QoS flow to DRB mapping applied to the UE and RRM configuration.\n-\tThe details of RRM configuration are the same type as specified for NR in clause 9.2.3.2.1 including beam measurement information for the listed cells if the measurements are available.\n-\tRadio resources are prepared in the target RAT before the handover.\n-\tThe RRC reconfiguration message from the target RAT is delivered to the source RAT via a transparent container, and is passed to the UE by the source RAT in the handover command:\n-\tThe inter-RAT handover command message carries the same type of information required to access the target cell as specified for NR baseline handover in clause 9.2.3.2.1.\n-\tThe in-sequence and lossless handover is supported for the handover between gNB and ng-eNB.\n-\tBoth Xn and NG based inter-RAT handover between NG-RAN nodes is supported. Whether the handover is over Xn or CN is transparent to the UE.\n-\tIn order to keep the SDAP and PDCP configurations for in-sequence and lossless inter-RAT handover, delta-configuration for the radio bearer configuration is used.\nInter RAT measurements in NR for this use case are limited to E-UTRA.\nWhether a measurement is non-gap-assisted or gap-assisted depends on the capability of the UE and the current operating frequency:\n-\tFor E-UTRA Inter RAT measurement, if the measurement gap requirement information is reported by the UE, a measurement gap configuration may be provided according to the information. Otherwise, a measurement gap configuration is always provided when:\n-\tThe UE only supports per-UE measurement gaps; or\n-\tThe UE supports per-FR measurement gaps and at least one of the NR serving cells is in FR1.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "9.3.2\tNR-E-UTRA mobility: From 5GC to EPC",
                            "text_content": "Cell reselection is characterised by the following:\n-\tCell reselection between NR RRC_IDLE and E-UTRA RRC_IDLE is supported;\n-\tCell reselection from NR RRC_INACTIVE to E-UTRA RRC_IDLE is supported.\nThe source NG-RAN node decides between handover or redirection to EPS based on radio criteria and availability of the N26 interface.\nNOTE:\tInformation about the availability of the N26 interface may be configured by OAM at the NG-RAN.\nInter RAT handover is characterised by the following:\n-\tThe Source RAT configures Target RAT measurement and reporting.\n-\tThe source RAT decides on the preparation initiation and provides the necessary information to the target RAT in the format required by the target RAT.\n-\tRadio resources are prepared in the target RAT before the handover.\n-\tThe RRC reconfiguration message from the target RAT is delivered to the source RAT via a transparent container, and is passed to the UE by the source RAT in the handover command.\n-\tIn-sequence and lossless handovers are not supported.\n-\tSecurity procedures for handover to E-UTRA/EPC should follow E-UTRA handover procedures.\nInter RAT measurements in NR for this use case are limited to E-UTRA.\nWhether a measurement is non-gap-assisted or gap-assisted depends on the capability of the UE and the current operating frequency:\n-\tFor E-UTRA Inter RAT measurement, if the measurement gap requirement information is reported by the UE, a measurement gap configuration may be provided according to the information. Otherwise, a measurement gap configuration is always provided when:\n-\tThe UE only supports per-UE measurement gaps; or\n-\tThe UE supports per-FR measurement gaps and at least one of the NR serving cells is in FR1.\nControl plane handling for inter-System data forwarding from 5GS to EPS follows the following key principles:\n-\tOnly forwarding of downlink data is supported.\n-\tPDU session information at the serving NG-RAN node contains mapping information per QoS Flow to a corresponding E-RAB.\n-\tAt handover preparation, the source NG-RAN node shall decide which mapped E-RABs are proposed to be subject to data forwarding and provide this information in the source-to-target container to the target eNB. Based on availability of direct data forwarding path the source NG-RAN node may request to apply direct data forwarding by indicating direct data forwarding path availability to the 5GC.\n-\tThe target eNB assigns forwarding TEID/TNL address(es) for the E-RAB(s) for which it accepts data forwarding.\n-\tIn case of indirect data forwarding, a single data forwarding tunnel is established between the source NG-RAN node and UPF per PDU session for which at least data for a single QoS Flow is subject to data forwarding.\n-\tIn case of direct data forwarding, the source NG-RAN node receives a TEID/TNL address for each E-RAB accepted for data forwarding as assigned by the target eNB.\nIn case of indirect data forwarding, user plane handling for inter-System data forwarding from 5GS to EPS follows the following key principles:\n-\tFor the QoS flows accepted for data forwarding, the NG-RAN node initiates data forwarding to the UPF by the corresponding PDU session data forwarding tunnel(s).\n-\tThe UPF maps forwarded data received from the per PDU session data forwarding tunnel(s) to the mapped EPS bearer(s) removing the QFI.\n-\tHandling of end marker packets:\n-\tThe source NG-RAN node receives one or several end marker packets per PDU session from the UPF. When there are no more data packets to be forwarded for QoS flows mapped to an E-RAB, the source NG-RAN node sends one or several end markers including one QFI (by means of the PDU Session User Plane protocol TS 38.415 [30]) of those QoS flows mapped to that E-RAB and sends the end marker packets to the UPF over the PDU session tunnel. From the included QFI in the end markers and its mapping to an EPS bearer ID, the UPF knows which EPS bearer tunnel it needs to forward the end-markers to the SGW. The QFI is removed in the end marker packets sent to the SGW.\nIn case of direct data forwarding, user plane handling for inter-System data forwarding from 5GS to EPS follows the following key principles:\n-\tFor the QoS flows accepted for data forwarding, the source NG-RAN node maps data received from the NG-U PDU session tunnel to the respective E-RAB data forwarding tunnel and forwards each user packet as PDCP SDU without PDCP SN and QFI information.\n-\tThe source NG-RAN node receives one or several GTP-U end marker packets per PDU session from the UPF and replicates the end marker packets into each E-RAB data forwarding tunnel when no more user data packets are to be forwarded over that tunnel.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "9.3.3\tNR-E-UTRA mobility: From EPC to 5GC",
                            "text_content": "Control plane handling for inter-System data forwarding from EPS to 5GS follows the following key principles:\n-\tOnly forwarding of downlink data is supported.\n-\tThe target NG-RAN node receives in the Handover Request message the mapping between E-RAB ID(s) and QoS Flow ID(s). It decides whether to accept the data forwarding for E-RAB IDs proposed for forwarding within the Source NG-RAN Node to Target NG-RAN Node Transparent Container. Based on availability of direct data forwarding path the source eNB may request to apply direct data forwarding by indicating direct data forwarding availability to the CN.\n-\tIn case of indirect data forwarding:\n-\tThe target NG-RAN node assigns a TEID/TNL address for each PDU session for which at least one QoS flow is involved in the accepted data forwarding.\n-\tThe target NG-RAN node sends the Handover Request Acknowledge message in which it indicates the list of PDU sessions and QoS flows for which it has accepted the data forwarding.\n-\tA single data forwarding tunnel is established between the UPF and the target NG-RAN node per PDU session for which at least data for a single QoS Flow is subject to data forwarding.\n-\tThe source eNB receives in the Handover Command message the list of E-RAB IDs for which the target NG-RAN node has accepted data forwarding of corresponding PDU sessions and QoS flows.\n-\tIn case of direct data forwarding:\n-\tThe source eNB indicates direct path availability to the CN. The source eNB's decision is indicated by the CN to the target NG-RAN node.\n-\tThe target NG-RAN node assigns a TEID/TNL address for each E-RAB it accepted for data forwarding.\n-\tThe source eNB receives in the Handover Command message the list of E-RAB IDs for which the target NG-RAN node has accepted data forwarding.\nIn case of indirect data forwarding, user plane handling for inter-System data forwarding from EPS to 5GS follows the following key principles:\n-\tFor each E-RAB accepted for data forwarding, the source eNB forwards data to the SGW in the corresponding E-RAB tunnel and the SGW forwards the received data to the UPF in the E-RAB tunnel.\n-\tThe UPF maps the forwarded data received from an E-RAB tunnel to the corresponding mapped PDU session tunnel, adding a QFI value (by means of the PDU Session User Plane protocol TS 38.415 [30]).\n-\tThe target NG-RAN node maps a forwarded packet to the corresponding DRB based on the received QFI value. It prioritizes the forwarded packets over the fresh packets for those QoS flows.\n-\tHandling of end marker packets:\n-\tThe UPF/PGW-U sends one or several end marker packets to the SGW per EPS bearer. The SGW forwards the received end markers per EPS bearer to the source eNB. When there are no more data packets to be forwarded for an E-RAB, the source eNB forwards the received end markers in the EPS bearer tunnel to the SGW and the SGW forwards them to the UPF. The UPF adds one QFI (by means of the PDU Session User Plane protocol TS 38.415 [30]) among the QoS flows mapped to that E-RAB to the end markers and sends those end markers to the target NG-RAN node in the per PDU session tunnel. When the target NG-RAN node receives an end marker with a QFI added, the target NG-RAN node starts to transmit the data packets of all QoS flows mapped to the corresponding E-RAB received from the core network towards the UE.\nIn case of direct data forwarding, user plane handling for inter-System data forwarding from EPS to 5GS follows the following key principles:\n-\tFor each E-RAB accepted for data forwarding, the source node forwards data to the target NG-RAN node in the corresponding E-RAB data forwarding tunnel.\n-\tUntil a GTP-U end marker packet is received, the target NG-RAN node prioritizes the forwarded packets over the fresh packets for those QoS flows which are involved in the accepted data forwarding.\nNOTE:\tThe target NG-RAN node should remove the forwarded PDCP SNs if received in the forwarded GTP-U packets, and deliver the forwarded PDCP SDUs to the UE.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "9.3.4\tNR-UTRA mobility",
                            "text_content": "The source NR node decides to handover the UE with ongoing IMS voice from NR to UTRAN according the following principles:\n-\tThe source NR node determines that the UE supports UTRA and requests the UE to send its UTRA radio access capabilities to the NG-RAN;\n-\tThe source NR node configures target RAT measurement and reporting;\n-\tThe source NR node determines based on the radio conditions and the indication that SRVCC operation is possible that handover to UTRAN should be initiated;\n-\tThe source NR node initiates the handover preparation only for the ongoing IMS voice and provides the indication to AMF that the handover is towards UTRAN together with the target UTRAN Node ID. The source NR node also provides an indication to the target UTRAN that the incoming handover originates from 5G. The SRVCC proceeds as specified in TS 23.216 [34];\n-\tThe source NR node ensures that the size of the source-to-target container does not exceed the limits that can be handled by the interfaces involved in the handover;\nNOTE:\tFor SRVCC handover, the size limit of the inter-node source-to-target container is 2560 octets (see AN-APDU in TS 29.002 [44]).\n-\tRadio resources are prepared in the target RAT before the handover;\n-\tThe RRC reconfiguration message from the target RAT is delivered to the source NR node via a transparent container and is passed to the UE by the source NR node in the handover command;\n-\tIn-sequence and lossless handovers are not supported;\n-\tOnly voice bearer is handed over to target RAT;\n-\tSecurity procedures for handover to UTRA follows the procedures as specified in TS 33.501 [5];\n-\tOnly handover to UTRA-FDD is supported.\nInter RAT measurements are performed for UTRA.\n",
                            "figures_meta_data": [],
                            "tables": []
                        }
                    ]
                },
                {
                    "title": "9.4\tRoaming and Access Restrictions",
                    "description": "",
                    "summary": "",
                    "text_content": "The roaming and access restriction information for a UE includes information on restrictions to be applied for subsequent mobility action during CM-CONNECTED state. It may be provided by the AMF and also may be updated by the AMF later.\nIt includes the forbidden RAT, the forbidden area and the service area restrictions as specified in TS 23.501 [3]. It also includes serving PLMN/SNPN and may include a list of equivalent PLMNs or a list of equivalent SNPNs. It may also include PNI-NPN mobility restrictions (i.e. list of CAGs allowed for the UE and whether the UE can also access non-CAG cells). The gNB shall consider that roaming or access to CAG cells is only allowed if PNI-NPN mobility information is available for the UE.\nUpon receiving the roaming and access restriction information for a UE, if applicable, the gNB should use it to determine whether to apply restriction handling for subsequent mobility action, e.g., handover, redirection.\nIf the roaming and access restriction information is not available for a UE at the gNB, the gNB shall consider that there is no restriction for subsequent mobility actions except for the PNI-NPN mobility as described in TS 23.501 [3].\nOnly if received over NG or Xn signalling, the roaming and access restriction information shall be propagated over Xn by the source gNB during Xn handover. If the Xn handover results in a change of serving PLMN (to an equivalent PLMN), the source gNB shall replace the serving PLMN with the identity of the target PLMN and move the serving PLMN to the equivalent PLMN list, before propagating the roaming and access restriction information. If the Xn handover results in a change of serving SNPN (to an equivalent SNPN), the source gNB shall replace the serving SNPN with the identity of the target SNPN and move the serving SNPN to the equivalent SNPN list, before propagating the roaming and access restriction information.\nIf NG-RAN nodes with different versions of the XnAP or NGAP protocol are deployed, information provided by the 5GC within the NGAP Mobility Restriction List may be lost in the course of Xn mobility. In order to avoid such loss of information at Xn handover or UE context retrieval due to a source NG-RAN node or an old NG-RAN node not able to recognise the entire content, the source NG-RAN node or the old NG-RAN node may provide an 5GC Mobility Restriction List Container to the target NG-RAN node or the new NG-RAN node, containing the Mobility Restriction List as received from the 5GC. The target NG-RAN node or the new NG-RAN node shall use the information contained in the 5GC Mobility Restriction List Container as the Mobility Restriction List, except for the Serving PLMN/SNPN and the Equivalent PLMNs/SNPNs, which the NG-RAN node shall use from the XnAP Mobility Restriction List. The 5GC Mobility Restriction List Container may be propagated at future Xn handover and UE context retrieval.\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                }
            ]
        },
        {
            "title": "10\tScheduling",
            "description": "",
            "summary": "",
            "tables": [],
            "figures_meta_data": [],
            "subsections": [
                {
                    "title": "10.1\tBasic Scheduler Operation",
                    "description": "",
                    "summary": "",
                    "text_content": "In order to utilise radio resources efficiently, MAC in gNB includes dynamic resource schedulers that allocate physical layer resources for the downlink and the uplink. In this clause, an overview of the scheduler is given in terms of scheduler operation, signalling of scheduler decisions, and measurements.\nScheduler Operation:\n-\tTaking into account the UE buffer status and the QoS requirements of each UE and associated radio bearers, schedulers assign resources between UEs;\n-\tSchedulers may assign resources taking account the radio conditions at the UE identified through measurements made at the gNB and/or reported by the UE;\n-\tResource assignment consists of radio resources (resource blocks).\nSignalling of Scheduler Decisions:\n-\tUEs identify the resources by receiving a scheduling (resource assignment) channel.\nMeasurements to Support Scheduler Operation:\n-\tUplink buffer status reports (measuring the data that is buffered in the logical channel queues in the UE) are used to provide support for QoS-aware packet scheduling;\n-\tPower headroom reports (measuring the difference between the nominal UE maximum transmit power and the estimated power for uplink transmission) are used to provide support for power aware packet scheduling.\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "10.2\tDownlink Scheduling",
                    "description": "",
                    "summary": "",
                    "text_content": "In the downlink, the gNB can dynamically allocate resources to UEs via the C-RNTI on PDCCH(s). A UE always monitors the PDCCH(s) in order to find possible assignments when its downlink reception is enabled (activity governed by DRX and cell DTX when configured). When CA is configured, the same C-RNTI applies to all serving cells.\nThe gNB may pre-empt an ongoing PDSCH transmission to one UE with a latency-critical transmission to another UE. The gNB can configure UEs to monitor interrupted transmission indications using INT-RNTI on a PDCCH. If a UE receives the interrupted transmission indication, the UE may assume that no useful information to that UE was carried by the resource elements included in the indication, even if some of those resource elements were already scheduled to this UE.\nIn addition, with Semi-Persistent Scheduling (SPS), the gNB can allocate downlink resources for the initial HARQ transmissions to UEs: RRC defines the periodicity of the configured downlink assignments while PDCCH addressed to CS-RNTI can either signal and activate the configured downlink assignment, or deactivate it; i.e. a PDCCH addressed to CS-RNTI indicates that the downlink assignment can be implicitly reused according to the periodicity defined by RRC, until deactivated.\nNOTE:\tWhen required, retransmissions are explicitly scheduled on PDCCH(s).\nThe dynamically allocated downlink reception overrides the configured downlink assignment in the same serving cell, if they overlap in time. Otherwise a downlink reception according to the configured downlink assignment is assumed, if activated.\nThe UE may be configured with up to 8 active configured downlink assignments for a given BWP of a serving cell. When more than one is configured:\n-\tThe network decides which of these configured downlink assignments are active at a time (including all of them); and\n-\tEach configured downlink assignment is activated separately using a DCI command and deactivation of configured downlink assignments is done using a DCI command, which can either deactivate a single configured downlink assignment or multiple configured downlink assignments jointly.\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "10.3\tUplink Scheduling",
                    "description": "",
                    "summary": "",
                    "text_content": "In the uplink, the gNB can dynamically allocate resources to UEs via the C-RNTI on PDCCH(s). A UE always monitors the PDCCH(s) in order to find possible grants for uplink transmission when its downlink reception is enabled (activity governed by DRX and cell DTX when configured). When CA is configured, the same C-RNTI applies to all serving cells.\nThe gNB may cancel a PUSCH transmission, or a repetition of a PUSCH transmission, or an SRS transmission of a UE for another UE with a latency-critical transmission. The gNB can configure UEs to monitor cancelled transmission indications using CI-RNTI on a PDCCH. If a UE receives the cancelled transmission indication, the UE shall cancel the PUSCH transmission from the earliest symbol overlapped with the resource or the SRS transmission overlapped with the resource indicated by cancellation (see clause 11.2A of TS 38.213 [38]).\nIn addition, with Configured Grants, the gNB can allocate uplink resources for the initial HARQ transmissions and HARQ retransmissions to UEs. Two types of configured uplink grants are defined:\n-\tWith Type 1, RRC directly provides the configured uplink grant (including the periodicity).\n-\tWith Type 2, RRC defines the periodicity of the configured uplink grant while PDCCH addressed to CS-RNTI can either signal and activate the configured uplink grant, or deactivate it; i.e. a PDCCH addressed to CS-RNTI indicates that the uplink grant can be implicitly reused according to the periodicity defined by RRC, until deactivated.\nIf the UE is not configured with enhanced intra-UE overlapping resources prioritization, the dynamically allocated uplink transmission overrides the configured uplink grant in the same serving cell, if they overlap in time. Otherwise an uplink transmission according to the configured uplink grant is assumed, if activated.\nIf the UE is configured with enhanced intra-UE overlapping resources prioritization, in case a configured uplink grant transmission overlaps in time with dynamically allocated uplink transmission or with another configured uplink grant transmission in the same serving cell, the UE prioritizes the transmission based on the comparison between the highest priority of the logical channels that have data to be transmitted and which are multiplexed or can be multiplexed in MAC PDUs associated with the overlapping resources. Similarly, in case a configured uplink grant transmissions or a dynamically allocated uplink transmission overlaps in time with a scheduling request transmission, the UE prioritizes the transmission based on the comparison between the priority of the logical channel which triggered the scheduling request and the highest priority of the logical channels that have data to be transmitted and which are multiplexed or can be multiplexed in MAC PDU associated with the overlapping resource. In case the MAC PDU associated with a deprioritized transmission has already been generated, the UE keeps it stored to allow the gNB to schedule a retransmission. The UE may also be configured by the gNB to transmit the stored MAC PDU as a new transmission using a subsequent resource of the same configured uplink grant configuration when an explicit retransmission grant is not provided by the gNB.\nRetransmissions other than repetitions are explicitly allocated via PDCCH(s) or via configuration of a retransmission timer.\nThe UE may be configured with up to 12 active configured uplink grants for a given BWP of a serving cell. When more than one is configured, the network decides which of these configured uplink grants are active at a time (including all of them). Each configured uplink grant can either be of Type 1 or Type 2. For Type 2, activation and deactivation of configured uplink grants are independent among the serving cells. When more than one Type 2 configured grant is configured, each configured grant is activated separately using a DCI command and deactivation of Type 2 configured grants is done using a DCI command, which can either deactivate a single configured grant configuration or multiple configured grant configurations jointly.\nWhen SUL is configured, the network should ensure that an active configured uplink grant on SUL does not overlap in time with another active configured uplink grant on the other UL configuration.\nFor both dynamic grant and configured grant, for a transport block, two or more repetitions can be in one slot, or across slot boundary in consecutive available slots with each repetition in one slot. For both dynamic grant and configured grant Type 2, the number of repetitions can be also dynamically indicated in the L1 signalling. The dynamically indicated number of repetitions shall override the RRC configured number of repetitions, if both are present.\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "10.4\tMeasurements to Support Scheduler Operation",
                    "description": "",
                    "summary": "",
                    "text_content": "Measurement reports are required to enable the scheduler to operate in both uplink and downlink. These include transport volume and measurements of a UEs radio environment.\nUplink buffer status reports (BSR) are needed to provide support for QoS-aware packet scheduling. In NR, uplink buffer status reports refer to the data that is buffered in for a group of logical channels (LCG) in the UE. Four formats are used for reporting in uplink:\n-\tA short format to report only one BSR (of one LCG);\n-\tA flexible long format to report several BSRs (up to all eight LCGs);\n-\tAn extended short format to report one BSR (of one LCG);\n-\tAn extended long format to report several BSRs (up to all 256 LCGs).\nNOTE:\tThe Extended versions of the BSR formats can only be used by IAB nodes.\nUplink buffer status reports are transmitted using MAC signalling. When a BSR is triggered (e.g. when new data arrives in the transmission buffers of the UE), a Scheduling Request (SR) can be transmitted by the UE (e.g. when no resources are available to transmit the BSR).\nFor IAB, the Pre-emptive BSR can be configured on the backhaul links. The Pre-emptive BSR is sent based on expected data rather than buffered data, as described in clause 4.7.3.3.\nPower headroom reports (PHR) are needed to provide support for power-aware packet scheduling. In NR, three types of reporting are supported: a first one for PUSCH transmission, a second one for PUSCH and PUCCH transmission in an LTE Cell Group in EN-DC (see TS 37.340 [21]) and a third one for SRS transmission on SCells configured with SRS only. In case of CA, when no transmission takes place on an activated SCell, a reference power is used to provide a virtual report. To allow network to detect UL power reduction, the PHR reports may also contain Power Management Maximum Power Reduction (P-MPR, see TS 38.101-2 [35]) information that UE uses to ensure UE compliance with the Maximum Permissible Exposure (MPE) exposure regulation for FR2, which is set for limiting RF exposure on human body. Power headroom reports are transmitted using MAC signalling.\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "10.5\tRate Control",
                    "description": "",
                    "summary": "",
                    "text_content": "",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": [
                        {
                            "title": "10.5.1\tDownlink",
                            "text_content": "In downlink, for GBR flows, the gNB guarantees the GFBR and ensures that the MFBR is not exceeded while for non-GBR flows, it ensures that the UE-AMBR is not exceeded (see clause 12). When configured for a GBR flow, the gNB also ensures that the MDBV is not exceeded. When received and supported, the gNB in addition ensures that the UE-Slice-MBR is not exceeded as specified in TS 23.501 [3].\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "10.5.2\tUplink",
                            "text_content": "The UE has an uplink rate control function which manages the sharing of uplink resources between logical channels. RRC controls the uplink rate control function by giving each logical channel a priority, a prioritised bit rate (PBR), and a buffer size duration (BSD). The values signalled need not be related to the ones signalled via NG to the gNB. In addition, mapping restrictions can be configured (see clause 16.1.2).\nThe uplink rate control function ensures that the UE serves the logical channel(s) in the following sequence:\n1.\tAll relevant logical channels in decreasing priority order up to their PBR;\n2.\tAll relevant logical channels in decreasing priority order for the remaining resources assigned by the grant.\nNOTE 1:\tIn case the PBRs are all set to zero, the first step is skipped and the logical channels are served in strict priority order: the UE maximises the transmission of higher priority data.\nNOTE 2:\tThe mapping restrictions tell the UE which logical channels are relevant for the grant received. If no mapping restrictions are configured, all logical channels are considered.\nNOTE 3:\tThrough radio protocol configuration and scheduling, the gNB can guarantee the GFBR(s) and ensure that any of the MFBR(s), the UE-AMBR and, when supported and feasible, the UE-Slice-MBR is not exceeded in uplink (see clause 12).\nNOTE 4:\tThe mapping restrictions allows the gNB to fulfil the MDBV requirements through scheduling at least for the case where logical channels are mapped to separate serving cells.\nIf more than one logical channel have the same priority, the UE shall serve them equally.\n",
                            "figures_meta_data": [],
                            "tables": []
                        }
                    ]
                },
                {
                    "title": "10.6\tActivation/Deactivation Mechanism",
                    "description": "",
                    "summary": "",
                    "text_content": "To enable reasonable UE battery consumption when CA is configured, an activation/deactivation mechanism of Cells is supported. When an SCell is deactivated, the UE does not need to receive the corresponding PDCCH or PDSCH, cannot transmit in the corresponding uplink, nor is it required to perform CQI measurements. Conversely, when an SCell is active, the UE shall receive PDSCH and PDCCH (if the UE is configured to monitor PDCCH from this SCell) and is expected to be able to perform CQI measurements. NG-RAN ensures that while PUCCH SCell (a Secondary Cell configured with PUCCH) is deactivated, SCells of secondary PUCCH group (a group of SCells whose PUCCH signalling is associated with the PUCCH on the PUCCH SCell) should not be activated. NG-RAN ensures that SCells mapped to PUCCH SCell are deactivated before the PUCCH SCell is changed or removed.\nWhen reconfiguring the set of serving cells:\n-\tSCells added to the set are initially activated or deactivated;\n-\tSCells which remain in the set (either unchanged or reconfigured) do not change their activation status (activated or deactivated).\nAt handover, LTM cell switch execution or connection resume from RRC_INACTIVE:\n-\tSCells are activated or deactivated.\nTo enable reasonable UE battery consumption when BA is configured, only one UL BWP for each uplink carrier and one DL BWP or only one DL/UL BWP pair can be active at a time in an active serving cell, all other BWPs that the UE is configured with being deactivated. On deactivated BWPs, the UE does not monitor the PDCCH, does not transmit on PUCCH, PRACH and UL-SCH.\nTo enable fast SCell activation when CA is configured, one dormant BWP can be configured for an SCell. If the active BWP of the activated SCell is a dormant BWP, the UE stops monitoring PDCCH and transmitting SRS/PUSCH/PUCCH on the SCell but continues performing CSI measurements, AGC and beam management, if configured. A DCI is used to control entering/leaving the dormant BWP for one or more SCell(s) or one or more SCell group(s).\nThe dormant BWP is one of the UE's dedicated BWPs configured by network via dedicated RRC signalling. The SpCell and PUCCH SCell cannot be configured with a dormant BWP.\nTo enable fast SCell activation when CA is configured, aperiodic CSI-RS for tracking for fast SCell activation can be configured for an SCell to assist AGC and time/frequency synchronization. A MAC CE is used to trigger activation of one or more SCell(s) and trigger the aperiodic CSI-RS for tracking for fast SCell activation for a (set of) deactivated SCell(s).\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "10.7\tE-UTRA-NR Cell Resource Coordination",
                    "description": "",
                    "summary": "",
                    "text_content": "An NR cell may use spectrum that overlaps or is adjacent to spectrum in use for E-UTRA cells. In this case network signalling enables coordination of TDM and FDM cell resources between MAC in the gNB and the corresponding entity in the ng-eNB. Both the gNB and the ng-eNB can trigger the E-UTRA - NR Cell Resource Coordination procedure over Xn to its peer node.\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "10.8\tCross Carrier Scheduling",
                    "description": "",
                    "summary": "",
                    "text_content": "Cross-carrier scheduling with the Carrier Indicator Field (CIF) allows the PDCCH of a serving cell to schedule resources on another serving cell but with the following restrictions:\n-\tWhen cross-carrier scheduling from an SCell to PCell is not configured, PCell can only be scheduled via its PDCCH;\n-\tWhen cross-carrier scheduling from an SCell to PCell is configured:\n-\tPDCCH on that SCell can schedule PCell's PDSCH and PUSCH;\n-\tPDCCH on the PCell can schedule PCell's PDSCH and PUSCH but cannot schedule PDSCH and PUSCH on any other cell;\n-\tOnly one SCell can be configured to be used for cross-carrier scheduling to PCell.\n-\tWhen an SCell is configured with a PDCCH, that cell's PDSCH and PUSCH are always scheduled by the PDCCH on this SCell;\n-\tWhen an SCell is not configured with a PDCCH, that SCell's PDSCH and PUSCH are always scheduled by a PDCCH on another serving cell;\n-\tThe scheduling PDCCH and the scheduled PDSCH/PUSCH can use the same or different numerologies.\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "10.9\tIAB Resource Configuration",
                    "description": "",
                    "summary": "",
                    "text_content": "If the IAB-DU and the IAB-MT of an IAB-node are subject to a half-duplex constraint, correct transmission/reception by one cannot be guaranteed during transmission/reception by the other and vice versa, e.g., when collocated and operating in the same frequency. If an IAB-node supports enhanced frequency or spatial multiplexing capabilities, additional multiplexing modes can be supported, i.e., simultaneous operation of IAB-MT Rx / IAB-DU Rx, IAB-MT Tx / IAB-DU Tx, IAB-MT Rx / IAB-DU Tx, IAB-MT Tx / IAB-DU Rx. An IAB-node can report its duplexing constraints between the IAB-MT and the collocated IAB-DU via F1AP. An IAB-node can indicate via F1AP whether or not FDM is required for an enhanced multiplexing operation.\nThe scheduler on an IAB-DU or IAB-donor-DU complies with the gNB-DU resource configuration received via F1AP, which defines the usage of scheduling resources to account for the aforementioned duplexing constraint.\nThe resource configuration assigns an attribute of hard, soft or unavailable to each symbol of each DU cell. Transmission/reception can occur for symbols configured as hard, whereas scheduling cannot occur, except for some special cases, for symbols configures as unavailable. For symbols configured as soft, scheduling can occur conditionally on an explicit indication of availability by the parent node via DCI format 2_5, or on an implicit determination of availability by the IAB-node. The implicit determination of availability is determined by the IAB-node depending on whether or not the operation of the IAB-DU would have an impact on the collocated IAB-MT.\nThe resource configuration can be shared among neighbouring IAB-nodes and IAB-donors to facilitate interference management, dual connectivity, and enhanced multiplexing.\nTo facilitate transitioning from IAB-MT to IAB-DU operation and vice versa, guard symbols can be used to overcome potentially misaligned symbol boundaries between the IAB-MT operation and the IAB-DU operation (e.g., IAB-MT Rx boundaries are not aligned with the IAB-DU Tx boundaries). Specifically, an IAB-node can indicate to a parent node a number of desired guard symbols, while the parent node can indicate to the IAB-node the number of actually provided guard symbols for specific transitions.\nAn IAB-node supporting enhanced multiplexing capabilities, i.e., IAB-MT Rx / IAB-DU Rx, IAB-MT Tx / IAB-DU Tx, IAB-MT Rx / IAB-DU Tx, IAB-MT Tx / IAB-DU Rx, can provide via MAC-CE to a parent node information to facilitate scheduling for enhanced multiplexing operation by the IAB-node, specifically:\n-\trecommended IAB-MT's Tx/Rx beams;\n-\tdesired IAB-MT Tx PSD range;\n-\tdesired parent node's IAB-DU Tx power adjustment;\n-\trequired IAB-MT's uplink transmission timing mode.\nCorrespondingly, the parent node can provide information via MAC-CE to the IAB-node to facilitate enhanced multiplexing at the IAB-node and/or at the parent node:\n-\trestricted IAB-DU Tx beams;\n-\tactual parent node's IAB-DU Tx power adjustment;\n-\tIAB-MT's uplink transmission timing mode.\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "10.10\tAutonomous Denial for IDC",
                    "description": "",
                    "summary": "",
                    "text_content": "The network may configure a long-term denial rate per CG by dedicated RRC signalling to limit the amount of NR UL autonomous denials. Once configured by the network, the UE can autonomously deny NR UL transmission. Otherwise, the UE shall not perform any NR UL autonomous denials for IDC.\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                }
            ]
        },
        {
            "title": "11\tUE Power Saving",
            "description": "The PDCCH monitoring activity of the UE in RRC connected mode is governed by DRX, BA, DCP and cell DTX (see clause 15.4.2.3).\nWhen DRX is configured, the UE does not have to continuously monitor PDCCH. DRX is characterized by the following:\n-\ton-duration: duration that the UE waits for, after waking up, to receive PDCCHs. If the UE successfully decodes a PDCCH, the UE stays awake and starts the inactivity timer;\n-\tinactivity-timer: duration that the UE waits to successfully decode a PDCCH, from the last successful decoding of a PDCCH, failing which it can go back to sleep. The UE shall restart the inactivity timer following a single successful decoding of a PDCCH for a first transmission only (i.e. not for retransmissions);\n-\tretransmission-timer: duration until a retransmission can be expected;\n-\tcycle: specifies the periodic repetition of the on-duration followed by a possible period of inactivity (see figure 11-1 below);\n-\tactive-time: total duration that the UE monitors PDCCH. This includes the \"on-duration\" of the DRX cycle, the time UE is performing continuous reception while the inactivity timer has not expired, and the time when the UE is performing continuous reception while waiting for a retransmission opportunity.\nFigure 11-1 illustrates the dynamic radio resource (DRX) cycle in a cellular network, showcasing the energy-saving mechanism that adjusts the time spent transmitting and receiving data. The figure depicts the various states of the radio, including sleep, idle, and active, which are determined by the network's traffic load and energy conservation requirements. Key components include the base station, mobile station, and the energy management system that optimizes power consumption. The figure highlights the importance of efficient resource allocation in maintaining network performance while reducing energy consumption.\nFigure 11-1: DRX Cycle\nA SL UE can be configured with DRX, in which case, PDCCH providing SL grants can be send to the UE only during its active time.\nWhen BA is configured, the UE only has to monitor PDCCH on the one active BWP i.e. it does not have to monitor PDCCH on the entire DL frequency of the cell. A BWP inactivity timer (independent from the DRX inactivity-timer described above) is used to switch the active BWP to the default one: the timer is restarted upon successful PDCCH decoding and the switch to the default BWP takes place when it expires.\nIn addition, the UE may be indicated, when configured accordingly, whether it is required to monitor or not the PDCCH during the next occurrence of the on-duration by a DCP monitored on the active BWP. If the UE does not detect a DCP on the active BWP, it does not monitor the PDCCH during the next occurrence of the on-duration, unless it is explicitly configured to do so in that case.\nA UE can only be configured to monitor DCP when connected mode DRX is configured, and at occasion(s) at a configured offset before the on-duration. More than one monitoring occasion can be configured before the on-duration. The UE does not monitor DCP on occasions occurring during active-time, measurement gaps, BWP switching, or when it monitors response for a CFRA preamble transmission for beam failure recovery (see clause 9.2.6), in which case it monitors the PDCCH during the next on-duration. If no DCP is configured in the active BWP, UE follows normal DRX operation.\nWhen CA is configured, DCP is only configured on the PCell.\nOne DCP can be configured to control PDCCH monitoring during on-duration for one or more UEs independently.\nPower saving in RRC_IDLE and RRC_INACTIVE can also be achieved by UE relaxing neighbour cells RRM measurements when it meets the criteria determining it is in low mobility and/or not at cell edge.\nUE power saving may be enabled by adapting the DL maximum number of MIMO layers by BWP switching.\nPower saving is also enabled during active-time via cross-slot scheduling, which facilitates UE to achieve power saving with the assumption that it won't be scheduled to receive PDSCH, triggered to receive A-CSI or transmit a PUSCH scheduled by the PDCCH until the minimum scheduling offsets K0 and K2. Dynamic adaptation of the minimum scheduling offsets K0 and K2 is controlled by PDCCH.\nServing Cells of a MAC entity may be configured by RRC in two DRX groups with separate DRX parameters. When RRC does not configure a secondary DRX group, there is only one DRX group and all Serving Cells belong to that one DRX group. When two DRX groups are configured, each Serving Cell is uniquely assigned to either of the two groups. The DRX parameters that are separately configured for each DRX group are on-duration and inactivity-timer.\nUE power saving in RRC_IDLE/RRC_INACTIVE may be achieved by providing the configuration for TRS with CSI-RS for tracking in TRS occasions. The TRS in TRS occasions may allow UEs in RRC_IDLE/RRC_INACTIVE to sleep longer before waking-up for its paging occasion. The TRS occasions configuration is provided in SIB17. The availability of TRS in the TRS occasions is indicated by L1 availability indication. These TRSs may also be used by the UEs configured with eDRX.\nUE power saving may be achieved by UE relaxing measurements for RLM/BFD. When configured, UE determines whether it is in low mobility state and/or whether its serving cell radio link quality is better than a threshold. The configuration for low mobility and good serving cell quality criterion is provided through dedicated RRC signalling.\nRLM and BFD relaxation may be enabled/disabled separately through RRC Configuration. Additionally, RLM relaxation may be enabled/disabled on per Cell Group basis while BFD relaxation may be enabled/disabled on per serving cell basis.\nThe UE is only allowed to perform RLM and/or BFD relaxation when relaxed measurement criterion for low mobility and/or for good serving cell quality is met. If configured to do so, the UE shall trigger reporting of its RLM and/or BFD relaxation status through UE assistance information if the UE changes its respective RLM and/or BFD relaxation status while meeting the UE minimum requirements specified in TS 38.133 [13].\nUE power saving may also be achieved through PDCCH monitoring adaptation mechanisms when configured by the network, including skipping of PDCCH monitoring and Search space set group (SSSG) switching. In this case UE does not monitor PDCCH during the PDCCH skipping duration except for the cases as specified in TS 38.213 [38], or monitors PDCCH according to the search space sets applied in SSSG.\n",
            "summary": "",
            "tables": [],
            "figures_meta_data": [],
            "subsections": []
        },
        {
            "title": "12\tQoS",
            "description": "",
            "summary": "",
            "tables": [],
            "figures_meta_data": [],
            "subsections": [
                {
                    "title": "12.1\tOverview",
                    "description": "",
                    "summary": "",
                    "text_content": "The 5G QoS model is based on QoS Flows (see TS 23.501 [3]) and supports both QoS Flows that require guaranteed flow bit rate (GBR QoS Flows) and QoS Flows that do not require guaranteed flow bit rate (non-GBR QoS Flows). At NAS level (see TS 23.501 [3]), the QoS flow is thus the finest granularity of QoS differentiation in a PDU session. A QoS flow is identified within a PDU session by a QoS Flow ID (QFI) carried in an encapsulation header over NG-U.\nThe QoS architecture in NG-RAN, both for NR connected to 5GC and for E-UTRA connected to 5GC, is depicted in the Figure 12-1 and described in the following:\n-\tFor each UE, 5GC establishes one or more PDU Sessions;\n-\tExcept for NB-IoT, IAB-MT in SA mode, and NCR-MT, for each UE, the NG-RAN establishes at least one Data Radio Bearers (DRB) together with the PDU Session and additional DRB(s) for QoS flow(s) of that PDU session can be subsequently configured (it is up to NG-RAN when to do so);\n-\tIf NB-IoT UE supports NG-U data transfer, the NG-RAN may establish Data Radio Bearers (DRB) together with the PDU Session and one PDU session maps to only one DRB;\n-\tThe NG-RAN maps packets belonging to different PDU sessions to different DRBs;\n-\tNAS level packet filters in the UE and in the 5GC associate UL and DL packets with QoS Flows;\n-\tAS-level mapping rules in the UE and in the NG-RAN associate UL and DL QoS Flows with DRBs.\nFigure 12-1 illustrates the Quality of Service (QoS) architecture, showcasing the various components that contribute to the overall performance of a network. The figure depicts the network elements, such as the ingress and egress points, traffic selectors, and the Quality of Service Manager (QSM), which work together to prioritize and manage traffic flow. The ingress points receive traffic from the network's edge, while the egress points send traffic to the network's core. Traffic selectors play a crucial role in directing traffic to the appropriate QoS classes, ensuring that critical applications receive the necessary bandwidth and low latency. The QSM is responsible for monitoring and controlling the QoS parameters, such as bandwidth allocation and packet scheduling, to maintain the desired level of service for different types of traffic. This architecture enables network operators to efficiently manage network resources and deliver high-quality service to end-users.\nFigure 12-1: QoS architecture\nNG-RAN and 5GC ensure quality of service (e.g. reliability and target delay) by mapping packets to appropriate QoS Flows and DRBs. Hence there is a 2-step mapping of IP-flows to QoS flows (NAS) and from QoS flows to DRBs (Access Stratum).\nAt NAS level, a QoS flow is characterised by a QoS profile provided by 5GC to NG-RAN and QoS rule(s) provided by 5GC to the UE. The QoS profile is used by NG-RAN to determine the treatment on the radio interface while the QoS rules dictates the mapping between uplink User Plane traffic and QoS flows to the UE. A QoS flow may either be GBR or Non-GBR depending on its profile. The QoS profile of a QoS flow contains QoS parameters, for instance (see TS 23.501 [3]):\n-\tFor each QoS flow:\n-\tA 5G QoS Identifier (5QI);\n-\tAn Allocation and Retention Priority (ARP).\n-\tIn case of a GBR QoS flow only:\n-\tGuaranteed Flow Bit Rate (GFBR) for both uplink and downlink;\n-\tMaximum Flow Bit Rate (MFBR) for both uplink and downlink;\n-\tMaximum Packet Loss Rate for both uplink and downlink;\n-\tDelay Critical Resource Type;\n-\tNotification Control.\nNOTE:\tThe Maximum Packet Loss Rate (UL, DL) is only provided for a GBR QoS flow belonging to voice media.\n-\tIn case of Non-GBR QoS only:\n-\tReflective QoS Attribute (RQA): the RQA, when included, indicates that some (not necessarily all) traffic carried on this QoS flow is subject to reflective quality of service (RQoS) at NAS;\n-\tAdditional QoS Flow Information.\nThe QoS parameter Notification Control indicates whether notifications are requested from the RAN when the GFBR can no longer (or again) be fulfilled for a QoS Flow. If, for a given GBR QoS Flow, notification control is enabled and the RAN determines that the GFBR cannot be guaranteed, RAN shall send a notification towards SMF and keep the QoS Flow (i.e. while the NG-RAN is not delivering the requested GFBR for this QoS Flow), unless specific conditions at the NG-RAN require the release of the NG-RAN resources for this GBR QoS Flow, e.g. due to Radio link failure or RAN internal congestion. When applicable, NG-RAN sends a new notification, informing SMF that the GFBR can be guaranteed again.\nIf Alternative QoS parameters Sets are received with the Notification Control parameter, the NG-RAN may also include in the notification a reference corresponding to the QoS Parameter Set which it can currently fulfil as specified in TS 23.501 [3]. The target NG-RAN node may include in the notification control indication the reference to the QoS Parameter Set which it can currently fulfil over Xn to the source NG-RAN node during handover.\nIn addition, an Aggregate Maximum Bit Rate is associated to each PDU session (Session-AMBR), to each UE (UE-AMBR) and to each slice per UE (UE-Slice-MBR). The Session-AMBR limits the aggregate bit rate that can be expected to be provided across all Non-GBR QoS Flows for a specific PDU Session and is ensured by the UPF. The UE-AMBR limits the aggregate bit rate that can be expected to be provided across all Non-GBR QoS Flows of a UE and is ensured by the RAN (see clause 10.5.1). The UE-Slice-MBR limits the aggregate bit rate that can be expected to be provided across all GBR and Non-GBR QoS Flows corresponding to PDU Sessions of the UE for the same slice (S-NSSAI) as specified in TS 23.501 [3] and is ensured by the RAN (see clause 10.5.1).\nThe 5QI is associated to QoS characteristics giving guidelines for setting node specific parameters for each QoS Flow. Standardized or pre-configured 5G QoS characteristics are derived from the 5QI value and are not explicitly signalled. Signalled QoS characteristics are included as part of the QoS profile. The QoS characteristics consist for instance of (see TS 23.501 [3]):\n-\tPriority level;\n-\tPacket Delay Budget (including Core Network Packet Delay Budget);\n-\tPacket Error Rate;\n-\tAveraging window;\n-\tMaximum Data Burst Volume.\nAt Access Stratum level, the data radio bearer (DRB) defines the packet treatment on the radio interface (Uu). A DRB serves packets with the same packet forwarding treatment. The QoS flow to DRB mapping by NG-RAN is based on QFI and the associated QoS profiles (i.e. QoS parameters and QoS characteristics). Separate DRBs may be established for QoS flows requiring different packet forwarding treatment, or several QoS Flows belonging to the same PDU session can be multiplexed in the same DRB.\nIn the uplink, the mapping of QoS Flows to DRBs is controlled by mapping rules which are signalled in two different ways:\n-\tReflective mapping: for each DRB, the UE monitors the QFI(s) of the downlink packets and applies the same mapping in the uplink; that is, for a DRB, the UE maps the uplink packets belonging to the QoS flows(s) corresponding to the QFI(s) and PDU Session observed in the downlink packets for that DRB. To enable this reflective mapping, the NG-RAN marks downlink packets over Uu with QFI.\n-\tExplicit Configuration: QoS flow to DRB mapping rules can be explicitly signalled by RRC.\nThe UE always applies the latest update of the mapping rules regardless of whether it is performed via reflecting mapping or explicit configuration.\nWhen a QoS flow to DRB mapping rule is updated, the UE sends an end marker on the old bearer.\nIn the downlink, the QFI is signalled by NG-RAN over Uu for the purpose of RQoS and if neither NG-RAN, nor the NAS (as indicated by the RQA) intend to use reflective mapping for the QoS flow(s) carried in a DRB, no QFI is signalled for that DRB over Uu. In the uplink, NG-RAN can configure the UE to signal QFI over Uu.\nFor each PDU session, a default DRB may be configured: if an incoming UL packet matches neither an RRC configured nor a reflective mapping rule, the UE then maps that packet to the default DRB of the PDU session. For non-GBR QoS flows, the 5GC may send to the NG-RAN the Additional QoS Flow Information parameter associated with certain QoS flows to indicate that traffic is likely to appear more often on them compared to other non-GBR QoS flows established on the same PDU session.\nWithin each PDU session, it is up to NG-RAN how to map multiple QoS flows to a DRB. The NG-RAN may map a GBR flow and a non-GBR flow, or more than one GBR flow to the same DRB, but mechanisms to optimise these cases are not within the scope of standardization.\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "12.2\tExplicit Congestion Notification",
                    "description": "",
                    "summary": "",
                    "text_content": "The gNB and the UE support of the Explicit Congestion Notification (ECN) is specified in clause 5 of [27].\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                }
            ]
        },
        {
            "title": "13\tSecurity",
            "description": "",
            "summary": "",
            "tables": [],
            "figures_meta_data": [],
            "subsections": [
                {
                    "title": "13.1\tOverview and Principles",
                    "description": "",
                    "summary": "",
                    "text_content": "The following principles apply to NR connected to 5GC security, see TS 33.501 [5]:\n-\tFor user data (DRBs), ciphering provides user data confidentiality and integrity protection provides user data integrity;\n-\tFor RRC signalling (SRBs), ciphering provides signalling data confidentiality and integrity protection signalling data integrity;\nNOTE:\tCiphering and integrity protections are optionally configured except for RRC signalling for which integrity protection is always configured. Ciphering and integrity protection can be configured per DRB but all DRBs belonging to a PDU session for which the User Plane Security Enforcement information indicates that UP integrity protection is required (see TS 23.502 [22]), are configured with integrity protection.\n-\tFor key management and data handling, any entity processing cleartext shall be protected from physical attacks and located in a secure environment;\n-\tThe gNB (AS) keys are cryptographically separated from the 5GC (NAS) keys;\n-\tSeparate AS and NAS level Security Mode Command (SMC) procedures are used;\n-\tA sequence number (COUNT) is used as input to the ciphering and integrity protection and a given sequence number must only be used once for a given key (except for identical re-transmission) on the same radio bearer in the same direction.\nThe keys are organised and derived as follows:\n-\tKey for AMF:\n-\tKAMF is a key derived by ME and SEAF from KSEAF.\n-\tKeys for NAS signalling:\n-\tKNASint is a key derived by ME and AMF from KAMF, which shall only be used for the protection of NAS signalling with a particular integrity algorithm;\n-\tKNASenc is a key derived by ME and AMF from KAMF, which shall only be used for the protection of NAS signalling with a particular encryption algorithm.\nKey for gNB:\n-\tKgNB is a key derived by ME and AMF from KAMF. KgNB is further derived by ME and source gNB when performing horizontal or vertical key derivation.\nKeys for UP traffic:\n-\tKUPenc is a key derived by ME and gNB from KgNB, which shall only be used for the protection of UP traffic between ME and gNB with a particular encryption algorithm;\n-\tKUPint is a key derived by ME and gNB from KgNB, which shall only be used for the protection of UP traffic between ME and gNB with a particular integrity algorithm.\nKeys for RRC signalling:\n-\tKRRCint is a key derived by ME and gNB from KgNB, which shall only be used for the protection of RRC signalling with a particular integrity algorithm;\n-\tKRRCenc is a key derived by ME and gNB from KgNB, which shall only be used for the protection of RRC signalling with a particular encryption algorithm.\nIntermediate keys:\n-\tNH is a key derived by ME and AMF to provide forward security.\n-\tKgNB* is a key derived by ME and gNB when performing a horizontal or vertical key derivation.\nThe primary authentication enables mutual authentication between the UE and the network and provide an anchor key called KSEAF. From KSEAF, KAMF is created during e.g. primary authentication or NAS key re-keying and key refresh events. Based on KAMF, KNASint and KNASenc are then derived when running a successful NAS SMC procedure.\nWhenever an initial AS security context needs to be established between UE and gNB, AMF and the UE derive a KgNB and a Next Hop parameter (NH). The KgNB and the NH are derived from the KAMF. A NH Chaining Counter (NCC) is associated with each KgNB and NH parameter. Every KgNB is associated with the NCC corresponding to the NH value from which it was derived. At initial setup, the KgNB is derived directly from KAMF, and is then considered to be associated with a virtual NH parameter with NCC value equal to zero. At initial setup, the derived NH value is associated with the NCC value one. On handovers, the basis for the KgNB that will be used between the UE and the target gNB, called KgNB*, is derived from either the currently active KgNB or from the NH parameter. If KgNB* is derived from the currently active KgNB, this is referred to as a horizontal key derivation and is indicated to UE with an NCC that does not increase. If the KgNB* is derived from the NH parameter, the derivation is referred to as a vertical key derivation and is indicated to UE with an NCC increase. Finally, KRRCint, KRRCenc, KUPint and KUPenc are derived based on KgNB after a new KgNB is derived. This is depicted on Figure 13.1-1 below:\nFigure 13.1-1 illustrates the process of key derivation in a 5G network, focusing on the use of cryptographic techniques to generate shared keys between the network and the user equipment (UE). The figure depicts the key derivation process, which involves the use of a pseudorandom number generator (PRNG) to create a seed value, followed by a series of rounds of encryption and decryption using the Advanced Encryption Standard (AES) to generate the final shared key. The figure highlights the importance of secure key exchange in 5G networks, emphasizing the need for robust security measures to protect against potential threats and ensure the integrity of data transmission.\nFigure 13.1-1: 5G Key Derivation\nWith such key derivation, a gNB with knowledge of a KgNB, shared with a UE, is unable to compute any previous KgNB that has been used between the same UE and a previous gNB, therefore providing backward security. Similarly, a gNB with knowledge of a KgNB, shared with a UE, is unable to predict any future KgNB that will be used between the same UE and another gNB after n or more handovers (since NH parameters are only computable by the UE and the AMF).\nThe AS SMC procedure is for RRC and UP security algorithms negotiation and RRC security activation. When AS security context is to be established in the gNB, the AMF sends the complete UE 5G security capabilities to the gNB (i.e., all bits for every capability defined in TS 24.501 [28] and received in NAS signalling). At handover (or at UE Context retrieval), the complete UE 5G security capabilities are also sent by the source gNB to the target gNB (or by the last serving gNB to the receiving gNB respectively). The gNB chooses the ciphering algorithm which has the highest priority from its configured list and is also present in the UE 5G security capabilities. The gNB also chooses the integrity algorithm which has the highest priority from its configured list and is also present in the UE 5G security capabilities. The chosen algorithms are indicated to the UE in the AS SMC and this message is integrity protected. RRC downlink ciphering (encryption) at the gNB starts after sending the AS SMC message. RRC uplink deciphering (decryption) at the gNB starts after receiving and successful verification of the integrity protected AS security mode complete message from the UE. The UE verifies the validity of the AS SMC message from the gNB by verifying the integrity of the received message. RRC uplink ciphering (encryption) at the UE starts after sending the AS security mode complete message. RRC downlink deciphering (decryption) at the UE shall start after receiving and successful verification of the AS SMC message. The RRC Connection Reconfiguration procedure used to add DRBs shall be performed only after RRC security has been activated as part of the AS SMC procedure.\nA UE connected to 5GC, shall support integrity protected DRBs at any data rate, up to and including the highest data rate supported by the UE for both UL and DL. In case of failed integrity check (i.e. faulty or missing MAC-I), the concerned PDU shall be discarded by the receiving PDCP entity.\nKey refresh is possible for KgNB, KRRC-enc, KRRC-int, KUP-enc, and KUP-int and can be initiated by the gNB when a PDCP COUNTs are about to be re-used with the same Radio Bearer identity and with the same KgNB. Key re-keying is also possible for the KgNB, KRRC-enc, KRRC-int, KUP-enc, and KUP-int and can be initiated by the AMF when a 5G AS security context different from the currently active one shall be activated.\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "13.2\tSecurity Termination Points",
                    "description": "",
                    "summary": "",
                    "text_content": "The table below describes the security termination points.\nTable 13.2-1 Security Termination Points\n\n",
                    "tables": [
                        {
                            "description": "Table 13.2-1 Security Termination Points",
                            "table number": 7,
                            "summary": "",
                            "name": ""
                        }
                    ],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "13.3\tState Transitions and Mobility",
                    "description": "",
                    "summary": "",
                    "text_content": "As a general principle, on RRC_IDLE to RRC_CONNECTED transitions, RRC protection keys and UP protection keys are generated while keys for NAS protection as well as higher layer keys are assumed to be already available. These higher layer keys may have been established as a result of an AKA run, or as a result of a transfer from another AMF during handover or idle mode mobility see TS 23.502 [22]).\nOn RRC_CONNECTED to RRC_IDLE transitions, the gNBs deletes the keys it stores for that UE such that state information for idle mode UEs only has to be maintained in AMF. It is also assumed that gNB does no longer store state information about the corresponding UE and deletes the current keys from its memory. In particular, on connected to idle transitions:\n-\tThe gNB and UE delete NH, KgNB, KRRCint, KRRCenc, KUPint and KUPenc and related NCC;\n-\tAMF and UE keeps KAMF, KNASint and KNASenc stored.\nOn mobility with vertical key derivation the NH is further bound to the target PCI and its frequency ARFCN-DL before it is taken into use as the KgNB in the target gNB. On mobility with horizontal key derivation the currently active KgNB is further bound to the target PCI and its frequency ARFCN-DL before it is taken into use as the KgNB in the target gNB (see clause 13.1). In both cases, ARFCN-DL is the absolute frequency of SSB of the target PCell.\nIt is not required to change the AS security algorithms during intra-gNB-CU handover. If the UE does not receive an indication of new AS security algorithms during an intra-gNB-CU handover, the UE shall continue to use the same algorithms as before the handover (see TS 38.331 [12]).\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                }
            ]
        },
        {
            "title": "14\tUE Capabilities",
            "description": "The UE capabilities in NR rely on a hierarchical structure where each capability parameter is defined per UE, per duplex mode (FDD/TDD), per frequency range (FR1/FR2), per band, per band combinations, … as the UE may support different functionalities depending on those (see TS 38.306 [11]).\nNOTE 1:\tSome capability parameters are always defined per UE (e.g. SDAP, PDCP and RLC parameters) while some other not always (e.g. MAC and Physical Layer Parameters).\nThe UE capabilities in NR do not rely on UE categories: UE categories associated to fixed peak data rates are only defined for marketing purposes and not signalled to the network. Instead, the peak data rate for a given set of aggregated carriers in a band or band combination is the sum of the peak data rates of each individual carrier in that band or band combination, where the peak data rate of each individual carrier is computed according to the capabilities supported for that carrier in the corresponding band or band combination.\nFor each block of contiguous serving cells in a band, the set of features supported thereon is defined in a Feature Set (FS). The UE may indicate several Feature Sets for a band (also known as feature sets per band) to advertise different alternative features for the associated block of contiguous serving cells in that band. The two-dimensional matrix of feature sets for all the bands of a band combination (i.e. all the feature sets per band) is referred to as a feature set combination. In a feature set combination, the number of feature sets per band is equal to the number of band entries in the corresponding band combination, and all feature sets per band have the same number of feature sets. Each band combination is linked to one feature set combination. This is depicted on Figure 14-1 below:\nFigure 14-1 illustrates the various feature set combinations available in a telecommunication system, showcasing the different ways features can be grouped and utilized. The figure presents a matrix layout, with rows representing different feature sets and columns indicating the combinations of these sets. Each cell in the matrix is colored differently, representing the compatibility or incompatibility of the features within each combination. The figure emphasizes the importance of selecting the most suitable feature set combinations to optimize system performance and user experience.\nFigure 14-1: Feature Set Combinations\nIn addition, for some features in intra-band contiguous CA, the UE reports its capabilities individually per carrier. Those capability parameters are sent in feature set per component carrier and they are signalled in the corresponding FSs (per Band) i.e. for the corresponding block of contiguous serving cells in a band. The capability applied to each individual carrier in a block is agnostic to the order in which they are signalled in the corresponding FS.\nNOTE 2:\tFor intra-band non-contiguous CA, there are as many feature sets per band signalled as the number of (groups of contiguous) carriers that the UE is able to aggregate non-contiguously in the corresponding band.\nTo limit signalling overhead, the gNB can request the UE to provide NR capabilities for a restricted set of bands. When responding, the UE can skip a subset of the requested band combinations when the corresponding UE capabilities are the same. An eRedCap UE may ignore UE capability filtering and send all supported bands in the mirrored UE capability filter with an explicit indication on whether the filter was ignored or not.\nIf supported by the UE and the network, the UE may provide an ID in NAS signalling that represents its radio capabilities for one or more RATs in order to reduce signalling overhead. The ID may be assigned either by the manufacturer or by the serving PLMN. The manufacturer-assigned ID corresponds to a pre-provisioned set of capabilities. In the case of the PLMN-assigned ID, assignment takes place in NAS signalling.\nThe AMF stores the UE Radio Capability uploaded by the gNB as specified in TS 23.501 [3].\nThe gNB can request the UE capabilities for RAT-Types NR, EUTRA, UTRA-FDD. The UTRAN capabilities, i.e. the INTER RAT HANDOVER INFO, include START-CS, START-PS and \"predefined configurations\", which are \"dynamic\" IEs. In order to avoid the START values desynchronisation and the key replaying issue, the gNB always requests the UE UTRA-FDD capabilities before handover to UTRA-FDD. The gNB does not upload the UE UTRA-FDD capabilities to the AMF.\n",
            "summary": "",
            "tables": [],
            "figures_meta_data": [],
            "subsections": []
        },
        {
            "title": "15\tSelf-Configuration and Self-Optimisation",
            "description": "",
            "summary": "",
            "tables": [],
            "figures_meta_data": [],
            "subsections": [
                {
                    "title": "15.1\tDefinitions",
                    "description": "",
                    "summary": "",
                    "text_content": "Void.\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "15.2\tVoid",
                    "description": "",
                    "summary": "",
                    "text_content": "",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "15.3\tSelf-configuration",
                    "description": "",
                    "summary": "",
                    "text_content": "",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": [
                        {
                            "title": "15.3.1\tDynamic configuration of the NG-C interface",
                            "text_content": "The following prerequisites are assumed:\n-\tAn initial remote IP end point to be used for SCTP initialisation is provided to the NG-RAN node for each AMF the NG-RAN node is supposed to connect to.\nNG-RAN establishes the first SCTP (IETF RFC 4960 [23]) using a configured IP address.\nNOTE:\tThe NG-RAN node may use different source and/or destination IP end point(s) if the SCTP establishment towards one IP end point fails. How the NG-RAN node gets the remote IP end point(s) and its own IP address are outside the scope of this specification.\nOnce SCTP connectivity has been established, the NG-RAN node and the AMF shall exchange application level configuration data over NGAP with the NG Setup procedure, which is needed for these two nodes to interwork correctly on the NG interface:\n-\tThe NG-RAN node provides the relevant configuration information to the AMF, which includes list of supported TA(s), etc.;\n-\tThe AMF provides the relevant configuration information to the NG-RAN node, which includes PLMN ID, etc.;\n-\tWhen the application layer initialization is successfully concluded, the dynamic configuration procedure is completed and the NG-C interface is operational.\nAfter the application layer initialization is successfully completed, the AMF may add or update or remove SCTP endpoints to be used for NG-C signalling between the AMF and the NG-RAN node pair as specified in TS 23.501 [3].\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "15.3.2\tDynamic Configuration of the Xn interface",
                            "text_content": "The following prerequisites are necessary:\n-\tAn initial remote IP end point to be used for SCTP initialisation is provided to the NG-RAN node.\nNG-RAN establishes the first SCTP (IETF RFC 4960 [23]) using a configured IP address.\nNOTE:\tThe NG-RAN node may use different source and/or destination IP end point(s) if the SCTP establishment towards one IP end point fails.\nOnce SCTP connectivity has been established, the NG-RAN node and its candidate peer NG-RAN node are in a position to exchange application level configuration data over XnAP needed for the two nodes to interwork correctly on the Xn interface:\n-\tThe NG-RAN node provides the relevant configuration information to the candidate NG-RAN node, which includes served cell information;\n-\tThe candidate NG-RAN node provides the relevant configuration information to the initiating NG-RAN node, which includes served cell information;\n-\tWhen the application layer initialization is successfully concluded, the dynamic configuration procedure is completed and the Xn interface is operational;\n-\tThe NG-RAN node shall keep neighbouring NG-RAN nodes updated with the complete list of served cells, or, if requested by the peer NG-RAN node, by a limited list of served cells, while the Xn interface is operational.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "15.3.3\tAutomatic Neighbour Cell Relation Function",
                            "text_content": "The purpose of ANR function is to relieve the operator from the burden of manually managing NCRs. Figure 15.3.3.1-1 shows ANR and its environment:\nFigure 15.3.3.1-1 illustrates the interaction between a gNB (gNodeB) and an O A M (Outdoor Antenna Module) due to ANR (Antenna Noise Ratio). The figure depicts the signal transmission process, where the gNB sends a signal through the air to the O A M, which then amplifies and retransmits the signal. The ANR is a measure of the signal-to-noise ratio, which is crucial for determining the quality of the signal. The figure shows how the gNB and O A M work together to improve the signal quality and ensure reliable communication.\nFigure 15.3.3.1-1: Interaction between gNB and OAM due to ANR\nThe ANR function resides in the gNB and manages the Neighbour Cell Relation Table (NCRT). Located within ANR, the Neighbour Detection Function finds new neighbours and adds them to the NCRT. ANR also contains the Neighbour Removal Function which removes outdated NCRs. The Neighbour Detection Function and the Neighbour Removal Function are implementation specific.\nAn existing NCR from a source cell to a target cell means that gNB controlling the source cell:\na)\tKnows the global and physical IDs (e.g. NR CGI/NR PCI, ECGI/PCI) of the target cell; and\nb)\tHas an entry in the NCRT for the source cell identifying the target cell; and\nc)\tHas the attributes in this NCRT entry defined, either by OAM or set to default values.\nNCRs are cell-to-cell relations, while an Xn link is set up between two gNBs. Neighbour Cell Relations are unidirectional, while an Xn link is bidirectional.\nNOTE:\tThe neighbour information exchange, which occurs during the Xn Setup procedure or in the gNB Configuration Update procedure, may be used for ANR purpose.\nThe ANR function also allows OAM to manage the NCRT. OAM can add and delete NCRs. It can also change the attributes of the NCRT. The OAM system is informed about changes in the NCRT.\nANR relies on NCGI (see clause 8.2) and ANR reporting of E-UTRA cells as specified in TS 36.300 [2].\nFigure 15.3.3.2-1 illustrates the Automatic Neighbour Relation Function (ANR) in a telecommunication network. The figure depicts the process of establishing and maintaining neighbour relationships between different network nodes. Key components include the Network Layer (N layer), the Internet Protocol (IP layer), and the Transport Layer (T layer). The figure demonstrates how the ANR function facilitates efficient communication by automatically configuring and synchronizing network parameters, ensuring seamless data transmission and minimising the risk of network congestion or communication failures.\nFigure 15.3.3.2-1: Automatic Neighbour Relation Function\nFigure 15.3.3.2-1 depicts an example where the NG-RAN node serving cell A has an ANR function. In RRC_CONNECTED, the NG-RAN node instructs each UE to perform measurements on neighbour cells. The NG-RAN node may use different policies for instructing the UE to do measurements, and when to report them to the NG-RAN node. This measurement procedure is as specified in TS 38.331[12] and TS 36.331 [29].\n1.\tThe UE sends a measurement report regarding cell B. This report contains Cell B's PCI, but not its NCGI/ECGI.\nWhen the NG-RAN node receives a UE measurement report containing the PCI, the following sequence may be used.\n2.\tThe NG-RAN node instructs the UE, using the newly discovered PCI as parameter, to read all the broadcast NCGI(s) /ECGI(s), TAC(s), RANAC(s), PLMN ID(s) and, for neighbour NR cells, NR frequency band(s) and the gNB ID length(s). To do so, the NG-RAN node may need to schedule appropriate idle periods to allow the UE to read the NCGI/ECGI from the broadcast channel of the detected neighbour cell. How the UE reads the NCGI/ECGI is specified in TS 38.331 [12] and TS 36.331 [29].\n3.\tWhen the UE has found out the new cell's NCGI(s) /ECGI(s), the UE reports all the broadcast NCGI(s)/ECGI(s) to the serving cell NG-RAN node. In addition, the UE reports all the tracking area code(s), RANAC(s), PLMN IDs and, for neighbour NR cells, NR frequency band(s), and the gNB ID length(s) that have been read by the UE. In case the detected NR cell does not broadcast SIB1, the UE may report noSIB1 indication as specified in TS 38.331 [12].\n4.\tThe NG-RAN node decides to add this neighbour relation, and can use PCI and NCGI(s)/ECGI(s) to:\na.\tLookup a transport layer address to the new NG-RAN node;\nb.\tUpdate the Neighbour Cell Relation List;\nc.\tIf needed, setup a new Xn interface towards this NG-RAN node.\nFor Inter-system ANR, each cell contains an Inter Frequency Search list. This list contains all frequencies that shall be searched. Figure 15.3.3.5-1 depicts an example where the NG-RAN node serving cell A has an ANR function.\nFigure 15.3.3.5-1 illustrates the Automatic Neighbour Relation Function (ANRF) in the event of an E-UTRAN detected cell. The figure depicts the process of establishing and maintaining neighbour relationships between eNodeBs and eUTRAN users. Key components include the eNodeB, eUTRAN user equipment (UE), and the ANRF function. The figure demonstrates how the ANRF exchanges information to ensure seamless connectivity and efficient resource allocation within the network.\nFigure 15.3.3.5-1: Automatic Neighbour Relation Function in case of E-UTRAN detected cell\nIn RRC_CONNECTED, the NG-RAN node instructs a UE to perform measurements and detect E-UTRA cells connected to EPC.:\n1\tThe NG-RAN node instructs a UE to look for neighbour cells in the target system. To do so the NG-RAN node may need to schedule appropriate idle periods to allow the UE to scan all cells in the target system.\n2\tThe UE reports the PCI and carrier frequency of the detected cells in the target system.\nNOTE:\tThe NG-RAN node may use different policies for instructing the UE to do measurements, and when to report them to the NG-RAN node.\nWhen the NG-RAN node receives the UE reports containing PCIs of cell(s), the following sequence may be used:\n3\tThe NG-RAN node instructs the UE, using the newly discovered PCI as parameter, to read the ECGI, the TAC and all available PLMN ID(s) of the newly detected cell in case of E-UTRA detected cells. The UE ignores transmissions from the serving cell while finding the requested information transmitted in the broadcast channel of the detected inter-system/inter-frequency neighbour cell. To do so, the NG-RAN node may need to schedule appropriate idle periods to allow the UE to read the requested information from the broadcast channel of the detected inter-system neighbour cell.\n4\tAfter the UE has read the requested information in the new cell, it reports the detected ECGI, TAC, and available PLMN ID(s) to the serving cell NG-RAN node.\n5\tThe NG-RAN node updates its inter-system NCRT.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "15.3.4\tXn-C TNL address discovery",
                            "text_content": "If the NG-RAN node is aware of the RAN node ID of the candidate NG-RAN node (e.g. via the ANR function) but not of a TNL address suitable for SCTP connectivity, then the NG-RAN node can utilize the 5GC (an AMF it is connected to) to determine the TNL address as follows:\n-\tThe NG-RAN node sends the UPLINK RAN CONFIGURATION TRANSFER message to the AMF to request the TNL address of the candidate NG-RAN node, and includes relevant information such as the source and target RAN node ID;\n-\tThe AMF relays the request by sending the DOWNLINK RAN CONFIGURATION TRANSFER message to the candidate NG-RAN node identified by the target RAN node ID;\n-\tThe candidate NG-RAN node responds by sending the UPLINK RAN CONFIGURATION TRANSFER message containing one or more TNL addresses to be used for SCTP connectivity with the initiating NG-RAN node, and includes other relevant information such as the source and target RAN node ID;\n-\tThe AMF relays the response by sending the DOWNLINK CONFIGURATION TRANSFER message to the initiating NG-RAN node identified by the target RAN node ID.\nNOTE:\tVoid.\nThe NG-RAN node may determine the gNB ID length of the candidate gNB based on, e.g. OAM configuration or UE reporting in ANR function. If the NG-RAN node is not able to make this determination, it may include the NR cell identifier in the UPLINK RAN CONFIGURATION TRANSFER message to the AMF. The AMF may, if supported, determine the target gNB ID by matching the NR cell identifier with a gNB ID of a gNB it connects to.\n",
                            "figures_meta_data": [],
                            "tables": []
                        }
                    ]
                },
                {
                    "title": "15.4\tSupport for Energy Saving",
                    "description": "",
                    "summary": "",
                    "text_content": "",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": [
                        {
                            "title": "15.4.1\tGeneral",
                            "text_content": "The aim of this function is to reduce operational expenses through energy savings.\nThe function allows, for example in a deployment where capacity boosters can be distinguished from cells providing basic coverage, to optimize energy consumption enabling the possibility for an E-UTRA or NR cell providing additional capacity via single or dual connectivity, to be switched off when its capacity is no longer needed and to be re-activated on a need basis, or to support various adaptation techniques in time, frequency, spatial and power domains.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "15.4.2\tSolution description",
                            "text_content": "The solution builds upon the possibility for the NG-RAN node owning a capacity booster cell to autonomously decide to switch-off such cell to lower energy consumption (inactive state). The decision is typically based on cell load information, consistently with configured information. The switch-off decision may also be taken by O&M.\nThe NG-RAN node may initiate handover actions in order to off-load the cell being switched off and may indicate the reason for handover with an appropriate cause value to support the target node in taking subsequent actions, e.g. when selecting the target cell for subsequent handovers.\nAll neighbour NG-RAN nodes are informed by the NG-RAN node owning the concerned cell about the switch-off actions over the Xn interface, by means of the NG-RAN node Configuration Update procedure.\nAll informed nodes maintain the cell configuration data, e.g., neighbour relationship configuration, also when a certain cell is inactive. If basic coverage is ensured by NG-RAN node cells, NG-RAN node owning non-capacity boosting cells may request a re-activation over the Xn interface if capacity needs in such cells demand to do so. This is achieved via the Cell Activation procedure. During switch off time period of the boost cell, the NG-RAN node may prevent idle mode UEs from camping on this cell and may prevent incoming handovers to the same cell.\nThe NG-RAN node receiving a request should act accordingly. The switch-on decision may also be taken by O&M. All peer NG-RAN nodes are informed by the NG-RAN node owning the concerned cell about the re-activation by an indication on the Xn interface.\nThe solution also builds upon the possibility for the NG-RAN node owning a coverage cell to request neighbouring NG-RAN node(s) owning a capacity booster cell to switch on some SSB beams within the cell which are deactivated. The receiving NG-RAN node should act accordingly.\nThe solution also builds upon the possibility for an NG-RAN node to page certain UEs (e.g., stationary UEs) in RRC_INACTIVE state on a limited set of beams, instead of paging on all the beams within the cell. It is up to the gNB's implementation to select the UEs in RRC_INACTIVE for which paging in limited set of beams applies. If the paging over the limited set of beams fails, the gNB performs subsequent paging by implementation, e.g., by ensuring the same paging message is repeated in all the transmitted SSB beams.\nThe solution builds upon the possibility for the NG-RAN node owning a capacity booster cell to autonomously decide to switch-off such cell to dormant state. The decision is typically based on cell load information, consistently with configured information. The switch-off decision may also be taken by O&M. The NG-RAN node indicates the switch-off action to the eNB over NG interface and S1 interface. The NG-RAN node could also indicate the switch-on action to the eNB over NG interface and S1 interface.\nThe eNB providing basic coverage may request a NG-RAN node's cell re-activation based on its own cell load information or neighbour cell load information, the switch-on decision may also be taken by O&M. The eNB requests a NG-RAN node's cell re-activation and receives the NG-RAN node's cell re-activation reply from the NG-RAN node over the S1 interface and NG interface. Upon reception of the re-activation request, the NG-RAN node's cell should remain switched on at least until expiration of the minimum activation time. The minimum activation time may be configured by O&M or be left to the NG-RAN node's implementation.\nTo facilitate reducing gNB downlink transmission/uplink reception active time, UE can be configured with a periodic cell DTX/DRX pattern (i.e. active and non-active periods). The pattern configuration for cell DTX/DRX is common for the UEs configured with this feature in the cell. The cell DTX and cell DRX patterns can be configured and activated separately. A maximum of two cell DTX/DRX patterns can be configured per MAC entity for different serving cells. When cell DTX is configured and activated for the concerned cell, the UE may not monitor PDCCH in selected cases or does not monitor SPS occasions during cell DTX non-active duration. When cell DRX is configured and activated for the concerned cell, the UE does not transmit on CG resources or does not transmit a SR during cell DRX non-active duration. This feature is only applicable to UEs in RRC_CONNECTED state and it does not impact Random Access procedure, SSB transmission, paging, and system information broadcasting.  Cell DTX/DRX can be activated/deactivated by RRC signalling or L1 group common signalling. Cell DTX/DRX is characterized by the following:\n-\tactive duration: duration that the UE waits for to receive PDCCHs or SPS occasions, and transmit SR or CG. In this duration, the gNB transmission/reception of PDCCH, SPS, SR, CG, periodic and semi-persistent CSI report are not impacted for the purpose of network energy saving;\n-\tcycle: specifies the periodic repetition of the active-duration followed by a period of non-active duration.\nActive duration and cycle parameters are common between cell DTX and cell DRX, when both are configured;\nOnce the gNB recognizes there is an emergency call or public safety related service (e.g. MPS or MCS), the network should ensure that there is no impact to that service (e.g. it may release or deactivate cell DTX/DRX configuration). The network should also ensure that there is at least partial overlapping between UE's connected mode DRX on-duration and cell DTX/DRX active duration, i.e. the UE's connected mode DRX periodicity is a multiple of cell DTX/DRX periodicity or vice versa.\nThe same principle as described in 9.2.3.4 applies to conditional handover in case the source cell is using a network energy saving solution (e.g., the cell is activating cell DTX/DRX or turning off), unless hereunder specified. In this case, the following additional triggering conditions are supported, upon which UE may use NES-specific CHO event for executing CHO to a candidate cell, as defined in TS 38.331 [12]:\n-\tThe UE may be notified via DCI to enable CHO conditions(s) configured with NES event indication.\nIf a cell is activating or going to activate NES cell DTX/DRX, the cell can allow the access of UEs capable of NES cell DTX/DRX via a single bit in SIB1 but prevent the access of UEs not capable of cell DTX/DRX using barring mechanisms described in clause 7.4.\nFor an intra-band or inter-band CA SCell, a UE may obtain timing reference and AGC source from another serving cell in case the UE is not provided with SSB nor SMTC configuration for this SCell, as described in TS 38.331 [12].\nTo assist the gNB on muting transceivers and/or adapting transmission power, the UE can be configured to report multiple CSI entries in a CSI report based on two or more sub-configurations, as specified in clause 5.2.1.6 in TS 38.214 [56]. Each sub-configuration corresponds to a spatial domain adaptation pattern (subsets of available spatial elements) and/or a power offset between PDSCH and CSI-RS.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "15.4.3\tO&M requirements",
                            "text_content": "Operators should be able to configure the energy saving function.\nThe configured information should include:\n-\tThe ability of an NG-RAN node to perform autonomous cell switch-off;\n-\tThe ability of an NG-RAN node to request the re-activation of a configured list of inactive cells owned by a peer NG-RAN node.\nO&M may also configure:\n-\tpolicies used by the NG-RAN node for cell switch-off decision;\n-\tpolicies used by peer NG-RAN nodes for requesting the re-activation of an inactive cell;\n-\tThe minimum time an NG-RAN node's cell should remain activated upon reception of a re-activation request from an eNB.\n",
                            "figures_meta_data": [],
                            "tables": []
                        }
                    ]
                },
                {
                    "title": "15.5\tSelf-optimisation",
                    "description": "",
                    "summary": "",
                    "text_content": "",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": [
                        {
                            "title": "15.5.1\tSupport for Mobility Load Balancing",
                            "text_content": "The objective of mobility load balancing is to distribute load evenly among cells and among areas of cells, or to transfer part of the traffic from congested cell or from congested areas of cells, or to offload users from one cell, cell area, carrier or RAT to achieve network energy saving. This can be done by means of optimization of cell reselection/handover parameters and handover actions. The automation of such optimisation can provide high quality user experience, while simultaneously improving the system capacity and also to minimize human intervention in the network management and optimization tasks.\nIntra-RAT, intra-system inter-RAT and inter-system load balancing scenarios are supported.\nIn general, support for mobility load balancing consists of one or more of following functions:\n-\tLoad reporting for intra-RAT and intra-system inter-RAT load balancing;\n-\tLoad balancing action based on handovers;\n-\tAdapting handover and/or reselection configuration;\n-\tLoad reporting for inter-system load balancing.\nThe load reporting function is executed by exchanging load information over the Xn/X2/F1/E1 interfaces.\nThe following load related information should be supported which consists of:\n-\tRadio resource usage (per-cell and per SSB area PRB usage: DL/UL GBR PRB usage, DL/UL non-GBR PRB usage, DL/UL total PRB usage, and DL/UL scheduling PDCCH CCE usage; PRB usage for slice(s): DL/UL GBR PRB usage, DL/UL non-GBR PRB usage, and DL/UL Total PRB allocation);\n-\tTNL capacity indicator (UL/DL TNL offered capacity and available capacity);\n-\tCell Capacity Class value (UL/DL relative capacity indicator);\n-\tCapacity value (per cell, per SSB area and per slice: UL/DL available capacity);\n-\tHW capacity indicator (offered throughput and available throughput over E1, percentage utilisation over F1);\n-\tRRC connections (number of RRC connections, and available RRC Connection Capacity);\n-\tNumber of active UEs;\n-\tNR-U channel load (DL/UL channel occupancy time percentage, DL/UL energy detection threshold, radio resource usage).\nTo achieve load reporting function, Resource Status Reporting Initiation & Resource Status Reporting procedures are used.\n15.5.1.3\tLoad balancing action based on handovers\nThe source cell may initiate handover due to load. The target cell performs admission control for the load balancing handovers. A handover preparation related to a mobility load balancing action is distinguishable from other handovers, so that the target cell is able to apply appropriate admission control.\nThis function enables requesting of a change of handover and/or reselection parameters at target cell. The source cell that initialized the load balancing estimates if it is needed to change mobility configuration in the source and/or target cell. If the amendment is needed, the source cell initializes mobility negotiation procedure toward the target cell.\nThe source cell informs the target cell about the new mobility setting and provides cause for the change (e.g. load balancing related request). The proposed change is expressed by the means of the difference (delta) between the current and the new values of the handover trigger. The handover trigger is the cell specific offset that corresponds to the threshold at which a cell initialises the handover preparation procedure. Cell reselection configuration may be amended to reflect changes in the HO setting. The target cell responds to the information from the source cell. The allowed delta range for HO trigger parameter may be carried in the failure response message. The source cell should consider the responses before executing the planned change of its mobility setting.\nAll automatic changes on the HO and/or reselection parameters must be within the range allowed by OAM.\nThe load reporting function for inter-system load balancing is executed by exchanging load information between NG-RAN and E-UTRAN. Both event-triggered and periodic inter-system load reporting are supported. Event-triggered inter-system load reports are sent when the reporting node detects crossing of cell load thresholds.\nThe following load related information should be supported:\n-\tCell Capacity Class value (UL/DL relative capacity indicator);\n-\tCapacity value (per cell: UL/DL available capacity);\n-\tRRC connections (number of RRC connections, and available RRC Connection Capacity);\n-\tNumber of active UEs;\n-\tRadio Resource Status (per cell PRB usage: UL/DL GBR PRB usage for MIMO, DL/UL non-GBR PRB usage for MIMO, DL/UL total PRB usage for MIMO).\nNGAP procedures used for inter-system load balancing are Uplink RAN Configuration Transfer and Downlink RAN Configuration Transfer.\nS1AP procedures used for inter-system load balancing are eNB Configuration Transfer and MME Configuration Transfer.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "15.5.2\tSupport for Mobility Robustness Optimization",
                            "text_content": "Mobility Robustness Optimisation aims at detecting and enabling correction of following problems:\n-\tConnection failure due to intra-system or inter-system mobility;\n-\tInter-system Unnecessary HO (too early inter-system HO from NR to E-UTRAN with no radio link failure);\n-\tInter-system HO ping-pong;\n-\tPSCell change failure;\n-\tInter-system voice fallback failure;\n-\tFast MCG recovery failure.\nMRO provides means to distinguish the above problems from NR coverage related problems and other problems, not related to mobility.\nFor detection of a sub-optimal successful handovers, MRO additionally enables observability of:\n-\tSuccessful HO due to intra-NR mobility;\n-\tSuccessful HO due to inter-RAT mobility.\nFor detection of a sub-optimal successful PSCell addition/change, MRO additionally enables observability of:\n-\tSuccessful PSCell addition/change.\nFor analysis of connection failures, the UE makes the RLF Report available to the network.\nThe UE stores the latest RLF Report, including both LTE and NR RLF report until the RLF report is fetched by the network or for 48 hours after the connection failure is detected.\nThe UE only indicates RLF report availability and only provides the RLF report to the network if the current RPLMN is a PLMN that was present in the UE's EPLMN List or was the RPLMN at the time the connection failure was detected. In case RLF happens in an E-UTRA cell, the UE makes the LTE RLF Report available to NG-RAN nodes and eNB(s), and in case RLF happens in an NR cell the UE makes the NR RLF Report available to gNB(s).\nIf the LTE RLF Report is reported to a NG-RAN node, and the last serving node is an E-UTRAN node, the NG-RAN node may transfer it to the E-UTRAN node by triggering the Uplink RAN configuration transfer procedure over NG and the E-UTRAN node can take this into account as defined in TS 36.300 [2].\nOne of the functions of Mobility Robustness Optimization is to detect connection failures that occur due to Too Early or Too Late Handovers, or Handover to Wrong Cell. These problems are defined as follows:\n-\tIntra-system Too Late Handover: an RLF occurs after the UE has stayed for a long period of time in the cell; the UE attempts to re-establish the radio link connection in a different cell.\n-\tIntra-system Too Early Handover: an RLF occurs shortly after a successful handover from a source cell to a target cell or a handover failure occurs during the handover procedure; the UE attempts to re-establish the radio link connection in the source cell.\n-\tIntra-system Handover to Wrong Cell: an RLF occurs shortly after a successful handover from a source cell to a target cell or a handover failure occurs during the handover procedure; the UE attempts to re-establish the radio link connection in a cell other than the source cell and the target cell.\nIn the definition above, the \"successful handover\" refers to the UE state, namely the successful completion of the RA procedure.\nIn case of CHO, the Too Late Handover, Too Early Handover and Handover to Wrong Cell in the definition above means Too Late CHO Execution, Too Early CHO Execution and CHO Execution to Wrong Cell.\nDetection mechanism\nA failure indication may be initiated after a UE attempts to re-establish the radio link connection at NG-RAN node B after a failure at NG-RAN node A. NG-RAN node B may initiate the Failure Indication procedure towards multiple NG-RAN nodes if they control cells which use the PCI signalled by the UE during the re-establishment procedure. The NG-RAN node receiving this selects the UE context that matches the received Failure Cell ID and C-RNTI, and, if available, uses the shortMAC-I to confirm this identification, by calculating the shortMAC-I and comparing it to the received IE.\nA failure indication may also be sent to the node last serving the UE when the NG-RAN node fetches the RLF REPORT from UE by triggering:\n-\tThe Failure Indication procedure over Xn;\n-\tThe Uplink RAN configuration transfer procedure and Downlink RAN configuration transfer procedure over NG.\nThe detailed detection mechanisms for too late handover, too early handover and handover to wrong cell are carried out through the following in the NG-RAN node that served the UE before the reported connection failure:\n-\tIntra-system Too Late Handover: there is no recent handover for the UE prior to the connection failure e.g. the UE reported timer is absent or larger than the configured threshold (e.g. Tstore_UE_cntxt), or if CHO is configured but the CHO execution is not initiated for the UE prior to the connection failure, e.g. the UE reported timer is absent or larger than the configured threshold (e.g. Tstore_UE_cntxt).\n-\tIntra-system Too Early Handover: there is a recent handover for the UE prior to the connection failure e.g. the UE reported timer is smaller than the configured threshold (e.g. Tstore_UE_cntxt), and the first re-establishment attempt cell/the successful re-connect cell is the cell that served the UE at the last handover initialisation or fall back to the source cell configuration in case of DAPS HO.\n-\tIntra-system Handover to Wrong Cell: there is a recent handover for the UE prior to the connection failure e.g. the UE reported timer is smaller than the configured threshold (e.g. Tstore_UE_cntxt), and the first re-establishment attempt cell/ the cell UE attempts to re-connect/the cell UE attempts CHO recovery is neither the cell that served the UE at the last handover initialisation nor the cell that served the UE where the RLF happened or the cell that the handover was initialized toward.\nThe \"UE reported timer\" above indicates the time elapsed since the last handover initialisation until connection failure or the time elapsed since the CHO execution until connection failure.\nIn case of Too Early Handover or Handover to Wrong Cell, the NG-RAN node receiving the failure indication may inform the NG-RAN node controlling the cell where the mobility configuration caused the failure by means of the Handover Report procedure over Xn or the Uplink RAN Configuration Transfer procedure over NG. This may include the RLF report.\nFor MRO analysis, a gNB may take into account the information regarding the LBT failures occurred during the handover execution for a specific UE, as detected by the UE for UL, and by the target gNB for DL.\nRetrieval of information needed for problem analysis\nIn order to retrieve relevant information collected at the network side as part of the UE context, the UE provides C-RNTI used in the last serving cell. If the cause for the failure is identified as a \"Too Early HO\" or a \"HO to Wrong Cell\", the NG-RAN node controlling the last serving cell shall, include in the HANDOVER REPORT message the C-RNTI used in the source cell of the last completed handover before the failure. If the NG RAN node controlling that source cell provided the Mobility Information, it is also included in the HANDOVER REPORT message. If used, the Mobility Information is prepared at the source NG RAN node of a handover and may refer to or identify any handover-related data at this NG RAN node. In the Handover Preparation procedure, the source gNB can request the target gNB to provide information on DL LBT failures at the target gNB during handover execution.\nHandling multiple reports from a single failure event\nIn case the RRC re-establishment fails and the RRC connection setup succeeds, MRO evaluation of intra-RAT mobility connection failures may be triggered twice for the same failure event. In this case, only one failure event should be counted.\nOne of the functions of Mobility Robustness Optimization is to detect connection failures that occurred due to Too Early or Too Late inter-system handovers or inter-system Mobility Failure for Voice Fallback. These problems are defined as follows:\n-\tInter-system/ Too Late Handover: an RLF occurs after the UE has stayed in a cell belonging to an NG-RAN node for a long period of time; the UE attempts to re-connect to a cell belonging to an E-UTRAN node.\n-\tInter-system/ Too Early Handover: an RLF occurs shortly after a successful handover from a cell belonging to an E-UTRAN node to a target cell belonging to an NG-RAN node; the UE attempts to re-connect to the source cell or to another cell belonging to an E-UTRAN node.\n-\tInter-system Mobility Failure for Voice Fallback: an RLF occurs shortly after a successful handover triggered due to Voice Fallback, or a failure occurs during an handover triggered due to Voice Fallback, from a cell belonging to an NG-RAN node to a cell belonging to an E-UTRAN node; the UE attempts to re-connect to a cell belonging to an E-UTRAN node, or an NG-RAN node.\nDetection mechanism\nA failure indication may be sent to the node last serving the UE when the NG-RAN node fetches the RLF REPORT from UE by triggering:\n-\tThe Failure Indication procedure over Xn;\n-\tThe Uplink RAN configuration transfer procedure and Downlink RAN configuration transfer procedure over NG.\nIn case the last serving node is an E-UTRAN node, the detection mechanism proceeds as defined in TS 36.300 [2].\nIn case the last serving node is an NG-RAN node, the detection mechanisms for Too Late Inter-system Handover, Too Early Inter-system Handover, and Inter-system Mobility Failure for Voice Fallback are carried out through the following:\n-\tToo Late Inter-system Handover: the connection failure occurs while being connected to a NG-RAN node, and there is no recent handover for the UE prior to the connection failure i.e., the UE reported timer is absent or larger than the configured threshold, e.g., Tstore_UE_cntxt, and the first node where the UE attempts to re-connect is a E-UTRAN node.\n-\tToo Early Inter-system Handover: the connection failure occurs while being connected to a NG-RAN node, and there is a recent inter-system handover for the UE prior to the connection failure i.e., the UE reported timer is smaller than the configured threshold, e.g., Tstore_UE_cntxt, and the first cell where the UE attempts to re-connect and the node that served the UE at the last handover initialisation are both E-UTRAN node.\n-\tInter-system Mobility Failure for Voice Fallback: in case the connection failure occurs during an inter-system handover for voice fall back from NR, the RLF Report from the UE includes a voice fallback indication, as defined in TS 38.331 [12].\nThe \"UE reported timer\" above indicates the time elapsed since the last handover initialisation until connection failure. The UE may make the RLF Report available to an NG-RAN node. The NG-RAN node may forward the information using the FAILURE INDICATION message over Xn or by means of the Uplink RAN configuration transfer procedure and Downlink RAN configuration transfer over NG to the node that served the UE before the reported connection failure.\nIn case the failure is a Too Early Inter-system Handover, the NG-RAN node receiving the failure indication may inform the E-UTRAN node by means of the Uplink RAN Configuration Transfer procedure over NG. This may include the RLF report.\nOne of the purposes of inter-system Mobility Robustness Optimisation is the detection of a non-optimal use of network resources. In particular, in case of inter-system operations and when NR is considered, the case known as Unnecessary HO to another system is identified. The problem is defined as follows:\n-\tUE is handed over from NR to E-UTRAN even though quality of the NR coverage was sufficient for the service used by the UE. The handover may therefore be considered as unnecessary HO to another system (i.e. EPS) (too early inter-system HO without connection failure).\nIn inter-system HO, if the serving cell threshold (NR cell) is set too high, and cell in another system (i.e. EPS) with good signal strength is available, a handover to another system may be triggered unnecessarily, resulting in an inefficient use of the networks. With a lower threshold the UE could have continued in the source system (5GS).\nTo be able to detect the Unnecessary HO to another system, a gNB node may choose to put additional coverage and quality condition information into the HANDOVER REQUIRED message in the Handover Preparation procedure when an inter-system HO from gNB to another system occurs. The RAN node in the other system, upon receiving this additional coverage and quality information, may instruct the UE to continue measuring the cell(s) in source system during a period of time, while being connected to another system, and send periodic or single measurement reports to the node in other system. When the period of time indicated by the node in source system expires, the RAN node in the other system, may evaluate the received measurement reports with the coverage/quality condition received during the inter-system HO procedure and decide if an inter-system unnecessary HO report should be sent to the gNB in the source system.\nThe inter-system unnecessary HO report shall only be sent in cases where, in all UE measurement reports collected during the measurement period, any cells in the source system exceed the radio coverage and/or quality threshold (the radio threshold RSRP, RSRQ or/and SINR and the measurement period are indicated in the additional coverage and quality information in the Handover Preparation procedure). If an inter-system handover towards 5GS is executed from EPS within the indicated measurement period, the measurement period expires. In this case, the eNB in EPS may also send the HO Report. No HO Report shall be sent in case no NR cell could be included, or if the indicated period of time is interrupted by an inter-system handover to a system different than 5GS.\nThe RAN node in the source system (5GS) upon receiving of the report, can decide if/how its parameters (e.g., threshold to trigger Inter-system HO) should be adjusted.\nOne of the functions of Mobility Robustness Optimization is to detect ping-pongs that occur in inter-system environment. The problem is defined as follows:\n-\tA UE is handed over from a cell in a source system (e.g. 5GS) to a cell in a target system different from the source system (e.g. EPS), then within a predefined limited time the UE is handed over back to a cell in the source system, while the coverage of the source system was sufficient for the service used by the UE. The event may occur more than once.\nThe solution for the problem may consist of the following steps:\n1)\tStatistics regarding inter-system ping-pong occurrences are collected by the responsible node;\n2)\tCoverage verification is performed to check if the mobility to other system was inevitable.\nThe statistics regarding ping-pong occurrence may be based on evaluation of the UE History Information IE in the HANDOVER REQUIRED message. If the evaluation indicates a potential ping-pong case and the source NG_RAN node of the 1st inter-system handover is different than the target NG-RAN node of the 2nd inter-system handover, the target NG-RAN node may use the HANDOVER REPORT message or the UPLINK RAN CONFIGURATION TRANSFER message to indicate the occurrence of potential ping-pong cases to the source NG-RAN node.\nIf NG-RAN coverage during the potential ping-pong event needs to be verified for the purpose of determining corrective measures, the Unnecessary HO to another system procedure may be used.\nNOTE:\tInter-system mobility triggered by Voice Fallback is not considered as inter-system ping-pong.\nAll automatic changes of the HO and/or reselection parameters for mobility robustness optimisation shall be within the ranges allowed by OAM and specified below.\nThe following control parameters shall be provided by OAM to control MRO behaviour:\n-\tMaximum deviation of Handover Trigger: this parameter defines the maximum allowed absolute deviation of the Handover Trigger, from the default point of operation defined by the parameter values assigned by OAM.\n-\tMinimum time between Handover Trigger changes: this parameter defines the minimum allowed time interval between two Handover Trigger change performed by MRO. This is used to control the stability and convergence of the algorithm.\nFurthermore, in order to support the solutions for detection of mobility optimisation, the parameter Tstore_UE_cntxt shall be configurable by the OAM system.\nFor analysis of PSCell change failures, the UE makes the SCG Failure Information available to the MN. If the MN can perform an initial analysis, it transfers the SCG Failure Information together with the analysis results to the relevant SN which is responsible for the PSCell change failures. Otherwise, the MN transfers the SCG Failure Information to the last serving SN, which may respond using the SCG Failure Transfer procedure to inform the MN it is not responsible for the SCG failure. If needed, the MN transfer the SCG Failure Information to the source SN.\nOne of the functions of Mobility Robustness Optimization is to detect a sub-optimal successful handover event. The aim is to identify underlying conditions during successful ordinary handovers, successful DAPS handovers, or successful Conditional handovers.\nFor analysis of successful handover, the UE may collect Successful Handover Report (SHR) based on configuration by network, if stored, and makes the SHR available to the network as specified in TS 38.331 [12]. The UE stores the SHR until it is fetched by the network or for 48 hours after the SHR is recorded.\nFor SHR collected during intra-NR handover, if the target NR node fetches the SHR from the UE and the trigger of SHR is T310/T312, it may forward the information to the source NR node, i.e. the node handling the cell reported as source cell in this SHR, by using the ACCESS AND MOBILITY INDICATION message over Xn or by means of the Uplink RAN configuration transfer procedure and Downlink RAN configuration transfer procedure over NG.\nIf the NG-RAN node that fetches the SHR from the UE is neither the source node nor the target node of the handover, it forwards the information to the node(s) which configured the SHR trigger causing the SHR to be generated, by using the ACCESS AND MOBILITY INDICATION message over Xn or by means of the Uplink RAN configuration transfer procedure and Downlink RAN configuration transfer procedure over NG.\nIn case of failure shortly after successful Handover, the same mobility event may generate both a SHR and a RLF report. In this case, the node(s), which configured the SHR trigger causing the SHR, may take the duplication into account e.g. ignore the SHR.\nUpon retrieval of an SHR, the receiving node may analyse whether its mobility configuration needs adjustment.\nThe SHR report can be used to detect one case of Intra-system Too Late Handover, namely when DAPS HO is configured but an RLF is detected in the source cell during a successful DAPS HO.\nFor the analysis of successful PSCell addition/change, the UE supports Successful PSCell Addition/Change Report (SPR) based on the configuration by network, if received, and makes the SPR available to the network as specified in TS 38.331 [12].\nThe UE stores the SPR until the SPR is fetched by the network or for 48 hours after the SPR is recorded.\nThe UE makes the SPR available to gNB(s).\nWhen a gNB fetches the SPR from UE, it forwards the SPR to the MN that was serving the UE at the time the SPR was generated by using the ACCESS AND MOBILITY INDICATION message over Xn or by means of the Uplink RAN configuration transfer procedure and Downlink RAN configuration transfer over NG.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "15.5.3\tSupport for RACH Optimization",
                            "text_content": "RACH optimization is supported by UE reported information made available at the NG RAN node as specified in TS 38.331 [12] and by PRACH parameters exchange between NG RAN nodes.\nThe contents of the RA Report comprise of the following:\n-\tContention detection indication per RACH attempt;\n-\tIndexes of the SSBs and number of RACH preambles sent on each tried SSB listed in chronological order of attempts;\n-\tIndication whether the selected SSB is above or below the configured RSRP threshold per RACH attempt;\n-\t2-step RACH information as specified in clause 5.7.10.4 of TS 38.331 [12].\nSN RA Reports\nThe UE operating in NR-DC, may also support collection of RA Reports by the SN.\nThe RA report retrieval and forwarding in case of NGEN-DC is specified in TS 37.340 [21].\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "15.5.4\tUE History Information from the UE",
                            "text_content": "The source NG-RAN node collects and stores the UE History Information for as long as the UE stays in one of its cells.\nThe UE may report the UE history information when connecting to a cell of the NG-RAN node, consisting of PCell and PSCell mobility history information, as specified in TS 38.331 [12].\nWhen information needs to be discarded because the list is full, such information will be discarded in order of its position in the list, starting with the oldest cell record. If the list is full, and the UE history information from the UE is available, the UE history information from the UE should also be discarded.\nThe resulting information is then used in subsequent handover preparations by means of the Handover Preparation procedures over the NG and XN interfaces, which provide the target NG-RAN node with a list of previously visited cells and associated (per-cell) information elements. The Handover Preparation procedures also trigger the target NG-RAN node to start collection and storage of UE history Information and thus to propagate the collected information.\nIn case of CHO, the target NG-RAN node updates the time UE stayed in cell of the latest PCell entry (i.e. the source cell) when the UE successfully accesses a candidate cell of the target NG-RAN node. The updated value of the time UE stayed in the source cell is equal to the value received from the source NG-RAN node during the Handover Preparation plus the time from receiving the Handover Request message from the source NG-RAN node to receiving the RRC Reconfiguration Complete message from the UE. When the target NG-RAN node receives the SCG UHI from the source NG-RAN node via the Handover Request message, the target NG-RAN node also updates the time UE stayed in cell of the latest PSCell entry (i.e. the source PSCell) as specified in TS 37.340 [21].\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "15.5.5\tSupport for Coverage and Capacity Optimisation",
                            "text_content": "The objective of NR Coverage and Capacity Optimization (CCO) function is to detect and resolve or mitigate CCO issues, e.g. coverage and cell edge interference issues.\nEach NG-RAN node may be configured with alternative coverage configurations by OAM. The alternative coverage configurations contain relevant radio parameters and may also include a range for how each parameter is allowed to be adjusted.\nAn NG-RAN node may autonomously adjust within and switch between coverage configurations. When a change is executed, a NG-RAN node may notify its neighbour NG-RAN nodes using the NG-RAN NODE CONFIGURATION UPDATE message with the list of cells and SSBs with modified coverage included. The list contains the CGI of each modified cell with its coverage state indicator and optionally the SSB index of each modified SSB with its coverage state indicator.\nThe coverage state indicator may be used at the receiving NG-RAN node to adjust the functions of the Mobility Robustness Optimisation, e.g. by using the coverage state indicator to retrieve a previously stored Mobility Robustness Optimisation state. The coverage state indicator may also be used at the receiving NG-RAN node to adopt coverage configurations matching with neighbouring cells coverage configurations.\nIf the list includes indication about planned reconfiguration and possibly a list of replacing cells, the receiving NG-RAN node may use this to avoid connection or re-establishment failures during the reconfiguration. Also, if the sending NG-RAN node adds cells in inactive state, the receiving NG-RAN node may use this information to avoid connection or re-establishment failures. The receiving NG-RAN node may also use the notification to reduce the impact on mobility. The receiving NG-RAN node should avoid triggering handovers towards cell(s) that are indicated to be inactive.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "15.5.6\tSupport for PCI Optimisation",
                            "text_content": "The PCI Optimization Function in split gNB case is specified in TS 38.401 [4].\nFor centralized PCI assignment in gNB, the OAM assigns a single PCI for each NR cell in the gNB, and the gNB selects this value as the PCI of the NR cell.\nFor distributed PCI assignment in gNB, the OAM assigns a list of PCIs for each NR cell in the gNB, and the gNB selects a PCI value from the list of PCIs. The gNB may restrict this list by removing some PCIs that are reported by UEs, reported over the Xn interface by neighbouring gNBs, and/or acquired through other methods, e.g. detected over the air using a downlink receiver.\n",
                            "figures_meta_data": [],
                            "tables": []
                        }
                    ]
                }
            ]
        },
        {
            "title": "16\tVerticals Support",
            "description": "",
            "summary": "",
            "tables": [],
            "figures_meta_data": [],
            "subsections": [
                {
                    "title": "16.1\tURLLC",
                    "description": "",
                    "summary": "",
                    "text_content": "",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": [
                        {
                            "title": "16.1.1\tOverview",
                            "text_content": "The support of Ultra-Reliable and Low Latency Communications (URLLC) services is facilitated by the introduction of the mechanisms described in the following clauses. Please note however that those mechanisms need not be limited to the provision of URLLC services. Furthermore, RRC can associate logical channels with different SR configurations, for instance, to provide more frequent SR opportunities to URLLC services.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "16.1.2\tLCP Restrictions",
                            "text_content": "With LCP restrictions in MAC, RRC can restrict the mapping of a logical channel to a subset of the configured cells, numerologies, PUSCH transmission durations, configured grant configurations and control whether a logical channel can utilise the resources allocated by a Type 1 Configured Grant (see clause 10.3) or whether a logical channel can utilise dynamic grants indicating a certain physical priority level. With such restrictions, it then becomes possible to reserve, for instance, the numerology with the largest subcarrier spacing and/or shortest PUSCH transmission duration for URLLC services. Furthermore, RRC can associate logical channels with different SR configurations, for instance, to provide more frequent SR opportunities to URLLC services.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "16.1.3\tPacket Duplication",
                            "text_content": "When duplication is configured for a radio bearer by RRC, at least one secondary RLC entity is added to the radio bearer to handle the duplicated PDCP PDUs as depicted on Figure 16.1.3-1, where the logical channel corresponding to the primary RLC entity is referred to as the primary logical channel, and the logical channel corresponding to the secondary RLC entity(ies), the secondary logical channel(s). All RLC entities have the same RLC mode. Duplication at PDCP therefore consists in submitting the same PDCP PDUs multiple times: once to each activated RLC entity for the radio bearer. With multiple independent transmission paths, packet duplication therefore increases reliability and reduces latency and is especially beneficial for URLLC services.\nFigure 16.1.3-1 illustrates the process of packet duplication in a telecommunication network. The figure depicts a sequence of events where a packet enters the network through a router, undergoes duplication at a switch, and is then forwarded to multiple destinations. Key components include the source, packet, router, switch, and destinations. The duplication process is essential for load balancing and ensuring high availability in the network.\nFigure 16.1.3-1: Packet Duplication\nNOTE:\tPDCP control PDUs are not duplicated and always submitted to the primary RLC entity.\nWhen configuring duplication for a DRB, RRC also sets the state of PDCP duplication (either activated or deactivated) at the time of (re-)configuration. After the configuration, the PDCP duplication state can then be dynamically controlled by means of a MAC control element and in DC, the UE applies the MAC CE commands regardless of their origin (MCG or SCG). When duplication is configured for an SRB the state is always active and cannot be dynamically controlled. When configuring duplication for a DRB with more than one secondary RLC entity, RRC also sets the state of each of them (i.e. either activated or deactivated). Subsequently, a MAC CE can be used to dynamically control whether each of the configured secondary RLC entities for a DRB should be activated or deactivated, i.e. which of the RLC entities shall be used for duplicate transmission. Primary RLC entity cannot be deactivated. When duplication is deactivated for a DRB, all secondary RLC entities associated to this DRB are deactivated. When a secondary RLC entity is deactivated, it is not re-established, the HARQ buffers are not flushed, and the transmitting PDCP entity should indicate to the secondary RLC entity to discard all duplicated PDCP PDUs.\nWhen activating duplication for a DRB, NG-RAN should ensure that at least one serving cell is activated for each logical channel associated with an activated RLC entity of the DRB; and when the deactivation of SCells leaves no serving cells activated for a logical channel of the DRB, NG-RAN should ensure that duplication is also deactivated for the RLC entity associated with the logical channel.\nWhen duplication is activated, the original PDCP PDU and the corresponding duplicate(s) shall not be transmitted on the same carrier. The logical channels of a radio bearer configured with duplication can either belong to the same MAC entity (referred to as CA duplication) or to different ones (referred to as DC duplication). CA duplication can also be configured in either or both of the MAC entities together with DC duplication when duplication over more than two RLC entities is configured for the radio bearer. In CA duplication, logical channel mapping restrictions are used in a MAC entity to ensure that the different logical channels of a radio bearer in the MAC entity are not sent on the same carrier. When CA duplication is configured for an SRB, one of the logical channels associated to the SRB is mapped to SpCell.\nWhen CA duplication is deactivated for a DRB in a MAC entity (i.e. none or only one of RLC entities of the DRB in the MAC entity remains activated), the logical channel mapping restrictions of the logical channels of the DRB are lifted for as long as CA duplication remains deactivated for the DRB in the MAC entity.\nWhen an RLC entity acknowledges the transmission of a PDCP PDU, the PDCP entity shall indicate to the other RLC entity(ies) to discard it. In addition, in case of CA duplication, when an RLC entity restricted to only SCell(s) reaches the maximum number of retransmissions for a PDCP PDU, the UE informs the gNB but does not trigger RLF.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "16.1.4\tCQI and MCS",
                            "text_content": "For channel state reporting, a CQI table for target block error rate 10-5 is introduced.\nFor scheduling data packets with higher reliability, 64QAM MCS tables containing entries with lower spectral efficiency are introduced for both downlink and uplink. The tables are different for CP-OFDM and DFT-s-OFDM. The MCS tables can be configured semi-statically or dynamically. The dynamic signalling of MCS table is supported by configuring UE with MCS-C-RNTI, where the scrambling of DCI CRC by MCS-C-RNTI indicates the 64QAM MCS tables with entries of lower spectral efficiency.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "16.1.5\tDCI formats",
                            "text_content": "For PDCCH transmission with higher reliability, two DCI formats are introduced for uplink and downlink scheduling respectively.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "16.1.6\tHigher layer multi-connectivity",
                            "text_content": "The redundant transmission may be applied on the user plane path between the UE and the network for URLLC service as specified in TS 23.501 [3].\nUE may initiate two redundant PDU Sessions over the 5G network. The 5GS sets up the user plane paths of the two redundant PDU sessions to be disjoint. When PDU session setup or modification is initiated, the RAN can configure dual connectivity in one NG-RAN node or two NG-RAN nodes for the two redundant PDU sessions to ensure the disjoint user plane paths according to the redundancy information received from the 5GC. The RAN shall ensure that the resources of the data radio bearers for the two redundant PDU sessions are isolated. If the RAN cannot satisfy the disjoint user plane requirement, the redundant PDU sessions may be kept or not kept according to the RAN local configuration. The redundancy information is transferred to the target NG-RAN node in case of handover.\nTwo NG-U tunnels are setup between single UPF and single NG-RAN node for redundant transmission of the QoS flows when PDU session setup or modification is initiated. The two NG-U tunnels are transferred via disjointed transport layer paths. The 5GC provides the indicator per QoS flow to the NG-RAN for the redundant transmission. For downlink, the NG-RAN node eliminates the duplicated packets per QoS flow. For uplink, the NG-RAN node replicates the packets and transmits them via the two NG-U tunnels. The indicator per QoS flow for redundant transmission is transferred to the target NG-RAN node in case of handover.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "16.1.7\tURLLC in Unlicensed Controlled Environment",
                            "text_content": "URLLC services can be supported in shared spectrum where LBT failures are assumed to be not frequent. In this case, a channel access procedure for semi-static channel occupancy can be initiated by the gNB or the UE, or the gNB operates in dynamic channel access mode, as described in TS 37.213 [37]. To handle potential LBT failures on configured grants (CG), the CG retransmission timer can be optionally configured to enable autonomous retransmissions, and it may be configured simultaneously with enhanced intra-UE overlapping resource prioritization mechanisms. When the CG retransmission timer is configured, the UE shall select the HARQ process for each CG resource by itself. If the enhanced intra-UE overlapping resource prioritization mechanisms is also configured, the UE may be further configured to select the HARQ process for a CG resource based on logical channel priority.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "16.1.8\tPUCCH cell switching for TDD cells",
                            "text_content": "To reduce the delay for HARQ-ACK feedback for TDD operation with URLLC services, PUCCH cell switching for TDD cells is supported. The UE can be provided in each PUCCH group with a PUCCH switching SCell (PUCCH sSCell) that can be used for PUCCH transmission in addition to PCell / PSCell / PUCCH SCell. The applicable cell for PUCCH transmission to be either on PCell /PSCell / PUCCH SCell or the PUCCH sSCell at a time is either defined by:\n-\ta higher layer configured semi-static time-domain pattern of the applicable cell for PUCCH transmission; or\n-\tdynamic indication of the cell for PUCCH transmission through a PDCCH scheduling a PUCCH transmission.\nThe PUCCH cell switching is applicable to all UCI types when using the higher layer configured time-domain pattern, but is only applicable to HARQ feedback for the dynamic indication of the cell for PUCCH transmission through a PDCCH scheduling PUCCH.\n",
                            "figures_meta_data": [],
                            "tables": []
                        }
                    ]
                },
                {
                    "title": "16.2\tIMS Voice",
                    "description": "",
                    "summary": "",
                    "text_content": "",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": [
                        {
                            "title": "16.2.0\tSupport for IMS voice",
                            "text_content": "For IMS voice support in NG-RAN, the following is assumed:\n-\tNetwork ability to support IMS voice sessions, i.e. ability to support QoS flows with 5QI for voice and IMS signalling (see clause 12 and TS 23.501 [3]), or through EPC System fallback;\n-\tUE capability to support \"IMS voice over PS\", see TS 24.501 [28].\nThe capabilities indications check is handled at NAS layer. To maintain the voice service in NG-RAN, the UE provides additional capabilities over RRC (see TS 38.331 [12]), that are used to determine accurate NR voice support options.\nFurther MMTEL IMS voice and video enhancements are facilitated by the mechanisms described in the following clauses.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "16.2.1\tSupport for MMTEL IMS voice and video enhancements",
                            "text_content": "RAN-assisted codec adaptation provides a means for the gNB to send codec adaptation indication with recommended bit rate to assist the UE to select or adapt to a codec rate for MMTEL voice or MMTEL video. The RAN-assisted codec adaptation mechanism supports the uplink/downlink bit rate increase or decrease. For a bearer associated with configuration of MBR greater than GBR, the recommended uplink/downlink bit rate is within boundaries set by the MBR and GBR of the concerned bearer.\nFor uplink or downlink bit rate adaptation, gNB may send a recommended bit rate to the UE to inform the UE on the currently recommended transport bit rate on the local uplink or downlink, which the UE may use in combination with other information to adapt the bit rate, e.g. the UE may send a bit rate request to the peer UE via application layer messages as specified in TS 26.114 [24], which the peer UE may use in combination with other information to adapt the codec bit rate. The recommended bit rate is in kbps at the physical layer at the time when the decision is made.\nThe recommended bit rate for UL and DL is conveyed as a MAC Control Element (CE) from the gNB to the UE as outlined in Figure 16.2.1.1-1.\nFigure 16.2.1.1-1 presents a recommendation for the uplink (UL) or downlink (DL) bit rate, illustrating the optimal data transmission rates for various network conditions. The graph plots the bit rate against the signal-to-noise ratio (SNR) in decibels (dB), with different curves representing different network types and user equipment. The figure highlights the trade-off between latency and throughput, suggesting that higher bit rates are suitable for lower SNR conditions, while lower bit rates can be used for higher SNR conditions to reduce latency. The figure is essential for network designers and operators to ensure efficient and reliable communication in different network environments.\nFigure 16.2.1.1-1: UL or DL bit rate recommendation\nBased on the recommended bit rate from the gNB, a UE may initiate an end-to-end bit rate adaptation with its peer (UE or MGW). The UE may also send a query message to its local gNB to check if a bit rate recommended by its peer can be provided by the gNB. The UE is not expected to go beyond the recommended bit rate from the gNB.\nThe recommended bit rate query message is conveyed as a MAC CE from the UE to the gNB as outlined in Figure 16.2.1.1-2.\nFigure 16.2.1.1-2 presents a query for the recommended bit rate in the uplink (UL) or downlink (DL) based on the user's location and network conditions. The figure illustrates a typical telecommunication network, with the user equipment (UE) at the center, interacting with the base station (BS) and other network elements. The x-axis represents the distance from the BS, while the y-axis indicates the bit rate in kbps. The curve shows the optimal bit rate for each distance, taking into account factors such as signal strength, interference, and network congestion. The shaded area represents the range of bit rates that are considered acceptable for a given distance, ensuring a smooth and reliable user experience. The figure emphasizes the importance of network optimization and adaptive modulation and coding (AMC) in delivering high-quality communication services.\nFigure 16.2.1.1-2: UL or DL bit rate recommendation query\nA prohibit timer can be configured per logical channel by the network to limit UEs sending frequent query MAC CEs. Independent prohibit timers are used for each direction (uplink and downlink) to prohibit the UE from retransmitting exactly the same query MAC CE to the gNB during the configured time.\nThe air interface delay budget can be relaxed to increase the robustness of the transmission for coverage enhancement. Such relaxation may be achieved when a UE in good coverage indicates a preference to the gNB to reduce the local air interface delay by sending a DelayBudgetReport message to decrease the DRX cycle length, so that the E2E delay and jitter can be reduced. When the UE detects changes such as end-to-end MMTEL voice quality or local radio quality, the UE may inform the gNB its new preference by sending DelayBudgetReport messages with updated contents.\n",
                            "figures_meta_data": [],
                            "tables": []
                        }
                    ]
                },
                {
                    "title": "16.3\tNetwork Slicing",
                    "description": "",
                    "summary": "",
                    "text_content": "",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": [
                        {
                            "title": "16.3.1\tGeneral Principles and Requirements",
                            "text_content": "In this clause, the general principles and requirements related to the realization of network slicing in the NG-RAN for NR connected to 5GC and for E-UTRA connected to 5GC are given.\nA network slice always consists of a RAN part and a CN part. The support of network slicing relies on the principle that traffic for different slices is handled by different PDU sessions. Network can realise the different network slices by scheduling and also by providing different L1/L2 configurations.\nEach network slice is uniquely identified by a S-NSSAI, as defined in TS 23.501 [3]. NSSAI (Network Slice Selection Assistance Information) includes one or a list of S-NSSAIs (Single NSSAI) where a S-NSSAI is a combination of:\n-\tmandatory SST (Slice/Service Type) field, which identifies the slice type and consists of 8 bits (with range is 0-255);\n-\toptional SD (Slice Differentiator) field, which differentiates among Slices with same SST field and consist of 24 bits.\nThe list includes at most 8 S-NSSAI(s).\nThe UE provides NSSAI (Network Slice Selection Assistance Information) for network slice selection in RRCSetupComplete, if it has been provided by NAS (see clause 9.2.1.3). While the network can support large number of slices (hundreds), the UE need not support more than 8 slices simultaneously. A BL UE or a NB-IoT UE supports a maximum of 8 slices simultaneously.\nNetwork Slicing is a concept to allow differentiated treatment depending on each customer requirements. With slicing, it is possible for Mobile Network Operators (MNO) to consider customers as belonging to different tenant types with each having different service requirements that govern in terms of what slice types each tenant is eligible to use based on Service Level Agreement (SLA) and subscriptions.\nThe following key principles apply for support of Network Slicing in NG-RAN:\nRAN awareness of slices\n-\tNG-RAN supports a differentiated handling of traffic for different network slices which have been pre-configured. How NG-RAN supports the slice enabling in terms of NG-RAN functions (i.e. the set of network functions that comprise each slice) is implementation dependent.\nSelection of RAN part of the network slice\n-\tNG-RAN supports the selection of the RAN part of the network slice, by NSSAI provided by the UE or the 5GC which unambiguously identifies one or more of the pre-configured network slices in the PLMN.\nResource management between slices\n-\tNG-RAN supports policy enforcement between slices as per service level agreements. It should be possible for a single NG-RAN node to support multiple slices. The NG-RAN should be free to apply the best RRM policy for the SLA in place to each supported slice.\nSupport of QoS\n-\tNG-RAN supports QoS differentiation within a slice, and per Slice-Maximum Bit Rate may be enforced per UE, if feasible. How NG-RAN enables UE-Slice-MBR enforcement and rate limitation (see TS 23.501 [3]) is up to network implementation.\nRAN selection of CN entity\n-\tFor initial attach, the UE may provide NSSAI to support the selection of an AMF. If available, NG-RAN uses this information for routing the initial NAS to an AMF. If the NG-RAN is unable to select an AMF using this information or the UE does not provide any such information the NG-RAN sends the NAS signalling to one of the default AMFs.\n-\tFor subsequent accesses, the UE provides a Temp ID, which is assigned to the UE by the 5GC, to enable the NG-RAN to route the NAS message to the appropriate AMF as long as the Temp ID is valid (NG-RAN is aware of and can reach the AMF which is associated with the Temp ID). Otherwise, the methods for initial attach applies.\nResource isolation between slices\n-\tThe NG-RAN supports resource isolation between slices. NG-RAN resource isolation may be achieved by means of RRM policies and protection mechanisms that should avoid that shortage of shared resources in one slice breaks the service level agreement for another slice. It should be possible to fully dedicate NG-RAN resources to a certain slice. Some RACH resources can be associated to specific NSAG(s). Other aspects how NG-RAN supports resource isolation is implementation dependent.\nAccess control\n-\tBy means of the unified access control (see clause 7.4), operator-defined access categories can be used to enable differentiated handling for different slices. NG-RAN may broadcast barring control information (i.e. a list of barring parameters associated with operator-defined access categories) to minimize the impact of congested slices.\nSlice Availability\n-\tSome slices may be available only in part of the network. A slice is considered available in a cell if it is supported by the TA comprising the cell and the slice is not configured with zero resources, as specified in TS 23.501 [3]. A slice is supported within a TA if it is included in the slice support list for the TA signalled from the NG-RAN to the AMF. The NG-RAN supported S-NSSAI(s), NSAG(s) and NSAG related information such as NSAG associated Cell Reselection Priority and/or NSAG associated RACH resources are configured by OAM. Awareness in the NG-RAN of the slices supported in the cells of its neighbours may be beneficial for inter-frequency mobility in connected mode. In order to support the NSAG, the NG-RAN provides the AMF with the NSAG information per TA in the appropriate NG interface management procedures, as specified in TS 38.413 [26]. Awareness in the NG-RAN of the NSAG information supported in the list(s) of neighbour cells may be configured by OAM, or exchanged with neighbour NG-RAN nodes.\n-\tThe NG-RAN and the 5GC are responsible to handle a service request for a slice that may or may not be available in a given area. Admission or rejection of access to a slice may depend by factors such as support for the slice, availability of resources, support of the requested service by NG-RAN.\n-\tThe NG-RAN may be signalled with the Partially Allowed NSSAI from the AMF as specified in TS 23.501 [3]. The NG-RAN may decide to use the Partially Allowed NSSAI for mobility decision.\n-\tSupport for Network Slices with Network Slice Area of Service not matching deployed Tracking Areas is specified in TS 23.501 [3]. NG-RAN cells that are outside the Area of Service may be configured with zero resources for the concerned slice(s). The concerned slice(s) cannot use any dedicated, prioritized nor any shared resources of that cell. Awareness of zero resources configured for a slice in one or more cells may be exchanged with neighbour NG-RAN nodes for mobility reasons.\nSupport for UE associating with multiple network slices simultaneously\n-\tIn case a UE is associated with multiple slices simultaneously, only one signalling connection is maintained and for intra-frequency cell reselection, the UE always tries to camp on the best cell. For inter-frequency cell reselection, dedicated priorities can be used to control the frequency on which the UE camps.\nGranularity of slice awareness\n-\tSlice awareness in NG-RAN is introduced at PDU session level, by indicating the S-NSSAI corresponding to the PDU Session, in all signalling containing PDU session resource information.\nValidation of the UE rights to access a network slice\n-\tIt is the responsibility of the 5GC to validate that the UE has the rights to access a network slice. Prior to receiving the Initial Context Setup Request message, the NG-RAN may be allowed to apply some provisional/local policies, based on awareness of which slice the UE is requesting access to. During the initial context setup, the NG-RAN is informed of the slice for which resources are being requested.\nNetwork slice replacement\n-\tNG-RAN may support network slice replacement for a PDU session as defined in TS 23.501 [3].\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "16.3.2\tAMF and NW Slice Selection",
                            "text_content": "NG-RAN selects AMF based on a Temp ID or NSSAI provided by the UE over RRC as specified in TS 38.410 [16]. The mechanisms used in the RRC protocol are described in the next clause.\nTable 16.3.2.1-1 AMF selection based on Temp ID and NSSAI\n\nWhen triggered by the upper layer, the UE conveys the NSSAI over RRC in the format explicitly indicated by the upper layer.\n",
                            "figures_meta_data": [],
                            "tables": [
                                {
                                    "description": "Table 16.3.2.1-1 AMF selection based on Temp ID and NSSAI",
                                    "table number": 8,
                                    "summary": "",
                                    "name": ""
                                }
                            ]
                        },
                        {
                            "title": "16.3.3\tResource Isolation and Management",
                            "text_content": "Resource isolation enables specialized customization and avoids one slice affecting another slice.\nHardware/software resource isolation is up to implementation. Each slice may be assigned with either shared, prioritized or dedicated radio resource up to RRM implementation and SLA as in TS 28.541 [49].\nTo enable differentiated handling of traffic for network slices with different SLA:\n-\tNG-RAN is configured with a set of different configurations for different network slices by OAM;\n-\tTo select the appropriate configuration for the traffic for each network slice, NG-RAN receives relevant information indicating which of the configurations applies for this specific network slice.\nSlice-based RACH configuration for RA isolation and prioritization can be included in SIB1 messages. The slice-based RACH configurations are associated to specific NSAG(s), and if not provided for a NSAG that UE considers for selecting the RACH configuration, then the UE does not consider the NSAG for selecting the slice-based RACH configuration. The UE determines the NSAG to be considered during RA as specified in TS 23.501 [3]. When the UE AS does not receive any NSAG information from NAS for Random Access, the UE does not apply the slice-based RACH configuration.\nThe NG-RAN node may use Multi-Carrier Resource Sharing or Resource Repartitioning to allocate resources to a slice during the procedures described in 16.3.4 to support the slice service continuity in case of slice resources shortage.\nIn Multi-Carrier Resource Sharing the RAN node can setup the dual connectivity or carrier aggregation with different frequency and overlapping coverage where the same slice is available.\nThe Resource Repartitioning allows a slice to use resources from the shared pool or/and prioritized pool when its own dedicated or prioritized resources are not available and the use of unused resources in the prioritized pool is as specified in TS 28.541 [49].\nSlice RRM policies/restrictions associated with Resource Repartitioning are configured from O&M.\nMeasurements of RRM policy utilization according to resource types defined in TS 28.541 [49] are reported from RAN nodes to O&M and may lead O&M to update the configuration of the Slice RRM policies/restrictions.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "16.3.3a\tSlice-based cell reselection",
                            "text_content": "Slice-based cell reselection information can be included in SIB16 and in RRCRelease messages. The slice-based cell reselection information may include reselection priorities per NSAG per frequency and corresponding list(s) of cells where the slices of the NSAG are supported or not supported. The UE determines the NSAG(s) and their priorities to be considered during cell reselection as specified in TS 23.501 [3], and in TS 38.304 [10].\nWhen a UE supports slice-based cell reselection, and when slice-based cell reselection information is provided to the UE, then the UE uses the slice-based cell reselection information. Valid cell reselection information provided in RRCRelease always has a priority over cell reselection information provided in SIB messages. When no slice-based cell reselection information is provided for any NSAG that was determined to be considered during cell reselection (as specified in TS 23.501 [3]), then the UE uses the general cell reselection information, i.e., without considering the NSAG(s) and their priorities.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "16.3.4\tSignalling Aspects",
                            "text_content": "In this clause, signalling flows related to the realization of network slicing in the NG-RAN are given.\nRAN selects the AMF based on a Temp ID or NSSAI provided by the UE.\nFigure 16.3.4.2 illustrates the process of AMF (Access and Mobility Management Function) selection in a 5G network. The figure depicts the interaction between the AMF and the eMBMS (enhanced Multimedia Broadcast Multicast Service) in the context of resource allocation and user association. Key components include the AMF, eMBMS, and the 5G network infrastructure, with a focus on the optimization of network resources for efficient service delivery. The figure highlights the importance of coordinated decision-making between the AMF and eMBMS to ensure seamless connectivity and optimal performance in 5G networks.\nFigure 16.3.4.2-1: AMF selection\nIn case a Temp ID is not available, the NG-RAN uses the NSSAI provided by the UE at RRC connection establishment to select the appropriate AMF (the information is provided after MSG3 of the random access procedure). If such information is also not available, the NG-RAN routes the UE to one of the configured default AMF(s).\nThe NG-RAN uses the list of supported S-NSSAI(s) previously received in the NG Setup Response message when selecting the AMF with the NSSAI. This list may be updated via the AMF Configuration Update message.\nFollowing the initial access, the establishment of the RRC connection and the selection of the correct AMF, the AMF establishes the complete UE context by sending the Initial Context Setup Request message to the NG-RAN over NG-C. The message contains the Allowed NSSAI and additionally contains the S-NSSAI(s) as part of the PDU session(s) resource description when present in the message and may contain Partially Allowed NSSAI. Upon successful establishment of the UE context and allocation of PDU session resources to the relevant network slice(s) when present, the NG-RAN responds with the Initial Context Setup Response message.\nFigure 16.3.4.3 -1: Network Slice-aware Initial Context Setup illustrates the process of establishing a network slice-aware initial context in a multi-tenant network infrastructure. The figure depicts the interaction between the network controller, tenant applications, and network functions. It shows how the network controller manages the allocation of resources and the establishment of a secure initial context for tenant applications. The figure highlights the importance of efficient resource management and security in multi-tenant network environments.\nFigure 16.3.4.3-1: Network Slice-aware Initial Context Setup\nWhen new PDU sessions need to be established, the 5GC requests the NG-RAN to allocate/ resources relative to the relevant PDU sessions by means of the PDU Session Resource Setup procedures over NG-C. One S-NSSAI is added per PDU session to be established, so NG-RAN is enabled to apply policies at PDU session level according to the SLA represented by the network slice, while still being able to apply (for example) differentiated QoS within the slice.\nNG-RAN confirms the establishment of the resources for a PDU session associated to a certain network slice by responding with the PDU Session Resource Setup Response message over the NG-C interface.\nFigure 16.3.4.4 -1 depicts the process of network slice-aware PDU session resource setup, illustrating how different network slices are allocated and managed. The figure showcases the interaction between the PDU (Policy and Charging Functions), the SDN controller, and the network slices. The PDU is responsible for policy enforcement and charging functions, while the SDN controller coordinates network resources and manages the network slices. The figure highlights the dynamic nature of network resource allocation, ensuring efficient use of resources and meeting the requirements of different network slices.\nFigure 16.3.4.4-1: Network Slice-aware PDU Session Resource Setup\nTo make mobility slice-aware in case of Network Slicing, S-NSSAI is introduced as part of the PDU session information that is transferred during mobility signalling. This enables slice-aware admission and congestion control.\nBoth NG and Xn handovers are allowed regardless of the slice support of the target NG-RAN node i.e. even if the target NG-RAN node does not support the same slices as the source NG-RAN node. An example for the case of connected mode mobility across different Registration Areas is shown in Figure 16.3.4.5-1 for the case of NG based handover and in Figure 16.3.4.5-2 for the case of Xn based handover.\nFigure 16.3.4.5 -1: N G based mobility across different Registration Areas illustrates the seamless movement of mobile users within and across various Registration Areas (RAs) in a network. The figure showcases the dynamic handover process, where the mobile device communicates with the Network Gateway (N G) to switch between Access and Mobility Management Entity (AMEE) nodes. This ensures uninterrupted service quality and efficient resource allocation, as depicted by the interconnected nodes and signal flow paths.\nFigure 16.3.4.5-1: NG based mobility across different Registration Areas\n\nFigure 16.3.4.5-2 illustrates the Xn-based mobility across different Registration Areas, showcasing the seamless handover process between base stations (BSs) and mobile stations (MSs). The figure depicts the path taken by a mobile station (MS) as it moves from one coverage area to another, with a focus on the handover process. The figure highlights the role of the Home Location Register (HLR) and Visitor Location Register (VLR) in managing the MS's location and service continuity. The figure also emphasizes the importance of fast and efficient handover procedures to ensure a smooth user experience.\nFigure 16.3.4.5-2: Xn based mobility across different Registration Areas\n",
                            "figures_meta_data": [],
                            "tables": []
                        }
                    ]
                },
                {
                    "title": "16.4\tPublic Warning System",
                    "description": "",
                    "summary": "",
                    "text_content": "NR connected to 5GC provides support for public warning systems (PWS) through means of system information broadcast capability. NR is responsible for scheduling and broadcasting of the warning messages as well as for paging the UE to provide indication that the warning message is being broadcast:\n-\tEarthquake and Tsunami Warning System: ETWS is a public warning system developed to meet the regulatory requirements for warning notifications related to earthquake and/or tsunami events (see TS 22.168 [14]). ETWS warning notifications can either be a primary notification (short notification) or secondary notification (providing detailed information).\n-\tCommercial Mobile Alert System: CMAS is a public warning system developed for the delivery of multiple, concurrent warning notifications (see TS 22.268 [15]).\nDifferent SIBs are defined for ETWS primary notification, ETWS secondary notification and CMAS notification. Paging is used to inform UEs about ETWS indication and CMAS indication (see clause 9.2.5). UE monitors ETWS/CMAS indication in its own paging occasion for RRC_IDLE and for RRC_INACTIVE while no SDT procedure (see clause 18.0) is ongoing. UE monitors ETWS/CMAS indication in any paging occasion for RRC Connected and during the SDT procedure in RRC_INACTIVE. Paging indicating ETWS/CMAS notification triggers acquisition of system information (without delaying until the next modification period).\nEnhancements of public warning system (ePWS) enable broadcast of language-independent content and notifications to UEs with no user interface or with a user interface that is incapable of displaying text, see clause 9 in TS 22.268 [15] and TS 23.041 [54]. ETWS/CMAS notifications with ePWS functionality use the same AS mechanisms as ETWS/CMAS.\nKPAS and EU-Alert are public warning systems developed for the delivery of multiple, concurrent warning notifications (see TS 22.268 [15]). KPAS and EU-Alert uses the same AS mechanisms as CMAS. Therefore, the NR procedures defined for CMAS equally apply for KPAS and EU-Alert.\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "16.5\tEmergency Services",
                    "description": "",
                    "summary": "",
                    "text_content": "",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": [
                        {
                            "title": "16.5.1\tOverview",
                            "text_content": "NG-RAN provides support for Emergency Services either directly or through fallback mechanisms towards E-UTRA. The support of Emergency Services is broadcast in system information (see TS 38.331 [12]).\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "16.5.2\tIMS Emergency call",
                            "text_content": "An IMS Emergency call support indication is provided to inform the UE that emergency bearer services are supported. In normal service state the UE is informed if the PLMN supports emergency services through an Emergency Service Support indicator in the Attach and TAU procedures (see TS 23.501 [3]). In limited service state and for emergency services other than eCall over IMS, a UE is informed about if a cell supports emergency services over NG-RAN from a broadcast indication (ims-EmergencySupport). The broadcast indicator is set to \"support\" if any AMF in a non-shared environment or at least one of the PLMN's in a shared environment supports IMS emergency bearer services.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "16.5.3\teCall over IMS",
                            "text_content": "NG-RAN broadcast an indication to indicate support of eCall over IMS (eCallOverIMS-Support). UEs that are in limited service state need to consider both eCallOverIMS-Support and ims-EmergencySupport to determine if eCall over IMS is possible. UEs that are not in limited service state need to only consider eCallOverIMS-Support to determine if eCall over IMS is possible. The broadcast indicator is set to \"support\" if the PLMN in a non-shared environment, or all PLMNs in a shared environment, supports eCall over IMS.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "16.5.4\tFallback",
                            "text_content": "RAT fallback towards E-UTRA connected to 5GC is performed when NR does not support Emergency Services and System fallback towards E-UTRA connected to EPS is performed when 5GC does not support Emergency Services. Depending on factors such as CN interface availability, network configuration and radio conditions, the fallback procedure results in either CONNECTED state mobility (handover procedure) or IDLE state mobility (redirection) - see TS 23.501 [3] and TS 38.331 [12].\n",
                            "figures_meta_data": [],
                            "tables": []
                        }
                    ]
                },
                {
                    "title": "16.6\tStand-Alone NPN",
                    "description": "",
                    "summary": "",
                    "text_content": "",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": [
                        {
                            "title": "16.6.1\tGeneral",
                            "text_content": "An SNPN is a network deployed for non-public use which does not rely on network functions provided by a PLMN (see clause 4.8). An SNPN is identified by a PLMN ID and NID (see clause 8.2) broadcast in SIB1.\nAn SNPN-capable UE supports the SNPN access mode. When the UE is set to operate in SNPN access mode, the UE only selects and registers with SNPNs. When the UE is not set to operate in SNPN access mode, the UE performs normal PLMN selection procedures.\nEmergency services and ETWS /CMAS can be supported by SNPNs. An IMS Emergency call support indication is provided per SNPN to inform the UE which SNPN(s) support emergency bearer. In normal service state the indication is provided in the same way as in case of PLMNs (see clause 16.5.2). In limited service state and for emergency services other than eCall over IMS, a UE is informed whether an SNPN of the cell supports emergency services over NG-RAN from a per SNPN broadcast indication (imsEmergencySupportForSNPN). The broadcast indicator for an SNPN may be set to \"support\" if any AMF of the SNPN supports IMS emergency bearer services.\nNR-NR Dual Connectivity within a single SNPN or across SNPNs as indicated in the mobility restriction list is supported.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "16.6.2\tMobility",
                            "text_content": "The same principles as described in 9.2 apply to SNPN except for what is described below.\nUEs operating in SNPN access mode only (re)select cells within the selected/registered SNPN or within equivalent SNPNs and a cell can only be considered as suitable if the PLMN and NID broadcast by the cell matches the selected/registered SNPN or an equivalent SNPN.\nIn addition, manual selection of SNPN(s) is supported, for which HRNN(s) can be optionally provided.\nThe roaming and access restrictions applicable to SNPN are described in clause 9.4.\nThe mobility of a UE in inactive mode builds on existing functionality described in clause 9.2.2 and is limited to the SNPN(s) identified within the mobility restrictions received in the UE context.\nThe NG-RAN node is aware of the SNPN ID(s) supported by neighbour cells.\nAt the time of handover, cells that do not support the serving SNPN ID or the SNPN ID of an equivalent SNPN within the mobility restrictions received in the UE context are not considered as candidate target cells by the source NG-RAN node.\nThe target NG-RAN node performs access control. In case it cannot accept the handover for the serving SNPN the target NG-RAN node fails the handover including an appropriate cause value.\n16.6.3\tSelf-Configuration for SNPN\nSelf-configuration is described in clause 15. In addition, on NG, the NG-RAN node signals the SNPN ID(s) supported per tracking area and the AMF signals the SNPN ID(s) supported per node; on Xn, NG-RAN nodes exchange SNPN ID(s) supported per cell.\n16.6.4\tAccess Control\nDuring the establishment of the UE-associated logical NG-connection towards the 5GC, the AMF checks whether the UE is allowed to access the cell for the signalled SNPN ID as specified in TS 23.501 [3].\nIf the check is successful, the AMF sets up the UE-associated logical NG-connection and provides the NG-RAN node with the mobility restrictions applicable for the SNPN.\nIf the check is not successful, the AMF shall reject setting up the UE-associated NG connection and inform the NG-RAN node with an appropriate cause value as specified in TS 23.501 [3].\n16.6.5\tAccess with subscription/credentials owned by a Credentials Holder\nAn SNPN may allow access to UEs being authorized using credentials or subscription owned by a separate Credentials Holder (CH). The support of this feature is uniform across the SNPN as specified in TS 23.501 [3].\nThe following information is broadcast to support SNPN access with subscription of a Credentials Holder:\n-\tan indication per SNPN in SIB1 that access using credentials from a Credentials Holder is supported;\n-\toptionally a list of supported GINs in SIB18 (each GIN may be assigned to one or more SNPNs);\n-\tan optional indication per SNPN in SIB1 that the SNPN allows registration attempts from UEs that are not explicitly configured to select the SNPN.\nThe above listed items are forwarded to the UE NAS layer that uses them for SNPN selection.\n16.6.6\tSupport of UE onboarding and remote provisioning\nAn SNPN may offer support for restricted 3GPP connectivity for remote provisioning of credentials. The feature is enabled/disabled per cell.\nThe following information is broadcast to support UE onboarding and remote provisioning:\n-\tan indication per onboarding SNPN in SIB1 that UE onboarding is enabled;\n-\toptionally a list of supported GINs in SIB18 (each GIN may be assigned to one or more onboarding SNPNs).\nThe above listed items are forwarded to the UE NAS layer that uses them for onboarding SNPN selection. When a UE intends to perform onboarding, it sends the onboarding request indication to the gNB during RRC connection establishment.\nThe NG-RAN nodes receive information about onboarding support capabilities of the AMF(s). This information is used by the NG-RAN node to select a suitable AMF when receiving the onboarding request indication from the UE.\n",
                            "figures_meta_data": [],
                            "tables": []
                        }
                    ]
                },
                {
                    "title": "16.7\tPublic Network Integrated NPN",
                    "description": "",
                    "summary": "",
                    "text_content": "",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": [
                        {
                            "title": "16.7.1\tGeneral",
                            "text_content": "A PNI-NPN is a network deployed for non-public use which relies on network functions provided by a PLMN (see clause 4.8). In PNI-NPN, a Closed Access Groups (CAG) identifies a group of subscribers who are permitted to access one or more CAG cells associated to the CAG. A CAG is identified by a CAG identifier broadcast in SIB1.\nA CAG-capable UE can be configured with the following per PLMN (see clause 5.30.3.3 of TS 23.501 [3]):\n-\tan Allowed CAG list containing the CAG identifiers which the UE is allowed to access; and\n-\ta CAG-only indication if the UE is only allowed to access 5GS via CAG cells.\nDual Connectivity is supported and may involve both PNI-NPN and PLMN cells, according to the mobility restrictions in the UE context as described in TS 37.340 [21].\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "16.7.2\tMobility",
                            "text_content": "The same principles as described in 9.2 apply to CAG cells except for what is described below.\nCell selection/reselection to CAG cells may be based on a UE autonomous search function, which determines itself when/where to search, but cannot contradict the dedicated cell reselection priority information if any is stored.\nA range of PCI values reserved by the network for use by CAG cells may be broadcast.\nA CAG Member Cell for a UE is a cell broadcasting the identity of the selected PLMN, registered PLMN or equivalent PLMN, and for that PLMN, a CAG identifier belonging to the Allowed CAG list of the UE for that PLMN. The UE checks the suitability of CAG cells based on the Allowed CAG list provided by upper layers and a CAG-only cell can only be suitable for its subscribers but can be acceptable for the rest.\nNOTE:\tA non-CAG-capable UE (e.g. Rel-15 UE) considers a CAG-only cell as acceptable cell if the cell is not barred to Rel-15 UEs, and if a PLMN ID without CAG list is broadcast and that PLMN is forbidden (e.g. by use of a PLMN ID for which all registration attempts are rejected such that the PLMN ID becomes forbidden).\nWhen the UE is configured with a CAG-only indication, only CAG Member Cells can be suitable. A non-suitable cell can be acceptable though if the UE is configured with a CAG-only indication for one of the PLMN broadcast by the cell.\nIn addition, manual selection of CAG cell(s) is supported, for which an HRNN(s) can be optionally provided.\nThe roaming and access restrictions applicable to PNI-NPN are described in clause 9.4.\nThe mobility of a UE in inactive mode builds on existing functionality described in clause 9.2.2 according to the mobility restrictions received in the UE context.\nThe source NG-RAN node is aware of the list of CAG IDs supported by the candidate target cells which are CAG cells.\nAt the time of handover, the source NG-RAN node determines a target cell among the candidates which is compatible with the received PNI-NPN restrictions.\nAt incoming handover, the target NG-RAN node receives the PNI-NPN mobility restrictions and checks that the selected target cell is compatible with the received mobility restrictions.\nMobility between PNI-NPN and PLMN cells is supported according to the mobility restrictions in the UE context.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "16.7.3\tSelf-Configuration for PNI-NPN",
                            "text_content": "Self-configuration is described in clause 15.\nIn addition, each NG-RAN node informs the connected neighbour NG-RAN nodes of the list of supported CAG ID(s) per CAG cell in the appropriate Xn interface management procedures.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "16.7.4\tAccess Control",
                            "text_content": "During the establishment of the UE-associated logical NG-connection towards the 5GC, the AMF checks whether the UE is allowed to access the cell as specified in TS 23.501 [3].\nIf the check is successful, the AMF sets up the UE-associated logical NG-connection and provides the NG-RAN node with the list of CAGs allowed for the UE and, whether the UE is allowed to access non-CAG cells. This information is used by the NG-RAN for access control of subsequent mobility.\nIf the check is not successful, the AMF shall reject setting up the UE-associated NG connection and inform the NG-RAN node with an appropriate cause value as specified in TS 23.501 [3].\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "16.7.5\tPaging",
                            "text_content": "The NG-RAN node may receive a paging message including the list of CAGs allowed for the UE, and whether the UE is allowed to access non-CAG cells. The NG-RAN node may use this information to avoid paging in cells on which the UE is not allowed to camp.\nFor UEs in RRC_INACTIVE state, the NG-RAN node may page a neighbour NG-RAN node including the list of CAGs allowed for the UE, and whether the UE is allowed to access non-CAG cells. The neighbour NG-RAN node may use this information to avoid paging in cells on which the UE is not allowed to camp.\n",
                            "figures_meta_data": [],
                            "tables": []
                        }
                    ]
                },
                {
                    "title": "16.8\tSupport for Time Sensitive Communications",
                    "description": "",
                    "summary": "",
                    "text_content": "",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": [
                        {
                            "title": "16.8.1\tGeneral",
                            "text_content": "Time Sensitive Communications (TSC), as defined in TS 23.501 [3], is a communication service that supports deterministic communication and/or isochronous communication with high reliability and availability. Examples of such services are the ones in the area of Industrial Internet of Things, e.g. related to cyber-physical control applications as described in TS 22.104 [39].\nTo support strict synchronization accuracy requirements of TSC applications, the gNB may signal 5G system time reference information to the UE using unicast or broadcast RRC signalling with a granularity of 10 ns. Uncertainty parameter may be included in reference time information to indicate its accuracy. The UE may indicate to the gNB a preference to be provisioned with reference time information using UE Assistance Information procedure. Propagation delay compensation (PDC) mechanisms may be applied based on RTT or TA, and can be performed at the UE or gNB side. When performed at UE side, the PDC mechanisms are controlled via RRC signalling by the gNB.\nThe RTT-based PDC mechanism is achieved by using Rx-Tx time difference measurements of a single pair of configured TRS/PRS and SRS. The following figure describes the signalling procedures of UE-side RTT-based PDC:\nFigure 16.8-1 illustrates the signalling procedure of the User Equipment (UE) side for RTT-based PDC, showcasing the various stages of the procedure. The figure depicts the exchange of messages between the UE and the Base Transceiver Station (BTS) through the Radio Access Network (RAN). The procedure begins with the UE sending a request to the BTS, which then responds with a PDC Control Channel (PDCCH) message. The UE then sends a PDC Control Channel Request (PDCCH-R) message, initiating the RTT-based PDC procedure. The BTS acknowledges the request, and the UE sends a PDC Control Channel Response (PDCCH-R) message. The BTS then sends a PDC Control Channel Request (PDCCH-R) message, and the UE responds with a PDC Control Channel Response (PDCCH-R) message. The procedure concludes with the BTS sending a PDC Control Channel Request (PDCCH-R) message, and the UE responds with a PDC Control Channel Response (PDCCH-R) message. The figure highlights the importance of the RTT-based PDC procedure in ensuring efficient and reliable communication between the UE\nFigure 16.8-1: Signalling Procedure of UE-side RTT-based PDC\n1.\tThe gNB provides measurement configurations to the UE;\n2a/b.\tThe gNB transmits TRS or PRS to the UE for measurements, and the UE transmits SRS to the gNB for measurement;\n3a/b.\tBoth the UE and the gNB perform Rx-Tx time difference measurements;\n4.\tThe gNB provides its Rx-Tx time difference measurement to the UE;\n5.\tThe UE performs PDC based on Rx-Tx time difference measurements from itself and the gNB.\nThe following figure describes the signalling procedures of gNB-side RTT-based PDC:\nFigure 16.8-2 illustrates the signalling procedure of a gNB-side RTT-based PDC, showcasing the process of establishing a connection between the gNB and the user equipment (UE). The figure depicts the exchange of control and user plane messages, including the uplink and downlink procedures, as well as the handover process. Key components include the gNB, the UE, and the radio access network (RAN), with the figure highlighting the role of RTT-based PDC in improving latency and reliability.\nFigure 16.8-2: Signalling Procedure of gNB-side RTT-based PDC\n1.\tThe gNB provides measurement configurations to the UE;\n2a/b.\tThe gNB transmits TRS or PRS to the UE for measurements, and the UE transmits SRS to the gNB for measurement;\n3a/b.\tBoth the UE and the gNB perform Rx-Tx time difference measurements;\n4.\tThe UE reports its Rx-Tx time difference measurement to the gNB;\n5.\tThe gNB performs PDC based on Rx-Tx time difference measurements from itself and the UE.\nThe gNB may also receive TSC Assistance Information (TSCAI), see TS 23.501 [3], from the Core Network, e.g. during QoS flow establishment, or from another gNB during handover. TSCAI contains additional information about the traffic flow such as burst arrival time, burst periodicity, and survival time. TSCAI knowledge may be leveraged in the gNB's scheduler to more efficiently schedule periodic, deterministic traffic flows either via Configured Grants, Semi-Persistent Scheduling or with dynamic grants, and/or to improve the associated link reliability to meet the survival time requirement (see TS 22.104 [39]).\nTo support uplink periodic traffics of services with survival time requirement, configured grant resources can be used such that the mapping relation between the service and the configured grant is known to both gNB and UE, thus allowing the gNB to use configured grant retransmission scheduling (addressed by CS-RNTI) to trigger survival time state entry for the corresponding DRB. Upon survival time state entry, all RLC entities configured for the DRB are activated by the UE for duplication to prevent failure of subsequent messages and hence fulfilling the survival time requirement. If CA or DC duplication for the DRB is already activated, the DRB should enter survival time state when any retransmission grant for any of its active LCHs is received.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "16.8.2\tNetwork timing synchronization monitoring",
                            "text_content": "While time synchronization service is offered by the 5GS, the network timing synchronization status of the gNB may change. The gNB detects timing synchronization degradation or improvement locally and informs the consumer of the information as follows:\n-\tTSCTSF may receive information about timing synchronization status from the gNB via the AMF based on node-level reporting configuration;\n-\tUE may receive clock quality information from the gNB based on UE-level clock quality control information.\nFor NG-RAN timing synchronization monitoring support, the 5GC initiates RAN Timing Synchronisation Status (TSS) Reporting procedure to obtain the change of network timing synchronization status of gNBs.\nThe gNB may receive RAN timing synchronization status information request from the AMF, see TS 23.501 [3]. The RAN timing synchronization status information includes the gNB node-level information about timing synchronization operation status. The gNB timing synchronization status may comprise one or more of the following information elements: synchronization state, traceability to UTC, traceability to GNSS, clock frequency stability, clock accuracy, parent time source, as defined in Table 5.27.1.12-1 in TS 23.501 [3].\nBased on NG-RAN's capabilities of reporting timing synchronisation status, NG-RAN accepts or rejects the request from AMF. NG-RAN can be pre-configured with thresholds for attributes on timing synchronisation status reporting via OAM. When the thresholds are met or exceeded, events will be triggered and NG-RAN reports Timing Synchronization Status to AMF. For detailed procedure on the Timing Synchronization Status reporting, refer to TS 38.401 Clause 8.x.1 [4].\nThe gNB may receive clock quality reporting control information for a UE from the AMF, see TS 23.501 [3]. The clock quality reporting control information contains the clock quality detail level (i.e., \"metrics\" or \"acceptable/not acceptable indication\") and clock quality acceptance criteria for the UE (if the clock quality detail level equals \"acceptable/not acceptable indication\"). Based on the clock quality reporting control information, the gNB determines how to provision clock quality information to the UE:\n-\tIf the clock quality detail level equals \"clock quality metrics\", the gNB provides clock quality metrics supported by the gNB to the UE, i.e., one or more of the following information elements: synchronization state, traceability to UTC, traceability to GNSS, clock frequency stability, clock accuracy, parent time source, as defined in Table 5.27.1.12-1 in TS 23.501 [3].\n-\tIf the clock quality detail level equals \"acceptable/not acceptable indication\", the gNB indicates \"acceptable\" to the UE if the gNB's timing synchronization status matches the acceptance criteria received from the AMF; otherwise, the gNB indicates \"not acceptable\" to the UE. Clock quality acceptance criteria can be defined based on one or more information elements listed in Table 5.27.1.12-1 in TS 23.501 [3].\nTo provision clock quality information to the UEs:\n-\tFor UEs in the RRC CONNECTED state, the gNB uses unicast RRC signalling. The RRC signalling includes Event ID and clock quality information.\n-\tFor UEs that are not in the RRC_CONNECTED state, the UE first needs to establish or resume the RRC connection to receive the gNB timing synchronization status information from the gNB via unicast RRC signalling. The gNB broadcasts Event ID in SIB9 to notify its timing synchronization status. Event ID or gNB ID change serves as a notification for the UEs reading the SIB information that there is new RAN timing synchronization status information available.\nThe following figure describes the signalling procedure of gNB reporting clock quality information to a UE:\nFigure 16.8.2-1 illustrates the signalling procedure of a gNB reporting clock quality information to a UE. The figure depicts the process in which the gNB sends a P_SCH_RQ_IND signal to the UE, initiating the clock quality reporting procedure. The UE then responds with a P_SCH_ACK_IND signal, confirming its readiness to receive the clock quality information. The gNB then proceeds to send the clock quality information, which includes the time synchronization parameters, to the UE. The UE acknowledges the receipt of the clock quality information with a P_SCH_ACK_IND signal, completing the procedure. This process is crucial for maintaining accurate time synchronization between the gNB and the UE, ensuring seamless communication and accurate timing for various services.\nFigure 16.8.2-1: Signalling procedure of gNB reporting clock quality information to a UE\n0.\tThe gNB node is pre-configured for the thresholds for each timing synchronization status attribute as described in clause 5.27.1.12 in TS 23.501 [3]. If there is a change on its primary source so that the thresholds are exceeded or met again, the NG-RAN node detects a change on its timing synchronization state (e.g., degradation, failure, recovery).\n1.\tThe gNB notifies a change on its timing synchronization operation using Event ID in SIB9. The Event ID scope is local to gNB.\n2.\tThe UE in RRC_INACTIVE or RRC_IDLE determines if there is clock quality information update available at the gNB based on SIB9 information. For a UE in RRC_CONNECTED state, steps 2-3 can be skipped.\n3.\tIf there is a RAN timing synchronization status update available, the UE's RRC layer indicates this to the NAS layer which may request the RRC layer to initiate RRC Setup or RRC Resume procedure.\n4.\tThe gNB determines clock quality information reporting to the UE (e.g., metrics or \"acceptable/not acceptable\").\n5.\tThe gNB sends the clock quality information to the UE via unicast RRC signalling.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "16.8.3\tRAN feedback for adaptation of Burst Arrival Time and Periodicity",
                            "text_content": "The NG-RAN may support the proactive feedback and reactive feedback mechanisms as specified in TS 23.501 [3].The NG-RAN can provide the feedback in order to align the arrival of the traffic bursts with the next expected transmission opportunity over the air interface in each direction (i.e. DL or UL) for a QoS flow.\n",
                            "figures_meta_data": [],
                            "tables": []
                        }
                    ]
                },
                {
                    "title": "16.9\tSidelink",
                    "description": "",
                    "summary": "",
                    "text_content": "",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": [
                        {
                            "title": "16.9.1\tGeneral",
                            "text_content": "In this clause, an overview of NR sidelink communication and how NG-RAN supports NR sidelink communication, V2X sidelink communication and Ranging/Sidelink positioning is given. V2X sidelink communication is specified in TS 36.300 [2]. Ranging/Sidelink positioning is specified in TS 38.305 [42].\nThe NG-RAN architecture supports the PC5 interface as illustrated in Figure 16.9.1-1. Sidelink transmission and reception over the PC5 interface are supported when the UE is inside NG-RAN coverage, irrespective of which RRC state the UE is in, and when the UE is outside NG-RAN coverage.\nFigure 16.9.1-1 illustrates the Network Functions Virtualization (NFV) and Cloud RAN (C-RAN) architecture supporting the PC5 interface in a 5G New Radio (NR) network. The figure showcases the split between the Evolved Packet Core (EPC) and the Radio Access Network (RAN), with the EPC being virtualized and hosted in the cloud. The PC5 interface is depicted as a fronthaul link between the RAN and the EPC, enabling high-speed data transmission. The figure also highlights the role of Network Functions such as the gNB, Mobility Management Entity (MME), and Packet Data Network Gateway (P-GW) in the overall network architecture.\nFigure 16.9.1-1: NG-RAN Architecture supporting the PC5 interface\nSupport of V2X services via the PC5 interface can be provided by NR sidelink communication and/or V2X sidelink communication. NR sidelink communication may be used to support other services than V2X services.\nNR sidelink communication can support one of three types of transmission modes for a pair of a Source Layer-2 ID and a Destination Layer-2 ID in the AS:\n-\tUnicast transmission, characterized by:\n-\tSupport of one PC5-RRC connection between peer UEs for the pair;\n-\tTransmission and reception of control information and user traffic between peer UEs in sidelink;\n-\tSupport of sidelink HARQ feedback;\n-\tSupport of sidelink transmit power control;\n-\tSupport of RLC AM;\n-\tDetection of radio link failure for the PC5-RRC connection.\n-\tGroupcast transmission, characterized by:\n-\tTransmission and reception of user traffic among UEs belonging to a group in sidelink;\n-\tSupport of sidelink HARQ feedback.\n-\tBroadcast transmission, characterized by:\n-\tTransmission and reception of user traffic among UEs in sidelink.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "16.9.2\tRadio Protocol Architecture for NR sidelink communication",
                            "text_content": "The AS protocol stack for the control plane for SCCH for RRC in the PC5 interface consists of RRC, PDCP, RLC and MAC sublayers, and the physical layer. The protocol stack of control plane for SCCH for RRC is shown in Figure 16.9.2.1-1.\nFigure 16.9.2.1-1 illustrates the control plane protocol stack for the Serving Call Control Channel (SCCH) in the Radio Resource Control (RRC) protocol stack for 5G New Radio (NR). The figure shows the various layers and functions involved in the control plane, including the Network Exposure Protocol (NEP), the Protocol Data Unit (PDU), and the Session Initiation Protocol (SIP). The diagram also depicts the interaction between the control plane and the User Equipment (UE) through the use of signaling messages and procedures. This control plane is crucial for managing and maintaining the network resources and ensuring the efficient and reliable communication between the UE and the network infrastructure.\nFigure 16.9.2.1-1: Control plane protocol stack for SCCH for RRC.\nFor support of PC5-S protocol specified in TS 23.287 [40], PC5-S is located on top of PDCP, RLC and MAC sublayers, and the physical layer in the control plane protocol stack for SCCH for PC5-S, as shown in Figure 16.9.2.1-2.\nFigure 16.9.2.1-2 illustrates the control plane protocol stack for the Service Control Channel (SCCH) for the Physical Channel (PC5-S). The figure depicts the various layers of the protocol stack, including the Network Layer, Transport Layer, and Application Layer. The Network Layer is responsible for routing and switching the data packets, while the Transport Layer ensures reliable delivery of the data packets. The Application Layer provides the interface between the network and the user, allowing for the exchange of data and services. The figure also shows the various signaling messages that are exchanged between the network elements, including the PC5-S, PC5-C, and PC5-U. These signaling messages are used to establish and maintain the connection between the network elements and the user equipment. Overall, the figure provides a detailed overview of the control plane protocol stack for the PC5-S interface, highlighting the various layers and signaling messages involved in the process.\nFigure 16.9.2.1-2: Control plane protocol stack for SCCH for PC5-S.\nThe AS protocol stack for SBCCH in the PC5 interface consists of RRC, RLC, MAC sublayers, and the physical layer as shown below in Figure 16.9.2.1-3.\nFigure 16.9.2.1-3 illustrates the control plane protocol stack for SBCCH, which is a crucial component in telecommunication networks. The figure depicts the various layers of the protocol stack, including the SBCCH, PCC, and RRC layers. The SBCCH layer is responsible for controlling the radio bearer control channel, while the PCC layer handles the packet control channel. The RRC layer is responsible for radio resource management. The figure also shows the interactions between these layers, highlighting the flow of control messages and signaling between them. This information is essential for understanding the functioning of SBCCH in telecommunication networks and for designing and implementing efficient network protocols.\nFigure 16.9.2.1-3: Control plane protocol stack for SBCCH.\nThe AS protocol stack for user plane in the PC5 interface consists of SDAP, PDCP, RLC and MAC sublayers, and the physical layer. The protocol stack of user plane is shown in Figure 16.9.2.1-4.\nFigure 16.9.2.1-4 illustrates the user plane protocol stack for STCH, showcasing the various layers involved in data transmission. The figure begins with the application layer, where user applications send data to the transport layer. The transport layer then ensures reliable data transfer to the network layer, which handles routing and addressing. The network layer's output is passed to the data link layer, which manages the physical connection between devices. Finally, the physical layer at the bottom of the stack ensures the correct transmission of bits over the air interface. This protocol stack is crucial for efficient communication in STCH networks.\nFigure 16.9.2.1-4: User plane protocol stack for STCH.\nSidelink Radio bearers (SLRB) are categorized into two groups: sidelink data radio bearers (SL DRB) for user plane data and sidelink signalling radio bearers (SL SRB) for control plane data. Separate SL SRBs using different SCCHs are configured for PC5-RRC and PC5-S signalling respectively.\nThe MAC sublayer provides the following services and functions over the PC5 interface in addition to the services and functions specified in clause 6.2.1:\n-\tRadio resource selection;\n-\tPacket filtering;\n-\tPriority handling between uplink and sidelink transmissions for a given UE;\n-\tSidelink CSI reporting.\nWith LCP restrictions in MAC, only sidelink logical channels belonging to the same destination can be multiplexed into a MAC PDU for every unicast, groupcast and broadcast transmission which is associated to the destination. NG-RAN can also control whether a sidelink logical channel can utilise the resources allocated to a configured sidelink grant Type 1 (see clause 16.9.3.2). For transmissions to RX UE(s) using SL DRX operation, LCP ensures that a TX UE transmits data in the active time of the RX UE(s).\nFor packet filtering, a SL-SCH MAC header including portions of both Source Layer-2 ID and a Destination Layer-2 ID is added to each MAC PDU as specified in clause 8.4. LCID included within a MAC subheader uniquely identifies a logical channel within the scope of the Source Layer-2 ID and Destination Layer-2 ID combination.\nThe following logical channels are used in sidelink:\n-\tSidelink Control Channel (SCCH): a sidelink channel for transmitting control information (i.e. PC5-RRC and PC5-S messages) and NR sidelink discovery messages from one UE to other UE(s);\n-\tSidelink Traffic Channel (STCH): a sidelink channel for transmitting user information from one UE to other UE(s);\n-\tSidelink Broadcast Control Channel (SBCCH): a sidelink channel for broadcasting sidelink system information from one UE to other UE(s).\nThe following connections between logical channels and transport channels exist:\n-\tSCCH can be mapped to SL-SCH;\n-\tSTCH can be mapped to SL-SCH;\n-\tSBCCH can be mapped to SL-BCH.\nThe services and functions of the RLC sublayer as specified in clause 6.3.2 are supported for sidelink. TM is used for SBCCH. Both UM and AM are used in unicast transmission while only UM is used in groupcast or broadcast transmission. For UM, only unidirectional transmission is supported for groupcast and broadcast.\nThe services and functions of the PDCP sublayer as specified in clause 6.4.1 are supported for sidelink with some restrictions:\n-\tOut-of-order delivery is supported only for unicast transmission;\n-\tDuplication is not supported over the PC5 interface.\nThe SDAP sublayer provides the following service and function over the PC5 interface:\n-\tMapping between a QoS flow and a sidelink data radio bearer.\nThere is one SDAP entity per destination for one of unicast, groupcast and broadcast which is associated to the destination. Reflective QoS is not supported over the PC5 interface.\nThe RRC sublayer provides the following services and functions over the PC5 interface:\n-\tTransfer of a PC5-RRC message between peer UEs;\n-\tMaintenance and release of a PC5-RRC connection between two UEs;\n-\tDetection of sidelink radio link failure for a PC5-RRC connection;\n-\tMeasurement configuration and reporting related to sidelink.\nA PC5-RRC connection is a logical connection between two UEs for a pair of Source and Destination Layer-2 IDs which is considered to be established after a corresponding PC5 unicast link is established as specified in TS 23.287 [40]. There is one-to-one correspondence between the PC5-RRC connection and the PC5 unicast link. A UE may have multiple PC5-RRC connections with one or more UEs for different pairs of Source and Destination Layer-2 IDs.\nSeparate PC5-RRC procedures and messages are used for a UE to transfer UE capability and sidelink configuration to the peer UE, as specified in TS 38.331 [3]. Both peer UEs can exchange their own UE capability and sidelink configuration using separate bi-directional procedures in both sidelink directions.\nIf it is not interested in sidelink transmission, if sidelink RLF on the PC5-RRC connection is declared, or if the Layer-2 link release procedure is completed as specified in TS 23.287 [40], UE releases the PC5-RRC connection.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "16.9.3\tRadio Resource Allocation",
                            "text_content": "For NR sidelink communication, the UE can operate in two modes as specified in 5.7.2 for resource allocation in sidelink:\n-\tScheduled resource allocation, characterized by:\n-\tThe UE needs to be RRC_CONNECTED in order to transmit data;\n-\tNG-RAN schedules transmission resources.\n-\tUE autonomous resource selection, characterized by:\n-\tThe UE can transmit data when inside NG-RAN coverage, irrespective of which RRC state the UE is in, and when outside NG-RAN coverage;\n-\tThe UE autonomously selects transmission resources from resource pool(s).\nFor NR sidelink communication, the UE performs sidelink transmissions only on a single carrier.\nNG-RAN can dynamically allocate resources to the UE via the SL-RNTI on PDCCH(s) for NR sidelink communication.\nIn addition, NG-RAN can allocate sidelink resources to a UE with two types of configured sidelink grants:\n-\tWith type 1, RRC directly provides the configured sidelink grant only for NR sidelink communication;\n-\tWith type 2, RRC defines the periodicity of the configured sidelink grant while PDCCH can either signal and activate the configured sidelink grant, or deactivate it. The PDCCH is addressed to SL-CS-RNTI for NR sidelink communication.\nBesides, NG-RAN can also semi-persistently allocate sidelink resources to the UE via the SL Semi-Persistent Scheduling V-RNTI on PDCCH(s) for V2X sidelink communication.\nFor the UE performing NR sidelink communication, there can be more than one configured sidelink grant activated at a time on the carrier configured for sidelink transmission.\nWhen beam failure or physical layer problem occurs on MCG, the UE can continue using the configured sidelink grant Type 1 until initiation of the RRC connection re-establishment procedure as specified in TS 38.331 [12]. During handover, the UE can be provided with configured sidelink grants via handover command, regardless of the type. If provided, the UE activates the configured sidelink grant Type 1 upon reception of the handover command or execution of CHO.\nThe UE can send sidelink buffer status report to support scheduler operation in NG-RAN. For NR sidelink communication, the sidelink buffer status reports refer to the data that is buffered in for a group of logical channels (LCG) per destination in the UE. Eight LCGs are used for reporting of the sidelink buffer status reports. Two formats, which are SL BSR and truncated SL BSR, are used.\nThe UE autonomously selects sidelink resource(s) from resource pool(s) provided by broadcast system information or dedicated signalling while inside NG-RAN coverage or by pre-configuration while outside NG-RAN coverage.\nFor NR sidelink communication, the resource pool(s) can be provided for a given validity area where the UE does not need to acquire a new pool of resources while moving within the validity area, at least when this pool is provided by SIB. The NR SIB area scope mechanism as specified in TS 38.331 [12] is reused to enable validity area for SL resource pool configured via broadcasted system information.\nThe UE is allowed to temporarily use UE autonomous resource selection with random selection for sidelink transmission based on configuration of the exceptional transmission resource pool as specified in TS 38.331 [12].\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "16.9.4\tUu Control",
                            "text_content": "When a UE is inside NG-RAN coverage, NR sidelink communication and/or V2X sidelink communication can be configured and controlled by NG-RAN via dedicated signalling or system information:\n-\tThe UE should support and be authorized to perform NR sidelink communication and/or V2X sidelink communication in NG-RAN;\n-\tIf configured, the UE performs V2X sidelink communication as specified in TS 36.300 [2] unless otherwise specified, with the restriction that the dynamic scheduling for V2X sidelink communication (i.e. based on SL-V-RNTI) is not supported;\n-\tNG-RAN can provide the UE with intra-carrier sidelink configuration, inter-carrier sidelink configuration and anchor carrier(s) which provide sidelink configuration via a Uu carrier for NR sidelink communication and/or V2X sidelink communication;\n-\tWhen the UE cannot simultaneously perform both NR sidelink transmission and NR uplink transmission in time domain, prioritization between both transmissions is done based on their priorities and thresholds configured by the NG-RAN or pre-configured. When the UE cannot simultaneously perform both V2X sidelink transmission and NR uplink transmission in time domain, prioritization between both transmissions is done based on the priorities (i.e. PPPP) of V2X sidelink communication and a threshold configured by the NG-RAN or pre-configured.\nWhen a UE is outside NG-RAN coverage, SL DRB configuration(s) are preconfigured to the UE for NR sidelink communication. If UE changes the RRC state but has not received the SL DRB configuration(s) for the new RRC state, UE continues using the configuration obtained in the previous RRC state to perform sidelink data transmissions and receptions until the configuration for the new RRC state is received.\nThe UE in RRC_CONNECTED performs NR sidelink communication and/or V2X sidelink communication, as configured by the upper layers. The UE sends Sidelink UE Information to NG-RAN in order to request or release sidelink resources and report QoS information for each destination.\nNG-RAN provides RRCReconfiguration to the UE in order to provide the UE with dedicated sidelink configuration. The RRCReconfiguration may include SL DRB configuration(s) for NR sidelink communication as well as mode 1 resource configuration and/or mode 2 resource configuration. If UE has received SL DRB configuration via system information, UE should continue using the configuration to perform sidelink data transmissions and receptions until a new configuration is received via the RRCReconfiguration.\nNG-RAN may also configure measurement and reporting of CBR for NR sidelink communication and V2X sidelink communication, and reporting of location information for V2X sidelink communication to the UE via RRCReconfiguration.\nDuring handover, the UE performs sidelink transmission and reception based on configuration of the exceptional transmission resource pool or configured sidelink grant Type 1 and reception resource pool of the target cell as provided in the handover command.\nThe UE in RRC_IDLE or RRC_INACTIVE performs NR sidelink communication and/or V2X sidelink communication, as configured by the upper layers. NG-RAN may provide common sidelink configuration to the UE in RRC_IDLE or RRC_INACTIVE via system information for NR sidelink communication and/or V2X sidelink communication. UE receives resource pool configuration and SL DRB configuration via SIB12 for NR sidelink communication as specified in TS 38.331 [12], and/or resource pool configuration via SIB13 and SIB14 for V2X sidelink communication as specified in TS 38.331 [12].\nWhen the UE performs cell reselection, the UE interested in V2X service(s) considers at least whether NR sidelink communication and/or V2X sidelink communication are supported by the cell. The UE may consider the following carrier frequency as the highest priority frequency, except for the carrier only providing the anchor carrier:\n-\tthe frequency providing both NR sidelink communication configuration and V2X sidelink communication configuration, if configured to perform both NR sidelink communication and V2X sidelink communication;\n-\tthe frequency providing NR sidelink communication configuration, if configured to perform only NR sidelink communication.\n-\tthe frequency providing V2X sidelink communication configuration, if configured to perform only V2X sidelink communication.\nWhen the UE performs cell reselection, the UE interested in ProSe service(s) considers at least whether NR sidelink communication/discovery is supported by the cell. The UE may consider the carrier frequency providing NR sidelink communication/discovery configuration as the highest priority frequency, except for the carrier only providing the anchor carrier.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "16.9.5\tSidelink Discovery",
                            "text_content": "The UE may perform NR sidelink discovery while in-coverage or out-of-coverage for non-relay operation.\nThe Relay discovery mechanism described in clause 16.12.3 (except the U2N Relay specific threshold based discovery message transmission and U2N Relay specific resource allocation mode restriction) is also applied to sidelink discovery.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "16.9.6\tSL DRX",
                            "text_content": "Sidelink supports SL DRX for unicast, groupcast, and broadcast. Similar parameters as defined in clause 11 for Uu (on-duration, inactivity-timer, retransmission-timer, cycle) are defined for SL to determine the SL active time for SL DRX. During the SL active time, the UE performs SCI monitoring for data reception (i.e., PSCCH and 2nd stage SCI on PSSCH). The UE may skip monitoring of SCI for data reception during SL DRX inactive time.\nThe actual parameters supported for each cast type (unicast, groupcast, broadcast) are specified in the following clauses.\nThe SL active time of the RX UE includes the time in which any of its applicable SL on-duration timer(s), SL inactivity-timer(s) or SL HARQ retransmission timer(s) (for any of unicast, groupcast, or broadcast) are running. In addition, the slots associated with announced periodic transmissions by the TX UE and the time in which a UE is expecting CSI report following a CSI request (for unicast) are considered as SL active time of the RX UE. The time for the unicast link establishment procedure and the time for the PC5 RRC reconfiguration with initial SL DRX configuration procedure as specified in clause 5.28.2 of TS 38.321 [6] are considered as SL active time of the RX UE.\nThe TX UE maintains a set of timers corresponding to the SL DRX timers in the RX UE(s) for each pair of source/destination L2 ID for unicast or destination L2 ID for groupcast/broadcast. When data is available for transmission to one or more RX UE(s) configured with SL DRX, the TX UE selects resources taking into account the active time of the RX UE(s).\nThe UE can determine from SIB12 whether the gNB supports SL DRX or not.\nFor unicast, SL DRX is configured per pair of source L2 ID and destination L2 ID.\nThe UE maintains a set of SL DRX timers for each direction per pair of source L2 ID and destination L2 ID. The SL DRX configuration for a pair of source/destination L2 IDs for a direction may be negotiated between the UEs in the AS layer. For SL DRX configuration of each direction, where one UE is the TX UE and the other is the RX UE:\n-\tRX UE may send assistance information, which includes its desired SL on-duration timer, SL DRX start offset, SL DRX slot offset, and SL DRX cycle, to the TX UE and the TX UE using mode 2 resource allocation may use it to determine the SL DRX configuration for the RX UE;\n-\tRegardless of whether assistance information is provided or not, the TX UE in RRC_IDLE/RRC_INACTIVE/OOC, or in RRC_CONNECTED and using mode 2 resource allocation, determines the SL DRX Configuration for the RX UE. For a TX UE in RRC_CONNECTED and using mode 1 resource allocation, the SL DRX configuration for the RX UE is determined by the serving gNB of the TX UE;\n-\tTX UE sends the SL DRX configuration to be used by the RX UE to the RX UE;\n-\tThe RX UE may accept or reject the SL DRX configuration.\nWhen the TX UE is in RRC_CONNECTED and using mode 1 resource allocation, the TX UE may report the received assistance information or the received SL DRX configuration reject information to its serving gNB supporting SL DRX and sends the SL DRX configuration to the RX UE upon receiving the SL DRX configuration in dedicated RRC signalling from the gNB. When the RX UE is in RRC_CONNECTED and using mode 1 resource allocation, the RX UE can report the received SL DRX configuration to its serving gNB supporting SL DRX, e.g. for alignment of the Uu and SL DRX configurations.\nSL on-duration timer, SL inactivity-timer, SL HARQ RTT timer, and SL HARQ retransmission timer are supported in unicast. SL HARQ RTT timer and SL HARQ retransmission timer are maintained per SL process at the RX UE. In addition to (pre)configured values for each of these timers, SL HARQ RTT timer value can be derived from the retransmission resource timing when SCI indicates more than one transmission resource. SL HARQ RTT timer can be set to different values to support both HARQ enabled and HARQ disabled transmissions.\nSL DRX MAC CE is introduced for SL DRX operation in unicast only.\nFor groupcast/broadcast, SL DRX is configured commonly among multiple UEs based on QoS profile and Destination L2 ID. Multiple SL DRX configurations can be supported for each of groupcast/broadcast.\nSL on-duration timer, SL inactivity-timer, SL HARQ RTT and SL HARQ retransmission timers are supported for groupcast. Only SL on-duration timer is supported for broadcast. SL DRX cycle, SL on-duration, and SL inactivity timer (only for groupcast) are configured per QoS profile. The starting offset and slot offset of the SL DRX cycle is determined based on the destination L2 ID. The SL HARQ RTT timer (only for groupcast) and SL HARQ retransmission timer (only for groupcast) are not configured per QoS profile or per destination L2 ID. For groupcast, the RX UE maintains a SL inactivity timer for each destination L2 ID, and selects the largest SL inactivity timer value if multiple SL inactivity timer values associated with different QoS profiles are configured for that L2 ID. For groupcast and broadcast, the RX UE maintains a single SL DRX cycle (selected as the smallest SL DRX cycle of any QoS profile of that L2 ID) and single SL on-duration (selected as the largest SL on-duration of any QoS profile of that L2 ID) for each destination L2 ID when multiple QoS profiles are configured for that L2 ID.\nFor groupcast, SL HARQ RTT timer and SL HARQ retransmission timer are maintained per SL process at the RX UE. SL HARQ RTT timer can be set to different values to support both HARQ enabled and HARQ disabled transmissions.\nA default SL DRX configuration, common between groupcast and broadcast, can be used for a QoS profile which is not mapped onto any non-default SL DRX configuration(s). The default SL DRX configuration for groupcast and broadcast can also be used for discovery message in sidelink discovery in clause 16.9.5 and relay discovery messages in clause 16.12.3, for ProSe Direct Link Establishment Request message as specified in TS 24.554 [55], and for Direct Link Establishment Request message as specified in TS 24.587 [53].\nIn-coverage TX and RX UEs in RRC_IDLE/RRC_INACTIVE obtain their SL DRX configuration from SIB. UEs (TX or RX) in RRC_CONNECTED can obtain the SL DRX configuration from SIB, or from dedicated RRC signalling during handover. For the out of coverage case, the SL DRX configuration is obtained from pre-configuration.\nFor groupcast, the TX UE restarts its timer corresponding to the SL inactivity timer for the destination L2 ID (used for determining the allowable transmission time) upon reception of new data with the same destination L2 ID.\nTX profile is introduced to ensure compatibility for groupcast and broadcast communication between UEs supporting/not-supporting SL DRX functionality. A TX profile is provided by upper layers to AS layer and identifies one or more sidelink feature group(s). Multiple TX profiles with the support of SL DRX and without the support of SL DRX can be associated to a destination L2 ID. For a given destination L2 ID, all TX and RX UEs should be configured with the same set of TX profile(s). A UE only assumes SL DRX for the given destination L2 ID when all the associated TX profiles correspond to support of SL DRX. A UE assumes no SL DRX for the given destination L2 ID if there is no associated TX profile. An RX UE determines that SL DRX is used if all destination L2 IDs of interest are assumed to support SL DRX. For groupcast, when the UE is in RRC_CONNECTED and using mode 1 resource allocation, the UE reports each destination L2 ID and associated SL DRX on/off indication to the gNB supporting SL DRX.\nAlignment of Uu DRX and SL DRX for a UE in RRC_CONNECTED is supported for unicast, groupcast, and broadcast. Alignment of Uu DRX and SL DRX at the same UE is supported. In addition, for mode 1 resource allocation, the alignment of Uu DRX of the TX UE and SL DRX of the RX UE is supported.\nAlignment may comprise of either full overlap or partial overlap in time between Uu DRX and SL DRX. For SL RX UEs in RRC_CONNECTED, alignment is achieved by the gNB.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "16.9.7\tPower Savings Resource Allocation",
                            "text_content": "The SL UE in Mode 2 can support partial sensing-based resource allocation and random resource selection as power saving resource allocation methods. A SL mode 2 TX resource pool can be (pre)configured to allow full sensing only, partial sensing only, random selection only, or any combination(s) thereof. A UE decides which resource allocation scheme(s) can be used in the AS based on its capability (for a UE in RRC_IDLE/RRC_INACTIVE/OOC) and the allowed resource schemes in the resource pool configuration.\nRandom resource selection is applicable to both periodic and aperiodic traffic.\nA UE capable for partial sensing can perform periodic-based partial sensing and/or contiguous partial sensing for resource (re)selection. Periodic-based partial sensing can only be performed if periodic resource reservation is configured in the resource pool. In periodic-based partial sensing, the UE monitors slots in periodic sensing occasion(s) for a given resource reservation periodicity. Contiguous partial sensing is performed by a UE capable of partial sensing when resource (re)selection is triggered by a UE in a TX pool configured with partial sensing. In contiguous partial sensing, the UE monitors slots in a contiguous sensing window which occur prior to the selected transmission resource.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "16.9.8\tInter-UE Coordination (IUC)",
                            "text_content": "The SL UE can support inter-UE coordination (IUC) in Mode 2, whereby a UE sends information about resources to a peer UE, which the peer UE then uses for resource (re)selection. The following schemes of inter-UE coordination are supported:\n-\tIUC scheme 1, where the IUC information sent from a UE to a peer UE is the preferred or non-preferred resources for the peer UE's transmission, and\n-\tIUC scheme 2, where the IUC information sent from a UE to a peer UE is the presence of expected/potential resource conflict on the resources indicated by the peer UE's SCI.\nIn scheme 1, the transmission of IUC information from a UE can be triggered by a condition at this UE, or by an explicit request from a peer UE. The UE determines the set of resources reserved by other UEs or slots where the UE, when it is the intended receiver of the peer UE, does not expect to perform SL reception from the peer UE due to half-duplex operation. The UE uses these resources as the set of non-preferred resources, or excludes these resources to determine a set of preferred resources and sends the preferred/non-preferred resources to the peer UE. Regarding the IUC information received from the UE, the peer UE's resources for resource (re)selection can be based on both the peer UE's sensing results (if available) and the IUC information, or it can be based only on the IUC information. For scheme 1, MAC CE and second-stage SCI or MAC CE only can be used to send IUC information. For IUC information transmission triggered by an explicit request, both the explicit request and the IUC information are transmitted in unicast manner. For IUC information transmission triggered by a condition other than the explicit request, the IUC information indicating preferred resource set is transmitted in unicast manner, and the IUC information indicating non-preferred resource set is transmitted in unicast, groupcast or broadcast manner.\nIn scheme 2, a UE determines the expected/potential resource conflict within the resources indicated by a peer UE's SCI as either resources reserved by other UEs and identified by the UE as fully/partially overlapping with the resources indicated by the peer UE's SCI, or as slots where the UE is the intended receiver of the peer UE and does not expect to perform SL reception on those slots due to half-duplex operation. The peer UE uses the conflicting resources to determine the resources to be reselected and exclude the conflicting resources from the reselected resources. For scheme 2, PSFCH is used to send IUC information.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "16.9.9\tSidelink in Unlicensed Spectrum (SL-U)",
                            "text_content": "Sidelink supports operation in unlicensed spectrum for both mode 1 and mode 2. Type1 and Type2 (2A/2B/2C) channel access procedures specified in TS 37.213 [37] are used for NR sidelink operation in a shared channel.\nThe SL-CAPC of SL radio bearers and SL MAC CEs are either fixed or (pre)configurable as follows:\n-\tFixed to the highest priority for all SL-SRBs and SL MAC CEs\n-\t(Pre)configurable per DRB for all SL-DRBs\nWhen choosing the SL-CAPC for a SL-DRB the network takes into account the PQIs of all QoS flows mapped to that SL DRB. Table 16.9.9-1 below shows which SL-CAPC should be used for which standardized PQI(s), i.e., which SL-CAPC to use for a given QoS flow. For a UE in RRC_IDLE/RRC_INACTIVE or OOC, the UE uses the SL-CAPC configured in SIB/Pre-configuration when the QoS flow can be mapped to a non-default SLRB, or when the default SLRB is used for the QoS flow and the SL-CAPC of the default SLRB is configured.\nWhen the default SLRB is used for the QoS flow and the SL-CAPC of the default SLRB is not configured:\n-\tif the QoS flow is associated with standardized PQI, the UE derives SL-CAPC for the flow directly from the table below\n-\tif the QoS flow is associated with non-standardized PQI, the UE may select the SL-CAPC of the standardized PQI having the closest PDB.\nThe UE then selects the lowest SL-CAPC priority level (highest SL-CAPC value) among the QoS flows to determine the SL-CAPC for the default SLRB.\nTable 16.9.9-1: Mapping between Channel Access Priority Classes for SL-U and PQI\n\nWhen performing Type 1 LBT for the transmission of a sidelink TB, the SL UE shall select the SL-CAPC as follows:\n-\tIf only SL MAC CE(s) are included in the SL TB, the highest priority SL-CAPC is used; or\n-\tIf SCCH SDU(s) are included in the SL TB, the highest priority SL-CAPC is used; or\n-\tThe lowest priority SL-CAPC of the SL logical channel(s) with MAC SDU(s) multiplexed in the TB is used otherwise.\nThe highest priority SL-CAPC is used for SBCCH SDU transmissions and PSFCH transmissions.\nSL-specific consistent LBT failure detection and recovery procedure is supported for SL-U. When the UE detects SL-specific consistent LBT failure, it performs the actions as specified in TS 38.321 [6]. SL-specific consistent LBT failure detection is per RB-set.\nA SL UE in RRC_CONNECTED can indicate SL-specific consistent LBT failure to the gNB using a SL MAC CE that indicates the RB set(s) where SL-specific consistent LBT failure was detected. A SL UE using mode 2 resource allocation triggers resource reselection and/or resource pool reselection upon SL-specific consistent LBT failure. In such case, resources in failed RB set(s) are excluded from resource (re)selection until consistent LBT failure on the RB set(s) is cancelled based on conditions in TS 38.321 [6]. The UE triggers SL RLF for all PC5-RRC connections when the UE has triggered SL-specific consistent LBT failure in all RB sets.\nUE to UE COT sharing is supported in NR sidelink operation for SL-U. When performing SL-SSB transmission(s), a responding UE can utilize a COT shared by a COT initiating UE when the responding UE intends to transmit SL-SSB in the shared COT. When performing PSFCH transmissions, a responding UE can utilize a COT shared by a COT initiating UE when at least one of the responding UE's PSFCH transmissions is intended for the COT initiating UE.\nWhen performing PSSCH/PSCCH transmissions, a responding UE can utilize a COT shared by a COT initiating UE when the responding UE's transmission(s) is intended for the COT initiating UE. In unicast, the destination/source ID of the responding UE's transmission should match the source/destination ID of the initiator UE's transmission for the same unicast link. In groupcast/broadcast, destination ID of the responding UE's transmission should match the initiator's destination ID. In addition, a COT initiating UE may transmit an additional pair of source/destination ID in either unicast, groupcast, or broadcast. In this case, the responding UE can utilize a COT shared by a COT initiating UE if the destination/source (for unicast) or destination (for groupcast/broadcast) of the responding UE transmission match what is carried in the additional ID(s). In all cases, a UE's transmissions in a shared COT should have SL-CAPC value that is equal to or smaller than the SL-CAPC value indicated in the COT sharing information. In order to satisfy the COT sharing requirements, a responding UE may perform an enhanced LCP procedure as specified in 38.321 [6]. When receiving multiple COT sharing indications from different COT initiators, it is up to UE implementation which shared COT is used.\nA UE using mode 2 resource allocation may support resource selection enhancements to avoid LBT blocking and increase COT resource utilization. If transmission in slot(s) before a reserved resource is able to share its initiated COT to the reservation, the UE may be (pre)configured to prioritize/select resource(s) in the slot(s) for transmission. To avoid blocking, a UE may avoid selection of a number of consecutive resources (up to UE implementation) before a reserved resource. Furthermore, a UE may avoid selection of a number of consecutive resources (up to UE implementation) after a reserved resource.\nA UE using mode 2 resource allocation supports resource selection for multiple consecutive slot transmission (MCSt). A UE autonomously determines whether to use MCSt, and the number of consecutive slots in an MCSt up to the maximum COT duration for a specific SL-CAPC as defined in TS 37.213 [37]. MCSt can be used for transmission of a single TB or multiple TBs. For each TB transmitted in an MCSt, the UE triggers resource (re)selection only when LBT failure is detected on the resources for the initial transmission and all retransmissions of the TB. When performing LCP procedure for transmission of multiple TBs in an MCSt, a UE may perform an enhanced LCP procedure as specified in TS 38.321 [6] based on the SL-CAPC used for LBT of the first TB.\n",
                            "figures_meta_data": [],
                            "tables": [
                                {
                                    "description": "Table 16.9.9-1: Mapping between Channel Access Priority Classes for SL-U and PQI",
                                    "table number": 9,
                                    "summary": "",
                                    "name": ""
                                }
                            ]
                        },
                        {
                            "title": "16.9.10\tSidelink CA",
                            "text_content": "Carrier aggregation (CA) in sidelink is supported for mode 2 and in V2X case only. It applies to both in coverage UEs and out of coverage UEs. Each resource pool (pre)configured for sidelink is associated to a single carrier. A UE using mode 2 resource allocation performs carrier (re)selection and may select one or more carriers used for sidelink.\nThe carrier(s) that can be used for transmitting data are provided by the V2X layer per QoS flow, and LCP ensures that data from a SLRB is transmitted on a carrier for which all mapped QoS flows are allowed to use the carrier.\nFor groupcast and broadcast, when the V2X layer provides multiple carriers in QoS flow to carrier mapping information to the AS, TX profile is used to indicate whether the transmission corresponding to the QoS flow is backward compatible or not. When backward compatibility is needed, the TX UE uses only the legacy carrier without PDCP duplication, or uses PDCP duplication with at least the legacy carrier.\nFor groupcast and broadcast, carrier selection is performed at MAC layer, depending on the CBR of the configured carriers and logical channel priority. Carrier (re)selection may be performed when resource (re)selection is triggered, or when there is no SL grant for a sidelink process on any allowed carrier, and is triggered for each sidelink process. In order to avoid frequent switching across different carriers, the UE may keep using a carrier already selected for transmission, if the measured CBR on this carrier is lower than a (pre)configured threshold. For a UE using mode 2 resource allocation, logical channel prioritization is performed for a sidelink resource on a carrier depending on the CBR measured on the carrier and the logical channel priority, as specified in TS 38.321 [6]. For unicast, SL CA related capability is exchanged between the TX UE and RX UE, and the TX UE delivers the carrier configuration to the RX UE in PC5-RRC. For unicast, carrier selection and logical channel prioritization is performed similar to groupcast and broadcast among the carriers delivered in the carrier configuration. SL CA for unicast is not applied until the carrier configuration signalling is complete. Carrier (re)selection may be performed and a new carrier configuration is sent to the RX UE when the TX UE detects carrier failure on a specific carrier, as specified in TS 38.321 [6].\nSidelink packet duplication is supported for sidelink CA and is performed at PDCP layer. For sidelink packet duplication for transmission, a PDCP PDU is duplicated at the PDCP entity. The duplicated PDCP PDUs of the same PDCP entity are submitted to two different RLC entities and associated to two different sidelink logical channels respectively. The duplicated PDCP PDUs of the same PDCP entity are only allowed to be transmitted on different sidelink carriers. For a SL DRB, sidelink packet duplication is (pre)configured in the bearer configuration. For applicable SL SRBs, whether to use duplication is decided by the TX UE. In unicast, the TX UE sends the duplication configuration to the RX UE in PC5-RRC.\nThere are specified logical channel identities which apply to the sidelink logical channel used for sidelink packet duplication exclusively as specified in TS 38.321 [6].\n",
                            "figures_meta_data": [],
                            "tables": []
                        }
                    ]
                },
                {
                    "title": "16.10\tMulticast and Broadcast Services",
                    "description": "",
                    "summary": "",
                    "text_content": "",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": [
                        {
                            "title": "16.10.1\tGeneral",
                            "text_content": "NR system enables resource efficient delivery of multicast/broadcast services (MBS).\nFor broadcast communication service, the same service and the same specific content data are provided simultaneously to all UEs in a geographical area (i.e., all UEs in the broadcast service area as defined in TS 23.247 [45] are authorized to receive the data). A broadcast communication service is delivered to the UEs using a broadcast session. A UE can receive a broadcast communication service in RRC_IDLE, RRC_INACTIVE and RRC_CONNECTED state.\nFor multicast communication service, the same service and the same specific content data are provided simultaneously to a dedicated set of UEs (i.e., not all UEs in the MBS service area as defined in TS 23.247 [45] are authorized to receive the data). A multicast communication service is delivered to the UEs using a multicast session. A UE can receive a multicast communication service in RRC_CONNECTED state with mechanisms such as PTP and/or PTM delivery, as defined in clause 16.10.5.4. HARQ feedback/retransmission can be applied to both PTP and PTM transmission.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "16.10.2\tNetwork Architecture",
                            "text_content": "The overall NG-RAN architecture specified in clause 4 applies for NR MBS. MBS multicast can only be supported in MCG side in NE-DC and NR-DC scenarios, i.e., only for MN-terminated MCG MRB. The configuration of MBS broadcast on SCG is not supported for the UE.\nThe QoS model for NR MBS can be found in TS 23.247 [45].\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "16.10.3\tProtocol Architecture",
                            "text_content": "Figure 16.10.3-1 and 16.10.3-2 depict the downlink Layer 2 architecture for multicast session and broadcast session respectively, where MBS protocol stack comprises the same layer 2 sublayers as described in clause 6 with the following differences:\n-\tSDAP sublayer provides only the following functionalities:\n-\tMapping between an MBS QoS flow and an MRB;\n-\tTransfer of user plane data.\n-\tPDCP sublayer provides only the following functionalities:\n-\tTransfer of user plane data;\n-\tMaintenance of PDCP SNs;\n-\tHeader compression and decompression using the ROHC protocol or EHC protocol;\n-\tReordering and in-order delivery;\n-\tDuplicate discarding.\n-\tFor a multicast session, gNB provides one or more of the following multicast MRB configuration(s) to the UE via dedicated RRC signalling:\n-\tMulticast MRB with DL only RLC-UM or bidirectional RLC-UM configuration for PTP transmission;\n-\tMulticast MRB with RLC-AM entity configuration for PTP transmission;\n-\tMulticast MRB with DL only RLC-UM entity for PTM transmission;\n-\tMulticast MRB with two RLC-UM entities, one DL only RLC-UM entity for PTP transmission and the other DL only RLC-UM entity for PTM transmission;\n-\tMulticast MRB with three RLC-UM entities, one DL RLC-UM entity and one UL RLC-UM entity for PTP transmission and the other DL only RLC-UM entity for PTM transmission;\n-\tMulticast MRB with two RLC entities, one RLC-AM entity for PTP transmission and the other DL only RLC-UM entity for PTM transmission.\n-\tFor a multicast session, gNB may change the MRB type using RRC signalling.\nFigure 16.10.3-1 illustrates the downlink Layer 2 architecture for multicast sessions on a telecommunication network. The figure showcases the core network elements, including the eNodeB, MME, PDN Gateway, and SGW, which are responsible for handling data traffic. The diagram emphasizes the role of the PDN Gateway in forwarding traffic to the internet, while the SGW manages the session and control plane. The figure also highlights the importance of efficient resource allocation and handover procedures for maintaining seamless connectivity and high-quality service delivery.\nFigure 16.10.3-1: Downlink Layer 2 Architecture for Multicast Session\n-\tFor broadcast session, gNB provides the following broadcast MRB configuration to the UE using broadcast RRC signalling:\n-\tBroadcast MRB with one DL only RLC-UM entity for PTM transmission.\nFigure 16.10.3 - 2 illustrates the downlink Layer 2 architecture for a broadcast session in a telecommunication network. The figure depicts the flow of data from the base station to the user equipment, highlighting the role of the access network, the core network, and the transport network. The downlink architecture is designed to efficiently transmit data to multiple users simultaneously, with the core network managing the routing and signaling. The figure also shows the use of multiple access technologies, such as LTE and Wi-Fi, to enhance coverage and capacity. The core network is responsible for managing the session and ensuring that the data is delivered to the user equipment in a timely and efficient manner.\nFigure 16.10.3-2: Downlink Layer 2 Architecture for Broadcast Session\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "16.10.4\tGroup Scheduling",
                            "text_content": "The following logical channels are used for MBS delivery:\n-\tMTCH: A PTM downlink channel for transmitting MBS data of either multicast session or broadcast session from the network to the UE;\n-\tDTCH: A PTP channel defined in clause 6.2.2 for transmitting MBS data of a multicast session from the network to the UE;\n-\tMCCH: A PTM downlink channel used for transmitting MBS broadcast or MBS multicast control information associated to one or several MTCH(s) from the network to the UE. Broadcast MCCH and multicast MCCH are independent channels. The multicast MCCH is used only for multicast reception in RRC_INACTIVE state.\nThe following connections between logical channels and transport channels for PTM transmission exist:\n-\tMCCH can be mapped to DL-SCH;\n-\tMTCH can be mapped to DL-SCH.\nThe following depicts the usage of RNTI for PTM transmission:\n-\tA UE can receive different services using same or different G-RNTIs;\n-\tA UE can receive different services using same or different G-CS-RNTIs.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "16.10.5\tMulticast Handling",
                            "text_content": "There are two delivery modes as specified in TS 23.247 [45]:\n-\t5GC Shared MBS traffic delivery;\n-\t5GC Individual MBS traffic delivery.\nAs specified in TS 23.247 [45], if the gNB supports MBS, the network shall use the 5GC Shared MBS traffic delivery in which case an MBS Session Resource context for a multicast session is setup in the gNB when the first UE joins the multicast session.\nFor 5GC Shared MBS traffic delivery mode, shared NG-U resources are used to provide MBS user data to the gNB. The gNB initiates the Multicast Distribution Setup procedure towards the 5GC, to allocate shared NG-U resources for a multicast session. In case multiple MBS session areas as specified in TS 23.247 [45] are associated with the same multicast session for location dependent MBS services, multiple NG-U shared resources are established for the same multicast session per MBS Area Session ID served by the gNB.\nA shared NG-U resource applies one of the following transport options:\n-\tunicast transport;\n-\tmulticast transport.\nFor 5GC Shared MBS traffic delivery an MBS Session Resource comprises one or several MRBs. If minimisation of data loss is applied for a given MRB, synchronisation of allocation of PDCP COUNT values is applied by either or a combination of the following methods:\n-\tderivation of the PDCP COUNT values by means of a DL MBS QFI Sequence Number provided on NG-U. Synchronisation in terms of MBS QoS flow to MRB mapping and PDCP SN size of the corresponding MRB among gNBs are achieved by means of network implementation.\n-\tdeployment of a Shared NG-U Termination at NG-RAN, shared among gNBs, which comprises a common entity for assignment of PDCP COUNT values. Synchronisation in terms of MBS QoS flow to MRB mapping and PDCP SN size of the corresponding MRB among gNBs may be achieved by means of network implementation.\nIf PDCP COUNT values are derived from a DL MBS QFI Sequence Number provided on NG-U and only one QoS Flow is mapped to an MRB, the gNB shall set the PDCP COUNT value of PDCP PDU to the value of the DL MBS QFI Sequence Number provided with the received packet over NG-U. If PDCP COUNT values are derived from a DL MBS QFI Sequence Number provided on NG-U and multiple QoS Flows are mapped to an MRB, the gNB may derive the PDCP COUNT value of the PDCP PDU from the sum of the DL MBS QFI Sequence Numbers of the QoS Flows mapped to this MRB.\nNOTE:\tSynchronisation of PDCP COUNT values in case user data for MBS QoS flows mapped to the same MRB arrive over NG-U at different gNBs in different order or in case of loss of data over NG-U, and related handling of minimisation of data loss is left to implementation.\nAs specified in TS 23.247 [45], the gNB may receive from the 5GC MBS Assistance Information associated with a multicast MBS session for a UE, which assists the gNB in configuring the UE properly. The MBS Assistance Information indicates that the UE is expected to require dedicated resources very frequently. Based on this information, the gNB may decide the RRC state of the UE. The QoS requirements of the multicast session apply regardless of the RRC state within which the UE receives multicast session data.\nA UE can be configured to receive data of MBS multicast session only in RRC_CONNECTED state or RRC_INACTIVE state. To receive the multicast service, the UE needs to perform MBS Session Join procedure as specified in TS 23.247 [45]. It is up to gNB to decide whether the UE receives data of MBS multicast session in RRC_CONNECTED state or RRC_ INACTIVE state. The gNB moves the UE from RRC_CONNECTED state to RRC_INACTIVE state via RRCRelease message, and moves the UE from RRC_INACTIVE state to RRC_CONNECTED state via group notification or UE-specific paging.\nIf the UE which joined a multicast session is in RRC_CONNECTED state and when the multicast session is activated, the gNB may send RRCReconfiguration message with relevant MBS configuration for the multicast session to the UE.\nIf the gNB configures the UE to receive the MBS multicast session in RRC_INACTIVE state, the gNB may provide the PTM configuration via RRCRelease message for the MBS multicast session as well as information which multicast service(s) can be continued to be received in RRC_INACTIVE state. The UE does not suspend MRBs of the multicast session indicated to be continued to be received in RRC_INACTIVE state. Multicast MCCH is used in case a cell supports updating PTM configuration or providing PTM configuration to UEs in RRC_INACTIVE state moved from other cells. Otherwise, multicast MCCH can be optionally present.\nA notification mechanism is used to announce the change of the multicast MCCH contents due to multicast session modification or session deactivation or due to neighbouring cell information modification. The scheduling information for multicast MCCH reception is provided via SIB24 and optionally via RRCRelease message.\nWhen there is temporarily no data to be sent to the UEs for a multicast session that is active, the gNB may move the UE to RRC_INACTIVE state. When an MBS multicast session is deactivated, the gNB may move the UE in RRC_CONNECTED state to RRC_IDLE or RRC_INACTIVE state. For UEs receiving data of MBS multicast session in RRC_INACTIVE state, the gNB notifies the UE to stop monitoring PDCCH addressed by corresponding G-RNTI via RRCRelease message or multicast MCCH when there is temporarily no data to be sent or when the session is deactivated. gNBs supporting MBS use a group notification mechanism to notify the UEs in RRC_IDLE or RRC_INACTIVE state when a multicast session has been activated by the CN. gNBs supporting MBS use a group notification mechanism to notify the UEs in RRC_INACTIVE state when the session is already activated and the gNB has multicast session data to deliver. If the UE receiving data of MBS multicast session in RRC_INACTIVE state in a cell is notified to stop monitoring PDCCH addressed by G-RNTI for all the joined multicast sessions, the UE does not monitor PDCCH addressed by multicast-MCCH-RNTI until the group notification is received. Upon reception of the group notification, the UEs reconnect to the network or resume the connection and transition to RRC_CONNECTED state from either RRC_IDLE state or RRC_INACTIVE state. Upon reception of the group notification that indicates to allow the multicast reception in RRC_INACTIVE state, the UE stays in RRC_INACTIVE state and behaves as specified in TS 38.331 [12]. If the UE is notified by both group notification and the UE-specific paging, the UE follows the UE-specific paging and goes to RRC_CONNECTED state.\nThe group notification is addressed with P-RNTI on PDCCH, and the paging channels are monitored by the UE as described in clause 9.2.5. Paging message for group notification contains MBS session ID which is utilized to page all UEs in RRC_IDLE and RRC_INACTIVE states that joined the associated MBS multicast session, i.e., UEs are not paged individually. The UE stops monitoring for group notifications related to a specific multicast session, i.e., stops checking for the MBS session ID in the Paging message, when the UE enters RRC_CONNECTED state. The UE does not monitor for group notifications for these cases, i.e., once this UE leaves this multicast session or the network requests the UE to leave, or the network releases the multicast session.\nNOTE:\tThe gNB's decision to keep a UE in RRC_CONNECTED (e.g., to meet latency requirements for mission critical service) or move the UE to RRC_INACTIVE or RRC_IDLE (e.g., when there is temporarily no data to be sent to the UE or to address congestion in the cell) may consider 5QI value(s) or other QoS parameters for mission critical and non-mission critical UEs.\nIf the UE in RRC_IDLE state that joined an MBS multicast session is camping on the gNB not supporting MBS, the UE may be notified by CN-initiated paging where CN pages each UE individually due to session activation or data availability, as described in clause 9.2.5. If the UE in RRC_INACTIVE state that joined MBS multicast session is camping on the gNB not supporting MBS, the UE may be notified individually by RAN-initiated paging due to session activation or data availability, as described in clause 9.2.5.\nMobility principles build on existing functionality including functions described in clause 9.2.\nMobility procedures for multicast reception allow the UE to continue receiving multicast service(s) via PTM or PTP in a new cell after handover.\nDuring handover preparation phase, the source gNB transfers to the target gNB about the MBS multicast sessions the UE has joined in the UE context information. To support provision of local multicast service with location dependent content as specified in TS 23.247 [45], for each active multicast session, service area information per Area Session ID may be provided to the target gNB.\nThe source gNB may propose data forwarding for some MRBs to minimize data loss and may exchange the corresponding MRB PDCP Sequence Number with the target gNB during the handover preparation:\n-\tThe lossless handover for multicast service is supported for the handover between MBS supporting cells if the UE is configured with PTP RLC AM entity in target cell MRB of a UE, regardless of whether the UE is configured with PTP RLC AM entity in the source cell or not.\n-\tIn order to support lossless handover for multicast service, the network has to ensure DL PDCP COUNT value synchronization and continuity between the source cell and the target cell. Furthermore, data forwarding from the source gNB to the target gNB and/or PDCP status report provided by a UE for an MRB for multicast session can be used during lossless handover.\nFor each multicast session with ongoing user data transmission for which no MBS Session Resources exist at the target gNB, the target gNB triggers the setup of MBS user plane resources towards the 5GC using the NGAP Distribution Setup procedure. If unicast transport is used, the target gNB provides the DL tunnel endpoint to be used to the MB-SMF. If multicast transport is used, the target gNB receives the IP multicast address from the MB-SMF.\nDuring handover execution, the MBS configuration decided at target gNB is sent to the UE via the source gNB within an RRC container as specified in TS 38.331 [12]. The PDCP entities for multicast MRBs in the UE can either be re-established or remain as it is. When the UE connects to the target gNB, the target gNB sends an indication that it is an MBS-supporting node to the SMF in the Path Switch Request message (Xn handover) or Handover Request Acknowledge message (NG handover).\nUpon successful handover completion, the source gNB may trigger the release of the MBS user plane resources towards the 5GC using the NGAP Distribution Release procedure for any multicast session for which there is no remaining joined UE in the gNB.\nDuring an MBS multicast session, at mobility from an MBS-supporting cell to an MBS non-supporting cell, the target gNB sets up PDU Session Resources mapped to the MBS multicast session. The 5GC infers from the absence of an \"MBS-support\" indication from gNB in the Path Switch Request message (Xn handover) or Handover Request Acknowledge message (NG handover) that MBS multicast data packets delivery has to be switched to 5GC individual MBS traffic delivery as specified in TS 23.247 [45]. If data forwarding is applied, the source gNB infers from the handover preparation response message that the target gNB does not support MBS and changes the QFI(s) in the forwarded packets to the associated PDU Session QFI(s) if respective mapping information is available. The source gNB may be aware that the target gNB is non-MBS supporting already before Handover Preparation.\nFor mobility from MBS non-supporting cell to MBS-supporting cell, the existing Xn/NG handover procedures apply. The 5GC infers from the presence of the \"MBS-support\" indicator from gNB in the Path Switch Request message (Xn handover) or in the Handover Request Acknowledge message (NG handover) that MBS multicast data packets delivery can be switched from 5GC Individual MBS traffic delivery to 5GC Shared MBS traffic delivery. After Xn handover, the SMF triggers switching MBS multicast data packets delivery from 5GC Individual to 5GC Shared MBS traffic delivery by providing MBS Session IDs joined by the UE to the target gNB by means of the PDU Session Resource Modification procedure. For NG handover, the SMF provides the MBS Session IDs joined by the UE to the target gNB by means of NGAP Handover Request. Minimization of data loss and duplication avoidance may be applied by means of identical MBS QFI SNs received over the shared NG-U tunnel against those received over unicast NG-U tunnels or forwarding tunnels.\nMobility from a multicast-supporting cell to a multicast non-supporting cell can be achieved by switching the MRB to a DRB in the source gNB before a handover.\nNOTE:\tA UE may be handed over to a target gNB not supporting MBS without prior reconfiguration from MRB to the DRB in the source gNB. In this case, the AS configuration may not be comprehended by the target gNB causing full configuration.\nThe gNB may use RRCReconfiguration message to configure or reconfigure a multicast MRB, e.g., add/release/modify the MRB's RLC entities as described in clause 16.10.3. In order to minimize the data loss due to MRB reconfiguration, gNB may configure UE to send a PDCP status report during reconfiguration for MRB type change.\nMobility procedures for multicast reception allow the UE in RRC_INACTIVE state to continue receiving MBS service(s) when changing cells without resuming RRC connection if the PTM configuration of the new cell can be acquired by the UE from the multicast MCCH after cell reselection. During an active MBS multicast session, the UE is required to resume RRC connection to get the PTM configuration if the PTM configuration is not provided on the multicast MCCH of the new cell. Even if the UE in RRC_INACTIVE state received indication to stop monitoring PDCCH addressed by G-RNTI for an MBS multicast session in the source cell, the UE acquires MCCH in the reselected cell after cell reselection.\nThe gNB may indicate in the multicast MCCH the list of neighbour cells providing the same MBS multicast service(s) for UEs in RRC_INACTIVE state as provided in the serving cell. This allows the UE, e.g., to resume RRC connection without reading SIB24 and multicast MCCH of the neighbour cell, if the interested service which is activated is not available to the UE in RRC_INACTIVE state.\nThe gNB may provide an indication on cell PDCP COUNT synchronization for an MBS session with PTM configuration in RRCRelease message. If indicated by the gNB, all cells within the RNA are synchronized in terms of PDCP COUNT value to the MRBs of the corresponding MBS service, and the order of MRBs within the list of multicast MRB configuration for the same MBS multicast session in the multicast MCCH message of the last serving cell and (re)selected cell within the RNA should be consistent. Upon reselection to a cell indicated as synchronized in terms of PDCP COUNT value, the UE does not initialize the PDCP state variables. Otherwise, the UE initializes the PDCP state variables as defined in TS 38.323 [8].\nThe UE may be configured with dedicated frequency priorities in RRCRelease message which the UE applies during cell reselection while receiving data of MBS multicast session in RRC_INACTIVE state.\nThe UE receiving multicast session(s) in RRC_INACTIVE state triggers RRC connection resumption if the latest measured RSRP or RSRQ of the serving cell becomes lower than the threshold configured by the network. The threshold can be configured per MBS session via RRCRelease message or multicast MCCH.\nFor multicast service, gNB may deliver MBS multicast data packets using the following methods:\n-\tPTP Transmission: gNB individually delivers separate copies of MBS data packets to each UEs independently, i.e., gNB uses UE-specific PDCCH with CRC scrambled by UE-specific RNTI (e.g., C-RNTI) to schedule UE-specific PDSCH which is scrambled with the same UE-specific RNTI.\n-\tPTM Transmission: gNB delivers a single copy of MBS data packets to a set of UEs, e.g., gNB uses group-common PDCCH with CRC scrambled by group-common RNTI to schedule group-common PDSCH which is scrambled with the same group-common RNTI.\nIf a UE is configured with both PTM and PTP transmissions, a gNB dynamically decides whether to deliver multicast data by PTM leg and/or PTP leg for a given UE based on the protocol stack defined in clause 16.10.3, based on information such as MBS Session QoS requirements, number of joined UEs, UE individual feedback on reception quality, and other criteria. The same QoS requirements apply regardless of the decision.\nPTP transmission is not supported for MBS multicast session data reception for UEs in RRC_INACTIVE state.\nSPS is not supported for MBS multicast session data reception for UEs in RRC_INACTIVE state.\nUE can be configured to receive MBS multicast data either from a PCell or a single SCell at a time.\nThe following DRX configurations for PTM/PTP transmission by RRC_CONNECTED UEs are possible:\n-\tFor PTM transmission, multicast DRX is configured per G-RNTI/G-CS-RNTI which is independent of UE-specific DRX;\n-\tFor PTP transmission, UE-specific DRX is reused, i.e., UE-specific DRX is used for both unicast transmission and PTP transmission of MBS multicast. For PTM retransmission via PTP, UE monitors PDCCH scrambled by C-RNTI/CS-RNTI during UE-specific DRX's Active Time.\nThe following DRX configuration for PTM transmission by RRC_INACTIVE UEs is possible:\n-\tFor PTM transmission, multicast DRX is configured per G-RNTI.\nA CFR configured by RRCReconfiguration message is defined for multicast scheduling as an 'MBS frequency region' with a number of contiguous PRBs confined within and with the same numerology as the DL BWP, and multicast scheduling may have specific characteristics (e.g., PDCCH, PDSCH and SPS configurations). The CFR for the multicast reception in RRC_INACTIVE state and the CFR for broadcast can be configured differently. If one CFR is not completely contained within the other CFR, the UE in RRC_INACTIVE state is not required to receive both broadcast and multicast simultaneously.\nTwo HARQ-ACK reporting modes are defined for MBS:\n-\tFor the first HARQ-ACK reporting mode, the UE generates HARQ-ACK information with ACK value when a UE correctly decodes a transport block or detects a DCI format indicating an SPS PDSCH release; otherwise, the UE generates HARQ-ACK information with NACK value.\n-\tFor the second HARQ-ACK reporting mode, the UE does not transmit a PUCCH that would include only HARQ-ACK information with ACK values.\nHARQ-ACK feedback for multicast can be enabled or disabled by higher layer configuration per G-RNTI or per G-CS-RNTI and/or indication in the DCI scheduling multicast transmission.\nHARQ feedback is not supported for MBS multicast session data reception for UEs in RRC_INACTIVE state.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "16.10.6\tBroadcast Handling",
                            "text_content": "For delivery of location dependent contents of a broadcast session, Area Session ID is included in the NGAP broadcast session resource setup procedure associated with MBS service area information and per Area Session ID NG-U tunnels are established.\nThe 5GC may also provide information to the NG-RAN node whether the broadcast session is intended to be received by RedCap UEs only, non-RedCap UEs only or both non-RedCap and RedCap UEs. The NG-RAN may take this into account when configuring MBS session resources.\nMBS broadcast can be received by UEs in RRC_IDLE, RRC_INACTIVE and RRC_CONNECTED state. A UE can receive the MBS configuration for broadcast session (e.g., parameters needed for MTCH reception) via MCCH in RRC_IDLE, RRC_INACTIVE and RRC_CONNECTED state. The parameters needed for the reception of MCCH are provided via System Information.\nThe following principles govern the MCCH structure:\n-\tMCCH provides the list of all broadcast services with ongoing sessions transmitted on MTCH(s) and the associated information for broadcast session includes MBS session ID, associated G-RNTI scheduling information and information about neighbouring cells providing certain service on MTCH(s). MCCH content is transmitted within periodically occurring time domain windows, referred to as MCCH transmission window defined by MCCH repetition period, MCCH window duration and radio frame/slot offset;\n-\tMCCH uses a modification period and MCCH contents are only allowed to be modified at each modification period boundary; a notification mechanism is used to announce the change of MCCH contents due to broadcast session start, modification or stop and due to neighbouring cell information modification;\nNOTE:\tIt is up to UE implementation to use the start and stop times in the USD to determine when to start monitoring the MCCH for the session the UE is interested in.\n-\tWhen the UE receives an MCCH change notification, it acquires the updated MCCH in the same MCCH modification period where the change notification is sent.\nUE can be configured to receive MBS broadcast data and MCCH either from a PCell or a single SCell at a time. Meanwhile, dedicated RRC signalling is used for providing SIB20 of the SCell i.e., while in RRC_CONNECTED state, UEs need not acquire broadcast SIB20 directly from the SCells.\nNOTE:\tThe UE may be able to receive MBS broadcast also from a non-serving cell, which is transparent to the network, e.g., it does not require UE capability or MBS Interest Indication to be sent by the UE.\nVia MCCH, the UE can be configured with a PTM DRX configuration for G-RNTI reception. One PTM DRX configuration can be mapped to more than one G-RNTI.\nMobility principles build on existing functionality including functions described in clause 9.2.\nNR MBS supports MBS frequency layer prioritization for MBS broadcast sessions. The gNBs may be configured with the MBS FSA ID(s) supported by each of their cells. The gNBs may exchange this information with their neighbours within Xn Setup messages and subsequent Xn Configuration Update messages to help with frequency layer prioritization.\nMobility procedures for MBS reception allow the UE to start or continue receiving MBS service(s) when changing cells. The gNB may indicate in the MCCH the list of neighbour cells providing the same MBS broadcast service(s) as provided in the serving cell. This allows the UE, e.g., to request unicast reception of the service before moving to a cell not providing the MBS broadcast service(s) using PTM transmission. To avoid the need to read MBS broadcast related system information and potentially MCCH on neighbour frequencies, the UE is made aware of which frequency is providing which MBS broadcast services via PTM, through User Service Description (USD), as defined in TS 26.346 [46], or the combination of the following:\n-\tUSD;\n-\tSIB21, as defined in clause 7.3.1.\nNOTE:\tUE can request unicast reception of the service after moving to a cell not providing the MBS broadcast service(s) using PTM transmission.\nIn RRC_IDLE and RRC_INACTIVE, the UE applies the normal cell reselection rules with the following modifications:\n-\tthe UE which is receiving or interested to receive MBS broadcast service(s) via PTM and can only receive these MBS broadcast service(s) via PTM while camping on the frequency providing these MBS broadcast service(s) is allowed to make this frequency highest priority when the conditions described in TS 38.304 [10] are met;\n-\twhen the MBS broadcast service(s) which the UE is interested in are no longer available (after the end of the session) or the UE is no longer interested in receiving the service(s), the UE no longer prioritises the frequency providing these MBS broadcast service(s).\nTo ensure service continuity of MBS broadcast, the UE in RRC_CONNECTED state may send MBS Interest Indication to the gNB, consisting of the following information:\n-\tList of MBS frequencies UE is receiving or interested to receive, sorted in decreasing order of interest;\n-\tPriority between the reception of all listed MBS frequencies and the reception of any unicast bearer and multicast MRB;\n-\tList of MBS broadcast services the UE is receiving or interested to receive, in case SIB20 is provided for PCell or SCell.\nMBS Interest Indication information reporting can be implicitly enabled/disabled by the presence of SIB21.\nThe gNB may use this information, together with the information about the UE's capabilities (e.g., supported band combinations), when providing an RRC configuration and/or downlink assignments to the UE or to release DRBs/multicast MRBs, to allow the UE to receive the MBS services the UE is interested in. MBS Interest Indication information can be exchanged between source gNB and target gNB during handover.\nFor broadcast service, gNB may deliver Broadcast MBS data packets using the following method:\n-\tPTM Transmission: gNB delivers a single copy of MBS data packets to a set of UEs, e.g., gNB uses group-common PDCCH with CRC scrambled by group-common RNTI to schedule group-common PDSCH which is scrambled with the same group-common RNTI.\nA CFR configured by SIB is defined for broadcast scheduling as an 'MBS frequency region' with a number of contiguous PRBs with a bandwidth equal to or larger than CORESET0, with the same numerology as CORESET0, and broadcast scheduling may have specific characteristics (e.g., PDCCH and PDSCH configurations).\nThe maximum number of MIMO layers is one for MBS broadcast scheduling. RB-level rate matching, and RE-level rate matching around LTE-CRS configured by higher layer signalling are supported for MCCH and MTCH. Slot-level repetition is supported for MTCH.\nHARQ-ACK feedback is not supported for MBS broadcast.\nOnly dynamic scheduling is supported for MBS broadcast.\nIf the UE in RRC_CONNECTED state is receiving or interested to receive an MBS broadcast service from a non-serving cell as described in TS 38.306 [11] , the UE may use MBS Interest Indication message to inform the serving gNB about the parameters used for the non-serving cell broadcast reception as described in TS 38.331 [12]. The gNB may enable the sending of the MBS Interest Indication by including an indication in SIB1. The UE may indicate to the serving cell the UE capability for receiving MBS broadcast service from a non-serving cell. It is up to gNB implementation to consider the MBS Interest Indication and the UE capability for receiving MBS broadcast service from a non-serving cell, if indicated, when scheduling the UE.\nIn case the UE only reports the frequency for broadcast service reception from the non-serving cell in MBS Interest Indication due to some parameters (e.g., SCS, bandwidth) not being available, the UE may transmit updated MBS Interest Indication once the parameters are available to the UE. It is up to network implementation on how to enable the UE to acquire these parameters from the non-serving cell.\n16.10.6.8\tSupport of Resource Sharing across multiple Broadcast MBS sessions in RAN Sharing Scenario\nNGAP supports resource sharing efficient scheme for broadcast delivery in RAN sharing. Such scheme enables the gNB to identify broadcast MBS sessions from different PLMNs providing identical content. The identification is based on information provided by the involved 5GCs in the Associated Session ID as specified in TS 23.247 [45].\nIf in the MBS Broadcast Setup Request message an Associated Session ID is received from a 5GC participating in RAN sharing, the gNB uses it to determine whether MBS Session resources can be shared with a broadcast MBS session(s) associated with the same Associated Session ID requested from another 5GC participating in RAN sharing.\nThe identification of MBS Broadcast Sessions providing identical content may also be based on implementation specific configuration as specified in TS 23.247 [45].\nThe gNB applying this resource efficiency scheme:\n-\tmay decide whether NG-U resources are established towards all involved 5GCs or only some of them;\n-\tresolves different QoS requirements or different S-NSSAIs received from the participating 5GCs in an implementation specific way.\nThe gNB may also trigger the NGAP Broadcast Session Transport procedure towards one 5GC participating in RAN sharing to set up NG-U resources to maintain NG-U connectivity as specified in TS 23.247 [45].\n",
                            "figures_meta_data": [],
                            "tables": []
                        }
                    ]
                },
                {
                    "title": "16.11\tMinimization of Service Interruption",
                    "description": "",
                    "summary": "",
                    "text_content": "In case of a disaster, a radio access network can experience outage, which can result in that UEs belonging to the network experience service interruptions. For this scenario, another network not affected by the disaster, which during non-disaster situations is considered by the UEs as a forbidden network, can allow roaming of the UEs belonging to the network experiencing such disaster service interruptions. Such roaming is referred to as disaster roaming. This is further described in clause 5.40 of TS 23.501 [3] and 3.10 of TS 23.122 [47].\nTo allow such disaster roaming, a cell can broadcast a list of PLMNs with disaster conditions for which disaster roaming is offered. Disaster roaming service is provided only for the area that covers the area with disaster condition.\nFurther, to be able to control the load that disaster roaming UEs put on a cell, the cell can broadcast access control parameters applicable specifically for disaster roaming UEs. Access attempts of disaster roaming UEs are based on Access Identity 3. The network can for example set the access control parameters for Access Identity 3 so that access attempts of disaster roaming UEs are more likely to be barred compared to non-disaster roaming UEs.\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "16.12\tSidelink Relay",
                    "description": "",
                    "summary": "",
                    "text_content": "",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": [
                        {
                            "title": "16.12.1\tGeneral",
                            "text_content": "Sidelink relay is introduced to support 5G ProSe UE-to-Network Relay (U2N Relay) function (specified in TS 23.304 [48]) to provide connectivity to the network for U2N Remote UE(s). Both L2 and L3 U2N Relay architectures are supported. The L3 U2N Relay architecture is transparent to the serving NG-RAN of the U2N Relay UE, except for controlling sidelink resources. The detailed architecture and procedures for L3 U2N Relay can be found in TS 23.304 [48].\nA U2N Relay UE shall be in RRC_CONNECTED to perform relaying of unicast data.\nFor L2 U2N Relay operation, the following RRC state combinations are supported:\n-\tBoth L2 U2N Relay UE and L2 U2N Remote UE shall be in RRC_CONNECTED to perform transmission/reception of relayed unicast data; and\n-\tThe L2 U2N Relay UE can be in RRC_IDLE, RRC_INACTIVE or RRC_CONNECTED as long as all the L2 U2N Remote UE(s) that are connected to the L2 U2N Relay UE are either in RRC_INACTIVE or in RRC_IDLE.\nA single unicast link is established between one L2 U2N Relay UE and one L2 U2N Remote UE. The traffic to the NG-RAN of L2 U2N Remote UE via a given L2 U2N Relay UE and the traffic of the L2 U2N Relay UE shall be separated in different Uu RLC channels.\nFor L2 U2N Relay, the L2 U2N Remote UE can only be configured to use resource allocation mode 2 (as specified in 5.7.2 and 16.9.3.1) for data to be relayed.\nSidelink relay is introduced to support 5G ProSe UE-to-UE Relay (U2U Relay) function (specified in TS 23.304 [48]) to provide connectivity between U2U Remote UEs. Both L2 and L3 U2U Relay architectures are supported. The L3 U2U Relay architecture is transparent to the AS layer of the U2U Relay UE. The detailed architecture and procedures for L3 U2U Relay can be found in TS 23.304 [48].\nA U2U Relay UE is to support the U2U Relay function as specified in TS 23.304 [48] to provide coverage extension of the sidelink transmissions between two U2U Remote UEs. For the coverage extension, the U2U Remote UE can communicate with the peer U2U Remote UE(s) which are not reachable within the sidelink coverage.\nThe U2U Relay UE and U2U Remote UE can be in any RRC state. The U2U Relay UE and the U2U Remote UEs can be in the coverage of different cells or out-of-coverage. Both sidelink resource allocation modes, i.e., mode 1 and mode 2 are supported for the U2U Relay UE and U2U Remote UEs. For U2U Relay, NR sidelink is supported between U2U Relay UE and U2U Remote UEs. After NR sidelink establishment between U2U Relay UE and U2U Remote UEs, end-to-end PC5 unicast link connection establishment is performed between U2U Remote UEs. Only unicast is supported between U2U Relay UE and U2U Remote UEs.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "16.12.2\tProtocol Architecture",
                            "text_content": "The protocol stacks for the user plane and control plane of L2 U2N Relay architecture are illustrated in Figure 16.12.2.1-1 and Figure 16.12.2.1-2. The SRAP sublayer is placed above the RLC sublayer for both CP and UP at both PC5 interface and Uu interface. The Uu SDAP, PDCP and RRC are terminated between L2 U2N Remote UE and gNB, while SRAP, RLC, MAC and PHY are terminated in each hop (i.e., the link between L2 U2N Remote UE and the L2 U2N Relay UE and the link between L2 U2N Relay UE and the gNB).\nFor L2 U2N Relay, the SRAP sublayer over PC5 hop is only for the purpose of bearer mapping. The SRAP sublayer is not present over PC5 hop for relaying the L2 U2N Remote UE's message on BCCH and PCCH. For L2 U2N Remote UE's message on SRB0, the SRAP header is not present over PC5 hop, but the SRAP header is present over Uu hop for both DL and UL.\nFigure 16.12.2.1-1 illustrates the user plane protocol stack for L2 UE-to-Network Relay, showcasing the various layers involved in the communication process. The figure depicts the network architecture, starting from the user equipment (UE) and extending to the network side, highlighting the role of the network functions virtualization (NFV) and software-defined networking (SDN) in enabling efficient communication. The figure emphasizes the importance of security mechanisms, such as encryption and authentication, in maintaining data integrity and confidentiality. Additionally, the figure highlights the use of Quality of Service (QoS) mechanisms to ensure that critical traffic is given priority over non-critical traffic, thereby improving overall network performance.\nFigure 16.12.2.1-1: User plane protocol stack for L2 UE-to-Network Relay\nFigure 16.12.2.1-2 illustrates the control plane protocol stack for L2 UE-to-Network Relay, showcasing the various layers involved in the communication process. The figure depicts the control plane protocol stack, which is essential for managing the network resources and ensuring efficient data transmission. The stack includes the Network Layer, Transport Layer, and Application Layer, each playing a crucial role in the overall communication process. The figure also highlights the role of the User Equipment (UE) and the Network Equipment (NE) in relaying the data packets between the two. The figure provides a comprehensive overview of the control plane protocol stack for L2 UE-to-Network Relay, emphasizing the importance of each layer in maintaining the smooth functioning of the network.\nFigure 16.12.2.1-2: Control plane protocol stack for L2 UE-to-Network Relay\nFor L2 U2N Relay, for uplink:\n-\tThe Uu SRAP sublayer performs UL bearer mapping between end-to-end Uu Radio Bearers of L2 U2N remote UE (identified for the purposes of this mapping by the local Remote UE ID and an associated bearer ID) and egress Uu Relay RLC channels over the L2 U2N Relay UE Uu interface. For uplink relaying traffic, the different end-to-end Uu Radio Bearers (SRBs or DRBs) of the same L2 U2N Remote UE and/or different L2 U2N Remote UEs can be multiplexed over the same egress Uu Relay RLC channel;\n-\tThe Uu SRAP sublayer supports L2 U2N Remote UE identification for the UL traffic. The identity information of L2 U2N Remote UE end-to-end Uu Radio Bearer and a local Remote UE ID are included in the Uu SRAP header at UL in order for gNB to correlate the received packets for the specific PDCP entity associated with the right end-to-end Uu Radio Bearer of the L2 U2N Remote UE;\n-\tThe PC5 SRAP sublayer at the L2 U2N Remote UE supports UL bearer mapping between L2 U2N Remote UE end-to-end Uu Radio Bearers and egress PC5 Relay RLC channels.\nFor L2 U2N Relay, for downlink:\n-\tThe Uu SRAP sublayer performs DL bearer mapping at gNB to map end-to-end Uu Radio Bearer (SRB, DRB) of L2 U2N Remote UE (identified for the purposes of this mapping by the local Remote UE ID and an associated bearer ID) into Uu Relay RLC channel. The Uu SRAP sublayer performs DL bearer mapping and data multiplexing between multiple end-to-end Radio Bearers (SRBs or DRBs) of a L2 U2N Remote UE and/or different L2 U2N Remote UEs and one Uu Relay RLC channel over the L2 U2N Relay UE Uu interface;\n-\tThe Uu SRAP sublayer supports L2 U2N Remote UE identification for DL traffic. The identity information of L2 U2N Remote UE end-to-end Uu Radio Bearer and a local Remote UE ID are included into the Uu SRAP header by the gNB at DL for the L2 U2N Relay UE to identify the corresponding end-to-end Uu Radio Bearer(s) of L2 U2N Remote UE;\n-\tThe PC5 SRAP sublayer at the L2 U2N Relay UE performs DL bearer mapping between end-to-end Uu Radio Bearers of L2 U2N remote UE and egress PC5 Relay RLC channels;\n-\tThe PC5 SRAP sublayer at the L2 U2N Remote UE correlates the received packets with the right PDCP entity associated with the given end-to-end Uu Radio Bearer of the L2 U2N Remote UE based on the identity information included in the PC5 SRAP header.\nA local Remote UE ID is included in both PC5 SRAP header and Uu SRAP header. L2 U2N Relay UE is configured by the gNB with the local Remote UE ID(s) to be used in SRAP header. L2 U2N Remote UE obtains the local Remote ID from the gNB via Uu RRC messages including RRCSetup, RRCReconfiguration, RRCResume and RRCReestablishment.\nThe end-to-end DRB(s) or end-to-end SRB(s), except SRB0, of L2 U2N Remote UE can be multiplexed to the PC5 Relay RLC channels and Uu Relay RLC channels in both PC5 hop and Uu hop, but an end-to-end DRB and an end-to-end SRB can neither be mapped into the same PC5 Relay RLC channel nor be mapped into the same Uu Relay RLC channel.\nIt is the gNB responsibility to avoid collision on the usage of local Remote UE ID. The gNB can update the local Remote UE ID by sending the updated local Remote UE ID via RRCReconfiguration message. The serving gNB can perform local Remote UE ID update independent of the PC5 unicast link L2 ID update procedure.\nThe protocol stacks for the user plane and the control plane of the L2 U2U Relay architecture are illustrated in Figure 16.12.2.2-1 and Figure 16.12.2.2-2. The SRAP sublayer is placed above the RLC sublayer for both CP and UP at both PC5 interfaces. The sidelink SDAP, PDCP and RRC are terminated between two L2 U2U Remote UEs (i.e., end-to-end), while SRAP, RLC, MAC and PHY are terminated in each hop of PC5 link.\nFigure 1 illustrates the user plane protocol stack for L2 UE-to-UE Relay, showcasing the various layers involved in the communication process. The figure depicts the network architecture, starting from the physical layer, moving up through the data link layer, and finally reaching the application layer. Key components include the User Equipment (UE), the Relay Node, and the Base Station (BS). The figure emphasizes the role of the User Plane Protocol (UPP) in facilitating secure and efficient communication between UEs, with a focus on the L2 UE-to-UE Relay. The visual representation provides a clear understanding of the complex interactions and protocols that underpin modern telecommunications networks.\nFigure 16.12.2.2-1: User plane protocol stack for L2 UE-to-UE Relay\nFigure 1 illustrates the control plane protocol stack for L2 UE-to-UE Relay, showcasing the various layers involved in the communication process. The figure depicts the different protocols and their interactions, including the use of Relay Node (RN) and the control messages exchanged between the UE and the RN. The visual representation emphasizes the importance of each layer in ensuring efficient and reliable data transmission between end devices.\nFigure 16.12.2.2-2: Control plane protocol stack for L2 UE-to-UE Relay\nFor L2 UE-to-UE Relay, the SRAP sublayer at L2 U2U Remote UE:\n-\tThe SRAP sublayer at L2 U2U Remote UE performs bearer mapping between end-to-end PC5 Radio Bearers (SL-SRBs or SL-DRBs) of the L2 U2U Remote UE and at each hop of PC5 Relay RLC Channel between the L2 U2U Remote UE and the L2 U2U Relay UE.\n-\tFor the traffic transmitted from an L2 U2U Remote UE to an L2 U2U Relay UE, the different end-to-end PC5 Radio Bearers (SL-SRBs or SL-DRBs) towards the same peer L2 U2U Remote UE and/or different peer L2 U2U Remote UEs can be multiplexed to the same PC5 Relay RLC channel, which is between the L2 U2U Remote UE(s) and the L2 U2U Relay UE.\n-\tFor the traffic received at L2 U2U Remote UE, the same PC5 Relay RLC channel from one L2 U2U Relay UE can be de-multiplexed to the different end-to-end PC5 Radio Bearers (SL-SRBs or SL-DRBs) of the same peer L2 U2U Remote UE and/or different peer L2 U2U Remote UEs.\n-\tThe SRAP sublayer at L2 U2U Remote UE supports identification of the peer L2 U2U Remote UE and itself. The local IDs are assigned by L2 U2U Relay UE to both L2 U2U Remote UEs for identification. For the two local IDs, one of them identifies L2 U2U Remote UE and the other identifies the peer L2 U2U Remote UE. The local ID of the peer L2 U2U Remote UE and the local ID of L2 U2U Remote UE are delivered by L2 U2U Relay UE to the L2 U2U Remote UEs along with the corresponding L2 ID of the peer L2 U2U Remote UE. The identity information of the end-to-end PC5 Radio Bearer and two local IDs are included in the SRAP header in order for the peer L2 U2U Remote UE to correlate the received packets for the specific PDCP entity associated with the right end-to-end PC5 Radio Bearer of the L2 U2U Remote UEs.\nFor L2 UE-to-UE Relay, the SRAP sublayer at L2 U2U Relay UE:\n-\tThe SRAP sublayer at L2 U2U Relay UE determines the egress PC5 Relay RLC Channel based on the mapping of the end-to-end PC5 Radio Bearer and egress PC5 Relay RLC Channel for a particular pair between the L2 U2U Remote UE and the peer L2 U2U Remote UE.\n-\tFor the ingress traffic received from an/multiple L2 U2U Remote UE(s) at L2 U2U Relay UE, the different end-to-end PC5 Radio Bearers (SL-SRBs or SL-DRBs) of the same L2 U2U Remote UE and/or the same/different end-to-end PC5 Radio Bearers (SL-SRBs or SL-DRBs) of L2 U2U Remote UEs can be multiplexed to the same egress PC5 Relay RLC channel, which is in between the L2 U2U Relay UE and the peer L2 U2U Remote UE.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "16.12.3\tRelay Discovery",
                            "text_content": "Model A and Model B discovery models as defined in TS 23.304 [48] are supported for U2N/U2U Relay discovery. The protocol stack used for discovery is illustrated in Figure 16.12.3-1.\nFigure 16.12.3-1 illustrates the protocol stack of a discovery message for user equipment (UE) to network or UE-to-UE relay, showcasing the various layers involved in the communication process. The figure depicts the different components, including the physical layer, data link layer, network layer, transport layer, and application layer, as well as the role of the home agent (HA) and home location register (HLR) in managing the communication. The visual representation emphasizes the complexity and organization required for efficient and secure communication within a network.\nFigure 16.12.3-1: Protocol Stack of Discovery Message for UE-to-Network/UE-to-UE Relay\nThe U2N Remote UE can perform Relay discovery message (i.e., as specified in TS 23.304 [48]) transmission and may monitor the sidelink for Relay discovery message while in RRC_IDLE, RRC_INACTIVE or RRC_CONNECTED. The network may broadcast or configure via dedicated RRC signalling a Uu RSRP threshold, which is used by the U2N Remote UE to determine if it can transmit Relay discovery messages to U2N Relay UE(s).\nThe U2N Relay UE can perform Relay discovery message (i.e., as specified in TS 23.304 [48]) transmission and may monitor the sidelink for Relay discovery message while in RRC_IDLE, RRC_INACTIVE or RRC_CONNECTED. The network may broadcast or configure via dedicated RRC signalling a maximum Uu RSRP threshold, a minimum Uu RSRP threshold, or both, which are used by the U2N Relay UE to determine if it can transmit Relay discovery messages to U2N Remote UE(s).\nThe U2U Remote UE and U2U Relay UE can perform Relay discovery message transmission or DCR message with integrated discovery transmission and may monitor for Relay discovery message or DCR message with integrated discovery while in coverage (i.e. RRC_IDLE, RRC_INACTIVE, or RRC_CONNECTED) or out-of-coverage.\nThe network may provide the Relay discovery configuration using broadcast or dedicated signalling. In addition, the U2N/U2U Remote UE and L3 U2N/U2U Relay UE may use pre-configuration for Relay discovery.\nThe resource pool(s) used for NR sidelink communication can be used for Relay discovery or the network may configure resource pool(s) dedicated for Relay discovery. Resource pool(s) dedicated for Relay discovery can be configured simultaneously with resource pool(s) for NR sidelink communication in system information, dedicated signalling and/or pre-configuration. Whether dedicated resource pool(s) for Relay discovery are configured is based on network implementation. If resource pool(s) dedicated for Relay discovery are configured, only those resource pool(s) dedicated for Relay discovery shall be used for Relay discovery. If only resource pool(s) for NR sidelink communication are configured, all the configured resource pool(s) can be used for Relay discovery and NR sidelink communication. Only communication resource pool is used for the DCR/DCA message with integrated discovery.\nFor U2N Remote UE (including both in-coverage and out of coverage cases) that has been connected to the network via a U2N Relay UE, only resource allocation mode 2 is used for Relay discovery message transmission.\nFor in-coverage U2N Relay UE, and for both in-coverage and out of coverage U2N Remote UEs, NR sidelink resource allocation principles are applied for Relay discovery message transmission.\nFor U2U Remote UE and U2U Relay UE, NR sidelink resource allocation principles, both mode 1 and mode 2, can be applied for Relay discovery message transmission.\nThe sidelink power control for the transmission of Relay discovery messages is same as for NR sidelink communication.\nNo ciphering or integrity protection in PDCP layer is applied for the Relay discovery messages.\nThe U2N/U2U Remote UE and U2N/U2U Relay UE can determine from SIB12 whether the gNB supports Relay discovery, or Non-Relay discovery, or both.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "16.12.4\tRelay Selection/Reselection",
                            "text_content": "The U2N Remote UE performs radio measurements at PC5 interface and uses them for U2N Relay selection and reselection along with higher layer criteria, as specified in TS 23.304 [48]. When there is no unicast PC5 connection between the U2N Relay UE and the U2N Remote UE, the U2N Remote UE uses SD-RSRP measurements to evaluate whether PC5 link quality towards a U2N Relay UE satisfies relay selection criterion.\nFor relay reselection, U2N Remote UE uses SL-RSRP measurements towards the serving U2N Relay UE for relay reselection trigger evaluation when there is data transmission from U2N Relay UE to U2N Remote UE, and it is left to UE implementation whether to use SL-RSRP or SD-RSRP for relay reselection trigger evaluation in case of no data transmission from U2N Relay UE to U2N Remote UE.\nA U2N Relay UE is considered suitable by a U2N Remote UE in terms of radio criteria if the PC5 link quality measured by U2N Remote UE towards the U2N Relay UE exceeds configured threshold (pre-configured or provided by gNB). The U2N Remote UE searches for suitable U2N Relay UE candidates that meet all AS layer and higher layer criteria (see TS 23.304 [48]). If there are multiple such suitable U2N Relay UEs, it is up to U2N Remote UE implementation to choose one U2N Relay UE among them. For L2 U2N Relay (re)selection, the PLMN ID and cell ID can be used as additional AS criteria.\nThe U2N Remote UE triggers U2N Relay selection in following cases:\n-\tDirect Uu signal strength of current serving cell of the U2N Remote UE is below a configured signal strength threshold;\n-\tIndicated by upper layer of the U2N Remote UE.\nThe U2N Remote UE may trigger U2N Relay reselection in following cases:\n-\tPC5 signal strength of current U2N Relay UE is below a (pre)configured signal strength threshold;\n-\tCell reselection, handover, Uu RLF, or Uu RRC connection establishment/resume failure has been indicated by U2N Relay UE via PC5-RRC signalling;\n-\tWhen U2N Remote UE receives a PC5-S link release message from U2N Relay UE;\n-\tWhen U2N Remote UE detects PC5 RLF;\n-\tIndicated by upper layer.\nFor L2 U2N Remote UEs in RRC_IDLE or RRC_INACTIVE and L3 U2N Remote UEs, the cell (re)selection procedure and relay (re)selection procedure run independently. If both suitable cells and suitable U2N Relay UEs are available, it is up to the U2N Remote UE implementation to select either a cell or a U2N Relay UE. A L3 U2N Remote UE may select a cell and a L3 U2N Relay UE simultaneously and this is up to implementation of L3 U2N Remote UE.\nFor both L2 and L3 U2N Relay UEs in RRC_IDLE or RRC_INACTIVE, the PC5-RRC message(s) are used to inform their connected U2N Remote UE(s) when U2N Relay UEs select a new cell. The PC5-RRC message(s) are also used to inform their connected L2 or L3 U2N Remote UE(s) when L2 or L3 U2N Relay UE performs handover, detects Uu RLF, or its Uu RRC connection establishment/resume fails. Upon reception of the PC5 RRC message for notification, it is up to U2N Remote UE implementation whether to release or keep the unicast PC5 link. If U2N Remote UE decides to release the unicast PC5 link, it triggers the PC5 release procedure and may perform cell or relay reselection.\nThe U2U Remote UE performs radio measurements (i.e., SD-RSRP and/or SL-RSRP) at PC5 interface and uses them for U2U Relay selection and reselection along with higher layer criteria, as specified in TS 23.304 [48].\nFor relay selection, U2U Remote UE uses SL-RSRP measurements towards the peer U2U Remote UE for relay selection trigger evaluation when valid SL-RSRP measurements are available. For relay reselection, U2U Remote UE uses SL-RSRP measurement towards the U2U Relay UE for relay reselection trigger evaluation when there is data transmission from U2U Relay UE to U2U Remote UE. It is left to U2U Remote UE implementation whether to use SL-RSRP or SD-RSRP for relay selection or reselection trigger evaluation in case of no data transmission. The thresholds for SD-RSRP and SL-RSRP can be configured separately for the trigger evaluation of U2U relay selection or reselection. The same threshold value(s) are applied for all the discovery models including DCR with integrated discovery. The same threshold value(s) are applied for relay selection and relay reselection.\nThe U2U Remote UE may trigger U2U Relay selection in the following cases:\n-\tWhen the SL-RSRP or SD-RSRP between U2U Remote UEs is below a (pre)configured signal strength threshold;\n-\tWhen U2U Remote UE receives an indication to trigger U2U relay selection from the upper layer of the UE.\nThe U2U Remote UE may trigger U2U Relay reselection in the following cases:\n-\tWhen the SL-RSRP or SD-RSRP of the current U2U Relay UE is below a (pre)configured signal strength threshold;\n-\tWhen U2U Remote UE receives an indication from the upper layer due to detecting PC5 RLF;\n-\tWhen L2 U2U Remote UE receives an indication from the upper layer due to receiving the PC5 RLF indication from the L2 U2U Relay UE;\n-\tWhen U2U Remote UE receives a PC5-S link release message from U2U Relay UE;\n-\tWhen U2U Remote UE receives an indication to trigger U2U relay reselection from the upper layer of the UE.\nFor the discovery model A, the U2U Relay UE should announce via discovery announcement message only the neighbour U2U Remote UE(s) for which the SD-RSRP/SL-RSRP between the U2U Relay and the neighbour U2U Remote UE(s) is above a configured threshold. Upon discovery message reception, U2U Remote UE considers a U2U Relay UE as a candidate U2U Relay UE if the SD-RSRP towards the U2U Relay UE is above a configured threshold and the upper layer criteria are met.\nFor the discovery model B, when the U2U Relay UE receives the discovery solicitation message from U2U Remote UE, the U2U Relay UE forwards the discovery solicitation message only if the SD-RSRP between the U2U Relay UE and the U2U Remote UE is above a threshold. After the peer U2U remote UE receives a discovery solicitation message from the U2U Relay UE, the peer U2U Remote UE transmits the discovery response message only if the SD-RSRP between the peer U2U Remote UE and the U2U Relay UE is above a configured threshold. Upon discovery response message reception forwarded by the U2U Relay UE, the U2U Remote UE considers a U2U Relay UE as a candidate U2U Relay UE if the SD-RSRP towards the U2U Relay UE is above a configured threshold and the upper layer criteria are met.\nFor the DCR message with integrated discovery, when the U2U Relay UE receives the DCR message with integrated discovery from U2U Remote UE, the U2U Relay UE forwards the DCR message with integrated discovery only if the SL-RSRP between the U2U Relay UE and the U2U Remote UE is above a threshold. Upon receiving DCR message with integrated discovery from one or multiple U2U Relay UEs, the peer U2U Remote UE should consider candidate U2U Relay UEs towards which the SL-RSRP is above a configured SD-RSRP threshold (not the SL-RSRP, as broadcast is used) to respond and that satisfy upper-layer criteria, and select a U2U Relay UE among them.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "16.12.5\tControl plane procedures for L2 U2N Relay",
                            "text_content": "The L2 U2N Remote UE needs to establish its own PDU sessions/DRBs with the network before user plane data transmission.\nThe NR sidelink PC5 unicast link establishment procedures can be used to setup a secure unicast link between L2 U2N Remote UE and L2 U2N Relay UE before L2 U2N Remote UE establishes a Uu RRC connection with the network via L2 U2N Relay UE.\nThe establishment of Uu SRB1/SRB2 and DRB of the L2 U2N Remote UE is subject to Uu configuration procedures for L2 UE-to-Network Relay.\nThe following high level connection establishment procedure in Figure 16.12.5.1-1 applies to a L2 U2N Relay and L2 U2N Remote UE:\nFigure 16.12.5.1-1 illustrates the procedure for establishing a Remote User Equipment (UE) connection at Layer 2 (L2) using Universal Mobile Telecommunications System (UMTS) User Equipment to Network (U2N) Remote. The figure depicts the process of a UE connecting to the network through a Gateway G (GwG) and a Serving Gateway (SGW). The UE sends a registration request to the Serving Gateway, which then forwards the request to the Home Location Register (HLR) for authentication and authorization. Once authenticated, the HLR sends a registration request to the Serving Gateway, which in turn sends a registration request to the Home Location Register. The Home Location Register then sends a registration request to the Serving Gateway, which sends a registration request to the Home Location Register. The Home Location Register then sends a registration request to the Serving Gateway, which sends a registration request to the Home Location Register. The Home Location Register then sends a registration request to the Serving Gateway, which sends a registration request to the Home Location Register. The Home Location Register then sends a registration request to the Serving Gateway, which sends a registration request to the Home Location Register. The Home Location Register then sends a registration request to the Serving Gateway,\nFigure 16.12.5.1-1: Procedure for L2 U2N Remote UE connection establishment\n1.\tThe L2 U2N Remote and L2 U2N Relay UE perform discovery procedure, and establish a PC5-RRC connection using the NR sidelink PC5 unicast link establishment procedure.\n2.\tThe L2 U2N Remote UE sends the first RRC message (i.e., RRCSetupRequest) for its connection establishment with gNB via the L2 U2N Relay UE, using a specified PC5 Relay RLC channel configuration. The L2 U2N Relay UE sends the SidelinkUEInformationNR message to request for the dedicated configurations required to support the relay operation for the L2 U2N Remote UE. If the L2 U2N Relay UE is not in RRC_CONNECTED, it needs to do its own Uu RRC connection establishment upon reception of a message on the specified PC5 Relay RLC channel. After L2 U2N Relay UE's RRC connection establishment procedure and sending the SidelinkUEInformationNR message, gNB configures SRB0 relaying Uu Relay RLC channel to the U2N Relay UE. The gNB responds with an RRCSetup message to L2 U2N Remote UE. The RRCSetup message is sent to the L2 U2N Remote UE using SRB0 relaying Uu Relay RLC channel over Uu and a specified PC5 Relay RLC channel over PC5.\nNOTE 1:\tVoid.\n3.\tThe gNB and L2 U2N Relay UE perform relaying channel setup procedure over Uu. According to the configuration from gNB, the L2 U2N Relay/Remote UE establishes a PC5 Relay RLC channel for relaying of SRB1 towards the L2 U2N Remote/Relay UE over PC5.\n4.\tThe RRCSetupComplete message is sent by the L2 U2N Remote UE to the gNB via the L2 U2N Relay UE using SRB1 relaying channel over PC5 and SRB1 relaying channel configured to the L2 U2N Relay UE over Uu. Then the L2 U2N Remote UE is as in RRC_CONNECTED with the gNB.\n5.\tThe L2 U2N Remote UE and gNB establish security following the Uu security mode procedure and the security messages are forwarded through the L2 U2N Relay UE.\n6.\tThe gNB sends an RRCReconfiguration message to the L2 U2N Remote UE via the L2 U2N Relay UE, to setup the end-to-end SRB2/DRBs of the L2 U2N Remote UE. The L2 U2N Remote UE sends an RRCReconfigurationComplete message to the gNB via the L2 U2N Relay UE as a response. In addition, the gNB may configure additional Uu Relay RLC channels between the gNB and L2 U2N Relay UE, and PC5 Relay RLC channels between L2 U2N Relay UE and L2 U2N Remote UE for the relaying traffic.\nThe L2 U2N Remote UE in RRC_CONNECTED suspends Uu RLM (as described in clause 9.2.7) when connected to the gNB via a L2 U2N Relay UE.\nThe L2 U2N Relay UE declares Uu Radio Link Failure (RLF) following the same criteria as described in clause 9.2.7.\nAfter Uu RLF is declared, the L2 U2N Relay UE takes the following action on top of the actions described in clause 9.2.7:\n-\ta PC5-RRC message can be used for sending an indication to its connected L2 U2N Remote UE(s), which may trigger RRC connection re-establishment for L2 U2N Remote UE; or\n-\tindicating to upper layer to trigger PC5 unicast link release.\nUpon detecting PC5 RLF, the L2 U2N Remote UE may trigger RRC connection re-establishment.\nThe L2 U2N Remote UE may perform the following actions during the RRC connection re-establishment procedure:\n-\tIf only suitable cell(s) are available, the L2 U2N Remote UE initiates RRC re-establishment procedure towards a suitable cell;\n-\tIf only suitable L2 U2N Relay UE(s) are available, the L2 U2N Remote UE initiates RRC re-establishment procedure towards a suitable relay UE's serving cell via selected suitable L2 U2N Relay;\n-\tIf both a suitable cell and a suitable relay are available, the L2 U2N Remote UE can select either one to initiate RRC re-establishment procedure based on implementation.\nThe RRC connection resume procedure described in clause 9.2.2 is applied to L2 U2N Remote UE.\nThe in-coverage L2 U2N Remote UE is allowed to acquire any necessary SIB(s) over Uu interface irrespective of its PC5 connection to L2 U2N Relay UE. The L2 U2N Remote UE can also receive the system information from the L2 U2N Relay UE after PC5 connection establishment with L2 U2N Relay UE.\nThe L2 U2N Remote UE in RRC_CONNECTED can use the on-demand SIB framework as specified in TS 38.331 [12] to request the SIB(s) via L2 U2N Relay UE. The L2 U2N Remote UE in RRC_IDLE or RRC_INACTIVE can inform L2 U2N Relay UE of its requested SIB type(s) via PC5-RRC message. Then, L2 U2N Relay UE triggers on-demand SI/SIB acquisition procedure as specified in TS 38.331 [12] according to its own RRC state (if needed) and sends the acquired SI(s)/SIB(s) to L2 U2N Remote UE via PC5-RRC message.\nAny SIB that the RRC_IDLE or RRC_INACTIVE L2 U2N Remote UE has a requirement to use (e.g., for relay purpose) can be requested by the L2 U2N Remote UE (from the L2 U2N Relay UE or the network). For SIBs that have been requested by the L2 U2N Remote UE from the L2 U2N Relay UE, the L2 U2N Relay UE forwards them again in case of any update for requested SIB(s). In case of RRC_CONNECTED L2 U2N Remote UE(s), it is the responsibility of the network to send updated SIB(s) to L2 U2N Remote UE(s) when they are updated. The L2 U2N Remote UE de-configures SI request with L2 U2N Relay UE when entering into RRC_CONNECTED state.\nFor SIB1 forwarding, for L2 U2N Remote UE, both request-based delivery (i.e., SIB1 request by the U2N Remote UE) and unsolicited forwarding are supported by L2 U2N Relay UE, of which the usage is left to L2 U2N Relay UE implementation. If SIB1 changes, for L2 U2N Remote UE in RRC_IDLE or RRC_INACTIVE, the L2 U2N Relay UE always forwards SIB1.\nFor the L2 U2N Remote UE in RRC_IDLE or RRC_INACTIVE, the short message over Uu interface is not forwarded by the L2 U2N Relay UE to the L2 U2N Remote UE. The L2 U2N Relay UE can forward PWS SIBs to its connected L2 U2N Remote UE(s).\nRAN sharing is supported for L2 U2N Relay UE. In particular, the L2 U2N Relay UE may forward, via discovery message, cell access related information before the establishment of a PC5-RRC connection.\nWhen both L2 U2N Relay UE and L2 U2N Remote UE are in RRC IDLE or RRC INACTIVE, the L2 U2N Relay UE monitors paging occasions of its connected L2 U2N Remote UE(s). When a L2 U2N Relay UE needs to monitor paging for a L2 U2N Remote UE, the L2 U2N Relay UE should monitor all POs of the L2 U2N Remote UE.\nWhen L2 U2N Relay UE is in RRC_CONNECTED and L2 U2N Remote UE(s) is in RRC_IDLE or RRC_INACTIVE, there are two options for paging delivery:\n-\tThe L2 U2N Relay UE monitors POs of its connected L2 U2N Remote UE(s) if the active DL BWP of the L2 U2N Relay UE is configured with common search space including paging search space;\n-\tThe delivery of the L2 U2N Remote UE's paging can be performed through a dedicated RRC message from the gNB to the L2 U2N Relay UE. The dedicated RRC message for delivering L2 U2N Remote UE paging to the RRC_CONNECTED L2 U2N Relay UE may contain one or more Remote UE IDs (5G-S-TMSI or I-RNTI).\nIt is up to network implementation to decide which of the above two options to use. The L2 U2N Relay UE in RRC_CONNECTED, if configured with paging search space, can determine whether to monitor POs for a L2 U2N Remote UE based on the indication within the PC5-RRC signalling received from the L2 U2N Remote UE.\nThe L2 U2N Remote UE in RRC_IDLE provides 5G-S-TMSI and UE specific DRX cycle (if configured by upper layer) to the L2 U2N Relay UE for requesting to perform PO monitoring. The L2 U2N Remote UE in RRC_INACTIVE provides the minimum value of two UE specific DRX cycles (if configured respectively by upper layer and NG-RAN), 5G-S-TMSI and I-RNTI to the L2 U2N Relay UE for PO monitoring. The L2 U2N Relay UE in RRC_CONNECTED can notify the L2 U2N Remote UE information (i.e. 5G-S-TMSI/I-RNTI) to the gNB via the SidelinkUEInformationNR message for paging delivery purpose. The L2 U2N Relay UE receives paging messages to check the 5G-S-TMSI/I-RNTI and sends relevant paging record to the L2 U2N Remote UE accordingly.\nThe L2 U2N Relay UE uses unicast signalling to send paging to the L2 U2N Remote UE via PC5.\nThe L2 U2N Remote UE performs unified access control as defined in TS 38.331 [12]. The L2 U2N Relay UE does not perform UAC for L2 U2N Remote UE's data.\nThe L2 U2N Remote UE performs Mobility Registration Update/RNAU based on the L2 U2N Relay UE's serving cell when it is connected with the L2 U2N Relay UE. A L2 U2N Remote UE in RRC_IDLE or RRC_INACTIVE initiates Mobility Registration Update/RNAU procedure if the serving cell changes (due to cell change by the L2 U2N Relay UE) and the new serving cell is outside of the L2 U2N Remote UE's configured RNA/TA.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "16.12.6\tService Continuity for L2 U2N relay",
                            "text_content": "The service continuity procedure is applicable only for the mobility cases of path switch from indirect to direct path, and from direct to indirect path when the L2 U2N Remote UE and L2 U2N Relay UE belong to the same gNB or different gNB. This procedure is also applicable for the mobility cases of path switch from indirect to indirect path when the two L2 U2N Relay UEs belong to the same gNB or different gNBs. For inter-gNB path switching, the source gNB decides to trigger path switching and the path switch type, i.e. direct or indirect path.\nFor service continuity of L2 U2N Relay, the following procedure is used, in case of L2 U2N Remote UE switching from indirect to direct path under the same gNB:\nFigure 16.12.6.1-1 illustrates the procedure for a Layer 2 User Equipment (UE) to switch from an indirect to a direct path within a gNB (Gateway Node Base). The figure depicts the process of UE-to-UE communication, highlighting the role of the gNB in managing the path selection and ensuring seamless connectivity. The figure shows the UE, gNB, and the underlying network infrastructure, emphasizing the importance of efficient path management in maintaining high-quality communication and reducing latency.\nFigure 16.12.6.1-1: Procedure for L2 U2N Remote UE intra-gNB switching from indirect to direct path\n1.\tThe Uu measurement configuration and measurement report signalling procedures are performed to evaluate both relay link measurement and Uu link measurement. The measurement results from L2 U2N Remote UE are reported when configured measurement reporting criteria are met. The sidelink relay measurement report shall include at least L2 U2N Relay UE's source L2 ID, serving cell ID (i.e., NCGI/NCI), and sidelink measurement quantity result. The sidelink measurement quantity can be SL-RSRP of the serving L2 U2N Relay UE, and if SL-RSRP is not available, SD-RSRP is used.\n2.\tThe gNB decides to switch the L2 U2N Remote UE onto direct Uu path.\n3.\tThe gNB sends the RRCReconfiguration message to the L2 U2N Remote UE. The L2 U2N Remote UE stops User Plane and Control Plane transmission via the L2 U2N Relay UE after reception of the RRCReconfiguration message with the path switch configuration.\n4.\tThe L2 U2N Remote UE synchronizes with the gNB and performs Random Access.\n5.\tThe UE (i.e., L2 U2N Remote UE in previous steps) sends the RRCReconfigurationComplete message to the gNB via the direct path, using the configuration provided in the RRCReconfiguration message. From this step, the UE (i.e., L2 U2N Remote UE in previous steps) uses the RRC connection via the direct path to the gNB.\n6.\tThe gNB sends the RRCReconfiguration message to the L2 U2N Relay UE to reconfigure the connection between the L2 U2N Relay UE and the gNB. The RRCReconfiguration message to the L2 U2N Relay UE can be sent any time after step 3 based on gNB implementation (e.g., to release Uu Relay RLC Channel and PC5 Relay RLC channel configuration for relaying, and bearer mapping configuration related to the L2 U2N Remote UE).\n7.\tEither L2 U2N Relay UE or L2 U2N Remote UE's AS layer indicates upper layers to release PC5 unicast link after receiving the RRCReconfiguration message from the gNB. The timing to execute link release is up to UE implementation.\n8.\tThe data path is switched from indirect path to direct path between the UE (i.e., previous L2 U2N Remote UE) and the gNB. The PDCP re-establishment or PDCP data recovery in uplink is performed by the UE (i.e., previous L2 U2N Remote UE) for lossless delivery during path switch if gNB configures it.\nNOTE 1:\tStep 8 can be executed any time after step 4. Step 8 is independent of step 6 and step 7.\nFor service continuity of L2 U2N Relay, the following procedure is used, in case of L2 U2N Remote UE switching from indirect to direct path under another gNB:\nFigure 16.12.6.1-2 illustrates the procedure for a Layer 2 User Equipment (UE) to switch from an indirect to a direct path between two gNBs in a network. The figure depicts the process of UE registration, path selection, and handover management between the two gNBs. The key components include the gNBs, the UE, and the core network elements that facilitate the path switching. The figure highlights the importance of efficient path switching for seamless connectivity and improved network performance.\nFigure 16.12.6.1-2: Procedure for L2 U2N Remote UE inter-gNB switching from indirect to direct path\n1.\tThe Uu measurement configuration is configured by the source gNB, and measurement report signalling procedures are performed by the L2 U2N Remote UE to evaluate both relay link measurement and Uu link measurement. The measurement results from L2 U2N Remote UE are reported when configured measurement reporting criteria are met. The sidelink relay measurement report shall include at least L2 U2N Relay UE's source L2 ID, serving cell ID (i.e., NCGI/NCI), and sidelink measurement quantity result. The sidelink measurement quantity can be SL-RSRP of the serving L2 U2N Relay UE, and if SL-RSRP is not available, SD-RSRP is used.\n2.\tThe source gNB decides to trigger path switch for the L2 U2N Remote UE, onto direct path.\n3.\tThe source gNB sends the HANDOVER REQUEST message to the target gNB with necessary information to prepare the handover at the target side.\nNOTE 2:\tIn order to support the DL lossless handover for the L2 U2N Remote UE, the source gNB may not discard the DL data even though the delivery of the data has been acknowledged by the L2 U2N Relay UE based on the gNB implementation. Then, the source gNB forwards the buffered DL data to the target gNB during the data forwarding procedure.\n4.\tAdmission Control may be performed by the target gNB.\n5.\tThe target gNB sends the HANDOVER REQUEST ACKNOWLEDGE message to the source gNB, which contains new RRC configuration for the L2 U2N Remote UE.\n6.\tThe source gNB triggers the path switch by sending an RRCReconfiguration message to the L2 U2N Remote UE, containing at least cell ID and the information required to access the target cell. The L2 U2N Remote UE stops User Plane and Control Plane transmission via the L2 U2N Relay UE after reception of the RRCReconfiguration message.\n7.\tThe source gNB sends the SN STATUS TRANSFER message to the target gNB to convey the uplink PDCP SN receiver status and the downlink PDCP SN transmitter status of the L2 U2N Remote UE's DRBs for which PDCP status preservation applies (i.e. for RLC AM).\n8.\tThe L2 U2N Remote UE synchronizes with the target gNB and performs Random Access.\n9.\tThe L2 U2N Remote UE sends RRCReconfigurationComplete message to target gNB via the direct path.\n10.\tThe target gNB sends the UE CONTEXT RELEASE message to inform the source gNB about the success of the path switch.\n11.\tThe source gNB sends RRCReconfiguration message to the L2 U2N Relay UE to reconfigure the connection between the L2 U2N Relay UE and the source gNB. The RRCReconfiguration message to the L2 U2N Relay UE can be sent any time after step 6 based on source gNB implementation (e.g., to release Uu Relay RLC channel and PC5 Relay RLC channel configuration for relaying, and bearer mapping configuration related to the L2 U2N Remote UE).\n12.\tEither L2 U2N Relay UE or L2 U2N Remote UE's AS layer indicates upper layer to release PC5 unicast link after receiving the RRCReconfiguration message from the source gNB. The timing to execute link release is up to UE implementation.\nThe gNB can select a L2 U2N Relay UE in any RRC state i.e., RRC_IDLE, RRC_INACTIVE, or RRC_CONNECTED, as a target L2 U2N Relay UE for direct to indirect path switch.\nFor service continuity of L2 U2N Remote UE, the following procedure is used, in case of the L2 U2N Remote UE switching from direct to indirect path under the same gNB via a L2 U2N Relay UE in RRC_CONNECTED:\nFigure 16.12.6.2-1 illustrates the procedure for a Layer 2 User-to-Network (U2N) Remote User Equipment (UE) switching from a direct path to an indirect path via a Layer 2 User-to-Network Relay UE in the Radio Resource Control (RRC) CONNECTED state. The figure depicts the gNB (Gateway Node Baseband), U2N Relay UE, and the indirect path, which is represented by the dashed line. The process involves the RRC (Radio Resource Control) protocol, which ensures seamless handover and optimal resource allocation for the UE. The figure highlights the importance of efficient switching mechanisms in maintaining connectivity and quality of service in mobile networks.\nFigure 16.12.6.2-1: Procedure for L2 U2N Remote UE intra-gNB switching from direct to indirect path via a L2 U2N Relay UE in RRC_CONNECTED\n1.\tThe L2 U2N Remote UE reports one or multiple candidate L2 U2N Relay UE(s) and Uu measurements, after it measures/discovers the candidate L2 U2N Relay UE(s):\n-\tThe L2 U2N Remote UE filters the appropriate L2 U2N Relay UE(s) according to relay selection criteria before reporting. The L2 U2N Remote UE shall report only the L2 U2N Relay UE candidate(s) that fulfil the higher layer criteria;\n-\tThe reporting includes at least a L2 U2N Relay UE ID, a L2 U2N Relay UE' s serving cell ID, and a sidelink measurement quantity information. SD-RSRP is used as sidelink measurement quantity.\n2.\tThe gNB decides to switch the L2 U2N Remote UE to a target L2 U2N Relay UE. Then the gNB sends an RRCReconfiguration message to the target L2 U2N Relay UE, which includes at least the L2 U2N Remote UE's local ID and L2 ID, Uu Relay RLC channel and PC5 Relay RLC channel configuration for relaying, and bearer mapping configuration.\n3.\tThe gNB sends the RRCReconfiguration message to the L2 U2N Remote UE. The RRCReconfiguration message includes at least the L2 U2N Relay UE ID, Remote UE's local ID, PC5 Relay RLC channel configuration for relay traffic and the associated end-to-end Uu radio bearer(s). The L2 U2N Remote UE stops User Plane and Control Plane transmission over the direct path after reception of the RRCReconfiguration message from the gNB.\n4.\tThe L2 U2N Remote UE establishes PC5-RRC connection with target L2 U2N Relay UE.\n5.\tThe L2 U2N Remote UE completes the path switch procedure by sending the RRCReconfigurationComplete message to the gNB via the L2 U2N Relay UE.\n6.\tThe data path is switched from direct path to indirect path between the L2 U2N Remote UE and the gNB.\nIn case the selected L2 U2N Relay UE for direct to indirect path switch is in RRC_IDLE or RRC_INACTIVE, after receiving the path switch command, the L2 U2N Remote UE establishes a PC5 link with the L2 U2N Relay UE and sends the RRCReconfigurationComplete message via the L2 U2N Relay UE, which triggers the L2 U2N Relay UE to enter RRC_CONNECTED state. The procedure for L2 U2N Remote UE switching to indirect path in Figure 16.12.6.2-1 can be also applied for the case that the selected L2 U2N Relay UE for direct to indirect path switch is in RRC_IDLE or RRC_INACTIVE with the exception that the RRCReconfiguration message is sent from the gNB to the L2 U2N Relay UE after the L2 U2N Relay UE enters RRC_CONNECTED state, which happens during step 5.\nFor service continuity of L2 U2N Remote UE, the following procedure is used, in case of the L2 U2N Remote UE switching from direct to indirect path via a L2 U2N Relay UE in RRC_CONNECTED under another gNB:\nFigure 16.12.6.2-2 illustrates the procedure for a L2 U2N Remote UE to switch from a direct to an indirect path via a L2 U2N Relay UE in the RRC_CONNECTED phase. The figure depicts the interaction between the gNB, the L2 U2N Relay UE, and the Remote UE, highlighting the role of the L2 U2N Relay UE in facilitating the path switching. The figure also shows the signaling messages exchanged between the gNB and the Remote UE, emphasizing the importance of accurate signaling for successful path switching.\nFigure 16.12.6.2-2: Procedure for L2 U2N Remote UE inter-gNB switching from direct to indirect path via a L2 U2N Relay UE in RRC_CONNECTED\n1.\tThe L2 U2N Remote UE reports one or multiple candidate L2 U2N Relay UE(s) and Uu measurements to the source gNB, after it measures/discovers the candidate L2 U2N Relay UE(s):\n-\tThe L2 U2N Remote UE filters the appropriate L2 U2N Relay UE(s) according to relay selection criteria before reporting. The L2 U2N Remote UE shall report only the L2 U2N Relay UE candidate(s) that fulfil the higher layer criteria;\n-\tThe reporting includes at least a L2 U2N Relay UE ID, a L2 U2N Relay UE's serving cell ID, and a sidelink measurement quantity information. SD-RSRP is used as sidelink measurement quantity.\n2.\tThe source gNB decides to trigger path switch for the L2 U2N Remote UE onto indirect path of the target gNB, based on MeasurementReport and RRM information.\n3.\tThe source gNB sends a HANDOVER REQUEST message to the target gNB to prepare the path switch at the target side. The HANDOVER REQUEST message includes Remote UE L2 ID and a list of candidate target relay UE IDs belonging to one cell.\n4.\tAdmission Control may be performed by the target gNB.\n5.\tThe target gNB selects one target Relay UE from the list of candidate Relay UEs provided by the source gNB, and sends the RRCReconfiguration message to L2 U2N Relay UE for relaying configuration, which includes at least the L2 U2N Remote UE's local ID and L2 ID, Uu Relay RLC channel and PC5 Relay RLC channel configuration for relaying, and bearer mapping configuration.\n6.\tThe target gNB sends the HANDOVER REQUEST ACKNOWLEDGE message to the source gNB, which contains new RRC configuration for L2 U2N Remote UE.\n7.\tThe source gNB sends the RRCReconfiguration message to the L2 U2N Remote UE, which includes at least the L2 U2N Relay UE ID, Remote UE's local ID, PC5 Relay RLC channel configuration for relay traffic and the associated Uu end-to-end radio bearer(s). The L2 U2N Remote UE stops User Plane and Control Plane transmission over the direct path after reception of the RRCReconfiguration message from the source gNB.\n8.\tThe source gNB sends the SN STATUS TRANSFER message to the target gNB to convey the uplink PDCP SN receiver status and the downlink PDCP SN transmitter status of the L2 U2N Remote UE's DRBs for which PDCP status preservation applies (i.e. for RLC AM).\n9.\tThe L2 U2N Remote UE establishes PC5 connection with L2 U2N Relay UE.\n10.\tThe L2 U2N Remote UE sends the RRCReconfigurationComplete message to target gNB via the L2 U2N Relay UE.\n11.\tThe data path is switched from direct path to indirect path between the L2 U2N Remote UE and the target gNB via the target L2 U2N Relay UE.\n12.\tThe target gNB sends the UE CONTEXT RELEASE message to inform the source gNB about the success of the path switch.\nThe gNB can select an L2 U2N Relay UE in any RRC state i.e., RRC_IDLE, RRC_INACTIVE, or RRC_CONNECTED, as a target L2 U2N Relay UE for indirect to indirect path switch.\nFor service continuity of L2 U2N Remote UE, the following procedure is used, in case of the L2 U2N Remote UE switching from indirect path via L2 U2N Relay UE to indirect path via a target L2 U2N Relay UE in RRC_CONNECTED:\nFigure 16.12.6.3-1 illustrates the procedure for L2 U2N Remote UE intra-gNB switching from an indirect to an indirect path via a target L2 U2N Relay UE in RRC_CONNECTED. The figure depicts the network architecture, including the gNB, Relay UE, and the switching paths. The figure highlights the role of the Relay UE in facilitating the switch between indirect and indirect paths, ensuring seamless connectivity for the Remote UE. The RRC_CONNECTED state is indicated, emphasizing the importance of this phase in the overall procedure.\nFigure 16.12.6.3-1: Procedure for L2 U2N Remote UE intra-gNB switching from indirect to indirect path via a target L2 U2N Relay UE in RRC_CONNECTED\n1.\tThe L2 U2N Remote UE reports one or multiple candidate L2 U2N Relay UE(s) and the measurement result(s) between L2 U2N Remote UE and the candidate L2 U2N Relay UE(s). The detailed reporting components can be referred to the cases for switching from direct to indirect path (see clause 16.12.6.2). The L2 U2N Remote UE can provide information to the gNB according to the measurement configuration on which the gNB can decide indirect path switching.\n2.\tThe gNB decides to switch the L2 U2N Remote UE to a target L2 U2N Relay UE under the same gNB.\n3.\tThe gNB sends an RRCReconfiguration message to the target L2 U2N Relay UE, which includes at least the L2 U2N Remote UE's local ID and L2 ID, Uu and PC5 Relay RLC channel configuration for relaying, and bearer mapping configuration.\n4.\tThe gNB sends the RRCReconfiguration message to the L2 U2N Remote UE. The RRCReconfiguration message includes at least the target L2 U2N Relay UE ID, Remote UE's local ID, PC5 Relay RLC channel configuration for relay traffic, and the associated end-to-end radio bearer(s). The L2 U2N Remote UE stops UP and CP transmission over the indirect path via the Source L2 U2N Relay UE after the reception of the RRCReconfiguration message from the gNB.\n5.\tThe L2 U2N Remote UE establishes PC5-RRC connection with the target L2 U2N Relay UE.\n6.\tThe L2 U2N Remote UE completes the path switch procedure by sending the RRCReconfigurationComplete message to the gNB via the target L2 U2N Relay UE.\n7.\tThe gNB sends the RRCReconfiguration message to the Source L2 U2N Relay UE to reconfigure the connection between the Source L2 U2N Relay UE and the gNB. The RRCReconfiguration message to the Source L2 U2N Relay UE can be sent any time after step 4 based on gNB implementation (e.g., to release Uu and PC5 Relay RLC channel configuration for relaying, and bearer mapping configuration related to the L2 U2N Remote UE).\n8.\tEither Source L2 U2N Relay UE's AS layer or L2 U2N Remote UE's AS layer indicates upper layers to release PC5 unicast link after receiving the RRCReconfiguration message from the gNB. The timing to execute link release is up to UE implementation after step 4 or step7.\n9.\tThe data path is switched from the source relay UE to the target relay UE between the L2 U2N Remote UE and the gNB. This step can be any time after step 6.\nIn case that the selected L2 U2N Relay UE for indirect to indirect path switch is in RRC_IDLE or RRC_INACTIVE, the specific operation of the L2 U2N Remote UE and the selected L2 U2N Relay UE is the same as the case of direct to indirect path switch (see clause 16.12.6.2).\nFor service continuity of L2 U2N Remote UE between inter-gNBs, the following procedure is used, in case of the L2 U2N Remote UE, which is connected to indirect path, switching to another indirect path via a target L2 U2N Relay UE in RRC_CONNECTED under another gNB:\nFigure 16.12.6.3-2 illustrates the procedure for a Remote User Equipment (UE) switching from an indirect path to an indirect path via a Target L2 User-to-Network (U2N) Relay UE in the Radio Resource Control (RRC) CONNECTED state. The figure depicts the network architecture, including the gNB, U2N Relay UE, and the indirect path. The procedure involves the L2 U2N Relay UE, which is responsible for the inter-gNB switching, ensuring seamless connectivity and optimal resource allocation. The figure highlights the importance of efficient network management and the role of Relay UEs in maintaining high-quality communication links.\nFigure 16.12.6.3-2: Procedure for L2 U2N Remote UE inter-gNB switching from indirect to indirect path via a target L2 U2N Relay UE in RRC_CONNECTED\n1.\tThe L2 U2N Remote UE reports one or multiple candidate L2 U2N Relay UE(s) and Uu measurements to the source gNB, after it measures/discovers the candidate L2 U2N Relay UE(s):\n-\tThe L2 U2N Remote UE filters the appropriate L2 U2N Relay UE(s) according to relay selection criteria before reporting. The L2 U2N Remote UE shall report only the L2 U2N Relay UE candidate(s) that fulfil the higher layer criteria;\n-\tThe reporting includes at least a L2 U2N Relay UE ID, a L2 U2N Relay UE's serving cell ID, and a sidelink measurement quantity information. SD-RSRP is used as sidelink measurement quantity.\n2.\tThe source gNB decides to trigger the L2 U2N Remote UE to switch to an indirect path of another gNB.\n3.\tThe source gNB sends a HANDOVER REQUEST message to the target gNB to prepare the path switch at the target side. The HANDOVER REQUEST message includes Remote UE L2 ID and a list of candidate target relay UE IDs belonging to one cell.\nNOTE:\tIn order to support the DL lossless handover for the L2 U2N Remote UE, the source gNB may not discard the DL data even though the delivery of the data has been acknowledged by the source L2 U2N Relay UE based on the gNB implementation. Then, the source gNB forwards the buffered DL data to the target gNB during the data forwarding procedure.\n4.\tAdmission Control may be performed by the target gNB.\n5.\tThe target gNB selects one target Relay UE from the list of candidate Relay UEs provided by the source gNB, sends the RRCReconfiguration message to the L2 U2N Relay UE for relaying configuration, which includes at least the L2 U2N Remote UE's local ID and L2 ID, Uu Relay RLC channel and PC5 Relay RLC channel configuration for relaying, and bearer mapping configuration.\n6.\tThe target gNB sends the HANDOVER REQUEST ACKNOWLEDGE message to the source gNB, which contains new RRC configuration for L2 U2N Remote UE.\n7.\tThe source gNB sends the RRCReconfiguration message to the L2 U2N Remote UE, which includes at least the target L2 U2N Relay UE ID, Remote UE's local ID, PC5 Relay RLC channel configuration for relay traffic and the associated end-to-end Uu radio bearer(s). The L2 U2N Remote UE stops User Plane and Control plane transmission over the (source) indirect path after reception of the RRCReconfiguration message from the source gNB.\n8.\tThe source gNB sends the SN STATUS TRANSFER message to the target gNB to convey the uplink PDCP SN receiver status and the downlink PDCP SN transmitter status of the L2 U2N Remote UE's DRBs for which PDCP status preservation applies (i.e. for RLC AM).\n9.\tThe L2 U2N Remote UE establishes PC5 connection to the target L2 U2N Relay UE.\n10.\tThe L2 U2N Remote UE sends the RRCReconfigurationComplete message to the target gNB via the target L2 U2N Relay UE.\n11.\tThe data path is switched from indirect path to indirect path between the L2 U2N Remote UE and the target gNB via the target L2 U2N Relay UE.\n12.\tThe target gNB sends the UE CONTEXT RELEASE message to inform the source gNB about the success of the path switch.\n13.\tThe source gNB sends the RRCReconfiguration message to the source L2 U2N Relay UE to reconfigure the connection between the source L2 U2N Relay UE and the source gNB. The RRCReconfiguration message to the source L2 U2N Relay UE can be sent any time after step 7 based on source gNB implementation (e.g., to release Uu Relay RLC channel and PC5 Relay RLC channel configuration for relaying, and bearer mapping configuration related to the L2 U2N Remote UE).\n14.\tEither L2 U2N Relay UE or L2 U2N Remote UE's AS layer indicates upper layer to release PC5 unicast link after receiving the RRCReconfiguration message from the source gNB. The timing to execute link release is up to UE implementation.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "16.12.7\tControl plane procedures for L2 U2U Relay",
                            "text_content": "The L2 U2U Remote UE needs to establish end-to-end SL-SRB/DRBs with the peer L2 U2U Remote UE before user plane data transmission.\nThe following high level connection establishment procedure in Figure 16.12.7-1 applies to a L2 U2U Relay UE and L2 U2U Remote UE:\nFigure 16.12.7 -1 illustrates the step-by-step procedure for establishing a Layer 2 User-to-User (U2U) remote connection between two User Equipment (UE) entities. The figure outlines the process, starting with the initial connection request, followed by the establishment of a tunnel, and finally the successful connection confirmation. Key components include the Network Access Server (NAS), Mobility Management Entity (MME), and the User Plane Function (UPF). The figure emphasizes the importance of secure and efficient connection setup in L2 U2U scenarios.\nFigure 16.12.7-1: Procedure for L2 U2U Remote UE connection establishment\n1.\tThe L2 U2U Remote UE, L2 U2U Relay UE, and peer L2 U2U Remote UE perform discovery procedure or integrated discovery procedure.\n2a.\tThe L2 U2U Remote UE establishes/modifies a PC5-RRC connection with the selected L2 U2U Relay UE (i.e., as specified in TS 23.304 [48]).\n2b.\tThe L2 U2U Relay UE establishes/modifies a PC5-RRC connection with the peer L2 U2U Remote UE (i.e., as specified in TS 23.304 [48]).\n3.\tThe L2 U2U Relay UE allocates two local IDs and it is delivered via RRCReconfigurationSidelink message to each of the L2 U2U Remote UEs: one local ID to identify the L2 U2U Remote UE, the other local ID to identify the peer L2 U2U Remote UE. When the local ID is delivered, an L2 ID of the peer L2 U2U Remote UE is also delivered to the U2U Remote UE for making the association between the local ID and the L2 ID of the peer U2U Remote UE.\n4.\tThe L2 U2U Remote UE establishes end-to-end PC5-RRC connection with the peer L2 U2U Remote UE via the L2 U2U Relay UE. For the end-to-end connection establishment, fixed indexes (i.e., 0/1/2/3) are defined for end-to-end SL-SRB 0/1/2/3 respectively, and specified PC5 Relay RLC Channel configuration is used on each hop. The sidelink UE capability is exchanged between the L2 U2U Remote UEs via PC5-RRC (e.g., SL-SRB3) message.\n5.\tThe L2 U2U Remote UE sends to the L2 U2U Relay UE all the QoS profiles for the end-to-end QoS flows via PC5-RRC.\n6.\tThe L2 U2U Relay UE performs QoS split only for PDB.\nNOTE:\tIt is up to L2 U2U Relay UE implementation on how to split PDB.\n7.\tThe L2 U2U Relay UE sends the split QoS value (i.e., PDB) via PC5-RRC message to the L2 U2U Remote UE.8.\tThe L2 U2U Remote UE or the serving gNB of the L2 U2U Remote UE derives the PDCP and SDAP configuration for end-to-end SL-DRB and provides the portion of the configuration related to reception to the peer L2 U2U Remote UE using end-to-end RRCReconfigurationSidelink messages. The end-to-end bearer IDs for SL-SRB and SL-DRB are used as input for the L2 U2U Relay ciphering and deciphering at PDCP.\n9a.\tThe L2 U2U Remote UE or the serving gNB of the L2 U2U Remote UE derives the first hop configuration (e.g. PC5 Relay RLC Channel configuration) for SL-DRB and provides to the L2 U2U Relay UE of the configuration related to receiving on the first hop (i.e., Rx by the relay UE), using per-hop RRCReconfigurationSidelink message.\n9b.\tThe L2 U2U Relay UE or the serving gNB of the L2 U2U Relay UE derives the second hop configuration (e.g. PC5 Relay RLC Channel configuration) for each SL-DRB and provides to the peer L2 U2U Remote UE of the configuration related to receiving data packets on the second hop (i.e., RX by the peer remote UE), using per-hop RRCReconfigurationSidelink message.\n10.\tThe L2 U2U Remote UE and the peer L2 U2U Remote UE transmit or receive data via L2 U2U Relay UE.\n",
                            "figures_meta_data": [],
                            "tables": []
                        }
                    ]
                },
                {
                    "title": "16.13\tSupport of Reduced Capability (RedCap) and enhanced Reduced Capability (eRedCap) NR devices",
                    "description": "",
                    "summary": "",
                    "text_content": "",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": [
                        {
                            "title": "16.13.1\tIntroduction",
                            "text_content": "A RedCap UE has reduced capabilities with the intention to have lower complexity with respect to non-RedCap UEs. It is mandatory for a RedCap UE to support 20 MHz maximum UE channel bandwidth in FR1 and 100 MHz in FR2. An eRedCap UE has further reduced capabilities with the intention to have lower complexity with respect to RedCap UEs. It is mandatory for an eRedCap UE to support reduced DL/UL peak data rate of 10 Mbps, with or without reduced baseband bandwidth of 5 MHz for unicast PDSCH/PUSCH in FR1.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "16.13.2\tCapabilities",
                            "text_content": "CA, MR-DC, DAPS, CPA, CPC and IAB related capabilities are not supported by (e)RedCap UEs, as defined together with other limitations in TS 38.306 [11]. It is up to the network to prevent (e)RedCap UEs from using radio capabilities not intended for (e)RedCap UEs.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "16.13.3\tIdentification, access and camping restrictions",
                            "text_content": "A RedCap UE can be identified by the network during Random Access procedure via MSG3/MSGA from a RedCap specific LCID(s) and optionally via MSG1/MSGA (PRACH occasion or PRACH preamble). An eRedCap UE can be identified by the network during Random Access procedure via MSG3/MSGA from an eRedCap specific LCID(s) and optionally via MSG1. For RedCap UE identification via MSG1/MSGA, RedCap specific Random Access configuration may be configured by the network. For eRedCap UE identification via MSG1, eRedCap specific Random Access configuration may be configured by the network. For MSG3/MSGA, an (e)RedCap UE is identified by the dedicated LCID(s) indicated for CCCH identification (CCCH or CCCH1) regardless whether (e)RedCap specific Random Access configuration is configured by the network.\n(e)RedCap UEs with 1 Rx branch and 2 Rx branches can be allowed separately via system information. In addition, (e)RedCap UEs in Half-Duplex FDD mode can be allowed via system information. A RedCap specific IFRI can be provided in SIB1, when absent, RedCap UEs access is not allowed. An eRedCap specific IFRI can be provided in SIB1, when absent, eRedCap UEs access is not allowed. Information on which frequencies (e)RedCap UE access is allowed can be provided in system information.\nAn (e)RedCap UE with 1 Rx branch applies the associated offset for broadcasted cell specific RSRP thresholds for random access, SDT, cell edge condition and cell (re)selection criterion as specified in TS 38.133 [13].\nNOTE:\tIt is up to the E-UTRA network, if possible, to avoid handover attempts of an (e)RedCap UE to a target NR cell not supporting (e)RedCap. It is up to the (e)RedCap UE implementation, if possible, to recover from handover attempts to a target NR cell not supporting (e)RedCap.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "16.13.4\tRRM measurement relaxations",
                            "text_content": "RRM measurement relaxation is enabled and disabled by the network. In RRC_IDLE and RRC_INACTIVE an (e)RedCap UE is allowed to relax neighbour cell RRM measurements when the stationary criterion is met or when both stationary criterion and not-at-cell-edge criterion are met. Network may configure stationary criterion for an (e)RedCap UE in RRC_CONNECTED and the UE reports its RRM measurement relaxation fulfilment status using UE Assistance Information when the stationarity criterion is met or no longer met.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "16.13.5\tBWP operation",
                            "text_content": "An (e)RedCap UE in RRC_IDLE or RRC_INACTIVE monitors paging only in an initial BWP (default or RedCap specific) associated with CD-SSB and performs cell (re-)selection and related measurements on the CD-SSB. If a RedCap-specific initial UL BWP is configured and NUL is selected, (e)RedCap UEs shall use only the RedCap-specific initial UL BWP to perform RACH procedure in RRC_IDLE and RRC_INACTIVE or to perform CG-SDT procedure (as described in clause 18.0) in RRC_INACTIVE.\nAn (e)RedCap UE may be configured with multiple NCD-SSBs provided that each BWP is configured with at most one SSB. NCD-SSB may be configured for an (e)RedCap UE in RRC_CONNECTED to perform RLM, BFD, and RRM measurements and RA resource selection when the active BWP does not contain CD-SSB.\nAn (e)RedCap UE may be configured with NCD-SSB for a RedCap-specific initial DL BWP to perform SDT procedure in RRC_INACTIVE (as described in clause 18.0) in case the RedCap-specific initial DL BWP does not contain CD-SSB.\n",
                            "figures_meta_data": [],
                            "tables": []
                        }
                    ]
                },
                {
                    "title": "16.14\tNon-Terrestrial Networks",
                    "description": "",
                    "summary": "",
                    "text_content": "",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": [
                        {
                            "title": "16.14.1\tOverview",
                            "text_content": "Figure 16.14.1-1 below illustrates an example of a Non-Terrestrial Network (NTN) providing non-terrestrial NR access to the UE by means of an NTN payload and an NTN Gateway, depicting a service link between the NTN payload and a UE, and a feeder link between the NTN Gateway and the NTN payload.\nFigure 16.14.1 presents an overall illustration of a Non-Terrestrial Network (NTN), showcasing its key components and their interactions. The figure illustrates the integration of satellites, terrestrial infrastructure, and user equipment to provide seamless connectivity across various environments. Key elements include satellites in geostationary and non-geostationary orbits, ground stations, and user terminals that communicate with both satellite and terrestrial networks. The figure emphasizes the flexibility and scalability of NTN systems, enabling coverage in areas where traditional terrestrial networks are insufficient or challenging to deploy.\nFigure 16.14.1-1: Overall illustration of an NTN\nNOTE 1:\tFigure 16.14.1-1 illustrates an NTN; RAN4 aspects are out of scope.\nThe NTN payload transparently forwards the radio protocol received from the UE (via the service link) to the NTN Gateway (via the feeder link) and vice-versa. The following connectivity is supported by the NTN payload:\n-\tAn NTN gateway may serve multiple NTN payloads;\n-\tAn NTN payload may be served by multiple NTN gateways.\nNOTE 2:\tIn this release, the NTN-payload may change the carrier frequency, before re-transmitting it on the service link, and vice versa (respectively on the feeder link).\nFor NTN, the following applies in addition to Network Identities as described in clause 8.2:\n-\tA Tracking Area corresponds to a fixed geographical area. Any respective mapping is configured in the RAN;\n-\tA Mapped Cell ID as specified in clause 16.14.5.\nThree types of service links are supported:\n-\tEarth-fixed: provisioned by beam(s) continuously covering the same geographical areas all the time (e.g., the case of GSO satellites);\n-\tQuasi-Earth-fixed: provisioned by beam(s) covering one geographic area for a limited period and a different geographic area during another period (e.g., the case of NGSO satellites generating steerable beams);\n-\tEarth-moving: provisioned by beam(s) whose coverage area slides over the Earth surface (e.g., the case of NGSO satellites generating fixed or non-steerable beams).\nWith NGSO satellites, the gNB can provide either quasi-Earth-fixed service link or Earth-moving service link, while gNB operating with GSO satellite can provide Earth fixed service link.\nIn this release, the UE supporting NTN is GNSS-capable.\nIn NTN, the distance refers to Euclidean distance.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "16.14.2\tTiming and Synchronization",
                            "text_content": "DL and UL are frame aligned at the uplink time synchronization reference point (RP) with an offset given by NTA,offset (see clause 4.2 of TS 38.213 [38]).\nTo accommodate the propagation delay in NTNs, several timing relationships are enhanced by a Common Timing Advance (Common TA) and two offsets  and :\n-\t is a configured timing offset that is equal to the RTT between the RP and the NTN payload.\n-\t is a configured scheduling offset that needs to be larger or equal to the sum of the service link RTT and the Common TA.\n-\tis a configured offset that is approximately equal to the RTT between the RP and the gNB.\nThe scheduling offset  is used to allow the UE sufficient processing time between a downlink reception and an uplink transmission, see TS 38.213 [38].\nThe offset  is used to delay the application of a downlink configuration indicated by a MAC CE command on PDSCH, see TS 38.213 [38], and in estimation of UE-gNB RTT, see TS 38.321 [6]. It may be provided by the network when downlink and uplink frame timing are not aligned at gNB. The  is also used in the random access procedure, to determine the start time of RAR window/MsgB window after a Msg1/MsgA transmission (see TS 38.213 [38]).\nThe Service link RTT, Feeder link RTT, RP, Common TA,  and TTA (see clause 16.14.2.2) are illustrated in Figure 16.14.2.1-1.\nFigure 16.14.2.1-1 illustrates the timing relationship between a collocated ground-based network (gNB) and a non-terrestrial network (NTN) gateway, highlighting the synchronization and coordination required for seamless communication between the two systems. The figure depicts the gNB as the primary terrestrial network node, while the NTN gateway serves as the interface to the satellite-based network. The timing relationship is crucial for ensuring accurate signal transmission and reception, as well as for managing the handover between the two networks. The figure emphasizes the importance of precise timing synchronization to maintain high-quality communication and avoid interference between the two networks.\nFigure 16.14.2.1-1: Illustration of timing relationship (for collocated gNB and NTN Gateway)\nThe network may configure the HARQ operation as follows:\n-\tFor downlink, HARQ feedback can be enabled or disabled per HARQ process (as specified in clause 5.3.2.2 and clause 5.7 of TS 38.321 [6]). Disabling HARQ feedback allows scheduling a HARQ process before one HARQ RTT has elapsed since last scheduled.\n-\tFor uplink, HARQ mode (i.e. HARQ mode A or HARQ mode B) can be configured per HARQ process (as specified in clause 5.4.3.1 and clause 5.7 of TS 38.321 [6]). HARQ mode B allows scheduling a HARQ process before one HARQ RTT has elapsed since last scheduled.\nNOTE:\tFor the HARQ processes configured with HARQ feedback enabled/disabled, it is up to network implementation to ensure a proper configuration of HARQ feedback (e.g., either all enabled or all disabled) for HARQ processes used by an SPS configuration. For the HARQ processes configured with HARQ mode, it is up to network implementation to ensure a proper configuration of HARQ mode (e.g., either all HARQ mode A or all HARQ mode B) for HARQ processes used by a CG configuration.\nFor the serving cell, the network broadcast valid ephemeris information and Common TA parameters. The UE shall have valid GNSS position as well as ephemeris and Common TA before connecting to an NTN cell. To achieve synchronisation, before and during connection to an NTN cell, the UE shall compute the RTT between UE and the RP based on the GNSS position, the ephemeris, and the Common TA parameters (see clause 4.2 in TS 38.213 [38]), and autonomously pre-compensate the TTA for the RTT between the UE and the RP as illustrated in Figure 16.14.2.1-1 (see clause 4.3 of TS 38.211 [52]).\nThe UE shall compute the frequency Doppler shift of the service link, and autonomously pre-compensate for it in the uplink transmissions, by considering UE position and the ephemeris. If the UE does not have a valid GNSS position and/or valid ephemeris and Common TA, it shall not transmit until both are regained.\nIn connected mode, the UE shall be able to continuously update the Timing Advance and frequency pre-compensation.\nThe UE may be configured to report Timing Advance during Random Access procedures or in connected mode. In connected mode, event-triggered reporting of the Timing Advance is supported.\n\nFigure 16.14.2.2-1: Void\nWhile the pre-compensation of the instantaneous Doppler shift experienced on the service link is to be performed by the UE, the management of Doppler shift experienced over the feeder link and transponder frequency error is left to the network implementation.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "16.14.3\tMobility and State transition",
                            "text_content": "The same principles as described in 9.2.1 apply to mobility in RRC_IDLE for NTN and the same principles as described in 9.2.2 apply to mobility in RRC_INACTIVE for NTN unless hereunder specified.\nThe network may broadcast multiple Tracking Area Codes (TACs) per PLMN in an NR NTN cell. A TAC change in the System Information is under network control, i.e. it may not be exactly synchronised with real-time illumination of beams on ground.\nFor the NTN-TN mobility, the network may broadcast cell information on NR TN and EUTRA TN coverage areas in SIB25. This is supported for Earth-Fixed, Quasi-Earth-fixed and Earth-Moving cells. The coverage information consists in a list of geographical TN areas, with associated frequency information also indicated. UE can skip TN measurement based on the broadcast TN coverage information.\nThe UE can determine the network type (terrestrial or non-terrestrial) implicitly by the existence of cellBarredNTN in SIB1.\nThe NTN ephemeris is provided in SIB19. In an NTN cell, it includes serving cell's NTN payload ephemeris and optionally neighbouring cell's NTN payload ephemeris.\nThe same principle as described in 9.2.3.2 applies unless hereunder specified:\nDuring mobility between NTN and Terrestrial Network (TN), a UE is not required to connect to both NTN and TN at the same time.\nNOTE:\tNTN TN handover refers to mobility in both directions, i.e. from NTN to TN (hand-in) and from TN to NTN (hand-out).\nDAPS handover is not supported for NTN in this release of the specification.\nUE may support mobility between gNBs operating with NTN payloads in different orbits (e.g., GSO, NGSO at different altitudes).\nRACH-less handover as specified in TS 38.321 [6] is supported in NTNs.\nThe same principle as described in 9.2.3.4 applies to NTN unless hereunder specified.\nNTN supports the following additional trigger conditions upon which UE may execute CHO to a candidate cell, as defined in TS 38.331 [12]:\n-\tThe RRM measurement-based event A4;\n-\tA time-based trigger condition;\n-\tA location-based trigger condition.\nTime-based or location-based trigger conditions may be configured independently from the measurement condition for CHO in NTN in at least hard satellite switch case where the service discontinuity gap time length is assumed to be zero or negligible. Otherwise, a time-based or a location-based trigger condition is always configured together with one of the measurement-based trigger conditions (CHO events A3/A4/A5) as defined in TS 38.331 [12].\nA time-based or a location-based trigger condition is always configured together with one of the measurement-based trigger conditions (CHO events A3/A4/A5) as defined in TS 38.331 [12].\nIt is up to UE implementation how the UE evaluates the time- or location-based trigger condition together with the RRM measurement-based event.\nWhen a time-based trigger condition is used, the source gNB may signal the corresponding parameters to a single target gNB via the Source NG-RAN Node to Target NG-RAN Node Transparent Container in an NG-C based handover, see TS 23.502 [22]. The source gNB signals the corresponding CHO configuration to the UE in the RRC Reconfiguration message during handover execution.\nWhen time-based trigger condition is used, the source NG-RAN node should consider the time indicated to the UE to decide when to start the early data forwarding to the target NG-RAN node.\nTime-based CHO can be performed via RACH-less.\nUpon both hard and soft satellite switch over in the quasi-Earth fixed scenario with the same SSB frequency and the same gNB, the satellite switch with re-sync procedure is supported. The satellite switch with re-sync avoids a L3 mobility for UEs in the cell by maintaining the same PCI on the geographical area covered by quasi-Earth fixed beam. CHO can be configured simultaneously with the satellite switch with re-sync procedure.\nFor soft satellite switch over, the UE can start synchronizing with the target satellite before the source satellite ends to serve the cell. It is not required for the UE to be connected to source satellite when the UE switches to target satellite.\nThe same principle as described in 9.2.4 applies to measurements in NTN unless hereunder specified.\nThe network can configure:\n-\tmultiple SMTCs in parallel per carrier and for a given set of cells depending on UE capabilities;\n-\tmeasurement gaps based on multiple SMTCs;\n-\tassistance information (e.g., ephemeris, Common TA parameters, ) provided in SIB19 for UE to perform measurement on neighbour cells in RRC_IDLE/RRC_INACTIVE/RRC_CONNECTED.\nNW-controlled adjustment of SMTCs can be based on UE assistance information reported in RRC_CONNECTED. A UE in RRC_IDLE/RRC_INACTIVE can adjust SMTCs based on its location and assistance information in SIB19.\nUE assistance information consists of the service link propagation delay difference(s) between serving the cell and neighbour cell(s).\nFor a UE in Idle/Inactive mode it's up to UE implementation whether to perform NTN neighbour cell measurements on a cell indicated in SIB3/SIB4 but not included in SIB19.\nFor a UE in Connected mode, it's up to UE implementation whether to perform NTN neighbour cell measurements on a cell included in the measurement configuration but not included in SIB19.\nUE can perform time-based and location-based measurements on neighbour cells in RRC_IDLE/RRC_INACTIVE:\n-\tThe timing and location information associated to the serving cell is provided in SIB19;\n-\tTiming information refers to the UTC time when the serving cell stops serving the current geographical area;\n-\tLocation information refers:\n-\tIn the quasi-Earth fixed cell scenario, to the reference location of the serving cell and a distance threshold to the reference location.\n-\tIn the Earth moving cell scenario, to the reference location of the serving cell at the epoch time and a distance threshold to the reference location.\nThe time-based measurement initiation may be applicable for the feeder link switchover case for cell (re)selection.\nMeasurement rules for cell re-selection based on timing information and location information are specified in clause 5.2.4.2 in TS 38.304 [10].\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "16.14.4\tSwitchover",
                            "text_content": "A feeder link switchover is the procedure where the feeder link is changed from a source NTN Gateway to a target NTN Gateway for a specific NTN payload. The feeder link switchover is a Transport Network Layer procedure. Service link switch refers to a change of the serving NTN payload.\nBoth hard and soft feeder link switchover are supported in NTN.\nA feeder link switch over may result in transferring the established connection for the affected UEs between two gNBs.\nFor soft feeder link switch over, an NTN payload is able to connect to more than one NTN Gateway during a given period, i.e. a temporary overlap can be ensured during the transition between the feeder links.\nFor hard feeder link switch over, an NTN payload connects to only one NTN Gateway at any given time, i.e. a radio link interruption may occur during the transition between the feeder links.\nThe NTN Control function (see Annex B.4) determines the point in time when the feeder link switch over between two gNBs is performed. The transfer of the affected UE(s)' context between the two gNBs at feeder link switch over is performed by means of either NG based or Xn based handover, and it depends on the gNBs' implementation and configuration information provided to the gNBs by the NTN Control function.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "16.14.5\tNG-RAN signalling",
                            "text_content": "The Cell Identity, as defined in TS 38.413 [26] and TS 38.423 [50], used in following cases corresponds to a Mapped Cell ID, irrespective of the orbit of the NTN payload or the types of service links supported:\n-\tThe Cell Identity indicated by the gNB to the Core Network as part of the User Location Information;\n-\tThe Cell Identity used for Paging Optimization in NG interface;\n-\tThe Cell Identity used for Area of Interest;\n-\tThe Cell Identity used for PWS.\nThe Cell Identity included within the target identification of the handover messages allows identifying the correct target cell. The cell identity used in the NG and Xn handover messages, Xn Setup and Xn NG-RAN Node Configuration Update procedures is expected to be Uu Cell ID.\nThe Cell Identities used in the RAN Paging Area during Xn RAN paging allow the identification of the correct target cells for RAN paging.\nNOTE 1:\tThe Cell Identity used for RAN Paging is assumed to typically represent a Uu Cell ID.\nThe mapping between Mapped Cell IDs and geographical areas is configured in the RAN and Core Network.\nNOTE 2:\tA specific geographical location may be mapped to multiple Mapped Cell ID(s), and such Mapped Cell IDs may be configured to indicate differerent geographical areas (e.g. overlapping and/or with different dimensions).\nThe gNB is responsible for constructing the Mapped Cell ID based on the UE location information received from the UE, if available. The mapping may be pre-configured (e.g., up to operator's policy) or up to implementation.\nNOTE 3:\tAs described in TS 23.501 [3], the User Location Information may enable the AMF to determine whether the UE is allowed to operate at its present location. Special Mapped Cell IDs or TACs may be used to indicate areas outside the serving PLMN's country.\nThe gNB reports the broadcasted TAC(s) of the selected PLMN to the AMF as part of ULI. In case the gNB knows the UE's location information, the gNB may determine the TAI the UE is currently located in and provide that TAI to the AMF as part of ULI.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "16.14.6\tAMF (Re-)Selection",
                            "text_content": "The gNB implements the NAS Node Selection Function specified in TS 38.410 [16].\nFor an RRC_CONNECTED UE, when the gNB is configured to ensure that the UE connects to an AMF that serves the country in which the UE is located, if the gNB detects that the UE is in a different country to that served by the serving AMF, then it should perform an NG handover to change to an appropriate AMF, or initiate an UE Context Release Request procedure towards the serving AMF (in which case the AMF may decide to de-register the UE).\nFor the purpose of selecting an appropriate AMF, the 5GC may verify the UE location according to TS 23.501 [3] and TS 38.305 [42] after the UE has attached to the network.\nNOTE:\tUE location verification for AMF selection should not be necessary if NTN cell(s) do not extend across countries.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "16.14.7\tO&M Requirements",
                            "text_content": "The following NTN related parameters shall be provided by O&M to the gNB providing NTN access:\n-\tEphemeris information describing the orbital trajectory information or coordinates for the NTN payload. This information is provided on a regular basis or upon demand to the gNB;\n-\tTwo different sets of ephemeris format shall be supported:\n-\tSet 1: NTN payload position and velocity state vectors:\n-\tPosition;\n-\tVelocity.\n-\tSet 2: At least the following parameters in orbital parameter ephemeris format, as specified in NIMA TR 8350.2 [51]:\n-\tSemi-major axis;\n-\tEccentricity;\n-\tArgument of periapsis;\n-\tLongitude of ascending node;\n-\tInclination;\n-\tMean anomaly at epoch time.\n-\tThe explicit epoch time associated to ephemeris data;\n-\tThe location of the NTN Gateways;\nNOTE 1:\tThe ephemeris of the NTN payloads and the location of the NTN Gateways, are used at least for the Uplink timing and frequency synchronization. It may also be used for the random access and the mobility management purposes.\n-\tAdditional information to enable gNB operation for feeder/service link switch overs.\nNOTE 2:\tThe NTN related parameters provided by O&M to the gNB may depend on the type of supported service links, i.e., Earth-fixed, quasi-Earth-fixed, or Earth-moving.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "16.14.8\tCoarse UE location reporting",
                            "text_content": "Upon network request, after AS security is established in connected mode, a UE should report its coarse UE location information (most significant bits of the GNSS coordinates, ensuring an accuracy in the order of 2 km) to the NG-RAN if available.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "16.14.9\tSupport for NR NTN coverage enhancements",
                            "text_content": "To improve NR uplink coverage in NTN, the following enhancements are supported:\n-\tPUCCH repetition for Msg4 HARQ-ACK configured in system information or dynamically in DCI for Msg4 when multiple repetition factors are configured in the system information:\n-\tUEs reports the capability of PUCCH repetition for Msg4 HARQ-ACK in Msg3 PUSCH;\n-\tWhen Msg4 HARQ-ACK is repeated, PUCCH repetition is applied for all PUCCH transmission before dedicated PUCCH resource is provided.\n-\tImproved channel estimation by NTN-specific PUSCH DMRS bundling enhancement that enables DMRS bundling in presence of timing drift, where the UE can maintain phase continuity by considering effects of transmission delay variation between the UE and the uplink time synchronization reference point.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "16.14.10\tVerification of UE location",
                            "text_content": "For UE location verification based on multi-RTT with single satellite in NTN, at least the following UE and gNB measurements specified in TS 38.215 [59] are reported: gNB receive-transmit time difference at the uplink time synchronization reference point, UE receive-transmit time difference, UE receive-transmit time difference subframe offset and DL timing drift.\nThe assistance information provided to the CN may include ephemeris information including accurate satellite position and velocity at the time of multi-RTT measurement, and common TA parameters (ta-Common, ta-CommonDrift, ta-CommonDriftVariant), and Epoch time.\n",
                            "figures_meta_data": [],
                            "tables": []
                        }
                    ]
                },
                {
                    "title": "16.15\teXtended Reality Services",
                    "description": "",
                    "summary": "",
                    "text_content": "",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": [
                        {
                            "title": "16.15.1\tGeneral",
                            "text_content": "This clause describes the functionalities for the support of eXtended Reality (XR) services that require high data rate and low latency communications. An overview of XR services is available in TR 38.835 [57], while the service requirements are documented in TS 22.261 [19].\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "16.15.2\tAwareness",
                            "text_content": "XR-Awareness relies on QoS flows, PDU Sets, Data Bursts and traffic assistance information (see TS 23.501 [3]).\nThe following PDU Set QoS Parameters may be provided by the SMF to the gNB as part of the QoS profile of the QoS flow, and to enable PDU Set based QoS handling at least one of them shall be provided:\n-\tPDU Set Delay Budget (PSDB): as defined in TS 23.501 [3], upper bound for the duration between the reception time of the first PDU (at the UPF for DL, at the UE for UL) and the time when all PDUs of a PDU Set have been successfully received (at the UE in DL, at the UPF in UL). A QoS Flow is associated with only one PSDB, and when available, it applies to both DL and UL and supersedes the PDB of the QoS flow.\n-\tPDU Set Error Rate (PSER): as defined in TS 23.501 [3], upper bound for a rate of non-congestion related PDU Set losses between RAN and the UE. A QoS Flow is associated with only one PSER, and when available, it applies to both DL and UL and supersedes the PER of the QoS flow.\nNOTE 1:\tIn this release, a PDU set is considered as successfully delivered only when all PDUs of a PDU Set are delivered successfully.\n-\tPDU Set Integrated Handling Information (PSIHI): indicates whether all PDUs of the PDU Set are needed for the usage of PDU Set by application layer, as defined in TS 23.501 [3].\nNOTE 2:\tThe PDU Set QoS parameters are common for all PDU Sets within a QoS flow.\nDuring the Xn-handover preparation procedure, the source gNB sends the stored PDU Set QoS Parameters as part of the QoS profile to the target NG-RAN node.\nIn addition, the UPF can identify PDUs that belong to PDU Sets, and may indicate to the gNB the following PDU Set Information in the GTP-U header:\n-\tPDU Set Sequence Number;\n-\tIndication of End PDU of the PDU Set;\n-\tPDU Sequence Number within a PDU Set;\n-\tPDU Set Size in bytes;\n-\tPDU Set Importance (PSI), which identifies the relative importance of a PDU Set compared to other PDU Sets within the same QoS Flow.\n5GC may provide XR traffic assistance information to gNB through NG AP TSC Assistance Information (TSCAI) as specified in clause 5.37.8 of TS 23.501[3] (for both GBR and non-GBR QoS flows):\n-\tUL and/or DL Periodicity;\n-\tN6 Jitter Information (i.e. between UPF and Data Network) associated with the DL Periodicity.\nThis assistance information can be used by the gNB to configure DRX to enable better UE power saving.\nIn addition, 5GC may provide the following information through NG-U as specified in clause 5.37.5.2 of TS 23.501[3]:\n-\tIndication of End of Data Burst in the GTP-U header of the last PDU in downlink.\nThis information can be used by the gNB to push the UE back to sleep when possible.\nIn the uplink, the UE needs to be able to identify PDU Sets and Data Bursts dynamically, including PSI. How this is done is left up to UE implementation but when possible for a QoS flow, this is indicated to the gNB via UE Assistance Information.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "16.15.3\tPower Saving",
                            "text_content": "Most XR video frame rates (15, 30, 45, 60, 72, 90 and 120 fps) correspond to periodicities that are not an integer (66.66, 33.33, 22.22, 16.66, 13.88, 11.11 and 8.33 ms respectively). The gNB may configure a DRX cycle expressed in rational numbers so that the DRX cycle matches those periodicities, e.g. for the traffic with a frame rate of 60 fps, the network may configure the UE with a DRX cycle of 50/3 ms.\nConfigured grants may be configured without the need for the UE to monitor possible UL retransmissions, thus increasing the number of power saving opportunities for the UE.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "16.15.4\tCapacity",
                            "text_content": "The following enhancements for configured grant-based PUSCH transmission are introduced:\n-\tSupport of multiple CG PUSCH transmission occasions within a single period of a CG configuration;\n-\tIndication of unused CG PUSCH occasion(s) of a CG configuration with Uplink Control Information multiplexed in CG PUSCH transmission of the CG configuration.\nIn order to enhance the scheduling of uplink resources for XR, the following improvements are introduced:\n-\tOne additional buffer size table to reduce the quantisation errors in BSR reporting (e.g. for high bit rates):\n-\tWhether, for an LCG, the new table can be used in addition to the regular one is configured by the gNB;\n-\tWhen the new table is configured for an LCG, it is used whenever the amount of the buffered data of that LCG is within the range of the new table, otherwise the regular table is used.\n-\tDelay Status Report (DSR) of buffered data via a dedicated MAC CE:\n-\tTriggered for an LCG when the remaining time before discard of any buffered PDCP SDU goes below a configured threshold (threshold configured per LCG by the gNB);\n-\tWhen triggered for an LCG, reports the amount of data buffered with a remaining time before discard below the configured threshold, together with the shortest remaining time of any PDCP SDU buffered.\n-\tReporting of uplink assistance information (jitter range, burst arrival time, UL data burst periodicity) per QoS flow by the UE via UE Assistance Information.\nWhen the PSIHI is set for a QoS flow, as soon as one PDU of a PDU set is known to be lost, the remaining PDUs of that PDU Set can be considered as no longer needed by the application and may be subject to discard operation at the transmitter to free up radio resources.\nNOTE 1:\tIt cannot always be assumed that the remaining PDUs are not useful and can safely be discarded. Also, in case of Forward Error Correction (FEC), active discarding of PDUs when assuming that a large enough number of packets have already been transmitted for FEC to recover without the remaining PDUs is not recommended as it might trigger an increase of FEC packets.\nIn uplink, the UE may be configured with PDU Set based discard operation for a specific DRB. When configured, the UE discards all packets in a PDU set when one PDU belonging to this PDU set is discarded due to discard timer expiry.\nThe gNB may perform downlink PDU Set discarding based on implementation by taking at least PSDB, PSI, PSIHI parameters into account.\nIn case of congestion, the gNB may use the PSI for PDU set discarding. For uplink, dedicated downlink signalling is used to request the UE to apply a shorter discard timer to low importance SDUs in PDCP.\nNOTE 2:\tHow SDUs are identified as low importance is left up to UE implementation. When a PSI is available, it can be used to classify the PDCP SDUs of a PDU Set according to the guidelines specified in TS 26.522 [58].\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "16.15.5\tNon-Homogeneous support of PDU set based handling in NG-RAN",
                            "text_content": "During a handover from a gNB supporting PDU Set based handling to another gNB, the source gNB signals the PDU Set Information over Xn-U if the target node has signalled the support of PDU Set based handling in the Xn Handover Request Acknowledge message.\nDuring a handover from a gNB not supporting PDU Set based handling to a gNB supporting PDU Set based handling, the target gNB may indicate the support of PDU Set based handling to the SMF during the Path Switch Request procedure (in case of Xn handover) or Handover Resource Allocation procedure (in case of NG handover), the SMF will act as specified in TS 23.501[3]. If the indication is absent, the SMF infers that PDU Set based handling is not supported by the target NG-RAN node, then the SMF will act as specified in TS 23.501[3].\n",
                            "figures_meta_data": [],
                            "tables": []
                        }
                    ]
                },
                {
                    "title": "16.16\tECN marking for L4S and congestion information exposure",
                    "description": "",
                    "summary": "",
                    "text_content": "In order to support ECN marking for L4S at gNB as specified in TS 23.501[3], SMF provides ECN marking request per QoS flow level to the gNB as part of PDU Session Resource Management procedure. If the gNB supports ECN marking, it provides the status indication back to the SMF which is used by the SMF as specified in TS 23.501[3]. During Xn Handover Preparation procedure, source gNB provides the ECN marking request to target gNB.\nFor ECN marking for L4S at UPF, SMF requests the gNB to report congestion information per QoS flow level as part of PDU Session Resource Management procedure. If the gNB supports ECN marking for L4S at UPF, it provides the status indication back to the SMF which is used by SMF as specified in TS 23.501[3]. During Xn Handover Preparation procedure, source gNB provides the ECN marking UPF request to target gNB.\nFor congestion reporting from gNB to UPF, SMF requests the gNB to report congestion information per QoS flow level as part of PDU Session Resource Management procedure. If the NG-RAN supports congestion information reporting, it provides the status indication back to the SMF which is used by the SMF as specified in TS 23.501[3]. During Xn Handover Preparation procedure, source gNB provides the congestion information request to target gNB.\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "16.17\tSupport for TSN enabled Transport Network",
                    "description": "",
                    "summary": "",
                    "text_content": "The NG-RAN may support the TSN enabled Transport Network during PDU Session Resource establishment or modification procedure as specified in TS 23.501 [3].\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "16.18\tSupport for Aerial UE Communication",
                    "description": "",
                    "summary": "",
                    "text_content": "",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": [
                        {
                            "title": "16.18.1\tGeneral",
                            "text_content": "NR connectivity for UEs capable of Aerial communication is supported via the following functionalities:\n-\tsubscription-based Aerial UE identification and authorization, as specified in TS 23.502 [22], clause 5.2.3.3.1;\n-\theight reporting based on the measurement event(s) where the UE's altitude has crossed a network-configured reference altitude threshold;\n-\theight-dependent configurations which apply only to specific height regions;\n-\tinterference detection based on a measurement reporting that is triggered when a configured number of cells (i.e. larger than one) fulfils the triggering criteria simultaneously;\n-\tsignalling of flight path information from UE to NG-RAN and from the source gNB to target gNB during handover;\n-\tlocation information reporting, including UE's horizontal and vertical velocity;\n-\tbroadcasting of BRID and DAA messages via PC5 interface.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "16.18.2\tSubscription-based Identification of Aerial UE",
                            "text_content": "Support for Aerial UE functions is stored in the user's subscription information in UDM. UDM transfers this information to the AMF during Registration, Service Request and Mobility Registration Update procedures.\nThe Aerial UE subscription information can be provided by the AMF to the NG-RAN node via the NGAP INITIAL CONTEXT SETUP REQUEST message during the Registration, Mobility Registration Update and Service Request procedures. The subscription information can also be updated via the NGAP UE Context Modification procedure and NGAP Path Switch Acknowledge procedure. In addition, for Xn-based handover, the source NG-RAN node can include the Aerial UE subscription information in the XnAP HANDOVER REQUEST message and RETRIEVE UE CONTEXT RESPONSE message to the target NG-RAN node.\nFor intra- and inter-AMF NG-based handover, the AMF provides the Aerial UE subscription information to the target NG-RAN node after the handover procedure.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "16.18.3\tHeight-based Reporting for Aerial UE Communication",
                            "text_content": "An Aerial UE can be configured with height-dependent, event-based measurement reporting (i.e., eventH1 and eventH2 as defined in TS 38.331 [12]). An Aerial UE sends a measurement report when its altitude becomes higher or lower than configured threshold. The UE includes its height and location information in the measurement report if configured to do so by NG-RAN. RSRP/RSRQ measurement results are always reported when height reporting is configured.\nThe Aerial UE can also be configured to trigger measurement reporting only when both a height-dependent condition and a RSRP/RSRQ/SINR-based condition are met (i.e., eventA3H1, eventA3H2, eventA4H1, eventA4H2, eventA5H1 and eventA5H2 in TS 38.331 [12], commonly denoted as eventAxHy). For the content of eventAxHy measurement report, the same rules as described above for eventH1 and eventH2 apply.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "16.18.4\tHeight-dependent Configurations for Aerial UE Communication",
                            "text_content": "An Aerial UE can be configured with multiple height-dependent configurations, each of which is applied in its corresponding height range. Height-dependent configurations can be provided independently in measurement object (i.e. SSB-ToMeasureAltitudeBased in TS 38.331 [12]) and an Aerial UE can use those when in RRC_CONNECTED.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "16.18.5\tInterference Detection and Mitigation for Aerial UE Communication",
                            "text_content": "For interference detection, an Aerial UE can be configured with RRM event A3, A4, A5 or AxHy that triggers measurement report when individual (per cell) RSRP values for a configured number of cells fulfil the configured event. Once such condition is met and a measurement report is sent, the list of triggered cells is updated when subsequent cell(s) fulfil the event. However, further measurement reports are not sent while the list of triggered cells remains larger than or equal to the configured number of cells unless reportOnLeave is configured (see TS 38.331 [12] for details).\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "16.18.6\tFlight Path Information Reporting for Aerial UE Communication",
                            "text_content": "Following an indication from the Aerial UE that flight path information is available, NG-RAN can request the Aerial UE to report flight path information consisting of a number of waypoints defined as 3D locations, as defined in TS 37.355 [43]. Aerial UE reports up to a configured number of waypoints if flight path information is available at the UE. The report can also contain a time stamp per waypoint if configured by the NG-RAN and if available at the UE. The flight path information can be also provided by the source gNB to the target gNB during handover. If configured by the NG-RAN and if the associated distance- or time-based condition (see flightPathUpdateDistanceThr and flightPathUpdateTimeThr in TS 38.331 [12], respectively) for indication reporting are met for any of the waypoints, the Aerial UE indicates the availability of the updated flight path information. The Aerial UE can also indicate the availability of the updated flight path information if a new waypoint has been added or if a future waypoint has been removed from the flight path information.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "16.18.7\tLocation Reporting for Aerial UE Communication",
                            "text_content": "Location information for Aerial UE communication can include horizontal and vertical speed if configured. Location information can be included in RRM report and in height-based reporting (as described in 16.18.3).\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "16.18.8\tBRID and DAA Support via A2X Communication",
                            "text_content": "The Aerial UE supports A2X communication which is broadcasting of BRID and DAA messages using NR sidelink. DAA can also be provided via unicast transmissions in NR sidelink. BRID and DAA message transmission is supported in both in-coverage and out-of-coverage scenarios and relies only on UE autonomous resource selection for NR sidelink communication. BRID and DAA follow the QoS framework defined for NR sidelink and dedicated A2X PQI values are stored in table 6.2.4.1-1 of TS 23.256 [60]. The NG-RAN can configure a separate SL Tx resource pool for BRID and DAA. The SL Tx pool selection for A2X is described in TS 38.321 [6], clause 5.22.\n",
                            "figures_meta_data": [],
                            "tables": []
                        }
                    ]
                },
                {
                    "title": "16.19\tSupport for Air to Ground Networks",
                    "description": "",
                    "summary": "",
                    "text_content": "",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": [
                        {
                            "title": "16.19.1\tOverview",
                            "text_content": "In Air-to-ground (ATG) network, an NG-RAN consisting of ground-based gNBs, which provide cell towers that send signals up to an aircraft's antenna(s) of onboard ATG terminal, with typical vertical altitude of around 10,000m and take-off/landing altitudes down to 3000m.\nCA and DC are not supported for ATG in this release of the specification.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "16.19.2\tTiming and Synchronization",
                            "text_content": "To accommodate the propagation delay in ATG, the timing relationship is enhanced by one cell-specific offset :\n-\t is a configured scheduling offset that needs to be larger or equal to the max RTT.\nThe scheduling offset  is used to allow the UE sufficient processing time between a downlink reception and an uplink transmission, see TS 38.213 [38].\nFor the serving cell, the network broadcasts coarse gNB location information. The UE shall have valid GNSS position as well as gNB location before connecting to an ATG cell. To achieve synchronisation, before and during connection to an ATG cell, the UE shall compute the RTT between UE and the gNB based on the GNSS position and the gNB location parameters, and autonomously pre-compensate the TTA for the RTT between the UE and the gNB.\nIn connected mode, the UE shall be able to continuously update the Timing Advance.\nThe UE may be configured to report Timing Advance during Random Access procedures or in connected mode. For an RRC_CONNECTED UE, event-triggered reporting of the Timing Advance is supported.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "16.19.3\tMobility",
                            "text_content": "The same principles as described in 9.2.1 apply to mobility in RRC_IDLE for ATG and the same principles as described in 9.2.2 apply to mobility in RRC_INACTIVE for ATG unless hereunder specified. The gNB reference location of the serving cell and neighbour cell(s) provided in SIB22 can be used for the UE to perform the idle/inactive measurement and mobility.\nThe UE can determine whether a network is for ATG connectivity implicitly by the existence of cellBarredATG in SIB1.\nThe same principle as described in 9.2.3.2 applies to ATG unless hereunder specified.\nThe same principle as described in 9.2.3.4 applies to ATG unless hereunder specified.\nATG supports the following additional trigger conditions upon which UE may execute CHO to a candidate cell, as defined in TS 38.331 [12]:\n-\tThe RRM measurement-based event A4;\n-\tA location-based trigger condition.\nA location-based trigger condition is always configured together with one of the measurement-based trigger conditions (CHO events A3/A4/A5) as defined in TS 38.331 [12].\n",
                            "figures_meta_data": [],
                            "tables": []
                        }
                    ]
                },
                {
                    "title": "16.20\tSupport of AI/ML for NG-RAN",
                    "description": "",
                    "summary": "",
                    "text_content": "",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": [
                        {
                            "title": "16.20.1\tGeneral",
                            "text_content": "Support of AI/ML for NG-RAN, as a RAN internal function, is used to facilitate Artificial Intelligence (AI) and Machine Learning (ML) techniques in NG-RAN.\nThe objective of AI/ML for NG-RAN is to improve network performance and user experience, through analysing the data collected and autonomously processed by the NG-RAN, which can yield further insights, e.g., for Network Energy Saving, Load Balancing, Mobility Optimization.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "16.20.2\tMechanisms and Principles",
                            "text_content": "Support of AI/ML in NG-RAN requires inputs from neighbour NG-RAN nodes (e.g. predicted information, feedback information, measurements) and/or UEs (e.g. measurement results).\nSignalling procedures used for the exchange of information to support AI/ML in NG-RAN, are use case and data type agnostic, which means that the intended usage of the data exchanged via these procedures (e.g., input, output, feedback) is not indicated.\nAI/ML algorithms and models are out of 3GPP scope, and the details of model performance feedback are also out of 3GPP scope.\nSupport of AI/ML in NG-RAN does not apply to ng-eNB.\nFor the deployment of AI/ML in NG-RAN, the following scenarios may be supported:\n-\tAI/ML Model Training is located in the OAM and AI/ML Model Inference is located in the NG-RAN node;\n-\tAI/ML Model Training and AI/ML Model Inference are both located in the NG-RAN node.\nThe following information can be configured to be reported by an NG-RAN node:\n-\tPredicted resource status information;\n-\tUE performance feedback;\n-\tMeasured UE trajectory;\n-\tEnergy Cost (EC).\nThe collection and reporting are configured through the Data Collection Reporting Initiation procedure, while the actual reporting is performed through the Data Collection Reporting procedure.\nThe collection of measured UE trajectory and UE performance feedback is triggered at successful Handover execution.\nCell-based UE trajectory prediction, which can be used e.g. for the Mobility Optimization use case, is transferred to the target NG-RAN node via the Handover Preparation procedure to provide information for e.g. subsequent mobility decisions. Cell-based UE trajectory prediction is limited to the first-hop target NG-RAN node.\n",
                            "figures_meta_data": [],
                            "tables": []
                        }
                    ]
                },
                {
                    "title": "16.21\tMulti-path Relay",
                    "description": "",
                    "summary": "",
                    "text_content": "",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": [
                        {
                            "title": "16.21.1\tGeneral",
                            "text_content": "In multi-path relay scenario, a MP Remote UE is connected to a single gNB via one direct path and one indirect path while the MP Remote UE is in RRC_CONNECTED state. For the indirect path, both L2 and L3 MP Relay architectures are supported. The L3 MP Relay architecture is transparent to the serving NG-RAN of the MP Relay UE, except for controlling sidelink resources. In the case of MP Remote UE using SL indirect path, mode 1 resource allocation is supported only for intra-DU case, with the SR/BSR and grant sent on the direct path.\nIn multi-path relay, the interface between MP Remote UE and MP Relay UE can be either PC5 or N3C. When the interface between MP Remote UE and MP Relay UE is N3C interface, the relationship of MP Remote UE and MP Relay UE is pre-configured or static, and it is up to implementation how to pre-configure or make it static.\nMulti-path relay supports MP Remote UE and MP Relay UE when they are in the intra-gNB, and PCell is always on the direct path.\nMulti-path relay is supported in the following cell deployment scenarios:\n-\tThe MP Relay UE and MP Remote UE are served by the same cell;\n-\tThe MP Relay UE and MP Remote UE are served by different intra-frequency cells of the same gNB;\n-\tThe MP Relay UE and MP Remote UE are served by different inter-frequency cells of the same gNB.\nMulti-path relay is supported in the following sidelink scenarios:\n-\tSidelink TX/RX and Uu link share the same carrier at the MP Remote UE;\n-\tSidelink TX/RX and Uu link use different carriers at the MP Remote UE;\n-\tSidelink TX/RX and Uu link share the same carrier at the MP Relay UE;\n-\tSidelink TX/RX and Uu link use different carriers at the MP Relay UE.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "16.21.2\tProtocol Architecture",
                            "text_content": "From L2 MP Remote UE perspective, three bearer types exist: direct bearer, indirect bearer, and split bearer. For direct bearer, only Uu radio resources are involved, and for indirect bearer, only PC5 or N3C radio resources are involved. For split bearer, both Uu and PC5/N3C radio resources are involved.\nFor multi-path relay operation by using SL indirect path, the protocol stacks for the user plane and control plane of L2 MP Relay architecture are illustrated in Figure 16.21.2.1-1, 16.21.2.1-2.\nIf PC5 interface is used between L2 MP Remote UE and L2 MP Relay UE, the SRAP sublayer is placed above the RLC sublayer for both CP and UP at both PC5 interface and Uu interface of the indirect path. For the direct path, the Uu SDAP, PDCP, RLC, MAC, PHY, and RRC are terminated at gNB and MP Remote UE. But for the indirect path, only the Uu SDAP, PDCP and RRC are terminated at gNB and MP Remote UE, while SRAP, RLC, MAC, and PHY are terminated in each hop (i.e., the link between L2 MP Remote UE and L2 MP Relay UE and the link between L2 MP Relay UE and the gNB). If duplication is not activated for a split bearer, in UL, a PDCP entity in the L2 MP Remote UE delivers a PDCP PDU to either a Uu RLC entity or a PC5 RLC entity having an SRAP entity over it. If duplication is activated for a split bearer, a PDCP entity in the L2 MP Remote UE delivers the same PDCP PDU to the Uu RLC entity and the PC5 RLC entity.\nFigure 16.21.2.1-1 illustrates the user plane protocol stack for L2 Multi-path Relay using SL indirect path, showcasing the various layers involved in data transmission. The figure depicts the interaction between the network elements, including the source node, intermediate nodes, and the destination node. The different layers, such as the transport layer, network layer, and data link layer, are clearly labeled, providing a comprehensive overview of the communication process. The figure emphasizes the role of the SL indirect path in enhancing network performance and reliability, making it a valuable resource for understanding the intricacies of L2 Multi-path Relay systems.\nFigure 16.21.2.1-1: User plane protocol stack for L2 Multi-path Relay using SL indirect path\n\nFigure 16.21.2.1-2 illustrates the control plane protocol stack for L2 Multi-path Relay using SL indirect path, showcasing the various layers involved in managing data transmission. The figure depicts the interaction between the network elements, including the network layer, transport layer, and data link layer, as well as the signaling and control mechanisms that enable efficient data forwarding. The use of SL indirect path indicates the implementation of a signaling-based approach to relay control, which relies on signaling protocols to manage the multi-path relay process. This figure provides a comprehensive overview of the complex interactions and protocols that underpin the performance and reliability of L2 Multi-path Relay systems.\nFigure 16.21.2.1-2: Control plane protocol stack for L2 Multi-path Relay using SL indirect path\nFor the multi-path relay using N3C indirect path between the Remote UE and Relay UE, the protocol stacks for the user plane and control plane of L2 MP Relay architecture are illustrated in Figure 16.21.2.2-1 and Figure 16.21.2.2-2. The L2 MP Relay UE and the L2 MP Remote UE are connected via a N3C interface.\nIn the multi-path relay using N3C indirect path, the SRAP sublayer does not exist on the protocol stack. Without the SRAP entity between L2 MP Remote UE and L2 MP Relay UE, the Uu SDAP, PDCP, and RRC are terminated at gNB and L2 MP Remote UE. While RLC, MAC, and PHY are terminated in Uu hop. An UL PDCP PDU in the L2 MP Remote UE can be delivered to a Uu RLC entity and an intended PDCP entity or RLC entity in the L2 MP Relay UE. It is supported for more than one RB over the Uu link of the L2 MP Relay UE by configuring 1:1 bearer mapping between the Radio bearer in the L2 MP Remote UE and Uu Relay RLC channel in the L2 MP Relay UE. The Uu Relay RLC channels for the PDU delivery of the L2 MP Relay UE's local traffic and relay traffic are configured differently. Bearer identification except LCID is not needed in L2 PDU over the Uu link. If the split bearer is configured and the PDCP PDU duplication is activated on the PDCP entity, the duplicated PDCP PDUs are delivered via both direct path and indirect path.\nFigure 16.21.2.2-1 illustrates the user plane protocol stack for L2 Multi-path Relay using N3C indirect path, showcasing the various layers involved in data transmission. The figure depicts the network stack, starting from the physical layer, moving up to the application layer. Key components include the network interface controller (NIC), the data link layer, the transport layer, and the application layer. The figure also highlights the role of the network processor (NPU) and the network processing unit (NPU) in processing and forwarding packets. The use of N3C indirect path technology is shown to enhance performance and reliability in multi-path relay networks.\nFigure 16.21.2.2-1: User plane protocol stack for L2 Multi-path Relay using N3C indirect path\nFigure 16.21.2.2-2 illustrates the control plane protocol stack for L2 Multi-path Relay using N3C indirect path, showcasing the various layers involved in managing network control functions. The figure depicts the interaction between the network elements, including the Network Node (NN), Network Node Controller (NNC), and Network Control Function (NCF). The NNC is responsible for managing the network resources, while the NCF handles the control plane functions. The NN is the entry point for the network, providing the interface between the user and the network. The figure highlights the importance of efficient control plane protocol design in enabling multi-path relaying for improved network performance and reliability.\nFigure 16.21.2.2-2: Control plane protocol stack for L2 Multi-path Relay using N3C indirect path\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "16.21.3\tControl plane procedure for multi-path relaying",
                            "text_content": "The L2 MP Remote UE needs to establish both a direct path and an indirect path. The L2 MP Remote UE adds the indirect path using PC5 link on top of the only direct path under the same gNB. And also, the L2 MP Remote UE using PC5 link adds the direct path on top of the only indirect path under the same gNB.\nMeanwhile, the L2 MP Remote UE adds the indirect path using N3C link on the only direct path under the same gNB. But it is not allowed that the L2 MP Remote UE using N3C link adds the direct path on the indirect path. The MP Relay UE using N3C indirect path is restricted to serve only one MP Remote UE.\nFor L2 MP Remote UE, only a single cell group is configured (i.e., only MCG is configured for the direct path and indirect path). The primary path of split SRB1 and SRB2 is always configured on direct path. In the L2 MP Remote UE, non-split SRB1/2 is allowed to be configured only on direct path.\nFigure 16.21.3.1-1 describes the procedures for the indirect path addition on the direct path for the L2 MP relaying. This procedure is applicable to the L2 MP Remote UE using SL indirect path or N3C indirect path except step 5.\nFigure 16.21.3.1-1 illustrates the procedure for indirect path addition on top of a direct path in a telecommunication network. The figure depicts a network with multiple nodes, including a direct path and an indirect path. The direct path is represented by a solid line, while the indirect path is represented by a dashed line. The figure shows how a signal can be added to the direct path by routing it through the indirect path. This can be useful in situations where the direct path is congested or unavailable, allowing the network to maintain connectivity and optimize performance. The figure also highlights the importance of efficient routing algorithms in managing network traffic and ensuring reliable communication.\nFigure 16.21.3.1-1: Procedure for indirect path addition on top of direct path\n0.\tThe L2 MP Remote UE performs data transmission and reception by using direct path on PCell.\n1.\tIf the L2 MP Remote UE will be connected with L2 MP Relay UE using PC5 link, the L2 MP Remote UE reports at least the list of the candidate L2 MP Relay UE ID and the cell ID of the candidate L2 MP Relay UEs.\nMeanwhile, if the MP Remote UE will be connected with L2 MP Relay UE using N3C link, the MP Remote UE reports at least the list of the C-RNTI and the cell ID of the connected candidate MP Relay UEs.\nNOTE 1:\tThe C-RNTI and cell ID of MP Relay UE using N3C link can be reported only if the secure connection between MP Remote UE and MP Relay UE is established.\n2.\tThe gNB decides to add the indirect path for the L2 MP Remote UE. The cell serving the direct path and the cell serving the L2 MP Relay UE on the indirect path belong to the same gNB but can be same or different.\n3.\tThe gNB sends an RRCReconfiguration message to the L2 MP Relay UE to configure the indirect path of the L2 MP Remote UE, if the L2 MP Relay UE is in RRC_CONNECTED.\n4.\tThe gNB sends the RRCReconfiguration message to the L2 MP Remote UE.\n5.\tThe L2 MP Remote UE establishes a PC5 unicast link with the target L2 MP Relay UE.\nNOTE 2:\tFor the N3C indirect path addition, step 5 is omitted. It is L2 MP Remote UE's implementation how to make N3C indirect path between L2 MP Remote UE and L2 MP Relay UE.\n6a.\tThe L2 MP Remote UE sends the RRCReconfigurationComplete message to the gNB at least via the direct path in order to complete the indirect path addition procedure.\n6b.\tIf a split SRB1 with duplication is configured, the L2 MP Remote UE also sends the RRCReconfigurationComplete message to the gNB via the indirect path served by the L2 MP Relay UE.\nNOTE 3:\tStep 5 can be executed after step 6a. Step 5 is independent of step 6a.\n7.\tThe L2 MP Remote UE performs data transmission and reception by using both the direct path on PCell and the indirect path served by a L2 MP Relay UE.\nIn the case that the selected L2 MP Relay UE for indirect path addition is in RRC_IDLE or RRC_INACTIVE, after receiving the path addition command, the L2 MP Remote UE should trigger the L2 MP Relay UE in RRC_IDLE or RRC_INACTIVE to move to RRC_CONNECTED. If the L2 MP Remote UE and L2 MP Relay UE are connected by using N3C link, it is L2 MP Remote/Relay UE's implementation on how to trigger the RRC_IDLE/RRC_INACTIVE L2 MP Relay UE to initiate RRC connection establishment procedure.\nIf the split SRB1 with duplication is not configured at the L2 MP Remote UE, the L2 MP Remote UE using SL indirect path sends PC5-RRC message to the L2 MP Relay UE. Upon receiving the PC5-RRC message, the L2 MP Relay UE in RRC_IDLE or RRC_INACTIVE initiates a Uu RRC connection establishment or an RRC connection resume.\nIf the split SRB1 with duplication is configured at the L2 MP Remote UE, the L2 MP Relay UE in RRC_IDLE or RRC_INACTIVE received RRCReconfigurationComplete message from the L2 MP Remote UE may a Uu RRC connection establishment or an RRC connection resume for sending the RRCReoncfigurationComplete message to the gNB.\nFigure 16.21.3.1-2 describes the procedures for the indirect path change under the single direct path in the L2 MP Relay operation. This procedure is applicable to the L2 MP Remote UE using SL indirect path or N3C indirect path except step 5.\nFigure 16.21.3.1-2 illustrates the step-by-step procedure for an indirect path change under a single procedure. The figure outlines the process, starting with the initial state where the path is not changed. It then progresses through various stages, including the establishment of a new path, the verification of the new path, and the final confirmation of the change. The figure emphasizes the importance of a systematic approach to ensure the smooth transition and minimal disruption to the network's operation. Key components include the network elements involved in the path change, such as routers and switches, and the protocols used for communication and coordination.\nFigure 16.21.3.1-2: Procedure for indirect path change under a single procedure\n0.\tThe L2 MP Remote UE performs data transmission and reception by using both the direct path on PCell and the indirect path served by a source L2 MP Relay UE.\n1.\tThe L2 MP Remote UE and the L2 MP Relay UE perform measurements based on measurement configuration. When the measurement reporting is triggered, the L2 MP Remote UE using SL indirect link reports at least signal strength (e.g., SD-RSRP/SL-RSRP) of the serving indirect path, the list of the candidate L2 MP Relay UE ID and the cell ID of the candidate L2 MP Relay UEs. Meanwhile, the MP Remote UE using N3C link reports at least the list of the C-RNTI and the cell ID of the connected candidate MP Relay UEs.\n2.\tThe gNB decides to change the indirect path of L2 MP Remote UE from the source L2 MP Relay UE to a target L2 MP Relay UE. The cell serving the direct path and the cell serving the source/target L2 MP Relay UE on the indirect path belong to the same gNB but can be same or different.\n3a.\tThe gNB sends an RRCReconfiguration message to the source L2 MP Relay UE to release the indirect path of the L2 MP Remote UE.\n3b.\tThe gNB sends an RRCReconfiguration message to the target L2 MP Relay UE to add the indirect path for the L2 MP Remote UE.\n4.\tThe gNB sends the RRCReconfiguration message to the L2 MP Remote UE on the direct path and/or the indirect path for indirect path change. If SRB1 is configured either direct path or indirect path to the L2 MP Remote UE, the RRCReconfiguration message is sent via one of the path on which the SRB1 is configured. If split SRB1 is configured, it is up to gNB implementation whether the RRCReconfiguration is sent via one of the paths or both paths.\n5.\tThe L2 MP Remote UE establishes a PC5-RRC connection with the target L2 MP Relay UE for using SL indirect path.\nNOTE 4:\tFor the N3C indirect path addition, step 5 is omitted. It is L2 MP Remote UE's implementation how to make N3C indirect path between L2 MP Remote UE and L2 MP Relay UE.\n6a.\tThe L2 MP Remote UE sends the RRCReconfigurationComplete message to the gNB at least via the direct path in order to complete the indirect path change procedure.\nNOTE 5:\tStep 5 can be executed after step 6a. Step 5 is independent of step 6a.\n6b.\tIf a split SRB1 with duplication is configured, the L2 MP Remote UE also sends the RRCReconfigurationComplete message to the gNB via the indirect path served by the target L2 MP Relay UE.\n7.\tThe L2 MP Remote UE performs data transmission and reception by using both the direct path on PCell and the indirect path served by a target L2 MP Relay UE.\nIn the case that the selected target L2 MP Relay UE for indirect path change is in RRC_IDLE or RRC_INACTIVE, after receiving the path change command, the L2 MP Remote UE should trigger the target L2 MP Relay UE in RRC_IDLE or RRC_INACTIVE to be in RRC_CONNECTED. If the target L2 MP Relay UE is not in RRC_CONNECTED in step 3, the gNB sends an RRCReconfiguration message to the target L2 MP Relay UE after the target L2 MP Relay UE enters RRC_CONNECTED.\nIf the split SRB1 with duplication is not configured at the L2 MP Remote UE, the L2 MP Remote UE sends the RRCReconfigurationComplete message only on the direct path in Step 6a. The L2 MP Remote UE using SL indirect path can send a PC5-RRC message to the target L2 MP Relay UE in RRC_IDLE or RRC_INACTIVE after or during Step 5. The target L2 MP Relay UE in RRC_IDLE or RRC_INACTIVE initiates an RRC connection establishment or an RRC connection resume upon receiving the PC5-RRC message from the L2 MP Remote UE. If the target L2 MP Relay UE is in RRC_IDLE or RRC_INACTIVE, the RRCReconfigurationComplete message at Step 6b is sent to the gNB after the target L2 MP Relay UE enters RRC_CONNECTED.\nIf the split SRB1 with duplication is configured at the L2 MP Remote UE, the target L2 MP Relay UE in RRC_IDLE or RRC_INACTIVE receiving RRCReconfigurationComplete message from the L2 MP Remote UE initiates an RRC connection establishment or an RRC connection resume for sending the RRCReconfigurationComplete message to the gNB at Step 6b.\nFigure 16.21.3.1-3 describes the procedures for the direct path addition on top of the indirect path for the L2 MP Relay operation. This procedure is only applicable to the L2 MP Remote UE using SL indirect path.\nFigure 16.21.3.1-3 illustrates the procedure for direct path addition on top of indirect path in a telecommunication network. The figure depicts the network nodes, including the source, intermediate nodes, and the destination, with the direct and indirect paths between them. The direct path is the most efficient route, while the indirect path may involve more hops and potentially higher latency. The figure demonstrates the process of adding a direct path to an existing indirect path to improve network performance. This can be achieved through various techniques such as traffic engineering, wavelength assignment, or resource allocation. The figure highlights the importance of optimizing network paths to ensure high-quality service delivery and efficient resource utilization.\nFigure 16.21.3.1-3: Procedure for direct path addition on top of indirect path\n0.\tThe L2 MP Remote UE performs data transmission and reception by using indirect path via PC5 link.\n1.\tThe L2 MP Remote UE perform measurements based on measurement configuration. When the measurement reporting is triggered, the L2 MP Remote UE reports at least the Uu signal strength of the serving cell and neighbour cells with the cell IDs (i.e., NCGI/NCI).\n2.\tThe gNB decides to add the direct path for the L2 MP Remote UE. The cell serving the direct path and the cell serving the L2 MP Relay UE on the indirect path belong to the same gNB but can be same or different.\n3.\tThe gNB sends an RRCReconfiguration message to the L2 MP Relay UE to update the indirect path configuration, if necessary.\n4.\tThe gNB sends the RRCReconfiguration message to the L2 MP Remote UE via the L2 MP Relay UE. The contents in the RRCReconfiguration message includes at least a target cell within direct path addition configuration.\n5.\tThe L2 MP Remote UE synchronizes to DL of the target cell serving the direct path and performs random access procedure towards the cell serving the direct path. The L2 MP Remote UE configures the target cell as PCell.\n6a.\tThe L2 MP Remote UE sends the RRCReconfigurationComplete message to the gNB at least via the direct path in order to complete the direct path addition procedure.\n6b.\tIf a split SRB1 with duplication is configured, the L2 MP Remote UE also sends the RRCReconfigurationComplete message to the gNB via the indirect path served by the L2 MP Relay UE.\n7.\tThe L2 MP Remote UE performs data transmission and reception by using both the direct path on PCell and the indirect path served by a L2 MP Relay UE.\nFigure 16.21.3.1-4 describes the procedures for the direct path change on top of the indirect path for the L2 MP Relay operation. This procedure is only applicable to the L2 MP Remote UE using SL indirect path.\nFigure 16.21.3.1-4 illustrates a step-by-step procedure for a direct path change under a single procedure. The figure outlines the process, which involves several steps, including the initiation of the procedure, the identification of the affected path, and the execution of the change. The figure also depicts the communication between different entities involved in the process, such as the network management station and the network element. The visual representation provides a clear understanding of the sequence of events and the interactions between the various components involved in the direct path change procedure.\nFigure 16.21.3.1-4: Procedure for direct path change under a single procedure\n0.\tThe L2 MP Remote UE performs data transmission and reception by using both the direct path on the source PCell and the indirect path served by a L2 MP Relay UE.\n1.\tThe L2 MP Remote UE and the L2 MP Relay UE perform measurements based on measurement configuration. The L2 MP Remote UE may report measurement results.\n2.\tThe gNB decides to change the direct path of the L2 MP Remote UE from the PCell (i.e. source PCell) to a new cell (i.e. target PCell). The source/target PCell serving the old/new direct path and the cell serving the L2 MP Relay UE on the indirect path belong to the same gNB but can be same or different.\n3.\tThe gNB sends an RRCReconfiguration message to the L2 MP Relay UE to update the indirect path configuration, if necessary.\n4.\tThe gNB sends the RRCReconfiguration message to the L2 MP Remote UE on the direct path and/or the indirect path for direct path change.\n5.\tThe L2 MP Remote UE synchronizes to DL of the target PCell serving the new direct path and performs random access procedure towards the target PCell serving the new direct path.\n6a.\tThe L2 MP Remote UE sends the RRCReconfigurationComplete message to the gNB at least via the direct path in order to complete the direct path change procedure.\n6b.\tIf a split SRB1 with duplication is configured, the L2 MP Remote UE also sends the RRCReconfigurationComplete message to the gNB via the indirect path served by the L2 MP Relay UE.\n7.\tThe L2 MP Remote UE performs data transmission and reception by using both the direct path on the target PCell and the indirect path served by a L2 MP Relay UE.\nIf the direct path addition/change is failed, the L2 U2N Remote UE always shall trigger RRCReestablishment.\nThe L2 MP Remote UE in RRC_CONNECTED performs Uu RLM (as described in clause 9.2.7).\nWhen the L2 MP Remote UE detects Uu Radio Link Failure (RLF) on the direct path, the L2 MP Remote UE triggers path failure reporting through the indirect path via a RRC message if split SRB1 is configured and the indirect path is not suspended. Otherwise, RRC connection re-establishment is initiated.\nWhen the L2 MP Remote UE using PC5 indirect path detects PC5 Radio Link Failure (RLF) and/or Uu link failure on the indirect path, the L2 MP Remote UE triggers path failure reporting through the direct path via a RRC message, if the direct path is not suspended.\nWhen the L2 MP Remote UE using N3C indirect path detects N3C link failure and/or Uu link failure on the indirect path, the L2 MP Remote UE triggers path failure reporting through the direct path via a RRC message, if the direct path is not suspended.\n16.21.3.3\tSystem Information\nThe L2 MP Remote UE can acquire any necessary SIB(s) over Uu interface or indirect path. If common search space for system information is configured with the active BWP on PCell, the L2 MP Remote UE can perform direct system information acquisition on PCell. The L2 MP Remote UE can also receive system information at lease PBCH/MIB on the direct path and directly acquires SFN from MIB on the direct path. Besides, the L2 MP Remote UE can receive the system information via dedicated RRC signalling via SRB1.\n",
                            "figures_meta_data": [],
                            "tables": []
                        }
                    ]
                }
            ]
        },
        {
            "title": "17\tInterference Management",
            "description": "",
            "summary": "",
            "tables": [],
            "figures_meta_data": [],
            "subsections": [
                {
                    "title": "17.1\tRemote Interference Management",
                    "description": "",
                    "summary": "",
                    "text_content": "The atmospheric ducting phenomenon, caused by lower densities at higher altitudes in the Earth's atmosphere, causes a reduced refractive index, causing the signals to bend back towards the Earth. A signal trapped in the atmospheric duct can reach distances far greater than normal. In TDD networks with the same UL/DL slot configuration, and in the absence of atmospheric ducting, a guard period is used to avoid the interference between UL and DL transmissions in different cells. However, when the atmospheric ducting phenomenon happens, radio signals can travel a relatively long distance, and the propagation delay exceeds the guard period. Consequently, the DL signals of an aggressor cell can interfere with the UL signals of a victim cell that is far away from the aggressor. Such interference is termed as remote interference. The further the aggressor is to the victim, the more UL symbols of the victim will be impacted.\nA remote interference scenario may involve a number of victim and aggressor cells, where the gNBs execute Remote Interference Management (RIM) coordination on behalf of their respective cells. Aggressor and victim gNBs can be grouped into semi-static sets, where each cell is assigned a set ID, and is configured with a RIM Reference Signal (RIM-RS) and the radio resources associated with the set ID. Each aggressor gNB can be configured with multiple set IDs and each victim gNB can be configured with multiple set IDs, whereas each cell can have at most one victim set ID and one aggressor set ID. Consequently, each gNB can be an aggressor and a victim at the same time.\nTo mitigate remote interference, the network enables RIM frameworks for coordination between victim and aggressor gNBs. The coordination communication in RIM frameworks can be wireless- or backhaul-based. The backhaul-based RIM framework uses a combination of wireless and backhaul communication, while in the wireless framework, the communication is purely wireless.\nIn both frameworks, all gNBs in a victim set simultaneously transmit an identical RIM reference signal carrying the victim set ID over the air.\nIn the wireless framework, upon reception of the RIM reference signal from the victim set, aggressor gNBs undertake RIM measures, and send back a RIM reference signal carrying the aggressor set ID. The RIM reference signal sent by the aggressor is able to provide information whether the atmospheric ducting phenomenon exists. The victim gNBs realize the atmospheric ducting phenomenon have ceased upon not receiving any reference signal sent from aggressors.\nIn the RIM backhaul framework, upon reception of the RIM reference signal from the victim set, aggressor gNBs undertake RIM measures, and establish backhaul coordination towards the victim gNB set. The backhaul messages are sent from individual aggressor gNBs to individual victim gNB, where the signalling is transparent to the core network. The RIM backhaul messages from aggressor to victim gNBs carry the indication about the detection or disappearance of RIM reference signal. Based on the indication from the backhaul message, the victim gNBs realize whether the atmospheric ducting and the consequent remote interference have ceased.\nIn both frameworks, upon realizing that the atmospheric ducting has disappeared, the victim gNBs stop transmitting the RIM reference signal.\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "17.2\tCross-Link Interference Management",
                    "description": "",
                    "summary": "",
                    "text_content": "When different TDD DL/UL patterns are used between neighbouring cells, UL transmission in one cell may interfere with DL reception in another cell: this is referred to as Cross Link Interference (CLI).\nTo mitigate CLI, gNBs can exchange and coordinate their intended TDD DL-UL configurations over Xn and F1 interfaces; and the victim UEs can be configured to perform CLI measurements. There are two types of CLI measurements:\n-\tSRS-RSRP measurement in which the UE measures SRS-RSRP over SRS resources of aggressor UE(s);\n-\tCLI-RSSI measurement in which the UE measures the total received power observed over RSSI resources.\nLayer 3 filtering applies to CLI measurement results and both event triggered and periodic reporting are supported.\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                }
            ]
        },
        {
            "title": "18\tSmall Data Transmission",
            "description": "",
            "summary": "",
            "tables": [],
            "figures_meta_data": [],
            "subsections": [
                {
                    "title": "18.0\tGeneral",
                    "description": "",
                    "summary": "",
                    "text_content": "Small Data Transmission (SDT) is a procedure allowing data and/or signalling transmission while remaining in RRC_INACTIVE state (i.e. without transitioning to RRC_CONNECTED state). SDT is enabled on a radio bearer basis and can be initiated either by the UE in case of MO-SDT (Mobile Originated SDT) or by the network in case of MT-SDT (Mobile Terminated SDT). MO-SDT is initiated by the UE only if less than or equal to a configured amount of UL data awaits transmission across all radio bearers for which SDT is enabled, the DL RSRP is above a configured threshold, and a valid SDT resource is available as specified in clause 5.27.1 of TS 38.321 [6]. MT-SDT is initiated by the network with an indication to the UE in a paging message when DL data awaits transmission for radio bearers configured for SDT; based on the indication, the UE initiates the MT-SDT only if the DL RSRP is above a configured threshold as specified in clause 5.27.1 of TS 38.321 [6]. When MT-SDT is initiated by the UE, a resume cause indicating MT-SDT is included in the RRCResumeRequest/RRCResumeRequest1. Maximum duration the SDT procedure can last is dictated by a SDT failure detection timer that is configured by the network (see clause 6.2.2 of TS 38.331 [12]). Network can enable MO-SDT, MT-SDT, or both in a cell.\nSDT procedure is initiated with either a transmission over RACH (configured via system information) or over Type 1 CG resources (configured via dedicated signalling in RRCRelease). The SDT resources can be configured on initial BWP for both RACH and CG. RACH and CG resources for SDT can be configured on either or both of NUL and SUL carriers. The CG resources for SDT are valid only within the PCell of the UE when the RRCRelease with suspend indication is received. CG resources are associated with one or multiple SSB(s). For RACH, the network can configure 2-step and/or 4-step RA resources for MO-SDT. When both 2-step and 4-step RA resources for MO-SDT are configured, the UE selects the RA type according to clause 9.2.6. If MT-SDT procedure is initiated over RACH, only the RACH resources not configured for SDT can be used by the UE. CFRA is not supported for SDT over RACH.\nOnce initiated, the SDT procedure is either:\n-\tsuccessfully completed after the UE is directed to RRC_IDLE (via RRCRelease) or to continue in RRC_INACTIVE (via RRCRelease or RRCReject) or to RRC_CONNECTED (via RRCResume or RRCSetup); or\n-\tunsuccessfully completed upon cell re-selection, expiry of the SDT failure detection timer, a MAC entity reaching a configured maximum PRACH preamble transmission threshold, an RLC entity reaching a configured maximum retransmission threshold, or integrity check failure while SDT procedure is ongoing, or expiry of SDT-specific timing alignment timer or configuredGrantTimer while SDT procedure is ongoing over CG and the UE has not received a response from the network after the initial PUSCH transmission.\nUpon unsuccessful completion of the SDT procedure, the UE transitions to RRC_IDLE.\nFor SDT, network should not send RRCReject in response to RRCResumeRequest/RRCResumeRequest1 if DL data over any radio bearer configured for SDT is transmitted.\nThe initial PUSCH transmission during the SDT procedure includes at least the CCCH message. When using CG resources for initial SDT transmission, the UE can perform autonomous retransmission of the initial transmission if the UE does not receive confirmation from the network (dynamic UL grant or DL assignment) before a configured timer expires as specified in clause 5.4.1 of TS 38.321 [6]. After the initial PUSCH transmission, subsequent transmissions are handled differently depending on the type of resource used to initiate the SDT procedure:\n-\tWhen using CG resources, the network can schedule subsequent UL transmissions using dynamic grants or they can take place on the following CG resource occasions. The DL transmissions are scheduled using dynamic assignments. The UE can initiate subsequent UL transmission only after reception of confirmation (dynamic UL grant or DL assignment) for the initial PUSCH transmission from the network. For subsequent UL transmission, the UE cannot initiate re-transmission over a CG resource.\n-\tWhen using RACH resources, the network can schedule subsequent UL and DL transmissions using dynamic UL grants and DL assignments, respectively, after the completion of the RA procedure.\nWhen SDT procedure is initiated, AS security is applied for all the radio bearers enabled for SDT as specified in clause 5.3.13.3 of TS 38.331 [12].\nWhile the SDT procedure is ongoing, if data appears in a buffer of any radio bearer not enabled for SDT, the UE initiates a transmission of a non-SDT data arrival indication using UEAssistanceInformation message to the network and, if available, includes the resume cause.\nSDT procedure over CG resources can only be initiated with valid UL timing alignment. The UL timing alignment is maintained by the UE based on a SDT-specific timing alignment timer configured by the network via dedicated signalling and, for initial CG-SDT transmission, also by DL RSRP of configured number of highest ranked SSBs which are above a configured RSRP threshold. Upon expiry of the SDT-specific timing alignment timer, the CG resources are released while maintaining the CG resource configuration.\nLogical channel restrictions configured by the network while in RRC_CONNECTED state and/or in RRCRelease message for radio bearers enabled for SDT, if any, are applied by the UE during SDT procedure.\nThe network may configure UE to apply ROHC continuity for SDT either when the UE initiates SDT in the PCell of the UE when the RRCRelease with suspend indication was received or when the UE initiates SDT in a cell of its RNA.\nFor SDT procedure over CG resources, the network may configure maximum time duration until the next valid CG occasion for initial CG-SDT transmission based on which the UE decides whether SDT procedure over CG resources can be initiated. The maximum time duration is configured per logical channel for MO-SDT and per UE for MT-SDT.\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "18.1\tSupport of SDT procedure over RACH",
                    "description": "",
                    "summary": "",
                    "text_content": "For SDT procedure over RACH, if the UE accesses a gNB other than the last serving gNB, the UL SDT data/signalling is buffered at the receiving gNB, and then the receiving gNB triggers the XnAP Retrieve UE Context procedure. The receiving gNB indicates SDT to the last serving gNB and the last serving gNB decides whether to relocate the UE context or not. Other SDT assistance information (e.g., single packet, multiple packets) may also be provided by the receiving gNB to help the decision of UE context relocation. If the UE is configured with the clock quality control information, the last serving gNB may perform full UE context relocation.\nIf the last serving gNB decides not to relocate the full UE context, it transfers a partial UE context containing SDT RLC context information necessary for the receiving gNB to handle SDT via the Partial UE Context Transfer procedure.\nThen, in case SDT is used for user data over DRBs, UL/DL tunnels are established for DRBs configured for SDT between the receiving gNB and the last serving gNB. The PDCP PDU of UL/DL data is transferred over the tunnels, until the last serving gNB terminates the SDT session and directs the UE to continue in RRC_INACTIVE by sending the RRCRelease message.\nOr in case SDT is used for signalling, SRB PDCP PDUs are transferred between the receiving gNB and the last serving gNB via the XnAP RRC Transfer procedure, until the last serving gNB terminates the SDT session and directs the UE to continue in RRC_INACTIVE by sending the RRCRelease message.\nDuring the SDT session, in case the receiving gNB detects that no more packets are to be transmitted, or radio link problem is detected, the receiving gNB may also request to terminate the SDT session to the last serving gNB via the UE Context Retrieve Confirmation procedure.\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "18.2\tSDT with UE context relocation",
                    "description": "",
                    "summary": "",
                    "text_content": "The overall procedure for SDT procedure over RACH with UE context relocation is illustrated in the figure 18.2-1.\nFigure 18.2 illustrates the process of Radio Access (RA) based Single-Frequency Network (SFN) with User Context Relocation (UCR) in a telecommunication network. The figure depicts the network architecture, including the Base Transceiver Station (BTS), Radio Access Network (RAN), and the Core Network (CN). The RA-based SDT with UCR is shown as a key feature, enabling efficient resource allocation and improved network performance. The figure highlights the importance of user context relocation in managing network congestion and enhancing overall network quality.\nFigure 18.2-1. RA-based SDT with UE context relocation\n1.\tThe UE sends an RRCResumeRequest as well as UL SDT data and/or UL SDT signalling to the Receiving gNB.\n2.\tThe Receiving gNB identifies the Last Serving gNB using the I-RNTI and retrieves the UE context by means of Xn-AP Retrieve UE Context procedure. The Receiving gNB indicates that the UE request is for an SDT and may also provide SDT assistance information (e.g., single packet, multiple packets).\n3.\tThe Last Serving gNB decides to relocate UE context and responds with the RETRIEVE UE CONTEXT RESPONSE message. The UL SDT data, if any, is delivered from the Receiving gNB to the UPF.\n4-6.\tThe Receiving gNB decides to keep UE in RRC_INACTIVE state for SDT. If loss of DL user data buffered in the Last Serving gNB shall be prevented, the Receiving gNB provides forwarding addresses via the Xn-U ADDRESS INDICATION message. The Receiving gNB also initiates NGAP Path Switch Request procedure to establish a NG UE-associated signalling connection to the AMF. After the Path Switch Request procedure, the buffered UL NAS PDU, if any, is delivered from the Receiving gNB to the AMF. And then, the subsequent UL/DL SDT data and/or signalling are transferred between UE and core network via the Receiving gNB.\nNOTE 1:\tIf the UP policy received from the Last Serving gNB is different from that received in the PATH SWITCH REQUEST ACKNOWLEDGE message, the Receiving gNB may either send the UE back to RRC_IDLE or move the UE to RRC_CONNECTED to update the security configuration.\n7.\tAfter the SDT transmission is terminated, the Receiving gNB generates and sends the RRCRelease message including the suspend indication to the UE to terminate the SDT procedure and continue in RRC_INACTIVE state.\nNOTE 2:\tIn case DL non-SDT data or DL non-SDT signalling arrives, or the UE assistance information (i.e. UL non-SDT data arrival indication) is received from the UE, the Receiving gNB may decide to directly send the UE to RRC_CONNECTED state by sending the RRCResume message.\nNOTE 3:\tThe Receiving gNB may decide to directly send the UE to RRC_CONNECTED state by sending the RRCResume message based on (e.g. large size of) DL SDT data or DL SDT signalling.\nNOTE 4:\tThe Receiving gNB may decide to directly send the UE to RRC_CONNECTED state by sending the RRCResume message based on the BSR received from the UE in case of uplink SDT data exceeding the data size threshold.\n8.\tThe Receiving gNB indicates to the Last Serving gNB to remove the UE context by sending the XnAP UE CONTEXT RELEASE message. The XnAP UE CONTEXT RELEASE message can be sent after step 6.\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "18.3\tSDT without UE context relocation",
                    "description": "",
                    "summary": "",
                    "text_content": "The overall procedure for SDT procedure over RACH without UE context relocation is illustrated in the figure 18.3-1.\nFigure 18.3 illustrates a Radio Access Network (RAN) based Software Defined Transport (SDT) without User Equipment (UE) context relocation. The figure depicts the RAN architecture, including the Radio Network Controller (RNC), Serving Gateway (SGW), and Packet Data Network Gateway (P-GW). The RAN is shown as a series of Remote Radio Heads (RRHs) connected to the core network through Fronthaul links. The figure highlights the importance of efficient RAN management and the role of SDT in supporting seamless network operations.\nFigure 18.3-1. RA-based SDT without UE context relocation\n1/2. The steps 1/2 are as defined in steps 1/2 in Figure 18.2-1.\n3.\tThe last serving gNB decides not to relocate the full UE context for SDT.\n4.\tThe last serving gNB transfers a partial UE context including the SDT related RLC context.\n5.\tThe receiving gNB acknowledges receiving the partial UE context and provides associated DL TNL address. The UE context is kept at the last serving gNB and the SDT related RLC context is established at the receiving gNB. Then UL/DL GTP-U tunnels are established for DRBs configured for SDT, if any, and the UL SDT data and/or signalling, if any, are forwarded to the last serving gNB, and then delivered to the core network.\nNOTE 1:\tThe DL signalling from the last serving gNB, if any, is forwarded to the receiving gNB via the RRC TRANSFER message, for which the receiving gNB delivers it to the UE.\nNOTE 1a:\tIn case DL non-SDT data or DL non-SDT signalling arrives, or UE assistance information (i.e. UL non-SDT data arrival indication) is received from the UE, the last serving gNB terminates the SDT procedure and directs the UE to continue in RRC_INACTIVE state by sending the RRCRelease message.\nNOTE 1b:\tThe last serving gNB may terminate the SDT procedure and direct the UE to continue in RRC_INACTIVE state by sending the RRCRelease message based on (e.g. large size of) DL SDT data or DL SDT signalling.\n6.\tThe receiving gNB detects the end of SDT session and sends the RETRIEVE UE CONTEXT CONFIRM message including whether this is a \"normal\" end of SDT transaction or a radio link problem, or large SDT volume from BSR.\n7.\tUpon receiving the RETRIEVE UE CONTEXT CONFIRM message and deciding to terminate the SDT, the last serving gNB responds to the receiving gNB with the RETRIEVE UE CONTEXT FAILURE message including an encapsulated RRCRelease message. The receiving gNB shall release the established partial UE context.\nNOTE 2:\tVoid.\nNOTE 3:\tVoid.\n8.\tThe receiving gNB sends the RRCRelease message to the UE.\nNOTE 4:\tVoid.\nNOTE 5:\tThe last serving gNB may terminate the SDT procedure and direct the UE to continue in RRC_INACTIVE state by sending the RRCRelease message upon receiving the indication about large uplink SDT data from the BSR from the receiving gNB in step 6.\n9.\tThe UE moves to RRC_INACTIVE state if the suspend indication is included in the RRCRelease message. Or else, the UE moves to RRC_IDLE state.\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "18.4\tMT-SDT with/without UE context relocation",
                    "description": "",
                    "summary": "",
                    "text_content": "The overall procedure for MT-SDT procedure with/without UE context relocation is illustrated in the figure 18.4-1.\nFigure 18.4-1 illustrates the process of Mobile Terminated Synchronization Distribution Function (MT-SDT) with and without User Equipment (UE) context relocation in a mobile network. The figure depicts the synchronization process, where the MT-SDT synchronizes with the Mobile Switching Center (MSC) and other network elements. In the case of UE context relocation, the figure shows how the MT-SDT maintains synchronization with the relocated UE, ensuring seamless handover and maintaining network integrity. The figure highlights the importance of context relocation in maintaining network synchronization and providing a smooth user experience.\nFigure 18.4-1: MT-SDT with/without UE context relocation\n1.\tDL user data and/or DL NAS signalling are received at the Last Serving gNB for the UE in RRC_INACTIVE state.\n2.\tThe Last Serving gNB may send MT-SDT information to the neighbour gNBs within the RNA, via XnAP RAN PAGING message.\n3.\tThe gNB that receives MT-SDT information within the RNA, takes into account the MT-SDT information received in the XnAP RAN PAGING message to decide whether to trigger MT-SDT Paging. The gNB which ultimately reaches the UE via the Uu Paging becomes the Receiving gNB.\nNOTE 1:\tIn case that the Receiving gNB decides not to trigger MT-SDT paging, the above step 3 and subsequent steps are the same as Figure 9.2.2.4.2 from step 3.\n4/5.\tThe UE may decide to initiate MT-SDT procedure and in this case sends an RRCResumeRequest message with an MT-SDT resume cause to the Receiving gNB.\n6.\tThe following steps are the same as Figure 18.2-1/18.3-1 from step 2, except that the first SDT user data and/or NAS signalling is DL SDT data and/or DL SDT NAS signalling.\nNOTE 2:\tIn case DL non-SDT data or DL non-SDT signalling has arrived between step 2 and step 6, the Last Serving gNB should relocate the UE context to the Receiving gNB and forward the received data to the Receiving gNB.\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                }
            ]
        },
        {
            "title": "19\tSupport for NR coverage enhancements",
            "description": "To improve NR uplink coverage for both FR1 and FR2, the following enhancements on PUSCH, PUCCH, PRACH and MSG3 PUSCH are supported:\n-\tEnhanced aggregation of multiple slots with TB repetition is supported for both PUSCH transmission with dynamic and configured grant. In addition, counting based on available slots is supported. The maximum number of aggregated slots for counting based on available slots and counting based on physical slots are both 32.\n-\tTB processing over multiple slots with and without repetition is supported for both PUSCH transmission with dynamic grant and configured grant. For a single transmission of TB processing over multiple slots PUSCH, the TB size is determined based on multiple slots.\n-\tDMRS bundling where the UE maintains phase continuity and power consistency across PUSCH transmissions or PUCCH repetitions to enable improved channel estimation is supported. Inter-slot frequency hopping with DMRS bundling is supported.\n-\tDynamic PUCCH repetition factor indication configured per PUCCH resource is introduced, applicable to all PUCCH formats.\n-\tAggregation of multiple slots with TB repetition for MSG3 transmission is supported on both NUL and SUL, applicable to CBRA with 4-step RA type. If configured, the UE requests MSG3 repetition via separate RACH resources when the RSRP of DL path-loss reference is lower than a configured threshold. BWP configured with RACH resources solely for MSG3 repetition is also supported without the need to consider the RSRP of DL path-loss reference by the UE.\n-\tMSG1 repetition with same beam is supported on both NUL and SUL for 4-step RA type. For CBRA, network broadcasts separate RSRP thresholds for different repetition numbers. UE performs MSG1 repetition via RACH resources that are different from RACH resources without MSG1 repetition. CFRA for MSG1 repetition for ReconfigurationWithSync is supported and the network signals the MSG1 repetition number explicitly. Fallback from lower number to higher number of MSG1 repetition is supported among the set(s) of RACH resources associated with same feature(s). Fallback from lower number to higher number of MSG1 repetition is not supported for MSG1-based SI request or if UE has performed fallback from CFRA to CBRA. Fallback from CFRA with MSG1 repetition to 4-step CBRA with MSG1 repetition using the same MSG1 repetition number as the one used for CFRA is supported.\n-\tDynamic switching between DFT-S-OFDM and CP-OFDM for PUSCH is supported. The indication for switching between DFT-S-OFDM and CP-OFDM for PUSCH is contained in DCI format 0_1/0_2, which is configured separately for each BWP. PHR can be reported for current transmission of PUSCH using one of the DFT-S-OFDM or CP-OFDM waveform and an assumed transmission of PUSCH using the other waveform than the current one.\n-\tFrequency domain spectrum shaping without frequency extension is supported for MPR/PAR reduction on the PUSCH transmission, and the change value of UE power class is reported in the PHR.\n",
            "summary": "",
            "tables": [],
            "figures_meta_data": [],
            "subsections": []
        },
        {
            "title": "20\tSupport for Multi-USIM devices",
            "description": "",
            "summary": "",
            "tables": [],
            "figures_meta_data": [],
            "subsections": [
                {
                    "title": "20.1\tGeneral",
                    "description": "",
                    "summary": "",
                    "text_content": "NG-RAN may support one or more of the following enhancements for MUSIM device operation:\n-\tPaging Collision Avoidance, as described in clause 20.2;\n-\tUE notification on Network Switching, as described in clause 20.3;\n-\tTemporary UE capability restriction and removal of restriction, as described in clause 20.4.\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "20.2\tPaging Collision Avoidance",
                    "description": "",
                    "summary": "",
                    "text_content": "The purpose of paging collision avoidance is to address the overlap of paging occasions on both USIMs when a MUSIM device (e.g. dual USIM device) is in RRC_IDLE/RRC_INACTIVE state in both the networks (e.g. Network A and Network B) associated with respective USIMs. Network A is NR and Network B is E-UTRA or NR.\nA MUSIM device may determine potential paging collision on two networks and may trigger actions to prevent potential paging collision on NR network as specified in TS 23.501 [3].\nNOTE:\tIt is left to UE implementation as to how it selects one of the two RATs/networks for paging collision avoidance.\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "20.3\tUE notification on Network Switching",
                    "description": "",
                    "summary": "",
                    "text_content": "For MUSIM operation, a MUSIM device in RRC_CONNECTED state in Network A may have to switch from Network A to Network B. Network A is NR and Network B can either be E-UTRA or NR. Before switching from Network A, a MUSIM device should notify Network A to either leave RRC_CONNECTED state, or be kept in RRC_CONNECTED state in Network A while temporarily switching to Network B.\nWhen configured to do so, a MUSIM device can signal to the Network A a preference to leave RRC_CONNECTED state by using RRC (see TS 38.331 [12]) or NAS signalling (see TS 23.501 [3]). After sending a preference to leave RRC_CONNECTED state by using RRC signalling, if the MUSIM device does not receive an RRCRelease message from the Network A within a certain time period (configured by the Network A, see TS 38.331 [12]), the MUSIM device can enter RRC_IDLE state in Network A.\nWhen configured to do so, a MUSIM device can signal to the Network A a preference to be temporarily switching to Network B while remaining in RRC_CONNECTED state in Network. This is indicated by scheduling gaps preference. This preference can include information for setup or release of gap(s). The Network A can configure at most 4 gap patterns for MUSIM purpose: three periodic gaps and a single aperiodic gap. The Network A should always provide at least one of the requested gap pattern or no gaps. Network providing an alternative gap pattern instead of the one requested by the UE is not supported in this release.\nWhen configured to do so, a MUSIM device can include priority of periodic gap(s) in addition to scheduling gaps preference, and the priority preference should be indicated for all periodic gap(s). If the MUSIM device indicates gap priority preference, it can also indicate its preference on using keep solution (defined in TS 38.133[13]).\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "20.4\tTemporary UE capability restriction and removal of restriction",
                    "description": "",
                    "summary": "",
                    "text_content": "For MUSIM operation, a MUSIM device in RRC_CONNECTED state in Network A may indicate its preference on temporary UE capability restriction or removal of restriction with Network A when the MUSIM device needs transmission or reception in Network B (e.g., including start/stop connection to Network B). Network A is NR and Network B can either be E-UTRA or NR. The MUSIM device may request a temporary capability restriction only after the Network signals via RRC that this is allowed.\nWhen configured to do so, a MUSIM device can indicate one or more of the following temporary capability restriction or removal of restriction to the Network A:\n-\tA MUSIM device can explicitly request SCell(s) or SCG to be released;\n-\tA MUSIM device can indicate its preference on temporary maximum MIMO layers and/or supported channel bandwidth for specific serving cells for both UL/DL;\n-\tA MUSIM device can indicate its preference on the temporary maximum number of CCs per UL/DL;\n-\tA MUSIM device can indicate its preference on the concerned band(s) or band combination(s) (e.g. forbidden and/or affected band(s) or band combination(s)) based on a band-filter list configured by network. For affected band(s) and band combination(s), this preference can include temporary maximum MIMO layers and/or supported channel bandwidth for both UL/DL;\n-\tA MUSIM device can indicate the measurement gap requirement changes.\nWhen it is allowed by Network A in SIB1, a MUSIM device can indicate to the Network A that its capabilities are temporarily restricted in RRCSetupComplete/RRCResumeComplete message while the MUSIM device is already in RRC_CONNECTED state in Network B.\nWhen a MUSIM device is in RRC_CONNECTED state in both Network A and Network B, if Network B is NR, it is up to UE implementation to select which network to request temporary UE capability restriction; if Network B is E-UTRA, the request for temporary UE capability restriction can only be performed on Network A.\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                }
            ]
        },
        {
            "title": "21\tApplication Layer Measurement Collection",
            "description": "",
            "summary": "",
            "tables": [],
            "figures_meta_data": [],
            "subsections": [
                {
                    "title": "21.1\tOverview",
                    "description": "",
                    "summary": "",
                    "text_content": "The QoE Measurement Collection function enables collection of application layer measurements from the UE. The supported service types are:\n-\tQoE Measurement Collection for DASH streaming services;\n-\tQoE Measurement Collection for MTSI services;\n-\tQoE Measurement Collection for VR services.\nFor DASH, MTSI, VR, the QoE measurement collection is supported in RRC_CONNECTED state only, unless the application data is delivered via MBS broadcast communication service.\nThe QoE Measurement Collection function supports collection of QoE measurements for MBS communication service. The measurement collection is supported for the following two communication service types:\n-\tMBS broadcast;\n-\tMBS multicast.\nQoE measurement collection for application sessions delivered via MBS broadcast is supported in RRC_CONNECTED, RRC_INACTIVE, and RRC_IDLE states. QoE measurement collection for the application sessions delivered via MBS multicast is supported in RRC_CONNECTED state only. Both signalling based and management based QoE measurement collection are supported in NR SA and NR-DC. Further details of NR-DC operation can be found in TS 37.340 [21] and clause 21.7.\nNOTE:\tThe naming QoE Measurement is used in NG, Xn, and interfaces between the OAM and the gNB. In the Uu interface, the naming application layer measurement is used and it is equal to QoE Measurement.\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "21.2\tQoE Measurement Configuration",
                    "description": "",
                    "summary": "",
                    "text_content": "",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": [
                        {
                            "title": "21.2.1\tQoE Measurement Collection Activation and Reporting",
                            "text_content": "The feature is activated in the gNB either by direct configuration from the OAM system (management-based activation), or by signalling from the OAM via the 5GC (signalling-based activation), containing UE-associated QoE configuration. One or more QoE measurement collection jobs can be activated at a UE per service type, and each QoE measurement configuration is uniquely identified by a QoE reference.\nFor signalling-based QoE measurements, the OAM initiates the QoE measurement activation for a specific UE via the 5GC, and the gNB receives one or more QoE measurement configurations by means of UE-associated signalling. The QoE measurement configuration for signalling-based activation includes an application layer measurement configuration list and the corresponding information for QoE measurement collection, e.g., QoE reference, service type, MCE IP address, slice scope, area scope, MDT alignment information, the indication of available RAN visible QoE metrics and assistance information.\nFor management-based QoE measurement activation, the OAM sends one or more QoE measurement configurations directly to the gNB. The QoE measurement configuration for management-based activation also includes an application layer measurement configuration list and the corresponding information for QoE measurement collection. The gNB selects UE(s) that meet the required QoE measurement capability, area scope and slice scope.\nApplication layer measurement configuration received by the gNB from OAM or 5GC is encapsulated in a transparent container, which is forwarded to a UE as Application layer configuration in the RRCReconfiguration message (there can be multiple configurations in the same message). Application layer measurement reports received from UE's application layer are encapsulated in a transparent container and sent to the network in the MeasurementReportAppLayer message, as specified in TS 38.331 [12]. The UE can send multiple application layer measurement reports to the gNB in one MeasurementReportAppLayer message. In order to allow the transmission of application layer measurement reports which exceed the maximum PDCP SDU size, segmentation of the MeasurementReportAppLayer message may be enabled by the gNB. A measurement configuration application layer ID conveyed in the RRC signalling is used to identify the application layer measurement configuration and report between the gNB and the UE. The measurement configuration application layer ID is mapped to the QoE reference in the gNB, and the gNB forwards the application layer measurement report to MCE together with the QoE reference. The gNB can release one or multiple application layer measurement configurations from the UE in one RRCReconfiguration message at any time. The UE may additionally be configured by the gNB to report when a QoE measurement session starts or stops for a certain application layer measurement configuration.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "21.2.2\tQoE Measurement Collection Deactivation",
                            "text_content": "The QoE Measurement Collection deactivation permanently stops all or some of the QoE measurement collection jobs towards a UE, resulting in the release of the corresponding QoE measurement configuration(s) in the UE. The deactivation of QoE measurement collection is supported by using UE-associated signalling. A list of QoE references is used to deactivate the corresponding QoE measurement collection job(s).\nUpon reception of the QoE release message in an application layer measurement configuration, the UE discards any unsent application layer measurement reports corresponding to the released application layer configuration. The UE discards the reports received from application layer when it has no associated application layer measurement configuration configured.\nThe network can replace a QoE measurement configuration with another one by deactivating an existing QoE measurement configuration and activating another QoE measurement configuration of the same QoE measurement configuration type.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "21.2.3\tHandling of QMC during RAN Overload",
                            "text_content": "The QoE measurement collection pause/resume procedure is used to pause/resume reporting of one or multiple QoE measurement configurations in a UE in RAN overload situation.\nThe gNB can use the RRCReconfiguration message to temporarily stop the UE from sending application layer measurement reports associated with one or multiple application layer measurement configurations. When the UE receives the QoE measurement collection pause indication, the UE temporarily stores application layer measurement reports in AS layer. When the UE receives the QoE measurement collection resume indication, the UE sends the stored application layer measurement reports to the gNB.\nFor a QoE measurement configuration, the assistance information provided by the OAM may be considered by the gNB for deciding whether to pause/resume the measurement reporting of certain QoE measurement configurations in case of RAN overload.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "21.2.4\tQoE Measurement Handling in RRC_IDLE and RRC_INACTIVE States",
                            "text_content": "If the UE enters RRC_INACTIVE, the UE AS configuration for the QoE is stored in the UE Inactive AS context.\nIf the UE enters RRC_IDLE state, the UE releases all application layer measurement configurations except the application layer configurations explicitly indicated by the gNB as applicable in RRC_IDLE and RRC_INACTIVE states.\nFor application measurement configurations applicable in RRC_IDLE and RRC_INACTIVE states, the UE continues on-going QoE measurement collection when entering RRC_IDLE or RRC_INACTIVE state, and also when returning to RRC_CONNECTED state. The UE may also start QoE collection according to the stored QoE configuration while in RRC_IDLE or RRC_INACTIVE state. The UE keeps the application layer measurement configurations but does not start new QoE sessions when it is outside of the area scope for QoE configurations in RRC_IDLE and/or RRC_INACTIVE state. The UE stores the application layer measurement reports generated while in RRC_IDLE and/or RRC_INACTIVE state in the AS layer. The gNB can retrieve the application layer measurement reports/configurations and session status indication by configuring SRB4 or SRB5 after it receives application layer measurement reports/configurations availability indication. The UE can send idle/inactive application layer measurement reports to the gNB only when it has moved to RRC_CONNECTED state due to other reasons.\nUpon UE's transition from RRC_IDLE to RRC_CONNECTED, the gNB serving the UE should ensure that it does not release an already configured signalling-based QoE measurement configuration for the sake of configuring a new management-based QoE measurement configuration.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "21.2.5\tPer-slice QoE Measurement",
                            "text_content": "When a service is provided within a configured slice, the QoE Measurement for this service type can also be configured together with the corresponding slice scope, so that the user experience of this service can also be evaluated on a per-slice basis. Multiple QoE measurement configurations can be configured for the same service type, and each configuration can pertain to different slices, where each QoE measurement configuration is identified with a QoE reference.\nThe UE includes the network slice identifier inside the QoE report container when reporting QoE measurement reports.\n",
                            "figures_meta_data": [],
                            "tables": []
                        }
                    ]
                },
                {
                    "title": "21.3\tQoE Measurement Continuity for Mobility",
                    "description": "",
                    "summary": "",
                    "text_content": "QoE measurement collection continuity for intra-system intra-RAT handover is supported, with the Area Scope parameters configured by the OAM, where the network is responsible for keeping track of whether the UE is inside or outside the area scope. A UE continues an ongoing QoE measurement even if it leaves the area scope, unless the network indicates to the UE to release the application layer measurement configuration.\nFor the handover, the source gNB may transmit the information related to one or more application layer measurement configurations of the UE to the target gNB via XnAP or NGAP. For signalling-based QoE, the service type indication, QoE reference, and, optionally, the MCE IP address, measurement configuration application layer ID, MDT alignment information, area scope, slice support list for QMC, available RAN visible QoE metrics and measurement status are passed to the target gNB. For management-based QoE, the service type indication, measurement configuration application layer ID, the MCE IP address and QoE measurement status are passed to the target gNB. For RRC_INACTIVE state mobility, QoE measurement configuration(s) of a specific UE can be retrieved from the gNB hosting the UE context when it resumes to the RRC_CONNECTED state.\nFor signalling-based QoE, at handover to a target gNB that supports QoE measurement collection, the target gNB decides which of the application layer measurement configurations should be kept or released, e.g., based on application layer measurement configuration information received from the source gNB in Xn/NG signalling.\nThe continuity of QoE measurement configuration and reporting in NR-DC scenario is supported as specified in TS 37.340 [21].\nFor QoE sessions pertaining to data flows received via MBS broadcast, QoE measurement collection may continue during the RRC_INACTIVE and RRC_IDLE.\nUpon UE's transition from RRC_IDLE to RRC_CONNECTED, the gNB serving the UE should ensure that it does not release an already configured signalling-based QoE measurement configuration for the sake of configuring a new management-based QoE measurement configuration.\nQoE measurements for ongoing sessions should be continued when switching between MBS multicast and unicast transmission modes.\nWhen the UE resumes the connection with a gNB that does not support QoE, the UE releases all application layer measurement configurations.\nQoE measurement collection continuity for intra-system inter-RAT handover is supported. For the handover from NR to LTE, only one QoE measurement can be continued when the UE connects to the target LTE node. The source gNB decides which QoE measurement to keep and sends the information about this QoE measurement to the target ng-eNB.\nFor intra-5GC handover from E-UTRA to NR, the UE releases the LTE QoE configuration if received from the source RAT and the UE applies NR QoE configuration(s) if received from the target RAT.\nFor intra-5GC handover from NR to E-UTRA, the UE releases all NR QoE configuration(s) if received from the source RAT, and the UE applies the LTE QoE configuration if received from the target RAT.\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "21.4\tRAN Visible QoE Measurements",
                    "description": "",
                    "summary": "",
                    "text_content": "RAN visible QoE measurements are configured at the UE by the gNB, where a subset of configured QoE metrics is reported from the UE to the gNB as an explicit IE readable by the gNB. The RAN visible QoE measurements can be used by the gNB for network optimization. The RAN visible QoE measurements are supported for the DASH streaming and VR services. The gNB configures the RAN visible QoE measurement of all or some of the available RAN visible QoE metrics, where the indication of metric availability is received by the gNB as part of management-based or the signalling-based QoE configuration. The set of available RAN visible QoE metrics is a subset of the metrics configured as part of QoE measurement configuration encapsulated in the application layer measurement configuration container. RAN visible QoE measurements and encapsulated QoE measurements can be configured together or separately. RAN visible QoE measurements can only be configured if there is a corresponding QoE measurement configuration for the same service type configured at the UE. The gNB may modify a RAN visible QoE configuration by releasing it and configuring the UE with a new RAN visible QoE configuration pertaining to the same QoE reference. In this case, the new RAN visible QoE configuration applies immediately, i.e., even during the same application session.\nMultiple simultaneous RAN visible QoE measurement configurations and reports can be supported for RAN visible QoE measurements, and each RAN visible QoE measurement configuration and report is identified by the same measurement configuration application layer ID as the corresponding QoE measurement configuration and measurement report. After receiving the RAN visible QoE measurement configuration, the UE RRC layer forwards the configuration to the application layer, indicating the service type, the measurement configuration application layer ID and, optionally, the reporting periodicity for RAN visible QoE. The application layer sends the RAN visible QoE measurement report associated with the measurement configuration application layer ID to the UE's AS layer. The PDU session ID(s) and QoS Flow ID(s) per PDU session ID corresponding to the service that is subject to QoE measurements can also be reported by the UE along with the RAN visible QoE measurement results.\nIf there is no reporting periodicity defined in the RAN visible QoE configuration, the UE sends both RAN visible QoE measurement reports and the QoE measurement reports to the gNB in the same MeasurementReportAppLayer message, except when QoE measurement reporting pause indication is received (e.g., in case of RAN overload). When a QoE measurement collection is paused, if there is no reporting periodicity defined in the RAN visible QoE configuration, the encapsulated QoE reports are stored at the UE's RRC layer, but the RAN visible QoE reports continue to be reported to the gNB with the reporting periodicity configured for encapsulated QoE reporting. The RAN visible QoE measurements can be reported with a reporting periodicity different from the one of the corresponding encapsulated QoE measurements, when a dedicated RAN visible QoE reporting periodicity is configured by the gNB. The UE Application layer can measure the RAN visible QoE metrics based on this reporting periodicity.\nThe gNB can release one or multiple RAN visible QoE measurement configurations from the UE in one RRCReconfiguration message at any time. If the encapsulated QoE configuration is released, the corresponding RAN visible QoE configuration shall be released as well.\nThe RAN visible QoE configuration can be transferred from the source gNB to the target gNB upon mobility and from the old gNB to the new gNB during context retrieval. The target gNB or the new gNB can generate a new RAN visible QoE configuration based on the available RAN visible QoE metrics received and can send the new RAN visible QoE configuration to the UE during handover or the RRC resume procedure.\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "21.5\tAlignment of MDT and QoE Measurements",
                    "description": "",
                    "summary": "",
                    "text_content": "The radio-related measurements may be collected via immediate MDT for all types of supported services for the purpose of QoE analysis. The MCE/TCE performs the correlation of the immediate MDT measurement results and the QoE measurement results collected at the same UE.\nThe following is supported:\n-\tAlignment between a signalling-based QoE measurement and a signalling-based MDT measurement. In this case, the signalling-based QoE configuration sent to the gNB includes the NG-RAN Trace ID of the signalling-based MDT measurement.\n-\tAlignment between a management-based QoE measurement and a management-based MDT measurement.\nThe UE configured with QoE measurements sends an indication to inform the gNB about the start or the stop of a QoE measurement session of configured QoE measurements. The gNB can activate the MDT measurements that are to be aligned with the QoE measurements performed by the UE upon/after receiving the QoE measurement session start indication from the UE. The gNB may activate the MDT measurements upon/after receiving the MDT activation message from the OAM. The gNB can deactivate the aligned MDT measurements according to an OAM command which may, e.g., be triggered by the session stop indication.\nThe gNB includes time stamp information to the QoE measurement reports to enable the correlation of corresponding measurement results of MDT and QoE at the MCE/TCE. In addition, the gNB includes the MDT session identifiers (Trace Reference and Trace Recording Session Reference) in the corresponding QoE measurement report.\n21.6\tQoE Measurement Collection in High Mobility Scenarios\nQoE measurements can be confined to high mobility state of the UE and/or to HSDN cells.\n21.7\tSupport for RAN visible QoE measurements and reporting in NR-DC\nEither the MN or the SN can generate and send a RAN visible QoE configuration to the UE. The gNB that has initially configured a UE in NR-DC with an RVQoE configuration can modify and release the RAN visible QoE configuration as long as the UE is connected to this gNB. The gNB that configures the encapsulated QoE measurements to UE is referred to as the RAN visible QoE-configuring gNB, and the peer node is referred to as the non-RAN visible QoE-configuring gNB. Upon mobility, the RAN visible QoE-configuring gNB may be changed.\nThe UE may send RAN visible QoE reports to the network using either SRB4 or SRB5. In addition, the gNB that received a RAN visible QoE report can forward the report to the other gNB (the SN or the MN). QoE reports and RAN visible QoE reports pertaining to the same QoE Reference can be sent over the same SRB or they can be sent over different SRBs.\nThe RAN visible QoE-configuring gNB can configure RAN visible QoE measurements at a UE without a priori knowledge about which gNB(s) will provide the bearer(s) for a future application session. During the lifetime of an application session, to ensure that the RAN visible QoE reports are sent to the gNB(s) that provide the bearer(s) which carry the data flow(s) associated with the RAN visible QoE measurement result in a RAN visible QoE report, the gNB receiving the RAN visible QoE reports determines the bearer(s) used to deliver the application session data flow(s) and the associated gNB (s). The determination may be based on the PDU session ID(s) and the QoS flow ID(s) indicated in a received RAN visible QoE report.\nWhen the RAN visible QoE-configuring gNB receives a RAN visible QoE measurement report and determines that the non-RAN Visible QoE-configuring gNB provides at least one bearer for the application session, the RAN Visible QoE-configuring gNB indicates that to the non-RAN Visible QoE-configuring gNB. The non-RAN Visible QoE-configuring gNB can then, if needed, indicate to the RAN visible QoE-configuring gNB its preference with respect to the reporting path for the subsequent RAN visible QoE reports and its preferred RAN visible QoE configuration parameters.\nIf a gNB receives a RAN visible QoE report from a UE in NR-DC, and determines that the bearer(s) for the application session data flow(s) is (are) also provided by the other gNB, or only, provided by the other gNB, the gNB that received the RAN visible QoE measurement report may forward the received RAN visible QoE report to the other gNB. The RAN visible QoE reports can be transferred between the MN and the SN via the RRC TRANSFER message. The RAN visible QoE configuration may also be modified or released.\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                }
            ]
        },
        {
            "title": "A.1\tPDU Session Establishment",
            "description": "The following figure shows an example message flow for a PDU session establishment. NAS procedures details between gNB and 5GC can be found in TS 23.501 [3], TS 23.502 [22] and TS 38.413 [26].\nFigure A.1-1 illustrates the process of PDU session establishment, which involves the establishment of a Point-to-Point Protocol (PPP) connection between a client device and a Provider Edge (PE) device. The figure depicts the initial handshake phase, where the client sends a PPP request to the PE device. The PE device responds with a PPP offer, initiating the negotiation process. Once the parameters are agreed upon, the PPP connection is established, allowing for the transmission of data between the client and the provider's network. The figure highlights the importance of secure and efficient session establishment in modern telecommunications networks.\nFigure A.1-1: PDU session establishment\n1.\tUE requests a PDU session establishment to AMF.\n2.\tAMF sends a PDU SESSION RESOURCE SETUP REQUEST message to gNB, which includes the NAS message to be sent to the UE with NAS QoS related information.\n3.\tgNB sends an RRCReconfiguration message to UE including the configuration of at least one DRB and the NAS message received at Step 2.\n4.\tUE establishes the DRB(s) for the new PDU session and creates the QFI to DRB mapping rules.\n5.\tUE sends an RRCReconfiguration Complete message to gNB.\n6.\tgNB sends a PDU SESSION RESOURCE SETUP RESPONSE message to AMF.\n7.\tUser Plane Data can then be exchanged between UE and gNB over DRB(s) according to the mapping rules and between UPF and gNB over the tunnel for the PDU session. QFI marking over Uu is optional (see clause 12) while QFI marking over NG-U is always present.\n",
            "summary": "",
            "tables": [],
            "figures_meta_data": [],
            "subsections": []
        },
        {
            "title": "A.2\tNew QoS Flow with RQoS",
            "description": "The following figure shows an example message flow when RQoS is used for a new QoS flow. In this example, the gNB receives from UPF a first downlink packet associated with a QFI for which the QoS parameters are known from the PDU session establishment, but for which there is no association to any DRB yet in AS.\nFigure A.2-1 illustrates the downlink (DL) data transmission process in a network utilizing new Quadrature Phase Shift Keying (QPSK) format over an existing Differential RSS (DRB) channel. The figure depicts the synchronization of the DL data with the existing DRB, ensuring efficient communication without disrupting the existing network infrastructure. The diagram highlights the importance of QFI (Quadrature Amplitude Modulation Index) in improving data transmission rates and the seamless integration of new technologies into existing communication systems.\nFigure A.2-1: DL data with new QFI sent over existing DRB\n0.\tPDU session and DRB(s) have been already established.\n1.\tgNB receives a downlink packet with a new QFI from UPF.\n2.\tgNB decides to send the new QoS flow over an existing DRB.\nNOTE:\tIf gNB decides to send it over a new DRB, it needs to establish the DRB first.\n3.\tgNB sends the DL packet over the selected DRB with the new QFI and RDI set in the SDAP header.\n4.\tUE identifies the QFI and RDI in the received DL packet and the DRB on which the packet was received. The AS mapping rules are then updated accordingly.\n5.\tUser Plane Data for the new QoS flow can then be exchanged between UE and gNB over the DRB according to the updated mapping rules and between UPF and gNB over the tunnel for the PDU session.\n",
            "summary": "",
            "tables": [],
            "figures_meta_data": [],
            "subsections": []
        },
        {
            "title": "A.3\tNew QoS Flow with Explicit RRC Signalling",
            "description": "The following figure shows an example message flow when explicit RRC signalling is used for a new QoS flow. In this example, the gNB receives from UPF a first downlink packet associated with a QFI, for which the QoS parameters are already known from the PDU session establishment, but for which there is no association to any DRB yet in AS.\nFigure A.3-1 illustrates the downlink (DL) data transmission process in a network utilizing new Quadrature Phase Shift Keying (QPSK) format over an existing Differential RSS (DRB) channel. The figure depicts the synchronization of the DL data with the existing DRB, ensuring efficient communication without disrupting the existing network infrastructure. The figure highlights the importance of QFI (Quadrature Amplitude Modulation) in enhancing data transmission rates and the seamless integration of new technologies into existing communication systems.\nFigure A.3-1: DL data with new QFI sent over existing DRB\n0.\tPDU session and DRB(s) have been already established.\n1.\tgNB receives a downlink packet with a new QFI from UPF.\n2.\tgNB decides to send the new QoS flow over an existing DRB using explicit RRC signalling for updating the AS mapping rules.\n3.\tgNB sends an RRCReconfiguration message to UE with the new QFI to DRB mapping rule. gNB may also decide to update the DRB configuration if required to meet the QoS requirements for the new QoS Flow.\n4.\tUE updates the QFI to DRB mapping rules and configuration (if received).\n5.\tUE sends an RRCReconfigurationComplete message to gNB.\n6.\tUser Plane Data for the new QoS flow can then be exchanged between UE and gNB over the DRB according to the updated mapping rules and between UPF and gNB over the tunnel for the PDU session.\n",
            "summary": "",
            "tables": [],
            "figures_meta_data": [],
            "subsections": []
        },
        {
            "title": "A.4\tNew QoS Flow with Explicit NAS Signalling",
            "description": "The following figure shows an example message flow when the gNB receives a new QoS flow establishment request from CN that involves NAS explicit signalling. The QoS flow establishment request provides the gNB and UE with the QoS parameters for the QFI. In this example, the gNB decides to establish a new DRB (rather than re-use an existing one) for this QoS flow and provides the mapping rule over RRC signalling. NAS procedures details between gNB and 5GC can be found in TS 23.501 [3], TS 23.502 [22] and TS 38.413 [26].\nFigure A.4-1 illustrates the downlink (DL) data transmission process, where a new Quality of Service (QoS) Flow ID is assigned to a distinct downlink data rate (DRB) for enhanced performance. The figure showcases the utilization of explicit signalling to facilitate the communication between the baseband unit (BBU) and the radio unit (RU) during the transmission of DL data. This process is crucial for managing network resources efficiently and ensuring optimal data delivery.\nFigure A.4-1: DL data with new QoS Flow ID sent over new DRB with explicit signalling\n0.\tPDU session DRB(s) have been already established.\n1.\tgNB receives a PDU SESSION RESOURCE MODIFY REQUEST message from AMF for a new QoS flow.\n2.\tIf gNB cannot find an existing DRB to map this new QoS flow, it decides to establish a new DRB.\n3.\tgNB sends an RRCReconfiguration message to UE including the DRB configuration with the new QFI to DRB mapping rule and the NAS message received at step 1.\n4.\tUE establishes the DRB for the new QoS flow associated with this PDU session and updates the mapping rules.\n5.\tUE sends an RRCReconfigurationComplete message to gNB.\n6.\tgNB sends a PDU SESSION RESOURCE MODIFY RESPONSE message to AMF.\n7.\tUser Plane Data can then be exchanged between UE and gNB over DRB(s) according to the mapping rules and between UPF and gNB over the tunnel for the PDU session.\n",
            "summary": "",
            "tables": [],
            "figures_meta_data": [],
            "subsections": []
        },
        {
            "title": "A.5\tRelease of QoS Flow with Explicit Signalling",
            "description": "The following figure shows an example message flow when the gNB receives a request to release a QoS flow from CN that involves explicit NAS signalling. NAS procedures details between gNB and 5GC can be found in TS 23.501 [3], TS 23.502 [22] and TS 38.413 [26].\nFigure A.5-1 illustrates the process of Quality of Service (QoS) flow release through explicit signaling. The figure depicts the interaction between the network elements, including the network element (NE) and the service provider network (SPN). The NE is responsible for managing the QoS flow, while the SPN ensures the proper delivery of the flow. The figure highlights the importance of explicit signaling in maintaining the QoS of network services.\nFigure A.5-1: Release of QoS Flow with Explicit Signalling\n0.\tPDU session and DRB(s) have been already established.\n1.\tgNB receives a PDU SESSION RESOURCE MODIFY REQUEST message from AMF to release a QoS flow.\n2.\tThe gNB decides to release corresponding the QFI to DRB mapping rule. Since the DRB also carries other QoS flows, the DRB is not released.\n3.\tgNB sends an RRCReconfiguration message to UE to release the QFI to DRB mapping rule.\n4.\tUE updates the AS QFI to DRB mapping rules to release this QFI to DRB mapping rule.\n5.\tUE sends an RRCReconfigurationComplete message to gNB.\n6.\tgNB sends a PDU SESSION RESOURCE MODIFY RESPONSE message to AMF.\n",
            "summary": "",
            "tables": [],
            "figures_meta_data": [],
            "subsections": []
        },
        {
            "title": "A.6\tUE Initiated UL QoS Flow",
            "description": "The following figure shows an example message flow when the UE AS receives an UL packet for a new QoS flow for which a QFI to DRB mapping rule does not exist.\nFigure A.6-1 illustrates an unacknowledged UL packet with a new Quality of Service (QoS) flow for which a mapping does not exist in the User Equipment (UE). The figure depicts the packet's path through the network, highlighting the various stages of processing and the potential impact on overall network performance. The absence of a mapping indicates that the packet may not be correctly assigned to a specific resource, which could lead to inefficiencies or congestion in the network. This figure is essential for network administrators to identify and resolve potential issues related to QoS and resource allocation in their telecommunication systems.\nFigure A.6-1: UL packet with a new QoS flow for which a mapping does not exist in UE\n0.\tPDU session and DRBs (including a default DRB) have been already established.\n1.\tUE AS receives a packet with a new QFI from UE NAS.\n2.\tUE uses the QFI of the packet to map it to a DRB. If there is no mapping of the QFI to a DRB in the AS mapping rules for this PDU session, then the packet is assigned to the default DRB.\n3.\tUE sends the UL packet on the default DRB. The UE includes the QFI in the SDAP header.\n4.\tgNB sends UL packets to UPF and includes the corresponding QFI.\n5.\tIf gNB wants to use a new DRB for this QoS flow, it sets up one. It can also choose to move the QoS flow to an existing DRB using RQoS or RRC signalling (see clauses A.2 and A.3).\n6.\tUser Plane Data for the new QoS flow can then be exchanged between UE and gNB over the DRB according to the updated mapping rules and between UPF and gNB over the tunnel for the PDU session.\n",
            "summary": "",
            "tables": [],
            "figures_meta_data": [],
            "subsections": []
        },
        {
            "title": "B.1\tSupplementary Uplink",
            "description": "To improve UL coverage for high frequency scenarios, SUL can be configured (see TS 38.101-1 [18]). With SUL, the UE is configured with 2 ULs for one DL of the same cell as depicted on Figure B.1-1 below:\nFigure B.1-1 illustrates an example of supplementary uplink in a telecommunication network, showcasing the process of data transmission from user equipment (UE) to the base station (gNB). The figure depicts the various stages of data processing, including modulation, channel coding, and signal transmission. It emphasizes the role of the gNB in managing multiple UEs and the importance of efficient resource allocation for optimal network performance.\nFigure B.1-1: Example of Supplementary Uplink\n",
            "summary": "",
            "tables": [],
            "figures_meta_data": [],
            "subsections": []
        },
        {
            "title": "B.2\tMultiple SSBs in a carrier",
            "description": "For a UE in RRC_CONNECTED, the BWPs configured by a serving cell may overlap in the frequency domain with the BWPs configured for other UEs by other cells within a carrier. Multiple SSBs may also be transmitted within the frequency span of a carrier used by the serving cell. However, from the UE perspective, each serving cell is associated to at most a single SSB. Figure B.2-1 below describes a scenario with multiple SSBs in a carrier, identifying two different cells (NCGI = 5, associated to SSB1, and NCGI = 6, associated to SSB3) with overlapping BWPs, and where RRM measurements can be configured to be performed by the UE on each of the available SSBs, i.e. SSB1, SSB2, SSB3 and SSB4.\nFigure B.2-1 illustrates the arrangement of multiple satellite service beams (SSBs) in a carrier, showcasing the distribution of signals across different directions. The figure displays the main beam, side lobes, and beamwidth, providing insights into the signal coverage and interference management in satellite communication systems. The illustration emphasizes the importance of precise beamforming and signal pattern design for maximizing communication efficiency and minimizing signal overlap.\nFigure B.2-1: Example of multiple SSBs in a carrier\n",
            "summary": "",
            "tables": [],
            "figures_meta_data": [],
            "subsections": []
        },
        {
            "title": "B.3\tNR Operation with Shared Spectrum",
            "description": "NR Radio Access operating with shared spectrum channel access can support the following deployment scenarios:\n-\tScenario A: Carrier aggregation between NR in licensed spectrum (SpCell) and NR in shared spectrum (SCell);\n-\tScenario A.1: SCell is not configured with uplink (DL only);\n-\tScenario A.2: SCell is configured with uplink (DL+UL).\n-\tScenario B: Dual connectivity between LTE in licensed spectrum and NR in shared spectrum (PSCell);\n-\tScenario C: NR in shared spectrum (PCell);\n-\tScenario D: NR cell in shared spectrum and uplink in licensed spectrum;\n-\tScenario E: Dual connectivity between NR in licensed spectrum (PCell) and NR in shared spectrum (PSCell).\nCarrier aggregation of cells in shared spectrum is applicable to all deployment scenarios.\n",
            "summary": "",
            "tables": [],
            "figures_meta_data": [],
            "subsections": []
        },
        {
            "title": "B.4\tExample implementation of Non-Terrestrial Networks",
            "description": "The following figure illustrates an example implementation of a Non-Terrestrial Network for transparent NTN payload:\nFigure B.4 -1 illustrates the Non-Terrestrial Network (NTN)-based Next Generation Radio Access Network (NG-RAN), showcasing the integration of satellite communication with terrestrial networks. The figure depicts the satellite as a key component, providing coverage over vast areas and enhancing network resilience. The terrestrial components, including the gNB (gateway node base), UE (user equipment), and the core network, are interconnected, enabling seamless communication and data exchange. The figure highlights the potential of NTN in improving network efficiency, particularly in remote or hard-to-reach locations, and its contribution to the overall NG-RAN architecture.\nFigure B.4-1: NTN based NG-RAN\nThe gNB depicted in Figure B.4-1 may be subdivided into non-NTN infrastructure gNB functions and the NTN Service Link provisioning system. The NTN infrastructure may be thought of being subdivided into the NTN Service Link provisioning system and the NTN Control function. The NTN Service Link provisioning system may consist of one or more NTN payloads and NTN Gateways.\nThe NTN payload is embarked on a spaceborne (or airborne) vehicle, providing a structure, power, commanding, telemetry, attitude control for the satellite (resp. HAPS) and possibly an appropriate thermal environment, radiation shielding.\nThe NTN Service Link provisioning system maps the NR-Uu radio protocol over radio resources of the NTN infrastructure (e.g. beams, channels, Tx power).\nThe NTN control function controls the spaceborne (or airborne) vehicles as well as the radio resources of the NTN infrastructure (NTN payload(s) & NTN Gateway(s)). It provides control data, e.g. Ephemeris, to the non-NTN infrastructure gNB functions of the gNB.\nProvision of NTN control data to the gNB is out of 3GPP scope.\nNOTE:\tThe transport of NR-Uu protocol between the NTN Service Link provisioning system and the non-NTN infrastructure gNB functions is out of 3GPP scope.\nAt least the following NTN related parameters are expected to be provided by O&M to the gNB for its operation:\na) Earth-fixed beams: for each beam provided by a given NTN-payload:\n-\tThe Cell identifier (NG and Uu) mapped to the beam;\n-\tThe Cell's reference location (e.g. cell's center and range).\nb) Quasi-Earth-fixed: for each beam provided by a given NTN payload:\n-\tThe Cell identifier (NG and Uu) and time window mapped to a beam;\n-\tThe Cell's/beam's reference location (e.g. cell's center and range);\n-\tThe time window of the successive switch overs (feeder link, service link);\n-\tThe identifier and time window of all serving satellites (resp. HAPS) and NTN Gateways.\nc) Earth moving beams: for each beam provided by a given NTN payload:\n-\tThe Uu Cell identifier mapped to a beam and mapping information to fixed geographical areas reported on NG, including information about the beams direction and motion of the beam's foot print on Earth;\n-\tIts elevation wrt NTN payload;\n-\tSchedule of successive serving NTN Gateways/gNBs;\n-\tSchedule of successive switch overs (feeder link, service link).\nThe I-RNTI provides the new NG-RAN node a reference to the UE context in the old NG-RAN node. How the new NG-RAN node is able to resolve the old NG-RAN ID from the I-RNTI is a matter of proper configuration in the old and new NG-RAN node.\nTable C-1 below provides some typical partitioning of a 40bit I-RNTI, assuming the following content:\n-\tUE specific reference: reference to the UE context within a logical NG-RAN node;\n-\tNG-RAN node address index: information to identify the NG-RAN node that has allocated the UE specific part;\nNOTE:\tRAT-specific information may be introduced in a later release, containing information to identify the RAT of the cell within which the UE was sent to RRC_INACTIVE. This version of the specification only supports intra-RAT mobility of UEs in RRC_INACTIVE.\n-\tPLMN-specific information: information supporting network sharing deployments, providing an index to the PLMN ID part of the Global NG-RAN node identifier.\nTable C-1: I-RNTI reference profiles\n\nThe SPID values are defined in Annex I of TS 36.300 [2].\nFrom the SPID reference values, only the SPID=253 also applies for 5GC.\nEach NG-RAN node serving a cell identified by a Cell Identity associated with either a subset of PLMNs, or a subset of SNPNs, or a subset of PNI-NPNs is connected to another NG-RAN node via a single Xn-C interface instance.\nEach Xn-C interface instance is setup and removed individually.\nXn-C interface instances terminating at NG-RAN nodes which share the same physical radio resources may share the same signalling transport resources. If this option is applied:\n-\tNon-UE associated signalling is associated to an Xn-C interface instance by including an Interface Instance Indication in the XnAP message;\n-\tNode related, non-UE associated Xn-C interface signalling may provide information destined for multiple logical nodes in a single XnAP procedure instance once the Xn-C interface instance is setup;\nNOTE 1:\tIf the Interface Instance Indication corresponds to more than one interface instance, the respective XnAP message carries information destined for multiple logical nodes.\n-\tA UE associated signalling connection is associated to an Xn-C interface instance by allocating values for the corresponding NG-RAN node UE XnAP IDs so that they can be mapped to that Xn-C interface instance.\nNOTE 2:\tOne possible implementation is to partition the value ranges of the NG-RAN node UE XnAP IDs and associate each value range with an Xn-C interface instance.\n\nThe I-RNTI provides an NG-RAN node with a reference to the UE context and a reference to the NG-RAN node that allocated the UE context.\nTo support an NG-RAN node in resolving the Local NG-RAN ID of the NG-RAN node that allocated the UE context, the I-RNTI structure is as follows:\n-\tthe first part (starting from the MSB of the I-RNTI) identifies the I-RNTI profile. It is 2 bits long for a Full I-RNTI or 1 bit long for a short I-RNTI, and it indicates the length of a Local NG-RAN Node Identifier of the NG-RAN Node that allocated the I-RNTI;\n-\tthe second part, immediately following the first part, is a Local NG-RAN Node Identifier;\n-\tthe third part, immediately following the second part, identifies the UE context stored in the NG-RAN node that allocated the I-RNTI.\nIn case a NG-RAN node takes an additional Local NG-RAN Node identifier into use or removes a Local NG-RAN Node identifier currently in use it informs its neighbour NG-RAN nodes about this change.\nThe I-RNTI profiles for Full I-RNTI are described in table F-1.\nTable F-1: I-RNTI profiles for Full I-RNTI\n\nThe I-RNTI profiles for Short I-RNTI are described in table F-2.\nTable F-2: I-RNTI profiles for Short I-RNTI\n\n\nHO interruption time for L1/L2-based inter-cell mobility is the time from UE receives the cell switch command to UE performs the first DL/UL reception/transmission on the indicated beam of the target cell.\nFor Rel-18, RAN2 assumed the latency of the mobility procedure is characterized by the terms illustrated in Figure G-1.\nFigure G-1 illustrates the various components that contribute to mobility latency in a telecommunication network. The figure showcases the end-to-end process, starting from the user equipment (UE) and extending to the base station (gNB) and the core network. Key elements include the mobile station (MS), the radio access network (RAN), the transport network, and the core network. The figure also highlights the role of the internet protocol (IP) and the importance of efficient resource allocation and scheduling algorithms to minimize latency.\nFigure G-1: Components of Mobility Latency\nEach component of mobility latency is described in the table below, the values of which are specified in TS 38.133[13].\nTable G-1: Components of Mobility Latency\n\nFor Rel-18, RAN2 assumed that the latency of the RACH-based and RACH-less LTM procedure is characterized by the terms illustrated in Figure G-2 and Figure G-3. The overall mobility latency of LTM can be largely reduced by early synchronization procedure.\nFigure G-2 illustrates the mobility latency for RACH-based LTM, showcasing the time it takes for a mobile device to register with the network and establish a link. The figure depicts the RACH procedure, including the random access channel (RACH) procedure, and the link management procedure (LMP). The figure highlights the impact of mobility on latency, with various components such as the mobile device, eNodeB, and the RRC (Radio Resource Control) protocol. The visual representation emphasizes the importance of efficient RACH and LMP processes in reducing latency and improving network performance.\nFigure G-2: Mobility Latency for RACH-based LTM\nFigure G-3 illustrates the impact of RACH-less LTM on mobile network latency. The figure depicts the path a packet takes from the user equipment (UE) to the network core, highlighting the reduced latency achieved through the elimination of the Random Access Channel (RACH) process. The figure shows the UE sending a packet to the eNodeB, which then forwards it to the Serving Gateway (SGW), and finally to the Packet Data Network (PDN) Gateway. The RACH-less LTM process is depicted as a direct connection from the UE to the SGW, reducing the latency by bypassing the RACH process. The figure emphasizes the efficiency of this approach in improving network performance for mobile devices.\nFigure G-3: Mobility Latency for RACH-less LTM\n\n\n\n",
            "summary": "",
            "tables": [
                {
                    "description": "Table C-1: I-RNTI reference profiles",
                    "table number": 10,
                    "summary": "",
                    "name": ""
                },
                {
                    "description": "Table F-1: I-RNTI profiles for Full I-RNTI",
                    "table number": 11,
                    "summary": "",
                    "name": ""
                },
                {
                    "description": "Table F-2: I-RNTI profiles for Short I-RNTI",
                    "table number": 12,
                    "summary": "",
                    "name": ""
                },
                {
                    "description": "Table G-1: Components of Mobility Latency",
                    "table number": 13,
                    "summary": "",
                    "name": ""
                },
                {
                    "description": "",
                    "table number": 14,
                    "summary": "",
                    "name": ""
                }
            ],
            "figures_meta_data": [],
            "subsections": []
        }
    ]
}