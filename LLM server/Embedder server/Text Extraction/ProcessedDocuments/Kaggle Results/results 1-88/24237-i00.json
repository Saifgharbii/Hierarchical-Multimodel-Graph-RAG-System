{
    "document_name": "24237-i00.docx",
    "content": [
        {
            "title": "Foreword",
            "description": "This Technical Specification has been produced by the 3rd Generation Partnership Project (3GPP).\nThe contents of the present document are subject to continuing work within the TSG and may change following formal TSG approval. Should the TSG modify the contents of the present document, it will be re-released by the TSG with an identifying change of release date and an increase in version number as follows:\nVersion x.y.z\nwhere:\nx\tthe first digit:\n1\tpresented to TSG for information;\n2\tpresented to TSG for approval;\n3\tor greater indicates TSG approved document under change control.\ny\tthe second digit is incremented for all changes of substance, i.e. technical enhancements, corrections, updates, etc.\nz\tthe third digit is incremented when editorial only changes have been incorporated in the document.\n",
            "summary": "",
            "tables": [],
            "figures_meta_data": [],
            "subsections": []
        },
        {
            "title": "1\tScope",
            "description": "IP Multimedia (IM) Core Network (CN) subsystem Service Continuity (SC) provides the capability of continuing ongoing communication sessions with multiple media across different access networks.\nThe present document provides the protocol details for enabling IMS SC based on the Session Initiation protocol (SIP) and the Session Description Protocol (SDP) and the protocols of the 3GPP Circuit-Switched (CS) domain (e.g. CAP, MAP, ISUP, BICC and the NAS call control protocol for the CS access).\nThe present document is applicable to User Equipment (UEs), Application Servers (AS), MSC Servers providing IMS Service Continuity capabilities, Emergency Access Transfer Function (EATF), Access Transfer Control Function (ATCF).\n",
            "summary": "",
            "tables": [],
            "figures_meta_data": [],
            "subsections": []
        },
        {
            "title": "2\tReferences",
            "description": "The following documents contain provisions which, through reference in this text, constitute provisions of the present document.\n-\tReferences are either specific (identified by date of publication, edition number, version number, etc.) or non-specific.\n-\tFor a specific reference, subsequent revisions do not apply.\n-\tFor a non-specific reference, the latest version applies. In the case of a reference to a 3GPP document (including a GSM document), a non-specific reference implicitly refers to the latest version of that document in the same Release as the present document.\n[1]\t3GPP TR 21.905: \"Vocabulary for 3GPP Specifications\".\n[2]\t3GPP TS 24.229: \"IP multimedia call control protocol based on Session Initiation Protocol (SIP) and Session Description Protocol (SDP); Stage 3\".\n[3]\t3GPP TS 24.228 Release 5: \"Signalling flows for the IP multimedia call control based on Session Initiation Protocol (SIP) and Session Description Protocol (SDP); Stage 3\".\n[4]\t3GPP TS 24.292: \"IP Multimedia (IM) Core Network (CN) subsystem Centralized Services (ICS); Stage 3\".\n[5]\t3GPP TS 24.216: \"Communication continuity managed object\".\n[6]\t3GPP TS 29.328: \"IP Multimedia Subsystem (IMS) Sh interface; Signalling flows and message contents\".\n[7]\t3GPP TS 29.329: \"Sh interface based on the Diameter protocol; Protocol details\".\n[8]\t3GPP TS 24.008: \" radio interface layer 3 specification; Core Network protocols; Stage 3\".\n[9]\t3GPP TS 23.237: \"IP Multimedia subsystem (IMS) Service Continuity; Stage 2\".\n[10]\tIETF RFC 3891: \"The Session Initiation Protocol (SIP) \"Replaces\" Header\".\n[11]\tIETF RFC 4538: \"Request Authorization through Dialog Identification in the Session Initiation Protocol (SIP)\".\n[12]\t3GPP TS 23.003: \"Numbering, addressing and identification\".\n[13]\tIETF RFC 3515: \"The Session Initiation Protocol (SIP) Refer Method\".\n[14]\tVoid.\n[15]\t3GPP TS 23.228: \"IP Multimedia Subsystem (IMS); Stage 2\".\n[16]\tIETF RFC 5012 (January 2008): \"Requirements for Emergency Context Resolution with Internet Technologies\".\n[17]\tIETF RFC 5031 (January 2008): \"A Uniform Resource Name (URN) for Services\".\n[18]\t3GPP TS 29.292: \"Interworking between the IP Multimedia (IM) Core Network (CN) subsystem and MSC Server for IMS Centralized Services (ICS)\".\n[19]\tIETF RFC 3261: \"SIP: Session Initiation Protocol\".\n[20]\tIETF RFC 4488: \"Suppression of Session Initiation Protocol (SIP) REFER Method Implicit Subscription\".\n[21]\tIETF RFC 3023: \"XML Media Types\".\n[22]\tIETF RFC 5626: \"Managing Client Initiated Connections in the Session Initiation Protocol (SIP)\".\n[23]\t3GPP TS 24.286: \"IP Multimedia (IM) Core Network (CN) subsystem Centralised Services (ICS); Management Object (MO)\".\n[24]\t3GPP TS 22.173: \"IP Multimedia Core Network Subsystem (IMS) Multimedia Telephony Service and supplementary services; Stage 1\".\n[25]\t3GPP TS 24.607: \"Originating Identification Presentation (OIP) and Originating Identification Restriction (OIR) using IP Multimedia (IM) Core Network (CN) subsystem; Protocol Specification\".\n[26]\t3GPP TS 24.608: \"Terminating Identification Presentation (TIP) and Terminating Identification Restriction (TIR) using IP Multimedia (IM)Core Network (CN) subsystem; Protocol Specification\".\n[27]\t3GPP TS 24.604: \"Communication Diversion (CDIV) using IP Multimedia (IM)Core Network (CN) subsystem; Protocol specification\".\n[28]\t3GPP TS 24.610: \"Communication HOLD (HOLD) using IP Multimedia (IM) Core Network (CN) subsystem; Protocol specification\".\n[29]\t3GPP TS 24.611: \"Anonymous Communication Rejection (ACR) and Communication Barring (CB); using IP Multimedia (IM) Core Network (CN) subsystem;  Protocol specification\".\n[30]\t3GPP TS 24.606: \"Message Waiting Indication (MWI) using IP Multimedia (IM) Core Network (CN) subsystem; Protocol specification\".\n[31]\t3GPP TS 24.605: \"Conference (CONF) using IP Multimedia (IM) Core Network (CN) subsystem; Protocol specification\".\n[32]\t3GPP TS 24.629: \"Explicit Communication Transfer (ECT) using IP Multimedia (IM) Core Network (CN) subsystem; Protocol specification\".\n[33]\t3GPP TS 24.647: \"Advice Of Charge (AOC) using IP Multimedia (IM)Core Network (CN) subsystem; Protocol Specification\".\n[34]\t3GPP TS 24.654: \"Closed User Group (CUG) using IP Multimedia (IM) Core Network (CN) subsystem, Protocol Specification\".\n[35]\t3GPP TS 24.239: \"Flexible Alerting (FA) using IP Multimedia (IM) Core Network (CN) subsystem; Protocol specification\".\n[36]\t3GPP TS 24.615: \"Communication Waiting (CW) using IP Multimedia (IM) Core Network (CN) subsystem; Protocol Specification\".\n[37]\t3GPP TS 24.642: \"Completion of Communications to Busy Subscriber (CCBS) and Completion of Communications by No Reply (CCNR) using IP Multimedia (IM)Core Network (CN) subsystem; Protocol Specification\".\n[38]\t3GPP TS 24.182: \"IP Multimedia Subsystem (IMS) Customized Alerting Tones (CAT); Protocol specification\".\n[39]\t3GPP TS 24.616: \"Malicious Communication Identification (MCID) using IP Multimedia (IM) Core Network (CN) subsystem; Protocol Specification\".\n[40]\t3GPP TS 24.259: \"Personal Network Management (PNM); Stage 3\".\n[41]\t3GPP TS 24.183: \"IP Multimedia Subsystem (IMS) Customized Ringing Signal (CRS) service; Stage 3\".\n[42]\t3GPP TS 24.072: \"Call Deflection (CD) Supplementary Service; Stage 3\".\n[43]\t3GPP TS 24.083: \"Call Waiting (CS) and Call Hold (HOLD) supplementary services; Stage 3\".\n[44]\t3GPP TS 24.294 \"IP Multimedia Subsystem (IMS) Centralized Services (ICS) protocol via I1 interface\".\n[45]\tVoid.\n[46]\t3GPP TS 24.091: \"Explicit Call Transfer (ECT) supplementary service; Stage 3\".\n[47]\t3GPP TS 24.084: \"Multi Party (MPTY) supplementary service;Stage 3\".\n[48]\tIETF RFC 4235 (November 2005): \"An INVITE-Initiated Dialog Event Package for the Session Initiated Protocol (SIP)\".\n[49]\t3GPP TS 23.216 \"Single Radio Voice Call Continuity (SRVCC); Stage 2\".\n[50]\tVoid.\n[51]\tVoid.\n[52]\t3GPP TS 24.301: \"Non-Access-Stratum (NAS) protocol for Evolved Packet System (EPS); Stage 3\".\n[53]\tIETF RFC 3840 (August 2004): \"Indicating User Agent Capabilities in the Session Initiation Protocol (SIP)\".\n[54]\tIETF RFC 6086 (January 2011): \"Session Initiation Protocol (SIP) INFO Method and Package Framework\".\n[55]\tIETF RFC 4353 (February 2006): \"A Framework for Conferencing with the Session Initiation Protocol (SIP)\".\n[56]\tVoid.\n[57]\tIETF RFC 3326 (December 2002): \"The Reason Header Field for the Session Initiation Protocol (SIP)\".\n[58]\tIETF RFC 3264 (June 2002) \"An Offer/Answer Model with the Session Description Protocol (SDP)\".\n[59]\tVoid.\n[60]\tIETF RFC 6809 (November 2012): \"Mechanism to Indicate Support of Features and Capabilities in the Session Initiation Protocol (SIP)\".\n[61]\t3GPP TS 25.331 \"Radio Resource Control (RRC); protocol specification\".\n[62]\t3GPP TS 36.331 \"Evolved Universal Terrestrial Radio Access (E-UTRA); Radio Resource Control (RRC); Protocol specification\".\n[63]\t3GPP TS 23.292: \"IP Multimedia Subsystem (IMS) Centralized Services; Stage 2\".\n[64]\t3GPP TS 24.337 \"IP Multimedia (IM) Core Network (CN) subsystem; inter-UE transfer; Stage 3\".\n[65]\t3GPP TS 23.203: \"Policy and charging control architecture\".\n[66]\t3GPP TS 23.107:\"Quality of Service (QoS) concept and architecture\".\n[67]\t3GPP TS 23.218: \"IP Multimedia (IM) Session Handling; IM call model\".\n[68]\t3GPP TS 26.114: \"IP Multimedia Subsystem (IMS); Multimedia Telephony; Media handling and interaction\".\n[69]\t3GPP TS 26.111: \"Codec for circuit switched multimedia telephony service; Modifications to H.324\".\n[70]\t3GPP TS 29.274: \"Tunnelling Protocol for Control plane (GTPv2-C); Stage 3\".\n[71]\t3GPP TS 29.280: \"3GPP Sv interface (MME to MSC, and SGSN to MSC) for SRVCC\".\n[72]\tIETF RFC 3263 (June 2002): \"Session Initiation Protocol (SIP): Locating SIP Servers\".\n[73]\tIETF RFC 7195 (May 2014): \"Session Description Protocol (SDP) Extension for Setting Audio and Video Media Streams over Circuit-Switched Bearers in the Public Switched Telephone Network (PSTN)\".\n[74]\tIETF RFC 6157 (April 2011): \"IPv6 Transition in the Session Initiation Protocol (SIP)\".\n[75]\t3GPP TS 24.007: \" radio interface signalling layer 3; General aspects\".\n[76]\tETSI TS 182 024: \"Hosted  Services; Architecture, functional description and signalling\".\n[77]\t3GPP TS 29.079: \"Optimal media routeing within the IP Multimedia Subsystem (IMS)\".\n[78]\tIETF RFC 3841 (August 2004): \"Caller Preferences for the Session Initiation Protocol (SIP)\".\n[79]\tIETF RFC 3966 (December 2004): \"The tel URI for Telephone Numbers\".\n[80]\tIETF RFC 6228 (May 2011): \"Session Initiation Protocol (SIP) Response Code for Indication of Terminated Dialog\".\n[81]\tIETF RFC 6665 (July 2012): \"SIP-Specific Event Notification\".\n[82]\tIETF RFC 7254 (May 2014): \"A Uniform Resource Name Namespace for the Global System for Mobile Communications Association (GSMA) and the International Mobile station Equipment Identity (IMEI)\".\n[83]\tIETF RFC 7549 (May 2015): \"3GPP SIP URI Inter-Operator Traffic Leg Parameter\".\n[84]\t3GPP TS 24.302: \"Access to the 3GPP Evolved Packet Core (EPC) via non-3GPP access networks\".\n[85]\t3GPP TS 32.260: \"Telecommunication management; Charging management\".\n[86]\tIETF RFC 3262 (June 2002 ): \"Reliability of Provisional Responses in the Session Initiation Protocol (SIP)\".\n[87]\tIETF RFC 3311 (September 2002): \"The Session Initiation Protocol (SIP) UPDATE Method\".\n[88]\tIETF RFC 3312 (October 2002): \"Integration of Resource Management and Session Initiation Protocol (SIP)\".\n[89]\tIETF RFC 4032 (March 2005): \"Update to the Session Initiation Protocol (SIP) Preconditions Framework\".\n[90]\tIETF RFC 7647 (September 2015): \"Clarifications for the Use of REFER with RFC6665\".\n[91]\tIETF RFC 3551 (July 2003): \"RTP Profile for Audio and Video Conferences with Minimal Control\".\n[92]\tIETF RFC 3550 (July 2003): \"RTP: A Transport Protocol for Real-Time Applications\".\n[93]\tIETF RFC 4566 (July 2006): \"SDP: Session Description Protocol\".\n[94]\tIETF RFC 8497 (November 2018): \"Marking SIP Messages to Be Logged\".\n[95]\t3GPP TS 24.147: \"Conferencing using the IP Multimedia (IM) Core Network (CN) subsystem; Stage 3\".\n[96]\t3GPP TS 23.501: \"System Architecture for the 5G System; Stage 2\".\n[97]\t3GPP TS 23.502: \"Procedures for the 5G System\".\n[98]\t3GPP TS 24.501: \"Non-Access-Stratum (NAS) protocol for 5G System (5GS); Stage 3\".\n[99]\t3GPP TS 29.562: \"Home Subscriber Server (HSS) Services for interworking with the IP Multimedia Subsystem (IMS); Stage 3\".\n",
            "summary": "",
            "tables": [],
            "figures_meta_data": [],
            "subsections": []
        },
        {
            "title": "3\tDefinitions and abbreviations",
            "description": "",
            "summary": "",
            "tables": [],
            "figures_meta_data": [],
            "subsections": [
                {
                    "title": "3.1\tDefinitions",
                    "description": "",
                    "summary": "",
                    "text_content": "For the purposes of the present document, the terms and definitions given in 3GPP TR 21.905 [1] and the following apply. A term defined in the present document takes precedence over the definition of the same term, if any, in 3GPP TR 21.905 [1].\nAlerting phase: Refers to a SIP session for which all possibly existing dialogs created by the SIP INVITE request initiating the session are early dialogs, for which no final SIP response has been received yet and for which SIP 180 (Ringing) response has already been received in an existing early dialogs.\nPre-alerting phase: Refers to a SIP session for which all possibly existing dialogs created by the SIP INVITE request initiating the session are early dialogs, for which no final SIP response has been received yet and for which SIP 180 (Ringing) response has not been received or sent yet in any existing early dialogs.\nDual radio access transfer for calls in alerting phase: feature enabling dual radio access transfer of a session with speech media component where the session is in an alerting phase.\nDual radio access transfer for originating calls in pre-alerting phase: feature enabling dual radio access transfer of a session with speech media component where the session was originated by the SC UE and the session is in a pre-alerting phase.\nDynamic STI: An STI dynamically assigned by the SCC AS, representing the SIP dialog identifier (Call-ID header field and the values of tags in To and From header fields) and used for session transfer request when Gm service control is available.\nDynamic STN: An STN encoded as  an E.164 number in tel URI format dynamically assigned by the SCC AS replacing the static STN during PS to CS dual radio access transfer.\nStatic STN: An STN configured in the SC UE as an E.164 number. The static STN is used for PS to CS transfer when dynamic STN cannot be used.\nAdditional transferred session SCC AS URI: A SIP URI which is a public service identity hosted by  and which is used during PS-CS access transfer with the MSC Server assisted mid-call feature.\nStatic STI: An STI configured in the SC UE either as a SIP URI or as an E.164 number in tel URI format or SIP URI representation of tel URI. The static STI is used for CS-PS transfer when dynamic STI is unavailable.\nPS to PS STI: An STI configured in SC UE either as a SIP URI or as an E.164 number in tel URI format or SIP URI representation of tel URI. The PS to PS STI is used for PS to PS access transfer.\nPS to CS STN: An STN that is encoded as an E.164 number. The PS to CS STN is used for PS to CS access transfer.\nSpeech media component: SDP media component of audio media type with codec suitable for conversational speech. Connection (c=) and attribute (a=) informations at the SDP session level not overridden by information at the SDP media level in the speech media component are considered to be part of the speech media component.\nActive speech media component: speech media component which has \"recvonly\" or \"sendrecv\" directionality at the SC UE or at the MSC server serving the SC UE.\nInactive speech media component: speech media component which has \"sendonly\" or \"inactive\" directionality at the SC UE or at the MSC server serving the SC UE.\nActive video media component: video media component which has \"recvonly\" or \"sendrecv\" directionality at the SC UE or at the MSC server serving the SC UE.\nInactive video media component: video media component which has \"sendonly\" or \"inactive\" directionality at the SC UE or at the MSC server serving the SC UE.\nATCF URI for originating requests: A URI of the ATCF where the ATCF receives requests sent by the served UEs.\nATCF URI for terminating requests: A URI of the ATCF where the ATCF receives requests targeted to the served UEs.\nATCF management URI: A URI hosted by the ATCF where the ATCF performing the role of a UAS receives SIP requests for ATCF management (e.g. SIP MESSAGE requests containing the PS to CS SRVCC related information). The ATCF management URI is routable via the I-CSCF in the network where the ATCF is located using the same routing mechanism as used for Public Service Identities hosted by an AS.\nRegistration Path: The set of Path header field values and the set of Service-Route header field values created by successful completion of the SIP REGISTER transaction.\nSRVCC-related information: Information required by the ATCF to perform PS to CS SRVCC transfer or CS to PS SRVCC transfer or both. It is provided in the MIME body as defined in clause D.3.\nUE information for CS to PS SRVCC: Session description containing speech media component that will be used by the ATGW to send media to the SC UE during the CS to PS SRVCC access transfer.\nATGW information for CS to PS SRVCC: Session description containing speech media component that will be used by the SC UE to send media to the ATGW during the CS to PS SRVCC access transfer.\nPS to CS SRVCC for calls in alerting phase: feature enabling PS to CS SRVCC of a session with speech media component where the session is in alerting phase.\nCS to PS SRVCC for calls in alerting phase: feature enabling CS to PS SRVCC of a session with speech media component where the session is in alerting phase.\nPS to CS SRVCC for originating calls in pre-alerting phase: feature enabling PS to CS SRVCC of a session with speech media component where the session was originated by the SC UE and the session is in pre-alerting phase.\nPS to CS SRVCC for terminating calls in pre-alerting phase: feature enabling PS to CS SRVCC of a session with speech media component where the session was terminated by the SC UE and the session is in pre-alerting phase.\nCS session in an early phase: A CS call for which the CS call setup procedure is not complete, i.e. the CC CONNECT message is not sent or received as described in 3GPP TS 24.008 [8] yet but where either a CC CALL PROCEEDING message as described in 3GPP TS 24.008 [8] has been received or a CC ALERTING message as described in 3GPP TS 24.008 [8] has been sent or received.\nPrecondition enabled dialog: a dialog (either a confirmed dialog or an early dialog) created by a SIP response containing a Require header field with the precondition option tag.\nPrecondition enabled initial INVITE request: an initial INVITE request containing a Require header field with the precondition option tag or a Supported header field with the precondition option tag.\nRTP payload format: the <encoding name> portion of an \"a=rtpmap\" attribute according to IETF RFC 4566 [93] for the dynamically assigned RTP payload type numbers or the name of encoding reserved in IETF RFC 3551 [91] table 1 for statically assigned RTP payload type numbers.\nRTP payload type number: a number identifying an RTP payload type of a media stream using the RTP based transport protocol. In SDP, the RTP payload type number can be found in a sub-field of an <fmt> portion of an \"m=\" line, in a <payload type> portion of the \"a=rtpmap\" attribute and in a <format> portion of an \"a=fmtp\" attribute, according to IETF RFC 4566 [93]. In RTP, the RTP payload type number is found in the PT field of the RTP header according to IETF RFC 3550 [92].\nRTP payload type: an RTP payload type number indicated in a sub-field of an <fmt> portion of an \"m=\" line and, if included, an \"a=rtpmap\" attribute and an \"a=fmtp\" attribute for the RTP payload type number, included in an SDP body, according to IETF RFC 4566 [93].\nFor the purposes of the present document, the following terms and definitions given in 3GPP TS 23.237 [9] apply:\nAccess Leg\nAccess Transfer Control Function (ATCF)\nAccess Transfer Gateway (ATGW)\nAccess Transfer Update - Session Transfer Identifier (ATU-STI)\nDual radio\nEmergency Session Transfer Number for SR VCC (E-STN-SR)\nHome Leg\nLocal Operating Environment\nRemote Leg\nServing Leg Session Transfer Identifier for reverse SRVCC (STI-rSR)\nSource Access Leg\nTarget Access Leg\nEmergency Session Transfer Number for DRVCC (E-STN-DRVCC)\nFor the purposes of the present document, the following terms and definitions given in 3GPP TS 24.292 [4] apply:\nCS call\nCS media\nFor the purposes of the present document, the following terms and definitions given in 3GPP TS 23.218 [67] apply:\nInitial filter criteria\nFor the purposes of the present document, the following terms and definitions given in 3GPP TS 23.228 [15] apply:\nIMS data channel\nPolicy and Charging Rule Function (PCRF)\nFor the purposes of the present document, the following terms and definitions given in 3GPP TS 23.003 [12] apply:\nCorrelation MSISDN\nIP Multimedia Routeing Number (IMRN)\nSession Transfer Identifier (STI)\nSession Transfer Number (STN)\nSession Transfer Number for SR-VCC (STN-SR)\nFor the purposes of the present document, the following terms and definitions given in IETF RFC 5012 [16] apply:\nEmergency service URN\nFor the purposes of the present document, the following terms and definitions given in IETF RFC 4353 [55] apply:\nConference\nConference URI\nFocus\nParticipant\nFor the purposes of the present document, the following terms and definitions given in IETF RFC 3264 [58] apply:\nDirectionality\nFor the purposes of the present document, the following terms and definitions given in 3GPP TS 23.292 [63] apply:\nICS user\nFor the purposes of the present document, the following terms and definitions given 3GPP TS 24.229 [2] apply:\nAuthorised Resource-Priority header field\nTemporarily Authorised Resource-Priority header field\nNOTE:\tWithin the present specification, a Temporarily Authorised Resource-Priority header field can be applied to handling of originating requests in the ATCF.\nFor the purposes of the present document, the following terms and definitions given in 3GPP TS 24.301 [52] apply:\nEvolved Packet System (EPS)\nPersistent EPS bearer context\nFor the purposes of the present document, the following terms and definitions given in 3GPP TS 23.501 [96] apply:\n5G System (5GS)\nNG-RAN\nNon-3GPP InterWorking Function (N3IWF)\nProtocol Data Unit (PDU) session\nFor the purposes of the present document, the following terms and definitions given in 3GPP TS 24.501 [98] apply:\nPersistent PDU session context\nFor the purposes of the present document, the following terms and definitions given 3GPP TS 29.274 [70] apply:\nAllocation/Retention Priority (ARP)\nFor the purposes of the present document, the following terms and definitions given 3GPP TS 23.216 [49] apply:\n5G SRVCC\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "3.2\tAbbreviations",
                    "description": "",
                    "summary": "",
                    "text_content": "For the purposes of the present document, the abbreviations given in 3GPP TR 21.905 [1] and the following apply. An abbreviation defined in the present document takes precedence over the definition of the same abbreviation, if any, in 3GPP TR 21.905 [1].\n1xx\tA SIP status-code in the range 101 through 199\n18x\tA SIP status-code in the range 180 through 189\n2xx\tA SIP status-code in the range 200 through 299\nEATF\tEmergency Access Transfer Function\nE-STN-SR\tEmergency Call Session Transfer Number – Single Radio\nE-SR-VCC\tEmergency Single Radio Voice Call Continuity\nC-MSISDN\tCorrelation MSISDN\nIMRN\tIP Multimedia Routing Number\nSC\tService Continuity\nSCC\tService Centralization and Continuity\nSM\tSession Management\nSRVCC\tSingle Radio Voice Call Continuity\nSTI\tSession Transfer Identifier\nSTI-rSR\tSession Transfer Identifier for reverse SRVCC\nSTN\tSession Transfer Number\nSTN-SR\tSession Transfer Number - Single Radio\nvSRVCC\tSingle Radio Video Call Continuity\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                }
            ]
        },
        {
            "title": "4\tOverview of IP Multimedia (IM) Core Network (CN) subsystem Service Continuity",
            "description": "",
            "summary": "",
            "tables": [],
            "figures_meta_data": [],
            "subsections": [
                {
                    "title": "4.1\tGeneral",
                    "description": "",
                    "summary": "",
                    "text_content": "In general, IMS Service Continuity provides the capability of continuing ongoing communication sessions with multiple media across different access networks. The main need for such continuity arises because user equipments (UEs) with multimedia capabilities can move across a multiplicity of different access networks.\nNOTE 1:\tThe capability of continuing ongoing communication sessions as a collaboration between different user equipments (UEs) is described in 3GPP TS 24.337 [64].\nNOTE 2:\tIn this subclause, the term \"PS-CS\" is used as a general term to refer to bi-directional access transfer. When required to specify the direction for the access transfer, then the terms \"PS to CS\" and \"CS to PS\" are used.\nThe following procedures are provided within this document:\n-\tprocedures for registration in IM CN subsystem are specified in clause 6;\n-\tprocedures for call origination are specified in clause 7;\n-\tprocedures for call termination are specified in clause 8;\n-\tprocedures for PS-CS access transfer are specified in clause 9;\n-\tprocedures for PS-PS access transfer are specified in clause 10;\n-\tprocedures for PS-PS access transfer in conjunction with PS-CS access transfer are specified in clause 11;\n-\tprocedures for PS-CS access transfer for Single Radio are specified in clause 12;\n-\tprocedures for media adding/deleting for access transfer are specified in clause 13; and\n-\tprocedures for service continuity and MMTEL interactions are specified in clause 20.\nIn general, the SC UE supports the capabilities of this specification that it needs, see subclause 5.2. Clause G.2 provides a summary of how the capabilities described in this specification are communicated from the SC UE to the network.\nNetwork equipment conforming with this specification is detailed in subclause 5.3 through subclause 5.7, with additional optional procedures specified in clause 7 onwards, but may be summarised as follows:\n1)\tconforming networks support at least one of the following core functionalities:\na)\tprocedures for PS to CS dual radio access transfer, for a session with an active speech media component;\nb)\tprocedures for PS-PS access transfer, for a session with an active speech media component;\nc)\tprocedures for PS to CS SRVCC for a session with an active speech media component; or\nd)\tprocedures for CS to PS dual radio access transfer, for a session with an active speech media component;\n2)\tfor each of the core functionality in 1) above, access transfer for a session with an inactive speech media component may also be supported;\n3)\tfor each of the core functionality in 1) above, access transfer for a session with conference control with active speech media component or inactive speech media component may also be supported;\n4)\tfor each of the core functionality in 1) above, access transfer in the alerting phase with an active speech media component may also be supported. The alerting phase is applicable only for sessions where a SIP 180 (Ringing) response has been sent or received;\n5)\tif 4) is supported, then PS to CS SRVCC access transfer for originating calls in pre-alerting phase with an active speech media component may also be supported. This applies for an early dialog where a SIP 180 (Ringing) response has not been received;\n6)\tfor each of the core functionality in 1) above, access transfer for a session with active speech media component and active video media component may also be supported. If access transfer for a session with active speech media component and active video media component is supported, then:\na)\taccess transfer in the alerting phase with an active speech media component and active video media component may also be supported. The alerting phase is applicable only for sessions where a SIP 180 (Ringing) response has been sent or received; and\nb)\tif 6a) is supported, then PS to CS SRVCC for originating calls in pre-alerting phase with an active speech media component and an active video media component may also be supported. This applies for an early dialog where a SIP 180 (Ringing) response has not been received;\n7)\tif 1) c) is supported, then CS to PS SRVCC access transfer for an active session with an active speech media component may also be supported. Within this capability, then:\na)\tif 2) is supported, then access transfer for a session with an inactive speech media component may also be supported;\nb)\tif 3) is supported, then access transfer for a session with conference control with active speech media component or inactive speech media component may also be supported; and\nc)\tif 4) is supported, then access transfer in the alerting phase with an active speech media component may also be supported; and\n8)\tif 1) a) and 1) d) is supported, then dual radio access transfer for originating calls in pre-alerting phase with an active speech media component may also be supported. This applies for an early dialog where a SIP 180 (Ringing) response has not been received.\nIn addition to the above, the network can choose to support SRVCC with ATCF and ATGW functionality. For a roaming user, the ATCF allows service continuity to be executed in the visited network as opposed to the home network.\nClause G.3 provides a summary of how the SCC AS and ATCF communicate their support for the access transfer features described in this document, to the SC UE.\nFor a UE or an AS not supporting ICS procedures, PS-CS access transfer procedures enable transfer of\n-\tone full-duplex session with active speech or speech/video media component; and\n-\tup to one full-duplex session with active speech or speech/video media component and up to one session with inactive speech or speech/video media component when the MSC Server assisted mid-call feature is supported.\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "4.2\tUnderlying network capabilities",
                    "description": "",
                    "summary": "",
                    "text_content": "",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": [
                        {
                            "title": "4.2.1\tGeneral",
                            "text_content": "SC assumes the use of a number of underlying network capabilities:\n1)\tprovision by the home network operator of  on the IM CN subsystem, as specified in 3GPP TS 24.229 [2]; and\n2)\tif ICS is used, the network capabilities as specified in 3GPP TS 24.292 [4].\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "4.2.2\tPS-CS session continuity, Single Radio",
                            "text_content": "In order to allow for PS-CS session continuity, Single Radio, SRVCC procedures assume that filter criteria causes all sessions subject to PS to CS SRVCC to be anchored in an SCC AS as described in 3GPP TS 23.216 [5].\nConfiguration of QoS assignment for PS to CS SRVCC as defined in 3GPP TS 23.203 [65] and 3GPP TS 23.107 [66] need to be aligned with the initial filter criteria and  determination that a session is subject to SR-VCC as defined in 3GPP TS 23.216 [5].\nIn order to allow for PS-CS session continuity, Single Radio, vSRVCC procedures assume that filter criteria causes all sessions subject to vSRVCC to be anchored in an SCC AS as described in 3GPP TS 23.216 [5].\nConfiguration of QoS assignment for vSRVCC as defined in 3GPP TS 23.203 [65] needs to be aligned with the initial filter criteria and  determination that a session is subject to vSRVCC as defined in 3GPP TS 23.216 [5].\nWhen SRVCC enhanced with ATCF is used, the SRVCC and vSRVCC procedures assume that all sessions subject to SRVCC and vSRVCC are anchored in the same ATCF. When 5G SRVCC is used, the SRVCC procedures assume that all sessions subject to SRVCC are anchored in the same ATCF.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "4.2.3\tPS to CS and CS to PS session continuity, dual radio access transfer",
                            "text_content": "In order to allow for dual radio access transfer procedures in clauses 9 and 10, the dual radio procedures assume that filter criteria causes all sessions subject to dual radio access transfer to be anchored in an SCC AS as described in 3GPP TS 23.237 [9].\n",
                            "figures_meta_data": [],
                            "tables": []
                        }
                    ]
                },
                {
                    "title": "4.3\tURI and address assignments",
                    "description": "",
                    "summary": "",
                    "text_content": "In order to support SC to a subscriber, the following URI and address assignments are assumed:\na)\tin this version of the document, the SC UE for access transfer will be configured with a static STI, in accordance with subclause 5.11 in 3GPP TS 24.216 [5]; a static STN in accordance with subclause 5.12 in 3GPP TS 24.216 [5]. The static STI is used by the SC UE to perform CS to PS access transfer when no dynamically assigned STI is provided to the UE over the CS domain (e.g. when the SC UE does not support ICS capabilities as defined in 3GPP TS 24.292 [4]). The static STN is used by the SC UE to perform PS to CS access transfer when no service control signalling path as specified in 3GPP TS 24.292 [4] is available; a PS to PS STI URI in accordance with subclause 5.30 in 3GPP TS 24.216 [5].\nb)\tthe SC UE will be configured to be reachable in both the IM CN subsystem and the CS domain by one or more public telecommunication numbers which should be correlated between the CS domain and IM CN subsystem. Either:\n-\tthis public telecommunication number can be the DN (e.g. MSISDN) used in the CS domain and (in international form) comprise part of the implicit registration set associated with that SC UE in the IM CN subsystem; or\n-\tthe SCC AS can be configured to provide a functional relationship between separate numbers providing each of these identities in the CS domain and the IM CN subsystem, respectively.\nc)\tthe SCC AS is configured to be reachable using:\n-\tthe STN-SR allocated to the SCC AS;\n-\tthe additional transferred session SCC AS URI allocated to the SCC AS;\n-\tthe additional transferred session SCC AS URI for PS to CS SRVCC allocated to the SCC AS;\n-\tthe additional transferred session SCC AS URI for CS to PS SRVCC allocated to the SCC AS;\n-\tthe additional transferred session SCC AS URI for PS to CS dual radio allocated to the SCC AS;\n-\tthe additional transferred session SCC AS URI for CS to PS dual radio allocated to the SCC AS;\n-\tthe ATU-STI for PS to CS SRVCC allocated to the SCC AS;\n-\tthe ATU-STI for CS to PS SRVCC allocated to the SCC AS;\n-\tthe PS to PS STI for PS to PS access transfer; and\n-\tthe dynamic STN allocated to the SCC AS.\nd)\tthe ATCF is configured to be reachable using:\n-\tthe STN-SR allocated to the ATCF;\n-\tthe ATCF URI for originating requests allocated to the ATCF;\n-\tthe ATCF URI for terminating requests allocated to the registration path;\n-\tATCF management URI allocated to the ATCF. The ATCF management URI is included in the g.3gpp.atcf-mgmt-uri feature-capability indicator that the ATCF includes in a Feature-Caps header field in the SIP REGISTER request; and\n-\tATCF URI for anchoring additionally transferred call in ATCF.\ne)\tthe MSC server enhanced for ICS and supporting CS to PS SRVCC is configured to be reachable (in addition to configuration in 3GPP TS 24.292 [4]) using:\n-\tthe MSC URI for redirected terminating sessions allocated to the registration path; and\n-\tthe MSC server management URI allocated to the MSC server.\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "4.4\tSupport of session continuity in enterprise scenarios",
                    "description": "",
                    "summary": "",
                    "text_content": "Session continuity can be applied where hosted enterprise services are supported as documented in ETSI TS 182 024 [76] the UE registers with the S-CSCF in the normal manner, and the procedures of this document can be used with an SCC AS in the home network.\nWhere the UE is supported by an application server in the enterprise, any enterprise UE requiring service continuity to be supported by the public network requires an  AS in the home network, and therefore registration with an S-CSCF in the home network.\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "4.5\tGuidelines for use of media feature tags or feature capability indicators",
                    "description": "",
                    "summary": "",
                    "text_content": "NOTE 1:\tWhen the values appropriate for use with a media feature tag are of string type, then when included in Contact, Accept-Contact or Reject-Contact header fields, the value of the media feature tag is preceded by \"<\" and followed by \">\" according to IETF RFC 3840 [53] and IETF RFC 3841 [78].\nNOTE 2:\tWhen the values appropriate for use with feature capability indicators specified in annex C are string, then when the values are included in Feature-Caps header field, the value of the header field is an instance of fcap-string-value of Feature-Caps header field specified in RFC 6809 [60].\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                }
            ]
        },
        {
            "title": "5\tFunctional entities",
            "description": "",
            "summary": "",
            "tables": [],
            "figures_meta_data": [],
            "subsections": [
                {
                    "title": "5.1\tIntroduction",
                    "description": "",
                    "summary": "",
                    "text_content": "This clause associates the functional entities with the SC roles described in the stage 2 architecture document (see 3GPP TS 23.237 [9]).\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "5.2\tUser Equipment (UE)",
                    "description": "",
                    "summary": "",
                    "text_content": "To be compliant with access transfer in this document, a UE shall implement the role of an SC UE:\n-\tacting as an UA as defined in 3GPP TS 24.229 [2];\n-\taccording to subclause 6.2 for registration of the UE in the IM CN subsystem; and\n-\tdependent on the desired functionality, one or more of the procedures according to subclause 6A.2, subclause 7.2, subclause 8.2, subclause 9.2, subclause 10.2, subclause 11.2, subclause 12.2, subclause 13.2 and subclause 20.1.\nA UE supporting access transfer to the EPS IP-CAN shall originate the session or call in accordance with the requirements applicable to a UE in the SC role. Transfer of PDU sessions from 5GS to EPS is defined in 3GPP TS 23.502 [97].\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "5.3\tApplication Server (AS)",
                    "description": "",
                    "summary": "",
                    "text_content": "To be compliant with access transfer in this document, an AS shall implement the role of:\n1)\tan AS performing 3rd party call control acting as an routeing B2BUA as defined in 3GPP TS 24.229 [2]; and\n2)\tan SCC AS as follows: dependent on the desired functionality, one or more of the procedures according to subclause 6.3, subclause 6A.4, subclause 7.3, subclause 8.3, subclause 9.3, subclause 10.3, subclause 11.3, subclause 12.3, subclause 13.3 and subclause 20.1.\nIf the SCC AS receives a SIP INVITE request:\n-\twith either the Replaces header field (see IETF RFC 3891 [10]) or the Target Dialog header field (see IETF RFC 4538 [11]), indicating a dialog identifier of a session belonging to the subscribed user; and\n-\twith the Request-URI not containing the additional transferred session SCC AS URI;\nand the SCC AS does not support the procedures for performing PS to PS access transfer specified in subclause 10.3, then the SCC AS shall send a SIP 403 (Forbidden) response to the SIP INVITE request, with a Reason header field containing protocol \"SIP\" and reason-text set to \"PS to PS access transfer not supported\".\nThe SCC AS also handles SDP media description conflicts according to subclause 6A.5.\nThe SCC AS may also indicate the traffic leg according to subclause 6A.6.\nIf the SCC AS supports the procedures according to subclause 12.3, the SCC AS shall support procedures according to subclause 22.3.\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "5.4\tMSC server",
                    "description": "",
                    "summary": "",
                    "text_content": "An MSC server can be compliant with PS to CS SRVCC session transfer procedures as described in this document.\nIn order to be compliant with PS to CS SRVCC session transfer procedures as described in this document:\n-\tan MSC server using SIP interface to initiate the session transfer shall provide the UA role as defined for a MSC server enhanced for SRVCC using SIP interface in annex A of 3GPP TS 24.229 [2] and the role of an MSC server enhanced for PS to CS SRVCC using SIP interface as described in subclause 12.6.1.1; or\n-\tan MSC server shall provide the role of an MSC server enhanced for ICS as specified in subclause 12.4.0.\nIf an MSC server is enhanced for ICS and is compliant with PS to CS SRVCC session transfer procedures as described in this document, the MSC server shall also provide the role of an MSC server enhanced for ICS as specified in subclause 22.2.\nIn order to be compliant with vSRVCC session transfer procedures as described in this document, the MSC server shall be:\n-\tcompliant with the PS to CS SRVCC session transfer procedure specified in subclause 12.6.1.1 and additionally provide the functionality to support vSRVCC, as described in subclause 12.6.1.2; or\n-\tcompliant with the PS to CS SRVCC session transfer procedure specified in subclauses 12.4.0 and additionally provide the functionality to support vSRVCC, as described in subclause 12.4.0B.\nAn MSC server can be compliant with the access transfer procedures for the MSC server assisted mid-call feature as described in this document.\nIn order to be compliant with the access transfer procedures for the MSC server assisted mid-call feature as described in this document, the MSC server shall:\n-\tprovide the role of an MSC server enhanced for ICS as described in subclause 6.4 and subclause 9.4 and additionally provide the functionality described in subclause 9.5;\n-\tprovide the role of an MSC server enhanced for ICS as described in subclause 12.4.0, and additionally provide the functionality described in subclause  12.4A; or\n-\tprovide the role of an MSC server enhanced for PS to CS SRVCC using a SIP interface as described in subclause 12.6.1.1, and additionally provide the functionality described in subclause 12.4A.\nIn order to enable the UE to remove/add participants from/to an IMS conference call after the access transfer, the MSC Server supporting the MSC server assisted mid-call feature shall provide the role of an MSC server enhanced for ICS.\nAn MSC server can be compliant with the procedures for the PS to CS SRVCC for calls in alerting phase as described in this document.\nIn order to be compliant with the procedures for the PS to CS SRVCC for calls in alerting phase as described in this document, the MSC server shall:\n-\tprovide the role of an MSC server enhanced for ICS as described in subclause 12.4.0 or subclause 12.4.0B, and additionally provide the functionality described in subclause 12.6.3; or\n-\tprovide the role of an MSC server enhanced for SRVCC using a SIP interface as described in subclause 12.6.1 and additionally provide the functionality described in subclause 12.6.3.\nThe MSC server also handles SDP media description conflicts according to subclause 6A.5.\nIf the MSC server supports the PS to CS SRVCC for calls in alerting phase, the MSC server may also support the PS to CS SRVCC for originating calls in pre-alerting phase. The procedures for the PS to CS SRVCC for originating calls in pre-alerting phase are described in the subclauses describing the PS to CS SRVCC for calls in alerting phase.\nIn order to be compliant with PS to CS dual radio access transfer procedures as described in this document an MSC server enhanced for DRVCC using SIP interface to initiate the access transfer shall provide the UA role as defined for an MSC server enhanced for DRVCC using SIP interface in annex A of 3GPP TS 24.229 [2] and the role of an MSC server enhanced for PS to CS dual radio access transfer using SIP interface as described in subclause 9.8.\nIf a MSC server supports the PS to CS dual radio access transfer for calls in alerting phase, the MSC server shall support UA role procedure defined in IETF RFC 3262 [86] and IETF RFC 3311 [87].\nThe MSC server may also indicate the traffic leg according to subclause 6A.6.\nIn all SIP INVITE requests sent by the MSC server, the MSC server shall insert a P-Charging-Vector header field with the \"icid-value\" header field parameter populated as specified in 3GPP TS 32.260 [85] and a type 1 \"orig-ioi\" header field parameter. The MSC server shall set the type 1 \"orig-ioi\" header field parameter to a value that identifies the sending network of the request. The MSC server shall not include the type 1 \"term-ioi\" header field parameter.\nWhen initiating a failure response to any received request, depending on operator policy, the MSC server may insert a Response-Source header field with an \"fe\" header field parameter constructed with the URN namespace \"urn:3gpp:fe\", the fe-id part of the URN set to \"msc-server\" and optionally an appropriate fe-param part of the URN set in accordance with subclause 7.2.17 of 3GPP TS 24.229 [2].\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "5.5\tEATF",
                    "description": "",
                    "summary": "",
                    "text_content": "To be compliant with access transfer in this document, the EATF shall act as B2BUA and:\n-\textract charging information as specified for an AS in 3GPP TS 24.229 [2], subclause 5.7.1.2;\n-\tidentify the served user as specified for an AS in 3GPP TS 24.229 [2], subclause 5.7.1.3A.2;\n-\tmap the message header fields from a SIP message received in one dialog to related SIP message sent in the correlated dialog managed by EATF as specified for an AS in 3GPP TS 24.229 [2], subclause 5.7.5.1;\n-\tpass signalling elements as specified for an AS in 3GPP TS 24.229 [2], subclause 5.7.5.1;\n-\thandle P-Charging-Vector header as specified for an routeing AS in 3GPP TS 24.229 [2], subclause 5.7.5.1; and\n-\timplement the role of an EATF according to subclause 7.4 and subclause 12.5.\nThe EATF also handles SDP media description conflicts according to subclause 6A.5.\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "5.6\tAccess Transfer Control Function (ATCF)",
                    "description": "",
                    "summary": "",
                    "text_content": "To be compliant with access transfer in this document, the ATCF shall:\n1)\tprovide the proxy role as defined in 3GPP TS 24.229 [2], with the exceptions and additional capabilities as described for the ATCF in subclause 6.5, subclause 6A.3, subclause 7.5, subclause 8.4, and subclause 12.7.2.4;\n2)\tprovide the B2BUA functionality with the exceptions and additional capabilities as described for the ATCF in subclause 12.7.2. When providing the B2BUA functionality, the ATCF shall provide the UA role as defined in 3GPP TS 24.229 [2] and additionally shall:\na.\tinternally map the message header fields from a SIP message received in one dialog to related SIP message sent in the correlated dialog managed by ATCF;\nb.\ttransparently pass supported and unsupported signalling elements (e.g. SIP headers, SIP messages bodies); and\nc.\ttransparently forward received Contact header field, P-Asserted-Identity header field and, if available, the Privacy header field.\nThe following procedures apply to all procedures at the ATCF:\n1)\tif it has been decided to anchor the media in ATGW according to operator policy, and a SIP message including an SDP offer or answer is received:\nNOTE:\tAt this point, ATCF interacts with ATGW to provide information needed in the procedures below, and to request the ATGW to start forwarding the media(s) from the remote UE to the local UE. The details of interaction between ATCF and ATGW are out of scope of this document.\na.\tupon the received message with an SDP offer or answer included is sent by the served UE within the dialog, replace the SDP in the received SIP message with updated SDP provided by ATGW, which contains the ATGW IP addresses and ports; and\nb.\tupon the received message with an SDP offer or answer included is sent by the remote UE within the dialog, replace the SDP in the received SIP message with updated SDP provided by ATGW, which contains the ATGW IP addresses and ports; and\n2)\tthe ATCF also handles SDP media description conflicts according to subclause 6A.5.\nThe ATCF may also indicate the traffic leg according to subclause 6A.6.\nThe ATCF shall log all SIP requests and responses that contain a \"logme\" header field parameter, as defined in IETF RFC 8497 [94], in the SIP Session-ID header field if required by local policy.\nWhen initiating a failure response to any received request, depending on operator policy, the ATCF may insert a Response-Source header field with an \"fe\" header field parameter constructed with the URN namespace \"urn:3gpp:fe\", the fe-id part of the URN set to \"atcf\" and optionally an appropriate fe-param part of the URN set in accordance with subclause 7.2.17 of 3GPP TS 24.229 [2].\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "5.7\tAccess Transfer Gateway (ATGW)",
                    "description": "",
                    "summary": "",
                    "text_content": "The functionality of the ATGW is specified in 3GPP TS 23.237 [9].\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                }
            ]
        },
        {
            "title": "6\tRoles for registration in the IM CN subsystem for service continuity",
            "description": "",
            "summary": "",
            "tables": [],
            "figures_meta_data": [],
            "subsections": [
                {
                    "title": "6.1\tIntroduction",
                    "description": "",
                    "summary": "",
                    "text_content": "Void.\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "6.2\tSC UE",
                    "description": "",
                    "summary": "",
                    "text_content": "",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": [
                        {
                            "title": "6.2.1\tDistinction of requests",
                            "text_content": "The SC UE needs to distinguish the following initial SIP requests:\n1)\tSIP MESSAGE requests with the P-Asserted-Identity header field containing the STI-rSR. In the procedures below, such requests are known as \"SIP MESSAGE requests with ATGW information for CS to PS SRVCC\".\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "6.2.2\tGeneral",
                            "text_content": "Prior to performing IMS registration, if the SC UE supports ICS capabilities as defined in 3GPP TS 24.292 [4], the SC UE shall check that IMS service continuity using ICS is enabled. An indication that SC using ICS is enabled or disabled can be found in the ICS MO ICS_Capabilities_Enabled leaf node (see 3GPP TS 24.286 [23]).\nThe SC UE shall follow the procedures specified in 3GPP TS 24.229 [2] for registration of the UE in the IM CN subsystem.\nIf SC using ICS is enabled then prior to making use of ICS procedures, the SC UE shall follow the procedures specified in 3GPP TS 24.292 [4] for registration of the ICS UE in the IM CN subsystem.\nThe SC UE shall include the g.3gpp.accesstype media feature tag as described in clause B.3 of 3GPP TS 24.292 [4] in the Contact header field of the SIP REGISTER request.\nIf the SC UE supports the CS to PS SRVCC, the SC UE shall include the g.3gpp.cs2ps-srvcc media feature tag in the Contact header field of the SIP REGISTER request.\nUpon receiving a SIP 2xx response to the REGISTER request and if the SIP 2xx response contains a Feature-Caps header field with the g.3gpp.atcf feature-capability indicator and with the g.3gpp.cs2ps-srvcc feature-capability indicator, the SC UE shall:\n1)\tdetermine STI-rSR as the value of the g.3gpp.cs2ps-srvcc feature-capability indicator in the Feature-Caps header field containing both the g.3gpp.atcf feature-capability indicator and the g.3gpp.cs2ps-srvcc feature-capability indicator; and\n2)\tstore the determined STI-rSR.\nIf the SC UE supports the PS to PS access transfer and the PS to PS STI URI is configured in the SC UE, the SC UE shall include the g.3gpp.pstops-sti media feature tag in the Contact header field of the SIP REGISTER request.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "6.2.3\tSC UE receiving the ATGW information for CS to PS SRVCC",
                            "text_content": "If the SC UE supports the CS to PS SRVCC, upon receiving a SIP MESSAGE request with ATGW information for CS to PS SRVCC, if the SIP MESSAGE request is acceptable for the UE, in addition to sending a SIP 2xx response to the SIP MESSAGE request, the SC UE shall;\n1)\tdetermine the ATGW information for CS to PS SRVCC as the application/SDP MIME body of the SIP MESSAGE request;\n2)\tstore the determined ATGW information for CS to PS SRVCC;\n3)\tgenerate the UE information for CS to PS SRVCC as an SDP answer to the determined ATGW information for CS to PS SRVCC according to IETF RFC 3264 [58] and 3GPP TS 24.229 [2];\n4)\tstore the generated UE information for CS to PS SRVCC; and\n5)\tsend a SIP MESSAGE request according to 3GPP TS 24.229 [2]. The SC UE shall populate the SIP MESSAGE request with:\nA)\tRequest-URI containing the determined STI-rSR;\nB)\tContent-Disposition header field with value \"render\"; and\nC)\tapplication/sdp MIME body containing the generated UE information for CS to PS SRVCC.\n",
                            "figures_meta_data": [],
                            "tables": []
                        }
                    ]
                },
                {
                    "title": "6.3\tSCC AS",
                    "description": "",
                    "summary": "",
                    "text_content": "",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": [
                        {
                            "title": "6.3.1\tGeneral",
                            "text_content": "The SCC AS can obtain registration state information that it needs to implement SCC specific requirements from:\na)\tany received third-party SIP REGISTER request (e.g. including information contained in the body of the third-party SIP REGISTER request) as specified in 3GPP TS 24.229 [2];\nb)\tany received reg event package as specified in 3GPP TS 24.229 [2]; or\nc)\tthe Sh interface as specified in 3GPP TS 29.328 [6] and 3GPP TS 29.329 [7].\nNOTE 1:\tObtaining registration state information from HSS using Sh interface does not allow the SCC AS to know the capabilities supported by the user registered UE(s), including the used IP-CAN(s), other than that is specified in 3GPP TS 29.328 [6], e.g. the UE PS to CS SRVCC capability and 3GPP access networks' information related to T-ADS.\nWhen the SCC AS obtains the registration state information including an Correlation MSISDN using one of the above procedures, the SCC AS shall determine if the registration state information is associated with ongoing CS call by matching the Correlation MSISDN against the:\na)\ttel URI in the P-Asserted-Identity header field or associated with the received IMRN when the SIP INVITE request was due to PS to CS STN, where the SIP INVITE request was stored according to subclause 7.3.1; or\nb)\ttel URI in the Request-URI when the SIP INVITE request was due to processing unregistered filter criteria, where the SIP INVITE request was stored according to subclause 7.3.1.\nIf the registration state information is associated with an ongoing call the contents of the registration state information shall be bound to the ongoing CS call session identifier.\nNOTE 2:\tThe SCC AS has no responsibility for supervising the registration state of the SCC UE, nor taking any actions resulting from deregistration. If deregistration of the SC UE occurs, then the other functional entities in IMS, e.g. the S-CSCF, will initiate the release of SIP dialogs that are supported in the SCC AS.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "6.3.2\tTriggers for the SCC AS providing information to ATCF",
                            "text_content": "This subclause applies for a contact address (or a registration flow, if multiple registration mechanism is used) in the registration state information obtained by :\n1)\twhich is registered by the UE:\nA)\tin NG-RAN, E-UTRAN, UTRAN or GERAN; and\nNOTE:\tThe access network where the UE performed registration can be found in the P-Access-Network-Info header field of the SIP REGISTER request.\nB)\tfor a private user identity associated with a C-MSISDN; and\n2)\twhere the SIP REGISTER request contained a Feature-Caps header field containing the g.3gpp.atcf feature-capability indicator.\nThe SCC AS shall identify the ATCF URI for terminating requests of the related ATCF as the URI in the g.3gpp.atcf-path feature-capability indicator included in a Feature-Caps header field of the SIP REGISTER request that created the binding.\nThe SCC AS shall store the feature-capability indicators indicated in the Feature-Caps header field containing the g.3gpp.atcf feature-capability indicator until the binding is removed.\nThe SCC AS shall determine that PS to CS SRVCC is usable for the UE if the private user identity of the UE has an associated STN-SR (see 3GPP TS 29.328 [6]) and:\n1)\tthe UE PS to CS SRVCC Capability (see 3GPP TS 29.328 [6]) of the UE has value UE-SRVCC-CAPABILITY-SUPPORTED;\n2)\tthe UE 5G SRVCC Capability (see 3GPP TS 29.328 [6]) of the UE has value UE-5G-SRVCC-CAPABILITY-SUPPORTED;\n3)\tthe g.3gpp.accesstype media feature tag is present in a Contact header field of the SIP REGISTER request from the UE;\n4)\tthe SRVCC data for the UE (see 3GPP TS 29.562 [xx]) contains the ueSrvccCapabilities attribute set to:\nA)\t\"UE_4G_SRVCC_CAPABLE\";\nB)\t\"UE_5G_SRVCC_CAPABLE\"; or\nC)\t\"UE_4G_SRVCC_CAPABLE\" and \"UE_5G_SRVCC_CAPABLE\"; or\n5)\tany combination of the above.\nIf  supports CS to PS SRVCC, the SCC AS shall also determine whether the CS to PS SRVCC is usable for the private user identity of the UE as described in subclause 6.3.4.\nWhen the SCC AS becomes aware of a new contact address (or new registration flow, if multiple registration mechanism is used) that fulfils the above criteria and:\n-\tPS to CS SRVCC is usable for the UE; or\n-\tthe SCC AS supports CS to PS SRVCC and CS to PS SRVCC is usable for the UE;\nthe SCC AS shall perform actions as described in subclause 6.3.3 with the related ATCF.\nWhen the SCC AS becomes aware that, for a UE which registered the contact address (or registered the registration flow, if multiple registration mechanism is used) that fulfils the above criteria that:\n1)\tPS to CS SRVCC was usable and PS to CS SRVCC is not usable now;\n2)\tPS to CS SRVCC was not usable and PS to CS SRVCC is usable now; or\n3)\tthe SCC AS supports CS to PS SRVCC and:\nA)\tCS to PS SRVCC was usable and CS to PS SRVCC is not usable now; or\nB)\tCS to PS SRVCC was not usable and CS to PS SRVCC is usable now;\nthen the SCC AS shall provide the PS to CS SRVCC related information to the related ATCF as described in subclause 6.3.3.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "6.3.3\tSCC AS providing the PS to CS SRVCC related information to the ATCF",
                            "text_content": "In order to provide the PS to CS SRVCC related information to the ATCF, the SCC AS shall perform the role of an AS acting as originating UA according to 3GPP TS 24.229 [2] subclause 5.7.3 using the procedure for sending an initial request on behalf of a PSI and shall send a SIP MESSAGE request populated as follows:\n1)\tthe Request-URI set to the ATCF management URI of the ATCF associated with the registration path (or registration flow, if multiple registration mechanism is used);\nNOTE 1:\tThe ATCF management URI of the ATCF is the URI contained in the g.3gpp.atcf-mgmt-uri feature-capability indicator that is included in a Feature-Caps header field of the SIP REGISTER request which the S-CSCF received from the UE using the method to obtain registration state information described in step a) of subclause 6.3.1.\n2)\tthe P-Asserted-Identity header field containing the identity of the SCC AS;\n3)\tthe application/vnd.3gpp.SRVCC-info+xml MIME body as defined in clause D.3;\nNOTE 2:\tThe ATCF URI for terminating calls of the registration path (or registration flow, if multiple registration mechanism is used) is contained in the g.3gpp.atcf-path feature-capability indicator that is included in a Feature-Caps header field of the SIP REGISTER request which the S-CSCF received from the UE using the method to obtain registration state information described in step a) of subclause 6.3.1.\n4)\tthe P-Charging-Vector header field containing a type 1 \"orig-ioi\" header field parameter. The SCC AS shall set the type 1 \"orig-ioi\" header field parameter to a value that identifies the sending network of the request. The SCC AS shall not include the type 1 \"term-ioi\" header field parameter; and\n5)\tif the SCC AS supports indicating the traffic leg associated with a URI as specified in IETF RFC 7549 [83], the UE is roaming and if required by local policy, the SCC AS shall:\na)\tappend the \"iotl\" SIP URI parameter to the URI in the Request-URI with a value set to \"homeB-visitedB\";\nb)\tif required by local policy, the SCC AS may append an \"iotl\" SIP URI parameter with a value set to \"visitedA-homeA\" to:\n-\tthe ATU-STI URI in the the application/vnd.3gpp.SRVCC-info+xml MIME body defined in clause D.3; and\n-\tthe additional transferred session SCC AS URI for PS to CS SRVCC in the Refer-To URI of SIP REFER requests.\nNOTE 3:\tThe SCC AS can use the P-Visited-Network-Identity header field in the 3rd party SIP REGISTER request received when the UE registered in PS to determine if the UE is roaming or not.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "6.3.4\tTriggers for the SCC AS providing information to MSC server",
                            "text_content": "If the SCC AS supports the CS to PS SRVCC, this subclause applies for a contact address in the registration state information obtained by :\n1)\twhich is registered for a private user identity associated with an MSC server enhanced for ICS according to 3GPP TS 23.003 [12], subclause 20.3.3;\n2)\twhich is registered for a private user identity associated with a C-MSISDN; and\n3)\twhere the g.3gpp.cs2ps-srvcc media feature tag and the g.3gpp.path media feature tag are associated with the contact address.\nThe SCC AS shall determine that the CS to PS SRVCC is usable if:\n1)\ta private user identity of a UE (i.e. other than those according to 3GPP TS 23.003 [12], subclause 20.3.3) associated with the same C-MSISDN as the private user identity belonging to the MSC server exists;\n2)\ta binding of a contact address exists for the private user identity of the UE:\nA) such that the g.3gpp.cs2ps-srvcc media feature tag is associated with the contact address of the UE; and\nB)\tsuch that SIP REGISTER request which registered the binding contained a Feature-Caps header field with the g.3gpp.atcf feature-capability indicator and with g.3gpp.cs2ps-srvcc media feature tag;\n3)\tthe CS to PS SRVCC capability indication is indicated for the private user identity of the UE; and\n4)\tthe private user identity of the UE has the CS to PS SRVCC allowed indication in the subscription data.\nWhen the SCC AS becomes aware of a new contact address that fulfils the above criteria and the CS to PS SRVCC is usable, the SCC AS shall perform actions as described in subclause 6.3.5 for the contact address.\nWhen the SCC AS becomes aware that, for a contact address:\n1)\tthe CS to PS SRVCC was usable and the CS to PS SRVCC is not usable now; or\n2)\tthe CS to PS SRVCC was not usable and the CS to PS SRVCC is usable now;\nthen the SCC AS shall perform actions as described in subclause 6.3.5 for the contact address.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "6.3.5\tSCC AS providing the CS to PS SRVCC information to the MSC server",
                            "text_content": "If the SCC AS supports the CS to PS SRVCC, in order to provide the CS to PS SRVCC information to a contact address registered by the MSC server, the SCC AS shall perform the role of an AS acting as originating UA according to 3GPP TS 24.229 [2] subclause 5.7.3 using the procedure for sending an initial request on behalf of a PSI and shall send a SIP MESSAGE request populated as follows:\n1)\tthe Request-URI set to an IMS public user identity registered at the contact address;\n2)\tthe P-Asserted-Identity header field containing the identity of the SCC AS;\n3)\tthe Accept-Contact header field with the g.3gpp.path media feature tag with value of the g.3gpp.path media feature tag associated with the contact address and with \"explicit\" and \"require\";\n4)\tthe application/vnd.3gpp.srvcc-ext+xml MIME body; and\nNOTE:\tThe MSC URI for terminating calls of the contact address is contained in the g.3gpp.path media feature tag that is included in a Contact header field of the SIP REGISTER request which the S-CSCF received from the UE using the method to obtain registration state information described in step a) of subclause 6.3.1.\n5)\tthe P-Charging-Vector header field containing a type 1 \"orig-ioi\" header field parameter. The SCC AS shall set the type 1 \"orig-ioi\" header field parameter to a value that identifies the sending network of the request. The SCC AS shall not include the type 1 \"term-ioi\" header field parameter.\n",
                            "figures_meta_data": [],
                            "tables": []
                        }
                    ]
                },
                {
                    "title": "6.4\tMSC server",
                    "description": "",
                    "summary": "",
                    "text_content": "",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": [
                        {
                            "title": "6.4.1\tDistinction of requests",
                            "text_content": "The MSC server needs to distinguish the following initial SIP requests:\n1)\tSIP MESSAGE requests with the Accept-Contact header field containing the g.3gpp.path media feature tag and with the application/vnd.3gpp.srvcc-ext+xml MIME body. In the procedures below, such requests are known as \"SIP MESSAGE requests with MSC information for CS to PS SRVCC\".\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "6.4.2\tGeneral",
                            "text_content": "If the MSC server:\n-\tprovides the role of an MSC server enhanced for ICS; and\n-\tdetermines that the served user is an ICS user;\nthen in addition to the procedures specified in 3GPP TS 29.292 [18] and 3GPP TS 24.292 [4] the MSC server shall:\n1)\tif the MSC server supports the MSC server assisted mid-call feature, include the g.3gpp.mid-call media feature tag (as described in annex C) in the Contact header field of the SIP REGISTER request; and\n2)  if the MSC server supports the CS to PS SRVCC:\nA)\tinclude the g.3gpp.cs2ps-srvcc media feature tag in the Contact header field of the SIP REGISTER request; and\nB)\tinclude the g.3gpp.path media feature tag in the Contact header field of the SIP REGISTER request with value uniquely identifying the registration path.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "6.4.3\tMSC server receiving the MSC information for CS to PS SRVCC",
                            "text_content": "If the MSC server supports the CS to PS SRVCC, upon receiving SIP MESSAGE requests with MSC information for CS to PS SRVCC, the MSC server shall:\n1)\tif the URI in the P-Asserted-Identity header field of the SIP MESSAGE request does not identify an SCC AS authorised to provide the CS to PS SRVCC information, reject the request with SIP 403 (Forbidden) response and do not continue with the remaining steps;\nNOTE:\tin this version of specification, the URIs of SCC ASs authorised to provide PS to CS SRVCC information need to be specified in the roaming agreement.\n2)\tbind the CS to PS SRVCC information received in the application/vnd.3gpp.srvcc-ext+xml MIME body of the SIP MESSAGE request to the contact address ; and\n3)\tsend a SIP 200 (OK) response to the MESSAGE request according to 3GPP TS 24.229 [2] and include in the P-Charging-Vector header field the \"icid-value\" header field parameter set to the value received in the request, the \"orig-ioi\" header field parameter, if received in the request and a type 1 \"term-ioi\" header field parameter that identifies the sending network.\n",
                            "figures_meta_data": [],
                            "tables": []
                        }
                    ]
                },
                {
                    "title": "6.5\tAccess Transfer Control Function (ATCF)",
                    "description": "",
                    "summary": "",
                    "text_content": "",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": [
                        {
                            "title": "6.5.1\tDistinction of requests",
                            "text_content": "The ATCF needs to distinguish the following initial SIP requests:\n1)\tSIP REGISTER requests with the ATCF URI for originating requests in the topmost Route header field. In the procedures below, such requests are known as \"SIP REGISTER request originated by a UE\".\n2)\tSIP MESSAGE requests with the ATCF management URI in the Request-URI and:\nA.\tnot containing any Route header field; or\nB.\tcontaining a URI in the topmost Route header field other than the ATCF URI for originating requests and other than the ATCF URI for terminating requests.\nIn the procedures below, such requests are known as \"SIP MESSAGE requests with the PS to CS SRVCC related information\".\n3)\tSIP MESSAGE requests with the STI-rSR allocated by ATCF in the Request-URI and with the ATCF URI for originating requests in the topmost Route header field. In the procedures below, such requests are known as \"SIP MESSAGE requests with UE information for CS to PS SRVCC\".\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "6.5.2\tRegistration related procedures in the ATCF",
                            "text_content": "Upon receiving a SIP REGISTER request originated by a UE, the ATCF shall:\n1.\tif ATCF decides to include itself for access transfer of sessions according to operator policy:\nNOTE 1:\tAn example of the operator policy is that the ATCF is included in the signalling path only when the UE registers over the NG-RAN, E-UTRAN, UTRAN or GERAN.\nA.\tgenerate a unique ATCF URI for terminating requests such that the registration path (or registration flow, if multiple registration mechanism is used) can be determined for terminating requests;\nNOTE 1A:\tOne possible construction method is to set the user portion of the ATCF URI for terminating requests to the URI of the most bottom Path header field of the SIP REGISTER request.\nB.\tinsert a Path header field with the generated ATCF URI for terminating requests;\nC.\tinsert a Feature-Caps header field as described in RFC 6809 [60] with:\na.\tthe g.3gpp.atcf feature-capability indicator containing the STN-SR allocated to ATCF included as described in IETF RFC 6809 [60];\nb.\tthe g.3gpp.atcf-mgmt-uri feature-capability indicator containing the ATCF management URI included as described in IETF RFC 6809 [60];\nc.\tthe g.3gpp.atcf-path feature-capability indicator with value containing the generated ATCF URI for terminating requests as described in IETF RFC 6809 [60];\nd.\tif the ATCF is aware that all MSC servers, which can be involved in the SRVCC procedures and which are in the same network as the ATCF, support the MSC server assisted mid-call feature:\n-\tthe g.3gpp.mid-call feature-capability indicator;\ne.\tif the ATCF is aware that all MSC servers, which can be involved in the SRVCC procedures and which are in the same network as the ATCF, support the PS to CS SRVCC for calls in alerting phase:\n-\tthe g.3gpp.srvcc-alerting feature-capability indicator; and\n-\tif the ATCF is aware that all MSC servers, which can be involved in the SRVCC procedures and which are in the same network as the ATCF, support the PS to CS SRVCC for originating calls in pre-alerting phase:\ni.\tthe g.3gpp.ps2cs-srvcc-orig-pre-alerting feature-capability indicator as described in annex C; and\n-\tif the ATCF is aware that all MSC servers, which can be involved in the SRVCC procedures and which are in the same network as the ATCF, support the PS to CS SRVCC for terminating calls in pre-alerting phase:\ni.\tthe g.3gpp.ps2cs-srvcc-term-pre-alerting feature-capability indicator as described in annex C; and\nf.\tif the Contact header field of the SIP REGISTER request contains the g.3gpp.cs2ps-srvcc media feature tag and if the ATCF supports the CS to PS SRVCC:\n-\tthe g.3gpp.cs2ps-srvcc feature-capability indicator containing the STI-rSR allocated by ATCF;\nNOTE 2:\tSince the ATCF cannot be aware of which MSC server the SC UE can potentially be transferred to and the PS to CS SRVCC access transfer for a call in alerting phase is optional, all MSC servers in the network where the SC UE is attached needs to support the PS to CS SRVCC access transfer for a call in alerting phase before the ATCF can indicate support.\nNOTE 3:\tSince the ATCF cannot be aware of which MSC server the SC UE can potentially be transferred to and the PS to CS SRVCC access transfer for a call in pre-alerting phase is optional, all MSC servers in the network where the SC UE is attached needs to support the PS to CS SRVCC access transfer for a call in pre-alerting phase before the ATCF can indicate support.\nNOTE 4:\tSince the ATCF cannot be aware of which MSC server the SC UE can potentially be transferred to and the MSC server assisted mid-call feature is optional, all MSC servers in the network where the SC UE is attached needs to support the MSC server assisted mid-call feature before the ATCF can indicate support.\n2.\tif the ATCF is located in the visited network and local policy requires the application of IBCF capabilities in the visited network towards the home network select an exit point of the visited network and forward the request to that entry point;\nNOTE 5:\tThe list of the exit points can be either obtained as specified in RFC 3263 [72] or provisioned in the ATCF.\n3.\tif the ATCF is located in the visited network and local policy does not require the application of IBCF capabilities in the visited network towards the home network select an entry point of the home network and forward the request to that entry point;\nNOTE 6:\tThe list of the entry points can be either obtained as specified in RFC 3263 [72] or provisioned in the ATCF. The entry point can be an IBCF or an I-CSCF.\n4.\tif the ATCF is located in the home network select an I-CSCF of the home network and forward the request to that I-CSCF; and\nNOTE 7:\tThe list of the I-CSCFs can be either obtained as specified in RFC 3263 [72] or provisioned in the ATCF.\n5.\tif the ATCF fails to forward the SIP REGISTER request to any entry point, the ATCF shall send back a SIP 504 (Server Time-Out) response, in accordance with the procedures in RFC 3261 [19].\nUpon receiving a SIP 2xx response to the SIP REGISTER request originated by a served UE and if ATCF decided to include itself for access transfer of sessions according to operator policy, the ATCF shall:\n1)\tupdate the S-CSCF Service-Route URI bound to the registration path (see subclause 6A.3.1) identified by the ATCF Path URI;\nNOTE 8:\tThe ATCF Path URI is the URI which the ATCF inserted in the Path header field of to the SIP REGISTER request.\nNOTE 9:\tThe S-CSCF Service-Route URI is the URI in the most bottom Service-Route header field of the SIP 2xx response to the SIP REGISTER request.\n2)\tif the Contact header field of the SIP REGISTER request contains the g.3gpp.cs2ps-srvcc media feature tag and if the ATCF supports the CS to PS SRVCC:\nA)\tfor the registration path, which has the ATCF Path URI matching the URI which the ATCF inserted in the Path header field of to the SIP REGISTER request:\na)\tset the route set towards the SC UE bound to the registration path (see subclause 6A.3.1) to the Path header fields in the received SIP 2xx response preceding the ATCF Path URI; and\nb)\tset the contact address of the SC UE bound to the registration path (see subclause 6A.3.1) to the Contact header field of the SIP REGISTER request; and\n3)\tinsert a Feature-Caps header field with:\nA)\tthe g.3gpp.atcf feature-capability indicator containing the STN-SR allocated to ATCF included as described in IETF RFC 6809 [60]; and\nB)\tif the Contact header field of the SIP REGISTER request contains the g.3gpp.cs2ps-srvcc media feature tag and if the ATCF supports the CS to PS SRVCC:\na)\tthe g.3gpp.cs2ps-srvcc feature-capability indicator containing the STI-rSR allocated by ATCF.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "6.5.3\tATCF receiving the SRVCC-related information",
                            "text_content": "Upon receiving SIP MESSAGE request with the SRVCC-related information, the ATCF shall:\n1)\tif the URI in the P-Asserted-Identity header field of the SIP MESSAGE request does not identify an SCC AS authorised to provide the SRVCC-related information, reject the request with SIP 403 (Forbidden) response and do not continue with the remaining steps;\nNOTE:\tin this version of specification, the URIs of SCC ASs authorised to provide SRVCC-related information need to be specified in the roaming agreement.\n2)\tupdate the SRVCC-related information bound to the registration path(s) (see subclause 6A.3.1) with information in the application/vnd.3gpp.SRVCC-info+xml MIME body of the SIP MESSAGE request;\n3)\tdetermine session(s) established using the registration path(s) (see subclause 6A.3.1) whose SRVCC-related information were updated by the SRVCC-related information received in the SIP MESSAGE request and associate those session(s) with the SRVCC-related information bound to the registration path(s);\n4)\tfor each registration path in the SRVCC-related information received in the SIP MESSAGE request:\nA)\tif:\na)\tthe ATCF indicated the support of the CS to PS SRVCC when handling the SIP REGISTER request establishing the registration path;\nb)\tthe SRVCC-related information for the registration path contains the ATU-STI for CS to PS SRVCC; and\nc)\tthe ATCF does not have the UE information for CS to PS SRVCC bound to the registration path;\nsend the ATGW information for CS to PS SRVCC to the SC UE within the registration path using procedure described in subclause 6.5.4; and\n5)\tsend a SIP 200 (OK) response to the MESSAGE request according to 3GPP TS 24.229 [2] and include in the P-Charging-Vector header field the \"icid-value\" header field parameter set to the value received in the request, the \"orig-ioi\" header field parameter, if received in the request and a type 1 \"term-ioi\" header field parameter that identifies the sending network.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "6.5.4\tATCF sending the ATGW information for CS to PS SRVCC",
                            "text_content": "If the ATCF supports the CS to PS SRVCC, in order to send the ATGW information for CS to PS SRVCC to the SC UE within a registration path, the ATCF shall:\n1)\tgenerate the ATGW information for CS to PS SRVCC. When generating the SDP, the ATCF shall:\nA)\tset c-line to the unspecified address (0.0.0.0), if IPv4, or to a domain name within the \".invalid\" DNS top-level domain as described in IETF RFC 6157 [74], if IPv6; and\nB)\tset port number of the media line to 9;\n2)\tset the ATGW information for CS to PS SRVCC bound to the registration path (see subclause 6A.3.1) to the generated ATGW information for CS to PS SRVCC; and\n3)\tsend SIP MESSAGE request according to 3GPP TS 24.229 [2]. The ATCF shall populate the SIP MESSAGE request with:\nA)\tRequest-URI containing the contact address of the SC UE bound to the registration path (see subclause 6A.3.1);\nB)\tRoute header fields containing the route set towards the SC UE of the registration path (see subclause 6A.3.1);\nC)\tP-Asserted-Identity header field containing the STI-rSR allocated by ATCF;\nD)\tContent-Disposition header field with value \"render\"; and\nE)\tapplication/sdp MIME body containing the generated ATGW information for CS to PS SRVCC.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "6.5.5\tATCF receiving the UE information for CS to PS SRVCC",
                            "text_content": "If the ATCF supports the CS to PS SRVCC, upon receiving SIP MESSAGE request with UE information for CS to PS SRVCC and if the SIP MESSAGE request is acceptable for the ATCF, in addition to sending a SIP 2xx response to the SIP MESSAGE request, the ATCF shall:\n1)\tdetermine the related registration path, which is a registration path with the ATCF Path URI matching the URI in the top Route header field of the SIP MESSAGE request; and\n2)\tset the UE information for CS to PS SRVCC bound to the determined related registration path (see subclause 6A.3.1) to the application/sdp MIME body of the SIP MESSAGE request.\n",
                            "figures_meta_data": [],
                            "tables": []
                        }
                    ]
                }
            ]
        },
        {
            "title": "6A\tRoles for General Capabilities",
            "description": "",
            "summary": "",
            "tables": [],
            "figures_meta_data": [],
            "subsections": [
                {
                    "title": "6A.1\tIntroduction",
                    "description": "",
                    "summary": "",
                    "text_content": "This clause describes the general roles for each functional entity as specified.\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "6A.2\tUE roles",
                    "description": "",
                    "summary": "",
                    "text_content": "",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": [
                        {
                            "title": "6A.2.1\tOperator policy enforcement",
                            "text_content": "The SC UE may receive the operator policy via OMA Device Management, see 3GPP TS 24.216 [5]. When the SC UE receives the operator policy, for each non-emergency session to be transferred, it shall take the operator policy into account when deciding to perform the following:\n-\tselecting the access for initiating the transfer;\n-\tdetermining whether to transfer full or partial media during PS-PS transfer; or\n-\tdetermining whether to add or remove media during the PS-PS transfer.\nIf the SC UE is configured with the operator policy (e.g. via OMA Device Management as described in 3GPP TS 24.216 [5]) then, for each media or group of media contained in the MediaorGroup node, the SC UE shall:\n1)\trestrict originating non-emergency sessions and session transfer of non-emergency sessions towards the access networks contained in the RestrictedAccessNetworkType node;\n2)\tconsider the list of access networks contained in the PreferredAccessNetworks node in the order of priority from the access networks such that, when available, the highest priority access network can be used for originating non-emergency sessions and session transfer of non-emergency sessions;\n3)\tif a new access network gets available- transfer media components to a higher priority target network than the current access network based on the value contained in the SC_media_transfer node value. If the SC_media_transfer node value is:\n-\t\"shall\" the UE shall start a session transfer of non-emergency sessions according to the home operator' s list of preferred access networks contained in the PreferredAccessNetworks node;\n-\t\"should\" the UE is recommended to start session transfer of non-emergency sessions according to the home operator's list of preferred access networks contained in the PreferredAccessNetworks node. The UE can evaluate if session transfer of non-emergency sessions is possible and desirable after having taken into account the Local Operating Environment Information; and\n-\t\"may\" the UE can decide whether or not to start session transfer of non-emergency sessions in accordance with user preferences if configured in the UE. The UE can evaluate if session transfer of non-emergency sessions is possible and desirable after having taken into account the Local Operating Environment Information. If user preferences are not configured, the UE can evaluate the home operator's list of preferred access networks contained in the PreferredAccessNetworks node; and\n4)\tdecide whether to keep or drop non transferable media components in the case of partial session transfer of non-emergency sessions based on the SC_non_transferrable_media node value.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "6A.2.2\tSignalling elements",
                            "text_content": "This subclause describes the common procedures for setting up SIP messages sent by SC UE.\nWhen sending a SIP INVITE request regardless of Request-URI, the SC UE shall include the following media feature tags in the Contact header field of the SIP INVITE request according to RFC 3840 [53]:\n1)\tif the SC UE supports the MSC server assisted mid-call feature, include the g.3gpp.mid-call media feature tag as described in annex C;\n2)\tif the SC UE supports the PS to CS SRVCC for calls in alerting phase and is sending an initial SIP INVITE request:\nA)\tinclude the g.3gpp.srvcc-alerting media feature tag as described in annex C; and\nB)\tif the SC UE supports the PS to CS SRVCC for originating calls in pre-alerting phase, include the g.3gpp.ps2cs-srvcc-orig-pre-alerting media feature tag as described in annex C;\n3)\tif the SC UE supports the PS to CS dual radio access transfer for calls in alerting phase and is sending an initial SIP INVITE request:\nA)\tinclude the g.3gpp.drvcc-alerting media feature tag as described in annex C; and\nB)\tif the SC UE supports the PS to CS dual radio access transfer for originating calls in pre-alerting phase, include the g.3gpp.ps2cs-drvcc-orig-pre-alerting media feature tag as described in annex C; and\n4)\tif the SC UE supports the use of dynamic STN, include the g.3gpp.dynamic-stn media feature tag as described in annex C.\nInclusion of the media feature tags of item 2) and 3) in a reINVITE request is optional.\nWhen sending a SIP INVITE request with the Request URI set to an emergency service URN:\n1)\tif the SC UE supports PS to CS DRVCC for emergency session, the SC UE shall include the g.3gpp.dynamic-e-stn-drvcc media feature tag in the Contact header field as described in annex C; and\n2)\tif the SC UE supports the MSC server assisted mid-call feature and supports the PS to CS SRVCC for emergency session in early dialog state with active speech media component when both the emergency session in early dialog state with active speech media component and a non-emergency call in confirmed dialog state with inactive speech media component exists, the SC UE shall include the g.3gpp.ps2cs-srvcc-mid-call-emergency media feature tag in the Contact header field as described in annex C.\n",
                            "figures_meta_data": [],
                            "tables": []
                        }
                    ]
                },
                {
                    "title": "6A.3\tATCF",
                    "description": "",
                    "summary": "",
                    "text_content": "",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": [
                        {
                            "title": "6A.3.1\tSRVCC information bound to the registration path",
                            "text_content": "The ATCF shall keep track of existing registrations of the served UEs. Each registration path is identified by the ATCF Path URI.\nThe ATCF shall bind the following information to the registration path identified by the ATCF Path URI:\n-\tthe S-CSCF Service-Route URI;\n-\tthe ATU-STI for PS to CS SRVCC; and\n-\tthe C-MSISDN.\nIf the ATCF supports CS to PS SRVCC, the ATCF shall additionally bind the following information to the registration path identified by the ATCF Path URI:\n-\tthe ATU-STI for CS to PS SRVCC;\n-\tthe contact address of the SC UE;\n-\tthe route set towards the SC UE;\n-\tthe UE information for CS to PS SRVCC; and\n-\tthe ATGW information for CS to PS SRVCC.\nWhen a registration of a served UE expires or is deregistered, the ATCF can remove any SRVCC-related information bound to the registration path.\nThe ATCF shall determine that a session is established for a specific registration path:\n-\tif the S-CSCF Service-Route URI used during the registration matches the URI in the most bottom Route header field of the originating initial SIP INVITE request; or\n-\tif the ATCF Path URI used during the registration matches the URI in the top Route header field of the terminating initial SIP INVITE request.\n",
                            "figures_meta_data": [],
                            "tables": []
                        }
                    ]
                },
                {
                    "title": "6A.4\tSCC AS",
                    "description": "",
                    "summary": "",
                    "text_content": "",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": [
                        {
                            "title": "6A.4.1\tCommon SIP message set up procedures",
                            "text_content": "This subclause describes the common procedures for setting up SIP messages sent by\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "6A.4.2\tSIP INVITE request",
                            "text_content": "When sending SIP INVITE request towards the served user and if the session being established is anchored in  as described in subclause 4.2.2 then the SCC AS shall populate the SIP INVITE request with:\n1)\ta Feature-Caps header field according to IETF RFC 6809 [60]:\nA)\tincluding the g.3gpp.srvcc feature-capability indicator as described in annex C; and\nB)\tincluding the g.3gpp.remote-leg-info feature-capability indicator as described in annex C;\n2)\tan Accept header field according to IETF RFC 3261 [19] containing the MIME type application/vnd.3gpp.state-and-event-info+xml as specified in subclause D.2.3; and\n3)\ta Recv-Info header field according to IETF RFC 6086 [54] containing the g.3gpp.state-and-event package name.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "6A.4.3\tSIP INVITE responses towards the SC UE",
                            "text_content": "When sending SIP 1xx response or SIP 2xx response to the SIP INVITE request towards the served user, the SCC AS shall populate the SIP response with a Feature-Caps header field according to IETF RFC 6809 [60] containing:\n1)\tif the session being established is anchored in  as described in subclause 4.2.2:\nA)\tinclude the g.3gpp.srvcc feature-capability indicator as described in annex C;\nB)\tif:\na)\tthe SCC AS supports the PS to CS SRVCC with the MSC server assisted mid-call feature according to operator policy;\nb)\tthe g.3gpp.mid-call media feature tag as described in annex C is included in the Contact header field of the SIP INVITE request; and\nc)\tthe SCC AS is aware:\n-\tby local policy; or\n-\tby ATCF indicating support of the PS to CS SRVCC with the MSC server assisted mid-call feature;\nNOTE 1:\tAn ATCF can indicate support of the PS to CS SRVCC with the MSC server assisted mid-call feature by inclusion of the g.3gpp.mid-call feature-capability indicator in the Feature-Caps header field, with the g.3gpp.atcf feature-capability indicator, in the SIP REGISTER request that created the binding of the SC UE.\nthat all MSC Servers in the network, where the UE is registered, which can be involved in the PS to CS SRVCC procedures, support the PS to CS SRVCC with the MSC server assisted mid-call feature;\nNOTE 2:\t can identify the network, where the UE is registered, based on the P-Visited-Network-Id header field and the P-Access-Network-Info header field of the SIP REGISTER request.\ninclude the g.3gpp.mid-call feature-capability indicator as described in annex C;\nC)\tif:\na)\tthe SCC AS supports the PS to CS SRVCC for calls in alerting phase according to operator policy;\nb)\tthe g.3gpp.srvcc-alerting feature tag as described in annex C is included in the Contact header field of the SIP INVITE request; and\nc)\tthe SCC AS is aware:\n-\tby local policy; or\n-\tby ATCF indicating support of the PS to CS SRVCC for calls in alerting phase;\nNOTE 3:\tAn ATCF can indicate support of the PS to CS SRVCC for calls in alerting phase by inclusion of the g.3gpp.srvcc-alerting feature-capability indicator in the Feature-Caps header field, with the g.3gpp.atcf feature-capability indicator, in the SIP REGISTER request that created the binding of the SC UE.\nthat all MSC Servers in the network, where the UE is registered, which can be involved in the PS to CS SRVCC procedures, support the PS to CS SRVCC for calls in alerting phase;\nNOTE 4:\t can identify the network, where the UE is registered, based on the P-Visited-Network-Id header field and the P-Access-Network-Info header field of the SIP REGISTER request.\ninclude the g.3gpp.srvcc-alerting feature-capability indicator as described in annex C;\nD)\tif:\na)\tthe SCC AS supports the PS to CS SRVCC for originating calls in pre-alerting phase and the PS to CS SRVCC for calls in alerting phase according to operator policy;\nb)\tthe g.3gpp.ps2cs-srvcc-orig-pre-alerting media feature tag as described in annex C and the g.3gpp.srvcc-alerting media feature tag as described in annex C are included in the Contact header field of the SIP INVITE request due to originating filter criteria;\nc)\tthe SCC AS is aware:\n-\tby local policy; or\n-\tby ATCF indicating support of the PS to CS SRVCC for originating calls in pre-alerting phase;\nNOTE 5:\tAn ATCF can indicate support of the PS to CS SRVCC for originating calls in pre-alerting phase by inclusion of the g.3gpp.ps2cs-srvcc-orig-pre-alerting feature-capability indicator in the Feature-Caps header field, with the g.3gpp.atcf feature-capability indicator, in the SIP REGISTER request that created the binding of the SC UE.\nthat all MSC servers in the network where the UE is registered which can be involved in PS to CS SRVCC procedures support the PS to CS SRVCC for originating calls in pre-alerting phase and the PS to CS SRVCC for calls in alerting phase; and\nNOTE 6:\tThe  can identify the network where the UE is registered based on the P-Visited-Network-Id header field and the P-Access-Network-Info header field of the SIP REGISTER request.\nd)\tSIP 180 (Ringing) response to the SIP INVITE request has not been received yet;\ninclude the g.3gpp.ps2cs-srvcc-orig-pre-alerting feature-capability indicator as described in annex C; and\nE)\tinclude the g.3gpp.remote-leg-info feature-capability indicator as described in annex C;\n2)\tif the SCC AS supports the PS to CS dual radio access transfer for calls in alerting phase according to operator policy, and if the SIP INVITE request included the g.3gpp.drvcc-alerting media feature tag as described in annex C in the Contact header field, include the g.3gpp.drvcc-alerting feature-capability indicator as described in annex C;\n3)\tif:\nA)\tthe SCC AS supports the PS to CS dual radio access transfer for originating calls in pre-alerting phase and the PS to CS dual radio access transfer for calls in alerting phase;\nB)\tthe g.3gpp.ps2cs-drvcc-orig-pre-alerting media feature tag as described in annex C and the g.3gpp.drvcc-alerting media feature tag as described in annex C are included in the Contact header field of the SIP INVITE request; and\nC)\tSIP 180 (Ringing) response to the SIP INVITE request has not been received yet;\ninclude the g.3gpp.ps2cs-drvcc-orig-pre-alerting feature-capability indicator as described in annex C; and\n4)\tif the SCC AS supports the use of dynamic STN according to operator policy, and if the Contact header field of the SIP INVITE request includes the g.3gpp.dynamic-stn media feature tag as described in annex C, include the g.3gpp.dynamic-stn feature-capability indicator as described in annex C with the dynamic STN.\nNOTE 7:\tBased on implementation the dynamic STN can either be the same or different per call.\nAdditionally, when sending SIP 1xx response or SIP 2xx response to the SIP INVITE request towards the served user, the SCC AS shall populate the SIP response with:\n1)\tif the session being established is anchored in  as described in subclause 4.2.2:\nA)\tif the SIP response is a SIP 2xx response, an Accept header field according to IETF RFC 3261 [19] containing the MIME type application/vnd.3gpp.state-and-event-info+xml as specified in subclause D.2.3; and\nB)\ta Recv-Info header field according to IETF RFC 6086 [54] containing the g.3gpp.state-and-event package name.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "6A.4.3A\tSIP INVITE responses towards the MSC server",
                            "text_content": "When sending a SIP 1xx response or SIP 2xx response to a SIP INVITE request due to STN-SR or to a SIP INVITE request due to PS to CS STN and if a Contact header field was saved in subclause 7.3.2 or subclause 8.3.2, the SCC AS shall include the saved Contact header field of the remote UE.\nWhen sending a SIP 2xx response to a SIP INVITE request due to STN-SR or to a SIP INVITE request due to PS to CS STN and if a P-Asserted-Identity header field was saved in subclause 7.3.2 or subclause 8.3.2, the SCC AS shall include the P-Asserted-Identity header field with the identity of the remote user saved in subclause 7.3.2 or subclause 8.3.2 along with the Privacy header field, if available.\nWhen sending a SIP 2xx response to a SIP INVITE request transferring additional session and if a P-Asserted-Identity header field was saved in subclause 7.3.2 or subclause 8.3.2, the SCC AS shall include the P-Asserted-Identity header field with the identity of the remote user saved in subclause 7.3.2 or subclause 8.3.2 along with the Privacy header field, if available.\nNOTE:\tThere are situations when the P-Asserted-Identity header field with the public user identity of the remote user can not be saved during the establishement of the communication, e.g. if presentation of the remote user public identity is restricted or if the user does not subscribe to the OIP or TIP service. In those situations the P-Asserted-Identity header field with a public user identity will not be delivered to the MSC server in the SIP 2xx response to the SIP INVITE due to STN-SR, the SIP INVITE request due to PS to CS STN or the SIP INVITE request transferring additional session and can limit the supplementary services that the MSC server can use after SRVCC access transfer is completed.\nWhen sending a SIP 1xx response or SIP 2xx response to a SIP INVITE request due to STN-SR, a SIP INVITE request due to ATU-STI, a SIP INVITE request transferring additional session or a SIP INVITE request due to PS to CS STN, the SCC AS shall include:\n1)\tthe g.3gpp.remote-leg-info feature-capability indicator as described in annex C in a Feature-Caps header field according to IETF RFC 6809 [60];\n2)\tif the SIP response is a SIP 2xx response, the Accept header field according to IETF RFC 3261 [19]containing the application/vnd.3gpp.state-and-event-info+xml MIME type; and\n3)\tthe Recv-Info header field according to IETF RFC 6086 [54] containing the g.3gpp.state-and-event info package name.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "6A.4.4\tHandling of OMR specific attributes",
                            "text_content": "When an SDP offer containing OMR specific attributes specified in subclause 7.5.3 of 3GPP TS 24.229 [2] is received from either the source access leg or the target access leg, the SCC AS supporting OMR shall perform the actions specified in subclause 7.2.2 of 3GPP TS 29.079 [77].\nWhen the SCC AS supporting OMR sends an SDP offer towards the remote party and if\n-\tthe SDP offer consists of several media lines merged from a source access leg and a target access leg; and\n-\tany of the media lines contains OMR attributes;\nthen the SCC AS shall recalculate the checksums as specified in subclause 5.6.3 3GPP TS 29.079 [77].\nIf the SCC AS has not changed the content of a m-line and associated attributes, an SCC AS supporting OMR shall only calculate the session level checksum and replace the new value in each occurrences of the \"a=omr-s-cksum\" attribute.\nThe SCC AS supporting OMR shall forward the OMR specific attributes received in the SDP answer.\nNOTE:\tWhen the SCC AS does not support OMR an optimal media path created before the transfer will not be established again.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "6A.4.5\tTarget refresh request for a dialog and associated responses",
                            "text_content": "The SCC AS shall include into the Feature-Caps header field of any target refresh request and, in each SIP 1xx response or SIP 2xx response to target refresh request sent to the SC UE:\nA)\tthe g.3gpp.srvcc feature-capability indicator if the session being established is anchored in the SCC AS as described in subclause 4.2.2 and if the SCC AS inserted the g.3gpp.srvcc feature-capability indicator into the Feature-Caps header field of:\n1)\tthe SIP INVITE request in accordance with subclause 6A.4.2; or\n2)\tthe SIP 1xx response or SIP 2xx response to the SIP INVITE request in accordance with subclause 6A.4.3;\nB)\tthe g.3gpp.mid-call feature-capability indicator if the SCC AS inserted the g.3gpp.mid-call feature-capability indicator into the Feature-Caps header field of:\n1)\tthe SIP 2xx response to the SIP INVITE request due to originating filter criteria in accordance with subclause 7.3.2;\n2)\tthe SIP INVITE request due to terminating filter criteria if the SCC AS applies the MSC Server assisted mid-call feature in accordance with subclause 8.3.2;\n3)\tthe SIP 2xx response to the SIP INVITE request due to PS to CS STN if the SCC AS applies the MSC Server assisted mid-call feature in accordance with subclause 9.3.2A;\n4)\tthe SIP 2xx response to the SIP INVITE request due to static STI if the SCC AS applies the MSC Server assisted mid-call feature in accordance with subclause 9.3.4; or\n5)\tthe SIP 2xx response to the SIP INVITE request due to STI if the SCC AS applies the MSC Server assisted mid-call feature in accordance with subclause 10.3.3;\nC)\tthe g.3gpp.srvcc-alerting feature-capability indicator if the SCC AS inserted the g.3gpp.srvcc-alerting feature-capability indicator into the Feature-Caps header field of:\n1)\tany SIP 1xx response or SIP 2xx response to the SIP INVITE request due to originating filter criteria if the SCC AS applies PS to CS SRVCC for calls in alerting phase in accordance with subclause 7.3.2; or\n2)\tthe SIP INVITE request due to terminating filter criteria if the SCC AS applies PS to CS SRVCC for calls in alerting phase in accordance with subclause 8.3.2; and\nD)\tthe g.3gpp.ps2cs-srvcc-orig-pre-alerting feature-capability indicator if the SCC AS inserted the g.3gpp.ps2cs-srvcc-orig-pre-alerting indicator into the Feature-Caps header field of any SIP 1xx response or SIP 2xx response to the SIP INVITE request due to originating filter criteria if the SCC AS applies PS to CS SRVCC for calls in alerting phase in accordance with subclause 7.3.2.\nIf a feature-capability indicator was indicated in a Feature-Caps header field of the initial SIP INVITE request sent to the MSC server or of the SIP 1xx response or SIP 2xx response to the initial SIP INVITE request sent to the MSC server, then the SCC AS shall include the feature-capability indicator into the Feature-Caps header field of any target refresh request and into the Feature-Caps header field of each SIP 1xx response or SIP 2xx response to target refresh request sent to the MSC server.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "6A.4.6\tRejecting malicious SIP REFER requests from remote UE",
                            "text_content": "If the SCC AS supports the PS to CS SRVCC of calls in alerting phase, then upon receiving a SIP REFER request:\n1.\tsent inside a SIP dialog on the remote leg;\n2.\twith the Refer-Sub header field containing \"false\" value;\n3.\twith the Supported header field containing \"norefersub\" value;\n4.\twith the Refer-To header field containing a SIP URI with the Target-Dialog URI header field; and\n5.\tcontaining a MIME body of application/vnd.3gpp.state-and-event-info+xml MIME type specified in the subclause D.2.4;\nthe SCC AS shall reject the SIP REFER request with a SIP 403 (Forbidden) response as specified in 3GPP TS 24.229 [2].\nIf the SCC AS supports the MSC server assisted mid-call feature, then upon receiving a SIP REFER request:\n1.\tsent inside a SIP dialog on the remote leg;\n2.\twith the Refer-Sub header field containing \"false\" value;\n3.\twith the Supported header field containing \"norefersub\" value;\n4.\twith the Refer-To header field containing a SIP URI with the Target-Dialog URI header field; and\n5.\tcontaining a MIME body of application/vnd.3gpp.mid-call+xml MIME type specified in the subclause D.1.3;\nthe SCC AS shall reject the SIP REFER request with a SIP 403 (Forbidden) response as specified in 3GPP TS 24.229 [2].\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "6A.4.7\tProtecting from malicious SIP INFO requests with remote leg information from remote UE",
                            "text_content": "The SCC AS shall not include the Accept header field containing the application/vnd.3gpp.state-and-event-info+xml MIME type and shall not include the Recv-Info header field containing the g.3gpp.state-and-event info package name in the SIP INVITE request, SIP re-INVITE request and SIP UDPATE request and related responses sent towards the remote UE.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "6A.4.8\tPrecondition and access transfer",
                            "text_content": "If according to operator policy, the SCC AS:\n1)\tshall support UA role procedures defined in IETF RFC 3262 [86], IETF RFC 3311 [87], IETF RFC 3312 [88] and IETF RFC 4032 [89]; and\n2)\tif the remote leg is a precondition enabled dialog and if the SIP INVITE request on target access leg is not a precondition enabled initial INVITE request, shall interwork precondition related signalling at the remote leg with the target access leg established by SIP response to SIP INVITE request on target access leg. Details of interworking are out of scope of this specification.\n",
                            "figures_meta_data": [],
                            "tables": []
                        }
                    ]
                },
                {
                    "title": "6A.5\tSDP media description conflict between target and remote access leg",
                    "description": "",
                    "summary": "",
                    "text_content": "When the SCC AS, the EATF or the ATCF receives an SDP offer on the target access leg, the SDP media descriptions on the target access leg and the remote access leg, can be in conflict. The way how the SCC AS, EATF and ATCF resolve the conflict is implementation dependent.\nNOTE 1:\tExamples of conflicts are when, for a given media type, different IP versions are used on each access leg, or when the same payload type number has been assigned to different codecs on each access leg.\nNOTE 2:\tAn example on how to solve a conflict can be that transcoding functionality is enabled by inserting an MRF (in case of  or EATF) or an ATGW (in case of ATCF). Another example is that a SIP 488 (Not Acceptable Here) response is sent with the correct SDP media description.\nWhen the MSC server receives a SIP 488 (Not Acceptable Here) response to an initial SIP INVITE request and an SDP body is present in the response:\n1)\tif the MSC server supports one or more RTP payload types indicated in the received SDP body, the MSC server should re-initiate the initial SIP INVITE request with an SDP offer containing the RTP payload types (each comprising of an RTP payload type number indicated in a sub-field of an <fmt> portion of an \"m=\" line and, if included, an \"a=rtpmap\" attribute and an \"a=frmtp\" attribute for the RTP payload type number):\na)\tcopied from the received SDP body (with the RTP payload type number indicated in the received SDP body); and\nb)\tsupported by the MSC server; and\n2)\tif the MSC server does not support any RTP payload type of the received SDP body, the MSC server should re-initiate the initial SIP INVITE request with an SDP offer containing one or more RTP payload types supported by MSC server, associated with RTP payload type number(s) not indicated in the received SDP body.\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "6A.6\tIndicating traffic leg",
                    "description": "",
                    "summary": "",
                    "text_content": "",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": [
                        {
                            "title": "6A.6.1\tThe SCC AS server procedure for indicating traffic leg",
                            "text_content": "If the SCC AS supports indicating the traffic leg associated with a URI as specified in IETF RFC 7549 [83] and the UE is roaming, the SCC AS may append the \"iotl\" SIP URI parameter with the value \"visitedA-homeA\" to the additional transferred session SCC AS URI for PS to CS SRVCC in the Refer-To URI of SIP REFER requests.\nNOTE:\tThe SCC AS can use the P-Visited-Network-Identity header field in the 3rd party SIP REGISTER request received when the UE registered in PS to determine if the UE is roaming or not.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "6A.6.2\tThe MSC server procedure for indicating traffic leg",
                            "text_content": "If the MSC supports indicating the traffic leg associated with a URI as specified in IETF RFC 7549 [83]:\n1)\tthe UE is roaming; and\n2)\tthe STN-SR does not identify an ATCF in the visited network;\nthen the MSC server shall, if required by local policy:\n1)\tconvert the STN-SR in the Request-URI to the form of a SIP  with user=phone; and\n2)\tappend an \"iotl\" SIP URI parameter with a value set to \"visitedA-homeA\" in the Request-URI of the SIP INVITE request due to STN-SR and, if vSRVCC is supported and applied, in the SIP OPTIONS request.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "6A.6.3\tThe ATCF server procedure for indicating traffic leg",
                            "text_content": "If the ATCF supports indicating the traffic leg associated with a URI as specified in IETF RFC 7549 [83]:\n1)\tthe UE is roaming; and\n2)\tthe ATCF is not in the home network;\nthen the ATCF may, if required by local policy and if ATCF support the PS to CS SRVCC access transfer, append an \"iotl\" SIP URI parameter with a value set to \"homeB-visitedB\" to the ATCF management URI in the g.3gpp.atcf-mgmt-uri feature-capability indicator of the SIP REGISTER request.\n",
                            "figures_meta_data": [],
                            "tables": []
                        }
                    ]
                },
                {
                    "title": "6A.7\tMSC server",
                    "description": "",
                    "summary": "",
                    "text_content": "",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": [
                        {
                            "title": "6A.7.1\tPrecondition and access transfer",
                            "text_content": "Unless local configuration indicates that the network is serving users not supporting SIP preconditions, the following applies for an MSC server supporting PS to CS SRVCC access transfer:\n1)\tthe MSC server shall support UA role procedures defined in IETF RFC 3262 [86], IETF RFC 3311 [87], IETF RFC 3312 [88] and IETF RFC 4032 [89];\n2)\tupon generating an initial INVITE request, the MSC server shall include the \"precondition\" option tag in the Supported header field as defined in IETF RFC 3312 [88] as updated by IETF RFC 4032 [89] and the MSC server shall not indicate the requirement for the precondition mechanism by using the Require header field mechanism; and\n3)\tthe MSC server shall indicate the related local preconditions, using the segmented status type, as defined in IETF RFC 3312 [88] and IETF RFC 4032 [89], as well as the strength-tag value \"mandatory\" for the local segment and the strength-tag value either \"optional\" or as specified in RFC 3312 [88] and RFC 4032 [89] for the remote segment.\n",
                            "figures_meta_data": [],
                            "tables": []
                        }
                    ]
                }
            ]
        },
        {
            "title": "7\tRoles for call origination for service continuity",
            "description": "",
            "summary": "",
            "tables": [],
            "figures_meta_data": [],
            "subsections": [
                {
                    "title": "7.1\tIntroduction",
                    "description": "",
                    "summary": "",
                    "text_content": "This clause specifies the procedures for call origination, both where the SC UE is generating calls in the CS domain and where the SC UE is generating calls using the IM CN subsystem. Procedures are specified for the SC UE, the SCC AS, the EATF and the ATCF.\nFurther this clause specifies procedures for cases where the ATCF handles SIP requests that are not related to a call.\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "7.2\tSC UE",
                    "description": "",
                    "summary": "",
                    "text_content": "",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": [
                        {
                            "title": "7.2.1\tGeneral",
                            "text_content": "The SC UE shall support origination of IP multimedia sessions in the IM CN subsystem as specified in 3GPP TS 24.229 [2]. The SC UE shall populate the SIP INVITE request according to subclause 6A.2.2.2.\nThe SC UE shall support origination of calls in the CS domain as specified in 3GPP TS 24.008 [8].\nIf SC using ICS is enabled then the procedures for call origination where the SC UE is initiating calls using CS media are identical to that for ICS UE specified in 3GPP TS 24.292 [4].\nWhen originating an emergency call as specified in 3GPP TS 24.229 [2] and if the SC UE has an IMEI, then the SC UE shall include the sip.instance media feature tag as specified in IETF RFC 5626 [22] with value based on the IMEI as defined in 3GPP TS 23.003 [12] in the Contact header field of the SIP INVITE request according to IETF RFC 3840 [53].\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "7.2.2\tAdditional procedures with MSC server assisted mid-call feature",
                            "text_content": "Upon receiving a SIP 2xx response to the SIP INVITE request, if:\n1.\tthe SC UE supports the MSC server assisted mid-call feature;\n2.\tthe g.3gpp.mid-call feature-capability indicator is included in the Feature-Caps header field received during session establishment;\n3.\tthe remote UE is a conference focus; and\nNOTE:\tconference focus includes the isfocus media feature tag specified in IETF RFC 3840 [53] in own Contact header field when establishing a session.\n4.\tthe session was created as result of the SC UE creating a conference;\nthen the SC UE shall subscribe to the conference event package as specified in 3GPP TS 24.605 [31] and shall populate the Contact header field of the SUBSCRIBE request with the g.3gpp.mid-call media feature tag.\nIf the subscription is accepted then the SC UE shall keep one subscription to the conference event package with own Contact header field containing the g.3gpp.mid-call media feature tag for each conference where the SC UE participates using procedures specified in 3GPP TS 24.605 [31].\n",
                            "figures_meta_data": [],
                            "tables": []
                        }
                    ]
                },
                {
                    "title": "7.3",
                    "description": "",
                    "summary": "",
                    "text_content": "",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": [
                        {
                            "title": "Distinction of requests sent to the SCC AS",
                            "text_content": "The SCC AS needs to distinguish between the following initial SIP INVITE requests to provide specific functionality relating to call origination:\n-\tSIP INVITE requests routed to the SCC AS over the ISC interface as a result of processing filter criteria at the S-CSCF according to the origination procedures as specified in 3GPP TS 24.229 [2], and therefore distinguished by the URI relating to this particular filter criteria appearing in the topmost entry in the Route header. In the procedures below, such requests are known as \"SIP INVITE requests due to originating filter criteria\". It is assumed that the SCC AS is the first AS that the S-CSCF forwards the request to after receiving the request from the UE.\nThe SCC AS shall store the SIP INVITE requests due to PS to CS STN (as defined in subclause 9.3.1) and the SIP INVITE requests due to originating filter criteria, at least until their sessions are terminated.\nThe SCC AS needs to distinguish between the following initial requests to provide specific functionality related to obtaining conference participants:\n-\tSIP SUBSCRIBE requests with an Event header field containing \"conference\" and with the Contact header field containing the g.3gpp.mid-call media feature tag routed to the SCC AS over the ISC interface as a result of processing initial filter criteria at the S-CSCF according to the originating procedures as specified in 3GPP TS 24.229 [2]. In the procedures below, such requests are known as \"SIP SUBSCRIBE requests to conference event package\".\nOther SIP initial requests for a dialog, and requests for a SIP standalone transaction can be dealt with in any manner conformant with 3GPP TS 24.229 [2].\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "Call origination procedures at the SCC AS",
                            "text_content": "When the SCC AS receives a SIP INVITE request due to originating filter criteria, the SCC AS shall follow the SCC AS roles for call origination procedures specified in 3GPP TS 24.292 [4].\nThe SCC AS shall populate the SIP 1xx response or SIP 2xx response to the SIP INVITE request according to subclause 6A.4.3.\nIf the SCC AS supports the MSC Server assisted mid-call feature according to operator policy, the SCC AS shall remove the g.3gpp.mid-call media feature tag as described in annex C from the SIP INVITE request due to originating filter criteria before forwarding the SIP INVITE request towards the remote UE.\nIf the SCC AS supports the PS to CS SRVCC for calls in alerting phase according to operator policy, the SCC AS shall remove the g.3gpp.srvcc-alerting media feature tag as described in annex C from the SIP INVITE request due to originating filter criteria before forwarding the SIP INVITE request towards the remote UE.\nThe SCC AS shall include the \"tdialog\" option tag and the \"replaces\" option tag in the Supported header field of SIP 2xx response to the SIP INVITE request due to originating filter criteria.\nWhen the SCC AS receives any SIP 1xx response or SIP 2xx response to a SIP INVITE request due to originating filter criteria, the SCC AS shall:\n1)\tsave the Contact header field included in the SIP 1xx response or SIP 2xx response;\n2)\tsave the P-Asserted-Identity header field included in the SIP 2xx response; and\n3)\tif included in the SIP response, save the Privacy header field included in the SIP 2xx response.\nNOTE:\tIf the SCC AS subsequently receives an initial SIP INVITE request due to STN-SR, the SCC AS will include the saved P-Asserted-Identity in the SIP 2xx response to the initial SIP INVITE request due to STN-SR and the saved Contact header field of the remote UE in SIP 1xx response or SIP 2xx response to the initial SIP INVITE request due to STN-SR.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "7.3.3\tSubscription related procedures in the SCC AS",
                            "text_content": "When the SCC AS receives a SIP SUBSCRIBE request to conference event package, if the SCC AS supports the MSC Server assisted mid-call feature according to operator policy and if SCC AS determines that the subscription is related to an anchored session then the SCC AS shall ensure that it remains on the path for future requests in the dialog before forwarding the request.\nNOTE:\tASs acting as Routeing B2BUA and record-routing ASs acting as SIP proxy remain on the path for future requests in the dialog.\nWhen the SCC AS receives SIP 2xx response to the SIP NOTIFY request with conference information, the SCC AS shall update the stored conference information based on the SIP NOTIFY request content and forward the SIP 2xx response in any manner conformant with 3GPP TS 24.229 [2].\nThe SCC AS shall determine that a subscription to conference event package is related to a session if:\n1.\tthe session was originated by served SC UE;\n2.\tremote UE of the session is a conference focus;\n3.\tthe P-Asserted-Identity header field of the served SC UE used at the establishment of the session is the same as the P-Asserted-Identity header field of the served SC UE used at the subscription; and\n4.\tthe Contact or the P-Asserted-Identity header field provided to the served SC UE at the establishment of the session is the same as the Request-URI used at the subscription.\nIf multiple such subscriptions exist, the SCC AS shall select the subscription that originates from the same device as the session.\n",
                            "figures_meta_data": [],
                            "tables": []
                        }
                    ]
                },
                {
                    "title": "7.4\tEATF",
                    "description": "",
                    "summary": "",
                    "text_content": "",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": [
                        {
                            "title": "7.4.1\tDistinction of requests sent to the EATF",
                            "text_content": "The EATF needs to distinguish between the following initial SIP INVITE requests to provide specific functionality relating to call origination:\n-\tSIP INVITE request including a request URI that contains an emergency service URN, i.e. a service URN with a top-level service type of \"sos\" as specified in IETF RFC 5031 [17]. In the procedures below, such requests are known as \"SIP INVITE requests due to emergency service URN\".\nOther SIP initial requests for a dialog, and requests for a SIP standalone transaction can be dealt with in any manner conformant with 3GPP TS 24.229 [2].\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "7.4.2\tCall origination procedures at the EATF",
                            "text_content": "When the EATF receives a SIP INVITE requests due to emergency service URN, the EATF shall store the SIP INVITE request until the session is terminated, anchor the session and act as specified for a routeing B2BUA in 3GPP TS 24.229 [2], subclause 5.7.5.2.1.\nIn addition, if:\na)\tthe EATF supports PS to CS DRVCC for emergency session;\nb)\tthe SC UE has indicated support for PS to CS DRVCC for emergency session by including the g.3gpp.dynamic-e-stn-drvcc media feature tag; and\nc)\tthe P-Access-Network-Info header field in the received SIP INVITE request contains an access-class field set to \"3GPP-WLAN\" or \"untrusted-non-3GPP-VIRTUAL-EPC\", and a \"network-provided\" parameter;\nthen the EATF shall:\nNOTE: The coding of the P-Access-Network-Info header field can be found in 3GPP TS 24.229 [2].\na)\tgenerate an E-STN-DR that allows to associate the emergency session on the source access leg with a session transfer INVITE request due to E-STN-DR; and\nb)\tinsert a Feature-Caps header field as described in RFC 6809 [60] with the g.3gpp.dynamic-e-stn-drvcc feature-capability indicator containing the E-STN-DR in in a SIP 200 (OK) response to the INVITE request due to emergency service URN as described in annex C.28.\nIn addition, if:\na)\tthe EATF supports the PS to CS SRVCC for originating emergency sessions in alerting phase according to operator policy;\nb)\tthe g.3gpp.srvcc-alerting media feature tag as described in annex C is included in the Contact header field of the SIP INVITE request; and\nc)\tthe EATF is aware by local policy that all MSC Servers in the network, where the ATCF is, which can be involved in the PS to CS SRVCC procedures, support the PS to CS SRVCC for originating emergency sessions in alerting phase;\nthen:\na)\tthe EATF shall insert a Feature-Caps header field as described in RFC 6809 [60] with the g.3gpp.srvcc-alerting feature-capability indicator in the SIP 200 (OK) response to the INVITE request due to emergency service URN as described in annex C; and\nb)\tif:\n1)\tthe EATF supports the PS to CS SRVCC for originating emergency sessions in pre-alerting phase according to operator policy;\n2)\tthe g.3gpp.ps2cs-srvcc-orig-pre-alerting media feature tag as described in annex C is included in the Contact header field of the SIP INVITE request; and\n3)\tthe EATF is aware by local policy that all MSC Servers in the network, where the ATCF is, which can be involved in the PS to CS SRVCC procedures, support the PS to CS SRVCC for originating emergency sessions in pre-alerting phase;\nthen the EATF shall insert a Feature-Caps header field as described in RFC 6809 [60] with the g.3gpp.ps2cs-srvcc-orig-pre-alerting feature-capability indicator in the SIP 200 (OK) response to the INVITE request due to emergency service URN as described in annex C.\n",
                            "figures_meta_data": [],
                            "tables": []
                        }
                    ]
                },
                {
                    "title": "7.5\tAccess Transfer Control Function (ATCF)",
                    "description": "",
                    "summary": "",
                    "text_content": "",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": [
                        {
                            "title": "7.5.1\tDistinction of requests",
                            "text_content": "The ATCF needs to distinguish the following initial SIP requests:\n1)\tSIP INVITE requests:\nA)\twith the ATCF URI for originating requests in the topmost Route header field; and\nB)\twith the Request-URI containing a URI not matching the STI-rSR allocated to the ATCF.\nNOTE:\tIf ATCF does not support the CS to PS SRVCC, the STI-rSR is not allocated to the ATCF.\nIn the procedures below, such requests are known as \"originating SIP INVITE requests from SC UE\".\n2)\tSIP requests other than SIP INVITE requests creating a dialog, with the ATCF URI for originating requests in the topmost Route header field. In the procedures below, such requests are known as \"originating SIP requests other than INVITE, creating a dialog\".\n3)\tSIP requests for a standalone transaction with the ATCF URI for originating requests in the topmost Route header field. In the procedures below, such requests are known as \"originating SIP standalone request\".\n4)\tSIP request for an unknown method that does not relate to an existing dialog with the ATCF URI for originating requests in the topmost Route header field. In the procedures below, such requests are known as \"originating unknown SIP requests\".\n5)\tSIP INVITE requests:\nA)\twith the ATCF management URI in the topmost Route header field; and\nB)\twith application/vnd.3gpp.srvcc-ext+xml MIME body containing <srvcc-ext> root element containing <Setup-info> element containing <direction> element with value \"initiator\".\nIn the procedures below, such requests are known as \"originating SIP INVITE requests from MSC server\".\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "7.5.2\tCall origination procedures in the ATCF",
                            "text_content": "For all SIP transactions identified:\n-\tif priority is supported, as containing an authorised Resource-Priority header field or a temporarily authorised Resource-Priority header field, or, if such an option is supported, relating to a dialog which previously contained an authorised Resource-Priority header field;\nthe ATCF shall give priority over other transactions or dialogs. This allows special treatment of such transactions or dialogs.\nNOTE:\tThe special treatment can include filtering, higher priority processing, routeing, call gapping. The exact meaning of priority is not defined further in this document, but is left to national regulation and network configuration.\nUpon receiving the originating SIP INVITE request from SC UE, the ATCF shall:\nNOTE 1:\tSince the ATCF acts as proxy, the dialog identifier of the SIP INVITE request is not modified by procedures of the subclause.\n0)\tinsert a Record-Route header field containing the SIP URI of the ATCF;\n1)\tif the latest SRVCC-related information received for the registration path which the session being established, contains ATU-STI for PS to CS SRVCC and C-MSISDN:\nA)\tassociate the session being established with the C-MSISDN and the ATU-STI for PS to CS SRVCC bound to the registration path (see subclause 6A.3.1); and\nB)\tif the originating SIP INVITE request from SC UE contains an SDP offer and if the ATCF decided to anchor the media according to operator policy as specified in 3GPP TS 23.237 [9], replace the SDP offer in the originating SIP INVITE request from SC UE with an updated SDP offer using media parameters provided by the ATGW; and\nNOTE 2:\tATCF interacts with ATGW to provide the needed media related information. The details of interaction between ATCF and ATGW are out of scope of this document.\n2)\tif the ATCF is located in the visited network, and local policy requires the application of IBCF capabilities in the visited network towards the home network, select an IBCF in the visited network and add the URI of the selected IBCF to the topmost Route header field;\nbefore forwarding the request.\nWhen the ATCF receives any SIP 1xx response or SIP 2xx response to the originating SIP INVITE request from SC UE, the ATCF shall:\n1)\tsave the Contact header field included in the SIP 1xx response or SIP 2xx response;\n2)\tsave the P-Asserted-Identity header field included in the SIP 2xx response;\n3)\tif included in the response, save the Privacy header field included in the SIP 2xx response;\n4)\tsave the P-Charging-Vector header field included in the SIP 1xx response or SIP 2xx response; and\n5)\tsave the Feature-Caps header field(s) included in the SIP 1xx response or SIP 2xx response.\nNOTE 3:\tIf the ATCF subsequently receives an initial SIP INVITE request due to STN-SR, the ATCF will include the saved P-Asserted-Identity in the SIP 2xx response to the initial SIP INVITE request due to STN-SR and the saved the Contact header field of the remote UE in its SIP 1xx responses and the SIP 200 (OK) response to the initial SIP INVITE request due to STN-SR as describe in subclause 12.7.2.2.\nNOTE 4:\tThere are situations when the P-Asserted-Identity header field with the public user identity of the remote user can not be saved during the establishement of the communication, e.g. if presentation of the remote user public identity is restricted or if the user does not subscribe to the OIP or TIP service. In those situations the P-Asserted-Identity header field with a public user identity will not be delivered to the MSC server in the SIP 2xx response to the SIP INVITE due to STN-SR or the SIP INVITE request transferring additional session and can this limit the supplementary services that the MSC server can use after SRVCC access transfer is completed.\nIf the ATCF supports the CS to PS SRVCC, upon receiving the originating SIP INVITE request from MSC server, the ATCF shall act as B2BUA and shall:\n1)\tif ATCF contains an SRVCC-related information (see subclause 6A.3.1) containing C-MSISDN equal to the <C-MSISDN> element of the <Setup-info> element of the value <srvcc-ext> root element of the application/vnd.3gpp.srvcc-ext+xml MIME body of the SIP INVITE request:\nA)\tassociate the session being established with the latest SRVCC-related information (see subclause 6A.3.1) containing C-MSISDN equal to the <C-MSISDN> element of the <Setup-info> element of the value <srvcc-ext> root element of the application/vnd.3gpp.srvcc-ext+xml MIME body of the SIP INVITE request; and\nB)\tstore the value of the g.3gpp.ti media feature tag of the Contact header field of the SIP INVITE request; and\n2)\tsend a SIP INVITE request towards the home network according to 3GPP TS 24.229 [2]. The ATCF shall populate the SIP INVITE request towards the home network with:\nA)\tthe Request-URI set to the Request-URI of the originating SIP INVITE request from MSC server;\nB)\tall Route header fields of the originating SIP INVITE request from MSC server except the topmost Route header field;\nC)\tthe Record-Route header field containing the SIP URI of the ATCF;\nD)\tthe Recv-Info header fields of the originating SIP INVITE request from MSC server except the Recv-Info header field containing the g.3gpp.access-transfer-events info package name;\nE)\tthe Accept header fields of the originating SIP INVITE request from MSC server except the Accept header field containing the application/vnd.3gpp.access-transfer-events+xml MIME type;\nF)\tif an Accept header field of the originating SIP INVITE request from MSC server contains the application/vnd.3gpp.access-transfer-events+xml with the \"et\" parameter indicating ability to receive \"event-type\" attribute with values additional to the value \"2\":\na)\tthe Accept header field containing the application/vnd.3gpp.access-transfer-events+xml MIME type with the \"et\" parameter indicating ability to receive \"event-type\" attribute with the additional values; and\nb)\tthe Recv-Info header field containing the g.3gpp.access-transfer-events info package name;\nG)\tif the originating SIP INVITE request from MSC server contains an SDP offer and if the ATCF decided to anchor the media according to operator policy as specified in 3GPP TS 23.237 [9]:\na)\tall MIME bodies of the originating SIP INVITE request from MSC server apart from the application/vnd.3gpp.srvcc-ext+xml MIME body and apart from application/sdp MIME body; and\nb)\tapplication/sdp MIME body with updated SDP offer using media parameters provided by the ATGW;\nNOTE:\tATCF interacts with ATGW to provide the needed media related information. The details of interaction between ATCF and ATGW are out of scope of this document.\nH)\tif the originating SIP INVITE request from MSC server does not contain an SDP offer or if the ATCF decided not to anchor the media according to operator policy as specified in 3GPP TS 23.237 [9]:\na)\tall MIME bodies of the originating SIP INVITE request from MSC server apart from the application/vnd.3gpp.srvcc-ext+xml MIME body; and\nI)\tif the ATCF is located in the visited network, and local policy requires the application of IBCF capabilities in the visited network towards the home network, select an IBCF in the visited network and add the URI of the selected IBCF to the topmost Route header field.\nWhen the ATCF receives any SIP 1xx response or SIP 2xx response to the SIP INVITE request towards the home network, the ATCF shall:\n1)\tsave the Contact header field included in the SIP response; and\n2)\tgenerate and send a SIP response to the originating SIP INVITE request from MSC server populated with:\nA)\tthe same status code as the received SIP response to the SIP INVITE request towards the home network;\nB)\tthe Record-Route header field containing the SIP URI of the ATCF;\nC)\tthe Recv-Info header fields of the received SIP response except the Recv-Info header field containing the g.3gpp.access-transfer-events info package name;\nD)\tif the SIP response is a SIP 1xx response:\na)\tthe Recv-Info header field containing the g.3gpp.access-transfer-events info package name with the \"et\" parameter indicating ability to receive \"event-type\" attribute with value \"1\", value \"3\", value \"4\" and values, if any, indicated in the \"et\" parameter of the g.3gpp.access-transfer-events info package name of the Recv-Info header field of the received SIP response; and\nE)\tif the SIP response is a SIP 2xx response:\na)\tthe Recv-Info header field containing the g.3gpp.access-transfer-events info package name;\nb)\tthe Accept header fields of the received SIP response except the Accept header field containing the application/vnd.3gpp.access-transfer-events+xml MIME type; and\nc)\tthe Accept header field containing the application/vnd.3gpp.access-transfer-events+xml MIME type with the \"et\" parameter indicating ability to receive \"event-type\" with value \"1\", value \"3\", value \"4\" and values, if any, indicated in the \"et\" parameter of the application/vnd.3gpp.access-transfer-events+xml MIME type of the Accept header field of the received SIP response.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "7.5.3\tProcedures in the ATCF for originating requests not related to a call",
                            "text_content": "Upon receiving a\n1.\toriginating SIP request other than SIP INVITE request, creating a dialog;\n2.\toriginating SIP standalone request; or\n3.\toriginating unknown SIP request;\nthe ATCF shall:\n1)\tif the ATCF is located in the visited network, and local policy requires the application of IBCF capabilities in the visited network towards the home network, select an IBCF in the visited network and add the URI of the selected IBCF to the topmost Route header field;\nbefore forwarding the request.\n",
                            "figures_meta_data": [],
                            "tables": []
                        }
                    ]
                },
                {
                    "title": "7.6\tMSC server",
                    "description": "",
                    "summary": "",
                    "text_content": "",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": [
                        {
                            "title": "7.6.1\tCall origination procedures",
                            "text_content": "Upon receipt of a CC SETUP message from the SC UE and if the MSC server:\n1)\tis enhanced for ICS and supports CS to PS SRVCC; and\n2)\tthe latest SRVCC information received for the registration path of the SC UE contains the ATCF management URI and the C-MSISDN;\nthen when sending the SIP INVITE request due to receipt of a CC SETUP message from the SC UE as specified in 3GPP TS 29.292 [18] and 3GPP TS 24.292 [4], then the MSC server shall additionally populate the SIP INVITE request with:\n1)\ttopmost Route header field with the ATCF management URI and lr URI parameter;\n2)\tthe Accept header field containing application/vnd.3gpp.access-transfer-events+xml MIME type with the \"et\" parameter indicating ability to receive \"event-type\" attribute with the value \"2\";\n3)\tthe Recv-Info header field containing the g.3gpp.access-transfer-events info package name;\n4)\tapplication/vnd.3gpp.srvcc-ext+xml MIME body with the <srvcc-ext> root element containing the <Setup-info> element containing the CS to PS SRVCC information bound to the registration path (see subclause 6A.3.1) and indicating the \"initiator\" role of the MSC server in the session set up; and\n5)\tthe g.3gpp.ti media feature tag with value as described in subclause C.12 in the Contact header field.\n",
                            "figures_meta_data": [],
                            "tables": []
                        }
                    ]
                }
            ]
        },
        {
            "title": "8\tRoles for call termination for service continuity",
            "description": "",
            "summary": "",
            "tables": [],
            "figures_meta_data": [],
            "subsections": [
                {
                    "title": "8.1\tIntroduction",
                    "description": "",
                    "summary": "",
                    "text_content": "This clause specifies the procedures for call termination, both where the SC UE is receiving calls in the CS domain and where the SC UE is receiving calls using the IM CN subsystem. Procedures are specified for the SC UE, the SCC AS and the ATCF.\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "8.2\tSC UE",
                    "description": "",
                    "summary": "",
                    "text_content": "The SC UE shall support termination of multimedia sessions in the IM CN subsystem as specified in 3GPP TS 24.229 [2] with the following clarifications:\n1)\tIf the SC UE supports the MSC server assisted mid-call feature, and the receiving SIP INVITE request includes g.3gpp.mid-call feature-capability indicator, as described in annex C, in the Feature-Caps header field, the SC UE shall include the g.3gpp.mid-call media feature tag as described in annex C in the Contact header field of the SIP 2xx response to the SIP INVITE request according to IETF RFC 3840 [53].\n1a)\tIf the SC UE supports the PS to CS SRVCC for calls in alerting phase, and the receiving SIP INVITE request includes the g.3gpp.srvcc-alerting feature-capability indicator as described in annex C in a Feature-Caps header field, the SC UE shall include the g.3gpp.srvcc-alerting media feature tag as described in annex C in the Contact header field of the SIP 1xx and SIP 2xx responses to the SIP INVITE request according to IETF RFC 3840 [53].\n1b)\tIf the SC UE supports the PS to CS SRVCC for terminating calls in pre-alerting phase, and the receiving SIP INVITE request includes the g.3gpp.ps2cs-srvcc-term-pre-alerting feature-capability indicator as described in annex C in a Feature-Caps header field, the SC UE shall include the g.3gpp.ps2cs-srvcc-term-pre-alerting media feature tag as described in annex C in the Contact header field of the SIP 1xx and SIP 2xx responses to the SIP INVITE request according to IETF RFC 3840 [53].\n2)\tIf the SC UE not supporting ICS or supporting ICS but with ICS capabilities disabled receives a SIP INVITE request containing a SDP offer which includes speech media component transported using an IP bearer, and:\nNOTE 1:\tAn indication that an SC UE with ICS capabilities has its ICS capabilities enabled or disabled can be found in the ICS MO ICS_Capabilities_Enabled leaf node (see 3GPP TS 24.286 [23]).\na)\tif the SC UE sends the response to the SIP INVITE request over GERAN;\nb)\tif the SC UE sends the response to the SIP INVITE request over:\n-\tE-UTRAN, the IMSVoPS indicator indicates that voice is not supported, and no persistent EPS bearer context exists at the SC UE; or\n-\tUTRAN, and the IMSVoPS indicator indicates that voice is not supported; or\nc)\tif the SC UE sends the response to the SIP INVITE request over an access network other than E-UTRAN, UTRAN and GERAN, and the access network does not support the offered speech media component transported using an IP bearer;\nthen the SC UE shall send back a SIP 488 (Not Acceptable Here) response without a message body.\nThe SC UE not supporting ICS or with ICS capabilities disabled shall support termination of calls in the CS domain as specified in 3GPP TS 24.008 [8].\nAn SC UE that supports ICS and has ICS capabilities enabled shall follow the call termination procedures as specified in 3GPP TS 24.292 [4].\nWhen the SC UE not supporting ICS or with ICS capabilities disabled, and supports multiple registrations receives a SIP INVITE request containing SDP for establishing a session using just an IP bearer, then the SC UE shall establish this session in accordance with 3GPP TS 24.229 [2] with the following clarification:\n-\tif the SIP INVITE request contains a Target-Dialog header field containing dialog parameters that correspond to an existing dialog (or a dialog in the process of being established) between the SC UE and SCC AS, the SC UE shall treat the SIP INVITE request as another dialog that is part of the same session as the dialog identified by the dialog parameters contained in the Target-Dialog header field; and\n-\tif the SIP INVITE request does not contain a Target-Dialog header field but there is an existing dialog (or a dialog in the process of being established) between the SC UE and SCC AS, the SC UE shall check if the dialog parameters for this request correspond to the dialog parameters received in a Target-Dialog header field received on an existing dialog (or a dialog in the process of being established) between the SC UE and SCC AS and if so then the SC UE shall treat the SIP INVITE request as another dialog that is part of the same session as the dialog that the Target-Dialog header field was received on.\nNOTE 2:\tThe second case is to cover the possibility that requests can arrive out of the order that they were sent.\nIf the SC UE supports the use of dynamic STN, the SC UE shall include the g.3gpp.dynamic-stn media feature tag according to annex C in the Contact header field of SIP 1xx and SIP 2xx responses according to IETF RFC 3840 [53].\nIf the SC UE supports PS to CS dual radio access transfer of calls in alerting phase and if the g.3gpp.drvcc-alerting feature-capability indicator is included in the SIP INVITE request, the SC UE shall include in all SIP 18x responses to the SIP INVITE request, the g.3gpp.drvcc-alerting media feature tag as described in annex C in the Contact header field according to IETF RFC 3840 [53].\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "8.3",
                    "description": "",
                    "summary": "",
                    "text_content": "",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": [
                        {
                            "title": "Distinction of requests sent to the SCC AS",
                            "text_content": "The SCC AS needs to distinguish between the following initial SIP INVITE requests to provide specific functionality relating to call termination:\n-\tSIP INVITE requests routed to the SCC AS over the ISC interface as a result of processing filter criteria at the S-CSCF according to the termination procedures as specified in 3GPP TS 24.229 [2], and therefore distinguished by the URI relating to this particular filter criteria appearing in the topmost entry in the Route header field. In the procedures below, such requests are known as \"SIP INVITE requests due to terminating filter criteria\". It is assumed that the SCC AS is the last AS that the S-CSCF forwards the request to.\nOther SIP initial requests for a dialog, and requests for a SIP standalone transaction can be dealt with in any manner conformant with 3GPP TS 24.229 [2].\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "8.3.2\tCall termination procedures in the SCC AS",
                            "text_content": "When the SCC AS receives a SIP INVITE request due to terminating filter criteria, the SCC AS shall:\n1)\tfollow the SCC AS roles for call termination procedures specified in 3GPP TS 24.292 [4];\n2)\tsave the Contact header field included in the terminating SIP INVITE request;\n2)\tsave the P-Asserted-Identity header field included in the terminating SIP INVITE request; and\n3)\tif included in the response, save the Privacy header field included in the terminating SIP INVITE request.\nNOTE 1:\tIf the SCC AS subsequently receives an initial SIP INVITE request due to STN-SR, the SCC AS will include the saved P-Asserted-Identity in the SIP 2xx response to the initial SIP INVITE request due to STN-SR and the saved the Contact header field of the remote UE in its SIP 1xx responses and the SIP 200 (OK) response to the initial SIP INVITE request due to STN-SR.\nIf:\n1.\tthe SCC AS supports the MSC Server assisted mid-call feature according to operator policy; and\n2.\tthe SCC AS is aware:\n-\tby local policy; or\n-\tby ATCF indicating support of the MSC server assisted mid-call feature;\nNOTE 2:\tAn ATCF can indicate support of the MSC server assisted mid-call feature by inclusion of the g.3gpp.mid-call feature-capability indicator in the Feature-Caps header field, with the g.3gpp.atcf feature-capability indicator, in the SIP REGISTER request that created the binding of the SC UE.\nthat all MSC Servers in the network where the UE is registered which can be involved in the PS to CS SRVCC procedures support the MSC Server assisted mid-call feature;\nthen the SCC AS shall include the g.3gpp.mid-call feature-capability indicator, as described in annex C, in the Feature-Caps header field of the SIP INVITE request due to terminating filter criteria according to IETF RFC 6809 [60].\nIf the SCC AS supports the MSC Server assisted mid-call feature according to operator policy, the SCC AS shall remove the g.3gpp.mid-call media feature tag as described in annex C from the SIP 2xx response to the SIP INVITE request due to terminating filter criteria before forwarding the SIP 2xx response towards the remote UE.\nIf:\n1.\tthe SCC AS supports the PS to CS SRVCC for calls in alerting phase according to operator policy; and\n2.\tthe SCC AS is aware:\n-\tby local policy; or\n-\tby ATCF indicating support of the PS to CS SRVCC for calls in alerting phase;\nNOTE 3:\tAn ATCF can indicate support of the PS to CS SRVCC for calls in alerting phase by inclusion of the g.3gpp.srvcc-alerting feature-capability indicator in the Feature-Caps header field, with the g.3gpp.atcf feature-capability indicator, in the SIP REGISTER request that created the binding of the SC UE.\nthat all MSC Servers in the network where the UE is registered which can be involved in the PS to CS SRVCC procedures support the PS to CS SRVCC for calls in alerting phase;\nthen the SCC AS shall include the g.3gpp.srvcc-alerting feature-capability indicator as described in annex C in the Feature-Caps header field of the SIP INVITE request due to terminating filter criteria according to IETF RFC 6809 [60].\nIf:\n1.\tthe SCC AS supports the PS to CS SRVCC for terminating calls in pre-alerting phase according to operator policy; and\n2.\tthe SCC AS is aware:\n-\tby local policy; or\n-\tby ATCF indicating support of the PS to CS SRVCC for terminating calls in pre-alerting phase;\nNOTE 4:\tAn ATCF can indicate support of the PS to CS SRVCC for terminating calls in pre-alerting phase by inclusion of the g.3gpp.ps2cs-srvcc-term-pre-alerting feature-capability indicator in the Feature-Caps header field, with the g.3gpp.atcf feature-capability indicator, in the SIP REGISTER request that created the binding of the SC UE.\nthat all MSC Servers in the network where the UE is registered which can be involved in the PS to CS SRVCC procedures support the PS to CS SRVCC for terminating calls in pre-alerting phase;\nthen the SCC AS shall include the g.3gpp.ps2cs-srvcc-term-pre-alerting feature-capability indicator as described in annex C in the Feature-Caps header field of the SIP INVITE request due to terminating filter criteria according to IETF RFC 6809 [60].\nIf the SCC AS supports the PS to CS SRVCC for calls in alerting phase according to operator policy, the SCC AS shall remove the g.3gpp.srvcc-alerting media feature tag as described in annex C from SIP 1xx and SIP 2xx responses to the SIP INVITE request due to terminating filter criteria before forwarding the SIP 1xx and SIP 2xx responses towards the remote UE.\nIf the SCC AS supports the PS to CS SRVCC for terminating calls in pre-alerting phase according to operator policy, the SCC AS shall remove the g.3gpp.ps2cs-srvcc-term-pre-alerting media feature tag as described in annex C from SIP 1xx and SIP 2xx responses to the SIP INVITE request due to terminating filter criteria before forwarding the SIP 1xx and SIP 2xx responses towards the remote UE.\nIf the SCC AS supports the PS to CS dual radio access transfer for calls in alerting phase according to operator policy, the SCC AS shall include the g.3gpp.drvcc-alerting feature-capability indicator as described in annex C in the Feature-Caps header field of the SIP INVITE request due to terminating filter criteria according to IETF RFC 6809 [60].\nIf the SCC AS supports the use of dynamic STN according to operator policy, the SCC AS shall include an E.164 number as the dynamic STN for this session and include this dynamic STN in the g.3gpp.dynamic-stn feature-capability indicator with the dynamic STN as described in annex C in a Feature-Caps header field in the SIP INVITE request according to IETF RFC 6809 [60].\nNOTE 5:\tThe dynamic STN can either be the same or different per call based on implementation.\nThe SCC AS shall include the \"tdialog\" option tag and the \"replaces\" option tag in the Supported header field of the SIP INVITE request due to terminating filter sent toward the SC UE.\n",
                            "figures_meta_data": [],
                            "tables": []
                        }
                    ]
                },
                {
                    "title": "8.4\tAccess Transfer Control Function (ATCF)",
                    "description": "",
                    "summary": "",
                    "text_content": "",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": [
                        {
                            "title": "8.4.1\tDistinction of requests",
                            "text_content": "The ATCF needs to distinguish the following initial SIP requests:\n1)\tSIP INVITE requests with the ATCF URI for terminating requests in the topmost Route header field. In the procedures below, such requests are known as \"terminating SIP INVITE requests for PS\".\n2)\tSIP INVITE requests:\nA)\twith the ATCF management URI in the topmost Route header field; and\nB)\twith application/vnd.3gpp.srvcc-ext+xml MIME body containing <srvcc-ext> root element containing <Setup-info> element containing <direction> element with value \"receiver\".\nIn the procedures below, such requests are known as \"terminating SIP INVITE requests for CS\".\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "8.4.2\tCall termination procedures in the ATCF",
                            "text_content": "For all SIP transactions identified:\n-\tif priority is supported, as containing an authorised Resource-Priority header field or, if such an option is supported, relating to a dialog which previously contained an authorised Resource-Priority header field;\nthe ATCF shall give priority over other transactions or dialogs. This allows special treatment of such transactions or dialogs.\nNOTE:\tThe special treatment can include filtering, higher priority processing, routeing, call gapping. The exact meaning of priority is not defined further in this document, but is left to national regulation and network configuration.\nUpon receiving the terminating SIP INVITE request for PS, the ATCF shall:\nNOTE 1:\tSince the ATCF acts as proxy, the dialog identifier of the SIP INVITE request is not modified by procedures of the subclause.\n1)\tif a Feature-Caps header field containing the g.3gpp.srvcc feature-capability indicator is contained in the SIP INVITE request:\nA)\tinsert a Record-Route header field containing the SIP URI of the ATCF; and\nB)\tif the latest SRVCC-related information received for the registration path which the session being established, is using contains ATU-STI for PS to CS SRVCC and C-MSISDN:\na)\tassociate the session being established with the C-MSISDN and the ATU-STI for PS to CS SRVCC bound to the registration path (see subclause 6A.3.1); and\nb)\tif the terminating SIP INVITE request for PS contains an SDP offer and if the ATCF decided to anchor the media according to operator policy as specified in 3GPP TS 23.237 [9], replace the SDP offer in the terminating SIP INVITE request with an updated SDP offer using media parameters provided by ATGW;\nNOTE 2:\tATCF interacts with ATGW to provide the needed media related information. The details of interaction between ATCF and ATGW are out of scope of this document.\n2)\tsave the Contact header field included in the terminating SIP INVITE request for PS;\n3)\tsave the P-Asserted-Identity header field included in the terminating SIP INVITE request for PS;\n4)\tif included, save the Privacy header field included in the terminating SIP INVITE request for PS;\n5)\tsave the P-Charging-Vector header field included in the terminating SIP INVITE request for PS, and\n6)\tsave the Feature-Caps header field(s) included in the terminating SIP INVITE request for PS.\nNOTE 3:\tIf the ATCF subsequently receives an initial SIP INVITE request due to STN-SR, the ATCF will include the saved P-Asserted-Identity in the SIP 2xx response to the initial SIP INVITE request due to STN-SR and the saved the Contact header field of the remote UE in its SIP 1xx responses and the SIP 200 (OK) response to the initial SIP INVITE request due to STN-SR as describe in subclause 12.7.2.2.\nNOTE 4:\tThere are situations when the P-Asserted-Identity header field with the public user identity of the remote user can not be saved during the establishement of the communication, e.g. if presentation of the remote user public identity is restricted or if the user does not subscribe to the OIP or TIP service. In those situations the P-Asserted-Identity header field with a public user identity will not be delivered to the MSC server in the SIP 2xx response to the SIP INVITE due to STN-SR or the SIP INVITE request transferring additional session and can this limit the supplementary services that the MSC server can use after SRVCC access transfer is completed.\nbefore forwarding the request.\nIf ATCF supports CS to PS SRVCC then upon receiving the terminating SIP INVITE request for CS, the ATCF shall act as B2BUA and shall:\n1)\tsave the Contact header field included in the terminating SIP INVITE request for CS;\n2)\tif ATCF contains an SRVCC-related information (see subclause 6A.3.1) containing C-MSISDN equal to the <C-MSISDN> element of the <Setup-info> element of the value <srvcc-ext> root element of the application/vnd.3gpp.srvcc-ext+xml MIME body of the SIP INVITE request:\nA)\tassociate the session being established with the latest SRVCC-related information (see subclause 6A.3.1) containing C-MSISDN equal to the <C-MSISDN> element of the <Setup-info> element of the value <srvcc-ext> root element of the application/vnd.3gpp.srvcc-ext+xml MIME body of the SIP INVITE request; and\n3)\tsend a SIP INVITE request towards the MSC server according to 3GPP TS 24.229 [2]. The ATCF shall populate the SIP INVITE request towards the MSC server with:\nA)\tthe Request-URI set to the Request-URI of the terminating SIP INVITE request for CS;\nB)\tall Route header fields of the terminating SIP INVITE request for CS except the topmost Route header field;\nC)\tthe Record-Route header field containing the SIP URI of the ATCF;\nD)\tthe Accept header fields of the terminating SIP INVITE request for CS except the Accept header field containing the application/vnd.3gpp.access-transfer-events+xml MIME type;\nE)\tthe Accept header field containing the application/vnd.3gpp.access-transfer-events+xml MIME type with the \"et\" parameter indicating ability to receive \"event-type\" attribute with value \"1\", value \"3\", value \"4\" and values, if any, indicated in the \"et\" parameter of the application/vnd.3gpp.access-transfer-events+xml MIME type of the Accept header field of the terminating SIP INVITE request for CS;\nF)\tthe Recv-Info header fields of the terminating SIP INVITE request for CS;\nG)\tthe Recv-Info header field containing the g.3gpp.access-transfer-events info package name, if not included already;\nH)\tif the terminating SIP INVITE request for CS contains an SDP offer and if the ATCF decided to anchor the media according to operator policy as specified in 3GPP TS 23.237 [9]:\na)\tall MIME bodies of the terminating SIP INVITE request for CS apart from the application/vnd.3gpp.srvcc-ext+xml MIME body and apart from application/sdp MIME body; and\nb)\tapplication/sdp MIME body with updated SDP offer using media parameters provided by the ATGW; and\nNOTE:\tATCF interacts with ATGW to provide the needed media related information. The details of interaction between ATCF and ATGW are out of scope of this document.\nI)\tif the terminating SIP INVITE request for CS does not contain an SDP offer or if the ATCF decided not to anchor the media according to operator policy as specified in 3GPP TS 23.237 [9]:\na)\tall MIME bodies of the terminating SIP INVITE request for CS apart from the application/vnd.3gpp.srvcc-ext+xml MIME body.\nWhen the ATCF receives any SIP 1xx response or SIP 2xx response to the SIP INVITE request towards the MSC server, the ATCF shall:\n1)\tstore the value of the g.3gpp.ti media feature tag of the Contact header field of the received SIP response to the SIP INVITE request towards the MSC server;\n2)\tgenerate and send a SIP response to the terminating SIP INVITE request for CS populated with:\nA)\tthe same status code as the received SIP response to the SIP INVITE request towards the MSC server;\nB)\tthe Record-Route header field containing the SIP URI of the ATCF;\nC)\tthe Recv-Info header fields of the received SIP response except the Recv-Info header field containing the g.3gpp.access-transfer-events info package name;\nD)\tif the SIP response is SIP 1xx response:\na)\tif the SIP response contains an Recv-Info header field containing the g.3gpp.access-transfer-events info package name with the \"et\" parameter indicating ability to receive \"event-type\" attribute with values additional to the value \"2\", then the Recv-Info header field containing the g.3gpp.access-transfer-events info package name with the \"et\" parameter indicating ability to receive \"event-type\" attribute with the additional values; and\nE)\tif the SIP response is SIP 2xx response:\na)\tif the SIP response contains an Accept header field containing the application/vnd.3gpp.access-transfer-events+xml MIME type with the \"et\" parameter indicating ability to receive \"event-type\" attribute with values additional to the value \"2\":\ni)\tthe Accept header field containing the application/vnd.3gpp.access-transfer-events+xml MIME type with the \"et\" parameter indicating ability to receive \"event-type\" attribute with the additional values; and\nii)\tthe Recv-Info header field containing the g.3gpp.access-transfer-events info package name.\n",
                            "figures_meta_data": [],
                            "tables": []
                        }
                    ]
                },
                {
                    "title": "8.5\tMSC server",
                    "description": "",
                    "summary": "",
                    "text_content": "",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": [
                        {
                            "title": "8.5.1\tDistinction of requests",
                            "text_content": "The MSC server needs to distinguish the following initial SIP requests:\n1)\tSIP INVITE requests with the topmost Route header field containing the Path header field value inserted by the MSC server in a REGISTER request. In the procedures below, such requests are known as \"terminating SIP INVITE requests from home network\".\n2)\tSIP INVITE requests with the MSC URI for redirected terminating sessions in the topmost Route header field. In the procedures below, such requests are known as \"redirected terminating SIP INVITE requests\".\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "8.5.2\tCall termination procedures",
                            "text_content": "Upon receiving the terminating SIP INVITE request from home network and if the MSC server:\n1)\tis enhanced for ICS and supports CS to PS SRVCC; and\n2)\tthe latest SRVCC information received for the registration path of the SC UE contains the ATCF management URI and the C-MSISDN;\nthen the MSC server instead of interworking of mobile terminating call setup from SIP to NAS signalling according 3GPP TS 29.292 [18] and 3GPP TS 24.292 [4], the MSC server shall:\n1)\tsend a SIP INVITE request towards the ATCF according to 3GPP TS 24.229 [2]. The MSC server shall populate the SIP INVITE request towards the ATCF with:\nA)\tthe Request-URI set to the Request-URI of the terminating SIP INVITE request from home network;\nB)\ttopmost Route header field with the ATCF management URI and lr URI parameter;\nC)\tall MIME bodies of the terminating SIP INVITE request from home network; and\nD)\tapplication/vnd.3gpp.srvcc-ext+xml MIME body with the <srvcc-ext> root element containing the <Setup-info> element containing the CS to PS SRVCC information bound to the registration path (see subclause 6A.3.1) and indicating the \"receiver\" role of the MSC server in the session set up.\nWhen the MSC server receives any SIP 1xx response or SIP 2xx response to the SIP INVITE request towards the ATCF, the MSC server shall generate and send a SIP response to the terminating SIP INVITE requests from home network populated with the same status code as the received SIP response to the SIP INVITE request towards the ATCF.\nIf the MSC server is enhanced for ICS and supports CS to PS SRVCC then upon receiving the redirected terminating SIP INVITE request, the MSC server shall interworking the mobile terminating call setup from SIP to NAS signalling according 3GPP TS 29.292 [18] and 3GPP TS 24.292 [4].\nWhen sending a SIP 1xx response or SIP 2xx response to the redirected terminating SIP INVITE requests, MSC server shall additionally populate the SIP response with:\n1)\tthe g.3gpp.ics media feature tag with value \"server\" in the Contact header field;\n2)\tif the SIP response is SIP 1xx response:\nA)\tRecv-Info header field containing the g.3gpp.access-transfer-events info package name and with the \"et\" parameter indicating ability to receive \"event-type\" attribute with value \"2\";\n3)\tif the SIP response is SIP 2xx response:\nA)\tthe Recv-Info header field containing the g.3gpp.access-transfer-events info package name; and\nB)\tthe Accept header field containing the application/vnd.3gpp.access-transfer-events+xml MIME type with the \"et\" parameter indicating ability to receive \"event-type\" attribute with the value \"2\"; and\n4)\tthe g.3gpp.ti media feature tag with value as described in subclause C.12 in the Contact header field.\n",
                            "figures_meta_data": [],
                            "tables": []
                        }
                    ]
                }
            ]
        },
        {
            "title": "9\tRoles for PS-CS access transfer",
            "description": "",
            "summary": "",
            "tables": [],
            "figures_meta_data": [],
            "subsections": [
                {
                    "title": "9.1\tIntroduction",
                    "description": "",
                    "summary": "",
                    "text_content": "For a UE or an AS not supporting ICS procedures, PS-CS access transfer procedures enable transfer of\n-\tone full-duplex session with active speech or speech/video component;\n-\tup to one full-duplex session with active speech or speech/video media component and up to one full-duplex session with inactive speech or speech/video media component when the MSC Server assisted mid-call feature is supported;\n-\tone full-duplex session in an early dialog phase that can be in a pre-alerting or an alerting phase when dual radio access transfer for originating calls in pre-alerting phase or dual radio access transfer for calls in alerting phase are supported;\n-\tone full-duplex session with active speech media component and one full-duplex session in an early dialog state, that can be in an originating pre-alerting or an alerting phase, when dual radio access transfer for originating calls in pre-alerting phase or dual radio access transfer for calls in alerting phase are supported; and\n-\tone full-duplex session with inactive speech media component and one full-duplex session in an early dialog phase, that can be in a pre-alerting or alerting phase, when the MSC Server assisted mid-call feature and the dual radio access transfer for originating calls in pre-alerting phase or dual radio access transfer for calls in alerting phase are supported.\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "9.1A\tAdditional procedures with MSC Server assisted mid-call feature",
                    "description": "",
                    "summary": "",
                    "text_content": "When a conference is transferred to CS domain using MSC Server assisted mid-call feature, the participants are extracted from the stored conference information as follows:\n1.\tat maximum first 5 participants listed in the <user> elements:\na.\tincluded in <users> parent element included in <conference-info> root element of the conference information;\nb.\tcontaining at least one <endpoint> child element with <status> child element containing one of the states \"connected\", \"on-hold\", \"muted-via-focus\", \"pending\", \"alerting\", \"dialing-in\" or \"dialing-out\"; and\nc\twhere \"entity\" attribute is different than the URI in the P-Asserted-Identity header field of the served SC UE used at the subscription.\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "9.2\tSC UE",
                    "description": "",
                    "summary": "",
                    "text_content": "",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": [
                        {
                            "title": "9.2.0\tGeneral",
                            "text_content": "Void\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "SC UE not using ICS procedures for PS to CS access transfer",
                            "text_content": "The SC UE may be engaged in one or more ongoing sessions at the time of initiating access transfer. By an ongoing session, it is meant a session for which the SIP 2xx response for the initial SIP INVITE request to establish this session has been sent or received.\nAdditional to the ongoing sessions, the SC UE can be engaged in one or more sessions in an early dialog phase at the time of initiating access transfer. By a session in an early dialog phase, it is meant a session for which the SIP 18x response for the initial SIP INVITE request to establish this session has been sent or received but the SIP 2xx response has not yet been received or sent.\nIf the SC UE is not using ICS capabilities and if the SC UE does not apply the MSC Server assisted mid-call feature as specified in subclause 9.2.1A, subject to the SC_non_transferrable_media node value in the Communication Continuity MO (see subclause 5.27 in 3GPP TS 24.216 [5]), the SC UE shall:\na)\tif more than one ongoing full-duplex session with speech media component exists and if the SC UE does not support PS to CS dual radio access transfer of a session in an early dialog phase or if no session in an early dialog phase exists:\n1)\tinitiate the release of all the full-duplex sessions with speech media component except the full-duplex session with active speech media component that was most recently made active; and\n2)\ttransfer the remaining ongoing full-duplex session with active speech media component by sending a CC SETUP message as described in step A);\nb)\tif one ongoing full-duplex session with active speech media component exist, one or more session in the early dialog phases fulfilling the criteria in subclause 9.2.4 exists and if the SC UE supports PS to CS dual radio access transfer of a session in an early dialog phase:\n1)\tselect a session in an early dialog phase to be transferred as specified in subclause 9.2.4;\n2)\tinitiated the release of the remaining sessions in early dialog phase, except the selected session in an early dialog phase;\n3)\tif the selected session in the early dialog phase is a session in the terminating alerting phase,\n-\ttransfer the ongoing full-duplex session with active speech media component by sending a CC SETUP message as described in step A) below; and\n-\twhen the transfer of the ongoing full-duplex session with active speech media component is completed, transfer the selected session in the terminating alerting phase by sending a SIP 488 (Not Acceptable Here) response to the SIP INVITE request creating the session in the terminating alerting phase without an SDP body as described in subclause 10.2.4 of 3GPP TS 24.292 [4]; and\n4)\tif the selected session in the early dialog phase is not a session in the terminating alerting phase, transfer the ongoing full-duplex session with active speech media by sending a CC SETUP message as described in step A) below and when the transfer is completed:\n-\tif a session in the pre-alerting phase was transferred, assign the TI flag as in the mobile originating case and the TI value as described in the table 9.2.1A-1 in subclause 9.2.1A and continue the session in the pre-alerting phase in the CS domain in the \"Mobile originating call proceeding\" (U3) call state as described in 3GPP TS 24.008 [8]; and\n-\tif a session in the originating alerting phase was transferred, assign the TI flag as in the mobile originating case and the TI value as described in the table 9.2.1A-1 in subclause 9.2.1A and continue the session in the originating alerting phase in the CS domain in the \"Call delivered\" (U4) call state as described in 3GPP TS 24.008 [8]; and\nNOTE 1:\tOne CC SETUP message transfers both the ongoing full-duplex session with active speech media component and the session in the early dialog phase.\nc)\tif no ongoing full-duplex session with active speech media component exists, one or more session in the early dialog phases fulfilling the criteria in subclause 9.2.4 exists and if the SC UE supports PS to CS dual radio access transfer of asession in an early dialog phase:\n1)\tselect an session in the early dialog phase to be transferred as specified in subclause 9.2.4;\n2)\tinitiate the release of remaining sessions in early dialog phase, except the selected session;\n3)\tif the selected session in the early dialog phase is a session in the terminating alerting phase, transfer the selected session by sending a SIP 488 (Not Acceptable Here) response to the SIP INVITE request creating the session in the terminating alerting phase without an SDP body as described in subclause 10.2.4 of 3GPP TS 24.292 [4]; and\n4)\tif the selected session in the early dialog phase is not a session in the terminating alerting phase, transfer the selected session by sending a CC SETUP message as described in step A).\nWhen transferring the session(s) not using ICS capabilities, the SC UE shall:\nA)\tsend a CC SETUP message (as specified in 3GPP TS 24.008 [8]) and set up a call over the CS domain. When sending CC SETUP message, the SC UE shall populate the CC SETUP message as follows:\n1)\tthe called party BCD number information element set to:\n-\tif the SC UE supports the use of the dynamic STN and if a dynamic STN was received from the SCC AS in the g.3gpp.dynamic-stn feature-capability indicator in a Feature-Caps header field of SIP 1xx responses or the SIP 2xx response to the initial SIP INVITE request as specified in annex C, the E.164 number from the tel URI from the received dynamic STN associated with the call to transfer; or\nNOTE 2:\tThe SC UE could have multiple dialogs (e.g active session and a session on hold). The dynamic STN only applies to the dialog for which it is received so the UE needs to store the dynamic STN associated with the dialog on which it was received and upon termination of the dialog (i.e upon sending or receiving a SIP BYE request or SIP CANCEL request) the dynamic STN associated with the dialog is discarded.\n-\tif the use of dynamic STN is not supported by the SC UE or if a dynamic STN was not received from the SCC AS in a g.3gpp.dynamic-stn feature-capability indicator in a Feature-Caps header field of SIP 1xx responses or in the SIP 2xx response to the initial SIP INVITE request, the static STN; and\n2)\tType Of Number set to \"International\" and Numbering Plan Indicator set to \"E.164\" in the Called Party BCD Number information element.\nIf the SC UE receives a SIP BYE request for a session subject for access transfer and before the access transfer is completed the SC UE shall:\n1.\tsend the SIP 200 (OK) response to the SIP BYE request in accordance with 3GPP TS 24.229 [2]; and\n2.\tabort the transfer of the session and if the session is an additional session, internally release any reserved CS resources.\nNOTE 3:\tIf only one session is subject for access transfer the session, CS resources will be released by 3GPP TS 24.008 [2] procedures.\nNOTE 4:\tIf more than one session is subject for access transfer the remaining session will be transferred by the CC SETUP message.\nIf the SC UE receives a release message to the CC SETUP message sent, then the PS to CS access transfer has not completed successfully and the call will continue in the Source Access Leg.\nAfter completion of session transfer, if the SC UE is not using Gm, the SC UE shall locally release the resources, if any, that are associated with the source access leg.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "9.2.1AAA\tSC UE not using ICS procedures for PS to CS access transfer of emergency session",
                            "text_content": "The UE may support PS to CS transfer of an emergency session for which the SIP 2xx response for the initial SIP INVITE request to establish this session has been sent or received.\nIf an E-STN-DR was received from the EATF in g.3gpp.dynamic-e-stn-drvcc feature-capability indicator in a Feature-Caps header field of a SIP 2xx response to the initial SIP emergency INVITE request as specified in annex C, the SC UE, when transferring the emergency session, shall:\nA)\tsend a CC SETUP message (as specified in 3GPP TS 24.008 [8]) and set up a call over the CS domain. When sending CC SETUP message, the SC UE shall populate the CC SETUP message as follows:\n1)\tthe called party BCD number information element set to the E.164 number of the tel URI from the received E-STN-DR associated with the call to transfer, and\nNOTE 1:\tThe E-STN-DR only applies to the dialog for which it is received so the UE needs to store the E-STN associated with the dialog on which it was received and upon termination of the dialog (i.e upon sending or receiving a SIP BYE request or SIP CANCEL request) the E-STN-DR associated with the dialog is discarded.\n2)\tType Of Number set to \"International\" and Numbering Plan Indicator set to \"E.164\" in the Called Party BCD Number information element.\nIf the SC UE receives a SIP BYE request for a session subject for access transfer and before the access transfer is completed the SC UE shall:\n1.\tsend the SIP 200 (OK) response to the SIP BYE request in accordance with 3GPP TS 24.229 [2]; and\n2.\tabort the transfer of the session and if the session is an additional session, internally release any reserved CS resources.\nNOTE 2:\tThe access transfer is completed once the SC UE has received CC CONNECT message.\nIf the SC UE receives a release message to the CC SETUP message sent, then the PS to CS access transfer has not completed successfully and the call will continue in the Source Access Leg.\nAfter successful completion of session transfer, the SC UE shall locally release the resources, if any, that are associated with the speech media component of the emergency session on the source access leg.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "9.2.1AA\tSC UE using ICS procedures for PS to CS access transfer",
                            "text_content": "If SC UE uses ICS capabilities, this subclause applies for IMS sessions containing speech media component only, otherwise subclause 11.2.1.2 applies.\nThe SC UE may be engaged in one or more ongoing sessions at the time of initiating access transfer. By an ongoing session, it is meant a session for which the SIP 2xx response for the initial SIP INVITE request to establish this session has been sent or received.\nIf SC using ICS is enabled and if the SC UE is using Gm, then for each session with speech media component to be transferred and starting with the session with the active speech media component, the SC UE shall send a SIP INVITE request to the SCC AS. The SC UE shall populate the SIP INVITE request as follows:\n1)\tthe Request-URI set to:\n-\tif the PS to PS STI URI is configured in the SC UE, the configured PS to PS STI URI; and\n-\tif the PS to PS STI URI is not configured in the SC UE, the URI contained in the Contact header field returned at the creation of the dialog on the Source Access Leg;\n2)\tinclude in the Contact header field according to IETF RFC 3840 [53]:\n-\ta public GRUU or temporary GRUU as specified in 3GPP TS 24.229 [2] if a GRUU was received at registration; and\n-\tthe g.3gpp.ics media feature tag set to \"principal\" as specified in annex B of 3GPP TS 24.292 [4];\n3)\tselect one of the following options:\n-\tif usage of SIP Replaces extension is selected:\na)\tthe Replaces header field populated as specified in IETF RFC 3891 [10], containing the dialog identifier of the session to be transferred; and\nb)\tthe Require header field populated with the option tag value \"replaces\";\n-\tif usage of SIP Target-Dialog extension is selected:\na)\tthe Target-Dialog header field populated as specified in IETF RFC 4538 [11], containing the dialog identifier of the session to be transferred; and\nb)\tthe Require header field populated with the option tag value \"tdialog\";\n4)\tSDP proposing an audio stream over a circuit-switched bearer in accordance with procedures for SDP for ICS UE proposing using a CS audio stream in 3GPP TS 24.292 [4]; and\n5)\tan indication that the related local preconditions for QoS are not met as specified in 3GPP TS 24.229 [11].\nUpon the SC UE receiving a reliable SIP 1xx provisional response including a PSI DN from the SCC AS, the SC UE shall follow the procedures for ICS YE setting up a CS call in 3GPP TS 24.292 [4].\nWhen the CS resources are available to the UE, the SC UE shall send an SDP offer including an indication that the related local preconditions for QoS for audio as met as specified in 3GPP TS 24.229 [11].\nUpon receiving a SIP 2xx response for the SIP INVITE request, the SC UE shall:\n1)\tsend a SIP ACK request; and\n2)\tsend a SIP BYE request to the SCC AS on the Source Access Leg to terminate the dialog on the Source Access Leg, if the dialog is still active (e.g. it has not been released by the SCC AS) and no active media streams remain on that dialog on the Source Access Leg.\nNOTE:\tIf the contact address used by the dialog over the Source Access Leg was registered using multiple registration procedure, then upon transferring the dialog to the CS domain, the SC UE is still registered on the Source Access Leg and its subscription dialog to its reg-event on the Source Access Leg is intact.\nIf the SC UE receives any SIP 4xx – 6xx response to the SIP INVITE request, then PS-CS access transfer has not completed successfully and the call will continue on the PS Access Leg.\nIf the SC UE receives a release message to the CC SETUP message sent, then PS-CS access transfer has not completed successfully and the call will continue in the Source Access Leg.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "9.2.1A\tSC UE procedures for PS to CS access transfer with MSC server assisted mid-call feature",
                            "text_content": "The SC UE shall apply the MSC Server assisted mid-call feature when transferring the session not using ICS capabilities if:\n1.\tthe SC UE supports the MSC Server assisted mid-call feature; and\n2.\tone of the following is true:\nA.\tthere is at least one ongoing full-duplex session with active speech media component and the Feature-Caps header field received during the establishment of the ongoing full-duplex session with active speech media component which has been most recently made active includes the g.3gpp.mid-call feature-capability indicator as described in annex C;\nB.\tthere is no ongoing full-duplex session with active speech media component and the Feature-Caps header field received during the establishment of the ongoing full-duplex session with inactive speech media component which became inactive most recently includes the g.3gpp.mid-call feature-capability indicator as described in annex C; or\nC.\tif\n-\tthere is one ongoing full-duplex session with active speech media component or one ongoing full-duplex session with inactive speech media component and the Feature-Caps header field received during the establishment of the ongoing full-duplex session includes the g.3gpp.mid-call feature-capability indicator as described in annex C; and\n-\tthere is at least one session in the early dialog phase fulfilling the criteria in the subclause 9.2.4 exists.\nWhen the SC UE applies the MSC Server assisted mid-call feature, in addition to the procedures described in subclause 9.2.1, and before sending a message to set up a call over the CS domain, the SC UE shall:\n1.\tif there are two or more ongoing full-duplex sessions with active speech media component:\nA.\tinitiate the release of all the ongoing full-duplex sessions with speech media component except two that were most recently made active;\nB.\tinitiate the session modification of the ongoing full-duplex session with speech media component that was made active less recently and offer the speech media component with \"sendonly\" or \"inactive\" directionality; and\nC.\ttransfer two remaining ongoing full-duplex sessions with speech media component;\nNOTE 1:\tWhen full-duplex session with active speech media component and another session with inactive speech media component exist, one CC SETUP message transfers both sessions.\n2.\tif there are one ongoing full-duplex session with active speech media component and one or more ongoing full-duplex session with inactive speech media component:\nA.\tinitiate the release of all the ongoing full-duplex sessions with inactive speech media component except the one which became inactive most recently; and\nB.\ttransfer two remaining ongoing full-duplex sessions with speech media component;\nNOTE 2:\tWhen full-duplex session with active speech media component and another session with inactive speech media component exist, one CC SETUP message transfers both sessions.\n3.\tif there is one ongoing full-duplex session with active speech media component and no ongoing full-duplex session with inactive speech media component, transfer the ongoing full-duplex session with the speech media component;\n4.\tif there is no ongoing full-duplex session with active speech media component and there is one or more ongoing full-duplex session with inactive speech media component:\nA.\tinitiate the release of all the ongoing full-duplex sessions with inactive speech media component except the one which became inactive most recently; and\nB.\ttransfer the ongoing full-duplex session with speech media component; and\nNOTE 3:\tThe ongoing full-duplex session with inactive speech media component is transferred to a held CS call.\n5.\tif one ongoing full-duplex session with active speech media component or one ongoing full-duplex session with inactive speech media component, one or more session in the early dialog phases fulfilling the criteria in subclause 9.2.4 and if the SC UE supports PS to CS dual radio access transfer of a session in an early dialog phase:\nA)\tselect a session in an early dialog phase to be transferred as specified in subclause 9.2.4;\nB)\tinitiated the release of the remaining sessions in early dialog phase, except the selected session; and\nC)\tif the selected session in the early dialog phase is a session in the terminating alerting phase,\n-\ttransfer the ongoing full-duplex session with active speech media component by sending a CC SETUP message as described in subclause 9.2.1; and\n-\twhen the transfer of the ongoing full-duplex session with active speech media component is completed, transfer the selected session in the terminating alerting phase by sending a SIP 488 (Not Acceptable Here) response to the SIP INVITE request creating the session in the terminating alerting phase without an SDP body as described in subclause 10.2.4 of 3GPP TS 24.292 [4]; and\n4)\tif the selected session in the early dialog phase is not a session in the terminating alerting phase, transfer the ongoing full-duplex session with active speech media by sending a CC SETUP message as described in subclause 9.2.1 and when the transfer is completed:\n-\tif a session in the pre-alerting phase was transferred, continue the session in the pre-alerting phase in the CS domain in the \"Mobile originating call proceeding\" (U3) call state as described in 3GPP TS 24.008 [8]; and\n-\tif a session in the originating alerting phase was transferred, continue the session in the originating alerting phase in the CS domain in the \"Call delivered\" (U4) call state as described in 3GPP TS 24.008 [8].\nNOTE 4:\tOne CC SETUP message transfers both the ongoing full-duplex session with active or inactive speech media component and the session in the early dialog phase.\nThe SC UE shall associate the additional transferred session with a CS call with transaction identifier calculated as in the table 9.2.1A-1 and TI flag value as in mobile originated call.\nNOTE 5:\tIf the additional transfer sessions was a session in the terminating alerting phase, the TI flag value and TI value need not to be calculated as in table 9.2.1A-1, instead the TI flag value and the TI value is assigned by the MSC server and the UE using 3GPP TS 24.008 [8] call establishment procedures.\nTable 9.2.1A-1: held session transaction identifier calculation formula\n<transaction identifier of the additional transferred session> = (1 + <transaction identifier indicated in the CC SETUP message>) modulo 7\n\nIf the SC UE has a subscription as described in subclause 7.2.2 for the ongoing full-duplex session with active speech media component then:\n1.\tthe SC UE shall associate the ongoing full-duplex session and the participants extracted in subclause 9.1A with CS calls:\n-\twith transaction identifiers calculated as in the table 9.2.1A-2. The offsets 0, 2, 3, 4, 5 are assigned to the participants in their order in the list of the extracted participants; and\n-\twith TI flag value as in mobile originated call; and\nNOTE 6:\tThe transaction identifier of the CS call established by the CC SETUP message (i.e. transaction identifier of the conference) is the transaction identifier assigned to the first participant (offset 0).\n2.\tthe SC UE shall enter the \"active\" (U10) state (defined in 3GPP TS 24.008 [8]), the \"idle\" hold auxiliary state (defined in 3GPP TS 24.083 [43]) and the \"call in MPTY\" multi party auxiliary state (defined in 3GPP TS 24.084 [47]) for the CS calls.\nNOTE 7:\tThe \"active\" (U10) state for the first participant is entered as a result of the CS call being established by the 3GPP TS 24.008 [8] procedures.\nTable 9.2.1A-2: transaction identifier assignment for participants\n<transaction identifier of participant> = (<transaction identifier of transaction identifier indicated in the CC SETUP message> + <offset of participant>) modulo 7\n\nIf the ongoing full-duplex session with active speech media component does not exist and the SC UE has a subscription as described in subclause 7.2.2 for the ongoing full-duplex session with inactive speech media component then:\n1.\tthe SC UE shall associate the ongoing full-duplex session and the participants extracted in subclause 9.1A with CS calls:\n-\twith transaction identifiers calculated as in the table 9.2.1A-2. The offsets 0, 2, 3, 4, 5 are assigned to the participants in their order in the list of the extracted participants; and\n-\twith TI flag value as in mobile originated call; and\nNOTE 8:\tThe transaction identifier of the CS call established by the CC SETUP message (i.e. transaction identifier of the conference) is the transaction identifier assigned to the first participant (offset 0).\n2.\tthe SC UE shall enter the \"active\" (U10) state (defined in 3GPP TS 24.008 [8]) , the \"call held\" hold auxiliary state (defined in 3GPP TS 24.083 [43]) and the \"call in MPTY\" multi party auxiliary state (defined in 3GPP TS 24.084 [47]) for the CS calls.\nNOTE 9:\tThe \"active\" (U10) state for the first participant is entered as a result of the CS call being established by the 3GPP TS 24.008 [8] procedures.\nIf\n1.\tthe ongoing full-duplex session with active speech media component exists and the SC UE does not have a subscription as described in subclause 7.2.2 for the ongoing full-duplex session with active speech media component; and\n2.\tthe SC UE has a subscription as described in subclause 7.2.2 for the additional transferred session;\nthen:\n1.\tthe SC UE shall associate the ongoing full-duplex session and the participants extracted in subclause 9.1A with CS calls:\n-\twith transaction identifiers calculated as in the table 9.2.1A-2. The offsets 1, 2, 3, 4, 5 are assigned to the participants in their order in the list of the extracted participants; and\n-\twith TI flag value as in mobile originated call; and\n2.\tthe SC UE shall enter the \"active\" (U10) state (defined in 3GPP TS 24.008 [8]), the \"call held\" auxiliary state (defined in 3GPP TS 24.083 [43])\" and the \"call in MPTY\" multi party auxiliary state (defined in 3GPP TS 24.084 [47]) for the CS calls.\nIf the SC UE does not have a subscription as described in subclause 7.2.2 for the transferred session then when the transfer is completed, the SC UE shall:\n1)\tif the call is an additional transferred session with inactive speech media, enter the \"active\" (U10) state (defined in 3GPP TS 24.008 [8]); and\n2)\tif a call is a session with inactive speech media component, enter the \"call held\" hold auxiliary state (defined in 3GPP TS 24.083 [43]) for the held call.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "B\tSC UE procedures for PS to CS access transfer with MSC server assisted mid-call feature for speech and video session",
                            "text_content": "When PS to CS access transfer occurs, with a speech and video session and another speech session using PS media in the SC UE, the SC UE applies the MSC Server assisted mid-call feature according to the procedures described in subclause  with the following additions:\n-\tif the SC UE supports SCUDIF feature, and the speech and video session is active and speech session is inactive the SC UE shall transfer the active speech and video session as specified in subclause 9.2.1, and indicate the support of SCUDIF in the CC SETUP message as specified in 3GPP TS 24.008 [8], with multimedia bearer capability preferred for the current active session; and\n-\tif the SC UE supports SCUDIF feature, and the speech and video session is inactive and speech session is active, the SC UE shall transfer the speech session as specified in subclause 9.2.1, and indicate the support of SCUDIF in the CC SETUP message as specified in 3GPP TS 24.008 [8], with speech bearer capability preferred for the current active session.\nNOTE:\tAfter successful transfer of the speech and video session and another speech session from PS to CS, the UE can switch between the two sessions by holding/releasing the active session and resuming the inactive session as specified in 3GPP TS 24.008 [8], with the addition that the UE can initiate the in-call modification or Redial procedures as specified in 3GPP TS 24.008 [8] to change the shared CS bearer of the two sessions from speech to multimedia, or vice versa.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "9.2.2\tSC UE procedures for CS to PS access transfer",
                            "text_content": "The SC UE needs to distinguish the following SIP requests:\n1)\tSIP REFER request:\n1.\twith the Refer-Sub header field containing \"false\" value;\n2.\twith the Supported header field containing \"norefersub\" value;\n3.\twith the Target-Dialog URI header field in the URI of the Refer-To header field;\n4.\twhere the g.3gpp.mid-call feature-capability indicator or the g.3gpp.cs2ps-drvcc-alerting feature-capability indicator as described in annex C was included in the Feature-Caps header field of the SIP 2xx response to the SIP INVITE request due to static STI; and\n5.\tcontaining application/vnd.3gpp.mid-call+xml MIME body or the application/vnd.3gpp.state-and-event-info+xml MIME type specified in annex D.\nIn the procedures below, such requests are known as \"SIP REFER requests for transfer of an additional session\".\n2)\tSIP INFO request:\nA)\twith the Info-Package header field containing the g.3gpp.state-and-event; and\nB)\tcontaining an application/vnd.3gpp.state-and-event-info+xml XML body associated with the info package according to IETF RFC 6086 [54] and compliant to the XML schema specified in the clause D.2 with the state-info XML element containing \"early\" and direction XML element containing \"receiver\".\nIn the procedures below, such requests are known as \"SIP INFO requests for transfer of incoming early session\".\nThe SC UE may be engaged in one or more ongoing sessions before performing access transfer. By an ongoing session, it is meant a CS call for which the CS call setup procedure is complete, e.g. a CC CONNECT message has been sent or received as described in 3GPP TS 24.008 [8] or a call for which the SIP 2xx response for the initial SIP INVITE request to establish this session has been sent or received.\nAdditional, the SC UE may be involved in one CS session in an early phase before performing access transfer. If not already registered in the IM CN subsystem, the SC UE shall follow the procedures specified in subclause 6.2 to perform registration over the Target Access Leg before performing CS to PS access transfer.\nIf SC using ICS is enabled then if the original sessions are established using ICS capabilities as defined in 3GPP TS 24.292 [4], then for each session with speech media component to be transferred and starting with the one with active speech media component, the SC UE shall send a SIP INVITE request to the SCC AS in accordance with the UE procedures specified in 3GPP TS 24.229 [2]. The SC UE shall populate the SIP INVITE request as specified for PS-PS access transfer with full media transfer in subclause 10.2.1.\nIf the original sessions are not established using ICS capabilities and the SC UE does not support the MSC Server assisted mid-call feature as described in subclause 9.2.3, subject to the SC_non_transferrable_media node value in the Communication Continuity MO (see subclause 5.27 in 3GPP TS 24.216 [5]) the SC UE shall:\na)\tif more than one ongoing full-duplex session with speech media component exists, first initiate the release of all the ongoing sessions that are currently not active with the UE procedures specified in 3GPP TS 24.083 [43] and then transfer the remaining ongoing full-duplex session with active speech media component;\nb)\tif one ongoing full-duplex session with speech media component and one session in a CS session in an early phase exists but the conditions in the subclause 9.2.5.1 for transferring a CS session in an early phase are not fulfilled, release the CS session in an early phase with the UE procedure specified in 3GPP TS 24.008 [8] and then transfer the remaining ongoing full-duplex session with active speech media component; and\nc)\tif no ongoing full-duplex session with speech media component and one CS session in an early phase exists and the conditions in the subclause 9.2.5.1 for transferring a CS session in an early phase are fulfilled, transfer the CS session in an early phase.\nWhen transferring the session(s) not using ICS capabilities, the SC UE shall send a SIP INVITE request to the SCC AS in accordance with the UE procedures specified in 3GPP TS 24.229 [2]. The SC UE shall:\nA)\tpopulate the SIP INVITE request as follows:\n1)\tthe Request-URI set to the static STI;\n2)\tif a GRUU was received at registration, include in the Contact header field a public GRUU or temporary GRUU as specified in 3GPP TS 24.229 [2]; and\n3)\tthe signalling elements described in subclause 6A.2.2.2; and\nB)\tif the conditions in the subclause 9.2.5.1 for transferring a CS session in an early phase are fulfilled, additionally apply the procedures defined in subclause 9.2.5.2.\nIf the SC UE receives any SIP 4xx – 6xx response to the SIP INVITE request, then session transfer has not occurred and the call will continue in the CS domain.\nWhen the SC UE receives a CS call release message, e.g. CC DISCONNECT message as specified in 3GPP TS 24.008 [8], from the network, the SC UE shall comply with network initiated call release procedures to release the CS bearer.\nAfter completion of session transfer, if the SC UE is not using Gm, the SC UE shall locally release the resources, if any, that are associated with the source access leg.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "9.2.3\tSC UE procedures for CS to PS access transfer with MSC server assisted mid-call feature",
                            "text_content": "When the SC UE supports the MSC Server assisted mid-call feature, the SC UE shall populate the SIP INVITE request for transferring a session not using ICS capabilities as follows in addition to the procedures described in subclause 9.2.2.2:\n1.\tthe Supported header field containing the option-tag \"norefersub\" specified in IETF RFC 4488 [20]; and\n2.\tthe Accept header field containing the MIME type as specified in subclause D.1.3.\nNOTE 1:\tIf the original sessions are not established using ICS capabilities as defined in 3GPP TS 24.292 [4] and the SCC AS and the SC UE support the MSC Server assisted mid-call feature, up to one active and up to one inactive CS call can be transferred.\nNOTE 2:\tUpon receiving a SIP 2xx response for the SIP INVITE request for transferring a session not using ICS capabilities, the speech media component of the session supported by the dialog is an inactive speech media component, and if the SC UE supports 3GPP TS 24.610 [28], then the SC UE considers the session as being held.\nUpon receiving a SIP REFER request within the SIP session established by the SIP INVITE request due to static STI for transferring the session not using ICS capabilities:\n1.\twith the Refer-Sub header field containing \"false\" value;\n2.\twith the Supported header field containing \"norefersub\" value;\n3.\twith the Target-Dialog URI header field in the URI of the Refer-To header field;\n4.\twhere the g.3gpp.mid-call feature-capability indicator, as specified in annex C, was included in the Feature-Caps header field of the SIP 2xx response to the SIP INVITE request due to static STI; and\n5.\tcontaining a MIME body of MIME type specified in the subclause D.1.3;\nand if the SC UE supports the MSC Server assisted mid-call feature, then the SC UE shall:\n1.\thandle the SIP REFER request as specified in 3GPP TS 24.229 [2], IETF RFC 3515 [13] as updated by IETF RFC 6665 [81], and IETF RFC 4488 [20] without establishing an implicit subscription; and\nNOTE 3:\tIn accordance with IETF RFC 4488 [20], the SC UE inserts the Refer-Sub header field containing the value \"false\" in the SIP 2xx response to the SIP REFER request to indicate that it has not created an implicit subscription.\n2.\tsend a SIP INVITE request for an additional inactive session in accordance with the procedures specified in 3GPP TS 24.229 [2] and IETF RFC 3515 [13]. The SC UE shall populate the SIP INVITE request as follows:\nA.\theader fields which were included as URI header fields in the URI in the Refer-To header field of the received SIP REFER request as specified in IETF RFC 3261 [19] except the \"body\" URI header field;\nB.\tinclude in the Contact header field a public GRUU or temporary GRUU as specified in 3GPP TS 24.229 [2] if a GRUU was received at registration;\nC.\tthe SDP offer with:\na.\tthe same amount of the media descriptions as in the \"body\" URI header field in the URI in the Refer-To header field of the received SIP REFER request;\nb.\teach \"m=\" line having the same media type as the corresponding \"m=\" line in the \"body\" URI header field in the URI in the Refer-To header field of the received SIP REFER request;\nc.\tport set to zero value in each \"m=\" line whose corresponding \"m=\" line in the \"body\" URI header field in the URI in the Refer-To header field of the received SIP REFER request has port with zero value;\nd.\tmedia directionality as in the \"body\" URI header field in the URI in the Refer-To header field of the received SIP REFER request; and\nNOTE 4:\tport can be sent to zero or non zero value for the offered \"m=\" line whose corresponding \"m=\" line in the \"body\" URI header field in the URI in the Refer-To header field of the received SIP REFER request has port with nonzero value.\ne)\tall or a subset of payload type numbers and their mapping to codecs and media parameters not conflicting with those in the \"body\" URI header field in the URI in the Refer-To header field of the received SIP REFER request; and\nD.\tthe signalling elements described in subclause 6A.2.2.2.\nUpon receiving a SIP 2xx response for the SIP INVITE request due to additional session transfer, then the SC UE shall proceed as specified in subclause 7.2.2.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "9.2.4\tSC UE procedures for selecting a session in an early dialog phase to be transferred using PS to CS dual radio access transfer procedure",
                            "text_content": "When transferring a session not using ICS capabilities and when the SC UE supports PS to CS dual radio access transfer for calls in an early phase, the SC UE shall select one session to be transferred.\nNOTE 1:\tThere can be several sessions fulfilling the conditions below and it is an UE implementation issue which one to select.\nAny session that fulfils one of the following conditions can be selected to be transferred:\n1)\tif there are one or more dialogs supporting a session with active speech media component such that:\na.\tall dialogs are early dialogs created by the same SIP INVITE request;\nb.\ta SIP 180 (Ringing) response to SIP INVITE request was received in at least one of those early dialogs;\nc.\ta g.3gpp.drvcc-alerting feature-capability indicator as described in annex  C was included in a Feature-Caps header field provided by the SCC AS in the SIP 18x responses; and\nd.\tthe Contact header field  in the SIP INVITE request sent by the SC UE towards the SCC AS included the g.3gpp.drvcc-alerting media feature tag as described in annex C;\n2)\tif there is one dialog supporting a session with active speech media component such that:\na.\tthe dialog is created by a SIP INVITE request;\nb.\ta SIP 180 (Ringing) response to the SIP INVITE request was sent by the SC UE in the early dialog;\nc.\ta g.3gpp.drvcc-alerting feature-capability indicator as described in annex C was included in a Feature-Caps header field provided by the SCC AS in the initial SIP INVITE request; and\nd.\tthe Contact header field in the SIP 180 (Ringing) response sent by the SC UE towards the SCC AS included the g.3gpp.drvcc-alerting media feature tag as described in annex C; or\n3)\tif there are zero, one or more dialogs supporting a session with speech media component and a SIP INVITE request was sent by SC UE such that:\na.\tall dialogs are early dialogs created by a SIP response to the SIP INVITE request;\nb.\ta final SIP response to the SIP INVITE request has not been received yet;\nc.\ta SIP 180 (Ringing) response to the SIP INVITE request has not been received yet in any of the existing dialogs;\nd.\tthe SC UE included in the SIP INVITE request a Contact header field containing the g.3gpp.ps2cs-drvcc-orig-pre-alerting media feature tag as described in annex C; and\ne.\ta SIP 18x response to the SIP INVITE request was received where the SIP 18x response contained a Feature-Caps header field with the g.3gpp.ps2cs-drvcc-orig-pre-alerting feature-capability indicator as described in annex C;\nNOTE 2:\tUE can have zero dialogs if all the early dialogs were terminated by the SIP 199 (Early Dialog Terminated) response as described in IETF RFC 6228 [80].\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "9.2.5\tSC UE procedures for CS to PS dual radio access transfer of calls in an early phase",
                            "text_content": "A CS call in the pre-alerting phase or in the alerting phase is subject for CS to PS dual radio access transfer when one of the following conditions is fulfilled:\n1.\tthe CS call is a CS session in an early phase such that:\na.\tthe SC UE support CS to PS access transfer of a session in the alerting phase;\nb.\tthe CS call is in the \"call delivered\" (U4) call state as defined in 3GPP TS 24.008 [8]; and\nc.\tno CS call in the \"active\" (U10) call state as defined in 3GPP TS 24.008 [8] exists;\n2.\tif the CS call is a CS session in an early phase such that:\na.\tthe SC UE support CS to PS access transfer of a session in the alerting phase; and\nb.\tthe CS call is in the \"call received\" (U7) call state as defined in 3GPP TS 24.008 [8]; and\n3.\tif the CS call is a CS session an early phase such that:\na.\tthe SC UE support CS to PS access transfer of a session in the alerting phase and in the originating pre-alerting phase;\nb.\tthe CS call is in the \"mobile originating call proceeding\" (U3) call state as defined in 3GPP TS 24.008 [8]; and\nc.\tno CS call in the \"active\" (U10) call state as defined in 3GPP TS 24.008 [8] exists.\nWhen the SC UE supports CS to PS dual radio access transfer for calls in alerting phase or CS to PS dual radio access transfer for originating calls in pre-alerting phase and the conditions for transferring a CS session in an early phase in subclause 9.2.5.1 are fulfilled, the SC UE shall, in addition to the procedures described in subclause 9.2.2, populate the SIP INVITE request for transferring the session not using ICS capabilities as follows:\n1.\tinclude:\na)\tthe g.3gpp-cs2ps-drvcc-alerting media feature tag as described in annex C in the Contact header field according to IETF RFC 3840 [34];\nb)\tif the SC UE supports CS to PS dual radio access transfer for originating calls in pre-alerting phase, the g.3gpp.cs2ps-drvcc-orig-pre-alerting media feature tag as described in annex C in the Contact header field according to IETF RFC 3840 [34]; and\nc)\tthe signalling elements described in subclause 6A.2.2.2.\nUpon receiving the SIP INFO request for transfer of an incoming CS session in an early phase inside an early dialog created with the SIP INVITE request due to static STI, the SC UE shall:\n1)\tsend SIP 200 (OK) response to the SIP INFO request;\n2)\tconsider the SIP dialog to be:\na)\tthe transferred originating pre-alerting session if the application/vnd.3gpp.state-and-event-info+xml MIME body associated with the info package according to IETF RFC 6086 [54] and compliant to the XML schema specified in the clause D.2 with the state-info XML element containing \"pre-alerting\" and the direction XML element containing \"initiator\"; and\nb)\tthe transferred incoming alerting session if the application/vnd.3gpp.state-and-event-info+xml MIME body associated with the info package according to IETF RFC 6086 [54] and compliant to the XML schema specified in the clause D.2 with the state-info XML element containing \"early\" and the direction XML element containing \"receiver\".\nUpon receiving a SIP 180 (Ringing) response to the SIP INVITE due to static STI the SC UE shall consider the SIP dialog to be the transferred originating alerting session.\nWhen the served user accepts the transferred incoming CS session in an early phase or if the user has accepted it already, the SC UE shall send a SIP INFO request accepting the session inside the early dialog created with the SIP INVITE request due to static STI according to 3GPP TS 24.229 [2] populated with:\n1)\tan Info-Package header field with 3gpp.state-and-event info package name; and\n2)\tapplication/vnd.3gpp.state-and-event-info+xml XML body associated with the info package according to IETF RFC 6086 [54] and compliant to the XML schema specified in the clause D.2 with the event XML element containing \"call-accepted\".\nWhen the served user rejects the transferred incoming CS session in an early phase, the SC UE shall send a SIP CANCEL request cancelling the SIP INVITE request due to STI according to 3GPP TS 24.229 [2 populated with a Reason header field containing protocol \"SIP\" and the \"cause\" parameter indicating the selected status code and the \"text\" parameter indicating the selected reason phrase.\nWhen the SC UE supports CS to PS dual radio access transfer for calls in alerting phase or CS to PS dual radio access transfer for originating calls in pre-alerting phase, the SC UE shall, in addition to the procedures described in subclause 9.2.2, populate the SIP INVITE request for transferring the session not using ICS capabilities as follows:\n1.\tthe Supported header field containing the option-tag \"norefersub\" specified in IETF RFC 4488 [20]; and\n2.\tthe Accept header field containing the MIME type as specified in subclause D.2.4.\nNOTE 1:\tIf the original sessions are not established using ICS capabilities as defined in 3GPP TS 24.292 [4] and the SCC AS and the SC UE support transferring of an additional CS session in an early phase, one active CS call or one inactive CS call and one CS session in an early phase can be transferred.\nUpon receiving a SIP REFER request within the SIP session established by the SIP INVITE request due to static STI for transferring the session not using ICS capabilities:\n1.\twith the Refer-Sub header field containing \"false\" value;\n2.\twith the Supported header field containing \"norefersub\" value;\n3.\twith the Target-Dialog URI header field in the URI of the Refer-To header field;\n4.\twhere the g.3gpp.cs2ps-drvcc-alerting feature-capability indicator or the g.3gpp.cs2ps-drvcc-originating-pre-alerting feature-capability indicator as described in annex C was included in the Feature-Caps header field of the SIP 2xx response to the SIP INVITE request due to static STI; and\n5.\tcontaining a MIME body of MIME type specified in the subclause D.2.4,\nthen the SC UE shall:\n1.\thandle the SIP REFER request as specified in 3GPP TS 24.229 [2], IETF RFC 3515 [13] as updated by IETF RFC 6665 [81], and IETF RFC 4488 [20] without establishing an implicit subscription; and\nNOTE 2:\tIn accordance with IETF RFC 4488 [20], the SC UE inserts the Refer-Sub header field containing the value \"false\" in the SIP 2xx response to the SIP REFER request to indicate that it has not created an implicit subscription.\n2.\tsend a SIP INVITE request for transfer of an additional session in accordance with the procedures specified in 3GPP TS 24.229 [2] and IETF RFC 3515 [13]. The SC UE shall populate the SIP INVITE request as follows:\nA.\theader fields which were included as URI header fields in the URI in the Refer-To header field of the received SIP REFER request as specified in IETF RFC 3261 [19] except the \"body\" URI header field;\nB.\tif a GRUU was received at registration, include in the Contact header field a public GRUU or temporary GRUU as specified in 3GPP TS 24.229 [2];\nC)\tthe signalling elements described in subclause 6A.2.2.2; and\nD.\tthe SDP offer with:\na.\tthe same amount of the media descriptions as in the \"body\" URI header field in the URI in the Refer-To header field of the received SIP REFER request;\nb.\teach \"m=\" line having the same media type as the corresponding \"m=\" line in the \"body\" URI header field in the URI in the Refer-To header field of the received SIP REFER request;\nc.\tport set to zero value in each \"m=\" line whose corresponding \"m=\" line in the \"body\" URI header field in the URI in the Refer-To header field of the received SIP REFER request has port with zero value; and\nd.\tmedia directionality as in the \"body\" URI header field in the URI in the Refer-To header field of the received SIP REFER request.\nNOTE 3:\tport can be set to zero or nonzero value for the offered \"m=\" line whose corresponding \"m=\" line in the \"body\" URI header field in the URI in the Refer-To header field of the received SIP REFER request has port with nonzero value.\nUpon receiving a SIP 2xx response for the SIP INVITE request for transfer of an additional session, then the SC UE shall proceed as specified in subclause 7.2.2.\n",
                            "figures_meta_data": [],
                            "tables": []
                        }
                    ]
                },
                {
                    "title": "9.3\tSCC AS",
                    "description": "",
                    "summary": "",
                    "text_content": "",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": [
                        {
                            "title": "9.3.0\tGeneral",
                            "text_content": "Void\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "Distinction of requests sent to the SCC AS",
                            "text_content": "The SCC AS needs to distinguish between the following initial SIP INVITE requests to provide specific functionality relating to access transfer:\n-\tSIP INVITE requests routed to the SCC AS containing a STI belonging to the subscribed user in the Replaces header field or Target-Dialog header field and not containing the Inter UE Transfer SCC AS URI defined in 3GPP TS 24.337 [64] in the Request-URI. In the procedures below, such requests are known as \"SIP INVITE requests due to STI\".\n-\tSIP INVITE requests routed to the SCC AS containing a static STI in the Request-URI. In the procedures below, such requests are known as \"SIP INVITE requests due to static STI\".\n-\tSIP INVITE requests routed to the SCC AS containing either a dynamic STN, a static STN or an IMRN (as described in 3GPP TS 24.292 [4]) in the Request-URI. In the procedures below, such requests are known as \"SIP INVITE requests due to PS to CS STN\".\n-\tSIP INVITE requests routed to the SCC AS containing a STI belonging to the subscribed user in Target-Dialog header field and containing additional transferred session SCC AS URI in the Request-URI. In the procedures below such requests are known as \"SIP INVITE requests transferring additional session\".\nNOTE 1:\tThe media streams that need to be transferred are identified using information described in the subsequent sections.\nNOTE 2:\tSIP INVITE requests routed to the SCC AS containing the additional transferred session SCC AS URI in the Request-URI which are used in the PS-CS access transfer with the MSC server assisted mid-call feature are handled by the PS-PS access transfer procedure as described in subclause 10.3.\nOther SIP initial requests for a dialog and requests for a SIP standalone transaction can be dealt with in any manner conformant with 3GPP TS 24.229 [2].\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "SCC AS procedures for PS to CS access transfer",
                            "text_content": "This subclause does not apply to reception of a SIP INVITE request due to STI with CS media and other kind of media or without CS media.\nWhen the SCC AS receives a SIP INVITE request due to STI with CS media only on the Target Access Leg, the SCC AS shall follow the procedures specified in subclause 10.3.2 with the following exceptions:\n-\tAs the SIP INVITE request includes an active speech media component using CS bearer, then the SCC AS shall follow the procedures for SCC AS for service control over Gm in 3GPP TS 24.292 [4] to send the PSI DN to the SC UE and wait for the SC UE to set up CS bearer before sending a SIP re-INVITE request to the remote end.\n-\tThe SCC AS shall correlate the STI with the allocated PSI DN in order to identify the remote leg to be updated.\nWhen the SCC AS receives SIP INVITE request due to PS to CS STN, the SCC AS shall:\n1)\tassociate the SIP INVITE request with an ongoing dialog supporting a session based on information associated with the received IMRN (as described in 3GPP TS 24.292 [4]) or based on information from the SIP History-Info header field or P-Asserted-Identity header field or Contact header field; or\nNOTE 1:\tBy an ongoing dialog supporting a session, it is meant a dialog for which a SIP 2xx response to the initial SIP INVITE request has been sent or received.\n2)\tassociate the SIP INVITE request with an dialog in an early phase supporting a session based on information associated with the received IMRN (as described in 3GPP TS 24.292 [4]) or based on information from the SIP History-Info header field or P-Asserted-Identity header field or Contact header field.\nNOTE 2:\tBy a dialog in an early phase supporting a session is meant a dialog for which SIP 18x responses has been sent or received but no SIP 2xx response has yet been sent or received.\nNOTE 3:\tMultiple dialogs supporting a session associated with the same SC UE can have been anchored when the SCC AS receives a SIP INVITE request due to PS to CS STN. This can occur in the event that the UE does not succeed in releasing all dialogs supporting a session with inactive speech media component or if the UE applies the MSC Server assisted mid-call feature or if the SC UE applies the PS to CS dual radio access transfer of sessions in the pre-alerting or in the alerting phase.\nThe identification of the associated dialog is subject to the following conditions:\n1.\tif only one ongoing dialog supporting a session with active speech media component exists for the user identified in the P-Asserted-Identity header field and a SIP 2xx response has been sent, then continue the session transfer with the ongoing dialog supporting a session with active speech media component;\n2.\tif no ongoing dialogs supporting a session with active speech media component exist for the user identified in the P-Asserted-Identity header field and a SIP 2xx response has been sent and the SCC AS does not apply the MSC Server assisted mid-call feature as specified in subclause 9.3.2A, then send a SIP 480 (Temporarily Unavailable) response to reject the SIP INVITE request relating to the session transfer;\n3.\tif more than one ongoing dialog supporting a session with active speech media component exists for the user identified in the P-Asserted-Identity header field for which SIP 2xx responses have been sent, then the SCC AS shall perform session transfer procedures for the ongoing dialog that originates from the same device that initiated the received SIP INVITE request due to PS to CS STN. If more than one such dialogs exists from the same device, the SCC AS shall proceed with the next step in this list;\nNOTE 4:\tWhether the dialog originates from the same UE as the received SIP INVITE request due to PS to CS STN is determined based on local information and information related to the correlation MSISDN or the GRUU of the originating user as determined via registration procedures as defined in subclause 6.3.\n4.\tif more than one ongoing dialog supporting a session exists for the user identified in the P-Asserted-Identity header field and exactly one dialog supporting a session with active speech media component exists and a SIP 2xx response has been sent for that dialog, then:\n-\tif the SCC AS does not apply the MSC Server assisted mid-call feature as specified in subclause 9.3.2A, then the SCC AS may release the ongoing dialogs supporting a session with inactive speech media component and continue the session transfer procedures with the ongoing dialog supporting a session with active speech media component; or\n-\tif the SCC AS is not able to identify one dialog for session transfer, then the SCC AS shall send a SIP 480 (Temporarily Unavailable) response to reject the SIP INVITE request relating to the session transfer;\n5.\tif more than one ongoing dialog supporting a session with active speech media component exist for the user identified in the P-Asserted-Identity header field and a SIP 2xx response has been sent for that dialog, then:\n-\tif the SCC AS does not apply the MSC Server assisted mid-call feature as specified in subclause 9.3.2A, the SCC AS may release all dialogs supporting a session with speech media component of the user identified in the P-Asserted-Identity header field for which a SIP 2xx response has been sent except the one with the active speech media component that was most recently made active and continue the session transfer procedures; or\n-\tif the SCC AS is not able to identify one dialog for session transfer, then the SCC AS shall send a SIP 480 (Temporarily Unavailable) response to reject the SIP INVITE request relating to the session transfer;\n6.\tif one ongoing dialog supporting a session with active speech media component where a SIP 2xx response has been sent for that dialog and if zero, one or more early dialogs created by the same SIP INVITE request exist for the user identified in the P-Asserted-Identity header field, then:\n-\tif the SCC AS does not apply the MSC Server assisted mid-call feature as specified in subclause 9.3.2A, continue the session transfer procedures with the ongoing dialog supporting a session with active speech media component as described in step A); or\n7.\tif no ongoing dialogs supporting a session with active speech media component where a SIP 2xx response has been sent towards the SC UE and zero, one or more early dialogs created by the same SIP INVITE request exist for the user identified in the P-Asserted-Identity header field, then:\n-\tif the conditions for applying the SCC AS procedures for PS to CS dual radio access transfer of calls in an early dialog phase as specified in subclause 9.3.5.1 are fulfilled, the SCC AS shall continue the session transfer procedure with the early session fulfilling the conditions in subclause 9.3.5.1; or\n-\tif the conditions for applying the SCC AS procedures for PS to CS dual radio access transfer of calls in an early dialog phase as specified in subclause 9.3.5.1 are not fulfilled, the SCC AS shall send a SIP 480 (Temporarily Unavailable) response to reject the SIP INVITE request relating to the session transfer.\nNOTE 5:\tThe SC UE can have zero dialogs if all the early dialogs were terminated by the 199 (Early Dialog Terminated) response as described in IETF RFC 6228 [80].\nIf the session transfer procedure continues, the SCC AS shall:\nA)\tif a dialog in an early phase exists and if the conditions for applying the SCC AS procedures for PS to CS dual radio access transfer for calls in an early phase as specified in subclause 9.3.5.1 are not fulfilled, the SCC AS shall release the dialog in the early phase in accordance with 3GPP TS 24.229 [2];\nB)\tsend a SIP re-INVITE request and populate the SIP re-INVITE request as follows:\n1)\tif the dialog to transfer is an ongoing dialog supporting a session with a speech media component:\na.\tset the Request-URI to the URI contained in the Contact header field returned at the creation of the dialog with the remote UE;\nb.\tset the contact header field to the contact header field provided by the served UE at the creation of the dialog with the remote UE; and\nc.\tif the remote leg is not a precondition enabled dialog, a new SDP offer, including the media characteristics as received in the SIP INVITE request due to PS to CS STN but excluding any precondition mechanism specific SDP attributes, by following the rules of 3GPP TS 24.229 [2];\nd.\tfollowing the rules of 3GPP TS 24.229 [2], include a new SDP offer, including:\n-\tthe media characteristics as received in the SIP INVITE request due to PS to CS STN (including any precondition mechanism specific SDP attributes); and\n-\tif the SIP INVITE request due to PS to CS STN is not a precondition enabled initial SIP INVITE request, indicate preconditions as met, using the segmented status type, as defined in IETF RFC 3312 [88] and IETF RFC 4032 [89], as well as the strength-tag value \"mandatory\" for the local segment and the strength-tag value either \"optional\" or as specified in RFC 3312 [88] and RFC 4032 [89] for the remote segment; and\n2)\tif the dialog to transfer is an early dialog fulfilling the conditions in subclause 9.3.5.1 and if the SCC AS does not apply the MSC server assisted mid-call feature as specified in subclause 9.3.2A:\na.\tif the dialog is in the originating alerting phase, perform the actions in the subclause 9.3.5.2 and do not continue with the procedures in this subclause; and\nb.\tif the dialog is in the originating pre-alerting phase, perform the actions in the subclause 9.3.5.3 and do not continue with the procedures in this subclause; and\nUpon receiving a SIP reliable provisional response to the SIP re-INVITE request and the reliable provisional SIP response contains an SDP answer, the SCC AS shall:\nA.\tif the SIP INVITE request due to PS to CS STN is a precondition enabled initial SIP INVITE request, forward the SIP response on the target access leg following the rules of 3GPP TS 24.229 [2];\nB.\tif the SIP INVITE request due to PS to CS STN is not a precondition enabled initial SIP INVITE request, forward the SIP 183 (Session Progress) response on the target access leg following the rules of 3GPP TS 24.229 [2] but remove from the SDP answer precondition mechanism specific SDP attributes;\nC.\tif the SCC AS supports the PS to CS dual radio access transfer of calls in alerting phase, include the g.3gpp.drvcc-alerting feature-capability indicator as described in annex C in the Feature-Caps header field according to IETF RFC 6809 [60]; and\nD.\tinclude the signalling elements described in subclause 6A.4.3A.\nUpon receiving a PRACK to the SIP provisional response to the SIP INVITE request due to PS to CS STN, forward the SIP PRACK request towards the remote UE following the rules of 3GPP TS 24.229 [2].\nUpon receiving a SIP 200 (OK) SIP response to the SIP PRACK request from the remote UE the SCC AS shall, forward the SIP response on the target access leg following the rules of 3GPP TS 24.229 [2].\nUpon receiveing a SIP UPDATE request on the target access leg, the SCC AS shall forward the request towards the remote UE following the rules of 3GPP TS 24.229 [2].\nUpon receipt of a SIP 200 (OK) response to the SIP UPDATE request, the SCC AS shall forward the SIP response on the target access leg following the rules of 3GPP TS 24.229 [2].\nUpon receiving the SIP 2xx response to the SIP re-INVITE request the SCC AS shall:\n1.\tif a SIP 200 (OK) response to the SIP INVITE due to PS to CS STN has not been sent yet,\nA.\tsend the SIP 200 (OK) response to the SIP INVITE request due to PS to CS STN on the target access leg. If the SIP 2xx response to the SIP re-INVITE request includes an SDP answer:\na.\tif the SIP INVITE request due to PS to CS STN is a precondition enabled initial SIP INVITE request, use relevant media parameter of the SDP answer in the received SIP response, by following the rules of 3GPP TS 24.229 [2]; and\nb.\tif the SIP INVITE request due to PS to CS STN is not a precondition enabled initial SIP INVITE request, remove from the SDP answer precondition mechanism specific SDP attributes;\nB.\tif the SCC AS supports the PS to CS dual radio access transfer of calls in alerting phase, include the g.3gpp.drvcc-alerting feature-capability indicator as described in annex C in the Feature-Caps header field according to IETF RFC 6809 [60];\nC.\tinclude the signalling elements described in subclause 6A.4.3A;\nUpon reception of the SIP ACK request to the the SIP 200 (OK) response to the SIP INVITE request due to PS to CS STN, the SCC AS shall send the SIP ACK request to the SIP 2xx response to the SIP re-INVITE request;\n2.\tif the SIP 200 (OK) response to the SIP INVITE request due to PS to CS STN was already sent, the SCC AS shall send the SIP ACK request to the SIP 2xx response to the SIP re-INVITE request;\n3.\tremove non-transferred audio media components and release the source access leg for the session supporting an active speech media component as specified in subclause 9.3.6; and\n4.\tif the SCC AS supports dual radio access transfer for calls in an early phase and if the conditions specified in subclause 9.3.5.1 are fulfilled for transfer of a session in the pre-alerting phase or in the originating alerting phase, the SCC AS shall follow the procedures in the subclause 9.3.5.4 and do not continue with the procedures in this subclause.\nIf the SCC AS supports dual radio access transfer for calls in the alerting phase and if the conditions specified in subclause 9.3.5.1 are fulfilled for a dialog in the terminating alerting phase, the SCC AS shall follow the procedures in the subclause 9.3.5.5.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "9.3.2A\t procedures for PS to CS access transfer with MSC server assisted mid-call feature",
                            "text_content": "The SCC AS supporting PS to CS access transfer with MSC server assisted mid-call feature shall:\nI)\tif:\n1.\tthe Contact header field of the SIP INVITE request due to PS to CS STN includes the g.3gpp.mid-call media feature tag as specified in annex C; and\n2.\tone of the following is true:\nA.\tat least one confirmed dialog supporting a session with active speech media component exists for the user identified in the P-Asserted-Identity header field and the following is true for the confirmed dialog supporting a session with active speech media component which has been most recently made active:\n-\tthe Contact header field provided by the SC UE at the establishment of the dialog supporting a session with active speech media component which has been most recently made active included the g.3gpp.mid-call media feature tag as described in annex C; and\n-\tthe Feature-Caps  header field sent by SCC AS towards the SC UE at the establishment of the dialog included the g.3gpp.mid-call feature-capability indicator as described in annex C; or\nB.\tno confirmed dialog supporting a session with active speech media component exists for the user identified in the P-Asserted-Identity header field, one or more confirmed dialogs supporting a session with inactive speech media component exists for the user and the following is true for the confirmed dialog supporting a session with inactive speech media component which has been most recently made inactive:\n-\tthe Contact header field provided by the SC UE at the establishment of the dialog included the g.3gpp.mid-call media feature tag as described in annex C; and\n-\tthe Feature-Caps header field sent by SCC AS towards the SC UE at the establishment of the dialog included the g.3gpp.mid-call feature-capability indicator as described in annex C;\napply the MSC Server assisted mid-call feature; and\nII)\tif:\n1.\tthe Contact header field of the SIP INVITE request due to PS to CS STN does not include the g.3gpp.mid-call media feature tag as specified in annex C; and\n2.\tif a confirmed dialog supporting a session with inactive speech media component exists for the user identified in the P-Asserted-Identity header field and the following is true for the confirmed dialog supporting a session with inactive speech media component:\nA.\tthe Contact header field provided by the SC UE at the establishment of the dialog included the g.3gpp.mid-call media feature tag as described in annex C; and\nB.\tthe Feature-Caps header field sent by SCC AS towards the SC UE at the establishment of the dialog included the g.3gpp.mid-call feature-capability indicator as described in annex C,\nnot apply the MSC Server assisted mid-call feature and send a SIP BYE request to the SC UE on the source access leg and towards the remote UE in accordance with 3GPP TS 24.229 [2]; and continue the procedure in subclause 9.3.2 to identify an associated dialog for the SIP INVITE request due to PS to CS STN.\nWhen the SCC AS applies the MSC Server assisted mid-call feature, in addition to the procedures described in subclause 9.3.2, and before determining that the SCC AS is not able to identify one dialog for session transfer, the SCC AS may:\n1.\tif more than one confirmed dialog supporting a session exists for the user identified in the P-Asserted-Identity header field, and exactly one confirmed dialog supporting a session with active speech media component exists and there is at least one remaining confirmed dialog supporting a session with inactive speech media component, then:\n-\trelease all dialogs supporting a session with active speech media component for which SIP 2xx responses have not been sent for these dialogs; and\n-\trelease all confirmed dialogs supporting a session with inactive speech media component except the one with the speech media component which became inactive most recently and continue the session transfer procedures with the confirmed dialog supporting a session with active speech media component;\n2.\tif more than one confirmed dialog supporting a session with active speech media component exists for the user identified in the P-Asserted-Identity header field, release all confirmed dialogs supporting a session with speech media component except two with the speech media component which became active most recently and continue the session transfer procedures with the confirmed dialog supporting a session with the speech media component which became active most recently;\n3.\tif no confirmed dialog supporting a session with active speech media component exists for the user identified in the P-Asserted-Identity header field, one or more confirmed dialogs supporting a session with inactive speech media component exists for the user then the SCC AS may release all confirmed dialogs supporting a session with speech media component except the one with the speech media component which became inactive most recently and continue the session transfer procedures with the confirmed dialog supporting a session with inactive speech media component; and\n4\tif one confirmed dialog supporting a session with active or inactive speech media component exists and one or more early dialogs created by the same SIP INVITE request continue with the session with active or inactive speech media component.\nWhen the SCC AS applies the MSC Server assisted mid-call feature, in addition to the procedures described in subclause 9.3.2, the SCC AS shall include the g.3gpp.mid-call feature-capability indicator, as described in annex C, in the Feature-Caps header field of the SIP 2xx response to the SIP INVITE request due to PS to CS STN according to IETF RFC 6809 [60].\nWhen the SCC AS applies the MSC Server assisted mid-call feature and a confirmed dialog supporting a session with inactive speech media component was associated with the SIP INVITE request due to PS to CS STN, in addition to the procedures described in subclause 9.3.2, the SCC AS shall set the directionality of the audio media in the SDP offer as used in the session with remote UE.\nIf:\n-\tthe SCC AS applies the MSC Server assisted mid-call feature;\n-\tthe session associated with the SIP INVITE request due to PS to CS STN is related to a subscription as described in subclause 7.3.3; and\n-\ta SIP 2xx response was received to the last SIP NOTIFY request with conference information sent to the UE within the related subscription;\nthen the SCC AS shall send a SIP INFO request towards the MSC Server as specified in 3GPP TS 24.229 [2] and IETF RFC 6086 [54] in the dialog created by the SIP INVITE request due to PS to CS STN. The SCC AS shall populate the SIP INFO request as follows:\n1.\tinclude the Info-Package header field as specified in IETF RFC 6086 [54] with g.3gpp.mid-call package name; and\n2.\tinclude application/vnd.3gpp.mid-call+xml XML body associated with the info package according to IETF RFC 6086 [54] and containing the participants extracted as specified in the subclause 9.1A of the subscription related to the session associated with the SIP INVITE request due to PS to CS STN as described in subclause 7.3.3.\nIf the SCC AS applies the MSC Server assisted mid-call feature,\n1.\ttwo confirmed dialogs supporting a session with  speech media component exist for the user identified in the P-Asserted-Identity header field;\n2.\tone confirmed dialog supporting a session with  speech media component and one early dialog exist for the user identified in the P-Asserted-Identity header field fulfilling the conditions in subclause 9.3.5.1 for transfer of a session in the originating alerting phase and if the SCC AS included the g.3gpp.drvcc-alerting feature-capability indicator as described in annex C in a Feature-Caps header field in a SIP 180 (Ringing) response; and\n3.\tone confirmed dialog supporting a session with speech media component and one early dialog exist for the user identified in the P-Asserted-Identity header field fulfilling the conditions in subclause 9.3.5.1 for transfer of a session in the originating pre-alerting phase and if the SCC AS included the g.3gpp.ps2cs-drvcc-orig-pre-alerting feature-capability indicator as described in annex C in a Feature-Caps header field in a SIP 18x responses,\nthen the SCC AS shall send a SIP REFER request towards the MSC Server in accordance with the procedures specified in 3GPP TS 24.229 [2], IETF RFC 4488 [20] and IETF RFC 3515 [13] as updated by IETF RFC 6665 [81] and IETF RFC 7647 [90] in the dialog created by the SIP INVITE request due to PS to CS STN.\nThe SCC AS shall populate the SIP REFER request as follows:\n1.\tthe Refer-Sub header field with value \"false\" as specified in IETF RFC 4488 [20];\n2.\tthe Supported header field with value \"norefersub\" as specified in IETF RFC 4488 [20];\n3.\tthe Refer-To header field containing the information related to the additional transferred session, i.e. session with speech media component other than the session associated with the SIP INVITE request due to PS to CS STN, i.e. set to the additional transferred session SCC AS URI and the following URI header fields:\nA.\tthe Target-Dialog URI header field populated as specified in IETF RFC 4538 [11], containing the dialog identifier of the session with the SC UE;\nB.\tthe Require URI header field populated with the option tag value \"tdialog\";\nC.\tthe To URI header field populated as specified in IETF RFC 3261 [19], containing the P-Asserted-Identity provided by the remote UE during the session establishment;\nD.\tthe From URI header field populated as specified in IETF RFC 3261 [19], containing the public user identity of the SC UE provided during the session establishment;\nE.\tthe Content-Type header field with \"application/sdp\";\nF.\tthe hname \"body\" URI header field populated with SDP describing the media streams as negotiated in the session with the remote UE and:\na.\tif directionality used by SC UE is \"sendrecv\" or \"sendonly\", with the \"sendonly\" directionality; and\nb.\tif directionality used by SC UE is \"recvonly\" or \"inactive\", with the \"inactive\" directionality; and\nG.\toptionally the P-Asserted-Identity URI header field containing value of the P-Asserted-Identity header field of the received SIP INVITE request;\n4.\tthe Content-Type header field with the value set to MIME type as specified in the subclause D.1.3; and\n5.\ta XML body compliant to the XML schema specified in the subclause D.1.2. If\nA.\tthe session associated with the SIP INVITE request due to PS to CS STN is not related to any subscription as described in subclause 7.3.3;\nB.\tthe additional transferred session is related to a subscription as described in subclause 7.3.3; and\nC.\ta SIP 2xx response was received to the last SIP NOTIFY request with conference information sent to the UE within the related subscription;\nthen SCC AS shall populate the XML body with the participants extracted as specified in the subclause 9.1A of the subscription related to the additional transferred session as specified in subclause 7.3.3.\nWhen the SCC AS receives a SIP INVITE request transferring additional session for dual radio, the SCC AS shall:\n-\tassociate the SIP INVITE request transferring additional session with a previously established SIP dialog i.e. identify the Source Access Leg. The SIP dialog on the Source Access Leg is identified by matching the dialog ID present in the Target-Dialog header field (see IETF RFC 4538 [11]) of the SIP INVITE request transferring additional session with the previously established SIP dialog. By a previously established SIP dialog, it is meant a dialog for which SIP 18x responses or a SIP 2xx response to the initial SIP INVITE request has been sent or received;\n-\tif the SCC AS is unable to associate the SIP INVITE with a unique previously established SIP dialog, send a SIP 480 (Temporarily Unavailable) response to reject the SIP INVITE request relating to the access transfer and not processes the remaining steps;\n-\tif the number of media lines in the Target Access Leg is less than the number of media lines in the Source Access Leg or the media type for the corresponding media lines is not the same as in the original session, send a SIP 4xx response to reject the SIP INVITE request relating to the access transfer and not process the remaining steps;\n-\tif the additional session is a confirmed session, send a SIP re-INVITE request towards the remote UE using the existing established dialog. The SCC AS shall populate the SIP re-INVITE request , following the rules specified in 3GPP TS 24.229 [2] as follows:\nA)\tinclude a new SDP offer with:\na)\tif the remote leg is not a precondition enabled dialog, the media characteristics as received in the SIP INVITE request transferring additional session but excluding any precondition mechanism specific SDP attributes for media streams whose port is not set to zero;\nb)\tfor the media streams in the SIP INVITE request transferring additional session whose port is set to zero, include the corresponding media characteristics of those streams from the Source Access Leg; and\nc)\tif the remote leg is a precondition enabled dialog, include a new SDP offer, including:\n-\tthe media characteristics as received in the SIP INVITE request transferring additional session for PS to CS for dual radio (including any precondition mechanism specific SDP attributes);\n-\tif the SIP INVITE request due to PS to CS STN is not a precondition enabled initial SIP INVITE request, indicate preconditions as met, using the segmented status type, as defined in IETF RFC 3312 [88] and IETF RFC 4032 [89], as well as the strength-tag value \"mandatory\" for the local segment and the strength-tag value either \"optional\" or as specified in RFC 3312 [88] and RFC 4032 [89] for the remote segment;\nNOTE:\tIf the MSC server is using the precondition mechanism, the local preconditions will always be indicated as met according to subclause 9.5.\n-\tif the additional session is a originating session in pre-alerting phase, perform the actions in the subclause 9.3.5.4; and\n-\tif the additional session is a originating session in the alerting phase perform the actions in the subclause 9.3.5.4.\nUpon receiving the SIP 2xx response to the SIP re-INVITE request triggered by the SIP INVITE request transferring additional session for dual radio the SCC AS shall:\n1.\tsend the SIP 200 (OK) response to the SIP INVITE request transferring additional session for dual radio on the target access leg.\na.\tif the SIP INVITE request transferring additional session for dual radio is a precondition enabled initial SIP INVITE request, use relevant media parameter of the SDP answer in the received SIP response, by following the rules of 3GPP TS 24.229 [2]; and\nb.\tif the SIP INVITE request transferring additional session for dual radio is not a precondition enabled initial SIP INVITE request, remove from the SDP answer precondition mechanism specific SDP attributes;\n2.\tif the SCC AS supports the PS to CS dual radio access transfer of calls in alerting phase, include the g.3gpp.drvcc-alerting feature-capability indicator as described in annex C in the Feature-Caps header field according to IETF RFC 6809 [60];\n3.\tinclude the signalling elements described in subclause 6A.4.3A.\nIf the SCC AS supports dual radio access transfer for calls in the alerting phase and if the conditions specified in subclause 9.3.5.1 are fulfilled for a dialog in the terminating alerting phase, the SCC AS shall follow the procedures in the subclause 9.3.5.5.\nThe SCC AS shall remove non-transferred audio media components and release source access legs as specified in subclause 9.3.6.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "procedures for CS to PS access transfer",
                            "text_content": "When the SCC AS receives a SIP INVITE request due to STI on the Target Access Leg offering PS media only, the SCC AS shall follow the procedures specified in subclause 10.3.2.\nWhen the SCC AS receives a SIP INVITE request due to static STI, the SCC AS shall:\n1)\tassociate the SIP INVITE request with an ongoing dialog supporting a session; or\nNOTE 1:\tBy an ongoing dialog supporting a session, it is meant a dialog for which a SIP 2xx response to the initial SIP INVITE request has been sent or received.\n2)\tif the SCC AS supports CS to PS dual radio access transfer for calls in alerting phase or CS to PS dual radio access transfer for originating calls in pre-alerting phase, associate the SIP INVITE request with a dialog in an early phase.\nNOTE 2:\tBy a dialog in an early phase, it is meant a dialog for which a SIP 2xx response to the initial SIP INVITE request has not been sent or received.\nMultiple dialogs supporting a session associated with the same SC UE may have been anchored when the SCC AS receives a SIP INVITE request due to static STI.\nNOTE 3:\tThis multiple dialogs supporting a session associated with the same SC UE can occur in the event that the UE does not succeed in releasing all dialogs supporting a session with inactive speech media component or if the UE supports the MSC Server assisted mid-call feature or if the SC UE supports the CS to PS dual radio access transfer for calls in alerting phase or CS to PS dual radio access transfer for originating calls in pre-alerting phase, in which case.\nThe identification of the associated dialog is subject to the following conditions:\n1.\tif only one ongoing dialog supporting a session with active speech media component exists for the user identified in the P-Asserted-Identity header field and a SIP 2xx response has been sent, then continue the session transfer procedures with the ongoing dialog supporting a session with active speech media component;\n2.\tif no ongoing dialogs supporting a session with active speech media component exists for the user identified in the P-Asserted-Identity header field and a SIP 2xx response has been sent and the SCC AS does not apply the MSC Server assisted mid-call feature as specified in subclause 9.3.4 and the condition for transferring dialog(s) in an early dialog phase in subclause 9.3.7.1 are not fulfilled, then send a SIP 480 (Temporarily Unavailable) response to reject the SIP INVITE request relating to the session transfer;\n3.\tif more than one ongoing dialog supporting a session exists for the user identified in the P-Asserted-Identity header field and exactly one ongoing dialog supporting a session with active speech media component and a SIP 2xx response has been sent for that dialog, then:\nA.\tif the remaining dialogs support a session with inactive speech media component and the SCC AS does not apply the MSC Server assisted mid-call feature as specified in subclause 9.3.4, then the SCC AS may release the dialogs supporting a session with inactive speech media component and continue the session transfer procedures with the dialog supporting a session with active speech media component;\n4.\tif one ongoing dialog with active speech media component and one or more dialogs in an early dialog phase exists and the condition for transferring dialog(s) in an early dialog phase in subclause 9.3.7.1 are fulfilled, continue the session transfer with the ongoing dialog with active speech media component;\n5.\tif one ongoing dialog with active speech media component and one or more dialogs in an early dialog phase exists but the condition for transferring dialog(s) in an early dialog phase in subclause 9.3.7.1 are not fulfilled, then the SCC AS may release the dialogs in an early dialog phase and continue the session transfer with the ongoing dialog with active speech media component;\n6.\tif no ongoing dialogs supporting a session with speech media component and one or more early dialog in an early phase exists and the condition for transferring dialog(s) in an early dialog phase in subclause 9.3.7.1 are fulfilled, proceed with the session transfer as specified in subclause 9.3.7; and\n7.\tif the SCC AS is not able to identify one dialog for session transfer, then the SCC AS shall send a SIP 480 (Temporarily Unavailable) response to reject the SIP INVITE request relating to the session transfer and do not continue with the access transfer.\nIf the session transfer procedures continues and if the dialog to be transferred is an ongoing dialog supporting a session with speech media component, the SCC AS shall send a SIP re-INVITE request towards the remote UE using the existing established dialog. The SCC AS shall populate the SIP re-INVITE request as follows:\n1)\tset the Request-URI to the URI contained in the Contact header field returned at the creation of the dialog with the remote UE; and\n2)\ta new SDP offer, including the media characteristics as received in the SIP INVITE request due to the static STI, by following the rules of 3GPP TS 24.229 [2].\nUpon receiving the SIP 2xx response to the SIP re-INVITE request the SCC AS shall send the SIP 200 (OK) response to the SIP INVITE request due to static STI on the target access leg populated as follows:\n1)\tthe relevant media parameter of the SDP answer in the received response, by following the rules of 3GPP TS 24.229 [2];\n2)\tif the SCC AS supports CS to PS dual radio access transfer for calls in alerting phase according to operator policy,\na)\tthe g.3gpp.cs2ps-drvcc-alerting feature-capability indicator as described in annex C in a Feature-Caps header field according to IETF RFC 6809 [60]; and\nb)\tif the SCC AS supports PS to CS dual radio access transfer for originating calls in pre-alerting phase the g.3gpp.cs2ps-drvcc-orig-pre-alerting feature-capability indicator as described in annex C in the Feature-Caps header field according to IETF RFC 6809 [60]; and\n3)\tthe signalling elements described in subclause 6A.4.3.\nUpon receiving the SIP ACK request originated from the SC UE, the SCC AS shall:\n1)\trelease the source access leg as specified in subclause 9.3.6.; and\n2)\tif the SCC AS supports the CS to PS dual radio access transfer for a call in an early phase and the condition for transferring dialog(s) in an early dialog phase in subclause 9.3.7.1 are fulfilled, proceed with transferring of the dialog(s) in the early phase as specified in the subclause 9.3.7.4.\nIf, subsequent to initiating the SIP re-INVITE request to the remote UE, and prior to the SIP ACK request originated from the UE being received from the IM CN subsystem for the source access leg, the SCC AS decides (for any reason) to reject the session transfer request back to the UE (e.g. by sending a SIP 4xx response), the SCC AS shall release the target access leg and maintain the source access leg.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "9.3.4\tSCC AS procedures for CS to PS access transfer with MSC server assisted mid-call feature",
                            "text_content": "The SCC AS shall apply the MSC Server assisted mid-call feature if:\n1.\tthe Contact header field of the SIP INVITE request due to static STI includes the g.3gpp.mid-call media feature tag as described in annex C; and\n2.\tthe SCC AS supports the MSC Server assisted mid-call feature according to operator policy.\nWhen the SCC AS applies the MSC Server assisted mid-call feature, in addition to the procedures described in subclause 9.3.3, and before determining that the SCC AS is not able to identify one dialog for session transfer,  may:\n1.\tif more than one dialog exists for the user identified in the P-Asserted-Identity header field, and exactly one dialog supporting an ongoing session with active speech media component exists, and a SIP 2xx response has been sent for that dialog and there is at least one remaining dialog supporting a session with inactive speech media component, release all dialogs supporting a session with inactive speech media component except the one with the speech media component which became inactive most recently and continue the session transfer procedures with the dialog supporting a session with active speech media component;\n2.\tif no dialog supporting an ongoing session with active speech media component exists for the user identified in the P-Asserted-Identity header field, one or more dialogs supporting a session with inactive speech media component exists for the user and a SIP 2xx response has been sent for these dialogs then the SCC AS may release all dialogs supporting a session with speech media component except the one with the speech media component which became inactive most recently and continue the session transfer procedures with the dialog supporting a session with inactive speech media component; and\n3.\tif more than one dialog exists for the user identified in the P-Asserted-Identity header field, and exactly one dialog supporting an ongoing session with inactive speech media component exists, and a SIP 2xx response has been sent for that dialog and the condition for transferring dialog(s) in an early dialog phase in subclause 9.3.7.1 are fulfilled continue the session transfer procedures with the dialog supporting a session with inactive speech media component;\nThe SCC AS shall include the signalling elements described in subclause 6A.4.3 in the SIP 1xx response and SIP 2xx response to the SIP INVITE request due to static STI.\nWhen the SCC AS applies the MSC Server assisted mid-call feature and a dialog supporting a session with inactive speech media component was associated with the SIP INVITE request due to static STI, in addition to the procedures described in subclause 9.3.3, the SCC AS shall set the directionality of the speech media component in the SDP offer as used in the session with remote UE.\nIf the SCC AS applies the MSC Server assisted mid-call feature, two SIP dialogs supporting a session with a speech media component exist for the user identified in the P-Asserted-Identity header field and a SIP 2xx response has been sent for those dialogs then the SCC AS shall send a SIP REFER request towards the SC UE in accordance with the procedures specified in 3GPP TS 24.229 [2], IETF RFC 4488 [20] and IETF RFC 3515 [13] as updated by IETF RFC 6665 [81] and IETF RFC 7647 [90] in the dialog created by the SIP INVITE request due to static STI. The SCC AS shall populate the SIP REFER request as follows:\n1.\tthe Refer-Sub header field with value \"false\" as specified in IETF RFC 4488 [20];\n2.\tthe Supported header field with value \"norefersub\" as specified in IETF RFC 4488 [20];\n3.\tthe Refer-To header field containing the information related to the session with an audio media other than the session associated with the SIP INVITE request due to static STI, i.e. set to the additional transferred session SCC AS URI and the following URI header fields:\nA.\tthe Target-Dialog URI header field populated as specified in IETF RFC 4538 [11], containing the dialog identifier of the session with the MSC Server;\nB.\tthe Require URI header field populated with the option tag value \"tdialog\";\nC.\tif the remote UE did not request privacy then the To URI header field populated as specified in IETF RFC 3261 [19], containing the P-Asserted-Identity provided by the remote UE during the session establishment;\nD.\tthe From URI header field populated as specified in IETF RFC 3261 [19], containing the public user identity of the SC UE provided during the session establishment;\nE.\tthe Content-Type URI header field with \"application/sdp\"; and\nF.\tthe hname \"body\" URI header field populated with SDP describing the media streams as negotiated in the session with the remote UE and with directionality as used by the MSC Server;\n4.\tthe Content-Type header field with the value set to MIME type specified in the subclause D.1.3; and\n5.\ta XML body compliant to the XML schema specified in the subclause D.1.2.\nWhen the SCC AS receives a SIP INVITE request transferring additional session for the dialog supporting the ongoing session with a speech media component, the SCC AS shall:\n-\tassociate the SIP INVITE request transferring additional session with a previously established SIP dialog i.e. identify the Source Access Leg. The SIP dialog on the Source Access Leg is identified by matching the dialog ID present in the Target-Dialog header field (see IETF RFC 4538 [11]) of the SIP INVITE request transferring additional session with the previously established SIP dialog. By a previously established SIP dialog, it is meant a dialog for which a SIP 2xx response to the initial SIP INVITE request has been sent or received;\n-\tif the SCC AS is unable to associate the SIP INVITE with a unique previously established SIP dialog, send a SIP 480 (Temporarily Unavailable) response to reject the SIP INVITE request relating to the access transfer and not processes the remaining steps;\n-\tif the number of media lines in the Target Access Leg is less than the number of media lines in the Source Access Leg or the media type for the corresponding media lines is not the same as in the original session, send a SIP 4xx response to reject the SIP INVITE request relating to the access transfer and not process the remaining steps; and\n-\tsend a SIP re-INVITE request towards the remote UE using the existing established dialog. The SCC AS shall populate the SIP re-INVITE request with a new SDP offer, following the rules specified in 3GPP TS 24.229 [2], containing the following media information:\na)\tthe media characteristics as received in the SIP INVITE request transferring additional session for media streams whose port is not set to zero; and\nb)\tfor the media streams in the SIP INVITE request transferring additional session whose port is set to zero, include the corresponding media characteristics of those streams from the Source Access Leg.\nWhen the SCC AS receives the SIP 200 (OK) response to the SIP re-INVITE request, the SCC AS shall send a SIP 200 (OK) response to the SIP INVITE request transferring additional session for the dialog supporting the ongoing session with a speech media component populated as follows:\n1)\tthe relevant media parameter of the SDP answer in the received response, by following the rules of 3GPP TS 24.229 [2]; and\n2)\tthe signalling elements described in subclause 6A.4.3.\nThe SCC AS shall release the source access leg as specified in subclause 9.3.6.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "9.3.5\tSCC AS procedures for PS to CS dual radio access transfer of calls in an early dialog phase",
                            "text_content": "An early session is subject for PS to CS dual radio access transfer when one of the following conditions is fulfilled:\n1.\tif there are one or more dialogs in an early phase such that:\na.\tall dialogs are dialogs in an early phase are created by the same SIP INVITE request;\nb.\ta SIP 180 (Ringing) response to SIP INVITE request was received from remote UEs in at least one of those early dialogs;\nc.\ta g.3gpp.drvcc-alerting feature-capability indicator as described in annex C was included in a Feature-Caps header field provided by the SCC AS in the SIP 180 (Ringing) response;\nd.\tthe Contact header field provided by the SC UE towards the SCC AS in the initial SIP INVITE request included the g.3gpp.drvcc-alerting media feature tag field as described in annex C; and\ne.\tthe SIP INVITE due to PS to CS STN contains the g.3gpp.drvcc-alerting as described in annex C;\n2.\tif there are one or more dialogs in the early phase such that:\na.\tall dialogs are dialogs in an early phase are created by the same SIP INVITE request;\nb.\ta SIP 180 (Ringing) response to SIP INVITE request was received from remote UE in at least one of those early dialogs;\nc.\ta g.3gpp.drvcc-alerting feature-capability indicator as described in annex C was included in a Feature-Caps header field provided by the SCC AS in the SIP 180 (Ringing) response;\nd.\tthe Contact header field provided by the SC UE towards the SCC AS in the initial SIP INVITE request included the g.3gpp.drvcc-alerting media feature tag field as described in annex C; and\ne.\tno ongoing dialog supporting a session with active or inactive speech media component where a SIP 2xx response has been sent towards the SC UE exists;\nNOTE 1:\tTransfer of one single dialog in the alerting phase does not require any MSC server support.\n3.\tif there are one or more dialogs in an early phase such that:\na.\tall dialogs are in an early phase are created by the same SIP INVITE request;\nb.\ta SIP 180 (Ringing) response to the SIP INVITE request has not been received from remote UEs yet;\nc.\tthe SCC AS included a g.3gpp.ps2cs-drvcc-orig-pre-alerting feature-capability indicator as described in annex C in a Feature-Caps header field in SIP 18x responses;\nd.\tthe Contact header field in the initial SIP INVITE request sent by the SC UE towards the SCC AS included a g.3gpp.ps2cs-drvcc-orig-pre-alerting media feature tag as described in annex C; and\ne.\tthe SIP INVITE due to PS to CS STN contains the g.3gpp.drvcc-alerting as described in annex C;\n4.\tif there are one or more dialogs in an early phase such that:\na.\tall dialogs are early phase are created by the same SIP INVITE request;\nb.\ta SIP 180 (Ringing) response to the SIP INVITE request has not been received from remote UEs yet;\nc.\tthe SCC AS included a g.3gpp.ps2cs-drvcc-orig-pre-alerting feature-capability indicator as described in annex C in a Feature-Caps header field in SIP 18x responses;\nd.\tthe Contact header field in the initial SIP INVITE request sent by the SC UE towards the SCC AS included a g.3gpp.ps2cs-drvcc-orig-pre-alerting media feature tag as described in annex C; and\ne.\tno ongoing dialog supporting a session with active or inactive speech media component where a SIP 2xx response has been sent towards the SC UE exists;\nNOTE 2:\tTransfer of one single dialog in the originating pre-alerting phase does not require any MSC server support.\n5.\tif there is one dialog in an dialog phase such that:\na.\ta SIP 180 (Ringing) response to the SIP INVITE request has been received from the SC UE;\nb.\tthe SCC AS included a g.3gpp.drvcc-alerting feature-capability indicator as described in annex C in a Feature-Caps header field in the SIP INVITE request; and\nc.\tthe Contact header field in the SIP 180 (Ringing) response sent by the SC UE towards the SCC AS  included a g.3gpp.drvcc-alerting media feature tag as described in annex C.\nNOTE 3:\tTransfer of a dialog in the alerting phase on the terminating side does not require any MSC server support.\nWhen the SCC AS receives a SIP INVITE request due to PS to CS STN and if there are one or more dialogs in an early dialog phase supporting a session with active speech media component such that:\n1)\tall dialogs are early dialogs created by the same SIP INVITE request;\n2)\ta SIP 180 (Ringing) response to SIP INVITE request was received in at least one of those early dialogs;\n3)\ta g.3gpp.drvcc-alerting feature-capability indicator as described in annex C was included in a Feature-Caps header field by the SCC AS in the SIP 180 (Ringing) response; and\n4)\tthe Contact header field in the initial SIP INVITE request sent by the SC UE towards the SCC AS included the g.3gpp.drvcc-alerting media feature tag as described in annex C,\nthen the SCC AS shall for each early dialog send an SIP UPDATE request towards the remote UE and populate each  SIP UPDATE request as follows:\n1)\tset the Request-URI set to the URI contained in the Contact header field returned at the creation of the dialog with the remote UE;\n2)\tthe Contact header field set to the Contact header field provided by the served UE at the creation of the dialog with the remote UE; and\n3)\ta new SDP offer, including:\na)\tif the remote leg is not a precondition enabled dialog, the media characteristics as received in the SIP INVITE request due to PS to CS STN but excluding any precondition mechanism specific SDP attributes, by following the rules of 3GPP TS 24.229 [2];\nb)\tif the remote leg is a precondition enabled dialog, include a new SDP offer including:\n-\tthe media characteristics as received in the SIP INVITE request due to PS to CS STN (including any precondition mechanism specific SDP attributes); and\n-\tif the SIP INVITE request due to PS to CS STN is not a precondition enabled initial SIP INVITE request, indicate preconditions as met, using the segmented status type, as defined in IETF RFC 3312 [88] and IETF RFC 4032 [89], as well as the strength-tag value \"mandatory\" for the local segment and the strength-tag value either \"optional\" or as specified in RFC 3312 [88] and RFC 4032 [89] for the remote segment.\nFor each SIP 200 (OK) response to the SIP UPDATE request (triggered by the SIP INVITE request due to PS to CS STN) from a remote UE the SCC AS shall:\n1)\tif one of the following is true:\nA)\tif the remote leg is not a precondition enabled dialog;\nB)\tif the remote leg is a precondition enabled dialog, the SIP INVITE request due to PS to CS STN is a precondition enabled initial SIP INVITE request and both local and remote preconditions are met:\nsend a SIP provisional response to the SIP INVITE request due to PS to CS STN following the rules of 3GPP TS 24.229 [2] with the response code corresponding to the actual dialog state populated with:\n-\tan SDP answer based on the SDP answer received from the remote UE; and\n-\tthe last received P-Early-Media header field, including the SIP 2xx response to the SIP UPDATE request, if a P-Early-Media has been received from the remote UE.\n2)\tif the remote leg is a precondition enabled dialog but all preconditions are not met, send a SIP 183 (Session Progress) response following the rules of 3GPP TS 24.229 [2] populated with:\n-\tif SIP INVITE request due to PS to CS STN is a precondition enabled initial SIP INVITE, an SDP answer based on the SDP answer received from the remote UE; and\n-\tif SIP INVITE request due to PS to CS STN is not a precondition enabled initial SIP INVITE, an SDP answer based on the SDP answer received from the remote UE but excluding the precondition mechanism specific SDP attributes;  and\n-\tthe last received P-Early-Media header field, including the SIP 2xx response to the SIP UPDATE request, if a P-Early-Media has been received from the remote UE.\nUpon receipt of an SIP PRACK request on the target access leg send a SIP 200 (OK) response to the SIP PRACK request on the target access leg.\nUpon receipt of a provisional SIP response from the remote UE forward the SIP provisional response on the target access leg following the rules of 3GPP TS 24.229 [2]. If the SIP INVITE request due to PS to CS STN is not a precondition enabled initial SIP INVITE remove any precondition mechanism specific SDP attributes from the SDP offer. Upon receipt of the SIP PRACK request on the target access leg, forward the SIP PRACK request towards the remote UE following the rules of 3GPP TS 24.229 [2].\nUpon receipt of a SIP UPDATE request on the target access leg the SCC AS shall forward the SIP request to the remote UE following the rules of 3GPP TS 24.229 [2]. Upon receipt of a SIP 200 (OK) response to this SIP UPDATE request from the remote UE:\n1)\tforward the SIP response on the target access leg following the rules of 3GPP TS 24.229 [2]; and\n2)\tif both local and remote preconditions are met and if the remote leg is in the alerting phase, send a SIP 180 (Ringing) response following the rules of 3GPP TS 24.229 [2] with the last received P-Early-Media header field, including the SIP 2xx response to the SIP UPDATE request, if a P-Early-Media header field has been received from the remote UE.\nUpon receipt of a SIP UPDATE request from the remote UE, the SCC AS shall forward the SIP request on the target access leg following the rules of 3GPP TS 24.229 [2] but if the SIP INVITE request due to PS to CS STN is not a precondition enabled initial SIP INVITE remove from the SDP answer the precondition mechanism specific SDP attributes. Upon receipt of a SIP 200 (OK) response to this SIP UPDATE request on the target access leg, the SCC AS shall:\n1)\tforward the SIP response towards the remote UE following the rules of 3GPP TS 24.229 [2]; and\n2)\tif both local and remote preconditions are met and if the remote leg is in the alerting phase, send a SIP 180 (Ringing) response on the target access leg with the last received P-Early-Media header field, including the SIP 2xx response to the SIP UPDATE request, if a P-Early-Media header field has been received from the remote UE.\nThe SCC AS shall remove non-transferred audio media components and release the source access leg as specified in subclause 9.3.6.\nWhen the SCC AS receives a SIP INVITE request due to PS to CS STN and if there are zero, one or more dialogs in an early dialog phase supporting a session with active speech media component such that:\n1)\tall dialogs are early dialogs created by the same SIP INVITE request;\n2)\ta SIP 180 (Ringing) response to the SIP INVITE request has not been received yet in any of the existing dialogs;\n3)\tthe SCC AS included a g.3gpp.ps2cs-drvcc-orig-pre-alerting feature-capability indicator as described in annex C in a Feature-Caps header field of SIP 18x responses; and\n4)\tthe Contact header field in the initial SIP INVITE request sent by the SC UE towards the SCC AS included a g.3gpp.ps2cs-drvcc-orig-pre-alerting media feature tag as described in annex  C,\nthen the SCC AS shall for each early dialog send a SIP UPDATE request towards the remote UE.\nNOTE 1:\tThe SCC AS can have zero dialogs if all the early dialogs were terminated by the 199 (Early Dialog Terminated) response as described in IETF RFC 6228 [80].\nEach SIP UPDATE request shall be populated as follows:\n1)\tthe Request-URI set to the URI contained in the Contact header field returned at the creation of the dialog with the remote UE;\n2)\tthe Contact header field set to the Contact header field provided by the served UE at the creation of the dialog with the remote UE; and\n3)\tan new SDP offer, including\na)\tif the remote leg is not a precondition enabled dialog, the media characteristics as received in the SIP INVITE request due to PS to CS STN but excluding any precondition mechanism specific SDP attributes, by following the rules of 3GPP TS 24.229 [2];\nb)\tif the remote leg is a precondition enabled dialog, include a new SDP offer including:\n-\tthe media characteristics as received in the SIP INVITE request due to PS to CS STN (including any precondition mechanism specific SDP attributes); and\n-\tif the SIP INVITE request due to PS to CS STN is not a precondition enabled initial SIP INVITE request, indicate preconditions as met, using the segmented status type, as defined in IETF RFC 3312 [88] and IETF RFC 4032 [89], as well as the strength-tag value \"mandatory\" for the local segment and the strength-tag value either \"optional\" or as specified in RFC 3312 [88] and RFC 4032 [89] for the remote segment.\nFor each SIP 200 (OK) response to the SIP UPDATE request (triggered by the SIP INVITE request due to CS to PS STN) from a remote UE the SCC AS shall\n1)\tif one of the following is true:\nA)\tif the remote leg is not a precondition enabled dialog;\nB)\tif the remote leg is a precondition enabled dialog, the SIP INVITE request due to PS to CS STN is a precondition enabled initial SIP INVITE request and both local and remote preconditions are met:\nsend a SIP provisional response to the SIP INVITE request due to PS to CS STN with the response code corresponding to the actual dialog state populated with:\n-\ta SDP answer based on the SDP answer received from the remote UE; and\n-\tthe last received P-Early-Media header field, including the SIP 2xx response to the SIP UPDATE request, if a P-Early-Media has been received from the remote UE.\n2)\tif the remote leg is a precondition enabled dialog, the SIP INVITE request due to PS to CS STN is a precondition enabled initial SIP INVITE request but all preconditions are not met, send a SIP 183 (Session Progress) response populate with:\n-\tif SIP INVITE request due to PS to CS STN is a precondition enabled initial SIP INVITE, an SDP answer based on the SDP answer received from the remote UE; and\n-\tif SIP INVITE request due to PS to CS STN is not a precondition enabled initial SIP INVITE, an SDP answer based on the SDP answer received from the remote UE but excluding the precondition mechanism specific SDP attributes; and\n-\tthe last received P-Early-Media header field, including the SIP 2xx response to the SIP UPDATE request, if a P-Early-Media has been received from the remote UE.\nUpon receipt of an SIP PRACK request on the target access leg send a SIP 200 (OK) response to the SIP PRACK request on the target access leg.\nUpon receipt of a provisional SIP response from the remote UE forward the SIP provisional response on the target access leg following the rules of 3GPP TS 24.229 [2]. If the SIP INVITE request due to PS to CS STN is not a precondition enabled initial SIP INVITE remove any precondition mechanism specific SDP attributes from the SDP offer. Upon receipt of the SIP PRACK request on the target access leg, forward the SIP PRACK request towards the remote UE following the rules of 3GPP TS 24.229 [2].\nUpon receipt of a SIP UPDATE request on the target access leg the SCC AS shall forward the SIP request to the remote UE. Upon receipt of a SIP 200 (OK) response to this SIP UPDATE request from the remote UE, the SCC AS shall forward the SIP response on the target access leg.\nUpon receipt of a SIP UPDATE request from the remote UE, the SCC AS shall forward the SIP request on the target access leg. If the SIP INVITE request due to PS to CS STN is not a precondition enabled initial SIP INVITE remove any precondition mechanism specific SDP attributes from the SDP offer. Upon receipt of a SIP 200 (OK) response to this SIP UPDATE request on the target access leg, the SCC AS shall forward the SIP response towards the remote UE.\nThe SCC AS shall remove non-transferred audio media components and release the source access leg as specified in subclause 9.3.6.\nIn order to transfer an additional session on the originating side that can be in pre-alerting phase or in an alerting phase, the SCC AS shall send a SIP REFER request according to 3GPP TS 24.229 [2], IETF RFC 4488 [20] and IETF RFC 3515 [13] as updated by IETF RFC 6665 [81] and IETF RFC 7647 [90] and IETF RFC 4488 [20] in the dialog created by the SIP INVITE request due to PS to CS STN. The SCC AS shall populate the SIP REFER request as follows:\n1.\tthe Refer-Sub header field with value \"false\" as specified in IETF RFC 4488 [20];\n2.\tthe Require header field with value \"norefersub\" as specified in IETF RFC 4488 [20];\n3.\tthe Refer-To header field containing the additional transferred session SCC AS URI for PS to CS dual radio, where the URI also includes the following header fields containing the information related to the additional transferred session:\nA.\tthe Target-Dialog header field populated as specified in IETF RFC 4538 [11], containing the dialog identifier of an dialog in the early phase supporting session of the SC UE;\nB.\tthe Require header field populated with the option tag value \"tdialog\";\nC.\tthe To header field populated as specified in IETF RFC 3261 [19], containing the value of the P-Asserted-Identity provided by the remote UE during the session establishment;\nD.\tthe From header field populated as specified in IETF RFC 3261 [19], containing the value of the P-Asserted-Identity provided by the SC UE during the session establishment;\nE.\tthe Content-Type header field with \"application/sdp\";\nF.\tthe URI header field with the hname \"body\" populated with SDP describing the media streams as negotiated in the session with the remote UE; and\nG.\toptionally the P-Asserted-Identity URI header field containing value of the P-Asserted-Identity header field of the received SIP INVITE request; and\n4.\tapplication/vnd.3gpp.state-and-event-info+xml MIME body populated as follows:\nA)\tif a SIP 180 (Ringing) response to the SIP INVITE request has already been received in any of the early dialogs associated with the originating early session not accepted yet, with the state-info XML element containing \"early\" and the direction XML element containing \"initiator\"; and\nB)\tif a SIP 180 (Ringing) response to the SIP INVITE request has not been received yet in any of the early dialogs associated with the originating early session not accepted yet, with the state-info XML element containing \"pre-alerting\" and the direction XML element containing \"initiator\".\nWhen the SCC AS receives the SIP INVITE request transferring additional session for PS to CS for dual radio, the SCC AS shall:\n-\tassociate the SIP INVITE request transferring additional session for PS to CS for dual radio with an SIP dialog in early dialog phase i.e. identify the source access leg;\nNOTE 1:\tThe SIP dialog on the source access leg is identified by matching the dialog ID present in Target-Dialog header field (see IETF RFC 4538 [11]) of the SIP INVITE with a dialog in early state.\nNOTE 2:\tBy a SIP dialog in early dialog phase, it is meant an early SIP dialog which has been created by a provisional response to the initial SIP INVITE request, but for which the SIP 2xx response has not yet been sent or received;\n-\tif the SCC AS is unable to associate the SIP INVITE with a unique dialog in early dialog phase, send a SIP 480 (Temporarily Unavailable) response to reject the SIP INVITE request relating to the access transfer and not processes the remaining steps;\n-\tif the number of media lines in the target access leg is less than the number of media lines in the source Access leg or the media type for the corresponding media lines is not the same as in the original session, send a SIP 4xx response to reject the SIP INVITE request relating to the access transfer and not process the remaining steps; and\n-\tsend a SIP UPDATE request(s) towards the remote UE(s) using the existing early dialog(s) which were created by the same SIP INVITE request as the source access leg. The SCC AS shall populate the SIP UPDATE request(s) following the rules specified in 3GPP TS 24.229 [2], as follows:\nA)\tinclude a new SDP offer with:\na)\tthe media characteristics as received in the SIP INVITE request transferring additional session for PS to CS for dual radio received on the target access leg for media streams whose port is not set to zero modified as follows:\ni)\tif the remote leg is not a precondition enabled dialog and the SIP INVITE request transferring additional session for PS to CS for dual radio is a precondition enabled initial SIP INVITE request, exclude preconditions specific attributes in the new SDP offer; and\nii)\tif the remote leg is a precondition enabled dialog and the SIP INVITE request transferring additional session for PS to CS for dual radio is not a precondition enabled initial SIP INVITE request, indicate preconditions as met, using the segmented status type, as defined in IETF RFC 3312 [88] and IETF RFC 4032 [89], as well as the strength-tag value \"mandatory\" for the local segment and the strength-tag value either \"optional\" or as specified in RFC 3312 [88] and RFC 4032 [89] for the remote segment;\nNOTE 3:\tIf the MSC server is using the precondition mechanism, the local preconditions will always be indicated as met according to subclause 9.7.\nb)\tfor the media streams in the SIP INVITE request transferring additional session for PS to CS for dual radio whose port is set to zero, include the corresponding media characteristics of those streams from the source access leg.\nWhen receiving SIP 2xx response(s) to the SIP UPDATE request(s) triggered by the SIP INVITE request transferring additional session for dual radio, the SCC AS shall send a SIP 18x response with the status code corresponding to the latest SIP 18x response following the rules of 3GPP TS 24.229 [2] received from remote leg in the dialog to the SIP INVITE request transferring additional session for PS to CS for dual radio containing:\n1)\tif\na)\tthe SIP INVITE request transferring additional session for PS to CS for dual radio is a precondition enabled initial SIP INVITE request, an SDP answer with the relevant media parameter of the SDP answer in the received SIP 2xx response;\nb)\tthe SIP INVITE request transferring additional session for PS to CS for dual radio is not a precondition enabled initial SIP INVITE request, an SDP answer with the relevant media parameter of the SDP answer in the received SIP 2xx response but excluding the precondition mechanism specific SDP attributes;\nIf a SIP PRACK request is received on the target access leg, send a SIP 200 (OK) response to the SIP PRACK request on the target access leg; and\n2)\tthe last received P-Early-Media header field, including the SIP 2xx response to the SIP UPDATE request, if a P-Early-Media has been received from the remote UE.\nThe SCC AS shall remove non-transferred audio media components and release the source access leg as specified in subclause 9.3.6.\nWhen the SCC AS receives a SIP 488 (Not Acceptable Here) response to the SIP INVITE request creating the session in the terminating alerting phase without an SDP MIME body and if the SCC AS supports PS to CS dual radio access transfer for calls in alerting phase then the SCC AS shall:\n1)\tif a SIP 180 (Ringing) response to the SIP INVITE request has been received from the SC UE;\n2)\tif the SCC AS included a g.3gpp.ps2cs-drvcc-orig-pre-alerting feature-capability indicator as described in annex C in the SIP INVITE request; and\n3)\tif the Contact header field in the SIP 180 (Ringing) response request sent by the SC UE towards the SCC AS included a g.3gpp.drvcc-alerting media feature tag as described in annex C,\nterminate the call over CS as follows:\n1)\tperform the actions according to the subclause 10.4.7 in 3GPP TS 24.292 [4] with the following clarifications:\na)\tthe URI in the Request-URI shall be set to C-MSISDN; and\nb)\tthe P-Asserted-Identity header field set to:\n-\tif the SIP 180 (Ringing) response contained the g.3gpp.dynamic-stn media feature tag as described in annex C in the Contact header field, the dynamic STN; and\n-\tif the SIP 180 (Ringing) response does not contain the g.3gpp.dynamic-stn media feature tag as described in annex C in the Contact header field, the static STN.\nWhen the SCC AS receives a SIP 1xx response with an SDP answer the SCC AS shall:\na)\tsend a SIP PRACK request towards the CS domain; and\nb)\tsend an SIP UPDATE request to the remote UE populated as follows:\n-\tthe Request-URI set to the URI contained in the Contact header field returned at the creation of the dialog with the remote UE;\n-\tthe Contact header field set to the Contact header field provided by the served UE at the creation of the dialog with the remote UE; and\n-\tanew SDP offer, including the media characteristics as received in the SIP 1xx response with the SDP answer, by following the rules of 3GPP TS 24.229 [2].\nUpon receipt of the SIP 200 (OK) response to the SIP UPDATE request, the SC AS shall remove non-transferred audio media components and release the source access leg as specified in subclause 9.3.6.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "9.3.6\tRemoval of non-transferred audio media components and release of source access legs",
                            "text_content": "When the transfer of a session is successfully completed, then the SCC AS shall release the source legs as follows:\nIf:\n1)\tthe source access leg is an ongoing session containing only an active or inactive media component or a session in an early dialog phase on the terminating side, send a SIP BYE request on the source access leg in accordance with 3GPP TS 24.229 [2];\n2)\tthe session is dialog in an early dialog phase on the originating side send a SIP 480 (Temporary Unavailable) response on the source access leg in accordance with 3GPP TS 24.229 [2]; and\nNOTE:\tIn case of PS to CS dual radio access transfer of a session in an early phase, the SC UE will receive the SIP request or response only if the SC UE is using Gm after the PS-CS access transfer is completed.\n3)\tthe source access leg contains media components other than speech media component, the SCC AS should send a SIP re-INVITE request to update the source access leg in accordance with 3GPP TS 24.229 [2].\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "9.3.7\tSCC AS procedures for CS to PS dual radio access transfer for calls in an early phase",
                            "text_content": "Upon receiving a SIP INVITE request due to static STI and the SCC AS support CS to PS dual radio access transfer for calls in alerting phase or CS to PS dual radio access transfer for originating calls in pre-alerting phase and one of the following conditions are fulfilled:\n1)\tif there are one or more dialog in an early dialog phase such that:\na)\tall dialogs are early dialogs created by the same SIP INVITE request;\nb)\ta SIP 180 (Ringing) response to SIP INVITE request was received from remote UEs in at least one of those early dialogs;\nc)\tthe g.3gpp.cs2ps-drvcc-alerting feature-capability indicator as described annex C in a Feature-Caps header field was included in the SIP INVITE due to static STI; and\nd)\tthe SCC AS supports CS to PS dual radio access transfer for calls in alerting phase;\n2)\tif there are one or more dialog in an early dialog phase such that:\na)\tall dialogs are early dialogs created by the same SIP INVITE request;\nb)\ta SIP 180 (Ringing) response to the SIP INVITE request has not been received from remote UEs yet;\nc)\ta g.3gpp.cs2to-drvcc-orig-pre-alerting media feature tag as described in annex C in the Contact header field was included in the SIP INVITE request due to static STI; and\nd)\tthe SCC AS supports CS to PS dual radio access transfer for originating calls in pre-alerting phase; and\n3)\tif there is one dialog in an early dialog phase such that:\na)\ta SIP 180 (Ringing) response to the SIP INVITE request has been received from the SC UE;\nb)\tthe g.3gpp.cs2ps-drvcc-alerting feature-capability indicator as described annex C in a Feature-Caps header field was included in the SIP INVITE due to static STI; and\nc)\tthe SCC AS supports CS to PS dual radio access transfer for calls in alerting phase.\nthen the SCC AS shall regard the session subject for PS to CS dual radio access transfer.\nWhen the SCC AS receives a SIP INVITE request due to static STI and if the SCC AS supports CS to PS dual radio access transfer for calls in alerting phase or CS to PS dual radio access transfer for originating calls in pre-alerting phase and:\n1)\tif there are one or more dialog in an early dialog phase such that:\na)\tall dialogs are early dialogs created by the same SIP INVITE request;\nb)\ta SIP 180 (Ringing) response to SIP INVITE request was received from remote UEs in at least one of those early dialogs;\nc)\tthe g.3gpp.cs2ps-drvcc-alerting feature-capability indicator in a Feature-Caps header field as described in annex C was included in the SIP INVITE due to static STI; and\nd)\tif the SCC AS supports CS to PS dual radio access transfer for calls in alerting phase; or\n2)\tif there are zero, one or more dialog in an early dialog phase such that:\na)\tall dialogs are early dialogs created by the same SIP INVITE request;\nb)\ta SIP 180 (Ringing) response to the SIP INVITE request has not been received yet in any of the existing dialogs;\nc)\ta g.3gpp.drvcc-orig-pre-alerting media feature tag as described in annex C in the Contact header field was included in the SIP INVITE due to static STI; and\nd)\tthe SCC AS supports CS to PS dual radio access transfer for originating calls in pre-alerting phase,\nNOTE:\tThe SCC AS can have zero dialogs if all the early dialogs were terminated by the SIP 199 (Early Dialog Terminated) response as described in RFC 6228 [80].\nthen the SCC AS shall\nA)\tfor each existing early dialog towards remote UEs send an SIP UPDATE request and populate as follows:\na)\tthe Contact header field set to the Contact header field provided on the source leg at the creation of the dialog with the remote UE; and\nb)\ta new SDP offer, including the media characteristics as received in the SIP INVITE request due to static STI, by following the rules of 3GPP TS 24.229 [2].For each SIP 200 (OK) response to the SIP UPDATE request on an existing dialog from a remote UE the SCC AS shall create a new early dialog by sending a SIP provisional response to the SIP INVITE request due to static STI with the response code corresponding to the actual dialog state populated with:\nI)\tan SDP answer based on the SDP answer received from the remote UE;\nII)\tthe last received P-Early-Media header field, including the SIP 2xx response to the SIP UPDATE request, if a P-Early-Media has been received from the remote UE;\nIII)\tif the SCC AS supports CS to PS dual radio access transfer for calls in alerting phase according to operator policy,\n-\tthe g.3gpp.cs2ps-drvcc-alerting feature-capability indicator as described in annex C in a Feature-Caps header field according to IETF 6809 [60]; and\n-\tif the SCC AS supports PS to CS dual radio access transfer for originating calls in pre-alerting phase, the g.3gpp.cs2ps-drvcc-orig-pre-alerting feature-capability indicator as described in annex C in a Feature-Caps header field according to IETF 6809 [60]; and\nIV)\tthe signalling elements described in subclause 6A.4.3 in the SIP 1xx response.\nUpon receiving the SIP PRACK request from the target access leg, if the early session is an originating early session in the pre-alerting state, the SCC AS shall send a SIP INFO request towards the SC UE as specified in 3GPP TS 24.229 [2] and IETF RFC 6086 [54] in the dialog created by the SIP INVITE request due to static STI populated as follows:\n1)\tinclude the Info-Package header field as specified in IETF RFC 6086 [54] with 3gpp.state-and-event info package name; and\n2)\tinclude an application/vnd.3gpp.state-and-event-info+xml MIME body associated with the info package according to IETF RFC 6086 [54] and compliant to the XML schema specified in the clause D.2 with the state-info XML element containing \"pre-alerting\" and the direction XML element containing \"initiator\".\nIf the SCC AS supports the PS to CS dual radio access transfer for originating calls in pre-alerting phase and if a SIP 1xx response or SIP 2xx response establishing a new dialog is received on the remote leg of the additional transferred session where the SIP response is to the SIP INVITE request from the served user, the SCC AS shall:\n1)\tif the SIP 1xx response is received:\na)\tsend a SIP PRACK request on the remote leg as specified in 3GPP TS 24.229 [2] with the SDP offer received in the SIP INVITE request transferring additional session for PS to CS dual radio as specified in 3GPP TS 24.229 [2];\nb)\tupon receiving the SIP 200 (OK) response to the SIP PRACK request, send the SIP 1xx response to the SIP INVITE request transferring additional session for PS to CS dual radio as specified in 3GPP TS 24.229 [2] populated as follows:\ni)\tinclude the SDP answer received in the SIP 200 (OK) response to the SIP PRACK request as specified in 3GPP TS 24.229 [2]; and\nii)\tif the SIP INVITE request transferring additional session for PS to CS dual radio contains a P-Early-Media header field with the \"supported\" parameter and if the SCC AS has received a P-Early-Media header field in a SIP message in the dialog of the SIP PRACK request, include a P-Early-Media header field containing the value of the last P-Early-Media header field received in a SIP message in the dialog of the SIP PRACK request; and\nc)\tinclude the signalling elements described in subclause 6A.4.3 in the SIP 1xx response; and\n2)\tif the SIP 2xx response is received:\na)\tsend a SIP ACK request on the remote leg as specified in 3GPP TS 24.229 [2];\nb)\tsend a SIP UPDATE request on the remote leg as specified in 3GPP TS 24.229 [2] populated with the SDP offer received in the SIP INVITE request transferring additional session for PS to CS dual radio as specified in 3GPP TS 24.229 [2]; and\nc)\tupon receiving the SIP 200 (OK) response to the SIP UPDATE request, send a SIP 200 (OK) response to the SIP INVITE request transferring additional session for PS to CS dual radio as specified in 3GPP TS 24.229 [2] populated with:\ni)\tthe SDP answer received in the SIP 200 (OK) response to the SIP UPDATE request as specified in 3GPP TS 24.229 [2]; and\nii)\tthe signalling elements described in subclause 6A.4.3 in the SIP 1xx response.\nThe SCC AS shall release the source access leg as specified in subclause 9.3.6.\nWhen the SCC AS receives a SIP INVITE request due to static STI and if SCC AS supports CS to PS dual radio access transfer for calls in alerting phase and:\n1)\tif there is one dialog in an early dialog phase such that:\na)\ta SIP 180 (Ringing) response to the SIP INVITE request has been received from the SC UE; and\nb)\ta g.3gpp.drvcc-alerting media feature tag as described in annex C in the Contact header field was included in the SIP INVITE request due to static STI,\nthen the SCC AS shall send a SIP UPDATE request towards the remote UE populated as follows:\n1)\tinclude the Contact header field set to the Contact header field provided on the source leg at the creation of the dialog with the remote UE; and\n2)\tinclude a new SDP offer, including the media characteristics as received in the SIP INVITE request due to static STI, by following the rules of 3GPP TS 24.229 [2].\nUpon receipt of the SIP 200 (OK) response to the SIP UPDATE request from the remote UE the SCC AS shall send a SIP 180 (Ringing) response to the SIP INVITE request due to static STI with populated with:\n1)\tan SDP answer based on the SDP answer received from the remote UE;\n2)\tthe last received P-Early-Media header field, including the SIP 2xx response to the SIP UPDATE request, if a P-Early-Media has been received from the remote UE; and\n3)\tthe g.3gpp.cs2ps-drvcc-alerting feature-capability indicator in a Feature-Caps header field according to annex C; and\n4)\tif the SCC AS supports PS to CS dual radio access transfer for originating calls in pre-alerting phase, the g.3gpp.cs2ps-drvcc-orig-pre-alerting feature-capability indicator according to annex C in the Feature-Caps header field; and\n5)\tthe signalling elements described in subclause 6A.4.3.\nUpon receiving the SIP PRACK request from the target access leg, the SCC AS shall send a SIP INFO request towards the SC UE as specified in 3GPP TS 24.229 [2] and IETF RFC 6086 [54] in the dialog created by the SIP INVITE request due to static STI populated as follows:\n1)\tinclude the Info-Package header field as specified in IETF RFC 6086 [54] with 3gpp.state-and-event info package name; and\n2)\tinclude an application/vnd.3gpp.state-and-event-info+xml MIME body associated with the info package according to IETF RFC 6086 [54] and compliant to the XML schema specified in the clause D.2 with the state-info XML element containing \"early\" and the direction XML element containing \"receiver\".\nUpon receiving the SIP INFO request which includes an Info-Package header field containing 3gpp.state-and-event info package name and an application/vnd.3gpp.state-and-event-info+xml MIME body associated with the info package according to IETF RFC 6086 [54] and compliant to the XML schema specified in the clause D.2 from the SC UE with the event XML element containing \"call-accepted\", the SCC AS shall send as specified in 3GPP TS 24.229 [2]:\n1)\ta SIP 200 (OK) response to the SIP INVITE request received earlier from the remote UE indicating that the called party has answered the call; and\n2)\ta SIP 200 (OK) response to the SIP INVITE request due to static STI towards the SC UE to indicate the successful access transfer.\nThe SCC AS shall release the source access leg as specified in subclause 9.3.6.\nIn order to transfer of an additional session that can be in originating pre-alerting phase or in an alerting phase, the SCC AS supporting CS to PS dual radio access transfer for calls in an early phase, shall send a SIP REFER request according to 3GPP TS 24.229 [2], IETF RFC 4488 [20] and IETF RFC 3515 [13] as updated by IETF RFC 6665 [81] and IETF RFC 7647 [90] in the dialog created by the SIP INVITE request due to static STI populated as follows:\n1)\tinclude a Refer-Sub header field with value \"false\" as specified in IETF RFC 4488 [20];\n2)\tinclude a Require header field with value \"norefersub\" as specified in IETF RFC 4488 [20];\n3)\tinclude a Refer-To header field containing the additional transferred session SCC AS URI for PS to CS dual radio, where the URI also includes the following URI header fields containing the information related to the additional transferred session:\na)\tif an early dialog supporting the additional transferred session exists, the Target-Dialog header field populated as specified in IETF RFC 4538 [11], containing the dialog identifier of the dialog in the early phase;\nb)\tif the SCC AS supports the PS to CS dual radio access transfer for originating calls in pre-alerting phase, if no early dialog supporting the additional transferred session exists, there is a SIP INVITE request from the served user for which a final SIP response has not been received yet and if an early dialog supporting the additional transferred session existed and was terminated, the Target-Dialog header field populated as specified in IETF RFC 4538 [11], containing the dialog identifier on the source access leg of the early dialog supporting the additional transferred session which existed and was terminated;\nNOTE 1:\tEarly dialog can be terminated by SIP 199 (Early Dialog Terminated) response.\nc)\tthe Require header field populated with the option tag value \"tdialog\";\nd)\tif an early dialog supporting the additional transferred session exists, the To header field populated as specified in IETF RFC 3261 [19], containing the value of the P-Asserted-Identity provided by the remote UE during the session establishment;\ne)\tthe From header field populated as specified in IETF RFC 3261 [19], containing the value of the P-Asserted-Identity provided by the SC UE during the session establishment;\nf)\tthe Content-Type header field with \"application/sdp\";\ng)\tif an early dialog supporting the additional transferred session exists, the URI header field with hname \"body\" populated with SDP describing the media streams as negotiated in the session with the remote UE; and\nh)\tif the SCC AS supports the PS to CS dual radio access transfer for originating calls in pre-alerting phase, no early dialog supporting the additional transferred session exists, there is a SIP INVITE request from the served user for which a final SIP response has not been received yet, the URI header field with the hname \"body\" populated with the SDP offer received in the SIP INVITE request from the served user; and\n4)\tapplication/vnd.3gpp.state-and-event-info+xml MIME with:\na)\tif a SIP 180 (Ringing) response to the SIP INVITE request has already been received from the remote UE in any of the early dialogs associated with the originating early session not accepted yet, the state-info XML element containing \"early\" and the direction XML element containing \"initiator\";\nb)\tif a SIP 180 (Ringing) response to the SIP INVITE request has not been received yet from the remote UE in any of the early dialogs associated with the originating early session not accepted yet and the additional transferred session was originated by the SC UE, the state-info XML element containing \"pre-alerting\" and the direction XML element containing \"initiator\"; and\nc)\tif a SIP 180 (Ringing) response to the INVITE request has already been received on the source access leg, the state-info XML element containing \"early\" and the direction XML element containing \"receiver\"\nWhen the SCC AS receives the SIP INVITE request transferring additional session for CS to PS for dual radio, the SCC AS shall:\n1)\tif the Target-Dialog of the SIP INVITE request transferring additional session for PS to CS dual radio identifies an existing early dialog, associate the SIP INVITE request transferring additional session for PS to CS for dual radio with the SIP early dialog i.e. identify the source access leg;\nNOTE 2:\tThe SIP dialog on the source access leg is identified by matching the dialog ID present in Target-Dialog header field (see IETF RFC 4538 [11]) of the SIP INVITE with a dialog in early state.\nNOTE 3:\tBy a SIP dialog in early dialog phase, it is meant an early SIP dialog which has been created by a provisional response to the initial SIP INVITE request, but for which the SIP 2xx response has not yet been sent or received.\n2)\tif the SCC AS supports the PS to CS dual radio access transfer for originating calls in pre-alerting phase, if the Target-Dialog of the SIP INVITE request transferring additional session for PS to CS dual radio identifies an early dialog which has already been terminated, associate the SIP INVITE request transferring additional session for PS to CS dual radio with the early dialog i.e. identify the source access leg;\n3)\tif the SCC AS is unable to associate the SIP INVITE request with a unique dialog in early dialog phase, send a SIP 480 (Temporarily Unavailable) response to reject the SIP INVITE request relating to the access transfer and not processes the remaining steps;\n4)\tif the number of media lines in the target access leg is less than the number of media lines in the source Access leg or the media type for the corresponding media lines is not the same as in the original session, send a SIP 4xx response to reject the SIP INVITE request relating to the access transfer and not process the remaining steps; and\n5)\tif an early dialog exists on the remote leg of the additional transferred session, send a SIP UPDATE request(s) towards the remote UE(s) using the existing early dialog(s) which were created by the same SIP INVITE request as the source access leg populated with a new SDP offer, following the rules specified in 3GPP TS 24.229 [2], containing the following media information:\na)\tthe media characteristics as received in the SIP INVITE request transferring additional session for CS to PS for dual radio received on the target access leg for media streams whose port is not set to zero; and\nb)\tfor the media streams in the SIP INVITE request transferring additional session for CS to PS for dual radio whose port is set to zero, include the corresponding media characteristics of those streams from the source access leg.\nIf an early dialog exists on the remote leg then when receiving SIP 2xx response(s) to the SIP UPDATE request(s), the SCC AS shall create a new dialog by sending a SIP 18x response with the status code corresponding to the latest SIP 18x response received from remote leg in the dialog to the SIP INVITE request transferring additional session for CS to PS for dual radio containing:\n1)\tan SDP answer with the relevant media parameter of the SDP answer in the received SIP 2xx response;\n2)\tif the SIP INVITE request transferring additional session for PS to CS dual radio contains a P-Early-Media header field with the \"supported\" parameter, the last received P-Early-Media header field, including the SIP 2xx response to the SIP UPDATE request, if a P-Early-Media has been received from the remote UE; and\n3)\tthe signalling elements described in subclause 6A.4.3.\nIf the SCC AS supports the PS to CS dual radio access transfer for originating calls in pre-alerting phase and if a SIP 1xx response or SIP 2xx response establishing a new dialog is received on the remote leg of the additional transferred session where the SIP response is to the SIP INVITE request from the served user, the SCC AS shall:\n1)\tif the SIP 1xx response is received:\na)\tsend SIP PRACK request on the remote leg as specified in 3GPP TS 24.229 [2] populated with the SDP offer received in the SIP INVITE request transferring additional session for PS to CS dual;\nb)\tupon receiving the SIP 200 (OK) response to the SIP PRACK request, send the SIP 1xx response to the SIP INVITE request transferring additional session for PS to CS dual radio as specified in 3GPP TS 24.229 [2] populated with:\ni)\tinclude the SDP answer received in the SIP 200 (OK) response to the SIP PRACK request as specified in 3GPP TS 24.229 [2];\nii)\tif the SIP INVITE request transferring additional session for PS to CS dual radio contains a P-Early-Media header field with the \"supported\" parameter and if the SCC AS has received a P-Early-Media header field in a SIP message in the dialog of the SIP PRACK request, include a P-Early-Media header field containing the value of the last P-Early-Media header field received in a SIP message in the dialog of the SIP PRACK request; and\niii)\tthe signalling elements described in subclause 6A.4.3; and\n2)\tif a SIP 2xx response is received:\na)\tsend a SIP ACK request on the remote leg as specified in 3GPP TS 24.229 [2];\nb)\tsend a SIP UPDATE request on the remote leg as specified in 3GPP TS 24.229 [2 populated with the SDP offer received in the SIP INVITE request transferring additional session for PS to CS dual radio as specified in 3GPP TS 24.229 [2]; and\nc)\tupon receiving the SIP 200 (OK) response to the SIP UPDATE request, send a SIP 200 (OK) response to the SIP INVITE request transferring additional session for PS to CS dual radio as specified in 3GPP TS 24.229 [2] populated with:\ni)\tthe SDP answer received in the SIP 200 (OK) response to the SIP UPDATE request as specified in 3GPP TS 24.229 [2]; and\nii)\tthe signalling elements described in subclause 6A.4.3.\nThe SCC AS shall release the source access leg as specified in subclause 9.3.6.\nUpon receiving the SIP INFO request which includes an Info-Package header field containing 3gpp.state-and-event info package name and an application/vnd.3gpp.state-and-event-info+xml MIME body associated with the info package according to IETF RFC 6086 [54] and compliant to the XML schema specified in the clause D.2 from the SC UE with the event XML element containing \"call-accepted\", the SCC AS shall send as specified in 3GPP TS 24.229 [2]:\n1)\ta SIP 200 (OK) response to the SIP INVITE request received earlier from the remote UE indicating that the called party has answered the call; and\n2)\ta SIP 200 (OK) response to the SIP INVITE request due to static STI towards the SC UE to indicate the successful access transfer.\n",
                            "figures_meta_data": [],
                            "tables": []
                        }
                    ]
                },
                {
                    "title": "9.4\tMSC server enhanced for ICS",
                    "description": "",
                    "summary": "",
                    "text_content": "If the MSC server enhanced for ICS has registered for the user, the MSC server shall apply the procedures as specified in 3GPP TS 29.292 [18].\nIf the MSC server enhanced for ICS supports the MSC server assisted mid-call feature, the MSC server shall apply the procedures specified in subclause 9.5 and subclause 9.6.\nIf the MSC server enhanced for ICS supports PS to CS dual radio access transfer for calls in alerting phase, the MSC server shall apply the procedures specified in subclause 9.7.\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": [
                        {
                            "title": "9.4.1\tVoid",
                            "text_content": "",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "9.4.1A\tVoid",
                            "text_content": "",
                            "figures_meta_data": [],
                            "tables": []
                        }
                    ]
                },
                {
                    "title": "9.5\tPS to CS session continuity with MSC server assisted mid-call feature",
                    "description": "",
                    "summary": "",
                    "text_content": "This subclause describes the procedures required by an MSC server in order to support the MSC server assisted mid call feature.\nThe MSC server shall populate the SIP INVITE request due to STN as follows:\n1.\tthe Supported header field containing the option-tag \"norefersub\" specified in IETF RFC 4488 [20];\n2.\tthe Accept header field containing the MIME type as specified in subclause D.1.3;\n3.\tinclude the g.3gpp.mid-call media feature tag as described in annex C in the Contact header field according to IETF RFC 3840 [53]; and\n4.\tthe Recv-Info header field containing the g.3gpp.mid-call package name.\nNOTE 1:\tSince the MSC server is not able to distinguish the dual radio access transfer from the regular session set up, the information elements above are added to every SIP INVITE request sent by the MSC server.\nUpon receiving a CC CONNECT ACK message related to a CC CONNECT message sent as result of receiving a SIP 2xx response to SIP INVITE request due to STN, if inactive speech media component is negotiated by the SDP answer of the SIP 2xx response to the SIP INVITE request due to STN, after handling the CC CONNECT ACK according to 3GPP TS 24.008 [8], the MSC server shall re-assign the hold auxiliary state (defined in 3GPP TS 24.083 [43]) to \"call held\" for the transaction identifier and TI flag value as received in the CC SETUP message.\nNOTE 2:\tAfter handling the CC CONNECT ACK according to 3GPP TS 29.292 [18] and 3GPP TS 24.008 [8], the dialog created by the SIP INVITE request due to STN is associated with a CS call in the \"active\" (N10) state (defined in 3GPP TS 24.008 [8]), the \"idle\" hold auxiliary state (defined in 3GPP TS 24.083 [43]) and the \"idle\" multi party auxiliary state (defined in 3GPP TS 24.084 [47]) with transaction identifier and TI flag value as received in the CC SETUP message.\nUpon receiving a SIP INFO request:\n-\twith the Info-Package header field containing the g.3gpp.mid-call package name;\n-\twith the application/vnd.3gpp.mid-call+xml MIME body associated with the info package according to IETF RFC 6086 [54]; and\n-\twith one or more participants included in the application/vnd.3gpp.mid-call+xml MIME body;\nif the SIP INFO request is received after a CC CONNECT ACK message related to a CC CONNECT message sent as result of a SIP 2xx response to SIP INVITE request due to STN and if the SIP INVITE request established a session with conference focus, then the MSC server shall:\nNOTE 3:\tIf the SIP INFO request is received before the CC CONNECT ACK message, the MSC processes the contents of the SIP INFO request after reception of the CC CONNECT ACK message.\n1.\tif inactive speech media component is negotiated by the SDP answer of the SIP 2xx response to the SIP INVITE request due to STN, associate the session and the participants extracted from the application/vnd.3gpp.mid-call+xml MIME body with CS calls:\n-\twith transaction identifiers calculated as in the table 9.2.1A-2. The offsets 0, 2, 3, 4, 5 are assigned to the participants in their order in the list of the extracted participants; and\n-\twith TI flag value as in mobile originated call;\nand enter the \"active\" (N10) state (defined in 3GPP TS 24.008 [8]), the \"call held\" hold auxiliary state (defined in 3GPP TS 24.083 [43]) and the \"call in MPTY\" multi party auxiliary state (defined in 3GPP TS 24.084 [47]) for the CS calls. The MSC server may subscribe to the conference event package as specified in 3GPP TS 24.605 [31]; and\nNOTE 4:\tThe transaction identifier that the MSC received in the CC SETUP message is the transaction identifier assigned to the first participant (offset 0).\nNOTE 5:\tAfter handling the CC CONNECT ACK according to 3GPP TS 29.292 [18] and 3GPP TS 24.008 [8], the dialog created by the SIP INVITE request due to STN is associated with a CS call in the \"active\" (N10) state (defined in 3GPP TS 24.008 [8]), the \"idle\" hold auxiliary state (defined in 3GPP TS 24.083 [43]) and the \"idle\" multi party auxiliary state (defined in 3GPP TS 24.084 [47]) with transaction identifier and TI flag value as received in the CC SETUP message.\nNOTE 6:\tThe multi party auxiliary state was initially set to \"idle\". This state is re-assigned to \"call in MPTY\" after processing the SIP INFO request to reflect the multi party auxiliary state associated with the first participant.\n2.\tif active speech media component is negotiated by the SDP answer of the SIP 2xx response to the SIP INVITE request due to STN, associate the session and the participants extracted from the application/vnd.3gpp.mid-call+xml MIME body with CS calls:\n-\twith transaction identifiers calculated as in the table 9.2.1A-2; The offsets 0, 2, 3, 4, 5 are assigned to the participants in their order in the list of the extracted participants; and.\n-\twith TI flag value as in mobile originated call;\nand enter the \"active\" (N10) state (defined in 3GPP TS 24.008 [8]), the \"idle\" hold auxiliary state (defined in 3GPP TS 24.083 [43]) and the \"call in MPTY\" multi party auxiliary state (defined in 3GPP TS 24.084 [47]) for the CS calls.\nUpon receiving a SIP REFER request:\n1.\twith the Refer-Sub header field containing \"false\" value;\n2.\twith the Supported header field containing \"norefersub\" value;\n3.\twith the Refer-To header field containing a SIP URI with the Target-Dialog URI header field;\n4.\tsent inside an existing SIP dialog:\nA.\twhich was originated by the MSC server; and\nB.\twhere the g.3gpp.mid-call feature-capability indicator as described in annex  C was included in the Feature-Caps header field of the SIP 2xx response to the SIP INVITE request; and\n5.\tcontaining a MIME body of MIME type specified in the subclause D.1.3;\nthe MSC server shall:\n1.\thandle the SIP REFER request as specified in 3GPP TS 24.229 [2], IETF RFC 3515 [13] as updated by IETF RFC 6665 [81], and IETF RFC 4488 [20] without establishing an implicit subscription; and\nNOTE 7:\tIn accordance with IETF RFC 4488 [20], the MSC server inserts the Refer-Sub header field containing the value \"false\" in the SIP 2xx response to the SIP REFER request to indicate that it has not created an implicit subscription.\n2.\tsend a SIP INVITE request for transfer of an additional inactive session not using ICS capabilities in accordance with the procedures specified in 3GPP TS 24.229 [2] and IETF RFC 3515 [13]. Additionally, the MSC server shall populate the SIP INVITE request as follows:\nA.\theader fields which were included as URI header fields in the URI in the Refer-To header field of the received SIP REFER request as specified in IETF RFC 3261 [19] except the hname \"body\" URI header field;\nB.\tinclude the g.3gpp.mid-call media feature tag as described in annex C in the Contact header field according to IETF RFC 3840 [53];\nC.\tthe SDP offer with:\na.\tthe same amount of the media descriptions as in the hname \"body\" URI header field in the URI in the Refer-To header field of the received SIP REFER request;\nb.\teach \"m=\" line having the same media type as the corresponding \"m=\" line in the hname \"body\" URI header field in the URI in the Refer-To header field of the received SIP REFER request;\nc.\tport set to zero value in each \"m=\" line whose corresponding \"m=\" line in the hname \"body\" URI header field in the URI in the Refer-To header field of the received SIP REFER request has port with zero value;\nd.\tmedia directionality as in the hname \"body\" URI header field in the URI in the Refer-To header field of the received SIP REFER request;\nNOTE 8:\tport can be sent to zero or non zero value for the offered \"m=\" line whose corresponding \"m=\" line in the hname \"body\" URI header field in the URI in the Refer-To header field of the received SIP REFER request has port with nonzero value.\ne.\tall or subset of payload type numbers and their mapping to codecs and media parameters not conflicting with those in the hname \"body\" URI header field in the URI in the Refer-To header field of the received SIP REFER request; and\nf.\tif local configuration indicates that the network is serving users supporting the precondition mechanims, indicate preconditions as met, using the segmented status type, as defined in IETF RFC 3312 [88] and IETF RFC 4032 [89], as well as the strength-tag value \"mandatory\" for the local segment and the strength-tag value either \"optional\" or as specified in RFC 3312 [88] and RFC 4032 [89] for the remote segment;\nD.\tif local configuration indicates that the network is serving users supporting the precondition mechanism, include:\na.\ta \"100rel\" option tag as defined in IETF RFC 3262 [86] to indicate the support for reliable provisional responses; and\nb.\ta \"precondition\" option tag as defined in IETF RFC 3312 [88] to indicate the support for the precondition mechanism; and\nE.\tif a P-Asserted-Identity header field is not included in the headers portion of the URI in the Refer-To header field of the received SIP REFER request as specified in IETF RFC 3261 [19], include a P-Asserted-Identity header field with the value of the P-Asserted-Identity header field of the SIP INVITE requests due to STN which created the dialog in which the REFER request is received.\nUpon receiving SIP 2xx response to the SIP INVITE request for transfer of an additional inactive session, the MSC server shall:\n1.\tif:\na)\tthe SIP INVITE request for transfer of the additional inactive session did not established a session with a conference focus; or\nb)\tthe application/vnd.3gpp.mid-call+xml MIME body included in the SIP REFER request does not contain one or more participants:\nassociate the additional inactive session with CS call with transaction identifier calculated as in the table 9.2.1A-1 and TI flag value as in mobile originated call and enter the \"active\" (N10) state (as defined in 3GPP TS 24.008 [8]), the \"call held\" hold auxiliary state (as defined in 3GPP TS 24.083 [43]) and the \"idle\" multi party auxiliary state (defined in 3GPP TS 24.084 [47]) for this CS call; and\n2.\tif the SIP INVITE request for the additional inactive session established a session with conference focus and the application/vnd.3gpp.mid-call+xml MIME body included in the SIP REFER request contained one or more participants:\na)\tassociate the additional inactive session and the participants extracted from the application/vnd.3gpp.mid-call+xml MIME body included in the SIP REFER request with CS calls:\n-\twith transaction identifiers calculated as in the table 9.2.1A-2. The offsets 1, 2, 3, 4, 5 are assigned to the participants in their order in the list of the extracted participants; and\n-\twith TI flag value as in mobile originated call;\nand enter the \"active\" (N10) state (defined in 3GPP TS 24.008 [8]), the \"call held\" hold auxiliary state (defined in 3GPP TS 24.083 [43]) and the \"call in MPTY\" multi party auxiliary state (defined in 3GPP TS 24.084 [47]) for the CS calls. The MSC server may subscribe to the conference event package as specified in 3GPP TS 24.605 [31]\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "9.6\tPS to CS session continuity with MSC server assisted mid-call feature for speech and video session",
                    "description": "",
                    "summary": "",
                    "text_content": "This subclause describes the procedures required by an MSC server in order to support the MSC server assisted mid call feature for speech and video session.\nThe MSC server , upon receiving the session state information which indicates an inactive speech and video session, shall send a SIP INVITE request for the additional inactive speech and video session as described in subclause 9.5.\nNOTE 1:\tIf due to some reason (i.e. the current RAN type not supporting video, lack of resource, etc.) the video media cannot be supported in CS network for the speech and video session, then the MSC server can set the port to zero in the \"m=\" line for the video media in the SDP offer of the SIP INVITE request for the additional inactive session, so as to inform the SCC AS that the video media is deleted and only the audio media of the speech and video session is transferred to CS.\nNOTE 2:\tAfter successful transfer of a speech and video session and a speech session from PS to CS, if messages are received from the UE to switch between the two sessions (i.e. HOLD/Release message to hold/release the active session and Retrieve message to retrieve the inactive session), the MSC server can perform the procedures as specified in 3GPP TS 29.292 [18], with the addition that the MSC server can complete the in-call modification or Redial procedures as specified in 3GPP TS 24.008 [8] to change the shared CS bearer of the two sessions from speech to multimedia, or vice versa, before sending a SIP UPDATE request or SIP re-INVITE request to the SCC AS to resume the inactive session.\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "9.7\tMSC procedures for PS to CS dual radio access transfer of calls in an early phase",
                    "description": "",
                    "summary": "",
                    "text_content": "The MSC server supporting PS to CS dual radio access transfer for calls in alerting phase shall populate a SIP INVITE request due to STN as follows:\n1)\tinclude the g.3gpp.drvcc-alerting media feature tag as described in annex C in the Contact header field of the SIP INVITE request according to IETF RFC 3840 [53]; and\n2)\tif the MSC server supports the PS to CS dual radio access transfer for originating calls in pre-alerting phase, the MSC server shall include the g.3gpp.ps2cs-drvcc-orig-pre-alerting media feature tag according to annex C in the Contact header field of the SIP INVITE request according to IETF RFC 3840 [53].\nNOTE 1:\tSince the MSC server is not able to distinguish the dual radio access transfer from the regular session set up, the information elements above are added to every SIP INVITE request sent by the MSC server.\nUpon receiving a SIP REFER request within the SIP session established by the SIP INVITE request due to STN:\n1)\twith the Refer-Sub header field containing \"false\" value;\n2)\twith the Supported header field containing \"norefersub\" value;\n3)\twith the Target-Dialog URI header field in the URI of the Refer-To header field;\n4)\twhere the g.3gpp.ps2cs-drvcc-alerting feature-capability indicator or the g.3gpp.ps2cs-drvcc-originating-pre-alerting feature-capability indicator as described in annex C was included in the Feature-Caps header field of the SIP 2xx response to the SIP INVITE request due to STN; and\n5)\tcontaining a MIME body of MIME type specified in the subclause D.2.4,\nNOTE 2:\tAt this point, the MSC server interacts with the MGW to provide information needed in the procedures below and to request MGW to start forwarding the audio media from the remote UE to the MSC server. The details of interaction between the MSC server and the MGC are out of scope of this document.\nthen the MSC server shall:\n1)\thandle the SIP REFER request as specified in 3GPP TS 24.229 [2], IETF RFC 3515 [13] as updated by IETF RFC 6665 [81], and IETF RFC 4488 [20] without establishing an implicit subscription; and\nNOTE 3:\tIn accordance with IETF RFC 4488 [20], the MSC server inserts the Refer-Sub header field containing the value \"false\" in the SIP 2xx response to the SIP REFER request to indicate that it has not created an implicit subscription.\n2)\tsend a SIP INVITE request for transfer of an additional early session in accordance with the procedures specified in 3GPP TS 24.229 [2] and IETF RFC 3515 [13]. The SC UE shall populate the SIP INVITE request as follows:\nA.\theader fields which were included as URI header fields in the URI in the Refer-To header field of the received SIP REFER request as specified in IETF RFC 3261 [19] except the \"body\" URI header field;\nB)\tthe SDP offer with:\na)\tthe same amount of the media descriptions as in the \"body\" URI header field in the URI in the Refer-To header field of the received SIP REFER request;\nb)\teach \"m=\" line having the same media type as the corresponding \"m=\" line in the \"body\" URI header field in the URI in the Refer-To header field of the received SIP REFER request;\nc)\tport set to zero value in each \"m=\" line whose corresponding \"m=\" line in the \"body\" URI header field in the URI in the Refer-To header field of the received SIP REFER request has port with zero value; and\nd)\tmedia directionality as in the \"body\" URI header field in the URI in the Refer-To header field of the received SIP REFER request; and\nNOTE 4:\tport can be set to zero or nonzero value for the offered \"m=\" line whose corresponding \"m=\" line in the \"body\" URI header field in the URI in the Refer-To header field of the received SIP REFER request has port with nonzero value.\ne)\tif local configuration indicates that the network is serving users supporting the precondition mechanism, indicate preconditions as met, using the segmented status type, as defined in IETF RFC 3312 [88] and IETF RFC 4032 [rfc4032], as well as the strength-tag value \"mandatory\" for the local segment and the strength-tag value either \"optional\" or as specified in RFC 3312 [88] and RFC 4032 [89] for the remote segment;\nC)\tif the MSC server supports the MSC server assisted mid-call feature, include the g.3gpp.mid-call media feature tag as described in annex C in the Contact header field according to IETF RFC 3840 [53];\nD)\tif local configuration indicates that the network is serving users supporting SIP preconditions, include:\na)\ta \"100rel\" option tag as defined in IETF RFC 3262 [86] to indicate the support for reliable provisional responses; and\nb)\ta \"precondition\" option tag as defined in IETF RFC 3312 [88] to indicate the support for the SIP precondition mechanism; and\nE)\tif a P-Asserted-Identity header field is not included in the headers portion of the URI in the Refer-To header field of the received SIP REFER request as specified in IETF RFC 3261 [19], include a P-Asserted-Identity header field with the value of the P-Asserted-Identity header field of the SIP INVITE requests due to STN which created the dialog in which the SIP REFER request is received.\nUpon receipt of a SIP 18x response to SIP INVITE request for an additional early session, the MSC server shall:\n1)\tassociate the SIP INVITE request for an additional early session with CS call with transaction identifier calculated as in the table 9.2.1A-1 and TI flag value as in originating mobile case;\n2)\tif the received response is a not a SIP 180 (Ringing) response enter the \"mobile originating call proceeding\" (N3) state as specified in 3GPP TS 24.008 [8]; and\n3)\tif the received response is a SIP 180 (Ringing) response enter the \"call delivered\" (N4) state as specified in 3GPP TS 24.008 [8].\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "9.8\tMSC server enhanced for dual radio access transfer using a SIP interface",
                    "description": "",
                    "summary": "",
                    "text_content": "",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": [
                        {
                            "title": "9.8.1\tGeneral",
                            "text_content": "When the MSC server enhanced for dual radio access transfer using a SIP interface receives a CC SETUP message containing the Called Party BCD number information element with the STN, the MSC server shall:\n1.\tsuppress services provided by the home network as part of the call setup procedures; and\n2.\tnot provide announcement or other in-band media for any calls that have been transferred or are in the process of being transferred.\nNOTE 1:\tIn the case of roaming the home network operator need to provide the STN as part of the bilateral operator agreement.\nAn MSC server enhanced for dual radio access transfer using a SIP interface shall interwork CC messages as specified in 3GPP TS 29.292 [18].\nIf the MSC server enhanced for dual radio access transfer using a SIP interface supports PS to CS dual radio access transfer for calls in alerting phase, the MSC server shall apply the procedures specified in subclause 9.7.\nNOTE 2:\tAn MSC server enhanced for dual radio access transfer using a SIP interface that supports PS to CS dual radio access transfer for originating calls in pre-alerting phase also supports PS to CS dual radio access transfer for calls in alerting phase.\nNOTE 3:\tThe MSC server enhanced for dual radio access transfer using a SIP interface cannot support PS to CS dual radio access transfer of calls in alerting phase on the terminating side since transfer of a waiting call requires ICS functionality. A waiting call will be transferred using CS access via MGCF when ICS functionality is not supported by the MSC server.\nThe MSC server enhanced for dual radio access transfer using a SIP interface supporting the MSC server assisted mid-call feature for speech sessions shall apply the procedures specified in subclause 9.5.\n",
                            "figures_meta_data": [],
                            "tables": []
                        }
                    ]
                },
                {
                    "title": "9.9\tEATF",
                    "description": "",
                    "summary": "",
                    "text_content": "",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": [
                        {
                            "title": "9.9.1\tEATF procedures for PS to CS session continuity, dual radio session transfer of emergency session",
                            "text_content": "The EATF needs to distinguish the following initial SIP INVITE request to provide specific functionality for dual radio session transfer of IMS emergency session:\n1.\tSIP INVITE request routed to the EATF due to E-STN-DRVCC in the Request-URI. In the procedures below, such requests are known as \"SIP INVITE requests due to E-STN-DRVCC\".\nOther initial SIP requests can be dealt with in any manner conformant with 3GPP TS 24.229 [2].\nWhen the EATF receives a SIP INVITE request due to E-STN-DRVCC on the Target Access Leg, the EATF shall:\n1.\tassociate the SIP INVITE request due to E-DRVCC-SR with a source access leg, i.e. an emergency session with active speech media component anchored at the EATF.\nNOTE 1:\tThe EATF has generated the E-STN-DRVCC when the related emergency SIP INVITE requrest was received and has delivered the E-STN-DRVCC to the UE in the SIP 200 (OK) response to the UE.\nIf no source access leg exists, i.e. no dialog supporting a session with active speech media component exists or if multiple source access legs exist, then the EATF shall send a SIP 480 (Temporarily Unavailable) response to reject the SIP INVITE request due to E-STN-DRVCC; and\n2.\toriginate session modification as described in 3GPP TS 24.229 [2] towards the remote side with a new SDP offer with media characteristics as received in the SIP INVITE request due to E-STN-DRVCC.\nUpon reception of the SIP ACK request to the SIP 200 (OK) response to the SIP INVITE request due to E-STN-DRVCC from the target access leg, the EATF shall release the source legs as follows:\n1)\tif the source access leg is an ongoing session containing only an active media component, send a SIP BYE request on the source access leg in accordance with 3GPP TS 24.229 [2]; or\n2)\tif the source access leg contains media components other than speech media component, send a SIP re-INVITE request to update the source access leg in accordance with 3GPP TS 24.229 [2].\nNOTE 2:\tDelaying the release of the source access leg as described above allows an SC UE to reuse the PS dialog in case of PS to CS DRVCC cancellation.\n",
                            "figures_meta_data": [],
                            "tables": []
                        }
                    ]
                }
            ]
        },
        {
            "title": "10\tRoles for PS-PS access transfer",
            "description": "",
            "summary": "",
            "tables": [],
            "figures_meta_data": [],
            "subsections": [
                {
                    "title": "10.1\tIntroduction",
                    "description": "",
                    "summary": "",
                    "text_content": "This clause specifies the procedures for PS-PS access transfer for both full media transfer case and partial media transfer case. Procedures are specified for the SC UE and the SCC AS.\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "10.2\tSC UE",
                    "description": "",
                    "summary": "",
                    "text_content": "",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": [
                        {
                            "title": "10.2.0\tGeneral",
                            "text_content": "The SC UE may be engaged in one or more ongoing sessions or in one or more SIP dialogs in early state before performing access transfer. By an ongoing session, it is meant a session for which the SIP 2xx response for the initial SIP INVITE request to establish this session has been sent or received. By a SIP dialog in early state, it is meant an early SIP dialog which has been created by a provisional response to the initial SIP INVITE request, but for which the SIP 2xx response has not yet been sent or received.\nThe SC UE shall follow the procedures specified in subclause 6.2 to perform registration in the IM CN subsystem on the newly selected access network before performing PS-PS access transfer. When registering a new contact address, the SC UE may either:\na)\tnot employ the multiple registration mechanism. In this case, upon the registration of the new contact address, all dialogs associated with the old contact address are terminated by the S-CSCF. The terminated dialogs include the dialog on the Source Access Leg and the SC UE's subscription dialog to its reg-event; or\nNOTE 1:\tSince the SCC AS retains the information pertaining to the dialog on the Source Access Leg, as specified in subclause 10.3.4, upon receiving an initial SIP INVITE request due to PS to PS STI (i.e. on the Targer Access Leg) containing the Replaces header field, the SCC AS will be able to identify the dialog toward the the remote UE associated with the dialog on the Source Access Leg being replaced.\nb)\temploy the multiple registration mechanism. In this case, the SC UE may either:\n-\tadd new flow that terminates at the new contact address, and leave all dialogs associated with the old flow and old contact address intact; or\n-\treplace the old flow that terminates at the old contact address with a new flow that terminates at the new contact address, resulting in all dialogs associated with the old flow and old contact address being terminated (include the dialog on the Source Access Leg and the SC UE's subscription dialog to its reg-event).\nNOTE 2:\tSince the SCC AS retains the information pertaining to the dialog on the Source Access Leg, as specified in subclause 10.3.4, upon receiving an initial SIP INVITE request due to PS to PS STI (i.e. on the Targer Access Leg) containing the Replaces header field, the SCC AS will be able to identify the dialog toward the the remote UE associated with the dialog on the Source Access Leg being replaced.\nNOTE 3:\tWhen transferring all media from the Source Access Leg to the Target Access Leg, the SC UE can replace the old flow with a new flow, and let the network terminate all dialogs and the registration associated with the old flow, rather than the SC UE performing these actions itself.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "10.2.1\tFull session transfer",
                            "text_content": "This subclause specifies a full session transfer applicable to a SC UE that supports dual mode operation and multiple registration procedure.\nTo initiate PS-PS access transfer for a session, upon acquiring the resources for media on the Target Access Leg, the SC UE shall send a SIP INVITE request due to PS to PS STI on the Target Access Leg in accordance with UE procedures specified in 3GPP TS 24.229 [2]. The SC UE shall populate the SIP INVITE request as follows:\n1)\tthe Request-URI set to\nA)\tif the PS to PS STI URI is configured in the SC UE, the configured PS to PS STI URI; and\nB)\tif the PS to PS STI URI is not configured in the SC UE, the URI contained in the Contact header field returned at the creation of the dialog on the Source Access Leg;\n2)\tinclude in the Contact header field:\nA)\ta public GRUU or temporary GRUU as specified in 3GPP TS 24.229 [2] if a GRUU was received at registration; and\nB)\tthe g.3gpp.ics media feature tag set to \"principal\" as specified in annex B of 3GPP TS 24.292 [4];\n3)\tselect one of the following options:\nA)\tif usage of SIP Replaces extension is selected:\na)\tthe Replaces header field populated as specified in IETF RFC 3891 [10], containing the dialog identifier of the session to be transferred; and\nb)\tthe Require header field populated with the option tag value \"replaces\"; or\nB)\tif usage of SIP Target-Dialog extension is selected:\na)\tthe Target-Dialog header field populated as specified in IETF RFC 4538 [11], containing the dialog identifier of the session to be transferred; and\nb)\tthe Require header field populated with the option tag value \"tdialog\";\n4)\tthe SDP payload set for the media component(s) to be transferred, in accordance with the UE SDP origination procedures specified in 3GPP TS 24.229 [2]. The SC UE shall create an SDP offer that contains the same number of media lines in the same order, where each media line corresponds to one of the media components in the original session, unless media components need to be added, and such that:\nA)\teach media line indicates the same media type as its corresponding media component in the original session and contains at least one codec that was negotiated during the original session;\nB)\tall or a subset of payload type numbers and their mapping to codecs and media parameters are not conflicting with those negotiated in the original session.; and\nC)\tif the SC UE determines to:\na)\tremove a media component during the transfer, set the media line for this media component to a port number with value zero; and\nb)\tadd new media component(s) during the transfer, include one additional media line with the desired media type and codecs for each new media component at the end of the SDP and indicate that the resources are available;\n5)\tif the Source Access Leg is an early dialog and this early dialog was created by the SC UE receiving a SIP INVITE request, indicate support of the info package mechanism as specified in IETF RFC 6086 [54]; and\n6)\tsignalling elements described in subclause 6A.2.2.2.\nNOTE 1:\tIf an SC UE is an ICS UE with an ongoing session using CS bearer and Gm reference point for service control signalling, the SC UE can perform an access transfer of the service control signalling from the current IP-CAN to a new IP-CAN with the same capabilities (i.e. supporting CS and PS bearers, simultaneously) while retaining the media component in the CS access network by including the description of audio/video media over a circuit switched bearer in the SDP of the access transfer request, so that service continuity of the session is maintained.\nIf the dialog on the Source Access Leg is a confirmed dialog, then upon receiving SIP 2xx response for its SIP INVITE request due to PS to PS STI sent on the Target Access Leg, the SC UE shall:\n1)\tsend a SIP ACK request;\n2)\tconsider the confirmed dialog on the Source Access Leg as being successfully transferred to the Target Access Leg; and\n3)\tsend a SIP BYE request to the SCC AS on the Source Access Leg to terminate the confirmed dialog on the Source Access Leg, if the confirmed dialog is still active (e.g. it has not been released by the SCC AS).\nNOTE 2:\tIf the dialog on the Source Access Leg is a confirmed dialog, the SC UE upon sending an initial SIP INVITE request due to PS to PS STI on the Target Access Leg will not receive any SIP provisional response from the SCC AS, i.e. the initial SIP INVITE request due to PS to PS STI is either accepted with the SIP 200 (OK) response containing the SDP answer or rejected with an appropriate final SIP response.\nNOTE 2A:\tIf the contact address used by the dialog over the Source Access Leg was registered using multiple registration procedure, and the flow over the Target Access Leg did not replace the flow over the Source Access Leg, then upon transferring the dialog to the Target Access Leg, the SC UE is still registered on the Source Access Leg and its subscription dialog to its reg-event the Source Access Leg is intact.\nIf the dialog on the Source Access Leg is a confirmed dialog and if the SC UE receives any SIP 4xx – 6xx response to the SIP INVITE request due to PS to PS STI sent on the Target Access Leg, then PS-PS access transfer has not completed successfully and the call will continue in the Source Access Leg.\nIf the dialog on the Source Access Leg is an early dialog, then upon receiving a SIP 183 (Session Progress) response for its SIP INVITE request due to PS to PS STI sent on the Target Access Leg containing the SDP answer, the SC UE shall:\nNOTE 3:\tIf the dialog on the Source Access Leg is an early dialog, then the SC UE upon sending an initial SIP INVITE request due to PS to PS STI on the Target Access Leg, receives either a SIP 183 (Session Progress) response containing the SDP answer or the initial SIP INVITE request due to PS to PS STI is rejected with an appropriate final SIP response.\n1)\trespond with a SIP PRACK request; and\n2)\tupon receiving the SIP 200 (OK) response for the SIP PRACK request, consider the early dialog on the Source Access Leg as being successfully transferred to the Target Access Leg and being at the same early dialog stage as the early dialog on the Source Access Leg.\nNOTE 4:\tAll subsequent SIP requests or SIP responses originating from the remote UE and destined for the SC UE will be sent to the SC UE over the Target Access Leg. For example, in case of an early dialog originated by the SC UE sending an initial SIP INVITE request to the remote UE and receiving a SIP 183 (Session Progress) response on the Source Access Leg, and subsequently transferring the early dialog to the Target Access Leg, the SIP 180 (Ringing) response from the remote UE will be conveyed to the SC UE on the Target Access Leg rather than on the Source Access Leg.\nSince, upon receiving the SIP 200 (OK) response for the SIP PRACK request, the early dialog and the associated media have been transferred from the Source Access Leg to the Target Access Leg (i.e. the resources for media on the Source Access Leg are not used any more), the SC UE may releases the resources on the Source Access Leg by sending a SIP UPDTE request with an appropriate SDP offer on the Source Access Leg. However, in spite of releasing the resources, the dialog on the Source Access Leg is still in the early dialog phase.\nIf the dialog on the Source Access Leg is an early dialog  that was created by the SC UE receiving a SIP INVITE request on the Source Access Leg (i.e. an incoming call), then upon receiving the SIP 200 (OK) response for the SIP PRACK request, the SC UE shall:\n1)\tif the served user accepted the incoming call:\na)\tsend the SIP INFO request on the Target Access Leg containing:\nA)\tan Info-Package header field as specified in IETF RFC 6086 [54] with g.3gpp.state-and-event info package name; and\nB)\tapplication/vnd.3gpp.state-and-event-info+xml XML body associated with the info package according to IETF RFC 6086 [54] and with the event XML element containing \"call-accepted\" to indicate that the called party has answered the call; and\nb)\tupon receiving the SIP 200 (OK) response for  the SIP INFO request, and subsequently upon receiving a SIP 200 (OK) response for its SIP INVITE request due to PS to PS STI sent on the Target Access Leg:\nA)\tconsider the early dialog becoming a confirmed dialog and as being successfully transferred to the Target Access Leg; and\nB)\trelease the early dialog on the Source Access Leg, by sending a  SIP 410 (Gone) response on the Source Access Leg, if this early dialog is still active (e.g. it has not been previously terminated by the SCC AS);\n2)\tif the incoming call is rejected:\nNOTE 5:\tIf, upon the early dialog being transferred to the Target Access Leg, the SC UE rejects the incoming call, the SC UE will terminate the early dialog on the Target Access Leg and the early dialog on the Source Access Leg.\na)\tsend a SIP CANCEL request on the Target Access Leg that pertains to the SIP INVITE request due to PS to PS STI; and\nb)\tsend a SIP 410 (Gone) response to the initial SIP INVITE request received on the Source Access Leg; or\n3)\tif the early dialog is transferred back from the Target Access Leg to the Source Access Leg (e.g. the radio is lost while the SC UE is ringing) before the SC UE sends the SIP INFO request on the Target Access Leg:\nNOTE 6:\tIf the SC UE transfers back the early dialog from the Target Access Leg to the Source Access Leg, it will re-acquire the resources for media on the Source Access Leg, terminate the early dialog on the Target Access Leg, and accept the incoming call on the Source Access Leg.\na)\trelease the early dialog on the Target Access Leg, by sending a SIP CANCEL request on the Target Access Leg that pertains to the SIP INVITE request due to PS to PS STI;\nb)\tre-acquire the resources for media on the Source Access Leg, if previously released, send a SIP UPDATE request with an appropriate SDP offer on the Source Access Leg; and\nc)\twhen the served user ether accepts the call or the call is rejected, send the respective final SIP response on the Source Access Leg, as specified in 3GPP TS 24.229 [2].\nIf the dialog on the Source Access Leg is an early dialog  that was created by the SC UE sending a SIP INVITE request on the Source Access Leg (i.e. an outgoing call), then upon receiving SIP 200 (OK) response for the SIP PRACK request, the SC UE shall:\n1)\tif the SC UE receives a SIP 200 (OK) response for the SIP INVITE request due to PS to PS STI sent on the Target Access Leg (i.e. the outgoing call is accepted by the remote UE):\na)\tsend a SIP ACK request to the received SIP 200 (OK) response;\nb)\tconsider the early dialog becoming a confirmed dialog and as being successfully transferred to the Target Access Leg; and\nc)\tterminate the early dialog on the Source Access Leg, by sending a SIP CANCEL request on the Source Access Leg, if this early dialog is still active (e.g. has not been previously terminated by the SCC AS);\n2)\tif the SC UE receives a the SIP 410 (Gone) response to the initial SIP INVITE request on the Source Access Leg, and subsequently any SIP 4xx or 5xx final response to the SIP INVITE request due to PS to PS STI (i.e. the outgoing call is rejected by the remote UE):\na)\tconsider the early dialogs as terminated; or\nNOTE 7:\tIf the remote UE rejects the call, the SCC AS will terminate the early dialog on the Source Access Leg prior to terminating the early dialog on the Target Access Leg. This will insure that the SC UE does not un-necessarily transfer the call to the Source Access Leg (e.g. re-acquires the resources for media) prior to the early dialog on the Source Access Leg being terminated.\n3)\tif the early dialog is transferred back from the Target Access Leg to the Source Access Leg (e.g. the radio is lost while the remote UE is ringing) before the SC UE receives any final response on the Target Access Leg:\nNOTE 8:\tIf the SC UE transfers back the early dialog from the Target Access Leg to the Source Access Leg, it will re-acquire the resources for media on the Source Access Leg, terminate the early dialog on the Target Access Leg, and wait for the outgoing call to be either accepted or rejected by the remote UE.\na)\trelease the early dialog on the Target Access Leg, by sending a SIP CANCEL request on the Target Access Leg that pertains to the SIP INVITE request due to PS to PS STI;\nb)\tre-acquire the resources for media on the Source Access Leg, if previously released and send a SIP UPDATE request with an appropriate SDP offer on the Source Access Leg; and\nc)\twait for the final SIP response from the remote UE on the Source Access Leg that will indicate whether the call was accepted or rejected by the remote UE, and proceed as specified in 3GPP TS 24.229 [2].\nIf the dialog on the Source Access Leg is an early dialog and if the SC UE receives a SIP 4xx – 6xx response to its initial SIP INVITE request due to PS to PS STI sent on the Target Access Leg, (i.e. the access transfer of the early dialog has not completed successfully), the early dialog shall continue on the Source Access Leg, if this early dialog is still active. Hence, the SC UE shall:\nNOTE 9:\tSince the early dialog on the Target Access Leg is terminated by the SCC AS, the SC UE re-acquires the resources on the Source Access Leg.\na)\tre-acquire the resources for media on the Source Access Leg, if previously released and send a SIP UPDATE request with an appropriate SDP offer on the Source Access Leg; and\nb)\trespond with a SIP ACK request to the SIP 4xx – 6xx response, and consider the early dialog on the Target Access Leg as terminated, and either:\nA)\twait for the final SIP response from the remote UE on the Source Access Leg that will indicate whether the call was accepted or rejected by the remote UE, if the call is originated by the SC UE; or\nB)\tsend the respective final SIP response on the Source Access Leg when the call is accepted or rejected by the user, if the call is terminated at the SC UE.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "10.2.1A\tVoid",
                            "text_content": "",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "10.2.2\tPartial session transfer",
                            "text_content": "To initiate PS-PS access transfer for a session, the SC UE shall send a SIP INVITE request due to PS to PS STI over the Target Access Leg in accordance with UE procedures specified in 3GPP TS 24.229 [2]. The SC UE shall populate the SIP INVITE request as follows:\n1.\tthe Request-URI set to:\nA) if the PS to PS STI URI is configured in the SC UE, the configured PS to PS STI URI; and\nB)\tif the PS to PS STI URI is not configured in the SC UE, the URI contained in the Contact header field returned at the creation of the dialog over the Source Access Leg;\n2.\tinclude in the Contact header field:\nA.\ta public GRUU or temporary GRUU as specified in 3GPP TS 24.229 [2] if a GRUU was received at registration; and\nB.\tthe g.3gpp.ics media feature tag set to \"principal\" as specified in annex B of 3GPP TS 24.292 [4];\n3.\tthe Require header field with the option tag \"tdialog\" included;\n4.\tthe Target-Dialog header field populated as specified in IETF RFC 4538 [11], containing the dialog identifier of the session to be transferred;\n5.\tthe SDP payload set for the media component(s) to be transferred, in accordance with the UE SDP origination procedures specified in 3GPP TS 24.229 [2]. The SC UE shall create an SDP offer that contains the same number of media lines in the same order, where each media line corresponds to one of the media components in the original session, unless media components need to be added during the session transfer, and such that:\nA)\teach media line indicates the same media type as its corresponding media component in the original session and contains at least one codec that was negotiated during the original session;\nB) all or a subset of payload type numbers and their mapping to codecs and media parameters are not conflicting with those negotiated in the original session; and\nC)\tif the SC UE determines to:\na.\tkeep the media component on the Source Access Leg, set the media line for this media component to a port number with value zero; and\nb.\tadd new media component(s) during the transfer, include one additional media line with the desired media type and codecs for each new media component at the end of the SDP; and\nNOTE:\tIf an SC UE is an ICS UE with an ongoing session using CS bearer and Gm reference point for service control signalling, the SC UE can perform an access transfer of the service control signalling from the current IP-CAN to a new IP-CAN with the same capabilities (i.e. supporting CS and PS bearers, simultaneously) while retaining the media component in the CS access network by including the description of audio/video media over a circuit switched bearer in the SDP of the access transfer request, so that service continuity of the session is maintained.\n6.\tsignalling elements described in subclause 6A.2.2.2.\nUpon receiving SIP 2xx response for the SIP INVITE request due to PS to PS STI sent over the Target Access Leg and sending SIP ACK request, the SC UE shall send a SIP re-INVITE request to the SCC AS over the Source Access Leg to update the original session. The SC UE shall populate the SIP re-INVITE request as follows:\n1.\tthe SDP payload set for all the media component(s) within the original session, in accordance with the UE SDP origination procedures specified in 3GPP TS 24.229 [2]. The SC UE shall set the port number for a media component to zero if that media component has been transferred to the Target Access Leg or has to be removed.\nIf the SC UE receives any SIP 4xx – 6xx response to the SIP INVITE request due to PS to PS STI sent over the Target Access Leg, then PS-PS access transfer has not completed successfully and the call will continue in the Source Access Leg.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "10.2.3\tVoid",
                            "text_content": "",
                            "figures_meta_data": [],
                            "tables": []
                        }
                    ]
                },
                {
                    "title": "10.3\tSCC AS",
                    "description": "",
                    "summary": "",
                    "text_content": "",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": [
                        {
                            "title": "Distinction of requests sent to the SCC AS",
                            "text_content": "The SCC AS needs to distinguish between the following initial SIP INVITE requests to provide specific functionality relating to access transfer:\n-\tIf the g.3gpp.pstops-sti media feature tag was included in the Contact header field of the REGISTER request when the SC UE registered, SIP INVITE requests routed to the SCC AS with the Request-URI containing the PS to PS STI URI belonging to the subscribed user are known as \"SIP INVITE requests due to STI\".\n-\tIf the g.3gpp.pstops-sti media feature tag was not included in the Contact header field of the REGISTER request when the SC UE registered, SIP INVITE requests routed to the SCC AS containing a STI belonging to the subscribed user in the Replaces header field or Target-Dialog header field and not containing Inter UE Transfer SCC AS URI in the Request-URI and not containing the additional transferred session SCC AS URI in the Request-URI are known as \"SIP INVITE requests due to STI\".\nNOTE:\tThe media streams that need to be transferred are identified using information described in the subsequent sections.\nOther SIP initial requests for a dialog and requests for a SIP standalone transaction can be dealt with in any manner conformant with 3GPP TS 24.229 [2].\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "S to PS access transfer procedures at the SCC AS",
                            "text_content": "This subclause applies to reception of a SIP INVITE request due to STI with a PS media only.\nWhen the SCC AS receives a SIP INVITE request due to STI on the Target Access Leg, the SCC AS shall:\n-\tassociate the SIP INVITE request on the Target Access Leg with a confirmed dialog or an early dialog on the Source Access Leg by matching the dialog identifier present in either the Replaces header field (see IETF RFC 3891 [10]) or the Target Dialog header field (see IETF RFC 4538 [11]) of the SIP INVITE request with a confirmed dialog or with an early dialog. By a previously established dialog, it is meant a dialog for which a SIP 2xx response to the initial SIP INVITE request has been sent or received. By an early dialog, it is meant an early dialog which has been created by a provisional response to the initial SIP INVITE request, but for which the SIP 2xx response has not yet been sent or received;\n-\tif the SCC AS is unable to associate the SIP INVITE request with a confirmed dialog or an early dialog, send a SIP 480 (Temporarily Unavailable) response to reject the SIP INVITE request due to STI and not processes the remaining steps;\n-\tif the SIP INVITE request contains a Replaces header field:\na)\tvoid; and\nb)\tsend a SIP re-INVITE request towards the remote UE using the confirmed dialog or send SIP UPDATE request(s) towards the remote UE(s) using the existing early dialog(s) which were created by the same SIP INVITE request as the Source Access Leg. The SCC AS shall populate the SIP re-INVITE request or the SIP UPDATE request(s) with a new SDP offer, including the media characteristics as received in the SIP INVITE request due to STI received on the Target Access Leg, by following the rules of 3GPP TS 24.229 [2]. If priority is supported:\n1)\tif the SIP INVITE request contains a Resource-Priority header field, copy the Resource-Priority header field to the SIP re-INVITE request or the SIP UPDATE request; or\n2)\totherwise, if a confirmed dialog or an early dialog on the Source Access Leg previously contained an authorised Resource-Priority header field, the SCC AS shall populate the SIP re-INVITE request or the SIP UPDATE request with the authorised Resource-Priority header field;\n-\totherwise, if the SIP INVITE request contains a Target Dialog header field:\na)\tif the number of media lines in the Target Access Leg is less than the number of media lines in the Source Access Leg or the media type for the corresponding media lines is not the same as in the original session, send a SIP 4xx response to reject the SIP INVITE request relating to the access transfer and not process the remaining steps;\nb)\totherwise, either send a SIP re-INVITE request towards the remote UE using the confirmed dialog or send a SIP UPDATE request(s) towards the remote UE(s) using the existing early dialog(s) which were created by the same SIP INVITE request as the Source Access Leg. The SCC AS shall populate the SIP re-INVITE or the SIP UPDATE request(s) as follows:\n1)\tvoid; and\n2)\tinclude a new SDP offer, following the rules specified in 3GPP TS 24.229 [2], containing the following media information:\ni)\tthe media characteristics as received in the SIP INVITE request due to STI received on the Target Access Leg for media streams whose port is not set to zero; and\nii)\tfor the media streams in the SIP INVITE request due to STI whose port is set to zero, include the corresponding media characteristics of those streams from the Source Access Leg; and\n3)\tif priority is supported:\ni)\tif the SIP INVITE request contains a Resource-Priority header field, copy the Resource-Priority header field to the SIP re-INVITE request or the SIP UPDATE request; or\nii)\totherwise, if  a confirmed dialog or an early dialog on the Source Access Leg previously contained an authorised Resource-Priority header field, the SCC AS shall populate the SIP re-INVITE request or the SIP UPDATE request with the authorised Resource-Priority header field.\nIf the Remote Leg is a confirmed dialog, then upon receiving the SIP 200 (OK) response to the SIP re-INVITE request, the SCC AS shall:\n1)\tsend a SIP 200 (OK) response to the initial SIP INVITE request due to STI containing:\nA)\ta SDP answer constructed from the SDP answer received in the SIP 200 (OK) response to the SIP re-INVITE request;\nB)\tthe signalling elements described in subclause 6A.4.3; and\nC)\tthe backwards indication (see 3GPP TS 24.229 [2]), if priority is supported and the SIP 200 (OK) contained a backwards indication;\n2)\tconsider the confirmed dialog on the Source Access Leg as being successfully transferred to the Target Access Leg; and\n3)\tif the SIP INVITE request due to STI contains:\n-\ta Replaces header field, send a SIP BYE request on the Source Access Leg to terminate the dialog on the Source Access Leg, if the dialog is still active (e.g. it has not been previously released by the SC UE); or\n-\ta Target Dialog header field and SDP of the SIP INVITE request due to STI contains:\na)\tno media line whose port is set to zero, send a SIP BYE request on the Source Access Leg to terminate the dialog on the Source Access Leg if the dialog is still active (e.g. it has not been previously released by the SC UE); or\nb)\tany media line whose port is not zero, receive the SIP BYE request or SIP re-INVITE request from the Source Access Leg in the case of removing media during full transfer or partial access transfer, respectively.\nWhen the SCC AS receives the SIP BYE request on the Source Access Leg, the SCC AS shall:\n-\tif any media are still remaining on the Source Access Leg,\na)\tsend SIP 200 (OK) response for the SIP BYE request; and\nb)\tsend SIP re-INVITE request to the remote UE to delete the media on the Source Access Leg by following the rules of 3GPP TS 24.229 [2]; and\n-\tif there are no media on the Source Access Leg, send the SIP 200 (OK) respones for the SIP BYE request.\nIf the SCC AS receives the SIP 200 (OK) response about the SIP re-INVITE request to the remote UE (created by SIP BYE request), the SCC AS sends a SIP ACK request to acknowledge the received SIP 200 (OK) response.\nWhen the SCC AS receives the SIP re-INVITE request on the Source Access Leg, the SCC AS shall send a SIP 200 (OK) response on the Source Access Leg to acknowledge the receipt of the SIP re-INVITE request.\nIf the Remote Leg is a confirmed dialog, and if subsequent to sending the SIP re-INVITE request to the remote UE and prior to sending any final SIP response on the Target Access Leg, the SCC AS decides (for any reason) to reject the access transfer request, the SCC AS shall release the Target Access Leg (e.g. by sending a SIP 4xx response), retain the Source Access Leg, and update the Remote Leg to match the Source Access Leg.\nIf the Remote Leg is an early dialog then upon receiving the SIP 2xx response to the SIP UPDATE request, the SCC AS shall send SIP 183 (Session Progress) response to the SIP INVITE request due to STI. The SCC AS shall populate the SIP 183 (Session Progress) response as follows:\na)\tinclude a SDP answer constructed from the SDP answer received in the SIP 2xx response to the SIP UPDATE request;\nb)\tif the Remote Leg is an early dialog originated by the remote UE, include a Recv-Info header field containing the g.3gpp.state-and-event package name;\nc)\tif the Remote Leg is an early dialog originated by the SC UE, if the SIP INVITE request due to STI contains a P-Early-Media header field with the \"supported\" parameter and if the SCC AS has received a P-Early-Media header field in a SIP message in the dialog of the SIP UPDATE request, include a P-Early-Media header field containing the value of the last P-Early-Media header field received in a SIP message in the dialog of the SIP UPDATE request; and\nd)\tsignalling elements described in subclause 6A.4.3.\nIf the dialog on the Source Access Leg is an early dialog, then upon receiving the SIP PRACK request for the SIP 183 (Session Progress) response and responding with a SIP 200 (OK) response, the SCC AS shall consider the early dialog on the Source Access Leg as being successfully transferred to the Target Access Leg and being at the same early dialog stage as the early dialog on the Source Access Leg.\nNOTE 1:\tAll subsequent SIP requests or SIP responses originating from the remote UE and destined for the SC UE will be sent to the SC UE over the Target Access Leg. If the SCC AS receives any SIP request on the Source Access Leg, the SCC AS will not convey the received SIP request to the remote UE.\nIf, upon sending the SIP 200 (OK) response for the SIP PRACK request, the SCC AS receives a SIP UPDATE request on the Source Access Leg that contains an SDP offer that indicates that the SC UE is releasing the resources for media on the Source Access Leg, the SCC AS will respond with a SIP 200 (OK) response containing the appropriate SDP answer, as specified in 3GPP TS 24.229 [2]. However, in spite of the resources being released, the dialog on the Source Access Leg is still active and in the early dialog phase.\nIf the Remote Leg is an early dialog originated by the remote UE, then upon sending the SIP 200 (OK) response for the SIP PRACK request, and when the SCC AS:\n1)\treceives the SIP INFO request on the Target Access Leg(indicating that the SC UE has accepted the call) containing:\na)\tan Info-Package header field as specified in IETF RFC 6086 [54] with 3gpp.state-and-event info package name; and\nb)\tapplication/vnd.3gpp.state-and-event-info+xml XML body associated with the info package according to IETF RFC 6086 [54] and with the event XML element containing \"call-accepted\" to indicate that the called party has answered the call;\nthe SCC AS shall:\na)\tsend a SIP 200 (OK) response on the Target Access Leg to acknowledge the receipt of the SIP INFO request;\nb)\tsend SIP 200 (OK) response to the initial SIP INVITE request to the remote UE;\nc)\tupon sending the SIP 200 (OK) response to the SIP INFO request, send another SIP 200 (OK) response on the Target Access Leg that pertains to the SIP INVITE request due to STI received on the Target Access Leg. The SCC AS shall populate the SIP 200 (OK) response to the SIP INVITE request due to STI with signalling elements described in subclause 6A.4.3;\nd)\tterminate the early dialog on the Source Access Leg, if still active (i.e. if not previously terminated by the SC UE) by sending a SIP CANCEL request on the Source Access Leg; and\nNOTE 2:\tThe SCC AS may delay the termination of the early dialog on the Source Access Leg to let the SC UE terminate this early dialog.\ne)\tconsider the early dialog becoming a confirmed dialog and successfully transferred to the Target Access Leg; or\n2)\treceives both:\nNOTE 3:\tIf the SC UE wants to reject the incoming call, upon initiating the transfer of the early dialog to the Target Access Leg, the SC UE will terminate both early dialogs, i.e. the early dialog on the Target Access Leg and the early dialog on the Source Access Leg.\na)\ta SIP CANCEL request on the Target Access Leg cancelling the SIP INVITE request due to STI; and\nb)\ta SIP 410 (Gone) response to the initial SIP INVITE request sent on the Source Access Leg;\nthe SCC AS shall:\na)\trespond to the SIP CANCEL request as specified in 3GPP TS 24.229 [2];\nb)\trespond to the SIP 410 (Gone) response as specified in 3GPP TS 24.229 [2];\nc)\tsend the appropriate SIP 4xx response to the initial SIP INVITE request received from the remote UE that indicates to the remote UE that the call has been rejected; and\nd)\tconsider the early dialogs as terminated; or\n3)\treceives:\nNOTE 4:\tIf the SC UE transfers back the early dialog from the Target Access Leg to the Source Access Leg, it will terminate the early dialog on the Target Access Leg, re-acquire the resources for media on the Source Access Leg, and accept the incoming call on the Source Access Leg.\na)\ta SIP CANCEL request on the Target Access Leg cancelling the SIP INVITE request due to STI; and\nb)\ta SIP UPDATE request containing a SDP offer on the Source Access Leg, that indicates that the SC UE has re-acquired the resources for media on the Source Access Leg, if previously released;\nNOTE 5:\tIf the resources for media on the Source Access Leg have not been previously released, the SCC AS will not receive the SIP UPDATE request containing a SDP offer.\nthe SCC AS shall:\na)\trespond to the SIP CANCEL request as specified in 3GPP TS 24.229 [2];\nb)\tif a SIP UPDATE request containing a SDP offer on the Source Access Leg was received:\nA)\tsend a SIP UPDATE request to the remote UE containing a SDP offer constructed from the SDP offer included in the SIP UPDATE request received on the Source Access Leg; and\nB)\twhen the SIP 2xx response to the SIP UPDATE request containing the SDP answer is received from the remote UE, send a SIP 200 (OK) response to the SIP UPDATE request received on the Source Access Leg that includes a SDP answer constructed from the SDP answer received in the SIP 2xx response to the SIP UPDATE request received from the remote UE; and\nc)\tconsider the early dialog as being transferred back to the Source Access Leg.\nIf the Remote Leg is an early dialog terminated at the remote UE, then upon sending the SIP 200 (OK) response for the SIP PRACK request, if the SCC AS:\n1)\treceives SIP 200 (OK) response to the initial SIP INVITE request from the remote UE indicating that the remote UE has answered the call;\nthe SCC AS shall:\na)\tsend a SIP 200 (OK) response toward the SC UE on the Target Access Leg that pertains to the SIP INVITE request due to STI. The SCC AS shall populate the SIP 200 (OK) response to the SIP INVITE request due to STI with signalling elements described in subclause 6A.4.3;\nb)\tterminate the early dialog on the Source Access Leg, if still active (i.e. if not previously terminated by the SC UE) by sending the SIP 410 (Gone); and\nc)\tconsider the early dialog becoming a confirmed dialog and as successfully transferred to the Target Access Leg;\n2)\treceives any final response (e.g. SIP 4xx response or SIP 5xx response) from the remote UE that indicates that the remote UE has rejected the call, the SCC AS shall:\nNOTE 6:\tIf the remote UE rejects the call, the SCC AS will terminate the early dialog on Source Access Leg prior to terminating the early dialog on the Target Access Leg. This will insure that the SC UE does not un-necessarily transfer the call to the Source Access Leg (e.g. re-acquires the resources) prior to the early dialog on the Source Access Leg being terminated.\na)\tsend the SIP 410 (Gone) response to the initial SIP INVITE request received on the Source Access Leg;\nb)\tthen send a final response to the SIP INVITE request due to STI that is identical to the final response (e.g. SIP 4xx response or SIP 5xx response) received from the remote UE; and\nc)\tconsider the early dialogs as terminated; or\n3)\treceives:\nNOTE 7:\tIf the SC UE transfers back the early dialog from the Target Access Leg to the Source Access Leg, before the SC UE receives any final response on the Target Access Leg, the SC UE will terminate the early dialog on the Target Access Leg,, re-acquire the resources for media on the Source Access Leg, and update the early dialog on the Source Access Leg.\na)\ta SIP CANCEL request on the Target Access Leg cancelling the SIP INVITE request due to STI; and\nb)\ta SIP UPDATE request containing a SDP offer on the Source Access Leg, that indicates that the SC UE has re-acquired the resources for media on the Source Access Leg, if previously released;\nNOTE 8:\tIf the resources for media on the Source Access Leg have not been previously released, the SCC AS will not receive an SIP UPDATE request containing a SDP offer.\nthen the SCC AS shall:\na)\trespond to the SIP CANCEL request as specified in 3GPP TS 24.229 [2];\nb)\tif a SIP UPDATE request containing a SDP offer on the Source Access Leg was received:\nA)\tsend a SIP UPDATE request to the remote UE containing a SDP offer constructed from the SDP offer included in the SIP UPDATE request received on the Source Access Leg; and\nB)\twhen the SIP 2xx response to the SIP UPDATE request containing the SDP answer is received from the remote UE, send a SIP 200 (OK) response to the SIP UPDATE request received on the Source Access Leg that includes a SDP answer constructed from the SDP answer received in the SIP 2xx response to the SIP UPDATE request received from the remote UE; and\nc)\tconsider the early dialog as being transferred back to the Source Access Leg.\nIf the Remote Leg is an early dialog, and if subsequent to sending the SIP UPDATE request to the remote UE, and prior to sending any final SIP response on the Target Access Leg, the SCC AS decides (for any reason) to reject the access transfer request, the SCC AS shall release the Target Access Leg (e.g. by sending a SIP 4xx response), retain the Source Access Leg, and update the remote leg to match the Source Access Leg.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "10.3.3\tVoid",
                            "text_content": "",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "10.3.4\tS-CSCF releasing the source access leg during PS to PS access transfer",
                            "text_content": "When SCC AS receives a SIP BYE request on an existing dialog on the Source Access Leg with the status code 480 (Temporarily Unavailable) in a Reason header field indicating that this dialog was released by the S-CSCF, the SCC AS shall delay the release of the dialog toward the the remote UE and retaining the information pertaining to the dialog on the Source Access Leg for a specific time interval. If the SCC AS:\na)\treceives within this time interval an initial INVITE request (i.e. on the Targer Access Leg) indicating that this dialog is replacing the dialog on the Source Access Leg, then the SCC AS shall not initiate the release of the dialog toward the the remote UE; or\nNOTE 1:\tBy retaining the information pertaining to the dialog on the Source Access Leg, and upon receiving an initial SIP INVITE request (i.e. on the Targer Access Leg), the SCC AS will be able to identify the dialog on the Source Access Leg and the associated dialog toward the the remote UE.\nb)\tdoes not receive within this time interval an initial SIP INVITE request (i.e. on the Target Access Leg) indicating that this dialog is replacing the dialog on the Source Access Leg, then the SCC AS shall initiate the release of the dialog toward the the remote UE and delete the information pertaining to the dialog on the Source Access Leg.\nNOTE 2:\tThe time interval is defined by the operator policy. The value of 8 seconds is an appropriate value for the time interval.\nNOTE 3:\tWhen the UE, prior to sending the initial SIP INVITE request on the Target Access Leg, registers new contact address and either uses the multiple registrations where new flow on the Target Access Leg replaces an old flow on the Source Access Leg or does not uses the multiple registrations, the S-CSCF will terminate all dialogs associated with the old constant address or old flow, as specified in 24.229. By retaining the information pertaining to the dialog on the Source Access Leg, the SCC AS knows which dialog is being replaced.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "10.3.5\tP-CSCF releasing the source access leg during PS to PS access transfer",
                            "text_content": "The procedures specified in subclause 12.3.3.2 apply.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "10.3.6\tP-CSCF releasing early dialog during PS to PS access transfer",
                            "text_content": "When the  that supports PS to PS access transfer for early dialogs, receives either:\n1)\ta SIP BYE request on the Source Access Leg, with the Reason header field containing a SIP 503 (Service Unavailable) response code, that is releasing an early dialog on the Source Access Leg originated by the SC UE;\n2)\ta SIP CANCEL request on the Source Access Leg, with the Reason header field containing a SIP 503 (Service Unavailable) response code, that is releasing an early dialog on the Source Access Leg originated by the SC UE;\n3)\ta SIP 503 (Service Unavailable) response on the Source Access Leg, that is releasing an early dialog on the Source Access Leg terminating at the SC UE;\n4)\ta SIP 500 (Server Internal Error) response on the Source Access Leg, that is releasing an early dialog on the Source Access Leg terminating at the SC UE;\nthe SCC AS shall delay the release of the associated early dialog toward the the remote UE on the Remote Leg and retaining the information pertaining to the early dialog on the Source Access Leg for a specific time interval. Subsequently, if the SCC AS:\n-\treceives within this time interval an initial SIP INVITE request on the Target Access Leg associated with the early dialog on the Source Access Leg, then the SCC AS shall not initiate the release of the early dialog toward the the remote UE on the Remote Leg; or\n-\tdoes not receive within this time interval an initial SIP INVITE request on the Target Access Leg associated with the early dialog on the Source Access Leg, then the SCC AS shall initiate the release of the early dialog toward the the remote UE on the Remote Leg and delete the information pertaining to the early dialog on the Source Access Leg.\nNOTE:\tThe time interval is defined by the operator policy. The value of 8 seconds is an appropriate value for the time interval.\n",
                            "figures_meta_data": [],
                            "tables": []
                        }
                    ]
                }
            ]
        },
        {
            "title": "11\tRoles for PS-PS access transfer in conjunction with PS-CS access transfer",
            "description": "",
            "summary": "",
            "tables": [],
            "figures_meta_data": [],
            "subsections": [
                {
                    "title": "11.1\tIntroduction",
                    "description": "",
                    "summary": "",
                    "text_content": "This clause specifies the procedures for PS-PS access transfer in conjunction with PS-CS access transfer. Procedures are specified for the SC UE and the SCC AS. For SC UE or SCC AS not supporting ICS procedures, PS-PS access transfer with a remote end in conjunction with PS-CS access transfer with the same remote end is only possible when the UE is active in a single CS call with the remote end i.e. support of session transfer with more than one CS call is not provided.\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "11.2\tSC UE",
                    "description": "",
                    "summary": "",
                    "text_content": "",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": [
                        {
                            "title": "SC UE procedures for PS to PS+CS access transfer",
                            "text_content": "The SC UE may be engaged in one or more ongoing sessions before performing access transfer. By an ongoing session, it is meant a session for which the SIP 2xx response for the initial SIP INVITE request to establish this session has been sent or received.\nThis subclause applies for IMS sessions containing not only speech media component, otherwise subclause 9.2.1 applies.\nIf SC using ICS is enabled then if the SC UE is using Gm, then for each session with speech media component to be transferred and starting with the full-duplex session with active speech media component, the SC UE shall send a SIP INVITE request to the SCC AS as specified for call origination for ICS UE using Gm in 3GPP TS 24.292 [4]. The SC UE shall populate the SIP INVITE request as specified for PS-PS access transfer with full media transfer in subclause 10.2.1 with the following exceptions:\n-\tThe SC UE shall indicate in the SIP INVITE request that the speech media component is using CS bearer with its corresponding media description.\n-\tWhen sending the SIP INVITE request for the full-duplex sessions with inactive speech media component and if precondition is used, the SC UE shall indicate that the related local preconditions for the speech media component are met.\n-\tFor the full-duplex session with active speech media component, upon receiving the PSI DN from the SCC AS, the SC UE shall follow the procedures for call origination for ICS UE using Gm in 3GPP TS 24.292 [4] to set up the CS bearer.\nIf service control over Gm for the CS bearer is retained on the source access leg, the SC UE shall:\n-\tsend an SIP INVITE request as specified for partial session transfer in subclause 10.2.2. indicating transfer of non-speech media to the target access leg; and\n-\tsend a SIP re-INVITE request over the source access leg indicating that the speech media component is to be transferred to a CS bearer as described in 3GPP TS 24.292 [4] subclause 8.2.2.2. If other media components are retained or added on the source access leg, then these are included in the SDP offer.\nFor the full-duplex session with active speech media component, upon receiving the SCC AS PSI DN from the SCC AS, the SC UE shall follow the procedures for call origination for ICS UE using Gm in 3GPP TS 24.292 [4] to set up the CS bearer.\nIf the SC UE is not using ICS capabilities and if the SC UE does not apply the MSC server assisted mid-call feature as specified in subclause 9.2.1A, then access transfer is only possible when the UE is active in a single full-duplex session with active speech media component.\nFor the non-speech components to be transferred to the PS Target Access Leg, the SC UE shall send a SIP INVITE request to the SCC AS as specified for PS-PS access transfer with partial media transfer in subclause 10.2.1. For the speech media component to be transferred to the CS Target Access leg, the SC UE shall send to the SCC AS a CC SETUP message as specified in 3GPP TS 24.008 [8]. When sending the CC SETUP message, the SC UE shall populate the CC SETUP message as follows:\n1)\tthe called party BCD number information element set to the STN; and\n2)\tType Of Number set to \"International\" and Numbering Plan Indicator set to \"E.164\".in the Called Party BCD Number information element.\nUpon receiving the SIP 2xx response from the SCC AS for the PS Target Access Leg and sending SIP ACK request and upon receiving CS call setup confirmation message, e.g. CC CONNECT message, for the CS Target Access Leg, the SC UE shall send a SIP BYE request to terminate the Source Access Leg, following the procedures specified in 3GPP TS 24.229 [2].\nIf the SC UE receives any SIP 4xx – 6xx response to the SIP INVITE request for the PS Target Access leg and receives CS call setup failure message for the CS Target Access Leg, then session transfer has not occurred and the call will continue in the original domains.\nIf the SC UE receives any SIP 4xx – 6xx response to the SIP INVITE request for the PS Target Access Leg and receives CS call setup confirmation message for the CS Target Access Leg, then the session transfer is only successful for part of the media components. The SC UE shall update the Source Access leg by following the procedures specified for PS-PS access transfer with partial media transfer in subclause 10.2.2 to indicate that all media components other than the speech media component are still maintained on the Source Access Leg.\nIf the SC UE receives CS call setup failure message for the CS Target Access Leg but receives a SIP 2xx response for the PS Target Access Leg, then the session transfer is only successful for part of the media components. Upon sending SIP ACK request, the SC UE shall update the Source Access leg by following the procedures specified for PS-PS access transfer with partial media transfer in subclause 10.2.2 to indicate that the speech media component is still maintained on the Source Access Leg.\nIn addition to the procedures described in subclause .3 the SC UE shall:\n-\tact as described in subclause 9.2.1A; and\n-\tif the MSC server assisted mid-call feature is applied, transfer the non-speech media components of the additional transferred session to the PS Target Access Leg as specified for PS-PS access transfer with partial media transfer in subclause 10.2.2.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "SC UE procedures for PS+CS to PS access transfer",
                            "text_content": "The SC UE may be engaged in one or more ongoing sessions before performing access transfer. By an ongoing session, it is meant a CS call for which the CC CONNECT message has been sent or received or a call for which the SIP 2xx response for the initial SIP INVITE request to establish this session has been sent or received.\nIf not already registered over the PS Target Access Leg, the SC UE shall follow the procedures specified in subclause 6.2 to perform IM CN subsystem registration over the Target Access Leg before performing PS/CS to PS access transfer.\nIf SC using ICS is enabled then if the original sessions are established using ICS capabilities as defined in 3GPP TS 24.292 [4], then for each full-duplex session with speech media component to be transferred and starting with the session with active speech media component, the SC UE shall send a SIP INVITE request to the SCC AS in accordance with the UE procedures specified in 3GPP TS 24.229 [2]. The SC UE shall populate the SIP INVITE request as specified for PS-PS access transfer with full media transfer in subclause 10.2.1. The SC UE shall indicate in the SIP INVITE request that the speech media component is using PS media.\nUpon receiving SIP BYE request for the Source Access Leg, the SC UE shall follow the ICS using Gm procedures specified in 3GPP TS 24.292 [4] to release the session. The SC UE also releases the associated CS bearer if no other sessions depend on the CS bearer.\nIf the original sessions are not established using ICS capabilities, then access transfer is only possible when the SC UE has a single session with active full-duplex speech media component. The SC UE shall send a SIP INVITE request to the SCC AS in accordance with the UE procedures specified in 3GPP TS 24.229 [2].\nThe SC UE shall populate the SIP INVITE request as follows:\n-\tthe Request-URI set to static STI;\n-\tthe Require header field including \"replaces\" option tag;\n-\tthe Replaces header field populated as specified in IETF RFC 3891 [10], containing the dialog identifier of the session to be transferred on the PS Source Access Leg; and\n-\tthe SDP payload set for the media component(s) to be transferred, in accordance the UE SDP origination procedures specified in 3GPP TS 24.229 [2]. The SC UE shall create an SDP offer that contains media components in the following order:\n1)\tthe same number of media lines, each corresponding to one of the media components in the session on the PS Source Access Leg; For each media line the SC UE shall indicate the same media type as its corresponding media component in the original session and indicate at least one codec that was negotiated during the original session. If the SC UE determines to remove a media component during the transfer, then the SC UE shall set the media line for this media component to include a port number with value zero;\n2)\tone speech media component to be transferred, corresponding to the speech media component in the session on the CS Source Access Leg; and\n3)\tif the SC UE determines to add new media component(s) during the transfer, then one additional media line with the desired media type and codecs each new media component.\nIf the SC UE receives any SIP 4xx – 6xx response to the SIP INVITE request, then session transfer has not occurred and the call will continue in the original domains.\n",
                            "figures_meta_data": [],
                            "tables": []
                        }
                    ]
                },
                {
                    "title": "11.3\tSCC AS",
                    "description": "",
                    "summary": "",
                    "text_content": "",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": [
                        {
                            "title": "Distinction of requests sent to the SCC AS",
                            "text_content": "The SCC AS needs to distinguish between the following initial SIP INVITE requests to provide specific functionality relating to access transfer:\n-\tSIP INVITE requests routed to the SCC AS containing a STI belonging to the subscribed user in the Replaces header field or Target-Dialog header field and not containing Inter UE Transfer SCC AS URI in the Request-URI. In the procedures below, such requests are known as \"SIP INVITE requests due to STI\".\n-\tSIP INVITE requests routed to the SCC AS containing either a dynamic STN, a static STN or an IMRN in the Request-URI. In the procedures below, such requests are known as \"SIP INVITE requests due to PS to CS STN\".\n-\tSIP INVITE requests routed to the SCC AS containing a static STI in the Request-URI and a STI in the Replaces or Target-Dialog header field. In the procedures below, such requests are known as \"SIP INVITE requests due to two STIs\".\nNOTE:\tThe media streams that need to be transferred are identified using information described in the subsequent subclauses 11.3.2 and 11.3.3.\nOther SIP initial requests for a dialog and requests for a SIP standalone transaction can be dealt with in any manner conformant with 3GPP TS 24.229 [2].\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "SCC AS procedures for PS to PS+CS access transfer",
                            "text_content": "This subclause does not apply to reception of a SIP INVITE request due to STI with a CS media.\nWhen the SCC AS receives a SIP INVITE request due to STI with PS and CS media on the Target Access Leg, the SCC AS shall follow the PS-PS Access Transfer procedures specified in subclause 10.3.2. with the following exceptions:\nIf the SIP INVITE request includes an active speech media component using CS bearer, then the SCC AS shall follow the procedures for SCC AS for service control over Gm in 3GPP TS 24.292 [4] to send the PSI DN to the SC UE and wait for the SC UE to set up CS bearer before sending a SIP re-INVITE request to the remote UE.\n-\tThe SCC AS shall correlate the STI with the allocated PSI DN in order to identify the remote leg to be updated.\n-\tIf service control over Gm is retained on the source access leg, and the SCC AS receives a SIP re-INVITE request indicating CS bearer on an existing session, the SCC AS shall follow procedures as described in 3GPP TS 24.292 [4] subclause 8.4.2 to send the PSI DN to the SC UE and wait for the SC UE to set up CS bearer before sending a SIP re-INVITE request to the remote end.\n-\tThe SCC AS shall include a new SDP offer in the SIP re-INVITE request, following the rules specified in 3GPP TS 24.229 [2], containing the following media information:\n-\tthe media characteristics as received in the SIP INVITE request due to STI with PS+CS media received on the Target Access Leg for media streams whose port is not set to zero; and\n-\tthe media characteristics as received in the SIP re-INVITE request for media streams whose port is not set to zero.\nWhen the SCC AS receives a SIP INVITE request due to PS to CS STN on the Target Access Leg, the SCC AS shall follow the PS-CS Access Transfer procedures specified in subclause 9.3.2. However, as the Source Access Leg contains media components other than speech media component, the SCC AS does not initiate release for Source Access Leg.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "SCC AS procedures for PS+CS to PS access transfer",
                            "text_content": "This subclause applies to reception of a SIP INVITE request due to STI with a PS media only.\nWhen the SCC AS receives a SIP INVITE request due to STI on the Target Access Leg, the SCC AS shall follow the PS-PS access transfer procedures specified in subclause 10.3.2.\nWhen the SCC AS receives a SIP INVITE request due to two STIs on the Target Access Leg, the SCC AS shall:\n-\tassociate the SIP INVITE request received on the Target Access Leg with two ongoing sessions:\na)\tan ongoing SIP dialog on the PS Source Access Leg: This is done by matching the dialog ID present in the Replaces header field (see IETF RFC 3891 [10]) or Target-Dialog header field (see IETF RFC 4538 [11]) of the SIP INVITE request with an ongoing dialog. By an ongoing SIP dialog, it is meant a dialog for which a SIP 2xx response to the initial SIP INVITE request has been sent or received; and\nb)\ta different ongoing SIP dialog with active speech media component;\n-\tif the SCC AS is unable to associate the SIP INVITE request with either one of the above two dialogs, send a SIP 480 (Temporarily Unavailable) response to reject the SIP INVITE request relating to the access transfer and not process the remaining steps; and\n-\tif the session transfer is possible:\na)\tfollow the procedures defined in IETF RFC 3891 [10] for replacing the two sessions on the Source Access Legs with the SIP request received on the Target Access Leg, including terminating the two Source Access Legs by sending a SIP BYE request on each session towards the SC UE in accordance with 3GPP TS 24.229 [2]; and\nb)\tsend a SIP re-INVITE request towards the remote UE using the existing established dialog. The SCC AS shall populate the SIP re-INVITE request as follows:\n1)\tset the Request-URI to the URI contained in the Contact header field returned at the creation of the dialog with the remote UE; and\n2)\ta new SDP offer, including the media characteristics as received in the SIP INVITE request due to two STIs received on the Target Access Leg, by following the rules of 3GPP TS 24.229 [2].\n",
                            "figures_meta_data": [],
                            "tables": []
                        }
                    ]
                }
            ]
        },
        {
            "title": "12\tRoles for PS-CS access transfer, Single Radio",
            "description": "",
            "summary": "",
            "tables": [],
            "figures_meta_data": [],
            "subsections": [
                {
                    "title": "12.1\tIntroduction",
                    "description": "",
                    "summary": "",
                    "text_content": "This clause specifies the procedures for PS-CS SRVCC and vSRVCC access transfer. Procedures are specified for the SC UE, the SCC AS, the EATF, the MSC server enhanced for ICS, the MSC server enhanced for SRVCC and the ATCF.\nDuring PS-CS SRVCC and vSRVCC access transfer procedures, IMS data channel media component(s) of session(s) are not getting transferred.\nFor SC UE or  not supporting ICS procedures, PS-CS SR-VCC access transfer enables transfer of\n-\tsingle session with active speech media component; and\n-\tup to one session with active speech media component and up to one session with inactive speech media component when the MSC Server assisted mid-call feature is supported.\nFor SC UE or , PS-CS access transfer in vSRVCC enables the transfer of a single session with active speech and video media components.\nIn order to fulfil the requirements for the PS to CS SRVCC for calls in alerting phase or vSRVCC access transfer for calls in alerting phase, the SC UE needs to be:\n-\tengaged in a session with speech media component in early dialog state before PS to CS SRVCC access transfer is performed; or\n-\tengaged in a session with active speech media component and active video media component in early dialog state before vSRVCC access transfer is performed\naccording to the following conditions:\n-\ta SIP 180 (Ringing) response for the initial SIP INVITE request to establish this session has been sent or received; and\n-\ta SIP final response for the initial SIP INVITE request to establish this session has not been sent or received.\nIf one of the dialogs meets the above conditions then after successful completion of the PS to CS SRVCC procedures:\n-\tSubclauses 12.2.2, 12.2.3, 12.2.3A and 12.2.4 shall be followed for a SC UE engaged in one or more ongoing sessions.\n-\tSubclauses 12.2.3B and 12.2.4 shall be followed for a SC UE that is engaged in a session in early dialog state.\nIf one of the dialogs meets the above conditions then after successful completion of the vSRVCC procedures:\n-\tSubclauses 12.2A.2, 12.2A.3, 12.2A.4 and 12.2A.6 shall be followed for a SC UE engaged in one or more ongoing sessions.\n-\tSubclauses 12.2A.5 and 12.2A.6 shall be followed for a SC UE that is engaged in a session in early dialog state.\nNOTE:\tThe UE determines from the handover command sent by the eNodeB as specified in 3GPP TS 36.331 [62] that the network intends to perform SRVCC handover or vSRVCC handover, based upon whether the radio resources allocated are for a TS11 bearer or a BS30 bearer.\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "12.2\tSC UE procedures for PS to CS access transfer, PS to CS SRVCC",
                    "description": "",
                    "summary": "",
                    "text_content": "",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": [
                        {
                            "title": "General",
                            "text_content": "The SC UE may be engaged in one or more ongoing sessions before PS to CS SRVCC access transfer is performed. By an ongoing session, it is meant a session for which the SIP 2xx response for the initial SIP INVITE request to establish this session has been sent or received.\nIn the PS to CS SRVCC session continuity procedures the SC UE shall consider only sessions where the following applies\n1.\tthe SC UE has completed a reliable offer / answer procedure and the session does have a speech media component; and\n2.\tthe speech media is carried over PS bearer with traffic-class conversation with source statistics descriptor =\"speech\" as specified in 3GPP TS 23.107 [66] or over a PS bearer with QCI=1 as specified in 3GPP TS 23.203 [65].\nfor access transfer. Sessions considered for PS to CS SRVCC procedures are regarded as full-duplex.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "12.2.2\tICS-based",
                            "text_content": "If:\n-\tSC using ICS is enabled;\n-\tthe Gm reference point is retained upon PS handover procedure;\n-\tthe SC UE is using ICS capabilities as defined in 3GPP TS 24.292 [4]; and\n-\tPS to CS SRVCC procedures (as described in 3GPP TS 24.008 [8]) have been completed;\nthe SC UE, in order to add Gm control for the newly established CS session, shall:\n-\tsend a SIP re-INVITE request for each session with speech media component to be transferred, starting with the session with active speech media component that was most recently made active; and\n-\twithin the SDP offer indicate the media line for the speech media component (active or held) as an  speech media component over circuit switched bearer in accordance with 3GPP TS 24.292 [4]. If the precondition mechanism is used, the SC UE shall indicate the related local preconditions as met.\nNOTE:\tWithin PS to CS SRVCC the handover is performed on PS level. Due to this, the SIP dialog established over the source PS access network stays the same after PS to CS SRVCC procedures, e.g. the IP address of the UE, the Call-ID or the P-CSCF do not change. Therefore in this case a SIP re-INVITE request needs to be sent to add ICS-control for the CS bearer.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "12.2.3\tNot based on ICS",
                            "text_content": "After successful PS to CS SRVCC procedures (as described in 3GPP TS 24.008 [8]) have been completed, if the SC UE is not using ICS capabilities and the SC UE does not apply the MSC Server assisted mid-call feature as specified in subclause 12.2.3A, the SC UE shall replace the ongoing session with active speech media component which was made active most recently with the newly established CS voice call.\nNOTE 1:\tIn the case when ICS is not supported or used and the SC UE does not apply the MSC Server assisted mid-call feature, only the ongoing session with active speech media component which was made active most recently is transferred from PS to CS audio.\nIf the Gm reference point is:\n1)\tretained upon successful PS handover completion;\nNOTE 2:\tThe SC UE knows that the Gm reference point is retained upon PS handover if, following handover, the SC UE has a dedicated PDP context for SIP signalling or has a general-purpose PDP context to carry the IM CN subsystem-related signalling, as described in 3GPP TS 24.229 [2] subclause B.2.2.1.\na)\tand there are one or more remaining non-speech media component(s) in the IMS session other than the speech media component which were transferred to the CS Target Access Leg; the SC UE shall:\n-\tsend a SIP re-INVITE request to the SCC AS as specified for media removal in subclause 13.2.1; and\n-\tindicate in the SDP offer the speech media component as removed;\nb)\tand there are no more non-speech media component(s) remaining in the IMS session other than the speech media component which was transferred to the CS Target Access Leg; the SC UE shall either:\n-\tsend a SIP re-INVITE request to the SCC AS as specified for media removal in subclause 13.2.1 indicating in the SDP offer the speech media component as removed;\n-\twait for a period of time for a SIP BYE request to be received before clearing the SIP dialog state internally; or\n-\tclear the SIP dialog state internally; or\n2)\tnot retained upon successful PS handover completion the SC UE shall clear the SIP dialog state internally.\nNOTE 3:\tIf a SIP BYE request is received after the UE has cleared the SIP dialog state internally the UE will send a SIP 481 (Call/Transaction Does Not Exist) response according to RFC 3261 [19].\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "12.2.3A\tNot based on ICS with MSC Server assisted mid-call feature",
                            "text_content": "After successful PS to CS SRVCC procedures (as described in 3GPP TS 24.008 [8]), if:\n1.\tthe SC UE is not using ICS capabilities;\n2.\tthe SC UE supports the MSC Server assisted mid-call feature; and\n3.\tone of the following is true:\nA.\tthere is at least one ongoing session with active speech media component and the Feature-Caps header field received by the SC UE at the establishment of the ongoing session with active speech media component, which has been most recently made active, includes the g.3gpp.mid-call feature-capability indicator as described in annex C; or\nB.\tthere is no ongoing session with active speech media component and:\n-\tthere is no emergency session in early dialog state with active speech media component; or\n-\tthere is an emergency session in early dialog state with active speech media component, unless the UE supports the PS to CS SRVCC for emergency session in early dialog state with active speech media component when both the emergency session in early dialog state with active speech media component and a non-emergency call in confirmed dialog state with inactive speech media component exists;\nand the Feature-Caps header field received by the SC UE at the establishment of the ongoing session with inactive speech media component which became inactive most recently includes the g.3gpp.mid-call feature-capability indicator as described in annex C;\nthen the SC UE shall apply the MSC Server assisted mid-call feature as follows:\n1.\tif two or more ongoing sessions with active speech media component exist, the SC UE shall:\nA)\treplace the speech media components of the ongoing session with active speech media component which was most recently made active with the newly established active CS voice call; and\nB)\treplace the speech media component of the ongoing session with active speech media component which was made active second most recently with the newly established held CS voice call;\n2.\tif one ongoing session with active speech media component exists and one or more ongoing sessions with inactive speech media component exist, the SC UE shall:\nA)\treplace the speech media components of the ongoing session with active speech media component with the newly established active CS voice call; and\nB)\treplace the speech media component of the ongoing session with inactive speech media component which was most recently made inactive with the newly established held CS voice calls;\n3.\tif one ongoing session with active speech media component exists and no ongoing sessions with inactive speech media component exist, the SC UE shall replace the speech media component of the ongoing session with active speech media component with the newly established active CS voice call; and\n4.\tif no ongoing session with active speech media component exists and one or more ongoing sessions with inactive speech media component exist, the SC UE shall replace the speech media component of the ongoing session with inactive speech media component which became inactive most recently with the newly established held CS voice call.\nFor each session, the SC UE shall proceed as specified in subclause 12.2.3.\nIf two sessions are transferred, and the SC UE does not have a subscription as described in subclause 7.2.2 for the additional transferred session the SC UE shall associate the additional transferred session with CS call:\n-\twith transaction identifier 1; and\n-\twith TI flag value as in mobile terminated call;\nand the SC UE shall enter the \"active\" (U10) state (defined in 3GPP TS 24.008 [8]), the \"call held\" auxiliary state (defined in 3GPP TS 24.083 [43]), and the \"idle\" multi party auxiliary state (defined in 3GPP TS 24.084 [47]) for the CS call.\nNOTE 1:\tThe session with active speech media call state and component transaction identifier value are described in 3GPP TS 24.008 [8].\nIf single session with inactive speech media component is transferred, and the SC UE does not have a subscription as described in subclause 7.2.2 for the transferred session, then the SC UE shall associate the transferred session with CS call:\n-\twith transaction identifier 0; and\n-\twith TI flag value as in mobile terminated call;\nand the SC UE shall enter the \"active\" (U10) state (defined in 3GPP TS 24.008 [8]), the \"call held\" auxiliary state (defined in 3GPP TS 24.083 [43]), and the \"idle\" multi party auxiliary state (defined in 3GPP TS 24.084 [47]) for the CS call.\nIf a transferred session is a session with a conference focus and the SC UE has a subscription as described in subclause 7.2.2 for the ongoing full-duplex session with active speech media component then:\n1.\tthe SC UE shall associate the transferred session and the participants extracted in subclause 9.1A with CS calls:\n-\twith transaction identifiers 0, 2, 3, 4, 5 assigned to the participants in their order in the list of the extracted participants; and\n-\twith TI flag value as in mobile terminating call; and\n2.\tthe SC UE shall enter the \"active\" (U10) state (defined in 3GPP TS 24.008 [8]), the \"idle\" hold auxiliary state (defined in 3GPP TS 24.083 [43]), and the \"call in MPTY\" multi party auxiliary state (defined in 3GPP TS 24.084 [47]) for the CS calls.\nNOTE 2:\tThe transaction identifier, TI flag value and \"active\" (U10) state for the first participant are assigned by the call activation procedures for SRVCC in 3GPP TS 24.008 [8].\nIf a transferred session is a session with a conference focus and the ongoing full-duplex session with active speech media component does not exist and the SC UE has a subscription as described in subclause 7.2.2 for the ongoing full-duplex session with inactive speech media component the SC UE shall associate the transferred session and the participants extracted in subclause 9.1A with CS calls:\n-\twith transaction identifiers 0, 2, 3, 4, 5 assigned to the participants in their order in the list of the extracted participants; and\n-\twith TI flag value as in mobile terminating call;\nand the SC UE shall enter the \"active\" (U10) state (defined in 3GPP TS 24.008 [8]), the \"call held\" hold auxiliary state (defined in 3GPP TS 24.083 [43]), and the \"call in MPTY\" multi party auxiliary state (defined in 3GPP TS 24.084 [47]) for the CS calls.\nNOTE 3:\tThe transaction identifier, TI flag value and \"active\" (U10) state for the first participant are assigned by the call activation procedures for SRVCC in 3GPP TS 24.008 [8].\nIf a transferred session is a session with a conference focus and:\n1.\tthe ongoing full-duplex session with active speech media component exists and the SC UE does not have a subscription as described in subclause 7.2.2 for the ongoing full-duplex session with active speech media component; and\n2.\tthe SC UE has a subscription as described in subclause 7.2.2 for the additional transferred session;\nthen:\n1.\tthe SC UE shall associate the transferred session and the participants extracted in subclause 9.1A with CS calls:\n-\twith transaction identifiers 1, 2, 3, 4, 5 assigned to the participants in their order in the list of the extracted participants; and\n-\twith TI flag value as in mobile terminating call; and\n2.\tthe SC UE shall enter the \"active\" (U10) state (defined in 3GPP TS 24.008 [8]), the \"call held\" hold auxiliary state (defined in 3GPP TS 24.083 [43]), and the \"call in MPTY\" multi party auxiliary state (defined in 3GPP TS 24.084 [47]) for the CS calls.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "12.2.3B\tCall in alerting phase",
                            "text_content": "The SC UE shall apply the procedures in subclauses 12.2.3B.3.1 and 12.2.3B.3.2 for the PS to CS SRVCC for calls in alerting phase if:\n1)\tthe SC UE supports the PS to CS SRVCC for calls in alerting phase; and\n2)\tone of the following is true:\nA.\tthere are one or more dialogs supporting sessions with speech media component, such that:\n-\tall dialogs are early dialogs;\n-\tSIP 180 (Ringing) response to SIP INVITE request was received in at least one of those early dialogs, all such SIP 180 (Ringing) responses are responses to the same SIP INVITE request and at least one of such SIP 180 (Ringing) responses was received in an early dialog supporting session with active speech media component;\n-\tthe SC UE has sent a Contact header field containing the g.3gpp.srvcc-alerting media feature tag (as described in annex C); and\n-\tthe SC UE has received a Feature-Caps header field containing the g.3gpp.srvcc-alerting feature-capability indicator (as described in annex C); or\nB.\tthere are one or more dialogs supporting a session with speech media component such that:\n-\tthere are one or more early dialogs and the remaining dialogs are confirmed dialogs;\n-\tSIP 180 (Ringing) response to SIP INVITE request was received in at least one of those early dialogs, all such SIP 180 (Ringing) responses are responses to the same SIP INVITE request and at least one of such SIP 180 (Ringing) responses was received in an early dialog supporting session with active speech media component;\n-\tall the confirmed dialogs support sessions with inactive speech media component;\n-\tSC UE does not apply the MSC server assisted mid-call feature as described in subclause 12.2.3A;\n-\tin those early dialogs, the SC UE has sent a Contact header field containing the g.3gpp.srvcc-alerting media feature tag (as described in annex C); and\n-\tin those early dialogs, the SC UE has received a Feature-Caps header field containing the g.3gpp.srvcc-alerting feature-capability indicator (as described in annex C); or\nC.\tthere is one dialog supporting session with speech media component, such that:\n-\tthe dialog is an early dialog;\n-\tSIP 180 (Ringing) response to SIP INVITE request was sent in the early dialog supporting session with active speech media component;\n-\tthe SC UE has sent a Contact header field containing the g.3gpp.srvcc-alerting media feature tag (as described in annex C); and\n-\tthe SC UE has received a Feature-Caps header field containing the g.3gpp.srvcc-alerting feature-capability indicator (as described in annex C); or\nD.\tthere are one or more dialogs supporting a session with speech media component such that:\n-\tthere is one early dialog and the remaining dialogs are confirmed dialogs;\n-\tSIP 180 (Ringing) response to SIP INVITE request was sent in the early dialog supporting session with active speech media component;\n-\tall the confirmed dialogs support sessions with inactive speech media component;\n-\tSC UE does not apply the MSC server assisted mid-call feature as described in subclause 12.2.3A;\n-\tin those early dialogs, the SC UE has sent a Contact header field containing the g.3gpp.srvcc-alerting media feature tag (as described in annex C); and\n-\tin those early dialogs, the SC UE has received a Feature-Caps header field containing the g.3gpp.srvcc-alerting feature-capability indicator (as described in annex C).\nThe SC UE shall apply the procedures in subclauses 12.2.3B.4.1 for the PS to CS SRVCC for calls in alerting phase if:\n1)\tthe SC UE supports the PS to CS SRVCC for calls in alerting phase;\n2)\tone of the following is true:\nA)\tthere are two or more dialogs supporting more than one session with speech media component, such that:\na)\tthe SC UE has sent a Contact header field containing the g.3gpp.srvcc-alerting media feature tag (as described in annex C);\nb)\tthe SC UE has received a Feature-Caps header field containing the g.3gpp.srvcc-alerting feature-capability indicator (as described in annex C).\nc)\tone dialog supporting a session in the confirmed state with active speech media component and remaining dialogs are early dialogs; and\nd)\tSIP 180 (Ringing) response to SIP INVITE request was received in at least one of those early dialogs, all such SIP 180 (Ringing) responses are responses to the same SIP INVITE request and at least one of such SIP 180 (Ringing) responses was received in an early dialog supporting session with active speech media component; or\nB)\tthere are two or more dialogs supporting sessions with speech media component, such that:\na)\tthe SC UE has sent a Contact header field containing the g.3gpp.srvcc-alerting media feature tag (as described in annex C); and\nb)\tthe SC UE has received a Feature-Caps header field containing the g.3gpp.srvcc-alerting feature-capability indicator (as described in annex C);\nc)\tone or more dialogs are confirmed dialogs supporting sessions with active speech media components, there are one or more dialogs that are confirmed dialogs with inactive speech media component and remaining dialogs are early dialogs;\nd)\tSIP 180 (Ringing) response to SIP INVITE request was received in at least one of those early dialogs, all such SIP 180 (Ringing) responses are responses to the same SIP INVITE request and at least one of such SIP 180 (Ringing) responses was received in an early dialog supporting session with active speech media component; and\ne)\tthe SC UE does not apply the MSC server assisted mid-call feature as described in subclause 12.2.3A.\nThe SC UE shall apply the procedures in subclauses 12.2.3B.3.3 if one of the following is true:\n1)\tthere are zero, one or more dialogs supporting a session with speech media component and a SIP INVITE request was sent by SC UE such that:\nA)\tall dialogs are early dialogs created by a SIP response to the SIP INVITE request;\nB)\ta final SIP response to the SIP INVITE request has not been received yet;\nC)\ta SIP 180 (Ringing) response to the SIP INVITE request has not been received yet in any existing early dialog created by a SIP response to the SIP INVITE request;\nD)\tthe SC UE included in the SIP INVITE request a Contact header field containing the g.3gpp.ps2cs-srvcc-orig-pre-alerting media feature tag as described in annex C; and\nE)\ta SIP 1xx response to the SIP INVITE request was received where the SIP 1xx response contained a Feature-Caps header field with the g.3gpp.ps2cs-srvcc-orig-pre-alerting feature-capability indicator as described in annex C; or\nNOTE:\tThe SC UE can have zero dialogs if all the early dialogs were terminated by 199 (Early Dialog Terminated) as described in RFC 6228 [80].\n2)\tthere are one or more dialogs supporting a session with speech media component such that:\nA)\tthere are zero, one or more early dialogs and the remaining dialogs are confirmed dialogs;\nB)\tall the confirmed dialogs support sessions with inactive speech media component;\nC)\tthe UE does not apply the MSC server assisted mid-call feature according to subclause 12.2.3A;\nD)\ta SIP INVITE request was sent by SC UE such that:\na)\tall early dialogs are created by a SIP response to the SIP INVITE request;\nb)\ta final SIP response to the SIP INVITE request has not been received yet;\nc)\ta SIP 180 (Ringing) response to the SIP INVITE request has not been received yet in any existing early dialog created by a SIP response to the SIP INVITE request;\nd)\tthe SC UE included in the SIP INVITE request a Contact header field containing the g.3gpp.ps2cs-srvcc-orig-pre-alerting media feature tag as described in annex C; and\ne)\ta SIP 1xx response to the SIP INVITE request was received where the SIP 1xx response contained a Feature-Caps header field with the g.3gpp.ps2cs-srvcc-orig-pre-alerting feature-capability indicator as described in annex C.\nThe SC UE shall apply the procedures in subclauses 12.2.3B.3.4 if it supports PS to CS SRVCC for terminating calls in pre-alerting phase and if one of the following is true:\n1)\tthere is one dialog supporting a session with speech media component and a SIP INVITE request was received by SC UE such that:\nA)\tthe dialog is an early dialog created by a SIP response to the SIP INVITE request;\nB)\ta final SIP response to the SIP INVITE request has not been sent yet;\nC)\ta SIP 180 (Ringing) response to the SIP INVITE request has not been sent yet;\nD)\tthe SC UE has sent a SIP 1xx response to the SIP INVITE request with a Contact header field containing the g.3gpp.ps2cs-srvcc-term-pre-alerting media feature tag (as described in annex C); and\nE)\tthe SIP INVITE request contained a Feature-Caps header field with the g.3gpp.ps2cs-srvcc-term-pre-alerting feature-capability indicator as described in annex C; or\n2)\tthere are one or more dialogs supporting a session with speech media component such that:\nA)\tthere is one early dialog and the remaining dialogs are confirmed dialogs;\nB)\tall the confirmed dialogs support sessions with inactive speech media component;\nC)\tthe UE does not apply the MSC server assisted mid-call feature according to subclause 12.2.3A;\nD)\ta SIP INVITE request was received by SC UE such that:\na)\tthe early dialog is created by a SIP response to the SIP INVITE request;\nb)\ta final SIP response to the SIP INVITE request has not been sent yet;\nc)\ta SIP 180 (Ringing) response to the SIP INVITE request has not been sent yet;\nd)\tthe SC UE has sent a SIP 1xx response to the SIP INVITE request with a Contact header field containing the g.3gpp.ps2cs-srvcc-term-pre-alerting media feature tag (as described in annex C); and\ne)\tthe SIP INVITE request contained a Feature-Caps header field with the g.3gpp.ps2cs-srvcc-term-pre-alerting feature-capability indicator as described in annex C.\nIf the SC UE supports both the PS to CS SRVCC for calls in alerting phase and the MSC server assisted mid-call feature then in addition to supporting the procedures specified in subclauses 12.2.3B.3 and 12.2.3B.4.1, it shall apply the procedures specified in subclause 12.2.3B.4.2 where one of the following is true:\n1)\tthere are two or more dialogs supporting sessions with speech media component, such that:\na)\tthe SC UE has sent a Contact header field  containing the g.3gpp.srvcc-alerting media feature tag (as described in annex C);\nb)\tthe SC UE has received a Feature-Caps header field containing the g.3gpp.srvcc-alerting feature-capability indicator (as described in annex C);\nc)\tone or more dialogs are in the confirmed state supporting a session with inactive speech media component and the remaining dialog(s) are early dialog(s);\nd)\tSIP 180 (Ringing) response to SIP INVITE request was received in at least one of those early dialogs, all such SIP 180 (Ringing) responses are responses to the same SIP INVITE request and at least one of such SIP 180 (Ringing) responses was received in an early dialog supporting session with active speech media component; and\ne)\tthe SC UE applies the MSC server assisted mid-call feature according to subclause 12.2.3A;\n2)\tthere are one or more dialogs supporting sessions with speech media component according to the following conditions:\nA)\tthere are zero, one or more early dialogs and the remaining dialog(s) are confirmed dialog(s);\nB)\tall the confirmed dialogs support sessions with inactive speech media component;\nC)\tthe UE applies the MSC server assisted mid-call feature according to subclause 12.2.3A;\nD)\ta SIP INVITE request was sent by SC UE such that:\na)\tall the early dialogs are created by a SIP response to the SIP INVITE request;\nb)\ta final SIP response to the SIP INVITE request has not been received yet;\nc)\ta SIP 180 (Ringing) response to the SIP INVITE request has not been received yet in any existing early dialog created by a SIP response to the SIP INVITE request;\nd)\tthe SC UE included in the SIP INVITE request a Contact header field containing the g.3gpp.ps2cs-srvcc-orig-pre-alerting media feature tag as described in annex C; and\ne)\ta SIP 1xx response to the SIP INVITE request was received where the SIP 1xx response contained a Feature-Caps header field with the g.3gpp.ps2cs-srvcc-orig-pre-alerting feature-capability indicator as described in annex C.\nIf the SC UE applies the procedures in subclause 12.2.3B.3 and the SC UE only has a single call:\n-\tin alerting phase following access transfer;\n-\tin pre-alerting phase and the SC UE supports the PS to CS SRVCC for originating calls in pre-alerting phase; or\n-\tin pre-alerting phase and the SC UE supports the PS to CS SRVCC for terminating calls in pre-alerting phase.\nthe SC UE shall associate this session with transaction identifier value and TI flag as described in 3GPP TS 24.008 [8].\nIf the SC UE applies the procedures in subclause 12.2.3B.4 and the SC UE has an established session and an additional session in alerting phase or pre-alerting phase following access transfer, then the SC UE shall associate the transferred session that was in alerting phase or pre-alerting phase with CS call with transaction identifier 1 and TI flag value as in mobile terminated call.\nNOTE:\tFor the procedures in subclause 12.2.3B.4.2, the held transaction identifier value is described in subclause 12.2.3A as for single inactive session transfer and the active session transaction identifier value is described in 3GPP TS 24.008 [8].\nIf the SC UE:\n-\thas received a terminating call which is in the early dialog state according to the conditions in subclauses 12.1 and 12.2.3B.1; and\n-\tsuccessfully performs access transfer to the CS domain;\nthen the UE continues in Ringing state in CS, i.e. UE moves to Call Received (U7) state as described in 3GPP TS 24.008 [8].\nIf the SC UE:\n-\thas received a terminating call which is in the early dialog state according to the conditions in subclauses 12.1 and 12.2.3B.1; and\n-\thas sent a SIP 200 (OK) response (i.e. user answers the call when in the PS domain) prior to successfully performing access transfer to the CS domain;\nthen the UE sends a CC CONNECT message and will finally transitions to Active (U10) state as described in 3GPP TS 24.008 [8].\nIf the SC UE has initiated an outgoing call which is in the early dialog state according to the conditions in subclauses 12.1 and 12.2.3B.1 and the SC UE successfully performs access transfer to the CS domain, then the UE continues in Ringing state in CS, i.e. UE moves to Call Delivered (U4) state as described in 3GPP TS 24.008 [8]. If the UE has received a SIP 180 (Ringing) response, depending on the type of the ringing tone, the UE behaves as following:\n-\tif the SC UE is playing the locally generated ringing tone, then the UE keeps playing the locally generated ringing tone; and\n-\tif the SC UE is playing network-generated ringing tone as early media, then the UE attaches the user connection to the MSC server, as specified in 3GPP TS 24.008 [8].\nIf the SC UE supports the PS to CS SRVCC for originating calls in pre-alerting phase and this subclause is invoked according to the conditions in subclause 12.2.3B.1 and the SC UE successfully performs access transfer to the CS domain, then the UE continues the call in the CS domain in the \"Mobile originating call proceeding\" (U3) call state as described in 3GPP TS 24.008 [8].\nIf the SC UE has generated and rendered the locally generated communication progress information before the access transfer to the CS domain, the UE keeps generating and rending the locally generated communication progress information after the access transfer to the CS domain.\nIf the SC UE has rendered received early media before the access transfer to the CS domain, the UE attaches the user connection, as specified in 3GPP TS 24.008 [8].\nIf the SC UE supports the PS to CS SRVCC for terminating calls in pre-alerting phase and this subclause is invoked according to the conditions in subclause 12.2.3B.1 and the SC UE successfully performs access transfer to the CS domain, then the UE continues the call in the CS domain in the \"Call present\" (U6) call state as described in 3GPP TS 24.008 [8].\nIf the SC UE:\n-\thas a session with an active speech media component and has received an incoming call (waiting) which is in the early dialog state according to the conditions in subclauses 12.1 and 12.2.3B.1; and\n-\tsuccessfully performs access transfer to the CS domain;\nthen the UE moves to Call Received (U7) state (defined in 3GPP TS 24.008 [8]) for the incoming call (waiting) (i.e. continues in Ringing state in CS for the incoming call waiting).\nIf the SC UE:\n-\thas a session with an inactive speech media component and has initiated a new outgoing call which is in the early dialog state according to the conditions in subclauses 12.1 and 12.2.3B.1; and\n-\tsuccessfully performs access transfer to the CS domain;\nthen:\n-\tif the new outgoing call is in alerting phase, the UE moves to Call Delivered (U4) state (defined in 3GPP TS 24.008 [8]) for the new outgoing call (i.e. UE continues in Ringing state in CS for the outgoing call);\n-\tif the new outgoing call is in pre-alerting phase, the UE moves to Mobile originating call proceeding (U3) state (defined in 3GPP TS 24.008 [8]) for the new outgoing call; and\n-\tthe UE moves to Call Active (U10) state (defined in 3GPP TS 24.008 [8]) and  (defined in 3GPP TS 24.083 [43]) for the held call.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "12.2.4\tAbnormal cases",
                            "text_content": "If the SC UE engaged in one or more ongoing IMS sessions and:\n-\treceives a SM NOTIFICATION message containing an \"SRVCC handover cancelled, IMS session re-establishment required\" as described in 3GPP TS 24.008 [8] or 3GPP TS 24.301 [52] or receives an event notification containing an \"SRVCC handover cancelled, IMS session re-establishment required\" indicator from the lower layers as described in 3GPP TS 24.501 [98] depending on the access in use; or\n-\tdoes not successfully retune to the 3GPP UTRAN or 3GPP GERAN after it receives the handover command from the eNodeB (as described in 3GPP TS 36.331 [62]) or from the NodeB (as described in 3GPP TS 25.331 [61]);\nthen the SC UE shall send a SIP re-INVITE request containing:\n1)\tan SDP offer, including the media characteristics as used in the existing dialog; and\n2)\ta Reason header field containing protocol \"SIP\" and reason parameter \"cause\" with value \"487\" as specified in IETF RFC 3326 [57] and with reason-text text set to either \"handover cancelled\" or \"failure to transition to CS domain\";\nby following the rules of 3GPP TS 24.229 [2] in each transferred session.\nIf the SC UE is engaged in a session in early dialog state and:\n-\treceives a SM NOTIFICATION message containing an \"SRVCC handover cancelled, IMS session re-establishment required\" as described in 3GPP TS 24.008 [8] or 3GPP TS 24.301 [52] or receives an event notification containing an \"SRVCC handover cancelled, IMS session re-establishment required\" indicator from the lower layers as described in 3GPP TS 24.501 [98]depending on the access in use; or\n-\tdoes not successfully retune to the 3GPP UTRAN or 3GPP GERAN after it receives the handover command from the eNodeB (as described in 3GPP TS 36.331 [62]) or from the NodeB (as described in 3GPP TS 25.331 [61]);\nthen the SC UE shall:\na)\tsend a SIP UPDATE request containing:\n1)\tan SDP offer, including the media characteristics as used in the existing dialog; and\n2)\ta Reason header field containing protocol \"SIP\" and reason parameter \"cause\" with value \"487\" as specified in IETF RFC 3326 [57], and with reason-text set to either \"handover cancelled\" or \"failure to transition to CS domain\";\nby following the rules of 3GPP TS 24.229 [2] in each transferred session; and\nb)\tif the SC UE is a terminating side UE and has already sent a CC CONNECT on the target access leg, send a SIP 200 (OK) response to the SIP INVITE request received on the source access leg.\nIf the SC UE engaged in one or more IMS sessions receives a handover command from the eNodeB (as described in 3GPP TS 36.331 [62]) or from the NodeB (as described in 3GPP TS 25.331 [61]) when the UE is engaged in moving the PDN connection from an 3GPP access to a non-3GPP access as described in 24.302 [84], the UE shall either:\n1)\taccept the handover command and abort the move to the non-3GPP access; or\n2)\tcontinue with the move to the non-3GPP access and ignore the handover command.\nIf the SC UE continues with the move to the non-3GPP access, the SC UE shall for each transferred session send a SIP re-INVITE request containing:\n1)\tan SDP offer, including the media characteristics as used in the existing dialog; and\n2)\ta Reason header field containing protocol \"SIP\" and reason parameter \"cause\" with value \"487\" as specified in IETF RFC 3326 [57];\nNOTE:\tThe reason-text text in the Reason header field can be set to either \"handover cancelled\" or \"failure to transition to CS domain\".\nby following the rules of 3GPP TS 24.229 [2].\n",
                            "figures_meta_data": [],
                            "tables": []
                        }
                    ]
                },
                {
                    "title": "12.2A\tSC UE procedures for PS to CS access transfer, vSRVCC",
                    "description": "",
                    "summary": "",
                    "text_content": "",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": [
                        {
                            "title": "12.2A.1\tGeneral",
                            "text_content": "The SC UE may be engaged in one or more ongoing sessions before vSRVCC access transfer is performed. By an ongoing session, it is meant a session for which the response to the initial SIP INVITE request to establish this session has been sent or received.\nIn the vSRVCC session continuity procedures the SC UE shall consider only sessions where the following applies:\n1.\tthe SIP dialog contains speech and video media components supporting a real time video session synchronized with speech as defined in 3GPP TS 22.173 [24], which includes the codecs for speech and video as specified in 3GPP TS 26.114 [68]; and\n2.\tthe speech media is carried over a PS bearer with QCI=1 as specified in 3GPP TS 23.203 [65];\nfor access transfer. Sessions considered for vSRVCC procedures are regarded as full-duplex.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "12.2A.2\tICS-based",
                            "text_content": "If:\n-\tSC using ICS is enabled;\n-\tthe Gm reference point is retained upon PS handover procedure;\nNOTE 1:\tThe SC UE knows that the Gm reference point is retained upon PS handover if, following handover, the SC UE has a \"dedicated PDP context for SIP signalling\" or has a \"general-purpose PDP context\" to carry the IM CN subsystem-related signalling, as described in 3GPP TS 24.229 subclause B.2.2.1.\n-\tthe SC UE is using ICS capabilities as defined in 3GPP TS 24.292 [4]; and\n-\tvSRVCC procedures (as described in 3GPP TS 24.008 [8]) have been completed;\nthen the SC UE, in order to add Gm control for the newly established CS session, shall:\n-\tsend a SIP re-INVITE request for each session with only speech media component or with both speech and video media components to be transferred starting with the session with active speech and video media components that was most recently made active;\n-\twithin the SDP offer for sessions with speech and video media components, indicate the media lines for the speech and video media components as speech and video media components over circuit switched bearer in accordance with 3GPP TS 24.292 [4]. If the precondition mechanism is used, the SC UE shall indicate the related local preconditions as met; and\n-\twithin the SDP offer for sessions with only speech media component, indicate the media lines for the speech media component as speech media component over circuit switched bearer in accordance with 3GPP TS 24.292 [4]. If the precondition mechanism is used, the SC UE shall indicate the related local preconditions as met;\nNOTE 2:\tThe SIP dialog established over the source PS access network stays the same after vSRVCC procedures, e.g. the IP address of the UE, the Call-ID or the P-CSCF do not change. Therefore in this case a SIP re-INVITE request needs to be sent to add ICS-control for the CS bearer.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "12.2A.3\tNot based on ICS",
                            "text_content": "After successful vSRVCC procedures (as described in 3GPP TS 24.008 [8]) have been completed, if the SC UE is not using ICS capabilities, the SC UE shall replace the session with active speech and video media components which was most recently made active with the newly established CS voice/video call.\nNOTE 1:\tIn the case when ICS is not supported or used, only the ongoing session with active speech and video media components which was most recently made active is transferred from PS to CS.\nIn addition, if:\n-\tthe Gm reference point is retained upon PS handover; and\nNOTE 2:\tThe SC UE knows that the Gm reference point is retained upon PS handover if, following handover, the SC UE has a dedicated PDP context for SIP signalling or has a general-purpose PDP context to carry the IM CN subsystem-related signalling, as described in 3GPP TS 24.229 [2] subclause B.2.2.1.\n-\tthere are one or more remaining media component(s) in the IMS session other than the speech and the video media components which were transferred to the CS Target Access Leg;\nthe SC UE shall:\n-\tsend a SIP re-INVITE request to the SCC AS as specified for media removal in subclause 13.2.1; and\n-\tindicate in the SDP offer the speech and video media components as being removed.\nNOTE 3:\tThe SC UE can still send a SIP re-INVITE request if there are no remaining media components in the IMS session.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "12.2A.4\tVoid",
                            "text_content": "",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "12.2A.5\tCall in alerting phase",
                            "text_content": "If the conditions in subclause 12.2.3B.1 for the application of subclause 12.2.3B.3 are satisfied for a session with active speech media component and active video media component prior to the successful completion of the vSRVCC procedures (as described in 3GPP TS 24.008 [8]), then after the successful completion of the vSRVCC handover procedures, the SC UE shall apply the procedures specified in subclause 12.2.3B.3\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "12.2A.5A\tCall in pre-alerting phase",
                            "text_content": "If the SC UE supports the PS to CS SRVCC for originating calls in pre-alerting phase and the conditions in subclause 12.2.3B.1 for the application of subclause 12.2.3B.3.3 are satisfied for a session with active speech media component and active video media component prior to the successful completion of the vSRVCC procedures (as described in 3GPP TS 24.008 [8]), then after the successful completion of the vSRVCC handover procedures, the SC UE shall apply the procedures specified in subclause 12.2.3B.3.3.\nIf the SC UE supports the PS to CS SRVCC for terminating calls in pre-alerting phase and the conditions in subclause 12.2.3B.1 for the application of subclause 12.2.3B.3.4 are satisfied for a session with active speech media component and active video media component prior to the successful completion of the vSRVCC procedures (as described in 3GPP TS 24.008 [8]), then after the successful completion of the vSRVCC handover procedures, the SC UE shall apply the procedures specified in subclause 12.2.3B.3.4.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "12.2A.6\tAbnormal cases",
                            "text_content": "If the SC UE:\n-\treceives a NOTIFICATION message containing an \"SRVCC handover cancelled, IMS session re-establishment required\" as described in 3GPP TS 24.301 [52] or receives an event notification containing an \"SRVCC handover cancelled, IMS session re-establishment required\" indicator from the lower layers as described in 3GPP TS 24.501 [98] depending on the access in use; or\n-\tdoes not successfully transition to UTRAN after it receives the handover command (as described in 3GPP TS 36.331 [62]);\nthen:\n-\tif the SC UE is engaged in one or more ongoing IMS sessions, the SC UE shall send a SIP re-INVITE request in accordance with subclause 12.2.4.1; and\n-\tif the SC UE is engaged in a session in early dialog state, the SC UE shall send a SIP UPDATE request, in accordance with subclause 12.2.4.2.\n",
                            "figures_meta_data": [],
                            "tables": []
                        }
                    ]
                },
                {
                    "title": "12.2B\tSC UE procedures for CS to PS SRVCC",
                    "description": "",
                    "summary": "",
                    "text_content": "",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": [
                        {
                            "title": "12.2B.1\tDistinction of requests",
                            "text_content": "The SC UE needs to distinguish the following SIP requests:\n1)\tSIP REFER request:\nA)\twith the Refer-Sub header field containing \"false\" value; and\nB)\tcontaining application/vnd.3gpp.mid-call+xml MIME body or the application/vnd.3gpp.state-and-event-info+xml MIME type.\nIn the procedures below, such requests are known as \"SIP REFER requests for transfer of an additional session\".\n2)\tSIP INFO request:\nA)\twith the Info-Package header field containing the g.3gpp.state-and-event; and\nB)\tcontaining an application/vnd.3gpp.state-and-event-info+xml XML body associated with the info package according to IETF RFC 6086 [54] and compliant to the XML schema specified in the clause D.2 with the state-info XML element containing \"early\" and direction XML element containing \"receiver\".\nIn the procedures below, such requests are known as \"SIP INFO requests for transfer of incoming early session\".\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "12.2B.2\tFirst call transfer",
                            "text_content": "If SC UE supports the CS to PS SRVCC, upon receiving information from the lower layers that the CS to PS SRVCC access transfer is initiated, the SC UE shall:\n1)\tif a CS call in Active (U10) state (defined in 3GPP TS 24.008 [8]) and Idle auxiliary state (defined in 3GPP TS 24.083 [43]) exists and if the ATGW transfer details were received from the lower layers:\nA)\tdetermine the active call being transferred as a CS call in Active (U10) state (defined in 3GPP TS 24.008 [8]) and Idle auxiliary state (defined in 3GPP TS 24.083 [43]);\nB)\tstart rendering speech media of the determined active call being transferred received according to the UE information for CS to PS SRVCC sent to the network (see subclause 6.2.3); and\nC)\tstart sending speech media of the determined active call being transferred according to the ATGW information for CS to PS SRVCC received from the network (see subclause 6.2.3) where the address type, the connection address and the transport port to which the media stream is sent are replaced with the ATGW transfer details received from the lower layers; and\n2)\tsend a SIP INVITE request to STI-rSR according to 3GPP TS 24.229 [2]. The SC UE shall populate the SIP INVITE request with:\nA)\tRequest-URI set to the STI-rSR received during registration (see subclause 6.2.1);\nB)\tSDP offer set to the UE information for CS to PS SRVCC sent to the network (see subclause 6.2.3);\nC)\tif a GRUU was received at registration, include the public GRUU or temporary GRUU in the Contact header field;\nD)\tsignalling elements described in subclause 6A.2.2.2;\nE)\tvoid;\nF)\tif the SC UE supports the CS to PS SRVCC with the assisted mid-call feature:\na)\tthe Supported header field containing the option-tag \"norefersub\" specified in IETF RFC 4488 [20]; and\nb)\tthe Accept header field containing the application/vnd.3gpp.mid-call+xml MIME type; and\nG)\tif the SC UE supports CS to PS SRVCC for calls in alerting phase:\na)\tthe Supported header field containing the option-tag \"norefersub\" specified in IETF RFC 4488 [20], if not inserted already;\nb)\tan Accept header field containing the application/vnd.3gpp.state-and-event-info+xml MIME type;\nc)\ta Recv-Info header field containing the g.3gpp.state-and-event package name; and\nd)\ta Supported header field with \"100rel\" option tag.\nUpon receiving a SIP 1xx response or SIP 2xx response to the SIP INVITE request to STI-rSR, the SC UE shall associate the dialog of the SIP 1xx response or SIP 2xx response with the CS call where the transaction identifier sent by MSC server equals to the value of the g.3gpp.ti feature-capability indicator as described in annex C of a Feature-Caps header field of the SIP response. If the value of the g.3gpp.ti feature-capability indicator as described in annex C of a Feature-Caps header field of the SIP response indicates a CS call of a conference participant of a conference, the SC UE shall associate the dialog of the SIP 1xx response or SIP 2xx response with the CS calls of all the conference participants of the conference.\nIf the SC UE is not aware of such CS call, or the CS call is the \"disconnect request\" (U11) call state, the \"disconnect indication\" (U12) call state, the \"release request\" (U19) call state or the \"null\" (U0) call state as described in 3GPP TS 24.008 [8], the SC UE shall release or cancel the dialog established by the SIP 1xx response or SIP 2xx response to the SIP INVITE request to STI-rSR. If the CS call is the \"disconnect request\" (U11) call state as described in 3GPP TS 24.008 [8], the SC UE shall populate the SIP CANCEL request or the SIP BYE request with a Reason header field with the protocol field set to \"SIP\", the \"cause\" header field parameter indicating the selected status code and the \"text\" header field parameter indicating the selected reason phrase according to IETF RFC 3326 [57].\nIf SC UE supports the CS to PS SRVCC, in addition to the procedures in subclause 12.2B.2.1, if the CS call which was associated with the dialog of the SIP 1xx response or SIP 2xx response to the SIP INVITE request to STI-rSR in subclause 12.2B.2.1 is in the \"hold request\" auxiliary state (as defined in 3GPP TS 24.083 [43]), the speech media component of the session supported by the dialog is an active speech media component, and if the UE supports 3GPP TS 24.610 [28] , then UE shall invoke the hold service on a dialog according to 3GPP TS 24.610 [28] indicating that the speech media component is to be held.\nIf SC UE supports the CS to PS SRVCC and if the SC UE supports the CS to PS SRVCC with the assisted mid-call feature, in addition to the procedures in subclause 12.2B.2.1, if the CS call which was associated with the dialog of the SIP 1xx response or SIP 2xx response to the SIP INVITE request to STI-rSR in subclause 12.2B.2.1 is in the \"retrieve request\" auxiliary state (as defined in 3GPP TS 24.083 [43]), the speech media component of the session supported by the dialog is an inactive speech media component, and if the UE supports 3GPP TS 24.610 [28] , then UE shall invoke the hold service on a dialog according to 3GPP TS 24.610 [28] indicating that the speech media component is to be resumed.\nNOTE:\tIf the network associates the SIP INVITE request to STI-rSR with session with inactive speech media component, the SDP answer will contain a=recvonly or a=inactive.\nNo additional procedures in addition to the procedures in subclause 12.2B.2.1 apply.\nIf SC UE supports the CS to PS SRVCC and if the SC UE supports the CS to PS SRVCC for calls in alerting phase, in addition to the procedures in subclause 12.2B.2.1, upon receiving the SIP INFO request for transfer of incoming early session inside an early dialog created with the SIP INVITE request due to STI-rSR, the SC UE shall:\n1)\tsend SIP 200 (OK) response to the SIP INFO request; and\n2)\tconsider the SIP dialog to be the transferred incoming early session.\nWhen the served user accepts the transferred incoming early session or if the user has accepted it already (i.e. the CS call which was associated with the dialog of the SIP 1xx response or SIP 2xx response to the SIP INVITE request to STI-rSR in subclause 12.2B.2.1 is in the \"connect request\" (U8) call state or the \"active\" (U10) call state as described in 3GPP TS 24.008 [8]), the SC UE shall send a SIP INFO request accepting the session inside the early dialog created with the SIP INVITE request due to STI-rSR according to 3GPP TS 24.229 [2]. The SC UE shall populate the SIP INFO request with:\n1)\tan Info-Package header field with 3gpp.state-and-event info package name; and\n2)\tapplication/vnd.3gpp.state-and-event-info+xml XML body associated with the info package according to IETF RFC 6086 [54] and compliant to the XML schema specified in the clause D.2 with the event XML element containing \"call-accepted\".\nWhen the served user rejects the transferred incoming early session, the SC UE shall send a SIP CANCEL request cancelling the SIP INVITE request due to STI-rSR according to 3GPP TS 24.229 [2]. The SC UE shall populate the SIP CANCEL request with a Reason header field containing protocol \"SIP\" and the \"cause\" parameter indicating the selected status code and the \"text\" parameter indicating the selected reason phrase.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "12.2B.3\tAdditional call transfer",
                            "text_content": "If SC UE supports the CS to PS SRVCC, if the SC UE supports the CS to PS SRVCC with the assisted mid-call feature or the CS to PS SRVCC for calls in alerting phase then upon receiving a SIP REFER request for transfer of an additional session within dialog established by the SIP INVITE request to STI-rSR, the SC UE shall:\n1)\thandle the SIP REFER request as specified in 3GPP TS 24.229 [2], IETF RFC 3515 [13] as updated by IETF RFC 6665 [81], and IETF RFC 4488 [20] without establishing an implicit subscription;\nNOTE 1:\tIn accordance with IETF RFC 4488 [20], the SC UE inserts the Refer-Sub header field containing the value \"false\" in the SIP 2xx response to the SIP REFER request to indicate that it has not created an implicit subscription.\n2)\tsend a SIP INVITE request for transfer of an additional session according to 3GPP TS 24.229 [2] and IETF RFC 3515 [13]. The SC UE shall populate the SIP INVITE request as follows:\nA)\theader fields which were included as URI header fields in the URI in the Refer-To header field of the received SIP REFER request as specified in IETF RFC 3261 [19] except the \"body\" URI header field;\nB)\tthe SDP offer with:\na)\tthe same amount of the media descriptions as in the \"body\" URI header field in the URI in the Refer-To header field of the received SIP REFER request;\nb)\teach \"m=\" line having the same media type as the corresponding \"m=\" line in the \"body\" URI header field in the URI in the Refer-To header field of the received SIP REFER request;\nc)\tport set to zero value in each \"m=\" line whose corresponding \"m=\" line in the \"body\" URI header field in the URI in the Refer-To header field of the received SIP REFER request has port with zero value;\nd)\tmedia directionality as in the \"body\" URI header field in the URI in the Refer-To header field of the received SIP REFER request; and\ne)\tpayload type numbers and their mapping to codecs and media parameters supported by SC UE, not conflicting with those in the \"body\" URI header field in the URI in the Refer-To header field of the received SIP REFER request;\nNOTE 2:\tport can be sent to zero or non zero value for the offered \"m=\" line whose corresponding \"m=\" line in the \"body\" URI header field in the URI in the Refer-To header field of the received SIP REFER request has port with nonzero value.\nC)\tif a GRUU was received at registration, include the public GRUU or temporary GRUU in the Contact header field;\nD)\tsignalling elements described in subclause 6A.2.2.2;\nE)\tvoid; and\nF)\tif the SC UE supports the CS to PS SRVCC for calls in alerting phase:\na)\ta Supported header field with \"100rel\" option tag; and\n3)\tif the SC UE supports the CS to PS SRVCC for calls in alerting phase and if the SIP REFER request contains a XML body compliant to the XML schema specified in the clause D.2 with the state-info XML element containing \"early\" and direction set to \"receiver\" then consider the SIP dialog to be transferred incoming early session.\nUpon receiving a SIP 1xx response or SIP 2xx response to the SIP INVITE request for transfer of an additional session, the SC UE shall associate the dialog of the SIP 1xx response or SIP 2xx response with the CS call where the transaction identifier sent by MSC server equals to the value of the g.3gpp.ti feature-capability indicator as described in annex C of a Feature-Caps header field of the SIP response. If the value of the g.3gpp.ti feature-capability indicator as described in annex C of a Feature-Caps header field of the SIP response indicates a CS call of a conference participant of a conference, the SC UE shall associate the dialog of the SIP 1xx response or SIP 2xx response with the CS calls of all the conference participants of the conference.\nIf the SC UE is not aware of such CS call, or the CS call is the \"disconnect request\" (U11) call state, the \"disconnect indication\" (U12) call state, the \"release request\" (U19) call state or the \"null\" (U0) call state as described in 3GPP TS 24.008 [8], the SC UE shall release or cancel the dialog established by SIP 1xx response or SIP 2xx response to the SIP INVITE request for transfer of an additional session. If the CS call is the \"disconnect request\" (U11) call state as described in 3GPP TS 24.008 [8], the SC UE shall populate the SIP CANCEL request or the SIP BYE request with a Reason header field with the protocol field set to \"SIP\", the \"cause\" header field parameter indicating the selected status code and the \"text\" header field parameter indicating the selected reason phrase according to IETF RFC 3326 [57].\nNo additional procedures in addition to the procedures in subclause 12.2B.3.1 apply.\nIf SC UE supports the CS to PS SRVCC and if the SC UE supports the CS to PS SRVCC with the assisted mid-call feature, in addition to the procedures in subclause 12.2B.3.1, if the CS call which was associated with the dialog of the SIP 1xx response or SIP 2xx response to the SIP INVITE request for transfer of an additional session in subclause 12.2B.3.1 is in the \"retrieve request\" auxiliary state (as defined in 3GPP TS 24.083 [43]), the speech media component of the session supported by the dialog is an inactive speech media component, and if the UE supports 3GPP TS 24.610 [28] , then UE shall invoke the hold service on a dialog according to 3GPP TS 24.610 [28] indicating that the speech media component is to be resumed.\nNOTE:\tIf the network associates the SIP INVITE request to STI-rSR with session with inactive speech media component, the SDP answer will contain a=recvonly or a=inactive.\nNo additional procedures in addition to the procedures in subclause 12.2B.3.1 apply.\nIf SC UE supports the CS to PS SRVCC, if the SC UE supports the CS to PS SRVCC for calls in alerting phase, in addition to the procedures in subclause 12.2B.3.1, when the served user accepts the transferred incoming early session or if the user has accepted it already (i.e. the CS call which was associated with the dialog of the SIP 1xx response or SIP 2xx response to the SIP INVITE request for transfer of an additional session in subclause 12.2B.3.1 is in the \"connect request\" (U8) call state or the \"active\" (U10) call state as described in 3GPP TS 24.008 [8]), the SC UE shall send a SIP INFO request accepting the session inside the early dialog created with the SIP INVITE request for transfer of an additional session according to 3GPP TS 24.229 [2]. The SC UE shall populate the SIP INFO request with:\n1)\tan Info-Package header field with 3gpp.state-and-event info package name; and\n2)\tapplication/vnd.3gpp.state-and-event-info+xml XML body associated with the info package according to IETF RFC 6086 [54] and compliant to the XML schema specified in the clause D.2 with the event XML element containing \"call-accepted\".\nIf the SC UE supports the CS to PS SRVCC for calls in alerting phase then when the served user rejects the transferred incoming early session, the SC UE shall send a SIP CANCEL request cancelling the SIP INVITE request for transfer of an additional session according to 3GPP TS 24.229 [2]. The SC UE shall populate the SIP CANCEL request with:\n1)\ta Reason header field containing protocol \"SIP\" and the \"cause\" parameter indicating the selected status code and the \"text\" parameter indicating the selected reason phrase.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "12.2B.4\tProcedures after calls are transferred",
                            "text_content": "If:\n1)\tthe multi party auxiliary state (defined in 3GPP TS 24.084 [47]) for the CS call which was associated with the dialog of the SIP 1xx response or SIP 2xx response to the SIP INVITE request to STI-rSR in subclause 12.2B.2.1 is \"MPTY request\";\n2)\tthe multi party auxiliary state (defined in 3GPP TS 24.084 [47]) for the CS call which was associated with the dialog of the SIP 1xx response or SIP 2xx response to the SIP INVITE request for transfer of an additional session in subclause 12.2B.3.1 is \"MPTY request\";\n3)\tSIP 1xx response or SIP 2xx response to the SIP INVITE request to STI-rSR contains a Contact header field without the isfocus media feature tag specified in IETF RFC 3840 [53]; and\n4)\tSIP 1xx response or SIP 2xx response to the SIP INVITE request for transfer of an additional session contains a Contact header field without the isfocus media feature tag specified in IETF RFC 3840 [53];\nand if the UE supports 3GPP TS 24.605 [31], then UE shall create a conference according to 3GPP TS 24.605 [31], subclause 4.5.2.1.4. If the conference creation was successful, the UE shall invite remote user of the dialog of the SIP 1xx response or SIP 2xx response to the SIP INVITE request to STI-rSR and remote user of the dialog of the SIP 1xx response or SIP 2xx response to the SIP INVITE request for transfer of an additional session to the conference according to 3GPP TS 24.605 [31], subclause 4.5.2.1.2.\n",
                            "figures_meta_data": [],
                            "tables": []
                        }
                    ]
                },
                {
                    "title": "12.3\tSCC AS",
                    "description": "",
                    "summary": "",
                    "text_content": "",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": [
                        {
                            "title": "12.3.0\tGeneral",
                            "text_content": "In the Single Radio access transfer procedures the SCC AS shall only consider sessions that have the necessary media components that meet the criteria for performing Single Radio access transfer as defined in subclause 4.2.2.\nOn receipt of a SIP INVITE request due to STN-SR or a SIP INVITE request due to ATU-STI the SCC AS shall for all sessions and dialogs in the transferable session set created in subclauses 12.3.0B or 12.7.2 discard any SIP message (i.e. any SIP request or SIP response) from the remote UE to the SC UE that are releated to the call until the procedures in the following subclauses states that forwarding of SIP shall be started again. The SIP 200 (OK) response to the UPDATE request and the SIP 200 (OK) respose to the re-INVITE request related to the ongoing access transfer shall be handled as specified in the following subclauses.\nNOTE:\tSIP responses sent reliably to the initial SIP INVITE request and SIP requests will be retransmitted by the remote UE if SIP responses and SIP requests are dropped by the SCC AS.\nAll the time during an ongoing PS to CS SRVCC access transfer the SCC AS shall be prepared to receive SIP messages from the SC UE or the MSC server releated to the call (i.e. not related to the ongoing access transfer). When a SIP message releated to the call is received from the SC UE or the MSC server the SCC AS shall forward the SIP message towards the remote UE according to procedures in 3GPP TS 24.229 [2] and the present document.\nWhen a PS to CS SRVCC access transfer is completed, the SCC AS shall perform interactions between the remote UE leg and the target access leg as described in subclause 12.3.11.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "12.3.0A\tDistinction of requests sent to the SCC AS",
                            "text_content": "The SCC AS needs to distinguish between the following SIP INVITE requests to provide specific functionality for PS to CS SRVCC:\n-\tSIP INVITE request routed to the SCC AS due to a STN-SR belonging to the subscribed user in the Request-URI and containing an SDP offer with active speech media component only. These SIP INVITE requests originate from the MSC server. In the procedures below, such requests are known as \"SIP INVITE requests due to STN-SR\".\n-\tSIP INVITE requests routed to the SCC AS due to ATU-STI for PS to CS SRVCC in the Request-URI. In the procedures below, such requests are known as \"SIP INVITE requests due to ATU-STI for PS to CS SRVCC\".\n-\tSIP INVITE request routed to the SCC AS contains the additional transferred session SCC AS URI for PS to CS SRVCC in the Request-URI, such a request is in this document known as \"SIP INVITE request transferring additional session for PS to CS SRVCC\".\nThe SCC AS needs to distinguish between the following SIP INVITE requests to provide specific functionality for vSRVCC:\n-\tSIP INVITE request routed to the SCC AS due to a STN-SR belonging to the subscribed user in the Request-URI and containing an SDP offer with both active speech and video media components only, which includes the default codecs for speech and video (as specified in 3GPP TS 26.111 [69]). These SIP INVITE requests originate from the MSC server. In the procedures below, such requests are known as \"SIP INVITE requests for audio and video due to STN-SR\".\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "12.3.0B\tDetermine the transferable session set",
                            "text_content": "When the SCC AS receives a SIP INVITE request due to STN-SR on the Target Access Leg the SCC AS shall determine the transferable session set.\nA session is in the transferable session set when the session:\n1)\tis a session of the SC UE whose private user identity is associated with the C-MSISDN that is contained in the P-Asserted-Identity header field of the SIP INVITE request; and\n2)\thas completed a reliable offer answer procedure and is a session with speech media component.\nThe SCC AS shall:\n1)\tif the conditions described in subclause 12.3.2.1 are fulfilled, follow the procedures in subclause 12.3.2;\n2)\tif the conditions described in subclause 12.3.4.1 for applying the PS to CS SRVCC for calls in alerting phase in subclauses 12.3.4.2 or 12.3.4.3 are fulfilled, follow the procedures in subclause 12.3.4.2 or 12.3.4.3;\n2A)\tif the conditions described in subclause 12.3.4.1 for applying the PS to CS SRVCC for calls in originating pre-alerting phase in subclause 12.3.4.3 are fulfilled, follow the procedures in subclause 12.3.4.3; and\n3)\tif none of the conditions 1), 2) or 2A) above are fulfilled follow the procedure in subclause 12.3.1.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "12.3.1\t procedures for PS to CS access transfer, PS to CS SRVCC",
                            "text_content": "When the SCC AS receives a SIP INVITE request due to STN-SR on the Target Access Leg the SCC AS shall associate the SIP INVITE request with a session:\n-\twithin the transferable session set;\n-\twith active speech media component that was most recently made active; and\n-\tthe related dialog is in confirmed state.\nIf no confirmed dialogs supporting a session with active speech media component exists in the transferable session set the SCC AS shall:\n1)\tsend a SIP 480 (Temporarily Unavailable) response to reject the SIP INVITE request due to STN-SR;\n2)\tif the transferable session set contains dialogs supporting sessions with speech media component (inactive speech media component or in an early dialog state):\na)\tif the speech media component is the only media component in the dialog then release the remote leg as specified in 3GPP TS 24.229 [2]; and\nb)\tif the speech media component is not the only media component in the dialog then modify the remote leg and remove the speech media component as specified in 3GPP TS 24.229 [2].\nIf confirmed dialogs supporting a session with active speech media component exist in the transferable session set the SCC AS shall:\n1)\tsend a SIP re-INVITE request towards the remote UE and in a new SDP offer, include the media characteristics as received in the SIP INVITE request due to STN-SR, by following the rules of 3GPP TS 24.229 [2]; or\n2)\tsend a SIP re-INVITE request towards the remote UE according to the conditions depicted in subclause 12.3.5 and in a new SDP offer, include the media characteristics as received in the SIP INVITE request due to ATU-STI for PS to CS SRVCC, by following the rules of 3GPP TS 24.229 [2].\nUpon receiving the SIP 2xx response to the SIP re-INVITE request the SCC AS shall send the SIP 200 (OK) response to the SIP INVITE request due to STN-SR on the target access leg by following the rules of 3GPP TS 24.229 [2]. The SCC AS shall populate the SIP 200 (OK) response to the SIP INVITE request due to STN-SR as follows:\n1)\tinclude SDP answer containing the relevant media parameter of the SDP answer in the received response;\n2)\tif the SCC AS supports the PS to CS SRVCC of calls in alerting phase, include the g.3gpp.srvcc-alerting feature-capability indicator as described in annex C in the Feature-Caps header field according to IETF RFC 6809 [60]; and\n3)\tinclude the signalling elements described in subclause 6A.4.3A.\nIf the SCC AS supports the PS to CS SRVCC for calls in alerting phase and if the conditions for a terminating call in alerting phase specified in subclause 12.3.4.1 for a session in the transferable session set are fulfilled, the SCC AS shall follow the procedures in the subclause 12.3.4.4 and then continue with the procedures in this subclause.\nUpon receipt of the ACK request from the MSC server, start forwarding SIP messages from the remote UE to the MSC server for the session with active speech media component as specified in 3GPP TS 24.229 [2] and the present document.\nThe SCC AS shall remove non-transferred audio components and superfluous session as specified in subclause 12.3.8.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "12.3.2\tSCC AS procedures for PS to CS access transfer with MSC server assisted mid-call feature, PS to CS SRVCC",
                            "text_content": "The SCC AS shall apply the MSC Server assisted mid-call feature as described in subclause 12.3.2.2 if:\n1.\tone of the conditions is true:\na.\tthe SC UE included the g.3gpp.ics media feature tag as specified in the 3GPP TS 24.292 [4] in the Contact header field during establishment of the session associated with the SIP INVITE request due to STN-SR, the SCC AS local policy requires delaying application of the MSC Server assisted mid-call feature for a time given by local policy and the transfer request for the session with inactive speech media component has not been received within a time given by local policy after the reception of the SIP INVITE request due to STN-SR;\nb.\tthe SC UE included the g.3gpp.ics media feature tag as specified in the 3GPP TS 24.292 [4] in the Contact header field during establishment of the session associated with the SIP INVITE request due to STN-SR and the SCC AS local policy does not require delaying application of the MSC Server assisted mid-call feature for a time given by local policy; or\nc.\tthe SC UE did not include the g.3gpp.ics media feature tag as specified in the 3GPP TS 24.292 [4] in the Contact header field during establishment of the session associated with the SIP INVITE request due to STN-SR;\n2.\tthe Contact header field of the SIP INVITE request due to STN-SR or SIP INVITE request due to ATU-STI for PS to CS SRVCC includes the g.3gpp.mid-call media feature tag as specified in annex C; and\n3.\tone of the following is true for dialogs in the transferable session set:\nA.\tat least one confirmed dialog supporting a session with active speech media component exists and the following is true for the confirmed dialog supporting a session with the active speech media component which has been most recently made active:\n-\tthe Contact header field provided by the SC UE at the establishment of the dialog includes the g.3gpp.mid-call media feature tag as described in annex C; and\n-\tthe Feature-Caps header field sent by SCC AS towards the SC UE at the establishment of the dialog included g.3gpp.mid-call feature-capability indicator; or\nB.\tno confirmed dialog supporting a session with active speech media component exists and the following is true for the confirmed dialog supporting a session with inactive speech media component which became inactive most recently:\n-\tthe Contact header field provided by the SC UE at the establishment of the dialog includes the g.3gpp.mid-call media feature tag as described in annex C; and\n-\tthe Feature-Caps header field sent by SCC AS towards the SC UE at the establishment of the dialog included the g.3gpp.mid-call feature-capability indicator.\nWhen the SCC AS applies the MSC Server assisted mid-call feature for transfer of the first session the SCC AS shall select the first session to transfer as follows.\nThe first session to transfer is a session in the transferable session set such that:\n1.\tif one or more confirmed dialog supporting a session with active speech media component exists in the transferable session set then:\n-\tselect the confirmed dialog supporting a session with the active speech media component which became active most recently; and\n2.\tif no confirmed dialog supporting a session with active speech media component exists in the transferable set but one or more confirmed dialogs supporting a session with inactive speech media component exists for the user then:\n-\tselect the confirmed dialog supporting a session with inactive speech media component that became inactive most recently.\nIf the speech media component of the SDP offer in the SIP INVITE request due to ATU-STI is the same as the speech media component of the SDP negotiated by the ATCF in the first session to transfer, the SCC AS shall send a SIP 200 (OK) response to the SIP INVITE request. The SCC AS shall populate the SIP 200 (OK) response to the SIP INVITE request as follows:\n1)\tinclude SDP answer containing the speech media component of the SDP negotiated by SCC AS towards ATCF in the first session to transfer;\n2)\tinclude:\n-\tthe g.3gpp.mid-call feature-capability indicator as described in annex C; and\n-\tif the SCC AS supports the PS to CS SRVCC of calls in alerting phase, the g.3gpp.srvcc-alerting feature-capability indicator as described in annex C;\nin the Feature-Caps header field according to IETF RFC 6809 [60]; and\n3)\tinclude the signalling elements described in subclause 6A.4.3A.\nIf the speech media component of the SDP offer in the SIP INVITE request due to ATU-STI is different from the speech media component of the SDP negotiated by the ATCF in the first session to transfer or if the SIP INVITE request due to STN-SR was received, the SCC AS shall send a SIP re-INVITE request towards the remote UE with a new SDP offer, such that:\n1)\tif a session with the confirmed dialog supporting a session with active speech media component was selected, include the media characteristics as received in the SIP INVITE request due to ATU-STI or the SIP INVITE request due to STN-SR, by following the rules of 3GPP TS 24.229 [2] including directionality attributes indicating the directionality used at SC UE; and\n2)\tif a session with the confirmed dialog supporting a session with inactive speech media component was selected then include an SDP offer describing the audio media streams as negotiated in the session with the remote UE and:\n-\tif directionality used by SC UE is \"sendrecv\" or \"sendonly\", with the \"sendonly\" directionality; and\n-\tif directionality used by SC UE is \"recvonly\" or \"inactive\", with the \"inactive\" directionality.\nUpon receiving the SIP 2xx response to the SIP re-INVITE request the SCC AS shall:\n1)\tsend the SIP 200 (OK) response to the SIP INVITE request due to STN-SR on the target access leg populated as follows:\na)\tin the SDP answer, use the relevant media parameter of the SDP answer in the received response;\nb)\tinclude:\n-\tthe g.3gpp.mid-call feature-capability indicator as described in annex C; and\n-\tif the SCC AS supports the PS to CS SRVCC of calls in alerting phase, the g.3gpp.srvcc-alerting feature-capability indicator as described in annex C;\nin the Feature-Caps header field according to IETF RFC 6809 [60]; and\nc)\tinclude the signalling elements described in subclause 6A.4.3A.\nUpon receiving the SIP ACK request related to the SIP 200 (OK) response to the SIP INVITE request, the SCC AS shall start forwarding SIP messages from the remote UE to the MSC server for the session with active or inactive speech media component as specified in 3GPP TS 24.229 [2] and the present specification.\nUpon receiving the SIP ACK request related to the SIP 200 (OK) response to the SIP INVITE request and if:\n1)\tthe session associated with the SIP INVITE request due to STN-SR is related to a subscription as described in subclause 7.3.3; and\n2)\ta SIP 2xx response was received to the last SIP NOTIFY request with conference information sent to the UE within the related subscription;\nthen the SCC AS shall send a SIP INFO request towards the MSC Server as specified in 3GPP TS 24.229 [2] and IETF RFC 6086 [54] in the dialog created by the SIP INVITE request due to STN-SR. The SCC AS shall populate the SIP INFO request as follows:\n1)\tinclude the Info-Package header field as specified in IETF RFC 6086 [54] with g.3gpp.mid-call package name; and\n2)\tinclude application/vnd.3gpp.mid-call+xml XML body associated with the info package according to IETF RFC 6086 [54] and containing the participants extracted as specified in the subclause 9.1A of the subscription related to the session associated with the SIP INVITE request due to STN-SR as described in subclause 7.3.3.\nUpon receiving the SIP 2xx response to the SIP INFO request or receiving the ACK related to the SIP 200 (OK) response to the SIP INVITE request when the SIP INFO request was not sent, the SCC AS shall:\n-\tif one more confirmed SIP dialogs supporting a session with speech media component exist in the transferable session set transfer the additional second confirmed SIP dialog as described in subclause 12.3.2.3 and then continue with the procedures in this subclause; and\n-\tif no more confirmed SIP dialog supporting a session with speech media component exist in the transferable session set but SCC AS support the PS to CS SRVCC for calls in alerting phase and the conditions in the subclause 12.3.4.1 are fulfilled, perform the actions in subclause 12.3.4.4 and then continue with the procedures in this subclause.\nThe SCC AS shall remove non-transferred audio components and superfluous session as specified in subclause 12.3.8.\nWhen the SCC AS applies the MSC Server assisted mid-call feature for transfer of the additional session the SCC AS shall select the additional session to transfer as a session in the transferable session set such that:\n1.\tif more than one confirmed dialog supporting a session exists in the transferable session set, and exactly one confirmed dialog supporting a session with active speech media component exists and there is at least one remaining confirmed dialog supporting a session with inactive speech media component then:\n-\tselect the confirmed dialog supporting a session with inactive speech media component that became inactive most recently; and\n2.\tif more than one confirmed dialog supporting a session with active speech media component exists in the transferable session set then:\n-\tselect the confirmed dialog supporting a session with the active speech media component which became active second most recently.\nWhen the SCC AS transfers the selected additional session the SCC AS shall:\nA)\tsend a SIP REFER request towards the MSC Server in accordance with the procedures specified in 3GPP TS 24.229 [2], IETF RFC 4488 [20] and IETF RFC 3515 [13] as updated by IETF RFC 6665 [81] and IETF RFC 7647 [90] in the dialog created by the SIP INVITE request due to STN-SR. ; or send a SIP REFER request towards the ATCF in accordance with the procedures specified in 3GPP TS 24.229 [2], IETF RFC 4488 [20] and IETF RFC 3515 [13] as updated by IETF RFC 6665 [81] and IETF RFC 7647 [90] in the dialog created by the SIP INVITE request due to ATU-STI for PS to CS SRVCC. The SCC AS shall populate the SIP REFER request as follows:\n1.\tthe Refer-Sub header field with value \"false\" as specified in IETF RFC 4488 [20];\n2.\tthe Supported header field with value \"norefersub\" as specified in IETF RFC 4488 [20];\n3.\tthe Refer-To header field containing the additional transferred session SCC AS URI for PS to CS SRVCC and the following URI header fields containing information related to the additional transferred session:\na.\tthe Target-Dialog URI header field populated as specified in IETF RFC 4538 [11], containing the dialog identifier of the session with the SC UE;\nb.\tthe Require URI header field populated with the option tag value \"tdialog\";\nc.\tthe To URI header field populated as specified in IETF RFC 3261 [19], containing the P-Asserted-Identity provided by the remote UE during the session establishment;\nd.\tthe From URI header field populated as specified in IETF RFC 3261 [19], containing the public user identity of the SC UE provided during the session establishment;\ne.\tthe Content-Type header field with \"application/sdp\";\nf.\tthe \"body\" URI header field populated with an SDP body describing the media streams as negotiated in the session with the remote UE and:\n-\tif directionality used by SC UE is \"sendrecv\" or \"sendonly\", with the \"sendonly\" directionality; and\n-\tif directionality used by SC UE is \"recvonly\" or \"inactive\", with the \"inactive\" directionality; and\ng.\toptionally the P-Asserted-Identity URI header field containing value of the P-Asserted-Identity header field of the received SIP INVITE request;\n4.\tthe Content-Type header field with the value set to MIME type as specified in the subclause D.1.3;\n5.\ta XML body compliant to the XML schema specified in the subclause D.1.2;\n6.\tif:\na.\tthe session associated with the SIP INVITE request due to STN-SR, is not related to any subscription as described in subclause 7.3.3;\nb.\tthe additional transferred session is related to a subscription as described in subclause 7.3.3; and\nc.\ta SIP 2xx response was received to the last SIP NOTIFY request with conference information sent to the SC UE within the related subscription;\nthen SCC AS shall populate the XML body with the participants extracted as specified in the subclause 9.1A of the subscription related to the additional transferred session as specified in subclause 7.3.3; and\n7.\tif:\na.\tSCC AS supports CS to PS SRVCC;\nb.\tthe SIP INVITE request due to STN-SR contains Accept header field with application/vnd.3gpp.srvcc-ext+xml MIME type;\nc.\ta private user identity of a UE (i.e. other than those according to 3GPP TS 23.003 [12], subclause 20.3.3) is associated with the C-MSISDN in the P-Asserted-Identity header field of the SIP INVITE request due to STN-SR;\nd.\ta binding of a contact address exists for the private user identity of the UE:\ni)\twhere the g.3gpp.cs2ps-srvcc media feature tag is associated with the contact address of the UE; and\nii)\tsuch that SIP REGISTER request which registered the binding contained a Feature-Caps header field with the g.3gpp.atcf feature-capability indicator and with g.3gpp.cs2ps-srvcc feature-capability indicator;\ne.\tthe CS to PS SRVCC capability indication is indicated for the private user identity of the UE; and\nf.\tthe private user identity of the UE has the CS to PS SRVCC allowed indication in the subscription data;\nthen:\na.\ta MIME body of application/vnd.3gpp.srvcc-ext+xml MIME type:\ni)\tcontaining ATU management URI of the ATCF serving the SC UE;\nNOTE 1:\tThe ATCF management URI of the ATCF is the URI contained in the g.3gpp.atcf-mgmt-uri feature-capability indicator included in a Feature-Caps header field of the SIP REGISTER request, which registered the binding for the private user identity of the UE.\nii)\tcontaining C-MSISDN; and.\niii)\tnot indicating that information relate to a registration of MSC server with IMS.\nWhen the SCC AS receives the SIP INVITE request transferring additional session for PS to CS SRVCC, the SCC AS shall:\n1)\tassociate the SIP INVITE request transferring additional session for PS to CS SRVCC with a previously established SIP dialog i.e. identify the source access leg;\nNOTE 2:\tThe SIP dialog on the source access leg is identified by matching the dialog present in the Target-Dialog header field (see IETF RFC 4538 [11]) of the SIP INVITE request transferring additional session for PS to CS SRVCC with the previously established SIP dialog.\nNOTE 3:\tBy a previously established SIP dialog, it is meant a dialog for which a SIP 2xx response to the initial SIP INVITE request has been sent or received.\n2)\tif the SCC AS is unable to associate the SIP INVITE with a unique previously established SIP dialog, send a SIP 480 (Temporarily Unavailable) response to reject the SIP INVITE request relating to the access transfer and not processes the remaining steps;\n3)\tif the number of media lines in the target access leg is less than the number of media lines in the source access leg or the media type for the corresponding media lines is not the same as in the original session, send a SIP 404 (Not Found) response to reject the SIP INVITE request relating to the access transfer and not process the remaining steps;\n4)\tif the speech media component of the SDP offer in the SIP INVITE request transferring additional session for PS to CS SRVCC is different to the speech media component of the SDP received in the source access leg, send a SIP re-INVITE request towards the remote UE using the existing established dialog. The SCC AS shall populate the SIP re-INVITE request with a new SDP offer, following the rules specified in 3GPP TS 24.229 [2], containing the following media information:\nA)\tthe media characteristics as received in the SIP INVITE request transferring additional session for PS to CS SRVCC for media streams whose port is not set to zero; and\nB)\tfor the media streams in the SIP INVITE request transferring additional session for PS to CS SRVCC whose port is set to zero, include the corresponding media characteristics of those streams from the source access leg; and\n5)\tif the speech media component of the SDP offer in the SIP INVITE request transferring additional session for PS to CS SRVCC is the same as the speech media component of the SDP received in the source access leg, send the SIP 200 (OK) response to the SIP INVITE request transferring additional session for PS to CS SRVCC. In the SIP 200 (OK) response, the SCC AS shall:\na)\tinclude the SDP sent by the SCC AS in the source access leg;\nb)\tinclude the g.3gpp.mid-call feature-capability indicator as described in annex C in the Feature-Caps header field; and\nc)\tinclude the signalling elements described in subclause 6A.4.3A.\nUpon receiving the SIP 2xx response to the SIP re-INVITE request the SCC AS shall send the SIP 200 (OK) response to the SIP INVITE request transferring additional session for PS to CS SRVCC on the target access leg populated as follows:\n1)\tuse the relevant media parameter of the SDP answer in the received response;\n2)\tinclude the g.3gpp.mid-call feature-capability indicator as described in annex C in the Feature-Caps header field; and\n3)\tinclude the signalling elements described in subclause 6A.4.3A.\nUpon receiving the SIP ACK request from the MSC server, the SCC AS shall start forwarding SIP messages from the remote UE to the MSC server for the additional session as specified in 3GPP TS 24.229 [2] and the present specification.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "12.3.3\tSCC AS procedures for PS to CS SRVCC, abnormal case",
                            "text_content": "When the SCC AS receives a SIP re-INVITE request containing Reason header field containing protocol \"SIP\" and reason parameter \"cause\" with value \"487\" on\n-\tthe original source access leg; or\n-\tthe original source access leg of the additional transferred session if the SCC AS applies the MSC Server assisted mid-call feature;\nafter:\na)\thaving initiated an access transfer that was triggered by a SIP INVITE request due to STN-SR and the SIP INVITE request due to STN-SR transaction is not yet completed; or\nb)\thaving initiated an access transfer that was triggered by a SIP INVITE request due to - for PS to CS SRVCC and the SIP INVITE request due to - for PS to CS SRVCC transaction is not yet completed;\nthen the SCC AS shall wait until this transaction has completed and then continue with the steps 1) and 2) described below.\nWhen the SCC AS receives a SIP re-INVITE request(s) containing protocol \"SIP\" and reason parameter \"cause\" with value \"487\" after:\na)\thaving performed an access transfer that was triggered by a SIP INVITE request due to STN-SR; or\nb)\thaving performed an access transfer that was triggered by a SIP INVITE request due to - for PS to CS SRVCC;\nthen the SCC AS shall:\n1)\tnot release the original source access leg once the expiration of the timer described in subclause 12.3.8; and\n2)\ttreat the SIP re-INVITE request(s) as per procedures for removing and adding media as described in subclause 13.3.1.\nNOTE:\tThe SCC AS assigns an operator specific timer to delay the release of the Source Access Leg for PS to CS SRVCC access transfer.\nWhen the SCC AS receives a SIP response to the SIP re-INVITE request indicating success in removing all media components from a dialog that was created:\na)\tdue to the SIP INVITE request due to STN-SR; or\nb)\tdue to the SIP INVITE request due to - for PS to CS SRVCC;\nthen the SCC AS shall send a SIP BYE request on this dialog, by following the rules of 3GPP TS 24.229 [2] and start forwarding SIP message from the remote UE to the SC UE for this ongoing session as specified in 3GPP TS 24.229 [2] and the present specification.\nIf the SCC AS applies the procedures for the PS to CS SRVCC for calls in alerting phase or the PS to CS SRVCC for originating calls in pre-alerting phase (as specified in subclause 12.3.4), then when the SCC AS receives a SIP UPDATE request containing Reason header field containing protocol \"SIP\" and reason parameter \"cause\" with value \"487\" on:\n-\tthe original source access leg; or\n-\tthe original source access leg of the additional transferred session if the SCC AS applies the MSC Server assisted mid-call feature;\nafter having initiated an access transfer that was triggered by:\na)\ta SIP INVITE request due to STN-SR; or\nb)\ta SIP INVITE request due to - for PS to CS SRVCC;\nfor a session which is still in early dialog state the SCC AS shall:\n1)\tnot release the original access leg after the expiration of the timer described in subclause 12.3.8; and\n2)\ttreat the SIP UPDATE request(s) as per procedures for removing and adding media as described in subclause 13.3.1.\nThe SCC AS shall now start forwarding SIP messages from the remote UE to the SC UE for each dialog created by the SIP INVITE request due to STN-SR, the SIP INVITE request due to - or the SIP INVITE request transferring additional session for PS to CS SRVCC as specified in 3GPP TS 24.229 [2] and the present document.\nWhen the SCC AS receives a SIP 200 (OK) response to the SIP UPDATE request, then the SCC AS shall:\n1)\tif the SCC AS has already sent a SIP 200 (OK) response to a SIP INVITE request due to STN-SR or SIP INVITE request due to ATU-STI for PS to CS SRVCC then send a SIP BYE request on this dialog, and\na)\tif the SCC AS performs access transfer for an originating session which is in early dialog state , send a SIP 200 (OK) response to the SIP INVITE on the original source access leg; and\nb)\tif the SCC AS performs access transfer for an additional transferred originating session which is still in early dialog state, send a SIP 200 (OK) response to the INVITE on the original source access leg of the additional transferred session; and\n2)\tif the SCC AS has not sent a SIP 200 (OK) response to a SIP INVITE request due to STN-SR or SIP INVITE request due to ATU-STI for PS to CS SRVCC then send a SIP 480 (Temporarily Unavailable) response to reject the SIP INVITE request due to STN-SR or the SIP INVITE request due to - for PS to CS SRVCC.\nIf the SCC AS has received a SIP 200 (OK) response from the SC UE prior to receiving the SIP UPDATE request from the SC UE, then on receipt of the SIP 200 (OK) response to the SIP UPDATE request sent to the remote UE, the SCC AS shall send a SIP 200 (OK) response to the remote UE. Upon receiving the SIP ACK request from the remote UE, the SCC AS shall send a SIP ACK request to the SC UE.\nWhen  receives a SIP BYE request on the Source Access Leg with the Reason header field containing a SIP 503 (Service Unavailable) response code then:\n-\tif the SCC AS receives an initial SIP INVITE request on the Target Access Leg associated with the established dialog on the Source Access Leg, within a time defined by the operator policy after the SIP BYE request reception, then the SCC AS shall not initiate release of the Remote Leg; and\n-\tif the SCC AS does not receive an initial SIP INVITE request on the Target Access Leg associated with the established dialog on the Source Access Leg, within a time defined by the operator policy after the SIP BYE request reception then the SCC AS shall initiate release of the Remote Leg.\nNOTE:\t8 seconds is an appropriate value for the operator policy.\nThe procedures specified in subclause 10.3.6 apply.\nThis subclause describes the procedures for cancelling calls after the SCC AS have initiated an PS to CS SRVCC access transfer that was triggered by a SIP INVITE request due to STN-SR, a SIP INVITE request due to ATU-STI or a SIP INVITE request transferring additional session for PS to CS SRVCC for a session where the dialog is in confirmed state with active or inactive speech media component.\nIf the SCC AS receives a SIP BYE request containing a Reason header field containing the protocol value \"Q.850\" and the \"cause\" header field parameter with the value of \"31\" (normal unspecified) on:\n-\tthe target access leg where the dialog is in confirmed state with active speech media component;\n-\tthe target access leg where the dialog is in confirmed state with inactive speech media component, if the SCC AS applies the MSC server assisted mid-call feature;or\n-\tthe target access leg of an additional transferred session where the dialog is in confirmed state with an inactive speech media component, if the SCC AS applies the MSC server assisted mid-call feature,\nafter having initiated an access transfer and when the operator specific timer is still running, the SCC AS shall:\n1)\tsend the SIP 200 (OK) response to the SIP BYE request;\n2)\twait until the operator specific timer expires or until a SIP re-INVITE request from the SC UE containing the protocol value \"SIP\" and the \"cause\" header field parameter with the value \"487\" is received; and\n3)\tif the operator specific timer expires and no SIP re-INVITE request from the SC UE containing the protocol value \"SIP\" and the \"cause\" header field parameter with the value \"487\" is received, release the call according to procedures in 3GPP TS 24.229 [2].\nNOTE 1:\tAll protocol values in the Reason header field other than \"Q.850\" and all values of the \"cause\" header field parameter other than \"31\" (normal unspecified) will result in an immediate release of the source access leg and the remote UE leg.\nNOTE 2:\tThe SCC AS assigns an operator specific timer to delay the release of the source access leg for PS to CS SRVCC access transfers.\nWhen the SCC AS receives SIP re-INVITE request(s) from the SC UE containing the protocol value \"SIP\" and the \"cause\" header field parameter with the value \"487\" after having performed an access transfer that was triggered by a SIP INVITE request due to STN-SR and after receiving a SIP BYE request containing the Reason header field containing the protocol value \"Q.850\" and the \"cause\" header field parameter with the value \"31\" (normal unspecified) on the target access leg, then the SCC AS shall:\n1)\tnot release the original source access leg on expiry of the timer described in subclause 12.3.8; and\n2)\ttreat the SIP re-INVITE request(s) as per procedures for removing and adding media as described in subclause 13.3.1.\nNOTE 3:\tIn procedures in subclause 13.3.1 the SCC AS starts forwarding SIP messages from the remote UE to the SC UE for the ongoing session as specified in 3GPP TS 24.229 [2] and the present specification.\nThis subclause describes the procedures for cancelling calls after the SCC AS have initiated an PS to CS SRVCC access transfer that was triggered by a SIP INVITE request due to STN-SR, a SIP INVITE request due to ATU-STI or a SIP INVITE request transferring additional session for PS to CS SRVCC for a session in an early dialog phase as specified in subclause 12.3.4.3 and subclause 12.3.4.4 where the SCC AS is serving a originating user.\nIf the SCC AS applies the procedures for PS to CS SRVCC access transfer for calls in alerting phase when serving a originating user or if the SCC AS applies the procedures for PS to CS SRVCC access transfer for calls in pre-alerting phase, then if the SCC AS receives a SIP BYE request or a SIP CANCEL request containing a Reason header field containing the protocol value \"Q.850\" and the \"cause\" header field parameter with the value \"31\" (normal unspecified) on:\n-\tthe target access leg of a session in the originating pre-alerting phase, if the SCC AS applies PS to CS SRVCC access transfer for calls in pre-alerting phase;\n-\tthe target access leg of a session in the alerting phase, if the SCC AS applies PS to CS SRVCC access transfer for calls in alerting phase; and\n-\tthe target access leg of an additional transferred session in the pre-alerting phase or in the alerting phase, if the SCC AS applies the MSC server assisted mid-call feature; or\n-\ttarget of an additional transferred session if the SCC AS applies PS to CS SRVCC for calls in the pre-alerting phase or in alerting phase,\nafter having initiated an access transfer for a session which is still in early dialog state when the operator specific timer is still running, the SCC AS shall:\n1)\tif a SIP BYE was received, send the SIP 200 (OK) response to the SIP BYE request;\n1A)\tif a SIP CANCEL request was received, send the SIP 200 (OK) response to the SIP CANCEL request;\n2)\twait until the operator specific timer expires or until a SIP UPDATE request from the SC UE containing the protocol value \"SIP\" and the \"cause\" header field parameter with the value \"487\" is received; and\n3)\tif the operator specific timer expires and no SIP UPDATE request from the SC UE containing the protocol value \"SIP\" and the \"cause\" header field parameter with the value \"487\" is received, cancel the call according to procedures in 3GPP TS 24.229 [2].\nNOTE 1:\tAll protocol values in the Reason header field other than \"Q.850\" and all other values of the \"cause\" header field parameter other than \"31\" (normal unspecified) will result in an immediate release of all dialogs associated with the source access leg and cancelling of all dialogs associated with the remote UE leg.\nNOTE 2:\tThe SCC AS assigns an operator specific timer to delay the release of the source access leg for PS to CS SRVCC access transfers.\nWhen the SCC AS receives a SIP UPDATE request(s) containing the protocol value \"SIP\" and the \"cause\" header field parameter with the value \"487\" from the SC UE after having performed an access transfer that was triggered by a SIP INVITE request due to STN-SR, a SIP INVITE request due to ATU-STI or a SIP INVITE request transferring additional session for PS to CS SRVCC and after receiving a SIP BYE request or a SIP CANCEL request containing the Reason header field containing the protocol value \"Q.850\" and the \"cause\" header field parameter with the value \"31\" (normal unspecified) on the target access leg, then the SCC AS shall:\n1)\tnot release the original source access leg once the expiration of the timer described in subclause 12.3.8; and\n2)\ttreat the SIP UPDATE request(s) as per procedures for removing and adding media as described in subclause 13.3.1.\nNOTE 3:\tBy removing and adding media in subclause 13.3.1 the SCC AS starts forwarding SIP messages from the remote UE to the SC UE for the ongoing dialogs as specified in 3GPP TS 24.229 [2] and the present specification.\nIf the SCC AS has received a SIP 200 (OK) response from the SC UE prior to receiving the SIP UPDATE request from the SC UE, then on receipt of the SIP 200 (OK) response to the SIP UPDATE request sent to the remote UE, the SCC AS shall send a SIP 200 (OK) response to the remote UE. Upon receiving the SIP ACK request from the remote UE, the SCC AS shall send a SIP ACK request to the SC UE.\nThis subclause describes the procedures for cancelling calls after the SCC AS have initiated an PS to CS SRVCC access transfer that was triggered by a SIP INVITE request due to STN-SR, a SIP INVITE request due to ATU-STI or a SIP INVITE request transferring additional session for PS to CS SRVCC for a session in an alerting phase as specified in subclause 12.3.4.2 and subclause 12.3.4.4 where the SCC AS is serving a terminating user.\nIf the SCC AS applies the procedures for PS to CS SRVCC access transfer for calls in alerting phase and when serving a terminating user, then if the SCC AS receives a SIP BYE request or a SIP CANCEL request containing the protocol value \"Q.850\" and the \"cause\" header field parameter with the value \"31\" (normal unspecified) cancelling SIP INVITE request due to STN-SR on:\n-\tthe target access leg of a session in the alerting phase, if the SCC AS applies PS to CS SRVCC for calls in alerting phase;\n-\tthe target access leg of an additional transferred session in the alerting phase, if the SCC AS applies the MSC server assisted mid-call feature; or\n-\ttarget of an additional transferred session in the alerting phase, if the SCC AS applies PS to CS SRVCC for calls in alerting phase,\nafter having initiated an access transfer for a session which is still in the alerting phase when the operator specific timer is still running, then the SCC AS shall:\n1)\tif a SIP BYE was received, send the SIP 200 (OK) response to the BYE request;\n1A)\tif a SIP CANCEL request was received, send a SIP 200 (OK) response to the SIP CANCEL request;\n2)\twait until the operator specific timer expires or until a SIP UPDATE request from the SC UE containing the protocol value \"SIP\" and the \"cause\" header field parameter with the value \"487\" is received; and\n3)\tif the operator specific timer expires and no SIP UPDATE request from the SC UE containing the protocol value \"SIP\" and the \"cause\" header field parameter with the value \"487\" is received then:\na)\tsend a SIP 486 (Busy) response to the SIP INVITE request due to to terminating filter criteria from the SC UE towards the remote UE as specified in 3GPP TS 24.229 [2]; and\nb)\tif a SIP CANCEL request was received, send a SIP 487 (Request Terminated) response to the SIP INVITE request due to STN-SR, the SIP INVITE request due to ATU-STI or the SIP INVITE request transferring additional session for PS to CS SRVCC as specified in 3GPP TS 24.229 [2].\nNOTE 1:\tAll protocol values in the Reason header field other than \"Q.850\" and all other values of the \"cause\" header field parameter other than \"31\" (normal unspecified) will result in an immediate release of the source access leg associated with the SC UE and the associated leg towards remote UE. Any other dialogs associated with the same user will remain in the early dialog phase. The procedure for handling a SIP BYE request or SIP CANCEL request with other values of the \"cause\" header field parameter than \"31\" (normal unspecified) is described in subclause 12.3.11.\nNOTE 2:\tThe SCC AS assigns an operator specific timer to delay the release of the source access leg for PS to CS SRVCC access transfers.\nWhen the SCC AS receives a SIP UPDATE request(s) containing the protocol value \"SIP\" and the \"cause\" header field parameter with the value \"487\" from the SC UE after having performed an access transfer and after receiving a SIP BYE request or a SIP CANCEL request containing the Reason header field containing the protocol value \"Q.850\" and the \"cause\" header field parameter with the value \"31\" (normal unspecified) on the target access leg, then the SCC AS shall:\n1)\tnot release the original source access leg once the expiration of the timer as described in subclause 12.3.8;\n2)\ttreat the SIP UPDATE request(s) as per procedures for removing and adding media as described in subclause 13.3.1; and\n3)\tstart forwarding SIP messages from the remote UE to the SC UE for this dialog triggered by a SIP INVITE request due to STN-SR, a SIP INVITE request due to ATU-STI or a SIP INVITE request transferring additional session for PS to CS SRVCC for a session in an alerting phase as specified in 3GPP TS 24.229 [2] and the present specification.\nIf the SCC AS has received a SIP 200 (OK) response to the SIP INVITE requests due to terminating filter criteria from the SC UE prior to receiving the SIP UPDATE request from the SC UE, then on receipt of the SIP 200 (OK) response to the SIP UPDATE request sent to the remote UE, the SCC AS shall send a SIP 200 (OK) response to the remote UE. Upon receiving the SIP ACK request from the remote UE, the SCC AS shall send a SIP ACK request to the SC UE.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "12.3.4\tSCC AS procedures for PS to CS access transfer when call is in alerting phase or pre-alerting phase",
                            "text_content": "The SCC AS shall apply the procedures for the PS to CS SRVCC for calls in alerting phase as described in subclauses 12.3.4.2 or 12.3.4.3 if:\nNOTE 1:\tThe transferable session can contain early dialogs supporting active speech media and video media components if the transferable session set was created due to vSRVCC otherwise the transferable session set can only contain early dialogs supporting active speech media component.\n1.\tthe Contact header field of the SIP INVITE request routed to the SCC AS due to a STN-SR includes the g.3gpp.srvcc-alerting media feature tag as specified in annex C; and\n2.\tone of the following is true:\nA.\tthere are one or more dialogs supporting sessions with speech media component or speech media and video media components existing for the served user identified in the transferable set in the P-Asserted-Identity header field, such that:\na.\tall dialogs are early dialogs;\nb.\tSIP 180 (Ringing) response to SIP INVITE request was received in at least one of those early dialogs, all such SIP 180 (Ringing) responses are responses to the same SIP INVITE request and at least one of such SIP 180 (Ringing) responses was received in an early dialog supporting session with active speech media component;\nc.\tthe Contact header field provided by the SC UE includes the g.3gpp.srvcc-alerting media feature tag as described in annex C; and\nd.\tthe Feature-Caps header field provided by the SCC AS towards the SC UE includes the g.3gpp.srvcc-alerting feature-capability indicator as described in annex C; or\nB.\tthere are several dialogs supporting sessions with speech media component for the served user identified in the P-Asserted-Identity header field, such that:\na.\tthere are one or more early dialogs and the remaining dialogs are confirmed dialogs;\nb.\tSIP 180 (Ringing) response to SIP INVITE request was received in at least one of those early dialogs, all such SIP 180 (Ringing) responses are responses to the same SIP INVITE request and at least one of such SIP 180 (Ringing) responses was received in an early dialog supporting session with active speech media component;\nc.\tall the confirmed dialogs support sessions with inactive speech media component;\nd.\t does not apply the MSC server assisted mid-call feature as described in subclause 12.3.2;\ne.\tthe Contact header field provided by the SC UE at the establishment of the early dialog(s) included the g.3gpp.srvcc-alerting media feature tag as described in annex C; and\nf.\tthe Feature-Caps header field provided by the SCC AS towards the SC UE at the establishment of the early dialog(s) includes the g.3gpp.srvcc-alerting feature-capability indicator as described in annex C.\nThe SCC AS shall apply the procedures for the PS to CS SRVCC of originating call in pre-alerting phase as described in subclauses 12.3.4.3 if:\n1)\tthe Contact header field of the SIP INVITE request due to a STN-SR includes the g.3gpp.ps2cs-srvcc-orig-pre-alerting media feature tag as described in annex C; and\n2)\tone of the following is true:\nA)\tthere are zero, one or more dialogs supporting a session with speech media component in the transferable set for the served user identified in the P-Asserted-Identity header field and a SIP INVITE request was received from SC UE of the served user identified in the P-Asserted-Identity header field such that:\na)\tall dialogs are early dialogs created by a SIP response to the SIP INVITE request;\nb)\ta final SIP response to the SIP INVITE request has not been sent yet;\nc)\ta SIP 180 (Ringing) response to the SIP INVITE request has not been sent yet in any existing early dialog created by a SIP response to the SIP INVITE request;\nd)\tthe SIP INVITE request included a Contact header field containing the g.3gpp.ps2cs-srvcc-orig-pre-alerting media feature tag as described in annex C; and\ne)\ta SIP 1xx response to the SIP INVITE request was sent where the SIP 1xx response contained a Feature-Caps header field with the g.3gpp.ps2cs-srvcc-orig-pre-alerting feature-capability indicator as described in annex C; or\nNOTE 2:\tSCC AS can have zero dialogs if all the early dialogs were terminated by 199 (Early Dialog Terminated) as described in RFC 6228 [80].\nB)\tthere are one or more dialogs supporting sessions with speech media component in the transferable set for the served user identified in the P-Asserted-Identity header field such that:\na)\tthere are zero, one or more early dialogs and the remaining dialogs are confirmed dialogs;\nb)\tall the confirmed dialogs support sessions with inactive speech media component;\nc)\tSCC AS does not apply the MSC server assisted mid-call feature as described in subclause 12.3.2; and\nd)\ta SIP INVITE request was received from SC UE of the served user identified in the P-Asserted-Identity header field such that:\n-\tall early dialogs are created by a SIP response to the SIP INVITE request;\n-\ta final SIP response to the SIP INVITE request has not been sent yet;\n-\ta SIP 180 (Ringing) response to the SIP INVITE request has not been sent yet in any existing early dialog created by a SIP response to the SIP INVITE request;\n-\tthe SIP INVITE request included a Contact header field containing the g.3gpp.ps2cs-srvcc-orig-pre-alerting media feature tag as described in annex C; and\n-\ta SIP 1xx response to the SIP INVITE request was sent where the SIP 1xx response contained a Feature-Caps header field with the g.3gpp.ps2cs-srvcc-orig-pre-alerting feature-capability indicator as described in annex C.\nThe SCC AS shall apply the procedures for the PS to CS SRVCC of terminating call in pre-alerting phase as described in subclauses 12.3.4.2 if:\n1)\tthe Contact header field of the SIP INVITE request due to a STN-SR includes the g.3gpp.ps2cs-srvcc-term-pre-alerting media feature tag as described in annex C; and\n2)\tone of the following is true:\nA)\tthere are zero, one or more dialogs supporting a session with speech media component in the transferable set for the served user identified in the P-Asserted-Identity header field and a SIP INVITE request was sent to the SC UE of the served user identified in the P-Asserted-Identity header field such that:\na)\tall dialogs are early dialogs created by a SIP response to the SIP INVITE request;\nb)\ta final SIP response to the SIP INVITE request has not been sent yet;\nc)\ta SIP 180 (Ringing) response to the SIP INVITE request has not been sent yet in any existing early dialog created by a SIP response to the SIP INVITE request;\nd)\tthe SIP INVITE request included a Contact header field containing the g.3gpp.ps2cs-srvcc-term-pre-alerting media feature tag as described in annex C; and\ne)\ta SIP 1xx response to the SIP INVITE request was received where the SIP 1xx response contained a Feature-Caps header field with the g.3gpp.ps2cs-srvcc-term-pre-alerting feature-capability indicator as described in annex C; or\nNOTE 3:\tSCC AS can have zero dialogs if all the early dialogs were terminated by 199 (Early Dialog Terminated) as described in RFC 6228 [80].\nB)\tthere are one or more dialogs supporting sessions with speech media component in the transferable set for the served user identified in the P-Asserted-Identity header field such that:\na)\tthere are zero, one or more early dialogs and the remaining dialogs are confirmed dialogs;\nb)\tall the confirmed dialogs support sessions with inactive speech media component;\nc)\tSCC AS does not apply the MSC server assisted mid-call feature as described in subclause 12.3.2; and\nd)\ta SIP INVITE request was sent to the SC UE of the served user identified in the P-Asserted-Identity header field such that:\n-\tall early dialogs are created by a SIP response to the SIP INVITE request;\n-\ta final SIP response to the SIP INVITE request has not been received yet;\n-\ta SIP 180 (Ringing) response to the SIP INVITE request has not been sent yet in any existing early dialog created by a SIP response to the SIP INVITE request;\n-\tthe SIP INVITE request included a Contact header field containing the g.3gpp.ps2cs-srvcc-term-pre-alerting media feature tag as described in annex C; and\n-\ta SIP 1xx response to the SIP INVITE request was received where the SIP 1xx response contained a Feature-Caps header field with the g.3gpp.ps2cs-srvcc-term-pre-alerting feature-capability indicator as described in annex C.\nThe SCC AS shall apply the procedures for the PS to CS SRVCC of call in alerting phase as described in subclauses 12.3.4.4 if:\n1.\tthe Contact header field of the SIP INVITE request routed to the SCC AS due to a STN-SR includes the g.3gpp.srvcc-alerting media feature tag as described in annex C;\n2.\tvoid;\n3.\tvoid; and\n4.\tone of the following is true:\nA.\ttwo or more dialogs supporting sessions with speech media component exist for the served user in the transferable set, such that:\na.\tthe Contact header fields provided by the SC UE at the establishment of sessions included the g.3gpp.srvcc-alerting media feature tag as described in annex C;\nb.\tthe Feature-Caps header field provided by the SCC AS towards the SC UE at the establishment of sessions included the g.3gpp.srvcc-alerting feature-capability indicator as described in annex C;\nc.\tone dialog is a confirmed dialog with active speech media component and the remaining dialog(s) are early dialog(s); and\nd.\tSIP 180 (Ringing) response to SIP INVITE request was received in at least one of those early dialogs, all such SIP 180 (Ringing) responses are responses to the same SIP INVITE request and at least one of such SIP 180 (Ringing) responses was received in an early dialog supporting session with active speech media component;\nB.\ttwo or more dialogs supporting sessions with speech media component exist for the served user identified in the transferable session set, such that:\na.\tthe Contact header fields provided by the SC UE at the establishment of sessions included the g.3gpp.srvcc-alerting media feature tag as described in annex C;\nb.\tthe Feature-Caps header field provided by the SCC AS towards the SC UE at the establishment of sessions included the g.3gpp.srvcc-alerting feature-capability indicator as described in annex C;\nc.\tone or more dialogs are a confirmed dialog with inactive speech media component and the remaining dialog(s) are early dialog(s);\nd.\tSIP 180 (Ringing) response to SIP INVITE request was received in at least one of those early dialogs, all such SIP 180 (Ringing) responses are responses to the same SIP INVITE request and at least one of such SIP 180 (Ringing) responses was received in an early dialog supporting session with active speech media component; and\ne.\tthe SCC AS also applies the MSC server assisted mid-call feature as described in subclause 12.3.2; or\nC.\ttwo or more dialogs supporting the sessions with speech media component exist for the served user identified in the transferable session set, such that:\na.\tthe Contact header fields provided by the SC UE at the establishment of the sessions included the g.3gpp.srvcc-alerting media feature tag as described in annex C;\nb.\tthe Feature-Caps header field provided by the SCC AS towards the SC UE at the establishment of sessions included the g.3gpp.srvcc-alerting feature-capability indicator as described in annex C;\nc.\tone or more dialogs are a confirmed dialogs with active speech media components, there are one or more dialogs that are confirmed dialogs with inactive speech media component and the remaining dialog(s) are early dialog(s);\nd.\tSIP 180 (Ringing) response to SIP INVITE request was received in at least one of those early dialogs, all such SIP 180 (Ringing) responses are responses to the same SIP INVITE request and at least one of such SIP 180 (Ringing) responses was received in an early dialog supporting session with active speech media component; and\ne.\tthe SCC AS does not apply the MSC server assisted mid-call feature as described in subclause 12.3.2.\nThe SCC AS shall apply the procedures for the PS to CS SRVCC of originating call in pre-alerting phase as described in subclause 12.3.4.4 if:\n1.\tthe Contact header field of the SIP INVITE request routed to the SCC AS due to a STN-SR includes the g.3gpp.ps2cs-srvcc-orig-pre-alerting media feature tag as described in annex C; and\n2.\tthere are one or more dialogs supporting sessions with speech media component exist for the served user identified in the transferable session set such that:\nA)\tthere are zero, one or more early dialogs and the remaining dialog(s) are confirmed dialog(s);\nB)\tall the confirmed dialogs support sessions with inactive speech media component;\nC)\tthe SCC AS also applies the MSC server assisted mid-call feature as described in subclause 12.3.2; and\nD)\ta SIP INVITE request was received from the SC UE such that:\na)\tall the early dialogs are created by a SIP response to the SIP INVITE request;\nb)\ta final SIP response to the SIP INVITE request has not been received yet;\nc)\ta SIP 180 (Ringing) response to the SIP INVITE request has not been received yet in any existing early dialog created by a SIP response to the SIP INVITE request;\nd)\tthe SIP INVITE request received from the SC UE includes a Contact header field containing the g.3gpp.ps2cs-srvcc-orig-pre-alerting media feature tag as described in annex C; and\ne)\ta SIP 1xx response to the SIP INVITE request was sent towards the SC UE where the SIP 1xx response contained a Feature-Caps header field with the g.3gpp.ps2cs-srvcc-orig-pre-alerting feature-capability indicator as described in annex C.\nWhen the session in the transferable session set is a terminating call not accepted yet the SCC AS shall associate the SIP INVITE request with the early dialog related to the terminating session in the transferable session set.\nIf the speech media component of the SDP offer in the SIP INVITE request due to STN-SR is the same as the speech media component of the SDP received in the source access leg of the session being transferred, the SCC AS shall send a SIP 183 (Session Progress) response to the SIP INVITE request due to STN-SR containing:\na)\tthe SDP sent by the SCC AS in the source access leg of the session being transferred; and\nb)\tthe signalling elements described in subclause 6A.4.3A.\nIf the speech media component of the SDP offer in the SIP INVITE request due to STN-SR is different to the speech media component of the SDP received in the source access leg of the session being transferred and the remote UE has provided an Allow header field listing the SIP UPDATE method or has not provided an Allow header field, the  shall update the remote leg by sending a SIP UPDATE request towards the remote UE using the existing established dialog according as specified in 3GPP TS 24.229 [2]. The SCC AS shall populate the SIP UPDATE request with the SDP offer received in the SIP INVITE request due to STN-SR.\nUpon receiving the SIP 200 (OK) response to the SIP UPDATE request from the remote UE, the SCC AS shall send a SIP 183 (Session Progress) response in response to the SIP INVITE request due to STN-SR towards the MSC server. The SCC AS shall populate the SIP 183 (Session Progress) response to the SIP INVITE request due to STN-SR with:\na)\tthe SDP answer received in the SIP 200 (OK) response to the SIP UPDATE request; and\nb)\tthe signalling elements described in subclause 6A.4.3A.\nIf:\n-\tthe speech media component of the SDP offer in the SIP INVITE request due to STN-SR is different to the speech media component of the SDP received in the source access leg of the session being transferred and the remote UE has provided an Allow header field not listing the SIP UPDATE method; or\n-\tSIP 405 (Method Not Allowed) response was received to the SIP UPDATE sent towards the remote UE;\nthen the SCC AS shall create a new early dialog by sending a SIP 183 (Session Progress) response to the SIP INVITE request due to STN-SR. The SCC AS shall populate the SIP 183 (Session Progress) response with:\n1.\tan SDP answer:\nA)\twith c-line set to the unspecified address (0.0.0.0) if IPv4 or to a domain name within the \".invalid\" DNS top-level domain in case of IPv6 as described in IETF RFC 6157 [74]; and\nB)\tincluding media of media types received in SDP offer of the SIP INVITE request due to STN-SR, which are also offered in the SIP INVITE request from the served user; and\n2.\tthe signalling elements described in subclause 6A.4.3A.\nUpon receiving the SIP PRACK request from the target access leg, the SCC AS shall send a 200 (OK) response to the PRACK request and then send a SIP INFO request towards the MSC server as specified in 3GPP TS 24.229 [2] and IETF RFC 6086 [54] in the dialog created by the SIP INVITE request due to STN-SR. The SCC AS shall populate the SIP INFO request as follows:\n1.\tinclude the Info-Package header field as specified in IETF RFC 6086 [54] with 3gpp.state-and-event info package name; and\n2.\tinclude an application/vnd. 3gpp.state-and-event-info +xml XML body associated with the info package according to IETF RFC 6086 [54] and compliant to the XML schema specified in the clause D.2:\nA)\tif a SIP 180 (Ringing) response to the SIP INVITE request has already been sent in any of the existing early dialogs associated with the terminating call not accepted yet, with the state-info XML element containing \"early\" and the direction XML element containing \"receiver\"; or\nB)\tif the SCC AS supports the PS to CS SRVCC for terminating calls in pre-alerting phase and if a SIP 180 (Ringing) response to the SIP INVITE request has not been sent yet in any of the existing early dialogs associated with the terminating call not accepted yet, with the state-info XML element containing \"pre-alerting\" and the direction XML element containing \"receiver\".\nUpon receiving the 200 (OK) to the PRACK request from the MSC server the SCC AS shall start forwarding messages from the remote UE to the MSC server for this early dialog related to the terminating session as specified in 3GPP TS 24.229 [2] and the present specification.\nUpon receiving the SIP INFO request which includes an Info-Package header field containing 3gpp.state-and-event info package name and an application/vnd. 3gpp.state-and-event-info +xml XML body associated with the info package according to IETF RFC 6086 [54] and compliant to the XML schema specified in the clause D.2 from the MSC Server with the event XML element containing \"alerting-started\", the SCC AS shall send a SIP 180 (Ringing) response to the SIP INVITE request received earlier from the remote UE as specified in 3GPP TS 24.229 [2].\nUpon receiving the SIP INFO request which includes an Info-Package header field containing 3gpp.state-and-event info package name and an application/vnd. 3gpp.state-and-event-info +xml XML body associated with the info package according to IETF RFC 6086 [54] and compliant to the XML schema specified in the clause D.2 from the MSC Server with the event XML element containing \"call-accepted\", the SCC AS shall send as specified in 3GPP TS 24.229 [2]:\n1)\ta SIP 200 (OK) response to the SIP INVITE request received earlier from the remote UE indicating that the called party has answered the call;\n2)\tif the SIP 2xx (OK) response was received to the SIP UPDATE sent towards the remote UE or the speech media component of the SDP offer in the SIP INVITE request due to STN-SR is the same as the speech media component of the SDP received in the source access leg of the session being transferred, a SIP 200 (OK) response to the SIP INVITE request due to STN-SR towards the MSC server to indicate the successful access transfer populated with the signalling elements described in subclause 6A.4.3A; and\n3)\tif:\n-\tthe remote UE has provided an Allow header field not listing the SIP UPDATE method and the speech media component of the SDP offer in the SIP INVITE request due to STN-SR is different to the speech media component of the SDP received in the source access leg of the session being transferred; or\n-\ta SIP 405 (Method Not Allowed) response was received to the SIP UPDATE sent towards the remote UE;\nthen when a SIP ACK request is received on the remote leg, send a SIP re-INVITE request on the remote leg as specified in 3GPP TS 24.229 [2]. The SCC AS shall populate the SIP re-INVITE request with the SDP offer received in the SIP INVITE request due to STN-SR as specified in 3GPP TS 24.229 [2]. Upon receiving the SIP 200 (OK) response to the SIP re-INVITE request, the SCC AS shall send SIP ACK request on the remote leg and shall send a SIP 200 (OK) response to the SIP INVITE request due to STN-SR as specified in 3GPP TS 24.229 [2], using a dialog different to the dialog of SIP 183 (Session Progress) response to the SIP INVITE request due to STN-SR. The SCC AS shall populate the SIP 200 (OK) response with:\na)\tthe SDP answer received in the SIP 200 (OK) response to the SIP re-INVITE request as specified in 3GPP TS 24.229 [2]; and\nb)\tthe signalling elements described in subclause 6A.4.3A.\nThe SCC AS shall remove non-transferred audio and video media components and superfluous session as specified in subclause 12.3.8.\nWhen the session in the transferable session set is an originating call not accepted yet the SCC AS shall associate the SIP INVITE request due to STN-SR with an early dialog or early dialogs related to the originating call.\nIf the SCC AS receives a SIP 18x response on the remote leg after receiving a SIP INVITE request due to STN-SR or a SIP INVITE request due to ATU-STI, and this SIP 18x response does not require use of reliable provisional responses, the SCC AS shall:\n-\tstore this SIP 18x response; and\n-\tif a P-Early-Media header field is received in the SIP 18x response, store the P-Early-Media header field.\nThe SCC AS shall store the received SIP 18x responses separately for each early dialog. If the SCC AS has already stored a SIP 18x response for an early dialog and receives another SIP 18x response for the same early dialog, the SCC AS may remove the stored SIP 18x response for that early dialog and shall store the new SIP 18x response for that early dialog.\nThe SCC AS shall store the received P-Early-Media header field separately for each early dialog. If the SCC AS has already stored a P-Early-Media header field received in a SIP 18x response for an early dialog, and receives another SIP 18x response for the same early dialog containing a P-Early-Media header field, the SCC AS may remove the stored P-Early-Media header field for that early dialog and shall store the new P-Early-Media header field for that early dialog,\nNOTE:\tThe P-Early-Media header field is stored separately to prepare for the case that a subsequent SIP 18x response does not contain a P-Early-Media header field.\nIf there is only one early dialog related to the originating call not accepted yet available for the served user and if the speech media component of the SDP offer in the SIP INVITE request due to STN-SR is the same as the speech media component of the SDP received in the source access leg of the session being transferred, the SCC AS shall send a SIP 183 (Session Progress) response to the SIP INVITE request due to STN-SR containing:\n-\tthe SDP sent by the SCC AS in the source access leg of the session being transferred;\n-\tif the SIP INVITE request due to STN-SR contains a P-Early-Media header field with the \"supported\" parameter and if the SCC AS has received a P-Early-Media header field in a SIP message in the dialog of the original SIP INVITE request sent to the remote leg, include a P-Early-Media header field containing the value of the last P-Early-Media header field received in a SIP message in the dialog of the original SIP INVITE request sent to the remote leg; and\n-\tthe signalling elements described in subclause 6A.4.3A.\nIf there is only one early dialog related to the originating call not accepted yet available for the served user, the remote UE has provided an Allow header field listing the SIP UPDATE method or has not provided Allow header field, the remote UE has provided the SDP answer, and the speech media component of the SDP offer in the SIP INVITE request due to STN-SR is different with the speech media component of the SDP received in the source access leg of the session being transferred, the SCC AS shall update the remote leg by sending a SIP UPDATE request towards the remote UE using the existing early dialog as specified in 3GPP TS 24.229 [2]. The SCC AS shall populate the SIP UPDATE request with the SDP offer received in the SIP INVITE request due to STN-SR.\nUpon receiving the SIP 200 (OK) response to the SIP UPDATE request from the remote UE, the SCC AS shall send a SIP 183 (Session Progress) response in response to the SIP INVITE request due to STN-SR towards the MSC server. The SCC AS shall populate the SIP 183 (Session Progress) response to the SIP INVITE request due to STN-SR with:\n-\tthe SDP answer received in the SIP 200 (OK) response to the SIP UPDATE request;\n-\tif the SIP INVITE request due to STN-SR contains a P-Early-Media header field with the \"supported\" parameter and if the SCC AS has received a P-Early-Media header field in a SIP message in the dialog of the SIP UPDATE request, include a P-Early-Media header field containing the value of the last P-Early-Media header field received in a SIP message in the dialog of the SIP UPDATE request; and\n-\tthe signalling elements described in subclause 6A.4.3A.\nIf there are more than one early dialogs related to the originating call not accepted yet available for the served user due to forking as described in 3GPP TS 24.229 [2], for each existing early dialog where the speech media component of the SDP offer in the SIP INVITE request due to STN-SR is the same as the speech media component of the SDP received in the source access leg of the session being transferred, the SCC AS shall create a new early dialog by sending a SIP 183 (Session Progress) response to the SIP INVITE request due to STN-SR containing:\n-\tthe SDP sent by the SCC AS in the source access leg of the session being transferred;\n-\tif the SIP INVITE request due to STN-SR contains a P-Early-Media header field with the \"supported\" parameter and if the SCC AS has received a P-Early-Media header field in a SIP message in the dialog of the original SIP INVITE request sent to the remote leg, include a P-Early-Media header field containing the value of the last P-Early-Media header field received in a SIP message in the dialog of the original SIP INVITE request sent to the remote leg; and\n-\tthe signalling elements described in subclause 6A.4.3A.\nIf there are more than one early dialogs related to the originating call not accepted yet available for the served user due to forking as described in 3GPP TS 24.229 [2], for each existing early dialog where the speech media component of the SDP offer in the SIP INVITE request due to STN-SR is not the same as the speech media component of the SDP received in the source access leg of the session being transferred, the remote UE has provided an Allow header field listing SIP UPDATE method or has not provided Allow header field, and the remote UE provided SDP answer, the SCC AS shall update the remote leg(s) by sending SIP UPDATE request(s) simultaneously towards remote UE using such early dialog(s) as specified in 3GPP TS 24.229 [2]. The SCC AS shall populate each SIP UPDATE request with the SDP offer received in the SIP INVITE request due to STN-SR. Upon receiving each SIP 200 (OK) response to the SIP UPDATE request from the remote UE, the SCC AS shall create a new early dialog by sending a SIP 183 (Session Progress) response in response to the SIP INVITE request due to STN-SR towards the MSC server. The SCC AS shall populate the SIP 183 (Session Progress) response to the SIP INVITE request due to STN-SR with:\n-\tthe SDP answer received in the SIP 200 (OK) response to the SIP UPDATE request;\n-\tIf the SIP INVITE request due to STN-SR contains a P-Early-Media header field with the \"supported\" parameter and if the SCC AS has received a P-Early-Media header field in a SIP message in the dialog of the SIP UPDATE request, include a P-Early-Media header field containing the value of the last P-Early-Media header field received in a SIP message in the dialog of the SIP UPDATE request; and\n-\tthe signalling elements described in subclause 6A.4.3A.\nIf one or more early dialogs related to the originating call not accepted yet are available for the served user, and in each such early dialog:\n-\tthe remote UE of the early dialog has provided an Allow header field not listing the SIP UPDATE method, and the speech media component of the SDP offer in the SIP INVITE request due to STN-SR is not the same as the speech media component of the SDP received in each such source access leg of the session being transferred; or\n-\tSIP 405 (Method Not Allowed) response was received to the SIP UPDATE sent towards the remote UE in the early dialog;\nthe SCC AS shall create a new dialog by sending a SIP 183 (Session Progress) response to the SIP INVITE request due to STN-SR. The SCC AS shall populate the SIP 183 (Session Progress) response with:\n1.\tan SDP answer:\nA)\twith c-line set to the unspecified address (0.0.0.0) if IPv4 or to a domain name within the \".invalid\" DNS top-level domain in case of IPv6 as described in IETF RFC 6157 [74]; and\nB)\tincluding media of media types received in SDP offer of the SIP INVITE request due to STN-SR, which are also offered in the SIP INVITE request from the served user; and\n2.\tthe signalling elements described in subclause 6A.4.3A.\nIf the SCC AS supports the PS to CS SRVCC for originating calls in pre-alerting phase and if there are no early dialogs related to the originating call not accepted yet available for the served user and there is a SIP INVITE request from the served user for which a final SIP response has not been received yet, the SCC AS shall send SIP 183 (Session Progress) response to the SIP INVITE request due to STN-SR. The SCC AS shall populate the SIP 183 (Session Progress) response with:\n1.\tan SDP answer:\nA)\twith c-line set to the unspecified address (0.0.0.0) if IPv4 or to a domain name within the \".invalid\" DNS top-level domain in case of IPv6 as described in IETF RFC 6157 [74]; and\nB)\tincluding media of media types received in SDP offer of the SIP INVITE request due to STN-SR, which are also offered in the SIP INVITE request from the served user; and\n2.\tthe signalling elements described in subclause 6A.4.3A.\nUpon receiving the first SIP PRACK request from the target access leg, the SCC AS shall send a 200 (OK) to the PRACK response and then send a SIP INFO request towards the MSC server as specified in 3GPP TS 24.229 [2] and IETF RFC 6086 [54] in the dialog created by the SIP INVITE request due to STN-SR. The SCC AS shall populate the SIP INFO request as follows:\n1.\tinclude the Info-Package header field as specified in IETF RFC 6086 [54] with 3gpp.state-and-event info package name; and\n2.\tinclude application/vnd.3gpp.state-and-event-info+xml XML body associated with the info package according to IETF RFC 6086 [54] and containing a XML body compliant to the XML schema specified in the annex D.2:\nA)\tif a SIP 180 (Ringing) response to the SIP INVITE request has already been forwarded to the served SC UE before receiving the INVITE due to STN-SR or due to ATU-STI, with the state-info XML element containing \"early\" the direction XML element containing \"initiator\"; and\nB)\tif the SCC AS supports the PS to CS SRVCC for originating calls in pre-alerting phase and if a SIP 180 (Ringing) response to the SIP INVITE request has not beenforwarded to the served SC UE before receiving the INVITE due to STN-SR or due to ATU-STI, with the state-info XML element containing \"pre-alerting\" and the direction XML element containing \"initiator\".\nUpon receiving the 200 (OK) response to the SIP INFO request the SCC AS shall:\n1.\tstart forwarding SIP messages from the remote UE to the MSC server as specified in 3GPP TS 24.229 [2] and the present specification for dialogs where a PRACK request is received from the MSC server;\n2.\tif SIP 18x responses were stored after receiving the SIP INVITE request due to STN-SR or SIP INVITE request due to ATU-STI, then for each early dialog where a PRACK request is received from the MSC server:\na)\tforward the that was stored most recently IP 18x responses to the MSC server; and\nb)\tif a P-Early-Media header field is stored, include the P-Early-Media header field that was stored most recently in the SIP 18x response.\nIf a reliable SIP 1xx response or a SIP 2xx response is received on the remote leg, the SIP response is to the SIP INVITE request from the served user, the SIP response contains an SDP answer, and an SDP answer has not been received from the remote UE on the dialog of the SIP response yet, the SCC AS shall:\n1)\tif the speech media component of the SDP offer in the SIP INVITE request due to STN-SR is the same as the speech media component of the SDP received in the source access leg of the session being transferred, forward the SIP response on the target access leg as a SIP response to the SIP INVITE request due to STN-SR; and\n2)\tif the speech media component of the SDP offer in the SIP INVITE request due to STN-SR is different to the speech media component of the SDP received in the source access leg of the session being transferred:\nA)\tif the SIP 1xx response is received, send a SIP PRACK request on the remote leg as specified in 3GPP TS 24.229 [2]. The SCC AS shall populate the SIP PRACK request with the SDP offer received in the SIP INVITE request due to STN-SR as specified in 3GPP TS 24.229 [2]. Upon receiving the SIP 200 (OK) response to the SIP PRACK request, the SCC AS shall send a SIP 183 (Session Progress) response to the SIP INVITE request due to STN-SR as specified in 3GPP TS 24.229 [2]. The SCC AS shall populate the SIP 183 (Session Progress) response with:\na)\tthe SDP answer received in the SIP 200 (OK) response to the SIP PRACK request as specified in 3GPP TS 24.229 [2];\nb)\tif the SIP INVITE request due to STN-SR contains a P-Early-Media header field with the \"supported\" parameter and if the SCC AS has received a P-Early-Media header field in a SIP message in the dialog of the SIP PRACK request, a P-Early-Media header field containing the value of the last P-Early-Media header field received in a SIP message in the dialog of the SIP PRACK request; and\nc)\tthe signalling elements described in subclause 6A.4.3A.\nB)\tif the SIP 2xx response is received, send a SIP ACK request on the remote leg as specified in 3GPP TS 24.229 [2] and send a SIP UPDATE request or SIP re-INVITE request on the remote leg as specified in 3GPP TS 24.229 [2]. The SCC AS shall populate the SIP UPDATE request or SIP re-INVITE request with the SDP offer received in the SIP INVITE request due to STN-SR as specified in 3GPP TS 24.229 [2]. Upon receiving the SIP 200 (OK) response to the SIP UPDATE request or SIP re-INVITE request, the SCC AS shall send a SIP 200 (OK) response to the SIP INVITE request due to STN-SR as specified in 3GPP TS 24.229 [2]. The SCC AS shall populate the SIP 200 (OK) response with:\na)\tthe SDP answer received in the SIP 200 (OK) response to the SIP UPDATE request or SIP re-INVITE request as specified in 3GPP TS 24.229 [2]; and\nb)\tthe signalling elements described in subclause 6A.4.3A.\nIf a SIP 2xx response is received on the remote leg, the SIP response is to the SIP INVITE request from the served user, and an SDP answer has already been received from the remote UE on the dialog of the SIP response:\n1)\tif the speech media component of the SDP offer in the SIP INVITE request due to STN-SR is the same as the speech media component of the SDP received in the source access leg of the session being transferred, then forward the SIP response as specified in 3GPP TS 24.229 [2] on the target access leg as a SIP response to the SIP INVITE request due to STN-SR; and\n2)\tif the speech media component of the SDP offer in the SIP INVITE request due to STN-SR is not the same as the speech media component of the SDP received in the source access leg of the session being transferred:\nA)\tif the SDP offer received in the SIP INVITE request due to STN-SR has already been sent to the remote UE on the dialog of the SIP 2xx response, accepted with an subsequent SDP answer, the subsequent SDP answer was sent in a 183 (Session Progress) response on a target access leg, and SIP 2xx response does not contain an SDP answer, then forward the SIP 2xx response on the target access leg as a SIP response to the SIP INVITE request due to STN-SR;\nB)\tif the SDP offer received in the SIP INVITE request due to STN-SR has already been sent to the remote UE on the dialog of the SIP 2xx response, accepted with an subsequent SDP answer, the subsequent SDP answer was sent in a 183 (Session Progress) response on a target access leg, and SIP 2xx response contains an SDP answer, then remove the SDP body from the SIP 2xx response or replace the SDP body in the SIP 2xx response with the subsequent SDP answer, and forward the SIP 2xx response as specified in 3GPP TS 24.229 [2] on the target access leg as a SIP response to the SIP INVITE request due to STN-SR; and\nC)\tif:\n-\tthe SDP offer received in the SIP INVITE request due to STN-SR has not been sent to the remote UE on the dialog of the SIP response yet; or\n-\tthe SDP offer received in the SIP INVITE request due to STN-SR has already been sent to the remote UE in a SIP UPDATE request within the dialog of the SIP response and the SIP UPDATE request was rejected with SIP 405 (Method Not Allowed) response;\nsend a SIP ACK request on the remote leg as specified in 3GPP TS 24.229 [2] and send a SIP re-INVITE request on the remote leg as specified in 3GPP TS 24.229 [2]. The SCC AS shall populate the SIP re-INVITE request with the SDP offer received in the SIP INVITE request due to STN-SR as specified in 3GPP TS 24.229 [2]. Upon receiving the SIP 200 (OK) response to the SIP re-INVITE request, the SCC AS shall send a SIP ACK request on the remote leg as specified in 3GPP TS 24.229 [2] and shall send a SIP 200 (OK) response to the SIP INVITE request due to STN-SR as specified in 3GPP TS 24.229 [2] using a dialog different to the dialog of SIP 183 (Session Progress) response to the SIP INVITE request due to STN-SR. The SCC AS shall populate the SIP 200 (OK) response with:\na)\tthe SDP answer received in the SIP 200 (OK) response to the SIP re-INVITE request as specified in 3GPP TS 24.229 [2]; and\nb)\tthe signalling elements described in subclause 6A.4.3A.\nThe SCC AS shall remove non-transferred audio and video media components and superfluous sessions as specified in subclause 12.3.8.\nThis section contains procedures related to transfer of additional transferred session which is not accepted yet.\nIn order to transfer the additional transferred session, the SCC AS shall send a SIP REFER request according to 3GPP TS 24.229 [2], IETF RFC 4488 [20] and IETF RFC 3515 [13] as updated by IETF RFC 6665 [81] and IETF RFC 7647 [90] in the dialog created by the SIP INVITE request due to STN-SR; or the SCC AS shall send a SIP REFER request according to 3GPP TS 24.229 [2], IETF RFC 3515 [13] as updated by IETF RFC 6665 [81] and IETF RFC 7647 [90] in the dialog created by the SIP INVITE request due to ATU-STI for PS to CS SRVCC. The SCC AS shall populate the SIP REFER request as follows:\n1.\tthe Refer-Sub header field with value \"false\" as specified in IETF RFC 4488 [20];\n2.\tthe Supported header field with value \"norefersub\" as specified in IETF RFC 4488 [20];\nNOTE 0:\tIETF RFC 3261 [19] recommends user agent client to include a Supported header field in any SIP request, listing option tags for extensions to SIP supported by the user agent client, that can be applied by the user agent server to the SIP response. In the step above, the SCC AS is mandated to include at least \"norefersub\" option tag in the Supported header field.\n3.\tthe Refer-To header field containing the additional transferred session SCC AS URI for PS to CS SRVCC, where the URI also includes the following header fields containing the information related to the additional transferred session:\nA.\tif an early dialog supporting the additional transferred session exists, the Target-Dialog header field populated as specified in IETF RFC 4538 [11], containing the dialog identifier of an early dialog supporting session of the SC UE;\nB.\tif the SCC AS supports the PS to CS SRVCC for originating calls in pre-alerting phase, if no early dialog supporting the additional transferred session exists, there is a SIP INVITE request from the served user for which a final SIP response has not been received yet and if an early dialog supporting the additional transferred session existed and was terminated, the Target-Dialog header field populated as specified in IETF RFC 4538 [11], containing the dialog identifier on the source access leg of the early dialog supporting the additional transferred session which existed and was terminated;\nNOTE 1:\tEarly dialog can be terminated by SIP 199 (Early Dialog Terminated) response.\nC.\tthe Require header field populated with the option tag value \"tdialog\";\nD.\tif an early dialog supporting the additional transferred session exists, the To header field populated as specified in IETF RFC 3261 [19], containing the value of the P-Asserted-Identity provided by the remote UE during the session establishment;\nE.\tthe From header field populated as specified in IETF RFC 3261 [19], containing the value of the P-Asserted-Identity provided by the SC UE during the session establishment;\nF.\tthe Content-Type header field with \"application/sdp\";\nG.\tif an early dialog supporting the additional transferred session exists, the header field with hname \"body\" populated with an SDP body describing the media streams as negotiated in the session with the remote UE;\nH.\tif the SCC AS supports the PS to CS SRVCC for originating calls in pre-alerting phase, no early dialog supporting the additional transferred session exists, there is a SIP INVITE request from the served user for which a final SIP response has not been received yet, the header field with hname \"body\" populated with the SDP offer received in the SIP INVITE request from the served user; and\nI.\toptionally the P-Asserted-Identity URI header field containing value of the P-Asserted-Identity header field of the received SIP INVITE request;\n4.\tif a SIP 180 (Ringing) response to the SIP INVITE request from the served user has already been received in any of the existing early dialogs associated with the additional transferred session, application/vnd.3gpp.state-and-event-info+xml MIME body with the state-info XML element containing \"early\" and the direction XML element containing:\nA.\tif terminating call, the \"receiver\"; and\nB.\tif originating call, the \"initiator\";\n5.\tif the SCC AS supports the PS to CS SRVCC for originating calls in pre-alerting phase, the additional transferred session was originated by the SC UE and if a SIP 180 (Ringing) response to the SIP INVITE request from the served user has not been received yet in any of the existing early dialogs associated with the additional transferred session, application/vnd.3gpp.state-and-event-info+xml MIME body with the state-info XML element containing \"pre-alerting\" and the direction XML element containing the \"initiator\"; and\n6.\tif:\nA.\tSCC AS supports CS to PS SRVCC;\nB.\tthe SIP INVITE request due to STN-SR contains Accept header field with application/vnd.3gpp.srvcc-ext+xml MIME type;\nC.\ta private user identity of a UE (i.e. other than those according to 3GPP TS 23.003 [12], subclause 20.3.3) is associated with the C-MSISDN in the P-Asserted-Identity header field of the SIP INVITE request due to STN-SR;\nD.\ta binding of a contact address exists for the private user identity of the UE:\na)\twhere the g.3gpp.cs2ps-srvcc media feature tag as described in annex C is associated with the contact address of the UE; and\nb)\tsuch that SIP REGISTER request which registered the binding contained a Feature-Caps header field with the g.3gpp.atcf feature-capability indicator as described in annex C and with g.3gpp.cs2ps-srvcc feature-capability indicator as described in annex C;\nE.\tthe CS to PS SRVCC capability indication is indicated for the private user identity of the UE; and\nF.\tthe private user identity of the UE has the CS to PS SRVCC allowed indication in the subscription data;\nthen:\nA.\ta MIME body of application/vnd.3gpp.srvcc-ext+xml MIME type:\na)\tcontaining ATU management URI of the ATCF serving the SC UE;\nNOTE 2:\tThe ATCF management URI of the ATCF is the URI contained in the g.3gpp.atcf-mgmt-uri feature-capability indicator included in a Feature-Caps header field of the SIP REGISTER request, which registered the binding for the private user identity of the UE.\nb)\tcontaining C-MSISDN; and\nc)\tnot indicating that information relate to a registration of MSC server with IMS.\nWhen the SCC AS receives the SIP INVITE request transferring additional session for PS to CS SRVCC, the SCC AS shall:\n-\tif the Target-Dialog header field of the SIP INVITE request transferring additional session for PS to CS SRVCC identifies an existing early dialog, associate the SIP INVITE request transferring additional session for PS to CS SRVCC with the SIP early dialog i.e. identify the Source Access Leg;\nNOTE 3:\tThe SIP dialog on the Source Access Leg is identified by matching the dialog ID present in Target-Dialog header field (see IETF RFC 4538 [11]) of the SIP INVITE with a dialog in early state.\nNOTE 4:\tBy a SIP dialog in early state, it is meant an early SIP dialog which has been created by a provisional response to the initial SIP INVITE request, but for which the SIP 2xx response has not yet been sent or received;\n-\tif the SCC AS supports the PS to CS SRVCC for originating calls in pre-alerting phase, if the Target-Dialog header field of the SIP INVITE request transferring additional session for PS to CS SRVCC identifies an early dialog which has already been terminated, associate the SIP INVITE request transferring additional session for PS to CS SRVCC with the early dialog i.e. identify the Source Access Leg;\n-\tif the SCC AS is unable to associate the SIP INVITE with a unique dialog in early state, send a SIP 480 (Temporarily Unavailable) response to reject the SIP INVITE request relating to the access transfer and not processes the remaining steps;\n-\tif the number of media lines in the Target Access Leg is less than the number of media lines in the Source Access Leg or the media type for the corresponding media lines is not the same as in the original session, send a SIP 4xx response to reject the SIP INVITE request relating to the access transfer and not process the remaining steps;\n-\tif an early dialog exists on the remote leg of the additional transferred session, for each existing early dialog on the remote leg where the remote UE has provided an Allow header field listing the SIP UPDATE method or has not provided an Allow header field, SDP answer has already been sent or received in a reliable provisional response and the speech media component of the SDP offer in the SIP INVITE request transferring additional session for PS to CS SRVCC is not the same as the speech media component of the SDP received in the source access leg of the early dialog, send a SIP UPDATE request(s) towards the remote UE(s) using such existing early dialog(s) which were created by the same SIP INVITE request as the Source Access Leg. The SCC AS shall populate the SIP UPDATE request(s) with a new SDP offer, following the rules specified in 3GPP TS 24.229 [2], containing the following media information:\na)\tthe media characteristics as received in the SIP INVITE request transferring additional session for PS to CS SRVCC received on the Target Access Leg for media streams whose port is not set to zero; and\nb)\tfor the media streams in the SIP INVITE request transferring additional session for PS to CS SRVCC whose port is set to zero, include the corresponding media characteristics of those streams from the Source Access Leg;\n-\tif one or more early dialogs exist on the remote leg of the additional transferred session, for each early dialog where the speech media component of the SDP offer in the SIP INVITE request transferring additional session for PS to CS SRVCC is the same as the speech media component of the SDP received in the source access leg of the early dialog, create a new early dialog by sending a SIP 183 (Session Progress) response to the SIP INVITE request transferring additional session for PS to CS SRVCC. In the SIP 183 (Session Progress) response, the SCC AS shall:\na)\tinclude the SDP sent by the SCC AS in the source access leg of the early dialog;\nb)\tif the SIP INVITE request transferring additional session for PS to CS SRVCC contains a P-Early-Media header field with the \"supported\" parameter and the SCC AS has received a P-Early-Media header field in a SIP message in the dialog of the original SIP INVITE request sent to the remote leg, include a P-Early-Media header field containing the value of the last P-Early-Media header field received in a SIP message in the dialog of the original SIP INVITE request sent to the remote leg; and\nc)\tinclude the signalling elements described in subclause 6A.4.3A; and\n-\tif one or more early dialogs exist on the remote leg of the additional transferred session and:\na)\tthe remote UE has provided an Allow header field not listing the SIP UPDATE method; and the speech media component of the SDP offer in the SIP INVITE request transferring additional session for PS to CS SRVCC is not the same as the speech media component of the SDP received in the source access leg of each such early dialog, or\nb)\tSIP 405 (Method Not Allowed) response was received to the SIP UPDATE sent towards the remote UE;\ncreate a new early dialog by sending a SIP 183 (Session Progress) response to SIP INVITE request transferring additional session for PS to CS SRVCC. The SCC AS shall populate the SIP 183 (Session Progress) response with:\na)\tan SDP answer with c-line set to the unspecified address (0.0.0.0) if IPv4 or to a domain name within the \".invalid\" DNS top-level domain in case of IPv6 as described in IETF RFC 6157 [74]; and\nb)\tthe signalling elements described in subclause 6A.4.3A.\nIf an early dialog exists on the remote leg then when receiving SIP 2xx response to the SIP UPDATE request, the SCC AS shall create a new early dialog by sending SIP 183 (Session Progress) response to the SIP INVITE request transferring additional session for PS to CS SRVCC. The SCC AS shall populate the SIP response as follows:\n1.\tif the Remote Leg is an early dialog originated by the remote UE, include a Recv-Info header field containing the g.3gpp.state-and-event package name;\n2.\tinclude the SDP answer received in the SIP 200 (OK) response to the SIP UPDATE request;\n3.\tif the SIP INVITE request transferring additional session for PS to CS SRVCC contains a P-Early-Media header field with the \"supported\" parameter and if the SCC AS has received a P-Early-Media header field in a SIP message in the dialog of the SIP UPDATE request, include a P-Early-Media header field containing the value of the last P-Early-Media header field received in a SIP message in the dialog of the SIP UPDATE request; and\n4.\tthe signalling elements described in subclause 6A.4.3A.\nFor each received SIP PRACK request from the MSC server the SCC AS shall send the 200 (OK) response to the PRACK request according to 3GPP TS 24.229 [2] and start forwarding SIP messages from the remote UE for the associated early dialog as specified in 3GPP TS 24.229 [2] and the present specification.\nIf a reliable SIP 1xx response or a SIP 2xx response is received on the remote leg of the additional transferred session, the SIP response is to the SIP INVITE request from the served user, the SIP response contains an SDP answer and an SDP answer has not been received from the remote UE on the dialog of the SIP response yet, the SCC AS shall:\n1.\tif the speech media component of the SDP offer in the SIP INVITE request transferring additional session for PS to CS SRVCC is the same as the speech media component of the SDP received in the source access leg of the additional transferred session, forward the SIP response on the target access leg as a SIP response to the SIP INVITE request transferring additional session for PS to CS SRVCC; and\n2.\tif the speech media component of the SDP offer in the SIP INVITE request transferring additional session for PS to CS SRVCC is not the same as the speech media component of the SDP received in the source access leg of the additional transferred session:\na)\tif the SIP 1xx response is received, send a SIP PRACK request on the remote leg as specified in 3GPP TS 24.229 [2]. The SCC AS shall populate the SIP PRACK request with the SDP offer received in the SIP INVITE request transferring additional session for PS to CS SRVCC as specified in 3GPP TS 24.229 [2]. Upon receiving the SIP 200 (OK) response to the SIP PRACK request, the SCC AS shall send a SIP 183 (Session Progress) response to the SIP INVITE request transferring additional session for PS to CS SRVCC as specified in 3GPP TS 24.229 [2]. The SCC AS shall populate the SIP 183 (Session Progress) response as follows:\n-\tinclude the SDP answer received in the SIP 200 (OK) response to the SIP PRACK request as specified in 3GPP TS 24.229 [2];\n-\tif the SIP INVITE request transferring additional session for PS to CS SRVCC contains a P-Early-Media header field with the \"supported\" parameter and if the SCC AS has received a P-Early-Media header field in a SIP message in the dialog of the SIP PRACK request, include a P-Early-Media header field containing the value of the last P-Early-Media header field received in a SIP message in the dialog of the SIP PRACK request; and\n-\tthe signalling elements described in subclause 6A.4.3A; and\nb)\tif the SIP 2xx response is received, send a SIP ACK request on the remote leg as specified in 3GPP TS 24.229 [2] and send a SIP UPDATE request or SIP re-INVITE request on the remote leg as specified in 3GPP TS 24.229 [2]. The SCC AS populate the SIP UPDATE request or SIP re-INVITE request with the SDP offer received in the SIP INVITE request transferring additional session for PS to CS SRVCC as specified in 3GPP TS 24.229 [2]. Upon receiving the SIP 200 (OK) response to the SIP UPDATE request or SIP re-INVITE request, the SCC AS shall send a SIP 200 (OK) response to the SIP INVITE request transferring additional session for PS to CS SRVCC as specified in 3GPP TS 24.229 [2]. The SCC AS shall populate the SIP 200 (OK) response with:\n-\tthe SDP answer received in the SIP 200 (OK) response to the SIP UPDATE request or SIP re-INVITE request as specified in 3GPP TS 24.229 [2]; and\n-\tthe signalling elements described in subclause 6A.4.3A.\nIf the Remote Leg is an early dialog originated by the remote UE then when receiving the SIP INFO request inside the Target Access Leg containing:\n1.\tan Info-Package header field as specified in IETF RFC 6086 [54] with 3gpp.state-and-event info package name; and\n2.\tapplication/vnd.3gpp.state-and-event-info+xml XML body associated with the info package according to IETF RFC 6086 [54] and with the event XML element containing \"call-accepted\" to indicate that the called party has answered the call;\nthen the SCC AS shall:\n1.\tsend SIP 200 (OK) response to the SIP INVITE request to the remote UE;\n2.\tif the SIP 2xx (OK) response was received to the SIP UPDATE sent towards the remote UE or if the speech media component of the SDP offer in the SIP INVITE request transferring additional session for PS to CS SRVCC is the same as the speech media component of the SDP received in the source access leg of the additional transferred session, send SIP 200 (OK) response to the SIP INVITE request over the Target Access Leg;and\n3.\tif:\n-\tthe remote UE has provided an Allow header field not listing the SIP UPDATE method and the speech media component of the SDP offer in the SIP INVITE request transferring additional session for PS to CS SRVCC is different to the speech media component of the SDP received in the source access leg of the additional transferred session; or\n-\ta SIP 405 (Method Not Allowed) response was received to the SIP UPDATE sent towards the remote UE;\nand the speech media component of the SDP offer in the SIP INVITE request transferring additional session for PS to CS SRVCC is not the same as the speech media component of the SDP received in the source access leg of the additional transferred session, then when a SIP ACK request is received on the remote leg, send a SIP re-INVITE request on the remote leg as specified in 3GPP TS 24.229 [2]. The SCC AS shall populate the SIP re-INVITE request with the SDP offer received in the SIP INVITE request transferring additional session for PS to CS SRVCC as specified in 3GPP TS 24.229 [2]. Upon receiving the SIP 200 (OK) response to the SIP re-INVITE request, the SCC AS send SIP ACK request on the remote leg and shall shall send a SIP 200 (OK) response to the SIP INVITE request transferring additional session for PS to CS SRVCC as specified in 3GPP TS 24.229 [2], using a dialog different to the dialog of SIP 183 (Session Progress) response to the SIP INVITE request transferring additional session for PS to CS SRVCC. The SCC AS shall populate the SIP 200 (OK) response with:\na)\tthe SDP answer received in the SIP 200 (OK) response to the SIP re-INVITE request as specified in 3GPP TS 24.229 [2]; and\nb)\tthe signalling elements described in subclause 6A.4.3A.\nIf a SIP 2xx response is received on the remote leg, the SIP response is to the SIP INVITE request from the served user, and an SDP answer has already been received from the remote UE on the dialog of the SIP response:\n1)\tif the speech media component of the SDP offer in the SIP INVITE request transferring additional session for PS to CS SRVCC is the same as the speech media component of the SDP received in the source access leg of the additional transferred session, then forward the SIP response as specified in 3GPP TS 24.229 [2] on the target access leg as a SIP response to the SIP INVITE request transferring additional session for PS to CS SRVCC; and\n2)\tif the speech media component of the SDP offer in the SIP INVITE request transferring additional session for PS to CS SRVCC is not the same as the speech media component of the SDP received in the source access leg of the additional transferred session:\nA)\tif:\n-\tthe SDP offer received in the SIP INVITE request transferring additional session for PS to CS SRVCC has not been sent to the remote UE on the dialog of the SIP response yet; or\n-\tthe SDP offer received in the SIP INVITE request transferring additional session for PS to CS SRVCC has already been sent to the remote UE in a SIP UPDATE request within the dialog of the SIP response and the SIP UPDATE request was rejected with SIP 405 (Method Not Allowed) response;\nsend a SIP ACK request on the remote leg as specified in 3GPP TS 24.229 [2] and send a SIP re-INVITE request on the remote leg as specified in 3GPP TS 24.229 [2]. The SCC AS shall populate the SIP re-INVITE request with the SDP offer received in the SIP INVITE request transferring additional session for PS to CS SRVCC as specified in 3GPP TS 24.229 [2]. Upon receiving the SIP 200 (OK) response to the SIP re-INVITE request, the SCC AS shall send a SIP ACK request on the remote leg as specified in 3GPP TS 24.229 [2] and shall send a SIP 200 (OK) response to the SIP INVITE request transferring additional session for PS to CS SRVCC as specified in 3GPP TS 24.229 [2] using a dialog different to the dialog of SIP 183 (Session Progress) response to the SIP INVITE request transferring additional session for PS to CS SRVCC. The SCC AS shall populate the SIP 200 (OK) response with:\na)\tthe SDP answer received in the SIP 200 (OK) response to the SIP re-INVITE request as specified in 3GPP TS 24.229 [2]; and\nb)\tthe signalling elements described in subclause 6A.4.3A;\nB)\tif the SDP offer received in the SIP INVITE request transferring additional session for PS to CS SRVCC has already been sent to the remote UE on the dialog of the SIP 2xx response, accepted with an subsequent SDP answer, the subsequent SDP answer was sent in a 183 (Session Progress) response on a target access leg, and SIP 2xx response does not contain an SDP answer, then forward the SIP 2xx response on the target access leg as a SIP response to the SIP INVITE request transferring additional session for PS to CS SRVCC; and\nC)\tif the SDP offer received in the SIP INVITE request transferring additional session for PS to CS SRVCC has already been sent to the remote UE on the dialog of the SIP 2xx response, accepted with an subsequent SDP answer, the subsequent SDP answer was sent in a 183 (Session Progress) response on a target access leg, and SIP 2xx response contains an SDP answer, then remove the SDP body from the SIP 2xx response or replace the SDP body in the SIP 2xx response with the subsequent SDP answer, and forward the SIP 2xx response as specified in 3GPP TS 24.229 [2] on the target access leg as a SIP response to the SIP INVITE request transferring additional session for PS to CS SRVCC.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "12.3.5\tSCC AS procedures for PS to CS access transfer: PS to CS SRVCC enhancement using ATCF",
                            "text_content": "Upon receiving a SIP INVITE request due to ATU-STI for PS to CS SRVCC, the SCC AS shall:\n1)\tif there is a Target-Dialog header field in the SIP INVITE request:\nA)\tdetermine the transferable session set which are all the sessions of the SC UE whose private user identity is associated with Correlation MSISDN that is contained in the P-Asserted-Identity header field of the SIP INVITE request;\nB)\tdetermine the session that is to be transferred which is a session:\na)\tin the transferable session set;\nb)\tis in the confirmed dialog state; and\nc)\twith active speech media component which has been made active most recently; and\nC)\tif the session that is to be transferred is for the same dialog as the dialog identifier in the Target-Dialog header field in the SIP INVITE request, then perform the procedures described for SIP INVITE request due to STN-SR in subclause 12.3.0B with one of the following options dependent on operator policy:\na)\tif:\n-\tthe SDP offer in the SIP INVITE request contains speech media component only and the speech media component of the SDP offer in the SIP INVITE request is the same as the speech media component of the SDP negotiated by the ATCF in the session being transferred; or\n-\tthe SDP offer in the SIP INVITE request contains speech media component and video media component and the speech media component and the video media component of the SDP offer in the SIP INVITE request is the same as the speech media component and the video media component of the SDP negotiated by the ATCF in the session being transferred;\nthen the SCC AS shall:\ni)\tnot send a SIP re-INVITE request towards remote UE;\nii)\tsend a SIP 200 (OK) response to the SIP INVITE request containing:\n-\tthe SDP negotiated by  towards ATCF in the session being transferred; and\n-\tthe signalling elements described in subclause 6A.4.3A; and\niii)\tupon receipt of the ACK request from the ATCF, start forwarding SIP messages from the remote UE to the MSC server for this session with active speech media component; or\nb)\tif confirmed dialogs supporting a session with active speech media component exist in the transferable session set the  AS shall send a SIP re-INVITE request towards the remote UE and in a new SDP offer, include the media characteristics as received in the SIP INVITE request due to -, by following the rules of 3GPP TS 24.229 [2];\nNOTE:\thandling when it is determined that there is no session to be transferred or when the dialog identifier in the Target-Dialog header field in the SIP INVITE request identifies a dialog other than the session being transferred is out of scope of this release of this document.\nD)\tif the session identified by the dialog identifier in the Target-Dialog header field is a session of the SC UE whose private user identity is associated with C-MSISDN that is contained in the P-Asserted-Identity header field of the SIP INVITE request and:\n1)\tis in an early dialog state; or\n2)\tis in a confirmed dialog state and contains inactive speech media component;\nthen\n1)\tif the session is in an early dialog state, perform the procedures described for SIP INVITE requests due to STN-SR in subclause 12.3; and\n2)\tif the session is in a confirmed dialog state and contains inactive speech media component, perform the procedures described for SIP INVITE requests due to STN-SR in subclause 12.3.2;\n2)\tif there is no Target-Dialog header field in the SIP INVITE request:\na)\tperform the procedures described for SIP INVITE requests due to STN-SR in subclause 12.3.0B.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "12.3.6\tSCC AS procedures for PS to CS access transfer, vSRVCC",
                            "text_content": "When the SCC AS receives a SIP INVITE request for audio and video due to STN-SR on the target access leg the SCC AS shall determine the transferable session set.\nA session is in the transferable session set when the session:\n1)\tis a session of the SC UE whose private user identity is associated with the C-MSISDN that is contained in the P-Asserted-Identity header field of the SIP INVITE request; and\n2)\tis a session supporting active speech and video media components.\nThe SCC AS shall:\n1)\tif the conditions in subclause 12.3.6.2 for applying the PS to CS transfer of a call in an alerting phase feature are fulfilled, follow the procedures in subclause 12.3.6.2; and\n2)\tif the conditions in 1) are not satisfied follow the procedure in subclause 12.3.6.1.\nWhen the SCC AS receives a SIP INVITE request for audio and video due to STN-SR on the target access leg the SCC AS shall associate the SIP INVITE request with a session:\n-\twithin the transferable session set;\n-\twith active speech and video media components that was most recently made active; and\n-\tthe related dialog is in confirmed state.\nIf no confirmed dialogs supporting a session with active speech and video media component exists in the transferable session set the SCC AS shall:\n1)\tsend a SIP 480 (Temporarily Unavailable) response to reject the SIP INVITE request due to STN-SR; and\n2)\tif the transferable session set contains dialogs supporting sessions with speech media and/or video media components:\na)\tif the speech media and/or video media components are the only media component in the dialog then release the remote leg as specified in 3GPP TS 24.229 [2]; and\nb)\tif the speech media and/or video media component are not the only media component in the dialog then modify the remote leg and remove the speech media component as specified in 3GPP TS 24.229 [2].\nIf confirmed dialogs supporting a session with active speech and video media components exist in the transferable session set the SCC AS shall:\n1)\tsend a SIP re-INVITE request towards the remote UE and in a new SDP offer, include the media characteristics as received in the SIP INVITE request due to STN-SR, by following the rules of 3GPP TS 24.229 [2]; or\n2)\tsend a SIP re-INVITE request towards the remote UE according to the conditions depicted in subclause 12.3.5 and in a new SDP offer, include the media characteristics as received in the SIP INVITE request due to ATU-STI for PS to CS SRVCC, by following the rules of 3GPP TS 24.229 [2].\nUpon receiving the SIP 2xx response to the SIP re-INVITE request the SCC AS shall send the SIP 200 (OK) response to the SIP INVITE request due to STN-SR on the target access leg containing:\n1)\tthe relevant media parameter of the SDP answer in the received response, by following the rules of 3GPP TS 24.229 [2]; and\n2)\tthe signalling elements described in subclause 6A.4.3A.\nThe SCC AS shall remove non-transferred audio media and video media components and superfluous session as specified in subclause 12.3.8.\nThe SCC AS shall apply the procedures for access transfer for calls in alerting phase in subclauses 12.3.4.2 and 12.3.4.3 according to the conditions specified in subclause 12.3.4.1 with the following differences:\n-\tthe SCC AS receives a SIP INVITE request for audio and video due to STN-SR instead of a SIP INVITE request due to STN-SR; and\n-\tone or more early dialogs contain both speech and video media components.\nThe SCC AS shall follow the procedures in subclause 12.3.5 with the following difference:\n-\tinstead of performing the procedures for SIP INVITE request due to STN-SR in subclause 12.3.1, the SCC AS performs the procedures for SIP INVITE request for audio and video due to STN-SR in subclause 12.3.6.\nThe SCC AS shall follow the procedures in subclause 12.3.3 with the following difference:\n-\taccess transfer was triggered by the SCC AS receiving a SIP INVITE request for audio and video due to STN-SR instead of a SIP INVITE due to STN-SR.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "12.3.7\tSCC AS procedures for handling of SIP OPTIONS request",
                            "text_content": "When the SCC AS receives a SIP OPTIONS request on the target access leg and determines for the C-MSISDN in the P-Asserted-Identity header field that the session that was most recently made active is a session with active speech and video media components, the SCC AS shall send a SIP 200 (OK) response to the SIP OPTIONS request with an SDP body containing \"m=\" lines for audio and video.\nWhen the SCC AS receives a SIP OPTIONS request on the target access leg and determines for the C-MSISDN in the P-Asserted-Identity header field that the session that was most recently made active is a session with an active speech media component but not an active video media component, the SCC AS shall send a SIP 200 (OK) response to the SIP OPTIONS request with an SDP body containing an \"m=\" line for audio but not video.\nIf the SCC AS supports the MSC server assisted mid-call feature and:\n-\thas received the g.3gpp.mid-call media feature tag as described in annex C is included in the Contact header field of the SIP INVITE request due to originating filter criteria (as described in subclause 7); or\n-\thas received the g.3gpp.mid-call media feature tag as described in annex C from the SIP 2xx response to the SIP INVITE request due to terminating filter criteria (as described in subclause 8)\nthen when the SCC AS receives a SIP OPTIONS request on the target access leg and determines for the C-MSISDN in the P-Asserted-Identity header field that there are no sessions with an active speech media component, but there are sessions that contain an inactive speech media component, the SCC AS shall send a SIP 200 (OK) response to the SIP OPTIONS request with an SDP body containing an \"m=\" line for audio.\nNOTE:\tIf the session that is most recently made inactive contains inactive speech and video media components, the SCC AS only returns the \"m=\" line for audio and not for video.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "12.3.8\tRemoval of non-transferred audio media components and superfluous sessions",
                            "text_content": "Upon receiving the SIP ACK request from target access leg, and after an operator specific timer has expired, the SCC AS shall:\n1)\tfor each session where no in-dialog request has been received in the source access leg of the session with transferred media component(s) within the operator defined time:\na)\tif the session is a session with an active or inactive media component, send a SIP BYE request on the source access leg;\nb)\tif the session is an early dialog on originating side send a SIP 404 (Not Found) response on the source access leg; and\nc)\tif the session is an early dialog on terminating side send a SIP CANCEL request on the source access leg; and\nNOTE 1:\tThe SC UE will receive the SIP request or response only if the SC UE is using Gm after the PS-CS access transfer is completed.\nNOTE 2:\tDelaying the SIP request or response as described above allows an ICS UE to add Gm control if needed and an SC UE to reuse the PS dialog in case of SRVCC cancellation.\n2)\tfor each session in the transferable session set for which the speech media component, or the speech media and video media component in case of vSRVCC, was not transferred:\na)\tif the speech media component or the speech media and video media components is the only media component(s) of the session, release remote leg and source access leg; and\nb)\tif the speech media component or the speech media and video media components are not the only media components of the session, modify the remote leg and source access leg and remove the media component(s).\nNOTE 3:\tIn case of a SIP INVITE request due to STN-SR, video media components are not removed or causing release of the remote leg.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "12.3.9\tCharging correlation",
                            "text_content": "The SCC AS shall include in SIP 1xx and SIP 2xx responses to the SIP INVITE request due to STN-SR  the P-Charging-Vector header field as specified in 3GPP TS 24.229 [2], subclause 5.7.5.1 and include the \"related-icid\" header field parameter containing the ICID value of the source access leg in the P-Charging-Vector header field. Additionally, if an \"icid-generated-at\" header field was generated for the source access leg, SCC AS shall include the \"related-icid-generated-at\" header field parameter containing the host name or IP address included in the \"icid-generated-at\" header field parameter of the source access leg.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "12.3.10\t procedures for CS to PS SRVCC",
                            "text_content": "The SCC AS needs to distinguish the following initial SIP requests:\n1)\tSIP INVITE requests routed to the SCC AS due to ATU-STI for CS to PS SRVCC in the Request-URI. In the procedures below, such requests are known as \"SIP INVITE requests due to ATU-STI for CS to PS SRVCC\".\n2)\tSIP CANCEL requests cancelling the SIP INVITE requests due to ATU-STI for CS to PS SRVCC. In the procedures below, such requests are known as \"SIP CANCEL requests cancelling INVITE due to ATU-STI for CS to PS SRVCC\".\n3)\tSIP INVITE requests routed to the SCC AS due to additional transferred session SCC AS URI for CS to PS SRVCC in the Request-URI. In the procedures below, such requests are known as \"SIP INVITE request transferring additional session\".\nIf  supports CS to PS SRVCC, upon receiving a SIP INVITE request due to ATU-STI for CS to PS SRVCC, the SCC AS shall:\n1)\tdetermine the transferable dialog set which are all the dialogs (both early and confirmed):\nA)\twhere the g.3gpp.ics media feature tag with value \"server\" was indicated in Contact header field provided by the served user;\nB)\tof the served user whose private user identity is associated with C-MSISDN that is contained in the P-Asserted-Identity header field of the SIP INVITE request due to ATU-STI for CS to PS SRVCC; and\nC)\tsupporting a session;\n2)\tif there is a Target-Dialog header field in the SIP INVITE request due to ATU-STI for CS to PS SRVCC:\nA)\tdetermine the dialog being transferred as the dialog with the dialog identifier of the Target-Dialog header field in the SIP INVITE request due to ATU-STI for CS to PS SRVCC; and\nB)\tif the determined dialog being transferred identifies a dialog in the transferable dialog set, continue handling the procedures in the subclause 12.3.10.2.2; and\nNOTE:\tHandling when the dialog identifier in the Target-Dialog header field in the SIP INVITE request due to ATU-STI for CS to PS SRVCC identifies a non existing dialog is out of scope of this release of this document.\n3)\tif there is no Target-Dialog header field in the SIP INVITE request due to ATU-STI for CS to PS SRVCC and if the transferable dialog set is not empty:\nA)\tif SCC AS supports the CS to PS SRVCC with the assisted mid-call feature according to operator policy, the SIP INVITE request due to ATU-STI for CS to PS SRVCC contains an Accept header field containing the application/vnd.3gpp.mid-call+xml MIME type and if a dialog:\na)\tin the transferable dialog set;\nb)\twhich is a confirmed dialog; and\nc)\tsupporting a session with speech media component;\nexists, then continue handling the procedures in the subclause 12.3.10.2.3 for the dialog and do not handle the remaining procedures of this subclause; and\nB)\tif SCC AS supports the CS to PS SRVCC for calls in alerting phase according to operator policy, the SIP INVITE request due to ATU-STI for CS to PS SRVCC contains an Accept header field containing the application/vnd.3gpp.state-and-event-info+xml MIME type and if a dialog:\na)\tin the transferable dialog set;\nb)\twhich is an early dialog;\nc)\tfor which SIP 180 (Ringing) response has been sent or received; and\nd)\tsupporting a session with speech media component;\nexists:\na)\tif the dialog was originated by the served user, then continue handling the procedures in the subclause 12.3.10.2.4 for the dialog and do not handle the remaining procedures of this subclause; and\nb)\tif the dialog was originated by the remote UE, then continue handling the procedures in the subclause 12.3.10.2.5 for the dialog and do not handle the remaining procedures of this subclause.\nIf  supports CS to PS SRVCC, in order to transfer the determined dialog being transferred, the SCC AS shall:\n1)\tassociate the SIP INVITE request due to ATU-STI for CS to PS SRVCC with the remote leg of the determined dialog being transferred;\n2)\tif the speech media component of the SDP offer in the SIP INVITE request due to ATU-STI for CS to PS SRVCC is the same as the speech media component of the SDP negotiated by the ATCF in session supported by the determined dialog being transferred:\nA)\tsend a SIP 200 (OK) response to the SIP INVITE request due to ATU-STI for CS to PS SRVCC according to 3GPP TS 24.229 [2]. The SCC AS shall populate the SIP 200 (OK) response with:\na)\tsignalling elements described in subclause 6A.4.3; and\nb)\tthe SDP negotiated by  towards ATCF in the determined dialog being transferred; and\n3)\tif the speech media component of the SDP offer in the SIP INVITE request due to ATU-STI for CS to PS SRVCC differs from the speech media component of the SDP negotiated by the ATCF in the determined dialog being transferred:\nA)\tsend SIP re-INVITE request towards the remote UE inside the remote leg of the determined dialog being transferred according to 3GPP TS 24.229 [2]. The SCC AS shall populate the SIP re-INVITE request with the SDP offer which includes the media characteristics as received in the SIP INVITE request due to ATU-STI for CS to PS SRVCC.\nUpon receiving a SIP 2xx response to the SIP re-INVITE request sent towards the remote UE, the SCC AS shall:\n1)\tsend a SIP 200 (OK) response to the SIP INVITE request due to ATU-STI for CS to PS SRVCC according to 3GPP TS 24.229 [2]. The SCC AS shall populate the SIP 200 (OK) response with:\nA)\tsignalling elements as described in subclause 6A.4.3; and\nB)\tthe SDP answer received in the SIP 2xx response to the SIP re-INVITE request.\nUpon receiving SIP ACK request associated with the SIP 200 (OK) response to the SIP INVITE request due to ATU-STI for CS to PS SRVCC, the SCC AS shall:\n1)\trelease the source access leg of the determined dialog being transferred; and\n2)\tcontinue handling the procedures in the subclause 12.3.10.3.\nIf  supports CS to PS SRVCC, in order to transfer the determined dialog being transferred, the SCC AS shall:\n1)\tassociate the SIP INVITE request due to ATU-STI for CS to PS SRVCC with the remote leg of the determined dialog being transferred; and\n2)\tsend SIP re-INVITE request towards the remote UE in the remote leg of the determined dialog being transferred according to 3GPP TS 24.229 [2]. The SCC AS shall populate the SIP re-INVITE request with:\nA)\tthe SDP offer which includes the media characteristics as received in the SIP INVITE request due to ATU-STI for CS to PS SRVCC; and\nB)\tset the directionality of the speech media component in the SDP offer as used in the session with remote UE.\nUpon receiving SIP 2xx response to the SIP re-INVITE request sent towards the remote UE, the SCC AS shall send a SIP 200 (OK) response to the SIP INVITE request due to ATU-STI for CS to PS SRVCC according to 3GPP TS 24.229 [2]. The SCC AS shall populate the SIP 200 (OK) response with:\n1)\tsignalling elements as described in subclause 6A.4.3;\n2)\tthe SDP answer received in the SIP 2xx response to the SIP re-INVITE request; and\n3)\tthe Feature-Caps header field containing the g.3gpp.ti feature-capability indicator with value of the g.3gpp.ti media feature tag in the Contact header field received in the source access leg of the determined dialog being transferred.\nUpon receiving SIP ACK request associated with the SIP 200 (OK) response to the SIP INVITE request due to ATU-STI for CS to PS SRVCC, the SCC AS shall:\n1)\trelease the source access leg of the determined dialog being transferred; and\n2)\tcontinue handling the procedures in the subclause 12.3.10.3.\nIf  supports CS to PS SRVCC, in order to transfer the determined dialog being transferred, the SCC AS shall:\n1)\tassociate the SIP INVITE request due to ATU-STI for CS to PS SRVCC with the remote leg of the determined dialog being transferred; and\n2)\tsend SIP UPDATE request towards the remote UE in the remote leg of the determined dialog being transferred according to 3GPP TS 24.229 [2]. The SCC AS shall populate the SIP UPDATE request with the SDP offer which includes the media characteristics as received in the SIP INVITE request due to ATU-STI for CS to PS SRVCC. If several early dialogs on the remote leg were established by the SIP INVITE request establishing the determined dialog being transferred, the SCC AS shall send SIP UPDATE request to each such early dialog.\nUpon receiving a SIP 2xx response to the SIP UPDATE request sent towards the remote UE, the SCC AS shall establish a new early dialog by sending a SIP 180 (Ringing) response to the SIP INVITE request due to ATU-STI for CS to PS SRVCC according to 3GPP TS 24.229 [2]. The SCC AS shall populate the SIP 180 (Ringing) response with:\n1)\tsignalling elements described in subclause 6A.4.3;\n2)\tthe SDP answer received in the SIP 2xx response to the SIP UPDATE request;\n3)\tthe Feature-Caps header field containing the g.3gpp.ti feature-capability indicator with value of the g.3gpp.ti media feature tag in the Contact header field received in the source access leg of the determined dialog being transferred; and\n4)\tif the SIP INVITE request due to ATU-STI for CS to PS SRVCC contains a P-Early-Media header field with the \"supported\" parameter and if the SCC AS has received a P-Early-Media header field in a SIP message in the dialog of the SIP UPDATE request, a P-Early-Media header field containing the value of the last P-Early-Media header field received in a SIP message in the dialog of the SIP UPDATE request.\nUpon receiving SIP PRACK request associated with the SIP 180 (Ringing) response to the SIP INVITE request due to ATU-STI for CS to PS SRVCC, the SCC AS shall:\n1)\treject the source access leg of the determined dialog being transferred with SIP 404 (Not Found) response; and\n2)\tcontinue handling the procedures in the subclause 12.3.10.3.\nIf  supports CS to PS SRVCC, in order to transfer the determined dialog being transferred, the SCC AS shall:\n1)\tassociate the SIP INVITE request due to ATU-STI for CS to PS SRVCC with the remote leg of the determined dialog being transferred; and\n2)\tsend SIP UPDATE request towards the remote UE in the remote leg of the determined dialog being transferred according to 3GPP TS 24.229 [2]. The SCC AS shall populate the SIP UPDATE request with the SDP offer which includes the media characteristics as received in the SIP INVITE request due to ATU-STI for CS to PS SRVCC.\nUpon receiving a SIP 2xx response to the SIP UPDATE request sent towards the remote UE, the SCC AS shall send a SIP 183 (Session Progress) response to the SIP INVITE request due to ATU-STI for CS to PS SRVCC according to 3GPP TS 24.229 [2]. The SCC AS shall populate the SIP 183 (Session Progress) with:\n1)\tsignalling elements described in subclause 6A.4.3;\n2)\tthe SDP answer received in the SIP 2xx response to the SIP UPDATE request;\n3)\tthe Recv-Info header field with the 3gpp.state-and-event info package name; and\n4)\tthe Feature-Caps header field containing the g.3gpp.ti feature-capability indicator with value of the g.3gpp.ti media feature tag in the Contact header field received in the source access leg of the determined dialog being transferred.\nUpon receiving the SIP PRACK request from the SC UE associated with the SIP 183 (Session Progress) response to the SIP INVITE request due to ATU-STI for CS to PS SRVCC, the SCC AS shall:\n1)\tsend a SIP INFO request towards the SC UE as specified in 3GPP TS 24.229 [2] and IETF RFC 6086 [54] in the dialog created by SIP INVITE request due to ATU-STI for CS to PS SRVCC. The SCC AS shall populate the SIP INFO request as follows:\nA)\tinclude the Info-Package header field with 3gpp.state-and-event info package name; and\nB)\tinclude an application/vnd.3gpp.state-and-event-info+xml XML body associated with the info package according to IETF RFC 6086 [54] and compliant to the XML schema specified in the clause D.2 with the state-info XML element containing \"early\" and the direction XML element containing \"receiver\"; and\n2)\tcancel the source access leg of the determined dialog being transferred.\nUpon receiving the SIP INFO request which includes an Info-Package header field containing 3gpp.state-and-event info package name and an application/vnd.3gpp.state-and-event-info+xml  XML body associated with the info package according to IETF RFC 6086 [54] and compliant to the XML schema specified in the clause D.2 from the SC UE with the event XML element containing \"call-accepted\", the SCC AS shall:\n1)\tsend a SIP 200 (OK) response to the SIP INVITE request received earlier from the remote UE as specified in 3GPP TS 24.229 [2]; and\n2)\tsend a SIP 200 (OK) response to the SIP INVITE request due to ATU-STI for CS to PS SRVCC as specified in 3GPP TS 24.229 [2] populated as described in subclause 6A.4.3.\nUpon receiving the SIP CANCEL request cancelling SIP INVITE request due to ATU-STI for CS to PS SRVCC, the SCC AS shall:\n1)\tsend a SIP 200 (OK) response to the SIP CANCEL request;\n2)\tsend a SIP response to the SIP INVITE request received earlier from the remote UE as specified in 3GPP TS 24.229 [2]. The SCC AS shall populate the SIP response with:\nA)\tif the SIP CANCEL request contains a Reason header field with protocol \"SIP\", then status code and reason text from the Reason header field of the SIP CANCEL request; and\nB)\tif the SIP CANCEL request does not contain a Reason header field with protocol \"SIP\", then 486 (Busy) status code and reason text; and\n3)\tsend a SIP 487 (Request Terminated) response to the SIP INVITE request due to ATU-STI for CS to PS SRVCC as specified in 3GPP TS 24.229 [2].\nUpon receiving the SIP ACK request on the target access leg of the determined dialog being transferred, the SCC AS shall cancel the source access leg of the determined dialog being transferred.\nIf   supports CS to PS SRVCC, if  supports the CS to PS SRVCC with the assisted mid-call feature according to operator policy and if the SIP INVITE request due to ATU-STI for CS to PS SRVCC contains an Accept header field containing the application/vnd.3gpp.mid-call+xml MIME type then for each dialog:\n1)\tin the transferable dialog set;\n2)\twhich is a confirmed dialog;\n3)\tsupporting a session with speech media component; and\n4)\tother than the dialog of the source access leg associated with the SIP INVITE request due to ATU-STI for CS to PS SRVCC;\nthe SCC AS shall perform the procedures in subclause 12.3.10.3.2.\nIf  supports the CS to PS SRVCC for calls in alerting phase according to operator policy and if the SIP INVITE request due to ATU-STI for CS to PS SRVCC contains an Accept header field containing the application/vnd.3gpp.state-and-event-info+xml MIME type then for each dialog:\ni)\tin the transferable dialog set;\nii)\twhich is an early dialog;\nii)\tfor which SIP 180 (Ringing) response has been sent or received;\niv)\tsupporting a session with speech media component; and\nv)\tother than the dialog of the source access leg associated with the SIP INVITE request due to ATU-STI for CS to PS SRVCC;\nthe SCC AS shall perform the procedures in subclause 12.3.10.3.2.\nIf transfer of any dialog in the transferable dialog set has not been initiated, the SCC AS shall continue handling the procedures in the subclause 12.3.10.4.\nIf SCC AS supports CS to PS SRVCC, in order to transfer the determined dialog being transferred, the SCC AS shall send a SIP REFER request according to 3GPP TS 24.229 [2], IETF RFC 4488 [20] and IETF RFC 3515 [13] as updated by IETF RFC 6665 [81] and IETF RFC 7647 [90] in the dialog created by the SIP INVITE request due to STN-SR. The SCC AS shall populate the SIP REFER request as follows:\n1.\tthe Refer-Sub header field with value \"false\" as specified in IETF RFC 4488 [20];\n2.\tthe Supported header field with value \"norefersub\" as specified in IETF RFC 4488 [20];\nNOTE:\tIETF RFC 3261 [19] recommends user agent client to include a Supported header field in any SIP request, listing option tags for extensions to SIP supported by the user agent client, that can be applied by the user agent server to the SIP response. In the step above, the SCC AS is mandated to include at least \"norefersub\" option tag in the Supported header field.\n3.\tthe Refer-To header field containing the additional transferred session SCC AS URI for CS to PS SRVCC, where the URI also includes the following header fields containing the information related to the determined dialog being transferred:\nA.\tthe Target-Dialog header field populated as specified in IETF RFC 4538 [11], containing the dialog identifier of the determined dialog being transferred;\nB.\tthe Require header field populated with the option tag value \"tdialog\";\nC.\tif the remote UE of the remote leg of the determined dialog being transferred did not request privacy then the To URI header field populated as specified in IETF RFC 3261 [19], containing the value of the P-Asserted-Identity provided by the remote UE during the session establishment;\nD.\tthe From header field populated as specified in IETF RFC 3261 [19], containing the value of the P-Asserted-Identity provided by the SC UE during the session establishment;\nE.\tthe Content-Type header field with \"application/sdp\"; and\nF.\tthe header field with hname \"body\" populated with an SDP body describing the media streams as negotiated in the session with the remote UE; and\n4.\tif the determined dialog being transferred is a confirmed dialog, an application/vnd.3gpp.mid-call+xml MIME body; and\n5.\tif the determined dialog being transferred is an early dialog:\nA.\tapplication/vnd.3gpp.state-and-event-info+xml MIME body with the state-info XML element containing \"early\" and the direction XML element containing:\na.\tif terminating call, the \"receiver\"; and\nb.\tif originating call, the \"initiator\".\nUpon receiving the SIP INVITE request transferring additional session, the SCC AS shall:\n1)\tif the dialog identifier in the Target-Dialog header field of the SIP INVITE request identifies a dialog:\nA) where the asserted identity of the participating served user belongs to the same subscription as the asserted identity of the sender of the SIP INVITE request: and\nB) supporting a session with speech media component:\nthen:\nA)\tdetermine the additional dialog being transferred as the dialog with the dialog identifier of the Target-Dialog header field in the SIP INVITE request transferring additional session;\nB)\tassociate the SIP INVITE request transferring additional session with the remote leg of the determined additional dialog being transferred;\nC)\tif the dialog is a confirmed dialog, continue handling the procedures in the subclause 12.3.10.3.3;\nD)\tif the dialog is an early dialog established by served user, continue handling the procedures in the subclause 12.3.10.3.4; and\nE)\tif the dialog is an early dialog established by remote UE, continue handling the procedures in the subclause 12.3.10.3.5.\nIf receiving the SIP 3xx response, 4xx response or 6xx response to the SIP REFER request or if the SIP INVITE request transferring additional session is not received within operator defined time after the SIP REFER request sending, the SCC AS shall release, cancel or reject the remote leg, the source access leg and the target access leg of the determined dialog being transferred.\nIf  supports CS to PS SRVCC, in order to transfer the determined additional dialog being transferred, the SCC AS shall:\n1)\tsend SIP re-INVITE request towards the remote UE in the remote leg of the determined additional dialog being transferred according to 3GPP TS 24.229 [2]. The SCC AS shall populate the SIP re-INVITE request with the SDP offer which includes the media characteristics as received in the SIP INVITE request transferring additional session.\nUpon receiving a SIP 2xx response to the SIP re-INVITE request sent towards the remote UE, the SCC AS shall:\n1)\tsend a SIP 200 (OK) response to the SIP INVITE request transferring additional session according to 3GPP TS 24.229 [2]. The SCC AS shall populate the SIP 200 (OK) response with:\nA)\tsignalling elements described in subclause 6A.4.3;\nB)\tthe SDP answer received in the SIP 2xx response to the SIP re-INVITE request; and\nC)\tthe Feature-Caps header field containing the g.3gpp.ti feature-capability indicator with value of the g.3gpp.ti media feature tag in the Contact header field received in the source access leg of the determined additional dialog being transferred.\nUpon receiving SIP ACK request associated with the SIP 200 (OK) response to the SIP INVITE request due to ATU-STI for CS to PS SRVCC, the SCC AS shall:\n1)\trelease the source access leg of the determined dialog being transferred; and\n2)\tcontinue handling the procedures in the subclause 12.3.10.4.\nIf  supports CS to PS SRVCC, in order to transfer the determined additional dialog being transferred, the SCC AS shall:\n1)\tsend SIP UPDATE request towards the remote UE in the remote leg of the determined additional dialog being transferred according to 3GPP TS 24.229 [2]. The SCC AS shall populate the SIP UPDATE request with the SDP offer which includes the media characteristics as received in the SIP INVITE request transferring additional session. If several early dialogs on the remote leg were established by the SIP INVITE request establishing the determined additional dialog being transferred, the SCC AS shall send SIP UPDATE request to each such early dialog.\nUpon receiving a SIP 2xx response to the SIP UPDATE request sent towards the remote UE, the SCC AS shall:\n1)\testablish a new early dialog by sending a SIP 180 (Ringing) response to the SIP INVITE request transferring additional session according to 3GPP TS 24.229 [2]. The SCC AS shall populate the SIP 180 (Ringing) response with:\nA)\tsignalling elements described in subclause 6A.4.3;\nB)\tthe SDP answer received in the SIP 2xx response to the SIP UPDATE request;\nC)\tthe Feature-Caps header field containing the g.3gpp.ti feature-capability indicator with value of the g.3gpp.ti media feature tag in the Contact header field received in the source access leg of the determined additional dialog being transferred; and\nD)\tif the SIP INVITE request transferring additional session contains a P-Early-Media header field with the \"supported\" parameter and if the SCC AS has received a P-Early-Media header field in a SIP message in the dialog of the SIP UPDATE request, a P-Early-Media header field containing the value of the last P-Early-Media header field received in a SIP message in the dialog of the SIP UPDATE request.\nUpon receiving SIP PRACK request associated with the SIP 180 (Ringing) response to the SIP INVITE request due to ATU-STI for CS to PS SRVCC, the SCC AS shall:\n1)\treject the source access leg of the determined dialog being transferred with SIP 404 (Not Found) response; and\n2)\tcontinue handling the procedures in the subclause 12.3.10.4.\nIf  supports CS to PS SRVCC, in order to transfer the determined additional dialog being transferred, the SCC AS shall:\n1)\tsend SIP UPDATE request towards the remote UE in the remote leg of the determined additional dialog being transferred according to 3GPP TS 24.229 [2]. The SCC AS shall populate the SIP UPDATE request with the SDP offer which includes the media characteristics as received in the SIP INVITE request transferring additional session.\nUpon receiving a SIP 2xx response to the SIP UPDATE request sent towards the remote UE, the SCC AS shall:\n1)\tsend a SIP 183 (Session Progress) response to the SIP INVITE request transferring additional session according to 3GPP TS 24.229 [2]. The SCC AS shall populate the SIP 183 (Session Progress) with:\nA)\tsignalling elements described in subclause 6A.4.3;\nB)\tthe SDP answer received in the SIP 2xx response to the SIP UPDATE request;\nC)\tthe Recv-Info header field with the 3gpp.state-and-event info package name; and\nD)\tthe Feature-Caps header field containing the g.3gpp.ti feature-capability indicator with value of the g.3gpp.ti media feature tag in the Contact header field received in the source access leg of the determined additional dialog being transferred.\nUpon receiving the SIP PRACK request from the SC UE associated with the SIP 183 (Session Progress) response to the SIP INVITE request transferring additional session, the SCC AS shall cancel the source access leg of the determined dialog being transferred.\nUpon receiving the SIP INFO request which includes an Info-Package header field containing 3gpp.state-and-event info package name and an application/vnd.3gpp.state-and-event-info+xml  XML body associated with the info package according to IETF RFC 6086 [54] and compliant to the XML schema specified in the subclause D.2 from the MSC server with the event XML element containing \"call-accepted\", the SCC AS shall:\n1)\tsend a SIP 200 (OK) response to the SIP INVITE request received earlier from the remote UE as specified in 3GPP TS 24.229 [2]; and\n2)\tsend a SIP 200 (OK) response to the SIP INVITE request transferring additional session as specified in 3GPP TS 24.229 [2] populated as described in subclause 6A.4.3.\nUpon receiving the SIP CANCEL request cancelling SIP INVITE request transferring additional session, if the SIP CANCEL request is acceptable for the SCC AS, in addition to sending a SIP 2xx response to the SIP CANCEL request, the SCC AS shall:\n1)\tsend a SIP response to the SIP INVITE request received from the remote UE as specified in 3GPP TS 24.229 [2]. The SCC AS shall populate the SIP response with:\nA)\tif the SIP CANCEL request contains a Reason header field with protocol \"SIP\", then status code and reason text from the Reason header field of the SIP CANCEL request; and\nB)\tif the SIP CANCEL request does not contain a Reason header field with protocol \"SIP\", then 486 (Busy) status code and reason text; and\n2)\tsend a SIP 487 (Request Terminated) response to the SIP INVITE request transferring additional session as specified in 3GPP TS 24.229 [2].\nIf  supports CS to PS SRVCC, in order to remove non-transferred sessions, the SCC AS shall:\n1)\tfor each session in the transferable session set for which the speech media component was not transferred:\na)\trelease, reject or cancel the source access leg;\nb)\tif the speech media component is the only media component(s) of the session, release, reject or cancel the remote leg; and\nc)\tif the speech media component is not the only media components of the session, modify the session and remove the speech media component from the remote leg(s).\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "12.3.11\tSCC AS procedures when the access transfer is completed",
                            "text_content": "Once the SCC AS starts forwarding messages between the remote UE and the MSC server the SCC AS shall behave as an AS performing 3rd party call control acting as a routeing B2BUA as defined in 3GPP TS 24.229 [2] with the exceptions described in this subclause.\nIf SCC AS receives a SIP BYE request or SIP CANCEL request containing a Reason header field with the protocol value \"Q.850\" and the \"cause\" header field parameter with a value different than \"31\" (normal unspecified) on the target access and SCC AS is serving a terminating user in an early dialog phase, the SCC AS shall:\n1)\tsend a SIP 200 (OK) response to the SIP BYE request on the target access leg;\n2)\tmap the value of the \"cause\" header field parameter in the Reason header field to a SIP status code as specified in 3GPP TS 29.292 table 5.4.8.1.1 and table 5.4.8.1.2; and\n3)\tsend a 4xx, 5xx or 6xx response corresponding to the mapped SIP status code with the Reason header field received in the SIP BYE request included.\nNOTE:\tThe procedure when the SCC AS receives a SIP BYE request or CANCEL request containing a Reason header field with the protocol value \"Q.850\" and the \"cause\" header field parameter with the value \"31\" (normal unspecified) is described in subclause 12.3.3.5.2.\nWhen the access transfer is completed and if the received SIP INVITE request due to ATU-STI or due to STN-SR included a P-Access-Network-Info header field, the SCC AS may (according to operator policy):\n-\tfor active session transfer or held session transfer, send a SIP reINVITE request towards the remote UE which contains:\na)\tthe SDP which has recently been negotiated towards the remote UE; and\nb)\ta P-Access-Network-Info header field which is copied from the SIP INVITE request due to ATU-STI or due to STN-SR; and\n-\tfor PS to CS access transfer when call is in alerting phase or pre-alerting phase, send a SIP UPDATE request towards the remote UE which contains:\na)\tthe SDP which has recently been negotiated towards the remote UE; and\nb)\ta P-Access-Network-Info header field which is copied from the SIP INVITE request due to ATU-STI or due to STN-SR.\n",
                            "figures_meta_data": [],
                            "tables": []
                        }
                    ]
                },
                {
                    "title": "12.4\tMSC server enhanced for ICS",
                    "description": "",
                    "summary": "",
                    "text_content": "",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": [
                        {
                            "title": "12.4.0\tMSC server enhanced for ICS supporting PS to CS SRVCC",
                            "text_content": "The MSC server enhanced for ICS supporting PS to CS SRVCC may support the codec inquiry prior to the PS to CS SRVCC access transfer.\nWhen the MSC server enhanced for ICS supporting SRVCC receives an indication for a PS to CS SRVCC session transfer as described in 3GPP TS 23.216 [49], the MSC server may perform the codec inquiry prior to PS to CS SRVCC access transfer as specified in subclause 12.6.0A according to local policy.\nNOTE:\tThe local policy can be based on MSC server configuration of STN-SR(s) owned by ATCF(s) supporting the codec inquiry prior to PS to CS SRVCC access transfer.\nIf the MSC server enhanced for ICS supporting SRVCC does not support or does not perform the codec inquiry prior to PS to CS SRVCC access transfer as specified in subclause 12.6.0A, the MSC server shall perform the procedures in subclause 12.4.0.2\nThe MSC server enhanced for ICS supporting PS to CS SRVCC may support the codec re-negotiation after the PS to CS SRVCC access transfer as specified in subclause 12.6.0B.\nIn order to perform the PS to CS SRVCC access transfer, the MSC server enhanced for ICS shall initiate a SIP INVITE request and shall:\n1)\tset the Request-URI to the STN-SR for the session with speech media component to be transferred;\n2)\tset the P-Asserted-Identity header field to the Correlation MSISDN;\n3)\tset the Contact header field to the contact address of the MSC server;\n4)\tinclude an SDP offer containing only a speech media component. If the MSC server performed procedures in subclause 12.6.0A and received a PS-to-CS-preparation-response, the MSC server should copy into the SDP offer one or more RTP payload types (each comprising of an RTP payload type number indicated in a sub-field of an <fmt> portion of an \"m=\" line and, if included, an \"a=rtpmap\" attribute and an \"a=frmtp\" attribute for the RTP payload type number) indicated in the <IMS-preferred-codec-list> element of the received PS-to-CS-preparation-response described in subclause 12.6.0A;\n5)\tif SRVCC with priority handling (as described in 3GPP TS 23.216 [49]) is supported and a Allocation/Retention priority (ARP) indication is received (as described in 3GPP TS 29.280 [71]), then include an authorised Resource-Priority header field;\nNOTE 1:\tAn MSC server enhanced for ICS will use local configuration to map the received ARP value to appropriate values for the authorised Resource-Priority header field.\n6)\tif the MSC server supports the MSC server assisted mid-call feature:\nA)\tinsert the Supported header field containing the option-tag \"norefersub\" specified in IETF RFC 4488 [20];\nB)\tinsert the Accept header field containing the MIME type as specified in subclause D.1.3;\nC)\tinclude in the Contact header field the g.3gpp.mid-call media feature tag as described in annex C; and\nD)\tinsert the Recv-Info header field containing the g.3gpp.mid-call package name;\n7)\tif the MSC server enhanced for ICS supports the PS to CS SRVCC for calls in alerting phase, then include:\nA)\tvoid;\nB)\ta Contact header field containing the g.3gpp.srvcc-alerting media feature tag as described in annex C;\nC)\tvoid;\nD)\ta P-Early-Media header field containing the \"supported\" parameter;\nE)\tif the MSC server enhanced for ICS supports the PS to CS SRVCC for originating calls in pre-alerting phase, include the g.3gpp. ps2cs-srvcc-orig-pre-alerting media feature tag as described in annex C into the Contact header field;\nF)\tif the MSC server does not support the MSC server assisted mid-call feature, a Supported header field containing the option-tag \"norefersub\" specified in IETF RFC 4488 [20]; and\nG)\tif the MSC server enhanced for ICS supports the PS to CS SRVCC for terminating calls in pre-alerting phase, include the g.3gpp. ps2cs-srvcc-term-pre-alerting media feature tag as described in annex C into the Contact header field;\nNOTE 2:\tIETF RFC 3261 [19] recommends user agent client to include a Supported header field in any SIP INVITE request, listing option tags for extensions to SIP understood by the user agent client. In the step above, the MSC server is mandated to include at least \"norefersub\" option tag in the Supported header field.\nNOTE 3:\tIf the MSC server supports the MSC server assisted mid-call feature, a Supported header field containing the option-tag \"norefersub\" was already inserted in preceding steps.\n8)\tif the MSC server supports CS to PS SRVCC:\nA)\tthe Recv-Info header field containing the g.3gpp.access-transfer-events info package name;\nB)\tthe Accept header field containing application/vnd.3gpp.access-transfer-events+xml MIME type with the \"et\" parameter indicating ability to receive \"event-type\" attribute with the value \"2\";\nC)\tthe Accept header field containing application/vnd.3gpp.srvcc-ext+xml MIME type; and\nD)\tthe g.3gpp.ti media feature tag with value as described in subclause C.12 in the Contact header field;\nNOTE 4:\tAn MSC server enhanced for ICS does not apply the ICS procedure described in 3GPP TS 29.292 [18] and 3GPP TS 24.292 [4] when sending the SIP INVITE request.\n9)\tan Accept header field according to IETF RFC 3261 [19] containing the MIME type application/vnd.3gpp.state-and-event-info+xml as specified in subclause D.2.3;\n10)\ta Recv-Info header field according to IETF RFC 6086 [54] containing the g.3gpp.state-and-event package name;\n11)\tsignalling elements described in subclause 6A.7.1 and shall indicate the related local preconditions as met; and\n12)\tinclude the P-Access-Network-Info header field in the SIP INVITE request as specified in 3GPP TS 24.229 [2]. The P-Access-Network-Info header field shall include:\na)\tan access-type field set to \"3GPP-GERAN\", \"3GPP-UTRAN-FDD\", \"3GPP-UTRAN-TDD\", or an access-class field set to\"3GPP-GERAN\", \"3GPP-UTRAN\";\nb)\tif available, a \"cgi-3gpp\" or \"utran-sai-3gpp\" parameter;\nc)\tif available a \"local-time-zone\" parameter;\nd)\ta \"network-provided\" parameter; and\ne)\tif available, a \"daylight-saving-time\" parameter.\nUpon receiving a SIP 200 (OK) response as the first response to the INVITE due to STN-SR (with the exception of the SIP 100 (Trying) response) and if the MSC server does not apply the MSC server assisted mid-call feature procedures in subclause 12.4A, the MSC server shall enter the \"active\" (N10) state (defined in 3GPP TS 24.008 [8]), regard the access transfer of the session with active speech media component as completed, send an ACK request as specified in 3GPP TS 24.229 [2] and start interworking CC messages as specified in subclause 12.6.5.\nIf the MSC server enhanced for ICS supports the MSC server assisted mid-call feature, it shall additionally apply the procedures defined in subclause 12.4A.\nIf the MSC server enhanced for ICS supports the PS to CS SRVCC for calls in alerting phase procedures, it shall additionally apply the procedures defined in subclause 12.6.3.\nAfter finishing the access transfer procedures and if the access transfer was successful, the MSC server enhanced for ICS shall apply the ICS procedure as specified in 3GPP TS 29.292 [18] and 3GPP TS 24.292 [4].\nIf the access transfer procedure is unsuccessful and if the UE performs CS attachment procedures as specified in 3GPP TS 24.008 [8] after the unsuccessful access transfer procedure, then the MSC server enhanced for ICS shall apply procedures specified in 3GPP TS 29.292 [18] and 3GPP TS 24.292 [4].\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "12.4.0A\tMSC server enhanced for ICS procedures for Emergency Session Transfer",
                            "text_content": "The MSC Server enhanced for ICS shall perform the procedures described in subclause 12.6.2 for the MSC server enhanced for SRVCC using SIP interface.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "12.4.0B\tMSC server enhanced for ICS supporting vSRVCC",
                            "text_content": "When the MSC server enhanced for ICS supporting vSRVCC receives an indication for a PS to CS SRVCC session transfer as described in 3GPP TS 23.216 [49], the MSC server enhanced for ICS supporting vSRVCC shall follow the procedures in subclause 12.4.0.\nWhen an MSC server enhanced for ICS supporting vSRVCC receives an indication for a vSRVCC session transfer as described in 3GPP TS 23.216 [49], the MSC server enhanced for ICS shall initiate a SIP OPTIONS request and shall:\n1)\tset the request URI to the STN-SR;\n2)\tset the P-Asserted-Identity header field to the Correlation MSISDN;\n3)\tset the Contact header field to the address of the MSC server; and\n4)\tset the Accept header field to \"application/sdp\".\nWhen the MSC server enhanced for ICS supporting vSRVCC receives a SIP 200 (OK) response to the SIP OPTIONS request with an SDP body that contains \"m=\" lines for audio and video, the MSC server enhanced for ICS shall:\n1)\tinitiate a SIP INVITE request and shall:\na)\tset the request URI to the STN-SR for the session with speech and video media components to be transferred;\nb)\tset the P-Asserted-Identity header field to the Correlation MSISDN;\nc)\tset the Contact header field to the address of the MSC server;\nd)\tinclude an SDP offer only containing a speech media component and a video media component with default codecs for speech and video (as specified in 3GPP TS 26.111 [69]);\ne)\tif the MSC server enhanced for enhanced for ICS supporting vSRVCC supports PS to CS access transfer for alerting calls, then include:\ni)\tan Accept header field containing the MIME type application/vnd.3gpp.state-and-event-info+xml as specified in subclause D.2.3;\nii)\ta Contact header field containing the g.3gpp.srvcc-alerting media feature tag as described in annex C; and\niii)\ta Recv-Info header field containing the g.3gpp.state-and-event package name; and\nf)\tif vSRVCC with priority handling (as described in 3GPP TS 23.216 [49]) is supported and a Allocation/Retention priority (ARP) indication is received (as described in 3GPP TS 29.280 [70]), then include an authorised Resource-Priority header field; and\nNOTE:\tAn MSC server enhanced for ICS will use local configuration to map the received ARP value to appropriate values for the authorised Resource-Priority header field.\n2)\tif the MSC server enhanced for ICS supporting vSRVCC supports PS to CS access transfer for alerting calls, then additionally apply the procedures defined in subclause 12.6.3.\nWhen an MSC server enhanced for ICS supporting vSRVCC receives a SIP 200 (OK) response to the SIP OPTIONS request with an SDP body that contains an \"m=\" line for audio but not video, the MSC server enhanced for ICS supporting vSRVCC shall follow the procedures in subclause 12.4.0.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "12.4.1\tVoid",
                            "text_content": "",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "12.4.2\tMSC server enhanced for ICS supporting CS to PS SRVCC",
                            "text_content": "The MSC server needs to distinguish the following SIP requests:\n1)\tSIP INFO request:\nA)\twith Info-Package header field with value g.3gpp.access-transfer-events; and\nB)\twith application/vnd.3gpp.access-transfer-events+xml MIME body associated with the info package according to IETF RFC 6086 [54] and indicating the session transfer notification response.\nIn the procedures below, such requests are known as \"SIP INFO requests carrying the session transfer notification response\".\nIf the MSC server supports the CS to PS SRVCC, upon receiving HO required for a UE including an indication that the HO is for CS to PS as described in 3GPP TS 23.216 [15] or if required by procedures in subclause 12.4.2.5, the MSC server shall:\n1)\tdetermine the transferable dialog set which are all SIP dialogs:\nA)\tinterworked with the CS calls of the UE; and\nB)\tsupporting a session; and\n2)\tif the determined transferable dialog set is not empty:\nNOTE:\tIf the determined transferable dialog set is empty, remaining procedures of this subclause are not invoked.\nA)\tdetermine the dialog for communication with ATCF as follows:\na)\tif a CS call in Active (N10) state (defined in 3GPP TS 24.008 [8]) and Idle auxiliary state (defined in 3GPP TS 24.083 [43]) exists, the SIP dialog in the transferable dialog set, which is interworked with the CS call in Active (N10) state (defined in 3GPP TS 24.008 [8]) and Idle auxiliary state (defined in 3GPP TS 24.083 [43]); and\nb)\tif a CS call in Active (N10) state (defined in 3GPP TS 24.008 [8]) and Idle auxiliary state (defined in 3GPP TS 24.083 [43]) does not exist, a SIP dialog in the transferable dialog set, which is interworked with any CS call; and\nB)\tsend a SIP INFO request according to 3GPP TS 24.229 [2] within the determined dialog for communication with ATCF. The MSC server shall populate the SIP INFO request with:\na)\tInfo-Package header field with value g.3gpp.access-transfer-events; and\nb)\tapplication/vnd.3gpp.access-transfer-events+xml MIME body associated with the info package according to IETF RFC 6086 [54] and indicating the session transfer notification request.\nUpon receiving SIP INFO request carrying the session transfer notification response within the determined dialog for communication with ATCF, the MSC server shall:\n1)\tsend a SIP 200 (OK) response to the SIP INFO request according to 3GPP TS 24.229 [2];\n2)\tif the application/vnd.3gpp.access-transfer-events+xml MIME body indicates that the ATCF does not require the MSC server to redirect the speech media component of the session transferred by the CS to PS SRVCC access transfer, continue handling the procedures in the subclause 12.4.2.3; and\n3)\tif the application/vnd.3gpp.access-transfer-events+xml MIME body indicates that the ATCF requires the MSC server to redirect the speech media component of the session transferred by the CS to PS SRVCC access transfer, continue handling the procedures in the subclause 12.4.2.4.\nIf the MSC server supports the CS to PS SRVCC, if the access transfer is prepared according to 3GPP TS 23.216 [15] and if the ATGW does not require the MSC server to redirect the speech media component of the session transferred by the CS to PS SRVCC access transfer, the MSC server shall:\n1)\tsend a SIP INFO request according to 3GPP TS 24.229 [2] within determined dialog for communication with ATCF. The MSC server shall populate the SIP INFO request with:\nA)\tInfo-Package header field with value g.3gpp.access-transfer-events; and\nB)\tapplication/vnd.3gpp.access-transfer-events+xml MIME body associated with the info package according to IETF RFC 6086 [54] and indicating the session transfer preparation.\nIf the MSC server supports the CS to PS SRVCC, if the ATGW does not require the MSC server to redirect the speech media component of the session transferred by the CS to PS SRVCC access transfer and if the access transfer is cancelled according to 3GPP TS 23.216 [15], the MSC server shall send a SIP INFO request according to 3GPP TS 24.229 [2] within determined dialog for communication with ATCF. The MSC server shall populate the SIP INFO request with:\n1)\tInfo-Package header field with value g.3gpp.access-transfer-events; and\n2)\tapplication/vnd.3gpp.access-transfer-events+xml MIME body associated with the info package according to IETF RFC 6086 [54] and indicating the session transfer cancellation.\nWhen the ATGW requires the MSC server to redirect the speech media component of the session transferred by the CS to PS SRVCC access transfer, the MSC server shall:\n1)\tsend a SIP INVITE request according to 3GPP TS 24.229 [2]. The MSC server shall populate the SIP INVITE request with:\nA)\tthe Request-URI header field set to the ATCF management URI;\nB)\tContact header field set to the IP address of MSC server;\nC)\tSDP body includes the speech media component of the session transferred by the CS to PS SRVCC access transfer; and\nD)\tthe P-Asserted-Identity header field set to the C-MSISDN.\nIf the access transfer is prepared according to 3GPP TS 23.216 [15] and after the MSC server redirect the speech media component of the session transferred by the CS to PS SRVCC access transfer to the ATGW, the MSC server shall:\n1)\tsend a SIP INFO request according to 3GPP TS 24.229 [2] within dialog for communication with ATCF. The MSC server shall populate the SIP INFO request with:\nA)\tInfo-Package header field with value g.3gpp.access-transfer-events; and\nB)\tapplication/vnd.3gpp.access-transfer-events+xml MIME body associated with the info package according to IETF RFC 6086 [54] and indicating the session transfer preparation.\nIf the MSC server supports the CS to PS SRVCC, if the access transfer is cancelled according to 3GPP TS 23.216 [15], the MSC server shall send a SIP INFO request according to 3GPP TS 24.229 [2] within determined dialog for communication with ATCF. The MSC server shall populate the SIP INFO request with:\n1)\tInfo-Package header field with value g.3gpp.access-transfer-events; and\n2)\tapplication/vnd.3gpp.access-transfer-events+xml MIME body associated with the info package according to IETF RFC 6086 [54] and indicating the session transfer cancellation.\nIf the dialog for communication with ATCF is released after receiving HO required for a UE including an indication that the HO is for CS to PS as described in 3GPP TS 23.216 [15] and before sending of the CS to PS handover command as described in 3GPP TS 23.216 [15], the MSC shall perform the procedures in subclause 12.4.2.2 again.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "12.4.3\tAbnormal cases",
                            "text_content": "When the MSC server enhanced for ICS receives a SIP reject response to the SIP INVITE request due to STN-SR or SIP INVITE request due to E-STN-SR, the MSC server shall regard any of the following SIP reject responses as permanent errors:\n-\tSIP 404 (Not found);\n-\tSIP 410 (Gone);\n-\tSIP 484 (Address Incomplete); and\n-\tSIP 604 (Does not exist anywhere).\nThe MSC server enhanced for ICS shall regard all other received SIP reject responses to the SIP INVITE request due to STN-SR or SIP INVITE request due to E-STN-SR as temporary errors.\nNOTE:\tThe procedures in 3GPP TS 29.280 [71] requires that the MSC server indicates whether a received SIP reject response to the SIP INVITE request due to STN-SR or SIP INVITE request due to E-STN-SR is temporary or permanent.\nIf the MSC server enhanced for ICS receives a SRVCC PS to CS Cancel Notification from the MME/SGSN or if the access transfer procedure fails for any other reason in the MSC server enhanced for ICS, the MSC server shall:\n1)\tin the dialog created by the SIP INVITE request due to STN-SR or SIP INVITE request due to E-STN-SR:\na)\tif the dialog is a dialog with inactive or active speech media component, send a SIP BYE request; and\nb)\tif the dialog is in the pre-alerting phase or in the alerting phase, send a SIP BYE request or a SIP CANCEL request;\n2)\tif the MSC server applies the MSC server assisted mid-call feature, in the dialog created by the SIP INVITE for the additional transferred session;\na)\tif the dialog is a dialog with inactive speech media component, send a SIP BYE request; and\nb)\tif the dialog is in the pre-alerting phase or in the alerting phase, send a SIP BYE request or a SIP CANCEL request;\n3)\tif the cancellation is due to SRVCC PS to CS Cancel Notification from the MME/SGSN, include in the SIP request a Reason header field with the protocol value \"Q.850\" and the \"cause\" header field parameter with the value \"31\" (normal unspecified); and\n4)\tif the cancellation is due to any other reason than SRVCC PS to CS Cancel Notification from the MME/SGSN, include in the SIP request a Reason header field with the protocol value \"Q.850\" and the \"cause\" header field parameter with a value different from\"31\", e.g. \"41\" (temporary failure) or \"16\" (normal clearing).\nNOTE:\tThe inclusion of the protocol value \"Q.850\" and the \"cause\" header field parameter with the value \"31\" (normal unspecified) will result in that the SCC AS delays the release of the source access leg and the remote UE leg allowing the SC UE to continue the call in PS.\nIf after having sent a SIP CANCEL request:\na)\tto a SIP INVITE request due to STN-SR; or\nb)\tif the MSC server applies the MSC server assisted mid-call feature, to a SIP INVITE request for the additional transferred session,\nand subsequently receiving a SIP 200 (OK) response to such a SIP INVITE request, the MSC server shall send a SIP BYE request containing a Reason header field with the same protocol value and the same \"cause\" header field as used in the SIP CANCEL request.\nNOTE:\tTimer T313 defined in 3GPP TS 24.008 [8] supervises a CC CONNECT message sent by the MSC server.\nIf after having sent a CC CONNECT message, the timer that supervises the CC CONNECT message expires before the MSC server has received a CC CONNECT ACK message, the MSC server shall send a SIP BYE request on the SIP dialog created by the SIP INVITE due to STN-SR, by following the rules of 3GPP TS 24.229 [2].\n",
                            "figures_meta_data": [],
                            "tables": []
                        }
                    ]
                },
                {
                    "title": "12.4A\tMSC server assisted mid-call feature",
                    "description": "",
                    "summary": "",
                    "text_content": "Upon receiving a SIP 2xx response to the SIP INVITE request due to STN-SR, the MSC server shall:\n1.\tif inactive speech media component is negotiated by the SDP answer of the SIP 2xx response to the SIP INVITE request due to STN-SR, associate the dialog created by the SIP INVITE request due to STN-SR with a CS call  with transaction identifier 0 and TI flag value as in mobile terminated call and enter the \"active\" (N10) state (defined in 3GPP TS 24.008 [8]), the \"call held\" hold auxiliary state (defined in 3GPP TS 24.083 [43]), the \"idle\" multi party auxiliary state (defined in 3GPP TS 24.084 [47]) for the CS call, regard the access transfer of the session with inactive speech media component as completed and start interworking CC messages as specified in subclause 12.6.5. If the speech media component in SDP answer of the SIP 2xx response to the SIP INVITE request due to STN-SR:\n-\thas \"recvonly\" directionality, the MSC server shall determine that the remote UE does not hold the call; and\n-\thas \"inactive\" directionality, the MSC server shall determine that the remote UE holds the call; and\n2.\tif active speech media component is negotiated by the SDP answer of the SIP 2xx response to the SIP INVITE request due to STN-SR, associate the dialog created by the SIP INVITE request due to STN-SR with a CS call with the transaction identifier 0 and TI flag value as in mobile terminated call and enter the \"active\" (N10) state (defined in 3GPP TS 24.008 [8]), the \"idle\" hold auxiliary state (defined in 3GPP TS 24.083 [43]), the \"idle\" multi party auxiliary state (defined in 3GPP TS 24.084 [47]) for the CS call, regard the access transfer of the session with active speech media component as completed and start interworking CC messages as specified in subclause 12.6.5. If the speech media component in SDP answer of the SIP 2xx response to the SIP INVITE request due to STN-SR:\n-\thas \"sendrecv\" directionality, the MSC server shall determine that the remote UE does not hold the call; and\n-\thas \"sendonly\" directionality, the MSC server shall determine that the remote UE holds the call.\nUpon receiving a SIP INFO request:\n-\tsent inside in the dialog created by the SIP INVITE request due to STN-SR;\n-\twith the Info-Package header field containing the g.3gpp.mid-call package name;\n-\twith the application/vnd.3gpp.mid-call+xml MIME body associated with the info package according to IETF RFC 6086 [54]; and\n-\twith one or more participants included in the application/vnd.3gpp.mid-call+xml MIME body;\nand if the SIP INVITE request due to STN-SR established a session with conference focus then the MSC server shall:\n1.\tif inactive speech media component is negotiated by the SDP answer of the SIP 2xx response to the SIP INVITE request due to STN, associate the session and the participants extracted from the application/vnd.3gpp.mid-call+xml MIME body with CS calls:\n-\twith transaction identifiers 0, 2, 3, 4, 5 assigned to the participants in their order in the list of the extracted participants; and\n-\twith TI flag value as in mobile terminating call;\nand enter the \"active\" (N10) state (defined in 3GPP TS 24.008 [8]), the \"call held\" hold auxiliary state (defined in 3GPP TS 24.083 [43]), the \"call in MPTY\" multi party auxiliary state (defined in 3GPP TS 24.084 [47]) for the CS calls, regard the access transfer of conference participants with transaction identifiers 2,3,4,5 and the TI flag value as in the mobile terminating call as completed and start interworking CC messages as specified in subclause 12.6.5. The MSC server may subscribe to the conference event package as specified in 3GPP TS 24.605 [31]; and\nNOTE 1:\tThe transaction identifier and TI flag value for the first participant are assigned by the call activation procedures for SRVCC in 3GPP TS 24.008 [8].\nNOTE 2:\tThe multi party auxiliary state was initially set to \"idle\" on reception of the SIP 2xx response to the SIP INVITE request due to STN-SR. This state is re-assigned to \"call in MPTY\" after processing the SIP INFO request to reflect the multi party auxiliary state associated with the first participant .\n2.\tif active speech media component is negotiated by the SDP answer of the SIP 2xx response to the SIP INVITE request due to STN, associate the session and the participants extracted from the application/vnd.3gpp.mid-call+xml MIME body with CS calls:\n-\twith transaction identifiers 0, 2, 3, 4, 5 assigned to the participants in their order in the list of the extracted participants; and\n-\twith TI flag value as in mobile terminating call;\nand enter the \"active\" (N10) state (defined in 3GPP TS 24.008 [8]), the \"idle\" hold auxiliary state (defined in 3GPP TS 24.083 [43]), the \"call in MPTY\" multi party auxiliary state (defined in 3GPP TS 24.084 [47]) for the CS calls, regard the access transfer of conference participants with transaction identifiers 2,3,4,5 and the TI flag value as in the mobile terminating call as completed and start interworking CC messages as specified in subclause 12.6.5. The MSC server may subscribe to the conference event package as specified in 3GPP TS 24.605 [31].\nNOTE 3:\tFor an MSC server enhanced for PS to CS SRVCC using SIP interface, following access transfer, the procedures for the handling of transferred conference participants are implementation dependent.\nUpon receiving a SIP REFER request:\n1.\twith the Refer-Sub header field containing \"false\" value;\n2.\twith the Supported header field containing \"norefersub\" value;\n3.\twith the Refer-To header field containing a SIP URI with the Target-Dialog URI header field;\n4.\tsent inside a SIP dialog:\nA.\tcreated by the SIP INVITE request due to STN-SR; and\nB.\twhere the g.3gpp.mid-call feature-capability indicator as specified in annex C was included in the Feature-Caps header field of the SIP 2xx response to the SIP INVITE request due to STN-SR; and\n5.\tcontaining a MIME body of MIME type specified in the subclause D.1.3;\nthe MSC server shall:\n1.\thandle the SIP REFER request as specified in 3GPP TS 24.229 [2], IETF RFC 3515 [13] as updated by IETF RFC 6665 [81], and IETF RFC 4488 [20] without establishing an implicit subscription; and\nNOTE 4:\tIn accordance with IETF RFC 4488 [20], the MSC server inserts the Refer-Sub header field containing the value \"false\" in the SIP 2xx response to the SIP REFER request to indicate that it has not created an implicit subscription.\n2.\tsend a SIP INVITE request for transfer of an additional session with inactive speech media component in accordance with the procedures specified in 3GPP TS 24.229 [2] and IETF RFC 3515 [13]. If the MSC server is enhanced for ICS, the MSC server does not apply the ICS procedure described in 3GPP TS 29.292 [18] and 3GPP TS 24.292 [4] when sending the SIP INVITE request for transfer of an additional session with inactive speech media component. Additionally, the MSC server shall populate the SIP INVITE request for transfer of an additional session with inactive speech media component as follows:\nA.\theader fields which were included as URI header fields in the URI in the Refer-To header field of the received SIP REFER request as specified in IETF RFC 3261 [19] except the \"body\" URI header field;\nB.\tinclude in the Contact header field the g.3gpp.mid-call media feature tag as described in annex C;\nC.\tthe SDP offer with:\na.\tthe same amount of the media descriptions as in the \"body\" URI header field in the URI in the Refer-To header field of the received SIP REFER request;\nb.\teach \"m=\" line having the same media type as the corresponding \"m=\" line in the \"body\" URI header field in the URI in the Refer-To header field of the received SIP REFER request;\nc.\tport set to zero value in each \"m=\" line whose corresponding \"m=\" line in the \"body\" URI header field in the URI in the Refer-To header field of the received SIP REFER request has port with zero value;\nd.\tmedia directionality as in the \"body\" URI header field in the URI in the Refer-To header field of the received SIP REFER request; and\ne.\tpayload type numbers and their mapping to codecs and media parameters supported by MSC server, not conflicting with those in the \"body\" URI header field in the URI in the Refer-To header field of the received SIP REFER request;\nNOTE 5:\tport can be sent to zero or non zero value for the offered \"m=\" line whose corresponding \"m=\" line in the \"body\" URI header field in the URI in the Refer-To header field of the received SIP REFER request has port with nonzero value.\nD.\tif an authorised Resource-Priority header field was included in the SIP INVITE request due to STN-SR, then include an authorised Resource-Priority header field with the same values as used in the SIP INVITE request due to STN-SR;\nE.\tif the MSC server supports CS to PS SRVCC and the SIP REFER request contains the application/vnd.3gpp.srvcc-ext+xml MIME body:\na)\tthe topmost Route header field with the ATCF management URI received in the application/vnd.3gpp.srvcc-ext+xml MIME body of the SIP REFER request and \"lr\" URI parameter;\nb)\tthe Accept header field containing application/vnd.3gpp.access-transfer-events+xml MIME type with the \"et\" parameter indicating ability to receive \"event-type\" attribute with the value \"2\";\nc)\tthe Recv-Info header field containing the g.3gpp.access-transfer-events info package name;\nd)\tthe application/vnd.3gpp.srvcc-ext+xml MIME body with the <srvcc-ext> root element containing the <Setup-info> element containing the CS to PS SRVCC information received in the application/vnd.3gpp.srvcc-ext+xml MIME body of the SIP REFER request and indicating the \"initiator\" role of the MSC server in the session set up; and\ne)\tthe g.3gpp.ti media feature tag with value as described in subclause C.12 in the Contact header field;\nF.\tif the MSC server supports procedures in subclause 22.2:\na)\tan Accept header field according to IETF RFC 3261 [19] containing the MIME type application/vnd.3gpp.state-and-event-info+xml as specified in subclause D.2.3; and\nb)\ta Recv-Info header field according to IETF RFC 6086 [54] containing the g.3gpp.state-and-event package name;\nG.\tsignalling elements described in subclause 6A.7.1 and shall indicate the related local preconditions as met;\nH.\tinclude the P-Access-Network-Info header field in the SIP INVITE request as specified in 3GPP TS 24.229 [11]. The P-Access-Network-Info header field shall include:\na)\tan access-type field set to \"3GPP-GERAN\", \"3GPP-UTRAN-FDD\", \"3GPP-UTRAN-TDD\", or an access-class field set to\"3GPP-GERAN\", \"3GPP-UTRAN\";\nb)\tif available, a \"cgi-3gpp\" or \"utran-sai-3gpp\" parameter;\nc)\tif available a \"local-time-zone\" parameter;\nd)\ta \"network-provided\" parameter; and\ne)\tif available, a \"daylight-saving-time\" parameter; and\nI.\tif a P-Asserted-Identity header field is not included in the headers portion of the URI in the Refer-To header field of the received SIP REFER request as specified in IETF RFC 3261 [19], include a P-Asserted-Identity header field with the value of the C-MSISDN contained in the SIP INVITE requests due to STN-SR which created the dialog in which the SIP REFER request is received.\nUpon receiving SIP 2xx response to the SIP INVITE request for transfer of an additional session with inactive speech media component, the MSC server shall:\n1.\tif:\na)\tthe SIP INVITE request for transfer of the additional session with inactive speech media component did not established a session with a conference focus; or\nb)\tthe application/vnd.3gpp.mid-call+xml MIME body included in the SIP REFER request does not contain one or more participants:\nthen associate the additional session with inactive speech media component with CS call with transaction identifier 1 and TI flag value as in mobile terminated call and enter the \"active\" (N10) state (as defined in 3GPP TS 24.008 [8]), the \"call held\" hold auxiliary state (as defined in 3GPP TS 24.083 [43]) and the \"idle\" multi party auxiliary state (defined in 3GPP TS 24.084 [47]) for the CS call. If the speech media component in SDP answer of the SIP 2xx response to the SIP INVITE request for transfer of an additional session with inactive speech media component:\n-\thas \"recvonly\" directionality, the MSC server shall determine that the remote UE does not hold the call; and\n-\thas \"inactive\" directionality, the MSC server shall determine that the remote UE holds the call;\n2.\tif the SIP INVITE request for transfer of an additional session with inactive speech media component established a session with a conference focus and the application/vnd.3gpp.mid-call+xml MIME body included in the SIP REFER request contained one or more participants:\na)\tassociate the additional session and the participants extracted from the application/vnd.3gpp.mid-call+xml MIME body included in the SIP REFER request with CS calls:\n-\twith transaction identifiers 1, 2, 3, 4, 5 assigned to the participants in their order in the list of the extracted participants; and\n-\twith TI flag value as in mobile terminated call;\nand enter the \"active\" (N10) state (defined in 3GPP TS 24.008 [8]), the \"call held\" hold auxiliary state (defined in 3GPP TS 24.083 [43]) and the \"call in MPTY\" multi party auxiliary state (defined in 3GPP TS 24.084 [47]) for the CS calls. The MSC server may subscribe to the conference event package as specified in 3GPP TS 24.605 [31]; and\n3.\tthe MSC server shall send the SIP ACK request as specified in 3GPP TS 24.229 [2] and regard the access transfer of the session with inactive speech media component and conference participants (if applicable) as completed and start interwork CC messages as specified in subclause 12.6.5.\nNOTE 6:\tWhen the access transfer is completed the  server can verify the call state of its peer entity using the STATUS ENQUIRY procedure in accordance with procedures in 3GPP TS 24.008 [8] to ensure that SIP requests or SIP responses sent between the SC UE and the  AS just before the handover from the PS domain to the CS domain occurred did not result in incompatible call state or auxiliary states. If the call state or auxiliary states are incompatible the transferred session is released.\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "12.5\tEATF",
                    "description": "",
                    "summary": "",
                    "text_content": "",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": [
                        {
                            "title": "12.5.1\tEATF procedures for PS to CS session continuity, E-SR-VCC",
                            "text_content": "The EATF needs to distinguish between the following initial SIP INVITE requests to provide specific functionality for E-SR-VCC:\n1.\tSIP INVITE request routed to the EATF due to E-STN-SR in the Request-URI. In the procedures below, such requests are known as \"SIP INVITE requests due to E-STN-SR\".\nNOTE 1:\tThe same E-STN-SR is used for all the emergency session access transfers within one PLMN.\nOther initial SIP requests can be dealt with in any manner conformant with 3GPP TS 24.229 [2].\nWhen the EATF receives a SIP INVITE request due to E-STN-SR on the Target Access Leg, the EATF shall:\n1)\tidentify the transferable set which are dialogs supporting a session with speech media component anchored at the EATF with the sip.instance media feature tag provided by the SC UE in the Contact header field at session establishment equal to the sip.instance media feature tag included in the Contact header field of the received SIP INVITE request due to E-STN-SR; and\nNOTE 2:\tWhen the sip.instance media feature tag contains an IMEI URN as specified in IETF RFC 7254 [82], the spare digit (i.e. the digit matching the spare ABNF rule) is required to be set to zero. If the spare digit is set to non zero value, the spare digit can be ignored.\n2)\tif a confirmed dialog supporting a sessions with active speech media component exists in the transferable set:\nA)\tassociate the SIP INVITE request due to E-STN-SR with the confirmed dialog supporting a session with active speech media component; and\nB)\toriginate session modification as described in 3GPP TS 24.229 [2] towards the remote UE by sending a SIP re-INVITE request with a new SDP offer with media characteristics as received in the SIP INVITE request due to E-STN-SR. If the SIP INVITE request due to E-STN-SR does not contain a Recv-Info header field, the EATF shall include an empty Recv-Info header field in the SIP re-INVITE request as defined in IETF RFC 6086 [54]. If the SIP INVITE request due to E-STN-SR contains a Recv-Info header field, the EATF shall remove the info package names of info packages that terminate at the EATF, if any, and include the remaining info package names in a Recv-Info header field in the SIP re-INVITE request.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "12.5.2\tEATF procedures for PS to CS SRVCC, abnormal case",
                            "text_content": "If the EATF receives a SIP BYE request containing a Reason header field containing the protocol value \"Q.850\" and the \"cause\" header field parameter with the value of \"31\" (normal unspecified) on the target access leg after having initiated an access transfer that was triggered by a SIP INVITE request due to E-STN-SR and when the operator specific timer is still running, the EATF shall:\n1)\tsend the SIP 200 (OK) response to the SIP BYE request;\n2)\twait until the operator specific timer expires or until a SIP re-INVITE request from the SC UE containing the protocol value \"SIP\" and the \"cause\" header field parameter with the value \"487\" is received; and\n3)\tif the operator specific timer expires and no SIP re-INVITE request from the SC UE containing the protocol value \"SIP\" and the \"cause\" header field parameter with the value \"487\" is received, release the call according to procedures in 3GPP TS 24.229 [2].\nNOTE 1:\tAll protocol values in the Reason header field other than \"Q.850\" and all values of the \"cause\" header field parameter other than \"31\" (normal unspecified) will result in an immediate release of the source access leg and the remote UE leg.\nNOTE 2:\tThe EATF assigns an operator specific timer to delay the release of the source access leg for PS to CS SRVCC access transfers.\nWhen the EATF receives SIP re-INVITE request(s) from the SC UE containing the Reason header field with the protocol value \"SIP\" and the \"cause\" header field parameter with the value \"487\" after having performed an access transfer that was triggered by a SIP INVITE request due to E-STN-SR and after receiving a SIP BYE request containing the Reason header field containing the protocol value \"Q.850\" and the \"cause\" header field parameter with the value \"31\" (normal unspecified) on the target access leg, then the EATF shall:\n1)\tnot release the original source access leg on expiry of the timer described in subclause 12.5.1; and\n2)\tsend the SIP re-INVITE request towards the remote leg by following the rules of 3GPP TS 24.229 [2].\nWhen the EATF receives a SIP response to the SIP re-INVITE request, the EATF shall forward the SIP response to the SC UE.\nWhen the EATF receives a SIP re-INVITE request containing the Reason header field with the protocol value \"SIP\" and the \"cause\" header field parameter with the value \"487\" on the original source access leg after having initiated an access transfer that was triggered by a SIP INVITE request due to E-STN-SR and the SIP INVITE request due to E-STN-SR transaction is not yet completed then the EATF shall wait until this transaction has completed and then continue with the steps 1) to 3) described below.\nWhen the EATF receives a SIP re-INVITE request containing the Reason header field with the protocol value \"SIP\" and header field parameter \"cause\" with the value \"487\" on the original source access leg after having performed an access transfer that was triggered by a SIP INVITE request due to E-STN-SR, then the EATF shall:\n1)\tsend a SIP BYE request on the target access leg, by following the rules of 3GPP TS 24.229 [2];\n2)\tnot release the original access leg on the expiration of the timer described in subclause 12.5.1; and\n3)\tsend the SIP re-INVITE request towards the remote leg by following the rules of 3GPP TS 24.229 [2].\nNOTE:\tThe EATF assigns an operator specific timer to delay the release of the source access leg for PS to CS SRVCC access transfer.\nWhen the EATF receives a SIP response to the SIP re-INVITE request, the EATF shall forward the SIP response to the SC UE.\nWhen EATF receives a SIP BYE request on the source access leg with any Reason header field containing protocol \"SIP\" and reason parameter \"cause\" with value \"503\" then:\nNOTE 1:\tThe SIP BYE request can contain more than one Reason header field.\n-\tif the EATF receives an initial SIP INVITE request due to E-STN-SR on the target access leg associated with the established dialog on the source access leg, within a time defined by the operator policy after the SIP BYE request reception, then the EATF shall not initiate release of the remote leg; and\n-\tif the EATF does not receive an initial SIP INVITE request due to E-STN-SR on the target access leg associated with the established dialog on the source access leg, within a time defined by the operator policy after the SIP BYE request reception then the EATF shall initiate release of the remote leg.\nNOTE 2:\t8 seconds is an appropriate value for the operator policy.\nIf the EATF applies the procedures for the PS to CS access transfer for originating call in alerting phase or pre-alerting phase using PS to CS SRVCC procedure (as specified in subclause 12.5.3.2), then when the EATF receives a SIP UPDATE request containing a Reason header field containing protocol \"SIP\" and reason parameter \"cause\" with value \"487\" on the original source access leg after having initiated an access transfer that was triggered by a SIP INVITE request due to E-STN-SR for an emergency session which is still in early dialog state, the EATF shall:\n1)\tstop the operator specific timer and not release the original access leg as described in subclause 12.5.4; and\n2)\tforward the SIP UPDATE request on the remote leg according to 3GPP TS 24.229 [2].\nThe EATF shall now start forwarding SIP messages from the remote UE to the SC UE on each dialog created by the SIP INVITE on the original source access leg as specified in 3GPP TS 24.229 [2] and the present document.\nWhen the EATF receives a SIP 200 (OK) response to the SIP UPDATE request, then the EATF shall:\n1)\tif the EATF has already sent a SIP 200 (OK) response to a SIP INVITE request due to E-STN-SR then send a SIP BYE request on this dialog, and send a SIP 200 (OK) response to the SIP INVITE on the original source access leg; and\n2)\tif the EATF has not sent a SIP 200 (OK) response to a SIP INVITE request due to E-STN-SR then send a SIP 480 (Temporarily Unavailable) response to reject the SIP INVITE request due to E-STN-SR.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "12.5.3\tEATF procedures for PS to CS access transfer when emergency session is in alerting phase or pre-alerting phase",
                            "text_content": "The EATF shall apply the procedures as described in subclause 12.5.3.2 if:\n1)\tthe Contact header field of the SIP INVITE request routed to the EATF due to a E-STN-SR includes the g.3gpp.srvcc-alerting media feature tag as specified in annex C; and\n2)\tthere are one or more dialogs supporting sessions with speech media component existing in the transferable set, such that:\nA)\tall dialogs are early dialogs;\nB)\tSIP 180 (Ringing) response to SIP INVITE request was received in at least one of those early dialogs, all such SIP 180 (Ringing) responses are responses to the same SIP INVITE request and at least one of such SIP 180 (Ringing) responses was received in an early dialog supporting session with active speech media component;\nC)\tthe Contact header field provided by the SC UE includes the g.3gpp.srvcc-alerting media feature tag as described in annex C;\nE)\tthe following is true:\n-\tthe Contact header field provided by the SC UE does not include the g.3gpp.mid-call media feature tag; or\n-\tthe Contact header field provided by the SC UE includes both the g.3gpp.mid-call media feature tag and the g.3gpp.ps2cs-srvcc-mid-call-emergency media feature tag; and\nF)\tthe Feature-Caps header field provided by the EATF towards the SC UE includes the g.3gpp.srvcc-alerting feature-capability indicator as described in annex C.\nAdditionally, the EATF shall apply the procedures as described in subclauses 12.5.3.2 if:\n1)\tthe Contact header field of the SIP INVITE request due to a E-STN-SR includes the g.3gpp.ps2cs-srvcc-orig-pre-alerting media feature tag as described in annex C; and\n2)\tthere are zero, one or more dialogs supporting a session with speech media component in the transferable set and a SIP INVITE request was received from SC UE with the sip.instance media feature tag in the Contact header field to the sip.instance media feature tag included in the Contact header field of the received SIP INVITE request due to E-STN-SR, such that:\nA)\tall dialogs are early dialogs created by a SIP response to the SIP INVITE request;\nB)\ta final SIP response to the SIP INVITE request has not been sent yet;\nC)\ta SIP 180 (Ringing) response to the SIP INVITE request has not been sent yet in any existing early dialog created by a SIP response to the SIP INVITE request;\nD)\tthe SIP INVITE request included a Contact header field containing the g.3gpp.ps2cs-srvcc-orig-pre-alerting media feature tag as described in annex C;\nE)\tthe following is true:\n-\tthe Contact header field provided by the SC UE does not include the g.3gpp.mid-call media feature tag; or\n-\tthe Contact header field provided by the SC UE includes both the g.3gpp.mid-call media feature tag and the g.3gpp.ps2cs-srvcc-mid-call-emergency media feature tag; and\nF)\ta SIP 1xx response to the SIP INVITE request was sent where the SIP 1xx response contained a Feature-Caps header field with the g.3gpp.ps2cs-srvcc-orig-pre-alerting feature-capability indicator as described in annex C.\nNOTE:\tEATF can have zero dialogs if all the early dialogs were terminated by 199 (Early Dialog Terminated) as described in RFC 6228 [80].\nWhen the session in the transferable session set is an originating call not accepted yet the EATF shall associate the SIP INVITE request due to E-STN-SR with an early dialog or early dialogs related to the originating call.\nIf the EATF receives a SIP 18x response on the remote leg after receiving a SIP INVITE request due to E-STN-SR, and this SIP 18x response does not require use of reliable provisional responses, the EATF shall:\n1)\tstore this SIP 18x response; and\n2)\tif a P-Early-Media header field is received in the SIP 18x response, store the P-Early-Media header field.\nThe EATF shall store the received SIP 18x responses separately for each early dialog. If the EATF has already stored a SIP 18x response for an early dialog and receives another SIP 18x response for the same early dialog, the EATF may remove the stored SIP 18x response for that early dialog and shall store the new SIP 18x response for that early dialog.\nThe EATF shall store the received P-Early-Media header field separately for each early dialog. If the EATF has already stored a P-Early-Media header field received in a SIP 18x response for an early dialog, and receives another SIP 18x response for the same early dialog containing a P-Early-Media header field, the EATF may remove the stored P-Early-Media header field for that early dialog and shall store the new P-Early-Media header field for that early dialog,\nNOTE:\tThe P-Early-Media header field is stored separately to prepare for the case that a subsequent SIP 18x response does not contain a P-Early-Media header field.\nIf there is only one early dialog related to the originating call not accepted yet available for the served user, the remote UE has provided an Allow header field listing the SIP UPDATE method or has not provided Allow header field, the remote UE has provided the SDP answer, the EATF shall update the remote leg by sending a SIP UPDATE request towards the remote UE using the existing early dialog as specified in 3GPP TS 24.229 [2]. The EATF shall populate the SIP UPDATE request with the SDP offer received in the SIP INVITE request due to E-STN-SR.\nUpon receiving the SIP 200 (OK) response to the SIP UPDATE request from the remote UE, the EATF shall send a SIP 183 (Session Progress) response in response to the SIP INVITE request due to E-STN-SR towards the MSC server. The EATF shall populate the SIP 183 (Session Progress) response to the SIP INVITE request due to E-STN-SR with:\n1)\tthe SDP answer received in the SIP 200 (OK) response to the SIP UPDATE request; and\n2)\tif the SIP INVITE request due to E-STN-SR contains a P-Early-Media header field with the \"supported\" parameter and if the EATF has received a P-Early-Media header field in a SIP message in the dialog of the SIP UPDATE request, include a P-Early-Media header field containing the value of the last P-Early-Media header field received in a SIP message in the dialog of the SIP UPDATE request.\nIf there are more than one early dialog related to the originating call not accepted yet available for the served user due to forking as described in 3GPP TS 24.229 [2], the remote UE has provided an Allow header field listing SIP UPDATE method or has not provided Allow header field, and the remote UE provided SDP answer, the EATF shall update the remote leg(s) by sending SIP UPDATE request(s) simultaneously towards remote UE(s) using such early dialog(s) as specified in 3GPP TS 24.229 [2]. The EATF shall populate each SIP UPDATE request with the SDP offer received in the SIP INVITE request due to E-STN-SR. Upon receiving each SIP 200 (OK) response to the SIP UPDATE request from the remote UE, the EATF shall create a new early dialog by sending a SIP 183 (Session Progress) response in response to the SIP INVITE request due to E-STN-SR towards the MSC server. The EATF shall populate the SIP 183 (Session Progress) response to the SIP INVITE request due to E-STN-SR with:\n1)\tthe SDP answer received in the SIP 200 (OK) response to the SIP UPDATE request; and\n2)\tIf the SIP INVITE request due to E-STN-SR contains a P-Early-Media header field with the \"supported\" parameter and if the EATF has received a P-Early-Media header field in a SIP message in the dialog of the SIP UPDATE request, include a P-Early-Media header field containing the value of the last P-Early-Media header field received in a SIP message in the dialog of the SIP UPDATE request.\nIf one or more early dialogs related to the originating call not accepted yet are available for the served user, and in each such early dialog:\n1)\tthe remote UE of the early dialog has provided an Allow header field not listing the SIP UPDATE method; or\n2)\tSIP 405 (Method Not Allowed) response was received to the SIP UPDATE sent towards the remote UE in the early dialog;\nthe EATF shall create a new dialog by sending a SIP 183 (Session Progress) response to the SIP INVITE request due to E-STN-SR. The EATF shall populate the SIP 183 (Session Progress) response with an SDP answer:\n1)\twith c-line set to the unspecified address (0.0.0.0) if IPv4 or to a domain name within the \".invalid\" DNS top-level domain in case of IPv6 as described in IETF RFC 6157 [74]; and\n2)\tincluding media of media types received in SDP offer of the SIP INVITE request due to E-STN-SR, which are also offered in the SIP INVITE request from the served user.\nIf the EATF supports the PS to CS SRVCC for originating emergency sessions in pre-alerting phase and if there are no early dialogs related to the originating call not accepted yet available for the served user and there is a SIP INVITE request from the served user for which a final SIP response has not been received yet, the EATF shall send a SIP 183 (Session Progress) response to the SIP INVITE request due to E-STN-SR. The EATF shall populate the SIP 183 (Session Progress) response with an SDP answer:\n1)\twith c-line set to the unspecified address (0.0.0.0) if IPv4 or to a domain name within the \".invalid\" DNS top-level domain in case of IPv6 as described in IETF RFC 6157 [74]; and\n2)\tincluding media of media types received in SDP offer of the SIP INVITE request due to E-STN-SR, which are also offered in the SIP INVITE request from the served user.\nUpon receiving the first SIP PRACK request from the target access leg, the EATF shall send a 200 (OK) to the PRACK response and then send a SIP INFO request towards the MSC server as specified in 3GPP TS 24.229 [2] and IETF RFC 6086 [54] in the dialog created by the SIP INVITE request due to E-STN-SR. The EATF shall populate the SIP INFO request as follows:\n1)\tinclude the Info-Package header field as specified in IETF RFC 6086 [54] with 3gpp.state-and-event info package name; and\n2)\tinclude application/vnd.3gpp.state-and-event-info+xml XML body associated with the info package according to IETF RFC 6086 [54] and containing an XML body compliant to the XML schema specified in clause D.2:\nA)\tif a SIP 180 (Ringing) response to the SIP INVITE request has already been forwarded to the served SC UE before receiving the INVITE due to E-STN-SR, with the state-info XML element containing \"early\" the direction XML element containing \"initiator\"; and\nB)\tif the EATF supports the PS to CS SRVCC for originating emergency sessions in pre-alerting phase and if a SIP 180 (Ringing) response to the SIP INVITE request has not beenforwarded to the served SC UE before receiving the INVITE due to E-STN-SR, with the state-info XML element containing \"pre-alerting\" and the direction XML element containing \"initiator\".\nUpon receiving the 200 (OK) response to the SIP INFO request the EATF shall:\n1)\tstart forwarding SIP messages from the remote UE to the MSC server as specified in 3GPP TS 24.229 [2] and the present specification for dialogs where a PRACK request is received from the MSC server; and\n2)\tif SIP 18x responses were stored after receiving the SIP INVITE request due to E-STN-SR, then for each early dialog where a PRACK request is received from the MSC server:\nA)\tforward all stored SIP 18x responses to the MSC server; and\nB)\tif a P-Early-Media header field is stored, include the P-Early-Media header field that was stored most recently in the SIP 18x response.\nIf a reliable SIP 1xx response or a SIP 2xx response is received on the remote leg, the SIP response is to the SIP INVITE request from the served user, the SIP response contains an SDP answer, and an SDP answer has not been received from the remote UE on the dialog of the SIP response yet, the EATF shall:\n1)\tif the SIP 1xx response is received, send a SIP PRACK request on the remote leg as specified in 3GPP TS 24.229 [2]. The EATF shall populate the SIP PRACK request with the SDP offer received in the SIP INVITE request due to E-STN-SR as specified in 3GPP TS 24.229 [2]. Upon receiving the SIP 200 (OK) response to the SIP PRACK request, the EATF shall send a SIP 183 (Session Progress) response to the SIP INVITE request due to E-STN-SR as specified in 3GPP TS 24.229 [2]. The EATF shall populate the SIP 183 (Session Progress) response with:\nA)\tthe SDP answer received in the SIP 200 (OK) response to the SIP PRACK request as specified in 3GPP TS 24.229 [2]; and\nB)\tif the SIP INVITE request due to E-STN-SR contains a P-Early-Media header field with the \"supported\" parameter and if the EATF has received a P-Early-Media header field in a SIP message in the dialog of the SIP PRACK request, a P-Early-Media header field containing the value of the last P-Early-Media header field received in a SIP message in the dialog of the SIP PRACK request; and\n2)\tif the SIP 2xx response is received, send a SIP ACK request on the remote leg as specified in 3GPP TS 24.229 [2] and send a SIP UPDATE request or SIP re-INVITE request on the remote leg as specified in 3GPP TS 24.229 [2]. The EATF shall populate the SIP UPDATE request or SIP re-INVITE request with the SDP offer received in the SIP INVITE request due to E-STN-SR as specified in 3GPP TS 24.229 [2]. Upon receiving the SIP 200 (OK) response to the SIP UPDATE request or SIP re-INVITE request, the EATF shall send a SIP 200 (OK) response to the SIP INVITE request due to E-STN-SR as specified in 3GPP TS 24.229 [2]. The EATF shall populate the SIP 200 (OK) response with the SDP answer received in the SIP 200 (OK) response to the SIP UPDATE request or SIP re-INVITE request as specified in 3GPP TS 24.229 [2].\nIf a SIP 2xx response is received on the remote leg, the SIP response is to the SIP INVITE request from the served user, and an SDP answer has already been received from the remote UE on the dialog of the SIP response:\n1)\tif the SDP offer received in the SIP INVITE request due to E-STN-SR has already been sent to the remote UE on the dialog of the SIP 2xx response, accepted with a subsequent SDP answer, the subsequent SDP answer was sent in a 183 (Session Progress) response on a target access leg, and the SIP 2xx response does not contain an SDP answer, then forward the SIP 2xx response on the target access leg as a SIP response to the SIP INVITE request due to E-STN-SR;\n2)\tif the SDP offer received in the SIP INVITE request due to E-STN-SR has already been sent to the remote UE on the dialog of the SIP 2xx response, accepted with a subsequent SDP answer, the subsequent SDP answer was sent in a 183 (Session Progress) response on a target access leg, and the SIP 2xx response contains an SDP answer, then remove the SDP body from the SIP 2xx response or replace the SDP body in the SIP 2xx response with the subsequent SDP answer, and forward the SIP 2xx response as specified in 3GPP TS 24.229 [2] on the target access leg as a SIP response to the SIP INVITE request due to E-STN-SR; and\n3)\tif:\nA)\tthe SDP offer received in the SIP INVITE request due to E-STN-SR has not been sent to the remote UE on the dialog of the SIP response yet; or\nB)\tthe SDP offer received in the SIP INVITE request due to E-STN-SR has already been sent to the remote UE in a SIP UPDATE request within the dialog of the SIP response and the SIP UPDATE request was rejected with SIP 405 (Method Not Allowed) response;\nsend a SIP ACK request on the remote leg as specified in 3GPP TS 24.229 [2] and send a SIP re-INVITE request on the remote leg as specified in 3GPP TS 24.229 [2]. The EATF shall populate the SIP re-INVITE request with the SDP offer received in the SIP INVITE request due to E-STN-SR as specified in 3GPP TS 24.229 [2]. Upon receiving the SIP 200 (OK) response to the SIP re-INVITE request, the EATF shall send a SIP ACK request on the remote leg as specified in 3GPP TS 24.229 [2] and shall send a SIP 200 (OK) response to the SIP INVITE request due to E-STN-SR as specified in 3GPP TS 24.229 [2] using a dialog different to the dialog of SIP 183 (Session Progress) response to the SIP INVITE request due to E-STN-SR. The EATF shall populate the SIP 200 (OK) response with the SDP answer received in the SIP 200 (OK) response to the SIP re-INVITE request as specified in 3GPP TS 24.229 [2].\nThe EATF shall remove non-transferred audio and video media components and superfluous sessions as specified in subclause 12.5.4.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "12.5.4\tRemoval of non-transferred audio media components and superfluous sessions",
                            "text_content": "If no dialog was associated with the SIP INVITE request due to E-STN-SR, the EATF shall send a SIP 480 (Temporarily Unavailable) response to reject the SIP INVITE request due to E-STN-SR.\nUpon receiving the SIP ACK request from the Target Access Leg, and after an operator specific timer has expired, the EATF:\n1)\tshall release the source access leg of the session associated with the SIP INVITE request due to E-STN-SR, as described in 3GPP TS 24.229 [2]; and\nNOTE 1:\tIf non-speech media was part of the original emergency session, the non-speech media will be released.\nNOTE 2:\tDelaying the release of the source access leg as described above allows an SC UE to reuse the PS dialog in case of PS to CS SRVCC cancellation.\n2)\tfor each session in the transferable set which was not transferred, shall release remote leg and source access leg.\n",
                            "figures_meta_data": [],
                            "tables": []
                        }
                    ]
                },
                {
                    "title": "12.6\tMSC server enhanced for SRVCC using SIP interface",
                    "description": "",
                    "summary": "",
                    "text_content": "",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": [
                        {
                            "title": "12.6.0\tGeneral",
                            "text_content": "The MSC server enhanced for SRVCC using SIP interface may support the codec inquiry prior to the PS to CS SRVCC access transfer.\nWhen the MSC server enhanced for SRVCC using SIP interface receives an indication for a PS to CS SRVCC session transfer as described in 3GPP TS 23.216 [49], the MSC server may perform the codec inquiry prior to PS to CS SRVCC access transfer as specified in subclause 12.6.0A according to local policy.\nNOTE:\tThe local policy can be based on MSC server configuration of STN-SR(s) owned by ATCF(s) supporting the codec inquiry prior to PS to CS SRVCC access transfer.\nIf the MSC server enhanced for SRVCC using SIP interface does not support or does not perform the codec inquiry prior to PS to CS SRVCC access transfer as specified in subclause 12.6.0A, the MSC server shall perform the procedures in subclause 12.6.1.\nThe MSC server enhanced for SRVCC using SIP interface may support the codec re-negotiation after the PS to CS SRVCC access transfer as specified in subclause 12.6.0B.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "12.6.0A\tCodec inquiry prior to PS to CS SRVCC access transfer",
                            "text_content": "In order to perform the codec inquiry prior to PS to CS SRVCC access transfer, the MSC server shall send a SIP OPTIONS request according to 3GPP TS 24.229 [2]. In the SIP OPTIONS request, the MSC server:\n1)\tshall set the Request-URI to the STN-SR received over Sv interface as described in 3GPP TS 23.216 [49];\n2)\tshall set the P-Asserted-Identity header field to the C-MSISDN received over Sv interface as described in 3GPP TS 23.216 [49]; and\n3)\tshall include an application/vnd.3gpp.PS-to-CS-preparation+xml body specified in subclause D.6 carrying the PS-to-CS-preparation-request. In the PS-to-CS-preparation-request, the MSC server may include an <MSC-server-supported-codec-list> element containing an SDP body with one audio m= line with one or more RTP payload types that are supported commonly by the served SC UE, the target RAN and the target CS-MGW selected by the MSC server. The MSC server shall associate the RTP payload type(s) with the RTP payload type number(s) according to local policy.\nIf no SIP final response is received within a time defined by local policy to the SIP OPTIONS request, the MSC server shall perform the procedures in subclause 12.6.1 or subclause 12.4.0.2.\nUpon receiving a SIP 3xx, 4xx, 5xx or 6xx response to the SIP OPTIONS request, the MSC server shall perform the procedures in subclause 12.6.1 or subclause 12.4.0.2.\nUpon reception of a SIP 2xx response to the SIP OPTIONS request:\n1)\tif the SIP 2xx response does not contain an application/vnd.3gpp.PS-to-CS-preparation+xml body specified in subclause D.6 carrying the PS-to-CS-preparation-response, the MSC server shall perform the procedures in subclause 12.6.1 or subclause 12.4.0.2; and\n2)\tif the SIP 2xx response contains an application/vnd.3gpp.PS-to-CS-preparation+xml body specified in subclause D.6 carrying the PS-to-CS-preparation-response, the MSC server:\na)\tif the PS-to-CS-preparation-response indicates that the PS to CS SRVCC access transfer is currently possible, shall perform the procedures in subclause 12.6.1 or subclause 12.4.0.2; and\nb)\tif the PS-to-CS-preparation-response indicates that the PS to CS SRVCC access transfer is currently not possible, can send SRVCC PS to CS Response as specified in 3GPP TS 23.216 [49] with a reject cause or can repeat the procedures of the present subclause after a time defined by local policy.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "12.6.0B\tCodec re-negotiation after session transfer",
                            "text_content": "If a PS to CS SRVCC access transfer has been successfully performed, different RTP payload types were selected during the PS to CS SRVCC access transfer on the CS radio interface and on the dialog in the IMS towards the remote peer, the MSC server may send a SIP re-INVITE request or a SIP UPDATE request on the dialog in the IMS towards the remote peer. In the SIP re-INVITE request or the SIP UPDATE request, the MSC server shall include an SDP offer. In the SDP offer, the MSC server shall indicate a speech media component with RTP payload types supported by the MSC server, with the RTP payload type used at the CS radio interface as the most preferred RTP payload type.\nNOTE:\tIf the RTP payload type used at the CS radio interface is compatible with the RTP payload type of the speech media component used on the dialog in the IMS towards the remote peer, then the MGW controlled by the MSC server can influence the encoding of RTP packets by the remote peer using a media plane means, e.g. Codec Mode Request of AMR-WB or EVS sent within the media stream of the speech media component, as described in 3GPP TS 26.114 [68].\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "12.6.1\tSession transfer from MSC server enhanced for SRVCC using SIP interface",
                            "text_content": "In order to perform the PS to CS SRVCC access transfer, the MSC server enhanced for SRVCC using SIP interface shall initiate a SIP INVITE request and shall:\n1)\tset the Request URI to the STN-SR for the session with speech media component to be transferred;\nNOTE 1:\tIn deployments without IMS-level roaming interfaces, where the UE is a roaming UE, the MSC server can route the SIP INVITE request based on configuration or translate the STN-SR to a globally routable SIP URI using either an ENUM/DNS translation mechanism or any other available database, or route the SIP INVITE request by any other means.\n2)\tset the P-Asserted-Identity header field to the Correlation MSISDN;\n3)\tset the Contact header field to the contact address of the MSC server;\n4)\tinclude an SDP offer containing only a speech media component. If the MSC server performed procedures in subclause 12.6.0A and received a PS-to-CS-preparation-response, the MSC server should copy into the SDP offer one or more RTP payload types (each comprising of an RTP payload type number indicated in a sub-field of an <fmt> portion of an \"m=\" line and, if included, an \"a=rtpmap\" attribute and an \"a=frmtp\" attribute for the RTP payload type number) indicated in the <IMS-preferred-codec-list> element of the received PS-to-CS-preparation-response described in subclause 12.6.0A; and\n5)\tif SRVCC with priority handling (as described in 3GPP TS 23.216 [49]) is supported and a Allocation/Retention priority (ARP) indication is received (as described in 3GPP TS 29.280 [71]), then include an authorised Resource-Priority header field;\nNOTE 2:\tAn MSC server enhanced for SRVCC using a SIP interface will use local configuration to map the received ARP value to appropriate values for the authorised Resource-Priority header field.\n6)\tif the MSC server supports the MSC server assisted mid-call feature:\nA.\tinsert the Supported header field containing the option-tag \"norefersub\" specified in IETF RFC 4488 [20];\nB.\tinsert the Accept header field containing the MIME type as specified in subclause D.1.3;\nC.\tinclude in the Contact header field the g.3gpp.mid-call media feature tag as described in annex C; and\nD.\tinsert the Recv-Info header field containing the g.3gpp.mid-call package name;\n7)\tif the MSC server enhanced for SRVCC using SIP interface supports the PS to CS SRVCC for calls in alerting phase, then include:\na)\tan Accept header field containing the MIME type application/vnd.3gpp.state-and-event-info+xml as specified in subclause D.2.3;\nb)\ta Contact header field containing the g.3gpp.srvcc-alerting media feature tag as described in annex C;\nc)\ta Recv-Info header field containing the g.3gpp.state-and-event package name;\nd)\ta P-Early-Media header field containing the \"supported\" parameter;\ne)\tif the MSC server enhanced for SRVCC using SIP interface supports the PS to CS SRVCC for originating calls in pre-alerting phase, include the g.3gpp.ps2cs-srvcc-orig-pre-alerting media feature tag as described in annex C into the Contact header field;\nf)\tif the MSC server does not support the MSC server assisted mid-call feature, a Supported header field containing the option-tag \"norefersub\" specified in IETF RFC 4488 [20]; and\ng)\tif the MSC server enhanced for SRVCC using SIP interface supports the PS to CS SRVCC for terminating calls in pre-alerting phase, include the g.3gpp.ps2cs-srvcc-term-pre-alerting media feature tag as described in annex C into the Contact header field;\nNOTE 3:\tIETF RFC 3261 [19] recommends user agent client to include a Supported header field in any SIP INVITE request, listing option tags for extensions to SIP understood by the user agent client. In the step above, the MSC server is mandated to include at least \"norefersub\" option tag in the Supported header field.\nNOTE 4:\tIf the MSC server supports the MSC server assisted mid-call feature, a Supported header field containing the option-tag \"norefersub\" was already inserted in preceding steps.\n8)\tsignalling elements described in subclause 6A.7.1 and shall indicate the related local preconditions as met; and\n9)\tinclude the P-Access-Network-Info header field in the SIP INVITE request as specified in 3GPP TS 24.229 [11]. The P-Access-Network-Info header field shall include:\na)\tan access-type field set to \"3GPP-GERAN\", \"3GPP-UTRAN-FDD\", \"3GPP-UTRAN-TDD\", or an access-class field set to\"3GPP-GERAN\", \"3GPP-UTRAN\";\nb)\tif available, a \"cgi-3gpp\" or \"utran-sai-3gpp\" parameter;\nc)\tif available a \"local-time-zone\" parameter;\nd)\ta \"network-provided\" parameter; and\ne)\tif available, a \"daylight-saving-time\" parameter.\nUpon receiving a SIP 200 (OK) response as the first response to the INVITE due to STN-SR (with the exception of the SIP 100 (Trying) response) and if the MSC server does not apply the MSC server assisted mid-call feature procedures in subclause 12.4A, the MSC server shall enter the \"active\" (N10) state (defined in 3GPP TS 24.008 [8]), regard the access transfer of the session with active speech media component as completed, send an ACK request as specified in 3GPP TS 24.229 [2] and start interworking CC messages as specified in subclause 12.6.5.If the MSC server enhanced for SRVCC using SIP interface supports the MSC server assisted mid-call feature then it shall additionally apply the procedures defined in subclause 12.4A.\nIf the MSC server enhanced for SRVCC using SIP interface supports the PS to CS SRVCC for calls in alerting phase then in addition to the procedures in this subclause it shall additionally apply the procedures defined in subclause 12.6.3.\nWhen an MSC server enhanced for SRVCC using SIP interface and supporting vSRVCC receives an indication for a vSRVCC session transfer as described in 3GPP TS 23.216 [49], then the MSC server enhanced for SRVCC using SIP interface shall initiate a SIP OPTIONS request and shall:\n1)\tset the request URI to the STN-SR;\n2)\tset the P-Asserted-Identity header field to the Correlation MSISDN;\n3)\tset the Contact header field to the address of the MSC server; and\n4)\tset the Accept header field to \"application/sdp\".\nWhen an MSC server enhanced for SRVCC using SIP interface and supporting vSRVCC receives a SIP 200 (OK) response to the SIP OPTIONS request with an SDP body that contains \"m=\" lines for audio and video, the MSC server enhanced for SRVCC using SIP interface shall:\n1)\tinitiate a SIP INVITE request and shall:\na)\tset the request URI to the STN-SR for the session with speech and video media components to be transferred;\nb)\tset the P-Asserted-Identity header field to the Correlation MSISDN;\nc)\tset the Contact header field to the address of the MSC server;\nd)\tinclude an SDP offer containing only a speech media component and a video media component with default codecs for speech and video (as specified in 3GPP TS 26.111 [69]);\ne)\tif the MSC server enhanced for SRVCC using SIP interface supports the PS to CS SRVCC for calls in alerting phase, then include:\ni)\tan Accept header field containing the MIME type application/vnd.3gpp.state-and-event-info+xml as specified in subclause D.2.3;\nii)\ta Contact header field containing the g.3gpp.srvcc-alerting media feature tag as described in annex C; and\niii)\ta Recv-Info header field containing the g.3gpp.state-and-event package name;\nf)\tif vSRVCC with priority handling (as described in 3GPP TS 23.216 [49]) is supported and a Allocation/Retention priority (ARP) indication is received (as described in 3GPP TS 29.280 [70]), then include an authorised Resource-Priority header field; and\nNOTE:\tAn MSC server enhanced for SRVCC using a SIP interface will use local configuration to map the received ARP value to appropriate values for the authorised Resource-Priority header field.\n2)\tif the MSC server enhanced for SRVCC using SIP interface supports the PS to CS SRVCC for calls in alerting phase, then additionally apply the procedures defined in subclause 12.6.3.\nUpon receiving 200 (OK) response to the INVITE due to STN-SR the MSC server shall regard the access transfer of session with active speech and video media components as completed, send an ACK request as specified in 3GPP TS 24.229 [2], and start interworking CC messages as specified in subclause 12.6.5.When an MSC server enhanced for SRVCC using SIP interface and supporting vSRVCC receives a SIP 200 (OK) response to the SIP OPTIONS request with an SDP body that contains an \"m=\" line for audio but not video, the MSC server enhanced for SRVCC using SIP interface shall follow the procedures in subclause 12.6.1.1.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "12.6.2\tEmergency session transfer from MSC server enhanced for SRVCC using SIP interface",
                            "text_content": "When an MSC server enhanced for SRVCC using SIP interface receives an indication for a session transfer for an emergency session as described in 3GPP TS 23.216 [49], then the MSC server enhanced for SRVCC using SIP interface shall initiate a SIP INVITE request and shall:\n1)\tset the request URI to the E-STN-SR for the session with speech media component to be transferred;\n2)\tinclude the sip.instance media feature tag as specified in IETF RFC 5626 [22] with a value based on the IMEI as defined in 3GPP TS 23.003 [12] in the Contact header field;\n3)\tset the P-Asserted-Identity header field to the Correlation MSISDN if one is available;\n4)\tinclude an SDP offer with media which the MSC server wishes to use in the session;\n5)\tinclude the P-Access-Network-Info header field in the SIP INVITE request as specified in 3GPP TS 24.229 [11]. The P-Access-Network-Info header field shall include:\na)\tan access-type field set to \"3GPP-GERAN\", \"3GPP-UTRAN-FDD\", \"3GPP-UTRAN-TDD\", or an access-class field set to\"3GPP-GERAN\", \"3GPP-UTRAN\";\nb)\tif available, a \"cgi-3gpp\" or \"utran-sai-3gpp\" parameter;\nc)\tif available a \"local-time-zone\" parameter;\nd)\ta \"network-provided\" parameter; and\ne)\tif available, a \"daylight-saving-time\" parameter; and\n6)\tif the MSC server enhanced for SRVCC using SIP interface supports the PS to CS SRVCC for originating emergency sessions in alerting phase, then include:\na)\tan Accept header field containing the MIME type application/vnd.3gpp.state-and-event-info+xml as specified in subclause D.2.3;\nb)\tin the Contact header field the g.3gpp.srvcc-alerting media feature tag as described in annex C;\nc)\ta Recv-Info header field containing the g.3gpp.state-and-event package name;\nd)\ta P-Early-Media header field containing the \"supported\" parameter; and\ne)\tif the MSC server enhanced for SRVCC using SIP interface supports the PS to CS SRVCC for originating emergency sessions in pre-alerting phase, include the g.3gpp.ps2cs-srvcc-orig-pre-alerting media feature tag as described in annex C into the Contact header field.\nUpon receiving a SIP 200 (OK) response as the first response to the INVITE due to E-STN-SR (with the exception of the SIP 100 (Trying) response), the MSC server shall enter the \"active\" (N10) state (defined in 3GPP TS 24.008 [8]), regard the access transfer of the session with active speech media component as completed, send an ACK request as specified in 3GPP TS 24.229 [2] and start interworking CC messages as specified in subclause 12.6.5.\nIf the MSC server enhanced for SRVCC using SIP interface supports the PS to CS SRVCC for originating emergency sessions in alerting phase then in addition to the procedures in this subclause it shall additionally apply the procedures defined in subclause 12.6.3.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "12.6.3\tMSC server enhanced for SRVCC using SIP interface procedures for PS to CS access transfer for calls in alerting phase or pre-alerting phase",
                            "text_content": "Upon receiving a SIP 1xx response with P-Early-Media header field authorizing backward early media, unless the CS-MGW has already been through-connected, the MSC server instructs the CS-MGW to through-connect.\nUpon receiving a SIP INFO request inside the early dialog created with the SIP INVITE request due to STN-SR or E-STN-SR:\n1.\twith the Info-Package header field containing the g.3gpp.state-and-event; and\n2.\tcontaining an application/vnd.3gpp.state-and-event-info+xml XML body associated with the info package according to IETF RFC 6086 [54] and compliant to the XML schema specified in the subclause D.2 with the state-info XML element containing \"early\" and direction XML element containing \"initiator\";\nthe MSC server enhanced for SRVCC using SIP interface shall enter the \"call delivered\" (N4) state as specified in 3GPP TS 24.008 [8]. The MSC server enhanced for SRVCC using SIP interface shall associate this session with transaction identifier value and TI flag as described in 3GPP TS 24.008 [8], regard the access transfer of the session in the alerting phase as completed and start interworking CC messages as specified in subclause 12.6.5.\nIf the MSC server enhanced for SRVCC using SIP interface supports the PS to CS SRVCC for originating calls in pre-alerting phase then upon receiving a SIP INFO request inside the early dialog created with the SIP INVITE request due to STN-SR or E-STN-SR:\n1.\twith the Info-Package header field containing the g.3gpp.state-and-event; and\n2.\tcontaining an application/vnd.3gpp.state-and-event-info+xml XML body associated with the info package according to IETF RFC 6086 [54] and compliant to the XML schema specified in the clause D.2 with the state-info XML element containing \"pre-alerting\" and direction XML element containing \"initiator\";\nthe MSC server enhanced for SRVCC using SIP interface shall associate this session with transaction identifier value and TI flag as described in 3GPP TS 24.008 [8] and shall enter the state \"Mobile originating call proceeding\" (N3) as specified in 3GPP TS 24.008 [8], regard the access transfer of the session in the originating pre-alerting phase as completed and start interworking CC messages as specified in subclause 12.6.5.\nNOTE 1:\tThe MSC server enhanced for SRVCC using SIP interface can send CC PROGRESS message to the UE to prevent CS call release early.\nIf the MSC server enhanced for SRVCC using SIP interface supports the PS to CS SRVCC for terminating calls in pre-alerting phase then upon receiving a SIP INFO request inside the early dialog created with the SIP INVITE request due to STN-SR:\n1.\twith the Info-Package header field containing the g.3gpp.state-and-event; and\n2.\tcontaining an application/vnd.3gpp.state-and-event-info+xml XML body associated with the info package according to IETF RFC 6086 [54] and compliant to the XML schema specified in the clause D.2 with the state-info XML element containing \"pre-alerting\" and direction XML element containing \"receiver\";\nthe MSC server enhanced for SRVCC using SIP interface shall associate this session with transaction identifier value and TI flag as described in 3GPP TS 24.008 [8] and shall enter the state \"Call present\" (N6) as specified in 3GPP TS 24.008 [8].\nUpon receiving a SIP INFO request inside the early dialog created with the SIP INVITE request due to STN-SR:\n1.\twith the Info-Package header field containing the g.3gpp.state-and-event; and\n2.\tcontaining an application/vnd.3gpp.state-and-event-info+xml XML body associated with the info package according to IETF RFC 6086 [54] and compliant to the XML schema specified in the subclause D.2 with the state-info XML element containing \"early\" and direction set to \"receiver\";\nand when a related CC CONNECT has not been received, the MSC server enhanced for SRVCC using SIP interface shall enter the \"call received\" (N7) state as specified in 3GPP TS 24.008 [8]. The MSC server enhanced for SRVCC using SIP interface will not generate an in-band ring tone towards the calling party. The MSC server enhanced for SRVCC using SIP interface shall associate this session with transaction identifier value and TI flag as described in 3GPP TS 24.008 [8]. If the CS-MGW has already been through-connected, the MSC server instructs the CS-MGW not to through-connect. The MSC server shall regard the access transfer of the session in the alerting phase as completed and start interworking CC messages as specified in subclause 12.6.5.\nUpon receiving a CC ALERT message when in \"Mobile terminating call confirmed\" (N9) state as specified in 3GPP TS 24.008 [8], the MSC server enhanced for SRVCC using SIP interface shall send a SIP INFO request inside the dialog created with the SIP INVITE request due to STN-SR for access transfer containing:\n1.\tan Info-Package header field as specified in IETF RFC 6086 [54] with 3gpp.state-and-event info package name; and\n2.\tinclude application/vnd.3gpp.state-and-event-info+xml XML body associated with the info package according to IETF RFC 6086 [54] and compliant to the XML schema specified in the subclause D.2 with the event XML element containing \"alerting-started\" to indicate that the called party is being alerted.\nUpon receiving a CC CONNECT message when in \"call received\" (N7) state as specified in 3GPP TS 24.008 [8], the MSC server enhanced for SRVCC using SIP interface shall send a SIP INFO request inside the dialog created with the SIP INVITE request due to STN-SR for access transfer containing:\n1.\tan Info-Package header field as specified in IETF RFC 6086 [54] with 3gpp.state-and-event info package name; and\n2.\tinclude application/vnd.3gpp.state-and-event-info+xml XML body associated with the info package according to IETF RFC 6086 [54] and compliant to the XML schema specified in the subclause D.2 with the event XML element containing \"call-accepted\" to indicate that the called party has answered the call.\nNOTE 2:\tAt this point the MSC server enters the \"active\" (N10) state in accordance with 3GPP TS 24.008 [8] subclause 5.2.2.6 including instructing the CS-GW to through-connect in both directions.\nUpon receiving a CC CONNECT message after having sent the SIP INVITE request due to STN-SR when not yet in \"call received\" (N7) state as specified in 3GPP TS 24.008 [8], the MSC server enhanced for SRVCC using SIP interface shall store this event and proceed with the procedures in 3GPP TS 24.008 [8] subclause 5.2.2.6.\nNOTE 3:\tAt this point the MSC server enters the \"active\" (N10) state in accordance with 3GPP TS 24.008 [8] subclause 5.2.2.6 including instructing the CS-GW to through-connect in both directions.\nOnce a related SIP INFO request inside the associated early dialog:\n1.\twith the Info-Package header field containing the g.3gpp.state-and-event; and\n2.\tcontaining an application/vnd.3gpp.state-and-event-info+xml XML body associated with the info package according to IETF RFC 6086 [54] and compliant to the XML schema specified in the subclause D.2 with the state-info XML element containing \"early\" and direction set to \"receiver\";\nis received, then\n1.\tvoid; and\n2.\tthe MSC server shall send a SIP INFO request inside the dialog created with the SIP INVITE request due to STN-SR for access transfer containing:\na)\tan Info-Package header field as specified in IETF RFC 6086 [54] with 3gpp.state-and-event info package name; and\nb)\tinclude application/vnd.3gpp.state-and-event-info+xml XML body associated with the info package according to IETF RFC 6086 [54] and compliant to the XML schema specified in the subclause D.2 with the event XML element containing \"call-accepted\" to indicate that the called party has answered the call.\nNOTE 4:\tProcedures in the MSC server enhanced for SRVCC using SIP interface on how to store and supervise the reception of the INFO request are left implementation specific.\nUpon receiving a SIP REFER request:\n1.\tsent inside the dialog created by the SIP INVITE request due to STN-SR where a received Feature-Caps header field contains the g.3gpp.srvcc-alerting feature-capability indicator as described in annex C;\n2.\twith the Refer-Sub header field containing \"false\" value;\n3.\twith the Supported header field containing \"norefersub\" value;\n4.\twith the Refer-To header field containing a SIP URI with the Target-Dialog URI header field; and\n5.\tcontaining application/vnd.3gpp.state-and-event-info+xml MIME body with the state-info XML element containing \"early\" or \"pre-alerting\";\nthe MSC server shall:\n1.\thandle the SIP REFER request as specified in 3GPP TS 24.229 [2], IETF RFC 3515 [13] as updated by IETF RFC 6665 [81], and IETF RFC 4488 [20] without establishing an implicit subscription; and\nNOTE 5:\tIn accordance with IETF RFC 4488 [20], the MSC server inserts the Refer-Sub header field containing the value \"false\" in the SIP 2xx response to the SIP REFER request to indicate that it has not created an implicit subscription.\n2.\tsend a SIP INVITE request transferring the additional transferred session according to 3GPP TS 24.229 [2] and IETF RFC 3515 [13]. The MSC server shall populate the SIP INVITE request as follows:\nA.\theader fields which were included in the URI in the Refer-To header field of the received SIP REFER request as specified in IETF RFC 3261 [19] except the header field with hname \"body\";\nB.\tinclude the g.3gpp.srvcc-alerting media feature tag as described in annex C in the Contact header field according to IETF RFC 3840 [53];\nC.\tif the MSC server enhanced for SRVCC using SIP interface supports the PS to CS SRVCC for originating calls in pre-alerting phase, include the g.3gpp. ps2cs-srvcc-orig-pre-alerting media feature tag as described in annex C in the Contact header field according to IETF RFC 3840 [53]; and\nD.\tthe SDP offer with:\na.\tthe same amount of the media descriptions as in the header field with hname \"body\" in the URI in the Refer-To header field of the received SIP REFER request;\nb.\teach \"m=\" line having the same media type as the corresponding \"m=\" line in the header field with hname \"body\" in the URI in the Refer-To header field of the received SIP REFER request;\nc.\tport set to zero value in each \"m=\" line whose corresponding \"m=\" line in the header field with hname \"body\" in the URI in the Refer-To header field of the received SIP REFER request has port with zero value; and\nd.\tpayload type numbers and their mapping to codecs and media parameters supported by MSC server, not conflicting with those in the \"body\" URI header field in the URI in the Refer-To header field of the received SIP REFER request; and\nNOTE 6:\tPort can be set to zero or non zero value for the offered \"m=\" line whose corresponding \"m=\" line in the header field with hname \"body\" in the URI in the Refer-To header field of the received SIP REFER request has port with nonzero value.\nE.\tif the MSC server supports CS to PS SRVCC and the SIP REFER request contains the application/vnd.3gpp.srvcc-ext+xml MIME body:\na)\tthe topmost Route header field with the ATCF management URI received in the application/vnd.3gpp.srvcc-ext+xml MIME body of the SIP REFER request and \"lr\" URI parameter;\nb)\tthe Accept header field containing application/vnd.3gpp.access-transfer-events+xml MIME type with the \"et\" parameter indicating ability to receive \"event-type\" attribute with the value \"2\";\nc)\tthe Recv-Info header field containing the g.3gpp.access-transfer-events info package name;\nd)\tthe application/vnd.3gpp.srvcc-ext+xml MIME body with the <srvcc-ext> root element containing the <Setup-info> element containing the CS to PS SRVCC information received in the application/vnd.3gpp.srvcc-ext+xml MIME body of the SIP REFER request and indicating the \"initiator\" role of the MSC server in the session set up; and\ne)\tthe g.3gpp.ti media feature tag with value as described in subclause C.12 in the Contact header field according to IETF RFC 3840 [53];\nF.\tif the MSC server supports procedures in subclause 22.2:\na)\tan Accept header field according to IETF RFC 3261 [19] containing the MIME type application/vnd.3gpp.state-and-event-info+xml as specified in subclause D.2.3; and\nb)\ta Recv-Info header field according to IETF RFC 6086 [54] containing the g.3gpp.state-and-event package name;\nG.\tsignalling elements described in subclause 6A.7.1 and shall indicate the related local preconditions as met;\nH.\tinclude the P-Access-Network-Info header field in the SIP INVITE request as specified in 3GPP TS 24.229 [11]. The P-Access-Network-Info header field shall include:\na)\tan access-type field set to \"3GPP-GERAN\", \"3GPP-UTRAN-FDD\", \"3GPP-UTRAN-TDD\", or an access-class field set to\"3GPP-GERAN\", \"3GPP-UTRAN\";\nb)\tif available, a \"cgi-3gpp\" or \"utran-sai-3gpp\" parameter;\nc)\tif available a \"local-time-zone\" parameter;\nd)\ta \"network-provided\" parameter; and\ne)\tif available, a \"daylight-saving-time\" parameter; and\nI.\tif an authorised Resource-Priority header field was included in the SIP INVITE request due to STN-SR, then include an authorised Resource-Priority header field with the same values as used in the SIP INVITE request due to STN-SR; and\nJ.\tif a P-Asserted-Identity header field is not included in the headers portion of the URI in the Refer-To header field of the received SIP REFER request as specified in IETF RFC 3261 [19], include a P-Asserted-Identity header field with the value of the C-MSISDN contained in the SIP INVITE requests due to STN-SR which created the dialog in which the REFER request is received;\n3.\tif application/vnd.3gpp.state-and-event-info+xml MIME body contains the state-info XML element containing \"early\" and the direction XML element containing \"initiator\", then enter the \"call delivered\" (N4) state as specified in 3GPP TS 24.008 [8] for the CS call with transaction identifier 1 and TI flag value as in mobile terminated call;\n4.\tif application/vnd.3gpp.state-and-event-info+xml MIME body contains the state-info XML element containing \"early\" and the direction XML element containing \"receiver\", then enter the \"call received\" (N7) state as specified in 3GPP TS 24.008 [8] for the CS call with transaction identifier 1 and TI flag value as in mobile terminated call. The MSC server will not generate an in-band ring tone towards the calling party; and\n5.\tif application/vnd.3gpp.state-and-event-info+xml MIME body contains the state-info XML element containing \"pre-alerting\" and the direction XML element containing \"initiator\", then enter the \"Mobile originating call proceeding\" (N3) state as specified in 3GPP TS 24.008 [8] for the CS call with transaction identifier 1 and TI flag value as in mobile terminated call.\nUpon receiving the SIP 183 (Session Progress) response to the SIP INVITE request transferring the additional transferred session, the MSC server shall regard the access transfer of the additional session as completed, send a SIP PRACK request as specified in 3GPP TS 24.229 [2] and start interworking CC messages as specified in subclause 12.6.5.\nUpon receiving a CC CONNECT message with transaction identifier 1 and TI flag value as in mobile terminated call when in \"call received\" (N7) state as specified in 3GPP TS 24.008 [8], the MSC server shall send a SIP INFO request inside the dialog created by the SIP INVITE request transferring the additional transferred session containing:\nNOTE 7:\tIf the SIP INVITE request transferring the additional transferred session has already been sent and an early dialog has not been established by a SIP response to the SIP INVITE request transferring the additional transferred session yet, the MSC server delays sending of the SIP INFO request till after an early dialog is established by a SIP response to the SIP INVITE request transferring the additional transferred session.\n1.\tan Info-Package header field as specified in IETF RFC 6086 [54] with 3gpp.state-and-event info package name; and\n2.\tinclude application/vnd.3gpp.state-and-event-info+xml XML body associated with the info package according to IETF RFC 6086 [54] and compliant to the XML schema specified in the clause D.2 with the event XML element containing \"call-accepted\" to indicate that the called party has answered the call.\nNOTE 8:\tAt this point the  server enters the \"active\" (N10) state in accordance with 3GPP TS 24.008 [8] subclause 5.2.2.6 including instructing the CS-GW to through-connect in both directions.\nNOTE 9:\tPrior to sending a CC CONNECT, the MSC can send a CC PROGRESS message to attach the user connection (as specified in 3GPP TS 24.008 [8]) to allow the network to provide in-band tones and announcements to the UE, overriding any internally generated alerting indication in the UE.\nNOTE 10:\tThe procedure in subclause 5.2.1.6 of 3GPP TS 24.008 [8] results in that the MSC server will instruct the CS-GW to through-connect in both direction and then, after an acknowledgment from the SC UE, the MSC server enters the \"active\" (N10) state.\nNOTE 11:\tWhen the access transfer is completed the  server can verify the call state of its peer entity using the STATUS ENQUIRY procedure in accordance with procedures in 3GPP TS 24.008 [8] to ensure that SIP requests or SIP responses that have been sent between the SC UE and the  AS or the EATF during the handover from the PS domain to the CS domain did not result in incompatible call states. If the call states are incompatible the transferred session are released.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "12.6.4\tAbnormal cases",
                            "text_content": "When the MSC server enhanced for SRVCC using SIP interface receives a SIP reject response to the SIP INVITE request due to STN-SR, the MSC server shall regard the SIP response codes listed in subclause 12.4.3.1 as permanent errors.\nIf the MSC server enhanced for SRVCC using SIP interface receives a SRVCC PS to CS Cancel Notification from the MME/SGSN or if the access transfer procedure fails for any other reason in the MSC server enhanced for SRVCC using SIP interface, the MSC server shall perform the actions in the subclause 12.4.3.2.\nIf after having sent a CC CONNECT message, the timer that supervises the CC CONNECT message expires before the MSC server has received a CC CONNECT ACK message, the MSC server shall perform the actions specified in subclause 12.4.3.3.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "12.6.5\tInterworking of CC messages and SIP messages when PS to CS SRVCC access transfer is completed",
                            "text_content": "When the PS to CS SRVCC access transfer procedure is completed the MSC server shall interwork between the 3GPP profile of SIP as described in 3GPP TS 24.229 [2] and NAS signalling as described in 3GPP TS 24.008 [8] required for the support of IM CN subsystem based multimedia telephony and supplementary services as specified in 3GPP TS 29.292 [18] with the clarifications and exceptions described in this subclause.\nWhen the MSC server is in the \"mobile originating call proceeding\" (N3) state, the MSC server shall perform interworking as specified in 3GPP TS 29.292 [18] subclauses 5.3.4, 5.3.4a, 5.3.4b, 5.3.6, 5.3.7, 5.3.8 and 5.3.9.When the MSC server is in the \"call delivered\" (N4) state, the MSC server shall perform interworking as specified in 3GPP TS 29.292 [18] subclauses 5.3.4a, 5.3.4b, 5.3.6, 5.3.7, 5.3.8 and 5.3.9.\nWhen the MSC server is in the \"call received\" (N7) state receives a CC CONNECT message from the SC UE the MSC server shall send a SIP INFO request as specified in subclause 12.6.3.\nWhen the MSC server is in the \"active\" (N10) state and in any of the hold and multiparty auxiliary states for a non-emergency session, the MSC server shall perform interworking as specified in 3GPP TS 29.292 [18] subclauses 5.5, 5.6.3 and 5.6.8. When the MSC server is in the \"active\" (N10) state for an emergency session, the MSC server shall perform interworking as specified in 3GPP TS 29.292 [18] subclauses 5.5.\nThe MSC server shall interact with CS-GW as specified in 3GPP TS 29.292 [18] subclauses 7.1, 7.3, 7.4, 7.5 and 7.6.\nIf the MSC server in the \"call received\" (N7) state:\n1)\treceives a call clearing message from the SC UE, the MSC server shall send a SIP BYE request or a SIP CANCEL request as specified in 3GPP TS 29.292 [18] subclause 5.3.9; or\n2)\tdetermines due to internal procedures that the call shall be released, the MSC Server shall send a SIP BYE request or a SIP CANCEL request as specified in 3GPP TS 29.292 [18] subclause 5.3.11.\nIf the MSC server enhanced for SRVCC using SIP interface supports the MSC server assisted mid-call feature and subscribes to the conference event package as described in 3GPP TS 24.147 [95] subclause 5.3.1.2, then after the PS to CS SRVCC access transfer procedure is completed, the MSC server shall apply the interworking procedures as specified in 3GPP TS 29.292 [18] subclauses 5.6.8.2.7.\n",
                            "figures_meta_data": [],
                            "tables": []
                        }
                    ]
                },
                {
                    "title": "12.7\tAccess Transfer Control Function (ATCF)",
                    "description": "",
                    "summary": "",
                    "text_content": "",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": [
                        {
                            "title": "12.7.1\tDistinction of requests",
                            "text_content": "The ATCF needs to distinguish the following initial SIP requests:\n1)\tSIP INVITE requests containing the STN-SR allocated to the ATCF in the Request-URI and:\nA)\tnot containing any Route header field; or\nB)\tcontaining a URI in the topmost Route header field other than the ATCF URI for originating requests and other than the ATCF URI for terminating requests.\nIn the procedures below, such requests are known as \"SIP INVITE requests due to STN-SR\".\n2)\tinitial SIP INVITE requests containing the STI-rSR allocated to the ATCF in the Request-URI and with the ATCF URI for originating requests in the topmost Route header field. In the procedures below, such requests are known as \"SIP INVITE requests due to STI-rSR\".\n3)\tSIP INVITE requests containing the ATCF management URI in the Request-URI and:\n-\tnot containing Route header field; or\n-\tcontaining a URI in the topmost Route header field other than the ATCF URI for originating requests and other than the ATCF URI for terminating requests.\nIn the procedures below, such requests are known as \"SIP INVITE requests due to media transfer from MSC Server to ATGW\".\n4)\tSIP INVITE requests containing the ATCF URI for anchoring additionally transferred call in ATCF allocated to the ATCF in the Request-URI.\nIn the procedures below, such requests are known as \"SIP INVITE requests for anchoring call additionally transferred during PS to CS SRVCC in ATCF\".\n5)\tSIP OPTIONS requests:\n-\tcontaining the STN-SR allocated to the ATCF in the Request-URI; and\n-\tcontaining an application/vnd.3gpp.PS-to-CS-preparation+xml body specified in subclause D.6 carrying a PS-to-CS-preparation-request.\nIn the procedures below, such requests are known as \"SIP OPTIONS requests carrying the PS-to-CS-preparation-request\".\nThe ATCF needs to distinguish the following SIP in-dialog requests:\n1)\tSIP INFO request:\nA)\twith Info-Package header field with value g.3gpp.access-transfer-events; and\nB)\twith application/vnd.3gpp.access-transfer-events+xml MIME body associated with the info package according to IETF RFC 6086 [54] and indicating the session transfer notification request.\nIn the procedures below, such requests are known as \"SIP INFO requests carrying the session transfer notification request\".\n2)\tSIP INFO request:\nA)\twith Info-Package header field with value g.3gpp.access-transfer-events; and\nB)\twith application/vnd.3gpp.access-transfer-events+xml MIME body associated with the info package according to IETF RFC 6086 [54] and indicating the session transfer preparation.\nIn the procedures below, such requests are known as \"SIP INFO requests carrying the session transfer preparation\".\n3)\tSIP INFO request:\nA)\twith Info-Package header field with value g.3gpp.access-transfer-events; and\nB)\twith application/vnd.3gpp.access-transfer-events+xml MIME body associated with the info package according to IETF RFC 6086 [54] and indicating the session transfer cancellation.\nIn the procedures below, such requests are known as \"SIP INFO requests carrying the session transfer cancellation\".\n4)\tSIP INFO request:\nA)\twith Info-Package header field with value 3gpp.state-and-event; and\nB)\twith application/vnd.3gpp.state-and-event-info+xml MIME body associated with the info package according to IETF RFC 6086 [54] and with the event XML element containing \"call-accepted\" as specified in annex C.\nIn the procedures below, such requests are known as \"SIP INFO requests carrying a \"call-accepted\" indication\"\n5)\tSIP REFER request:\nA)\twith the Refer-Sub header field containing \"false\" value;\nB)\twith the Supported header field containing \"norefersub\" value;\nC)\twith the Refer-To header field containing a SIP URI with the Target-Dialog URI header field;\nD)\tsent inside a SIP dialog:\na.\tcreated by the SIP INVITE request due to STN-SR;\nb.\twhere one of the following is true:\n-\tthe g.3gpp.mid-call feature-capability indicator as specified in annex C was included in the Feature-Caps header field of the SIP 2xx response to the SIP INVITE request due to STN-SR and the SIP REFER request contains a MIME body of MIME type specified in the subclause D.1.3; or\n-\tthe g.3gpp.srvcc-alerting feature-capability indicator as specified in annex C was included in the Feature-Caps header field of the SIP 2xx response to the SIP INVITE request due to STN-SR and the SIP REFER request contains application/vnd.3gpp.state-and-event-info+xml MIME body with the state-info XML element containing \"early\" or \"pre-alerting\"; and\nE)\tnot containing a MIME body of MIME type specified in the subclause D.4.4\nIn the procedures below, such requests are known as \"SIP REFER requests for transferring additional call\".\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "12.7.2\tATCF procedures for PS to CS access transfer, PS to CS SRVCC",
                            "text_content": "Upon receiving the SIP INVITE request due to STN-SR or the SIP OPTIONS request carrying the PS-to-CS-preparation-request, the ATCF shall:\n1)\tdetermine the transferable session set which are all the sessions with a speech media component:\na)\tassociated with C-MSISDN equal:\ni)\tto the URI in the P-Asserted-Identity header field of the SIP INVITE request due to STN-SR; or\nii)\tto the URI in the P-Asserted-Identity header field of the SIP OPTIONS request due to STN-SR; and\nb)\twhere during establishment of the session a Feature-Caps header field containing the g.3gpp.srvcc feature-capability indicator was received in the initial SIP request or SIP response; and\nNOTE:\tThese sessions potentially include recently released sessions for which the ATCF temporarily retains session state according to subclause 12.7.2.3.\n2)\tdetermine the session being transferred which is a session:\na)\tin the transferable session set;\nb)\tfor which the SIP 2xx response for the initial SIP INVITE request to establish this session has been sent or received; and\nc)\twith active speech media component which has been made active most recently.\nIf the transferable session set determined as specified in subclause 12.7.2.1 is not empty and each session in the transferable session set:\n1)\tis in an early dialog state; or\n2)\tis in a confirmed dialog state and contains an inactive speech media component;\nthe ATCF:\n1)\tif:\na)\tone or more confirmed dialogs supporting a session with an inactive speech media component exists in the transferable session set;\nb)\tthe Feature-Caps header field provided by the SCC AS towards the SC UE includes the g.3gpp.mid-call feature-capability indicator as described in annex C; and\nc)\tthe Contact header field provided by the SC UE to the SCC AS includes the g.3gpp.mid-call media feature tag (as described in annex C);\nshall select the confirmed dialog supporting a session with an inactive speech media component that became inactive most recently as the session being transferred; and\n2)\tif no confirmed dialog supporting a session with an inactive speech media component exists in the transferable session set but there are one or more dialogs in the transferable session set supporting sessions where the SC UE has completed a reliable offer / answer procedure and with an active speech media component such that:\na)\ta SIP 180 (Ringing) response to a SIP INVITE request was received in at least one of those early dialogs, all such SIP 180 (Ringing) responses are responses to the same SIP INVITE request and at least one of such SIP 180 (Ringing) responses was received in an early dialog supporting session with an active speech media component;\nb)\tthe Contact header field provided by the SC UE includes the g.3gpp.srvcc-alerting media feature tag as described in annex C; and\nc)\tthe Feature-Caps header field provided by the SCC AS towards the SC UE includes the g.3gpp.srvcc-alerting feature-capability indicator as described in annex C;\nshall select any of the early dialogs where a SIP 180 (Ringing) responses was received as the session being transferred; and\n3)\tif no confirmed dialog supporting a session with an inactive speech media component exists in the transferable session set but there are one or more dialogs in the transferable session set supporting one session where the SC UE has completed a reliable offer / answer procedure and with an active speech media component such that:\na)\ta SIP 180 (Ringing) response to the SIP INVITE request has not been received yet in any of the existing dialogs;\nb)\tall dialogs are early dialogs created by the same SIP INVITE request;\nc)\tthe Contact header field provided by the SC UE includes the g.3gpp.ps2cs-srvcc-orig-pre-alerting media feature tag as described in annex C; and\nd)\tthe Feature-Caps header field provided by the SCC AS towards the SC UE includes the g.3gpp.ps2cs-srvcc-orig-pre-alerting feature-capability indicator as described in annex C;\nshall select any of the early dialogs as the session being transferred.\nUpon receiving a SIP INVITE request due to STN-SR, if a session is in the transferable session set as determined in subclause 12.7.2.1 and the following conditions are true:\n-\tthe session is a confirmed dialog with an active speech media component which has been made active most recently;\n-\tthe ATGW anchors the media of the session being transferred; and\n-\tif the speech media component of the SDP offer in the SIP INVITE request is the same as the speech media component of the SDP negotiated by the ATCF in the session being transferred or if the ATGW can provide media transcoding between the speech media component in the received SDP offer and the speech media component in the session being transferred;\nthe ATCF shall act as B2BUA as described in subclause 5.6 and shall:\nNOTE 1:\tAt this point, ATCF interacts with ATGW to provide information needed in the procedures below and to request ATGW to start forwarding the audio media from the remote UE to the MSC server. The details of interaction between ATCF and ATGW are out of scope of this document.\n0)\tif ATCF supports CS to PS SRVCC:\na)\tassociate the session being established with the latest SRVCC-related information (see subclause 6A.3.1) containing C-MSISDN equal to the URI in the P-Asserted-Identity header field of the SIP INVITE requests due to STN-SR; and\nb)\tstore the value of the g.3gpp.ti media feature tag as described in annex C of the Contact header field of the SIP INVITE request due to STN-SR;\n1)\tsend a SIP 200 (OK) response to the received SIP INVITE request due to STN-SR that contains:\na)\tthe Contact header field of the remote UE saved in subclause 7.5.2.2 or subclause 8.4.2.2;\nb)\tthe Record-Route header field that contains only the SIP URI pointing to the ATCF;\nc)\tthe SDP answer that includes the ATGW ports and the IP addresses as provided by the ATGW, and the directionality attribute shall be the same as the SDP negotiated by ATCF towards the UE in the session being transferred;\nd)\tinclude the P-Charging-Vector header field as specified in 3GPP TS 24.229 [2] populated as follows:\ni)\tthe \"icid-value\" header field parameter containing the same value as received in the SIP INVITE request due to STN-SR;\nii)\tthe \"related-icid\" header field parameter containing the ICID value of the source access leg in the P-Charging-Vector header field and saved in subclause 7.5.2.2 or subclause 8.4.2.2;\niii)\tif an \"icid-generated-at\" header field was generated for the source access leg, include the \"related-icid-generated-at\" header field parameter containing the host name or IP address included in the \"icid-generated-at\" header field parameter of the source access leg and saved in subclause 7.5.2.2 or subclause 8.4.2.2;\niv)\tthe \"orig-ioi\" header field parameter with the value received in the SIP INVITE request due to STN-SR; and\nv)\ta \"term-ioi\" header field parameter with the value received:\n-\tif the source access leg is terminated by the SC UE, in the \"orig-ioi\" header field parameter in the P-Charging-Vector header field received in the initial SIP INVITE request from the remote UE and saved in subclause 8.4.2.2; and\n-\tif the source access leg is an originating call initiated by the SC UE, in the \"term-ioi\" received in the P-Charging-Vector header field in responses from the remote UE to the initial SIP INVITE request and saved in subclause 7.5.2.2;\nNOTE 2:\tThe \"transit-ioi\" header field parameter can not be copied from the source access leg since the SIP INVITE due to ATU-STI can traverse different transit networks compared to the transit networks traversed when the call was initiated.\ne)\tif ATCF supports CS to PS SRVCC:\nA)\tthe Recv-Info header field containing the g.3gpp.access-transfer-events info package name;\nB)\tthe Accept header fields received in the home leg of the session being transferred by PS to CS SRVCC except the Accept header field containing the application/vnd.3gpp.access-transfer-events+xml MIME type; and\nC)\tthe Accept header field containing the application/vnd.3gpp.access-transfer-events+xml MIME type with the \"et\" parameter indicating ability to receive \"event-type\" with value \"1\", value \"3\", value \"4\" and values, if any, indicated in the \"et\" parameter of the application/vnd.3gpp.access-transfer-events+xml MIME type of the Accept header field received in the home leg of the session being transferred by PS to CS SRVCC; and\nf)\tthe Feature-Caps header field(s) according to IETF RFC 6809 [60] received in the home leg of the session being transferred and saved in subclause 7.5.2.2 or subclause 8.4.2.2;\ng)\tthe P-Asserted-Identity header field with the identity of the remote user saved in subclause 7.5.2.2 or subclause 8.4.2.2; and\nh)\tif available, the Privacy header field saved in subclause 7.5.2.2 or subclause 8.4.2.2; and\nNOTE 3:\tAt this point the ATCF requests the ATGW to start forwarding the audio media from the MSC server to the remote UE. The details of interaction between ATCF and ATGW are out of scope of this document.\n2)\tinitiate a new dialog toward the SCC AS (i.e. a target access leg) by sending an initial SIP INVITE request due to ATU-STI for PS to CS SRVCC toward the SCC AS populated with:\na)\tthe SDP offer containing the currently used media with ATGW ports and IP addresses towards the remote UE as provided by the ATGW. The ATCF shall include in the SDP offer only the media of the media types offered in the received SIP INVITE request due to STN-SR;\nb)\tthe Request-URI containing the ATU-STI for PS to CS SRVCC previously received from the SCC AS and associated with the session being transferred; and\nc)\tthe Target-Dialog header field with the dialog identifier of the session being transferred;\nd)\tthe Require header field containing the option tag \"tdialog\";\ne)\tthe Contact header field that contains the contact information received in the SIP INVITE request due to STN-SR;\nf)\tthe Record-Route header field that includes only the ATCF SIP URI, where the ATCF wants to receive subsequent the in-dialog requests from the SCC AS;\nNOTE 4:\tThe ATCF SIP URI included in the Record-Route header field is used by the SCC AS to build a Route header field that the SCC AS will use when sending the in-dialog request toward the ATCF.\ng)\tthe P-Asserted-Identity header field that is the same as the P-Asserted-Identity header field received in the SIP INVITE request due to STN-SR;\nh)\tall header fields which are included in the SIP INVITE request due to STN-SR and which contain option tag(s);\ni)\tif the Recv-Info header field is included in the SIP INVITE request due to STN-SR, the Recv-Info header field that is the same as the Recv-Info header field received in the SIP INVITE request due to STN-SR except, if the ATCF supports the CS to PS SRVCC, the Recv-Info header field containing the g.3gpp.access-transfer-events info package name;\nj)\tif the Accept header field is included in the SIP INVITE request due to STN-SR, the Accept header field that is the same as the Accept header field received in the SIP INVITE request due to STN-SR except, if the ATCF supports the CS to PS SRVCC, the Accept header field containing the application/vnd.3gpp.access-transfer-events+xml MIME type;\nk)\tif the ATCF supports the CS to PS SRVCC, if an Accept header field of the SIP INVITE request due to STN-SR contains the application/vnd.3gpp.access-transfer-events+xml with the \"et\" parameter indicating ability to receive \"event-type\" attribute with values additional to the value \"2\":\na)\tthe Accept header field containing the application/vnd.3gpp.access-transfer-events+xml MIME type with the \"et\" parameter indicating ability to receive \"event-type\" attribute with the additional values; and\nb)\tthe Recv-Info header field containing the g.3gpp.access-transfer-events info package name.\nl)\tif the SIP INVITE request due to STN-SR contains a P-Access-Network-Info header field, a P-Access-Network-Info header field copied from the SIP INVITE request due to STN-SR.\nIf a session is in the transferable session set as determined in subclause 12.7.2.1, ATCF does not support CS to PS SRVCC and one of the following conditions are true:\n-\tthe ATGW does not anchor the media of the session being transferred; or\n-\tif the speech media component of the SDP offer in the SIP INVITE request is not the same as the speech media component of the SDP negotiated by the ATCF in the session being transferred and the ATGW cannot provide media transcoding between the speech media component in the received SDP offer and the speech media component in the session being transferred;\nthe ATCF shall act as proxy and shall:\n1)\treplace the Request-URI in the received SIP INVITE request due to STN-SR with the ATU-STI for PS to CS SRVCC associated with the session being transferred;\nbefore forwarding the request.\nIf a session being transferred was determined in subclause 12.7.2.1, ATCF supports CS to PS SRVCC and one of the following conditions are true:\n-\tthe ATGW does not anchor the media of the session being transferred; or\n-\tif the speech media component of the SDP offer in the SIP INVITE request is not the same as the speech media component of the SDP negotiated by the ATCF in the session being transferred and the ATGW cannot provide media transcoding between the speech media component in the received SDP offer and the speech media component in the session being transferred;\nthe ATCF shall act as B2BUA and shall:\n1)\tassociate the session being established with the latest SRVCC-related information (see subclause 6A.3.1) containing C-MSISDN equal to the URI in the P-Asserted-Identity header field of the SIP INVITE requests due to STN-SR;\n2)\tstore the value of the g.3gpp.ti media feature tag as described in annex C of the Contact header field of the SIP INVITE request due to STN-SR; and\n3)\tsend a SIP INVITE request due to ATU-STI for PS to CS SRVCC according to 3GPP TS 24.229 [2]. The ATCF shall populate the SIP INVITE request due to ATU-STI for PS to CS SRVCC with:\nA)\tthe Request-URI set to the ATU-STI for PS to CS SRVCC associated with the session being transferred;\nB)\tall Route header fields of the SIP INVITE request due to STN-SR except the topmost Route header field;\nC)\tthe Record-Route header field containing the SIP URI of the ATCF;\nD)\tthe Recv-Info header fields of the SIP INVITE request due to STN-SR except the Recv-Info header field containing the g.3gpp.access-transfer-events info package name;\nE)\tthe Accept header fields of the SIP INVITE request due to STN-SR except the Accept header field containing the application/vnd.3gpp.access-transfer-events+xml MIME type;\nF)\tif an Accept header field of the SIP INVITE request due to STN-SR contains the application/vnd.3gpp.access-transfer-events+xml with the \"et\" parameter indicating ability to receive \"event-type\" attribute with values additional to the value \"2\":\na)\tthe Accept header field containing the application/vnd.3gpp.access-transfer-events+xml MIME type with the \"et\" parameter indicating ability to receive \"event-type\" attribute with the additional values; and\nb)\tthe Recv-Info header field containing the g.3gpp.access-transfer-events info package name;\nG)\tif the ATCF decided to anchor the media according to operator policy as specified in 3GPP TS 23.237 [9]:\na)\tall MIME bodies of the SIP INVITE request due to STN-SR apart from application/sdp MIME body; and\nb)\tapplication/sdp MIME body with updated SDP offer using media parameters provided by the ATGW;\nNOTE 5:\tATCF interacts with ATGW to provide the needed media related information. The details of interaction between ATCF and ATGW are out of scope of this document.\nH)\tif the ATCF decided not to anchor the media according to operator policy as specified in 3GPP TS 23.237 [9]:\na)\tall MIME bodies of the SIP INVITE request due to STN-SR;\nI)\tif the ATCF is located in the visited network, and local policy requires the application of IBCF capabilities in the visited network towards the home network, select an IBCF in the visited network and add the URI of the selected IBCF to the topmost Route header field.\nJ)\tif the SIP INVITE request due to STN-SR contains a P-Access-Network-Info header field, a P-Access-Network-Info header field copied from the SIP INVITE request due to STN-SR.\nIf the ATCF supports CS to PS SRVCC, when the ATCF receives any SIP 1xx response or SIP 2xx response to the SIP INVITE request due to ATU-STI for PS to CS SRVCC, the ATCF shall:\n1)\tsave the Contact header field included in the SIP response; and\nNOTE 6:\tIf the ATCF subsequently receives an initial SIP INVITE request due to STI-rSR, the ATCF will include the saved the Contact header field of the remote UE in its SIP 200 (OK) response to the initial SIP INVITE request due to STI-rSR.\n2)\tgenerate and send a SIP response to the SIP INVITE request due to STN-SR populated with:\nA)\tthe same status code as the received SIP response to the SIP INVITE request due to ATU-STI for PS to CS SRVCC; and\nB)\tthe Record-Route header field containing the SIP URI of the ATCF;\nC)\tthe Recv-Info header fields of the received SIP response except the Recv-Info header field containing the g.3gpp.access-transfer-events info package name;\nD)\tif the SIP response is SIP 1xx response:\na)\tthe Recv-Info header field containing the g.3gpp.access-transfer-events info package name with the \"et\" parameter indicating ability to receive \"event-type\" attribute with value \"1\", value \"3\", value \"4\" and values, if any, indicated in the \"et\" parameter of the g.3gpp.access-transfer-events info package name of the Recv-Info header field of the received SIP response; and\nE)\tif the SIP response is SIP 2xx response:\na)\tthe Recv-Info header field containing the g.3gpp.access-transfer-events info package name;\nb)\tthe Accept header fields of the received SIP response except the Accept header field containing the application/vnd.3gpp.access-transfer-events+xml MIME type; and\nc)\tthe Accept header field containing the application/vnd.3gpp.access-transfer-events+xml MIME type with the \"et\" parameter indicating ability to receive \"event-type\" with value \"1\", value \"3\", value \"4\" and values, if any, indicated in the \"et\" parameter of the application/vnd.3gpp.access-transfer-events+xml MIME type of the Accept header field of the received SIP response.\nWhen the ATCF receives either:\n1)\ta SIP BYE request on the Source Access Leg containing a Reason header field containing a SIP 503 (Service Unavailable) response code, that is terminating an established dialog or an early dialog on the Source Access Leg;\n2)\ta SIP CANCEL request on the Source Access Leg with the Reason header field containing a SIP 503 (Service Unavailable) response code then, that is terminating an early dialog on the Source Access Leg originated by the SC UE;\n3)\ta SIP 503 (Service Unavailable) response on the Source Access Leg, that is terminating an early dialog on the Source Access Leg terminating at the SC UE; or\n4)\ta SIP 500 (Server Internal Error) response on the Source Access Leg, that is terminating an early dialog on the Source Access Leg terminating at the SC UE;\nthen:\n-\tthe ATCF shall retain session state information and ATGW resources associated with the session until either it receives a SIP INVITE request due to STN-SR or an operator determined period elapses.\nNOTE 1:\tThe default value of the operator determined period is 8 seconds.\nNOTE 2:\tThe session remains recognizable for PS to CS SRVCC access transfer as shown in subclause 12.7.2.1.\nNOTE 3:\tThe SIP BYE request is forwarded to the SCC AS, which also ays release of the session, as described in subclause 12.3.3.2.\nUpon receiving a SIP INVITE request due to STN-SR, if the transferable session set determined in subclause 12.7.2.1 does not contain any sessions and the identity in the P-Asserted-Identity header field is a C-MSISDN that is not bound to a registration path in the ATCF, the ATCF shall respond with a SIP 404 (Not Found) response.\nIf the transferable session set determined in subclause 12.7.2.1 does not contain any sessions and if the identity in the P-Asserted-Identity header field is a C-MSISDN that is bound to a registration path in the ATCF, the ATCF shall:\n1)\tdetermine whether a transferable SIP INVITE request exists. The transferable SIP INVITE request is a SIP INVITE request sent by SC UE such that:\nA)\ta final SIP response has not been received yet to the SIP INVITE request;\nB)\tthe session being established by the SIP INVITE request is associated with C-MSISDN equal to the URI in the P-Asserted-Identity header field of the SIP INVITE requests due to STN-SR;\nC)\ta SIP 1xx response to the SIP INVITE request was received where the SIP 1xx response contained a Feature-Caps header field with the g.3gpp.srvcc feature-capability indicator as described in annex C;\nNOTE 0:\tATCF can have no dialogs if all the early dialogs were terminated by 199 (Early Dialog Terminated) as described in IETF RFC 6228 [80].\nD)\tthe Contact header field in the SIP INVITE request includes the g.3gpp.ps2cs-srvcc-orig-pre-alerting media feature tag as described in annex C; and\nE)\ta SIP 1xx response to the SIP INVITE request was received where the SIP 1xx response contained a Feature-Caps header field with the g.3gpp.ps2cs-srvcc-orig-pre-alerting feature-capability indicator as described in annex C;\n2)\tif a transferable SIP INVITE request exists:\nA)\tif ATCF decides to not anchor media according to local policy and if ATCF does not support CS to PS SRVCC, provide the proxy role as specified in 3GPP TS 24.229 [2] and replace the Request-URI in the received SIP INVITE request due to STN-SR with ATU-STI for PS to CS SRVCC associated with SIP INVITE request before forwarding the request and do not process the remaining steps; and\nB)\tif ATCF decides to anchor media according to local policy:\na)\tif ATCF supports the CS to PS SRVCC:\n-\tassociate the SIP INVITE request with the latest SRVCC-related information (see subclause 6A.3.1) containing C-MSISDN equal to the URI in the P-Asserted-Identity header field of the SIP INVITE requests due to STN-SR; and\n-\tstore the value of the g.3gpp.ti media feature tag as described in annex C of the Contact header field of the SIP INVITE request due to STN-SR; and\nb)\tprovide the role of a B2BUA in accordance with 3GPP TS 24.229 [2] and initiate a new dialog toward the SCC AS (i.e. a target access leg) by sending an initial SIP INVITE request due to ATU-STI for PS to CS SRVCC toward the SCC AS populated with:\n-\tif ATCF decides to anchor media according to local policy:\ni)\tthe SDP offer containing the media offered in source access leg towards the remote UE, with the currently offered ATGW ports and IP addresses towards the remote UE as provided by the ATGW. The ATCF shall include in the SDP offer only the media of the media types offered in the received SIP INVITE request due to STN-SR; and\nii)\tall MIME bodies of the SIP INVITE request due to STN-SR apart from application/sdp MIME body;\n-\tif the ATCF decides not to anchor media according to local policy, all MIME bodies of the SIP INVITE request due to STN-SR;\n-\tthe Request-URI containing the ATU-STI for PS to CS SRVCC previously received from the SCC AS and associated with the SIP INVITE request;\n-\tthe Contact header field that contains the contact information received in the SIP INVITE request due to STN-SR;\n-\tthe Record-Route header field that includes only the ATCF SIP URI, where the ATCF wants to receive subsequent in-dialog requests from the SCC AS;\nNOTE 1:\tThe ATCF SIP URI included in the Record-Route header field is used by the SCC AS to build a Route header field that the SCC AS will use when sending the in-dialog request toward the ATCF.\n-\tthe P-Asserted-Identity header field that is the same as the P-Asserted-Identity header field received in the SIP INVITE request due to STN-SR;\n-\tall header fields which are included in the SIP INVITE request due to STN-SR and which contain option tag(s);\n-\tif the Recv-Info header field is included in the SIP INVITE request due to STN-SR, the Recv-Info header field that is the same as the Recv-Info header field received in the SIP INVITE request due to STN-SR except, if the ATCF supports the CS to PS SRVCC, the Recv-Info header field containing the g.3gpp.access-transfer-events info package name;\n-\tif the Accept header field is included in the SIP INVITE request due to STN-SR, the Accept header field that is the same as the Accept header field received in the SIP INVITE request due to STN-SR. except, if the ATCF supports the CS to PS SRVCC, the Accept header field containing the application/vnd.3gpp.access-transfer-events+xml MIME type; and\n-\tif the ATCF supports the CS to PS SRVCC and an Accept header field of the SIP INVITE request due to STN-SR contains the application/vnd.3gpp.access-transfer-events+xml with the \"et\" parameter indicating ability to receive \"event-type\" attribute with values additional to the value \"2\":\ni)\tthe Accept header field containing the application/vnd.3gpp.access-transfer-events+xml MIME type with the \"et\" parameter indicating ability to receive \"event-type\" attribute with the additional values; and\nii)\tthe Recv-Info header field containing the g.3gpp.access-transfer-events info package name; and\n3)\tif a transferable SIP INVITE request does not exist, respond with a SIP 480 (Temporarily Unavailable) response.\nUpon receiving a SIP INVITE request due to STN-SR, if the transferable session set determined in subclause 12.7.2.1 is not empty and each session in the transferable session set:\n1)\tis in an early dialog state; or\n2)\tis in a confirmed dialog state and contains inactive speech media component;\nthen the ATCF shall:\n1)\tif ATCF decides to not anchor media according to local policy and if ATCF does not support CS to PS SRVCC, provide the proxy role as specified in 3GPP TS 24.229 [2] and replace the Request-URI in the received SIP INVITE request due to STN-SR with ATU-STI for PS to CS SRVCC associated with a session in the transferable session set before forwarding the request and do not process the remaining steps;\n2)\tif ATCF decides to anchor media according to local policy, determine the session being transferred as described in subclause 12.7.2.1A;\n3)\tif ATCF supports the CS to PS SRVCC:\na)\tassociate the session being established with the latest SRVCC-related information (see subclause 6A.3.1) containing C-MSISDN equal to the URI in the P-Asserted-Identity header field of the SIP INVITE requests due to STN-SR; and\nb)\tstore the value of the g.3gpp.ti media feature tag of the Contact header field of the SIP INVITE request due to STN-SR; and\n4)\tprovide the role of a B2BUA in accordance with 3GPP TS 24.229 [2] and initiate a new dialog toward the SCC AS (i.e. a target access leg) by sending an initial SIP INVITE request due to ATU-STI for PS to CS SRVCC toward the SCC AS populated with:\na)\tif ATCF decides to anchor media according to local policy:\nA)\tif\n-\tonly one dialog exists in the session being transferred, the SDP offer containing the currently used media with ATGW ports and IP addresses towards the remote UE as provided by the ATGW. The ATCF shall include in the SDP offer only the media of the media types offered in the received SIP INVITE request due to STN-SR; and\n-\tmore than one early dialog exists in a session being transferred, the SDP offer containing the ATGW ports and IP addresses of the selected dialog towards the remote UE as provided by the ATGW and the media types offered in the received SIP INVITE request due to STN-SR;\nB)\tall MIME bodies of the SIP INVITE request due to STN-SR apart from application/sdp MIME body;\nC)\tthe Request-URI containing the ATU-STI for PS to CS SRVCC previously received from the SCC AS and associated with the session being transferred;\nD)\tthe Target-Dialog header field with the dialog identifier of the session being transferred; and\nE)\tthe Require header field containing the option tag \"tdialog\";\nb)\tif the ATCF supports the CS to PS SRVCC and the ATCF decides not to anchor media according to local policy:\ni)\tall MIME bodies of the SIP INVITE request due to STN-SR; and\nii)\tthe Request-URI containing the ATU-STI for PS to CS SRVCC associated with a session in the transferable session set;\nc)\tthe Contact header field that contains the contact information received in the SIP INVITE request due to STN-SR;\nd)\tthe Record-Route header field that includes only the ATCF SIP URI, where the ATCF wants to receive subsequent in-dialog requests from the SCC AS;\nNOTE 1:\tThe ATCF SIP URI included in the Record-Route header field is used by the SCC AS to build a Route header field that the SCC AS will use when sending the in-dialog request toward the ATCF.\ne)\tthe P-Asserted-Identity header field that is the same as the P-Asserted-Identity header field received in the SIP INVITE request due to STN-SR;\nf)\tall header fields which are included in the SIP INVITE request due to STN-SR and which contain option tag(s);\ng)\tif the Recv-Info header field is included in the SIP INVITE request due to STN-SR, the Recv-Info header field that is the same as the Recv-Info header field received in the SIP INVITE request due to STN-SR except, if the ATCF supports the CS to PS SRVCC, the Recv-Info header field containing the g.3gpp.access-transfer-events info package name;\nh)\tif the Accept header field is included in the SIP INVITE request due to STN-SR, the Accept header field that is the same as the Accept header field received in the SIP INVITE request due to STN-SR. except, if the ATCF supports the CS to PS SRVCC, the Accept header field containing the application/vnd.3gpp.access-transfer-events+xml MIME type;\ni)\tif the ATCF supports the CS to PS SRVCC and an Accept header field of the SIP INVITE request due to STN-SR contains the application/vnd.3gpp.access-transfer-events+xml with the \"et\" parameter indicating ability to receive \"event-type\" attribute with values additional to the value \"2\":\nA)\tthe Accept header field containing the application/vnd.3gpp.access-transfer-events+xml MIME type with the \"et\" parameter indicating ability to receive \"event-type\" attribute with the additional values; and\nB)\tthe Recv-Info header field containing the g.3gpp.access-transfer-events info package name.\nj)\tif the SIP INVITE request due to STN-SR contains a P-Access-Network-Info header field, a P-Access-Network-Info header field copied from the SIP INVITE request due to STN-SR.\nUpon receiving a SIP 18x response or SIP 2xx response to the SIP INVITE request due to ATU-STI for PS to CS SRVCC from the SCC AS, the ATCF shall:\n1)\tif ATCF supports CS to PS SRVCC, save the Contact header field included in the SIP response; and\nNOTE 2:\tIf the ATCF subsequently receives an initial SIP INVITE request due to STI-rSR, the ATCF will include the saved the Contact header field of the remote UE in its SIP 200 (OK) response to the initial SIP INVITE request due to STI-rSR.\n2)\tgenerate and send a SIP response to the SIP INVITE request due to STN-SR populated with:\na)\tthe Record-Route header field with a Record-Route header field that contains only the SIP URI pointing to the ATCF;\nb)\tthe same status code as the received SIP response to the SIP INVITE request due to ATU-STI for PS to CS SRVCC; and\nc)\tif ATCF supports CS to PS SRVCC:\nA)\tthe Recv-Info header fields of the received SIP response except the Recv-Info header field containing the g.3gpp.access-transfer-events info package name;\nB)\tif the SIP response is SIP 1xx response, the Recv-Info header field containing the g.3gpp.access-transfer-events info package name with the \"et\" parameter indicating ability to receive \"event-type\" attribute with value \"1\", value \"3\", value \"4\"  and values, if any, indicated in the \"et\" parameter of the g.3gpp.access-transfer-events info package name of the Recv-Info header field of the received SIP response; and\nC)\tif the SIP response is SIP 2xx response:\ni)\tthe Recv-Info header field containing the g.3gpp.access-transfer-events info package name;\nii)\tthe Accept header fields of the received SIP response except the Accept header field containing the application/vnd.3gpp.access-transfer-events+xml MIME type; and\niii)\tthe Accept header field containing the application/vnd.3gpp.access-transfer-events+xml MIME type with the \"et\" parameter indicating ability to receive \"event-type\" with value \"1\", value \"3\", value \"4\"  and values, if any, indicated in the \"et\" parameter of the application/vnd.3gpp.access-transfer-events+xml MIME type of the Accept header field of the received SIP response.\nUpon receiving a SIP INFO request carrying a \"call-accepted\" indication the ATCF shall, if not already done according to operator policy, request the ATGW to through-connect in both directions.\nNOTE 3:\tThe details of interaction between ATCF and ATGW are out of scope of this document.\nUpon receiving a SIP REFER request for transferring additional call, the ATCF shall:\n1)\tstore the additional transferred session SCC AS URI contained in the Refer-To header field and associate it with the C-MSISDN contained in the SIP INVITE requests due to STN-SR which created the dialog in which the REFER request is received;\n2)\treplace the additional transferred session SCC AS URI contained in the Refer-To header field with the ATCF URI for anchoring additional transferred call in ATCF allocated to the ATCF extended with any SIP URI headers of the additional transferred session SCC AS URI; and\n3)\tforward the REFER request to the MSC Server.\nUpon receiving SIP INVITE request for anchoring call additionally transferred during PS to CS SRVCC in ATCF, the ATCF shall act as B2BUA and shall:\n1)\tdetermine the transferable session set which are all the sessions with a speech media component:\nA)\tassociated with C-MSISDN equal to the URI in the P-Asserted-Identity header field of the SIP INVITE request; and\nB)\twhere during establishment of the session a Feature-Caps header field containing the g.3gpp.srvcc feature-capability indicator was received in the initial SIP request or SIP response;\nNOTE 1:\tThe transferable sessions set potentially includes recently released sessions for which the ATCF temporarily retains session state according to subclause 12.7.2.3.\n2)\tdetermine the additional session being transferred which is a session in the transferable session set with dialog identifier indicated by the Target-Dialog header field of the SIP INVITE request;\n3)\tif ATCF supports CS to PS SRVCC and if ATCF contains an SRVCC-related information (see subclause 6A.3.1) containing C-MSISDN equal to the <C-MSISDN> element of the <Setup-info> element of the value <srvcc-ext> root element of the application/vnd.3gpp.srvcc-ext+xml MIME body of the SIP INVITE request:\nA)\tassociate the session being established with the latest SRVCC-related information (see subclause 6A.3.1) containing C-MSISDN equal to the URI in the P-Asserted-Identity header field of the SIP INVITE request; and\nB)\tstore the value of the g.3gpp.ti media feature tag of the Contact header field of the SIP INVITE request; and\n4)\tsend a SIP INVITE request towards the home network according to 3GPP TS 24.229 [2]. The ATCF shall populate the SIP INVITE request towards the home network with:\nA)\tthe Request-URI set to the additional transferred session SCC AS URI previously stored and associated with the C-MSISDN equal to the URI in the P-Asserted-Identity header field of the SIP INVITE request for anchoring call additionally transferred during PS to CS SRVCC in ATCF;\nB)\tall MIME bodies of the SIP INVITE request for anchoring call additionally transferred during PS to CS SRVCC in ATCF apart from application/sdp MIME body and apart from the application/vnd.3gpp.srvcc-ext+xml MIME body;\nC)\tthe SDP offer containing the ATGW ports and IP addresses of the selected dialog towards the remote UE as provided by the ATGW and the media types offered in the SIP INVITE request for anchoring call additionally transferred during PS to CS SRVCC in ATCF;\nD)\tthe Target-Dialog header field set to the Target-Dialog header field of the SIP INVITE request for anchoring call additionally transferred during PS to CS SRVCC in ATCF;\nE)\tthe Record-Route header field containing the SIP URI of the ATCF;\nF)\tthe Contact header field that contains the contact information received in the SIP INVITE request for anchoring call additionally transferred during PS to CS SRVCC in ATCF;\nG)\tthe P-Asserted-Identity header field that is the same as the P-Asserted-Identity header field received in the SIP INVITE request for anchoring call additionally transferred during PS to CS SRVCC in ATCF;\nH)\tall header fields which are included in the SIP INVITE request for anchoring call additionally transferred during PS to CS SRVCC in ATCF and which contain option tag(s);\nI)\tif the Recv-Info header field is included in the SIP INVITE request for anchoring call additionally transferred during PS to CS SRVCC in ATCF, the Recv-Info header field that is the same as the Recv-Info header field received in the SIP INVITE request for anchoring call additionally transferred during PS to CS SRVCC in ATCF except, if the ATCF supports the CS to PS SRVCC, the Recv-Info header field containing the g.3gpp.access-transfer-events info package name;\nJ)\tif the Accept header field is included in the SIP INVITE request for anchoring call additionally transferred during PS to CS SRVCC in ATCF, the Accept header field that is the same as the Accept header field received in the SIP INVITE request for anchoring call additionally transferred during PS to CS SRVCC in ATCF. except, if the ATCF supports the CS to PS SRVCC, the Accept header field containing the application/vnd.3gpp.access-transfer-events+xml MIME type;\nK)\tif the ATCF supports the CS to PS SRVCC and an Accept header field of the SIP INVITE request for anchoring call additionally transferred during PS to CS SRVCC in ATCF contains the application/vnd.3gpp.access-transfer-events+xml with the \"et\" parameter indicating ability to receive \"event-type\" attribute with values additional to the value \"2\":\na)\tthe Accept header field containing the application/vnd.3gpp.access-transfer-events+xml MIME type with the \"et\" parameter indicating ability to receive \"event-type\" attribute with the additional values; and\nb)\tthe Recv-Info header field containing the g.3gpp.access-transfer-events info package name;\nL)\tif the ATCF is located in the visited network, and local policy requires the application of IBCF capabilities in the visited network towards the home network, select an IBCF in the visited network and add the URI of the selected IBCF to the topmost Route header field.\nM)\tif the SIP INVITE request due to STN-SR contains a P-Access-Network-Info header field, a P-Access-Network-Info header field copied from the SIP INVITE request due to STN-SR.\nWhen the ATCF receives any SIP 1xx response or a SIP 2xx response to the SIP INVITE request towards the home network, the ATCF shall:\n1)\tif ATCF supports CS to PS SRVCC, save the Contact header field included in the SIP response; and\n2)\tgenerate and send a SIP response to the SIP INVITE request for anchoring call additionally transferred during PS to CS SRVCC in ATCF populated with:\nA)\tthe Record-Route header field with a Record-Route header field that contains only the SIP URI pointing to the ATCF;\nB)\tthe same status code as the received SIP response to the SIP INVITE request towards the home network;\nC)\tif ATCF supports CS to PS SRVCC:\na)\tthe Recv-Info header fields of the received SIP response except the Recv-Info header field containing the g.3gpp.access-transfer-events info package name;\nb)\tif the SIP response is a SIP 1xx response, the Recv-Info header field containing the g.3gpp.access-transfer-events info package name with the \"et\" parameter indicating ability to receive \"event-type\" attribute with value \"1\", value \"3\", value \"4\"  and values, if any, indicated in the \"et\" parameter of the g.3gpp.access-transfer-events info package name of the Recv-Info header field of the received SIP response; and\nc)\tif the SIP response is a SIP 2xx response:\ni)\tthe Recv-Info header field containing the g.3gpp.access-transfer-events info package name;\nii)\tthe Accept header fields of the received SIP response except the Accept header field containing the application/vnd.3gpp.access-transfer-events+xml MIME type; and\niii)\tthe Accept header field containing the application/vnd.3gpp.access-transfer-events+xml MIME type with the \"et\" parameter indicating ability to receive \"event-type\" with value \"1\", value \"3\", value \"4\"  and values, if any, indicated in the \"et\" parameter of the application/vnd.3gpp.access-transfer-events+xml MIME type of the Accept header field of the received SIP response;\nD)\tall MIME bodies of the received SIP response to the SIP INVITE request towards the home network apart from application/sdp MIME body; and\nE)\tthe SDP answer containing the ATGW ports and IP addresses of the selected dialog towards the MSC server as provided by the ATGW and the media types answered in the the received SIP response to the SIP INVITE request towards the home network.\nUpon receiving a SIP INFO request carrying a \"call-accepted\" indication the ATCF shall, if not already done according to operator policy, request the ATGW to through-connect in both directions.\nNOTE 2:\tThe details of interaction between ATCF and ATGW are out of scope of this document.\nUpon receiving a SIP OPTIONS request carrying the PS-to-CS-preparation-request, the ATCF shall send a SIP 2xx response to the SIP OPTIONS request according to 3GPP TS 24.229 [2]. In the SIP 2xx response, the ATCF shall include an application/vnd.3gpp.PS-to-CS-preparation+xml specified in subclause D.6 carrying the PS-to-CS-preparation-response. In the PS-to-CS-preparation-response, the ATCF:\n1)\tif:\na)\tthe session being transferred as described in subclause 12.7.2.1 is determined; or\nb)\tthe session being transferred as described in subclause 12.7.2.1 is not determined and the session being transferred as described in subclause 12.7.2.1A is determined;\nthen:\na)\tshall include a <currently-possible> XML element; and\nb)\tshall include an <IMS-preferred-codec-list> element containing an SDP body with one audio m= line. In the m= line, in the following decreasing order of preference, the ATCF:\n-\tshall include RTP payload type(s) with associated RTP payload type number(s) describing media received by the ATGW in a dialog of the home leg of the session being transferred. If the home leg of the session being transferred consists of several early dialogs, the ATCF shall select one early dialog according to local policy; and\n-\tmay include additional RTP payload type(s) with associated RTP payload type number(s), supported by the ATGW, describing the media which the ATGW is able to send to the MSC server, and selected by local policy.\nNOTE 1:\tIf the initial SDP offer of the session being transferred was provided by the remote UE, then the additional RTP payload type(s) can be derived from RTP payload type(s) which were offered in the initial SDP offer provided by the remote UE but which were not accepted by the SC UE. However, the SDP body received from the remote UE describes media which the remote UE wishes to receive while the SDP body in the <IMS-preferred-codec-list> element describes media which the ATGW (and the remote UE if no transcoding occurs) can send to the MSC server, i.e. media in the opposite direction. Therefore, the RTP payload types indicated in the SDP body received from the remote UE need to be adjusted before inclusion in the <IMS-preferred-codec-list> element.\nThe ATCF shall associate the RTP payload type(s) with the RTP payload type number(s) in the <IMS-preferred-codec-list> element so that association of the RTP payload type(s) with the RTP payload type number(s) in the <IMS-preferred-codec-list> element do not conflict with association of the RTP payload type(s) with the RTP payload type number(s) describing media received by the ATGW in the selected dialog of the home leg of the session being transferred; and\nNOTE 2:\tRTP payload type number(s) indicated in the <MSC-server-supported-codec-list> element of the PS-to-CS-preparation-request do not influence the RTP payload type number(s) indicated in the <IMS-preferred-codec-list> element.\n2)\tif the session being transferred as described in subclause 12.7.2.1 is not determined and the session being transferred as described n subclause 12.7.2.1A is not determined, shall include a <currently-not-possible> XML element. In the <currently-not-possible> XML element, the ATCF:\nA)\tshall include the <state-info> element indicating the state of the session;\nB)\tshall include the <direction> element indicating the direction of the session;\nC)\tshall include the <speech-state> element indicating the state of the speech media component of the session;\nD)\tif the Feature-Caps header field provided by the SCC AS in the session includes the g.3gpp.mid-call feature-capability indicator and the Contact header field provided by the SC UE in the session includes the g.3gpp.mid-call media feature tag, shall include a <feature-tag> element with the \"name\" attribute set to \"g.3gpp.mid-call\";\nE)\tif the Feature-Caps header field provided by the SCC AS in the session includes the g.3gpp.srvcc-alerting feature-capability indicator and the Contact header field provided by the SC UE in the session includes the g.3gpp.srvcc-alerting feature tag:\ni)\tshall include a <feature-tag> element with the \"name\" attribute set to \"g.3gpp.srvcc-alerting\"; and\nii)\tif the Feature-Caps header field provided by the SCC AS in the session includes the g.3gpp.ps2cs-srvcc-orig-pre-alerting indicator and the Contact header field provided by the SC UE in the session includes the g.3gpp.ps2cs-srvcc-orig-pre-alerting media feature tag, shall include a <feature-tag> element with the \"name\" attribute set to \"g.3gpp.ps2cs-srvcc-orig-pre-alerting\";\nfor each session in the the transferable session set determined as specified in subclause 12.7.2.1. If the SC UE has several early dialogs created by the same SIP INVITE request, the ATCF shall include the above pieces of information for one of those early dialogs only.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "12.7.3\tATCF procedures for CS to PS SRVCC",
                            "text_content": "If the ATCF supports the CS to PS SRVCC, upon receiving SIP INFO request carrying the session transfer notification request, the ATCF shall:\n1)\tsend SIP 200 (OK) response to the SIP INFO request according to 3GPP TS 24.229 [2];\n2)\tdetermine the session being transferred as the session supported by the dialog of the SIP INFO request;\n3)\tif a SIP 2xx response to the initial SIP INVITE request has been sent in the dialog of the determined session being transferred and if the determined session being transferred includes an active speech media component:\nA)\tif the ATGW anchors the speech media component of the determined session being transferred, continue handling the procedures in the subclause 12.7.3.2; and\nB)\tif the ATGW does not anchor the speech media component of the determined session being transferred, continue handling the procedures in the subclause 12.7.3.3; and\n4)\tif the determined session being transferred does not include an active speech media component, continue handling the procedures in the subclause 12.7.3.4.\nIf the ATCF supports the CS to PS SRVCC, in order to transfer the determined session being transferred with the speech media component anchored in ATGW, the ATCF shall:\nNOTE 1:\tAt this point, ATCF interacts with ATGW to reserve resources and provide the information needed in the procedures below. The details of interaction between ATCF and ATGW are out of scope of this document.\n1)\tfor each registration path(s), which have the C-MSISDN equal to the C-MSISDN associated with the session of the SIP INFO request carrying the session transfer notification request, set:\nA)\tthe CS to PS SRVCC access transfer in progress flag (see subclause 6A.3.1); and\nB)\tthe home leg of the session being transferred by CS to PS SRVCC (see subclause 6A.3.1) to the dialog identifier of the home leg of the determined session being transferred; and\n2)\tsend a SIP INFO request within the dialog of the SIP INFO request carrying the session transfer notification request according to 3GPP TS 24.229 [2]. The ATCF shall populate the SIP INFO request with:\nA)\tInfo-Package header field with value g.3gpp.access-transfer-events; and\nB)\tapplication/vnd.3gpp.access-transfer-events+xml MIME body associated with the info package according to IETF RFC 6086 [54] and:\na)\tindicating the session transfer notification response;\nb)\tindicating that the ATCF does not require the MSC server to redirect the speech media component of the session transferred by the CS to PS SRVCC access transfer; and\nc)\tcontaining the ATGW transfer details.\nIf receiving the SIP INFO request carrying the session transfer cancellation, the ATCF shall:\nNOTE 2:\tthe SIP INFO request carrying the session transfer cancellation is received only when CS to PS SRVCC is cancelled.\n1)\tsend SIP 200 (OK) response to the SIP INFO request according to 3GPP TS 24.229 [2]; and\n2)\tfor registration path(s), which have the C-MSISDN equal to the C-MSISDN associated with the registration path of the SIP INVITE request due to STI-rSR, reset the CS to PS SRVCC access transfer in progress flag (see subclause 6A.3.1).\nNOTE 3:\tAt this point, the ATCF interacts with the ATGW to release any resources reserved on PS serving leg. The details of interaction between the ATCF and the ATGW are out of scope of this document.\nNOTE 4:\tIf the SIP INFO request carrying the session transfer cancellation is received, remaining procedures of this subclause are not invoked.\nUnless the determined session being transferred is released, upon receiving the SIP INFO request carrying session transfer preparation, the ATCF shall:\n1)\tsend SIP 200 (OK) response to the SIP INFO request according to 3GPP TS 24.229 [2].\nNOTE 5:\tAt this point, the ATCF interacts with the ATGW to start forwarding the audio media from the remote UE towards the SC UE according to the SC UE information for CS to PS SRVCC (see subclause 6A.3.1). The details of interaction between the ATCF and the ATGW are out of scope of this document.\nNOTE 6:\tAt this point, the ATCF interacts with the ATGW to start forwarding the audio media received at the IP address and port provided in the ATGW transfer details according to the ATGW information for CS to PS SRVCC (see subclause 6A.3.1) towards the remote UE. The details of interaction between the ATCF and the ATGW are out of scope of this document.\nIf receiving the SIP INFO request carrying the session transfer cancellation, the ATCF shall:\nNOTE 7:\tthe SIP INFO request carrying the session transfer cancellation is received only when CS to PS SRVCC is cancelled.\n1)\tsend SIP 200 (OK) response to the SIP INFO request according to 3GPP TS 24.229 [2]; and\n2)\tfor registration path(s), which have the C-MSISDN equal to the C-MSISDN associated with the registration path of the SIP INVITE request due to STI-rSR, reset the CS to PS SRVCC access transfer in progress flag (see subclause 6A.3.1).\nNOTE 8:\tAt this point, the ATCF interacts with the ATGW to start forwarding the audio media from the remote UE towards the MSC server according to the SDP negotiated by the MSC server in the CS serving leg. The ATCF also interacts with the ATGW to release any resources reserved on the PS serving leg. The details of interaction between the ATCF and the ATGW are out of scope of this document.\nNOTE 9:\tIf the SIP INFO request carrying the session transfer cancellation is received, remaining procedures of this subclause are not invoked.\nUpon receiving SIP INVITE request due to STI-rSR and if:\n1)\tthe CS to PS SRVCC access transfer in progress flag (see subclause 6A.3.1) of the registration path of the SIP INVITE request due to STI-rSR is set; and\n2)\tthe home leg of the session being transferred by CS to PS SRVCC (see subclause 6A.3.1) of the registration path of the SIP INVITE request due to STI-rSR is set and the dialog of the home leg of the session being transferred by CS to PS SRVCC has not been released yet;\nthe ATCF shall:\n1)\tsend a SIP 200 (OK) response to the received SIP INVITE request due to STI-rSR according to 3GPP TS 24.229 [2]. The ATCF shall populate the SIP 200 (OK) response with:\nA)\tthe Contact header field of the remote UE of the home leg of the session being transferred by CS to PS SRVCC;\nB)\tthe Feature-Caps header fields received in the home leg of the session being transferred by CS to PS SRVCC;\nC)\tthe Accept header fields received in the home leg of the session being transferred by CS to PS SRVCC;\nD)\tthe Recv-Info header fields received in the home leg of the session being transferred by CS to PS SRVCC;\nE)\tall header fields received in the home leg of the session being transferred by CS to PS SRVCC, which contain option tag(s);\nF)\tthe P-Asserted-Identity header field received in the home leg of the session being transferred by CS to PS SRVCC;\nG)\tthe Privacy header fields received in the home leg of the session being transferred by CS to PS SRVCC;\nH)\tthe Record-Route header field that contains only the SIP URI pointing to the ATCF;\nI)\tthe SDP answer that includes the ATGW ports and the IP addresses as provided by the ATGW;\nJ)\tthe P-Charging-Vector header field as specified in 3GPP TS 24.229 [2] including the \"related-icid\" header field parameter containing the ICID value of the source access leg in the P-Charging-Vector header field. Additionally, if an \"icid-generated-at\" header field was generated for the source access leg, ATCF shall include the \"related-icid-generated-at\" header field parameter containing the host name or IP address included in the \"icid-generated-at\" header field parameter of the source access leg; and\nK)\tthe Feature-Caps header field containing the g.3gpp.ti feature-capability indicator with value of the g.3gpp.ti media feature tag in the Contact header field received in the serving leg of the session being transferred by CS to PS SRVCC;\n2)\tinitiate a new dialog toward the SCC AS (i.e. a target access leg) by sending an initial SIP INVITE request due to ATU-STI for CS to PS SRVCC. The ATCF shall populate the SIP INVITE request with:\nA)\tthe SDP offer containing the currently used media with the ATGW ports and IP addresses towards the remote UE as provided by the ATGW. The ATCF shall include in the SDP offer only the media of the media types offered in the received SIP INVITE request due to STI-rSR;\nB)\tthe Request-URI containing the ATU-STI for CS to PS SRVCC (see subclause 6A.3.1) previously received from the SCC AS and associated with the registration path of the SIP INVITE request due to STI-rSR;\nC)\tthe Target-Dialog header field containing the dialog identifier of the home leg of the session being transferred by CS to PS SRVCC (see subclause 6A.3.1) of the registration path of the SIP INVITE request due to STI-rSR;\nD)\tthe Require header field containing the option tag \"tdialog\";\nE)\tthe Contact header field that contains the contact information received in the SIP INVITE request due to STI-rSR;\nF)\tthe Record-Route header field that includes only the ATCF SIP URI, where the ATCF wants to receive subsequent in-dialog requests from the SCC AS; and\nNOTE 10:\tThe ATCF SIP URI included in the Record-Route header field is used by the SCC AS to build a Route header field that the SCC AS will use when sending the in-dialog request toward the ATCF.\nG)\tthe P-Asserted-Identity header field set to the C-MSISDN (see subclause 6A.3.1) previously received from the SCC AS and associated with the registration path of the SIP INVITE request; and\nNOTE 11:\tRoute header field(s) included in the SIP INVITE request due to STI-rSR are not inserted in the SIP INVITE request due to ATU-STI for CS to PS SRVCC.\n3)\tfor registration path(s), which have the C-MSISDN equal to the C-MSISDN associated with the registration path of the SIP INVITE request due to STI-rSR, reset the CS to PS SRVCC access transfer in progress flag (see subclause 6A.3.1).\nUpon receiving SIP INVITE request due to STI-rSR and if:\n1)\tthe CS to PS SRVCC access transfer in progress flag (see subclause 6A.3.1) of the registration path of the SIP INVITE request due to STI-rSR is set; and\n2)\tthe home leg of the session being transferred by CS to PS SRVCC (see subclause 6A.3.1) of the registration path of the SIP INVITE request due to STI-rSR is set and the dialog of the home leg of the session being transferred by CS to PS SRVCC has already been released;\nthe ATCF shall initiate a new dialog toward the SCC AS (i.e. a target access leg) by sending an initial SIP INVITE request due to ATU-STI for CS to PS SRVCC. The ATCF shall populate the SIP INVITE request with:\n1)\tif the ATCF decided to anchor the media according to operator policy as specified in 3GPP TS 23.237 [9]:\nA)\tall MIME bodies of the SIP INVITE request due to STI-rSR apart from the application/sdp MIME body; and\nB)\tapplication/sdp MIME body with updated SDP offer using media parameters provided by the ATGW;\nNOTE 12:\tATCF interacts with ATGW to provide the needed media related information. The details of interaction between ATCF and ATGW are out of scope of this document.\n2)\tif the ATCF decided not to anchor the media according to operator policy as specified in 3GPP TS 23.237 [9], all MIME bodies of the originating SIP INVITE request from MSC server;\n3)\tthe Request-URI containing the ATU-STI for CS to PS SRVCC (see subclause 6A.3.1) previously received from the SCC AS and associated with the registration path of the SIP INVITE request due to STI-rSR;\n4)\tthe Contact header field that contains the contact information received in the SIP INVITE request due to STI-rSR;\n5)\tthe Record-Route header field that includes only the ATCF SIP URI, where the ATCF wants to receive subsequent in-dialog requests from the SCC AS; and\nNOTE 13:\tThe ATCF SIP URI included in the Record-Route header field is used by the SCC AS to build a Route header field that the SCC AS will use when sending the in-dialog request toward the ATCF.\n6)\tthe P-Asserted-Identity header field set to the C-MSISDN (see subclause 6A.3.1) previously received from the SCC AS and associated with the registration path of the SIP INVITE request due to STI-rSR.\nUpon receiving SIP 1xx response or SIP 2xx response to the SIP INVITE request due to ATU-STI for CS to PS SRVCC, the ATCF shall:\n1)\tsave the Contact header field included in the SIP response; and\n2)\tsend a SIP response to the SIP INVITE request due to STI-rSR according to 3GPP TS 24.229 [2]. The ATCF shall populate the SIP response with:\nA)\tthe same response code as the received SIP response to the SIP INVITE request due to ATU-STI for CS to PS SRVCC;\nB)\tRecord-Route header field containing the SIP URI of the ATCF; and\nC)\tthe P-Charging-Vector header field as specified in 3GPP TS 24.229 [2] including the \"related-icid\" header field parameter containing the ICID value of the source access leg in the P-Charging-Vector header field. Additionally, if an \"icid-generated-at\" header field was generated for the source access leg, ATCF shall include the \"related-icid-generated-at\" header field parameter containing the host name or IP address included in the \"icid-generated-at\" header field parameter of the source access leg.\nIn order to transfer the determined session being transferred with the speech media component not anchored in ATGW, the ATCF shall:\nNOTE 1:\tAt this point, ATCF interacts with ATGW to reserve resources and provide the information needed in the procedures below. The details of interaction between ATCF and ATGW are out of scope of this document.\n1)\tfor each registration path(s), which have the C-MSISDN equal to the C-MSISDN associated with the session of the SIP INFO request carrying the session transfer notification request, set:\nA)\tthe CS to PS SRVCC access transfer in progress flag (see subclause 6A.3.1); and\nB)\tthe home leg of the session being transferred by CS to PS SRVCC (see subclause 6A.3.1) to the dialog identifier of the home leg of the determined session being transferred; and\n2)\tsend a SIP INFO request within the dialog of the SIP INFO request carrying the session transfer notification request according to 3GPP TS 24.229 [2]. The ATCF shall populate the SIP INFO request with:\nA)\tInfo-Package header field with value g.3gpp.access-transfer-events; and\nB)\tapplication/vnd.3gpp.access-transfer-events+xml MIME body associated with the info package according to IETF RFC 6086 [54] and:\na)\tindicating the session transfer notification response;\nb)\tindicating that the ATGW requires MSC server to redirect the speech media component of the session transferred by the CS to PS SRVCC access transfer; and\nc)\tcontaining the ATGW transfer details.\nNOTE 2:\tThe ATCF can bind the reserved resources in the ATGW with the C-MSISDN, which will be used to associate the SIP INVITE request due to media transfer from MSC server to ATGW with the session to be transferred.\nUpon receiving a SIP INVITE request due to media transfer from MSC server to ATGW, the ATCF shall:\n1)\tuse the C-MSISDN in the SIP INVITE request to associate the SIP INVITE request due to media transfer from MSC server to ATGW with the session to be transferred and send a SIP 200 (OK) response to the SIP INVITE request according to 3GPP TS 24.229 [2].\nNOTE 3:\tAt this point, ATCF interacts with ATGW to establish the media bearer between MGW and ATGW. The details of interaction between ATCF and ATGW are out of scope of this document.\nIf receiving the SIP INFO request carrying the session transfer cancellation, the ATCF shall:\nNOTE 4:\tthe SIP INFO request carrying the session transfer cancellation is received only when CS to PS SRVCC is cancelled.\n1)\tsend SIP 200 (OK) response to the SIP INFO request according to 3GPP TS 24.229 [2]; and\n2)\tfor registration path(s), which have the C-MSISDN equal to the C-MSISDN associated with the registration path of the SIP INVITE request due to STI-rSR, reset the CS to PS SRVCC access transfer in progress flag (see subclause 6A.3.1).\nNOTE 5:\tAt this point, the ATCF interacts with the ATGW to release any resources reserved on PS serving leg. The details of interaction between the ATCF and the ATGW are out of scope of this document.\nNOTE 6:\tIf the SIP INFO request carrying the session transfer cancellation is received, remaining procedures of this subclause are not invoked.\nUnless the determined session being transferred is released, upon receiving the SIP INFO request carrying session transfer preparation, the ATCF shall:\n1)\tsend SIP 200 (OK) response to the SIP INFO request according to 3GPP TS 24.229 [2].\nNOTE 7:\tAt this point, the ATCF interacts with the ATGW to start forwarding the audio media from the remote UE towards the SC UE according to the SC UE information for CS to PS SRVCC (see subclause 6A.3.1). The details of interaction between the ATCF and the ATGW are out of scope of this document.\nNOTE 8:\tAt this point, the ATCF interacts with the ATGW to start forwarding the audio media received at the IP address and port provided in the ATGW transfer details according to the ATGW information for CS to PS SRVCC (see subclause 6A.3.1) towards the remote UE. The details of interaction between the ATCF and the ATGW are out of scope of this document.\nIf receiving the SIP INFO request carrying the session transfer cancellation, the ATCF shall:\nNOTE 9:\tThe SIP INFO request carrying the session transfer cancellation is received only when CS to PS SRVCC is cancelled.\n1)\tsend SIP 200 (OK) response to the SIP INFO request according to 3GPP TS 24.229 [2]; and\n2)\tfor registration path(s), which have the C-MSISDN equal to the C-MSISDN associated with the registration path of the SIP INVITE request due to STI-rSR, reset the CS to PS SRVCC access transfer in progress flag (see subclause 6A.3.1).\nNOTE 10:\tAt this point, the ATCF interacts with the ATGW to start forwarding the audio media from the remote UE towards the MSC server according to the SDP negotiated by the MSC server in the CS serving leg. The ATCF also interacts with the ATGW to release any resources reserved on the PS serving leg. The details of interaction between the ATCF and the ATGW are out of scope of this document.\nNOTE 11:\tIf the SIP INFO request carrying the session transfer cancellation is received, remaining procedures of this subclause are not invoked.\nUpon receiving a SIP INVITE request due to STI-rSR and if:\n1)\tthe CS to PS SRVCC access transfer in progress flag (see subclause subclause 6A.3.1) of the registration path of the SIP INVITE request due to STI-rSR is set; and\n2)\tthe home leg of the session being transferred by CS to PS SRVCC (see subclause 6A.3.1) of the registration path of the SIP INVITE request due to STI-rSR is set and the dialog of the home leg of the session being transferred by CS to PS SRVCC has not been released yet;\nthe ATCF shall:\nNOTE 12:\tAt this point, the ATCF interacts with the ATGW to provide information needed in the procedures below and to request the ATGW to forward the audio media of the session being transferred from the remote UE to the SC UE. The details of interaction between the ATCF and the ATGW are out of scope of this document.\n1)\tsend a SIP 200 (OK) response to the received SIP INVITE request due to STI-rSR according to 3GPP TS 24.229 [2]. The ATCF shall populate the SIP 200 (OK) response with:\nA)\tthe Contact header field of the remote UE of the home leg of the session being transferred by CS to PS SRVCC;\nB)\tthe Feature-Caps header fields received in the home leg of the session being transferred by CS to PS SRVCC;\nC)\tthe Accept header fields received in the home leg of the session being transferred by CS to PS SRVCC;\nD)\tthe Recv-Info header fields received in the home leg of the session being transferred by CS to PS SRVCC;\nE)\tall header fields received in the home leg of the session being transferred by CS to PS SRVCC, which contain option tag(s);\nF)\tthe P-Asserted-Identity header field received in the home leg of the session being transferred by CS to PS SRVCC;\nG)\tthe Privacy header fields received in the home leg of the session being transferred by CS to PS SRVCC;\nH)\tthe Record-Route header field that contains only the SIP URI pointing to the ATCF;\nI)\tthe SDP answer that includes the ATGW ports and the IP addresses as provided by the ATGW;\nJ)\tthe P-Charging-Vector header field as specified in 3GPP TS 24.229 [2] including the \"related-icid\" header field parameter containing the ICID value of the source access leg in the P-Charging-Vector header field. Additionally, if an \"icid-generated-at\" header field was generated for the source access leg, ATCF shall include the \"related-icid-generated-at\" header field parameter containing the host name or IP address included in the \"icid-generated-at\" header field parameter of the source access leg; and\nK)\tthe Feature-Caps header field containing the g.3gpp.ti feature-capability indicator with value of the g.3gpp.ti media feature tag in the Contact header field received in the serving leg of the session being transferred by CS to PS SRVCC;\nNOTE 13:\tAt this point the ATCF requests the ATGW to forward the audio media from the SC UE to the remote UE. The details of interaction between the ATCF and the ATGW are out of scope of this document.\n2)\tinitiate a new dialog toward the SCC AS (i.e. a target access leg) by sending an initial SIP INVITE request due to ATU-STI for CS to PS SRVCC. The ATCF shall populate the SIP INVITE request with:\nA)\tthe SDP offer containing the media with the ATGW ports and IP addresses towards the remote UE as provided by the ATGW. The ATCF shall include in the SDP offer only the media of the media types offered in the received SIP INVITE request due to STI-rSR;\nB)\tthe Request-URI containing the ATU-STI for CS to PS SRVCC (see subclause 6A.3.1) previously received from the SCC AS and associated with the registration path of the SIP INVITE request due to STI-rSR;\nC)\tthe Target-Dialog header field containing the dialog identifier of the home leg of the session being transferred by CS to PS SRVCC (see subclause 6A.3.1) of the registration path of the SIP INVITE request due to STI-rSR;\nD)\tthe Require header field containing the option tag \"tdialog\";\nE)\tthe Contact header field that contains the contact information received in the SIP INVITE request due to STI-rSR;\nF)\tthe Record-Route header field that includes only the ATCF SIP URI, where the ATCF wants to receive subsequent in-dialog requests from the SCC AS; and\nNOTE 14:\tThe ATCF SIP URI included in the Record-Route header field is used by the SCC AS to build a Route header field that the SCC AS will use when sending the in-dialog request toward the ATCF.\nG)\tthe P-Asserted-Identity header field set to the C-MSISDN (see subclause 6A.3.1) previously received from the SCC AS and associated with the registration path of the SIP INVITE request; and\n3)\tfor registration path(s), which have the C-MSISDN equal to the C-MSISDN associated with the registration path of the SIP INVITE request due to STI-rSR, reset the CS to PS SRVCC access transfer in progress flag (see subclause 6A.3.1).\nNOTE 15:\tUpon receiving a SIP 2xx response to the SIP INVITE request due to ATU-STI for CS to PS SRVCC, the ATCF requests the ATGW to update forwarding of the audio media from the SC UE to the remote UE. The details of interaction between the ATCF and the ATGW are out of scope of this document.\nUpon receiving a SIP 2xx response to the SIP INVITE request due to ATU-STI for CS to PS SRVCC, the ATCF shall:\n1)\tsend a SIP BYE request to terminate the dialog between MSC Server and ATCF, following the procedures specified in 3GPP TS 24.229 [2].\nUpon receiving SIP INVITE request due to STI-rSR and if:\n1)\tthe CS to PS SRVCC access transfer in progress flag (see subclause 6A.3.1) of the registration path of the SIP INVITE request due to STI-rSR is set; and\n2)\tthe home leg of the session being transferred by CS to PS SRVCC (see subclause 6A.3.1) of the registration path of the SIP INVITE request due to STI-rSR is set and the dialog of the home leg of the session being transferred by CS to PS SRVCC has already been released;\nthe ATCF shall initiate a new dialog toward the SCC AS (i.e. a target access leg) by sending an initial SIP INVITE request due to ATU-STI for CS to PS SRVCC. The ATCF shall populate the SIP INVITE request with:\n1)\tif the ATCF decided to anchor the media according to operator policy as specified in 3GPP TS 23.237 [9]:\nA)\tall MIME bodies of the SIP INVITE request due to STI-rSR apart from the application/sdp MIME body; and\nB)\tapplication/sdp MIME body with updated SDP offer using media parameters provided by the ATGW;\nNOTE 16:\tATCF interacts with ATGW to provide the needed media related information. The details of interaction between ATCF and ATGW are out of scope of this document.\n2)\tif the ATCF decided not to anchor the media according to operator policy as specified in 3GPP TS 23.237 [9], all MIME bodies of the originating SIP INVITE request from MSC server;\n3)\tthe Request-URI containing the ATU-STI for CS to PS SRVCC (see subclause 6A.3.1) previously received from the SCC AS and associated with the registration path of the SIP INVITE request due to STI-rSR;\n4)\tthe Contact header field that contains the contact information received in the SIP INVITE request due to STI-rSR;\n5)\tthe Record-Route header field that includes only the ATCF SIP URI, where the ATCF wants to receive subsequent in-dialog requests from the SCC AS; and\nNOTE 17:\tThe ATCF SIP URI included in the Record-Route header field is used by the SCC AS to build a Route header field that the SCC AS will use when sending the in-dialog request toward the ATCF.\n6)\tthe P-Asserted-Identity header field set to the C-MSISDN (see subclause 6A.3.1) previously received from the SCC AS and associated with the registration path of the SIP INVITE request due to STI-rSR.\nUpon receiving a SIP 1xx response or a SIP 2xx response to the SIP INVITE request due to ATU-STI for CS to PS SRVCC, the ATCF shall:\n1)\tsave the Contact header field included in the SIP response; and\n2)\tsend a SIP response to the SIP INVITE request due to STI-rSR according to 3GPP TS 24.229 [2]. The ATCF shall populate the SIP response with:\nA)\tthe same response code as the received SIP response to the SIP INVITE request due to ATU-STI for CS to PS SRVCC;\nB)\tRecord-Route header field containing the SIP URI of the ATCF; and\nC)\tthe P-Charging-Vector header field as specified in 3GPP TS 24.229 [2] including the \"related-icid\" header field parameter containing the ICID value of the source access leg in the P-Charging-Vector header field. Additionally, if an \"icid-generated-at\" header field was generated for the source access leg, ATCF shall include the \"related-icid-generated-at\" header field parameter containing the host name or IP address included in the \"icid-generated-at\" header field parameter of the source access leg.\nIf the ATCF supports the CS to PS SRVCC, in order to transfer the held session or the session in alerting phase, the ATCF shall:\n1)\tfor each registration path(s), which have the C-MSISDN equal to the C-MSISDN associated with the session of the SIP INFO request carrying the session transfer notification request:\nA)\tset the CS to PS SRVCC access transfer in progress flag (see subclause 6A.3.1); and\nB)\treset the home leg of the session being transferred by CS to PS SRVCC (see subclause 6A.3.1); and\n2)\tsend a SIP INFO request within the dialog of the SIP INFO request carrying the session transfer notification request according to 3GPP TS 24.229 [2]. The ATCF shall populate the SIP INFO request with:\nA)\tInfo-Package header field with value g.3gpp.access-transfer-events; and\nB)\tapplication/vnd.3gpp.access-transfer-events+xml MIME body associated with the info package according to IETF RFC 6086 [54]:\na)\tindicating the session transfer notification response;\nb)\tindicating that the ATCF does not require the MSC server to redirect the speech media component of the session transferred by the CS to PS SRVCC access transfer; and\nc)\tcontaining the ATGW transfer details indicating that the ATGW Transfer details content field is not included.\nIf receiving the SIP INFO request carrying the session transfer cancellation, the ATCF shall:\nNOTE 1:\tthe SIP INFO request carrying the session transfer cancellation is received only when CS to PS SRVCC is cancelled.\n1)\tsend SIP 200 (OK) response to the SIP INFO request according to 3GPP TS 24.229 [2]; and\n2)\tfor registration path(s), which have the C-MSISDN equal to the C-MSISDN associated with the registration path of the SIP INVITE request due to STI-rSR, reset the CS to PS SRVCC access transfer in progress flag (see subclause 6A.3.1).\nNOTE 2:\tIf the SIP INFO request carrying the session transfer cancellation is received, remaining procedures of this subclause are not invoked.\nUnless the determined session being transferred is released, upon receiving the SIP INFO request carrying session transfer preparation, the ATCF shall send SIP 200 (OK) response to the SIP INFO request according to 3GPP TS 24.229 [2].\nIf receiving the SIP INFO request carrying the session transfer cancellation, the ATCF shall:\nNOTE 3:\tthe SIP INFO request carrying the session transfer cancellation is received only when CS to PS SRVCC is cancelled.\n1)\tsend SIP 200 (OK) response to the SIP INFO request according to 3GPP TS 24.229 [2]; and\n2)\tfor registration path(s), which have the C-MSISDN equal to the C-MSISDN associated with the registration path of the SIP INVITE request due to STI-rSR, reset the CS to PS SRVCC access transfer in progress flag (see subclause 6A.3.1).\nNOTE 4:\tIf the SIP INFO request carrying the session transfer cancellation is received, remaining procedures of this subclause are not invoked.\nUpon receiving SIP INVITE request due to STI-rSR and if:\n1)\tthe CS to PS SRVCC access transfer in progress flag (see subclause 6A.3.1) of the registration path of the SIP INVITE request due to STI-rSR is set; and\n2)\tthe home leg of the session being transferred by CS to PS SRVCC (see subclause 6A.3.1) of the registration path of the SIP INVITE request due to STI-rSR is not set;\nthe ATCF shall initiate a new dialog toward the SCC AS (i.e. a target access leg) by sending an initial SIP INVITE request due to ATU-STI for CS to PS SRVCC. The ATCF shall populate the SIP INVITE request with:\n1)\tif the ATCF decided to anchor the media according to operator policy as specified in 3GPP TS 23.237 [9]:\nA)\tall MIME bodies of the SIP INVITE request due to STI-rSR apart from the application/sdp MIME body; and\nB)\tapplication/sdp MIME body with updated SDP offer using media parameters provided by the ATGW;\nNOTE 5:\tATCF interacts with ATGW to provide the needed media related information. The details of interaction between ATCF and ATGW are out of scope of this document.\n2)\tif the ATCF decided not to anchor the media according to operator policy as specified in 3GPP TS 23.237 [9], all MIME bodies of the originating SIP INVITE request from MSC server;\n3)\tthe Request-URI containing the ATU-STI for CS to PS SRVCC (see subclause 6A.3.1) previously received from the SCC AS and associated with the registration path of the SIP INVITE request due to STI-rSR;\n4)\tthe Contact header field that contains the contact information received in the SIP INVITE request due to STI-rSR;\n5)\tthe Record-Route header field that includes only the ATCF SIP URI, where the ATCF wants to receive subsequent in-dialog requests from the SCC AS; and\nNOTE 6:\tThe ATCF SIP URI included in the Record-Route header field is used by the SCC AS to build a Route header field that the SCC AS will use when sending the in-dialog request toward the ATCF.\n6)\tthe P-Asserted-Identity header field set to the C-MSISDN (see subclause 6A.3.1) previously received from the SCC AS and associated with the registration path of the SIP INVITE request due to STI-rSR.\nUpon receiving a SIP 1xx response or SIP 2xx response to the SIP INVITE request due to ATU-STI for CS to PS SRVCC, the ATCF shall:\n1)\tsave the Contact header field included in the SIP response; and\n2)\tsend a SIP response to the SIP INVITE request due to STI-rSR according to 3GPP TS 24.229 [2]. The ATCF shall populate the SIP response with:\nA)\tthe same response code as the received SIP response to the SIP INVITE request due to ATU-STI for CS to PS SRVCC;\nB)\tRecord-Route header field containing the SIP URI of the ATCF; and\nC)\tthe P-Charging-Vector header field as specified in 3GPP TS 24.229 [2] including the \"related-icid\" header field parameter containing the ICID value of the source access leg in the P-Charging-Vector header field. Additionally, if an \"icid-generated-at\" header field was generated for the source access leg, ATCF shall include the \"related-icid-generated-at\" header field parameter containing the host name or IP address included in the \"icid-generated-at\" header field parameter of the source access leg.\n",
                            "figures_meta_data": [],
                            "tables": []
                        }
                    ]
                }
            ]
        },
        {
            "title": "13\tRoles for media adding/deleting for access transfer",
            "description": "",
            "summary": "",
            "tables": [],
            "figures_meta_data": [],
            "subsections": [
                {
                    "title": "13.1\tIntroduction",
                    "description": "",
                    "summary": "",
                    "text_content": "This clause specifies the procedures for adding or deleting media to an existing multimedia session. Procedures are specified for the SC UE and the SCC AS.\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "13.2\tSC UE",
                    "description": "",
                    "summary": "",
                    "text_content": "",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": [
                        {
                            "title": "dding or removing media through Gm",
                            "text_content": "If the SC UE wants to add or remove media components to a session that was previously established using Gm reference point, the SC UE shall follow the procedures defined in 3GPP TS 24.229 [2] for adding/removing PS media.\nIf the SC UE wants to transfer media components from the source access leg to an existing target access leg (i.e. the access legs were previously established due to the partial session transfer) using Gm reference point, the SC UE shall:\n1.\tadd the media components to the target access leg; and\n2.\tremove those media components from the source access leg,\nby using procedures defined in 3GPP TS 24.229 [2] for adding/removing PS media.\nIf SC using ICS is enabled then if the SC UE wants to add or remove CS media components to a session, the SC UE shall follow the procedures defined in 3GPP TS 24.292 [4].\nIf the SC UE receives a SIP re-INVITE request or a SIP UPDATE request from the remote UE to add or remove media components to a session that was previously established using Gm, the SC UE shall:\n-\tfollow the procedures defined in 3GPP TS 24.229 [2] for adding or removing PS media; and\n-\tif SC using ICS is enabled, follow the procedures defined in 3GPP TS 24.292 [4] for adding or removing CS media to the session.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "dding Gm control to existing CS session",
                            "text_content": "The SC UE shall add Gm control to an existing CS session only when SC using ICS is enabled and when there is a single full-duplex session with speech media component over CS. If there is more than one full-duplex session with speech media component, the SC UE shall release all the ongoing sessions that are not currently active before attempting the procedures described in this section.\nIf SC using ICS is enabled and the SC UE wants to add Gm control to an existing CS session that was established without Gm, after registering with the IM CN subsystem, the SC UE shall send an initial SIP INVITE request over the PS access in accordance with 3GPP TS 24.229 [2]. The SC UE shall populate the SIP INVITE request as follows:\n-\tset the Request-URI to the static STI;\n-\tset the SDP payload, in accordance with the procedures defined in 3GPP TS 24.292 [4], proposing a speech media component over a circuit switched bearer. The SC UE can optionally include additional PS media to the SDP in accordance to the procedures defined in 3GPP TS 24.229 [2]; and\n-\tsignalling elements described in subclause 6A.2.2.2.\nUpon receiving a SIP 200 (OK) response, the SC UE shall treat the ongoing CS call as established using Gm and shall follow the \"ICS UE using Gm\" procedures defined in 3GPP TS 24.292 [4] for controlling the CS call.\nIf SC using ICS is enabled and the SC UE receives a new SIP INVITE request containing a speech media component over a circuit-switched bearer in the SDP and the SCC AS PSI DN matches the B-party number of the ongoing CS call that was established without Gm, the SC UE shall:\n-\trespond to the SIP INVITE request in accordance with the procedures defined in 3GPP TS 24.292 [4]; and\n-\ttreat the ongoing CS call as established using Gm and shall follow the \"ICS UE using Gm\" procedures defined in 3GPP TS 24.292 [4] for controlling the CS call.\n",
                            "figures_meta_data": [],
                            "tables": []
                        }
                    ]
                },
                {
                    "title": "13.3\tSCC AS",
                    "description": "",
                    "summary": "",
                    "text_content": "",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": [
                        {
                            "title": "dding or removing media through Gm",
                            "text_content": "If the SCC AS receives a SIP re-INVITE request or a SIP UPDATE request from the SC UE, in which already existing media components of the session are transferred from a source access leg to an already existing target access leg (i.e. the target access leg was already established due to partial session transfer), the SCC AS shall update the remote UE using the session transfer procedures defined in subclause 10.3.2.\nNOTE:\tThe SC UE indicates that media is switched from the source access leg to the target access leg by using the procedures defined in 3GPP TS 24.229 [2] for adding / removing PS media, i.e. the related connection and port information of the transferred media component within the SDP is changed from the source access leg to the target access leg.\nIf the SCC AS receives a SIP re-INVITE request or a SIP UPDATE request from the SC UE or remote UE to add/remove new media components, to an existing access leg of the session established using Gm, the SCC AS shall follow the procedures defined in 3GPP TS 24.229 [2] for adding or removing PS media and shall follow the procedures defined in 3GPP TS 24.292 [4] for adding or removing CS media to the session. If both a PS access leg and a CS access leg exist, the SCC AS shall offer on the PS access leg any new media components offered by the remote UE. If no PS access leg exists and a CS access leg exists, the SCC AS shall reject any new media components offered by the remote UE by setting the port to zero in an SDP answer sent on the remote leg. If a CS access leg exists, the SCC AS shall not offer any new media components offered by the remote UE via a CS access leg.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "dding Gm control to existing CS session",
                            "text_content": "If the SCC AS receives a SIP INVITE request containing the static STI in the Request-URI or receives a SIP re-INVITE request containing one or more already existing media lines in the SDP for audio indicating a CS bearer as defined in IETF RFC 7195 [73] the SCC AS shall:\n1)\tdetermine if this SIP INVITE request or SIP re-INVITE request is for an ongoing call by determining if the received contents of the Contact header field of the SIP request is bound to an ongoing CS call session identifier;\n2)\tif the SC UE has an ongoing CS call:\n-\trespond to the SIP INVITE request or SIP re-INVITE request in accordance with the procedures defined in 3GPP TS 24.292 [4]. The SCC AS shall populate the SIP INVITE request with signalling elements described in subclause 6A.4.3; and\n-\ttreat the ongoing CS call as established using Gm and shall follow the \"SCC AS for service control over Gm\" procedures defined in 3GPP TS 24.292 [4] for controlling the CS call; and\n3)\tif the SIP INVITE request or SIP re-INVITE request contains additional PS media, the SCC AS shall send a SIP re-INVITE request towards the remote UE, including the newly added PS media, in accordance with the procedures defined in 3GPP TS 24.229 [2].\nNOTE:\tWhen using the ICS controlled CS bearer, only one audio call can be active at a time. Nevertheless, several calls can be held in parallel. If the user decides to switch to another (previously held) call, the ICS controlled CS bearer is re-used for this call. Therefore no specific procedures for handling of held calls in the case of ICS controlled CS bearer are needed.\nThe SCC AS shall add Gm control to an existing CS session only when there is a single full-session with speech media component over CS. If the SCC AS wants to add Gm control to an existing CS session that was established without Gm, the SCC AS shall send a new SIP INVITE request over the PS access in accordance with 3GPP TS 24.229 [2]. The SCC AS shall populate the SIP INVITE request as follows:\n-\tset the Request-URI to the public user identity of the UE; and\n-\tset the SDP payload, in accordance with the procedures defined in 3GPP TS 24.292 [4], proposing speech media component over a circuit switched bearer.\nUpon receiving a SIP 200 (OK) response, the SCC AS shall treat the ongoing CS call as established using Gm and shall follow the \"SCC AS for service control over Gm\" procedures defined in 3GPP TS 24.292 [4] for controlling the CS call.\n",
                            "figures_meta_data": [],
                            "tables": []
                        }
                    ]
                }
            ]
        },
        {
            "title": "14\tVoid",
            "description": "",
            "summary": "",
            "tables": [],
            "figures_meta_data": [],
            "subsections": []
        },
        {
            "title": "15\tVoid",
            "description": "",
            "summary": "",
            "tables": [],
            "figures_meta_data": [],
            "subsections": []
        },
        {
            "title": "16\tVoid",
            "description": "",
            "summary": "",
            "tables": [],
            "figures_meta_data": [],
            "subsections": []
        },
        {
            "title": "17\tVoid",
            "description": "",
            "summary": "",
            "tables": [],
            "figures_meta_data": [],
            "subsections": []
        },
        {
            "title": "18\tVoid",
            "description": "",
            "summary": "",
            "tables": [],
            "figures_meta_data": [],
            "subsections": []
        },
        {
            "title": "19\tVoid",
            "description": "",
            "summary": "",
            "tables": [],
            "figures_meta_data": [],
            "subsections": []
        },
        {
            "title": "20\tService continuity and MMTEL interactions",
            "description": "",
            "summary": "",
            "tables": [],
            "figures_meta_data": [],
            "subsections": [
                {
                    "title": "20.1\tRoles for access transfer and supplementary services interaction",
                    "description": "",
                    "summary": "",
                    "text_content": "",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": [
                        {
                            "title": "20.1.1\tIntroduction",
                            "text_content": "This subclause describes the SCC AS and SC UE procedures for interaction of access transfer when execution of supplementary service as described in 3GPP TS 22.173 [24].\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "20.1.2\tOriginating Identification Presentation (OIP)",
                            "text_content": "There are no specific procedures for the SC UE and the SCC AS for interaction of access transfer and OIP besides the procedures described in 3GPP TS 24.607 [25].\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "20.1.3\tOriginating Identification Restriction (OIR)",
                            "text_content": "There are no specific procedures for the SC UE and the SCC AS for interaction of access transfer and OIR besides the procedures described in 3GPP TS 24.607 [25].\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "20.1.4\tTerminating Identification Presentation (TIP)",
                            "text_content": "There are no specific procedures for the SC UE and the SCC AS for interaction of access transfer and TIP besides the procedures described in 3GPP TS 24.608 [26].\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "20.1.5\tTerminating Identification Restriction (TIR)",
                            "text_content": "There are no specific procedures for the SC UE and the SCC AS for interaction of access transfer and TIR besides the procedures described in 3GPP TS 24.608 [26].\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "20.1.6\tCommunication Diversion (CDIV)",
                            "text_content": "Upon receiving an incoming session split across multiple access legs, if the SC UE desires to invoke the CDIV, it may choose any of the PS access legs to invoke the call deflection supplementary service following the procedures described in 3GPP TS 24.604 [27] or the CS access leg to invoke the call deflection supplementary service following the procedures described in 3GPP TS 24.072 [42].\nNOTE:\tCommunication Forwarding unconditional, Communication forwarding on no reply, Communication Forwarding on Busy, Communication Forwarding Not Logged-in and Communication Diversion Notification supplementary services are invoked by the CDIV AS as described in 3GPP TS 24.604 [27] independent on access type.\nWhen the SCC AS which is dividing an IMS session into multiple access legs, receives a CDIV request from the SC UE on any access leg, the SCC AS shall terminate any other access legs and invoke the CDIV for that access leg according to the procedures described in 3GPP TS 24.604 [27].\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "20.1.7\tCommunication Hold (HOLD)",
                            "text_content": "When the SC UE which is dividing an IMS session through multiple access legs, desires to invoke HOLD on one or more media components, it shall proceed according to the procedures described in 3GPP TS 24.610 [28] for PS access legs, 3GPP TS 24.083 [43] for a CS access leg not controlled by the I1 interface or 3GPP TS 24.294 [44] for a CS access leg controlled by the I1 interface which contains the affected media components.\nWhen the SCC AS which dividing an IMS session into multiple access legs, receives a HOLD request from the SC UE or remote end on any access leg, it shall proceed according to the procedures described in 3GPP TS 24.610 [28] for that access leg.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "20.1.8\tCommunication Barring (CB)",
                            "text_content": "There are no specific procedures for the SC UE and the SCC AS for interaction of access transfer and CB besides the procedures described in 3GPP TS 24.611 [29].\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "20.1.9\tMessage Waiting Indication (MWI)",
                            "text_content": "There are no specific procedures for the SC UE and the SCC AS for interaction of access transfer and MWI besides the procedures described in 3GPP TS 24.606 [30].\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "20.1.10\tConference (CONF)",
                            "text_content": "When the SC UE has multiple access legs and if it wants to send any CONF related requests such as SIP SUBSCRIBE request or SIP REFER request, the SC UE may send the request on the PS access leg as describes in 3GPP TS 24.605 [31] or use the procedures described in 3GPP TS 24.294 [44] for a CS access leg controlled by the I1 interface. For a CS access leg without I1 interface control the procedures in 3GPP TS 24.084 [47] shall be used to create and add participants to a conference.\nWhen the SC UE has multiple access legs and if it receives a request on one of the access legs for CONF service to replace an existing session, the SC UE shall:\n-\tif each access les is PS access leg, follow procedures specified in 3GPP TS 24.605 [31] to establish a new session to the conference focus;\n-\tif the CS access leg is not controlled by the I1 interface follow the procedures in 3GPP TS 24.008 [8] for releasing and establishing a new call towards the conference focus; and\n-\tif the CS access leg is controlled by the I1 interface follow the procedures in 3GPP TS 24.294 [44] for establish a new session towards the conference focus.\nWhen the SC UE has multiple access legs and if it receives a request on one the access legs for CONF service to replace an existing session outside the dialog, the SC UE shall follow procedures specified in 3GPP TS 24.605 [31] to establish a new session to the conference focus.\nWhen the SC UE has multiple access legs and if the remote UE sends a request for the CONF service to replace an existing session within the same dialog, the SCC AS shall deliver the request for CONF service on the Gm controlled any of access legs or over the I1 interface if I1 interface control is used or to the CS leg if only a CS leg exists, to the SC UE.\nUpon receipt of a CC BuildMPTY request from the SC UE and if the MSC server:\n1)\tis enhanced for ICS and supports CS to PS SRVCC; and\n2)\tthe latest SRVCC information received for the registration path of the SC UE contains the ATCF management URI and the C-MSISDN;\nthen when sending the SIP INVITE request due to receipt of a CC BuildMPTY request from the SC UE as specified in 3GPP TS 29.292 [18] and 3GPP TS 24.292 [4], then the MSC server shall additionally populate the SIP INVITE request with:\n1)\ttopmost Route header field with the ATCF management URI and lr URI parameter;\n2)\tthe Accept header field containing application/vnd.3gpp.access-transfer-events+xml MIME type with the \"et\" parameter indicating ability to receive \"event-type\" attribute with the value \"2\";\n3)\tthe Recv-Info header field containing the g.3gpp.access-transfer-events info package name;\n4)\tapplication/vnd.3gpp.srvcc-ext+xml MIME body with the <srvcc-ext> root element containing the <Setup-info> element containing the CS to PS SRVCC information bound to the registration path (see subclause 6A.3.1) and indicating the \"initiator\" role of the MSC server in the session set up; and\n5)\tthe g.3gpp.ti media feature tag with value as described in subclause C.12 indicating value of an invited participant in the Contact header field.\nIf the MSC server:\n-\tis enhanced for ICS and supports CS to PS SRVCC; and\n-\tthe latest SRVCC information received for the registration path of the SC UE contains the ATCF management URI and the C-MSISDN;\nthen upon receipt of a DISCONNECT message from a SC UE with an established conference, with a transaction identifier corresponding to a specific remote party, if:\n-\tnot all conference participants are removed when the timer expires as specified in 3GPP TS 29.292 [18]; and\n-\tthe g.3gpp.ti media feature tag last provided in the Contact header field towards SCC AS had the value of the transaction identifier corresponding to a specific remote party;\nthe MSC server shall send UPDATE request within dialog of the established conference. The MSC server shall populate the SIP UPDATE request with the g.3gpp.ti media feature tag with value as described in subclause C.12 indicating value of an another participant of the established conference in the Contact header field.\nIf the ATCF supports CS to PS SRVCC then upon receipt of a UPDATE request received in dialog established as described in subclause 8.4.2.3 or a described in subclause 12.7.2, if:\n-\tthe Contact received from SCC AS indicated isfocus media feature tag; and\n-\tif the UPDATE request contains a Contact header field with the g.3gpp.ti media feature tag;\nthe ATCF shall store the value of the g.3gpp.ti media feature tag of the Contact header field of the SIP UPDATE request.\nIf the SCC AS supports CS to PS SRVCC then upon receipt of a UPDATE request received in dialog established as described in subclause 7.3.2 and if:\n-\tthe Contact sent towards ATCF indicated isfocus media feature tag; and\n-\tthe UPDATE request contains a Contact header field with the g.3gpp.ti media feature tag;\nthe SCC AS shall store the value of the g.3gpp.ti media feature tag of the Contact header field of the SIP UPDATE request.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "20.1.11\tExplicit Communication Transfer (ECT)",
                            "text_content": "When the SC UE has multiple access legs and if it acts as the transferor UE, the SC UE may send the request for ECT service on any of the PS legs as specified in 3GPP TS 24.629 [32], or on the CS access leg not controlled by the I1 interface follow the procedures in 3GPP TS 24.091 [46] and on a CS access leg controlled by the I1 interface follow the procedures in 3GPP TS 24.294 [44].\nWhen the SC UE has multiple access legs and if it acts as the transferee UE, the SCC AS may deliver the request for ECT service on any of the access legs.\nNOTE:\tDelivering of the request towards the CS access leg may be controlled by operator policy.\nWhen the SC UE has multiple access legs and if it receives an ECT request on one of the access legs, the SC UE shall follow the procedures specified in 3GPP TS 24.629 [32] to establish a new session to the Transfer Target.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "20.1.12\tAdvice of Charge (AOC)",
                            "text_content": "When the AOC service as specified in 3GPP TS 24.647 [33] is active and if the SC UE has multiple access legs, the SCC AS may deliver charging information during the communication to the SC UE over any of the access legs which accept application/vnd.etsi.aoc+xml MIME type.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "20.1.13\tClosed User Groups (CUG)",
                            "text_content": "There are no specific procedures for the SC UE and the SCC AS for interaction of access transfer and CUG besides the procedures described in 3GPP TS 24.654 [34].\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "20.1.14\tThree-Party (3PTY)",
                            "text_content": "The 3PTY service is considered as a special case of CONF service in 3GPP TS 24.605 [31] and the interaction with session transfer is the same as that specified in subclause 20.1.10 for CONF service.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "20.1.15\tFlexible Alerting (FA)",
                            "text_content": "There are no specific procedures for the SC UE and the SCC AS for interaction of access transfer and FA besides the procedures described in 3GPP TS 24.239 [35].\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "20.1.16\tCommunication Waiting (CW)",
                            "text_content": "Upon receiving an incoming session split across multiple access legs if the SC UE desires to invoke the CW, it may choose any of the access legs to invoke the CW service following to the procedures defined in 3GPP TS 24.615 [36].\nWhen the SCC AS which is dividing an IMS session into multiple access legs, receives a CW request from the SC UE on any access leg, the SCC AS shall invoke the CW service following the procedures defined in 3GPP TS 24.615 [36].\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "20.1.17\tCompletion of Communications to Busy Subscriber (CCBS)/Completion of Communications by No Reply (CCNR)",
                            "text_content": "There are no specific procedures for the SC UE and the SCC AS for interaction of access transfer and CCBS/CCNR besides the procedures described in 3GPP TS 24.642 [37].\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "20.1.18\tCustomized Alerting Tones (CAT)",
                            "text_content": "There are no specific procedures for the SC UE and the SCC AS for CAT besides the procedures described in 3GPP TS 24.182 [38].\nWhen the terminating network is providing , the PS to CS SRVCC for calls in alerting phase is only supported if a SIP 180 (Ringing) response is sent. This is not required as part of the  service.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "20.1.19\tMalicious Communication IDentification (MCID)",
                            "text_content": "When invoking the MCID service in temporary subscription mode and there are multiple active access legs for the session, the SC UE may send the SIP re-INVITE request for invoking MCID service as defined in 3GPP TS 24.616 [39] on any of the access legs.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "20.1.20\tReverse Charging",
                            "text_content": "The interaction of the Reverse Charging service according to 3GPP TS 24.647 [33] with access transfer is not specified in this version of the specification.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "20.1.21\tPersonal Network Management (PNM)",
                            "text_content": "The interaction of the PNM service according to 3GPP TS 24.259 [40] with access transfer is not specified in this version of the specification.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "20.1.22\tCustomized Ringing Signal (CRS)",
                            "text_content": "The interaction of the CRS service according to 3GPP TS 24.183 [41] with access transfer is not specified in this version of the specification.\n",
                            "figures_meta_data": [],
                            "tables": []
                        }
                    ]
                },
                {
                    "title": "20.2\tVoid",
                    "description": "",
                    "summary": "",
                    "text_content": "",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                }
            ]
        },
        {
            "title": "21\tVoid",
            "description": "",
            "summary": "",
            "tables": [],
            "figures_meta_data": [],
            "subsections": []
        },
        {
            "title": "22\tRoles for detection of remote leg information",
            "description": "",
            "summary": "",
            "tables": [],
            "figures_meta_data": [],
            "subsections": [
                {
                    "title": "22.1\tIntroduction",
                    "description": "",
                    "summary": "",
                    "text_content": "This clause specifies the procedures for discovery of remote leg information of a dialog anchored in SCC AS.\nProcedures are specified for the MSC server enhanced for ICS and SCC AS.\nThe procedures can be used by MSC server enhanced for ICS only in a dialog where Feature-Cap header field with g.3gpp.remote-leg-info feature-capability indicator was received.\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "22.2\tMSC server enhanced for ICS",
                    "description": "",
                    "summary": "",
                    "text_content": "",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": [
                        {
                            "title": "22.2.1\tDistinction of requests",
                            "text_content": "The MSC server enhanced for ICS needs to distinguish the following SIP requests:\n1)\tSIP INFO request:\nA)\twith Info-Package header field with value g.3gpp.state-and-event; and\nB)\twith application/vnd.3gpp.state-and-event-info+xml MIME body associated with the info package according to IETF RFC 6086 [54] as described in subclause D.2.3, containing a <state-and-event-info> root element, the <state-and-event-info> element containing an <anyExt> element and the <anyExt> element containing a <remoteLegInfoResponse> element with remote leg information.\nIn the procedures below, such requests are known as \"SIP INFO requests carrying the remote leg information\".\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "22.2.2\tDiscover remote leg information",
                            "text_content": "In order to discover remote leg information of a dialog where Feature-Cap header field with g.3gpp.remote-leg-info feature-capability indicator was received, the MSC server enhanced for ICS shall send a SIP INFO request according to 3GPP TS 24.229 [2] within the dialog. The MSC server enhanced for ICS shall populate the SIP INFO request with:\na)\tInfo-Package header field with value g.3gpp.state-and-event; and\nb)\tapplication/vnd.3gpp.state-and-event-info+xml MIME body associated with the info package according to IETF RFC 6086 [54] according to subclause D.2.3, containing a <state-and-event-info> root element, the <state-and-event-info> element containing an <anyExt> element, the <anyExt> element containing a <remoteLegInfoRequest> element and the <remoteLegInfoRequest> element indicating the requested remote leg information.\nUpon receiving a SIP INFO request carrying the remote leg information in the dialog dialog where Feature-Cap header field with g.3gpp.remote-leg-info feature-capability indicator was received, the MSC server enhanced for ICS shall associate the information received in the SIP INFO request carrying the remote leg information with the dialog of the SIP INFO request carrying the remote leg information.\nNOTE:\tThe MSC server enhanced for ICS uses the remote leg information when performing supplementary services on the session transferred by PS to CS access transfer.\nThe MSC server enhanced for ICS shall ignore any unknown element and any unknown attribute included in the <remoteLegInfoResponse> element of the SIP INFO request carrying the request for the remote leg information.\n",
                            "figures_meta_data": [],
                            "tables": []
                        }
                    ]
                },
                {
                    "title": "22.3\tSCC AS",
                    "description": "",
                    "summary": "",
                    "text_content": "",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": [
                        {
                            "title": "22.3.1\tDistinction of requests",
                            "text_content": "The SCC AS needs to distinguish the following SIP requests:\n1)\tSIP INFO request:\nA)\twith Info-Package header field with value g.3gpp.state-and-event; and\nB)\twith application/vnd.3gpp.state-and-event-info+xml MIME body associated with the info package according to IETF RFC 6086 [54] as described in subclause D.2.3, containing a <state-and-event-info> root element, the <state-and-event-info> element containing an <anyExt> element and the <anyExt> element containing a <remoteLegInfoRequest> element.\nIn the procedures below, such requests are known as \"SIP INFO requests carrying the request for the remote leg information\".\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "22.3.2\tProviding remote leg information",
                            "text_content": "Upon receiving a SIP INFO request carrying the request for the remote leg information in the dialog where SCC AS included the Feature-Cap header field with g.3gpp.remote-leg-info feature-capability indicator, the SCC AS shall send shall send a SIP INFO request according to 3GPP TS 24.229 [2] within the dialog. The SCC AS shall populate the SIP INFO request with:\na)\tInfo-Package header field with value g.3gpp.state-and-event; and\nb)\tapplication/vnd.3gpp.state-and-event-info+xml MIME body associated with the info package according to IETF RFC 6086 [54] according to subclause D.2.3, containing a <state-and-event-info> root element, the <state-and-event-info> element containing an <anyExt> element and the <anyExt> element containing a <remoteLegInfoResponse> element with remote leg information requested in the SIP INFO request carrying the request for the remote leg information.\nThe SCC AS shall ignore any unknown element and any unknown attribute included in the <remoteLegInfoRequest> element of the SIP INFO request carrying the request for the remote leg information.\n",
                            "figures_meta_data": [],
                            "tables": []
                        }
                    ]
                }
            ]
        },
        {
            "title": "A.1\tScope of signalling flows",
            "description": "This annex gives examples of signalling flows for Service Continuity based on the Session Initiation Protocol (SIP) and SIP Events.\nThese signalling flows provide detailed signalling flows, which expand on the overview information flows provided in 3GPP TS 23.237 [9].\n",
            "summary": "",
            "tables": [],
            "figures_meta_data": [],
            "subsections": []
        },
        {
            "title": "A.2\tIntroduction",
            "description": "",
            "summary": "",
            "tables": [],
            "figures_meta_data": [],
            "subsections": [
                {
                    "title": "General",
                    "description": "",
                    "summary": "",
                    "text_content": "The signalling flows provided in this annex follow the methodology developed in 3GPP TS 24.228 [3].\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "Key required to interpret signalling flows",
                    "description": "",
                    "summary": "",
                    "text_content": "The key to interpret signalling flows specified in 3GPP TS 24.228 [3] subclauses 4.1 and 4.2 applies with the additions specified below:\n-\ttel:+1-237-555-1111 represents the public user identity of SC UE A.\n-\ttel:+1-237-555-2222 represents the public user identity of UE B.\n-\tsip:sccas1.home1.net represents the Internet host of\n-\tsip:pstops.transfer@sccas1.home1.net represents the PS to PS STI.\n-\tsip:domain.xfer@sccas.home1.net representing the static STI.\n-\t#### represents the contents in the headers are not shown and does not impact the implementation of the flows.\n-\tsip:home1.net represents the home network domain name of the SC UE A.\n-\tsip:additional.session.xfer@sccas.home1.net represents the additional transferred session SCC AS URI.\n-\tsip:additional.session.xfer.pscssrvcc@sccas.home1.net represents the additional transferred session SCC AS URI for PS to CS SRVCC.\n-\ttel:+1-237-888-9999\trepresents the STN-SR owned by ATCF.\n-\tsip:reg@atcf.visited2.net;lr represents the ATCF URI for originating requests.\n-\tsip:termsdgfdfwe@atcf.visited2.net represents the ATCF URI for terminating requests.\n-\tsip:atcf.visited2.net represents the ATCF management URI.\n-\tsip:sti-sr@atcf.visited2.net represents the STI-rSR owned by ATCF.\n-\tsip:AUT-STI1@sccas.home1.net represents the ATU-STI for PS to CS SRVCC.\n-\tsip:cs2ps@sccas1.home1.net represents the ATU-STI for  CS to PS SRVCC.\n-\tsip:termpdfjkghlj@msc123.visited2.net;lr represents the MSC URI for terminating requests.\n-\tsip:msc123.visited2.net represents the MSC management URI.\n-\tsip:eatf1.visit1.net represents the EATF URI.\n-\tsip:ecscf.visit1.net represents the E-CSCF URI.\nEach signalling flow table contains descriptions for headers where the content of the header is new to that signalling flow, as is already performed in 3GPP TS 24.228 [3].\nHowever, 3GPP TS 24.228 [3] includes extensive descriptions for the contents of various headers following each of the tables representing the contents of the signalling flows. Where the operation of the header is identical to that shown in 3GPP TS 24.228 [3], then such text is not reproduced in the present document.\nAdditional text may also be found on the contents of headers within 3GPP TS 24.228 [3] in addition to the material shown in the present document.\nIn order to differentiate between messages for SIP and media, the notation in figure A.2-1 is used.\nFigure A.2-1 illustrates the signalling flow notation for a telecommunication system, depicting the sequence of events and messages exchanged between various network elements. The figure showcases the interaction between the network elements, including the mobile station (MS), home subscriber station (HSS), and the core network, through a series of signalling protocols. The visual representation emphasizes the importance of clear communication and coordination among these components to ensure efficient data transmission and management.\nFigure A.2-1: Signalling flow notation\nFor the signalling flows for registration (see subclause A.3.3), where the UE is using NG-RAN (see 3GPP TS 23.501 [37]), the MME is an AMF.\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                }
            ]
        },
        {
            "title": "A.3\tSignalling flows for registration",
            "description": "",
            "summary": "",
            "tables": [],
            "figures_meta_data": [],
            "subsections": [
                {
                    "title": "Introduction",
                    "description": "",
                    "summary": "",
                    "text_content": "When using CS access for media and to make use of the ISC procedures, the SC UE is registered in IM CN subsystem and the signalling flows are defined in 3GPP TS 24.292 [4] clause A.2.\nWhen initiating a CS call, the SC UE can be registered in the CS domain as defined in 3GPP TS 24.008 [8].\nWhenever the UE acquires IP connectivity via an IP-CAN, the signalling flows for registration in the IM CN subsystem are defined in 3GPP TS 24.228 [3].\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "Signalling flows for multiple registration for service continuity",
                    "description": "",
                    "summary": "",
                    "text_content": "The signalling flows shown in figure A.3.2-1 gives an example when a UE connects to different IP-CAN respectively and performs multiple registrations. In this example the UE also supports the Controller UE procedures for IUT transfer. In this example the SCC AS receives the registration state information that it needs to implement SCC specific requirements from the third-party SIP REGISTER request.\n\nFigure A.3.2-1 illustrates the signalling flows for multiple registrations in a telecommunication network. The figure depicts the interactions between the network elements involved in the registration process, including the home network, the service provider network, and the home network's access network. The figure highlights the use of Diameter protocol for signalling, with the home network initiating the registration request and the service provider network responding with a registration acknowledgement. The figure also shows the use of SIP (Session Initiation Protocol) for session control, with the home network and the service provider network exchanging SIP messages to establish and manage the registration session. The figure is a valuable resource for understanding the complex interactions involved in the registration process and the role of different network elements in this process.\nFigure A.3.2-1 Signalling flows for multiple registrations\n1.\tSIP REGISTER request (UE to P-CSCF#1)-See example in table A.3.2-1\nUE sends the SIP REGISTER request via the IP-CAN#1.\nNOTE 1:\tFor clarity, the unprotected SIP REGISTER request via the IP-CAN#1 is not shown in this example.\nTable A.3.2-1SIP REGISTER request (UE to P-CSCF#1)\nREGISTER sip:registrar.home1.net SIP/2.0\nVia: SIP/2.0/UDP [5555::aaa:bbb:ccc:ddd]:1357;comp=sigcomp;branch=z9hG4bKnashds7\nMax-Forwards: 70\nP-Access-Network-Info: 3GPP-UTRAN-TDD; utran-cell-id-3gpp=234151D0FCE11\nFrom: <sip:user1_public1@home1.net>;tag=4fa3\nTo: <sip:user1_public1@home1.net>\nContact: <sip:[5555::aaa:bbb:ccc:ddd]:1357;comp=sigcomp>; reg-id=1; +sip.instance=\"< urn:gsma:imei:90420156-025763-0 >\";+g.3gpp.icsi-ref=\"urn%3Aurn-7%3A3gpp-service.ims.icsi.mmtel\";+g.3gpp.ics=\"principal\";+g.3gpp.accesstype=\"cellular1\";expires=600000\nCall-ID: apb0s09dkjdfglkj49111\nAuthorization: Digest username=\"user1_private@home1.net\", realm=\"registrar.home1.net\", nonce=base64( + AUTN + server specific data), algorithm=AKAv1-MD5, uri=\"sip:registrar.home1.net\", response=\"6629fae05397450978507c4ef1\"\nSecurity-Client: ipsec-3gpp; alg=hmac-sha-1-96; spi-c=23456789; spi-s=12345678; port-c=2468; port-s=1357\nSecurity-Verify: ipsec-3gpp; q=0.1; alg=hmac-sha-1-96; spi-c=98765432; spi-s=87654321; port-c=8642; port-s=7531\nRequire: sec-agree\nProxy-Require: sec-agree\nCSeq: 2 REGISTER\nSupported: path, outbound, gruu\nContent-Length: 0\n\n2.\tSIP REGISTER request (P-CSCF#1 to I-CSCF)-See example in table A.3.2-2\nAfter performing the DNS query, the P-CSCF#1 forwards the SIP REGISTER request towards I-CSCF. The P-CSCF adds a Path header field with a flow token and includes the 'ob' parameter.\nTable A.3.2-2 SIP REGISTER request (P-CSCF#1 to I-CSCF)\nREGISTER sip:registrar.home1.net SIP/2.0\nVia: SIP/2.0/UDP pcscf1.visited1.net;branch=z9hG4bK34.1, SIP/2.0/UDP [5555::aaa:bbb:ccc:ddd]:1357;comp=sigcomp;branch=z9hG4bKnashds7\nMax-Forwards: 69\nP-Access-Network-Info:\nPath: <sip:;ob>\nRequire: path\nP-Visited-Network-ID: \"Visited Network Number 1\"\nP-Charging-Vector: icid-value=\"AyretyU0dm+6O2IrT5tAFrbHLso=023551024\"\nFrom:\nTo:\nContact:\nCall-ID:\nAuthorization: Digest username=\"user1_private@home1.net\", realm=\"registrar.home1.net\", nonce=base64( + AUTN + server specific data), algorithm=AKAv1-MD5, uri=\"sip:registrar.home1.net\", response=\"6629fae05397450978507c4ef1\", integrity-protected=yes\nCSeq:\nSupported:\nContent-Length:\n\n3.\tSIP REGISTER request (I-CSCF to S-CSCF)\nThe I-CSCF forwards the SIP REGISTER request to the S-CSCF.\n4.\tSIP 200 (OK) response (S-CSCF to I-CSCF)-See example in table A.3.2-4\nThe S-CSCF sends a SIP 200 (OK) response to the I-CSCF indicating that Registration was successful. AS the URI in the first Path header field has an \"ob\" URI parameter, it include a Require header field with the option-tag \"outbound\".\nTable A.3.2-4: SIP 200 (OK) response (S-CSCF to I-CSCF)\nSIP/2.0 200 OK\nVia: SIP/2.0/UDP icscf1_p.home1.net;branch=z9hG4bK45.1, SIP/2.0/UDP pcscf1.visited1.net;branch=z9hG4bK34.1, SIP/2.0/UDP [5555::aaa:bbb:ccc:ddd]:1357;comp=sigcomp;branch=z9hG4bKnashds7\nPath: <sip:term@pcscf1.visited1.net;lr;ob>\nService-Route: <sip:orig@scscf1.home1.net;lr>\nFrom:\nTo:\nCall-ID:\nContact: <sip:[5555::aaa:bbb:ccc:ddd]:1357;comp=sigcomp>;\npub-gruu=\" sip:user1_public1@home1.net;gr=urn:uuid:f81d4fae-7dec-11d0-a76591e6bf6\"\n;temp-gruu=\"sip:tgruu.7hs==jd7vnzga5w7fajsc7-ajd6fabz5@example.com;gr\"\n;+sip.instance=\"< urn:gsma:imei:90420156-025763-0 >\"+g.3gpp.icsi-ref=\"urn%3Aurn-7%3A3gpp-service.ims.icsi.mmtel\";+g.3gpp.ics=\"principal\";+g.3gpp.accesstype=\"cellular1\"\n;expires=600000\nCSeq:\nSupported: path, outbound\nRequire: outbound\nDate: Wed, 11 July 2001 08:49:37 GMT\nP-Associated-URI: <sip:user1_public2@home1.net>, <sip:user1_public3@home1.net>, <sip:+1-212-555-1111@home1.net;user=phone>\nContent-Length:\n\n5-6.\tSIP 200 (OK) response (I-CSCF to UE)\nThe I-CSCF forwards the SIP 200 (OK) response to the UE via P-CSCF#1.\n7.\tSIP REGISTER request (S-CSCF to SCC AS)-See example in table A.3.2-7\nAfter UE successfully registered in the IM CN subsystem, the S-CSCF sends a third party SIP REGISTER request to the SCC AS based on the initial filter criteria it received.\nTable A.3.2-7: SIP REGISTER request (S-CSCF to SCC AS)\nREGISTER sip: sccas.home1.net /2.0\nVia: SIP/2.0/UDP scscf1.home1.net;branch=z9hG499ffhy\nMax-Forwards: 70\nFrom: <sip:scscf1.home1.net>; tag=538ya\nTo: <sip:user1_public1@home1.net>\nCall-ID: 1asdaddlrfjflslj222\nP-Access-Network-Info: 3GPP-UTRAN-TDD; utran-cell-id-3gpp=234151D0FCE11\nContact: <sip:scscf1.home1.net>; expires=600000\nCSeq: 87 REGISTER\nContent-Type: multipart/mixed;boundary=\"boundary1\"\nContent-Length: (…)\n\n--boundary1\nContent-Type: message/sip\n\nREGISTER sip:registrar.home1.net SIP/2.0\nVia: SIP/2.0/UDP pcscf1.visited1.net;branch=z9hG4bK34.1, SIP/2.0/UDP [5555::aaa:bbb:ccc:ddd]:1357;comp=sigcomp;branch=z9hG4bKnashds7\nMax-Forwards: 69\nP-Access-Network-Info: 3GPP-UTRAN-TDD; utran-cell-id-3gpp=234151D0FCE11\nPath: <sip:;ob>\nRequire: path\nP-Visited-Network-ID: \"Visited Network Number 1\"\nP-Charging-Vector: icid-value=\"AyretyU0dm+6O2IrT5tAFrbHLso=023551024\"\nFrom: <sip:user1_public1@home1.net>;tag=4fa3\nTo: <sip:user1_public1@home1.net>\nContact: <sip:[5555::aaa:bbb:ccc:ddd]:1357;comp=sigcomp>; reg-id=1; +sip.instance=\"< urn:gsma:imei:90420156-025763-0>\";+g.3gpp.icsi-ref=\"urn%3Aurn-7%3A3gpp-service.ims.icsi.mmtel\";+g.3gpp.ics=\"principal\";+g.3gpp.accesstype=\"cellular1\";expires=600000\nCall-ID: apb0s09dkjdfglkj49111\nAuthorization: Digest username=\"user1_private@home1.net\", realm=\"registrar.home1.net\", nonce=base64( + AUTN + server specific data), algorithm=AKAv1-MD5, uri=\"sip:registrar.home1.net\", response=\"6629fae05397450978507c4ef1\"\nCSeq: 2 REGISTER\nSupported: path, outbound, gruu\nContent-Length: 0\n\n--boundary1\nContent-Type: message/sip\n\nSIP/2.0 200 OK\nVia: SIP/2.0/UDP icscf1_p.home1.net;branch=z9hG4bK45.1, SIP/2.0/UDP pcscf1.visited1.net;branch=z9hG4bK34.1, SIP/2.0/UDP [5555::aaa:bbb:ccc:ddd]:1357;comp=sigcomp;branch=z9hG4bKnashds7\nPath: <sip:term@pcscf1.visited1.net;lr;ob>\nService-Route: <sip:orig@scscf1.home1.net;lr>\nFrom: <sip:user1_public1@home1.net>;tag=4fa3\nTo: <sip:user1_public1@home1.net>;tag=3ec1\nCall-ID: apb03a0s09dkjdfglkj49111\nContact: <sip:[5555::aaa:bbb:ccc:ddd]:1357;comp=sigcomp>;\npub-gruu=\"sip:user1_public1@home1.net;gr=urn:uuid:f81d4fae-7dec-11d0-a765-00a0c91e6bf6\"\n;temp-gruu=\"sip:tgruu.7hs==jd7vnzga5w7fajsc7-ajd6fabz0f8g5@example.com;gr\"\n;+sip.instance=\"< urn:gsma:imei:90420156-025763-0>\";+g.3gpp.icsi-ref=\"urn%3Aurn-7%3A3gpp-service.ims.icsi.mmtel\";+g.3gpp.ics=\"principal\"+g.3gpp.accesstype=\"cellular1\"\n;expires=600000\nSupported: path, outbound\nRequire: outbound\nDate: Wed, 11 July 2001 08:49:37 GMT\nP-Associated-URI: <sip:user1_public2@home1.net>, <sip:user1_public3@home1.net>, <sip:+1-212-555-1111@home1.net;user=phone>\nCSeq: 2 REGISTER\nContent-Length: 0\n\n--boundary1--\n\n8.\tSIP 200 (OK) response ( to S-CSCF)\nThe SCC AS generates the SIP 200 (OK) response to the third party SIP REGISTER request.\n9.\tUE connects to a new IP-CAN\nThe UE connects to a new IP-CAN and will perform the registration via the new IP-CAN.\n10.\tSIP REGISTER request (UE to P-CSCF#2)- See example in table A.3.2-10\nUE sends the unprotected SIP REGISTER request via the new IP-CAN to P-CSCF+2 which in this example is a different one with previous registration.\nTable A.3.2-10: SIP REGISTER request (UE to P-CSCF#2)\nREGISTER sip:registrar.home1.net SIP/2.0\nVia: SIP/2.0/UDP [5555::aaa:bbb:ccc:eee];comp=sigcomp;branch=z9hG4bKnasiuen8\nMax-Forwards: 70\nP-Access-Network-Info: IEEE-802.11b\nFrom: <sip:user1_public1@home1.net>;tag=2hiue\nTo: <sip:user1_public1@home1.net>\nContact: <sip:[5555::aaa:bbb:ccc:eee];comp=sigcomp>; reg-id=2;\t+sip.instance=\"< urn:gsma:imei:90420156-025763-0>;+g.3gpp.icsi-ref=\"urn%3Aurn-7%3A3gpp-service.ims.icsi.mmtel\";+g.3gpp.ics=\"principal\";+g.3gpp.accesstype=\"wlan2\";expires=600000\nCall-ID: E05133BD26DD\nAuthorization: Digest username=\"user1_private@home1.net\", realm=\"registrar.home1.net\", nonce=\"\", uri=\"sip:registrar.home1.net\", response=\"\"\nSecurity-Client: ipsec-3gpp; alg=hmac-sha-1-96; spi-c=23456789; spi-s=12345678; port-c=1234; port-s=5678\nRequire: sec-agree\nProxy-Require: sec-agree\nCSeq: 1 REGISTER\nSupported: path, outbound, gruu\nContent-Length: 0\n\n11-12.\tSIP REGISTER request (P-CSCF#2 to S-CSCF)\nThe P-CSCF forwards the SIP REGISTER request towards S-CSCF via I-CSCF. Likewise in message #2, P-CSCF#2 adds a Path header field with flow token and 'ob' parameter.\n13-15.\tSIP 401 (Unauthorized) response (S-CSCF to UE)\nThe authentication challenge is sent in the SIP 401 (Unauthorized) response towards the UE.\n16-18.\tSIP REGISTER request (UE to S-CSCF)\nThe UE sends the protected SIP REGISTER request towards S-CSCF using contact#2.\n19-21.\tSIP 200 (OK) response (S-CSCF to UE)\nThe S-CSCF sends a SIP 200 (OK) response towards the UE indicating that registration was successful.\n22.\tSIP REGISTER request (S-CSCF to SCC AS)\nThe S-CSCF sends a third party SIP REGISTER request to the SCC AS based on the initial filter criteria it received.\nTable A.3.2-22: SIP REGISTER request (S-CSCF to SCC AS)\nREGISTER sip: sccas.home1.net /2.0\nVia: SIP/2.0/UDP scscf1.home1.net;branch=z9hG499ffhy\nMax-Forwards: 70\nFrom: <sip:scscf1.home1.net>; tag=538ya\nTo: <sip:user1_public1@home1.net>\nP-Access-Network-Info: IEEE-802.11b\nCall-ID: 1asdaddlrfjflslj40a222\nContact: <sip:scscf1.home1.net>; expires=600000\nCSeq: 87 REGISTER\nContent-Type: multipart/mixed;boundary=\"boundary1\"\nContent-Length: (…)\n\n--boundary1\nContent-Type: message/sip\n\nREGISTER sip:registrar.home1.net SIP/2.0\nVia: SIP/2.0/UDP pcscf1.visited1.net;branch=z9hG4bK34.1, SIP/2.0/UDP [5555::aaa:bbb:ccc:eee]:1357;comp=sigcomp;branch=z9hG4bKnashds7\nMax-Forwards: 69\nP-Access-Network-Info: IEEE-802.11b\nPath: <sip:;ob>\nRequire: path\nP-Visited-Network-ID: \"Visited Network Number 1\"\nP-Charging-Vector: icid-value=\"AyretyU0dm+6O2IrT5tAFrbHLso=023551024\"\nFrom: <sip:user1_public1@home1.net>;tag=2hiue\nTo: <sip:user1_public1@home1.net>\nContact: <sip:[5555::aaa:bbb:ccc:eee];comp=sigcomp>;reg-id=2;+sip.instance=\"< urn:gsma:imei:90420156-025763-0>;+g.3gpp.icsi-ref=\"urn%3Aurn-7%3A3gpp-service.ims.icsi.mmtel\";+g.3gpp.ics=\"principal\";+g.3gpp.accesstype =\"wlan2\";expires=600000\nCall-ID: apb0s09dkjdfglkj49111\nAuthorization: Digest username=\"user1_private@home1.net\", realm=\"registrar.home1.net\", nonce=base64( + AUTN + server specific data), algorithm=AKAv1-MD5, uri=\"sip:registrar.home1.net\", response=\"6629fae05397450978507c4ef1\"\nCSeq: 3 REGISTER\nSupported: path, outbound, gruu\nContent-Length: 0\n\n--boundary1\nContent-Type: message/sip\n\nSIP/2.0 200 OK\nVia: SIP/2.0/UDP icscf1_p.home1.net;branch=z9hG4bK45.1, SIP/2.0/UDP pcscf1.visited1.net;branch=z9hG4bK34.1, SIP/2.0/UDP [5555::aaa:bbb:ccc:eee]:1357;comp=sigcomp;branch=z9hG4bKnashds7\nPath: <sip:term@pcscf1.visited1.net;lr;ob>\nService-Route: <sip:orig@scscf1.home1.net;lr>\nFrom: <sip:user1_public1@home1.net>;tag=2hiue\nTo: <sip:user1_public1@home1.net>;tag=2da87\nCall-ID: apb03a0s09dkjdfglkj49111\nContact: <sip:[5555::aaa:bbb:ccc:ddd]:1357;comp=sigcomp>;\npub-gruu=\"sip:user1_public1@home1.net;gr=urn:uuid:f81d4fae-7dec-11d0-a765-00a0c91e6bf6\"\n;temp-gruu=\"sip:tgruu.7hs==jd7vnzga5w7fajsc7-ajd6fabz0f8g5@example.com;gr\"\n;+sip.instance=\"<urn:gsma:imei:90420156-025763-0>\";+g.3gpp.icsi-ref=\"urn%3Aurn-7%3A3gpp-service.ims.icsi.mmtel\";+g.3gpp.ics=\"principal\";+g.3gpp.accesstype=\"wlan2\"\n;expires=600000\nSupported: path, outbound\nRequire: outbound\nDate: Wed, 11 July 2001 08:49:37 GMT\nP-Associated-URI: <sip:user1_public2@home1.net>, <sip:user1_public3@home1.net>, <sip:+1-212-555-1111@home1.net;user=phone>\nCSeq: 3 REGISTER\nContent-Length: 0\n\n--boundary1--\n\n23.\tSIP 200 (OK) response ( to S-CSCF)\nThe SCC AS generates the SIP 200 (OK) response to the third-party SIP REGISTER request.\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "A.3.3\tSignalling flows for registration with SRVCC enhancements",
                    "description": "",
                    "summary": "",
                    "text_content": "The signalling flows shown in figure A.3.3-1 gives an example flow for UE registration when ATCF is invoked.\nFigure A.3.3-1 illustrates the process of registration with SRVCC enhancements, showcasing the seamless transition between different network domains. The figure highlights the key components involved, including the Mobility Service Center (MSC), Home Location Register (HLR), and Serving Mobility Management Entity (SMME). The diagram emphasizes the role of the Session Initiation Protocol (SIP) signaling and the use of SRVCC to maintain call continuity during network handovers. The figure also demonstrates the importance of Quality of Service (QoS) management and the integration of various network elements to ensure a smooth user experience.\nFigure A.3.3-1 registration with SRVCC enhancements\n1.\tSIP REGISTER request (UE to P-CSCF) - see example in table A.3.3-1\nUE sends the unprotected SIP REGISTER request to P-CSCF.\nTable A.3.3-1: SIP REGISTER request (UE to P-CSCF)\nREGISTER sip:home1.net SIP/2.0\nVia: SIP/2.0/UDP [5555::aaa:bbb:ccc:eee];comp=sigcomp;branch=z9hG4bKnasiuen8\nMax-Forwards: 70\nP-Access-Network-Info: 3GPP-UTRAN-TDD; utran-cell-id-3gpp=234151D0FCE11\nFrom: <sip:user1_public1@home1.net>;tag=2hiue\nTo: <sip:user1_public1@home1.net>\nContact: <sip:[5555::aaa:bbb:ccc:eee];comp=sigcomp>;+sip.instance=\"<urn:gsma:imei:90420156-025763-0>;+g.3gpp.icsi-ref=\"urn%3Aurn-7%3A3gpp-service.ims.icsi.mmtel\"\nCall-ID: E05133BD26DD\nAuthorization: Digest username=\"user1_private@home1.net\", realm=\"registrar.home1.net\", nonce=\"\", uri=\"sip:home1.net\", response=\"\"\nSecurity-Client: ipsec-3gpp; alg=hmac-sha-1-96; spi-c=23456789; spi-s=12345678; port-c=1234; port-s=5678\nRequire: sec-agree\nProxy-Require: sec-agree\nCSeq: 1 REGISTER\nSupported: path, gruu\nContent-Length: 0\n\n2.\tSIP REGISTER request (P-CSCF to ATCF) - see example in table A.3.3-2\nThe P-CSCF forwards the SIP REGISTER request towards ATCF.\nTable A.3.3-2: SIP REGISTER request (P-CSCF to ATCF)\nREGISTER sip:home1.net SIP/2.0\nPath:\t<sip:aga2gfgf@pcscf1.visited2.net:5070;ob>\nRoute: <sip:reg@atcf.visited2.net;lr>\nP-Visited-Network-ID: \"Visited Network Number 1\"\nP-Charging-Vector: icid-value=\"AyretyU0dm+6O2IrT5tAFrbHLso=023551024\";orig-ioi=\"12345\"\nVia: SIP/2.0/UDP pcscf1.visited2.net:5060;branch=z9hG4bKnas56565, SIP/2.0/UDP [5555::aaa:bbb:ccc:eee];comp=sigcomp;branch=z9hG4bKnasiuen8;rport=5060;received=5555::aaa:bbb:ccc:eee\nMax-Forwards: 69\nP-Access-Network-Info:\nFrom:\nTo:\nContact:\nCall-ID:\nAuthorization:\nRequire:\nProxy-Require:\nCSeq:\nSupported:\nContent-Length:\n\nRoute:\tATCF URI for originating requests (as configured in P-CSCF).\n3.-4.\tSIP REGISTER request (ATCF towards S-CSCF) - see example in table A.3.3-3\nThe ATCF decides to include itself for sessions created using this registration and forwards the SIP REGISTER request along the Route header fields.\nTable A.3.3-3: SIP REGISTER request (ATCF towards S-CSCF)\nREGISTER sip:home1.net SIP/2.0\nFeature-Caps: *;+g.3gpp.atcf=\"<tel:+1-237-888-9999>\"; +g.3gpp.atcf-mgmt-uri = \"<sip:atcf.visited2.net>\";+g.3gpp.atcf-path=\"<sip:termsdgfdfwe@atcf.visited2.net>\";+g.3gpp.mid-call;+g.3gpp.srvcc-alerting\nPath:\t<sip:termsdgfdfwe@atcf.visited2.net>,<sip:aga2gfgf@pcscf1.visited2.net:5070;ob>\nRoute: <sip:icscf.home1.net;lr>\nP-Visited-Network-ID:\nP-Charging-Vector:\nVia: SIP/2.0/UDP atcf.visited2.net:5060;branch=z9hG4bKnas5889; SIP/2.0/UDP pcscf1.visited2.net:5060;branch=z9hG4bKnas56565, SIP/2.0/UDP [5555::aaa:bbb:ccc:eee];comp=sigcomp;branch=z9hG4bKnasiuen8;rport=5060;received=5555::aaa:bbb:ccc:eee\nMax-Forwards: 68\nP-Access-Network-Info:\nFrom:\nTo:\nContact:\nCall-ID:\nAuthorization:\nRequire:\nProxy-Require:\nCSeq:\nSupported:\nContent-Length:\n\nPath:\tATCF URI for terminating requests followed by P-CSCF URI for terminating requests. ATCF URI for terminating requests uniquely identifies registration path (or registration flow, if multiple registration mechanism is used).\nFeature-Caps:\tThe header field contains:\n-\tg.3gpp.atcf feature-capability indicator indicating that the ATCF role is supported by this URI;\n-\tg.3gpp.atcf-mgmt-uri feature-capability indicator indicating the management URI of the ATCF for receiving SIP MESSAGE requests containing SRVCC related information and the g.3gpp.atcf-path feature-capability indicator. The value of the g.3gpp.atcf feature-capability indicator contains the STN-SR allocated by ATCF. The value of the g.3gpp.atcf-mgmt-uri feature-capability indicator contains the ATCF management URI. The value of the g.3gpp.atcf-path feature-capability indicator is the ATCF URI for terminating requests;\n-\tg.3gpp.mid-call indicating that all MSC servers, which can be involved in the SRVCC procedures and which are in the same network as the ATCF, support the MSC server assisted mid-call feature; and\n-\tg.3gpp.srvcc-alerting indicating that all MSC servers, which can be involved in the SRVCC procedures and which are in the same network as the ATCF, support the PS to CS SRVCC for calls in alerting phase.\nRoute:\tURI of the entry point of the home network of the UE.\n5-8.\tSIP 401 (Unauthorized) response (S-CSCF to UE)\nThe authentication challenge is sent in the SIP 401 (Unauthorized) response towards the UE.\n9.\tSIP REGISTER request (UE to P-CSCF) - see example in table A.3.3-9\nUE sends the protected SIP REGISTER request to P-CSCF.\nTable A.3.3-9: SIP REGISTER request (UE to P-CSCF)\nREGISTER sip:home1.net SIP/2.0\nVia: SIP/2.0/UDP [5555::aaa:bbb:ccc:eee];comp=sigcomp;branch=z9hG4bKnasiuen8\nMax-Forwards: 70\nP-Access-Network-Info:\nFrom:\nTo:\nContact:\nCall-ID:\nAuthorization: Digest username=\"user1_private@home1.net\", realm=\"registrar.home1.net\", nonce=base64( + AUTN + server specific data), algorithm=AKAv1-MD5, uri=\"sip:home1.net\", response=\"6629fae49393a05397450978507c4ef1\"\nSecurity-Client: ipsec-3gpp; alg=hmac-sha-1-96; spi-c=23456789; spi-s=12345678; port-c=1234; port-s=5678\nSecurity-Verify: ipsec-3gpp; q=0.1; alg=hmac-sha-1-96; spi-c=98765432; spi-s=87654321; port-c=8642; port-s=7531\nRequire:\nProxy-Require:\nCSeq: 2 REGISTER\nSupported:\nContent-Length:\n\n10.\tSIP REGISTER request (P-CSCF to ATCF) - see example in table A.3.3-10\nThe P-CSCF forwards the SIP REGISTER request towards ATCF.\nTable A.3.3-10: SIP REGISTER request (P-CSCF to ATCF)\nREGISTER sip:home1.net SIP/2.0\nPath:\t<sip:aga2gfgf@pcscf1.visited2.net:5070;ob>\nRoute: <sip:reg@atcf.visited2.net;lr>\nP-Visited-Network-ID: \"Visited Network Number 1\"\nP-Charging-Vector: icid-value=\"AyretyU0dm+6O2IrT5tAFrbHLso=023551024\";orig-ioi=\"12345\"\nVia: SIP/2.0/UDP pcscf1.visited2.net:5060;branch=z9hG4bKnas56565, SIP/2.0/UDP [5555::aaa:bbb:ccc:eee];comp=sigcomp;branch=z9hG4bKnasiuen8;rport=5060;received=5555::aaa:bbb:ccc:eee\nMax-Forwards: 69\nP-Access-Network-Info:\nFrom:\nTo:\nContact:\nCall-ID:\nAuthorization:\nRequire:\nProxy-Require:\nCSeq:\nSupported:\nContent-Length:\n\nRoute:\tATCF URI for originating requests (as configured in P-CSCF).\n11-12.\tSIP REGISTER request (ATCF towards S-CSCF) - see example in table A.3.3-11\nThe ATCF decides to include itself for sessions created using this registration and forwards the SIP REGISTER request.\nTable A.3.3-11: SIP REGISTER request (ATCF towards S-CSCF)\nREGISTER sip:home1.net SIP/2.0\nFeature-Caps: *;+g.3gpp.atcf=\"<tel:+1-237-888-9999>\" ;+g.3gpp.atcf-mgmt-uri= \"<sip:atcf.visited2.net>\";+g.3gpp.atcf-path=\"<sip:termsdgfdfwe@atcf.visited2.net>\";+g.3gpp.mid-call;+g.3gpp.srvcc-alerting\nPath:\t<sip:termsdgfdfwe@atcf.visited2.net>,<sip:aga2gfgf@pcscf1.visited2.net:5070;ob>\nRoute: <sip:icscf.home1.net;lr>\nP-Visited-Network-ID:\nP-Charging-Vector:\nVia: SIP/2.0/UDP atcf.visited2.net:5060;branch=z9hG4bKnas5889; SIP/2.0/UDP pcscf1.visited2.net:5060;branch=z9hG4bKnas56565, SIP/2.0/UDP [5555::aaa:bbb:ccc:eee];comp=sigcomp;branch=z9hG4bKnasiuen8;rport=5060;received=5555::aaa:bbb:ccc:eee\nMax-Forwards: 68\nP-Access-Network-Info:\nFrom:\nTo:\nContact:\nCall-ID:\nAuthorization:\nRequire:\nProxy-Require:\nCSeq:\nSupported:\nContent-Length:\n\nPath:\tATCF URI for terminating requests followed by P-CSCF URI for terminating requests. ATCF URI for terminating requests uniquely identifies registration path (or registration flow, if multiple registration mechanism is used).\nFeature-Caps:\tThe header field contains\n-\tg.3gpp.atcf feature-capability indicator indicating that the ATCF role is supported by this URI;\n-\tg.3gpp.atcf-mgmt-uri feature-capability indicator indicating the management URI of the ATCF for receiving SIP MESSAGE requests containing SRVCC related information and the g.3gpp.atcf-path feature-capability indicator. The value of the g.3gpp.atcf feature-capability indicator contains the STN-SR allocated by ATCF. The value of the g.3gpp.atcf-mgmt-uri feature-capability indicator contains the ATCF  management URI. The value of the g.3gpp.atcf-path feature-capability indicator is the ATCF URI for terminating requests.\n-\tg.3gpp.mid-call indicating that all MSC servers, which can be involved in the SRVCC procedures and which are in the same network as the ATCF, support the MSC server assisted mid-call feature.\n-\tg.3gpp.srvcc-alerting indicating that all MSC servers, which can be involved in the SRVCC procedures and which are in the same network as the ATCF, support the PS to CS SRVCC for calls in alerting phase.\nRoute:\tURI of the entry point of the home network of the UE.\n13.-14.\tSIP 200 (OK) response (S-CSCF to ATCF)\nThe S-CSCF sends a SIP 200 (OK) response towards the UE indicating that registration was successful.\n15.-16.\tSIP 200 (OK) response (ATCF to UE)\nThe ATCF sends a SIP 200 (OK) response towards the UE indicating that registration was successful.\nTable A.3.3-15: SIP 200 (OK) response to the REGISTER request (ATCF towards UE)\nSIP/2.0 200 OK\nFeature-Caps: *;+g.3gpp.atcf=\"<tel:+1-237-888-9999>\"\nPath:\t<sip:termsdgfdfwe@atcf.visited2.net>,<sip:aga2gfgf@pcscf1.visited2.net:5070;ob>\nService-Route: <sip:orig@scscf1.home1.net;lr>\nP-Charging-Vector:\nVia: SIP/2.0/UDP atcf.visited2.net:5060;branch=z9hG4bKnas5889; SIP/2.0/UDP pcscf1.visited2.net:5060;branch=z9hG4bKnas56565, SIP/2.0/UDP [5555::aaa:bbb:ccc:eee];comp=sigcomp;branch=z9hG4bKnasiuen8;rport=5060;received=5555::aaa:bbb:ccc:eee\nMax-Forwards: 66\nFrom:\nTo:\nContact:\nCall-ID:\nAuthorization:\nCSeq:\nSupported:\nContent-Length:\n\nFeature-Caps:\tThe header field contains g.3gpp.atcf feature-capability indicator indicating that the ATCF role is supported.\n17.\tSIP REGISTER request (S-CSCF to SCC AS) - see example in table A.3.3-17\nThe S-CSCF sends a third party SIP REGISTER request to the SCC AS based on the initial filter criteria it received.\nTable A.3.3-17: SIP REGISTER request (S-CSCF to SCC AS)\nREGISTER sip: sccas.home1.net /2.0\nVia: SIP/2.0/TCP scscf1.home1.net;branch=z9hG499ffhy\nMax-Forwards: 70\nFrom: <sip:scscf1.home1.net>; tag=538ya\nTo: <sip:user1_public1@home1.net>\nP-Access-Network-Info: IEEE-802.11b\nCall-ID: 1asdaddlrfjflslj40a222\nContact: <sip:scscf1.home1.net>; expires=600000\nCSeq: 87 REGISTER\nContent-Type: multipart/mixed;boundary=\"boundary1\"\nContent-Length: (…)\n\n--boundary1\nContent-Type: message/sip\n\nREGISTER sip:home1.net SIP/2.0\nFeature-Caps: *;+g.3gpp.atcf=\"<tel:+1-237-888-9999>\" ;+g.3gpp.atcf-mgmt-uri= \"<sip:atcf.visited2.net>\";+g.3gpp.atcf-path=\"<sip:termsdgfdfwe@atcf.visited2.net>\";+g.3gpp.mid-call;+g.3gpp.srvcc-alerting\nPath:\t<sip:termsdgfdfwe@atcf.visited2.net>,<sip:aga2gfgf@pcscf1.visited2.net:5070;ob>\nP-Visited-Network-ID: \"Visited Network Number 1\"\nP-Charging-Vector: icid-value=\"AyretyU0dm+6O2IrT5tAFrbHLso=023551024\";orig-ioi=\"12345\"\nVia: SIP/2.0/UDP icscf.visited2.net:5060;branch=z9hG4bKnas8866; SIP/2.0/UDP atcf.visited2.net:5060;branch=z9hG4bKnas5889; SIP/2.0/UDP pcscf1.visited2.net:5060;branch=z9hG4bKnas56565, SIP/2.0/UDP [5555::aaa:bbb:ccc:eee];comp=sigcomp;branch=z9hG4bKnasiuen8;rport=5060;received=5555::aaa:bbb:ccc:eee\nMax-Forwards: 66\nP-Access-Network-Info: 3GPP-UTRAN-TDD; utran-cell-id-3gpp=234151D0FCE11\nFrom: <sip:user1_public1@home1.net>;tag=2hiue\nTo: <sip:user1_public1@home1.net>\nContact: <sip:[5555::aaa:bbb:ccc:eee];comp=sigcomp>;+sip.instance=\"<urn:gsma:imei:90420156-025763-0>;+g.3gpp.icsi-ref=\"urn%3Aurn-7%3A3gpp-service.ims.icsi.mmtel\"\nCall-ID: E05133BD26DD\nAuthorization: Digest username=\"user1_private@home1.net\", realm=\"registrar.home1.net\", nonce=\"\", uri=\"sip:home1.net\", response=\"\"\nRequire: sec-agree\nProxy-Require: sec-agree\nCSeq: 2 REGISTER\nSupported: path, gruu\nContent-Length: 0\n\n--boundary1\nContent-Type: message/sip\n\nSIP/2.0 200 OK\nPath:\t<sip:termsdgfdfwe@atcf.visited2.net>,<sip:aga2gfgf@pcscf1.visited2.net:5070;ob>\nVia: SIP/2.0/UDP icscf.visited2.net:5060;branch=z9hG4bKnas8866; SIP/2.0/UDP atcf.visited2.net:5060;branch=z9hG4bKnas5889; SIP/2.0/UDP pcscf1.visited2.net:5060;branch=z9hG4bKnas56565, SIP/2.0/UDP [5555::aaa:bbb:ccc:eee];comp=sigcomp;branch=z9hG4bKnasiuen8;rport=5060;received=5555::aaa:bbb:ccc:eee\nService-Route: <sip:orig@scscf1.home1.net;lr>\nFrom: <sip:user1_public1@home1.net>;tag=2hiue\nTo: <sip:user1_public1@home1.net>;tag=2da87\nCall-ID: E05133BD26DD\nContact: <sip:[5555::aaa:bbb:ccc:ddd]:1357;comp=sigcomp>;+sip.instance=\"<urn:gsma:imei:90420156-025763-0>\";+g.3gpp.icsi-ref=\"urn%3Aurn-7%3A3gpp-service.ims.icsi.mmtel\"\n;pub-gruu=\"sip:user1_public1@home1.net;gr=urn:uuid:f81d4fae-7dec-11d0-a765-00a0c91e6bf6\"\n;temp-gruu=\"sip:tgruu.7hs==jd7vnzga5w7fajsc7-ajd6fabz0f8g5@example.com;gr\";expires=600000\nSupported: path, gruu\nP-Associated-URI: <sip:user1_public2@home1.net>, <sip:user1_public3@home1.net>, <sip:+1-212-555-1111@home1.net;user=phone>\nCSeq: 2 REGISTER\nContent-Length: 0\n\n--boundary1--\n\n18.\tSIP 200 (OK) response ( to S-CSCF)\nThe SCC AS generates the SIP 200 (OK) response to the third-party SIP REGISTER request.\n19.-20.\tSIP MESSAGE request with SRVCC related information ( to ATCF)\nThe SCC AS sends the SIP MESSAGE request with SRVCC related information towards the ATCF serving the registered UE.\nTable A.3.3-19: SIP MESSAGE request ( towards ATCF)\nMESSAGE sip:atcf.visited2.net SIP/2.0\nVia: SIP/2.0/UDP sccas1.home1.net:5060;branch=z9hG4bKnas588339\nMax-Forwards: 70\nFrom: <sip:sccas1.home1.net>;tag=aassd\nTo: sip:atcf.visited2.net\nCall-ID: sdvasdfgfasdf\nCSeq: 56561 MESSAGE\nContent-Length: ...\nP-Asserted-Identity: sip:sccas1.home1.net\nContent-Type: application/vnd.3gpp.SRVCC-info+xml\n\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<SRVCC-infos>\n<SRVCC-info ATCF-Path-URI=\"sip:termsdgfdfwe@atcf.visited2.net\">\n<ATU-STI>sip:sccas1.home1.net</ATU-STI>\n<C-MSISDN>tel:+1-237-555-1111</C-MSISDN>\n</SRVCC-info>\n</SRVCC-infos>\n\nRequest-URI:\tATCF  management URI\nP-Asserted-Identity:\tSCC AS URI\nbody:\tSRVCC related information\n21.-22.\tSIP 200 (OK) response (ATCF to SCC AS)\nThe ATCF generates the SIP 200 (OK) response to the SIP MESSAGE request.\n23.\tStore STN-SR in HSS (SCC AS to HSS)\nprovides the received STN-SR into the HSS to replace the STN-SR pointing to the SCC AS or the previously stored STN-SR pointing to other ATCF.\nNOTE:\tstep 23 can be started in parallel to step 19.\n24.\tNotify MME that STN-SR was changed (HSS to MME)\nHSS provides the STN-SR to the MME because of the change of the subscription data.\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "A.3.4\tSignalling flows for registration with SRVCC enhancements from UE supporting CS to PS SRVCC",
                    "description": "",
                    "summary": "",
                    "text_content": "The signalling flows shown in figure A.3.4-1 gives an example flow for UE registration when ATCF is invoked. UE and ATCF are also enhanced for CS to PS SRVCC.\nFigure A.3.4-1 illustrates the process of registration with CS to PS SRVCC enhancements, showcasing the transition from CS to PS and the associated signaling procedures. The figure highlights the role of the Mobility Management Entity (MME) and the Serving Gateway (S-GW) in facilitating this process. Key components include the Mobility-related Signaling (MRS) and the Mobility-related Signaling Control Plane (MC_CP), which work together to ensure a smooth handover and maintain seamless connectivity for the user. The figure emphasizes the importance of these enhancements in improving the overall performance and reliability of the network.\nFigure A.3.4-1 registration with CS to PS SRVCC enhancements\n1.\tSIP REGISTER request (UE to P-CSCF) - see example in table A.3.4-1\nUE sends the unprotected SIP REGISTER request to P-CSCF.\nTable A.3.4-1: SIP REGISTER request (UE to P-CSCF)\nREGISTER sip:home1.net SIP/2.0\nVia: SIP/2.0/UDP [5555::aaa:bbb:ccc:ddd];comp=sigcomp;branch=z9hG4bKnasiuen8\nMax-Forwards: 70\nP-Access-Network-Info: 3GPP-UTRAN-TDD; utran-cell-id-3gpp=234151D0FCE11\nFrom: <sip:user1_public1@home1.net>;tag=2hiue\nTo: <sip:user1_public1@home1.net>\nContact: <sip:[5555::aaa:bbb:ccc:ddd]:5432;comp=sigcomp>;+sip.instance=\"<urn:gsma:imei:90420156-025763-0>;+g.3gpp.icsi-ref=\"urn%3Aurn-7%3A3gpp-service.ims.icsi.mmtel\";+g.3gpp.cs2ps-srvcc;+g.3gpp.cs2ps-srvcc-alerting\nCall-ID: E05133BD26DD\nAuthorization: Digest username=\"user1_private@home1.net\", realm=\"registrar.home1.net\", nonce=\"\", uri=\"sip:home1.net\", response=\"\"\nSecurity-Client: ipsec-3gpp; alg=hmac-sha-1-96; spi-c=23456789; spi-s=12345678; port-c=1234; port-s=5678\nRequire: sec-agree\nProxy-Require: sec-agree\nCSeq: 1 REGISTER\nSupported: path, gruu\nContent-Length: 0\n\nContact header field:\tmedia feature tag g.3gpp.cs2ps-srvcc indicates support of the CS to PS SRVCC in the UE; and media feature tag +g.3gpp.cs2ps-srvcc-alerting indicates support of the CS to PS SRVCC of calls in alerting phase in the UE.\n2.\tSIP REGISTER request (P-CSCF to ATCF) - see example in table A.3.4-2\nThe P-CSCF forwards the SIP REGISTER request towards ATCF.\nTable A.3.4-2: SIP REGISTER request (P-CSCF to ATCF)\nREGISTER sip:home1.net SIP/2.0\nPath:\t<sip:aga2gfgf@pcscf1.visited2.net:5070;ob>\nRoute: <sip:reg@atcf.visited2.net;lr>, <sip:icscf.home1.net;lr>\nP-Visited-Network-ID: \"Visited Network Number 1\"\nP-Charging-Vector: ####\nVia: SIP/2.0/UDP pcscf1.visited2.net:5060;branch=z9hG4bKnas56565, SIP/2.0/UDP [5555::aaa:bbb:ccc:ddd];comp=sigcomp;branch=z9hG4bKnasiuen8;rport=5060;received=5555::aaa:bbb:ccc:ddd\nMax-Forwards: 69\nP-Access-Network-Info:\nFrom:\nTo:\nContact:\nCall-ID:\nAuthorization:\nRequire:\nProxy-Require:\nCSeq:\nSupported:\nContent-Length:\n\n\nRoute:\tATCF URI for originating requests (as configured in P-CSCF) followed by URI of the entry point of the home network of the UE.\n3.-4.\tSIP REGISTER request (ATCF towards S-CSCF) - see example in table A.3.4-3\nThe ATCF decides to include itself for sessions created using this registration and forwards the SIP REGISTER request along the Route header fields.\nTable A.3.4-3: SIP REGISTER request (ATCF towards S-CSCF)\nREGISTER sip:home1.net SIP/2.0\nFeature-Caps: *;+g.3gpp.atcf=\"<tel:+1-237-888-9999>\"; +g.3gpp.atcf-mgmt-uri= \"<sip:atcf.visited2.net>\";+g.3gpp.atcf-path=\"<sip:termsdgfdfwe@atcf.visited2.net>\"; +g.3gpp.cs2ps-srvcc=\"<sip:sti-sr@atcf.visited2.net>\"\nPath:\t<sip:termsdgfdfwe@atcf.visited2.net>,<sip:aga2gfgf@pcscf1.visited2.net:5070;ob>\nRoute: <sip:icscf.home1.net;lr>\nP-Visited-Network-ID:\nP-Charging-Vector:\nVia: SIP/2.0/UDP atcf.visited2.net:5060;branch=z9hG4bKnas5889; SIP/2.0/UDP pcscf1.visited2.net:5060;branch=z9hG4bKnas56565, SIP/2.0/UDP [5555::aaa:bbb:ccc:ddd];comp=sigcomp;branch=z9hG4bKnasiuen8;rport=5060;received=5555::aaa:bbb:ccc:ddd\nMax-Forwards: 68\nP-Access-Network-Info:\nFrom:\nTo:\nContact:\nCall-ID:\nAuthorization:\nRequire:\nProxy-Require:\nCSeq:\nSupported:\nContent-Length:\n\nPath:\tATCF URI for terminating requests followed by P-CSCF URI for terminating requests. ATCF URI for terminating requests uniquely identifies registration (or registration flow, if multiple registration mechanism is used).\nFeature-Caps:\tThe header field contains:\n-\tg.3gpp.atcf feature-capability indicator with value containing the STN-SR allocated by ATCF;\n-\tg.3gpp.atcf-mgmt-uri feature-capability indicator with value containing the ATCF management URI;\n-\tg.3gpp.atcf-path feature-capability indicator with value containing the ATCF URI for terminating requests; and\n-\tg.3gpp.cs2ps-srvcc feature-capability indicator with value containing the STI-rSR allocated by ATCF.\nRoute:\tURI of the entry point of the home network of the UE.\n5-8.\tSIP 401 (Unauthorized) response (S-CSCF to UE)\nThe authentication challenge is sent in the SIP 401 (Unauthorized) response towards the UE.\n9.\tSIP REGISTER request (UE to P-CSCF) - see example in table A.3.4-9\nUE sends the protected SIP REGISTER request to P-CSCF.\nTable A.3.4-9: SIP REGISTER request (UE to P-CSCF)\nREGISTER sip:home1.net SIP/2.0\nVia: SIP/2.0/UDP [5555::aaa:bbb:ccc:ddd];comp=sigcomp;branch=z9hG4bKnasiuen8\nMax-Forwards: 70\nP-Access-Network-Info:\nFrom:\nTo:\nContact: <sip:[5555::aaa:bbb:ccc:ddd]:5432;comp=sigcomp>;+sip.instance=\"<urn:gsma:imei:90420156-025763-0>;+g.3gpp.icsi-ref=\"urn%3Aurn-7%3A3gpp-service.ims.icsi.mmtel\";+g.3gpp.cs2ps-srvcc;+g.3gpp.cs2ps-srvcc-alerting\nCall-ID:\nAuthorization: Digest username=\"user1_private@home1.net\", realm=\"registrar.home1.net\", nonce=base64( + AUTN + server specific data), algorithm=AKAv1-MD5, uri=\"sip:home1.net\", response=\"6629fae49393a05397450978507c4ef1\"\nSecurity-Client: ipsec-3gpp; alg=hmac-sha-1-96; spi-c=23456789; spi-s=12345678; port-c=1234; port-s=5678\nSecurity-Verify: ipsec-3gpp; q=0.1; alg=hmac-sha-1-96; spi-c=98765432; spi-s=87654321; port-c=8642; port-s=7531\nRequire:\nProxy-Require:\nCSeq: 2 REGISTER\nSupported:\nContent-Length: 0\n\n\nContact header field:\tmedia feature tag g.3gpp.cs2ps-srvcc indicates support of the CS to PS SRVCC in the UE; and media feature tag +g.3gpp.cs2ps-srvcc-alerting indicates support of the CS to PS SRVCC of calls in alerting phase in the UE.\n10.\tSIP REGISTER request (P-CSCF to ATCF) - see example in table A.3.4-10\nThe P-CSCF forwards the SIP REGISTER request towards ATCF.\nTable A.3.4-10: SIP REGISTER request (P-CSCF to ATCF)\nREGISTER sip:home1.net SIP/2.0\nPath:\t<sip:aga2gfgf@pcscf1.visited2.net:5070;ob>\nRoute: <sip:reg@atcf.visited2.net;lr>, <sip:icscf.home1.net;lr>\nP-Visited-Network-ID: \"Visited Network Number 1\"\nP-Charging-Vector: ####\nVia: SIP/2.0/UDP pcscf1.visited2.net:5060;branch=z9hG4bKnas56565, SIP/2.0/UDP [5555::aaa:bbb:ccc:ddd];comp=sigcomp;branch=z9hG4bKnasiuen8;rport=5060;received=5555::aaa:bbb:ccc:ddd\nMax-Forwards: 69\nP-Access-Network-Info:\nFrom:\nTo:\nContact:\nCall-ID:\nAuthorization:\nRequire:\nProxy-Require:\nCSeq:\nSupported:\nContent-Length:\n\nRoute:\tATCF URI for originating requests (as configured in P-CSCF) followed by URI of the entry point of the home network of the UE.\n11-12.\tSIP REGISTER request (ATCF towards S-CSCF) - see example in table A.3.4-11\nThe ATCF decides to include itself for sessions created using this registration and forwards the SIP REGISTER request.\nTable A.3.4-11: SIP REGISTER request (ATCF towards S-CSCF)\nREGISTER sip:home1.net SIP/2.0\nFeature-Caps: *;+g.3gpp.atcf=\"<tel:+1-237-888-9999>\"; +g.3gpp.atcf-mgmt-uri= \"<sip:atcf.visited2.net>\";+g.3gpp.atcf-path=\"<sip:termsdgfdfwe@atcf.visited2.net>\"; +g.3gpp.cs2ps-srvcc=\"<sip:sti-sr@atcf.visited2.net>\"\nPath:\t<sip:termsdgfdfwe@atcf.visited2.net>,<sip:aga2gfgf@pcscf1.visited2.net:5070;ob>\nRoute: <sip:sdvfasdgf34t4@pcscf1.visited2.net:5080>\nP-Visited-Network-ID:\nP-Charging-Vector:\nVia: SIP/2.0/UDP atcf.visited2.net:5060;branch=z9hG4bKnas5889; SIP/2.0/UDP pcscf1.visited2.net:5060;branch=z9hG4bKnas56565, SIP/2.0/UDP [5555::aaa:bbb:ccc:ddd];comp=sigcomp;branch=z9hG4bKnasiuen8;rport=5060;received=5555::aaa:bbb:ccc:ddd\nMax-Forwards: 68\nP-Access-Network-Info:\nFrom:\nTo:\nContact:\nCall-ID:\nAuthorization:\nRequire:\nProxy-Require:\nCSeq:\nSupported:\nContent-Length:\n\nPath:\tATCF URI for terminating requests followed by P-CSCF URI for terminating requests. ATCF URI for terminating requests uniquely identifies registration (or registration flow, if multiple registration mechanism is used).\nFeature-Caps:\tThe header field contains:\n-\tg.3gpp.atcf feature-capability indicator with value containing the STN-SR allocated by ATCF;\n-\tg.3gpp.atcf-mgmt-uri feature-capability indicator with value containing the ATCF management URI;\n-\tg.3gpp.atcf-path feature-capability indicator with value containing the ATCF URI for terminating requests; and\n-\tg.3gpp.cs2ps-srvcc feature-capability indicator with value containing the STI-rSR allocated by ATCF.\nRoute:\tURI of the entry point of the home network of the UE.\n13.-14.\tSIP 200 (OK) response (S-CSCF towards ATCF)\nThe S-CSCF sends a SIP 200 (OK) response towards the UE indicating that registration was successful.\n15.-16.\tSIP 200 (OK) response (ATCF towards UE)- see example in table A.3.4-15\nThe ATCF sends a SIP 200 (OK) response towards the P-CSCF indicating that registration was successful.\nTable A.3.4-15: SIP 200 (OK) response to the SIP REGISTER request (ATCF towards UE)\nSIP/2.0 200 OK\nFeature-Caps: *;+g.3gpp.atcf=\"<tel:+1-237-888-9999>\";+g.3gpp.cs2ps-srvcc=\"<sip:sti-sr@atcf.visited2.net>\"\nPath:\t<sip:termsdgfdfwe@atcf.visited2.net>,<sip:aga2gfgf@pcscf1.visited2.net:5070;ob>\nService-Route: <sip:orig@scscf1.home1.net;lr>\nP-Charging-Vector:\nVia: SIP/2.0/UDP atcf.visited2.net:5060;branch=z9hG4bKnas5889; SIP/2.0/UDP pcscf1.visited2.net:5060;branch=z9hG4bKnas56565, SIP/2.0/UDP [5555::aaa:bbb:ccc:eee];comp=sigcomp;branch=z9hG4bKnasiuen8;rport=5060;received=5555::aaa:bbb:ccc:eee\nMax-Forwards: 66\nFrom:\nTo:\nContact:\nCall-ID:\nAuthorization:\nCSeq:\nSupported:\nContent-Length:\n\nFeature-Caps:\tThe header field contains:\n-\tg.3gpp.atcf feature-capability indicator with value containing the STN-SR allocated by ATCF; and\n-\tg.3gpp.cs2ps-srvcc feature-capability indicator with value containing the STI-rSR allocated by ATCF.\n17.\tSIP REGISTER request (S-CSCF to SCC AS)\nThe S-CSCF sends a third party SIP REGISTER request to the SCC AS based on the initial filter criteria it received.\n18.\tSIP 200 (OK) response ( to S-CSCF)\nThe SCC AS generates the SIP 200 (OK) response to the third-party SIP REGISTER request.\n19.-20.\tSIP MESSAGE request with SRVCC related information ( towards ATCF) - see example in table A.3.4-19\nThe SCC AS sends the SIP MESSAGE request with SRVCC related information towards the ATCF serving the registered UE.\nTable A.3.4-19: SIP MESSAGE request ( towards ATCF)\nMESSAGE sip:atcf.visited2.net SIP/2.0\nVia: SIP/2.0/UDP sccas1.home1.net:5060;branch=z9hG4bKnas588339\nMax-Forwards: 70\nFrom: <sip:sccas1.home1.net>;tag=aassd\nTo: sip:atcf.visited2.net\nCall-ID: sdvasdfgfasdf\nCSeq: 56561 MESSAGE\nContent-Length: ...\nP-Asserted-Identity: sip:sccas1.home1.net\nContent-Type: application/vnd.3gpp.SRVCC-info+xml\n\n<?xml version=\"1.0\"?>\n<SRVCC-infos>\n<SRVCC-info ATCF-Path-URI=\"sip:termsdgfdfwe@atcf.visited2.net\">\n<ATU-STI>sip:sccas1.home1.net</ATU-STI>\n<C-MSISDN>tel:+1-237-555-1111</C-MSISDN>\n<anyExt>\n<CS2PS-ATU-STI>sip:cs2ps@sccas1.home1.net</CS2PS-ATU-STI>\n</anyExt>\n</SRVCC-info>\n</SRVCC-infos>\n\nRequest-URI:\tATCF management URI\nP-Asserted-Identity:\tSCC AS URI\nbody:\tSRVCC related information. The CS2PS-ATU-STI element contains the ATU-STI to be used in CS to PS SRVCC.\n21.-22.\tSIP 200 (OK) response (ATCF towards SCC AS)\nThe ATCF generates the SIP 200 (OK) response to the SIP MESSAGE request.\n23.\tStore STN-SR in HSS (SCC AS to HSS)\nprovides the received STN-SR into the HSS to replace the STN-SR pointing to the SCC AS or the previously stored STN-SR pointing to other ATCF.\nNOTE:\tstep 23 can be started in parallel to step 19.\n24.\tNotify MME that STN-SR was changed (HSS to MME)\nHSS provides the STN-SR to the MME because of the change of the subscription data.\n25.-26.\tSIP MESSAGE request with ATGW information for CS to PS SRVCC (ATCF towards UE) - see example in table A.3.4-25\nTable A.3.4-25: SIP MESSAGE request (ATCF towards UE)\nMESSAGE sip:[5555::aaa:bbb:ccc:ddd]:5432;comp=sigcomp SIP/2.0\nVia: SIP/2.0/UDP atcf.visited2.net:5060;branch=z9hG4bKnas66\nMax-Forwards: 70\nRoute: <sip:aga2gfgf@pcscf1.visited2.net:5070;ob>\nP-Asserted-Identity: sip:sti-sr@atcf.visited2.net\nFrom: sip:sti-sr@atcf.visited2.net;tag=aaa5234\nTo: sip:[5555::aaa:bbb:ccc:ddd]:5432\nCall-ID: asgag34t34543\nCSeq: 1000034\nContent-Type:\nContent-Length: (…)\nContent-Disposition: render\nP-Charging-Vector: ####\n\nv=0\no=- 2987933615 2987933615 IN IP6 5555::aaa:bbb:ccc:ddd\ns=-\nc=IN IP6 dfgrrgr.invalid\nt=0 0\nm=audio 9 RTP/AVP 97 96\nb=AS:25.4\na=rtpmap:97 AMR\na=fmtp:97 mode-set=0,2,5,7; maxframes=2\na=rtpmap:96 telephone-event\n\nRequest-URI:\tcontact address of the UE\nRoute:\tP-CSCF path header field\napplication/sdp MIME body:\tSDP describing the set of media streams and codecs the ATGW wishes to use receive the media in session transferred in any later CS to PS SRVCC access transfer. The IP addresses and ports can contain any value as the ATGW IP address and port are selected during the later CS to PS SRVCC access transfer.\n27.-28.\tSIP 200 (OK) response (UE towards ATCF)\nThe UE generates the SIP 200 (OK) response to the SIP MESSAGE request.\n29.\tSIP MESSAGE request with UE information for CS to PS SRVCC (UE to P-CSCF) - see example in table A.3.4-29\nThe UE sends the SIP MESSAGE request with UE information for CS to PS SRVCC towards the ATCF.\nTable A.3.4-29: SIP MESSAGE request (UE to P-CSCF)\nMESSAGE sip:sti-sr@atcf.visited2.net SIP/2.0\nVia: SIP/2.0/UDP [5555::aaa:bbb:ccc:ddd]:1357;comp=sigcomp;branch=z9hG4bKnashds7\nMax-Forwards: 70\nRoute: <sip:pcscf1.visited2.net:7531;lr;comp=sigcomp>, <sip:orig@scscf1.home1.net;lr>\nP-Preferred-Identity: \"John Doe\" <sip:user1_public1@home1.net>\nP-Access-Network-Info: 3GPP-UTRAN-TDD; utran-cell-id-3gpp=234151D0FCE11\nFrom: <sip:user1_public1@home1.net>;tag=171828\nTo: sip:sti-sr@atcf.visited2.net\nCall-ID: cb03a0s09a2sdfglkj49033333\nCSeq: 56561 MESSAGE\nRequire: sec-agree\nProxy-Require: sec-agree\nSecurity-Verify: ipsec-3gpp; q=0.1; alg=hmac-sha-1-96; spi-c=98765432; spi-s=87654321; port-c=8642; port-s=7531\nAllow: INVITE, ACK, CANCEL, BYE, PRACK, UPDATE, REFER, MESSAGE\nContent-Type: application/sdp\nContent-Length: (…)\nContent-Disposition: render\n\nv=0\no=- 2987933615 2987933615 IN IP6 5555::aaa:bbb:ccc:ddd\ns=-\nc=IN IP6 5555::aaa:bbb:ccc:ddd\nt=0 0\nm=audio 3456 RTP/AVP 97 96\nb=AS:25.4\na=rtpmap:97 AMR\na=fmtp:97 mode-set=0,2,5,7; maxframes=2\na=rtpmap:96 telephone-event\n\nRequest-URI:\tthe STI-rSR allocated by ATCF received in message 16\napplication/sdp MIME body:\tSDP describing the set of media streams and codecs the UE wishes to use, along with the IP addresses and ports the UE would like to use to receive the media in session transferred in any later CS to PS SRVCC access transfer.\n30.\tSIP MESSAGE request with UE information for CS to PS SRVCC (P-CSCF to ATCF) - see example in table A.3.4-30\nTable A.3.4-30: SIP MESSAGE request (P-CSCF to ATCF)\nMESSAGE sip:sti-sr@atcf.visited2.net SIP/2.0\nVia: SIP/2.0/UDP pcscf1.visited2.net:5060;branch=z9hG4bKnas5656544, SIP/2.0/UDP [5555::aaa:bbb:ccc:ddd]:1357;comp=sigcomp;branch=z9hG4bKnashds7\nMax-Forwards:\nRoute: <sip:orig@atcf.visited2.net;lr>, <sip:orig@scscf1.home1.net;lr>\nP-Asserted-Identity: \"John Doe\" <sip:user1_public1@home1.net>\nP-Access-Network-Info:\nFrom:\nTo:\nCall-ID:\nCSeq:\nRequire:\nSupported:\nProxy-Require:\nSecurity-Verify:\nAllow:\nContent-Type:\nContent-Length: (…)\nContent-Disposition:\n\nv=0\no=- 2987933615 2987933615 IN IP6 5555::aaa:bbb:ccc:ddd\ns=-\nc=IN IP6 5555::aaa:bbb:ccc:ddd\nt=0 0\nm=audio 3456 RTP/AVP 97 96\nb=AS:25.4\na=rtpmap:97 AMR\na=fmtp:97 mode-set=0,2,5,7; maxframes=2\na=rtpmap:96 telephone-event\n\nRequest-URI:\tthe STI-rSR allocated by ATCF\nRoute:\tATCF URI for originating requests (as configured in P-CSCF).\napplication/sdp MIME body:\tSDP describing the set of media streams and codecs the UE wishes to use, along with the IP addresses and ports the UE would like to use to receive the media in session transferred in any later CS to PS SRVCC access transfer.\n31.-32.\tSIP 200 (OK) response (ATCF towards UE)\nThe ATCF generates the SIP 200 (OK) response to the SIP MESSAGE request.\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "A.3.5\tSignalling flows for UE attaching to CS domain when MSC server is enhanced for ICS and for CS to PS SRVCC and when UE is not registered with IMS in PS access network yet",
                    "description": "",
                    "summary": "",
                    "text_content": "This signalling flow shown at figure A.3.5-1 describes the scenario of UE attaching to CS domain when the used MSC server is enhanced for ICS and for CS to PS SRVCC and when the UE is not registered with IMS in PS access network yet.\nFigure A.3.5-1 illustrates the registration process for a User Equipment (UE) facilitated by an MSC Server enhanced for Internet of Things (EC-GSM-IoT) in an Internet Communication System (ICS). The figure depicts the UE's interaction with the MSC Server, which acts as an intermediary between the UE and the Home Location Register (HLR). The MSC Server performs registration on behalf of the UE, ensuring seamless connectivity and efficient management of communication resources. The figure highlights the role of the MSC Server in managing the UE's communication sessions and maintaining a reliable connection in the ICS.\nFigure A.3.5-1 MSC Server enhanced for ICS performs registration on behalf of the UE\nThe details of the signalling flows are as follows:\n1.\tCS attach (UE to MSC)\nUE performs CS attachment procedure as specified in 3GPP TS 24.008 [8]. UE indicates support of CS to PS SRVCC in the CS attachment procedure.\n3.\tCS attach accept (MSC enhanced for ICS to UE)\nThe CS attach request is accepted by the network and an accept message is sent to the MS.\n3-4.\tSIP REGISTER request (MSC Server enhanced for ICS to S-CSCF) – see example in table A.3.5-3\nTable A.3.5-3: SIP REGISTER request (MSC Server enhanced for ICS to I-CSCF)\nREGISTER sip:ics.mnc015.mcc234.3gppnetwork.org SIP/2.0\nVia: SIP/2.0/UDP [5555::aaa:bbb:ccc:ddd];branch=z9hG4bKnashds7\nMax-Forwards: 70\nP-Access-Network-Info: 3GPP-UTRAN-TDD; utran-cell-id-3gpp=234151D0FCE11\nP-Visited-Network-ID: \"Visited Network Number 1 for MSC Server\"\nP-Charging-Vector: ####\nPath: <sip:termpdfjkghlj@msc123.visited2.net;lr>\nFrom: <sip:234150999999999@ics.mnc015.mcc234.3gppnetwork.org>;tag=4fa3\nTo: <sip:234150999999999@ics.mnc015.mcc234.3gppnetwork.org>\nContact: <sip:[5555::aaa:bbb:ccc:ddd]>;expires=600000;+sip.instance=\"<urn:gsma:imei:90420156-025763-0>\";+g.3gpp.icsi-ref=\"urn%3Aurn-7%3A3gpp-service.ims.icsi.mmtel\";+g.3gpp.ics=\"server\"; +g.3gpp.cs2ps-srvcc; +g.3gpp.path=\"<sip:termpdfjkghlj@msc123.visited2.net;lr>\"\nCall-ID: apb03a0s09dkjdfglkj49111\nAuthorization: Digest username=\"234150999999999@ics.mnc015.mcc234.3gppnetwork.org\", realm=\" ics.mnc015.mcc234.3gppnetwork.org\", nonce=\"\", integrity-protected=auth-done, uri=\"sip: ics.mnc015.mcc234.3gppnetwork.org\", response=\"\"\nCSeq: 1 REGISTER\nSupported: gruu\nRequire: path\nContent-Length: 0\n\nContact:\tThe header field contains:\n-\tg.3gpp.icsi-ref media feature tag with value of ICSI of IMS multimedia telephony communication service;\n-\tg.3gpp.ics media feature tag with value indicating that the resource is a network node which is ICS capable;\n-\tg.3gpp.cs2ps-srvcc indicating support for CS to PS SRVCC; and\n-\tg.3gpp.path media feature tag with value containing the MSC URI for terminating requests;\n5-6.\tSIP 200 (OK) response (S-CSCF to MSC server enhanced for ICS)\nThe S-CSCF sends a SIP 200 (OK) response to the MSC server enhanced for ICS.\n7.\tSIP REGISTER request (S-CSCF to SCC AS)\nThe S-CSCF sends a third party SIP REGISTER request containing in the body the incoming SIP REGISTER request from the PN UE and the SIP 200 (OK) response to the incoming REGISTER request to the SCC AS.\n8.\tSIP 200 (OK) response ( to S-CSCF)\nThe SCC AS sends a SIP 200 (OK) response to the S-CSCF indicating the third party SIP REGISTER was successful.\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "A.3.6\tSignalling flows for UE attaching to CS domain when MSC server is enhanced for ICS and for CS to PS SRVCC and when UE is already registered with IMS in PS access network",
                    "description": "",
                    "summary": "",
                    "text_content": "The signalling flow shown at figure A.3.6-1 describes the scenario of UE attaching to CS domain when MSC server is enhanced for ICS after the UE has already registered with IMS in PS access network. The scenario expects that UE, MSC server enhanced for ICS, ATCF and  are enhanced for CS to PS SRVCC.\nFigure A.3.6-1 illustrates the process of registration with SRVCC enhancements, showcasing the transition from a legacy network to a more advanced, scalable solution. The figure highlights the key components involved, including the Mobility Service Center (MSC), Home Location Register (HLR), and Serving Mobility Management Entity (SMME). The diagram emphasizes the role of SRVCC in improving call continuity and handover efficiency, ensuring a seamless user experience across different network domains.\nFigure A.3.6-1 registration with SRVCC enhancements\n1.\tSC UE attempts to registers with IMS in PS access network. The signalling flow described in subclause A.3.4 is performed.\n2.\tSC UE attempts to attach to CS domain. MSC server enhanced for ICS registers with IMS without knowing the STN-SR of the ATCF selected during the registration of UE with IMS using PS domain. The signalling flow described in subclause A.3.5 is performed.\n3.-4.\tSIP MESSAGE request with CS to PS SRVCC information (SCC AS to MSC server) - see example in table A.3.6-3\nThe SCC AS detects that the UE has a registration path over a PS domain where ATCF is included and therefore the SCC AS provides information about the registration path of the UE over a PS domain to the MSC server.\nTable A.3.6-3: SIP MESSAGE request ( towards MSC server)\nMESSAGE sip:msc123.visited2.net SIP/2.0\nVia: SIP/2.0/UDP sccas1.home1.net:5060;branch=z9hG4bKnas588339\nMax-Forwards: 70\nFrom: <sip:sccas1.home1.net>;tag=aassd\nTo: sip:msc123.visited2.net\nCall-ID: sdvasdfgfasdfsdfwefw\nCSeq: 44561 MESSAGE\nContent-Length: ...\nP-Asserted-Identity: sip:sccas1.home1.net\nAccept-Contact: *;g.3gpp.path=\"<sip:termpdfjkghlj@msc123.visited2.net;lr>\";explicit;require\nContent-Type: application/vnd.3gpp.srvcc-ext+xml\n\n\n<?xml version=\"1.0\"?>\n<srvcc-ext>\n<PS-reg-info Path=\"sip:termpdfjkghlj@msc123.visited2.net;lr\">\n<ATCF-Management-URI>sip:atcf.visited2.net</ATCF-Management-URI>\n<C-MSISDN>tel:+1-237-555-1111</C-MSISDN>\n<cs2ps-srvcc-alerting>true</cs2ps-srvcc-alerting>\n\n</PS-reg-info>\n</srvcc-ext>\n\n\nRequest-URI:\tpublic user identity registered by the MSC server as provided in the step 2\nP-Asserted-Identity:\tSCC AS URI\nAccept-Contact:\tg.3gpp.path media feature tag containing the MSC URI for terminating requests provided in the SIP REGISTER request in the step 2.\nbody:\tCS to PS SRVCC information informing the MSC server about the ATCF used in the registration path of the UE over a PS domain. Path attribute contains the MSC URI for terminating requests provided in the SIP REGISTER request in the step 2. ATCF-Management-URI element contains the ATCF management URI of the ATCF, the C-MSISDN element contains the C-MSISDN of the UE, and the cs2ps-srvcc-alerting element shows the support of CS to PS SRVCC in alerting phase.\n5.-6.\tSIP 200 (OK) response (MSC server to )\nThe MSC server generates the SIP 200 (OK) response to the SIP MESSAGE request.\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                }
            ]
        },
        {
            "title": "A.4\tSignalling flows for call origination for service continuity",
            "description": "",
            "summary": "",
            "tables": [],
            "figures_meta_data": [],
            "subsections": [
                {
                    "title": "Session origination for CS calls",
                    "description": "",
                    "summary": "",
                    "text_content": "An example flow for session origination for CS calls can be found in 3GPP TS 24.292 [4].\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "A.4.2\tSession origination with PS to CS SRVCC enhancements",
                    "description": "",
                    "summary": "",
                    "text_content": "The signalling flow shown in figure A.4.2-1 gives an example of originating session set up when ATCF anchors the media of the session. This flow assumes that ATCF was invoked during registration.\nFigure A.4.2-1 illustrates the signalling flows for service continuity using PS to CS SRVCC enhancements, showcasing the various steps involved in maintaining network connectivity during service activation, attachment, and release processes. The figure highlights the role of the PS (Policy and Charging System) in managing resource allocation and the CS (Core Network System) in providing service continuity through SRVCC (Service Routing and Switching Continuity) enhancements. The figure demonstrates the interaction between the two systems, emphasizing the importance of seamless service transitions for maintaining user experience and network efficiency.\nFigure A.4.2-1 Signalling flows for service continuity using PS to CS SRVCC enhancements\n1.\tSIP INVITE request (UE to P-CSCF) - see example in table A.4.2-1\nTable A.4.2-1: SIP INVITE request (UE to P-CSCF)\nINVITE tel:+1-212-555-2222 SIP/2.0\nVia: SIP/2.0/UDP [5555::aaa:bbb:ccc:ddd]:1357;comp=sigcomp;branch=z9hG4bKnashds7\nMax-Forwards: 70\nRoute: <sip:pcscf1.visited2.net:7531;lr;comp=sigcomp>, <sip:orig@scscf1.home1.net;lr>\nP-Preferred-Identity: \"John Doe\" <sip:user1_public1@home1.net>\nP-Preferred-Service: urn:urn-7:3gpp-service.ims.icsi.mmtel\nP-Access-Network-Info: 3GPP-UTRAN-TDD; utran-cell-id-3gpp=234151D0FCE11\nPrivacy: none\nFrom: <sip:user1_public1@home1.net>;tag=171828\nTo: <tel:+1-212-555-2222>\nCall-ID: cb03a0s09a2sdfglkj490333\nCseq: 127 INVITE\nRequire: sec-agree\nSupported: precondition, 100rel, gruu\nProxy-Require: sec-agree\nSecurity-Verify: ipsec-3gpp; q=0.1; alg=hmac-sha-1-96; spi-c=98765432; spi-s=87654321; port-c=8642; port-s=7531\nContact: <sip:user1_public1@home1.net;gr=urn:uuid:f81d4fae-7dec-11d0-a765-00a0c91e6bf6;comp=sigcomp>;+g.3gpp.icsi-ref=\"urn%3Aurn-7%3A3gpp-service.ims.icsi.mmtel\"\nAccept-Contact: *;+g.3gpp.icsi-ref=\"urn%3Aurn-7%3A3gpp-service.ims.icsi.mmtel\"\nAllow: INVITE, ACK, CANCEL, BYE, PRACK, UPDATE, REFER, MESSAGE\nContent-Type: application/sdp\nContent-Length: (…)\n\nv=0\no=- 2987933615 2987933615 IN IP6 5555::aaa:bbb:ccc:ddd\ns=-\nc=IN IP6 5555::aaa:bbb:ccc:ddd\nt=0 0\nm=audio 3456 RTP/AVP 97 96\nb=AS:25.4\na=curr:qos local sendrecv\na=curr:qos remote none\na=des:qos mandatory local sendrecv\na=des:qos none remote sendrecv\na=rtpmap:97 AMR\na=fmtp:97 mode-set=0,2,5,7; maxframes=2\na=rtpmap:96 telephone-event\n\n2.\tSIP INVITE request (P-CSCF to ATCF) - see example in table A.4.2-2\nSince a Feature-Caps header field with the g.3gpp.atcf feature-capability indicator was included in SIP 2xx response to the SIP REGISTER request which created the binding of the contact address using which the SIP INVITE request is sent, the P-CSCF routes the SIP INVITE request to the ATCF.\nTable A.4.2-2: SIP INVITE request (P-CSCF to ATCF)\nINVITE tel:+1-212-555-2222 SIP/2.0\nRecord-Route: <sip:pcscf1.visited1.net;lr>\nVia: SIP/2.0/UDP pcscf1.visited2.net:5060;branch=z9hG4bKnas56565, SIP/2.0/UDP [5555::aaa:bbb:ccc:ddd]:1357;comp=sigcomp;branch=z9hG4bKnashds7\nMax-Forwards: 69\nRoute: <sip:orig@atcf.visited2.net;lr>, <sip:orig@scscf1.home1.net;lr>\nP-Asserted-Identity: \"John Doe\" <sip:user1_public1@home1.net>\nP-Preferred-Service:\nP-Access-Network-Info:\nPrivacy:\nFrom:\nTo:\nCall-ID:\nCseq:\nRequire:\nSupported:\nProxy-Require:\nContact:\nAccept-Contact\nAllow:\nContent-Type:\nContent-Length:\n\nv=0\no=- 2987933615 2987933615 IN IP6 5555::aaa:bbb:ccc:ddd\ns=-\nc=IN IP6 5555::aaa:bbb:ccc:ddd\nt=0 0\nm=audio 3456 RTP/AVP 97 96\nb=AS:25.4\na=curr:qos local sendrecv\na=curr:qos remote none\na=des:qos mandatory local sendrecv\na=des:qos none remote sendrecv\na=rtpmap:97 AMR\na=fmtp:97 mode-set=0,2,5,7; maxframes=2\na=rtpmap:96 telephone-event\n\n\nRoute:\tATCF URI for originating requests (as configured in P-CSCF) followed by the remaining Route header fields determined by P-CSCF.\n3.\tATGW resource reservation\nThe ATCF decides to anchor the media of the session and reserves the resources in the ATGW.\n4-9.\tSIP INVITE request (ATCF towards remote UE) - see example in table A.4.2-4\nThe ATCF modifies the SDP offer without changing the dialog identifier and forwards the SIP INVITE request. The ATCF replaces the IP address, ports, ... with values provided by ATGW.\nTable A.4.2-4: SIP INVITE request (ATCF towards remote UE)\nINVITE tel:+1-212-555-2222 SIP/2.0\nRecord-Route: <sip:pcscf1.visited1.net;lr>, <sip:atcf.visited.net;lr>\nVia: SIP/2.0/UDP atcf.visited2.net:5060;branch=z9hG4bKnas55889, SIP/2.0/UDP pcscf1.visited2.net:5060;branch=z9hG4bKnas56565, SIP/2.0/UDP [5555::aaa:bbb:ccc:ddd]:1357;comp=sigcomp;branch=z9hG4bKnashds7\nMax-Forwards: 68\nRoute: <sip:orig@scscf1.home1.net;lr>\nP-Asserted-Identity:\nP-Preferred-Service:\nP-Access-Network-Info:\nPrivacy:\nFrom:\nTo:\nCall-ID:\nCseq:\nRequire:\nSupported:\nProxy-Require:\nContact:\nAccept-Contact\nAllow:\nContent-Type:\nContent-Length:\n\nv=0\no=- 22 333 IN IP6 8888::111:222:333:444\ns=-\nc=IN IP6 8888::111:222:333:444\nt=0 0\nm=audio 8899 RTP/AVP 97 96\nb=AS:25.4\na=curr:qos local sendrecv\na=curr:qos remote none\na=des:qos mandatory local sendrecv\na=des:qos none remote sendrecv\na=rtpmap:97 AMR\na=fmtp:97 mode-set=0,2,5,7; maxframes=2\na=rtpmap:96 telephone-event\n\nSDP offer:\tthe IP address and ports are updated to contain the values provided by ATGW .\n10-12.\tSIP 183 (Session Progress) response (remote UE  towards SCC AS)\nThe remote UE responds with SIP 183 (Session progress) response.\n13.-15.\tSIP 183 (Session Progress) response ( towards ATCF) - see example in table A.4.2-13\nThe SCC AS forwards the SIP 183 (Session progress) response.\nTable A.4.2-13: SIP 183 (Session Progress) response ( towards ATCF)\nSIP/2.0 183 Session Progress\nFeature-Caps: *;+g.3gpp.srvcc\nRecord-Route: <sip:pcscf1.visited1.net;lr>, <sip:atcf.visited.net;lr>, <sip:scscf.home1.net;lr>, <sip:icscf.home1.net;lr>, <sip:sccas.home1.net;lr>\nVia: SIP/2.0/UDP sccas.home1.net:5060;branch=z9hG4bKnas522, SIP/2.0/UDP scscf.home1.net:5060;branch=z9hG4bKnas889, SIP/2.0/UDP icscf.home1.net:5060;branch=z9hG4bKnas225, SIP/2.0/UDP atcf.visited2.net:5060;branch=z9hG4bKnas55889, SIP/2.0/UDP pcscf1.visited2.net:5060;branch=z9hG4bKnas56565, SIP/2.0/UDP [5555::aaa:bbb:ccc:ddd]:1357;comp=sigcomp;branch=z9hG4bKnashds7\nMax-Forwards: 60\nP-Asserted-Identity: <tel:+1-212-555-2222>\nPrivacy:\nFrom:\nTo: <tel:+1-212-555-2222>; tag=aaa\nCall-ID:\nCseq:\nRequire:\nSupported:\nContact: <sip:user2_public1@home2.net;gr=urn:uuid:2ad8950e-48a5-4a74-8d99-ad76cc7fc74>;+g.3gpp.icsi-ref=\"urn%3Aurn-7%3A3gpp-service.ims.icsi.mmtel\"\nAllow:\nContent-Type:\nContent-Length:\n\nv=0\no=- 462346 5654 IN IP6 1234::55:66:77:88\ns=-\nc=IN IP6 1234::55:66:77:88\nt=0 0\nm=audio 4456 RTP/AVP 97 96\nb=AS:25.4\na=curr:qos local none\na=curr:qos remote sendrecv\na=des:qos mandatory local sendrecv\na=des:qos mandatory remote sendrecv\na=rtpmap:97 AMR\na=fmtp:97 mode-set=0,2,5,7; maxframes=2\na=rtpmap:96 telephone-event\n\nFeature-Caps:\tThe header field contains\n-\tg.3gpp.srvcc indicating that the session has been anchored in the SCC AS.\nSupported:\tThe SCC AS adds the \"tdialog\" and the \"replaces\" option tags in the Supported header field header, if not already included. In this example the \"tdialog\" and the \"replaces\" option tags were already included.\n16.\tATGW resource configuration\nThe ATCF configures the resources of ATGW.\n17.\tSIP 183 (Session Progress) response (ATCF towards UE) - see example in table A.4.2-17\nThe ATCF replaces the IP address, ports, ... in SDP answer with values provided by ATGW.\nTable A.4.2-17: SIP 183 (Session Progress) response (ATCF towards UE)\nSIP/2.0 183 Session Progress\nFeature-Caps: *;+g.3gpp.srvcc\nRecord-Route: <sip:pcscf1.visited1.net;lr>, <sip:atcf.visited.net;lr>, <sip:scscf.home1.net;lr>, <sip:icscf.home1.net;lr>, <sip:sccas.home1.net;lr>\nVia: SIP/2.0/UDP pcscf1.visited2.net:5060;branch=z9hG4bKnas56565, SIP/2.0/UDP [5555::aaa:bbb:ccc:ddd]:1357;comp=sigcomp;branch=z9hG4bKnashds7\nMax-Forwards: 60\nP-Asserted-Identity: <tel:+1-212-555-2222>\nPrivacy:\nFrom:\nTo:\nCall-ID:\nCseq:\nRequire:\nSupported:\nContact: <sip:user2_public1@home2.net;gr=urn:uuid:2ad8950e-48a5-4a74-8d99-ad76cc7fc74>;+g.3gpp.icsi-ref=\"urn%3Aurn-7%3A3gpp-service.ims.icsi.mmtel\"\nAllow:\nContent-Type:\nContent-Length:\n\nv=0\no=- 44 555 IN IP6 8888::111:222:333:444\ns=-\nc=IN IP6 8888::111:222:333:444\nt=0 0\nm=audio 11234 RTP/AVP 97 96\nb=AS:25.4\na=curr:qos local none\na=curr:qos remote sendrecv\na=des:qos mandatory local sendrecv\na=des:qos mandatory remote sendrecv\na=rtpmap:97 AMR\na=fmtp:97 mode-set=0,2,5,7; maxframes=2\na=rtpmap:96 telephone-event\n\nSDP answer:\tthe IP address and ports are updated to contain the values provided by ATGW.\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "A.4.3\tCall origination prior to CS to PS SRVCC",
                    "description": "",
                    "summary": "",
                    "text_content": "The signalling flow shown in figure A.4.3-1 gives an example of originating session set up. In this flow, the ATCF decides to anchor the media of the session in ATGW.\nThe given telecommunication figure illustrates the signalling flow for a SIP (Session Initiation Protocol) call, focusing on the initial \"Trying\" phase where the SIP 100 responses are not depicted. The flow begins with the client initiating the call by sending a SIP request to the server, which then responds with a SIP 100 code. The figure showcases the exchange of messages between the client and server, including the establishment of a session ID and the use of a proxy server if necessary. The signalling flow is essential for understanding the initial stages of a VoIP (Voice over IP) call setup and the role of various components such as the SIP registrar, proxy, and the signaling gateway.\nNOTE:\tFor clarity, the SIP 100 (Trying) responses are not shown in the signalling flow.\nFigure A.4.3-1\tSignalling flows for service continuity using CS to PS SRVCC.\n1.\tSC UE A registers in IMS\nThe SC UE A registers in IMS.\n2.\tThe SC UE A performs a CS attach and the MSC server registers in IMS.\n3.\tCC SETUP message (SC UE A to MSC server).\nThe SC UE sends a CC SETUP message according to 3GPP TS 24.008 [8].\n4.\tSIP INVITE request (MSC server to ATCF) - see example in table A.4.3-4\nThe MSC server enhanced for ICS sends the SIP INVITE request towards the ATCF.\nTable A.4.3-4: SIP INVITE request (MSC server to ATCF)\nINVITE tel:+1-237-555-2222 SIP/2.0\nVia: SIP/2.0/UDP [5555::aaa:bbb:ccc:ddd]:1357;branch=z9hG4bKnashds7\nMax-Forwards: 70\nRoute: <sip:atcf2.visited2.net:7531;lr><sip:orig@scscf1.home1.net;lr>\nP-Asserted-Identity: tel:+1-212-555-1111\nP-Charging-Vector: icid-value=\"1234bc9876e\";icid-generated-at\"5555::aaa:bbb:ccc:ddd\";orig-ioi=visited2.net\nPrivacy: none\nFrom: <tel:+1-237-555-1111>;tag=171828\nTo: < tel:+1-237-555-2222 >\nP-Access-Network-Info: 3GPP-UTRAN-TDD; utran-cell-id-3gpp=234151D0FCE11\nP-Visited-Network-ID: \"Visited Network Number 1 for MSC Server\"\nCall-ID: cb03a0s09a2sdfglkj490333\nCseq: 127 INVITE\nSupported: precondition, 100rel\nAccept: application/vnd.3gpp.access-transfer-events+xml;et=\"2\"\nRecv-Info: g.3gpp.access-transfer-events\nContact: <sip:user1_public1@visited2.net>;+g.3gpp.icsi-ref=\"urn%3Aurn-7%3A3gpp-service.ims.icsi.mmtel\";+g.3gpp.ti=\"F0CA\"\nAccept-Contact: *;+g.3gpp.icsi-ref=\"urn%3Aurn-7%3A3gpp-service.ims.icsi.mmtel\"\nAllow: INVITE, ACK, CANCEL, BYE, PRACK, UPDATE, REFER, MESSAGE\nContent-Type: multipart/mixed;boundary=\"boundary1\"\nContent-Length: (…)\n\n--boundary1\nContent-Type: application/sdp\n\nv=0\no=- 2987933615 2987933615 IN IP6 5555::aaa:bbb:ccc:ddd\ns=-\nc=IN IP6 5555::aaa:bbb:ccc:ddd\nt=0 0\nm=audio 3456 RTP/AVP 97 96\nb=AS:25.4\na=curr:qos local sendrecv\na=curr:qos remote none\na=des:qos mandatory local sendrecv\na=des:qos none remote sendrecv\na=rtpmap:97 AMR\na=fmtp:97 mode-set=0,2,5,7; maxframes=2\na=rtpmap:96 telephone-event\n\n--boundary1\nContent-Type: application/vnd.3gpp.srvcc-ext+xml\n\n<?xml version=\"1.0\"?>\n<srvcc-ext>\n<Setup-info>\n<C-MSISDN>tel:+1-212-555-1111</C-MSISDN>\n<direction>initiator</direction>\n</Setup-info>\n</srvcc-ext>\n--boundary1--\n\nRoute:\tThe ATCF management URI received from  in the SIP MESSAGE request containing CS to PS SRVCC information during the registration of the user is added at the top of the URIs received in the Service-Route header field of the SIP 200 (OK) response to REGISTER.\napplication/vnd.3gpp.srvcc-ext+xml: Contains the direction of call and the C-MSISDN of the UE.\nAccept:\tIndicate that the MSC server is able to receive the application/vnd.3gpp.access-transfer-events+xml with the event type 2.\nRecv-Info:\tIndicate the support for g.3gpp.access-transfer-events package.\nContact:\tg.3gpp.ti media feature tag with value containing the transaction identifier specified in figure 11.9 and table 11.3 of 3GPP TS 24.007 [75] encoded by hexadecimal digit. In this example, the transaction identifier 74 (decimal) and the transaction identifier flag as sent by the MSC server in CS signalling of the originating CS call are shown.\n5.\tATCF decides whether to anchor the media in the ATGW. In this flow, the ATCF decides to anchor the media in the ATGW and reserves the resources in the ATGW.\n6-9.\tSIP INVITE request (ATCF to remote UE B) - see example in table A.4.3-6\nTable A.4.3-6: SIP INVITE request (ATCF to remote UE B)\nINVITE tel:+1-237-555-2222 SIP/2.0\nRecord-Route: <sip:atcf2.visited2.net;lr>\nVia: SIP/2.0/UDP atcf.visited2.net:5060;branch=z9hG4bKnas55889, SIP/2.0/UDP [5555::aaa:bbb:ccc:ddd]:1357;;branch=z9hG4bKnashds7\nMax-Forwards:\nRoute: <sip:orig@scscf1.home1.net;lr>\nP-Asserted-Identity:\nP-Access-Network-Info:\nP-Charging-Vector:\nPrivacy:\nFrom:\nTo:\nCall-ID:\nCseq:\nRequire:\nSupported:\nProxy-Require:\nContact:\nAccept-Contact\nAllow:\nContent-Type:\nContent-Length:\n\nv=0\no=- 22 333 IN IP6 8888::111:222:333:444\ns=-\nc=IN IP6 8888::111:222:333:444\nt=0 0\nm=audio 8899 RTP/AVP 97 96\nb=AS:25.4\na=curr:qos local sendrecv\na=curr:qos remote none\na=des:qos mandatory local sendrecv\na=des:qos none remote sendrecv\na=rtpmap:97 AMR\na=fmtp:97 mode-set=0,2,5,7; maxframes=2\na=rtpmap:96 telephone-event\n\nSDP offer:\tThe IP address and ports are updated to contain the values provided by ATGW.\n10-11. SIP 183 (Session Progress) response (remote UE B to SCC AS)\nThe remote UE B responds with SIP 183 (Session progress) response.\n12-13. SIP 183 (Session Progress) response ( to ATCF) - see example in table A.4.3-13\nTable A.4.3-13: SIP 183 (Session Progress) response ( towards ATCF)\nSIP/2.0 183 Session Progress\nRecord-Route: <sip:atcf2.visited2.net;lr>,<sip:icscf1.home1.net;lr>,<sip:scscf1.home1.net;lr>, <sip:sccas1.home1.net;lr>;\nVia: SIP/2.0/UDP scscf1.home1.net:5060;branch=z9hG4bKnas889, SIP/2.0/UDP atcf.visited2.net:5060;branch=z9hG4bKnas55889, SIP/2.0/UDP [5555::aaa:bbb:ccc:ddd]:1357;branch=z9hG4bKnashds7\nMax-Forwards:\nP-Asserted-Identity: <tel:+1-237-555-2222>\nP-Charging-Vector: icid-value=\"1234bc9876e@5555::aaa:bbb:ccc:ddd\";orig-ioi= visited2.net\nPrivacy:\nFrom:\nTo: <tel:+1-237-555-2222>; tag=aaa\nCall-ID:\nCseq:\nRequire:\nSupported:\nContact: <sip:user2_public1@home2.net;gr=urn:uuid:2ad8950e-48a5-4a74-8d99-ad76cc7fc74>;+g.3gpp.icsi-ref=\"urn%3Aurn-7%3A3gpp-service.ims.icsi.mmtel\"\nAllow:\nContent-Type:\nContent-Length:\nFeature-Caps: *;+g.3gpp.srvcc\n\nv=0\no=- 462346 5654 IN IP6 1234::55:66:77:88\ns=-\nc=IN IP6 1234::55:66:77:88\nt=0 0\nm=audio 4456 RTP/AVP 97 96\nb=AS:25.4\na=curr:qos local none\na=curr:qos remote sendrecv\na=des:qos mandatory local sendrecv\na=des:qos mandatory remote sendrecv\na=rtpmap:97 AMR\na=fmtp:97 mode-set=0,2,5,7; maxframes=2\na=rtpmap:96 telephone-event\n\n14. Configure ATGW resources.\nThe ATCF configures the resources of ATGW.\n15. SIP 183 (Session Progress) response (ATCF to MSC server) - see example in table A.4.3-15\nTable A.4.3-15: SIP 183 (Session Progress) response (ATCF to MSC server)\nSIP/2.0 183 Session Progress\nRecord-Route: <sip:atcf2.visited2.net;lr>, <sip:scscf1.home1.net;lr>, <sip:icscf1.home1.net;lr>, <sip:sccas1.home1.net;lr>\nVia: SIP/2.0/UDP [5555::aaa:bbb:ccc:ddd]:1357;\nMax-Forwards:\nP-Asserted-Identity:\nP-Charging-Vector:\nPrivacy:\nFrom:\nTo:\nCall-ID:\nCseq:\nRequire:\nSupported:\nRecv-Info: g.3gpp.access-transfer-events;et=\"1,3,4\"\nContact: <sip:user2_public1@home2.net;gr=urn:uuid:2ad8950e-48a5-4a74-8d99-ad76cc7fc74>;+g.3gpp.icsi-ref=\"urn%3Aurn-7%3A3gpp-service.ims.icsi.mmtel\"\nAllow:\nContent-Type:\nContent-Length:\n\nv=0\no=- 44 555 IN IP6 8888::111:222:333:444\ns=-\nc=IN IP6 8888::111:222:333:444\nt=0 0\nm=audio 11234 RTP/AVP 97 96\nb=AS:25.4\na=curr:qos local none\na=curr:qos remote sendrecv\na=des:qos mandatory local sendrecv\na=des:qos mandatory remote sendrecv\na=rtpmap:97 AMR\na=fmtp:97 mode-set=0,2,5,7; maxframes=2\na=rtpmap:96 telephone-event\n\nSDP answer:\tthe IP address and ports are updated to contain the values provided by ATGW.\nRecv-Info:\tIndicates the support for the info package g.3gpp.access-transfer-events and is able to receive the event types 1, 3 and 4.\n16. CC CALL CONFIRM message (MSC server to SC UE A)\nRegular call setup continues.\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                }
            ]
        },
        {
            "title": "A.5\tSignalling flows for call termination for service continuity",
            "description": "",
            "summary": "",
            "tables": [],
            "figures_meta_data": [],
            "subsections": [
                {
                    "title": "Session termination using CS media",
                    "description": "",
                    "summary": "",
                    "text_content": "An example flow for session termination using CS calls can be found in 3GPP TS 24.292 [4].\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "A.5.2\tCall termination prior to CS to PS SRVCC",
                    "description": "",
                    "summary": "",
                    "text_content": "The signalling flow shown in figure A.5.2-1 gives an example of a terminating session set up. In this flow, the ATCF anchors the media of the session in ATGW.\nThe given telecommunication figure illustrates the signalling flow for a SIP (Session Initiation Protocol) call, focusing on the initial \"Trying\" phase where the SIP 100 responses are not depicted. The flow begins with the client initiating the call by sending a SIP request to the server, which then responds with a SIP 100 code. The figure showcases the exchange of messages between the client and server, including the establishment of a session ID and the use of a proxy server if necessary. The signalling flow is essential for understanding the initial stages of a VoIP (Voice over IP) call setup and the role of various components such as the SIP registrar, proxy, and the signaling gateway.\nNOTE:\tFor clarity, the SIP 100 (Trying) responses are not shown in the signalling flow.\nFigure A.5.2-1\tSignalling flows for service continuity using CS to PS SRVCC.\n1.\tSC UE A registers in IMS.\n2.\tThe SC UE A performs a CS attach and the MSC server registers in IMS.\n3-4.\tSIP INVITE request (Remote UE B to SCC AS)\nThe remote UE sends a SIP INVITE request towards the user at SC UE A.\n5-6.\tSIP INVITE request ( to MSC server) - see example in table A.5.2-5\nThe SCC AS forwards the SIP INVITE request towards the MSC server.\nTable A.5.2-5: SIP INVITE request ( to MSC server)\nINVITE tel:+1-237-555-1111 SIP/2.0\nVia: SIP/2.0/UDP sccas1.home1.net;branch=z9hG4bK871y12.1\nMax-Forwards: 70\nRoute: <sip:scscf1.home1.net;lr>,<sip:msc2.visited2.net;lr>\nRecord-Route: <sip:sccas1.home1.net;lr>\nP-Asserted-Identity: \"John Doe\" <sip:user1_public2@visited2.net>, <tel:+1-237-555-2222>\nP-Asserted-Service: urn:urn-7:3gpp-service.ims.icsi.mmtel\nAccept-Contact: *;+g.3gpp.icsi-ref=\"urn%3Aurn-7%3A3gpp-service.ims.icsi.mmtel\"\nPrivacy: none\nFrom: <tel:+1-237-555-2222>;tag=171828\nTo: tel:+1-237-555-1111\nP-Charging-Vector: icid-value=\"1234bc9876e\";icid-generated-at=5555::aaa:bbb:ccc:eeee\";orig-ioi=visited2.net\nCall-ID: cb03a0s09a2sdfglkj490333\nCseq: 127 INVITE\nSupported: 100rel, precondition, gruu, 199\nAccept: applicatiom/sdp,application/3gpp-ims+xml\nContact: <sip:user2_public1@visited2.net;gr=urn:uuid:f81d4fae-7dec-11d0-a765-00a0c91e6bf6>;+g.3gpp.icsi-ref=\"urn%3Aurn-7%3A3gpp-service.ims.icsi.mmtel\">\nAllow: INVITE, ACK, CANCEL, BYE, PRACK, UPDATE, REFER, MESSAGE\nFeature-Caps: *;+g.3gpp.srvcc\nContent-Type: application/sdp\nContent-Length: (…)\n\nv=0\no=- 2987933615 2987933615 IN IP6 5555::aaa:bbb:ccc:ddd\ns=-\nc=IN IP6 5555::aaa:bbb:ccc:ddd\nt=0 0\nm=video 3400 RTP/AVP 98 99\nb=AS:75\na=curr:qos local none\na=curr:qos remote none\na=des:qos mandatory local sendrecv\na=des:qos none remote sendrecv\na=inactive\na=rtpmap:98 H263\na=fmtp:98 profile-level-id=0\na=rtpmap:99 MP4V-ES\nm=audio 3456 RTP/AVP 97 0 96\nb=AS:25.4\na=curr:qos local none\na=curr:qos remote none\na=des:qos mandatory local sendrecv\na=des:qos none remote sendrecv\na=rtpmap:97 AMR\na=fmtp:97 mode-set=0,2,5,7; mode-change-period=2\na=rtpmap:96 telephone-event\na=maxptime:20\n\nFeature-Caps:\tThe header field contains\n-\tg.3gpp.srvcc indicating that the session has been anchored in the SCC AS.\n7.\tINVITE request (MSC server to ATCF) - see example in table A.5.2-7\nTable A.5.2-7: SIP INVITE request (MSC server to ATCF)\nINVITE tel:+1-237-555-1111 SIP/2.0\nVia: SIP/2.0/UDP msc2.visited2.net;branch=z9hG4bK879l11.1,SIP/2.0/UDP scscf1.home1.net;branch=z9hG4bK871z34.1,SIP/2.0/UDP sccas1_s.home1.net;branch=z9hG4bK871y12.1\nMax-Forwards: 70\nRoute: <sip:atcf2.visited2.net;lr>,<sip:msc2.visited2.net;lr>\nRecord-Route: <sip:atcf2.visited2.net;lr>,<sip:msc2.visited2.net;lr>,<sip:scscf1.home1.net;lr>,<sip:sccas1.home1.net;lr>\nP-Asserted-Identity: \"John Doe\" <sip:user1_public2@visited2.net>, <tel:+1-237-555-2222>\nP-Asserted-Service: urn:urn-7:3gpp-service.ims.icsi.mmtel\nAccept-Contact: *;+g.3gpp.icsi-ref=\"urn%3Aurn-7%3A3gpp-service.ims.icsi.mmtel\"\nPrivacy: none\nFrom: <sip:user2_public1@visited2.net>;tag=171828\nTo: tel:+1-237-555-1111\nCall-ID: cb03a0s09a2sdfglkj490333\nCseq: 127 INVITE\nSupported: 100rel, precondition, gruu, 199\nAccept: applicatiom/sdp,application/3gpp-ims+xml\nContact: <sip:user2_public1@visited2.net;gr=urn:uuid:f81d4fae-7dec-11d0-a765-00a0c91e6bf6>;+g.3gpp.icsi-ref=\"urn%3Aurn-7%3A3gpp-service.ims.icsi.mmtel\">;g.3gpp.rsrvcc\nAllow: INVITE, ACK, CANCEL, BYE, PRACK, UPDATE, REFER, MESSAGE\nP-Charging-Vector: icid-value=\"1234bc9876e\";icid-generated-at=5555::aaa:bbb:ccc:eeee\";orig-ioi=visited2.net\nFeature-Caps: *;+g.3gpp.srvcc\nContent-Type: multipart/mixed;boundary=\"boundary1\"\nContent-Length: (…)\n\n--boundary1\nContent-Type: application/sdp\n\nv=0\no=- 2987933615 2987933615 IN IP6 5555::aaa:bbb:ccc:ddd\ns=-\nc=IN IP6 5555::aaa:bbb:ccc:ddd\nt=0 0\nm=video 3400 RTP/AVP 98 99\nb=AS:75\na=curr:qos local none\na=curr:qos remote none\na=des:qos mandatory local sendrecv\na=des:qos none remote sendrecv\na=inactive\na=rtpmap:98 H263\na=fmtp:98 profile-level-id=0\na=rtpmap:99 MP4V-ES\nm=audio 3456 RTP/AVP 97 0 96\nb=AS:25.4\na=curr:qos local none\na=curr:qos remote none\na=des:qos mandatory local sendrecv\na=des:qos none remote sendrecv\na=rtpmap:97 AMR\na=fmtp:97 mode-set=0,2,5,7; mode-change-period=2\na=rtpmap:96 telephone-event\na=maxptime:20\n\n--boundary1\nContent-Type: application/vnd.3gpp.srvcc-ext+xml\n\n<?xml version=\"1.0\"?>\n<srvcc-ext>\n<Setup-info>\n<C-MSISDN>tel:+1-212-555-1111</C-MSISDN>\n<direction>receiver</direction>\n</Setup-info>\n</srvcc-ext>\n--boundary1--\n\nRoute:\tATCF management URI received from  in the SIP MESSAGE request containing CS to PS SRVCC information during the registration of the user followed by MSC server URI.\napplication/vnd.3gpp.srvcc-ext+xml:\tContains the direction of call and the C-MSISDN of the UE.\n8.\tATCF decides whether to anchor the media in the ATGW. In this flow, the ATCF decides to anchor the media in the ATGW and reserves the resources in the ATGW.\n9.\tSIP INVITE request (ATCF to MSC server) - see example in table A.5.2-9\nThe ATCF forwards the SIP INVITE request to MSC server according to the received Route header field.\nTable A.5.2-9: SIP INVITE request (ATCF to MSC server)\nINVITE tel:+1-237-555-1111 SIP/2.0\nVia: SIP/2.0/UDP atcf2.visited2.net;branch=z9hG4bK871x99ja,SIP/2.0/UDP msc2.visited2.net;branch=z9hG4bK879l11.1,SIP/2.0/UDP scscf1.home1.net;branch=z9hG4bK871z34.1,SIP/2.0/UDP sccas1.home1.net;branch=z9hG4bK871y12.1\nMax-Forwards: 68\nRoute:<sip:msc2.visited2.net;lr>\nRecord-Route:<sip:atcf2.visited2.net:7531;lr>,<sip:scscf1.visited2.net;lr>,<sccas1.home1.net;lr>\nP-Asserted-Identity:\nP-Charging-Vector: icid-value=\"1234bc9876e\";icid-generated-at=5555::aaa:bbb:ccc:eeee\";orig-ioi=visited2.net\nP-Asserted-Service: urn:urn-7:3gpp-service.ims.icsi.mmtel\nAccept-Contact: *;+g.3gpp.icsi-ref=\"urn%3Aurn-7%3A3gpp-service.ims.icsi.mmtel\"\nPrivacy:\nFrom:\nTo:tel:\nCall-ID: cb03a0s09a2sdfglkj490333\nCseq: 127 INVITE\nSupported:\nAccept: applicatiom/sdp,application/3gpp-ims+xml,application/3gpp.access-transfer-events+xml;et=\"1,3,4\"\nRecv-Info: g.3gpp.access-transfer-events\nContact: sip:<+12375551111 @msc2.visited2.net;user=phone>;+g.3gpp.icsi-ref=\"urn%3Aurn-7%3A3gpp-service.ims.icsi.mmtel\">\nAllow: INVITE, ACK, CANCEL, BYE, PRACK, UPDATE, REFER, MESSAGE\nFeature-Caps: *;+g.3gpp.srvcc\nContent-Type: application/sdp\nContent-Length: (…)\n\nv=0\no=- 2987933615 2987939999 IN IP6 8888::111:222:333:444\ns=-\nc=IN IP6 8888::111:222:333:444\nt=0 0\nm=video 3400 RTP/AVP 98 99\nb=AS:75\na=curr:qos local none\na=curr:qos remote none\na=des:qos mandatory local sendrecv\na=des:qos none remote sendrecv\na=inactive\na=rtpmap:98 H263\na=fmtp:98 profile-level-id=0\na=rtpmap:99 MP4V-ES\nm=audio 3456 RTP/AVP 97 0 96\nb=AS:25.4\na=curr:qos local none\na=curr:qos remote none\na=des:qos mandatory local sendrecv\na=des:qos none remote sendrecv\na=rtpmap:97 AMR\na=fmtp:97 mode-set=0,2,5,7; mode-change-period=2\na=rtpmap:96 telephone-event\na=maxptime:20\n\nSDP offer:\tthe IP address and ports are updated to contain the values provided by ATGW.\nAccept:\tIndicates that the ATCF is able to receive the application/3gpp.access-transfer-events+xml with event types 1, 3 and 4.\nRecv-Info:\tIndicates that the ATCF support receiving the g.3gpp.access-transfer-events info package.\n10.\tCC SETUP message (MSC server to UE A)\nThe MSC server sends a CC SETUP message. The mapping of the INVITE request to the CC SETUP message is described by 3GPP TS 29.292 [18].\n11.\tCC CALL CONFIRM message (UE A to MSC server)\nThe UE sends a CC CALL CONFIRM message in accordance to 3GPP TS 24.008 [8].\n12.\tSIP 183 (Session Progress) response (MSC server to ATCF) - see example in table A.5.2-12\nThe MSC server sends a SIP 183 (Session Progress) response. The CC CONFIRMED message is mapped to the SIP 183 (Session Progress) response as described in 3GPP TS 29.292 [18].\nTable A.5.2-12: SIP 183 (Session Progress) response (MSC server to ATCF)\nSIP/2.0 183 Session Progress\nVia:\nRoute: sip:atcf2.visited2.net:7531;lr;>; <sip:scscf1.visited2.net;lr>>\nRecord-Route: <sip:scscf1.visited2.net;lr>,<sip:atcf2.visited2.net:7531;lr;>\nP-Asserted-Identity: tel:<+12375551111>\nP-Called-Party-ID:tel:<+12375551111>\nP-Charging-Vector: icid-value=\"1234bc9876e\";icid-generated-at=5555::aaa:bbb:ccc:eeee\";orig-ioi=visited2.net\nFrom:\nTo: <tel:+1-237-555-2222>;tag=314159\nCall-ID:\nCseq:\nRequire: 100rel\nContact: <sip:user1_public1@visited2.net;gr=urn:uuid:f81d4fae-7dec-11d0-a765-00a0c91e6bf6>;+g.3gpp.icsi-ref=\"urn%3Aurn-7%3A3gpp-service.ims.icsi.mmtel\";+g.3gpp.ti=\"70D8\"\nAllow: INVITE, ACK, CANCEL, BYE, PRACK, UPDATE, REFER\nRseq: 9021\nContent-Type: application/sdp\nContent-Length: (…)\nRecv-Info: g.3gpp.access-transfer-events;et=\"2\"\n\nv=0\no=- 2987933615 2987939999 IN IP6 8888::111:222:333:666\ns=-\nc=IN IP6 8888::111:222:333:666\nt=0 0\nm=video 0 RTP/AVP 98 99\nm=audio 6544 RTP/AVP 97 96\nb=AS:25.4\na=curr:qos local sendrecv\na=curr:qos remote none\na=des:qos mandatory local sendrecv\na=des: qos mandatory remote sendrecv\na=conf:qos remote sendrecv\na=rtpmap:97 AMR\na=fmtp:97 mode-set=0,2,5,7; mode-change-period=2\na=rtpmap:96 telephone-event\na=maxptime:20\n\nRecv-Info:\tIndicates that the ATCF support receiving the g.3gpp.access-transfer-events info package with event type 2.\nContact:\tg.3gpp.ti media feature tag with value containing the transaction identifier specified in figure 11.9 and table 11.3 of 3GPP TS 24.007 [75] encoded by hexadecimal digit. In this example, the transaction identifier 88 (decimal) and the transaction identifier flag as sent by the MSC server in CS signalling of the terminating CS call are shown.\n13.\tConfigure ATGW resources\nThe ATCF configures resources in the ATGW.\n14.\tSIP 183 (Session Progress) response (ATCF to MSC server) - see example in table A.5.2-14\nTable A.5.2-14: SIP 183 (Session Progress) response (ATCF to MSC server)\nSIP/2.0 183 Session Progress\nVia:\nRoute: sip:atcf2.visited2.net:7531;lr;>; <sip:scscf1.home1.net;lr>;g.3gpp.srvcc me\nRecord-Route: <sip:scscf1.home1.net;lr>,<sip:atcf2.visited2.net:7531;lr;>\nP-Asserted-Identity: <tel:+1-237-555-1111>\nP-Called-Party-ID: <tel:+1-237-555-1111>\nP-Charging-Vector: icid-value=\"1234bc9876e\";icid-generated-at=5555::aaa:bbb:ccc:eeee\";orig-ioi=visited2.net\nFrom:\nTo: <tel:+1-237-555-2222>;tag=314159\nCall-ID:\nCseq:\nRequire: 100rel\nContact:\nAllow: INVITE, ACK, CANCEL, BYE, PRACK, UPDATE, REFER\nRseq: 9021\nContent-Type: application/sdp\nContent-Length: (…)\n\nv=0\no=- 2987933615 2987332299 IN IP6 8888::111:222:333:446\ns=-\nc=IN IP6 8888::111:222:333:446\nt=0 0\nm=video 0 RTP/AVP 98 99\nm=audio 53261 RTP/AVP 97 96\nb=AS:25.4\na=curr:qos local sendrecv\na=curr:qos remote none\na=des:qos mandatory local sendrecv\na=des: qos mandatory remote sendrecv\na=conf:qos remote sendrecv\na=rtpmap:97 AMR\na=fmtp:97 mode-set=0,2,5,7; mode-change-period=2\na=rtpmap:96 telephone-event\na=maxptime:20\n\nSDP answer:\tthe IP address and ports are updated to contain the values provided by ATGW.\n\n15-16.\tSIP 183 (Session Progress) response (MSC server to ) - see example in table A.5.2-15\nTable A.5.2-15: SIP 183 (Session Progress) response (ATCF to SCC AS)\nSIP/2.0 183 Session Progress\nVia:\nRoute: sip:atcf2.visited2.net:7531;lr;>; <sip:scscf1.home1.net;lr>;g.3gpp.srvcc me\nRecord-Route: <sip:scscf1.home1.net;lr>,<sip:atcf2.visited2.net:7531;lr;>\nP-Asserted-Identity: <tel:+1-237-555-1111>\nP-Called-Party-ID:tel: <tel:+1-237-555-1111>\nP-Charging-Vector: P-Charging-Vector: icid-value=\"1234bc9876e\";icid-generated-at=5555::aaa:bbb:ccc:eeee\";orig-ioi=visited2.net\nFrom:\nTo: <tel:+1-237-555-2222>;tag=314159\nCall-ID:\nCseq:\nRequire: 100rel\nContact:\nAllow: INVITE, ACK, CANCEL, BYE, PRACK, UPDATE, REFER\nRseq: 9021\nContent-Type: application/sdp\nContent-Length: (…)\n\nv=0\no=- 2987933615 2987332299 IN IP6 8888::111:222:333:446\ns=-\nc=IN IP6 8888::111:222:333:446\nt=0 0\nm=video 0 RTP/AVP 98 99\nm=audio 53261 RTP/AVP 97 96\nb=AS:25.4\na=curr:qos local sendrecv\na=curr:qos remote none\na=des:qos mandatory local sendrecv\na=des: qos mandatory remote sendrecv\na=conf:qos remote sendrecv\na=rtpmap:97 AMR\na=fmtp:97 mode-set=0,2,5,7; mode-change-period=2\na=rtpmap:96 telephone-event\na=maxptime:20\n\nSDP answer:\tthe IP address and ports are the values provided by ATGW.\n16-17.\tSIP 183 (Session Progress) response ( to remote UE)\nThe SCC AS sends the SIP 183 (Session Progress) response towards the remote UE.\nRegular call setup continues.\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                }
            ]
        },
        {
            "title": "A.6\tSignalling flows for PS-CS access transfer",
            "description": "",
            "summary": "",
            "tables": [],
            "figures_meta_data": [],
            "subsections": [
                {
                    "title": "PS-CS access transfer: CS-PS",
                    "description": "",
                    "summary": "",
                    "text_content": "In this example, SC UE A has an ongoing session with remote UE B over CS bearer before access transfer. When SC UE connects to an IP-CAN, it decides to transfer the session over the new IP-CAN.\nFigure A.6.1-1 illustrates the signalling flow for PS-CS access transfer, specifically focusing on the transition from CS to PS. The figure depicts the various stages of the process, including the initiation of the transfer request, the exchange of control and status messages between the UE and the network, and the successful completion of the transfer. Key components such as the PS, CS, and the signalling protocol are highlighted, providing a comprehensive overview of the PS-CS access transfer process.\nFigure A.6.1-1: Signalling flow for PS-CS Access Transfer: CS to PS\nNOTE 1:\tFor clarity, the SIP 100 (Trying) responses are not shown in the signalling flow.\n1.\tSC UE A has an ongoing session with remote UE B\nThe call has been anchored at the SCC AS which is in the HPLMN of originating SC UE A.\n2.\tSC UE A connects to a new IP-CAN:\nThe SC UE A decides to transfer the session over the new IP-CAN. The UE A obtains an IP address that it will use for the signalling and media. It registers with the S-CSCF over the new IP-CAN using standard registration procedure and reserves resources in the new IP-CAN.\n3.\tSIP INVITE request (SC UE A to intermediate IM CN subsystem entities) - see example in table A.6.1-3\nThe SC UE A sends an initial SIP INVITE request to request the new call replaces the existing call.\nTable -3: SIP INVITE request (UE A to intermediate IM CN subsystem entities)\nINVITE sip:domain.xfer@sccas.home1.net SIP/2.0\nVia: SIP/2.0/UDP [5555::aaa:bbb:ccc:ddd]:1357;comp=sigcomp;branch=z9hG4bKnashds7\nMax-Forwards: 70\nRoute: <sip:pcscf1.home1.net:7531;lr >, <sip:orig@scscf1.home1.net;lr>\nP-Preferred-Identity: \"John Doe\" <sip:user1_public1@home1.net>\nP-Access-Network-Info: IEEE-802.11b\nPrivacy: none\nFrom: <sip:user1_public1@home1.net>; tag=171828\nTo: <tel:+1-237-555-2222>\nCall-ID: cb0s2sdfglkj490237\nCseq: 127 INVITE\nSupported: 100rel; precondition\nRequire: sec-agree\nProxy-Require: sec-agree\nSecurity-Verify: ipsec-3gpp; q=0.1; alg=hmac-sha-1-96; spi=87654321; port1=7531\nContact: <sip:user1_public1@home1.net;gr= urn:uuid:f81d4fae-7dec-11d0-a765-00a0c91e6bf6>;+g.3gpp.icsi-ref=\"urn%3Aurn-7%3A3gpp-service.ims.icsi.mmtel\";+g.3gpp.ics=\"principal\";\nAllow: INVITE, ACK, CANCEL, BYE, PRACK, UPDATE\nAccept: application/sdp; application/3gpp-ims+xml\nContent-Type: application/sdp\nContent-Length: (…)\n\nv=0\no=- 2987933615  IP6 5555::aaa:bbb:ccc:ddd\ns=\nc=IN IP6 5555::aaa:bbb:ccc:ddd\nt=0 0\nm=audio 3456 RTP/AVP 97 96\nb=AS:25.4\na=curr:qos local sendrecv\na=curr:qos remote none\na=des:qos mandatory local sendrecv\na=des:qos none remote sendrecv\na=rtpmap:97 AMR\na=fmtp:97 mode-set=0,2,5,7; mode-change-period=2\na=rtpmap:96 telephone-event\na=maxptime:20\n\n4.\tEvaluation of initial filter criteria\nThe S-CSCF evaluates initial filter criteria for the served SC user and as a result routes the SIP INVITE request towards the SCC AS.\n5.\tSIP INVITE request (intermediate IM CN subsystem entities to )\nThe SIP INVITE request is forwarded to the SCC AS as the result of the evaluation of iFC.\n6.\tRemote Leg Update\nThe SCC AS performs the Remote Leg update by sending the SIP re-INVITE request towards the remote UE.\n7.\tSIP re-INVITE request ( to intermediate IM CN subsystem entities)- See example in table A.6.1-7\nThe SCC AS modifies the message in accordance with routeing B2BUA functionality, e.g. mapping of From, To, Cseq and Call-ID header fields from one side of the B2BUA to the other. In this example the SCC AS includes the contents of the Contact header field from the received SIP INVITE request. The SIP re-INVITE request contains the SDP offer that is identical to the SDP offer that the SCC AS received in the initial SIP INVITE request from the UE A (Step 3).\nTable -7: SIP re-INVITE request ( to intermediate IM CN subsystem entities)\nINVITE < sip:user1_public1@home1.net;gr=urn:uuid:f81d4fae-7dec-11d0-a765-00a0c91e6bf6> SIP/2.0\nVia: SIP/2.0/UDP sccas.home1.net; branch=z9hG4bK332b33.3;\nMax-Forwards: 67\nRoute: <scscf1.home1.net;lr >,<sip:scscf2.home2.net;lr>, <sip:pcscf2.visited2.net;lr>\nP-Asserted-Identity: \"John Doe\" <sip:user1_public1@home1.net>, <tel:+1-237-555-1111>\nP-Access-Network-Info: IEEE-802.11b\nPrivacy: none\nP-Charging-Vector: icid-value=\"AyretyU0dm+6O2IrT5tAFrbHLso=023551024\"\nP-Charging-Function-Addresses:\nFrom: <sip:user1_public1@home1.net>; tag=1717777\nTo: <tel:+1-237-555-2222>, tag=4321\nCall-ID: dc14b1t10b3teghmlk5013237\nCseq: 111 INVITE\nSupported: precondition, 100rel\nContact: <sip:user2_public1@home2.net;gr=urn:uuid:2ad8950e-48a5-4a74-8d99-ad76cc7fc74>;+g.3gpp.icsi-ref=\"urn%3Aurn-7%3A3gpp-service.ims.icsi.mmtel\"\nAllow: INVITE, ACK, CANCEL, BYE, PRACK, UPDATE\nAccept: application/sdp\nContent-Type: application/sdp\nContent-Length: (…)\n\nv=0\no=- 2987933615  IP6 5555::aaa:bbb:ccc:ddd\ns=\nc=IN IP6 5555::aaa:bbb:ccc:ddd\nt=0 0\nm=audio 3456 RTP/AVP 97 96\nb=AS:25.4\na=curr:qos local sendrecv\na=curr:qos remote none\na=des:qos mandatory local sendrecv\na=des:qos none remote sendrecv\na=rtpmap:97 AMR\na=fmtp:97 mode-set=0,2,5,7; mode-change-period=2\na=rtpmap:96 telephone-event\na=maxptime:20\n\n8.\tSIP re-INVITE request (Intermediate IM CN subsystem entities to UE B)\nThe intermediate IM CN subsystem entities forward the SIP re-INVITE request to remote UE B.\n9-10:\tSIP 200 (OK) response (UE B to SCC AS via Intermediate IM CN subsystem entities)\nThe UE B generates the SIP 200 (OK) response to the SIP re-INVITE request and forwards it to the SCC AS.\n11-12:\tSIP ACK request ( to UE B via Intermediate IM CN subsystem entities)\nThe SCC AS generates the SIP ACK request to the SIP 200 (OK) response and forwards it to the remote UE B.\n13-14:\tSIP 200 (OK) response ( to UE A via Intermediate IM CN subsystem entities)\nThe SCC AS generates the SIP 200 (OK) response to the SIP INVITE request and forwards it to the SC UE A.\n15-16:\tSIP ACK request (SC UE A to SCC AS via Intermediate IM CN subsystem entities)\nThe SC UE A generates the SIP ACK request to the SIP 200 (OK) response and forwards it to the SCC AS\n17.\tMedia paths between UE A and UE B\nThe media path is using the new IP-CAN.\n18-19.\tSIP BYE request ( to interworking entities via intermediate IM CN subsystem entities)\nThe SCC AS terminates the replaced call leg, which was using the CS bearer, by sending a SIP BYE request.\n20-22.\tCC DISCONNECT message (interworking entities to SC UE A)\nUpon receiving the CC DISCONNECT message, the SC UE A relinquishes all resources pertaining to the CS bearer.\nNOTE:\tSteps 20-21 are performed only if signalling over CS domain is possible after the CS-PS access transfer is completed; otherwise, the SC UE A and the network release the source access leg locally, without any signalling between the SC UE A and the network.\n23-24.\tSIP 200 (OK) response (Interworking entities to  via intermediate IM CN subsystem entities)\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "PS-CS access transfer: PS-CS",
                    "description": "",
                    "summary": "",
                    "text_content": "In this example, SC UE A has an ongoing session with remote UE B over PS bearer before access transfer which is anchored at  When the SC UE attaches to the CS domain, it decides to transfer the session over the CS bearer without ICS capability.\nFigure A.6.2-1 Signalling flow for PS-CS access transfer: PS-CS illustrates the signalling process for transferring between PS and CS access in a telecommunication network. The figure depicts the various stages, including the initial PS access, the transfer request, the CS access confirmation, and the final establishment of the connection. Key components include the PS, CS, and the signalling protocol. The flowchart highlights the importance of efficient handover mechanisms for seamless connectivity.\nFigure A.6.2-1 Signalling flow for PS-CS access transfer: PS-CS\nNOTE 1:\tFor clarity, the SIP 100 (Trying) responses are not shown in the signalling flow.\n1.\tSC UE A is on an active session with UE B:\nThere is an ongoing IP bearer between the SC UE and the remote end UE B. The call is anchored at\n2.\tSC UE A attaches to the CS domain\nThe SC UE attaches to the CS domain and decides to transfer the session over the CS bearer.\n3.\tCC SETUP messages\nThe SC UE sends the CC SETUP message with the static STN as the called party number.\n4.\tSIP INVITE request (Interworking entities to Intermediate IM CN subsystem entities) -see example in table A.6.2-4\nTable -4: SIP INVITE request (interworking entities to intermediate IM CN subsystem entities)\nINVITE tel: +1-237-555-3333 SIP/2.0\nVia: SIP/2.0/UDP mgcf1.home1.net;branch=z9hG4bk731b87\nMax-Forwards: 70\nRoute: <sip:icscf1.home1.net;lr>\nP-Asserted-Identity: <tel: +1-237-555-1111>\nP-Charging-Vector: ####\nPrivacy: none\nFrom: <tel: +1-237-555-1111>;tag=171828\nTo: <tel: +1-237-555-3333>\nCall-ID: cb0s2sdfglkj490333\nCseq: 127 INVITE\nSupported: 100rel, precondition\nAccept-Contact: *;+g.3gpp.icsi-ref=\"urn%3Aurn-7%3A3gpp-service.ims.icsi.mmtel\"\nP-Asserted-Service: urn:urn-7:3gpp-service.ims.icsi.mmtel\nContact: <sip:mgcf1.home1.net;gr>;+g.3gpp.icsi-ref=\"urn%3Aurn-7%3A3gpp-service.ims.icsi.mmtel\"\nAllow: INVITE, ACK, CANCEL, BYE, PRACK, UPDATE, REFER, MESSAGE\nContent-Type: application/sdp\nContent-Length: (…)\n\nv=0\no=- 2987933615  IP6 5555::aaa:bbb:ccc:eee\ns=\nc=IN IP6 5555::aaa:bbb:ccc:eee\nt=0 0\nm=audio 3456 RTP/AVP 97 96\na=tcap:1 RTP/AVPF\na=pcfg:1 t=1\nb=AS:25.4\na=curr:qos local sendrecv\na=curr:qos remote none\na=des:qos mandatory local sendrecv\na=des:qos none remote sendrecv\na=rtpmap:97 AMR\na=fmtp:97 mode-set=0,2,5,7; mode-change-period=2\na=rtpmap:96 telephone-event\na=maxptime:20\n\nRequest-URI:\tcontains the IMRN, as obtained from CS networks signalling.\nSDP:\tThe SDP contains preconfigured set of codecs supported by the MGW.\n5.\tEvaluation of initial filter criteria\nThe S-CSCF evaluates initial filter criteria for the served SC user and as a result routes the SIP INVITE request towards the SCC AS.\n6.\tSIP INVITE request (Intermediate IM CN subsystem entities to )\n7.\tRemote Leg Update\nThe SCC AS performs the Remote Leg update by sending the SIP re-INVITE request towards the remote UE.\n8.\tSIP re-INVITE request ( to intermediate IM CN subsystem entities) –see example in table A.6.2-8\nThe SCC AS acting as a routing B2BUA generates a SIP INVITE request based upon the received SIP INVITE request and the information previously stored against this session and routes it towards UE B via the intermediate IM CN subsystem entities.\nTable A.6.2-8: SIP re-INVITE request ( to intermediate IM CN subsystem entities)\nINVITE sip:user2_public1@home2.net;gr=urn:uuid:2ad8950e-48a5-4a74-8d99-ad76cc7fc74 SIP/2.0\nVia: SIP/2.0/UDP sccas1.home1.net;branch=z9hG4bKnas34r5\nMax-Forwards: 67\nRoute: <sip:scscf1.home1.net:lr>\nP-Asserted-Identity: <tel: +1-237-555-1111>\nP-Charging-Function-Addresses: ccf=[5555::b99:c88:d77:e66]; ccf=[5555::a55:b44:c33:d22]; ecf=[5555::1ff:2ee:3dd:4ee]; ecf=[5555::6aa:7bb:8cc:9dd]\nP-Charging-Vector: icid-value=\"BzyretyU0dm+6O2IrT5tAFrbHLso=023551034\"; orig-ioi=\"type3home1.net\"\nPrivacy: none\nFrom: <tel: +1-237-555-1111>;tag=569812\nTo: <tel:+1-237-555-2222>; tag=26545\nCall-ID: dd13a0s09a2sdfglkj490378\nCseq:\nContact: <sip:user1_public1@home1.net;gr=urn:uuid:f81d4fae-7dec-11d0-a765-00a0c91e6bf6>;+g.3gpp.icsi-ref=\"urn%3Aurn-7%3A3gpp-service.ims.icsi.mmtel\"\nAllow:\nContent-Type: Content-Length:\n\nv=0\no=- 2987933615  IP6 5555::aaa:bbb:ccc:eee\ns=\nc=IN IP6 5555::aaa:bbb:ccc:eee\nt=0 0\nm=audio 3456 RTP/AVPF 97 96\nb=AS:25.4\na=curr:qos local sendrecv\na=curr:qos remote none\na=des:qos mandatory local sendrecv\na=des:qos none remote sendrecv\na=rtpmap:97 AMR\na=fmtp:97 mode-set=0,2,5,7; mode-change-period=2\na=rtpmap:96 telephone-event\na=maxptime:20\nm=message 0 TCP/MSRP 98\na=accept-types:text/plain\n\n9.\tSIP re-INVITE request (Intermediate IM CN subsystem entities to UE B)\nIntermediate IM CN subsystem entities forward the SIP re-INVITE request to remote UE B.\n10.\tSIP 200 (OK) response (UE B to intermediate IM CN subsystem entities)\nUpon receiving the SIP re-INVITE request containing the SDP offer, since the UE B has all resources available, it sends immediately the SIP 200 (OK) response to the SIP re-INVITE request that contains the SDP answer. The SDP answer indicates that the resources are available.\n11.\tSIP 200 (OK) response (intermediate IM CN subsystem entities to )\nThe intermediate IM CN subsystem entities forward the SIP 200 (OK) response to the SIP re-INVITE request to the SCC AS in the originating network.\n12-13.\tSIP ACK request ( to UE B via IM CN subsystem entities)\nThe SCC AS generates the SIP ACK request to the SIP 200 (OK) response, and forwards the SIP ACK request to the remote UE B.\n14-15.\tSIP 200 (OK) response ( to interworking entities via IM CN subsystem entities)\nThe SCC AS generates the SIP 200 (OK) response to the SIP INVITE request, and forwards the SIP 200 (OK) response to the interworking entities.\n16.\tCC CONNECT message (interworking entities to SC UE A)\n17-18.\tSIP ACK request (interworking entities to  via IM CN subsystem entities)\nThe interworking entities generate the SIP ACK request to the SIP 200 (OK) response, and forward it to the SCC AS.\n19.\tCC CONNECT ACKNOWLEDGE message (SC UE A to interworking entities)\n20.\tMedia paths between SC UE A and UE B:\nThe CS bearer is setup while the PS bearer is still existing.\n21-22:\tSIP BYE request ( to SC UE A via intermediate IM CN subsystem entities)\nThe SCC AS terminates the replaced call leg, which was using the old IP-CAN, by sending a SIP BYE request to the UE A.\n23-24.\tSIP 200 (OK) response (SC UE A to SCC AS via intermediate IM CN subsystem entities)\nUpon receiving the SIP BYE request over the old IP-CAN, the SC UE A sends a SIP 200 (OK) response over the old IP-CAN to the SCC AS. Subsequently, the SC UE A relinquishes all resources pertaining to the old IP-CAN.\nNOTE:\tSteps 22-23 are performed only if SC UE A is using Gm after the PS-CS access transfer is completed; otherwise, the SC UE A and the network release the source access leg locally, without any signalling between the SC UE A and the network.\n25.\tMedia paths between SC UE A and UE B\nFinally, the session is transferred from PS bearer to CS bearer.\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                }
            ]
        },
        {
            "title": "A.7\tSignalling flows for PS-PS access transfer",
            "description": "",
            "summary": "",
            "tables": [],
            "figures_meta_data": [],
            "subsections": [
                {
                    "title": "Introduction",
                    "description": "",
                    "summary": "",
                    "text_content": "The signalling flows for PS-PS access transfer demonstrate how a multimedia session is transferred from Source Access Leg to the Target Access Leg. The following signalling flows are included:\n-\tsubclause  shows an example when all media of an ongoing communication session and the associated signalling are transferred from Source Access Leg to the Target Access Leg; and\n-\tsubclause  shows an example when not all media of an ongoing communication session are transferred from the Source Access Leg to the Target Access Leg.\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "PS-PS access transfer with full media transfer",
                    "description": "",
                    "summary": "",
                    "text_content": "The signalling flows shown in figure -1 describes the PS-PS access transfer procedure when all media of an ongoing communication session and the associated signalling are transferred from one contact address of an UE to a different contact address of the same UE. No lower-level mechanism to support the access transfer is assumed or needed.\nIn this example the UE-1 is on an active multimedia session with the UE-2 via one IP-CAN. After changing to a new IP-CAN, obtaining a new IP address, and discovering a P-CSCF, the UE-1 reserves resources in new IP-CAN prior to initiating the PS-PS access transfer procedure. When the PS-PS access transfer procedure is completed, the UE-1 continues the multimedia session with the UE-2 on the new IP-CAN. In this example, when attaching to the new IP-CAN, it is irrelevant whether the UE-1 uses the same P-CSCF or a new P-CSCF.\nNOTE 1:\tThis scenario requires that the UE-1 and the IM CN subsystem support simultaneous multiple registrations and requires that the UE-1 supports dual mode operation.\nNOTE 2:\tIn this example flow, each call leg is uniquely identified with a respective dialog identifier consisting of the Call-ID, From tag, and To tag.\nFigure A.7.2-1 illustrates the signalling flow for session handover in a telecommunication network. The figure depicts the process of transferring a mobile user's active communication session from one network node to another, ensuring seamless connectivity and minimal disruption to the user's experience. The figure shows the exchange of messages between the mobile device, the mobile network operator's core network, and the home network, highlighting the role of the home network in the handover process. The figure also emphasizes the importance of timing and synchronization in the handover process, as well as the use of signalling protocols such as Diameter and SIP. Overall, the figure provides a clear and concise overview of the session handover process, highlighting the key components and interactions involved in maintaining a high-quality communication experience for mobile users.\nFigure A.7.2-1: Signalling flow for session handover\nNOTE 3:\tFor clarity, the SIP 100 (Trying) responses are not shown in the signalling flow.\n1.\tUE-1 is on an active session with UE-2\nThe UE-1 is in an active session with the UE-2. The call is anchored in the SCC AS. It is irrelevant which endpoint initiated the call. Each call leg is uniquely identified with a respective dialog identifier. The call leg over old IP-CAN is identified with \"Call-ID= me0s2sdfgjkl491777\", \"From tag=64727891\", and \"To tag=774321\". The UE-1 and UE-2 exchange media over the old IP-CAN, which is maintained while the UE-1 initiates the handover procedure.\n2.\tUE-1 connects to new IP-CAN\nThe UE-1 determines that a handover of the session is required. The UE-1 connects to the new IP-CAN. The UE-1 obtains an IP address that it will use for the signalling and media.\n3.\tUE-1 registers with intermediate IM CN subsystem entities over new IP-CAN\nThe UE-1 registers with the S-CSCF over the new IP-CAN using the standard multiple registrations procedure. Depending on the UE-1 configuration, the discovery of the P-CSCF in the new IP-CAN can precede this.\n4.\tUE-1 acquires resources in new IP-CAN\nBased on the UE-1 and new IP-CAN capabilities, the UE-1 decides to use the same codec that was used over the old IP-CAN. The UE-1 reserves resources (e.g. QoS) in the new IP-CAN that will be needed for the signalling and transferred media, prior to sending the initial SIP INVITE request.\n5.\tSIP INVITE request (UE-1 to intermediate IM CN subsystem entities) - see example in table -5\nThe UE-1 sends an initial SIP INVITE request with the PS to PS STI and a new SDP offer to the UE-2 that indicates that the new call replaces the existing call. The initial SIP INVITE request establishes a dialog for signalling and specifies in the SDP the new contact address that will be used for media over the new IP-CAN. Upon sending the initial SIP INVITE request, the UE-1 is ready to receive the RTP packets either over the new IP-CAN or the old IP-CAN. The RTP packets can arrive over the new IP-CAN prior to the UE-1 receiving the SIP 200 (OK) response for the initial SIP INVITE request.\nTable -5: SIP INVITE request (UE-1 to intermediate IM CN subsystem entities)\nINVITE sip:pstops.transfer@sccas1.home1.net SIP/2.0\nVia: SIP/2.0/UDP [5555::aaa:bbb:ccc:ddd]:1357;comp=sigcomp;branch=z9hG4bKnashds7\nMax-Forwards: 70\nRoute: <sip:pcscf1.home1.net:7531;lr;comp=sigcomp>, <sip:orig@scscf1.home1.net;lr>\nP-Preferred-Identity: \"John Doe\" <sip:user1_public1@home1.net>\nP-Access-Network-Info:IEEE-802.11b\nPrivacy: none\nFrom: <sip:user1_public1@home1.net>; tag=171828\nTo: <sip:pstops.transfer@sccas1.home1.net>\nCall-ID: cb0s2sdfglkj490333\nCseq: 127 INVITE\nSupported: 100rel, precondition, gruu, outbound\nRequire: sec-agree; replaces\nReplaces: me0s2sdfgjkl491777; to-tag=774321; from-tag=64727891\nProxy-Require: sec-agree\nSecurity-Verify: ipsec-3gpp; q=0.1; alg=hmac-sha-1-96; spi=87654321; port1=7531\nContact: <sip:user1_public1@home1.net;gr=urn:uuid:f81d4fae-7dec-11d0-a765-00a0c91e6bf6; ob>;+g.3gpp.icsi-ref=\"urn%3Aurn-7%3A3gpp-service.ims.icsi.mmtel\";+g.3gpp.ics=\"principal\"\nAllow: INVITE, ACK, CANCEL, BYE, PRACK, UPDATE\nAccept: application/sdp, application/3gpp-ims+xml\nContent-Type: application/sdp\nContent-Length: (…)\n\nv=0\no=- 2987933615  IP6 5555::aaa:bbb:ccc:ddd\ns=-\nc=IN IP6 5555::aaa:bbb:ccc:ddd\nt=0 0\nm=audio 3456 RTP/AVP 97 96\nb=AS:25.4\na=curr:qos local sendrecv\na=curr:qos remote none\na=des:qos mandatory local sendrecv\na=des:qos none remote sendrecv\na=rtpmap:97 AMR\na=fmtp:97 mode-set=0,2,5,7; mode-change-period=2\na=rtpmap:96 telephone-event\na=maxptime:20\n\nRequest-URI:\tthe PS to PS STI configured in the SC UE or the URI contained in the Contact header field returned at the creation of the dialog on the Source Access Leg.\nRequire:\tthe \"replaces\" option tag indicate that the support for Replace header field is required.\nReplaces:\tspecifies the existing call that will be replaced with the new call.\nSDP:\tspecifies the new IP address that the UE-1 has acquired in the new IP-CAN, and indicates that the resources in the new IP-CAN have been acquired.\n6.\tEvaluation of initial filter criteria\nUpon the evaluation of the initial filter criteria, as this is an originating initial SIP INVITE request for a registered user, the S-CSCF routes the initial SIP INVITE request to the SCC AS.\n7.\tSIP INVITE request (intermediate IM CN subsystem entities to ) - see example in table -7\nThe initial SIP INVITE request is forwarded from intermediate IM CN subsystem entities in the home network to the SCC AS. The P-CSCF added a Record-Route header field with a flow token to ensure that mid-dialog SIP requests are forwarded to the UE-1 over the correct flow. The SCC AS acts as a routeing B2BUA as specified in 3GPP TS 24.229 [2]. The SCC AS includes the contents of the Contact header field from the received SIP INVITE request.\nTable -7: SIP INVITE request (intermediate IM CN subsystem entities to )\nINVITE sip:pstops.transfer@sccas1.home1.net SIP/2.0\nVia: SIP/2.0/UDP scscf1.home1.net;branch=z9hG4bK332b23.1, SIP/2.0/UDP pcscf1.home1.net;branch=z9hG4bK34.1, SIP/2.0/UDP [5555::aaa:bbb:ccc:ddd]:1357;comp=sigcomp;branch=z9hG4bKnashds7\nMax-Forwards: 67\nRoute: <sip:sccas.home1.net;lr>; <sip:cb03a0s09a2sdfglkj490333@scscf1.home1.net;lr>;orig-dialog-id=\"O:73935718_92645110-712786jd246395302d-zKE\"\nRecord-Route: <sip:scscf1.home1.net;lr>, <sip: GopIKSsn0oGLPXRdV9BAXpT3coNuiGKV@pcscf1.home1.net;lr>\nP-Asserted-Identity: \"John Doe\" <sip:user1_public1@home1.net>, <tel:+1-212-555-1111>\nP-Access-Network-Info:Privacy:Require: replaces\nP-Charging-Vector: icid-value=\"AyretyU0dm+6O2IrT5tAFrbHLso=023551024\";orig-ioi=type3ashome1.net>\nP-Charging-Function-Addresses: ####\nFrom: <sip:user1_public1@home1.net>; tag=171828\nTo: <sip:pstops.transfer@sccas1.home1.net >\nCall-ID:\nCseq:\nSupported:\nReplaces:\nContact:\nAllow:\nAccept:\nContent-Type:\nContent-Length: (…)\nP-Early-Media: supported\n\nv=\no=\ns=\nc=\nt=0 0\nm=\nb=\na=\na=\na=\na=\na=\na=\na=\na=\n\n8.\tRemote leg update\nThe SCC AS based on the content of the Replaces header field correlates the initial SIP INVITE request to the existing local and remote call legs of the existing concatenated end to end session between the UE-1 and UE-2. The SCC AS updates the remote call leg by sending a SIP re-INVITE request to the UE-2 containing the new SDP offer that it has received from the UE-1.\n9.\tSIP re-INVITE request ( to intermediate IM CN subsystem entities) - see example in table -9\nThe UE-2 is informed of the change in access leg by the SCC AS sending a SIP re-INVITE request to the S-CSCF.\nThe SCC AS modifies the message in accordance with routeing B2BUA functionality, e.g. mapping of From, To, Cseq and Call-ID header fields from one side of the B2BUA to the other. In this example the SCC AS includes the contents of the Contact header field from the received SIP INVITE request. The SIP re-INVITE request contains the SDP offer that is identical to the SDP offer that the SCC AS received in the initial SIP INVITE request from the UE-1 (Step 5).\nTable -9: SIP re-INVITE request ( to intermediate IM CN subsystem entities)\nINVITE < sip:user2_public1@home2.net;gr=urn:uuid:2ad8950e-48a5-4a74-8d99-ad76cc7fc74> SIP/2.0\nVia: SIP/2.0/UDP sccas.home1.net; branch=z9hG4bK332b33.3;\nMax-Forwards: 67\nRoute: <scscf1.home1.net;lr>,<sip:scscf2.home2.net;lr>,<sip:pcscf2.visited2.net;lr>\nP-Asserted-Identity:P-Access-Network-Info:Privacy:P-Charging-Vector: icid-value=\"BzyretyU0dm+6O2IrT5tAFrbHLso=023551034 \"\nP-Charging-Function-Addresses:\nFrom: <sip:user1_public1@home1.net>; tag=1717777\nTo: <tel:+1-212-555-2222>, tag=4321\nCall-ID: dc14b1t10b3teghmlk5013333\nCseq: 111 INVITE\nSupported:\nContact: < sip:user1_public1@home1.net;gr=urn:uuid:f81d4fae-7dec-11d0-a765-00a0c91e6bf6;ob>;+g.3gpp.icsi-ref=\"urn%3Aurn-7%3A3gpp-service.ims.icsi.mmtel\"\nAllow:\nAccept: application/sdp\nContent-Type:\nContent-Length: (…)\n\nv=0\no=2987933615  IP6 5555::aaa:bbb:ccc:ddd\ns=-\nc= IN IP6 5555::aaa:bbb:ccc:ddd\nt=0 0\nm=audio 3456 RTP/AVP 97 96\nb=AS:25.4\na= curr:qos local sendrecv\na= curr:qos remote none\na= des:qos mandatory local sendrecv\na= des:qos none remote sendrecv\na= rtpmap:97 AMR\na= fmtp:97 mode-set=0,2,5,7; mode-change-period=2\na= rtpmap:96 telephone-event\na= maxptime:20\n\nRoute:\tThe SIP re-INVITE request contains the saved list of Route header fields that the SCC AS has saved for the remote leg of the call.\n10.\tSIP re-INVITE request (intermediate IM CN subsystem entities to intermediate IM CN subsystem entities) - see example in table -10\nIn the originating network, the intermediate IM CN subsystem entities forward the SIP re-INVITE request to the intermediate IM CN subsystem entities in the terminating network.\nTable -10: SIP re-INVITE request (intermediate IM CN subsystem entities to intermediate IM CN subsystem entities)\nINVITE < sip:user2_public1@home2.net;gr=urn:uuid:2ad8950e-48a5-4a74-8d99-ad76cc7fc74> SIP/2.0\nVia: SIP/2.0/UDP scscf1.home1.net;branch=z9hG4bK34.1, SIP/2.0/UDP sccas.home1.net; branch=z9hG4bK332b33.3;\nMax-Forwards: 66\nRoute: <sip:scscf2.home2.net;lr>, <sip:pcscf2.visited2.net;lr>\nP-Asserted-Identity:\nPrivacy: none\nFrom:\nTo:\nCall-ID:\nCseq:Supported:Contact: <sip:user1_public1@home1.net;gr=urn:uuid:f81d4fae-7dec-11d0-a765-00a0c91e6bf6>;+g.3gpp.icsi-ref=\"urn%3Aurn-7%3A3gpp-service.ims.icsi.mmtel\"\nContact:\nAllow:\nAccept:\nContent-TypeContent-Length:\n\nv=\no=\ns=-\nc=\nt=\nm=\nb=\na=\na=\na=\na=\na=\na=\na=\n\n11.\tSIP re-INVITE request (intermediate IM CN subsystem entities to UE-2)\nIn the terminating network, the SIP re-INVITE request is forwarded towards the UE-2 by the intermediate IM CN subsystem entities.\n12.\tMedia paths between UE-1 and UE-2\nThe UE-2 receives the SIP re-INVITE request containing the SDP offer that indicates that the UE-1 is ready to receive the same media on a different contact address. Since the UE-2 has resources already available, it starts to send the media to the UE-1's contact address specified in the SDP offer immediately.\nThe UE-1 will be receiving the RTP packets over new IP-CAN. However, the UE-1 can receive some out-of-sequence RTP packets over the old IP-CAN. The RTP packets are delivered to the codec in sequence. Once the UE-1 determine that no media will be received over the old IP-CAN (e.g. by examining the sequence numbers in the RTP headers), it can relinquish the resources that it has been using for incoming media on the old IP-CAN.\nThe UE-1 sends the media to the UE-2 over the old IP-CAN.\nResources used for signalling on the old IP-CAN are not released.\n13.\tSIP 200 (OK) response (UE-2 to intermediate IM CN subsystem entities)\nUpon receiving the SIP re-INVITE request containing the SDP offer, since the UE-2 has all resources available, it sends immediately the SIP 200 (OK) response to the SIP re-INVITE request that contains the SDP answer. The SDP answer indicates that the resources are available.\n14.\tSIP 200 (OK) response (intermediate IM CN subsystem entities to intermediate IM CN subsystem entities)\nIn the terminating network, the intermediate IM CN subsystem entities forward the SIP 200 (OK) response to the SIP re-INVITE request to the intermediate IM CN subsystem entities in the originating network.\n15.\tSIP 200 (OK) response (intermediate IM CN subsystem entities to )\nThe intermediate IM CN subsystem entities in the originating network forward the SIP 200 (OK) response to the SIP re-INVITE request to the SCC AS.\n16.\tSIP ACK request ( to intermediate IM CN subsystem entities)\nThe SCC AS acting as a B2BUA acknowledges the receipt of the SIP 200 (OK) response to the SIP re-INVITE request by forwards a SIP ACK request to the intermediate IM CN subsystem entities.\n17.\tSIP ACK request (intermediate IM CN subsystem entities to intermediate IM CN subsystem entities)\nIn the originating network, the intermediate IM CN subsystem entities forward the SIP ACK request to the intermediate IM CN subsystem entities in the terminating network.\n18.\tSIP ACK request (intermediate IM CN subsystem entities to UE-2)\nIn the terminating network, the intermediate IM CN subsystem entities forward the SIP ACK request to the UE-2.\n19.\tSIP 200 (OK) response ( to intermediate IM CN subsystem entities)\nThe SCC AS forwards the SIP 200 (OK) response to the initial SIP INVITE request to the intermediate IM CN subsystem entities, using the content of the Via header field that was received in the initial SIP INVITE request (step 5).\nThe SCC AS modifies the message in accordance with routeing B2BUA functionality, e.g. mapping of From, To, Cseq and Call-ID header fields from one side of the B2BUA to the other. The SIP 200 (OK) response to the initial SIP INVITE request contains the SDP answer that is identical to the SDP answer that the SCC AS has received in the SIP 200 (OK) response to SIP re-INVITE request from the UE-2 (Step 13).\n20.\tSIP 200 (OK) response (intermediate IM CN subsystem entities to UE-1)\nThe intermediate IM CN subsystem entities forward the SIP 200 (OK) response to the UE-1.\n21.\tMedia paths between UE-1 and UE-2\nThe UE-1 receives the SIP 200 (OK) response containing the SDP answer that indicates that the UE-2 is ready to receive media. Since the UE-1 has already resources available, it starts to send media over new IP-CAN to the UE-2's contact address specified in the SDP answer immediately.\nThe UE-1 can relinquish the resources that it has been using for outgoing media on the old IP-CAN.\nResources used for signalling on the old IP-CAN are not released.\n22.\tSIP ACK request (UE-1 to intermediate IM CN subsystem entities)\nThe UE-1 completes the new call leg creation with a SIP ACK request sent to the intermediate IM CN subsystem entities.\n23.\tSIP ACK request (-intermediate IM CN subsystem entities to )\nThe intermediate IM CN subsystem entities forward the SIP ACK request to the SCC AS.\n24.\tSIP BYE request ( to intermediate IM CN subsystem entities)\nThe SCC AS terminates the replaced call leg- that was using the old IP-CAN, by sending a SIP BYE request to the UE-1.\n25.\tSIP BYE request (intermediate IM CN subsystem entities to UE-1)\nThe intermediate IM CN subsystem entities forward the SIP BYE request to the UE-1.\n26.\tSIP 200 (OK) response (UE-1 to intermediate IM CN subsystem entities)\nUpon receiving the SIP BYE request over the old IP-CAN, the UE-1 sends a SIP 200 (OK) response over the old IP-CAN. Subsequently, the UE-1 relinquishes all resources pertaining to the old IP-CAN.\n27.\tSIP 200 (OK) response (intermediate IM CN subsystem entities to )\nThe intermediate IM CN subsystem entities forward the SIP 200 (OK) response to the SCC AS.\nSince both the old contact address and the new contact address were registered using multiple registrations procedure with different reg-id values, then upon transferring the dialog from the old contact address to the new contact address, the UE-1 is still registered with the old contact address and the UE-1 subscription dialog to its reg-event using the old contact address is intact.\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "PS-PS access transfer with partial media transfer",
                    "description": "",
                    "summary": "",
                    "text_content": "The signalling flows shown in figure -1 describes the PS-PS access transfer procedure when not all media of an ongoing communication session are transferred from the Source Access Leg to the Target Access Leg. No lower-level mechanism to support the access transfer is assumed or needed.\nIn this example, UE-1 is on an active multimedia session with UE-2 via one IP-CAN. After connecting to an additional IP-CAN, obtaining an additional IP address, discovering a P-CSCF, and performing registration in the IM CN subsystem, UE-1 reserves resources in the new IP-CAN prior to initiating the PS-PS access transfer procedure. When the PS-PS access transfer procedure is completed, UE-1 continues the multimedia session with UE-2 on both the old and the new IP-CANs. In this example, when attaching to the new IP-CAN, it is irrelevant whether the UE-1 uses the same P-CSCF or a new P-CSCF.\nNOTE 1:\tThis scenario requires that UE-1 and the IM CN subsystem support simultaneous multiple registrations and requires that UE-1 supports dual mode operation.\nFigure A.7.3-1 illustrates the signalling flow for PS-PS session transfer with partial media transfer, showcasing the process of transferring a PS-PS session between two parties while only transferring a portion of the media content. The figure depicts the exchange of messages between the initiating party, the target party, and the network elements involved in the process. Key components include the PS-PS session establishment, the media transfer request, and the acknowledgement of the transfer. The figure highlights the efficiency of partial media transfer in reducing network congestion and improving session transfer times.\nFigure A.7.3-1: Signalling flow for PS-PS session transfer with partial media transfer\nNOTE 2:\tFor clarity, the SIP 100 (Trying) responses are not shown in the signalling flow.\n1.\tUE-1 is on an active session with UE-2\nUE-1 is in an active session with UE-2. The call is anchored in the SCC AS. It is irrelevant which endpoint initiated the call. Each call leg is uniquely identified with a respective dialog identifier. The call leg over IP-CAN #1 is identified with \"Call-ID= me0s2sdfgjkl491777\", \"From tag=64727891\", and \"To tag=774321\". UE-1 and UE-2 exchange media over the IP-CAN #1, which is maintained while the UE-1 initiates the session transfer procedure.\n2.\tUE-1 connects to IP-CAN #2\nUE-1 connects to the new IP-CAN and obtains an IP address that it will use for the signalling and media.\n3.\tUE-1 registers with intermediate IM CN subsystem entities over IP-CAN #2\nUE-1 registers with the S-CSCF over the IP-CAN #2 using the standard multiple registrations procedure. The P-CSCF in the signalling path of this registration can be distinct from the one used in the signalling path over IP-CAN #1.\n4.\tUE-1 acquires resources in IP-CAN #2\nUE-1 decides to perform partial media transfer to the IP-CAN #2. Based on UE-1 and IP-CAN #2 capabilities, the UE-1 decides to use the same codec that was used over the IP-CAN #1 for the media components to be transferred. UE-1 ensures that the resources (e.g. QoS) in IP-CAN #2 that will be needed for the signalling and transferred media are available, prior to sending the initial SIP INVITE request.\n5.\tSIP INVITE request (UE-1 to intermediate IM CN subsystem entities) - see example in table -5\nUE-1 sends initial SIP INVITE request with the PS to PS STI and a new SDP offer to UE-2 and indicates that the video component is to be transferred to IP-CAN #2. The initial SIP INVITE request establishes a dialog for signalling and specifies in the SDP new contact address that will be used for media over IP-CAN #2. Upon sending the initial SIP INVITE request, UE-1 is ready to receive the RTP packets over both IP-CAN #1 and IP-CAN #2.\nTable -5: SIP INVITE request (UE-1 to intermediate IM CN subsystem entities)\nINVITE sip:pstops.transfer@sccas1.home1.net SIP/2.0\nVia: SIP/2.0/UDP [5555::aaa:bbb:ccc:ddd]:1357;comp=sigcomp;branch=z9hG4bKnashds7\nMax-Forwards: 70\nRoute: sip:pcscf1.home1.net:7531;lr;comp=sigcomp>, <sip:orig@scscf1.home1.net;lr>\nP-Preferred-Identity: \"John Doe\" <sip:user1_public1@home1.net>\nP-Access-Network-Info:IEEE-802.11b\nPrivacy: none\nFrom: <sip:user1_public1@home1.net>; tag=171828\nTo: <sip:pstops.transfer@sccas1.home1.net>\nCall-ID: cb0s2sdfglkj490333\nCseq: 127 INVITE\nSupported: 100rel, precondition, gruu, outbound\nRequire: sec-agree; tdialog\nTarget-Dialog: me0s2sdfgjkl491777; remote-tag=774321; local-tag=64727891\nProxy-Require: sec-agree\nSecurity-Verify: ipsec-3gpp; q=0.1; alg=hmac-sha-1-96; spi=87654321; port1=7531\nContact: < sip:user1_public1@home1.net;gr=urn:uuid:f81d4fae-7dec-11d0-a765-00a0c91e6bf6;ob>;+g.3gpp.icsi-ref=\"urn%3Aurn-7%3A3gpp-service.ims.icsi.mmtel\";+g.3gpp.ics=\"principal\";\nAllow: INVITE, ACK, CANCEL, BYE, PRACK, UPDATE\nAccept: application/sdp, application/3gpp-ims+xml\nContent-Type: application/sdp\nContent-Length: (…)\n\nv=0\no=- 2987933615  IP6 5555::aaa:bbb:ccc:ddd\ns=-\nc=IN IP6 5555::aaa:bbb:ccc:ddd\nt=0 0\nm=audio 0 RTP/AVP 97 96\na=rtpmap:97 AMR\na=fmtp:97 mode-set=0,2,5,7; mode-change-period=2\na=rtpmap:96 telephone-event\nm=video 3400 RTP/AVP 98 99\nb=AS:75\na=curr:qos local sendrecv\na=curr:qos remote none\na=des:qos mandatory local sendrecv\na=des:qos none remote sendrecv\na=rtpmap:98 H263\na=fmtp:98 profile-level-id=0\na=rtpmap:99 MP4V-ES\n\nRequest-URI:\tthe PS to PS STI configured in the SC UE or the URI contained in the Contact header field returned at the creation of the dialog on the Source Access Leg .\nRequire:\tthe \"tdialog\" option tag indicate that the support for Target-Dialog header field is required.\nTarget-Dialog:\tspecifies the existing call that will be transferred.\nSDP:\tspecifies the new IP address that the UE-1 has acquired in the new IP-CAN, and indicates that only the video component will be transferred and the resources in the new IP-CAN have been reserved.\n6.\tEvaluation of initial filter criteria\nUpon the evaluation of the initial filter criteria, as this is an originating initial SIP INVITE request for a registered user, the S-CSCF routes the initial SIP INVITE request to the SCC AS.\n7.\tSIP INVITE request (intermediate IM CN subsystem entities to )\nThe initial SIP INVITE request is forwarded from intermediate IM CN subsystem entities in the home network to the SCC AS. The P-CSCF added a Record-Route header with a flow token to ensure that mid-dialog SIP requests are forwarded to the UE-1 over the correct flow. The SCC AS acts as a routeing B2BUA as specified in 3GPP TS 24.229 [2].\n8.\tRemote leg update\nBased on the content of the Target-Dialog header field, the SCC AS correlates the SIP INVITE request for session transfer to the existing local and remote call legs of the existing concatenated end to end session between UE-1 and UE-2. The SCC AS updates the remote call leg by sending a SIP re-INVITE request to the remote UE-2 containing the new SDP offer based on the partial media transfer request received from UE-1 and the negotiated SDP for the original session.\n9.\tSIP re-INVITE request ( to intermediate IM CN subsystem entities) - see example in table -9\nUE-2 is informed of the change in access leg by the SCC AS sending a re-INVITE request to the S-CSCF.\nThe SCC AS modifies the message in accordance with routeing B2BUA functionality, e.g. mapping of From, To, Cseq and Call-ID header fields from one side of the B2BUA to the other. In this example the SCC AS includes the contents of the Contact header field from the received SIP INVITE request. The SIP re-INVITE request contains the SDP offer that is based on original SDP offer and the SDP offer that the SCC AS received in the initial SIP INVITE request from the UE-1 (Step 7).\nTable -9: SIP re-INVITE request ( to intermediate IM CN subsystem entities)\nINVITE < sip:user2_public1@home2.net;gr=urn:uuid:2ad8950e-48a5-4a74-8d99-ad76cc7fc74> SIP/2.0>\nVia: SIP/2.0/UDP sccas.home1.net; branch=z9hG4bK332b33.3;\nMax-Forwards: 70\nRoute: <scscf1.home1.net;lr>, <sip:scscf2.home2.net;lr>, <sip:pcscf2.visited2.net;lr>\nP-Asserted-Identity: \"John Doe\" <sip:user1_public1@home1.net>, <tel:+1-212-555-1111>\nPrivacy: none\nP-Charging-Vector: icid-value=\"AyretyU0dm+6O2IrT5tAFrbHLso=023551024\"\nP-Charging-Function-Addresses:\nFrom: <sip:user1_public1@home1.net>; tag=1717777\nTo: <tel:+1-212-555-2222>, tag=4321\nCall-ID: dc14b1t10b3teghmlk5013333\nCseq: 111 INVITE\nSupported: precondition, 100rel\nContact:<sip:user1_public1@home1.net; gr=urn:uuid:f81d4fae-7dec-11d0-a765-00a0c91e6bf6;ob>;+g.3gpp.icsi-ref=\"urn%3Aurn-7%3A3gpp-service.ims.icsi.mmtel\"\nAllow: INVITE, ACK, CANCEL, BYE, PRACK, UPDATE\nAccept: application/sdp\nContent-Type: application/sdp\nContent-Length: (…)\n\nv=0\no=2987933100  IP6 5555::aaa:bbb:ccc:eee\ns=-\nt=0 0\nm=audio 3456 RTP/AVP 97 96\nc=IN IP6 5555::aaa:bbb:ccc:eee\nb=AS:25.4\na= curr:qos local sendrecv\na= curr:qos remote none\na= des:qos mandatory local sendrecv\na= des:qos none remote sendrecv\na= rtpmap:97 AMR\na= fmtp:97 mode-set=0,2,5,7; mode-change-period=2\na= rtpmap:96 telephone-event\na= maxptime:20\nm=video 3400 RTP/AVP 98 99\nc=IN IP6 5555::aaa:bbb:ccc:ddd\nb=AS:75\na=curr:qos local sendrecv\na=curr:qos remote none\na=des:qos mandatory local sendrecv\na=des:qos none remote sendrecv\na=rtpmap:98 H263\na=fmtp:98 profile-level-id=0\na=rtpmap:99 MP4V-ES\n\nRoute:\tThe SIP re-INVITE request contains the saved list of Route header fields that the SCC AS has saved for the remote leg of the call.\nSDP:\tspecifies the new IP address and ports used for the media components. In this case, the audio component is still using the original address and port while the video component is using the new IP address and new port allocated.\n10.\tSIP re-INVITE request (intermediate IM CN subsystem entities to intermediate IM CN subsystem entities)\nIn the originating network, the intermediate IM CN subsystem entities forward the SIP re-INVITE request to the intermediate IM CN subsystem entities in the terminating network.\n11.\tSIP re-INVITE request (intermediate IM CN subsystem entities to UE-2)\nIn the terminating network, the SIP re-INVITE request is forwarded towards UE-2 by the intermediate IM CN subsystem entities.\nUE-2 receives the SIP re-INVITE request containing the SDP offer that indicates that UE-1 is ready to receive video media on a different contact address. Since UE-2 has resources already available, it starts to send the media to UE-1's contact address specified in the SDP offer immediately.\nUE-1 starts receiving the video RTP packets over IP-CAN #2. However, UE-1 can receive some out-of-sequence video RTP packets over IP-CAN #1. The video RTP packets are delivered to the codec in sequence. Once UE-1 determine that no video will be received over IP-CAN #1 (e.g. by examining the sequence numbers in the RTP headers), it can relinquish the resources that it has been using for incoming video media on IP-CAN #1.\nAt the same time, UE-1 still sends both the audio and video media to UE-2 over IP-CAN #1.\nResources used for signalling on IP-CAN #1 are not released.\n12.\tSIP 200 (OK) response (UE-2 to intermediate IM CN subsystem entities) – see example in table A.7.3-12\nUpon receiving the SIP re-INVITE request containing the SDP offer, since UE-2 has all resources available, it sends immediately the SIP 200 (OK) response to the SIP re-INVITE request that contains the SDP answer. The SDP answer indicates that the resources are available.\nTable -12: SIP 200 (OK) response (UE-2 to intermediate IM CN subsystem entities)\nSIP/2.0 200 OK\nVia: SIP/2.0/UDP pcscf2.visited2.net:5088;comp=sigcomp;branch=z9hG4bK361k21.1,\nSIP/2.0/UDP scscf2.home2.net;branch=z9hG4bK764z87.1,\nSIP/2.0/UDP scscf1.home1.net;branch=z9hG4bK332b23.1,\nSIP/2.0/UDP sccas.home1.net;branch=z9hG4bK332b33.3\nRecord-Route: <sip:pcscf2.visited2.net:5088;lr;comp=sigcomp>, <sip:scscf2.home2.net;lr>, <sip:scscf1.home1.net;lr>\nP-Access-Network-Info: 3GPP-UTRAN-TDD; utran-cell-id-3gpp=234151D0FCE11\nPrivacy: none\nFrom: <sip:user1_public1@home1.net>; tag=1717777\nTo: <tel:+1-212-555-2222>;tag=4321\nCall-ID: dc14b1t10b3teghmlk5013333\nCSeq: 111 INVITE\nSupported: precondition, 100rel\nContact: <sip:user2_public1@home2.net;gr=urn:uuid:2ad8950e-48a5-4a74-8d99-ad76cc7fc74>;+g.3gpp.icsi-ref=\"urn%3Aurn-7%3A3gpp-service.ims.icsi.mmtel\" >\nAllow: INVITE, ACK, CANCEL, BYE, PRACK, UPDATE, REFER, MESSAGE\nContent-Type: application/sdp\nContent-Length: (…)\n\nv=0\no=- 2987933623  IP6 5555::eee:fff:aaa:bbb\ns=-\nc=IN IP6 5555::eee:fff:aaa:bbb\nt=0 0\nm=audio 6544 RTP/AVP 97 96\nb=AS:25.4\na=curr:qos local sendrecv\na=curr:qos remote sendrecv\na=des:qos mandatory local sendrecv\na=des:qos mandatory remote sendrecv\na=rtpmap:97 AMR\na=fmtp:97 mode-set=0,2,5,7; mode-change-period=2\na=rtpmap:96 telephone-event\na=maxptime:20\nm=video 10001 RTP/AVP 98 99\nb=AS:75\na=curr:qos local sendrecv\na=curr:qos remote sendrecv\na=des:qos mandatory local sendrecv\na=des:qos mandatory remote sendrecv\na=rtpmap:98 H263\na=fmtp:98 profile-level-id=0\na=rtpmap:99 MP4V-ES\n\n13.\tSIP 200 (OK) response (intermediate IM CN subsystem entities to intermediate IM CN subsystem entities)\nIn the terminating network, the intermediate IM CN subsystem entities forward the SIP 200 (OK) response to the SIP re-INVITE request to the intermediate IM CN subsystem entities in the originating network.\n14.\tSIP 200 (OK) response (intermediate IM CN subsystem entities to )\nThe intermediate IM CN subsystem entities in the originating network forward the SIP 200 (OK) response to the SIP re-INVITE request to the SCC AS.\n15.\tSIP ACK request ( to intermediate IM CN subsystem entities)\nThe SCC AS acting as a B2BUA acknowledges the receipt of the SIP 200 (OK) response to the SIP re-INVITE request by forwards a SIP ACK request to the intermediate IM CN subsystem entities.\n16.\tSIP ACK request (intermediate IM CN subsystem entities to intermediate IM CN subsystem entities)\nIn the originating network, the intermediate IM CN subsystem entities forward the SIP ACK request to the intermediate IM CN subsystem entities in the terminating network.\n17.\tSIP ACK request (intermediate IM CN subsystem entities to UE-2)\nIn the terminating network, the intermediate IM CN subsystem entities forward the SIP ACK request to UE-2.\n18.\tSIP 200 (OK) response ( to intermediate IM CN subsystem entities) – see example in table A.7.3-18\nThe SCC AS forwards the SIP 200 (OK) response to the initial SIP INVITE request to the intermediate IM CN subsystem entities, using the content of the Via header field that was received in the initial SIP INVITE request (step 5).\nThe SCC AS modifies the message in accordance with routeing B2BUA functionality, e.g. mapping of From, To, Cseq and Call-ID header fields from one side of the B2BUA to the other. In this example the SCC AS includes the contents of the Contact header field from the received SIP 200 (OK) response. The SIP 200 (OK) response to the initial SIP INVITE request contains the SDP answer derived from the SDP answer that the SCC AS has received in the SIP 200 (OK) response to SIP re-INVITE request from UE-2 (Step 14).\nTable -18: SIP 200 (OK) response ( to intermediate IM CN subsystem entities)\nSIP/2.0 200 OK\nVia: SIP/2.0/UDP scscf1.home1.net;branch=z9hG4bK332b23.1,\nSIP/2.0/UDP pcscf1.home1.net;branch=z9hG4bK34.1,\nSIP/2.0/UDP [5555::aaa:bbb:ccc:ddd]:1357;comp=sigcomp;branch=z9hG4bKnashds7\nRecord-Route: <sip:sccas.home1.net;lr>,<sip:scscf1.home1.net;lr>, <sip: GopIKSsn0oGLPXRdV9BAXpT3coNuiGKV@pcscf1.home1.net;lr>\nPrivacy: none\nFrom: <sip:user1_public1@home1.net>; tag=171828\nTo: <sip:pstops.transfer@sccas1.home1.net>;tag=8009\nCall-ID: cb0s2sdfglkj490333\nCseq: 127 INVITE\nSupported: 100rel, precondition, gruu, outbound\nContact: < sip:user2_public1@home2.net;gr=urn:uuid:2ad8950e-48a5-4a74-8d99-ad76cc7fc74>;+g.3gpp.icsi-ref=\"urn%3Aurn-7%3A3gpp-service.ims.icsi.mmtel\"\nAllow: INVITE, ACK, CANCEL, BYE, PRACK, UPDATE\nAccept: application/sdp\nContent-Type: application/sdp\nContent-Length: (…)\n\nv=0\no=- 2987933300  IP6 5555::eee:fff:aaa:bbb\ns=-\nc=IN IP6 5555::eee:fff:aaa:bbb\nt=0 0\nm=audio 0 RTP/AVP 97 96\na=rtpmap:97 AMR\na=fmtp:97 mode-set=0,2,5,7; mode-change-period=2\na=rtpmap:96 telephone-event\nm=video 10001 RTP/AVP 98 99\nb=AS:75\na=curr:qos local sendrecv\na=curr:qos remote sendrecv\na=des:qos mandatory local sendrecv\na=des:qos mandatory remote sendrecv\na=rtpmap:98 H263\na=fmtp:98 profile-level-id=0\na=rtpmap:99 MP4V-ES\n\n19.\tSIP 200 (OK) response (intermediate IM CN subsystem entities to UE-1)\nThe intermediate IM CN subsystem entities forward the SIP 200 (OK) response to UE-1.\nUE-1 receives the SIP 200 (OK) response containing the SDP answer indicating that UE-2 is ready to receive media. Since UE-1 has already resources available, it starts to send video media over IP-CAN #2 to UE-2's contact address specified in the SDP answer immediately.\nThe UE-1 can relinquish the resources that it has been using for outgoing video media on IP-CAN #1.\nResources used for signalling and audio media on IP-CAN #1 are not released.\n20.\tSIP ACK request (UE-1 to intermediate IM CN subsystem entities)\nUE-1 completes the new call leg creation with a SIP ACK request sent to the intermediate IM CN subsystem entities.\n21.\tSIP ACK request ( intermediate IM CN subsystem entities to )\nThe intermediate IM CN subsystem entities forward the SIP ACK request to the SCC AS.\n22.\tSIP re-INVITE request (UE-1 to intermediate IM CN subsystem entities) – see example in table A.7.3-22\nUE-1 updates the old call leg on IP-CAN #1 by sending a SIP re-INVITE request to the intermediate IM CN subsystem entities.\nTable -22: SIP re-INVITE request (UE-1 to intermediate IM CN subsystem entities)\nINVITE <sip:user2_public1@home2.net;gr=urn:uuid:2ad8950e-48a5-4a74-8d99-ad76cc7fc74> SIP/2.0\nVia: SIP/2.0/UDP [5555::aaa:bbb:ccc:eee]:2468;comp=sigcomp;branch=z9hG4bKashdns1\nMax-Forwards: 70\nRoute: sip:XopDDDsn0oFFFXRdV9BAXpT3coNuiGKV@pcscf1.home1.net:8765;lr;comp=sigcomp>, <sip:orig@scscf1.home1.net;lr>\nP-Access-Network-Info: 3GPP-UTRAN-FDD; utran-cell-id-3gpp=123456ABCDE22\nPrivacy: none\nFrom: <sip:user1_public1@home1.net>; tag=64727891\nTo: <tel:+1-212-555-2222>; tag=774321\nCall-ID: me0s2sdfgjkl491777\nCseq: 101 INVITE\nSupported: 100rel; precondition; tdialog\nRequire: sec-agree;\nProxy-Require: sec-agree\nSecurity-Verify: ipsec-3gpp; q=0.1; alg=hmac-sha-1-96; spi=12345678; port1=2468\nContact: <sip:user1_public1@home1.net;gr=urn:uuid:f81d4fae-7dec-11d0-a765-00a0c91e6bf6;ob>;+g.3gpp.icsi-ref=\"urn%3Aurn-7%3A3gpp-service.ims.icsi.mmtel\";+g.3gpp.ics=\"principal\";\nAllow: INVITE, ACK, CANCEL, BYE, PRACK, UPDATE\nAccept: application/sdp, application/3gpp-ims+xml\nContent-Type: application/sdp\nContent-Length: (…)\n\nv=0\no=- 2987933000  IP6 5555::aaa:bbb:ccc:eee\ns=-\nc=IN IP6 5555::aaa:bbb:ccc:eee\nt=0 0\nm=audio 3456 RTP/AVP 97 96\nb=AS:25.4\na=rtpmap:97 AMR\na=fmtp:97 mode-set=0,2,5,7; mode-change-period=2\na=rtpmap:96 telephone-event\nm=video 0 RTP/AVP 98 99\na=rtpmap:98 H263\na=fmtp:98 profile-level-id=0\na=rtpmap:99 MP4V-ES\n\n23.\tSIP re-INVITE request (intermediate IM CN subsystem entities to )\nThe intermediate IM CN subsystem entities forward the SIP re-INVITE request to the SCC AS.\n24.\tSIP 200 (OK) response ( to intermediate IM CN subsystem entities) – see example in table A.7.3-24\nThe SCC AS updates the old call leg based on the SIP re-INVITE request and sends the SIP 200 (OK) response to the SIP re-INVITE request to the intermediate IM CN subsystem entities, using the content of the Via header field that was received in the SIP re-INVITE request (step 23). In this example the SCC AS includes the contents of the Contact header field from the received SIP 200 (OK) response. The SIP 200 (OK) response to the SIP re-INVITE request contains the SDP answer derived from the SDP answer that the SCC AS previously received from UE-2 (Step 14).\nTable -24: SIP 200 (OK) response ( to intermediate IM CN subsystem entities)\nSIP/2.0 200 OK\nVia: SIP/2.0/UDP scscf1.home1.net;branch=z9hG4bK345b32.2,\nSIP/2.0/UDP pcscf1.home1.net;branch=z9hG4bK35.1,\nSIP/2.0/UDP [5555::aaa:bbb:ccc:eee]:2468;comp=sigcomp;branch=z9hG4bKashdns1\nRecord-Route: <sccas.home1.net;lr>,<sip:scscf1.home1.net;lr>, <sip: XopDDDsn0oFFFXRdV9BAXpT3coNuiGKV@pcscf1.home1.net;lr>\nPrivacy: none\nFrom: <sip:user1_public1@home1.net>; tag=64727891\nTo: <tel:+1-212-555-2222>;tag=774321\nCall-ID: me0s2sdfgjkl491777\nCseq: 101 INVITE\nSupported: 100rel; precondition\nContact: < sip:user2_public1@home2.net;gr=urn:uuid:2ad8950e-48a5-4a74-8d99-ad76cc7fc74>;+g.3gpp.icsi-ref=\"urn%3Aurn-7%3A3gpp-service.ims.icsi.mmtel\"\nAllow: INVITE, ACK, CANCEL, BYE, PRACK, UPDATE\nAccept: application/sdp\nContent-Type: application/sdp\nContent-Length: (…)\n\nv=0\no=- 2987933800  IP6 5555::eee:fff:aaa:bbb\ns=-\nc=IN IP6 5555::eee:fff:aaa:bbb\nt=0 0\nm=audio 6544 RTP/AVP 97 96\na=rtpmap:97 AMR\na=fmtp:97 mode-set=0,2,5,7; mode-change-period=2\na=rtpmap:96 telephone-event\nm=video 0 RTP/AVP 98 99\na=rtpmap:98 H263\na=fmtp:98 profile-level-id=0\na=rtpmap:99 MP4V-ES\n\n25.\tSIP 200 (OK) response (intermediate IM CN subsystem entities to UE-1)\nThe intermediate IM CN subsystem entities forward the SIP 200 (OK) response to UE-1.\n26.\tSIP ACK request (UE-1 to intermediate IM CN subsystem entities)\nUE-1 completes the old call leg update with a SIP ACK request sent to the intermediate IM CN subsystem entities.\n27.\tSIP ACK request ( intermediate IM CN subsystem entities to )\nThe intermediate IM CN subsystem entities forward the SIP ACK request to the SCC AS.\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "A.7.4\tPS-PS Access Transfer with full media transfer for an outgoing call in alerting phase",
                    "description": "",
                    "summary": "",
                    "text_content": "The signalling flows shown in figure A.7.4-1 describes the PS-to-PS access transfer procedure when an early dialog originated by the SC UE A, is transferred from one contact address of a SC UE A (using an old IP-CAN) to a different contact address of the same SC UE A (using a different IP-CAN). In this example flow, the SC UE A is attached to old IP-CAN, and is in the process of establishing a dialog on its Source Access Leg via this IP-CAN, with the UE B. While the dialog on the Source Access Leg is in the alerting phase, the SC UE A decides (e.g. based on the measurement reports) to transfer this dialog to the Target Access Leg  that will be established over the new IP-CAN. Both, the SCC AS and the SC UA A support the PS-to-PS access transfer for the dialogs in early dialog phase.\nNOTE 1:\tThis scenario requires that the SC UE A supports dual mode operation and multiple registration procedure.\nNOTE 2:\tIn this example flow, each call leg is uniquely identified with a respective dialog identifier consisting of the Call-ID, From tag, and To tag.\nNOTE 3:\tFor clarity, the SIP 100 (Trying) responses are not shown in the signalling flow.\nFigure A.7.4-1 illustrates the signalling flow for an outgoing call in the alert phase, depicting the process of initiating a call and notifying the called party. The figure showcases the interaction between the call control signaling and the media gateway control signaling, highlighting the exchange of information between the network elements involved in the call setup. The visual representation emphasizes the importance of accurate and timely communication between the signaling system and the network equipment to ensure a smooth and successful call completion.\nFigure A.7.4-1: Signalling flow for an outgoing call in the alert phase\n1.\tSC UE A has sent an INVITE request and subsequently has received a SIP 180 (Ringing) response and it is ringing\nThe SC UE A initiated call toward the UE B by sending an initial SIP INVITE request on the Source Access Leg, and subsequently it has received a SIP 180 (Ringing) response, and it is providing ring-back. The call has been anchored at the SCC AS of the SC UE A.\nThe dialog on the Source Access Leg is identified with \"Call-ID= me03a0s09a2sdfgjkl491777\", \"From tag=64727891\", and \"To tag=774321\".\n2.\tSC UE A attaches to different IP-CAN\nThe SC UE A determines that a handover of the dialog on the Source Access Leg to a Target Access Leg is required while this dialog is in the alerting phase. The SC UE A connects to different IP-CAN and obtains a new IP address that it will use for the subsequent signalling and media. The SC UE A registers with the S-CSCF over the new IP-CAN using the standard multiple registration procedure. If needed, prior to sending the initial SIP INVITE request over the new IP-CAN, the SC UE A reserves resources in the new IP-CAN that will be needed for the signalling and the media.\n3.\tSIP INVITE request (SC UE A to intermediate IM CN subsystem entities) - see example in table A.7.5-3\nThe SC UE A sends an initial SIP INVITE request over the new IP-CAN with a new SDP offer to the UE B that indicates that the new dialog on the Target Access Leg will replace the existing dialog on the Source Access Leg. The SDP offer in the initial SIP INVITE request sent on the Target Access Leg specifies the new contact address on the new IP-CAN that will be used for the media.\nTable A.7.5-3: SIP INVITE request (SC UE A to intermediate IM CN subsystem entities)\nINVITE tel:+1-212-555-2222 SIP/2.0\nVia: SIP/2.0/UDP [5555::aaa:bbb:ccc:ddd]:1357; branch=z9hG4bKnashds7\nMax-Forwards: 70\nRoute: <sip:pcscf1.home1.net:7531;lr;comp=sigcomp>, <sip:orig@scscf1.home1.net;lr>\nP-Preferred-Identity: \"John Doe\" <sip:user1_public1@home1.net>\nP-Access-Network-Info:IEEE-802.11b\nPrivacy: none\nFrom: <sip:user1_public1@home1.net>; tag=171828\nTo: <tel:+1-212-555-2222>\nCall-ID: cb03a0s09a2sdfglkj490333\nCseq: 127 INVITE\nSupported: 100rel, precondition, gruu, outbound\nRequire: sec-agree; replaces\nReplaces: me03a0s09a2sdfgjkl491777; to-tag=774321; from-tag=64727891\nProxy-Require: sec-agree\nSecurity-Verify: ipsec-3gpp; q=0.1; alg=hmac-sha-1-96; spi=87654321; port1=7531\nContact: <sip:user1_public1@home1.net;gr=urn:uuid:f81d4fae-7dec-11d0-a765-00a0c91e6bf6; ob>;+g.3gpp.icsi-ref=\"urn%3Aurn-7%3A3gpp-service.ims.icsi.mmtel\";+g.3gpp.ics=\"principal\"\nAllow: INVITE, ACK, CANCEL, BYE, PRACK, UPDATE\nAccept: application/sdp, application/3gpp-ims+xml\nContent-Type: application/sdp\nContent-Length: (…)\n\nv=0\no=- 2987933615 2987933615 IN IP6 5555::aaa:bbb:ccc:ddd\ns=-\nc=IN IP6 5555::aaa:bbb:ccc:ddd\nt=0 0\nm=audio 3456 RTP/AVP 97 96\nb=AS:25.4\na=curr:qos local sendrecv\na=curr:qos remote none\na=des:qos mandatory local sendrecv\na=des:qos none remote sendrecv\na=rtpmap:97 AMR\na=fmtp:97 mode-set=0,2,5,7; mode-change-period=2\na=rtpmap:96 telephone-event\na=maxptime:20\n\nRequest-URI:\tthe tel-URI of the destination, i.e. the UE-B.\nRequire:\tthe \"replaces\" option tag indicate that the support for Replace header field is required.\nReplaces:\tidentifies the dialog on the Source Access that will be replaced with the new dialog on the Target Access Leg.\nSDP:\tspecifies the new IP address for media that the SC UE A has acquired in the new IP-CAN, and also indicates that the resources in the new IP-CAN have been acquired.\n4.\tSIP INVITE request transferring the session (intermediate IM CN subsystem entities to )\nBased on the initial filter criteria in the S-CSCF, the initial SIP INVITE request is routed towards the SCC AS.\n4a\tRemote Leg Update\nThe SCC AS correlates the initial SIP INVITE request received on the Target Access Leg to the dialog on the Source Access Leg and to the remote call leg. The SCC AS acting as a B2BUA generates a SIP UPDATE request, based on the information in the initial SIP INVITE request received on the Target Access Leg, and the information previously stored against these dialogs. The SIP UPDATE request contains the SDP offer that is identical to the SDP offer that the SCC AS received in the initial SIP INVITE request from the SC UE A on the Target Access Leg.\n5.\tSIP UPDATE request ( to intermediate IM CN subsystem entities)\nThe SCC AS performs the remote call leg update by sending the SIP UPDATE request towards the UE B.\n6.\tSIP UPDATE request (Intermediate IM CN subsystem entities to UE B)\nThe intermediate IM CN subsystem entities forward the SIP UPDATE request to the remote UE B.\n7.\tSIP 200 (OK) response (UE B to Intermediate IM CN subsystem entities)\nUpon receiving the SIP UPDATE request containing the SDP offer, the remote UE B sends a SIP 200 (OK) response. The SIP 200 (OK) response contains the SDP answer. The SDP answer indicates that the resources are available.\n8.\tSIP 200 (OK) response (Intermediate IM CN subsystem entities to )\nThe intermediate IM CN subsystem entities forward the SIP 200 (OK) response to the SCC AS.\n9.\tSIP 183 (Session Progress) response ( to Intermediate IM CN subsystem entities)\nThe SCC AS sends a 183 (Session Progress) response on the Target Access Leg that contains the SDP answer as received from the remote UE B. The SDP answer indicates that the resources at the UE B are available.\n10.\tSIP 183 (Session Progress) response (Intermediate IM CN subsystem entities to SC UE A)\nThe intermediate IM CN subsystem entities forward the 183 (Session Progress) response to the SC UE A.\n11.\tSIP PRACK request (SC UE A to Intermediate IM CN subsystem entities)\nThe SC UE A acknowledges the receipt of the 183 Session Progress response.\n12.\tSIP PRACK request (Intermediate IM CN subsystem entities to )\nThe intermediate IM CN subsystem entities forward the SIP PRACK request to the SCC AS.\n13.\tSIP 200 (OK) response ( to Intermediate IM CN subsystem entities)\nThe SCC AS acknowledges the receipt of the SIP PRACK request.\n14.\tSIP 200 (OK) response (Intermediate IM CN subsystem entities to SC UE A)\nThe intermediate IM CN subsystem entities forward the SIP 200 (OK) response to the SC UE A. Upon successful exchange of the SIP 183 (Session Progress) response and the SIP PRACK request on the Target Access Leg, the early dialog and associated media has been transferred from the Source Access Leg to the Target Access Leg. Since the resources for media on the Source Access Leg are not used any more, the SC UE A releases the resources that the SC UE A was using for media on the Source Access Leg. In spite of releasing the resources, the early dialog on the Source Access Leg is still in the alerting phase.\nNOTE 4:\tFor clarity, the exchange of the SIP messages and associated SDPs on the Source Access Leg, to release the resources that the SC UE A was using for media on the Source Access Leg, is not shown in the signalling flow.\n15.\tRemote user answers the call\n16.\tSIP 200 (OK) response (UE B to intermediate IM CN subsystem entities)\nThe UE B accepts the call and sends a SIP 200 (OK) response to the initial INVITE request received from the SC UE A..\n17.\tSIP 200 (OK) response (Intermediate IM CN subsystem entities to )\nThe SIP 200 (OK) response is forwarded to the SCC AS.\n18.\tSIP 200 (OK) response ( to intermediate IM CN subsystem entities)\nThe SCC AS acting as a B2BUA generates the SIP 200 (OK) response to initial SIP INVITE request that it has received on the Target Access Leg , that indicate that the remote UE B has accepted the call.\n19.\tSIP 200 (OK) response (Intermediate IM CN subsystem entities to SC UE A)\nThe SIP 200 (OK) response is forwarded to the SC UE A.\n20.\tSIP ACK request (SC UE A to intermediate IM CN subsystem entities)\nThe SC UE A acknowledges the SIP 200 (OK) response received from the SCC AS\n21.\tSIP ACK request (Intermediate IM CN subsystem entities to )\nThe SIP ACK request is forwarded to the SCC AS.\n22.\tSIP ACK request ( to intermediate IM CN subsystem entities)\nThe SCC AS acknowledges the SIP 200 (OK) response received from the UE B.\n23\tSIP ACK request (Intermediate IM CN subsystem entities to UE B)\nThe SIP ACK request is forwarded towards the UE B.\n24-31\tSIP CANCEL Processing\nThe SC UE A cancels the SIP INVITE request sent on the Source Access Leg towards the SCC AS.\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "A.7.5\tPS-PS Access Transfer with full media transfer for an incoming call in alerting phase",
                    "description": "",
                    "summary": "",
                    "text_content": "The signalling flows shown in the figure A.7.5-1 describes the PS-to-PS access transfer procedure when an incoming dialog that is in alerting phase is transferred from one contact address of the SC UE A (using the old IP-CAN) to a different contact address of the same SC UE A (using a different IP-CAN). In this example flow the SC UE A has an incoming dialog which is anchored at the SCC AS. While the dialog on the Source Access Leg (using the old IP-CAN) is in the alerting phase, the SC UE A decides (e.g. based on the measurement reports) to transfer this dialog to the Target Access Leg  that will be established over the new IP-CAN. The the SCC AS and SC UA A support the PS-to-PS access transfer for the dialogs in early dialog phase.\nNOTE 1:\tThis scenario requires that the SC UE A supports dual mode operation and multiple registration procedure.\nNOTE 2:\tIn this example flow, each call leg is uniquely identified with a respective dialog identifier consisting of the Call-ID, From tag, and To tag.\nNOTE 3:\tFor clarity, the SIP 100 (Trying) responses are not shown in the signalling flow.\nFigure A.7.5-1 illustrates the signalling flow for an incoming dialog in the alert phase, depicting the interaction between the network elements involved in the process. The figure showcases the communication between the network element initiating the alert, the network element receiving the alert, and the network element responsible for handling the alert. The flow demonstrates the exchange of messages and the establishment of a dialog to address the issue at hand. The figure is essential for understanding the sequence of events and the coordination required to manage alerts in a network.\nFigure A.7.5-1: Signalling flow for an incoming dialog in the alert phase\n1.\tSC UE A has received an incoming call and is in\nThe incoming call has been anchored at the SCC AS of the SC UE A. If needed, both ends have reserved the resources, and the SC UE A has sent a SIP 180 (Ringing) response to the initial SIP INVITE request received on the Source Access Leg.\nThe dialog on the Source Access Leg is identified with \"Call-ID= me03a0s09a2sdfgjkl491777\", \"From tag=64727891\", and \"To tag=774321\".\n2.\tSC UE A attaches to different IP-CAN\nThe SC UE A determines that a handover of the dialog on the Source Access Leg to a Target Access Leg is required while this dialog is in the alerting phase. The SC UE A connects to different IP-CAN and obtains new IP address that it will use for the subsequent signalling and media. The SC UE A registers with the S-CSCF over the new IP-CAN using the standard multiple registration procedure. If needed, prior to sending the initial SIP INVITE request over the new IP-CAN, the SC UE A reserves resources in the new IP-CAN that will be needed for the signalling and media.\n3.\tSIP INVITE request (SC UE A to intermediate IM CN subsystem entities) - see example in table A.7.5-3\nThe SC UE A sends an initial SIP INVITE request on the Target Access Leg with a new SDP offer toward the UE B and indicates that the new dialog on the Target Access Leg will replace the existing early dialog on the Source Access Leg. The SDP offer in the initial SIP INVITE request sent on the Target Access Leg specifies the new contact address that will be used for the media over the new IP-CAN.\nTable A.7.5-3: SIP INVITE request (SC UE A to intermediate IM CN subsystem entities)\nINVITE tel:+1-212-555-2222 SIP/2.0\nVia: SIP/2.0/UDP [5555::aaa:bbb:ccc:ddd]:1357; branch=z9hG4bKnashds7\nMax-Forwards: 70\nRoute: <sip:pcscf1.home1.net:7531;lr;comp=sigcomp>, <sip:orig@scscf1.home1.net;lr>\nP-Preferred-Identity: \"John Doe\" <sip:user1_public1@home1.net>\nP-Access-Network-Info:IEEE-802.11b\nPrivacy: none\nFrom: <sip:user1_public1@home1.net>; tag=171828\nTo: <tel:+1-212-555-2222>\nCall-ID: cb03a0s09a2sdfglkj490333\nCseq: 127 INVITE\nSupported: 100rel, precondition, gruu, outbound\nRequire: sec-agree; replaces\nReplaces: me03a0s09a2sdfgjkl491777; to-tag=774321; from-tag=64727891\nProxy-Require: sec-agree\nSecurity-Verify: ipsec-3gpp; q=0.1; alg=hmac-sha-1-96; spi=87654321; port1=7531\nContact: <sip:user1_public1@home1.net;gr=urn:uuid:f81d4fae-7dec-11d0-a765-00a0c91e6bf6; ob>;+g.3gpp.icsi-ref=\"urn%3Aurn-7%3A3gpp-service.ims.icsi.mmtel\";+g.3gpp.ics=\"principal\"\nAllow: INVITE, ACK, CANCEL, BYE, PRACK, UPDATE\nAccept: application/sdp, application/3gpp-ims+xml\nContent-Type: application/sdp\nContent-Length: (…)\n\nv=0\no=- 2987933615 2987933615 IN IP6 5555::aaa:bbb:ccc:ddd\ns=-\nc=IN IP6 5555::aaa:bbb:ccc:ddd\nt=0 0\nm=audio 3456 RTP/AVP 97 96\nb=AS:25.4\na=curr:qos local sendrecv\na=curr:qos remote none\na=des:qos mandatory local sendrecv\na=des:qos none remote sendrecv\na=rtpmap:97 AMR\na=fmtp:97 mode-set=0,2,5,7; mode-change-period=2\na=rtpmap:96 telephone-event\na=maxptime:20\n\nRequest-URI:\tthe tel-URI of the destination, i.e. the UE-B.\nRequire:\tthe \"replaces\" option tag indicate that the support for Replace header field is required.\nReplaces: that identifies the dialog on the Source Access Leg that will be replaced with the new dialog on the Target Access Leg.\nSDP:\tspecifies the new IP address for media that the SC UE A has acquired in the new IP-CAN, and also indicates that the resources in the new IP-CAN have been acquired.\n4.\tSIP INVITE request transferring the session (intermediate IM CN subsystem entities to )\nBased on the initial filter criteria in the S-CSCF, the initial SIP INVITE request is routed towards the SCC AS.\n4a.\tRemote Leg Update\nThe SCC AS correlates the initial SIP INVITE request received on the Target Access Leg to the dialog on the Source Access Leg, and to the remote call leg. The SCC AS acting as a B2BUA generates a SIP UPDATE request, based on the information received in the initial SIP INVITE request on the Target Access Leg, and the information previously stored against these dialogs. The SIP UPDATE request contains the SDP offer that is identical to the SDP offer that the SCC AS received in the initial SIP INVITE request from the SC UE A on the Target Access Leg.\n5.\tSIP UPDATE request ( to intermediate IM CN subsystem entities)\nThe SCC AS performs the remote call leg update by sending the SIP UPDATE request towards the UE B.\n6.\tSIP UPDATE request (Intermediate IM CN subsystem entities to UE B)\nThe intermediate IM CN subsystem entities forward the SIP UPDATE request to the remote UE B.\n7.\tSIP 200 (OK) response (UE B to Intermediate IM CN subsystem entities)\nUpon receiving the SIP UPDATE request containing the SDP offer, the remote UE B sends a SIP 200 (OK) response. The SIP 200 (OK) response contains the SDP answer. The SDP answer indicates that the resources are available.\n8.\tSIP 200 (OK) response (Intermediate IM CN subsystem entities to )\nThe intermediate IM CN subsystem entities forward the SIP 200 (OK) response to the SCC AS.\n9.\tSIP 183 (Session Progress) response ( to Intermediate IM CN subsystem entities)\nThe SCC AS sends a 183 (Session Progress) response on the Target Access Leg that contains the SDP answer as received from the remote UE B. The SDP answer indicates that resources are available. The SIP 183 (Session Progress) response will contain a Recv-Info header field set to g.3gpp.state-and-event.\n10.\tSIP 183 (Session Progress) response (Intermediate IM CN subsystem entities to SC UE A)\nThe intermediate IM CN subsystem entities forward the 183 (Session Progress) response to the SC UE A.\n11.\tSIP PRACK request (SC UE A to Intermediate IM CN subsystem entities)\nThe SC UE A acknowledges the receipt of the 183 (Session Progress) response.\n12.\tSIP PRACK request (Intermediate IM CN subsystem entities to )\nThe intermediate IM CN subsystem entities forward the SIP PRACK request to the SCC AS.\n13.\tSIP 200 (OK) response ( to Intermediate IM CN subsystem entities)\nThe SCC AS acknowledges the SIP PRACK request.\n14.\tSIP 200 (OK) response (Intermediate IM CN subsystem entities to SC UE A)\nThe intermediate IM CN subsystem entities forward the SIP 200 (OK) response to the SC UE A. Upon successful exchange of the SIP 183 (Session Progress) response and the SIP PRACK request on the Target Access Leg, the early dialog and associated media has been transferred from the Source Access Leg to the Target Access Leg. Since the resources for media on the Source Access Leg are not used any more, the SC UE A releases the resources that the SC UE A was using for media on the Source Access Leg. In spite of releasing the resources, the early dialog on the Source Access Leg is still in the alerting phase.\nNOTE 4:\tFor clarity, the exchange of the SIP messages and associated SDPs on the Source Access Leg, to release the resources that the SC UE A was using for media on the Source Access Leg, is not shown in the signalling flow.\n15.\tUser answers the call\n16.\tThe SC UE A accepts the call and sends SIP INFO request to intermediate IM CN subsystem entities see example in table A.7.5-16\nThe SC UE sends a SIP INFO request that indicates that the call has been accepted.\nTable A.7.5-16: SIP INFO request (SC UE A to intermediate IM CN subsystem entities)\nINFO tel:+1-212-555-2222 SIP/2.0\nVia: SIP/2.0/UDP [5555::aaa:bbb:ccc:ddd]:1357; branch=z9hG4bKnashds7\nMax-Forwards: 70\nRoute: <sip:pcscf1.home1.net:7531;lr;comp=sigcomp>, <sip:orig@scscf1.home1.net;lr>\nFrom: <sip:user1_public1@home1.net>; tag=171828\nTo: <tel:+1-212-555-2222>;tag=171828\nCall-ID: cb03a0s09a2sdfglkj490333\nCseq: 130 INFO\nInfo-Package: g.3gpp.state-and-event\nContent-Disposition: Info-Package\nContent-Type: application/vnd.3gpp.state-and-event-info+xml\nContent-Length:\n\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<state-and-event-info>\n<event>call-accepted</event>\n</state-and-event-info>\n\n17.\tSIP INFO request (Intermediate IM CN subsystem entities to )\nThe intermediate IM CN subsystem entities forward the SIP INFO request to the SCC AS. The SCC AS gets informed that the SC UE A has accepted the call.\n18.\tSIP 200 (OK) response ( to intermediate IM CN subsystem entities)\nThe SCC AS acknowledges the receipt of the SIP INFO request indicating that the SC UE A has accepted the call.\n19.\tSIP 200 (OK) response (Intermediate IM CN subsystem entities to SC UE A)\nThe SIP 200 (OK) response is forwarded to the SC UE A.\n20.\tSCC AS completes the SIP procedure on all three call-legs\nThe SCC AS generates a SIP 200 (OK) response toward the UE B, a SIP 200 (OK) response toward the UE A on the Target Access Leg, and a SIP CANCEL request toward the UE A on the Source Access Leg.\n21.\tSIP 200 (OK) response ( to intermediate IM CN subsystem entities)\nThe SCC AS sends a SIP 200 (OK) response to UE B that indicates that the SC UE A has accepted the call.\n22.\tSIP 200 (OK) response (Intermediate IM CN subsystem entities to the UE B)\nThe SIP 200 (OK) response is forwarded to the UE B.\n23.\tSIP ACK request (UE B to intermediate IM CN subsystem entities)\nThe remote UE B acknowledges the SIP 200 (OK) response received from  by sending a SIP ACK request.\n24.\tSIP ACK request (Intermediate IM CN subsystem entities to )\nThe SIP ACK request is forwarded to the SCC AS.\n25.\tSIP 200 (OK) response ( to intermediate IM CN subsystem entities)\nThe SCC AS sends a SIP 200 (OK) response to the SC UE A on the Target Access Leg to indicate the successful access transfer.\n26.\tSIP 200 (OK) response (Intermediate IM CN subsystem entities to SC UE A)\nThe SIP 200 (OK) response is forwarded to the SC UE A.\n27.\tSIP ACK request (SC UE A to intermediate IM CN subsystem entities)\nSC UE A acknowledges the receipt of the 200 (OK) response received on the Target Access Leg from  by sending a SIP ACK request.\n28.\tSIP ACK request (Intermediate IM CN subsystem entities to )\nThe SIP ACK request is forwarded to the SCC AS.\n29-36\tSIP CANCEL Processing\nThe SCC AS cancels the early dialog on the Source Access Leg.\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                }
            ]
        },
        {
            "title": "A.8\tSignalling flows for PS-PS access transfer in conjunction with PS-CS access transfer",
            "description": "",
            "summary": "",
            "tables": [],
            "figures_meta_data": [],
            "subsections": [
                {
                    "title": "Introduction",
                    "description": "",
                    "summary": "",
                    "text_content": "The signalling flows for PS-PS access transfer conjunction with PS-CS access transfer demonstrate how a multimedia session is transferred from Source Access Leg to the Target Access Leg. The following signalling flows are included:\n-\tsubclause  shows an example when a multimedia session is transferred from one IP-CAN to a new IP-CAN and the CS bearer respectively ; and\n-\tsubclause  shows an example when a multimedia session is transferred from one IP-CAN and CS bearer to a new IP-CAN.\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "A.8.2\tPS - PS in conjunction with PS - CS Access Transfer: PS to CS",
                    "description": "",
                    "summary": "",
                    "text_content": "In this example, SC UE A has an ongoing multimedia session with remote UE B over IP-CAN#1 before access transfer. When SC UE connects to a new IP-CAN#2, it decides to transfer the multimedia session over the new IP-CAN#2 and the CS bearer respectively.\nFigure A.8.2-1 illustrates the signalling flow for PS – PS in conjunction with PS – CS Access Transfer: PS to CS, depicting the process of transferring a PS context from a PS to a CS. The figure showcases the various stages of the process, including the initiation of the transfer, the exchange of messages between the PS and CS, and the successful completion of the transfer. Key components such as the PS, CS, and signalling messages are clearly labeled, providing a comprehensive overview of the process. This flow is crucial for understanding the efficient management of network resources and maintaining seamless connectivity.\nFigure A.8.2-1: Signalling flow for PS - PS in conjunction with PS - CS Access Transfer: PS to CS\nNOTE 1:\tFor clarity, the SIP 100 (Trying) responses are not shown in the signalling flow.\n1. SC UE A has an ongoing multimedia session with remote UE B\nThe call has been anchored at the SCC AS which is in the HPLMN of originating SC UE A. The call leg over old IP-CAN is identified with \"Call-ID= me0s2sdfgjkl491777\", \"From tag=64727891\", and \"To tag=774321\". The UE A and UE B exchange media over the old IP-CAN, which is maintained while the SC UE A initiates the handover procedure.\nTable A.8.2-1 shows an example of the SDP offer from SC UE A to remote UE B.\nNOTE 2:\tTo later show how the media is transferred to the new IP-CAN and CS bearer, only the SDP offer is shown in table A.8.2-1.\nTable -1: SIP INVITE request (SC UE A to intermediate IM CN subsystem entities)\nINVITE tel:+1-237-555-2222 SIP/2.0\nVia:\nMax-Forwards:\nRoute:\nP-Asserted-Identity:\nP-Charging-Vector:\nP-Access-Network-Info:\nPrivacy:\nFrom:\nTo:\nCall-ID:\nCseq:\nSupported:\nRequire:\nProxy-Require:\nSecurity-Verify:\nContact:\nAllow:\nAccept:\nContent-Type:\nContent-Length: (…)\n\nv=0\no=- 2987933615  IP6 5555::aaa:bbb:ccc:ddd\ns=\nc=IN IP6 5555::aaa:bbb:ccc:ddd\nt=0 0\nm=audio 3456 RTP/AVP 97 96\nb=AS:25.4\na=curr:qos local sendrecv\na=curr:qos remote none\na=des:qos mandatory local sendrecv\na=des:qos none remote sendrecv\na=rtpmap:97 AMR\na=fmtp:97 mode-set=0,2,5,7; mode-change-period=2\na=rtpmap:96 telephone-event\na=maxptime:20\nm=message 7654 TCP/MSRP 98\na=accept-types:text/plain\n\n2.\tSC UE A connects to a new IP-CAN#2:\nThe SC UE A decides to transfer the multimedia session over the new IP-CAN and CS bearer respectively. The UE A obtains an IP address that it will use for the signalling and media. It registers with the S-CSCF over the new IP-CAN using multiple registrations procedure. Depending on the UE A configuration, the discovery of the P-CSCF in the new IP-CAN can be needed. Based on the UE A and new IP-CAN capabilities, the UE A decides to use the same codec that was used over the old IP-CAN. The UE A reserves resources (e.g. QoS) in the new IP-CAN that will be needed for the signalling and transferred media, prior to sending the initial SIP INVITE request.\n3.\tSIP INVITE request (SC UE A to intermediate IM CN subsystem entities)- see example in table A.8.2-3\nThe SC UE A sends an initial SIP INVITE request with a STI and a new SDP offer to the UE B that indicates that the new call replaces the existing call. The initial SIP INVITE request establishes a dialog for signalling and specifies in the SDP a new contact address that will be used for non-realtime media over the new IP-CAN. Upon sending the initial SIP INVITE request, the UE A is ready to receive the RTP packets either over the new IP-CAN or the old IP-CAN. The RTP packets can arrive over the new IP-CAN prior to the SC UE are receiving the SIP 200 (OK) response for the initial SIP INVITE request.\nTable -3: SIP INVITE request (UE A to intermediate IM CN subsystem entities)\nINVITE tel:+1-237-555-2222 SIP/2.0\nVia: SIP/2.0/UDP [5555::aaa:bbb:ccc:fff]:1357;comp=sigcomp;branch=z9hG4bKnashds7\nMax-Forwards: 70\nRoute: sip:pcscf1.home1.net:7531;lr;comp=sigcomp>, <sip:orig@scscf1.home1.net;lr>\nP-Preferred-Identity: \"John Doe\" <sip:user1_public1@home1.net>\nP-Access-Network-Info: IEEE-802.11b\nPrivacy: none\nFrom: <sip:user1_public1@home1.net>; tag=171828\nTo: <tel:+1-237-555-2222>\nCall-ID: cb0s2sdfglkj490237\nCseq: 127 INVITE\nSupported: 100rel; precondition\nRequire: sec-agree\nProxy-Require: sec-agree\nSecurity-Verify: ipsec-3gpp; q=0.1; alg=hmac-sha-1-96; spi=87654321; port1=7531\nContact: <sip:user1_public1@home1.net; gr=urn:uuid:f81d4fae-7dec-11d0-a765-00a0c91e6bf6>;+g.3gpp.icsi-ref=\"urn%3Aurn-7%3A3gpp-service.ims.icsi.mmtel\";+g.3gpp.ics=\"principal\";\nTarget-Dialog:me0s2sdfgjkl491777; to-tag=774321; from-tag=64727891\nAllow: INVITE, ACK, CANCEL, BYE, PRACK, UPDATE\nAccept: application/sdp, application/3gpp-ims+xml\nContent-Type: application/sdp\nContent-Length: (…)\n\nv=0\no=- 2987933615  IP6 5555::aaa:bbb:ccc:fff\ns=\nt=0 0\nm=audio 0 RTP/AVP 97 96\nc=IN IP6 5555::aaa:bbb:ccc:ddd\nb=AS:25.4\na=curr:qos local sendrecv\na=curr:qos remote none\na=des:qos mandatory local sendrecv\na=des:qos none remote sendrecv\na=rtpmap:97 AMR\na=fmtp:97 mode-set=0,2,5,7; mode-change-period=2\na=rtpmap:96 telephone-event\na=maxptime:20\nm=message 7654 TCP/MSRP 98\nc=IN IP6 5555::aaa:bbb:ccc:fff\na=accept-types:text/plain\n\n4.\tEvaluation of initial filter criteria\nThe S-CSCF evaluates initial filter criteria for the served SC user and as a result routes the SIP INVITE request towards the SCC AS.\n5.\tSIP INVITE request (intermediate IM CN subsystem entities to )\nThe SIP INVITE request is forwarded to the SCC AS as the result of the evaluation of iFC.\n6.\tRemote Leg Update\nThe SCC AS identifies the session to be transferred using the STI. The SCC AS performs the Remote Leg update by sending the SIP re-INVITE request towards the remote UE.\n7.\tSIP re-INVITE request ( to intermediate IM CN subsystem entities)- See example in table A.8.2-7\nThe SCC AS modifies the message in accordance with routeing B2BUA functionality, e.g. mapping of From, To, Cseq and Call-ID header fields from one side of the B2BUA to the other. In this example the SCC AS includes the contents of the Contact header field from the received SIP INVITE request. The SIP re-INVITE request contains the SDP offer that is identical to the SDP offer that the SCC AS received in the initial SIP INVITE request from the UE A (Step 3).\nTable -7: SIP re-INVITE request ( to intermediate IM CN subsystem entities)\nINVITE < sip:user2_public1@home2.net;gr=urn:uuid:2ad8950e-48a5-4a74-8d99-ad76cc7fc74>; SIP/2.0\nVia: SIP/2.0/UDP sccas.home1.net; branch=z9hG4bK332b33.3;\nMax-Forwards: 67\nRoute: <scscf1.home1.net;lr >,<sip:scscf2.home2.net;lr>, <sip:pcscf2.visited2.net;lr>\nP-Asserted-Identity: \"John Doe\" <sip:user1_public1@home1.net>, <tel:+1-237-555-1111>\nP-Access-Network-Info: IEEE-802.11b\nPrivacy: none\nP-Charging-Vector: ####\nP-Charging-Function-Addresses:\nFrom: <sip:user1_public1@home1.net>; tag=1717777\nTo: <tel:+1-237-555-2222>, tag=4321\nCall-ID: dc14b1t10b3teghmlk5013237\nCseq: 111 INVITE\nSupported: precondition, 100rel\nContact:< sip:user1_public1@home1.net;gr=urn:uuid:f81d4fae-7dec-11d0-a765-00a0c91e6bf6>;+g.3gpp.icsi-ref=\"urn%3Aurn-7%3A3gpp-service.ims.icsi.mmtel\"\nAllow: INVITE, ACK, CANCEL, BYE, PRACK, UPDATE\nAccept: application/sdp\nContent-Type: application/sdp\nContent-Length: (…)\nv=0\no=- 2987933615  IP6 5555::aaa:bbb:ccc:fff\ns=t=0 0\nm=audio 0 RTP/AVP 97 96\nc=IN IP6 5555::aaa:bbb:ccc:ddd\nb=AS:25.4\na=curr:qos local sendrecv\na=curr:qos remote none\na=des:qos mandatory local sendrecv\na=des:qos none remote sendrecv\na=rtpmap:97 AMR\na=fmtp:97 mode-set=0,2,5,7; mode-change-period=2\na=rtpmap:96 telephone-event\na=maxptime:20\nm=message 7654 TCP/MSRP 98\nc=IN IP6 5555::aaa:bbb:ccc:fff\na=accept-types:text/plain\n\n8.\tSIP re-INVITE request (Intermediate IM CN subsystem entities to UE B)\nThe intermediate IM CN subsystem entities forwards the SIP re-INVITE request to remote UE B.\n9-10:\tSIP 200 (OK) response (UE B to SCC AS via Intermediate IM CN subsystem entities)\nThe UE B generates the SIP 200 (OK) response to the SIP re-INVITE request and forwards it to the SCC AS.\n11-12:\tSIP ACK request ( to UE B via Intermediate IM CN subsystem entities)\nThe SCC AS generates the SIP ACK request to the SIP 200 (OK) response and forwards it to the remote UE B.\n13-14:\tSIP 200 (OK) response ( to UE A via Intermediate IM CN subsystem entities)\nThe SCC AS generates the SIP 200 (OK) response to the SIP INVITE request and forwards it to the SC UE A.\n15-16:\tSIP ACK request (SC UE A to SCC AS via Intermediate IM CN subsystem entities)\nThe SC UE A generates the SIP ACK request to the SIP 200 (OK) response and forwards it to the SCC AS\n17.\tMedia paths between UE A and UE B\nThe non-realtime media is using the new IP-CAN while the realtime media path is still over the old IP-CAN.\n18.\tCC SETUP message (SC UE A to Interworking entities)\nThe SC UE sends the CC SETUP message with the STN as the called party number.\nNOTE 3:\tSTN is a PSI DN used by the UE to request a session transfer towards the SCC AS.\n19.\tSIP INVITE request (Interworking entities to Intermediate IM CN subsystem entities) -see example in Table A.8.2-19\nTable -19: SIP INVITE request (interworking entities to intermediate IM CN subsystem entities)\nINVITE tel:+1-237-555-3333 SIP/2.0\nVia: SIP/2.0/UDP msc1.home1.net; branch=z9hG4bKnashds7\nMax-Forwards: 70\nRoute: <sip:icscf1.home1.net:7531;lr;comp=sigcomp>\nP-Asserted-Identity: <tel: +1-237-555-1111>\nP-Charging-Vector: ####\nPrivacy: none\nFrom: <tel: +1-237-555-1111>;tag=171828\nTo: <tel:+1-237-555-2222>\nCall-ID: cb0s2sdfglkj490333\nCseq: 127 INVITE\nSupported: 100rel, precondition\nRequire: sec-agree\nProxy-Require: sec-agree\nSecurity-Verify: ipsec-3gpp; q=0.1; alg=hmac-sha-1-96; spi=87654321; port=7531\nContact: <sip:mgcf2.home2.net;gr>;+g.3gpp.icsi-ref=\"urn%3Aurn-7%3A3gpp-service.ims.icsi.mmtel\"\nAllow: INVITE, ACK, CANCEL, BYE, PRACK, UPDATE, REFER, MESSAGE\nAccept: application/sdp, application/3gpp-ims+xml\nContent-Type: application/sdp\nContent-Length: (…)\n\n\nv=0\no=- 2987933615  IP6 5555::aaa:bbb:ccc:eee\ns=\nc=IN IP6 5555::aaa:bbb:ccc:eee\nt=0 0\nm=audio 3456 RTP/AVP 97 96\nb=AS:25.4\na=curr:qos local sendrecv\na=curr:qos remote none\na=des:qos mandatory local sendrecv\na=des:qos none remote sendrecv\na=rtpmap:97 AMR\na=fmtp:97 mode-set=0,2,5,7; mode-change-period=2\na=rtpmap:96 telephone-event\na=maxptime:20\n\nRequest-URI:\tcontains the IMRN, as obtained from CS networks signalling.\nSDP:\tThe SDP contains preconfigured set of codecs supported by the MGW.\n20.\tEvaluation of initial filter criteria\nThe S-CSCF evaluates initial filter criteria for the served SC user and as a result routes the SIP INVITE request towards the SCC AS.\n21.\tSIP INVITE request (Intermediate IM CN subsystem entities to )\n22.\tRemote Leg Update\nThe SCC AS performs the Remote Leg update by sending the SIP re-INVITE request towards the remote UE.\n23.\tSIP re-INVITE request (SCC AS to intermediate IM CN subsystem entities) –see example in table A.8.2-23\nThe SCC AS acting as a routing B2BUA generates a SIP INVITE request based upon the received SIP INVITE request and the information previously stored against this session and routes it towards UE B via the intermediate IM CN subsystem entities. In this example the SCC AS includes the contents of the Contact header field from the received SIP INVITE request.\nTable A.8.2-23: SIP re-INVITE request ( to intermediate IM CN subsystem entities)\nINVITE < sip:user2_public1@home2.net;gr=urn:uuid:2ad8950e-48a5-4a74-8d99-ad76cc7fc74> SIP/2.0\nVia: SIP/2.0/UDP sccas1.home1.net;branch=z9hG4bKnas34r5\nMax-Forwards: 67\nRoute: <sip:scscf1.home1.net:lr>\nP-Asserted-Identity: <tel: +1-237-555-1111>\nP-Charging-Function-Addresses: ####\nP-Charging-Vector: ####\nPrivacy: none\nFrom: <tel: +1-237-555-1111>;tag=171828\nTo: <tel:+1-237-555-2222>; tag=26545\nCall-ID: cb0s2sdfglkj490333\nCseq: 127 INVITE\nSupported: 100rel, precondition\nRequire: sec-agree\nProxy-Require: sec-agree\nSecurity-Verify: ipsec-3gpp; q=0.1; alg=hmac-sha-1-96; spi=87654321; port=7531\nContact: < sip:user1_public1@home1.net;gr=urn:uuid:f81d4fae-7dec-11d0-a765-00a0c91e6bf6>;+g.3gpp.icsi-ref=\"urn%3Aurn-7%3A3gpp-service.ims.icsi.mmtel\"\nAllow: INVITE, ACK, CANCEL, BYE, PRACK, UPDATE, REFER, MESSAGE\nAccept: application/sdp, application/3gpp-ims+xml\nContent-Type: application/sdp\nContent-Length: (…)\n\nv=0\no=- 2987933615  IP6 5555::aaa:bbb:ccc:eee\ns=\nt=0 0\nm=audio 3456 RTP/AVP 97 96\nc=IN IP6 5555::aaa:bbb:ccc:eee\nb=AS:25.4\na=curr:qos local sendrecv\na=curr:qos remote none\na=des:qos mandatory local sendrecv\na=des:qos none remote sendrecv\na=rtpmap:97 AMR\na=fmtp:97 mode-set=0,2,5,7; mode-change-period=2\na=rtpmap:96 telephone-event\na=maxptime:20\nm=message 7654 TCP/MSRP 98\nc=IN IP6 5555::aaa:bbb:ccc:fff\na=accept-types:text/plain\n\n24.\tSIP re-INVITE request (Intermediate IM CN subsystem entities to UE B)\nIntermediate IM CN subsystem entities forward the SIP re-INVITE request to remote UE B.\n25.\tSIP 200 (OK) response (UE B to intermediate IM CN subsystem entities)\nUpon receiving the SIP re-INVITE request containing the SDP offer, since the UE B has all resources available, it sends immediately the SIP 200 (OK) response to the SIP re-INVITE request that contains the SDP answer. The SDP answer indicates that the resources are available.\n26.\tSIP 200 (OK) response (intermediate IM CN subsystem entities to )\nThe intermediate IM CN subsystem entities forward the SIP 200 (OK) response to the SIP re-INVITE request to the SCC AS in the originating network.\n27-28.\tSIP ACK request ( to UE B via IM CN subsystem entities)\nThe SCC AS generates the SIP ACK request to the SIP 200 (OK) response, and forwards the SIP ACK request to the remote UE B.\n29-30.\tSIP 200 (OK) response ( to interworking entities via IM CN subsystem entities)\nThe SCC AS generates the SIP 200 (OK) response to the SIP INVITE request, and forwards the SIP 200 (OK) response to the interworking entities.\n31.\tCC CONNECT message (interworking entities to SC UE A)\n32-33.\tSIP ACK request (interworking entities to  via IM CN subsystem entities)\nThe interworking entities generate the SIP ACK request to the SIP 200 (OK) response, and forward it to the SCC AS.\n34.\tCC CONNECT ACKNOWLEDGEMENT message (SC UE A to interworking entities)\n35-36:\tSIP BYE request ( to SC UE A via intermediate IM CN subsystem entities)\nThe SCC AS terminates the replaced call leg, which was using the old IP-CAN, by sending a SIP BYE request to the UE A.\n37-38.\tSIP 200 (OK) response (SC UE A to SCC AS via intermediate IM CN subsystem entities)\nUpon receiving the SIP BYE request over the old IP-CAN, the SC UE A sends a SIP 200 (OK) response over the old IP-CAN to the SCC AS. Subsequently, the SC UE A relinquishes all resources pertaining to the old IP-CAN.\n39.\tMedia paths between SC UE A and UE B\nFinally, the non-realtime media path is over the new IP-CAN and the realtime media is using the CS bearer.\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "PS - PS in conjunction with PS - CS Access Transfer: CS to PS",
                    "description": "",
                    "summary": "",
                    "text_content": "In this example, SC UE A has an ongoing multimedia session with remote UE B over IP-CAN#1 and CS bearer before access transfer. When SC UE connects to a new IP-CAN#2, it decides to transfer all the multimedia session over the new IP-CAN#2.\nFigure A.8.3-1 illustrates the signalling flow for PS – PS in conjunction with PS – CS Access Transfer: CS to PS. The figure depicts the process of transferring a call from CS to PS, highlighting the various signalling messages exchanged between the network elements involved. The figure showcases the importance of efficient call transfer mechanisms in maintaining seamless communication services for subscribers.\nFigure A.8.3-1: Signalling flow for PS - PS in conjunction with PS - CS Access Transfer: CS to PS\nNOTE 1:\tFor clarity, the SIP 100 (Trying) responses are not shown in the signalling flow.\n1.\tSC UE A has an ongoing multimedia session with remote UE B\nThe non realmedia path is over old IP-CAN#1 and the realtime media path is over the CS bearer. The call has been anchored at the SCC AS which is in the HPLMN of originating SC UE A. The call leg over old IP-CAN#1 is identified with \"Call-ID= me0s2sdfgjkl491777\", \"From tag=64727891\", and \"To tag=774321\". The UE A and UE B exchange media over the old IP-CAN, which is maintained while the SC UE A initiates the handover procedure.\n2.\tSC UE A connects to a new IP-CAN#2\nThe SC UE A decides to transfer the multimedia session over the new IP-CAN#2. The UE A obtains an IP address that it will use for the signalling and media. It registers with the S-CSCF over the new IP-CAN using multiple registrations procedure. Depending on the UE A configuration, the discovery of the P-CSCF in the new IP-CAN can precede this. Based on the UE A and new IP-CAN capabilities, the UE A decides to use the same codec that was used over the old IP-CAN. The UE A reserves resources (e.g. QoS) in the new IP-CAN that will be needed for the signalling and transferred media, prior to sending the initial SIP INVITE request.\n3.\tSIP INVITE request (SC UE A to intermediate IM CN subsystem entities)- see example in table A.8.3-3\nUpon sending the initial SIP INVITE request, the UE A is ready to receive the RTP packets either over the new IP-CAN or the old IP-CAN. The RTP packets can arrive over the new IP-CAN prior to the SC UE are receiving the SIP 200 (OK) response for the initial SIP INVITE request.\nTable -3: SIP INVITE request (UE A to intermediate IM CN subsystem entities)\nINVITE tel:+1-237-555-3333 SIP/2.0\nVia: SIP/2.0/UDP [5555::aaa:bbb:ccc:fff]:1357;comp=sigcomp;branch=z9hG4bKnashds7\nMax-Forwards: 70\nRoute: sip:pcscf1.home1.net:7531;lr;comp=sigcomp>, <sip:orig@scscf1.home1.net;lr>\nP-Preferred-Identity: \"John Doe\" <sip:user1_public1@home1.net>\nP-Access-Network-Info: IEEE-802.11b\nPrivacy: none\nFrom: <sip:user1_public1@home1.net>; tag=171828\nTo: <tel:+1-237-555-2222>\nCall-ID: cb0s2sdfglkj490237\nCseq: 127 INVITE\nSupported: 100rel; precondition, gruu, 199\nRequire: sec-agree, replaces\nProxy-Require: sec-agree\nAccept-Contact: *;+g.3gpp.icsi-ref=\"urn%3Aurn-7%3A3gpp-service.ims.icsi.mmtel\"\nP-Preferred-Service: urn:urn-7:3gpp-service.ims.icsi.mmtel\nSecurity-Verify: ipsec-3gpp; q=0.1; alg=hmac-sha-1-96; spi=87654321; port1=7531\nContact: <sip:user1_public1@home1.net;gr= urn:uuid:f81d4fae-7dec-11d0-a765-00a0c91e6bf6>;+g.3gpp.icsi-ref=\"urn%3Aurn-7%3A3gpp-service.ims.icsi.mmtel\";+g.3gpp.ics=\"principal\";\nReplaces: me0s2sdfgjkl491777; to-tag=774321; from-tag=64727891\nAllow: INVITE, ACK, CANCEL, BYE, PRACK, UPDATE\nAccept: application/sdp, application/3gpp-ims+xml\nContent-Type: application/sdp\nContent-Length: (…)\n\nv=0\no=- 2987933615  IP6 5555::aaa:bbb:ccc:fff\ns=\nc=IN IP6 5555::aaa:bbb:ccc:fff\nt=0 0\nm=audio 3456 RTP/AVP 97 =tcap:1 RTP/AVPF\na=pcfg:1 t=1\nb=AS:25.4\na=curr:qos local sendrecv\na=curr:qos remote none\na=des:qos mandatory local sendrecv\na=des:qos none remote sendrecv\na=rtpmap:97 AMR\na=fmtp:97 mode-set=0,2,5,7; mode-change-period=2\na=rtpmap:96 telephone-event\na=maxptime:20\nm=message 7654 TCP/MSRP 98\na=accept-types: text/plain\n\nRequest-URI:\tContains the static STI.\n4.\tEvaluation of initial filter criteria\nThe S-CSCF evaluates initial filter criteria for the served SC user and as a result routes the SIP INVITE request towards the SCC AS.\n5.\tSIP INVITE request (intermediate IM CN subsystem entities to )\nThe SIP INVITE request is forwarded to the SCC AS as the result of the evaluation of iFC.\n6.\tRemote Leg Update\nThe SCC AS identifies the session to be transferred using the STI. The SCC AS performs the Remote Leg update by sending the SIP re-INVITE request towards the remote UE.\n7.\tSIP re-INVITE request ( to intermediate IM CN subsystem entities)- See example in table A.8.3-7\nThe SCC AS modifies the message in accordance with routeing B2BUA functionality, e.g. mapping of From, To, Cseq and Call-ID header fields from one side of the B2BUA to the other. In this example the SCC AS includes the contents of the Contact header field from the received SIP INVITE request. The SIP re-INVITE request contains the SDP offer that is identical to the SDP offer that the SCC AS received in the initial SIP INVITE request from the UE A (Step 3).\nTable -7: SIP re-INVITE request ( to intermediate IM CN subsystem entities)\nINVITE sip:user2_public1@home2.net;gr=urn:uuid:2ad8950e574-8d99-ad76cc7fc74 SIP/2.0\nVia: SIP/2.0/UDP sccas.home1.net; branch=z9hG4bK332b33.3;\nMax-Forwards: 67\nRoute: <scscf1.home1.net;lr >,<sip:scscf2.home2.net;lr>, <sip:pcscf2.visited2.net;lr>\nP-Asserted-Identity: \"John Doe\" <sip:user1_public1@home1.net>, <tel:+1-237-555-1111>\nP-Access-Network-Info: IEEE-802.11b\nPrivacy: none\nP-Charging-Vector: icid-value=\"AyretyU0dm+6O2IrT5tAFrbHLso=023551024\"\nP-Charging-Function-Addresses:\nFrom: <sip:user1_public1@home1.net>; tag=569812\nTo: <tel:+1-237-555-2222>, tag=4321\nCall-ID: dc14b1t10b3teghmlk5013237\nCseq: 111 INVITE\nContact:<sip:user1_public1@home1.net;gr=urn:uuid:f81d4fae-7dec-11d0-a765-00a0c91e6bf6>;+g.3gpp.icsi-ref=\"urn%3Aurn-7%3A3gpp-service.ims.icsi.mmtel\"\nAllow: INVITE, ACK, CANCEL, BYE, PRACK, UPDATE\nContent-Type: application/sdp\nContent-Length: (…)\n\nv=0\no=- 2987933615  IP6 5555::aaa:bbb:ccc:fff\ns=\nc=IN IP6 5555::aaa:bbb:ccc:fff\nt=0 0\nm=audio 3456 RTP/AVPF 97 96\nb=AS:25.4\na=curr:qos local sendrecv\na=curr:qos remote none\na=des:qos mandatory local sendrecv\na=des:qos none remote sendrecv\na=rtpmap:97 AMR\na=fmtp:97 mode-set=0,2,5,7; mode-change-period=2\na=rtpmap:96 telephone-event\na=maxptime:20\nm=message 7654 TCP/MSRP 98\na=accept-types: text/plain\n\n8.\tSIP re-INVITE request (Intermediate IM CN subsystem entities to UE B)\nThe intermediate IM CN subsystem entities forwards the SIP re-INVITE request to remote UE B.\n9-10:\tSIP 200 (OK) response (UE B to SCC AS via Intermediate IM CN subsystem entities)\nThe UE B generates the SIP 200 (OK) response to the SIP re-INVITE request and forwards it to the SCC AS.\n11-12:\tSIP ACK request ( to UE B via Intermediate IM CN subsystem entities)\nThe SCC AS generates the SIP ACK request to the SIP 200 (OK) response and forwards it to the remote UE B.\n13-14:\tSIP 200 (OK) response ( to UE A via Intermediate IM CN subsystem entities)\nThe SCC AS generates the SIP 200 (OK) response to the SIP INVITE request and forwards it to the SC UE A.\n15-16:\tSIP ACK request (SC UE A to SCC AS via Intermediate IM CN subsystem entities)\nThe SC UE A generates the SIP ACK request to the SIP 200 (OK) response and forwards it to the SCC AS\n17.\tMedia paths between UE A and UE B\nThe multimedia is using the new IP-CAN. Resources used for signalling on the old IP-CAN#1 and CS bearer are not released.\n18-19.\tSIP BYE request ( to SC UE A via intermediate IM CN subsystem entities)\nThe SCC AS terminates the replaced call leg- that was using the old IP-CAN#1, by sending a SIP BYE request towards the SC UE A.\n20-21.\tSIP 200 (OK) response (SC UE A to SCC AS via intermediate IM CN subsystem entities)\nUpon receiving the SIP BYE request over the old IP-CAN#1, the SC UE A sends a SIP 200 (OK) response over the old IP-CAN. Subsequently, the UE-1 relinquishes all resources pertaining to the old IP-CAN.\n22-23.\tSIP BYE request ( to interworking entities via intermediate IM CN subsystem entities)\nThe SCC AS terminates the replaced call leg, which was using the CS bearer, by sending a SIP BYE request.\n24, 27-28.\tCC DISCONNECT message (interworking entities to SC UE A)\nUpon receiving the CC DISCONNECT message, the SC UE A relinquishes all resources pertaining to the CS bearer.\n25-26.\tSIP 200 (OK) response (Interworking entities to  via intermediate IM CN subsystem entities)\n29.\tMedia paths between UE A and UE B\nThe multimedia session is using the new IP-CAN#2.\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                }
            ]
        },
        {
            "title": "A.9\tSignalling flows for media adding/deleting for access transfer",
            "description": "A.9.1\tIntroduction\nThe signalling flows for media adding/deleting demonstrate how the media of a multimedia session is added or deleted. The following signalling flow is included:\n-\tsubclause  shows an example when the non-realtime media of a multimedia session over the IP-CAN is removed.\nA.9.2\tRemote End Initiation case – Removing media from split CS and PS sessions\nAs a precondition the SC UE A has a CS call and IMS multimedia session with the remote UE after session transfer in a manner that more than one session are presented to UE B as one IMS session by the SCC AS.\nFigure A.9.2-1 illustrates the Remote End Initiation case, specifically focusing on the re-routing of media from split CS and PS sessions. The figure depicts the process of media transfer between the Remote End and the Network Elements, highlighting the role of the Network Elements in managing and controlling the flow of media. The figure showcases the interaction between the Remote End, the Network Elements, and the Transport Nodes, emphasizing the importance of efficient communication and coordination in maintaining smooth media transfer.\nFigure A.9.2-1: Remote End Initiation case – Removing media from split CS and PS sessions\nNOTE 1:\tFor clarity, the SIP 100 (Trying) responses are not shown in the signalling flow.\n1.\tSC UE A has an ongoing multimedia session with remote UE B\nThe call has been anchored at the SCC AS which is in the HPLMN of originating SC UE A.\nTable -1 shows an example of the SDP offer from SC UE A to remote UE B.\nNOTE 2:\tTo show how the media is removed, only the SDP offer is shown in this example.\nTable -1: SIP INVITE request (SC UE A to intermediate IM CN subsystem entities)\nINVITE tel:+1-237-555-2222 SIP/2.0\nVia:\nMax-Forwards:\nRoute:\nP-Asserted-Identity:\nP-Charging-Vector:\nP-Access-Network-Info:\nPrivacy:\nFrom:\nTo:\nCall-ID:\nCseq:\nSupported:\nRequire:\nProxy-Require:\nSecurity-Verify:\nContact:\nAllow:\nAccept:\nContent-Type:\nContent-Length: (…)\n\nv=0\no=- 2987933615  IP6 5555::aaa:bbb:ccc:ddd\ns=\nc=IN IP6 5555::aaa:bbb:ccc:ddd\nt=0 0\nm=message 7654 TCP/MSRP 98\na=accept-types:text/plain\n\n2.\tSIP re-INVITE request (UE B to intermediate IM CN subsystem entities)- See example in table .-2\nThe remote UE B decides to remove the non-realtime media from the multimedia session. It uses standard IMS procedures to remove one or more PS media from the session.\nTable A.9.2-2: SIP re-INVITE request (UE B to intermediate IM CN subsystem entities)\nINVITE < sip:user1_public1@home1.net;gr=urn:uuid:f81d4fae-7dec-11d0-a765-00a0c91e6bf6> SIP/2.0\nVia: SIP/2.0/UDP sccas1.home1.net;branch=z9hG4bKnas34r5\nMax-Forwards: 67\nRoute: <sip:scscf1.home1.net:lr>\nP-Asserted-Identity: <tel: +1-237-555-2222>\nP-Charging-Function-Addresses: ####\nP-Charging-Vector: ####\nP-Access-Network-Info:\nPrivacy: none\nFrom: <tel: +1-237-555-2222; gr=hdg7777ad7aflzig8sf7>;tag=171828\nTo: <tel:+1-237-555-1111>\nCall-ID: cb0s2sdfglkj490333\nCseq: 127 INVITE\nSupported: 100rel, precondition\nRequire: sec-agree\nProxy-Require: sec-agree\nSecurity-Verify: ipsec-3gpp; q=0.1; alg=hmac-sha-1-96; spi=87654321; port=7531\nContact: < sip:user2_public1@home2.net;gr=urn:uuid:2ad8950e-48a5-4a74-8d99-ad76cc7fc74>;+g.3gpp.icsi-ref=\"urn%3Aurn-7%3A3gpp-service.ims.icsi.mmtel\"\nAllow: INVITE, ACK, CANCEL, BYE, PRACK, UPDATE, REFER, MESSAGE\nAccept: application/sdp, application/3gpp-ims+xml\nContent-Type: application/sdp\nContent-Length: (…)\n\nv=0\no=- 2987933615  IP6 5555::aaa:bbb:ccc:ddd\ns=\nc=IN IP6 5555::aaa:bbb:ccc:ddd\nt=0 0\nm=audio 3456 RTP/AVP 97 96\nb=AS:25.4\na=curr:qos local sendrecv\na=curr:qos remote none\na=des:qos mandatory local sendrecv\na=des:qos none remote sendrecv\na=rtpmap:97 AMR\na=fmtp:97 mode-set=0,2,5,7; mode-change-period=2\na=rtpmap:96 telephone-event\na=maxptime:20\nm=message 0 TCP/MSRP 98\na=accept-types:text/plain\n\n3.\tSIP re-INVITE request (Intermediate IM CN subsystem entities to )\n4-5.\tSIP 200 (OK) response ( to UE B via Intermediate IM CN subsystem entities)\nThe SCC AS generates the SIP 200 (OK) response to the SIP re-INVITE request and forwards it to the remote UE B.\n6-7:\tSIP ACK request (UE B to SCC AS via Intermediate IM CN subsystem entities)\nThe UE B generates the SIP ACK request to the SIP 200 (OK) response and forwards it to the SCC AS.\n8-9:\tSIP BYE request ( to SC UE A via intermediate IM CN subsystem entities)\nThe SCC AS terminates the replaced call leg, which was using the IP-CAN, by sending a SIP BYE request to the UE A.\n10-11.\tSIP 200 (OK) response (SC UE A to SCC AS via intermediate IM CN subsystem entities)\nUpon receiving the SIP BYE request over the IP-CAN, the SC UE A sends a SIP 200 (OK) response over the IP-CAN to the SCC AS. Subsequently, the SC UE A relinquishes all resources pertaining to the IP-CAN.\n12.\tMedia paths between SC UE A and UE B\nFinally, the non-realtime media path over the IP-CAN is removed.\n",
            "summary": "",
            "tables": [],
            "figures_meta_data": [],
            "subsections": []
        },
        {
            "title": "A.10\tVoid",
            "description": "",
            "summary": "",
            "tables": [],
            "figures_meta_data": [],
            "subsections": []
        },
        {
            "title": "A.11\tVoid",
            "description": "",
            "summary": "",
            "tables": [],
            "figures_meta_data": [],
            "subsections": []
        },
        {
            "title": "A.12\tVoid",
            "description": "",
            "summary": "",
            "tables": [],
            "figures_meta_data": [],
            "subsections": []
        },
        {
            "title": "A.13\tVoid",
            "description": "",
            "summary": "",
            "tables": [],
            "figures_meta_data": [],
            "subsections": []
        },
        {
            "title": "A.14\tVoid",
            "description": "",
            "summary": "",
            "tables": [],
            "figures_meta_data": [],
            "subsections": []
        },
        {
            "title": "A.15\tSignalling flows for MSC server assisted mid-call feature",
            "description": "",
            "summary": "",
            "tables": [],
            "figures_meta_data": [],
            "subsections": [
                {
                    "title": "A.15.1\tIntroduction",
                    "description": "",
                    "summary": "",
                    "text_content": "The signalling flows in the subclause demonstrate how full duplex session on hold can be transferred together with active full duplex session when the MSC server assisted mid-call feature is used. The following signalling flows are included:\n-\tsubclause A.15.2 shows an example of CS to PS access transfer with the MSC server assisted mid-call feature.\n-\tsubclause A.15.3 shows an example of PS to CS access transfer with the MSC server assisted mid-call feature.\nsubclause A.15.4 shows an example of PS to CS access transfer with MSC server assisted mid-call feature with an incoming waiting call in alerting phase\nThe examples assume that:\n-\tthe SC UE, the MSC server enhanced for ICS and the SCC AS support the MSC server assisted mid-call feature;\n-\tthe SC UE does not use ICS procedures; and\n-\tthe SCC AS is allowed to use the MSC server assisted mid-call feature according to operator policy.\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "A.15.2\tCS to PS access transfer with MSC server assisted mid-call feature",
                    "description": "",
                    "summary": "",
                    "text_content": "In the example flow at the figure A.15.2-1, SC UE A has two ongoing sessions over CS bearer which are anchored at  The active session X is with UE B, the held session Y is with UE C. The session X and session Y are two party sessions. The session Y contains rejected video stream and accepted speech media component. When the SC UE connects to an IP-CAN, it decides to transfer the sessions over the IP-CAN.\nFigure A.15.2-1 illustrates the signalling flow for PS-CS Access Transfer, specifically focusing on the transition from CS to PS. The figure depicts the various stages of the process, including the initiation of the transfer request, the exchange of control and status messages between the UE and the network, and the successful completion of the transfer. Key components such as the PS, CS, and the signalling protocol are highlighted, providing a comprehensive overview of the process. This flow is crucial for ensuring a smooth and efficient handover between the PS and CS, maintaining seamless connectivity for the user.\nFigure A.15.2-1: Signalling flow for PS-CS Access Transfer: CS to PS\nNOTE 1:\tFor clarity, the SIP 100 (Trying) responses are not shown in the signalling flow.\n1.\tSC UE A has an ongoing active session X with remote UE B and a held session Y with remote UE C\nThe calls have been anchored at the SCC AS which is in the HPLMN of originating SC UE A.\n2.\tSC UE A connects to a new IP-CAN:\nThe SC UE A decides to transfer the sessions over the new IP-CAN. The UE A obtains an IP address that it will use for the signalling and media. It registers with the S-CSCF over the new IP-CAN using standard registration procedure and reserves resources in the new IP-CAN.\n3.\tSIP INVITE request transferring the active session X (SC UE A to intermediate IM CN subsystem entities) - see example in table A.15.2-3\nThe SC UE A sends an initial SIP INVITE request to request the new call replaces the existing call X.\nTable A.15.2-3: SIP INVITE request (UE A to intermediate IM CN subsystem entities)\nINVITE sip:domain.xfer@sccas.home1.net SIP/2.0\nVia: SIP/2.0/UDP [5555::aaa:bbb:ccc:ddd]:1357;comp=sigcomp;branch=z9hG4bKnashds7\nMax-Forwards: 70\nRoute: <sip:pcscf1.home1.net:7531;lr>, <sip:orig@scscf1.home1.net;lr>\nP-Preferred-Identity: \"John Doe\" <sip:user1_public1@home1.net>\nP-Access-Network-Info: IEEE-802.11b\nPrivacy: none\nFrom: <sip:user1_public1@home1.net>; tag=171828\nTo: <tel:+1-237-555-2222>\nCall-ID: cb0s2sdfglkj490237\nCseq: 127 INVITE\nSupported: 100rel, precondition, 199, gruu, norefersub\nRequire: sec-agree\nProxy-Require: sec-agree\nSecurity-Verify: ipsec-3gpp; q=0.1; alg=hmac-sha-1-96; spi=87654321; port1=7531\nContact: <sip:user1_public1@home1.net;gr=urn:uuid:f81d4fae-7dec-11d0-a765-00a0c91e6bf6> ;+g.3gpp.icsi-ref=\"urn%3Aurn-7%3A3gpp-service.ims.icsi.mmtel\";+g.3gpp.mid-call\nAllow: INVITE, ACK, CANCEL, BYE, PRACK, UPDATE\nAccept: application/sdp, application/3gpp-ims+xml, application/vnd.3gpp.mid-call+xml\nContent-Type: application/sdp\nContent-Length: (…)\n\nv=0\no=- 2987933615  IP6 5555::aaa:bbb:ccc:ddd\ns=\nc=IN IP6 5555::aaa:bbb:ccc:ddd\nt=0 0\nm=audio 3456 RTP/AVP 97 96\na=tcap:1 RTP/AVPF\na=pcfg:1 t=1\nb=AS:25.4\na=curr:qos local sendrecv\na=curr:qos remote none\na=des:qos mandatory local sendrecv\na=des:qos none remote sendrecv\na=rtpmap:97 AMR\na=fmtp:97 mode-set=0,2,5,7; mode-change-period=2\na=rtpmap:96 telephone-event\na=maxptime:20\n\nContact:\tcontains the g.3gpp.mid-call media feature tag as defined in annex C indicating the support for the MSC server assisted mid-call feature.\nAccept:\tcontains the MSC Server assisted mid-call feature MIME type.\n4.\tEvaluation of initial filter criteria\nThe S-CSCF evaluates initial filter criteria for the served SC user and as a result routes the SIP INVITE request towards the SCC AS.\n5.\tSIP INVITE request (intermediate IM CN subsystem entities to )\nThe SIP INVITE request is forwarded to the SCC AS as the result of the evaluation of iFC.\n6.\tRemote Leg Update\nThe SCC AS performs the Remote Leg update by sending the SIP re-INVITE request towards the Remote Leg.\n7.\tSIP re-INVITE request ( to intermediate IM CN subsystem entities)\nThe SCC AS modifies the message in accordance with routeing B2BUA functionality, e.g. mapping of From, To, Cseq and Call-ID header fields from one side of the B2BUA to the other. The SIP re-INVITE request contains the SDP offer that is identical to the SDP offer that the SCC AS received in the initial SIP INVITE request from the UE A (Step 3).\n8.\tSIP re-INVITE request (Intermediate IM CN subsystem entities to UE B)\nThe intermediate IM CN subsystem entities forward the SIP re-INVITE request to remote UE B.\n9-10:\tSIP 200 (OK) response (UE B to SCC AS via Intermediate IM CN subsystem entities)\nThe UE B generates the SIP 200 (OK) response to the SIP re-INVITE request and forwards it to the SCC AS.\n11-12:\tSIP ACK request ( to UE B via Intermediate IM CN subsystem entities)\nThe SCC AS generates the SIP ACK request to the SIP 200 (OK) response and forwards it to the remote UE B.\n13-14:\tSIP 200 (OK) response ( to UE A via Intermediate IM CN subsystem entities)\nThe SCC AS generates the SIP 200 (OK) response to the SIP INVITE request and forwards it to the SC UE A.\n15-16:\tSIP ACK request (SC UE A to SCC AS via Intermediate IM CN subsystem entities)\nThe SC UE A generates the SIP ACK request to the SIP 200 (OK) response and forwards it to the SCC AS\n17.\tMedia paths between UE A and UE B\nThe media path of session X is using the new IP-CAN but the media path of the session Y is still using the CS bearer.\n18-19.\tSIP BYE request ( to MSC Server via intermediate IM CN subsystem entities)\nThe SCC AS terminates the replaced call leg, which was using the CS bearer, by sending a SIP BYE request.\n20-22.\tCC DISCONNECT message (interworking entities to SC UE A)\nUpon receiving the CC DISCONNECT message, the SC UE A relinquishes all resources pertaining to the CS bearer.\nNOTE:\tSteps 20-22 are performed only if signalling over CS domain is possible after the CS-PS access transfer is completed; otherwise, the SC UE A and the network release the source access leg of session X locally, without any signalling between the SC UE and the network.\n23-24. SIP 200 (OK) response (MSC Server to SCC AS via intermediate IM CN subsystem entities)\nUpon receiving the SIP BYE request over the old IP-CAN, the MSC Server sends a SIP 200 (OK) response over the old IP-CAN to the SCC AS.\n25:\tSIP REFER request ( to Intermediate IM CN subsystem entities) -see example in table A.15.2-25\nThe SCC AS sends SIP REFER request towards UE A inside the dialog created by the message 13.\nTable A.15.2-25: SIP REFER request ( to IM CN subsystem entities)\nREFER sip:user1_public1@home1.net;gr=urn:uuid:f81d4fae-7dec-11d0-a765-00a0c91e6bf6 SIP/2.0\nVia: SIP/2.0/UDP sip:sccas1.home1.net;branch=z9hG4bk731b8a\nMax-Forwards: 70\nP-Charging-Vector: icid-value=\"AyretyU0dm+6O2IrT5tAFrbHLso=023551024\"; orig-ioi=home1.net\nFrom: <tel:+1-237-555-2222>; tag=aasdfgaag\nTo: <sip:user1_public1@home1.net>; tag=171828\nCall-ID: cb0s2sdfglkj490237\nCseq: 55998 REFER\nContent-Length: ...\nRoute: <sip:scscf1.home1.net;lr>, <sip:pcscf1.home1.net:7531;lr>\nContact: <sip:sccas1.home1.net;gr>\nRefer-Sub: false\nSupported: norefersub, gruu\nRefer-To: <sip:additional.session.xfer@sccas.home1.net?Target-Dialog=a84b4c76e66710%3Bremote-tag=654364735%3Blocal-tag=1928301774&Require=tdialog&From=tel:+1-237-555-1111&To=tel:+1-987-654-3210&Content-Type=application%2Fsdp&body=v%3D0%0D%0Ao%3D-%202987933623%202987933623%20IN%20IP6%205555::ggg:fff:aaa:bbb%0D%0As%3D-%0D%0Ac%3DIN%20IP6%205555::ggg:fff:aaa:bbb%0D%0At%3D0%200%0D%0Am%3Dvideo%200%20RTP%2FAVP%2098%0D%0Am%3Daudio%203456%20RTP%2FAVP%2097%2096%0D%0Ab%3DAS:25.4%0D%0Aa%3Drtpmap:97%20AMR%0D%0Aa%3Dfmtp:97%20mode-set%3D0%2C2%2C5%2C7%3B%20mode-change-period%3D2%0D%0Aa%3Dmaxptime:20%0D%0A>\nContent-Type: application/vnd.3gpp.mid-call+xml\n\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<mid-call/>\n\nRefer-To:\tcontains the additional transferred session SCC AS URI and the following URI header fields:\nTarget-Dialog:\tthe dialog identifier of the source access leg.\nRequire:\tcontaining \"tdialog\" option tag\nFrom:\tcontains the public user identity of the UE A\nTo:\tcontains the public user identity of the UE C\nContent-Type:\tcontaining \"application/sdp\" MIME type of the \"body\" URI header field\nbody:\tSDP describing the media used in the session\n26.\tSIP REFER request (intermediate IM CN subsystem entities to UE A)\nThe SIP REFER request is forwarded towards the UE A.\n27-28.\tSIP 200 (OK) response (UE A to SCC AS via intermediate IM CN subsystem entities)\nUpon receiving the SIP REFER request, the UE A sends a SIP 200 (OK) response.\n29.\tSIP INVITE request transferring the held session Y (SC UE A to intermediate IM CN subsystem entities) - see example in table A.15.2-29\nThe SC UE A sends an initial SIP INVITE request to request the new call replacing the existing call Y.\nTable A.15.2-29: SIP INVITE request (UE A to intermediate IM CN subsystem entities)\nINVITE sip:additional.session.xfer@sccas.home1.net SIP/2.0\nVia: SIP/2.0/UDP [5555::aaa:bbb:ccc:ddd]:1357;comp=sigcomp;branch=z9hG4bKnashds7\nMax-Forwards: 70\nRoute: <sip:pcscf1.home1.net:7531;lr>, <sip:orig@scscf1.home1.net;lr>\nP-Preferred-Identity: \"John Doe\" <sip:user1_public1@home1.net>\nP-Access-Network-Info: IEEE-802.11b\nPrivacy: none\nFrom: <tel:+1-237-555-1111>; tag=171828\nTo: <tel:+1-987-654-3210>\nCall-ID: asdfqweasas\nCseq: 127 INVITE\nSupported: 100rel, precondition, 199, gruu\nRequire: sec-agree\nProxy-Require: sec-agree\nSecurity-Verify: ipsec-3gpp; q=0.1; alg=hmac-sha-1-96; spi=87654321; port1=7531\nContact: <sip:user1_public1@home1.net;gr=urn:uuid:f81d4fae-7dec-11d0-a765-00a0c91e6bf6> ;+g.3gpp.icsi-ref=\"urn%3Aurn-7%3A3gpp-service.ims.icsi.mmtel\";+g.3gpp.mid-call\nAllow: INVITE, ACK, CANCEL, BYE, PRACK, UPDATE\nAccept: application/sdp, application/3gpp-ims+xml\nTarget-Dialog: a84b4c76e66710;remote-tag=654364735;local-tag=1928301774\nContent-Type: application/sdp\nContent-Length: (…)\n\nv=0\no=- 2987933615 2987933615 IN IP6 5555::aaa:bbb:ccc:ddd\ns=\nc=IN IP6 5555::aaa:bbb:ccc:ddd\nt=0 0\nm=video 0 RTP/AVP 98\nm=audio 3456 RTP/AVP 97 96\nb=AS:25.4\na=curr:qos loca\na=tcap:1 RTP/AVPF\na=pcfg:1 t=1l sendrecv\na=curr:qos remote none\na=des:qos mandatory local sendrecv\na=des:qos none remote sendrecv\na=rtpmap:97 AMR\na=fmtp:97 mode-set=0,2,5,7; mode-change-period=2\na=rtpmap:96 telephone-event\na=maxptime:20\na=sendonly\n\nRequest-URI:\tcontains the additional transferred session SCC AS URI as received in the Refer-To URI in the SIP REFER request.\nTarget-Dialog:\tcontains the dialog identifier as received in the Refer-To URI in the SIP REFER request.\nContact:\tcontains the g.3gpp.mid-call media feature tag as defined in annex C indicating the support for the MSC server assisted mid-call feature.\nSDP:\tAll the media are offered with the sendonly directionality.\n30.\tEvaluation of initial filter criteria\nThe S-CSCF evaluates initial filter criteria for the served SC user and as a result routes the SIP INVITE request towards the SCC AS.\n31.\tSIP INVITE request (intermediate IM CN subsystem entities to )\nThe SIP INVITE request is forwarded to the SCC AS as the result of the evaluation of iFC.\n32.\tRemote Leg Update\nThe SCC AS performs the Remote Leg update by sending the SIP re-INVITE request towards the Remote Leg.\n33.\tSIP re-INVITE request ( to intermediate IM CN subsystem entities)\nThe SCC AS modifies the message in accordance with routeing B2BUA functionality, e.g. mapping of From, To, Cseq and Call-ID header fields from one side of the B2BUA to the other. The SIP re-INVITE request contains the SDP offer that is identical to the SDP offer that the SCC AS received in the initial SIP INVITE request from the UE A.\n34.\tSIP re-INVITE request (Intermediate IM CN subsystem entities to UE C)\nThe intermediate IM CN subsystem entities forward the SIP re-INVITE request to remote UE C.\n35-36:\tSIP 200 (OK) response (UE C to SCC AS via Intermediate IM CN subsystem entities)\nThe UE C generates the SIP 200 (OK) response to the SIP re-INVITE request and forwards it to the SCC AS.\n37-38:\tSIP ACK request ( to UE C via Intermediate IM CN subsystem entities)\nThe SCC AS generates the SIP ACK request to the SIP 200 (OK) response and forwards it to the remote UE C.\n39:\tSIP 200 (OK) response ( to Intermediate IM CN subsystem entities)\nThe SCC AS generates the SIP 200 (OK) response to the SIP INVITE request and forwards it to the SC UE A.\n40:\tSIP 200 (OK) response (Intermediate IM CN subsystem entities to UE A)\nThe SCC AS generates the SIP 200 (OK) response to the SIP INVITE request and forwards it to the SC UE A.\n41-42:\tSIP ACK request (SC UE A to SCC AS via Intermediate IM CN subsystem entities)\nThe SC UE A generates the SIP ACK request to the SIP 200 (OK) response and forwards it to the SCC AS\n43.\tMedia paths between UE A and UE B\nThe media paths of session X and session Y are using the new IP-CAN but the the CS bearer is still not released.\n44-45.\tSIP BYE request ( to MSC Server via intermediate IM CN subsystem entities)\nThe SCC AS terminates the replaced call leg, which was using the CS bearer, by sending a SIP BYE request.\n46, 49-50.\tCC DISCONNECT message (interworking entities to SC UE A)\nUpon receiving the CC DISCONNECT message, the SC UE A relinquishes all resources pertaining to the CS bearer.\nNOTE:\tSteps 46-48 are performed only if signalling over CS domain is possible after the CS-PS access transfer is completed; otherwise, the SC UE and the network release the source access leg of session Y locally, without any signalling between the SC UE and the network.\n47-48.\tSIP 200 (OK) response (MSC Server to SCC AS via intermediate IM CN subsystem entities)\n51.\tMedia paths between UE A and UE B\nThe media paths of session X and session Y are using the new IP-CAN.\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "A.15.3\tPS to CS access transfer with MSC server assisted mid-call feature",
                    "description": "",
                    "summary": "",
                    "text_content": "In the example flow at the figure A.15.3-1, SC UE A has two ongoing sessions over PS bearer which are anchored at  When both sessions were established the SC UE and the SCC AS included the g.3gpp.mid-call media feature tag as specified in annex C into the Contact header fields. The active session X is with UE B, the held session Y is with UE C. The session X and session Y are two party sessions. The session Y contains a rejected video stream and an accepted speech media component. When the SC UE attaches to the CS domain, it decides to transfer the sessions over the CS bearer without using the ICS capability.\n\nFigure A.15.3-1 illustrates the signalling flow for PS-CS access transfer, depicting the process of transferring a user from a Public Switched Telephone Network (PSTN) to a Customer Premises Equipment (CPE) in a Carrier Services (CS) environment. The figure outlines the various stages, including the initial call setup, call processing, and handover between the PSTN and CS network. Key components such as the PSTN, CS, and CPE are highlighted, along with the signalling protocols used for call setup and management. The figure emphasizes the seamless transition and interoperability between the PSTN and CS networks, ensuring a smooth user experience.\nFigure A.15.3-1: Signalling flow for PS-CS access transfer: PS-CS\nNOTE 1:\tFor clarity, the SIP 100 (Trying) responses are not shown in the signalling flow.\n1.\tSC UE A is on an active session X with UE B and a held session Y with UE C:\nThere is an ongoing IP bearer between the SC UE and the remote UE B and another IP bearer between the SC UE and the remote UE C. Both sessions are anchored at\n2. SC UE A attaches to the CS domain\nThe SC UE attaches to the CS domain and decides to transfer the sessions over the CS bearer.\n3.\tCC SETUP messages\nTransaction Identifier:\t3\n4.\tSIP INVITE request transferring the active session X (MSC Server to Intermediate IM CN subsystem entities) -see example in table A.15.3-4\nUpon receiving the CC SETUP message the MSC Server sends a SIP INVITE request and associates the transaction identifier 3 with the SIP INVITE request.\nTable A.15.3-4: SIP INVITE request (MSC Server to intermediate IM CN subsystem entities)\nINVITE tel:+1-237-555-3333 SIP/2.0\nVia: SIP/2.0/UDP msc1.home1.net;branch=z9hG4bk731b87\nMax-Forwards: 70\nP-Asserted-Identity: <tel:+1-237-555-1111>\nP-Charging-Vector: icid-value=\"AyretyU0dm+6O2IrT5tAFrbHLso=023551024\"; orig-ioi=home1.net\nPrivacy: none\nFrom: <tel:+1-237-555-1111>;tag=171828\nTo: <tel:+1-237-555-3333>\nCall-ID: cb0s2sdfglkj490333\nCseq: 127 INVITE\nSupported: 100rel, precondition, gruu, 199, norefersub\nAccept-Contact: *;+g.3gpp.icsi-ref=\"urn%3Aurn-7%3A3gpp-service.ims.icsi.mmtel\"\nP-Asserted-Service: urn:urn-7:3gpp-service.ims.icsi.mmtel\nContact: <sip:user1_public1@home1.net;gr=urn:uuid:f81d4fae-7dec-11d0-a765-00a0c91e6bf6> ;+g.3gpp.icsi-ref=\"urn%3Aurn-7%3A3gpp-service.ims.icsi.mmtel\" ;+g.3gpp.ics=\"server\";+g.3gpp.mid-call\nAllow: INVITE, ACK, CANCEL, BYE, PRACK, UPDATE, REFER, MESSAGE\nContent-Type: application/sdp\nContent-Length: (…)\nAccept: application/sdp, application/3gpp-ims+xml, application/vnd.3gpp.mid-call+xml\nRecv-Info: g.3gpp.mid-call\n\nv=0\no=- 2987933615  IP6 5555::aaa:bbb:ccc:eee\ns=\nc=IN IP6 5555::aaa:bbb:ccc:eee\nt=0 0\nm=audio 3456 RTP/AVP 97 96\na=tcap:1 RTP/AVPF\na=pcfg:1 t=1\nb=AS:25.4\na=curr:qos local sendrecv\na=curr:qos remote none\na=des:qos mandatory local sendrecv\na=des:qos none remote sendrecv\na=rtpmap:97 AMR\na=fmtp:97 mode-set=0,2,5,7; mode-change-period=2\na=rtpmap:96 telephone-event\na=maxptime:20\n\nRequest-URI:\tcontains the IMRN, as obtained from CS networks signalling.\nSDP:\tThe SDP contains preconfigured set of codecs supported by the MSC Server.\nContact:\tcontains the g.3gpp.mid-call media feature tag as defined in annex C indicating the support for the MSC server assisted mid-call feature.\nAccept:\tcontains the MSC Server assisted mid-call feature MIME type.\n5.\tEvaluation of initial filter criteria\nThe S-CSCF evaluates initial filter criteria for the served SC user and as a result routes the SIP INVITE request towards the SCC AS.\n6.\tSIP INVITE request (Intermediate IM CN subsystem entities to )\n7.\tRemote Leg Update\nThe SCC AS performs the Remote Leg update by sending the SIP re-INVITE request towards the Remote Leg.\n8.\tSIP re-INVITE request ( to intermediate IM CN subsystem entities)\nThe SCC AS acting as a routing B2BUA generates a SIP re-INVITE request based upon the received SIP INVITE request and the information previously stored against this session and routes it towards UE B via the intermediate IM CN subsystem entities.\n9.\tSIP re-INVITE request (Intermediate IM CN subsystem entities to UE B)\nIntermediate IM CN subsystem entities forward the SIP re-INVITE request to remote UE B.\n10.\tSIP 200 (OK) response (UE B to intermediate IM CN subsystem entities)\nUpon receiving the SIP re-INVITE request containing the SDP offer, since the UE B has all resources available, it sends immediately the SIP 200 (OK) response to the SIP re-INVITE request that contains the SDP answer. The SDP answer indicates that the resources are available.\n11.\tSIP 200 (OK) response (intermediate IM CN subsystem entities to )\nThe intermediate IM CN subsystem entities forward the SIP 200 (OK) response to the SIP re-INVITE request to the SCC AS in the originating network.\n12-13.\tSIP ACK request ( to UE B via IM CN subsystem entities)\nThe SCC AS generates the SIP ACK request to the SIP 200 (OK) response, and forwards the SIP ACK request to the remote UE B.\n14-15.\tSIP 200 (OK) response ( to MSC Server via IM CN subsystem entities)\nThe SCC AS generates the SIP 200 (OK) response to the SIP INVITE request, and forwards the SIP 200 (OK) response towards the MSC Server.\n16.\tCC CONNECT message (MSC Server to SC UE A)\n17-18.\tSIP ACK request (MSC Server to SCC AS via IM CN subsystem entities)\nThe MSC Server generates the SIP ACK request to the SIP 200 (OK) response, and forwards it to the SCC AS.\n19.\tCC CONNECT ACKNOWLEDGEMENT message (SC UE A to  server)\n20.\tMedia paths between SC UE A and UE B:\nThe CS bearer is setup while the PS bearers are still existing.\n21-22:\tSIP BYE request ( to SC UE A via intermediate IM CN subsystem entities)\nThe SCC AS terminates the replaced call leg of the session X, which was using the old IP-CAN, by sending a SIP BYE request to the UE A.\n23-24.\tSIP 200 (OK) response (SC UE A to SCC AS via intermediate IM CN subsystem entities)\nUpon receiving the SIP BYE request over the old IP-CAN, the SC UE A sends a SIP 200 (OK) response over the old IP-CAN to the SCC AS. Subsequently, the SC UE A relinquishes all resources pertaining to the old IP-CAN.\nNOTE:\tSteps 22-23 are performed only if SC UE A is using Gm after the PS-CS access transfer is completed; otherwise, the SC UE A and the network release the source access leg of session X locally, without any signalling between the SC UE A and the network.\n25.\tMedia paths between SC UE A and UE B\nThe session X is transferred from PS bearer to CS bearer, but the session Y is still at the PS bearer.\n26.\tSIP REFER request ( to IM CN subsystem entities) -see example in table A.15.3-26\nThe SCC AS sends SIP REFER request towards MSC Server inside the dialog created by the the message 14.\nTable A.15.3-26: SIP REFER request ( to IM CN subsystem entities)\nREFER sip:user1_public1@home1.net;gr=urn:uuid:f81d4fae-7dec-11d0-a765-00a0c91e6bf6 SIP/2.0\nVia: SIP/2.0/UDP sip:sccas1.home1.net;branch=z9hG4bk731b8a\nMax-Forwards: 70\nP-Charging-Vector: icid-value=\"AyretyU0dm+6O2IrT5tAFrbHLso=023551024\"; orig-ioi=home1.net\nTo: <tel:+1-237-555-1111>;tag=171828\nFrom: <tel:+1-237-555-3333>;tag=sdfsdf\nCall-ID: cb0s2sdfglkj490333\nCseq: 55998 REFER\nContent-Length: 125\nRoute: <sip:scscf1.home1.net;lr>\nRefer-Sub: false\nSupported: norefersub, gruu\nContact: sip:sccas1.home1.net\nRefer-To: <additional.session.xfer@sccas.home1.net?Target-Dialog=ksdjfhwrklf%3Bremote-tag=676723565%3Blocal-tag=45418454&Require=tdialog&From=tel:+1-237-555-1111&To=tel:+1-987-654-3210&Content-Type=application%2Fsdp&body=v%3D0%0D%0Ao%3D-%202987933623%202987933623%20IN%20IP6%205555::ggg:fff:aaa:bbb%0D%0As%3D-%0D%0Ac%3DIN%20IP6%205555::ggg:fff:aaa:bbb%0D%0At%3D0%200%0D%0Am%3Dvideo%200%20RTP%2FAVP%2098%0D%0Am%3Daudio%203456%20RTP%2FAVP%2097%2096%0D%0Ab%3DAS:25.4%0D%0Aa%3Drtpmap:97%20AMR%0D%0Aa%3Dfmtp:97%20mode-set%3D0%2C2%2C5%2C7%3B%20mode-change-period%3D2%0D%0Aa%3Dmaxptime:20%0D%0A>\nContent-Type: application/vnd.3gpp.mid-call+xml\n\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<mid-call/>\n\nRefer-To:\tcontains the additional transferred session SCC AS URI and the following URI header fields:\nTarget-Dialog:\tthe dialog identifier of the source access leg.\nRequire:\tcontaining \"tdialog\" option tag\nFrom:\tcontains the public user identity of the UE A\nTo:\tcontains the public user identity of the UE C\nContent-Type:\tcontaining \"application/sdp\" MIME type of the \"body\" URI header field\nbody:\tSDP describing the media used in the session\n27.\tSIP REFER request (intermediate IM CN subsystem entities to MSC Server)\nThe SIP REFER request is forwarded towards the MSC Server.\n28-29.\tSIP 200 (OK) response (MSC Server to SCC AS via intermediate IM CN subsystem entities)\nUpon receiving the SIP REFER request, the MSC Server sends a SIP 200 (OK) response.\n30.\tSIP INVITE request for the held session Y (MSC Server to Intermediate IM CN subsystem entities) -see example in table A.15.3-30\nUpon receiving the SIP REFER request the MSC Server sends a SIP INVITE request and associates the transaction identifier 4 with the SIP INVITE request.\nTable A.15.3-30: SIP INVITE request (MSC Server to intermediate IM CN subsystem entities)\nINVITE\nsip:additional.session.xfer@sccas.home1.net SIP/2.0\nVia: SIP/2.0/UDP msc1.home1.net;branch=z9hG4bk731b87\nMax-Forwards: 70\nP-Asserted-Identity: <tel:+1-237-555-1111>\nP-Charging-Vector: icid-value=\"AyretyU0dm+6O2IrT5tAFrbHLso=023551024\"; orig-ioi=home1.net\nPrivacy: none\nFrom: <tel:+1-237-555-1111>;tag=171828\nTo: <tel:+1-987-654-3210>\nCall-ID: asdfgqwerq\nCseq: 1275 INVITE\nSupported: 100rel, precondition, 199, gruu\nAccept-Contact: *;+g.3gpp.icsi-ref=\"urn%3Aurn-7%3A3gpp-service.ims.icsi.mmtel\"\nP-Asserted-Service: urn:urn-7:3gpp-service.ims.icsi.mmtel\nContact: <sip:user1_public1@home1.net;gr=urn:uuid:f81d4fae-7dec-11d0-a765-00a0c91e6bf6> ;+g.3gpp.icsi-ref=\"urn%3Aurn-7%3A3gpp-service.ims.icsi.mmtel\" ;+g.3gpp.ics=\"server\";+g.3gpp.mid-call\nAllow: INVITE, ACK, CANCEL, BYE, PRACK, UPDATE, REFER, MESSAGE\nContent-Type: application/sdp\nTarget-Dialog: ksdjfhwrklf;remote-tag=676723565;local-tag=45418454\nRequire: tdialog\nContent-Length: (…)\n\nv=0\no=- 2987933615 2987933615 IN IP6 5555::aaa:bbb:ccc:eee\ns=\nc=IN IP6 5555::aaa:bbb:ccc:eee\nt=0 0\nm=video 0 RTP/AVP 98\nm=audio 3456 RTP/AVP 97 96\na=tcap:1 RTP/AVPF\na=pcfg:1 t=1\nb=AS:25.4\na=curr:qos local sendrecv\na=curr:qos remote none\na=des:qos mandatory local sendrecv\na=des:qos none remote sendrecv\na=rtpmap:97 AMR\na=fmtp:97 mode-set=0,2,5,7; mode-change-period=2\na=rtpmap:96 telephone-event\na=maxptime:20\na=sendonly\n\nRequest-URI:\tcontains the additional transferred session SCC AS URI as received in the Refer-To URI in the SIP REFER request.\nTarget-Dialog:\tcontains the dialog identifier as received in the Refer-To URI in the SIP REFER request.\nContact:\tcontains the g.3gpp.mid-call media feature tag as defined in annex C indicating the support for the MSC server assisted mid-call feature.\nSDP:\tThe SDP contains preconfigured set of codecs supported by the MSC Server. All the media are offered with the sendonly directionality.\n31.\tEvaluation of initial filter criteria\nThe S-CSCF evaluates initial filter criteria for the served SC user and as a result routes the SIP INVITE request towards the SCC AS.\n32.\tSIP INVITE request (Intermediate IM CN subsystem entities to )\n33.\tRemote Leg Update\nThe SCC AS performs the Remote Leg update by sending the SIP re-INVITE request towards the Remote Leg.\n34.\tSIP re-INVITE request ( to intermediate IM CN subsystem entities)\nThe SCC AS acting as a routing B2BUA generates a SIP INVITE request based upon the received SIP INVITE request and the information previously stored against this session and routes it towards UE C via the intermediate IM CN subsystem entities. The SIP re-INVITE request contains the SDP offer that is identical to the SDP offer that the SCC AS received in the initial SIP INVITE request from the UE A.\n35.\tSIP re-INVITE request (Intermediate IM CN subsystem entities to UE C)\nIntermediate IM CN subsystem entities forward the SIP re-INVITE request to remote UE C.\n36.\tSIP 200 (OK) response (UE C to intermediate IM CN subsystem entities)\nUpon receiving the SIP re-INVITE request containing the SDP offer, since the UE C has all resources available, it sends immediately the SIP 200 (OK) response to the SIP re-INVITE request that contains the SDP answer. The SDP answer indicates that the resources are available.\n37.\tSIP 200 (OK) response (intermediate IM CN subsystem entities to )\nThe intermediate IM CN subsystem entities forward the SIP 200 (OK) response to the SIP re-INVITE request to the SCC AS in the originating network.\n38-39.\tSIP ACK request ( to UE C via IM CN subsystem entities)\nThe SCC AS generates the SIP ACK request to the SIP 200 (OK) response, and forwards the SIP ACK request to the remote UE C.\n40.\tSIP 200 (OK) response ( to IM CN subsystem entities)\nThe SCC AS generates the SIP 200 (OK) response to the SIP INVITE request, and forwards the SIP 200 (OK) response towards the MSC Server.\n41.\tSIP 200 (OK) response (Intermediate IM CN subsystem entities to MSC Server)\nIntermediate IM CN subsystem entities forward the SIP 200 (OK) response to the SIP INVITE request to MSC Server.\n42-43.\tSIP ACK request (MSC Server to SCC AS via IM CN subsystem entities)\nThe MSC Server generates the SIP ACK request to the SIP 200 (OK) response, and forwards it to the SCC AS.\n44.\tMedia paths between SC UE A and UE B:\nThe CS bearer and PS bearers for both the sessions are established but there is still the original IP bearer for the held session Y.\n45-46:\tSIP BYE request ( to SC UE A via intermediate IM CN subsystem entities)\nThe SCC AS terminates the replaced call leg of the session Y, which was using the old IP-CAN, by sending a SIP BYE request to the UE A.\n47-48.\tSIP 200 (OK) response (SC UE A to SCC AS via intermediate IM CN subsystem entities)\nUpon receiving the SIP BYE request over the old IP-CAN, the SC UE A sends a SIP 200 (OK) response over the old IP-CAN to the SCC AS. Subsequently, the SC UE A relinquishes all resources pertaining to the old IP-CAN.\nNOTE:\tSteps 46-47 are performed only if the SC UE A uses Gm after the PS-CS access transfer is completed; otherwise, the SC UE A and the network release the source access leg locally, without any signalling between the SC UE A and the network.\n49.\tMedia paths between SC UE A and UE B\nBoth sessions X and Y are transferred from PS bearer to CS bearer.\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "A.15.4\tPS to CS access transfer with MSC server assisted mid-call feature with an incoming waiting call in alerting phase",
                    "description": "",
                    "summary": "",
                    "text_content": "In the example flow at the figure A.15.4-1, SC UE A has an ongoing sessions with speech media component and an incoming waiting session with speech media component which are anchored at  The incoming waiting call is in alerting phase. The ongoing session X is with UE B, the incoming waiting session Y is with UE C. The session X and session Y are two party sessions. Based upon measurement reports sent from the UE to E-UTRAN, the source E-UTRAN decides to trigger a PS to CS SRVCC procedure to CS access.\nFigure A.15.4-1 illustrates the signalling flow for PS to CS access transfer with MSC server-assisted mid-call feature, depicting an incoming waiting call in the alerting phase. The figure showcases the interaction between the PS (Public Switched Telephone Network) and CS (Circuit Switched) domains, highlighting the role of the MSC (Mobile Switching Center) server in facilitating the mid-call feature. The flow includes various signalling messages exchanged between the network elements, ensuring a smooth handover and call continuity.\nFigure A.15.4-1: Signalling flow for PS to CS access transfer with MSC server assisted mid-call feature with an incoming waiting call in alerting phase\nNOTE 1:\tFor clarity, the SIP 100 (Trying) responses are not shown in the signalling flow.\nNOTE 2:\tFor transferring the incoming waiting call in alerting phase, the feature of PS to CS SRVCC in alerting phase needs to be supported, but the MSC server assisted mid-call feature is not necessary.\n1.\tSC UE A is on an active session X with UE B and an incoming waiting session Y with UE C:\nThere is an ongoing PS bearer between the SC UE and the remote UE B and another PS bearer between the SC UE and the remote UE C. Both sessions are anchored at\n2.\tSC UE A sends the measurement reports to E-UTRAN\nUE A sends the measurement reports to E-UTRAN, and the source E-UTRAN decides to trigger an PS to CS SRVCC handover to CS access. The MSC server initiates the session transfer with the STN-SR, refer to 3GPP TS 23.237 [9].\n3-24.\tAccess transfer for the active session X\nThe procedure for transfering the active session X is the same as step 4 to step 15 and step 18 to step 24 described in subclause A.15.3.\n25.\tMedia paths between SC UE A and UE B\nThe session X is transferred from PS bearer to CS bearer, but the session Y is still at the PS bearer.\n26.\tSIP REFER request ( to IM CN subsystem entities) -see example in table A.15.4-26\nThe SCC AS sends SIP REFER request towards MSC server inside the dialog created by the the message 14, and it also contain the state-and-event-info XML body to indicate that the additional session is an incoming session in alerting phase.\nTable A.15.4-26: SIP REFER request ( to IM CN subsystem entities)\nREFER sip:user1_public1@home1.net;gr=urn:uuid:f81d4fae-7dec-11d0-a765-00a0c91e6bf6 SIP/2.0\nVia: SIP/2.0/UDP sip:sccas1.home1.net;branch=z9hG4bk731b8a\nMax-Forwards: 70\nP-Charging-Vector: icid-value=\"AyretyU0dm+6O2IrT5tAFrbHLso=023551024\"; orig-ioi=home1.net\nTo: <tel:+1-237-555-1111>;tag=171828\nFrom: <tel:+1-237-555-3333>;tag=sdfsdf\nCall-ID: cb0s2sdfglkj490333\nCseq: 55998 REFER\nContent-Length: 125\nRoute: <sip:scscf1.home1.net;lr>\nRefer-Sub: false\nSupported: norefersub, gruu\nContact: sip:sccas1.home1.net\nRefer-To: <additional.session.xfer@sccas.home1.net?Target-Dialog=ksdjfhwrklf%3Bremote-tag=676723565%3Blocal-tag=45418454&Require=tdialog&From=tel:+1-237-555-1111&To=tel:+1-987-654-3210&Content-Type=application%2Fsdp&body=v%3D0%0D%0Ao%3D-%202987933623%202987933623%20IN%20IP6%205555::ggg:fff:aaa:bbb%0D%0As%3D-%0D%0Ac%3DIN%20IP6%205555::ggg:fff:aaa:bbb%0D%0At%3D0%200%0D%0Aaudio%203456%20RTP%2FAVP%2097%2096%0D%0Ab%3DAS:25.4%0D%0Aa%3Drtpmap:97%20AMR%0D%0Aa%3Dfmtp:97%20mode-set%3D0%2C2%2C5%2C7%3B%20mode-change-period%3D2%0D%0Aa%3Dmaxptime:20%0D%0A>\nContent-Type: application/vnd.3gpp.state-and-event-info+xml\n\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<state-and-event-info>\n<state-info>early</state-info>\n<direction>receiver</direction>\n</state-and-event-info>\n\n\n\nRefer-To:\tcontains the additional transferred session SCC AS URI and the following URI header fields:\nTarget-Dialog:\tthe dialog identifier of the source access leg.\nRequire:\tcontaining \"tdialog\" option tag\nFrom:\tcontains the public user identity of the UE A\nTo:\tcontains the public user identity of the UE C\nContent-Type:\tcontaining \"application/sdp\" MIME type of the \"body\" URI header field\nbody:\tSDP describing the media used in the session.\nXML Schema:\tcontain the session state information that the additional session is an incoming session in alerting phase.\n27.\tSIP REFER request (intermediate IM CN subsystem entities to MSC server)\nThe SIP REFER request is forwarded towards the MSC server.\n28-29.\tSIP 200 (OK) response (MSC server to  via intermediate IM CN subsystem entities)\nUpon receiving the SIP REFER request, the MSC server sends a SIP 200 (OK) response.\n30.\tSIP INVITE request for the held session Y (MSC server to Intermediate IM CN subsystem entities) -see example in table A.15.4-30\nUpon receiving the SIP REFER request which contain the session state information to indicate that the additional session in an incoming session in alerting phase, the MSC server moves to Call Received state as described in the SIP REFER request but does not generate an in-band ring tone to the calling party, and sends a SIP INVITE request and associates the transaction identifier with the SIP INVITE request.\nTable A.15.4-30: SIP INVITE request (MSC server to intermediate IM CN subsystem entities)\nINVITE\nsip:additional.session.xfer@sccas.home1.net SIP/2.0\nVia: SIP/2.0/UDP msc1.home1.net;branch=z9hG4bk731b87\nMax-Forwards: 70\nP-Asserted-Identity: <tel:+1-237-555-1111>\nP-Charging-Vector: icid-value=\"AyretyU0dm+6O2IrT5tAFrbHLso=023551024\"; orig-ioi=home1.net\nPrivacy: none\nFrom: <tel:+1-237-555-1111>;tag=171828\nTo: <tel:+1-987-654-3210>\nCall-ID: asdfgqwerq\nCseq: 1275 INVITE\nSupported: 100rel, precondition, 199, gruu\nAccept-Contact: *;+g.3gpp.icsi-ref=\"urn%3Aurn-7%3A3gpp-service.ims.icsi.mmtel\"\nP-Asserted-Service: urn:urn-7:3gpp-service.ims.icsi.mmtel\nContact: <sip:msc1@home1.net> ;+g.3gpp.icsi-ref=\"urn%3Aurn-7%3A3gpp-service.ims.icsi.mmtel\" ;+g.3gpp.ics=\"server\";+g.3gpp.mid-call\nAllow: INVITE, ACK, CANCEL, BYE, PRACK, UPDATE, REFER, MESSAGE\nContent-Type: application/sdp\nTarget-Dialog: ksdjfhwrklf;remote-tag=676723565;local-tag=45418454\nRequire: tdialog\nContent-Length: (…)\n\nv=0\no=- 2987933615 2987933615 IN IP6 5555::aaa:bbb:ccc:eee\ns=\nc=IN IP6 5555::aaa:bbb:ccc:eee\nt=0 0\nm=audio 3456 RTP/AVP 97 96\na=tcap:1 RTP/AVPF\na=pcfg:1 t=1\nb=AS:25.4\na=curr:qos local sendrecv\na=curr:qos remote none\na=des:qos mandatory local sendrecv\na=des:qos none remote sendrecv\na=rtpmap:97 AMR\na=fmtp:97 mode-set=0,2,5,7; mode-change-period=2\na=rtpmap:96 telephone-event\na=maxptime:20\n\nRequest-URI:\tcontains the additional transferred session SCC AS URI as received in the Refer-To URI in the SIP REFER request.\nTarget-Dialog:\tcontains the dialog identifier as received in the Refer-To URI in the SIP REFER request.\nContact:\tcontains the g.3gpp.mid-call media feature tag as defined in annex C indicating the support for the MSC server assisted mid-call feature.\nSDP:\tThe SDP contains preconfigured set of codecs supported by the MSC server.\n31.\tEvaluation of initial filter criteria\nThe S-CSCF evaluates initial filter criteria for the served SC user and as a result routes the SIP INVITE request towards the SCC AS.\n32.\tSIP INVITE request (Intermediate IM CN subsystem entities to )\n33.\tRemote Leg Update\nThe SCC AS performs the Remote Leg update by sending the SIP re-INVITE request towards the Remote Leg.\n34.\tSIP UPDATE request ( to intermediate IM CN subsystem entities)\nThe SCC AS acting as a routing B2BUA generates a SIP UPDATE request based upon the received SIP INVITE request and the information previously stored against this session and routes it towards UE C via the intermediate IM CN subsystem entities. The SIP UPDATE request contains the SDP offer that is identical to the SDP offer that the SCC AS received in the initial SIP INVITE request from the UE A.\n35.\tSIP UPDATE request (Intermediate IM CN subsystem entities to UE C)\nIntermediate IM CN subsystem entities forward the SIP UPDATE request to remote UE C.\n36.\tSIP 200 (OK) response (UE C to intermediate IM CN subsystem entities)\nUpon receiving the SIP UPDATE request containing the SDP offer, since the UE C has all resources available, it sends immediately the SIP 200 (OK) response to the SIP UPDATE request that contains the SDP answer. The SDP answer indicates that the resources are available.\n37.\tSIP 200 (OK) response (intermediate IM CN subsystem entities to )\nThe intermediate IM CN subsystem entities forward the SIP 200 (OK) response to the SIP UPDATE request to the SCC AS in the originating network.\n38-39.\tSIP 183 (Session Progress) response ( to MSC server via IM CN subsystem entities)\nThe SCC AS sends a 183 (Session Progress) containing the SDP answer as received from the UE C. The SDP answer indicates that resources are available\n40. SIP PRACK request (MSC Server to Intermediate IM CN subsystem entities)\nThe MSC server acknowledges the receipt of the 183 Session Progress.\n41.\tSIP PRACK request (Intermediate IM CN subsystem entities to )\nThe intermediate IM CN subsystem forward the SIP PRACK request to the SCC AS\n42-43.\tSIP 200 (OK) response ( to MSC server via IM CN subsystem entities)\nThe SCC AS acknowledges the SIP PRACK request with a SIP 200 (OK) response to the MSC server.\n44.\tCC HOLD Message (SC UE to MSC server)\nThe SC UE A put the active session on hold.\n45.\tSIP re-INVITE request (MSC server to intermediate IM CN subsystem entities)\nUpon receiving the CS HOLD Message from the UE, MSC server sends a SIP re-INVITE request towords session X, which put session X on hold.The SDP in this SIP re-INVITE request is based on the last SDP offer/answer negotiation for the active session transfer form step 3 to 24, but for each media streams set the SDP attribute to \"sendonly\".\n46.\tSIP re-INVITE request (Intermediate IM CN subsystem entities to )\nThe SIP re-INVITE request is forwarded to the SCC AS.\n47-48.\tSIP re-INVITE request ( to UE B)\nsends SIP re-INVITE request to UE B, The SIP re-INVITE request contains the SDP offer that is identical to the SDP offer that the SCC AS received in the SIP re-INVITE request from the MSC server.\n49-50.\tSIP 200 (OK) response (UE B to SCC AS)\nUpon receiving the SIP re-INVITE request containing the SDP offer which contain the SDP attribute for each media streams to \"sendonly\", UE B response the SIP re-INVITE request with a SIP 200 (OK), which set the SDP attribute for each media streams to \"receonly\".\n51-52.\tSIP ACK request ( to UE B)\n53-54.\tSIP 200 (OK) response ( to MSC server via intermediate IM CN subsystem entities )\nThe SCC AS sends SIP 200 (OK) to indicate the succesful activity to the MSC server that put session X on hold.\n55.\tCC HOLD ACKNOWLEDGE Message (MSC server to SC UE A)\n56-57.\tSIP ACK request (MSC server to  via intermediate IM CN subsystem entities)\nMSC server acknowledges the SIP 200 (OK) received from\n58.\tCC CONNECT message from SC UE A to MSC server\nThe SC UE A accepts the call and sends CC CONNECT message.\n59.\tCC CONNECT ACKNOWLEDGE ( server to SC UE A)\n60.\tSIP INFO request (MSC server to intermediate IM CN subsystem entities) - see example in table A.15.4-60\nA.15.4-60: INFO ( to intermediate IM CN subsystem entities)\nINFO sip:sccas1.home1.net;gr SIP/2.0\nVia: SIP/2.0/UDP msc1.visit1.net;branch=z9hG4bk731b87\nMax-Forwards: 68\nRoute: <sip:scscf1.home1.net;lr>\nFrom: <tel:+1-237-555-1111>;tag=171828\nTo: <tel: +1-237-555-3333>;tag=171828\nCall-ID: cb03a0s09a2sdfglkj490334\nCseq: 130 INFO\nInfo-Package: g.3gpp.state-and-event\nContent-Disposition: Info-Package\nContent-Type: application/vnd.3gpp.state-and-event-info+xml\nContent-Length:\n\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<state-and-event-info>\n<event>call-accepted</event>\n</state-and-event-info>\n\n\nXML Schema:\tcontain the session state information indicating that the remote party has answered the call.\n\n61.\tSIP INFO request (Intermediate IM CN subsystem entities to )\nThe intermediate IM CN subsystem entities forward the SIP INFO request to the SCC AS. The SCC AS gets informed that the SC UE A has accepted the call.\n62.\tSIP 200 (OK) response ( to intermediate IM CN subsystem entities)\nThe SCC AS acknowledges the receipt of the SIP INFO request indicating that the SC UE A has accepted the call\n63.\tSIP 200 (OK) response (Intermediate IM CN subsystem entities to MSC server)\nThe SIP 200 (OK)response is forwarded to the MSC server.\n64.\tSIP 200 (OK) response ( to intermediate IM CN subsystem entities)\nThe SCC AS sends SIP 200 (OK) response to indicate to the far end that the SC UE A has accepted the call.\n65.\tSIP 200 (OK) response (Intermediate IM CN subsystem entities to far end)\nThe SIP 200 (OK) response is forwarded to the far end)\n66.\tSIP ACK request (far end to intermediate IM CN subsystem entities)\nThe far end UE acknowledges the SIP 200 (OK) response received from the SCC AS\n67.\tSIP ACK request (Intermediate IM CN subsystem entities to )\nThe SIP ACK request is forwarded to the SCC AS.\n68.\tSIP 200 (OK) response ( to intermediate IM CN subsystem entities)\nThe SCC AS sends SIP 200 (OK) response to indicate the succesfull access transfer to the MSC server.\n69.\tSIP 200 (OK) response (Intermdiate IM CN subsystem entities to far end)\nThe SIP 200 (OK) response is forwarded to the MSC server.\n70.\tSIP ACK request (MSC server to intermediate IM CN subsystem entities)\nMSC server acknowledges the SIP 200 (OK) response received from\n71.\tSIP ACK request (Intermediate IM CN subsystem entities to )\nThe SIP ACK request is forwarded to the SCC AS.\n72-73:\tSIP BYE request ( to SC UE A via intermediate IM CN subsystem entities)\nThe SCC AS terminates the replaced call leg of the session Y, which was using the old IP-CAN, by sending a SIP BYE request to the UE A.\n74-75.\tSIP 200 (OK) response (SC UE A to SCC AS via intermediate IM CN subsystem entities)\nUpon receiving the SIP BYE request over the old IP-CAN, the SC UE A sends a SIP 200 (OK) response over the old IP-CAN to the SCC AS. Subsequently, the SC UE A relinquishes all resources pertaining to the old IP-CAN.\nNOTE 3:\tSteps 73-74 are performed only if the SC UE A uses Gm after the PS-CS access transfer is completed; otherwise, the SC UE A and the network release the source access leg of session Y locally, without any signalling between the SC UE A and the network.\n76.\tMedia paths between SC UE A and UE B\nBoth sessions X and Y are transferred from PS bearer to CS bearer.\n\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                }
            ]
        },
        {
            "title": "A.16\tSignalling flows for PS to CS SRVCC session transfer for IMS emergency session",
            "description": "",
            "summary": "",
            "tables": [],
            "figures_meta_data": [],
            "subsections": [
                {
                    "title": "A.16.1\tIntroduction",
                    "description": "",
                    "summary": "",
                    "text_content": "The signalling flows for PS to CS SRVCC session transfer for IMS emergency session demonstrate how an IMS emergency session is transferred from PS network to CS network using PS to CS SRVCC procedure. The following signalling flow is included:\n-\tsubclause A.16.2 shows an example when a UE initiating an emergency session in IMS for the case that the UE is not in limited service mode ;and\n-\tsubclause A.16.3 shows an example when the emergency session need to transfer from PS to CS using PS to CS SRVCC procedure for the case that the UE is not in limited service mode.\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "A.16.2\tUE initiating an emergency session in IMS",
                    "description": "",
                    "summary": "",
                    "text_content": "The signalling flows shown in figure A.16.2-1 describes the UE initiating an IMS emergency session procedure for the case that the UE is not in limited service mode. The flow illustrates the anchoring of the session at the EATF.\nFigure A.16.2 -1 illustrates the signalling flow for a User Equipment (UE) initiating an emergency session in an IP Multimedia Subsystem (IMS) network. The figure depicts the various stages of the process, starting with the UE sending an emergency call request to the Home Location Register (HLR). The HLR then forwards the request to the Serving Gateway (S-GW), which in turn routes it to the Home Agent (HA). The HA then initiates the emergency call session, establishing a connection between the UE and the Emergency Call Service (ECS). The ECS then routes the call to the appropriate Emergency Call Centre (ECC), which handles the actual emergency call. The figure also shows the signalling flow for the call termination, where the ECC sends the call termination request to the ECS, which then terminates the call and sends a confirmation back to the UE.\nFigure A.16.2-1: Signalling flow for UE initiating an emergency session in IMS\nNOTE 1:\tFor clarity, the SIP 100 (Trying) responses are not shown in the signalling flow.\nNOTE 2:\tFor clarity, the SIP 180 (Ringing) response is not shown in the signalling flow.\nNOTE 3:\tFor clarity, the precondition mechanism is not shown in the signalling flow.\n1.\tSIP INVITE request (UE A to P-CSCF) see example in table A.16.2-2\nTable A.16.2-2: SIP INVITE request\nINVITE urn:service:sos.fire SIP/2.0\nVia: SIP/2.0/UDP [5555::aaa:bbb:ccc:ddd]:1357;comp=sigcomp;branch=z9hG4bKnashds7\nMax-Forwards: 70\nRoute: <sip:pcscf.visit1.net:7531;lr;comp=sigcomp>\nP-Preferred-Identity: <sip:user1_public1@home1.net>\nP-Access-Network-Info: 3GPP-UTRAN-FDD; utran-cell-id-3gpp=234151D0FCE11\nPrivacy: none\nFrom: <sip:user1_public1@home1.net>;tag=171828\nTo: <urn:service:sos.fire>\nCall-ID: cb0s2sdfglkj490333\nCseq: 127 INVITE\nSupported: 100rel, precondition, 199, gruu\nAccept: application/sdp,application/3gpp-ims+xml\nRequire: sec-agree\nProxy-Require: sec-agree\nSecurity-Verify: ipsec-3gpp; q=0.1; alg=hmac-sha-1-96; spi=87654321; port=7531\nContact: <sip:user1_public1@home1.net;gr=urn:uuid:f81d4fae-7dec-11d0-a765-00a0c91e6bf6>;+sip.instance=\"<urn:gsma:imei:90420156-025763-0>\"\nGeolocation: <sips:3sdefrhy2jj7@lis.atlanta.example.com>;inserted-by=\"sip:user1_public1@home1.net\";routing-allowed=\"yes\"\nAllow: INVITE, ACK, CANCEL, BYE, PRACK, UPDATE, REFER, MESSAGE\nContent-Type: application/sdp\nContent-Length: (…)\n\nv=0\no=- 2987933615  IP6 5555::aaa:bbb:ccc:ddd\ns=\nc= IN IP6 5555::aaa:bbb:ccc:ddd\nt=0 0\nm=audio 3400 RTP/AVP 98\na=curr: qos local none\na=curr: qos remote none\na=des: qos mandatory local sendrcv\na=des: qos mandatory remote sendrcv\na=inactive\n\nContact:\tcontains the \"sip.instance\" media feature tag as specified in IETF RFC 5626 [22] with a value  formed from an IMEI as defined in 3GPP TS 23.003 [12].\n2.\tSIP INVITE request (P-CSCF to E-CSCF) see example in table A.16.2-3\nTable A.16.2-3: SIP INVITE request\nINVITE urn:service:sos.fire SIP/2.0\nVia: SIP/2.0/UDP pcscf.visit1.net;branch=z9hG4bK34.1, SIP/2.0/UDP [5555::aaa:bbb:ccc:ddd]:1357;comp=sigcomp;branch=z9hG4bKnashds7\nMax-Forwards: 69\nRoute: <sip:ecscf.visit1.net;lr;>\nRecord-Route: <sip:pcscf.visit1.net;lr>\nP-Preferred-Identity:\nP-Access-Network-Info:\nPrivacy:\nFrom:\nTo:\nCall-ID:\nCseq:\nSupported:\nAccept:\nRequire:\nProxy-Require:\nAccept-Contact:\nP-Preferred-Service:\nSecurity-Verify:\nContact:\nGeolocation:\nAllow:\nContent-Type:\nContent-Length: (…)\n\nv=\no=\ns=\nc=\nt=\nm=\na=curr:\na=curr:\na=des:\na=des:\na=\n\n3.\tSIP INVITE request (E-CSCF to EATF) see example in table A.16.2-4\nTable A.16.2-4: SIP INVITE request\nINVITE urn:service:sos.fire SIP/2.0\nVia: SIP/2.0/UDP ecscf.visit1.net;branch=z9hG4bK87ly12.1, SIP/2.0/UDP pcscf.visit1.net;branch=z9hG4bK34.1, SIP/2.0/UDP [5555::aaa:bbb:ccc:ddd]:1357;comp=sigcomp;branch=z9hG4bKnashds7\nMax-Forwards: 68\nRoute: <sip:eatf1.visit1.net;lr>\nRecord-Route: <sip:ecscf.visit1.net;lr>,<sip:pcscf.visit1.net;lr>\nP-Preferred-Identity:\nP-Access-Network-Info:\nPrivacy:\nFrom:\nTo:\nCall-ID:\nCseq:\nSupported:\nAccept:\nRequire:\nProxy-Require:\nAccept-Contact:\nP-Preferred-Service:\nSecurity-Verify:\nContact:\nGeolocation: <sips:3sdefrhy2jj7@lis.atlanta.example.com>;inserted-by=\"sip:user1_public1@home1.net\";routing-allowed=\"yes\";used-for-routing\nAllow:\nContent-Type:\nContent-Length: (…)\n\nv=\no=\ns=\nc=\nt=\nm=\na=\na=\na=\na=\na=\n\n4.\tEATF anchors the emergency session\nThe EATF (acting as a routing B2BUA) anchors the emergency session, i.e. the EATF is inserted in the signalling path which invokes a 3pcc for enablement of Access Transfers\n5.\tSIP INVITE request (EATF to E-CSCF) see example in table A.16.2-5\nThe EATF acting as a routing B2BUA, generates a SIP INVITE request based upon the received SIP INVITE request and the information previously stored against this session and routes it towards PSAP via the intermediate IM CN subsystem entities.\nTable A.16.2-5: SIP INVITE request\nINVITE urn:service:sos.fire SIP/2.0\nVia: SIP/2.0/UDP eatf1.visit1.net;branch=z9hG4bKnas34r5\nMax-Forwards: 67\nRoute: <sip:ecscf.visit1.net:7531;lr;comp=sigcomp>\nRecord-Route: <sip:eatf1.visit1.net;lr>,<sip:ecscf.visit1.net;lr>,<sip:pcscf.visit1.net;lr>\nP-Preferred-Identity: <sip:user1_public1@home1.net>\nP-Access-Network-Info: 3GPP-UTRAN-FDD; utran-cell-id-3gpp=234151D0FCE11\nPrivacy: none\nFrom: <sip:user1_public1@home1.net>;tag=171828\nTo: <urn:service:sos.fire >\nCall-ID: cb0s2sdfglkj490333\nCseq: 127 INVITE\nSupported: 100rel, precondition, 199, gruu\nAccept: application/sdp,application/3gpp-ims+xml\nRequire: sec-agree\nProxy-Require: sec-agree\nSecurity-Verify: ipsec-3gpp; q=0.1; alg=hmac-sha-1-96; spi=87654321; port=7531\nContact: <sip:user1_public1@home1.net;gr=urn:uuid:f81d4fae-7dec-11d0-a76591e6bf6>;+sip.instance=\"<urn:gsma:imei:90420156-025763-0>\"\nGeolocation: <sips:3sdefrhy2jj7@lis.atlanta.example.com>; inserted-by=\" sip:user1_public1@home1.net\"；routing-allowed=\"yes\";used-for-routing\nAllow: INVITE, ACK, CANCEL, BYE, PRACK, UPDATE, REFER, MESSAGE\nContent-Type: application/sdp\nContent-Length: (…)\n\nv=0\no=- 2987933615  IP6 5555::aaa:bbb:ccc:ddd\ns=\nc= IN IP6 5555::aaa:bbb:ccc:ddd\nt=0 0\nm=audio 3400 RTP/AVP 98\na=curr: qos local none\na=curr: qos remote none\na=des: qos mandatory local sendrcv\na=des: qos mandatory remote sendrcv\na=inactive\n\n6.\tSIP INVITE request (E-CSCF to PSAP)\nE-CSCF routes the SIP INVITE request to the PSAP.\n7.\tSIP 200 (OK) response (PSAP to E-CSCF) see example in table A.16.2-6\nTable A.16.2-6: SIP 200 (OK) response\nSIP/2.0 200 OK\nVia: SIP/2.0/UDP ecscf.visit1.net;branch=z9hG4bKnas34r5\nMax-Forwards: 67\nRecord-Route: <sip:eatf1.visit1.net;lr>;<sip:ecscf.visit1.net;lr>,<sip:pcscf.visit1.net;lr>\nPrivacy: none\nFrom: <sip:user1_public1@home1.net>;tag=171828\nTo: < urn:service:sos.fire >;tag=232456\nCall-ID:\nCseq:\nRequire: 100rel, precondition, 199, gruu\nContact: <sip:mgcf.visit1.net>.\nAllow: INVITE, ACK, CANCEL, BYE, PRACK, UPDATE, REFER\nContent-Type: application/sdp\nContent-Length: (…)\n\nv=0\no=- 2987933615  IP6 5555::aaa:bbb:ccc:ddd\ns=\nc= IN IP6 5555::fff:eee:ccc:ddd\nt=0 0\nm=audio 3400 RTP/AVP 98\na=curr: qos local none\na=curr: qos remote none\na=des: qos mandatory local sendrcv\na=des: qos mandatory remote sendrcv\na=inactive\n\n8-9.\tSIP 200 (OK) response (E-CSCF to EATF and to E-CSCF)\nE-CSCF forwards the SIP 200 (OK) response.\n10-11.\tSIP 200 (OK) response (E-CSCF to UE A) see example in table A.16.2-7\nTable A.16.2-7: SIP 200 (OK) response\nSIP/2.0 200 OK\nVia:\nMax-Forwards: 65\nRecord-Route:\nPrivacy:\nFrom:\nTo:\nP-Asserted-Identity: tel:911;context=\"+1\"\nCall-ID:\nCseq:\nRequire:\nContact:\nAllow:\nContent-Type:\nContent-Length:\n\nv=\no=\ns=\nc=\nt=\nm=\na=\na=\na=\na=\na=\n\n12.\tSIP ACK request\nUE A responds to the SIP 200 (OK) response with a SIP ACK request.\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "A.16.3\tSession transfer for emergency session using PS to CS SRVCC procedure: PS-CS",
                    "description": "",
                    "summary": "",
                    "text_content": "In the example in figure A.16.3-1, UE A (which has a valid subscription, is authenticated and authorized for PS service and is normal attached to the network) has an ongoing emergency session with a PSAP using a PS bearer which is anchored at EATF. Based upon measurement reports sent from the UE to E-UTRAN, the source E-UTRAN decides to trigger a PS to CS SRVCC handover to CS access.\nFigure A. 16.3 illustrates the signalling flow for an emergency session transfer using PS to CS SRVCC procedure, showcasing the various stages and messages exchanged between the network elements involved in the process. The figure highlights the importance of efficient session management in maintaining seamless communication during critical situations.\nFigure A.16.3-1 Signalling flow for emergency session transfer using PS to CS SRVCC procedure\nNOTE 1:\tFor clarity, the SIP 100 (Trying) responses are not shown in the signalling flow.\n1.\tUE A is on an active emergency session with a PSAP\nThere is an ongoing IP bearer between the UE A and the remote end PSAP. The call is achored at EATF.\n2.\tSC UE A attaches to the CS domain\nUE A sends the measurement reports to E-UTRAN, and the source E-UTRAN decides to trigger an PS to CS SRVCC handover to CS access. The MSC Server initiates the session transfer with the E-STN-SR, refer to 3GPP TS 23.237 [9].\n3.\tSIP INVITE request (Interworking entities to Intermediate IM CN subsystem entities) -see example in table A.16.3-2\nTable A.16.3-2: SIP INVITE request (interworking entities to intermediate IM CN subsystem entities)\nINVITE tel: +1-237-555-3333 SIP/2.0\nVia: SIP/2.0/UDP msc1.visit1.net;branch=z9hG4bk731b87\nMax-Forwards: 70\nRoute: <sip:icscf1.visit1.net;lr>\nP-Asserted-Identity: <tel:+1-237-555-1111>\nP-Charging-Vector: ####\nPrivacy: none\nFrom: <tel:+1-237-555-1111>;tag=171828\nTo: <tel: +1-237-555-3333>\nCall-ID: cb03a0s09a2sdfglkj490334\nCseq: 127 INVITE\nSupported: 100rel, precondition, gruu\nAccept-Contact: *;+g.3gpp.icsi-ref=\"urn%3Aurn-7%3A3gpp-service.ims.icsi.mmtel\"\nP-Asserted-Service: urn:urn-7:3gpp-service.ims.icsi.mmtel\nContact: <sip:msc1.home1.net>;+sip.instance=\"<urn:gsma:imei:90420156-025763-0>\";+g.3gpp.icsi-ref=\"urn%3Aurn-7%3A3gpp-service.ims.icsi.mmtel\"\nAllow: INVITE, ACK, CANCEL, BYE, PRACK, UPDATE, REFER\nContent-Type: application/sdp\nContent-Length: (…)\n\nv=0\no=- 2987933615  IP6 5555::aaa:bbb:ccc:eee\ns=\nc=IN IP6 5555::aaa:bbb:ccc:eee\nt=0 0\nm=audio 3456 RTP/AVP 97 96\na=tcap:1 RTP/AVPF\na=pcfg:1 t=1\nb=AS:25.4\na=curr:qos local sendrecv\na=curr:qos remote none\na=des:qos mandatory local sendrecv\na=des:qos none remote sendrecv\na=rtpmap:97 AMR\na=fmtp:97 mode-set=0,2,5,7; mode-change-period=2\na=rtpmap:96 telephone-event\na=maxptime:20\n\nRequest-URI:\tcontains the E-STN-SR, as routed to the EATF\nSDP:\tThe SDP contains preconfigured set of codecs supported by the MGW.\nContact:\tcontains the \"sip.instance\" media feature tag as specified in IETF RFC 5626 [22] with a value formed from an IMEI as defined in 3GPP TS 23.003 [12].\n4.\tSIP INVITE request\nThe I-CSCF routes the SIP INVITE request directly to the EATF by using the procedure defined in 3GPP TS 23.228 [15] for PSI based application Server termination.\nNOTE 2:\tThe use of indirect routing for PSI based Application Server Termination as described in 3GPP TS 23.228 [15] in subclause 5.7.6 cannot be used for routing the SIP INVITE request to the EATF.\n5.\tRemote Leg Update\nThe EATF based on the content of the \"gr\" parameter in the Contact header field correlates the SIP INVITE request to the local and remote call legs of the existing session between the UE A and the remote end. The EATF performs the Remote Leg update by sending the SIP re-INVITE request towards the Remote Leg.\n6.\tSIP re-INVITE request (EATF to intermediate IM CN subsystem entities) –see example in table A.16.3-3\nTheEATF acting as a routing B2BUA generates a SIP INVITE request based upon the received SIP INVITE request and the information previously stored against this session and routes it towards PSAP via the intermediate IM CN subsystem entities.\nTable A.16.3-3: SIP re-INVITE request (EATF to intermediate IM CN subsystem entities)\nINVITE #### SIP/2.0\nVia: SIP/2.0/UDP eatf1.visit1.net;branch=z9hG4bKnas34r5\nMax-Forwards: 68\nRoute: <sip:ecscf.visit1.net:lr>\nP-Asserted-Identity: <tel: +1-237-555-1111>\nP-Charging-Function-Addresses: ####\nP-Charging-Vector:####\nPrivacy: none\nFrom: <sip:user1_public1@home1.net>;tag=171828\nTo: <urn:service:sos.fire>;tag=232456\nCall-ID: cb0s2sdfglkj490333\nCseq:\nContact: <sip:user1_public1@home1.net;gr=urn:uuid:f81d4fae-7dec-11d0-a765-00a0c91e6bf6>;+sip.instance=\"<urn:gsma:imei:90420156-025763-0>\"\nAllow:\nContent-Type: Content-Length:\n\nv=0\no=- 2987933615  IP6 5555::aaa:bbb:ccc:eee\ns=\nc=IN IP6 5555::aaa:bbb:ccc:eee\nt=0 0\nm=audio 3456 RTP/AVPF 97 96\nb=AS:25.4\na=curr:qos local sendrecv\na=curr:qos remote none\na=des:qos mandatory local sendrecv\na=des:qos none remote sendrecv\na=rtpmap:97 AMR\na=fmtp:97 mode-set=0,2,5,7; mode-change-period=2\na=rtpmap:96 telephone-event\na=maxptime:20\nm=message 0 TCP/MSRP 98\na=accept-types:text/plain\n\n7.\tSIP re-INVITE request (E-CSCF to PSAP)\nE-CSCF forward the SIP re-INVITE request to the PSAP.\n8.\tSIP 200 (OK) response (PSAP to E-CSCF)\nUpon receiving the SIP re-INVITE request containing the SDP offer, since the PSAP has all resources available, it sends immediately the SIP 200 (OK) response to the SIP re-INVITE request that contains the SDP answer. The SDP answer indicates that the resources are available.\n9.\tSIP 200 (OK) response (E-CSCF to EATF)\nE-CSCF forward the SIP 200 (OK) response to the SIP re-INVITE request to the EATF in the originating network.\n10-11.\tSIP ACK request (EATF to PSAP via IM CN subsystem entities)\nThe EATF generates the SIP ACK request to the SIP 200 (OK) response, and forwards the SIP ACK request to the PSAP.\n12-13.\tSIP 200 (OK) response (EATF to interworking entities via IM CN subsystem entities)\nThe E- SCC AS generates the SIP 200 (OK) response to the SIP INVITE request, and forwards the SIP 200 (OK) response to the interworking entities.\n14-15.\tSIP ACK request (interworking entities to EATF via IM CN subsystem entities)\nThe interworking entities generate the SIP ACK request to the SIP 200 (OK) response, and forward the SIP ACK request to the EATF.\n16-18:\tSIP BYE request (EATF to UE A via intermediate IM CN subsystem entities)\nThe EATF terminates the source access leg, which was using the old IP-CAN, by sending a SIP BYE request to the UE A.\n19-21.\tSIP 200 (OK) response (UE A to E- SCC AS via intermediate IM CN subsystem entities)\nUpon receiving the SIP BYE request over the old IP-CAN, the UE A sends a SIP 200 (OK) response over the old IP-CAN to the EATF. Subsequently, the UE A relinquishes all resources pertaining to the old IP-CAN.\nNOTE:\tSteps 18-19 are performed only if the UE A uses Gm after the PS-CS access transfer is completed; otherwise, the UE A and the network release the source access leg locally, without any signalling between the UE A and the network.\n22a.\tCS bearer establishment (interworking entities to UE A)\n22b.\tIP bearer establishment (interworking entities to PSAP)\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                }
            ]
        },
        {
            "title": "A.17\tSignalling flows for the PS to CS SRVCC for calls in alerting phase",
            "description": "",
            "summary": "",
            "tables": [],
            "figures_meta_data": [],
            "subsections": [
                {
                    "title": "A.17.1\tIntroduction",
                    "description": "",
                    "summary": "",
                    "text_content": "The signalling flows in the subclause demonstrate how sessions in alerting phase can be transferred from PS to CS using PS to CS SRVCC procedures. The following signalling flows are included:\n-\tsubclause A.17.2 shows an example of PS to CS SRVCC transfer where the incoming call is in alerting phase.\n-\tsubclause A.17.3 shows an example of PS to CS SRVCC transfer where the outgoing call is in alerting phase.\n-\tsubclause A.17.4 shows an example of PS to CS SRVCC transfer where the incoming call is in alerting phase, but the user answers the call in the PS domain prior to the completion of the network handover procedures and the UE retuning to the CS domain.\n-\tsubclause A.17.5 shows an example of PS to CS SRVCC transfer where the incoming call is in alerting phase, but the user answers the call in the PS domain prior to the completion of the network handover procedures but the handover to CS does not succeed.\n-\tsubclause A.17.6 shows an example of PS to CS SRVCC transfer where the outgoing call is in alerting phase and the UE has received several forked responses prior to the initiation of access transfer.\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "A.17.2\tSession transfer for incoming call is in alerting phase using PS to CS SRVCC procedure: PS to CS",
                    "description": "",
                    "summary": "",
                    "text_content": "In the example flow at the figure A.17.2-1, SC UE A has an incoming session with speech media component which is anchored at  The session is in alerting phase. Based upon measurement reports sent from the UE to E-UTRAN, the source E-UTRAN decides to trigger a PS to CS SRVCC handover to CS access.\n\nFigure A.17.2-1 illustrates the process of PS-CS Single Radio Voice Call Continuity (SRVCC) in the alerting phase, where an incoming call is managed. The figure depicts the call flow from the PSTN (Public Switched Telephone Network) to the PS-CS (Public Switched Telephone Network - PS-CS) and then to the SRVCC (Single Radio Voice Call Continuity). The figure highlights the role of the SRVCC in managing the call during network outages or maintenance, ensuring uninterrupted communication. Key components include the PSTN, PS-CS, and SRVCC, with the alerting phase marked by the incoming call.\nFigure A.17.2-1: PS-CS SRVCC, incoming call in alerting phase\nNOTE 1:\tFor clarity, the SIP 100 (Trying) responses are not shown in the signalling flow.\n1.\tSC UE A has received an incoming call and is in\nThe incoming call has been anchored at the SCC AS of SC UE A. Both ends have reserved the resources and SC UE A has sent a SIP 180 (Ringing) response.\n2.\tSC UE A attaches to the CS domain\nUE A sends the measurement reports to E-UTRAN, and the source E-UTRAN decides to trigger an PS to CS SRVCC handover to CS access. The MSC server initiates the session transfer with the STN-SR, refer to 3GPP TS 23.237 [9]. The UE continues ringing.\n3.\tSIP INVITE request transferring the session (MSC server to intermediate IM CN subsystem entities) - see example in table A.17.2-1\nThe MSC server sends an initial SIP INVITE request with STN-SR.\nTable A.17.2-1: SIP INVITE request (MSC server to intermediate IM CN subsystem entities)\nINVITE tel: +1-237-555-3333 SIP/2.0\nVia: SIP/2.0/UDP msc1.visit1.net;branch=z9hG4bk731b87\nMax-Forwards: 70\nRoute: <sip:icscf1.visit1.net;lr>\nP-Asserted-Identity: <tel:+1-237-555-1111>\nP-Charging-Vector: icid-value=\"AyretyU0dm+6O2IrT5tAFrbHLso=023551024\";orig-ioi=visit1.net\nPrivacy: none\nFrom: <tel:+1-237-555-1111>;tag=171828\nTo: <tel:+1-237-555-3333>\nCall-ID: cb03a0s09a2sdfglkj490334\nCseq: 127 INVITE\nSupported: 100rel, precondition, gruu, norefersub\nAccept-Contact: *;+g.3gpp.icsi-ref=\"urn%3Aurn-7%3A3gpp-service.ims.icsi.mmtel\"\nP-Asserted-Service: urn:urn-7:3gpp-service.ims.icsi.mmtel\nContact: <sip:msc1.visit1.net:1357>;+g.3gpp.icsi-ref=\"urn%3Aurn-7%3A3gpp-service.ims.icsi.mmtel\"; +g.3gpp.srvcc-alerting\nAllow: INVITE, ACK, CANCEL, BYE, PRACK, UPDATE, REFER\nRecv-Info: g.3gpp.state-and-event\nContent-Type: application/sdp\nContent-Length: (…)\nP-Early-Media: supported\n\nv=0\no=- 2987933615  IP6 5555::aaa:bbb:ccc:eee\ns=\nc=IN IP6 5555::aaa:bbb:ccc:eee\nt=0 0\nm=audio 3456 RTP/AVP 97 96\na=tcap:1 RTP/AVPF\na=pcfg:1 t=1\nb=AS:25.4\na=curr:qos local sendrecv\na=curr:qos remote none\na=des:qos mandatory local sendrecv\na=des:qos none remote sendrecv\na=rtpmap:97 AMR\na=fmtp:97 mode-set=0,2,5,7; mode-change-period=2\na=rtpmap:96 telephone-event\na=maxptime:20\n\nRequest-URI:\tcontains the STN-SR.\nSDP:\tThe SDP contains set of codecs supported by the MGW.\nContact:\tcontains the +g.3gpp.srvcc-alerting feature tag.\n4.\tSIP INVITE request transferring the session (intermediate IM CN subsystem entities to )\nThe SIP INVITE request is routed towards the SCC AS, based on filter criteria in S-CSCF.\n4a.\tRemote Leg Update\nThe SCC AS correlates SIP INVITE request to the local and remote call legs of the existing session between the UE A and the remote end. The SCC AS performs the Remote Leg update by sending the SIP sending a SIP UPDATE request towards the Remote Leg.\n5.\tSIP UPDATE request ( to intermediate IM CN subsystem entities)\nThe SCC AS acting as a B2BUA generates a SIP UPDATE request based upon the received SIP INVITE request and the information previously stored against this session .\n6.\tSIP UPDATE request (Intermediate IM CN subsystem entities to UE B)\nThe intermediate IM CN subsystem entities forward the SIP UPDATE request to remote UE B.\n7.\tSIP 200 (OK) response (far end UE to Intermediate IM CN subsystem entities)\nUpon receiving the SIP UPDATE request containing the SDP offer for the leg to the MSC, the far end sends a SIP 200 (OK) response.\n8.\tSIP 200 (OK) response (Intermediate IM CN subsystem entities to )\nThe intermediate IM CN subsystem entities forward the SIP 200 (OK) response to the SCC AS.\n9.\tSIP 183 (Session Progress) response ( to Intermediate IM CN subsystem entities)\nThe SCC AS sends a SIP 183 (Session Progress) response containing the SDP answer as received from the far end UE B. The SDP answer indicates that resources are available. The SIP 183 (Session Progress) response will contain a Recv-Info header field set to g.3gpp.state-and-event.\n10.\tSIP 183 (Session Progress) response (Intermediate IM CN subsystem entities to MSC server)\nThe intermediate IM CN subsystem entities forward the 183 (Session Progress) response to the MSC server.\n11.\tSIP PRACK request (MSC server to Intermediate IM CN subsystem entities)\nThe MSC acknowledges the receipt of the SIP 183 (Session Progress) response.\n12.\tSIP PRACK request (Intermediate IM CN subsystem entities to )\nThe intermediate IM CN subsystem forward the SIP PRACK request to the SCC AS.\n13.\tSIP 200 (OK) response ( to Intermediate IM CN subsystem entities)\nThe SCC AS acknowledges the SIP PRACK request.\n14.\tSIP 200 (OK) response (Intermediate IM CN subsystem entities to MSC server)\nThe intermediate IM CN subsystem entities forward the SIP 200 (OK) response to the MSC server.\n15.\tSIP INFO request ( to intermediate IM CN subsystem entities) - see example in table A.17.2-2\nTable A.17.2-2: INFO request ( to intermediate IM CN subsystem entities)\nINFO sip:msc1.visit1.net:1357 SIP/2.0\nVia SIP/2.0/UDP sip:sccas1.home1.net;branch=z9hG4bK332b23.1\nMax-Forwards: 68\nRoute: <sip:scscf1.home1.net;lr>\nFrom: <tel: +1-237-555-3333>;tag=314159\nTo: <tel:+1-237-555-1111>;tag=171828\nCall-ID: cb03a0s09a2sdfglkj490334\nCseq: 129 INFO\nInfo-Package: g.3gpp.state-and-event\nContent-Disposition: Info-Package\nContent-Type: application/vnd.3gpp.state-and-event-info+xml\nContent-Length:\n\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<state-and-event-info>\n<state-info>early</state-info>\n<direction>receiver</direction>\n</state-and-event-info>\n\n16.\tSIP INFO request (Intermediate IM CN subsystem entities to MSC server)\nThe intermediate IM CN subsystem entities forward the SIP INFO request to the MSC server. The MSC server is aware that the call that is transferred is in terminating alerting phase.\n17.\tSIP 200 (OK) response (MSC server to Intermediate IM CN subsystem entities)\nThe MSC server acknowledges the receipt of the SIP INFO request.\n18.\tSIP 200 (OK) response (Intermediate IM CN subsystem entities to )\nThe intermediate IM CN subsystem entities forward the SIP 200 (OK) response to the SCC AS.\n19.\tMSC goes in Call received state\nThe MSC enters Call received state due to the information received in the SIP INFO request.\n20a.\tUser answers the call\n20.\tCC CONNECT message from SC UE A to MSC server\nThe SC UE A accepts the call and sends CC CONNECT message.\n21\tCC CONNECT ACKNOWLEDGE message ( server to SC UE A)\n22.\tSIP INFO request (MSC server to intermediate IM CN subsystem entities) - see example in table A.17.2-3\nTable A.17.2-3: INFO request (MSC server to intermediate IM CN subsystem entities)\nINFO sip:sccas1.home1.net;gr SIP/2.0\nVia: SIP/2.0/UDP msc1.visit1.net;branch=z9hG4bk731b87\nMax-Forwards: 68\nRoute: <sip:scscf1.home1.net;lr>\nFrom: <tel:+1-237-555-1111>;tag=171828\nTo: <tel: +1-237-555-3333>;tag=171828\nCall-ID: cb03a0s09a2sdfglkj490334\nCseq: 130 INFO\nInfo-Package: g.3gpp.state-and-event\nContent-Disposition: Info-Package\nContent-Type: application/vnd.3gpp.state-and-event-info+xml\nContent-Length:\n\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<state-and-event-info>\n<event>call-accepted</event>\n</state-and-event-info>\n\n23.\tSIP INFO request (Intermediate IM CN subsystem entities to )\nThe intermediate IM CN subsystem entities forward the SIP INFO request to the SCC AS. The SCC AS gets informed that the SC UE A has accepted the call.\n24\tSIP 200 (OK)  response ( to intermediate IM CN subsystem entities)\nThe SCC AS acknowledges the receipt of the SIP INFO request indicating that the SC UE A has accepted the call\n25\tSIP 200 (OK) response (Intermediate IM CN subsystem entities to MSC server)\nThe SIP 200 (OK) response is forwarded to the MSC server.\n26\tSIP 200 (OK) response ( to intermediate IM CN subsystem entities)\nThe SCC AS sends a SIP 200 (OK) response to indicate to the far end that the SC UE A has accepted the call.\n27\tSIP 200 (OK) response (Intermediate IM CN subsystem entities to far end)\nThe SIP 200 (OK) response is forwarded to the far end)\n28\tSIP ACK request (far end to intermediate IM CN subsystem entities)\nThe far end UE acknowledges the SIP 200 (OK) response received from\n29\tSIP ACK request (Intermediate IM CN subsystem entities to )\nThe SIP ACK request is forwarded to the SCC AS.\n30\tSIP 200 (OK)  response ( to intermediate IM CN subsystem entities)\nThe SCC AS sends a SIP 200 (OK) response to indicate the successful access transfer to the MSC server.\n31\tSIP 200 (OK) response (Intermediate IM CN subsystem entities to far end)\nThe SIP 200 (OK) response is forwarded to the MSC server.\n32\tSIP ACK request (MSC server to intermediate IM CN subsystem entities)\nMSC server acknowledges the SIP 200 (OK) response received from\n33.\tSIP ACK request (Intermediate IM CN subsystem entities to SCC AS)\nThe SIP ACK request is forwarded to the SCC AS.\n34-41\tSIP CANCEL Processing\nThe SCC AS cancels the SIP dialog towards the SC UE\nNOTE:\tSteps 36-41 are performed only if the SC UE A usesGm after the PS-CS access transfer in alerting phase is completed; otherwise, the SC UE A and the network release the source access leg locally, without any signalling between the SC UE A and the network\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "A.17.3\tSession transfer for originating call is in alerting phase using PS to CS SRVCC procedure: PS to CS",
                    "description": "",
                    "summary": "",
                    "text_content": "In the example flow at the figure A.17.3-1, SC UE A has invited for an originating session with speech media component which is anchored at  The session is in alerting phase. Based upon measurement reports sent from the UE to E-UTRAN, the source E-UTRAN decides to trigger a PS to CS SRVCC handover to CS access.\n\nFigure A.17.3-1 illustrates the process of PS-CS Single Radio Voice Call Continuity (SRVCC) in the alerting phase, where an originating call is transferred from the Public Switched Telephone Network (PSTN) to the Cellular Network (CS). The figure depicts the call flow, including the PSTN, SRVCC, and CS components, highlighting the seamless transition and signaling between the two networks. The diagram emphasizes the importance of this process in ensuring uninterrupted communication during network alerts or disruptions.\nFigure A.17.3-1: PS-CS SRVCC, originating call in alerting phase\nNOTE 1:\tFor clarity, the SIP 100 (Trying) responses are not shown in the signalling flow.\n1.\tSC UE A has setup an outgoing call\nThe outgoing call has been anchored at the SCC AS of SC UE A. Both ends have reserved the resources and SC UE A has received a SIP 180 (Ringing) response.\n1a.\tThe ringing tone is played to the originating user\nThe ringing tone is played by the originating UE as the locally generated ringing tone.\n2.\tSC UE A attaches to the CS domain\nUE A sends the measurement reports to E-UTRAN, and the source E-UTRAN decides to trigger an PS to CS SRVCC handover to CS access. The MSC server initiates the session transfer with the STN-SR, refer to 3GPP TS 23.237 [9]. The ringing tone is kept playing to the originating user.\n3.\tSIP INVITE request transferring the session (MSC server to intermediate IM CN subsystem entities) - see example in table A.17.3-1\nThe MSC server sends an initial SIP INVITE request with STN-SR.\nTable A.17.3-1: SIP INVITE request (MSC server to intermediate IM CN subsystem entities)\nINVITE tel: +1-237-555-3333 SIP/2.0\nVia: SIP/2.0/UDP msc1.visit1.net;branch=z9hG4bk731b87\nMax-Forwards: 70\nRoute: <sip:icscf1.visit1.net;lr>\nP-Asserted-Identity: <tel:+1-237-555-1111>\nP-Charging-Vector: icid-value=\"AyretyU0dm+6O2IrT5tAFrbHLso=023551024\";orig-ioi=visit1.net\nPrivacy: none\nFrom: <tel:+1-237-555-1111>;tag=171828\nTo: <tel:+1-237-555-3333>\nCall-ID: cb03a0s09a2sdfglkj490334\nCseq: 127 INVITE\nSupported: 100rel, precondition, gruu, norefersub\nAccept-Contact: *;+g.3gpp.icsi-ref=\"urn%3Aurn-7%3A3gpp-service.ims.icsi.mmtel\"\nP-Asserted-Service: urn:urn-7:3gpp-service.ims.icsi.mmtel\nContact: <sip: msc1.visit1.net:1357>;+g.3gpp.icsi-ref=\"urn%3Aurn-7%3A3gpp-service.ims.icsi.mmtel\"; +g.3gpp.srvcc-alerting\nAllow: INVITE, ACK, CANCEL, BYE, PRACK, UPDATE, REFER\nRecv-Info: g.3gpp.state-and-event\nContent-Type: application/sdp\nContent-Length: (…)\nP-Early-Media: supported\n\nv=0\no=- 2987933615  IP6 5555::aaa:bbb:ccc:eee\ns=\nc=IN IP6 5555::aaa:bbb:ccc:eee\nt=0 0\nm=audio 3456 RTP/AVP 97 96\na=tcap:1 RTP/AVPF\na=pcfg:1 t=1\nb=AS:25.4\na=curr:qos local sendrecv\na=curr:qos remote none\na=des:qos mandatory local sendrecv\na=des:qos none remote sendrecv\na=rtpmap:97 AMR\na=fmtp:97 mode-set=0,2,5,7; mode-change-period=2\na=rtpmap:96 telephone-event\na=maxptime:20\n\nRequest-URI:\tcontains the STN-SR.\nSDP:\tThe SDP contains set of codecs supported by the MGW.\nContact:\tcontains the +g.3gpp.srvcc-alerting feature tag.\n4.\tSIP INVITE request transferring the session (intermediate IM CN subsystem entities to )\nThe SIP INVITE is routed towards the SCC AS, based on filter criteria in S-CSCF.\n4a.\tRemote Leg Update\nThe SCC AS correlates SIP INVITE request to the local and remote call legs of the existing session between the UE A and the remote end. The SCC AS performs the Remote Leg update by sending SIP UPDATE request towards the remote UE B.\n5.\tSIP UPDATE request ( to intermediate IM CN subsystem entities)\nThe SCC AS acting as a B2BUA generates a SIP UPDATE request based upon the received SIP INVITE request and the information previously stored against this session.\n6.\tSIP UPDATE request (Intermediate IM CN subsystem entities to UE B)\nThe intermediate IM CN subsystem entities forward the SIP UPDATE request to remote UE B.\n7.\tSIP 200 (OK) response (UE B to Intermediate IM CN subsystem entities)\nUpon receiving the SIP UPDATE request containing the SDP offer for the leg to the MSC, the far end sends a SIP 200 (OK) response.\n8.\tSIP 200 (OK) response (Intermediate IM CN subsystem entities to )\nThe intermediate IM CN subsystem entities forward the SIP 200 (OK) response to the SCC AS.\n9.\tSIP 183 (Session Progress) response ( to Intermediate IM CN subsystem entities)\nThe SCC AS sends a SIP 183 (Session Progress) response containing the SDP answer as received from the far end UE. The SDP answer indicates that resources are available\n10.\tSIP 183 (Session Progress) response (Intermediate IM CN subsystem entities to MSC server)\nThe intermediate IM CN subsystem entities forward the 183 (Session Progress) response to the MSC server.\n11.\tSIP PRACK request (MSC server to Intermediate IM CN subsystem entities)\nThe MSC acknowledges the receipt of the SIP 183 (Session Progress) response.\n12.\tSIP PRACK request (Intermediate IM CN subsystem entities to )\nThe intermediate IM CN subsystem entities forward the SIP PRACK request to the SCC AS.\n13.\tSIP 200 (OK) response ( to Intermediate IM CN subsystem entities)\nThe SCC AS acknowledges the SIP PRACK request.\n14.\tSIP 200 (OK) response (Intermediate IM CN subsystem entities to MSC server)\nThe intermediate IM CN subsystem entities forward the SIP 200 (OK) response to the MSC server.\n15.\tSIP INFO request ( to intermediate IM CN subsystem entities) - see example in table A.17.3-2\nTable A.17.3-2: INFO request ( to intermediate IM CN subsystem entities)\nINFO sip: msc1.visit1.net:1357 SIP/2.0\nVia SIP/2.0/UDP sip:sccas1.home1.net;branch=z9hG4bK332b23.1\nMax-Forwards: 68\nRoute: <sip:scscf1.home1.net;lr>\nFrom: <tel: +1-237-555-3333>;tag=314159\nTo: <tel:+1-237-555-1111>;tag=171828\nCall-ID: cb03a0s09a2sdfglkj490334\nCseq: 129 INFO\nInfo-Package: g.3gpp.state-and-event\nContent-Disposition: Info-Package\nContent-Type: application/vnd.3gpp.state-and-event-info+xml\nContent-Length:\n\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<state-and-event-info>\n<state-info>early</state-info>\n<direction>initiator</direction>\n</state-and-event-info>\n\n16.\tSIP INFO request (Intermediate IM CN subsystem entities to MSC server)\nThe intermediate IM CN subsystem entities forward the SIP INFO request to the MSC server. The MSC server is aware that the call that is transferred is in originating alerting phase.\n17.\tSIP 200 (OK) response (MSC server to Intermediate IM CN subsystem entities)\nThe MSC Server acknowledges the receipt of the SIP INFO request.\n18.\tSIP 200 (OK) response (Intermediate IM CN subsystem entities to )\nThe intermediate IM CN subsystem entities forward the SIP 200 (OK) response to the SCC AS.\n19.\tMSC goes in Call delivered state\nThe MSC enters Call delivered state due to the information received in the SIP INFO request.\n20.\tSIP 200 (OK) response (UE B to intermediate IM CN subsystem entities)\nThe UE B accepts the call and sends a SIP 200 (OK) response.\n21.\tSIP 200 (OK) response (Intermediate IM CN subsystem entities to )\nThe SIP 200 (OK) response is forwarded to\n22\tSIP 200 (OK) response ( to intermediate IM CN subsystem entities)\nThe SCC AS sends the SIP 200 (OK) response to indicate that the terminating UE B has accepted the call.\n23\tSIP 200 (OK) response (Intermediate IM CN subsystem entities to MSC server)\nThe SIP 200 (OK) response is forwarded to the MSC server.\n24\tCC CONNECT message (MSC server to SC UE A)\nThe MSC server indicates to the SC UA A that the far end has accepted the call.\n24a\tStop the ringing tone\nThe UE stops playing the locally generated ringing tone.\n25\tSIP ACK request (MSC server to intermediate IM CN subsystem entities)\nThe MSC server acknowledges the SIP 200 (OK) response received from\n26.\tSIP ACK request (Intermediate IM CN subsystem entities to )\nThe SIP ACK request is forwarded to the SCC AS.\n27\tSIP ACK request ( to intermediate IM CN subsystem entities)\nThe SCC AS acknowledges the SIP 200 (OK) response received towards far end.\n28\tCC CONNECTACKNOWLEDGE ( server to SC UE A)\nSC UE A acknowledges the CS CONNECT message.\n29\tSIP ACK request (Intermediate IM CN subsystem entities to far end)\nThe SIP ACK request is forwarded towards the far end.\n30 – 33 The SCC AS releases the original source leg towards the SC UE A\nThe SCC AS sends a SIP 404 (Not Found) response in order to release to original source dialog towards the SC UE A\nNOTE:\tSteps 31-32 are performed only if the SC UE A uses Gm the PS-CS access transfer in alerting phase is completed; otherwise, the SC UE A and the network release the source access leg locally, without any signalling between the SC UE A and the network\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "A.17.4\tUser answers in PS domain; Handover to CS successful",
                    "description": "",
                    "summary": "",
                    "text_content": "In the example flow in figure A.17.4-1, SC UE A has an incoming session with speech media component which is anchored at  The session is in alerting phase. Based upon measurement reports sent from the UE to E-UTRAN, the source E-UTRAN decides to trigger a PS to CS SRVCC handover to CS access. However the user answers the call in E-UTRAN and the SC UE sends a SIP 200 (OK) response to the SCC AS. It this scenario the handover to CS is successful.\nFigure A.17.4-1 illustrates a SIP 200 (OK) response from a Session Initiation Protocol (SIP) User Equipment (UE) to the Session Control Function (SCC) Application Server (AS), indicating a successful handover from the Serving Call Control (SCC) to the Serving Call Session Control Function (CS). The figure depicts the communication between the UE and the SCC AS, highlighting the successful completion of the handover process. Key components include the UE, SCC AS, and the underlying network infrastructure, which supports the smooth transition of the call session between the Serving Call Control and Serving Call Session Control Functions.\nFigure A.17.4-1: SIP 200 (OK) response from SC UE received by SCC AS: Handover to CS successful\nNOTE 1:\tFor clarity, the SIP 100 (Trying) responses are not shown in the signalling flow.\n1\tSC UE A has received an incoming call and is in\nThe incoming call has been anchored at the SCC AS of SC UE A. Both ends have reserved the resources and SC UE A has sent a SIP 180 (Ringing) response.\n2-5\tMSC server sends session transfer request.  sends SIP UPDATE to update the remote end\nThese steps are identical to steps 3-6 in subclause A.17.2.\n6\tUser answers the call when the UE is still in the source E-UTRAN access\n7-8\tSIP 200 (OK) response (SC UE to intermediate IM CN subsystem entities to )\nThe SCC AS performs no additional actions on receipt of the SIP 200 (OK) i.e. the SCC AS does not confirm reception of the SIP 200 (OK) response with SIP ACK request and performs no actions on dialogs with UE B and with MSC server.\n9-21\tContinuation of procedure for PS to CS SRVCC in Alerting Phase\nThese steps are identical to steps 7-19 in subclause A.17.2.\n22\tUE receives H/O command from source E-UTRAN\n23\tUE retunes to 3G\n24\tCC CONNECT message from SC UE A to MSC server\nThe SC UE A sends the CC CONNECT message as it did not receive a SIP ACK to the SIP 200 (OK) sent in step 7.\n25-37\tContinuation of procedure for PS to CS SRVCC in Alerting Phase\nThese steps are identical to steps 21-33 in subclause A.17.2.\n38-39\tSIP ACK request ( to intermediate IM CN subsystem entities to SC UE)\nThe SCC AS confirms reception of the SIP 200 (OK) response received in message 8.\n40\tRelease original SIP dialog\nThe SCC AS releases the SIP dialog towards the SC UE.\nNOTE:\tStep 39 is performed only if the SC UE A uses Gm after the PS-CS access transfer in alerting phase is completed; otherwise, the SC UE A and the network release the source access leg locally, without any signalling between the SC UE A and the network\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "A.17.5\tUser answers in PS domain; Handover to CS not successful",
                    "description": "",
                    "summary": "",
                    "text_content": "In the example flow in figure A.17.5-1, SC UE A has an incoming session with speech media component which is anchored at  The session is in alerting phase. Based upon measurement reports sent from the UE to E-UTRAN, the source E-UTRAN decides to trigger a PS to CS SRVCC handover to CS access. However the user answers the call in E-UTRAN and  the SC UE sends a SIP 200 (OK) response to the SCC AS. In this scenario the handover to CS is not successful because the source E-UTRAN decides to terminate the handover procedure before its completion. In a similar scenario, the UE can also encounter a failure after it receives the handover command but does not successfully transition to 3GPP UTRAN/GERAN.\nFigure A.17.5-1 illustrates a SIP 200 (OK) response from a Session Initiation Protocol (SIP) User Equipment (UE) to the Session Control (SCC) Application Server (AS), indicating that the handover process has been cancelled. The figure depicts the communication between the UE and the SCC AS, highlighting the role of the Home Location Register (HLR) and the Visitor Location Register (VLR) in managing the handover. The diagram emphasizes the importance of accurate handover management in maintaining seamless communication and avoiding dropped calls or service disruptions.\nFigure A.17.5-1: SIP 200 (OK) response from SC UE received by SCC AS: Handover cancelled\nNOTE 1:\tFor clarity, the SIP 100 (Trying) responses are not shown in the signalling flow.\n1\tSC UE A has received an incoming call and is in\nThe incoming call has been anchored at the SCC AS of SC UE A. Both ends have reserved the resources and SC UE A has sent a SIP 180 (Ringing) response.\n2-18\tContinuation of procedure for PS to CS SRVCC in Alerting Phase\nThese steps are identical to steps 3-19 in subclause A.17.2.\n19\tUser answers the call when the UE is still in the source E-UTRAN access\n20-21\tSIP 200 (OK) response (SC UE to intermediate IM CN subsystem entities to )\nThe SCC AS performs no additional actions on receipt of the SIP 200 (OK) response i.e. the SCC AS does not confirm reception of the SIP 200 (OK) response with SIP ACK request and performs no actions on dialogs with UE B and with MSC server.\n9-21\tContinuation of procedure for PS to CS SRVCC in Alerting Phase\nThese steps are identical to steps 7-19 in subclause A.17.2.\n22\tSC UE A receives PS to CS SRVCC Handover Cancelled command from source E-UTRAN\n23-26\tSIP UPDATE request (SC UE to intermediate IM CN subsystem entities to  to UE B)\nSC UE A sends a SIP UPDATE request with a SDP offer, including the media characteristics as used in the existing dialog and with a Reason header field containing protocol \"SIP\" and reason parameter \"cause\" with value \"487\" as specified in IETF RFC 3326 [57] and with reason-text set to \"handover cancelled\".\nNOTE 2:\tIn the case that the handover command was received but the UE did not transition to the CS domain, the UE sends the SIP UPDATE request as described above, but with reason-text set to \"failure to transition to CS domain\".\n27-30\tSIP 200 (OK) response to the SIP UPDATE request (UE B to SCC AS to intermediate IM CN subsystem entities to SC UE A)\n31-32\tSIP 480 (Temporary Unavailable) response ( to intermediate IM CN subsystem entities to MSC server)\nThe SCC AS responds to the MSC server with a SIP 480 (Temporary Unavailable) response which indicates that it is unable to go ahead with the session transfer.\n33-36\tContinuation of procedure for PS to CS SRVCC in Alerting Phase\nThese steps are identical to steps 25-28 in subclause A.17.2. The SCC AS sends SIP 200 (OK) response to UE B as final confirmation to the original session and UE B sends SIP ACK request back to the SCC AS.\n37-38\tSIP ACK request ( to intermediate IM CN subsystem entities to SC UE)\nThe SCC AS confirms reception of the SIP 200 (OK) response received in message 21.\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "A.17.6\tSession transfer for originating call is in alerting phase with forked responses using PS to CS SRVCC procedure: PS to CS",
                    "description": "",
                    "summary": "",
                    "text_content": "In the example flow at the figure A.17.6-1, SC UE A initiates an originating session with speech media component which has received several forked responses. The call is anchored at  and in alerting phase. Based upon measurement reports sent from the UE to E-UTRAN, the source E-UTRAN decides to trigger a PS to CS SRVCC handover to CS access.\nFigure A.17 illustrates the process of PS-CS Single Radio Voice Call Continuity (SRVCC) in an alerting phase, where an originating call is detected and a forked response is initiated. The figure depicts the network's ability to handle situations where a call is disrupted, such as a dropped call or a network failure, by diverting the call to a backup path. This ensures that the call remains active and the user is not disconnected. The figure shows the network's response to an alert, with the PS-CS system diverting the call to a secondary path, ensuring seamless communication and maintaining the user's experience.\nFigure A.17.6-1: PS-CS SRVCC, originating call in alerting phase with forked responses\nNOTE 1:\tFor clarity, the SIP 100 (Trying) responses are not shown in the signalling flow.\n1-4.\tSIP INVITE request (SC UE A to Terminating network Intermediate IM CN subsystem entities) - see example in table A.17.6-1\nSC UE A sends an outgoing call to the terminating party. The call has been anchored at the SCC AS.\nTable A.17.6-1: SIP INVITE request (UE to Intermediate IM CN subsystem entities)\nINVITE tel:+1-212-555-2222 SIP/2.0\nVia: SIP/2.0/UDP [5555::aaa:bbb:ccc:ddd]:1357;comp=sigcomp;branch=z9hG4bKnashds7\nMax-Forwards: 70\nRoute: <sip:pcscf1.visited2.net:7531;lr;comp=sigcomp>, <sip:orig@scscf1.home1.net;lr>\nP-Preferred-Identity: \"John Doe\" <sip:user1_public1@home1.net>\nP-Preferred-Service: urn:urn-7:3gpp-service.ims.icsi.mmtel\nP-Access-Network-Info: 3GPP-UTRAN-TDD; utran-cell-id-3gpp=234151D0FCE11\nPrivacy: none\nFrom: <sip:user1_public1@home1.net>;tag=171828\nTo: <tel:+1-212-555-2222>\nCall-ID: cb03a0s09a2sdfglkj490333\nCseq: 127 INVITE\nRequire: sec-agree\nSupported: precondition, 100rel, gruu, norefersub\nProxy-Require: sec-agree\nSecurity-Verify: ipsec-3gpp; q=0.1; alg=hmac-sha-1-96; spi-c=98765432; spi-s=87654321; port-c=8642; port-s=7531\nContact: <sip:user1_public1@home1.net;gr=urn:uuid:f81d4fae-7dec-11d0-a765-00a0c91e6bf6;comp=sigcomp>;+g.3gpp.icsi-ref=\"urn%3Aurn-7%3A3gpp-service.ims.icsi.mmtel\"\nAccept-Contact: *;+g.3gpp.icsi-ref=\"urn%3Aurn-7%3A3gpp-service.ims.icsi.mmtel\"\nAllow: INVITE, ACK, CANCEL, BYE, PRACK, UPDATE, REFER, MESSAGE\nContent-Type: application/sdp\nContent-Length: (…)\n\nv=0\no=- 2987933615 2987933615 IN IP6 5555::aaa:bbb:ccc:ddd\ns=-\nc=IN IP6 5555::aaa:bbb:ccc:ddd\nt=0 0\nm=audio 3456 RTP/AVP 97 96\nb=AS:25.4\na=curr:qos local sendrecv\na=curr:qos remote none\na=des:qos mandatory local sendrecv\na=des:qos none remote sendrecv\na=rtpmap:97 AMR\na=fmtp:97 mode-set=0,2,5,7; maxframes=2\na=rtpmap:96 telephone-event\n\n5.\tSIP INVITE request (Terminating network Intermediate IM CN subsystem entities to UE B)\nThe Terminating network Intermediate IM CN subsystem entities, i.e. S-CSCF serving for remote UE, determine that the SIP INVITE request should be forked, and send the SIP INVITE request to UE B.\n6.\tSIP INVITE request (Terminating network Intermediate IM CN subsystem entities to UE C)\nThe Terminating network Intermediate IM CN subsystem entities, i.e. S-CSCF serving for remote UE, determine that the SIP INVITE request should be forked, and send the SIP INVITE request to UE C.\n7-11.\tSIP 180 (Ringing) response to SIP INVITE request (UE B to UE A though SCC AS)\nThe remote UE B responds with SIP 180 (Ringing) response. And a dialog (dialog 1) has been established between UE A and UE B.\nTable A.17.6-7: SIP 180 (Ringing) response (UE B to Terminating network Intermediate IM CN subsystem entities)\nSIP/2.0 180 Ringing\nRecord-Route: <sip:pcscf1.visited1.net;lr>\nVia:\nMax-Forwards: 60\nP-Asserted-Identity: <tel:+1-212-555-2222>\nPrivacy:\nFrom:\nTo: <tel:+1-212-555-2222>; tag=aaa\nCall-ID:\nCseq:\nRequire:\nSupported:\nContact: <sip:user2_public1@home2.net;gr=urn:uuid:2ad8950e-48a5-4a74-8d99-ad76cc7fc74>;+g.3gpp.icsi-ref=\"urn%3Aurn-7%3A3gpp-service.ims.icsi.mmtel\"\nAllow:\nContent-Type:\nContent-Length:\n\nv=0\no=- 462346 5654 IN IP6 1234::55:66:77:88\ns=-\nc=IN IP6 1234::55:66:77:88\nt=0 0\nm=audio 4456 RTP/AVP 97 96\nb=AS:25.4\na=curr:qos local none\na=curr:qos remote sendrecv\na=des:qos mandatory local sendrecv\na=des:qos mandatory remote sendrecv\na=rtpmap:97 AMR\na=fmtp:97 mode-set=0,2,5,7; maxframes=2\na=rtpmap:96 telephone-event\n\n12-16.\tSIP 180 (Ringing) response to SIP INVITE request (UE C to UE A though SCC AS)\nThe remote UE C responds with SIP 180 (Ringing) response. And a dialog (dialog 2) has been established between UE A and UE B.\nTable A.17.6-12: SIP 180 (Ringing) response (UE B to Terminating network Intermediate IM CN subsystem entities)\nSIP/2.0 180 Ringing\nRecord-Route: <sip:pcscf1.visited1.net;lr>\nVia:\nMax-Forwards: 60\nP-Asserted-Identity: <tel:+1-212-555-2222>\nPrivacy:\nFrom:\nTo: <tel:+1-212-555-2222>; tag=bbb\nCall-ID:\nCseq:\nRequire:\nSupported:\nContact: <sip:user2_public1@home2.net;gr=urn:uuid:2ad8950e-48a5-4a74-8d99-ad76cc7fc74>;+g.3gpp.icsi-ref=\"urn%3Aurn-7%3A3gpp-service.ims.icsi.mmtel\"\nAllow:\nContent-Type:\nContent-Length:\n\nv=0\no=- 462346 5654 IN IP6 1234::55:66:77:88\ns=-\nc=IN IP6 1234::55:66:77:88\nt=0 0\nm=audio 4456 RTP/AVP 97 96\nb=AS:25.4\na=curr:qos local none\na=curr:qos remote sendrecv\na=des:qos mandatory local sendrecv\na=des:qos mandatory remote sendrecv\na=rtpmap:97 AMR\na=fmtp:97 mode-set=0,2,5,7; maxframes=2\na=rtpmap:96 telephone-event\n\n17.\tSC UE A attaches to the CS domain\nUE A sends the measurement reports to E-UTRAN, and the source E-UTRAN decides to trigger an PS to CS SRVCC handover to CS access. The MSC server initiates the session transfer with the STN-SR, refer to 3GPP TS 23.237 [9]. The UE continues ringing.\n18.\tSIP INVITE request transferring the session (MSC server to originating network intermediate IM CN subsystem entities) - see example in table A.17.6-18\nThe MSC server sends an initial SIP INVITE request with STN-SR\nTable A.17.6-18: SIP INVITE request (MSC server to intermediate IM CN subsystem entities)\nINVITE tel: +1-237-555-3333 SIP/2.0\nVia: SIP/2.0/UDP msc1.visit1.net;branch=z9hG4bk731b87\nMax-Forwards: 70\nRoute: <sip:icscf1.visit1.net;lr>\nP-Asserted-Identity: <tel:+1-237-555-1111>\nP-Charging-Vector: icid-value=\"AyretyU0dm+6O2IrT5tAFrbHLso=023551024\";orig-ioi=visit1.net\nPrivacy: none\nFrom: <tel:+1-237-555-1111>;tag=171828\nTo: <tel:+1-237-555-3333>\nCall-ID: cb03a0s09a2sdfglkj490334\nCseq: 127 INVITE\nSupported: 100rel, precondition, gruu, norefersub\nAccept-Contact: *;+g.3gpp.icsi-ref=\"urn%3Aurn-7%3A3gpp-service.ims.icsi.mmtel\"\nP-Asserted-Service: urn:urn-7:3gpp-service.ims.icsi.mmtel\nContact: <sip: msc1.visit1.net:1357>;+g.3gpp.icsi-ref=\"urn%3Aurn-7%3A3gpp-service.ims.icsi.mmtel\"\nAllow: INVITE, ACK, CANCEL, BYE, PRACK, UPDATE, REFER\nRecv-Info: g.3gpp.state-and-event\nContent-Type: application/sdp\nContent-Length: (…)\nP-Early-Media: supported\n\nv=0\no=- 2987933615  IP6 5555::aaa:bbb:ccc:eee\ns=\nc=IN IP6 5555::aaa:bbb:ccc:eee\nt=0 0\nm=audio 3456 RTP/AVP 97 96\na=tcap:1 RTP/AVPF\na=pcfg:1 t=1\nb=AS:25.4\na=curr:qos local sendrecv\na=curr:qos remote none\na=des:qos mandatory local sendrecv\na=des:qos none remote sendrecv\na=rtpmap:97 AMR\na=fmtp:97 mode-set=0,2,5,7; mode-change-period=2\na=rtpmap:96 telephone-event\na=maxptime:20\n\nRequest-URI:\tcontains the STN-SR.\nSDP:\tThe SDP contains set of codecs supported by the MGW.\n19.\tSIP INVITE request transferring the session (intermediate IM CN subsystem entities to )\nThe SIP INVITE is routed towards the SCC AS, based on filter criteria in S-CSCF.\n20.\tRemote Leg Update\nThe SCC AS correlates SIP INVITE request to the local and remote call legs of the existing session between the UE A and the remote end. Since the existing session has forked responses, more than one dialog can be correlated to the SIP INVITE due to STN-SR The SCC AS performs the Remote Leg update towards all the correlated dialogs.\n21-23.\tSIP UPDATE request ( to UE B through Intermediate IM CN subsystem entities)\nThe SCC AS acting as a B2BUA generates a SIP UPDATE request towards dialog 1 to remote UE B based upon the received SIP INVITE request in step 19.\n24-26.\tSIP 200 (OK) response (Remote UE B to SCC AS through Intermediate IM CN subsystem entities)\nUpon receiving the SIP UPDATE request containing the SDP offer for the leg to the MSC, the remote UE B sends SIP 200 (OK).\n27-28.\tSIP 183 (Session Progress) response ( to MSC server through Intermediate IM CN subsystem entities)\nThe SCC AS sends a 183 (Session Progress) containing the SDP answer as received from the remote UE B to the MSC server. The SDP answer indicates that resources are available\n29-30.\tSIP PRACK request (MSC server to  through Intermediate IM CN subsystem entities)\nThe MSC acknowledges the receipt of the 183 Session Progress by sending SIP PRACK request to the SCC AS.\n31-32.\tSIP 200 (OK) response ( to MSC server through Intermediate IM CN subsystem entities)\nThe SCC AS acknowledges the SIP PRACK request with the SIP 200 (OK) response to the MSC server.\n33.\tSIP INFO request ( to Originating network intermediate IM CN subsystem entities) - see example in table A.17.6-33\nTable A.17.6-33: INFO request ( to intermediate IM CN subsystem entities)\nINFO sip: msc1.visit1.net:1357 SIP/2.0\nVia SIP/2.0/UDP sip:sccas1.home1.net;branch=z9hG4bK332b23.1\nMax-Forwards: 68\nRoute: <sip:scscf1.home1.net;lr>\nFrom: <tel: +1-237-555-3333>;tag=314159\nTo: <tel:+1-237-555-1111>;tag=171828\nCall-ID: cb03a0s09a2sdfglkj490334\nCseq: 129 INFO\nInfo-Package: g.3gpp.state-and-event\nContent-Disposition: Info-Package\nContent-Type: application/vnd.3gpp.state-and-event-info+xml\nContent-Length:\n\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<state-and-event-info>\n<state-info>early</state-info>\n<direction>initiator</direction>\n</state-and-event-info>\n\n34.\tSIP INFO request (Intermediate IM CN subsystem entities to MSC server)\nThe intermediate IM CN subsystem entities forward the SIP INFO request to the MSC server. The MSC server is aware that the call that is transferred is in originating alerting phase.\n35.\tSIP 200 (OK) response (MSC server to Intermediate IM CN subsystem entities)\nThe MSC Server acknowledges the receipt of the SIP INFO request.\n36.\tSIP 200 (OK) response (Intermediate IM CN subsystem entities to )\nThe intermediate IM CN subsystem entities forwards the SIP 200 (OK) response to the SCC AS.\n37-39.\tSIP UPDATE request ( to UE C through Intermediate IM CN subsystem entities)\nIn parallel with step 21, the SCC AS acting as a B2BUA generates a SIP UPDATE request towards dialog 2 to remote UE C based upon the received SIP INVITE request in step 19.\n40-42.\tSIP 200 (OK) response (Remote UE C to SCC AS through Intermediate IM CN subsystem entities)\nUpon receiving the SIP UPDATE request containing the SDP offer for the leg to the MSC, the remote UE C sends a SIP 200 (OK) response.\n43-44.\tSIP 183 (Session Progress) response ( to MSC server through Intermediate IM CN subsystem entities)\nThe SCC AS sends a SIP 183 (Session Progress) containing the SDP answer as received from the remote UE C to the MSC server. The SDP answer indicates that resources are available\n45-46.\tSIP PRACK request (MSC server to  through Intermediate IM CN subsystem entities)\nThe MSC acknowledges the receipt of the 183 Session Progress by sending SIP PRACK request to the SCC AS.\n47-48.\tSIP 200 (OK) response ( to MSC server through Intermediate IM CN subsystem entities)\nThe SCC AS acknowledges the SIP PRACK request with the SIP 200 (OK) response to the MSC server.\n49.\tSIP 200 (OK) response (UE B to intermediate IM CN subsystem entities)\nIn this example, the remote UE B accepts the call first and sends a SIP 200 (OK) response.\n50-51.\tSIP 200 (OK) response (Intermediate IM CN subsystem entities to )\nThe SIP 200 (OK) response is forwarded to\n52-53\tSIP 200 (OK) response ( to MSC server through Intermediate IM CN subsystem entities)\nThe SIP 200 (OK) response is forwarded to the MSC server based on the route established during step 24-28.\n54\tCC CONNECT message (MSC server to SC UE A)\nThe MSC server indicates to the SC UA A that the remote UE B has accepted the call.\n55-59.\tSIP ACK request (MSC server to remote UE B through intermediate IM CN subsystem entities)\nThe MSC server acknowledges the SIP 200 (OK) response by sending The SIP ACK request to remote UE B.\n60\tSIP CANCEL request (Terminating network intermediate IM CN subsystem entities to remote UE C)\nThe intermediate IM CN subsystem entities send the SIP CANCEL request to remote UE C to release the call towards remote UE C.\n61\tSIP 200 (OK) response to SIP CANCEL request (UE-3 to Intermediate IM CN subsystem entities)\nRemote UE C responds SIP 200 (OK) response to the SIP CANCEL request.\n62\tCC CONNECT ACKNOWLEDGE message ( server to SC UE A)\nSC UE A acknowledges the CC CONNECT message.\n63–66\tThe SCC AS releases the original source leg towards the SC UE A\nThe SCC AS sends a SIP 404 (Not Found) response in order to release to original source dialog towards the SC UE A\nNOTE:\tSteps 64-65 are performed only if the SC UE A Gm after the PS-CS access transfer in alerting phase is completed; otherwise, the SC UE A and the network release the source access leg locally, without any signalling between the SC UE A and the network\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "A.17.7\tSession transfer for originating call is in alerting phase using SRVCC procedure with ATCF: PS to CS",
                    "description": "",
                    "summary": "",
                    "text_content": "In the example flow at the figure A.17.7-1, SC UE A has invited for an originating session with a CAT media component which is anchored at ATGW. The session is in alerting phase. Based upon measurement reports sent from the UE to E-UTRAN, the source E-UTRAN decides to trigger a SRVCC handover to CS access.\nFigure A.17.7 illustrates the process of PS-CS SRVCC during the outgoing call alerting phase with CAT media anchored at the Automatic Teller Machine (ATGW). The figure depicts the signaling and signaling state transitions between the PS and CS domains, highlighting the role of the Automatic Number Identification (ANI) and the Automatic Call Distribution (ACD) systems. The figure also shows the handover from the PS to the CS domain, with the Automatic Transfer Set (ATS) and the Radio Resource Control (RRC) protocols playing a crucial role in maintaining seamless communication. The figure is essential for understanding the complex interworking of various components in a PS-CS SRVCC scenario and the importance of maintaining a robust and reliable communication system.\nFigure  A.17.7-1:\tPS-CS SRVCC, outgoing call in alerting phase with CAT media anchored at ATGW\nNOTE 1:\tFor clarity, the SIP 100 (Trying) responses are not shown in the signalling flow.\n1.\tSC UE A has setup an outgoing call\nThe outgoing call with the CAT media has been anchored at the ATGW. Both ends have reserved the resources and SC UE A has received a SIP 180 (Ringing) response.\n2.\tSC UE A attaches to the CS domain\nUE A sends the measurement reports to E-UTRAN, and the source E-UTRAN decides to trigger an SRVCC handover to CS access.\n3.\tSIP INVITE request (MSC server to ATCF)-see example in table A.17.7-3\nTable A.17.7-3: SIP INVITE request (MSC server to ATCF)\nINVITE tel:+1-237-555-3333 SIP/2.0\nVia: SIP/2.0/UDP msc1.visit1.net;branch=z9hG4bk731b87\nMax-Forwards: 70\nP-Asserted-Identity: <tel:+1-237-555-2222>\nP-Charging-Vector: icid-value=\"AyretyU0dm+6O2IrT5tAFrbHLso=023551024\";orig-ioi=visit1.net\nPrivacy: none\nP-Early-Media: supported\nFrom: <tel:+1-237-555-1111>;tag=171828\nTo: <tel:+1-237-555-3333>\nCall-ID: cb03a0s09a2sdfglkj490334\nCseq: 127 INVITE\nSupported: 100rel, precondition, gruu, norefersub\nAccept-Contact: *;+g.3gpp.icsi-ref=\"urn%3Aurn-7%3A3gpp-service.ims.icsi.mmtel\"\nP-Asserted-Service: urn:urn-7:3gpp-service.ims.icsi.mmtel\nContact: <sip: msc1.visit1.net:1357>;+g.3gpp.icsi-ref=\"urn%3Aurn-7%3A3gpp-service.ims.icsi.mmtel\"; +g.3gpp.srvcc-alerting\nAllow: INVITE, ACK, CANCEL, BYE, PRACK, UPDATE, REFER\nContent-Type: application/sdp\nContent-Length: (…)\n\nv=0\no=- 2987933615  IP6 5555::aaa:bbb:ccc:eee\ns=\nc=IN IP6 5555::aaa:bbb:ccc:eee\nt=0 0\nm=audio 3456 RTP/AVP 97 96\na=tcap:1 RTP/AVPF\na=pcfg:1 t=1\nb=AS:25.4\na=curr:qos local sendrecv\na=curr:qos remote none\na=des:qos mandatory local sendrecv\na=des:qos none remote sendrecv\na=rtpmap:97 AMR\na=fmtp:97 mode-set=0,2,5,7; mode-change-period=2\na=rtpmap:96 telephone-event\na=maxptime:20\n\nRequest-URI:\tcontains the STN-SR, as routed to the ATCF.\nSDP:\tThe SDP contains preconfigured set of codecs supported by the MGW.\nP-Asserted-Identity:\tthe C-MSISDN of the served UE.\nContact:\tcontains the +g.3gpp.srvcc-alerting feature tag.\n4.\tSIP INVITE request (ATCF to SCC AS)-see example in table A.17.7-4\nAfter receiving the access transfer message, the ATCF establishes a new dialog with the SCC AS by sending a new SIP INVITE request to the SCC AS using the stored ATU-STI for PS to CS SRVCC. The ATCF updates the SCC AS via the new dialog indicating that the transfer has taken place. As there is no update in the SDP information, no remote end update will be performed.\nTable A.17.7-4: SIP INVITE request (ATCF to SCC AS)\nINVITE sip:AUT-STI1@sccas.home1.net SIP/2.0\nVia: SIP/2.0/UDP actf.visited2.net:5060;branch=z9hG4bk731b87\nMax-Forwards: 70\nP-Asserted-Identity: <tel:+1-237-555-2222>\nP-Charging-Vector: icid-value=\"AyretyU0dm+6O2IrT5tAFrbHLso=023551024\";orig-ioi=visit1.net\nPrivacy: none\nP-Early-Media: supported\nFrom: <tel:+1-237-555-3333>;tag=1888828\nTo: <tel:+1-237-555-4444>\nCall-ID: cb03a0s09a2sdfglkj490444\nCseq: 127 INVITE\nSupported: 100rel, precondition, gruu, norefersub\nRequire: tdialog,\nRecord-Route:<sip: actf.visited2.net:5060;lr>\nTarget-Dialog: me0s2sdfgjkl491777; remote-tag=774321; local-tag=64727891\nAccept-Contact: *;+g.3gpp.icsi-ref=\"urn%3Aurn-7%3A3gpp-service.ims.icsi.mmtel\"\nP-Asserted-Service: urn:urn-7:3gpp-service.ims.icsi.mmtel\nContact: <sip: msc1.visit1.net:1357>;+g.3gpp.icsi-ref=\"urn%3Aurn-7%3A3gpp-service.ims.icsi.mmtel\"\nAllow: INVITE, ACK, CANCEL, BYE, PRACK, UPDATE, REFER\nContent-Type: application/sdp\nContent-Length: (…)\n\nv=0\no=- 2987933615  IP6 5555::aaa:bbb:ccc:ggg\ns=\nc=IN IP6 5555::aaa:bbb:ccc:ggg\nt=0 0\nm=audio 3456 RTP/AVP 97 96\na=tcap:1 RTP/AVPF\na=pcfg:1 t=1\nb=AS:25.4\na=curr:qos local sendrecv\na=curr:qos remote none\na=des:qos mandatory local sendrecv\na=des:qos none remote sendrecv\na=rtpmap:97 AMR\na=fmtp:97 mode-set=0,2,5,7; mode-change-period=2\na=rtpmap:96 telephone-event\na=maxptime:20\n\nRequest-URI:\tcontains the ATU-STI for PS to CS SRVCC, that resolves (e.g. via DNS access) to the IP address of the I-CSCF.\nTarget-Dialog:\tspecifies that the existing dialog is related with this request.\nRecord-Route:\tcontains the SIP URI of the ATCF, where the ATCF expect to receive the in-dialog request from the SCC AS.\nRequire:\tthe \"tdialog\" option tag indicate that the support for Target-Dialog header field is required.\nP-Asserted-Identity:\tthe C-MSISDN of the served UE.\nSDP:\tthe media information at ATGW.\n5-6.\tSIP 183 (Session Progress) response ( to MSC Server)\nThe session achored is in alerting phase, the SCC AS sends the SIP 183Session Progress response to the MSC server.\n7-8.\tSIP PRACK reqeust (MSC Server to SCC AS)\n9-10.\tSIP 200 (OK) response ( to MSC Server)\n11.\tThe CAT media is transferred to the CS access, and kept playing to the originating user.\n9.\tSIP 183 (Session Progress) response ( to ATCF)\n10.\tSIP PRACK request (ATCF to SCC AS)\n11.\tSIP 200 (OK) response ( to ATCF)\n12-13.\tSIP INFO request ( to MSC Server) - see example in table A.17.7-12\nTable A.17.7-12: INFO request ( to MSC Server)\nINFO sip: msc1.visit1.net:1357 SIP/2.0\nVia SIP/2.0/UDP sip:sccas1.home1.net;branch=z9hG4bK332b23.1\nMax-Forwards: 68\nRoute: <sip:scscf1.home1.net;lr>\nFrom: <tel:+1-237-555-3333>;tag=314159\nTo: <tel:+1-237-555-1111>;tag=171828\nCall-ID: cb03a0s09a2sdfglkj490334\nCseq: 129 INFO\nInfo-Package: g.3gpp.state-and-event-info\nContent-Type: application/vnd.3gpp.state-and-event-info+xml\nContent-Length:\n\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<state-and-event-info>\n<state-info>early</state-info>\n<direction>initiator</direction>\n</state-and-event-info>\n\n14-15.\tSIP 200 (OK) response (MSC server to )\nThe MSC Server acknowledges the receipt of the SIP INFO request.\n16.\tMSC goes in Call delivered state\nThe MSC enters Call delivered state due to the information received in the SIP INFO request.\n17.\tThe User B answers the call\n18.\tSIP 200 (OK) response (UE B to CAT AS B)\nThe UE B accepts the call and sends a SIP 200 (OK) response.\n19.\tThe CAT AS stops the CAT media upon receving the SIP 200 (OK) response.\n20-22.\tSIP 200 (OK) response ( to MSC Server)\nThe SIP 200 (OK) response is forwarded to MSC Server.\n23.\tCC CONNECT message (MSC server to SC UE A)\nThe MSC server indicates to the SC UA A that the far end has accepted the call.\n24-27.\tSIP ACK request (MSC server to UE B)\nThe MSC server acknowledges the SIP 200 (OK) response.\n28.\tCC CONNECTACKNOWLEDGE (SC UE A to  server)\nSC UE A acknowledges the CS CONNECT message.\n29–32.\tThe SCC AS releases the original source leg towards the SC UE A\nThe SCC AS sends a SIP 404 (Not Found) response in order to release to original source dialog towards the SC UE A\nNOTE:\tSteps 29-32 are performed only if the SC UE A uses Gm the PS-CS access transfer in alerting phase is completed; otherwise, the SC UE A and the network release the source access leg locally, without any signalling between the SC UE A and the network.\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "A.17.8\tSession transfer for terminating call is in alerting phase using SRVCC procedure with ATCF: PS to CS",
                    "description": "",
                    "summary": "",
                    "text_content": "In the example flow at the figure A.17.8-1, SC UE B has an incoming session with speech media component which is anchored at ATCF. The session is in alerting phase, and the CAT media is played to the originating UE A. Based upon measurement reports sent from the UE to E-UTRAN, the source E-UTRAN decides to trigger a PS to CS SRVCC handover to CS access.\nFigure A.17.8-1 illustrates the process of PS-CS SRVCC during the alerting phase with CAT media, depicting an incoming call scenario. The figure showcases the signaling interactions between the PS (Public Switched Telephone Network) and CS (Circuit Switched) domains, highlighting the role of the SRVCC (Single Radio Voice Call Continuity) in maintaining call continuity during network transitions. Key components include the PS-CS signaling, the SRVCC control signaling, and the CAT (Circuit Automatic Troubleshooting) media, which ensures efficient call handling and network management.\nFigure  A.17.8-1:\tPS-CS SRVCC, incoming call in alerting phase with CAT media\nNOTE 1:\tFor clarity, the SIP 100 (Trying) responses are not shown in the signalling flow.\n1.\tSC UE B has received an incoming call and is in\nThe incoming call has been anchored at the ATCF of SC UE B. Both ends have reserved the resources and SC UE A has sent a SIP 180 (Ringing) response.\n2.\tSC UE B attaches to the CS domain\nUE B sends the measurement reports to E-UTRAN, and the source E-UTRAN decides to trigger an PS to CS SRVCC handover to CS access. The MSC server initiates the session transfer with the STN-SR, refer to 3GPP TS 23.237 [9]. The UE continues ringing.\n3.\tSIP INVITE request (MSC server to ATCF)-see example in table A.17.8-3\nTable A.17.8-3: SIP INVITE request (MSC server to ATCF)\nINVITE tel:+1-237-555-3333 SIP/2.0\nVia: SIP/2.0/UDP msc1.visit1.net;branch=z9hG4bk731b87\nMax-Forwards: 70\nP-Asserted-Identity: <tel:+1-237-555-2222>\nP-Charging-Vector: icid-value=\"AyretyU0dm+6O2IrT5tAFrbHLso=023551024\";orig-ioi=visit1.net\nPrivacy: none\nP-Early-Media: supported\nFrom: <tel:+1-237-555-1111>;tag=171828\nTo: <tel:+1-237-555-3333>\nCall-ID: cb03a0s09a2sdfglkj490334\nCseq: 127 INVITE\nSupported: 100rel, precondition, gruu, norefersub\nAccept-Contact: *;+g.3gpp.icsi-ref=\"urn%3Aurn-7%3A3gpp-service.ims.icsi.mmtel\"\nP-Asserted-Service: urn:urn-7:3gpp-service.ims.icsi.mmtel\nContact: <sip: msc1.visit1.net:1357>;+g.3gpp.icsi-ref=\"urn%3Aurn-7%3A3gpp-service.ims.icsi.mmtel\"; +g.3gpp.srvcc-alerting\nAllow: INVITE, ACK, CANCEL, BYE, PRACK, UPDATE, REFER\nContent-Type: application/sdp\nContent-Length: (…)\n\nv=0\no=- 2987933615  IP6 5555::aaa:bbb:ccc:eee\ns=\nc=IN IP6 5555::aaa:bbb:ccc:eee\nt=0 0\nm=audio 3456 RTP/AVP 97 96\na=tcap:1 RTP/AVPF\na=pcfg:1 t=1\nb=AS:25.4\na=curr:qos local sendrecv\na=curr:qos remote none\na=des:qos mandatory local sendrecv\na=des:qos none remote sendrecv\na=rtpmap:97 AMR\na=fmtp:97 mode-set=0,2,5,7; mode-change-period=2\na=rtpmap:96 telephone-event\na=maxptime:20\n\nRequest-URI:\tcontains the STN-SR, as routed to the ATCF.\nSDP:\tThe SDP contains preconfigured set of codecs supported by the MGW.\nP-Asserted-Identity:\tthe C-MSISDN of the served UE.\nContact:\tcontains the +g.3gpp.srvcc-alerting feature tag.\n4.\tSIP INVITE request (ATCF to SCC AS)-see example in table A.17.8-4\nAfter receiving the access transfer message, the ATCF establishes a new dialog with the SCC AS by sending a new SIP INVITE request to the SCC AS using the stored ATU-STI for PS to CS SRVCC. The ATCF updates the SCC AS via the new dialog indicating that the transfer has taken place. As there is no update in the SDP information, no remote end update will be performed.\nTable A.17.8-4: SIP INVITE request (ATCF to SCC AS)\nINVITE sip:AUT-STI1@sccas.home1.net SIP/2.0\nVia: SIP/2.0/UDP actf.visited2.net:5060;branch=z9hG4bk731b87\nMax-Forwards: 70\nP-Asserted-Identity: <tel:+1-237-555-2222>\nP-Charging-Vector: icid-value=\"AyretyU0dm+6O2IrT5tAFrbHLso=023551024\";orig-ioi=visit1.net\nPrivacy: none\nP-Early-Media: supported\nFrom: <tel:+1-237-555-3333>;tag=1888828\nTo: <tel:+1-237-555-4444>\nCall-ID: cb03a0s09a2sdfglkj490444\nCseq: 127 INVITE\nSupported: 100rel, precondition, gruu, norefersub\nRequire: tdialog,\nRecord-Route:<sip: actf.visited2.net:5060;lr>\nTarget-Dialog: me0s2sdfgjkl491777; remote-tag=774321; local-tag=64727891\nAccept-Contact: *;+g.3gpp.icsi-ref=\"urn%3Aurn-7%3A3gpp-service.ims.icsi.mmtel\"\nP-Asserted-Service: urn:urn-7:3gpp-service.ims.icsi.mmtel\nContact: <sip: msc1.visit1.net:1357>;+g.3gpp.icsi-ref=\"urn%3Aurn-7%3A3gpp-service.ims.icsi.mmtel\"\nAllow: INVITE, ACK, CANCEL, BYE, PRACK, UPDATE, REFER\nContent-Type: application/sdp\nContent-Length: (…)\n\nv=0\no=- 2987933615  IP6 5555::aaa:bbb:ccc:ggg\ns=\nc=IN IP6 5555::aaa:bbb:ccc:ggg\nt=0 0\nm=audio 3456 RTP/AVP 97 96\na=tcap:1 RTP/AVPF\na=pcfg:1 t=1\nb=AS:25.4\na=curr:qos local sendrecv\na=curr:qos remote none\na=des:qos mandatory local sendrecv\na=des:qos none remote sendrecv\na=rtpmap:97 AMR\na=fmtp:97 mode-set=0,2,5,7; mode-change-period=2\na=rtpmap:96 telephone-event\na=maxptime:20\n\nRequest-URI:\tcontains the ATU-STI for PS to CS SRVCC, that resolves (e.g. via DNS access) to the IP address of the I-CSCF.\nTarget-Dialog:\tspecifies that the existing dialog is related with this request.\nRecord-Route:\tcontains the SIP URI of the ATCF, where the ATCF expect to receive the in-dialog request from the SCC AS.\nRequire:\tthe \"tdialog\" option tag indicate that the support for Target-Dialog header field is required.\nP-Asserted-Identity:\tthe C-MSISDN of the served UE.\nSDP:\tthe media information at ATGW.\n5-6.\tSIP 183 (Session Progress) response ( to MSC server)\nThe session achored is in alerting phase, the SCC AS sends the SIP 183Session Progress response to the MSC server.\n7-8.\tSIP PRACK request (MSC Server to SCC AS)\n9-10.\tSIP 200 (OK) response (ATCF to MSC Server)\n11-12.\tSIP INFO request ( to MSC Server) - see example in table A.17.8-11\nTable A.17.8-11: INFO request ( to MSC Server)\nINFO sip:msc1.visit1.net:1357 SIP/2.0\nVia SIP/2.0/UDP sip:sccas1.home1.net;branch=z9hG4bK332b23.1\nMax-Forwards: 68\nRoute: <sip:scscf1.home1.net;lr>\nFrom: <tel:+1-237-555-3333>;tag=314159\nTo: <tel:+1-237-555-1111>;tag=171828\nCall-ID: cb03a0s09a2sdfglkj490334\nCseq: 129 INFO\nInfo-Package: g.3gpp.state-and-event-info\nContent-Type: application/vnd.3gpp.state-and-event-info+xml\nContent-Length:\n\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<state-and-event-info>\n<state-info>early</state-info>\n<direction>receiver</direction>\n</state-and-event-info>\n\n13-14.\tSIP 200 (OK) response (MSC server to ATCF)\nThe MSC server acknowledges the receipt of the SIP INFO request.\n15.\tMSC goes in Call received state\nThe MSC enters Call received state due to the information received in the SIP INFO request.\n16.\tThe User B answers the call\n17.\tCC CONNECT message from SC UE B to MSC server\nThe SC UE B accepts the call and sends CC CONNECT message.\n18.\tCC CONNECT ACKNOWLEDGE message ( server to SC UE B)\n19-20.\tSIP INFO request (MSC server to ) - see example in table A.17.8-19\nTable A.17.8-19: INFO request (MSC server to )\nINFO sip:sccas1.home1.net;gr SIP/2.0\nVia: SIP/2.0/UDP msc1.visit1.net;branch=z9hG4bk731b87\nMax-Forwards: 68\nRoute: <sip:scscf1.home1.net;lr>\nFrom: <tel:+1-237-555-1111>;tag=171828\nTo: <tel:+1-237-555-3333>;tag=171828\nCall-ID: cb03a0s09a2sdfglkj490334\nCseq: 130 INFO\nInfo-Package: g.3gpp.state-and-event-info\nContent-Type: application/vnd.3gpp.state-and-event-info+xml\nContent-Length:\n\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<state-and-event-info>\n<event>call-accepted</event>\n</state-and-event-info>\n\n21-22.\tSIP 200 (OK)  response ( to MSC Server)\nThe SCC AS acknowledges the receipt of the SIP INFO request indicating that the SC UE B has accepted the call.\n23.\tSIP 200 (OK) response (SCC AS to CAT AS)\nThe SIP 200 (OK) response is forwarded to the CAT AS by\n24.\tThe CAT AS stops the CAT media upon receving the SIP 200 (OK) response.\n25.\tSIP 200 (OK) response ( to UE A)\nThe SIP 200 (OK) response is forwarded to UE A.\n26-27\tSIP ACK request (far end UE A to SCC AS)\nThe far end UE acknowledges the SIP 200 (OK) response received from\n28-29\tSIP 200 (OK) response ( to MSC Server)\nThe SCC AS sends a SIP 200 (OK) response to indicate the successful access transfer to the MSC server.\n30-31.\tSIP ACK request (MSC server to )\nMSC server acknowledges the SIP 200 (OK) response received from\n32-39.\tSIP CANCEL Processing\nThe SCC AS cancels the SIP dialog towards the SC UE\nNOTE:\tSteps 32-39 are performed only if the SC UE B uses Gm after the PS-CS access transfer in alerting phase is completed; otherwise, the SC UE B and the network release the source access leg locally, without any signalling between the SC UE B and the network.\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                }
            ]
        },
        {
            "title": "A.18\tSignalling flows for PS to CS Access Transfer: PS to CS SRVCC enhancements using ATCF",
            "description": "",
            "summary": "",
            "tables": [],
            "figures_meta_data": [],
            "subsections": [
                {
                    "title": "A.18.1\tIntroduction",
                    "description": "",
                    "summary": "",
                    "text_content": "The signalling flows in the subclause demonstrate the PS to CS SRVCC enhancements using ATCF. The following signalling flows are included:\n-\tsubclause A.18.2 shows an example of PS to CS SRVCC enhancements using ATCF and without media anchored.\n-\tsubclause A.18.3 shows an example of PS to CS SRVCC enhancements using ATCF and media anchored.\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "A.18.2\tSignalling flows for PS to CS Access Transfer: PS to CS SRVCC enhancements using ATCF and without media anchored",
                    "description": "",
                    "summary": "",
                    "text_content": "The signalling flow shown in figure A.18.2-1 gives an example for PS to CS access transfer when using ATCF enhancements and without media anchored. In this case, the ATCF has been included in the path for subsequent transactions created at registration, but media has not been anchored in ATGW.\nFigure A.1 illustrates the signalling flows for PS to CS access transfer enhancements using ATCF and without media anchored. The figure depicts the various stages of the process, including the PS to CS SRVCC (Single Radio Voice Call Continuity) enhancements, which utilize Automatic Transfer Control Function (ATCF) to facilitate seamless handover between PS and CS domains. The figure highlights the importance of these enhancements in improving call quality and reliability in mobile communication networks.\nFigure A.18.2-1 Signalling flows for PS to CS access transfer: PS to CS SRVCC enhancements using ATCF and without media anchored\nNOTE 1:\tFor clarity, the SIP 100 (Trying) responses are not shown in the signalling flow.\n1.\tUE A is on an active session with UE B\nThere is an ongoing PS bearer between the UE A and the remote end UE B. The media is not anchored at ATGW.\n2.\tSC UE A attaches to the CS domain\nUE A sends the measurement reports to E-UTRAN, and the source E-UTRAN decides to trigger an PS to CS SRVCC handover to CS access. The MSC server initiates the session transfer with the STN-SR, refer to 3GPP TS 23.216 [49].\n3.\tSIP INVITE request (MSC server to ATCF)-see example in table A.18.2-3\nTable A.18.2-3: SIP INVITE request (MSC server to ATCF)\nINVITE tel: +1-237-555-3333 SIP/2.0\nVia: SIP/2.0/UDP msc1.visit1.net;branch=z9hG4bk731b87\nMax-Forwards: 70\nP-Asserted-Identity: <tel:+1-237-555-2222>\nP-Charging-Vector: icid-value=\"AyretyU0dm+6O2IrT5tAFrbHLso=023551024\";orig-ioi=visit1.net\nPrivacy: none\nFrom: <tel:+1-237-555-1111>;tag=171828\nTo: <tel: +1-237-555-3333>\nCall-ID: cb03a0s09a2sdfglkj490334\nCseq: 127 INVITE\nSupported: 100rel, precondition, gruu\nAccept-Contact: *;+g.3gpp.icsi-ref=\"urn%3Aurn-7%3A3gpp-service.ims.icsi.mmtel\"\nP-Asserted-Service: urn:urn-7:3gpp-service.ims.icsi.mmtel\nContact: <sip: msc1.visit1.net:1357>;+g.3gpp.icsi-ref=\"urn%3Aurn-7%3A3gpp-service.ims.icsi.mmtel\"\nAllow: INVITE, ACK, CANCEL, BYE, PRACK, UPDATE, REFER\nContent-Type: application/sdp\nContent-Length: (…)\n\nv=0\no=- 2987933615  IP6 5555::aaa:bbb:ccc:eee\ns=\nc=IN IP6 5555::aaa:bbb:ccc:eee\nt=0 0\nm=audio 3456 RTP/AVP 97 96\na=tcap:1 RTP/AVPF\na=pcfg:1 t=1\nb=AS:25.4\na=curr:qos local sendrecv\na=curr:qos remote none\na=des:qos mandatory local sendrecv\na=des:qos none remote sendrecv\na=rtpmap:97 AMR\na=fmtp:97 mode-set=0,2,5,7; mode-change-period=2\na=rtpmap:96 telephone-event\na=maxptime:20\n\nRequest-URI:\tcontains the STN-SR, as routed to the ATCF.\nSDP:\tThe SDP contains preconfigured set of codecs supported by the MGW.\nP-Asserted-Identity:\tthe C-MSISDN of the served UE.\n4-5.\tSIP INVITE request (ATCF to SCC AS via I-CSCF)- see example in table A.18.2-4\nSince the media has not been anchored at the ATGW, the ATCF forwards the SIP INVITE request to the SCC AS by replacing the request URI to the stored ATU-STI for PS to CS SRVCC.\nTable A.18.2-4: SIP INVITE request (ATCF to I-CSCF)\nINVITE sip:AUT-STI1@sccas.home1.net SIP/2.0\nVia: SIP/2.0/UDP msc1.visit1.net;branch=z9hG4bk731b87\nMax-Forwards: 70\nP-Asserted-Identity: <tel:+1-237-555-2222>\nP-Charging-Vector: icid-value=\"AyretyU0dm+6O2IrT5tAFrbHLso=023551024\";orig-ioi=visit1.net\nPrivacy: none\nFrom: <tel:+1-237-555-1111>;tag=171828\nTo: <tel: +1-237-555-4444>\nCall-ID: cb03a0s09a2sdfglkj490334\nCseq: 127 INVITE\nSupported: 100rel, precondition, gruu\nAccept-Contact: *;+g.3gpp.icsi-ref=\"urn%3Aurn-7%3A3gpp-service.ims.icsi.mmtel\"\nP-Asserted-Service: urn:urn-7:3gpp-service.ims.icsi.mmtel\nContact: <sip: msc1.visit1.net:1357>;+g.3gpp.icsi-ref=\"urn%3Aurn-7%3A3gpp-service.ims.icsi.mmtel\"\nAllow: INVITE, ACK, CANCEL, BYE, PRACK, UPDATE, REFER\nContent-Type: application/sdp\nContent-Length: (…)\n\nv=0\no=- 2987933615  IP6 5555::aaa:bbb:ccc:eee\ns=\nc=IN IP6 5555::aaa:bbb:ccc:eee\nt=0 0\nm=audio 3456 RTP/AVP 97 96\na=tcap:1 RTP/AVPF\na=pcfg:1 t=1\nb=AS:25.4\na=curr:qos local sendrecv\na=curr:qos remote none\na=des:qos mandatory local sendrecv\na=des:qos none remote sendrecv\na=rtpmap:97 AMR\na=fmtp:97 mode-set=0,2,5,7; mode-change-period=2\na=rtpmap:96 telephone-event\na=maxptime:20\n\n6-7.\tSIP re-INVITE request ( to UE B via S-CSCF)\nThe SCC AS based on the content of the C-MSISDN correlates the SIP INVITE request to the local and remote call legs of the existing session between the UE A and the remote end. The SCC AS performs the Remote Leg update by sending the SIP re-INVITE request towards the Remote Leg.\n8-9.\tSIP 200 (OK) response (UE B to SCC AS via S-CSCF)\nUpon receiving the SIP re-INVITE request containing the SDP offer, since the UE B has all resources available, it sends immediately the SIP 200 (OK) response to the SIP re-INVITE request that contains the SDP answer. The SDP answer indicates that the resources are available.\n10-11.\tSIP ACK request ( to UE B via S-CSCF)\nThe SCC AS generates the SIP ACK request to the SIP 200 (OK) response, and forwards the SIP ACK request to the remote UE B.\n12-13.\tSIP 200 (OK) response ( to ATCF via I-CSCF)\nThe SCC AS generates the SIP 200 (OK) response to the SIP INVITE request, and forwards the SIP 200 (OK) response towards the ATCF.\n14.\tSIP 200 (OK) response (ATCF to MSC server)\nThe ATCF generates the SIP 200 (OK) response to the SIP INVITE request, and forwards the SIP 200 (OK) response towards the MSC server.\n15.\tSIP ACK request (MSC server to ATCF)\nThe MSC server generates the SIP ACK request to the SIP 200 (OK) response, and forwards it to the ATCF.\n16-17.\tSIP ACK request (ATCF to SCC AS via I-CSCF)\nThe ATCF generates the SIP ACK request to the SIP 200 (OK) response, and forwards it to the SCC AS.\n18-21.\tSIP BYE request ( to UE via I-CSCF, ATCF and P-CSCF)\nThe SCC AS terminates the source access leg, which was using the old IP-CAN, by sending a SIP BYE request to the UE A.\n22-24.\tSIP 200 (OK) response (UE A to SCC AS via P-CSCF, ATCF and I-CSCF)\nUpon receiving the SIP BYE request over the old IP-CAN, the UE A sends a SIP 200 (OK) response over the old IP-CAN to the SCC AS. Subsequently, the SC UE A relinquishes all resources pertaining to the old IP-CAN.\nNOTE:\tSteps 21-22 are performed only if the UE A uses Gm after the PS-CS access transfer is completed; otherwise, the UE A and the network release the source access leg locally, without any signalling between the UE A and the network\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "A.18.3\tSignalling flows for PS to CS Access Transfer: PS to CS SRVCC enhancements using ATCF and media anchored",
                    "description": "",
                    "summary": "",
                    "text_content": "The signalling flow shown in figure A.18.3-1 gives an example for PS to CS access transfer for PS to CS SRVCC enhancements using ATCF and media anchored. In this case, the media is anchored in ATGW and ATCF has been included in the path for subsequent transactions created at registration.\nFigure A.1 illustrates the signalling flows for PS to CS access transfer, specifically focusing on PS to CS SRVCC enhancements using ATCF and media anchored. The figure showcases the various stages of the process, including the use of Automatic Transfer Control (ATCF) and media anchoring to facilitate seamless handover and improve call quality. The figure highlights the importance of these enhancements in maintaining a reliable and efficient communication system.\nFigure A.18.3-1 Signalling flows for PS to CS access transfer: PS to CS SRVCC enhancements using ATCF and media anchored\nNOTE 1:\tFor clarity, the SIP 100 (Trying) responses are not shown in the signalling flow.\n1.\tUE A is on an active session with UE B\nThere is an ongoing IP bearer between the UE A and the remote end UE B. The media is anchored at ATGW.\n2.\tSC UE A attaches to the CS domain\nUE A sends the measurement reports to E-UTRAN, and the source E-UTRAN decides to trigger an PS to CS SRVCC handover to CS access. The MSC server initiates the session transfer with the STN-SR, refer to 3GPP TS 23.216 [49].\n3.\tSIP INVITE request (MSC server to ATCF)-see example in table A.18.3-3\nTable A.18.3-3: SIP INVITE request (MSC server to ATCF)\nINVITE tel: +1-237-555-3333 SIP/2.0\nVia: SIP/2.0/UDP msc1.visit1.net;branch=z9hG4bk731b87\nMax-Forwards: 70\nP-Asserted-Identity: <tel:+1-237-555-2222>\nP-Charging-Vector: icid-value=\"AyretyU0dm+6O2IrT5tAFrbHLso=023551024\";orig-ioi=visit1.net\nPrivacy: none\nFrom: <tel:+1-237-555-1111>;tag=171828\nTo: <tel: +1-237-555-3333>\nCall-ID: cb03a0s09a2sdfglkj490334\nCseq: 127 INVITE\nSupported: 100rel, precondition, gruu\nAccept-Contact: *;+g.3gpp.icsi-ref=\"urn%3Aurn-7%3A3gpp-service.ims.icsi.mmtel\"\nP-Asserted-Service: urn:urn-7:3gpp-service.ims.icsi.mmtel\nContact: <sip: msc1.visit1.net:1357>;+g.3gpp.icsi-ref=\"urn%3Aurn-7%3A3gpp-service.ims.icsi.mmtel\"\nAllow: INVITE, ACK, CANCEL, BYE, PRACK, UPDATE, REFER\nContent-Type: application/sdp\nContent-Length: (…)\n\nv=0\no=- 2987933615  IP6 5555::aaa:bbb:ccc:eee\ns=\nc=IN IP6 5555::aaa:bbb:ccc:eee\nt=0 0\nm=audio 3456 RTP/AVP 97 96\na=tcap:1 RTP/AVPF\na=pcfg:1 t=1\nb=AS:25.4\na=curr:qos local sendrecv\na=curr:qos remote none\na=des:qos mandatory local sendrecv\na=des:qos none remote sendrecv\na=rtpmap:97 AMR\na=fmtp:97 mode-set=0,2,5,7; mode-change-period=2\na=rtpmap:96 telephone-event\na=maxptime:20\n\nRequest-URI:\tcontains the STN-SR, as routed to the ATCF.\nSDP:\tThe SDP contains preconfigured set of codecs supported by the MGW.\nP-Asserted-Identity:\tthe C-MSISDN of the served UE.\n4.\tConfigure ATGW (ATCF to ATGW)\nUpon receiving the access transfer message, the ATCF correlates the transferred session using C-MSISDN. The ATCF updates the ATGW by replacing the existing PS access leg media path information with the new CS access leg media path information, by sending a Configure ATGW message to ATGW.\n5.\tConfigure ATGW ACK (ATGW to ATCF)\nThe ATGW sends Configure ATGW Acknowledgment message back to ATCF.\n6.\tSIP 200 (OK) response (ATCF to MSC server)\nThe ATCF sends the SIP 200 (OK) response to the MSC server with the media information allocated by the ATGW during session establish procedure. In the SIP 200 (OK) response, the ATCF includes the Record-Route header field containing its SIP URI that indicate where the ATCF expect to receive the indialog request sent by the MSC. In the Contact header field, the ATCF inserts the saved URI of the UE B that the UE A received from the UE B when the IP bearer between the UE A and the UE B was established.\n7.\tSIP ACK request (MSC server to ATCF)\n8.\tSIP INVITE request (ATCF to I-CSCFs)-see example in table A.18.3-8\nAfter receiving the access transfer message, the ATCF establishes a new dialog with the SCC AS by sending a new SIP INVITE request to the SCC AS using the stored ATU-STI for PS to CS SRVCC. When resolving the ATU-STI for PS to CS SRVCC (e.g. via DNS access), the ATCF obtains the IP address of the I-CSCF. The ATCF updates the SCC AS via the new dialog indicating that the transfer has taken place. As there is no update in the SDP information, no remote end update will be performed.\nTable A.18.3-8: SIP INVITE request (ATCF to I-CSCF)\nINVITE sip:AUT-STI1@sccas.home1.net SIP/2.0\nVia: SIP/2.0/UDP atcf.visited2.net:5060;branch=z9hG4bk731b87\nMax-Forwards: 70\nP-Asserted-Identity: <tel:+1-237-555-2222>\nP-Charging-Vector: icid-value=\"AyretyU0dm+6O2IrT5tAFrbHLso=023551024\";orig-ioi=visit1.net\nPrivacy: none\nFrom: <tel:+1-237-555-3333>;tag=1888828\nTo: <tel: +1-237-555-4444>\nCall-ID: cb03a0s09a2sdfglkj490444\nCseq: 127 INVITE\nSupported: 100rel, precondition, gruu\nRequire: tdialog,\nRecord-Route:<sip:atcf.visited2.net:5060;lr>\nTarget-Dialog: me0s2sdfgjkl491777; remote-tag=774321; local-tag=64727891\nAccept-Contact: *;+g.3gpp.icsi-ref=\"urn%3Aurn-7%3A3gpp-service.ims.icsi.mmtel\"\nP-Asserted-Service: urn:urn-7:3gpp-service.ims.icsi.mmtel\nContact: <sip: msc1.visit1.net:1357>;+g.3gpp.icsi-ref=\"urn%3Aurn-7%3A3gpp-service.ims.icsi.mmtel\"\nAllow: INVITE, ACK, CANCEL, BYE, PRACK, UPDATE, REFER\nContent-Type: application/sdp\nContent-Length: (…)\n\nv=0\no=- 2987933615  IP6 5555::aaa:bbb:ccc:ggg\ns=\nc=IN IP6 5555::aaa:bbb:ccc:ggg\nt=0 0\nm=audio 3456 RTP/AVP 97 96\na=tcap:1 RTP/AVPF\na=pcfg:1 t=1\nb=AS:25.4\na=curr:qos local sendrecv\na=curr:qos remote none\na=des:qos mandatory local sendrecv\na=des:qos none remote sendrecv\na=rtpmap:97 AMR\na=fmtp:97 mode-set=0,2,5,7; mode-change-period=2\na=rtpmap:96 telephone-event\na=maxptime:20\n\n\nRequest-URI:\tcontains the ATU-STI for PS to CS SRVCC, that resolves (e.g. via DNS access) to the IP address of the I-CSCF.\nTarget-Dialog:\tspecifies that the existing dialog is related with this request.\nRecord-Route:\tcontains the SIP URI of the ATCF, where the ATCF expect to receive the in-dialog request from the SCC AS.\nRequire:\tthe \"tdialog\" option tag indicate that the support for Target-Dialog header field is required.\nP-Asserted-Identity:\tthe C-MSISDN of the served UE.\nSDP:\tthe media information at ATGW.\n9.\tSIP INVITE request (I-CSCF to SCC AS)\nThe I-CSCF forwards the SIP INVITE request to the SCC AS.\n10.\tSIP 200 (OK) response ( to I-CSCF)\nSince there is no update in the session description, no remote end update will be performed. The SCC AS sends confirmation response to the ATCF which contain the SDP answer that the SCC AS stored during the original session establishment procedure. The SIP 200 (OK) response also includes the Record-Route header field(s) that was constructed by the SCC AS adding its SIP URI to the Record-Route header field(s) that was received in the initial SIP INVITE request in step 9. The SIP URI of the SCC AS specifies where the SCC AS expects to receive the in-dialog request from the ATCF.\n11.\tSIP 200 (OK) response (I-CSCF to ATCF)\n12-13.\tSIP ACK request (ATCF to SCC AS via I-CSCF)\n14-17.\tSIP BYE request ( to UE A via I-CSCF, ATCF and P-CSCF)\nThe SCC AS terminates the source access leg, which was using the old IP-CAN, by sending a SIP BYE request to the UE A.\n18-21.\tSIP 200 (OK) response (UE A to SCC AS via P-CSCF, ATCF and I-CSCF)\nUpon receiving the SIP BYE request, the UE A sends a SIP 200 (OK) response to the SCC AS. Subsequently, the UE A relinquishes all resources pertaining to the old IP-CAN.\nNOTE:\tSteps 17-18 are performed only if UE A uses Gm after the PS-CS access transfer is completed; otherwise, the UE A and the network release the source access leg locally, without any signalling between the UE A and the network\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "A.18.4\tSession transfer for originating call is in alerting phase using PS to CS SRVCC procedure with ATCF: PS to CS",
                    "description": "",
                    "summary": "",
                    "text_content": "In the example flow at the figure A.18.4-1, SC UE A has invited for an originating session with speech media component which is anchored at ATCF. The session is in alerting phase. Specifically, this flow illustrates that after successful transfer procedure, a direct media path is established between MSC server and the remote UE and thus any resources in the ATCF and ATGW allocated when the original session was initiated are released.\n\nThe given telecommunication figure illustrates the signalling flow for a SIP (Session Initiation Protocol) call, focusing on the initial \"Trying\" phase where the SIP 100 responses are not depicted. The flow begins with the client initiating the call by sending a SIP request to the server, which then responds with a SIP 100 code. The figure showcases the exchange of messages between the client and server, including the establishment of a session ID and the use of a proxy server if necessary. The signalling flow is essential for understanding the initial stages of a VoIP (Voice over IP) call setup and the role of various components such as the SIP registrar, proxy, and the signaling gateway.\nNOTE:\tFor clarity, the SIP 100 (Trying) responses are not shown in the signalling flow.\nFigure A.18.4-1: PS-CS SRVCC, originating call in alerting phase\n1.\tSC UE A has setup an outgoing call\nThe media of the outgoing call has been anchored at the ATGW. Both ends have reserved the resources and SC UE A has received a SIP 180 (Ringing) response.\n2.\tSC UE A attaches to the CS domain\nUE A sends the measurement reports to E-UTRAN, and the source E-UTRAN decides to trigger an PS to CS SRVCC handover to CS access. The MSC server initiates the session transfer with the STN-SR, refer to 3GPP TS 23.237 [9]. The UE continues ringing.\n3.\tSIP INVITE request (MSC server to ATCF) - see example in table A.18.4-3\nThe MSC server sends an initial SIP INVITE request transferring the session with the recived STN-SR.\nTable A.18.4-3: SIP INVITE request (MSC server to ATCF)\nINVITE tel: +1-237-555-3333 SIP/2.0\nVia: SIP/2.0/UDP msc1.visit1.net;branch=z9hG4bk731b87\nMax-Forwards: 70\nP-Asserted-Identity: <tel:+1-237-555-1111>\nP-Charging-Vector: icid-value=\"AyretyU0dm+6O2IrT5tAFrbHLso=023551024\";orig-ioi=visit1.net\nPrivacy: none\nFrom: <tel:+1-237-555-1111>;tag=171828\nTo: <tel:+1-237-555-3333>\nCall-ID: cb03a0s09a2sdfglkj490334\nCseq: 127 INVITE\nSupported: 100rel, precondition, gruu\nAccept-Contact: *;+g.3gpp.icsi-ref=\"urn%3Aurn-7%3A3gpp-service.ims.icsi.mmtel\"\nP-Asserted-Service: urn:urn-7:3gpp-service.ims.icsi.mmtel\nContact: <sip: msc1.visit1.net:1357>;+g.3gpp.icsi-ref=\"urn%3Aurn-7%3A3gpp-service.ims.icsi.mmtel\"; g.3gpp.srvcc-alerting\nAllow: INVITE, ACK, CANCEL, BYE, PRACK, UPDATE, REFER\nRecv-Info: g.3gpp.state-and-event\nContent-Type: application/sdp\nContent-Length: (…)\n\nv=0\no=- 2987933615  IP6 5555::aaa:bbb:ccc:eee\ns=\nc=IN IP6 5555::aaa:bbb:ccc:eee\nt=0 0\nm=audio 3456 RTP/AVP 97 96\na=tcap:1 RTP/AVPF\na=pcfg:1 t=1\nb=AS:25.4\na=curr:qos local sendrecv\na=curr:qos remote none\na=des:qos mandatory local sendrecv\na=des:qos none remote sendrecv\na=rtpmap:97 AMR\na=fmtp:97 mode-set=0,2,5,7; mode-change-period=2\na=rtpmap:96 telephone-event\na=maxptime:20\n\nRequest-URI:\tcontains the STN-SR.\nSDP:\tThe SDP contains set of codecs supported by the MGW.\n4.\tSIP INVITE request (ATCF to intermediate IM CN subsystem entities) - see example in table A.18.4-4\nThe ATCF sends the initial SIP INVITE request replacing the STN-SR with an ATU-STI for PS to CS SRVCC associated with a session in the transferable session set to the intermediate IM CN subsystem entities.\nTable A.18.4-4: SIP INVITE request (ATCF to intermediate IM CN subsystem entities)\nINVITE sip:sccas1-atu-sti.home1.net SIP/2.0\nVia: SIP/2.0/UDP atcf.visited1.net:5060;branch=z9hG4bKnas56565, SIP/2.0/UDP msc1.visit1.net;branch=z9hG4bk731b87\nMax-Forwards: 69\nRoute: <sip:icscf1.visit1.net;lr>\nP-Asserted-Identity: <tel:+1-237-555-1111>\nP-Charging-Vector: icid-value=\"AyretyU0dm+6O2IrT5tAFrbHLso=023551024\";orig-ioi=visit1.net\nPrivacy: none\nFrom: <tel:+1-237-555-1111>;tag=171828\nTo: <tel:+1-237-555-3333>\nCall-ID: cb03a0s09a2sdfglkj490334\nCseq: 127 INVITE\nSupported: 100rel, precondition, gruu\nAccept-Contact: *;+g.3gpp.icsi-ref=\"urn%3Aurn-7%3A3gpp-service.ims.icsi.mmtel\"\nP-Asserted-Service: urn:urn-7:3gpp-service.ims.icsi.mmtel\nContact: <sip: msc1.visit1.net:1357>;+g.3gpp.icsi-ref=\"urn%3Aurn-7%3A3gpp-service.ims.icsi.mmtel\"; g.3gpp.srvcc-alerting\nAllow: INVITE, ACK, CANCEL, BYE, PRACK, UPDATE, REFER\nRecv-Info: g.3gpp.state-and-event\nRecord-Route: <atcf.visited1.net;lr>\nContent-Type: application/sdp\nContent-Length: (…)\n\nv=0\no=- 2987933615  IP6 5555::aaa:bbb:ccc:eee\ns=\nc=IN IP6 5555::aaa:bbb:ccc:eee\nt=0 0\nm=audio 3456 RTP/AVP 97 96\na=tcap:1 RTP/AVPF\na=pcfg:1 t=1\nb=AS:25.4\na=curr:qos local sendrecv\na=curr:qos remote none\na=des:qos mandatory local sendrecv\na=des:qos none remote sendrecv\na=rtpmap:97 AMR\na=fmtp:97 mode-set=0,2,5,7; mode-change-period=2\na=rtpmap:96 telephone-event\na=maxptime:20\n\nRequest-URI:\tcontains the ATU-STI for PS to CS SRVCC.\nRecord-Route:\tcontains ATCF URI.\nSDP:\tThe SDP contains set of codecs supported by the MGW.\n5.\tSIP INVITE request (intermediate IM CN subsystem entities to )\nThe SIP INVITE is routed towards the SCC AS, based on filter criteria in S-CSCF.\n5a.\tRemote Leg Update\nThe SCC AS correlates the initial SIP INVITE request to the local and remote call legs of the existing session between the UE A and the remote end. The SCC AS performs the Remote Leg update by sending SIP UPDATE request towards the Remote Leg.\n6.\tSIP UPDATE request ( to intermediate IM CN subsystem entities)\nThe SCC AS acting as a B2BUA generates a SIP UPDATE request based upon the received initial SIP INVITE request and the information previously stored against this session.\n7.\tSIP UPDATE request (Intermediate IM CN subsystem entities to remote UE B)\nThe intermediate IM CN subsystem entities forward the SIP UPDATE request to remote UE B.\n8.\tSIP 200 (OK) response (Remote UE B to Intermediate IM CN subsystem entities)\nUpon receiving the SIP UPDATE request containing the SDP offer for the leg to the MSC, the remote UE B sends a SIP 200 (OK) response.\n9.\tSIP 200 (OK) response (Intermediate IM CN subsystem entities to )\nThe intermediate IM CN subsystem entities forward the SIP 200 (OK) response to the SCC AS.\n10.\tSIP 183 (Session Progress) response ( to intermediate IM CN subsystem entities)\nThe SCC AS sends a 183 (Session Progress) containing the SDP answer as received from the remote UE B. The SDP answer indicates that resources are available\n11.\tSIP 183 (Session Progress) response (Intermediate IM CN subsystem entities to ATCF)\nThe intermediate IM CN subsystem entities forward the 183 (Session Progress) response to the ATCF.\n12.\tSIP 183 (Session Progress) response (ATCF to MSC server)\nThe ATCF forwards the 183 (Session Progress) response to the MSC server.\n13.\tSIP PRACK request (MSC server to ATCF)\nThe MSC acknowledges the receipt of the 183 (Session Progress) response.\n14.\tSIP PRACK request (ATCF to intermediate IM CN subsystem)\nThe ATCF forwards the SIP PRACK request to intermediate IM CN subsystem entities.\n15.\tSIP PRACK request (Intermediate IM CN subsystem entities to )\nThe intermediate IM CN subsystem entities forward the SIP PRACK request to the SCC AS.\n16.\tSIP 200 (OK) response ( to Intermediate IM CN subsystem entities)\nThe SCC AS acknowledges the SIP PRACK request.\n17.\tSIP 200 (OK) response (Intermediate IM CN subsystem entities to ATCF)\nThe intermediate IM CN subsystem entities forward the SIP 200 (OK) response to the ATCF.\n18.\tSIP 200 (OK) response (ATCF to MSC server)\nThe ATCF forwards the SIP 200 (OK) response to the MSC server.\n19.\tSIP INFO request ( to intermediate IM CN subsystem entities) - see example in table A.18.4-19\nThe SCC AS sends a SIP INFO request that indicates that the call is an early dialog and that the SC UE was the initiator.\nTable A.18.4-19: INFO request ( to intermediate IM CN subsystem entities)\nINFO sip: msc1.visit1.net:1357 SIP/2.0\nVia SIP/2.0/UDP sip:sccas1.home1.net;branch=z9hG4bK332b23.1\nMax-Forwards: 70\nRoute: <sip:scscf1.home1.net;lr> <atcf.visited1.net;lr>\nFrom: <tel: +1-237-555-3333>;tag=314159\nTo: <tel:+1-237-555-1111>;tag=171828\nCall-ID: cb03a0s09a2sdfglkj490334\nCseq: 129 INFO\nInfo-Package: g.3gpp.state-and-event\nContent-Disposition: Info-Package\nContent-Type: application/vnd.3gpp.state-and-event-info+xml\nContent-Length:\n\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<state-and-event-info>\n<state-info>early</state-info>\n<direction>initiator</direction>\n</state-and-event-info>\n\n20.\tSIP INFO request (Intermediate IM CN subsystem entities to ATCF)\nThe intermediate IM CN subsystem entities forward the SIP INFO request to the ATCF.\n21.\tSIP INFO request (ATCF to MSC server)\nThe intermediate IM CN subsystem entities forward the SIP INFO request to the ATCF. The MSC server is now aware that the call that is transferred is in originating alerting phase.\n22.\tSIP 200 (OK) response (MSC server to ATCF)\nThe ATCF forwards the SIP 200 (OK) response to intermediate IM CN subsystem entities.\n23.\tSIP 200 (OK) response (ATCF to intermediate IM CN subsystem entities)\nThe ATCF forwards the SIP 200 (OK) response to the intermediate IM CN subsystem entities.\n24.\tSIP 200 (OK) response (Intermediate IM CN subsystem entities to )\nThe intermediate IM CN subsystem entities forward the SIP 200 (OK) response to the SCC AS.\n25.\tMSC goes in Call delivered state\nThe MSC enters Call delivered (N4) state as defined in 3GPP TS 24.008 [8] due to the information received in the SIP INFO request.\n26.\tSIP 200 (OK) response (Remote UE B to intermediate IM CN subsystem entities)\nThe remote UE B accepts the call and sends a SIP 200 (OK) response.\n27.\tSIP 200 (OK) response (Intermediate IM CN subsystem entities to )\nThe intermediate IM CN subsystem entities forward the SIP 200 (OK) response to\n28.\tSIP 200 (OK) response ( to intermediate IM CN subsystem entities)\nThe SCC AS sends the SIP 200 (OK) response to indicate that the remote UE B has accepted the call.\n29.\tSIP 200 (OK) response (Intermediate IM CN subsystem entities to ATCF)\nThe SIP 200 (OK) response is forwarded to the ATCF.\n30.\tSIP 200 (OK) response (ATCF to MSC server)\nThe SIP 200 (OK) response is forwarded to the ATCF.\n31.\tCC CONNECT (MSC server to SC UE A)\nThe MSC server indicates to the SC UA A that the remote UE B has accepted the call in accordance with 3GPP TS 24.008 [8].\n32.\tSIP ACK request (MSC server to ATCF)\nThe MSC server acknowledges the SIP 200 (OK) response received from\n33.\tSIP ACK request (ATCF to intermediate IM CN subsystem entities)\nATCF forwards the SIP ACK request to the intermediate IM CN subsystem entities.\n34.\tSIP ACK request (Intermediate IM CN subsystem entities to )\nThe intermediate IM CN subsystem entities forward the SIP ACK request to the SCC AS. The SCC AS starts a operator specific timer supervising the release of the original source leg.\n35.\tSIP ACK request ( to intermediate IM CN subsystem entities)\nThe SCC AS acknowledges the SIP 200 (OK) response received towards the remote UE B.\n36.\tSIP ACK request (Intermediate IM CN subsystem entities to remote UE B)\nThe SIP ACK request is forwarded towards the remote UE B.\n37.\tCC CONNECT ACK ( server to SC UE A)\nSC UE A acknowledges the CC CONNECT in accordance with 3GPP TS 24.008 [8].\n38. SIP 404 (Not Found) response ( to intermediate IM CN subsystem entities)\nThe SCC AS releases the original source leg towards the SC UE A after the operator specific timer has expired by means of a SIP 404 (Not Found) response.\n39.\tSIP ACK (Intermediate IM CN subsystem entities to )\nThe SIP ACK request is sent to\n40. SIP 404 (Not Found) response (Intermediate IM CN subsystem entities to ATCF)\nIntermediate IM CN subsystem entities send a SIP 404 (Not Found) response in order to release to original source dialog towards the SC UE A.\n41.\tSIP ACK (ATCF to intermediate IM CN subsystem entities)\nThe SIP ACK request is sent to the intermediate IM CN subsystem entities.\n42-43.Media recources reserved in ATGW is released by ATCF.\nThe ATCF orders the ATGW to release all media terminations (including termination created due to forking on remote end) of the used for media anchoring during call setup in. The ATGW acknowledges the release.\n44-47.SIP 404 (Not Found) response (ATCF towards SC UE A)\nThe ATCF sends a SIP 404 (Not Found) response in order to release to original source dialog towards the SC UE A via P-CSCF.\nNOTE :\tThe SC UE A can only receive the SIP 404 (Not Found) response and send the SIP ACK request if the signalling bearer is not suspended.\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "A.18.5\tSignalling flows for PS to CS Access Transfer: SRVCC enhancements using ATCF with MSC server assisted mid-call feature and ATCF anchored",
                    "description": "",
                    "summary": "",
                    "text_content": "The flow shown in Figure A.18.5-1 applies if the CS to PS SRVCC is supported when the PS to CS SRVCC access transfer takes place.\nFigure A.18.5-1 illustrates the signalling flows for PS to CS access transfer enhancements using ATCF with MSC server assistance and ATCF anchored, showcasing the mid-call feature and the role of MSC servers in facilitating seamless handover and call control. The figure highlights the importance of accurate signalling and handover procedures in maintaining call quality and reducing dropped calls during network transitions.\nFigure A.18.5-1: Signalling flows for PS to CS Access Transfer: SRVCC enhancements using ATCF with MSC server assisted mid-call feature and ATCF anchored\n1.\tUE A is on an active session X with UE B and a held session Y with UE C\nUE A is on an active session X with UE B and on another held session Y with UE C. Both Sessions through PS network are anchored at ATCF, and medias are anchored at ATGW.\n2-21.\tPS to CS access transfer between UE A and UE B\nThe PS to CS access transfer between UE A and UE B is specified in subclause A.18.3: SRVCC enhancements using ATCF and media anchored.\n22.\tSIP REFER request ( to I/S-CSCF) - see example in table A.18.5-22\nThe SCC AS sends a SIP REFER request to the I/S-CSCF inside the dialog created by the message 10.\nTable A.18.5-22: SIP REFER request ( to I/S-CSCF)\nREFER sip:user1_public1@home1.net;gr=urn:uuid:f81d4fae-7dec-11d0-a76591e6bf6 SIP/2.0\nVia: SIP/2.0/UDP sip:sccas1.home1.net;branch=z9hG4bk731b\nMax-Forwards: 70\nP-Charging-Vector: icid-value=\"AyretyU0dm+6O2IrT5tAFrbHLso=023551024\"; orig-ioi=home1.net\nTo: <tel:+1-237-555-1111>;tag=171828\nFrom: <tel:+1-237-555-3333>;tag=sdfsdf\nCall-ID:  cb03a0s09a2sdfglkj490444\nCseq: 55998 REFER\nContent-Length: 125\nRoute: <sip:scscf1.home1.net;lr>\nRefer-Sub: false\nSupported: norefersub, gruu\nContact: sip:sccas1.home1.net\nRefer-To: <sip:additional.session.xfer.pscssrvcc@sccas.home1.net?Target-Dialog=ksdjfhwrklf%3Bremote-tag=676723565%3Blocal-tag=45418454&Require=tdialog&From=tel:+1-237-555-1111&To=tel:+1-987-654-3210&Content-Type=application%2Fsdp&body=v%3D0%0D%0Ao%3D-%202987933623%202987933623%20IN%20IP6%205555::ggg:fff:aaa:bbb%0D%0As%3D-%0D%0Ac%3DIN%20IP6%205555::ggg:fff:aaa:bbb%0D%0At%3D0%200%0D%0Am%3Dvideo%200%20RTP%2FAVP%2098%0D%0Am%3Daudio%203456%20RTP%2FAVP%2097%2096%0D%0Ab%3DAS:25.4%0D%0Aa%3Drtpmap:97%20AMR%0D%0Aa%3Dfmtp:97%20mode-set%3D0%2C2%2C5%2C7%3B%20mode-change-period%3D2%0D%0Aa%3Dmaxptime:20%0D%0A>\nContent-Type: multipart/mixed;boundary=\"boundary\"\n\n--boundary1\nContent-Type: application/vnd.3gpp.mid-call+xml\n\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<mid-call/>\n--boundary1\nContent-Type: application/vnd.3gpp.srvcc-ext+xml\n\n<?xml version=\"1.0\"?>\n<srvcc-ext>\n<PS-reg-info>\n<ATCF-Management-URI>sip:atcf.visited2.net</ATCF-Management-URI>\n<C-MSISDN>tel:+1-237-555-1111</C-MSISDN>\n</PS-reg-info>\n</srvcc-ext>\n--boundary1--\n\nRefer-To:\tcontains the additional transferred session SCC AS URI for PS to CS SRVCC and the following URI header fields:\nTarget-Dialog:\tthe dialog identifier of the source access leg.\nRequire:\tcontaining \"tdialog\" option tag\nFrom:\tcontains the public user identity of the UE A\nTo:\tcontains the public user identity of the UE C\nContent-Type:\tcontaining \"application/sdp\" MIME type of the \"body\" URI header field\nbody:\tSDP describing the media used in the session\n\napplication/vnd.3gpp.mid-call+xml MIME body: indicates that REFER is related to MSC server assisted mid-call feature.\napplication/vnd.3gpp.srvcc-ext+xml MIME body: provides ATCF management URI and C-MSISDN.\n\n23.\tSIP REFER request (I/S-CSCF to ATCF)\nThe I/S-CSCF forwards the SIP REFER request to the ATCF.\n24.\tSIP REFER request (ATCF to MSC server) - see example in table A.18.5-24\nThe ATCF forwards the SIP REFER within the dialog.\nTable A.18.5-24: SIP REFER request (ATCF to MSC server)\nREFER sip:user1_public1@home1.net;gr=urn:uuid:f81d4fae-7dec-11d0-a76591e6bf6 SIP/2.0\nVia: SIP/2.0/UDP sip:sccas1.home1.net;branch=z9hG4bk731b\nVia: SIP/2.0/UDP sip:scscf1.home1.net;branch=z9hG4bk869d11e\nVia: SIP/2.0/UDP sip:atcf1.home1.net;branch=z9hG4bk9251re3\nMax-Forwards: 70\nP-Charging-Vector:\nTo:\nFrom:\nCall-ID:\nCseq:\nContent-Length:\nRoute: <sip:mscserver1.home1.net;lr>\nRefer-Sub:\nSupported:\nContact:\nRefer-To: <sip:additional.session.xfer@sccas.home1.net?Target-Dialog=ksdjfhwrklf%3Bremote-tag=676723565%3Blocal-tag=45418454&Require=tdialog&From=tel:+1-237-555-1111&To=tel:+1-987-654-3210&Content-Type=application%2Fsdp&body=v%3D0%0D%0Ao%3D-%202987933623%202987933623%%20IP6%205555::ggg:fff:aaa:bbb%0D%0As%3D-%0D%%3DIN%20IP6%205555::ggg:fff:aaa:bbb%0D%0At%3D0%200%0D%0Am%3Dvideo%200%20RTP%2FAVP%2098%0D%0Am%3Daudio%203456%20RTP%2FAVP%2097%2096%0D%0Ab%3DAS:25.4%0D%0Aa%3Drtpmap:97%20AMR%0D%0Aa%3Dfmtp:97%20mode-set%3D0%2%5%7%3B%20mode-change-period%3D2%0D%0Aa%3Dmaxptime:20%0D%>\nContent-Type: multipart/mixed;boundary=\"boundary1\"\n\n--boundary1\nContent-Type: application/vnd.3gpp.mid-call+xml\n\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<mid-call/>\n--boundary1\nContent-Type: application/vnd.3gpp.srvcc-ext+xml\n\n<?xml version=\"1.0\"?>\n<srvcc-ext>\n<PS-reg-info>\n<ATCF-Management-URI>sip:atcf2.visited2.net</ATCF-Management-URI>\n<C-MSISDN>tel:+1-237-555-1111</C-MSISDN>\n</PS-reg-info>\n</srvcc-ext>\n--boundary1--\n\n\n25-27.\tSIP 200 OK response\nUpon receiving the SIP REFER request, the MSC Server sends a SIP 200 (OK) response to ATCF, ATCF forwards it to the SCC AS.\n28.\tSIP INVITE request (MSC Server to ATCF) -see example in table A.18.5-28\nUpon receiving the SIP REFER request the MSC Server sends a SIP INVITE request to the ATCF according to the Refer-To header field in the SIP REFER request. MSC server also includes Route header field with the ATCF management URI received in the application/vnd.3gpp.srvcc-ext+xml MIME body of the SIP REFER request.\nTable A.18.5-28: SIP INVITE request (MSC Server to ATCF)\nINVITE sip:additional.session.xfer@sccas.home1.net SIP/2.0\nVia: SIP/2.0/UDP msc1.home1.net;branch=z9hG4bk731b87\nMax-Forwards: 70\nP-Asserted-Identity: <tel:+1-237-555-1111>\nP-Charging-Vector: icid-value=\"AyretyU0dm+6O2IrT5tAFrbHLso=023551024\"; orig-ioi=home1.net\nPrivacy: none\nFrom: <tel:+1-237-555-1111>;tag=171828\nTo: <tel:+1-987-654-3210>\nCall-ID: asdfgqwerq\nCseq: 1275 INVITE\nSupported: 100rel, precondition, 199, gruu\nAccept-Contact: *;+g.3gpp.icsi-ref=\"urn%3Aurn-7%3A3gpp-service.ims.icsi.mmtel\"\nP-Asserted-Service: urn:urn-7:3gpp-service.ims.icsi.mmtel\nContact: <sip: msc1.visit1.net:1357>;+g.3gpp.icsi-ref=\"urn%3Aurn-7%3A3gpp-service.ims.icsi.mmtel\"\nAllow: INVITE, ACK, CANCEL, BYE, PRACK, UPDATE, REFER, MESSAGE\nTarget-Dialog: ksdjfhwrklf;remote-tag=676723565;local-tag=45418454\nRequire: tdialog\nContent-Length: (…)\nContent-Type: multipart/mixed;boundary=\"boundary1\"\nRoute: <sip:atcf2.visited2.net;lr>\n\n\n--boundary1\nContent-Type: application/sdp\nv=0\no=- 2987933615  IP6 5555::aaa:bbb:ccc:eee\ns=\nc=IN IP6 5555::aaa:bbb:ccc:eee\nt=0 0\nm=video 0 RTP/AVP 98\nm=audio 3456 RTP/AVP 97 96\na=tcap:1 RTP/AVPF\na=pcfg:1 t=1\nb=AS:25.4\na=curr:qos local sendrecv\na=curr:qos remote none\na=des:qos mandatory local sendrecv\na=des:qos none remote sendrecv\na=rtpmap:97 AMR\na=fmtp:97 mode-set=0,2,5,7; mode-change-period=2\na=rtpmap:96 telephone-event\na=maxptime:20\na=sendonly\n--boundary1\nContent-Type: application/vnd.3gpp.srvcc-ext+xml\n\n<?xml version=\"1.0\"?>\n<srvcc-ext>\n<Setup-info>\n<C-MSISDN>tel:+1-212-555-1111</C-MSISDN>\n<direction>initiator</direction>\n</Setup-info>\n</srvcc-ext>\n--boundary1--\n\nRequest-URI:\tcontains the additional transferred session SCC AS URI for PS to CS SRVCC as received in the Refer-To header field in the SIP REFER request.\nRoute:\tcontains the ATCF URI as received in the application/vnd.3gpp.srvcc-ext+xml MIME body in the SIP REFER request and with \"lr\" parameter.\nP-Asserted-Identity:\tthe C-MSISDN of the served UE.\napplication/vnd.3gpp.srvcc-ext+xml: Contains the direction of call and the C-MSISDN of the UE.\n29. ATCF configures the ATGW\nUpon receiving the SIP INVITE request to it, the ATCF decides to anchor the ATGW, and configures the ATGW. Then the ATGW return the ACK to complete the configuration.\n30-31.\tSIP INVITE request (ATCF to SCC AS via I/S-CSCF) -see example in table A.18.5-33\nThe ATCF sends the SIP INVITE request to the I/S-CSCF. The I/S-CSCF forwards the SIP INVITE request to the SCC AS.\nNOTE:\tATCF uses the same procedure as in subclause A.4.3.\nTable A.18.5-33: SIP INVITE request (ATCF to SCC AS via I/S-CSCF)\nINVITE sip:additional.session.xfer.pscssrvcc@sccas.home1.net SIP/2.0\nVia: SIP/2.0/UDP atcf1.home1.net;branch=z9hG4bk731b87\nMax-Forwards: 70\nP-Asserted-Identity:\nP-Charging-Vector:\nPrivacy: none\nFrom:\nTo:\nCall-ID: asdfgqwerq2\nCseq:\nSupported:\nAccept-Contact:\nP-Asserted-Service:\nContact:\nAllow: INVITE, ACK, CANCEL, BYE, PRACK, UPDATE, REFER, MESSAGE\nContent-Type:\nTarget-Dialog:\nRequire: tdialog\nContent-Length: (…)\n\nv=\no=\ns=\nc=\nt=\nm=\nm=\na=\na=\nb=\na=\na=\na=\na=\na=\na=\na=\na=\na=\n\n32.\tSIP re-INVITE request ( towards UE C)\n33.\tSIP 200 (OK) response to the SIP re-INVITE request (UE C towards SCC AS)\n32.\tSIP ACK request ( towards UE C)\n35-36.\tSIP 200 (OK) response ( to ATCF via I/S-CSCF)\nThe SCC AS sends the SIP 200 (OK) response to the SIP INVITE to the I/S-CSCF, and the I/S-CSCF forwards it to the ATCF.\n37.\tSIP 200 (OK) response to the SIP INVITE request (ATCF to MSC server)\n38-40.\tSIP ACK request (MSC server to  via I/S-CSCF)\nThe MSC server generates the SIP ACK request to the SIP 200 (OK) response, and sends the SIP ACK request to the I/S-CSCF. Then the I/S-CSCF forwards it to the SCC AS.\n41-43.\tSIP BYE request ( towards SC UE A via I/S-CSCF, ATCF and P-CSCF)\nThe SCC AS terminates the replaced call leg of the session Y, which was using the old IP-CAN, by sending a SIP BYE request towards the UE A which received by P-CSCF.\n44-46.\tSIP 200 (OK) response (P-CSCF to SCC AS via ATCF and I/S-CSCF)\nUpon receiving the SIP BYE request over the old IP-CAN, the P-CSCF sends a SIP 200 (OK) response over the old IP-CAN to the SCC AS.\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "A.18.6\tSignalling flows for PS to CS Access Transfer: PS to CS SRVCC enhancements using ATCF and session traverses IBCF",
                    "description": "",
                    "summary": "",
                    "text_content": "The signalling flow shown in figure A.18.6-1 gives an example for PS to CS access transfer when using PS to CS SRVCC. The call is established, contains active speech media component and has been anchored in ATGW, and traverses IBCF during the establishment of the call. There are IBCFs between ATCF and , e.g. UE A is roaming in another network. When PS to CS SRVCC enhancements using ATCF is triggered, the session trasfer notification message initiated by ATCF using ATU-STI may traverse different IBCF(s) comparing to previous signaling path duing the initial session set up between ATCF and\nThe given telecommunication figure illustrates the signalling flow for a SIP (Session Initiation Protocol) call, focusing on the initial \"Trying\" phase where the SIP 100 responses are not depicted. The flow begins with the client initiating the call by sending a SIP request to the server, which then responds with a SIP 100 code. The figure showcases the exchange of messages between the client and server, including the establishment of a session ID and the use of a proxy server if necessary. The signalling flow is essential for understanding the initial stages of a VoIP (Voice over IP) call setup and the role of various components such as the SIP registrar, proxy, and the signaling gateway.\nNOTE:\tFor clarity, the SIP 100 (Trying) responses are not shown in the signalling flow.\nFigure A.18.6-1\tSignalling flows for CS to PS Access Transfer: CS to PS SRVCC occurs during a call.\n1.\tThe UE A has a session with active speech media component with UE B\nUE A has an active session with remote UE B, media is anchored in ATGW and the session traverses IBCF1.\n2.\tSIP INVITE request (MSC server to ATCF)-see example in table -2\nTable A.18.6-2: SIP INVITE request (MSC server to ATCF)\nINVITE tel: +1-237-555-3333 SIP/2.0\nVia: SIP/2.0/UDP msc1.visit1.net;branch=z9hG4bk731b87\nMax-Forwards: 70\nP-Asserted-Identity: <tel:+1-237-555-2222>\nP-Charging-Vector: icid-value=\"AyretyU0dm+6O2IrT5tAFrbHLso=023551024\";orig-ioi=visit1.net\nPrivacy: none\nFrom: <tel:+1-237-555-1111>;tag=171828\nTo: <tel: +1-237-555-3333>\nCall-ID: cb03a0s09a2sdfglkj490334\nCseq: 127 INVITE\nSupported: 100rel, precondition, gruu\nAccept-Contact: *;+g.3gpp.icsi-ref=\"urn%3Aurn-7%3A3gpp-service.ims.icsi.mmtel\"\nP-Asserted-Service: urn:urn-7:3gpp-service.ims.icsi.mmtel\nContact: <sip: msc1.visit1.net:1357>;+g.3gpp.icsi-ref=\"urn%3Aurn-7%3A3gpp-service.ims.icsi.mmtel\"\nAllow: INVITE, ACK, CANCEL, BYE, PRACK, UPDATE, REFER\nContent-Type: application/sdp\nContent-Length: (…)\n\nv=0\no=- 2987933615  IP6 5555::aaa:bbb:ccc:eee\ns=\nc=IN IP6 5555::aaa:bbb:ccc:eee\nt=0 0\nm=audio 3456 RTP/AVP 97 96\na=tcap:1 RTP/AVPF\na=pcfg:1 t=1\nb=AS:25.4\na=curr:qos local sendrecv\na=curr:qos remote none\na=des:qos mandatory local sendrecv\na=des:qos none remote sendrecv\na=rtpmap:97 AMR\na=fmtp:97 mode-set=0,2,5,7; mode-change-period=2\na=rtpmap:96 telephone-event\na=maxptime:20\n\nRequest-URI:\tcontains the STN-SR, as routed to the ATCF.\nSDP:\tThe SDP contains preconfigured set of codecs supported by the MGW.\nP-Asserted-Identity:\tthe C-MSISDN of the served UE.\n3.\tSIP 200 (OK) response (ATCF to MSC server)\nThe ATCF sends the SIP 200 (OK) response to the MSC server with the media information allocated by the ATGW during session establish procedure. In the SIP 200 (OK) response, the ATCF includes the Record-Route header field containing its SIP URI that indicate where the ATCF expect to receive the indialog request sent by the MSC. In the Contact header field, the ATCF inserts the saved URI of the UE B that the UE A received from the UE B when the IP bearer between the UE A and the UE B was established.\n4.\tSIP ACK request (MSC server to ATCF)\n5.\tThe new CS media between UA and MSC Server/MGW is established, and the PS media between MSC Server/MGW and ATCF/ATGW is established.\n6-7.\tSIP INVITE request (ATCF to SCC AS)-see example in table A.18.6-6\nAfter receiving the access transfer message, the ATCF establishes a new dialog with the SCC AS by sending a new SIP INVITE request to the SCC AS using the stored ATU-STI. And the new dialog traverses IBCF2. The ATCF updates the SCC AS via the new dialog indicating that the transfer has taken place.\nTable A.18.6-6: SIP INVITE request (ATCF to SCC AS)\nINVITE sip:AUT-STI1@sccas.home1.net SIP/2.0\nVia: SIP/2.0/UDP atcf.visited2.net:5060;branch=z9hG4bk731b87\nMax-Forwards: 70\nP-Asserted-Identity: <tel:+1-237-555-2222>\nP-Charging-Vector: icid-value=\"AyretyU0dm+6O2IrT5tAFrbHLso=023551024\";orig-ioi=visit1.net\nPrivacy: none\nFrom: <tel:+1-237-555-3333>;tag=1888828\nTo: <tel: +1-237-555-4444>\nCall-ID: cb03a0s09a2sdfglkj490444\nCseq: 127 INVITE\nSupported: 100rel, precondition, gruu\nRequire: tdialog,\nRecord-Route:<sip: atcf.visited2.net:5060;lr>\nTarget-Dialog: me0s2sdfgjkl491777; remote-tag=774321; local-tag=64727891\nAccept-Contact: *;+g.3gpp.icsi-ref=\"urn%3Aurn-7%3A3gpp-service.ims.icsi.mmtel\"\nP-Asserted-Service: urn:urn-7:3gpp-service.ims.icsi.mmtel\nContact: <sip: msc1.visit1.net:1357>;+g.3gpp.icsi-ref=\"urn%3Aurn-7%3A3gpp-service.ims.icsi.mmtel\"\nAllow: INVITE, ACK, CANCEL, BYE, PRACK, UPDATE, REFER\nContent-Type: application/sdp\nContent-Length: (…)\n\nv=0\no=- 2987933615  IP6 5555::aaa:bbb:ccc:ggg\ns=\nc=IN IP6 5555::aaa:bbb:ccc:ggg\nt=0 0\nm=audio 3456 RTP/AVP 97 96\na=tcap:1 RTP/AVPF\na=pcfg:1 t=1\nb=AS:25.4\na=curr:qos local sendrecv\na=curr:qos remote none\na=des:qos mandatory local sendrecv\na=des:qos none remote sendrecv\na=rtpmap:97 AMR\na=fmtp:97 mode-set=0,2,5,7; mode-change-period=2\na=rtpmap:96 telephone-event\na=maxptime:20\n\n\nRequest-URI:\tcontains the ATU-STI, that resolves (e.g. via DNS access) to the IP address of the I-CSCF.\nTarget-Dialog:\tspecifies that the existing dialog is related with this request.\nRecord-Route:\tcontains the SIP URI of the ATCF, where the ATCF expect to receive the in-dialog request from the SCC AS.\nRequire:\tthe \"tdialog\" option tag indicate that the support for Target-Dialog header field is required.\nP-Asserted-Identity:\tthe C-MSISDN of the served UE.\nSDP:\tthe media information at ATGW.\n8.\tSIP re-INVITE request ( to UE-B)\nWhen the SCC AS receives the SIP INVITE from ATCF, since the SDP is different with the one in old session, the SCC AS performs the remote leg update with sending a SIP re-INVITE request to remote UE B.\n9.\tSIP 200 (OK) response (UE B to SCC AS)\n10.\tSIP ACK request ( to UE B)\n11-12.\tSIP 200 (OK) response ( to ATCF)\n13-14.\tSIP ACK request (ATCF to SCC AS)\n15.\tThere are old PS media and new PS media between ATCF and remote UE B at the same time. Therefore there is no session break due to remote leg update.\n16-18. SIP BYE request ( to UE A)\nThe SCC AS terminates the source access leg, which was using the old IP-CAN, by sending a SIP BYE request to the UE A. In this case, it's assumed that the SIP BYE request go to UE A.\n19-21.\tSIP 200 (OK) response (UE A to SCC AS)\nUpon receiving the SIP BYE request, the UE A sends a SIP 200 (OK) response to the SCC AS. Subsequently, the UE A relinquishes all resources pertaining to the old IP-CAN.\n22.\tAfter the PS to CS session transfer is completed, a new CS media between UA and MSC Server/MGW is established, and the PS media between MSC Server/MGW and ATCF/ATGW is established, and a new PS media between ATCF/ATGW and UE B is established.\n\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                }
            ]
        },
        {
            "title": "A.19\tSignalling flows for vSRVCC",
            "description": "",
            "summary": "",
            "tables": [],
            "figures_meta_data": [],
            "subsections": [
                {
                    "title": "A.19.1\tIntroduction",
                    "description": "",
                    "summary": "",
                    "text_content": "The signalling flows in this subclause demonstrate how a session consisting of active speech and video media components is transferred from PS to CS using vSRVCC procedures.\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "A.19.2\tSession transfer for active call with speech and video using vSRVCC procedure: PS to CS",
                    "description": "",
                    "summary": "",
                    "text_content": "In the example flow in figure A.19.2-1, the SC UE A has an ongoing session anchored at , with only active speech and video media components and the SC UE has an ongoing session anchored at the SCC AS with only inactive speech media component. Based upon measurement reports sent from the UE to E-UTRAN, the source E-UTRAN decides to trigger a Single Radio handover from PS to CS access.\nFigure A.19.2-1 illustrates the process of PS-CS vSRVCC for an ongoing speech and video session. The figure depicts the signaling and handover process between the PS and CS domains, highlighting the seamless transition of the ongoing session between the two domains. The figure shows the PS domain as the initial source of the session, with the PS-CS handover occurring when the user moves from the PS coverage area to the CS coverage area. The figure also shows the CS domain as the final destination of the session, with the CS-PS handover occurring when the user moves back to the PS coverage area. The figure is a valuable resource for understanding the complex process of PS-CS vSRVCC and its role in maintaining an ongoing speech and video session.\nFigure A.19.2-1: PS-CS vSRVCC for an ongoing speech and video session\n1.\tSC UE A has an active speech and video session and a held speech-only session\nThe UE has an session containing only active speech and video media components, and a session containing only inactive speech media component. The corresponding multimedia PS bearer extends between UE A and UE B via intermediate IM CN entities.\n2.\tInteraction between UE, E-UTRAN, MME and MSC\nUE A sends the measurement reports to E-UTRAN, and the source E-UTRAN decides to trigger a Single Radio handover from PS to CS access (as specified in 3GPP TS 23.216 [5]). The MME sends a PS to CS Request message, containing an vSRVCC indication and STN-SR, via Sv to the MSC.\n3.\tSIP OPTIONS request (MSC server to intermediate IM CN subsystem entities) - see example in table A.19.2-1\nThe MSC has no prior knowledge whether the most recently made active session is a session with audio and video media or a session with only audio media. The receipt of the vSRVCC indication over the Sv interface is the trigger for the MSC server to send a SIP OPTIONS request for the purpose of determining the session that was made active most recently.\nTable A.19.2-1: SIP OPTIONS request (MSC server to intermediate IM CN subsystem entities)\nOPTIONS tel: +1-237-555-3333 SIP/2.0\nVia: SIP/2.0/UDP mgcf1.visit1.net;branch=z9hG4bk731b87\nMax-Forwards: 70\nP-Asserted-Identity: <tel:+1-237-555-1111>\nFrom: <tel:+1-237-555-1111>;tag=171828\nTo:\nCall-ID: cb03a0s09a2sdfglkj490334\nContact:\nAccept: application/sdp\nContent-Length: 0\n\n4.\tSIP OPTIONS request (intermediate IM CN subsystem entities to )\nThe SIP OPTIONS request is routed towards the SCC AS.\n5.\tDetermination of session that was made active most recently\nThe SCC AS determines the session that was made active most recently, based on the C-MSISDN in the P-Asserted-Identity header field.\n6.\tSIP 200 (OK) response ( to Intermediate IM CN subsystem entities)\nThe SCC AS sends a SIP 200 (OK) response. with an SDP body containing \"m=\" lines for audio and video, as the session that was made active most recently is a session with both audio and video media. The contents of the SIP 200 (OK) allow the MSC server to determine how to populate the SDP Offer in the SIP INVITE for STN-SR (see Step 8).\nTable A.19.2-2: SIP 200 (OK) response ( to intermediate IM CN subsystem entities)\nSIP/2.0 200 OK\nVia: SIP/2.0/UDP mgcf1.visit1.net;branch=z9hG4bk731b87\nFrom: <>\nTo: <>;tag=314159\nCall-ID: cb03a0s09a2sdfglkj490334\nContent-Type: application/sdp\nContent-Length: (…)\nm=audio 3456 RTP/AVP 97 96\nm=video 3400 RTP/AVP 98 99\n\n7.\tSIP 200 (OK) response (Intermediate IM CN subsystem entities to MSC server)\nThe intermediate IM CN subsystem entities forward the SIP 200 (OK) response to the MSC server.\n8.\tSIP INVITE (MSC server to Intermediate IM CN subsystem entities)\nThe MSC server sends a SIP INVITE due to STN-SR with the following parameter settings:\nRequest-URI:\tcontains the STN-SR\nSDP:\tcontains only a speech media component and a video media component with default codecs for speech and video (as specified in 3GPP TS 26.111 [69])\nContact:\tcontains the address of the MSC server.\n9.\tSIP INVITE (Intermediate IM CN subsystem entities to )\nThe SIP INVITE is forwarded to the SCC AS with parameters listed in step 8 unchanged.\n10.\tUpdate of the remote leg\nThe SCC AS performs SIP signaling (re-INVITE) for the purpose of updating the remote leg (UE B) with new contact information (for signaling and media).\n11.\tand 12.\tSIP 200 (OK) response ( via Intermediate IM CN subsystem entities to MSC server)\nThe SCC AS acknowledges the receipt of the INVITE received in step 8. The SIP acknowledgement is forwarded to the MSC server.\n13. and 14.\tSIP ACK (MSC server via Intermediate IM CN subsystem entities to )\nThe MSC server sends a SIP acknowledgement to the Intermediate IM CN subsystem entities; it is forwarded to the SCC AS.\n15.\tand 16.\tSIP BYE request ( via intermediate IM CN subsystem entities to UE)\nThe SCC AS releases the source access.\n17.\tand 18.\tSIP 200 (OK) response (UE to SCC AS via Intermediate IM CN subsystem entities)\nThe UE acknowledges the release of the source access leg.\n19.\tUE attaches in CS and sets up a data call\nThe UE attaches in the CS domain and establishes a data call based on a BS30 bearer, as described in 3GPP TS 24.008 [8]. The UE replaces the session with active speech and video media components with the newly established CS video call.\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                }
            ]
        },
        {
            "title": "A.20\tSignalling flows for CS to PS Access Transfer: using CS to PS SRVCC",
            "description": "",
            "summary": "",
            "tables": [],
            "figures_meta_data": [],
            "subsections": [
                {
                    "title": "A.20.1\tIntroduction",
                    "description": "",
                    "summary": "",
                    "text_content": "The signalling flows in the subclause demonstrate the CS to PS access SRVCC transfer. The following signalling flows are included:\n-\tsubclause A.20.2 shows an example of CS to PS access transfer for SRVCC when CS to PS SRVCC occurs during an ongoing call for which media are anchored in ATGW.\n-\tsubclause A.20.3 shows an example of CS to PS access transfer for SRVCC when CS to PS SRVCC occurs during an ongoing call for which media are not anchored in ATGW.\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "A.20.2\tSignalling flows for CS to PS Access Transfer: CS to PS SRVCC occurs during an active call",
                    "description": "",
                    "summary": "",
                    "text_content": "The signalling flow shown in figure A.20.2-1 gives an example for CS to PS access transfer when using CS to PS SRVCC. The call is established, contains active speech media component and has been anchored in ATGW during the establishment of the call.\nThe call may have been established either via the MSC server or as the result of the CS to PS SRVCC procedure.\nThe given telecommunication figure illustrates the signalling flow for a SIP (Session Initiation Protocol) call, focusing on the initial \"Trying\" phase where the SIP 100 responses are not depicted. The flow begins with the client initiating the call by sending a SIP request to the server, which then responds with a SIP 100 code. The figure showcases the exchange of messages between the client and server, including the establishment of a session ID and the use of a proxy server if necessary. The signalling flow is essential for understanding the initial stages of a VoIP (Voice over IP) call setup and the role of various components such as the SIP registrar, proxy, and the signaling gateway.\nNOTE:\tFor clarity, the SIP 100 (Trying) responses are not shown in the signalling flow.\nFigure A.20.2-1\tSignalling flows for CS to PS Access Transfer: CS to PS SRVCC occurs during a call.\n1+2.\tThe UE A has an session with active speech media component with UE B\nThere is one CS bearer between the UE A and the MSC server, one PS bearer between the MSC server and the ATGW and one PS bearer between the ATGW and the remote end UE B. The CS call has the transaction identifier 88 (decimal) and was originated by UE B and accepted by UE A.\n3.\tThe UE A sends the measurement reports to UTRAN/GERAN that decides to trigger a CS to PS SRVCC handover to the E-UTRAN access.\n4.\tCS to PS request\nThe MSC server receives a CS to PS request indicating that a CS to PS SRVCC access transfer is initiated.\n5.\tSIP INFO request (MSC server to ATCF) - see example in table A.20.1-5\nThe MSC Server initiates the CS to PS SRVCC by means of a SIP INFO request sent towards the ATCF. The SIP INFO includes a session transfer notification request. The session transfer notification request is an indication to prepare for the transfer of media to PS.\nTable A.20.2-5: SIP INFO request (MSC server to ATCF)\nINFO sip:user2_public1@home2.net SIP/2.0\nVia: SIP/2.0/UDP [5555::aaa:bbb:ccc:ddd]:1357; branch=z9hG4bKnashds7\nMax-Forwards: 70\nRoute: <sip:atcf.visited.net;lr>, <sip:scscf.home1.net;lr>, <sip:icscf.home1.net;lr>, <sip:sccas.home1.net;lr>\nFrom: <tel:+1-212-555-2222>;tag=171828\nTo: <sip:user1_public1@home1.net>; tag=171828\nCall-ID: cb03a0s09a2sdfglkj490333\nCseq: 130 INFO\nInfo-Package: g.3gpp.access-transfer-events\nContent-Disposition: Info-Package\nContent-Type: application/vnd.3gpp.access-transfer-events+xml\nContent-Length: (…)\n\n<?xml version=\"1.0\"?>\n<events>\n<event event-type=\"1\"/>\n</events>\n\napplication/vnd.3gpp.access-transfer-events+xml:\tContains the value 1 indicating that the MSC server sends the session transfer notification request to the ATCF.\n6\tSIP 200 (OK) response (ATCF to MSC server)\nThe ATCF acknowledge the SIP INFO request.\n7.\tATCF reserves resources in ATGW\nThe ATCF reserves resources in ATGW towards UE A and the ATGW provides the SDP answer to the SDP which the UE A provided during the registration (see subclase A.3.4). Apart from the IP address and port, the SDP answer contains the same media pararameters as provided to the UE A after PS registration (see subclause A.3.4).\n8.\tSIP INFO request (ATCF to MSC server) - see example in table A.20.1-8\nThe ATCF sends a SIP INFO request containing the session transfer notification response contains the parameters required for the transfer, including IP address and media port allocated in the ATGW.\nTable A.20.2-8: SIP INFO request (ATCF to MSC server)\nINFO sip:user1_public1@visited2.net SIP/2.0\nVia:\nMax-Forwards:\nRecord-Route:\nFrom:\nTo:\nCall-ID:\nCseq:\nContent-Disposition: Info-Package\nInfo-Package: g.3gpp.access-transfer-events\nContact:\nContent-Type: application/vnd.3gpp.access-transfer-events+xml\nContent-Length: (…)\n\n<?xml version=\"1.0\"?>\n<events>\n<event event-type=\"2\">\n<STNResp-params>\n<transfer-details>AVL0IrgAAAAAAAAAbwDeAU0BvA==</transfer-details>\n<redirect-speech>false</redirect-speech>\n</STNResp-params>\n</event>\n</events>\n\napplication/vnd.3gpp.access-transfer-events+xml:\tContains the IPv6 address and port number of the ATGW. With the following <transfer-details>: ATGW-IPv6-address = 8888::111:222:333:444, ATGW-audio-UDP-port = 21236. Also indicates that the ATCF does not require the MSC server to redirect  the speech media component of the session transferred by the CS to PS SRVCC access transfer.\nInfo-Package: Indicates that the SIP INFO request contains the g.3gpp.access-transfer-events info package.\n9.\tSIP 200 (OK) response (MSC server to ATCF)\nThe MSC server acknowledge the SIP INFO request.\n10.\tThe MSC server starts the preparation for the access transfer.\n11.\tWhen access transfer is prepared, the MSC server sends CS to PS handover command to the UE using access stratum signalling.\n12.\tSIP INFO request (MSC server to ATCF) - see example in table A.20.1-12\nThe MSC server sends a SIP INFO request containing a session transfer preparation to the ATCF to instruct the ATCF that media should be switched to the target access.\nTable A.20.2-12: SIP INFO request (MSC server to ATCF)\nINFO sip:user2_public1@home2.net SIP/2.0\nVia: SIP/2.0/UDP [5555::aaa:bbb:ccc:ddd]:1357; branch=z9hG4bKnashds7\nMax-Forwards: 70\nRoute: <sip:atcf.visited.net;lr>, <sip:scscf.home1.net;lr>, <sip:icscf.home1.net;lr>, <sip:sccas.home1.net;lr>\nFrom: <tel:+1-212-555-2222>;tag=171828\nTo: <sip:user1_public1@home1.net>; tag=171828\nCall-ID: cb03a0s09a2sdfglkj490333\nCseq: 130 INFO\nContent-Disposition: Info-Package\nInfo-Package: g.3gpp.access-transfer-events\nContent-Type: application/vnd.3gpp.access-transfer-events+xml\nContent-Length: (…)\n\n<?xml version=\"1.0\"?>\n<events>\n<event event-type=\"3\"/>\n</events>\n\napplication/vnd.3gpp.access-transfer-events+xml:\tContains the event 3 indicating that MSC server requests ATCF to perform the CS to PS SRVCC access transfer, i.e. start sending media towards the UE instead of towards the MSC server.\n13.\tSIP 200 (OK) response (ATCF to MSC server)\nThe ATCF acknowledge the SIP INFO request by means of a SIP 200 (OK) response.\n14.\tATCF configures resources in ATGW\nThe ATCF configures resources in the ATGW to start sending and receiving media towards the UE A instead of the MSC server.\n15.\tThe media path is now reconfigured. The audio is sent between the UE A and ATGW using IMS signalling bearer.\n16-17. SIP INVITE request (UE A to ATCF) - see example in table A.20.1-16\nWhen the UE A receives the CS to PS handover command the UE A sends an SIP INVITE request towards the ATCF.\nTable A.20.2-16: SIP INVITE request (UE A to ATCF)\nINVITE sip:sti-rsr@atcf1.visited2.net SIP/2.0\nVia: SIP/2.0/UDP [5555::aaa:bbb:ccc:ddd]:1357;comp=sigcomp;branch=z9hG4bKnashds7\nMax-Forwards: 70\nRoute: <sip:pcscf1.visited2.net:7531;lr;comp=sigcomp>,<sip:atcf.visited.net;lr, <sip:orig@scscf1.home1.net;lr>\nP-Preferred-Identity: \"John Doe\" <tel:+1-212-555-1111>\nP-Preferred-Service: urn:urn-7:3gpp-service.ims.icsi.mmtel\nP-Access-Network-Info: 3GPP-UTRAN-TDD; utran-cell-id-3gpp=234151D0FCE11\nPrivacy: none\nFrom: <tel:+1-212-555-1111>;tag=171828\nTo: <tel:+1-212-555-2222>\nCall-ID: cb03a0s09a2sdfglkj490333\nCseq: 127 INVITE\nRequire: sec-agree\nSupported: 100rel, gruu\nProxy-Require: sec-agree\nSecurity-Verify: ipsec-3gpp; q=0.1; alg=hmac-sha-1-96; spi-c=98765432; spi-s=87654321; port-c=8642; port-s=7531\nContact: <sip:user1_public1@home1.net;gr=urn:uuid:f81d4fae-7dec-11d0-a765-00a0c91e6bf6;comp=sigcomp>;+g.3gpp.icsi-ref=\"urn%3Aurn-7%3A3gpp-service.ims.icsi.mmtel\"\nAccept-Contact: *;+g.3gpp.icsi-ref=\"urn%3Aurn-7%3A3gpp-service.ims.icsi.mmtel\"\nAllow: INVITE, ACK, CANCEL, BYE, PRACK, UPDATE, REFER, MESSAGE\nContent-Type: application/sdp\nContent-Length: (…)\nAccept: application/sdp,application/3gpp-ims+xml\n\nv=0\no=- 2987933615 2987933615 IN IP6 5555::aaa:bbb:ccc:ddd\ns=-\nc=IN IP6 5555::aaa:bbb:ccc:ddd\nt=0 0\nm=audio 3456 RTP/AVP 97 96\nb=AS:25.4\na=rtpmap:97 AMR\na=fmtp:97 mode-set=0,2,5,7; maxframes=2\na=rtpmap:96 telephone-event\n\nRequest-URI:\tcontains the STI-rSR associated with the transferred call.\nSDP offer:\tThe media parameters of the speech media component are the same as the UE A sent to ATCF during registraton (see subclause A.3.4).\n18. SIP 200 (OK) response (ATCF to P-CSCF)- see example in table A.20.1-18\nThe ATCF sends the SIP 200 (OK) response towards the UE A with the media information allocated by the ATGW.\nTable A.20.2-18: SIP 200 (OK) response (ATCF to P-CSCF)\nSIP/2.0 200 OK\nVia: SIP/2.0/UDP [5555::aaa:bbb:ccc:ddd]:1357;comp=sigcomp;branch=z9hG4bKnashds7\nMax-Forwards: 70\nRecord-Route: <sip:pcscf1.visited2.net:7531;lr;comp=sigcomp>,<sip:atcf.visited.net;lr>\nP-Asserted-Identity: <tel:+1-212-555-2222>\nPrivacy: none\nFrom: <tel:+1-212-555-1111>;tag=171828\nTo: <tel:+1-212-555-2222>;tag=aaaa\nCall-ID: cb03a0s09a2sdfglkj490333\nCseq: 127 INVITE\nContact: <sip:user1_public1@home1.net;gr=urn:uuid:f81d4fae-7dec-11d0-a765-00a0c91e6bf6;comp=sigcomp>;+g.3gpp.icsi-ref=\"urn%3Aurn-7%3A3gpp-service.ims.icsi.mmtel\"\nFeature-Caps: *;+g.3gpp.ti=\"70D8\"\nAllow: INVITE, ACK, CANCEL, BYE, PRACK, UPDATE, REFER, MESSAGE\nContent-Type: application/sdp\nContent-Length: (…)\n\nv=0\no=- 2987933615 2987933615 IN IP6 5555::aaa:bbb:ccc:ddd\ns=-\nc=IN IP6 5555::aaa:bbb:ccc:ddd\nt=0 0\nm=audio 3456 RTP/AVP 97 96\nb=AS:25.4\na=rtpmap:97 AMR\na=fmtp:97 mode-set=0,2,5,7; maxframes=2\na=rtpmap:96 telephone-event\n\nFeature-Caps:\tg.3gpp.ti feature-capability indicator with value containing the transaction identifier specified in figure 11.9 and table 11.3 of 3GPP TS 24.007 [75] encoded by hexadecimal digit. In this example, the transaction identifier 88 (decimal) and the transaction identifier flag as sent by the MSC server in CS signalling of the terminating CS call are shown.\n19.\tBearer resource reservation\nP-CSCF initiates bearer resource reservation based on the SDP answer received in the SIP 200 (OK) response.\n20. SIP 200 (OK) response (P-CSCF to UE A)\nThe P-CSCF forwards the SIP 200 (OK) response to the UE A. The UE A associates the dialog established by the SIP 200 (OK) response with the CS call where the transaction identifier sent by MSC server were equal to the value of the g.3gpp.ti feature-capability indicator in the Feature-Caps header field of the SIP 200 (OK) response.\n21-22. SIP ACK request (UE A to ATCF)\nThe UE A acknowledges the reception of the SIP 200 (OK) response.\n23.\tThe media path is now reconfigured. The audio is sent between the UE A and ATGW using a dedicated bearer.\n24-25. SIP INVITE request (ATCF to SCC AS) - see example in table A.20.1-25\nTable A.20.2-25: SIP INVITE request (ATCF to SCC AS)\nINVITE sip:cs2ps@sccas1.home1.net SIP/2.0\nRecord-Route: <sip:atcf2.visited2.net;lr>\nVia: SIP/2.0/UDP atcf.visited2.net:5060;branch=z9hG4bKnas55889, SIP/2.0/UDP [5555::aaa:bbb:ccc:ddd]:1357;;branch=z9hG4bKnashds7\nMax-Forwards: 69\nRoute: <sip:orig@scscf1.home1.net;lr>\nP-Asserted-Identity: <tel:+1-212-555-1111>\nP-Charging-Vector: icid-value=\"1234bc9876e\";icid-generated-at\"5555::aaa:bbb:ccc:ddd\";orig-ioi=visited2.net\nP-Preferred-Service:\nP-Access-Network-Info:\nPrivacy:\nFrom:\nTo:\nCall-ID:\nCseq:\nRequire:\nSupported:\nProxy-Require:\nContact:\nAccept-Contact:\nAllow:\nContent-Type:\nContent-Length:\nAccept:\n\nv=0\no=- 22 333 IN IP6 8888::111:222:333:444\ns=-\nc=IN IP6 8888::111:222:333:444\nt=0 0\nm=audio 8899 RTP/AVP 97 96\nb=AS:25.4\na=rtpmap:97 AMR\na=fmtp:97 mode-set=0,2,5,7; maxframes=2\na=rtpmap:96 telephone-event\n\nRequest-URI:\tcontains the ATU-STI for CS to PS SRVCC associated with the transferred call.\nSDP:\tThe SDP contains the SDP used at ATGW towards the remote UE B.\nP-Asserted-Identity:\tthe C-MSISDN of the served UE.\n26-27. SIP 200 (OK) response (SCC AS to ATCF)\nSince there is no update in the session description, no remote end update will be performed. The SCC AS sends confirmation response to the ATCF which contains the SDP answer that the SCC AS stored during the original session establishment procedure.\n28-29. SIP ACK request (ATCF to SCC AS)\n30-32. SIP BYE request (SCC AS to MSC server)\nThe SCC AS initiates the release of the source access leg.\n33-35. SIP 200 (OK) response (MSC server to UE A)\n36.\tThe MSC server clears the call\nThe MSC server locally clears the call.\n37.\tThe UA A clears the call\nThe UA locally clears the call.\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "A.20.3\tSignalling flows for CS to PS Access Transfer without CS media anchored in ATGW: CS to PS SRVCC occurs during an active call",
                    "description": "",
                    "summary": "",
                    "text_content": "The signalling flow shown in figure A.20.3-1 gives an example for CS to PS access transfer when using CS to PS SRVCC. The call is established, contains active speech media component and has not been anchored in ATGW during the establishment of the call.\nThe call may have been established either via the MSC server or as the result of the CS to PS SRVCC procedure.\nThe given telecommunication figure illustrates the signalling flow for a SIP (Session Initiation Protocol) call, focusing on the initial \"Trying\" phase where the SIP 100 responses are not depicted. The flow begins with the client initiating the call by sending a SIP request to the server, which then responds with a SIP 100 code. The figure showcases the exchange of messages between the client and server, including the establishment of a session ID and the use of a proxy server if necessary. The signalling flow is essential for understanding the initial stages of a VoIP (Voice over IP) call setup and the role of various components such as the SIP registrar, proxy, and the signaling gateway.\nNOTE:\tFor clarity, the SIP 100 (Trying) responses are not shown in the signalling flow.\nFigure A.20.3-1\tSignalling flows for CS to PS Access Transfer: CS to PS SRVCC occurs during a call.\n1+2.\tThe UE A has an session with active speech media component with UE B\nThere is one CS bearer between the UE A and the MSC server, one PS bearer between the MSC server and the remote end UE B. The CS call has the transaction identifier 88 (decimal) and was originated by UE B and accepted by UE A.\n3.\tThe UE A sends the measurement reports to UTRAN/GERAN that decides to trigger a CS to PS SRVCC handover to the E-UTRAN access.\n4.\tCS to PS request\nThe MSC server receives a CS to PS request indicating that a CS to PS SRVCC access transfer is initiated.\n5.\tSIP INFO request (MSC server to ATCF) - see example in table A.20.3-5\nThe MSC Server initiates the CS to PS SRVCC by means of a SIP INFO request sent towards the ATCF. The SIP INFO includes a session transfer notification request. The session transfer notification request is an indication to prepare for the transfer of media to PS.\nTable A.20.3-5: SIP INFO request (MSC server to ATCF)\nINFO sip:user2_public1@home2.net SIP/2.0\nVia: SIP/2.0/UDP [5555::aaa:bbb:ccc:ddd]:1357; branch=z9hG4bKnashds7\nMax-Forwards: 70\nRoute: <sip:atcf.visited.net;lr>, <sip:scscf.home1.net;lr>, <sip:icscf.home1.net;lr>, <sip:sccas.home1.net;lr>\nFrom: <tel:+1-212-555-2222>;tag=171828\nTo: <sip:user1_public1@home1.net>; tag=171828\nCall-ID: cb03a0s09a2sdfglkj490333\nCseq: 130 INFO\nContent-Disposition: Info-Package\nInfo-Package: g.3gpp.access-transfer-events\nContent-Type: application/vnd.3gpp.access-transfer-events+xml\nContent-Length: (…)\n\n<?xml version=\"1.0\"?>\n<events>\n<event event-type=\"1\"/>\n</events>\n\napplication/vnd.3gpp.access-transfer-events+xml:\tContains the value 1 indicating that the MSC server sends the session transfer notification request to the ATCF.\n6\tSIP 200 (OK) response (ATCF to MSC server)\nThe ATCF acknowledge the SIP INFO request.\n7.\tATCF reserves resources in ATGW\nThe ATCF reserves resources in ATGW towards UE A and the ATGW provides the SDP answer to the SDP which the UE A provided during the registration (see subclase A.3.4). Apart from the IP address and port, the SDP answer contains the same media pararameters as provided to the UE A after PS registration (see subclause A.3.4).\n8.\tSIP INFO request (ATCF to MSC server) - see example in table A.20.3-8\nThe ATCF sends a SIP INFO request containing the session transfer notification response contains the parameters required for the transfer, including IP address and media port allocated in the ATGW.\nTable A.20.3-8: SIP INFO request (ATCF to MSC server)\nINFO sip:user1_public1@visited2.net SIP/2.0\nVia:\nMax-Forwards:\nRecord-Route:\nFrom:\nTo:\nCall-ID:\nCseq:\nContent-Disposition: Info-Package\nInfo-Package: g.3gpp.access-transfer-events\nContact:\nContent-Type: application/vnd.3gpp.access-transfer-events+xml\nContent-Length: (…)\n\n<?xml version=\"1.0\"?>\n<events>\n<event event-type=\"2\">\n<STNResp-params>\n<transfer-details>AVL0IrgAAAAAAAAAbwDeAU0BvA==</transfer-details>\n<redirect-speech>true</redirect-speech>\n</STNResp-params>\n</event>\n</events>\n\napplication/vnd.3gpp.access-transfer-events+xml:\tContains the IPv6 address and port number of the ATGW. With the following <transfer-details>: ATGW-IPv6-address = 8888::111:222:333:444, ATGW-audio-UDP-port = 21236. Also indicates that the ATCF requires the MSC server to redirect the speech media component of the session transferred by the CS to PS SRVCC access transfer.\nInfo-Package: Indicates that the SIP INFO request contains the g.3gpp.access-transfer-events info package.\n9.\tSIP 200 (OK) response (MSC server to ATCF)\nThe MSC server acknowledge the SIP INFO request.\n10.\tThe MSC server starts the preparation for the access transfer.\n11.\tSIP INVITE request (MSC server to ATCF) - see example in table -11\nThe MSC sends a SIP INVITE request to the ATCF to instruct the ATCF to establish the media bearer between MGW and ATGW.\nTable -11: SIP INVITE request (MSC server to ATCF)\nINVITE sip:user2_public1@home2.net SIP/2.0\nVia: SIP/2.0/UDP [5555::aaa:bbb:ccc:ddd]:1357; branch=z9hG4bKnashds7\nMax-Forwards: 70\nRoute: <sip:atcf.visited.net;lr>, <sip:scscf.home1.net;lr>, <sip:icscf.home1.net;lr>, <sip:sccas.home1.net;lr>\nFrom: <tel:+1-212-555-2222>;tag=171828\nTo: <sip:user1_public1@home1.net>;\nCall-ID: cb03a0s09a2sdfglkj490333\nContact: <sip:msc1.home1.net;gr=urn:uuid:f81d4fae-7dec-11d0-a765-00a0c91e6bf6>;+g.3gpp.icsi-ref=\"urn%3Aurn-7%3A3gpp-service.ims.icsi.mmtel\"\nAllow: INVITE, ACK, CANCEL, BYE, PRACK, UPDATE, REFER\nCseq: 1 INVITE\nContent-Type: application/sdp\nContent-Length: (…)\n\n…\n\n12.\tSIP 200 (OK) response (ATCF to MSC server)\nThe ATCF acknowledge the SIP INVITE request by means of a SIP 200 (OK) response.\n13. SIP ACK request (MSC Server to ATCF)\nThe MSC Server acknowledges the reception of the SIP 200 (OK) response.\n14.\tWhen access transfer is prepared, the MSC server sends CS to PS handover command to the UE using access stratum signalling.\n15.\tThe MSC Server instructs the MGW to switch the media path from the source access to the target access.\n16.\tSIP INFO request (MSC server to ATCF) - see example in table -16\nThe MSC server sends a SIP INFO request containing a session transfer preparation to the ATCF to instruct the ATCF that media should be switched to the target access.\nTable -16: SIP INFO request (MSC server to ATCF)\nINFO sip:user2_public1@home2.net SIP/2.0\nVia: SIP/2.0/UDP [5555::aaa:bbb:ccc:ddd]:1357; branch=z9hG4bKnashds7\nMax-Forwards: 70\nRoute: <sip:atcf.visited.net;lr>, <sip:scscf.home1.net;lr>, <sip:icscf.home1.net;lr>, <sip:sccas.home1.net;lr>\nFrom: <tel:+1-212-555-2222>;tag=171828\nTo: <sip:user1_public1@home1.net>; tag=171828\nCall-ID: cb03a0s09a2sdfglkj490333\nCseq: 130 INFO\nContent-Disposition: Info-Package\nInfo-Package: g.3gpp.access-transfer-events\nContent-Type: application/vnd.3gpp.access-transfer-events+xml\nContent-Length: (…)\n\n<?xml version=\"1.0\"?>\n<events>\n<event event-type=\"3\"/>\n</events>\n\napplication/vnd.3gpp.access-transfer-events+xml:\tContains the event 3 indicating that MSC server requests ATCF to perform the CS to PS SRVCC access transfer, i.e. start sending media towards the UE instead of towards the MSC server.\n17.\tSIP 200 (OK) response (ATCF to MSC server)\nThe ATCF acknowledge the SIP INFO request by means of a SIP 200 (OK) response.\n18.\tATCF configures resources in ATGW\nThe ATCF configures resources in the ATGW to start sending and receiving media towards the UE A instead of the MSC server.\n19.\tThe media path is now reconfigured.\n20-21. SIP INVITE request (UE A to ATCF) - see example in table A.20.3-20\nWhen the UE A receives the CS to PS handover command the UE A sends an SIP INVITE request towards the ATCF.\nTable A.20.3-20: SIP INVITE request (UE A to ATCF)\nINVITE sip:sti-rsr@atcf1.visited2.net SIP/2.0\nVia: SIP/2.0/UDP [5555::aaa:bbb:ccc:ddd]:1357;comp=sigcomp;branch=z9hG4bKnashds7\nMax-Forwards: 70\nRoute: <sip:pcscf1.visited2.net:7531;lr;comp=sigcomp>,<sip:atcf.visited.net;lr, <sip:orig@scscf1.home1.net;lr>\nP-Preferred-Identity: \"John Doe\" <tel:+1-212-555-1111>\nP-Preferred-Service: urn:urn-7:3gpp-service.ims.icsi.mmtel\nP-Access-Network-Info: 3GPP-UTRAN-TDD; utran-cell-id-3gpp=234151D0FCE11\nPrivacy: none\nFrom: <tel:+1-212-555-1111>;tag=171828\nTo: <tel:+1-212-555-2222>\nCall-ID: cb03a0s09a2sdfglkj490333\nCseq: 127 INVITE\nRequire: sec-agree\nSupported: 100rel, gruu\nProxy-Require: sec-agree\nSecurity-Verify: ipsec-3gpp; q=0.1; alg=hmac-sha-1-96; spi-c=98765432; spi-s=87654321; port-c=8642; port-s=7531\nContact: <sip:user1_public1@home1.net;gr=urn:uuid:f81d4fae-7dec-11d0-a765-00a0c91e6bf6;comp=sigcomp>;+g.3gpp.icsi-ref=\"urn%3Aurn-7%3A3gpp-service.ims.icsi.mmtel\"\nAccept: application/sdp, application/3gpp-ims+xml\nAccept-Contact: *;+g.3gpp.icsi-ref=\"urn%3Aurn-7%3A3gpp-service.ims.icsi.mmtel\"\nAllow: INVITE, ACK, CANCEL, BYE, PRACK, UPDATE, REFER, MESSAGE\nContent-Type: application/sdp\nContent-Length: (…)\n\nv=0\no=- 2987933615 2987933615 IN IP6 5555::aaa:bbb:ccc:ddd\ns=-\nc=IN IP6 5555::aaa:bbb:ccc:ddd\nt=0 0\nm=audio 3456 RTP/AVP 97 96\nb=AS:25.4\na=rtpmap:97 AMR\na=fmtp:97 mode-set=0,2,5,7; maxframes=2\na=rtpmap:96 telephone-event\n\nRequest-URI:\tcontains the STI-rSR associated with the transferred call.\nSDP offer:\tThe media parameters of the speech media component are the same as the UE A sent to ATCF during registration (see subclause A.3.4).\n22. SIP 200 (OK) response (ATCF to P-CSCF) - see example in table A.20.3-22\nThe ATCF sends the SIP 200 (OK) response towards the UE A with the media information allocated by the ATGW.\nTable A.20.3-22: SIP 200 (OK) response (ATCF to P-CSCF)\nSIP/2.0 200 OK\nVia: SIP/2.0/UDP [5555::aaa:bbb:ccc:ddd]:1357;comp=sigcomp;branch=z9hG4bKnashds7\nMax-Forwards: 70\nRecord-Route: <sip:pcscf1.visited2.net:7531;lr;comp=sigcomp>,<sip:atcf.visited.net;lr>\nP-Asserted-Identity: <tel:+1-212-555-2222>\nPrivacy: none\nFrom: <tel:+1-212-555-1111>;tag=171828\nTo: <tel:+1-212-555-2222>;tag=aaaa\nCall-ID: cb03a0s09a2sdfglkj490333\nCseq: 127 INVITE\nContact: <sip:user1_public1@home1.net;gr=urn:uuid:f81d4fae-7dec-11d0-a765-00a0c91e6bf6;comp=sigcomp>;+g.3gpp.icsi-ref=\"urn%3Aurn-7%3A3gpp-service.ims.icsi.mmtel\"\nFeature-Caps: *;+g.3gpp.ti=\"70D8\"\nAllow: INVITE, ACK, CANCEL, BYE, PRACK, UPDATE, REFER, MESSAGE\nContent-Type: application/sdp\nContent-Length: (…)\n\nv=0\no=- 2987933615 2987933615 IN IP6 5555::aaa:bbb:ccc:ddd\ns=-\nc=IN IP6 5555::aaa:bbb:ccc:ddd\nt=0 0\nm=audio 3456 RTP/AVP 97 96\nb=AS:25.4\na=rtpmap:97 AMR\na=fmtp:97 mode-set=0,2,5,7; maxframes=2\na=rtpmap:96 telephone-event\n\nFeature-Caps:\tg.3gpp.ti feature-capability indicator with value containing the transaction identifier specified in figure 11.9 and table 11.3 of 3GPP TS 24.007 [75] encoded by hexadecimal digit. In this example, the transaction identifier 88 (decimal) and the transaction identifier flag as sent by the MSC server in CS signalling of the terminating CS call are shown.\n23.\tBearer resource reservation\nP-CSCF initiates bearer resource reservation based on the SDP answer received in the SIP 200 (OK) response.\n24. SIP 200 (OK) response (P-CSCF to UE A)\nThe P-CSCF forwards the SIP 200 (OK) response to the UE A. The UE A associates the dialog established by the SIP 200 (OK) response with the CS call where the transaction identifier sent by MSC server were equal to the value of the g.3gpp.ti feature-capability indicator in the Feature-Caps header field of the SIP 200 (OK) response.\n25-26. SIP ACK request (UE A to ATCF)\nThe UE A acknowledges the reception of the SIP 200 (OK) response.\n25.\tThe media path is now reconfigured. The audio is sent between the UE A and ATGW using a dedicated bearer.\n27-28. SIP INVITE request (ATCF to SCC AS) - see example in table A.20.3-27\nTable A.20.3-27: SIP INVITE request (ATCF to SCC AS)\nINVITE sip:cs2ps@sccas1.home1.net SIP/2.0\nRecord-Route: <sip:atcf2.visited2.net;lr>\nVia: SIP/2.0/UDP atcf.visited2.net:5060;branch=z9hG4bKnas55889, SIP/2.0/UDP [5555::aaa:bbb:ccc:ddd]:1357;;branch=z9hG4bKnashds7\nMax-Forwards: 69\nRoute: <sip:orig@scscf1.home1.net;lr>\nP-Asserted-Identity: <tel:+1-212-555-1111>\nP-Charging-Vector: icid-value=\"1234bc9876e\";icid-generated-at\"5555::aaa:bbb:ccc:ddd\";orig-ioi=visited2.net\nP-Preferred-Service:\nP-Access-Network-Info:\nPrivacy:\nFrom:\nTo:\nCall-ID:\nCseq:\nRequire:\nSupported:\nProxy-Require:\nContact:\nAccept:\nAccept-Contact:\nAllow:\nContent-Type:\nContent-Length:\n\n\nv=0\no=- 22 333 IN IP6 8888::111:222:333:444\ns=-\nc=IN IP6 8888::111:222:333:444\nt=0 0\nm=audio 8899 RTP/AVP 97 96\nb=AS:25.4\na=rtpmap:97 AMR\na=fmtp:97 mode-set=0,2,5,7; maxframes=2\na=rtpmap:96 telephone-event\n\nRequest-URI:\tcontains the ATU-STI for CS to PS SRVCC associated with the transferred call.\nSDP:\tThe SDP contains the SDP used at ATGW towards the remote UE B.\nP-Asserted-Identity:\tthe C-MSISDN of the served UE.\n29-30. SIP 200 (OK) response ( to ATCF)\nSince there is update in the session description, remote end update will be performed. The SCC AS sends confirmation response to the ATCF which contain the SDP answer that the SCC AS recevied during remote end update procedure.\n31-32. SIP ACK request (ATCF to SCC AS)\n33. SIP BYE request (ATCF to MSC Server)\nUpon receiving the SIP 200 (OK) response from , the ATCF sends a SIP BYE request to MSC Server to release the session established by SIP INVITE requet in step 11.\n34. SIP 200 (OK) response (MSC Server to ATCF)\nMSC server sends the SIP 200 (OK) response to the ATCF.\n35-37. SIP BYE request ( to MSC server)\nThe SCC AS initiates the release of the source access leg.\n38-40. SIP 200 (OK) response (MSC server to UE A)\n41.\tThe audio is sent between the UE A and ATGW using a dedicated PS bearer.\n42.\tThe MSC server clears the call\nThe MSC server locally clears the call.\n43.\tThe UA A clears the call\nThe UA locally clears the call.\n\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                }
            ]
        },
        {
            "title": "C.1\tGeneral",
            "description": "This subclause describes the media feature tag definitions and the feature-capability indicators definitions that are applicable for the 3GPP IM CN Subsystem for the realisation of the MSC server assisted mid-call feature, Access Transfer Control Function, and PS to CS SRVCC for calls in alerting phase.\n",
            "summary": "",
            "tables": [],
            "figures_meta_data": [],
            "subsections": []
        },
        {
            "title": "C.2\tDefinition of media feature tag g.3gpp.mid-call",
            "description": "Media feature-tag name: g.3gpp.mid-call\nASN.1 Identifier: .1.8.2.12\nSummary of the media feature indicated by this tag: This feature-tag when used in a SIP request or a SIP response indicates that the function sending the SIP message supports the MSC server assisted mid-call feature.\nValues appropriate for use with this feature-tag: Boolean\nThe feature-tag is intended primarily for use in the following applications, protocols, services, or negotiation mechanisms: This feature-tag is most useful in a communications application, for describing the capabilities of a device, such as a phone or PDA.\nExamples of typical use: Indicating that a mobile phone supports the MSC server assisted mid-call feature\nRelated standards or documents: 3GPP TS 24.237: \"IP Multimedia Subsystem (IMS) Service Continuity; Stage 3\"\nSecurity Considerations: Security considerations for this media feature-tag are discussed in subclause 12.1 of IETF RFC 3840 [53].\n",
            "summary": "",
            "tables": [],
            "figures_meta_data": [],
            "subsections": []
        },
        {
            "title": "C.2A\tDefinition of feature-capability indicator g.3gpp.mid-call",
            "description": "Feature-capability indicator name: g.3gpp.mid-call\nSummary of the feature indicated by this feature-capability indicator:\nThis feature-capability indicator when used in a Feature-Caps header field of a SIP request or a SIP response indicates that:\n1.\tthe functional entity including the feature-capability indicator in the SIP message supports the MSC server assisted mid-call feature; and\n2.\tall entities of which the functional entity including the feature-capability indicator in the SIP message is aware of being requested to support the feature do support the MSC server assisted mid-call feature.\nFeature-capability indicator specification reference:\n3GPP TS 24.237, http://www.3gpp.org/ftp/Specs/archive/24_series/24.237/\nValues appropriate for use with this feature-capability indicator: none\nExamples of typical use: Indicating that a network entity supports the MSC server assisted mid-call feature.\nSecurity Considerations: Security considerations for this feature-capability indicator are discussed in clause 9 of IETF RFC 6809 [60].\n",
            "summary": "",
            "tables": [],
            "figures_meta_data": [],
            "subsections": []
        },
        {
            "title": "C.3\tVoid",
            "description": "",
            "summary": "",
            "tables": [],
            "figures_meta_data": [],
            "subsections": []
        },
        {
            "title": "C.4\tDefinition of feature-capability indicator g.3gpp.atcf",
            "description": "Feature-capability indicator name: g.3gpp.atcf\nSummary of the feature indicated by this feature-capability indicator:\nThis feature-capability indicator when included in a Feature-Caps header field as specified in IETF RFC 6809 [60] in a SIP REGISTER request or a SIP response to the SIP REGISTER request indicates presence and support of a resource which is an Access Transfer Control Function (ATCF) and also the session transfer number allocated to the ATCF.\nFeature-capability indicator specification reference:\n3GPP TS 24.237, http://www.3gpp.org/ftp/Specs/archive/24_series/24.237/\nValues appropriate for use with this feature-capability indicator:\nNone or string with an equality relationship. When used in a Feature-Caps header field in SIP REGISTER request or response, the value is string containing the session transfer number allocated to the ATCF following the syntax as described in table C.4-1 for g-3gpp-atcf-in-path.\nTable C.4-1: ABNF syntax of values of the g.3gpp.atcf feature-capability indicator\ng-3gpp-atcf-in-path = STN-SR\nSTN-SR = \"<\" addr-spec \">\"\n\nThe feature-capability indicator is intended primarily for use in the following applications, protocols, services, or negotiation mechanisms: This feature-capability indicator is used to indicate support of the ATCF.\nExamples of typical use: Indicating the presence and support of an ATCF on the routing path of the SIP REGISTER request and SIP response to the SIP REGISTER request and providing the session transfer number allocated to this ATCF.\nSecurity Considerations: Security considerations for this feature-capability indicator are discussed in clause 9 of IETF RFC 6809 [60].\n",
            "summary": "",
            "tables": [],
            "figures_meta_data": [],
            "subsections": []
        },
        {
            "title": "C.5\tDefinition of media feature tag g.3gpp.srvcc-alerting",
            "description": "Media feature-tag name: g.3gpp.srvcc-alerting\nASN.1 Identifier: .1.8.2.13\nSummary of the media feature indicated by this tag: This media feature-tag when used in a Contact header field of a SIP request or a SIP response indicates that the functional entity sending the SIP message supports the PS to CS SRVCC for calls in alerting phase, i.e. for calls with early dialog.\nValues appropriate for use with this feature-tag: Boolean\nThe feature-tag is intended primarily for use in the following applications, protocols, services, or negotiation mechanisms: This feature-tag is most useful in a communications application, for describing the capabilities of a device, such as a phone or PDA.\nExamples of typical use: Indicating that a user equipment supports the PS to CS SRVCC for calls in alerting phase.\nRelated standards or documents: 3GPP TS 24.237: \"IP Multimedia Subsystem (IMS) Service Continuity; Stage 3\"\nSecurity Considerations: Security considerations for this media feature-tag are discussed in subclause 12.1 of IETF RFC 3840 [53].\n",
            "summary": "",
            "tables": [],
            "figures_meta_data": [],
            "subsections": []
        },
        {
            "title": "C.5A\tDefinition of feature-capability indicator g.3gpp.srvcc-alerting",
            "description": "Feature-capability indicator name: g.3gpp.srvcc-alerting\nSummary of the feature indicated by this feature-capability indicator:\nThis feature-capability indicator when used in a Feature-Caps header field of a SIP request or a SIP response indicates that:\n1.\tthe functional entity including the feature-capability indicator in the SIP message supports the PS to CS SRVCC for calls in alerting phase; and\n2.\tall entities of which the functional entity including the feature-capability indicator in the SIP message is aware of being requested to support the feature do support the PS to CS SRVCC for calls in alerting phase.\nFeature-capability indicator specification reference:\n3GPP TS 24.237, http://www.3gpp.org/ftp/Specs/archive/24_series/24.237/\nValues appropriate for use with this feature-capability indicator: none\nExamples of typical use: Indicating that a network entity supports the PS to CS SRVCC for calls in alerting phase.\nSecurity Considerations: Security considerations for this feature-capability indicator are discussed in clause 9 of IETF RFC 6809 [60].\n",
            "summary": "",
            "tables": [],
            "figures_meta_data": [],
            "subsections": []
        },
        {
            "title": "C.6\tDefinition of feature-capability indicator g.3gpp.atcf-mgmt-uri",
            "description": "Feature-capability indicator name: g.3gpp.atcf-mgmt-uri\nSummary of the feature indicated by this feature-capability indicator:\nThis feature-capability indicator when used in a Feature-Caps header field as specified in IETF RFC 6809 [60] in SIP REGISTER request indicates presence and support of performing as a UAS for SIP requests for ATCF management received at this URI.\nFeature-capability indicator specification reference:\n3GPP TS 24.237, http://www.3gpp.org/ftp/Specs/archive/24_series/24.237/\nValues appropriate for use with this feature-capability indicator:\nString with an equality relationship. When used in a Feature-Caps header field, the value is string following the syntax as described in table C.6-1 for g-3gpp-atcf-mgmt-uri-in-path.\nTable C.6-1: ABNF syntax of values of the g.3gpp.atcf-mgmt-uri feature-capability indicator\ng-3gpp-atcf-mgmt-uri-in-path = \"<\" SIP-URI \">\"\n\n\nThe feature-capability indicator is intended primarily for use in the following applications, protocols, services, or negotiation mechanisms: This feature-capability indicator is used to indicate the management URI of the ATCF for receiving SIP requests where the ATCF performs the UAS role.\nExamples of typical use: Indicating the management URI of the ATCF for SIP requests containing PS to CS SRVCC related information.\nSecurity Considerations: Security considerations for this feature-capability indicator are discussed in clause 9 of IETF RFC 6809 [60].\n",
            "summary": "",
            "tables": [],
            "figures_meta_data": [],
            "subsections": []
        },
        {
            "title": "C.7\tDefinition of feature-capability indicator g.3gpp.srvcc",
            "description": "Feature-capability indicator name: g.3gpp.srvcc\nSummary of the feature indicated by this feature-capability indicator:\nThis feature-capability indicator when included in a Feature-Caps header field as specified in IETF RFC 6809 [60] of:\n-\ta SIP INVITE request; or\n-\ta SIP INVITE response;\nindicates presence and support of a resource capable of performing the PS to CS SRVCC access transfer procedure as specified in 3GPP TS 24.237.\nFeature-capability indicator specification reference:\n3GPP TS 24.237, http://www.3gpp.org/ftp/Specs/archive/24_series/24.237/\nValues appropriate for use with this feature-capability indicator: none\nThe feature-capability indicator is intended primarily for use in the following applications, protocols, services, or negotiation mechanisms: This feature-capability indicator is most useful in a communications application for indicating that a resource supports single radio voice call continuity.\nExamples of typical use: Indicating that a resource supports single radio voice call continuity.\nSecurity Considerations: Security considerations for this feature-capability indicator are discussed in clause 9 of IETF RFC 6809 [60].\n",
            "summary": "",
            "tables": [],
            "figures_meta_data": [],
            "subsections": []
        },
        {
            "title": "C.8\tDefinition of feature-capability indicator g.3gpp.atcf-path",
            "description": "Feature-capability indicator name: g.3gpp.atcf-path\nSummary of the feature indicated by this feature-capability indicator:\nThis feature-capability indicator when used in a Feature-Caps header field as specified in IETF RFC 6809 [60] in SIP REGISTER request indicates capability of identifying the registration path and binding SRVCC related information to it.\nFeature-capability indicator specification reference:\n3GPP TS 24.237, http://www.3gpp.org/ftp/Specs/archive/24_series/24.237/\nValues appropriate for use with this feature-capability indicator:\nString with an equality relationship. When used in a Feature-Caps header field, the value is a SIP URI of ATCF, the ATCF URI for terminating requests, identifying the registration path following the syntax as described in table C.8-1 for g-3gpp-atcf-path.\nTable C.8-1: ABNF syntax of values of the g.3gpp.atcf-path feature-capability indicator\ng-3gpp-atcf-path = \"<\" SIP-URI \">\"\n\n\n\nThe feature-capability indicator is intended primarily for use in the following applications, protocols, services, or negotiation mechanisms: This feature-capability indicator is used in access transfer control function of single radio voice call continuity to identify registration path so that SCC AS can provided the SRVCC related information related to the registration path.\nExamples of typical use: Indicating capability of identifying a registration path and binding SRVCC related information to it.\nSecurity Considerations: Security considerations for this feature-capability indicator are discussed in clause 9 of IETF RFC 6809 [60].\n",
            "summary": "",
            "tables": [],
            "figures_meta_data": [],
            "subsections": []
        },
        {
            "title": "C.9\tDefinition of media feature tag g.3gpp.cs2ps-srvcc",
            "description": "Media feature tag name: g.3gpp.cs2ps-srvcc\nASN.1 Identifier: .1.8.2.16\nSummary of the media feature indicated by this tag:\nThis media feature tag when included in Contact header field indicates support of the CS to PS single radio voice call continuity as specified in 3GPP TS 24.237.\nValues appropriate for use with this feature tag: Boolean\nThe feature tag is intended primarily for use in the following applications, protocols, services, or negotiation mechanisms: This feature tag is most useful in a communications application for indicating that a resource supports the CS to PS single radio voice call continuity.\nExamples of typical use: Indicating that a resource supports the CS to PS single radio voice call continuity.\nRelated standards or documents: 3GPP TS 24.237: \"IP Multimedia Subsystem (IMS) Service Continuity; Stage 3\"\nSecurity Considerations: Security considerations for this media feature tag are discussed in subclause 12.1 of IETF RFC 3840 [53].\n",
            "summary": "",
            "tables": [],
            "figures_meta_data": [],
            "subsections": []
        },
        {
            "title": "C.9A\tDefinition of feature-capability indicator g.3gpp.cs2ps-srvcc",
            "description": "Feature-capability indicator name: g.3gpp.cs2ps-srvcc\nSummary of the feature indicated by this feature-capability indicator:\nThis feature-capability indicator when included in Feature-Caps header field as specified in IETF RFC 6809 [60] indicates support of the CS to PS single radio voice call continuity as specified in 3GPP TS 24.237.\nFeature-capability indicator specification reference:\n3GPP TS 24.237, http://www.3gpp.org/ftp/Specs/archive/24_series/24.237/\nValues appropriate for use with this feature-capability indicator:\nnone or string with an equality relationship\nWhen the value is string, the value contains the session transfer identifier for CS to PS SRVCC and follows the syntax as described in table C.9A-1 for g.3gpp.cs2ps-srvcc-value.\nTable C.9A-1: ABNF syntax of string values of the g.3gpp.cs2ps-srvcc feature-capability indicator\ng.3gpp.cs2ps-srvcc-value = STI-rSR\nSTI-rSR = \"<\" addr-spec \">\"\n\nExamples of typical use: Indicating that a resource supports the CS to PS single radio voice call continuity.\nSecurity Considerations: Security considerations for this feature-capability indicator are discussed in clause 9 of IETF RFC 6809 [60].\n",
            "summary": "",
            "tables": [],
            "figures_meta_data": [],
            "subsections": []
        },
        {
            "title": "C.10\tVoid",
            "description": "",
            "summary": "",
            "tables": [],
            "figures_meta_data": [],
            "subsections": []
        },
        {
            "title": "C.11\tDefinition of media feature tag g.3gpp.path",
            "description": "Media feature-tag name: g.3gpp.path\nASN.1 Identifier: .1.8.2.15\nSummary of the media feature indicated by this tag:\nThis media feature tag when used in a Contact header field in SIP REGISTER request or SIP response to the SIP REGISTER request indicates capability of identifying the registration path and binding SRVCC related information to it.\nValues appropriate for use with this feature-tag:\nString with an equality relationship. The value is the URI for terminating requests, identifying the registration path, and follows the syntax described in table C.11-1 for g-3gpp-path-value.\nTable C.11-1: ABNF syntax of string values of the g.3gpp.path media feature tag\ng-3gpp-path-value = SIP-URI\n\nThe feature-tag is intended primarily for use in the following applications, protocols, services, or negotiation mechanisms: This feature-tag is used in MSC server to identify registration path so that SCC AS can provided the SRVCC related information related to the registration path.\nExamples of typical use: Indicating capability of identifying a registration path and binding SRVCC related information to it.\nRelated standards or documents: 3GPP TS 24.237: \"IP Multimedia Subsystem (IMS) Service Continuity; Stage 3\"\nSecurity Considerations: Security considerations for this media feature-tag are discussed in subclause 12.1 of IETF RFC 3840 [53].\n",
            "summary": "",
            "tables": [],
            "figures_meta_data": [],
            "subsections": []
        },
        {
            "title": "C.12\tDefinition of media feature tag g.3gpp.ti",
            "description": "Media feature-tag name: g.3gpp.ti\nASN.1 Identifier: .1.8.2.18\nSummary of the media feature indicated by this tag:\nThis media feature tag when used in a Contact header field as specified in IETF RFC 3840 [53] in SIP INVITE request or SIP response to the SIP INVITE request indicates the capability of associating a CS call with dialog created by the SIP INVITE request.\nValues appropriate for use with this feature-tag:\nString with an equality relationship. The value is the transaction identifier specified in figure 11.9 and table 11.3 of 3GPP TS 24.007 [75] encoded by hexadecimal digits. Each octet of the figure 11.9 of 3GPP TS 24.007 [75] is encoded by two hexadecimal digit, first of which represents the bits 8 - 5 of the octet. The transaction identifier flag is set as sent by the MSC server in CS signalling of the associated CS call.\nThe feature-tag is intended primarily for use in the following applications, protocols, services, or negotiation mechanisms: This feature-tag is used to indicate capability of associating a CS call with dialog created by the SIP INVITE request.\nExamples of typical use: Indicating capability of associating a CS call with dialog created by the SIP INVITE request.\nRelated standards or documents: 3GPP TS 24.237: \"IP Multimedia Subsystem (IMS) Service Continuity; Stage 3\"\nSecurity Considerations: Security considerations for this media feature tag are discussed in subclause 12.1 of IETF RFC 3840 [53].\n",
            "summary": "",
            "tables": [],
            "figures_meta_data": [],
            "subsections": []
        },
        {
            "title": "C.12A\tDefinition of feature-capability indicator g.3gpp.ti",
            "description": "Feature-capability indicator name: g.3gpp.ti\nSummary of the feature indicated by this feature-capability indicator:\nThis feature-capability indicator when used in a Feature-Caps header field as specified in IETF RFC 6809 [60] in SIP INVITE request or SIP response to the SIP INVITE request indicates the capability of associating a CS call with dialog created by the SIP INVITE request.\nFeature-capability indicator specification reference:\n3GPP TS 24.237, http://www.3gpp.org/ftp/Specs/archive/24_series/24.237/\nValues appropriate for use with this feature-capability indicator:\nString with an equality relationship. The value is the transaction identifier specified in figure 11.9 and table 11.3 of 3GPP TS 24.007 [75] encoded by hexadecimal digits following the syntax as described in table C.12A-1 for g.3gpp.ti-value. Each octet of the figure 11.9 of 3GPP TS 24.007 [75] is encoded by two hexadecimal digit, first of which represents the bits 8 - 5 of the octet. The transaction identifier flag is set as sent by the MSC server in CS signalling of the associated CS call.\nTable C.12A-1: ABNF syntax of string values of the g.3gpp.ti feature-capability indicator\ng.3gpp.ti-value = \"<\" HEXDIG HEXDIG *( HEXDIG HEXDIG ) \">\"\n\nExamples of typical use: Indicating capability of associating a CS call with dialog created by the SIP INVITE request.\nSecurity Considerations: Security considerations for this feature-capability indicator are discussed in clause 9 of IETF RFC 6809 [60].\n",
            "summary": "",
            "tables": [],
            "figures_meta_data": [],
            "subsections": []
        },
        {
            "title": "C.13\tDefinition of media feature tag g.3gpp.cs2ps-srvcc-alerting",
            "description": "Media feature-tag name: g.3gpp.cs2ps-srvcc-alerting\nASN.1 Identifier: .1.8.2.14\nSummary of the media feature indicated by this tag: This media feature-tag when used in a Contact header field of a SIP request or a SIP response indicates that the functional entity sending the SIP message supports CS to PS SRVCC for calls in alerting phase.\nValues appropriate for use with this feature-tag: Boolean\nThe feature-tag is intended primarily for use in the following applications, protocols, services, or negotiation mechanisms: This feature-tag is most useful in a communications application, for describing the capabilities of a device, such as a phone or PDA.\nExamples of typical use: Indicating that a user equipment supports the CS to PS SRVCC for calls in alerting phase.\nRelated standards or documents: 3GPP TS 24.237: \"IP Multimedia Subsystem (IMS) Service Continuity; Stage 3\"\nSecurity Considerations: Security considerations for this media feature-tag are discussed in subclause 12.1 of IETF RFC 3840 [34].\n",
            "summary": "",
            "tables": [],
            "figures_meta_data": [],
            "subsections": []
        },
        {
            "title": "C.14\tDefinition of media feature tag g.3gpp.pstops-sti",
            "description": "Media feature-tag name: g.3gpp.pstops-sti\nASN.1 Identifier: .1.8.2.17\nSummary of the media feature indicated by this tag: This media feature-tag when used in a Contact header field of a SIP request or a SIP response indicates that the functional entity sending the SIP message supports the use of the PS to PS STI URI.\nValues appropriate for use with this feature-tag: Boolean\nThe feature-tag is intended primarily for use in the following applications, protocols, services, or negotiation mechanisms: This feature-tag is most useful in a communications application, for describing the capabilities of a device, such as a phone or PDA.\nExamples of typical use: Indicating that the user equipment supports the use of the PS to PS STI URI for access transfer.\nRelated standards or documents: 3GPP TS 24.237: \"IP Multimedia Subsystem (IMS) Service Continuity; Stage 3\"\nSecurity Considerations: Security considerations for this media feature-tag are discussed in subclause 12.1 of IETF RFC 3840 [34].\n",
            "summary": "",
            "tables": [],
            "figures_meta_data": [],
            "subsections": []
        },
        {
            "title": "C.15\tDefinition of media feature tag g.3gpp.drvcc-alerting",
            "description": "Media feature-tag name: g.3gpp.drvcc-alerting\nASN.1 Identifier: .1.8.2.19\nThe g.3gpp.drvcc-alerting media feature tag shall be registered in the IANA Media Feature Tags registry \"\" sub-registry.\nSummary of the media feature indicated by this tag: This media feature-tag when used in a Contact header field of a SIP request or a SIP response indicates that the functional entity sending the SIP message supports the PS to CS dual radio access transfer for calls in alerting phase.\nValues appropriate for use with this feature-tag: Boolean\nThe feature-tag is intended primarily for use in the following applications, protocols, services, or negotiation mechanisms: This feature-tag is most useful in a communications application, for describing the capabilities of a device, such as a phone or PDA.\nExamples of typical use: Indicating that the user equipment supports the PS to CS dual radio access transfer for calls in alerting phase.\nRelated standards or documents: 3GPP TS 24.237: \"IP Multimedia Subsystem (IMS) Service Continuity; Stage 3\"\nSecurity Considerations: Security considerations for this media feature-tag are discussed in subclause 12.1 of IETF RFC 3840 [34].\n",
            "summary": "",
            "tables": [],
            "figures_meta_data": [],
            "subsections": []
        },
        {
            "title": "C.16\tDefinition of feature-capability indicator g.3gpp.drvcc-alerting",
            "description": "Feature-capability indicator name: g.3gpp.drvcc-alerting\nThe g.3gpp.drvcc-alerting feature-capability indicator shall be registered in the IANA Proxy-Feature Feature-Capability Indicator Trees registry \"Global Feature-Capability Indicator Registration Tree\" sub-registry.\nSummary of the feature indicated by this feature-capability indicator:\nThis feature-capability indicator when included in a Feature-Caps header field as specified in IETF RFC 6809 [60] in a SIP INVITE request or a SIP response to the SIP INVITE request indicates support of PS to CS dual radio access transfer for calls in alerting phase.\nFeature-capability indicator specification reference:\n3GPP TS 24.237, http://www.3gpp.org/ftp/Specs/archive/24_series/24.237/\nValues appropriate for use with this feature-capability indicator: None.\nExamples of typical use: Indicating the support of PS to CS dual radio access transfer for calls in alerting phase in the SIP INVITE request and SIP response to the SIP INVITE request.\nSecurity Considerations: Security considerations for this feature-capability indicator are discussed in clause 9 of IETF RFC 6809 [60].\n",
            "summary": "",
            "tables": [],
            "figures_meta_data": [],
            "subsections": []
        },
        {
            "title": "C.17\tDefinition of feature-capability indicator g.3gpp.dynamic-stn",
            "description": "Feature-capability indicator name: g.3gpp.dynamic-stn\nSummary of the feature indicated by this feature-capability indicator:\nThis feature-capability indicator, when included in a Feature-Caps header field as specified in IETF RFC 6809 [60] in a SIP INVITE request or a SIP response to the SIP INVITE request, indicates support to transfer the session to the circuit switched (CS) domain using  the dynamic STN (session transfer number) digit string.\nFeature-capability indicator specification reference:\n3GPP TS 24.237, http://www.3gpp.org/ftp/Specs/archive/24_series/24.237/\nValues appropriate for use with this feature-capability indicator:\nString with an equality relationship. When used in a Feature-Caps header field in SIP INVITE request or SIP response, the value is string containing the digit string in tel URI format of the dynamic STN to be used to establish a CS call in order to transfer the session to the CS domain following the syntax as described in table C.17-1 for g-3gpp-dynamic-stn.\nTable C.17-1: ABNF syntax of values of the g.3gpp.dynamic-stn feature-capability indicator\ng-3gpp-dynamic-stn = TEL-URI\nTEL-URI = \"<tel:\" global-number-digits \">\" ; global-number-digits as specified in IETF RFC 3966[79]\n\nThe feature-capability indicator is intended primarily for use in the following applications, protocols, services, or negotiation mechanisms: This feature-capability indicator is used to indicate support to transfer the session to the CS domain using the digit string of the dynamic STN.\nExamples of typical use: Indicating the support to transfer the session to the CS domain in the SIP INVITE request and SIP response to the SIP INVITE request and providing the dynamic STN digit string to be used to establish the CS call instead of using the static STN to establish the CS call for the session transfer.\nSecurity Considerations: Security considerations for this feature-capability indicator are discussed in clause 9 of IETF RFC 6809 [60].\n",
            "summary": "",
            "tables": [],
            "figures_meta_data": [],
            "subsections": []
        },
        {
            "title": "C.18\tDefinition of media feature tag g.3gpp.dynamic-stn",
            "description": "Media feature-tag name: g.3gpp.dynamic-stn\nASN.1 Identifier: .1.8.2.20\nThe g.3gpp.dynamic-stn media feature tag shall be registered in the IANA Media Feature Tags registry \"\" sub-registry.\nSummary of the media feature indicated by this tag: This media feature-tag when used in a Contact header field of a SIP request or a SIP response indicates that the functional entity sending the SIP message supports the use of dynamic STN.\nValues appropriate for use with this feature-tag: Boolean\nThe feature-tag is intended primarily for use in the following applications, protocols, services, or negotiation mechanisms: This feature-tag is most useful in a communications application, for describing the capabilities of a device, such as a phone or PDA.\nExamples of typical use: Indicating that the user equipment supports the use of dynamic STN.\nRelated standards or documents: 3GPP TS 24.237: \"IP Multimedia Subsystem (IMS) Service Continuity; Stage 3\"\nSecurity Considerations: Security considerations for this media feature-tag are discussed in subclause 12.1 of IETF RFC 3840 [34].\n",
            "summary": "",
            "tables": [],
            "figures_meta_data": [],
            "subsections": []
        },
        {
            "title": "C.19\tDefinition of media feature tag g.3gpp.ps2cs-drvcc-orig-pre-alerting",
            "description": "Media feature-tag name: g.3gpp.ps2cs-drvcc-orig-pre-alerting\nASN.1 Identifier: .1.8.2.21\nThe g.3gpp.ps2cs-drvcc-orig-pre-alerting media feature tag shall be registered in the IANA Media Feature Tags registry \"\" sub-registry.\nSummary of the media feature indicated by this tag: This media feature-tag when used in a Contact header field of a SIP request or a SIP response indicates that the functional entity sending the SIP message supports the PS to CS dual radio access transfer for originating calls in pre-alerting phase.\nValues appropriate for use with this feature-tag: Boolean\nThe feature-tag is intended primarily for use in the following applications, protocols, services, or negotiation mechanisms: This feature-tag is most useful in a communications application, for describing the capabilities of a device, such as a phone or PDA.\nExamples of typical use: Indicating that the user equipment supports the PS to CS dual radio access transfer for originating calls in pre-alerting phase.\nRelated standards or documents: 3GPP TS 24.237: \"IP Multimedia Subsystem (IMS) Service Continuity; Stage 3\"\nSecurity Considerations: Security considerations for this media feature-tag are discussed in subclause 12.1 of IETF RFC 3840 [34].\n",
            "summary": "",
            "tables": [],
            "figures_meta_data": [],
            "subsections": []
        },
        {
            "title": "C.20\tDefinition of feature-capability indicator g.3gpp.ps2cs-drvcc-orig-pre-alerting",
            "description": "Feature-capability indicator name: g.3gpp.ps2cs-drvcc-orig-pre-alerting\nThe g.3gpp.ps2cs-drvcc-orig-pre-alerting feature-capability indicator shall be registered in the IANA Proxy-Feature Feature-Capability Indicator Trees registry \"Global Feature-Capability Indicator Registration Tree\" sub-registry.\nSummary of the feature indicated by this feature-capability indicator:\nThis feature-capability indicator when included in a Feature-Caps header field as specified in IETF RFC 6809 [60] in a SIP INVITE request or a SIP response to the SIP INVITE request indicates support of PS to CS dual radio access transfer for originating calls in pre-alerting phase.\nFeature-capability indicator specification reference:\n3GPP TS 24.237, http://www.3gpp.org/ftp/Specs/archive/24_series/24.237/\nValues appropriate for use with this feature-capability indicator: None.\nExamples of typical use: Indicating the support of PS to CS dual radio access transfer for originating calls in pre-alerting phase in the SIP INVITE request and SIP response to the SIP INVITE request.\nSecurity Considerations: Security considerations for this feature-capability indicator are discussed in clause 9 of IETF RFC 6809 [60].\n",
            "summary": "",
            "tables": [],
            "figures_meta_data": [],
            "subsections": []
        },
        {
            "title": "C.21\tDefinition of media feature tag g.3gpp.ps2cs-srvcc-orig-pre-alerting",
            "description": "Media feature tag name: g.3gpp.ps2cs-srvcc-orig-pre-alerting\nASN.1 Identifier: .1.8.2.22\nSummary of the media feature indicated by this tag: This media feature tag when used in a Contact header field of a SIP request or a SIP response indicates that the functional entity sending the SIP message supports the PS to CS SRVCC for originating calls in pre-alerting phase.\nValues appropriate for use with this feature-tag: Boolean\nThe feature-tag is intended primarily for use in the following applications, protocols, services, or negotiation mechanisms: This feature-tag is most useful in a communications application, for describing the capabilities of a device, such as a phone or PDA.\nExamples of typical use: Indicating that a user equipment supports the PS to CS SRVCC for originating calls in pre-alerting phase.\nRelated standards or documents: 3GPP TS 24.237: \"IP Multimedia Subsystem (IMS) Service Continuity; Stage 3\"\nSecurity Considerations: Security considerations for this media feature-tag are discussed in subclause 12.1 of IETF RFC 3840 [53].\n",
            "summary": "",
            "tables": [],
            "figures_meta_data": [],
            "subsections": []
        },
        {
            "title": "C.22\tDefinition of feature-capability indicator g.3gpp.ps2cs-srvcc-orig-pre-alerting",
            "description": "Feature-capability indicator name: g.3gpp.ps2cs-srvcc-orig-pre-alerting\nSummary of the feature indicated by this feature-capability indicator:\nThis feature-capability indicator when used in a Feature-Caps header field of a SIP request or a SIP response indicates that:\n1.\tthe functional entity including the feature-capability indicator in the SIP message supports the PS to CS SRVCC for originating calls in pre-alerting phase; and\n2.\tall entities of which the functional entity including the feature-capability indicator in the SIP message is aware of being requested to support the feature do support the PS to CS SRVCC for originating calls in pre-alerting phase.\nFeature-capability indicator specification reference:\n3GPP TS 24.237, http://www.3gpp.org/ftp/Specs/archive/24_series/24.237/\nValues appropriate for use with this feature-capability indicator: None\nExamples of typical use: Indicating that an application server supports the PS to CS SRVCC for originating calls in pre-alerting phase.\nSecurity Considerations: Security considerations for this feature-capability indicator are discussed in subclause 9 of RFC 6809 [60].\n",
            "summary": "",
            "tables": [],
            "figures_meta_data": [],
            "subsections": []
        },
        {
            "title": "C.23\tDefinition of media feature tag g.3gpp.cs2ps-drvcc-alerting",
            "description": "Media feature-tag name: g.3gpp.cs2ps-drvcc-alerting\nASN.1 Identifier: .1.8.2.23\nThe g.3gpp.cs2ps-drvcc-alerting media feature tag shall be registered in the IANA Media Feature Tags registry \"\" sub-registry.\nSummary of the media feature indicated by this tag: This media feature-tag, when used in a Contact header field of a SIP request or a SIP response, indicates that the functional entity sending the SIP message supports the CS to PS dual radio access transfer for calls in alerting phase.\nValues appropriate for use with this feature-tag: Boolean\nThe feature-tag is intended primarily for use in the following applications, protocols, services, or negotiation mechanisms: This feature-tag is most useful in a communications application, for describing the capabilities of a device, such as a phone or PDA.\nExamples of typical use: Indicating that the user equipment supports the CS to PS dual radio access transfer for calls in alerting phase.\nRelated standards or documents: 3GPP TS 24.237: \"IP Multimedia Subsystem (IMS) Service Continuity; Stage 3\"\nSecurity Considerations: Security considerations for this media feature-tag are discussed in subclause 12.1 of IETF RFC 3840 [34].\n",
            "summary": "",
            "tables": [],
            "figures_meta_data": [],
            "subsections": []
        },
        {
            "title": "C.24\tDefinition of feature-capability indicator g.3gpp.cs2ps-drvcc-alerting",
            "description": "Feature-capability indicator name: g.3gpp.cs2ps-drvcc-alerting\nThe g.3gpp.cs2ps-drvcc-alerting feature-capability indicator shall be registered in the IANA Proxy-Feature Feature-Capability Indicator Trees registry \"Global Feature-Capability Indicator Registration Tree\" sub-registry.\nSummary of the feature indicated by this feature-capability indicator:\nThis feature-capability indicator, when included in a Feature-Caps header field as specified in IETF RFC 6809 [60] in a SIP request or a SIP response to the SIP request, indicates support of CS to PS dual radio access transfer for calls in alerting phase.\nFeature-capability indicator specification reference:\n3GPP TS 24.237, http://www.3gpp.org/ftp/Specs/archive/24_series/24.237/\nValues appropriate for use with this feature-capability indicator: None.\nExamples of typical use: Indicating the support of CS to PS dual radio access transfer for calls in alerting phase in the SIP INVITE request and SIP response to the SIP INVITE request.\nSecurity Considerations: Security considerations for this feature-capability indicator are discussed in clause 9 of IETF RFC 6809 [60].\n\n",
            "summary": "",
            "tables": [],
            "figures_meta_data": [],
            "subsections": []
        },
        {
            "title": "C.25\tDefinition of media feature tag g.3gpp.cs2ps-drvcc-orig-pre-alerting",
            "description": "Media feature-tag name: g.3gpp.cs2ps-drvcc-orig-pre-alerting\nASN.1 Identifier: .1.8.2.24\nThe g.3gpp.cs2ps-drvcc-orig-pre-alerting media feature tag shall be registered in the IANA Media Feature Tags registry \"\" sub-registry.\nSummary of the media feature indicated by this tag: This media feature-tag when used in a Contact header field of a SIP request or a SIP response indicates that the functional entity sending the SIP message supports the CS to PS dual radio access transfer for originating calls in pre-alerting phase.\nValues appropriate for use with this feature-tag: Boolean\nThe feature-tag is intended primarily for use in the following applications, protocols, services, or negotiation mechanisms: This feature-tag is most useful in a communications application, for describing the capabilities of a device, such as a phone or PDA.\nExamples of typical use: Indicating that the user equipment supports the CS to PS dual radio access transfer access transfer for originating calls in pre-alerting phase.\nRelated standards or documents: 3GPP TS 24.237: \"IP Multimedia Subsystem (IMS) Service Continuity; Stage 3\"\nSecurity Considerations: Security considerations for this media feature-tag are discussed in subclause 12.1 of IETF RFC 3840 [34].\n",
            "summary": "",
            "tables": [],
            "figures_meta_data": [],
            "subsections": []
        },
        {
            "title": "C.26\tDefinition of feature-capability indicator g.3gpp.cs2ps-drvcc-orig-pre-alerting",
            "description": "Feature-capability indicator name: g.3gpp.cs2ps-drvcc-orig-pre-alerting\nThe g.3gpp.cs2ps-drvcc-orig-pre-alerting feature-capability indicator shall be registered in the IANA Proxy-Feature Feature-Capability Indicator Trees registry \"Global Feature-Capability Indicator Registration Tree\" sub-registry.\nSummary of the feature indicated by this feature-capability indicator:\nThis feature-capability indicator when included in a Feature-Caps header field as specified in IETF RFC 6809 [60] in a SIP request or a SIP response to the SIP request indicates support of CS to PS dual radio access transfer for originating calls in pre-alerting phase.\nFeature-capability indicator specification reference:\n3GPP TS 24.237, http://www.3gpp.org/ftp/Specs/archive/24_series/24.237/\nValues appropriate for use with this feature-capability indicator: None.\nExamples of typical use: Indicating the support of CS to PS dual radio access transfer for originating calls in pre-alerting phase in the SIP INVITE request and SIP response to the SIP INVITE request.\nSecurity Considerations: Security considerations for this feature-capability indicator are discussed in clause 9 of IETF RFC 6809 [60].\n",
            "summary": "",
            "tables": [],
            "figures_meta_data": [],
            "subsections": []
        },
        {
            "title": "C.27\tDefinition of feature-capability indicator g.3gpp.remote-leg-info",
            "description": "Feature-capability indicator name: g.3gpp.remote-leg-info\nSummary of the feature indicated by this feature-capability indicator:\nThis feature-capability indicator when used in a Feature-Caps header field of a SIP request or a SIP response indicates that the functional entity including the feature-capability indicator in the SIP message supports providing remote leg information within a dialog of the SIP request or SIP response.\nFeature-capability indicator specification reference:\n3GPP TS 24.237, http://www.3gpp.org/ftp/Specs/archive/24_series/24.237/\nValues appropriate for use with this feature-capability indicator: none\nExamples of typical use: Indicating that an an application server supports providing remote leg information within a dialog of the SIP request or SIP response.\nSecurity Considerations: Security considerations for this feature-capability indicator are discussed in clause 9 of IETF RFC 6809 [60].\n",
            "summary": "",
            "tables": [],
            "figures_meta_data": [],
            "subsections": []
        },
        {
            "title": "C.28\tDefinition of feature-capability indicator g.3gpp.dynamic-e-stn-drvcc",
            "description": "Feature-capability indicator name: g.3gpp.dynamic-e-stn-drvcc\nSummary of the feature indicated by this feature-capability indicator:\nThis feature-capability indicator, when included in a Feature-Caps header field as specified in IETF RFC 6809 [60] in a SIP response to a SIP INVITE request, indicates support to transfer the session to the circuit switched (CS) domain using the Emergency Session Transfer Number for DRVCC digit string.\nFeature-capability indicator specification reference:\n3GPP TS 24.237, http://www.3gpp.org/ftp/Specs/archive/24_series/24.237/\nValues appropriate for use with this feature-capability indicator:\nString with an equality relationship. When used in a Feature-Caps header field in a SIP response, the value is string containing the digit string in tel URI format of the Emergency Session Transfer Number for DRVCC to be used to establish a CS call in order to transfer the session to the CS domain following the syntax as described in table C.28-1 for g-3gpp-dynamic- e-stn-drvcc.\nTable C.28-1: ABNF syntax of values of the g.3gpp. dynamic-e-stn-drvcc feature-capability indicator\ng-3gpp-dynamic-e-stn-drvcc = TEL-URI\nTEL-URI = \"<tel:\" global-number-digits \">\" ; global-number-digits as specified in IETF RFC 3966[79]\n\nThe feature-capability indicator is intended primarily for use in the following applications, protocols, services, or negotiation mechanisms: This feature-capability indicator is used to indicate support to transfer the session to the CS domain using the digit string of the Emergency Session Transfer Number for DRVCC.\nExamples of typical use: Indicating the support to transfer the session to the CS domain in a SIP response to the SIP INVITE request and providing the dynamic Emergency Session Transfer Number for DRVCC digit string to be used to establish the CS call.\nSecurity Considerations: Security considerations for this feature-capability indicator are discussed in clause 9 of IETF RFC 6809 [60].\n",
            "summary": "",
            "tables": [],
            "figures_meta_data": [],
            "subsections": []
        },
        {
            "title": "C.29\tDefinition of media feature tag g.3gpp.dynamic-e-stn-drvcc",
            "description": "Media feature-tag name: g.3gpp. dynamic-e-stn-drvcc\nASN.1 Identifier: .1.8.2.32\nThe g.3gpp.dynamic-stn media feature tag shall be registered in the IANA Media Feature Tags registry \"\" sub-registry.\nSummary of the media feature indicated by this tag: This media feature-tag when used in a Contact header field of a SIP request or a SIP response indicates that the functional entity sending the SIP message supports the use of dynamic-e-stn-drvcc.\nValues appropriate for use with this feature-tag: Boolean\nThe feature-tag is intended primarily for use in the following applications, protocols, services, or negotiation mechanisms: This feature-tag is most useful in a communications application, for describing the capabilities of a device, such as a phone or PDA.\nExamples of typical use: Indicating that the user equipment supports the use of dynamic STN.\nRelated standards or documents: 3GPP TS 24.237: \"IP Multimedia Subsystem (IMS) Service Continuity; Stage 3\"\nSecurity Considerations: Security considerations for this media feature-tag are discussed in subclause 12.1 of IETF RFC 3840 [34].\n",
            "summary": "",
            "tables": [],
            "figures_meta_data": [],
            "subsections": []
        },
        {
            "title": "C.30\tDefinition of media feature tag g.3gpp.ps2cs-srvcc-mid-call-emergency",
            "description": "Media feature-tag name: g.3gpp.ps2cs-srvcc-mid-call-emergency\nASN.1 Identifier: .1.8.2.33\nThe g.3gpp.ps2cs-srvcc-mid-call-emergency media feature tag shall be registered in the IANA Media Feature Tags registry \"\" sub-registry.\nSummary of the media feature indicated by this tag: This media feature-tag, when used in a Contact header field of a SIP request or a SIP response, indicates that the functional entity sending the SIP message supports the PS to CS SRVCC for emergency session in early dialog state with active speech media component when both the emergency session in early dialog state with active speech media component and a non-emergency call in confirmed dialog state with inactive speech media component exists.\nValues appropriate for use with this feature-tag: Boolean\nThe feature-tag is intended primarily for use in the following applications, protocols, services, or negotiation mechanisms: This feature-tag is most useful in a communications application, for describing the capabilities of a device, such as a phone or PDA.\nExamples of typical use: Indicating that the user equipment supports the PS to CS SRVCC for emergency session in early dialog state with active speech media component when both the emergency session in early dialog state with active speech media component and a non-emergency call in confirmed dialog state with inactive speech media component exists.\nRelated standards or documents: 3GPP TS 24.237: \"IP Multimedia Subsystem (IMS) Service Continuity; Stage 3\"\nSecurity Considerations: Security considerations for this media feature-tag are discussed in subclause 12.1 of IETF RFC 3840 [34].\n",
            "summary": "",
            "tables": [],
            "figures_meta_data": [],
            "subsections": []
        },
        {
            "title": "C.31\tDefinition of media feature tag g.3gpp.ps2cs-srvcc-term-pre-alerting",
            "description": "Media feature tag name: g.3gpp.ps2cs-srvcc-term-pre-alerting\nASN.1 Identifier: .1.8.2.34\nSummary of the media feature indicated by this tag: This media feature tag when used in a Contact header field of a SIP request or a SIP response indicates that the functional entity sending the SIP message supports the PS to CS SRVCC for terminating calls in pre-alerting phase.\nValues appropriate for use with this feature-tag: Boolean\nThe feature-tag is intended primarily for use in the following applications, protocols, services, or negotiation mechanisms: This feature-tag is most useful in a communications application, for describing the capabilities of a device, such as a phone or PDA.\nExamples of typical use: Indicating that a user equipment supports the PS to CS SRVCC for terminating calls in pre-alerting phase.\nRelated standards or documents: 3GPP TS 24.237: \"IP Multimedia Subsystem (IMS) Service Continuity; Stage 3\"\nSecurity Considerations: Security considerations for this media feature-tag are discussed in subclause 12.1 of IETF RFC 3840 [53].\n",
            "summary": "",
            "tables": [],
            "figures_meta_data": [],
            "subsections": []
        },
        {
            "title": "C.32\tDefinition of feature-capability indicator g.3gpp.ps2cs-srvcc-term-pre-alerting",
            "description": "Feature-capability indicator name: g.3gpp.ps2cs-srvcc-term-pre-alerting\nSummary of the feature indicated by this feature-capability indicator:\nThis feature-capability indicator when used in a Feature-Caps header field of a SIP request or a SIP response indicates that:\n1.\tthe functional entity including the feature-capability indicator in the SIP message supports the PS to CS SRVCC for terminating calls in pre-alerting phase; and\n2.\tall entities of which the functional entity including the feature-capability indicator in the SIP message is aware of being requested to support the feature do support the PS to CS SRVCC for terminating calls in pre-alerting phase.\nFeature-capability indicator specification reference:\n3GPP TS 24.237, http://www.3gpp.org/ftp/Specs/archive/24_series/24.237/\nValues appropriate for use with this feature-capability indicator: None\nExamples of typical use: Indicating that an application server supports the PS to CS SRVCC for terminating calls in pre-alerting phase.\nSecurity Considerations: Security considerations for this feature-capability indicator are discussed in subclause 9 of RFC 6809 [60].\n",
            "summary": "",
            "tables": [],
            "figures_meta_data": [],
            "subsections": []
        },
        {
            "title": "D.1\tMSC server assisted mid-call feature XML schema",
            "description": "",
            "summary": "",
            "tables": [],
            "figures_meta_data": [],
            "subsections": [
                {
                    "title": "D.1.1\tGeneral",
                    "description": "",
                    "summary": "",
                    "text_content": "This subclause defines XML schema and MIME type related to the MSC server assisted mid-call feature.\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "D.1.2\tXML schema",
                    "description": "",
                    "summary": "",
                    "text_content": "<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<xs:schema\nxmlns:xs=\"http://www.w3.org/2001/XMLSchema\"\nelementFormDefault=\"qualified\"\nattributeFormDefault=\"unqualified\">\n\n<xs:element name=\"mid-call\" type=\"Tmid-call\"/>\n\n<xs:complexType name=\"Tmid-call\">\n<xs:sequence>\n<xs:element name=\"participant\" type=\"xs:anyURI\" minOccurs=\"0\" maxOccurs=\"unbounded\"/>\n<xs:any namespace=\"##other\" processContents=\"lax\" minOccurs=\"0\" maxOccurs=\"unbounded\"/>\n</xs:sequence>\n<xs:anyAttribute namespace=\"##any\" processContents=\"lax\"/>\n</xs:complexType>\n\n</xs:schema>\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "D.1.3\tIANA registration template",
                    "description": "",
                    "summary": "",
                    "text_content": "Your Name:\n<MCC name>\nYour Email Address:\n<MCC email address>\nMedia Type Name:\nApplication\nSubtype name:\nvnd.3gpp.mid-call+xml\nRequired parameters:\nNone\nOptional parameters:\n\"charset\"\tthe parameter has identical semantics to the charset parameter of the \"application/xml\" media type as specified in section 9.1 of IETF RFC 7303.\nEncoding considerations:\nbinary.\nSecurity considerations:\nSame as general security considerations for application/xml media type as specified in section 9.1 of IETF RFC 7303. In addition, this media type provides a format for exchanging information in SIP, so the security considerations from IETF RFC 3261apply.\nThe information transported in this media type does not include active or executable content.\nMechanisms for privacy and integrity protection of protocol parameters exist. Those mechanisms as well as authentication and further security mechanisms are described in 3GPP TS 24.229.\nThis media type does not include provisions for directives that institute actions on a recipient's files or other resources.\nThis media type does not include provisions for directives that institute actions that, while not directly harmful to the recipient, may result in disclosure of information that either facilitates a subsequent attack or else violates a recipient's privacy in any way.\nThis media type does not employ compression.\nInteroperability considerations:\nSame as general interoperability considerations for application/xml media type as specified in section 9.1 of IETF RFC 7303.\nPublished specification:\n3GPP TS 24.237 \"IP Multimedia Subsystem (IMS) Service Continuity\", version 13.1.0, available via http://www.3gpp.org/specs/numbering.htm.\nApplications which use this media type:\nApplications supporting the service continuity as described in the published specification.\nFragment identifier considerations:\nThe handling in section 5 of IETF RFC 7303 applies.\nRestrictions on usage:\nNone\nProvisional registration? (standards tree only):\nN/A\nAdditional information:\n1.\tDeprecated alias names for this type: none\n2.\tMagic number(s): none\n3.\tFile extension(s): none\n4.\tMacintosh File Type Code(s): none\n5.\tObject Identifier(s) or OID(s): none\nIntended usage:\nCommon\nPerson to contact for further information:\n-\tName: <MCC name>\n-\tEmail: <MCC email address>\n-\tAuthor/Change controller:\ni)\tAuthor: 3GPP CT1 Working Group/3GPP_TSG_CT_WG1@LIST.ETSI.ORG\nii)\tChange controller: <MCC name>/<MCC email address>\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                }
            ]
        },
        {
            "title": "D.2\tstate-and-event-info XML schema",
            "description": "",
            "summary": "",
            "tables": [],
            "figures_meta_data": [],
            "subsections": [
                {
                    "title": "D.2.1\tGeneral",
                    "description": "",
                    "summary": "",
                    "text_content": "This subclause defines XML schema and MIME type for session state and event information. It is used in the present document for the PS to CS SRVCC for calls in alerting phase, for accepting of a call in alerting state transferred by the PS-PS access transfer procedures, for the PS to CS SRVCC for originating calls in pre-alerting phase, for PS to CS SRVCC for terminating calls in pre-alerting phase and for requesting and providing remote leg information.\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "D.2.2\tXML schema",
                    "description": "",
                    "summary": "",
                    "text_content": "<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<xs:schema\nxmlns:xs=\"http://www.w3.org/2001/XMLSchema\"\nelementFormDefault=\"qualified\"\nattributeFormDefault=\"unqualified\">\n\n\n<xs:simpleType name=\"directionType\">\n<xs:restriction base=\"xs:string\">\n<xs:enumeration value=\"initiator\"/>\n<xs:enumeration value=\"receiver\"/>\n</xs:restriction>\n</xs:simpleType>\n\n\n<xs:element name=\"state-and-event-info\" type=\"Tstate-and-event-info\"/>\n\n<xs:complexType name=\"Tstate-and-event-info\">\n<xs:sequence>\n<xs:element name=\"state-info\" type=\"xs:string\" minOccurs=\"0\" maxOccurs=\"1\"/>\n<xs:element name=\"direction\" type=\"directionType\" minOccurs=\"0\" maxOccurs=\"1\"/>\n<xs:element name=\"event\" type=\"xs:string\" minOccurs=\"0\" maxOccurs=\"1\"/>\n<xs:element name=\"anyExt\" type=\"anyExtType\" minOccurs=\"0\" />\n<xs:any namespace=\"##other\" processContents=\"lax\" minOccurs=\"0\" maxOccurs=\"unbounded\"/>\n</xs:sequence>\n<xs:anyAttribute namespace=\"##any\" processContents=\"lax\"/>\n</xs:complexType>\n\n<xs:complexType name=\"anyExtType\">\n<xs:sequence>\n<xs:any namespace=\"##any\" processContents=\"lax\" minOccurs=\"0\" maxOccurs=\"unbounded\"/>\n</xs:sequence>\n</xs:complexType>\n\n<xs:element name=\"remoteLegInfoRequest\" type=\"anyExtType\"/>\n<xs:element name=\"remoteLegInfoResponse\" type=\"anyExtType\"/>\n\n<xs:complexType name=\"dialogIdType\">\n<xs:sequence>\n<xs:any namespace=\"##any\" processContents=\"lax\" minOccurs=\"0\" maxOccurs=\"unbounded\"/>\n</xs:sequence>\n<xs:attribute name=\"call-id\" type=\"xs:string\"/>\n<xs:attribute name=\"local-tag\" type=\"xs:string\" use=\"optional\"/>\n<xs:attribute name=\"remote-tag\" type=\"xs:string\" use=\"optional\"/>\n<xs:anyAttribute namespace=\"##any\" processContents=\"lax\"/>\n</xs:complexType>\n\n<!-- elements which can be included in remoteLegInfoRequest -->\n<xs:element name=\"localAssertedIdRequest\"/>\n<xs:element name=\"dialogIdRequest\"/>\n\n<!-- elements which can be included in remoteLegInfoResponse-->  <xs:element name=\"localAssertedId\" type=\"xs:anyURI\"/>\n<xs:element name=\"dialogId\" type=\"dialogIdType\"/>\n</xs:schema>\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "D.2.3\tXML schema description",
                    "description": "",
                    "summary": "",
                    "text_content": "This subclause describes the elements of the state-and-info XML Schema.\n<state-and-event-info>:\tThe <state-and-event-info> element is used to indicate state and event information related to a specific dialog. In the present document, it is used to communicate information between the SCC AS and the MSC-server for the purpose of PS to CS SRVCC for calls in alerting phase, for UE to communicate acceptance of incoming alerting phase call transferred using PS-PS access transfer procedures and communicate information between the SCC AS and the MSC server for the purpose of the PS to CS SRVCC for originating calls in pre-alerting phase.\n<state-info>:\tThe <state-info> element is used to indicate the state of the dialog and is modelled on the FSM described in IETF RFC 4235 [48]. In the present document, it can only have the values specified in table D.2.3-1 for state-info-values.\nTable D.2.3-1: ABNF syntax of values of the <state-info> element\nstate-info-values = early-value / pre-alerting-value\nearly-value = %x65.61.72.6c.79 ; \"early\"\npre-alerting-value = %x70.72.65.2d.61.6c.65.72.74.69.6e.67 ; \"pre-alerting\"\n\n<direction>:\tThe <direction> element indicates whether the observed user was the initiator of the dialog, or the recipient of the INVITE that created it. It can only have the values specified in table D.2.3-2 for direction-values. In the present document it must be included together with the <state-info> element.\nTable D.2.3-2: ABNF syntax of values of the <direction> element\ndirection-values = initiator-value / receiver-value\ninitiator-value = %x69.6e.69.74.69.61.74.6f.72 ; \"initiator\"\nreceiver-value = %x72.65.63.65.69.76.65.72 ; \"receiver\"\n\n<event>:\tThe <event> element is used to communicate an event that causes a dialog state transition. In the present document, the <event> element can only have the values specified in table D.2.3-3 for event-values.\nTable D.2.3-3: ABNF syntax of values of the <event> element\nevent-values = call-accepted-value / alerting-started-value\ncall-accepted-value = %x63.61.6c.6c.2d.61.63.63.65.70.74.65.64 ; \"call-accepted\"\nalerting-started-value = %x61.6c.65.72.74.69.6e.67.2d.73.74.61.72.74.65.64 ; \"alerting-started\"\n\n<anyExt>:\tThe <anyExt> element is used to convey extensions. In the present document, the <anyExt> element contains a <remoteLegInfoRequest> element or a <remoteLegInfo> element.\nNOTE 1:\tThe subelements of the <anyExt> are validated by the <xs:any namespace=\"##any\" processContents=\"lax\" minOccurs=\"0\" maxOccurs=\"unbounded\"/> particle of the <anyExt> element.\n<remoteLegInfoRequest>\tThe <remoteLegInfoRequest>element indicates request for the remote leg information. The <remoteLegInfoRequest> element contains the optional <localAssertedIdRequest> element and the optional <dialogIdRequest> element.\nNOTE 2:\tThe subelements of the <remoteLegInfoRequest> are validated by the <xs:any namespace=\"##any\" processContents=\"lax\" minOccurs=\"0\" maxOccurs=\"unbounded\"/> particle of the <anyExt> element.\n<localAssertedIdRequest>\tThe <localAssertedIdRequest> element indicates that SCC AS is to provide <localAssertedId> in the <remoteLegInfoResponse>.\n<dialogIdRequest>\tThe <dialogIdRequest> element indicates that SCC AS is to provide <dialogId> in the <remoteLegInfoResponse>.\n<remoteLegInfoResponse>\tThe <remoteLegInfoResponse> indicates the remote leg information. The <remoteLegInfoResponse> element contains the optional <localAssertedId> element and the optional <dialogId> element.\nNOTE 3:\tThe subelements of the <remoteLegInfoResponse> are validated by the <xs:any namespace=\"##any\" processContents=\"lax\" minOccurs=\"0\" maxOccurs=\"unbounded\"/> particle of the <anyExt> element.\n<localAssertedId>\tThe <localAssertedId> element contains URI provided by SCC AS in P-Asserted-Identity header field towards remote UE in remote leg associated with the dialog within which the SIP INFO request is sent.\n<dialogId>\tThe <dialogId> element contains dialog identifier of remote leg associated with the dialog within which the SIP INFO request is sent, i.e. the \"call-id\" attribute containing the call-id of the remote leg, the optional \"local-tag\" attribute containing tag that would be viewed as the local tag of the remote leg from the perspective of SCC AS and the optional \"remote-tag\" attribute containing tag that would be viewed as the remote tag of the remote leg from the perspective of SCC AS.\nRecipient of the XML ignores any unknown element and any unknown attribute.\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "D.2.4\tIANA registration template",
                    "description": "",
                    "summary": "",
                    "text_content": "Your Name:\n<MCC name>\nYour Email Address:\n<MCC email address>\nMedia Type Name:\nApplication\nSubtype name:\nvnd.3gpp.state-and-event-info+xml\nRequired parameters:\nNone\nOptional parameters:\n\"charset\"\tthe parameter has identical semantics to the charset parameter of the \"application/xml\" media type as specified in section 9.1 of IETF RFC 7303.\nEncoding considerations:\nbinary.\nSecurity considerations:\nSame as general security considerations for application/xml media type as specified in section 9.1 of IETF RFC 7303. In addition, this media type provides a format for exchanging information in SIP, so the security considerations from IETF RFC 3261apply.\nThe information transported in this media type does not include active or executable content.\nMechanisms for privacy and integrity protection of protocol parameters exist. Those mechanisms as well as authentication and further security mechanisms are described in 3GPP TS 24.229.\nThis media type does not include provisions for directives that institute actions on a recipient's files or other resources.\nThis media type does not include provisions for directives that institute actions that, while not directly harmful to the recipient, may result in disclosure of information that either facilitates a subsequent attack or else violates a recipient's privacy in any way.\nThis media type does not employ compression.\nInteroperability considerations:\nSame as general interoperability considerations for application/xml media type as specified in section 9.1 of IETF RFC 7303.\nPublished specification:\n3GPP TS 24.237 \"IP Multimedia Subsystem (IMS) Service Continuity\", version 13.1.0, available via http://www.3gpp.org/specs/numbering.htm.\nApplications which use this media type:\nApplications supporting the service continuity as described in the published specification.\nFragment identifier considerations:\nThe handling in section 5 of IETF RFC 7303 applies.\nRestrictions on usage:\nNone\nProvisional registration? (standards tree only):\nN/A\nAdditional information:\n1.\tDeprecated alias names for this type: none\n2.\tMagic number(s): none\n3.\tFile extension(s): none\n4.\tMacintosh File Type Code(s): none\n5.\tObject Identifier(s) or OID(s): none\nIntended usage:\nCommon\nPerson to contact for further information:\n-\tName: <MCC name>\n-\tEmail: <MCC email address>\n-\tAuthor/Change controller:\ni)\tAuthor: 3GPP CT1 Working Group/3GPP_TSG_CT_WG1@LIST.ETSI.ORG\nii)\tChange controller: <MCC name>/<MCC email address>\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                }
            ]
        },
        {
            "title": "D.3\tSRVCC enhancement related XML schema",
            "description": "",
            "summary": "",
            "tables": [],
            "figures_meta_data": [],
            "subsections": [
                {
                    "title": "D.3.1\tGeneral",
                    "description": "",
                    "summary": "",
                    "text_content": "This subclause defines XML schema and MIME type for transfer of information for SRVCC enhancement.\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "D.3.2\tXML schema",
                    "description": "",
                    "summary": "",
                    "text_content": "<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<xs:schema\nxmlns:xs=\"http://www.w3.org/2001/XMLSchema\"\nelementFormDefault=\"qualified\"\nattributeFormDefault=\"unqualified\">\n\n<xs:complexType name=\"SRVCC-infoType\">\n<xs:sequence>\n<xs:element name=\"ATU-STI\" type=\"xs:anyURI\" minOccurs=\"0\"/>\n<xs:element name=\"C-MSISDN\" type=\"xs:anyURI\" minOccurs=\"0\"/>\n<xs:element name=\"anyExt\" type=\"anyExtType\" minOccurs=\"0\"/>\n<xs:any namespace=\"##other\" processContents=\"lax\" minOccurs=\"0\" maxOccurs=\"unbounded\"/>\n</xs:sequence>\n<xs:attribute name=\"ATCF-Path-URI\" type=\"xs:anyURI\"/>\n<xs:anyAttribute namespace=\"##any\" processContents=\"lax\"/>\n</xs:complexType>\n\n<xs:complexType name=\"SRVCC-infosType\">\n<xs:sequence>\n<xs:element name=\"SRVCC-info\" type=\"SRVCC-infoType\"\nminOccurs=\"1\" maxOccurs=\"unbounded\"/>\n<xs:element name=\"anyExt\" type=\"anyExtType\" minOccurs=\"0\"/>\n<xs:any namespace=\"##other\" processContents=\"lax\" minOccurs=\"0\" maxOccurs=\"unbounded\"/>\n</xs:sequence>\n<xs:anyAttribute namespace=\"##any\" processContents=\"lax\"/>\n</xs:complexType>\n\n\n<xs:element name=\"SRVCC-infos\" type=\"SRVCC-infosType\"/>\n\n<xs:complexType name=\"anyExtType\">\n<xs:sequence>\n<xs:any namespace=\"##any\" processContents=\"lax\" minOccurs=\"0\" maxOccurs=\"unbounded\"/>\n</xs:sequence>\n</xs:complexType>\n\n<xs:element name=\"CS2PS-ATU-STI\" type=\"xs:anyURI\"/>\n\n</xs:schema>\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "D.3.3\tSemantic",
                    "description": "",
                    "summary": "",
                    "text_content": "The <SRVCC-infos> element is the root element of the XML document and contains one or more <SRVCC-info> elements.\nEach <SRVCC-info> element contains SRVCC-related information related to one registration path (or registration flow, if multiple registration mechanism is used) of a UE with IM CN subsystem. The SRVCC-related information in the <SRVCC-info> element consists of:\n1)\tif the PS to CS SRVCC is usable for the UE (see subclause 6.3.2):\na)\t<ATU-STI> element containing the ATU-STI for PS to CS SRVCC of the SCC AS; and\nb)\t<C-MSISDN> element containing the Correlation MSISDN of the UE; and\nNOTE 1:\t<ATU-STI> element and <C-MSISDN> element are not included unless the PS to CS SRVCC is usable for the UE (see subclause 6.3.2).\n2)\tif CS to PS SRVCC is supported by  and enabled for the UE:\na)\t<anyExt> element containing <CS2PS-ATU-STI> element containing the ATU-STI for CS to PS SRVCC of the SCC AS; and\nNOTE 2:\tThe subelements of the <anyExt> are validated by the <xs:any namespace=\"##any\" processContents=\"lax\" minOccurs=\"0\" maxOccurs=\"unbounded\"/> particle of the <anyExt> element.\nb)\t<C-MSISDN> element containing the C-MSISDN of the UE.\nNOTE 3:\tIf information for both CS to PS SRVCC and PS to CS SRVCC are included, <C-MSISDN> element is included only once.\nThe \"ATCF-Path-URI\" attribute of the <SRVCC-info> element contains the ATCF URI for terminating calls of the registration path (or registration flow, if multiple registration mechanism is used).\n<anyExt> element contains optional elements defined by future version of this document.\nRecipient of the XML ignores any unknown element and any unknown attribute.\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "D.3.4\tIANA registration template",
                    "description": "",
                    "summary": "",
                    "text_content": "Your Name:\n<MCC name>\nYour Email Address:\n<MCC email address>\nMedia Type Name:\nApplication\nSubtype name:\nvnd.3gpp.SRVCC-info+xml\nRequired parameters:\nNone\nOptional parameters:\n\"charset\"\tthe parameter has identical semantics to the charset parameter of the \"application/xml\" media type as specified in section 9.1 of IETF RFC 7303.\nEncoding considerations:\nbinary.\nSecurity considerations:\nSame as general security considerations for application/xml media type as specified in section 9.1 of IETF RFC 7303. In addition, this media type provides a format for exchanging information in SIP, so the security considerations from IETF RFC 3261apply.\nThe information transported in this media type does not include active or executable content.\nMechanisms for privacy and integrity protection of protocol parameters exist. Those mechanisms as well as authentication and further security mechanisms are described in 3GPP TS 24.229.\nThis media type does not include provisions for directives that institute actions on a recipient's files or other resources.\nThis media type does not include provisions for directives that institute actions that, while not directly harmful to the recipient, may result in disclosure of information that either facilitates a subsequent attack or else violates a recipient's privacy in any way.\nThis media type does not employ compression.\nInteroperability considerations:\nSame as general interoperability considerations for application/xml media type as specified in section 9.1 of IETF RFC 7303. Any unknown XML elements and any unknown XML attributes are to be ignored by recipient of the MIME body.\nPublished specification:\n3GPP TS 24.237 \"IP Multimedia Subsystem (IMS) Service Continuity\", version 13.1.0, available via http://www.3gpp.org/specs/numbering.htm.\nApplications which use this media type:\nApplications supporting the service continuity as described in the published specification.\nFragment identifier considerations:\nThe handling in section 5 of IETF RFC 7303 applies.\nRestrictions on usage:\nNone\nProvisional registration? (standards tree only):\nN/A\nAdditional information:\n1.\tDeprecated alias names for this type: none\n2.\tMagic number(s): none\n3.\tFile extension(s): none\n4.\tMacintosh File Type Code(s): none\n5.\tObject Identifier(s) or OID(s): none\nIntended usage:\nCommon\nPerson to contact for further information:\n-\tName: <MCC name>\n-\tEmail: <MCC email address>\n-\tAuthor/Change controller:\ni)\tAuthor: 3GPP CT1 Working Group/3GPP_TSG_CT_WG1@LIST.ETSI.ORG\nii)\tChange controller: <MCC name>/<MCC email address>\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                }
            ]
        },
        {
            "title": "D.4\tXML schema for CS to PS SRVCC information",
            "description": "",
            "summary": "",
            "tables": [],
            "figures_meta_data": [],
            "subsections": [
                {
                    "title": "D.4.1\tGeneral",
                    "description": "",
                    "summary": "",
                    "text_content": "This subclause defines XML schema and MIME type for transfer of CS to PS SRVCC information.\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "D.4.2\tXML schema",
                    "description": "",
                    "summary": "",
                    "text_content": "<?xml version=\"1.0\"?>\n<xs:schema\nxmlns:xs=\"http://www.w3.org/2001/XMLSchema\"\nelementFormDefault=\"qualified\"\nattributeFormDefault=\"unqualified\">\n\n<xs:element name=\"srvcc-ext\" type=\"srvcc-extType\"/>\n\n<xs:complexType name=\"srvcc-extType\">\n<xs:sequence>\n<xs:any namespace=\"##any\" processContents=\"lax\" minOccurs=\"0\" maxOccurs=\"unbounded\"/>\n</xs:sequence>\n<xs:anyAttribute namespace=\"##any\" processContents=\"lax\"/>\n</xs:complexType>\n\n<xs:element name=\"PS-reg-info\" type=\"PS-reg-infoType\"/>\n\n<xs:complexType name=\"PS-reg-infoType\">\n<xs:sequence>\n<xs:element name=\"ATCF-Management-URI\" type=\"xs:anyURI\" minOccurs=\"0\"/>\n<xs:element name=\"C-MSISDN\" type=\"xs:anyURI\" minOccurs=\"0\"/>\n<xs:element name=\"cs2ps-srvcc-alerting\" type=\"xs:boolean\" minOccurs=\"0\"/>\n<xs:element name=\"anyExt\" type=\"anyExtType\" minOccurs=\"0\"/>\n<xs:any namespace=\"##other\" processContents=\"lax\" minOccurs=\"0\" maxOccurs=\"unbounded\"/>\n</xs:sequence>\n<xs:attribute name=\"Path\" type=\"xs:anyURI\" use=\"optional\"/>\n<xs:anyAttribute namespace=\"##any\" processContents=\"lax\"/>\n</xs:complexType>\n\n<xs:element name=\"Setup-info\" type=\"Setup-infoType\"/>\n\n<xs:complexType name=\"Setup-infoType\">\n<xs:sequence>\n<xs:element name=\"C-MSISDN\" type=\"xs:anyURI\"/>\n<xs:element name=\"direction\" type=\"directionType\"/>\n<xs:any namespace=\"##any\" processContents=\"lax\" minOccurs=\"0\" maxOccurs=\"unbounded\"/>\n</xs:sequence>\n<xs:anyAttribute namespace=\"##any\" processContents=\"lax\"/>\n</xs:complexType>\n\n<xs:simpleType name=\"directionType\">\n<xs:restriction base=\"xs:string\">\n<xs:enumeration value=\"initiator\"/>\n<xs:enumeration value=\"receiver\"/>\n</xs:restriction>\n</xs:simpleType>\n\n<xs:complexType name=\"anyExtType\">\n<xs:sequence>\n<xs:any namespace=\"##any\" processContents=\"lax\" minOccurs=\"0\" maxOccurs=\"unbounded\"/>\n</xs:sequence>\n</xs:complexType>\n\n</xs:schema>\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "D.4.3\tSemantic",
                    "description": "",
                    "summary": "",
                    "text_content": "",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": [
                        {
                            "title": "D.4.3.1\tGeneral",
                            "text_content": "The <srvcc-ext> element is the root element of the XML document. The <srvcc-ext> element can contain subelements.\nNOTE:\tThe subelements of the <srvcc-ext> are validated by the <xs:any namespace=\"##any\" processContents=\"lax\" minOccurs=\"0\" maxOccurs=\"unbounded\"/> particle of the <srvcc-ext> element.\nWhen the <srvcc-ext> element contains the <PS-reg-info> element, then the <PS-reg-info> element contains:\n-\tif the information relates to a registration of MSC server with IMS, then the \"Path\" attribute identifying the MSC URI for terminating calls used by MSC server when registering the UE;\n-\toptionally the <ATCF-Management-URI> element containing the ATCF management URI of the ATCF used in the registration path of the UE over a PS domain. Absence of this element indicates that the CS to PS SRVCC is disabled;\n-\toptionally the <C-MSISDN> element containing the C-MSISDN of the served SC UE. Absence of this element indicates that the CS to PS SRVCC is disabled;\n-\tthe <cs2ps-srvcc-alerting> element indicates whether the CS to PS SRVCC of calls in alerting phase is supported by both the served SC UE and the SCC AS; and\n-\toptionally, <anyExt> element containing elements defined by future version of this document.\nWhen the <srvcc-ext> element contains the <Setup-info> element, then the <Setup-info> element contains:\n-\tthe <C-MSISDN> element containing the C-MSISDN of the served SC UE;\n-\tthe <direction> element indicating the role of the MSC server in the session set up.\nRecipient of the XML ignores any unknown element and any unknown attribute.\n",
                            "figures_meta_data": [],
                            "tables": []
                        }
                    ]
                },
                {
                    "title": "D.4.4\tIANA registration template",
                    "description": "",
                    "summary": "",
                    "text_content": "Your Name:\n<MCC name>\nYour Email Address:\n<MCC email address>\nMedia Type Name:\nApplication\nSubtype name:\nvnd.3gpp.srvcc-ext+xml\nRequired parameters:\nNone\nOptional parameters:\n\"charset\"\tthe parameter has identical semantics to the charset parameter of the \"application/xml\" media type as specified in section 9.1 of IETF RFC 7303.\nEncoding considerations:\nbinary.\nSecurity considerations:\nSame as general security considerations for application/xml media type as specified in section 9.1 of IETF RFC 7303. In addition, this media type provides a format for exchanging information in SIP, so the security considerations from IETF RFC 3261apply.\nThe information transported in this media type does not include active or executable content.\nMechanisms for privacy and integrity protection of protocol parameters exist. Those mechanisms as well as authentication and further security mechanisms are described in 3GPP TS 24.229.\nThis media type does not include provisions for directives that institute actions on a recipient's files or other resources.\nThis media type does not include provisions for directives that institute actions that, while not directly harmful to the recipient, may result in disclosure of information that either facilitates a subsequent attack or else violates a recipient's privacy in any way.\nThis media type does not employ compression.\nInteroperability considerations:\nSame as general interoperability considerations for application/xml media type as specified in section 9.1 of IETF RFC 7303. Any unknown XML elements and any unknown XML attributes are to be ignored by recipient of the MIME body.\nPublished specification:\n3GPP TS 24.237 \"IP Multimedia Subsystem (IMS) Service Continuity\", version 13.1.0, available via http://www.3gpp.org/specs/numbering.htm.\nApplications which use this media type:\nApplications supporting the service continuity as described in the published specification.\nFragment identifier considerations:\nThe handling in section 5 of IETF RFC 7303 applies.\nRestrictions on usage:\nNone\nProvisional registration? (standards tree only):\nN/A\nAdditional information:\n1.\tDeprecated alias names for this type: none\n2.\tMagic number(s): none\n3.\tFile extension(s): none\n4.\tMacintosh File Type Code(s): none\n5.\tObject Identifier(s) or OID(s): none\nIntended usage:\nCommon\nPerson to contact for further information:\n-\tName: <MCC name>\n-\tEmail: <MCC email address>\n-\tAuthor/Change controller:\ni)\tAuthor: 3GPP CT1 Working Group/3GPP_TSG_CT_WG1@LIST.ETSI.ORG\nii)\tChange controller: <MCC name>/<MCC email address>\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                }
            ]
        },
        {
            "title": "D.5\tXML schema for access transfer events",
            "description": "",
            "summary": "",
            "tables": [],
            "figures_meta_data": [],
            "subsections": [
                {
                    "title": "D.5.1\tGeneral",
                    "description": "",
                    "summary": "",
                    "text_content": "This subclause defines XML schema and MIME type for transport of events related to access transfer of a session.\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "D.5.2\tXML schema",
                    "description": "",
                    "summary": "",
                    "text_content": "<?xml version=\"1.0\"?>\n<xs:schema\nxmlns:xs=\"http://www.w3.org/2001/XMLSchema\"\nelementFormDefault=\"qualified\"\nattributeFormDefault=\"unqualified\">\n\n<xs:element name=\"events\" type=\"eventsType\"/>\n\n<xs:complexType name=\"eventsType\">\n<xs:sequence>\n<xs:element name=\"event\" type=\"eventType\" maxOccurs=\"unbounded\"/>\n</xs:sequence>\n<xs:anyAttribute namespace=\"##any\" processContents=\"lax\"/>\n</xs:complexType>\n\n<xs:complexType name=\"eventType\">\n<xs:sequence>\n<xs:any namespace=\"##any\" processContents=\"lax\" minOccurs=\"0\" maxOccurs=\"unbounded\"/>\n</xs:sequence>\n<xs:attribute name=\"event-type\" type=\"xs:unsignedInt\"/>\n<xs:anyAttribute namespace=\"##any\" processContents=\"lax\"/>\n</xs:complexType>\n\n<xs:element name=\"STNResp-params\" type=\"STNResp-paramsType\"/>\n\n<xs:complexType name=\"STNResp-paramsType\">\n<xs:sequence>\n<xs:element name=\"transfer-details\" type=\"xs:base64Binary\"/>\n<xs:element name=\"redirect-speech\" type=\"xs:boolean\"/>\n<xs:any namespace=\"##any\" processContents=\"lax\" minOccurs=\"0\" maxOccurs=\"unbounded\"/>\n</xs:sequence>\n<xs:anyAttribute namespace=\"##any\" processContents=\"lax\"/>\n</xs:complexType>\n\n\n</xs:schema>\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "D.5.3\tSemantic",
                    "description": "",
                    "summary": "",
                    "text_content": "",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": [
                        {
                            "title": "D.5.3.1\tGeneral",
                            "text_content": "The <events> element is the root element of the XML document and contains one or more <event> elements.\nEach <event> element describes one event occuring in session and:\n1)\tcontains the \"event-type\" attribute which indicates the event type; and\n2)\tcan contain subelements related to the event type indicated by the \"event-type\" attribute.\nNOTE:\tThe subelements of the <event> are validated by the <xs:any namespace=\"##any\" processContents=\"lax\" minOccurs=\"0\" maxOccurs=\"unbounded\"/> particle of the <event> element.\nThe following applies for the \"event-type\" attribute of the <event> element:\n-\tsender of the XML does not set the \"event-type\" attribute to any value other than those described in this section; and\n-\trecipient of the XML ignores the <event> element with \"event-type\" attribute containing a value other than those described in this section.\nRecipient of the XML ignores any unknown element and any unknown attribute.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "D.5.3.2\tRequirements for individual events",
                            "text_content": "If the \"event-type\" attribute of the <event> element is 1, then the <event> element indicates the session transfer notification request.\nIf the \"event-type\" attribute of the <event> element is 2, then the <event> element indicates the session transfer notification response and the <event> element contains the <STNResp-params> element. The <STNResp-params> element contains <transfer-details> element and the <redirect-speech> element. The <transfer-details> element contains the content according to subclause D.5.3.3. The <redirect-speech> element indicates whether the ATCF requires the MSC server to redirect the speech media component of the session transferred by the CS to PS SRVCC access transfer.\nNOTE 1:\tBinary data are encoded according to the XML type base64Binary.\nNOTE 2:\tMIME body with the \"event-type\" attribute of the <event> element equal to 2 is provided after receiving the MIME body with the \"event-type\" attribute of the <event> element equal to 1.\nIf the \"event-type\" attribute of the <event> element is 3, then the <event> element indicates the session transfer preparation.\nNOTE 3:\tMIME body with the \"event-type\" attribute of the <event> element equal to 3 is provided after receiving the MIME body with the \"event-type\" attribute of the <event> element equal to 2.\nIf the \"event-type\" attribute of the <event> element is 4, then the <event> element indicates the session transfer cancellation.\nNOTE 4:\tMIME body with the \"event-type\" attribute of the <event> element equal to 4 is provided either after receiving the MIME body with the \"event-type\" attribute of the <event> element equal to 2 or after providing the MIME body with the \"event-type\" attribute of the <event> element equal to 3.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "D.5.3.3\tATGW transfer details",
                            "text_content": "The ATGW transfer details indicate the ATGW media configuration to be used by SC UE when sending the speech media of the session transferred by the CS to PS SRVCC access transfer.\nThe ATGW transfer details are encoded in the structure shown in the figure D.5.3.3-1 and table D.5.3.3-1.\n\nFigure D.5.3.3-1: ATGW transfer details structure\nTable D.5.3.3-1: ATGW transfer details structure\n\n\nFigure D.5.3.3-2: ATGW transfer details content structure when the ATGW transfer details content type field indicates ATGW-IPv4-address-and-port\nTable D.5.3.3-2: ATGW transfer details content structure when the ATGW transfer details content type field indicates ATGW-IPv4-address-and-port\n\n\nFigure D.5.3.3-3: ATGW transfer details content structure when the ATGW transfer details content type field indicates ATGW-IPv6-address-and-port\nTable D.5.3.3-3: ATGW transfer details content structure when the ATGW transfer details content type field indicates ATGW-IPv6-address-and-port\n\n",
                            "figures_meta_data": [],
                            "tables": [
                                {
                                    "description": "The ATGW transfer details are encoded in the structure shown in the figure D.5.3.3-1 and table D.5.3.3-1.",
                                    "table number": 1,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table D.5.3.3-1: ATGW transfer details structure",
                                    "table number": 2,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "",
                                    "table number": 3,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table D.5.3.3-2: ATGW transfer details content structure when the ATGW transfer details content type field indicates ATGW-IPv4-address-and-port",
                                    "table number": 4,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "",
                                    "table number": 5,
                                    "summary": "",
                                    "name": ""
                                },
                                {
                                    "description": "Table D.5.3.3-3: ATGW transfer details content structure when the ATGW transfer details content type field indicates ATGW-IPv6-address-and-port",
                                    "table number": 6,
                                    "summary": "",
                                    "name": ""
                                }
                            ]
                        }
                    ]
                },
                {
                    "title": "D.5.4\tIANA registration template",
                    "description": "",
                    "summary": "",
                    "text_content": "Your Name:\n<MCC name>\nYour Email Address:\n<MCC email address>\nMedia Type Name:\nApplication\nSubtype name:\nvnd.3gpp.access-transfer-events+xml\nRequired parameters:\nNone\nOptional parameters:\n\"charset\"\tthe parameter has identical semantics to the charset parameter of the \"application/xml\" media type as specified in section 9.1 of IETF RFC 7303.\n\"et\"\twhen the MIME type is included in the Accept header field, the \"et\" parameter value is a comma delimited list of the values of the \"event-type\" attribute of the <event> element of the <events> root element which the sender of the Accept header field is able to receive. The <events> root element is defined by XML schema described in the Published specification.\nEncoding considerations:\nbinary.\nSecurity considerations:\nSame as general security considerations for application/xml media type as specified in section 9.1 of IETF RFC 7303. In addition, this media type provides a format for exchanging information in SIP, so the security considerations from IETF RFC 3261apply.\nThe information transported in this media type does not include active or executable content.\nMechanisms for privacy and integrity protection of protocol parameters exist. Those mechanisms as well as authentication and further security mechanisms are described in 3GPP TS 24.229.\nThis media type does not include provisions for directives that institute actions on a recipient's files or other resources.\nThis media type does not include provisions for directives that institute actions that, while not directly harmful to the recipient, may result in disclosure of information that either facilitates a subsequent attack or else violates a recipient's privacy in any way.\nThis media type does not employ compression.\nInteroperability considerations:\nSame as general interoperability considerations for application/xml media type as specified in section 9.1 of IETF RFC 7303. Any unknown XML elements and any unknown XML attributes are to be ignored by recipient of the MIME body.\nPublished specification:\n3GPP TS 24.237 \"IP Multimedia Subsystem (IMS) Service Continuity\", version 13.1.0, available via http://www.3gpp.org/specs/numbering.htm.\nApplications which use this media type:\nApplications supporting the service continuity as described in the published specification.\nFragment identifier considerations:\nThe handling in section 5 of IETF RFC 7303 applies.\nRestrictions on usage:\nNone\nProvisional registration? (standards tree only):\nN/A\nAdditional information:\n1.\tDeprecated alias names for this type: none\n2.\tMagic number(s): none\n3.\tFile extension(s): none\n4.\tMacintosh File Type Code(s): none\n5.\tObject Identifier(s) or OID(s): none\nIntended usage:\nCommon\nPerson to contact for further information:\n-\tName: <MCC name>\n-\tEmail: <MCC email address>\n-\tAuthor/Change controller:\ni)\tAuthor: 3GPP CT1 Working Group/3GPP_TSG_CT_WG1@LIST.ETSI.ORG\nii)\tChange controller: <MCC name>/<MCC email address>\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                }
            ]
        },
        {
            "title": "D.6\tPS-to-CS preparation XML schema",
            "description": "",
            "summary": "",
            "tables": [],
            "figures_meta_data": [],
            "subsections": [
                {
                    "title": "D.6.1\tGeneral",
                    "description": "",
                    "summary": "",
                    "text_content": "This subclause defines the XML schema and the MIME type for information exchanged during codec inquiry prior to PS to CS SRVCC access transfer.\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "D.6.2\tXML schema",
                    "description": "",
                    "summary": "",
                    "text_content": "<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<xs:schema\nxmlns:xs=\"http://www.w3.org/2001/XMLSchema\"\nelementFormDefault=\"qualified\"\nattributeFormDefault=\"unqualified\">\n\n<xs:element name=\"PS-to-CS-preparation-request\" type=\"PS-to-CS-preparation-requestType\"/>\n<xs:element name=\"PS-to-CS-preparation-response\" type=\"PS-to-CS-preparation-responseType\"/>\n\n<xs:complexType name=\"PS-to-CS-preparation-requestType\">\n<xs:sequence>\n<xs:element name=\"MSC-server-supported-codec-list\" type=\"xs:base64Binary\"/>\n<xs:element name=\"anyExt\" type=\"anyExtType\" minOccurs=\"0\"/>\n<xs:any namespace=\"##other\" processContents=\"lax\" minOccurs=\"0\" maxOccurs=\"unbounded\"/>\n</xs:sequence>\n<xs:anyAttribute namespace=\"##any\" processContents=\"lax\"/>\n</xs:complexType>\n\n<xs:complexType name=\"PS-to-CS-preparation-responseType\">\n<xs:sequence>\n<xs:choice>\n<xs:element name=\"currently-possible\" type=\"currently-possibleType\" minOccurs=\"0\"/>\n<xs:element name=\"currently-not-possible\" type=\"currently-not-possibleType\" minOccurs=\"0\"/>\n</xs:choice>\n<xs:element name=\"anyExt\" type=\"anyExtType\" minOccurs=\"0\"/>\n<xs:any namespace=\"##other\" processContents=\"lax\" minOccurs=\"0\" maxOccurs=\"unbounded\"/>\n</xs:sequence>\n<xs:anyAttribute namespace=\"##any\" processContents=\"lax\"/>\n</xs:complexType>\n\n<xs:complexType name=\"currently-possibleType\">\n<xs:sequence>\n<xs:element name=\"IMS-preferred-codec-list\" type=\"xs:base64Binary\"/>\n<xs:element name=\"anyExt\" type=\"anyExtType\" minOccurs=\"0\"/>\n<xs:any namespace=\"##other\" processContents=\"lax\" minOccurs=\"0\" maxOccurs=\"unbounded\"/>\n</xs:sequence>\n<xs:anyAttribute namespace=\"##any\" processContents=\"lax\"/>\n</xs:complexType>\n\n<xs:complexType name=\"currently-not-possibleType\">\n<xs:sequence>\n<xs:element name=\"session\" type=\"sessionType\" minOccurs=\"0\" maxOccurs=\"unbounded\"/>\n<xs:element name=\"anyExt\" type=\"anyExtType\" minOccurs=\"0\"/>\n<xs:any namespace=\"##other\" processContents=\"lax\" minOccurs=\"0\" maxOccurs=\"unbounded\"/>\n</xs:sequence>\n<xs:anyAttribute namespace=\"##any\" processContents=\"lax\"/>\n</xs:complexType>\n\n<xs:complexType name=\"sessionType\">\n<xs:sequence>\n<xs:element name=\"state-info\" type=\"xs:string\"/>\n<xs:element name=\"direction\" type=\"xs:string\"/>\n<xs:element name=\"speech-state\" type=\"xs:string\"/>\n<xs:element name=\"supported-features\" type=\"supported-featuresType\" minOccurs=\"0\"/>\n<xs:element name=\"anyExt\" type=\"anyExtType\" minOccurs=\"0\"/>\n<xs:any namespace=\"##other\" processContents=\"lax\" minOccurs=\"0\" maxOccurs=\"unbounded\"/>\n</xs:sequence>\n<xs:anyAttribute namespace=\"##any\" processContents=\"lax\"/>\n</xs:complexType>\n\n<xs:complexType name=\"supported-featuresType\">\n<xs:sequence>\n<xs:element name=\"feature-tag\" type=\"feature-tagType\" maxOccurs=\"unbounded\"/>\n<xs:element name=\"anyExt\" type=\"anyExtType\" minOccurs=\"0\"/>\n<xs:any namespace=\"##other\" processContents=\"lax\" minOccurs=\"0\" maxOccurs=\"unbounded\"/>\n</xs:sequence>\n<xs:anyAttribute namespace=\"##any\" processContents=\"lax\"/>\n</xs:complexType>\n\n<xs:complexType name=\"feature-tagType\">\n<xs:simpleContent>\n<xs:extension base=\"xs:string\">\n<xs:attribute name=\"name\" type=\"xs:string\">\n</xs:attribute>\n</xs:extension>\n</xs:simpleContent>\n</xs:complexType>\n\n<xs:complexType name=\"anyExtType\">\n<xs:sequence>\n<xs:any namespace=\"##any\" processContents=\"lax\" minOccurs=\"0\" maxOccurs=\"unbounded\"/>\n</xs:sequence>\n</xs:complexType>\n\n</xs:schema>\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "D.6.3\tAdditional syntactic rules",
                    "description": "",
                    "summary": "",
                    "text_content": "The root element of the XML text shall be either the <PS-to-CS-preparation-request> element or the <PS-to-CS-preparation-response> element.\nThe <PS-to-CS-preparation-request> element:\n1)\tshall include the <MSC-server-supported-codec-list> element;\n2)\tmay include the <anyExt> element;\n3)\tmay include elements specified in other namespaces; and\n4)\tmay include attributes specified in this namespace or other namespaces.\nThe <PS-to-CS-preparation-response> element:\n1)\tshall include one of the following:\na)\tthe <currently-possible> element; or\nb)\tthe <currently-not-possible> element;\n2)\tmay include the <anyExt> element;\n3)\tmay include elements specified in other namespaces; and\n4)\tmay include attributes specified in this namespace or other namespaces.\nThe <currently-possible> element:\n1)\tshall include the <IMS-preferred-codec-list> element;\n2)\tmay include the <anyExt> element;\n3)\tmay include XML elements specified in other XML namespaces; and\n4)\tmay include attributes specified in this namespace or other namespaces.\nThe <currently-not-possible> element:\n1)\tmay include one or more <session> elements;\n2)\tmay include the <anyExt> element;\n3)\tmay include XML elements specified in other XML namespaces; and\n4)\tmay include attributes specified in this namespace or other namespaces.\nThe <session> element:\n1)\tshall include the <state-info> element set to one of the values indicated in table D.6.3-1;\nTable D.6.3-1: ABNF syntax of values of the <state-info> element\nstate-info-values = alerting-phase-value / pre-alerting-phase-value / confirmed-dialog-value\nalerting-phase-value = %x65.61.72.6c.79 ; \"early\"\npre-alerting-phase-value = %x70.72.65.2d.61.6c.65.72.74.69.6e.67 ; \"pre-alerting\"\nconfirmed-dialog-value = %x63.6f.6e.66.69.72.6d.65.64 ; \"confirmed\"\n\n2)\tshall include the <direction> element set to one of the values indicated in table D.6.3-2;\nTable D.6.3-2: ABNF syntax of values of the <direction> element\ndirection-values = initiator-value / receiver-value\ninitiator-value = %x69.6e.69.74.69.61.74.6f.72 ; \"initiator\"\nreceiver-value = %x72.65.63.65.69.76.65.72 ; \"receiver\"\n\n3)\tshall include the <speech-state> element set to one of the values indicated in table D.6.3-3; and\nTable D.6.3-2: ABNF syntax of values of the <speech-state> element\nspeech-state-values = active-speech-media-component / inactive-speech-media-component\nactive-speech-media-component = %x61.63.74.69.76.65 ; \"active\"\ninactive-speech-media-component = %x69.6e.61.63.74.69.76.65 ; \"inactive\"\n\n4)\tmay include the <supported-features> element.\nThe <supported-features> element:\n1)\tshall include zero or more <feature-tag> elements;\n2)\tmay include the <anyExt> element; and\n3)\tmay include elements specified in other namespaces; and\n4)\tmay include attributes specified in this namespace or other namespaces.\nThe <feature-tag> element shall include the \"name\" attribute.\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "D.6.4\tSemantic",
                    "description": "",
                    "summary": "",
                    "text_content": "A entity receiving an XML text compliant to the XML schema specified in subclause D.6.2 shall ignore any unknown element and any unknown attribute.\nPresence of the <PS-to-CS-preparation-request> element shall indicate that the XML text carries the PS-to-CS-preparation-request.\nPresence of the <PS-to-CS-preparation-response> element shall indicate that the XML text carries the PS-to-CS-preparation-response.\nThe <MSC-server-supported-codec-list> element shall contain an SDP body with one audio m= line with one or more RTP payload types that are supported commonly by the served SC UE, the target RAN and the target CS-MGW selected by the MSC server.\nPresence of the <currently-possible> element shall indicate that the PS to CS SRVCC access transfer is currently possible.\nThe <IMS-preferred-codec-list> element shall contain an SDP body with one audio m= line with one or more RTP payload types that are preferred by the ATCF to be used by the MSC server.\nPresence of the <currently-not-possible> element shall indicate that the PS to CS SRVCC access transfer is currently not possible.\nThe <session> element describe a session of the served SC UE in PS.\nThe <state-info> element indicates the state of the session, i.e. whether the session is in the pre-alerting phase, is in the alerting phase or is a confirmed dialog.\nThe <direction> element indicates the direction of the session, i.e. whether the served SC UE is an initiator of the session or a receiver of the session.\nThe <speech-state> element indicates the state of the speech media component of the session, i.e. whether the speech media component is an active speech media component or an inactive speech media component.\nThe \"name\" attribute of the <feature-tag> element indicates a media feature tag supported by the entity sending the XML text. The value, if included, of the <feature-tag> element indicates a value of the media feature tag supported by the sender of the XML text.\nThe <anyExt> element shall convey extensions.\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "D.6.5\tIANA registration template",
                    "description": "",
                    "summary": "",
                    "text_content": "Editors' note (CR#1258, WID: TEI14): MCC is request to register the MIME type when the Rel-14 is completed.\nYour Name:\n<MCC name>\nYour Email Address:\n<MCC email address>\nMedia Type Name:\nApplication\nSubtype name:\nvnd.3gpp.PS-to-CS-preparation+xml\nRequired parameters:\nNone\nOptional parameters:\n\"charset\"\tthe parameter has identical semantics to the charset parameter of the \"application/xml\" media type as specified in section 9.1 of IETF RFC 7303.\nEncoding considerations:\nbinary.\nSecurity considerations:\nSame as general security considerations for application/xml media type as specified in section 9.1 of IETF RFC 7303. In addition, this media type provides a format for exchanging information in SIP, so the security considerations from IETF RFC 3261apply.\nThe information transported in this media type does not include active or executable content.\nMechanisms for privacy and integrity protection of protocol parameters exist. Those mechanisms as well as authentication and further security mechanisms are described in 3GPP TS 24.229.\nThis media type does not include provisions for directives that institute actions on a recipient's files or other resources.\nThis media type does not include provisions for directives that institute actions that, while not directly harmful to the recipient, may result in disclosure of information that either facilitates a subsequent attack or else violates a recipient's privacy in any way.\nThis media type does not employ compression.\nInteroperability considerations:\nSame as general interoperability considerations for application/xml media type as specified in section 9.1 of IETF RFC 7303.\nPublished specification:\n3GPP TS 24.237 \"IP Multimedia Subsystem (IMS) Service Continuity\", version 14.2.0, available via http://www.3gpp.org/specs/numbering.htm.\nApplications which use this media type:\nApplications supporting the service continuity as described in the published specification.\nFragment identifier considerations:\nThe handling in section 5 of IETF RFC 7303 applies.\nRestrictions on usage:\nNone\nProvisional registration? (standards tree only):\nN/A\nAdditional information:\n1.\tDeprecated alias names for this type: none\n2.\tMagic number(s): none\n3.\tFile extension(s): none\n4.\tMacintosh File Type Code(s): none\n5.\tObject Identifier(s) or OID(s): none\nIntended usage:\nCommon\nPerson to contact for further information:\n-\tName: <MCC name>\n-\tEmail: <MCC email address>\n-\tAuthor/Change controller:\ni)\tAuthor: 3GPP CT1 Working Group/3GPP_TSG_CT_WG1@LIST.ETSI.ORG\nii)\tChange controller: <MCC name>/<MCC email address>\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                }
            ]
        },
        {
            "title": "E.1\tInfo package for transfer of the conference information",
            "description": "",
            "summary": "",
            "tables": [],
            "figures_meta_data": [],
            "subsections": [
                {
                    "title": "E.1.1\tScope",
                    "description": "",
                    "summary": "",
                    "text_content": "This subclause contains the information required for the IANA registration of info package g.3gpp.mid-call in accordance with IETF RFC 6086 [54].\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "E.1.2\tg.3gpp.mid-call info package",
                    "description": "",
                    "summary": "",
                    "text_content": "",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": [
                        {
                            "title": "E.1.2.1\tOverall description",
                            "text_content": "When PS to CS access transfer with the MSC Server assisted mid-call feature is applied for a session with conference focus there is a need to deliver participant identities from  to MSC server.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "E.1.2.2\tApplicability",
                            "text_content": "This package is used to transport participant identities when the PS to CS access transfer with the MSC server assisted mid-call feature is applied to a session with conference focus.\nE.1.2.2A\tAppropriateness of INFO Package Usage\nA number of solutions were discussed for the transportation of identities of up to 5 conference participants from the SCC AS (a B2BUA) to the MSC server (a UA). The solutions were:\n1)\tUse of subscription to the conference event package as specified in IETF RFC 4575.\n2)\tUse of the session related methods (e.g. SIP 200 (OK) response to the SIP INVITE request).\n3)\tUse of the SIP MESSAGE method.\n4)\tUse of media plane mechanisms.\n5)\tUse of the SIP INFO method as decribed in IETF RFC 6086, by defining a new info package.\nFurthermore, each of the solutions 1), 2), 3), 4) and 5) was evaluated.\nThe use of the conference event package was discounted for the following reasons:\n1)\tWhen an access transfer needs to occur, the MSC server sends a particular SIP INVITE request to the SCC AS to initiate the access transfer of the dialog-to-be-transferred. Upon reception of the particular SIP INVITE request, the SCC AS ensures that the media of the session supported by the dialog-to-be-transferred are redirected from an original UA served by the SCC AS to the MSC server. If the dialog-to-be-transferred happens to be with a conference focus and the conference session happens to be established by the original UA served by the SCC AS, then the access transfer procedure requires the MSC server to be aware of identities of up to 5 conference participants of the conference session. In the majority of cases of access transfer, the dialog-to-be-transferred is not with a conference focus. In even fewer cases of access transfer, the conference session happens to be established by the original UA served by the SCC AS.\n2)\tIf the MSC server sent the SIP SUBSCRIBE request before sending the particular SIP INVITE request and the dialog-to-be-transferred does not happen to be with a conference focus or the conference session does not happen to be established by the original UA served by the SCC AS, then two messages (a SIP SUBSCRIBE request, a SIP 4xx response to the SIP SUBSCRIBE request) would be exchanged between the MSC server and the SCC AS. In comparison, zero messages are exchanged when using the SIP INFO method.\n3)\tIf the MSC server sent the SIP SUBSCRIBE request before sending the particular SIP INVITE request, the dialog-to-be-transferred happens to be with a conference focus and the conference session happens to be established by the original UA served by the SCC AS, then four messages (a SIP SUBSCRIBE request, a SIP 2xx response to the SIP SUBSCRIBE request, a SIP NOTIFY request, a SIP 2xx response to the SIP NOTIFY request) would be exchanged between the MSC server and the SCC AS. In comparison, only two messages (a SIP INFO request, a SIP 2xx response to the SIP INFO request, are exchanged when using the SIP INFO method.\n4)\tIf the MSC server sent the SIP SUBSCRIBE request after receiving a particular SIP response to the particular SIP INVITE request, the particular SIP response includes a Contact header field with sip.isfocus media feature tag indicating that the dialog-to-be-transferred happens to be with a conference focus, and the conference session happens not to be established by the original UA served by the SCC AS, then two messages (a SIP SUBSCRIBE request, a SIP 4xx response to the SIP SUBSCRIBE request) would be exchanged between the MSC server and the SCC AS. In comparison, zero messages are exchanged when using the SIP INFO method.\n5)\tIf the MSC server sent the SIP SUBSCRIBE request after receiving a particular SIP response to the particular SIP INVITE request, the particular SIP response includes a Contact header field with sip.isfocus media feature tag indicating the dialog-to-be-transferred happens to be with a conference focus, and the conference session happens to be established by the original UA served by the SCC AS, then four messages (a SIP SUBSCRIBE request, a SIP 2xx response to the SIP SUBSCRIBE request, a SIP NOTIFY request, a SIP 2xx response to the SIP NOTIFY request) would be exchanged between the MSC server and the SCC AS. In comparison, only two messages (a SIP INFO request, a SIP 2xx response to the SIP INFO request) are exchanged when using the SIP INFO method.\n6)\tIn the SIP INFO method based solution, it is simpler to associate the information of identities of up to 5 conference participants of the dialog-to-be-transferred with the particular SIP INVITE request as the SCC AS associates the particular SIP INVITE request with a dialog-to-be-transferred and the SIP INFO request is sent as an in-dialog request in a dialog created as result of the particular SIP INVITE request. In the use of the conference event package, the SIP SUBSCRIBE request and the particular SIP INVITE request are not related at the SIP level and SCC AS might associate the SIP SUBSCRIBE request with a dialog-to-be-transferred different to the one associated with the SIP INVITE request.\nThe use of session related methods was discounted as it was concluded that bodies should not be included in SIP responses and the SIP UPDATE method is not appropriate since the session is not modified.\nUse of the SIP MESSAGE method was discounted since the use of the SIP INFO method enables negotiation of supported event packages in the SIP INVITE transaction while the use of the SIP MESSAGE method does not.\nUse of the media plane mechanisms was discounted since the amount of information transferred from the SCC AS to the MSC server is limited and set up of TCP based media stream would generate extra messages.\nBased on the above analyses, the SIP INFO method was chosen to transport the identities of up to 5 conference participants from the SCC AS to the MSC server.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "E.1.2.3\tInfo package name",
                            "text_content": "g.3gpp.mid-call\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "E.1.2.4\tInfo package parameters",
                            "text_content": "None defined\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "E.1.2.5\tSIP options tags",
                            "text_content": "None defined\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "E.1.2.6\tINFO message body parts",
                            "text_content": "The MIME type of the message body carrying participant identities is application/vnd.3gpp.mid-call+xml. application/vnd.3gpp.mid-call+xml MIME type is defined in 3GPP TS 24.237.\nWhen associated with the g.3gpp.mid-call info package, the Content-Disposition value of the message body carrying participant identities is \"info-package\".\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "E.1.2.7\tInfo package usage restrictions",
                            "text_content": "None defined.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "E.1.2.8\tRate of INFO Requests",
                            "text_content": "Single INFO request generated after session set up.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "E.1.2.9\tInfo package security considerations",
                            "text_content": "The security is based on the generic security mechanism provided for the underlying SIP signalling. No additional security mechanism is defined.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "E.1.2.10\tImplementation details and examples",
                            "text_content": "UAC generation of INFO requests: See 3GPP TS 24.237: \"IP Multimedia Subsystem (IMS) Service Continuity; Stage 3\"\nUAS processing of INFO requests: See 3GPP TS 24.237: \"IP Multimedia Subsystem (IMS) Service Continuity; Stage 3\"\nExamples: See 3GPP TS 24.237: \"IP Multimedia Subsystem (IMS) Service Continuity; Stage 3\"\n",
                            "figures_meta_data": [],
                            "tables": []
                        }
                    ]
                }
            ]
        },
        {
            "title": "E.2\tINFO package for transfer of state-and-event info",
            "description": "",
            "summary": "",
            "tables": [],
            "figures_meta_data": [],
            "subsections": [
                {
                    "title": "E.2.1\tScope",
                    "description": "",
                    "summary": "",
                    "text_content": "This annex defines an info package in accordance with IETF RFC 6086 [54] for sending state and event information during PS to CS SRVCC access transfer using SIP INFO requests.\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "E.2.2\tstate-and-event info package",
                    "description": "",
                    "summary": "",
                    "text_content": "",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": [
                        {
                            "title": "E.2.2.1\tGeneral",
                            "text_content": "This subclause contains the information required for the IANA registration of an info package.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "E.2.2.2\tOverall description",
                            "text_content": "When PS to CS SRVCC access transfer from PS to CS access is applied for a session with an active full duplex speech component and the related dialog is in early state there is a need to deliver state information from an SCC AS to an MSC server. Further it is requested that an MSC server supporting PS to CS SRVCC for calls in alerting phase informs the SCC AS about a UE having accepted a terminating call.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "E.2.2.3\tApplicability",
                            "text_content": "This package is used to transport session state information and related event information when a session in alerting phase is transferred from PS to CS using SRVCC access transfer procedures.\nThe mechanism allows that information about the session that is subject to PS to CS SRVCC and related events to be sent inside an existing dialog due to the session transfer SIP INVITE request.\nE.2.2.3A\tAppropriateness of INFO Package Usage\nA number of solutions for the transportation of event and state related information between the SCC AS (a B2BUA) and MSC server (a UA). The solutions considered were:\n1.\tUse of session related SIP methods for transporting event and state information, e.g. SIP 183 response, SIP UPDATE request.\n2.\tUse of subscription to the dialog-event package as described in IETF RFC 4325.\n3.\tUse of SIP MESSAGE method.\n4.\tUse of media plane mechanisms.\n5.\tUse of SIP INFO method as decribed in IETF RFC 6086, by defining a new info package.\nFurthermore, each of the solutions was evaluated.\nThe use of session related SIP methods was discounted as it was concluded that bodies should not be included in SIP responses and the SIP UPDATE method is not appropriate since the session is not modified.\nThe use of the dialog-event package was discounted for the following reasons:\na)\tWhen an access transfer needs to occur, the MSC server sends a particular SIP INVITE request to the SCC AS to initiate the access transfer of the dialog-to-be-transferred. Upon reception of the particular SIP INVITE request, the SCC AS ensures that the media of the session supported by the dialog-to-be-transferred are redirected from an original UA served by SCC AS to the MSC server. The access transfer procedure requires the MSC server to be aware of the state related information of the dialog-to-be-transferred. This can be provided implicitly or explicitly to the MSC server. When the dialog-to-be-transferred happens to be a confirmed dialog, the SCC AS implicitly informs the MSC server about the state related information of the dialog-to-be-transferred by accepting the particular SIP INVITE request. When the dialog-to-be-transferred happens to be an early dialog, the access transfer procedure requires the SCC AS to explicitly provide the state related information of the dialog-to-be-transferred to the MSC server. In the majority of cases of access transfer, the dialog-to-be-transferred will be a confirmed dialog. If the MSC server sent the SIP SUBSCRIBE request before sending the particular SIP INVITE request, then the MSC will receive the state related information of the dialog-to-be-transferred explicitly in the majority of cases when such explicit information is not required.\nb)\tIf the MSC server sent the SIP SUBSCRIBE request before sending the particular SIP INVITE request, then four messages (a SIP SUBSCRIBE request, a SIP 2xx response to the SIP SUBSCRIBE request, a SIP NOTIFY request, a SIP 2xx response to the SIP NOTIFY request) would be exchanged between the MSC server and the SCC AS. In comparison, zero messages (if the dialog-to-be-transferred happens to be a confirmed dialog) or only two messages (a SIP INFO request, a SIP 2xx response to the SIP INFO request, if the dialog-to-be-transferred happens to be an early dialog) are exchanged when using the SIP INFO method.c)\tIf the MSC server sent the SIP SUBSCRIBE request after receiving a particular provisional response to the particular SIP INVITE request, then four messages (a SIP SUBSCRIBE request, a SIP 2xx response to the SIP SUBSCRIBE request, a SIP NOTIFY request, a SIP 2xx response to the SIP NOTIFY request) would be exchanged between the MSC server and the SCC AS. In comparison, only two messages (a SIP INFO request, a SIP 2xx response to the SIP INFO request) are exchanged when using the SIP INFO method.\nd)\tIn the SIP INFO method based solution, it is simpler to associate the event and state related information of the dialog-to-be-transferred with the particular SIP INVITE request as SCC AS associates the particular SIP INVITE request with a dialog-to-be-transferred and the SIP INFO request is sent as an in-dialog request in a dialog created as result of the particular SIP INVITE request. In the use of the dialog-event package, the SIP SUBSCRIBE request and the particular SIP INVITE request are not related on SIP level and SCC AS might associate the SIP SUBSCRIBE request with a dialog-to-be-transferred different than the one associated with the SIP INVITE request.\nUse of the SIP MESSAGE method was discounted since the use of the SIP INFO method enables negotiation of supported event packages in the SIP INVITE transaction while the use of the SIP MESSAGE method does not.\nUse of the media plane mechanisms was discounted since the amount of information transferred between the SCC AS and the MSC server is limited and set up of TCP based media stream would generate extra messages.\nBased on the above analyses, the SIP INFO method was chosen.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "E.2.2.4\tInfo package name",
                            "text_content": "The name of the info package is g.3gpp.state-and-event.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "E.2.2.5\t package parameters",
                            "text_content": "No parameters are defined for the g.3gpp.state-and-event info package.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "E.2.2.6\tSIP option tags",
                            "text_content": "No SIP option tags are defined for the g.3gpp.state-and-event info package.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "E.2.2.7\tINFO message body parts",
                            "text_content": "The state-and-event information is carried in the state-and-event-info message body, defined in annex D of 3GPP TS 24.237.\nThe MIME type value for the message body is \"application/vnd.3gpp.state-and-event-info+xml\", defined in annex D of 3GPP TS 24.237.\nThe Content Disposition value for the message body, when associated with the g.3gpp.state-and-event info package, is \"info-package\" as defined in IETF RFC 6086.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "E.2.2.8\tInfo package usage restrictions",
                            "text_content": "No ge restrictions are defined for the g.3gpp.state-and-event info package.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "E.2.2.9\tRate of INFO requests",
                            "text_content": "No maximum rate or minimum rate is defined for sending SIP INFO requests associated with the g.3gpp.state-and-event info package.\nWhen PS to CS SRVCC for calls in alerting phase is applied, then a single SIP INFO request is generated after the session transfer SIP INVITE request. This can be followed by one more additional SIP INFO request.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "E.2.2.10\tInfo package security considerations",
                            "text_content": "No additional security mechanism is defined for the g.3gpp.state-and-event info package.\nThe security of the g.3gpp.state-and-event info package is based on the generic security mechanism provided for the underlying SIP signalling.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "E.2.2.11\tImplementation details and examples",
                            "text_content": "See 3GPP TS 24.237: \"IP Multimedia Subsystem (IMS) Service Continuity; Stage 3\"\n",
                            "figures_meta_data": [],
                            "tables": []
                        }
                    ]
                }
            ]
        },
        {
            "title": "E.3\tINFO package for transfer of access transfer events",
            "description": "",
            "summary": "",
            "tables": [],
            "figures_meta_data": [],
            "subsections": [
                {
                    "title": "E.3.1\tScope",
                    "description": "",
                    "summary": "",
                    "text_content": "This annex contains the information required for the IANA registration of info package g.3gpp.access-transfer-events in accordance with IETF RFC 6086 [54].\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "E.3.2\tg.3gpp.access-transfer-events info package",
                    "description": "",
                    "summary": "",
                    "text_content": "",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": [
                        {
                            "title": "E.3.2.1\tOverall description",
                            "text_content": "This info packages enables SIP entities to inform each other about events occuring during access transfer of session between access networks. E.g. during CS to PS single radio voice call continuity access transfer the MSC server needs to inform ATCF about the session transfer notification request, ATCF needs to inform MSC server about the session transfer notification response and MSC server needs to inform ATCF about the session transfer preparation.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "E.3.2.2\tApplicability",
                            "text_content": "The info package mechanism has been selected since the transported information cannot be sent in media plane as entities receiving the information are not mandated to always anchor the media and since usage of subscription in order to transport the information has not been seen as feasible as the information can be exchanged bidirectionally.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "E.3.2.3\tInfo package name",
                            "text_content": "g.3gpp.access-transfer-events\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "E.3.2.4\tInfo package parameters",
                            "text_content": "\"et\"\twhen included in the Recv-Info header field and when Accept header field is not present in the SIP message, the \"et\" parameter value is a comma delimited list of the values of the \"event-type\" attribute of the <event> element of the <events> root element which the sender of the Recv-Info header field is able to receive. The <events> root element is defined in XML schema of the MIME type application/vnd.3gpp.access-transfer-events+xml. This parameter applies for the Recv-Info header field and does not apply for the Info-Package header field.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "E.3.2.5\tSIP option tags",
                            "text_content": "None defined\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "E.3.2.6\tINFO message body parts",
                            "text_content": "The MIME type of the message body carrying events information is application/vnd.3gpp.access-transfer-events+xml. The application/vnd.3gpp.access-transfer-events+xml MIME type is defined in 3GPP TS 24.237.\nWhen associated with the g.3gpp.access-transfer-events info package, the Content-Disposition value of the message body carrying participant identities is \"info-package\".\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "E.3.2.7\tInfo package usage restrictions",
                            "text_content": "None defined.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "E.3.2.8\tRate of INFO requests",
                            "text_content": "The rate of the INFO requests depends on the supported event types.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "E.3.2.9\tInfo package security considerations",
                            "text_content": "The security is based on the generic security mechanism provided for the underlying SIP signalling. No additional security mechanism is defined.\n",
                            "figures_meta_data": [],
                            "tables": []
                        },
                        {
                            "title": "E.3.2.10\tImplementation details and examples",
                            "text_content": "UAC generation of INFO requests: See 3GPP TS 24.237: \"IP Multimedia Subsystem (IMS) Service Continuity; Stage 3\"\nUAS processing of INFO requests: See 3GPP TS 24.237: \"IP Multimedia Subsystem (IMS) Service Continuity; Stage 3\"\nExamples: See 3GPP TS 24.237: \"IP Multimedia Subsystem (IMS) Service Continuity; Stage 3\"\n",
                            "figures_meta_data": [],
                            "tables": []
                        }
                    ]
                }
            ]
        },
        {
            "title": "F.1\tIntroduction",
            "description": "",
            "summary": "",
            "tables": [],
            "figures_meta_data": [],
            "subsections": [
                {
                    "title": "F.1.1\tGeneral",
                    "description": "",
                    "summary": "",
                    "text_content": "This annex describes the behaviour of\n1)\tthe network when determining and performing PS to CS SRVCC access transfer for various types of single and multi session scenarios, based on UE and network support of the following features:\n-\tMSC server assisted mid-call feature;\n-\tPS to CS SRVCC for calls in alerting phase; and\n-\tPS to CS SRVCC for originating calls in pre-alerting phase.\n2)\tthe UE when determining and performing PS-CS dual radio access transfer for various types of single and multi session scenarios, based on UE and network support of the following features:\n-\tMSC server assisted mid-call feature;\n-\tPS to CS dual radio access transfer for calls in alerting phase and CS to PS dual radio access transfer for calls in alerting phase; and\n-\tPS to CS dual radio access transfer for originating calls in pre-alerting and CS to PS dual radio access transfer for originating calls in pre-alerting phase.\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "F.1.2\tVoid",
                    "description": "",
                    "summary": "",
                    "text_content": "",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                }
            ]
        },
        {
            "title": "F.2\tPS to CS SRVCC",
            "description": "",
            "summary": "",
            "tables": [],
            "figures_meta_data": [],
            "subsections": [
                {
                    "title": "F.2.1\tKey to interpret PS to CS SRVCC access transfer scenarios",
                    "description": "",
                    "summary": "",
                    "text_content": "The key to interpret the PS to CS SRVCC access transfer scenarios given in tables F.2. 2-1, F.2.2-2 and F.2.3-1 is specified below:\n-\t\"MAM\" represents support of MSC server assisted mid-call feature\n-\t\"ALP\" represents support of PS to CS SRVCC for calls in alerting phase\n-\t\"PAP\" represents support of PS to CS SRVCC for originating calls in pre-alerting phase\n-\t\"CAS\" represents a session with active speech media component, which is a confirmed dialog\n-\t\"CIS\" represents a session with inactive speech media component, which is a confirmed dialog\n-\t\"EAS\" represents a session with active speech media component in alerting phase\n-\t\"EAST\" represents a terminating session with active speech media component in alerting phase\n-\t\"EASO\" represents an originating session with active speech media component in alerting phase\n-\t\"EPS\" represents a session with active speech media component in pre-alerting phase\n-\t\"EPST\" represents a terminating session with active speech media component in pre-alerting phase\n-\t\"EPSO\" represents an originating session with active speech media component in pre-alerting phase\n-\t\"CACS\" represents a session with active speech media component and with conference control, which is a confirmed dialog\n-\t\"CICS\" represents a session with inactive speech media component and with conference control, which is a confirmed dialog\n-\t\"Transfer CACS as CAS\" refers to the behaviour of the SCC AS to transfer CACS, but without conference control\n-\t\"Transfer CICS as CIS\" refers to the behaviour of the SCC AS to transfer CICS, but without conference control\n-\tWhen \"Result in network\" is to transfer a session, the Transaction Identifier (TI) assigned to the call is shown in brackets, e.g. Transfer CAS (TI=0) refers to a TI of zero assigned to this call that is transferred.\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "F.2.2\tPS to CS SRVCC access transfer scenarios",
                    "description": "",
                    "summary": "",
                    "text_content": "Table  F.2.2-1 describes PS to CS SRVCC access transfer scenarios considering only cases when only one session in an early phase exists.\nTable F.2.2-1: PS to CS SRVCC access transfer scenarios, single early session\n\nTable F.2.2-2 below describes PS to CS SRVCC access transfer scenarios when more than one session in an early phase exists and when the UE and the network supports SRVCC access transfer for calls in an early phase.\nTable F.2.2-2: PS to CS SRVCC access transfer scenarios, multiple early sessions\n\n",
                    "tables": [
                        {
                            "description": "Table F.2.2-1: PS to CS SRVCC access transfer scenarios, single early session",
                            "table number": 7,
                            "summary": "",
                            "name": ""
                        },
                        {
                            "description": "Table F.2.2-2: PS to CS SRVCC access transfer scenarios, multiple early sessions",
                            "table number": 8,
                            "summary": "",
                            "name": ""
                        }
                    ],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "F.2.3\tPS to CS SRVCC access transfer scenarios with conference control",
                    "description": "",
                    "summary": "",
                    "text_content": "Table F.2.3-1: PS to CS SRVCC access transfer scenarios with conference control\n\n",
                    "tables": [
                        {
                            "description": "Table F.2.3-1: PS to CS SRVCC access transfer scenarios with conference control",
                            "table number": 9,
                            "summary": "",
                            "name": ""
                        }
                    ],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "F.2.4\tVoid",
                    "description": "",
                    "summary": "",
                    "text_content": "",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                }
            ]
        },
        {
            "title": "F.3\tPS to CS and CS to PS dual radio access transfer",
            "description": "",
            "summary": "",
            "tables": [],
            "figures_meta_data": [],
            "subsections": [
                {
                    "title": "F.3.1\tKey to interpret dual radio access transfer scenarios",
                    "description": "",
                    "summary": "",
                    "text_content": "The key to interpret the PS-CS dual radio access transfer scenarios given in table F.3.1.1 is specified below:\n-\t\"MAM\" represents support of MSC server assisted mid-call feature\n-\t\"ALP\" represents support of PS to CS dual radio access transfer for calls in alerting phase and CS to PS dual radio access transfer for calls in alerting phase\n-\t\"PAP\" represents support of PS to CS dual radio access transfer for originating calls in pre-alerting phase and CS to PS dual radio access transfer for originating calls in pre-alerting phase\n-\t\"CAS\" represents a session with active speech media component, which is a confirmed dialog\n-\t\"CIS\" represents a session with inactive speech media component, which is a confirmed dialog\n-\t\"EAS\" represents a session with active speech media component in alerting phase\n-\t\"EAST\" represents a terminating session with active speech media component in alerting phase\n-\t\"EASO\" represents an originating session with active speech media component in alerting phase\n-\t\"EPS\" represents a session with active speech media component in pre-alerting phase\n-\t\"EPST\" represents a terminating session with active speech media component in pre-alerting phase\n-\t\"EPSO\" represents an originating session with active speech media component in pre-alerting phase\n-\t\"CACS\" represents a session with active speech media component and with conference control, which is a confirmed dialog\n-\t\"CICS\" represents a session with inactive speech media component and with conference control, which is a confirmed dialog\n-\t\"Transfer CACS as CAS\" refers to the behaviour of the UE to transfer CACS, but without conference control\n-\t\"Transfer CICS as CIS\" refers to the behaviour of the UE to transfer CICS, but without conference control\n-\tThe TI value in the \"Result in UE\" column:\no\t(TI set by UE) or (TI set by MSC server) indicates that the TI flag and TI value will be set as part of the 3GPP TS 24.008 [8] procedures by either the UE or the MSC server; and\no\tTI=<value> indicates that the TI flag is assigned as in the terminating mobile case with the TI value according to the <value>.\nNOTE:\tIn the CS to PS dual radio access transfer the TI value is not required.\n",
                    "tables": [],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "F.3.2\tPS to CS dual radio access transfer scenarios",
                    "description": "",
                    "summary": "",
                    "text_content": "Table F.3.2.1: PS to CS dual radio access transfer scenarios\n\n",
                    "tables": [
                        {
                            "description": "Table F.3.2.1: PS to CS dual radio access transfer scenarios",
                            "table number": 10,
                            "summary": "",
                            "name": ""
                        }
                    ],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "F.3.3\tCS to PS dual radio access transfer scenarios",
                    "description": "",
                    "summary": "",
                    "text_content": "Table F.3.3.1: CS to PS dual radio access transfer scenarios\n\n",
                    "tables": [
                        {
                            "description": "Table F.3.3.1: CS to PS dual radio access transfer scenarios",
                            "table number": 11,
                            "summary": "",
                            "name": ""
                        }
                    ],
                    "figures_meta_data": [],
                    "subsubsections": []
                },
                {
                    "title": "F.3.4\tPS to CS dual access transfer scenarios with conference control",
                    "description": "",
                    "summary": "",
                    "text_content": "Table F.3.4-1 describes PS to CS dual radio access transfer scenarios considering cases when at least one potential session to transfer is a conference initiated by the UE.\nTable F.3.4-1: PS to CS dual radio access transfer scenarios with conference control\n\n",
                    "tables": [
                        {
                            "description": "Table F.3.4-1: PS to CS dual radio access transfer scenarios with conference control",
                            "table number": 12,
                            "summary": "",
                            "name": ""
                        }
                    ],
                    "figures_meta_data": [],
                    "subsubsections": []
                }
            ]
        },
        {
            "title": "G.1\tIntroduction",
            "description": "This annex describes how support is indicated for theaccess transfer features described in this document. Specifically:\n-\tHow the SC UE indicates support to the network; and\n-\tHow the SCC AS and ATCF indicate support to the SC UE.\n",
            "summary": "",
            "tables": [],
            "figures_meta_data": [],
            "subsections": []
        },
        {
            "title": "G.2\tSC UE indications of support of access transfer features towards the network",
            "description": "Table G.2-1: SC UE indications of support of access transfer features to the network\n\n",
            "summary": "",
            "tables": [
                {
                    "description": "Table G.2-1: SC UE indications of support of access transfer features to the network",
                    "table number": 13,
                    "summary": "",
                    "name": ""
                }
            ],
            "figures_meta_data": [],
            "subsections": []
        },
        {
            "title": "G.3\tNetwork indications of support of access transfer features towards the SC UE",
            "description": "Table G.3-1: Network indications of support of access transfer features to the SC UE\n\n\n\n\n",
            "summary": "",
            "tables": [
                {
                    "description": "Table G.3-1: Network indications of support of access transfer features to the SC UE",
                    "table number": 14,
                    "summary": "",
                    "name": ""
                },
                {
                    "description": "",
                    "table number": 15,
                    "summary": "",
                    "name": ""
                },
                {
                    "description": "",
                    "table number": 16,
                    "summary": "",
                    "name": ""
                }
            ],
            "figures_meta_data": [],
            "subsections": []
        }
    ]
}